"use strict";function AnEventController(s,d){var c=this;function n(){c.newGuest={name:"",email:{address:"",valid:!1,style:{color:""}}}}c.tempTime={start:"",end:""},c.userIsHost=!1,c.setTempTime=function(e){"start"==e&&(c.tempDateTime.start=new Date),"end"==e&&(c.tempDateTime.end=new Date)},c.unixTimeToDateTime=function(e){return new Date(parseInt(e))},c.dateTimeToUnixTime=function(e){return Date.parse(e)},c.submit=function(){s.info("submitting the form now!")},c.backToUserEvents=function(){$location.path("/userEvents/"+d.uid+"/"+d.token)},c.eventRedirect=function(e,t){var n=e+"/"+d.uid+"/"+d.token;s.info("redirecting to: "+n),$location.path(n)},c.changeSection=function(e){for(s.info("are we here"),i=1;i<=3;i++)i==e?(c.manageSections[i].active=!0,c.manageSections[i].style["background-color"]="yellow",c.manageSections[i].style.color="black"):(c.manageSections[i].active=!1,c.manageSections[i].style["background-color"]="gray",c.manageSections[i].style.color="white")},c.saveEventTime=function(e,t){c.event.eventTimes||(c.event.eventTimes={start:"",end:""},c.event.eventTimes.start=c.dateTimeToUnixTime(c.tempDateTime.start),c.event.eventTimes.end=c.dateTimeToUnixTime(c.tempDateTime.end)),c.tempDateTime.end<c.tempDateTime.start&&"start"==t&&(c.tempDateTime.end=c.tempDateTime.start),"start"==t&&(c.event.eventTimes.start=c.dateTimeToUnixTime(e)),"end"==t&&(c.event.eventTimes.end=c.dateTimeToUnixTime(e))},c.guestsAreInvited=function(){return!!c.event.guestList},c.validateGuestEmail=function(){c.newGuest.email.address&&(new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","").test(c.newGuest.email.address)?(c.newGuest.email.valid=!0,c.newGuest.email.style={color:"green"}):(c.newGuest.email.valid=!1,c.newGuest.email.style={color:""}))},c.isSectionComplete=function(){for(i=0;i<8;i++)s.info(c.requiredInputs[i])},c.saveAndAdvance=function(){c.event.$save().then(function(){s.info("event saved")}).catch(function(e){s.info("error! "+e)}),c.isSectionComplete(),1==c.manageSections[1].complete&&1==c.manageSections[2].complete&&1==c.manageSections[3].complete?c.eventRedirect("/userEvents",d.uid):c.manageSections[1].active?c.changeSection(2):c.manageSections[2].active?c.changeSection(3):c.manageSections[3].active&&c.changeSection(1)},c.addGuestToHostsList=function(){var e=function(e){return btoa(e)}(c.newGuest.email.address);if(c.newGuest.name&&c.newGuest.email.valid){if(c.event.guestList)for(var t=0;c.event.guestList[t];){if(c.event.guestList[t].email==atob(e))return s.info("This guest is already on the list"),void n();t++}else c.event.guestList={};if(registeredUsers[e]){if(registeredUsers[e]==d.uid)return s.info("tried to register the host"),void n();!function(n){ref.child("Users").child(n).child("events").child("pending").child(d.uid).child(d.eventId).set({id:d.eventId,eventTimes:{start:c.event.eventTimes.start,end:c.event.eventTimes.end},name:c.event.name,host:d.uid},function(e){e&&s.info("there was an error"+e)}),ref.child("Users").child(n).child("events").child("pending").once("value",function(e){var t=e.val();s.info(e.val()),t.updated?(s.info("deleting updated"),ref.child("Users").child(n).child("events").child("pending").child("updated").remove(function(e){e&&s.info("Deleting failed: "+e.code)})):s.info("nothing to do")},function(e){e&&s.info("The read failed: "+e.code)})}(registeredUsers[e]),c.event.guestList[registeredUsers[e]]={attending:!1,status:"pending",name:c.newGuest.name,email:c.newGuest.email.address}}else!function(e){s.info("adding them to the UNREGISTERED users list "+e),ref.child("UnregisteredUsers").child(e).child("pending").child(d.uid).child(d.eventId).set({id:d.eventId,host:d.uid,eventTimes:{start:c.event.eventTimes.start,end:c.event.eventTimes.end},name:c.event.name},function(e){e&&s.info("there was an error"+e)})}(e),c.event.guestList[e]={attending:!1,status:"pending",name:c.newGuest.name,email:c.newGuest.email.address};c.saveEvent(),n()}else s.info("you didn't enter a name and or email")},c.guestWillAttend=function(i){var a=ref.child("Users").child(d.uid).child("events"),o=0,n=!1;if(c.event.guestList[d.uid].attending=i,c.event.guestList[d.uid].status="attending",a.child("pending").on("value",function(e){var t=e.val();s.info(t),s.info(t[d.hostId]),s.info(t[d.hostId][d.eventId]);var n=t[d.hostId][d.eventId];for(invitation in s.info(n),t)o++;s.info("total attending: "+o),i&&a.child("attending").child(d.hostId).child(d.eventId).set(n,function(e){e&&s.info(e)})}),a.child("attending").on("value",function(e){var t=e.val();s.info("this is the attending list"),s.info(t),t.updated&&(n=!0)},function(e){e&&s.info(e)}),o<2){var e=new Date;a.child("pending").update({updated:function(e){return Date.parse(e)}(e)},function(e){e&&s.info(e)})}a.child("pending").child(d.hostId).remove(),n&&s.info("removing the updated placeholder"),c.event.$save()},c.updateUpdatedParam=function(){var e=ref.child("Users").child(d.uid).child("events");s.info("updating the param"),e.child("attending").on("value",function(e){s.info(e.val())}),e.child("attending").child("updated").remove()},c.addInvitationToAttending=function(i){var a=ref.child("Users").child(d.uid).child("events"),o=0;a.child("pending").on("value",function(e){var t=e.val(),n=t[d.hostId][d.eventId];for(invitation in s.info(t),s.info(t[d.hostId]),s.info(t[d.hostId][d.eventId]),t)o++;s.info("total pending invitations: "+o),s.info(i),i&&a.child("attending").child(d.hostId).child(d.eventId).set(n,function(e){e&&s.info(e)})})},c.tempDateTime={start:"",end:""},c.newGuest={name:"",email:{address:"",valid:!1,style:{color:""}}},c.showIfHost=!1,c.hideIfAttending=!0,c.manageSections={1:{active:!0,complete:!1,style:{color:"black","background-color":"yellow"}},2:{active:!1,complete:!1,style:{color:"white","background-color":"gray"}},3:{active:!1,complete:!1,style:{color:"white","background-color":"gray"}}},ref.getAuth().uid==d.hostId?(s.info("is the host"),c.showIfHost=!0):(s.info("not the host"),c.showIfHost=!1),c.showIfHost||(s.info("check guest attendance"),userEvents.child("guestList").on("value",function(e){var t=e.val();c.hideIfAttending=!t[d.uid].attending})),c.showIfHost||(c.manageSections[1].active=!0,c.manageSections[2].active=!0,c.manageSections[3].active=!0)}angular.module("meetUpEventApp").controller("AnEventController",AnEventController),AnEventController.$inject=["$log","$routeParams"];
"use strict";function GuestEventController(t){t.info("into the GuestEventController")}angular.module("meetUpEventApp").controller("GuestEventController",GuestEventController),GuestEventController.$inject=["$log"];
"use strict";function HostEventController(e,t,n,r,i,s,o){var a=this,m=s,c=i,d=o,l=0;function p(e){return new Date(parseInt(e))}function u(e){return Date.parse(e)}function v(e,t){return(u(t)-u(e))/6e4}function f(e){"open"==e?(a.actionBtn.btn.class["btn-success"]=!0,a.actionBtn.btn.class["btn-warning"]=!1,a.actionBtn.btn.message="Save Event"):"close"==e&&(a.actionBtn.btn.class["btn-success"]=!1,a.actionBtn.btn.class["btn-warning"]=!0,a.actionBtn.btn.message="Add Info")}function T(e){l+=e,a.progressBar.complete=l,a.progressBar.style.width=l+"%",a.progressBar.message=l+"%",99<l&&f("open"),l<99&&f("close")}a.activeSection=1,a.tempTime={start:"",end:"",duration:""},a.progressBar={complete:a.percentComplete,style:{width:a.percentComplete+"%"},message:a.percentComplete+"%"},a.actionBtn={div:{class:{"col-xs-6":!0,"col-sm-6":!0}},btn:{class:{btn:!0,"btn-success":!1,"btn-warning":!0,"pull-right":!0},message:"Add Info"}},a.tempEvent={},a.requiredFieldComplete=d.generateEventRequirnments(),a.formatDuration=function(){a.tempTime.duration=v(a.tempTime.start,a.tempTime.end);var e=Math.floor(a.tempTime.duration/60),t=a.tempTime.duration%60;return e+Math.round(t/15)/4+" h"},a.validateTime=function(e){24<a.tempTime.duration&&a.settingTempStart();var t={eventStart:a.tempTime.start,eventEnd:a.tempTime.end};angular.isDefined(t[e])&&""!=t[e]&&0<a.tempTime.duration?(0==a.requiredFieldComplete[e].completed&&T(10),a.tempEvent.eventTimes.start=u(a.tempTime.start),a.tempEvent.eventTimes.end=u(a.tempTime.end),a.requiredFieldComplete[e].completed=!0,a.requiredFieldComplete[e].row.class["has-success"]=!0,a.requiredFieldComplete[e].row.class["has-feedback"]=!0,a.requiredFieldComplete[e].row.class["has-error"]=!1):(1==a.requiredFieldComplete[e].completed&&T(-10),a.requiredFieldComplete[e].completed=!1,a.requiredFieldComplete[e].row.class["has-success"]=!1,a.requiredFieldComplete[e].row.class["has-feedback"]=!1,a.requiredFieldComplete[e].row.class["has-error"]=!0)},a.settingTempStart=function(){(u(a.tempTime.end)<=u(a.tempTime.start)||864e5<u(a.tempTime.end)-u(a.tempTime.start))&&(oldStart=u(a.tempTime.start),oldEnd=u(a.tempTime.end),newEnd=oldStart+36e5,a.tempTime.end=p(newEnd))},a.settingTempEnd=function(){a.tempTime.start>a.tempTime.end&&(a.tempTime.start=a.tempTime.end),a.validateTime("eventEnd"),a.tempTime.duration=v(a.tempTime.start,a.tempTime.end)},a.backToUserEvents=function(){99<l&&(c.saveNewHostingEvent("hosting",a.tempEvent),c.setRemoteEventsFromLocal("hosting",a.tempEvent).then(function(e){t.info(e)}).catch(function(e){t.info(e)})),m.redirectTo("/userEvents",n.uid)},a.sectionBack=function(){var e={event:a.tempEvent,progressBar:a.progressBar,percentComplete:l,requiredFields:a.requiredFieldComplete};c.setActiveEvent(e),targetSection=a.activeSection-1,m.redirectTo("/event/host",n.eventId,n.uid,targetSection)},a.sectionForward=function(){var e={event:a.tempEvent,progressBar:a.progressBar,percentComplete:l,requiredFields:a.requiredFieldComplete};c.setActiveEvent(e),targetSection=a.activeSection+1,m.redirectTo("/event/host",n.eventId,n.uid,targetSection)},a.verifyRequired=function(e,t){angular.isDefined(t)&&""!=t?(0==a.requiredFieldComplete[e].completed&&T(10),a.requiredFieldComplete[e].completed=!0,a.requiredFieldComplete[e].row.class["has-success"]=!0,a.requiredFieldComplete[e].row.class["has-feedback"]=!0,a.requiredFieldComplete[e].row.class["has-error"]=!1):(1==a.requiredFieldComplete[e].completed&&T(-10),a.requiredFieldComplete[e].completed=!1,a.requiredFieldComplete[e].row.class["has-success"]=!1,a.requiredFieldComplete[e].row.class["has-feedback"]=!1,a.requiredFieldComplete[e].row.class["has-error"]=!0)},a.saveEventToDB=function(){99<l&&(c.saveNewHostingEvent("hosting",a.tempEvent),c.setRemoteEventsFromLocal(n.uid,a.tempEvent).then(function(e){t.info(e),c.cleanDBEventsCategory("hosting").then(function(e){t.info(e)}).catch(function(e){t.info(e)})}).catch(function(e){t.info(e)}),m.redirectTo("/userEvents",n.uid))},e.$watch("vm.tempEvent.guestList",function(e,t){angular.isObject(a.tempEvent.guestList)&&T(10)}),angular.element(r).ready(function(){parseInt(n.section),parseInt(n.section),parseInt(n.section)}),function(){if(c.thereIsAnActiveEvent()){var e=c.getActiveEvent();a.progressBar=e.progressBar,l=e.percentComplete,a.tempEvent=e.event,a.requiredFieldComplete=e.requiredFields}else c.loadAnEventProgressively(n.uid,n.eventId).then(function(e){a.tempEvent=e,angular.isDefined(a.tempEvent.eventTimes.start)&&(a.tempTime.start=p(a.tempEvent.eventTimes.start),a.tempTime.end=p(a.tempEvent.eventTimes.end))}).catch(function(e){t("the error is: "+e)});a.activeSection=parseInt(n.section),function(){var e=new Date;e.setHours(e.getHours()+Math.round(e.getMinutes()/60)),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),a.tempTime.start=e,a.tempTime.end=e,a.tempTime.duration=v(a.tempTime.start,a.tempTime.end)}(),Object.keys(a.tempEvent).forEach(function(e){})}()}angular.module("meetUpEventApp").controller("HostEventController",HostEventController),HostEventController.$inject=["$scope","$log","$routeParams","$document","userData","trafficValet","validation"];
"use strict";function LandingPageController(n){var e=n;console.log("in the landing page"),this.createAnAccount=function(){e.redirectTo("/signup")},this.loginUser=function(){e.redirectTo("/login")}}angular.module("meetUpEventApp").controller("LandingPageController",LandingPageController),LandingPageController.$inject=["trafficValet"];
"use strict";function MainController(e,n,t,o){var l=new Firebase("https://meetupplanner.firebaseio.com/");this.logout=function(){alert("logging you out!"),l.unauth(),n.path("/")},angular.element(t).ready(function(){angular.element(t),t.css("hight",o.outerHeight)})}angular.module("meetUpEventApp").controller("MainController",MainController),MainController.$inject=["$log","$location","$document","$window"];
"use strict";function NewUserSignUpController(e,s,a,i,l,r){var o=this,n=a;o.name=n.generateTestableObject("name"),o.email=n.generateTestableObject("email"),o.pass=n.generateTestableObject("pass"),o.createNewUser=function(){var n=l;if(o.name.passesAllReqs&&o.email.passesAllReqs&&o.pass.passesAllReqs){var t=i,e=r;t.createNewUser(o.email.value,o.pass.value).then(function(a){e.setPrimariesLocally(o.email.value,o.name.value,a.uid),t.addNewUserToDatabase(a.uid,o.name.value,o.email.value).then(function(e){s.info(e),t.addNewUserToRegUsersList(a.uid,o.email.value).then(function(e){n.redirectTo("/userInformation",a.uid),s.info(e)}).catch(function(e){s.info(e)})}).catch(function(e){s.info(e)})}).catch(function(e){s.info(e)})}}}angular.module("meetUpEventApp").controller("NewUserSignUpController",NewUserSignUpController),NewUserSignUpController.$inject=["$scope","$log","validation","backendServices","trafficValet","userData"];
"use strict";function RegUserLoginController(i,e,t,o,r){var l=this;l.inputs={email:"",password:"",requiredFieldsDefined:!1},l.errors={message:"",passesAllTests:!0},l.unclockUserLoginBtn={usable:!1,class:{btn:!0,"btn-warning":!0,"btn-success":!1,"col-xs-12":!0,"col-sm-12":!0},message:"Need Email & Pass"},l.update=function(){l.inputs.email=e.find("#userEmail")[0].value,l.inputs.password=e.find("#userPassword")[0].value,angular.isDefined(l.inputs.email)&&""!==l.inputs.email&&angular.isDefined(l.inputs.password)&&""!==l.inputs.password?(l.inputs.requiredFieldsDefined=!0,l.unclockUserLoginBtn.class["btn-success"]=!0,l.unclockUserLoginBtn.class["btn-warning"]=!1,l.unclockUserLoginBtn.message="Login",l.unclockUserLoginBtn.usable=!0):(l.inputs.requiredFieldsDefined=!1,l.unclockUserLoginBtn.class["btn-success"]=!1,l.unclockUserLoginBtn.class["btn-warning"]=!0,l.unclockUserLoginBtn.message="Need Email & Pass",l.unclockUserLoginBtn.usable=!1)},l.loginRegisteredUser=function(){var e=o,s=t,n=r;s.LoginRegisteredUser(l.inputs.email,l.inputs.password).then(function(e){l.errors.passesAllTests=!0,n.setPrimariesLocally(l.inputs.email,l.inputs.name,e.uid)}).then(function(){s.getUserBio(n.getUIDLocally()).then(function(e){n.updateBioLocally(e),s.getUserEvents(n.getUIDLocally()).then(function(e){n.updateAllUserEventsLocally(e)}).catch(function(e){i.info(e)})}).catch(function(e){i.info(e)}),e.redirectTo("/userInformation",n.getUIDLocally())}).catch(function(e){l.errors.message=e,l.errors.passesAllTests=!1})},l.clicked=function(){t.logUserOut()}}angular.module("meetUpEventApp").controller("RegUserLoginController",RegUserLoginController),RegUserLoginController.$inject=["$log","$document","backendServices","trafficValet","userData"];
"use strict";function topMenuController(o,t,i,n,e){var a=this,r="https://meetupplanner.firebaseio.com/",u=new Firebase(r);function l(n,e){var o=n+"/"+e.uid+"/"+e.token;i.path(o)}a.loggedIn=!1,"addEventListener"in n&&n.addEventListener("DOMContentLoaded",function(){FastClick.attach(n.body)},!1),angular.element(e).bind("resize",function(){a.onResizeFunction(),o.$apply()}),angular.element(n).ready(function(){e.outerWidth<600&&(a.onResizeFunction(),o.$apply())}),a.logout=function(){a.loggedIn=!1,u.unauth(),l("/",{uid:"",token:""})},a.navBarLoginRegisteredUser=function(){new Firebase(r).authWithPassword({email:a.navbarUserEmail,password:a.navbarUserPass},function(n,e){n?t.info("Error Logging In: "+n):(t.info("Logged In successfully: "+e.uid),l("/userInformation",e),o.$apply(),angular.element(".navbar-toggle").click())})},a.onResizeFunction=function(){angular.element(".navbarInputs").css("width",e.outerWidth-26+"px")},u.onAuth(function(n){a.loggedIn=!!n})}angular.module("meetUpEventApp").controller("topMenuController",topMenuController),topMenuController.$inject=["$scope","$log","$location","$document","$window"];
"use strict";function UserEventsController(e,t,n,o){var r=this,s=n;function l(){return 10*function(e){return Date.parse(e)}(new Date)+function(){var e=0;for(event in r.events.hosting)e++;return e}()}r.showDecline=!1,r.userBio={},r.events={},r.sectionAvailable={pending:!1,attending:!1,hosting:!1,completed:!1},r.errors={},r.createNewEvent=function(){var e=l(),t=o;s.createNewEvent(e),t.redirectTo("/event",e,s.getUIDLocally(),s.getUIDLocally())},s.setUIDLocally(t.uid),s.loadBio(t.uid).then(function(e){r.userBio=e}).catch(),r.events=s.getAllUserEventsLocally(),s.getRemoteEventsForLocal().then(function(e){r.events=s.getAllUserEventsLocally(),delete r.events.pending.updated,delete r.events.pending[void 0];var t=0;Object.keys(r.events.hosting).forEach(function(e){t++}),1<t&&(delete r.events.hosting.updated,delete r.events.hosting[void 0])}).then(function(){Object.keys(r.events).forEach(function(n){Object.keys(r.events[n]).forEach(function(e){var t=0;angular.isObject(r.events[n][e])&&t++,r.sectionAvailable[n]=0<t})})})}angular.module("meetUpEventApp").controller("UserEventsController",UserEventsController),UserEventsController.$inject=["$log","$routeParams","userData","trafficValet"];
"use strict";function UserInformationController(e,t,n,a,r){var o,i=this,s=a;i.user={},i.tempBirthday,i.view={dataToSave:!1,isData:!1,btnMssg:"Move On...",proceedBtn:"btn btn-primary"},i.checkValues=function(){i.view.isData=!0,!angular.isUndefined(i.user.company)&&""!==i.user.company||!angular.isUndefined(i.user.title)&&""!==i.user.title||!angular.isUndefined(i.user.dob)&&""!==i.user.dob?(i.view.dataToSave=!0,i.view.proceedBtn="btn btn-success",i.view.btnMssg="Save & Continue"):(i.view.dataToSave=!1,i.view.proceedBtn="btn btn-primary",i.view.btnMssg="Move On...")},i.updateDOB=function(){i.user.dob=function(e){return Date.parse(e)}(i.tempBirthday),i.checkValues()},i.saveAndMoveOn=function(){var e=r,t=s.getUIDLocally();0!==i.tempBirthday&&i.updateDOB(),""!=t&&!angular.isUndefined(t)||s.setUIDLocally(n.uid),i.view.isData&&s.updateBioLocally(i.user),e.redirectTo("/userEvents",i.user.uid)},(o=new Date).setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0),i.tempBirthday=o,s.loadBio(n.uid).then(function(e){i.user=e,angular.isDefined(e.dob)&&""!==e.dob&&(i.tempBirthday=function(e){return new Date(parseInt(e))}(e.dob))})}angular.module("meetUpEventApp").controller("UserInformationController",UserInformationController),UserInformationController.$inject=["$log","$document","$routeParams","userData","trafficValet"];
"use strict";function authService(e,t){return{isLoggedIn:function(){t.checkLoginStatus().then(function(e){return e}).catch(function(e){return e})}}}angular.module("meetUpEventApp").factory("authService",authService),authService.$inject=["$log","backendServices"];
"use strict";function backendServices(n,s,e){var u="https://meetupplanner.firebaseio.com/";function c(e){return btoa(e)}function o(e){return Date.parse(e)}return{utf8_to_b64:c,b64_to_utf8:function(e){return atob(e)},unixTimeToDateTime:function(e){return new Date(parseInt(e))},dateTimeToUnixTime:o,LoginRegisteredUser:function(e,n){var r=new Firebase(u);return s(function(t,i){r.authWithPassword({email:e,password:n},function(e,n){e?i("Error Logging In: "+e):t(n)})})},checkLoginStatus:function(){var t=new Firebase(u);return s(function(n,e){t.onAuth(function(e){n(!!e)})})},logUserOut:function(){var e=new Firebase(u);n.info("logging user out"),e.unauth()},downloadUserData:function(){},getUserBio:function(e){var i=new Firebase(u).child("Users").child(e).child("bio");return s(function(n,t){i.once("value",function(e){n(e.val())},function(e){e&&t(e)})})},getUserEvents:function(e){var t=new Firebase(u).child("Users").child(e).child("events");return s(function(i,n){t.orderByKey().once("value",function(e){var n=e.val(),t={hosting:n.hosting,attending:n.attending,pending:n.pending,completed:n.completed};i(t)},function(e){e&&n(e)})})},getAHostedEvent:function(e,n){var i=new Firebase(u).child("Users").child(e).child("events").child("hosting").child(n);return s(function(t,n){i.once("value",function(e){var n=e.val();t(n)},function(e){e&&n(e)})})},getAnInvitedEvent:function(e,n,t){},findGuestUID:function(r){var e=new Firebase(u).child("Uids");return s(function(t,i){e.once("value",function(e){var n=e.val();Object.keys(n).forEach(function(e){e==r?t(n[e]):i("No user by that email")})})})},getGuestListForEvent:function(e,n){var i=new Firebase(u).child("Users").child(e).child("events").child("hosting").child(n).child("guestList");return s(function(t,n){i.once("value",function(e){var n=e.val();t(n)},function(e){e&&n("There was an error getting the guest list: "+e)})})},createNewUser:function(e,n){var r=new Firebase(u);return s(function(t,i){r.createUser({email:e,password:n},function(e,n){e?i("Error creating user: "+e):t(n)})})},addNewUserToDatabase:function(e,i,r){var c=new Firebase(u).child("Users").child(e),a=new Date;return s(function(n,t){c.set({bio:{uid:e,name:i,email:r},events:{pending:{updated:o(a)},hosting:{updated:o(a)},attending:{updated:o(a)},completed:{updated:o(a)}}},function(e){e?t("Data could not be saved: "+e):n("Data saved successfully.")})})},addNewUserToRegUsersList:function(e,n){var t=new Firebase(u),i=c(n),r=t.child("Uids").child(i);return s(function(n,t){r.set(e,function(e){e?t("Data could not be saved. "+e):n("uid created sucessfully.")})})},uploadUserData:function(e){var n=new Firebase(u),t=e.uid,i=n.child("Users").child(t);return s(function(n,t){i.update(e,function(e){e?t("There was a problem updating that record: "+e):n("all user data uploaded successfully")})})},uploadUserBio:function(e){var n=new Firebase(u),t=e.uid.toString(),i=n.child("Users").child(t).child("bio");return s(function(n,t){i.update(e,function(e){e?t("There was a problem updating that record: "+e):n("all user bio data uploaded successfully")})})},createHostedEvent:function(e,i){var n=new Firebase(u),t=i.id,r=n.child("Users").child(e).child("events").child("hosting").child(t);return s(function(n,t){r.set(i,function(e){e?t("There was an error: "+e):n("New event saved to DB successfully")})})},addGuestToHostGuestListonDB:function(e,n,t,i){var r=new Firebase(u).child("Users").child(i).child("events").child("hosting").child(t).child("guestList").child(n);return s(function(n,t){r.set({rsvpd:!1,status:"pending",name:e},function(e){e?t("There was an error: "+e):n("New event saved to DB successfully")})})},deleteUpdateField:function(e,n){var i=new Firebase(u).child("Users").child(n).child("events").child(e).child("updated");return s(function(n,t){i.set(null,function(e){e?t("There was an error deleting update field: "+e):n("Deleted update successfully")})})},removeIncompleteEvent:function(e,n){var i=new Firebase(u).child("Users").child(e).child("events").child("hosting").child(n);return s(function(n,t){i.remove(function(e){e?t("Synchronization failed"):n("Synchronization succeeded")})})},thereWasAnUpdateField:function(e,n){var r=new Firebase(u).child("Users").child(n).child("events").child(e);return s(function(t,i){r.once("value",function(e){var n=e.val();angular.isDefined(n.updated)?t(!0):i(!1)},function(e){e&&i(e)})})}}}angular.module("meetUpEventApp").factory("backendServices",backendServices),backendServices.$inject=["$log","$q","$window"];
"use strict";function trafficValet(e,f){return{redirectTo:function(e,t,a,n){angular.isDefined(t)&&(e=e+"/"+t,angular.isDefined(a)&&(e=e+"/"+a,angular.isDefined(n)&&(e=e+"/"+n,f.path(e)),f.path(e))),f.path(e)},eventRoute:function(e,t,a,n){angular.isUndefined(n)&&(n=1);if(t===a){var i="/event/host/"+e+"/"+a+"/"+n;f.path(i)}else{i="/event/guest/"+e+"/"+a+"/"+t;f.path(i)}}}}angular.module("meetUpEventApp").factory("trafficValet",trafficValet),trafficValet.$inject=["$log","$location"];
"use strict";function userData(a,n,r){var o={bio:{uid:"",name:"",email:"",company:"",title:"",dob:0},events:{hosting:{},pending:{},attending:{},completed:{}}},t={};function s(e){return btoa(e)}function i(){return""!==o.bio.uid&&""!==o.bio.name&&""!==o.bio.email}function u(e,n){return!!angular.isDefined(o.events[e][n])}function c(n){Object.keys(o.events[n]).forEach(function(e){angular.isObject(o.events[n][e])||delete o.events[n][e]})}function l(){return o.bio.uid}function f(){return{uid:o.bio.uid,name:o.bio.name,email:o.bio.email,company:o.bio.company,title:o.bio.title,dob:o.bio.dob}}function v(e,n){return o.events[e][n]}function d(e){return o.events[e]}function m(e){o.bio.uid=e}function g(e){o.bio.name=e}function h(e){o.bio.email=e}function b(e){o.bio.company=e}function y(e){o.bio.title=e}function L(e){o.bio.dob=e}function E(e,n,t){angular.isDefined(e)&&h(e),angular.isDefined(n)&&g(n),angular.isDefined(t)&&m(t)}function p(e,n){var t=n.id;c(e),o.events[e][t]=n}function D(e){t=e}function U(e){var i=r;return n(function(n,t){i.getUserBio(e).then(function(e){n(e)}).catch(function(e){t("There was an error reading the user bio: "+e)})})}function F(){var t=r;return n(function(e,n){t.getUserEvents(l()).then(function(t){Object.keys(t).forEach(function(n){Object.keys(t[n]).forEach(function(e){p(n,t[n][e])})}),e(t)}).catch(function(e){n("There was an error reading the user events: "+e)})})}function A(e){var i=r;return n(function(n,t){i.getAHostedEvent(l(),e).then(function(e){n(e)}).catch(function(e){t("There was an error reading the user event: "+e)})})}function B(){r.uploadUserBio(o.bio)}return{bioPrimariesAreCompleteLocally:i,eventExistsLocally:u,thisIsTheHostEmail:function(e,n){if(angular.isDefined(o.bio.email)&&""!=o.bio.email)return e==o.bio.email;return o.events.hosting[n].host.email==e},guestInvitedAlready:function(e,n){{if(!angular.isDefined(o.events.hosting[n].guestList))return a.info("no guestlist"),!1;refEmail=s(e),Object.keys(o.events.hosting[n].guestList).forEach(function(e){return refEmail==e?(a.info("an email match was found, this guest has been invited already"),!0):(a.info("no email match found, ok to invite guest"),!1)})}},thereIsAnActiveEvent:function(){return!!angular.isDefined(t.event)},cleanEvents:c,getUIDLocally:l,getNameLocally:function(){return o.bio.name},getEmailLocally:function(){return o.bio.email},getCompanyLocally:function(){return o.bio.company},getTitleLocally:function(){return o.bio.title},getDOBLocally:function(){return o.bio.dob},getFullBioLocally:f,getOneUserEventLocally:v,getUserEventsLocally:d,getAllUserEventsLocally:function(){return o.events},getActiveEvent:function(){return t},setUIDLocally:m,setNameLocally:g,setEmailLocally:h,setCompanyLocally:b,setTitleLocally:y,setDOBLocally:L,setPrimariesLocally:E,updateUserEventsLocally:p,updateAllUserEventsLocally:function(e){o.events=e},updateBioLocally:function(e){g(e.name),h(e.email),b(e.company),y(e.title),L(e.dob),B()},addGuestToHostGuestList:function(e,i,o,a,u){var c=r;return n(function(n,t){angular.isDefined(i)&&(o=s(i)),c.addGuestToHostGuestListonDB(e,o,a,u).then(function(e){n(e)}).catch(function(e){t(e)})})},setActiveEvent:D,addGuestToActiveEvent:function(e){var n=e.uid;angular.isObject(t.event.guestList)||(t.event.guestList={});t.event.guestList[n]=e.guest},saveNewHostingEvent:function(e,n){a.info("saving this event locally"),a.info(n),p(e,n)},removeUserEventsLocally:function(e,n){delete o.events[e][n.id]},getFullRemoteDBforLocal:function(){r.downloadUserData().then(function(e){o=e})},getRemoteBioForLocal:U,getRemoteEventsForLocal:F,getOneRemoteEventForLocal:A,setFullRemoteDBfromLocal:function(){r.uploadUserData(o)},setRemoteBioFromLocal:B,setARemoteEventFromLocal:function(){},setRemoteEventsFromLocal:function(e,i){var o=r;return a.info("sending this to the server"),a.info(i),n(function(n,t){o.createHostedEvent(e,i).then(function(e){n(e)}).catch(function(e){t(e)})})},cleanDBEventsCategory:function(t){var i=r;return n(function(e,n){i.thereWasAnUpdateField(t,l()).then(function(e){i.deleteUpdateField(t,l()).then(function(e){a.info(e)}).catch(function(e){a.info(e)})}).catch(function(e){a.info(e)})})},getUserIdForGuest:function(e){var i=r;return n(function(n,t){guestEmail=s(e),i.findGuestUID(guestEmail).then(function(e){n(e)}).catch(function(e){t(e)})})},getEventGuestList:function(e,i){var o=r;return n(function(n,t){o.getGuestListForEvent(e,i).then(function(e){n(e)}).catch(function(e){t(e)})})},removeIncompleteEventFromDB:function(e){var i=r;return n(function(n,t){i.removeIncompleteEvent(o.getUIDLocally,e).then(function(e){n(e)}).catch(function(e){t(e)})})},loadBio:function(e){return n(function(n,t){i()?n(f()):U(e).then(function(e){E(e.email,e.name,e.uid),n(e)}).catch(function(e){t(e)})})},loadEventsProgressively:function(e){var t={};return n(function(n,e){F().then(function(e){n(e)}),t=d(type),n(t)})},loadAnEventProgressively:function(e,t){return m(e),n(function(n,e){A(t).then(function(e){n(e)}).catch(),u("hosting",t)&&n(v("hosting",t))})},createNewEvent:function(e){var n,t=new Date;t.setMinutes(0,0,0);var i=function(e){return Date.parse(e)}(t);p("hosting",n={id:e,name:"",type:"",host:{name:o.bio.name,uid:o.bio.uid,email:o.bio.email},message:"",eventTimes:{start:i,end:i+36e5},address:{street01:"",street02:"",street03:"",city:"",state:"",zip:0}}),D(n)},updatePendingEventsListForGuest:function(e){return n(function(e,n){})}}}angular.module("meetUpEventApp").factory("userData",userData),userData.$inject=["$log","$q","backendServices"];
"use strict";function validation(r){var s,t={met:!1,errorMessage:"Too short (3 chars minimum)",test:function(e){if(angular.isDefined(e))return this.tested=!0,3<=e.length}},a={met:!1,errorMessage:"This is not a valid email",test:function(e){var s=new RegExp(/[a-z0-9!#$%&'*+=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/g);return!!angular.isDefined(e)&&(!!s.test(e)&&(r.info("it passed the test"),!0))}},o={met:!1,errorMessage:"Should be at least 6 characters long",test:function(e){return this.tested=!0,!!angular.isDefined(e)&&6<=e.length}},l={met:!1,errorMessage:"Should be no more than 100 characters",test:function(e){return this.tested=!0,!!angular.isDefined(e)&&e.length<=100}},n={met:!1,errorMessage:"Should have at least one lowercase letter",test:function(e){var s=new RegExp("[a-z]");return!!angular.isDefined(e)&&!!s.test(e)}},c={met:!1,errorMessage:"Should have at least one uppercase letter",test:function(e){var s=new RegExp("[A-Z]");return!!angular.isDefined(e)&&!!s.test(e)}},i={met:!1,errorMessage:"Should have at least one number letter",test:function(e){var s=new RegExp("[0-9]");return!!angular.isDefined(e)&&!!s.test(e)}},u={met:!1,errorMessage:"Should have at least one symbol letter",test:function(e){var s=new RegExp("[!@#$%^&*]");return!!angular.isDefined(e)&&!!s.test(e)}},h={met:!1,errorMessage:"Should be at least 6 characters long",test:function(e){var s=new RegExp("[^A-z0-9!@#$%^&*]");return!angular.isDefined(e)||!s.test(e)}};function s(e){if(angular.isUndefined(e))return"This is a required field"}function d(){this.passesAllReqs?(this.class.row["has-success"]=!0,this.class.row["has-error"]=!1,this.style["background-color"]="#78FA89",this.style.color="black"):(this.class.row["has-success"]=!1,this.class.row["has-error"]=!0,this.style["background-color"]="#FA787E",this.style.color="white")}function g(){var s=this.reqs,r=this.reqBox;Object.keys(s).forEach(function(e){s[e].met?r[e].style.color="green":r[e].style.color="red"})}function m(){var s=this.reqs,r=[];Object.keys(s).forEach(function(e){s[e].met||r.push(s[e].errorMessage)}),this.errorMessage=r.join(", ")}function f(){angular.isDefined(this.value)&&""!=this.value?this.hasValue=!0:this.hasValue=!1}function p(){this.allReqsTested&&(angular.isDefined(this.errorMessage)&&""!=this.errorMessage?this.hasAnErrorMessage=!0:this.hasAnErrorMessage=!1)}function b(){var s=this.reqs,r=this.value,t=!0;Object.keys(s).forEach(function(e){s[e].test(r)?s[e].met=!0:(s[e].met=!1,t=!1)}),(this.passesAllReqs=t)?this.hasAnErrorMessage=!1:(this.buildErrorMessage(),this.hasAnErrorMessage=!0),this.updateClasses(),angular.isDefined(this.updateReqStyles)&&this.updateReqStyles(),this.allReqsTested=!0}function q(){this.allReqsTested&&this.checkAllRequirnments()}function v(){this.showReqsBox=!0}function E(){this.showReqsBox=!1}return{required:s={met:!1,errorMessage:"This field is required",test:function(e){return!angular.isUndefined(e)&&(""==e?!(this.tested=!0):this.tested=!0)}},minNameLength:function(e){if(angular.isDefined(e)&&e.length<3)return"Name should be at least 3 characters"},minPassLength:function(e){if(angular.isDefined(e)&&!(e.length<6))return!0;return!1},maxPassLength:function(e){if(angular.isDefined(e)&&!(100<e.length))return!0;return!1},atLeastOneSymbol:function(e){if(angular.isDefined(e)){return!!new RegExp("[!@#$%^&*]").test(e)}return!1},atLeastOneNumber:function(e){if(angular.isDefined(e)){return!!new RegExp("[0-9]","").test(e)}return!1},atLeastOneLowercase:function(e){if(angular.isDefined(e)){return!!new RegExp("[a-z]","").test(e)}return!1},atLeastOneUppercase:function(e){if(angular.isDefined(e)){return!!new RegExp("[A-Z]","").test(e)}return!1},illegalCharacter:function(e){if(angular.isDefined(e)){return!new RegExp("[^A-z0-9!@#$%^&*]","").test(e)}return!1},email:function(e){var s=new RegExp(/[a-z0-9!#$%&'*+=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/g);if(angular.isDefined(e)&&!s.test(e))return"Not a valid email"},dateOfBirth:function(e){},generateEventRequirnments:function(){return{eventName:{completed:!1,addressed:!1,row:{class:{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{class:{"control-label":!0}},input:{class:{"form-control":!0,"col-xs-12":!0,"col-sm-12":!0,"col-md-12":!0}}},eventHost:{completed:!1,addressed:!1,row:{class:{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{class:{"control-label":!0}},input:{class:{"form-control":!0}}},eventType:{completed:!1,addressed:!1,row:{class:{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{class:{"control-label":!0}},input:{class:{"form-control":!0}}},eventStart:{completed:!1,addressed:!1,row:{class:{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{class:{"control-label":!0}},input:{class:{"form-control":!0}}},eventEnd:{completed:!1,addressed:!1,row:{class:{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{class:{"control-label":!0}},input:{class:{"form-control":!0}}},eventStreet01:{completed:!1,addressed:!1,row:{class:{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{class:{"control-label":!0}},input:{class:{"form-control":!0}}},eventCity:{completed:!1,addressed:!1,row:{class:{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{class:{"control-label":!0}},input:{class:{"form-control":!0}}},eventState:{completed:!1,addressed:!1,row:{class:{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{class:{"control-label":!0}},input:{class:{"form-control":!0}}},eventZip:{completed:!1,addressed:!1,row:{class:{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{class:{"control-label":!0}},input:{class:{"form-control":!0}}},eventGuest:{completed:!1,addressed:!1,row:{class:{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{class:{"control-label":!0}},input:{class:{"form-control":!0}}}}},generateNewUserRequirnemnts:function(){return{name:{name:{status:!1,message:"A name is required"},validLength:{status:!1,message:"Name must be at least 3 characters long"}},email:{email:{status:!1,message:"An email is required"},validEmail:{status:!1,message:"This is not a valid email"}},pass:{pass:{status:!1,message:"A password is required"},tooShort:{status:!1,message:"There should be at least 6 characters"},tooLong:{status:!1,message:"There should be no more than 100 characters"},noLowercase:{status:!1,message:"There should be at least one lowercase letter"},noUppercase:{status:!1,message:"There should be at least one uppercase letter"},noNumber:{status:!1,message:"There should be at least one number"},noSymbol:{status:!1,message:"There should be at least one symbol"},hasInvalidChar:{status:!1,message:"There shouldn't be any invalid characters"}},changeStatus:function(e,s,r){this[e][s].status=r},getErrorMessage:function(e,s){return this[e][s].message},allReqsFulfilled:function(s){Object.keys(s).forEach(function(e){if(!s[e].status)return!1})},allInputsPass:function(){Object.keys(this).forEach(function(e){if(!this.allReqsFulfilled(e))return!1})},getAllErrors:function(){var r={};return Object.keys(this).forEach(function(s){angular.isObject(this[s])&&Object.keys(s).forEach(function(e){this[s][e].status&&(r[s]={},r[s][e]={message:this[s][e].message})})}),r}}},updateEventReqStatus:function(){},updateEventReqAddressed:function(){},updateEventReqClass:function(){},generateTestableObject:function(e){return{name:{value:"",reqs:{hasOne:s,longEnough:t},errorMessage:"",hasValue:!1,passesAllReqs:!1,allReqsTested:!1,hasAnErrorMessage:!1,buildErrorMessage:m,checkForValue:f,checkForErrorMessage:p,checkAllRequirnments:b,postFailReqsTest:q,updateClasses:d,class:{row:{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1},label:{"control-label":!0},input:{"col-xs-12":!0,"col-sm-12":!0,"col-md-12":!0,"form-control":!0}},style:{color:"black"}},email:{value:"",reqs:{hasOne:s,isAnEmail:a},errorMessage:"",hasValue:!1,passesAllReqs:!1,allReqsTested:!1,hasAnErrorMessage:!1,buildErrorMessage:m,checkForValue:f,checkForErrorMessage:p,checkAllRequirnments:b,postFailReqsTest:q,updateClasses:d,class:{row:{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1},label:{"control-label":!0},input:{"col-xs-12":!0,"col-sm-12":!0,"col-md-12":!0,"form-control":!0}},style:{color:"black"}},pass:{value:"",reqs:{hasOne:s,longEnough:o,shortEnough:l,hasLowercase:n,hasUppercase:c,hasANumber:i,hasASymbol:u,noIllegalChars:h},errorMessage:"",hasValue:!1,passesAllReqs:!1,allReqsTested:!1,hasAnErrorMessage:!1,showReqsBox:!1,buildErrorMessage:m,checkForValue:f,checkForErrorMessage:p,checkAllRequirnments:b,postFailReqsTest:q,updateClasses:d,updateReqStyles:g,openReqBox:v,closeReqBox:E,class:{row:{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1},label:{"control-label":!0},input:{"col-xs-12":!0,"col-sm-12":!0,"col-md-12":!0,"form-control":!0}},style:{color:"black"},reqBox:{hasOne:{req:"Need to set a password",style:{color:"red"}},longEnough:{req:"Is at least 6 characters long",style:{color:"red"}},shortEnough:{req:"Is no longer than 100 characters",style:{color:"red"}},hasLowercase:{req:"Contains at least one lowercase letter",style:{color:"red"}},hasUppercase:{req:"Contains at least one uppercase letter",style:{color:"red"}},hasANumber:{req:"Contains at least one number",style:{color:"red"}},hasASymbol:{req:"Contains at least one required symbol (!@#$%^&*)",style:{color:"red"}},noIllegalChars:{req:"Doesn't have any illegal characters",style:{color:"red"}}}}}[e]}}}angular.module("meetUpEventApp").factory("validation",validation),validation.$inject=["$log"];
"use strict";function addAGuest(){var i={restrict:"AECM",templateUrl:"views/directives/addAGuest.directive.htm",replace:!0,scope:{guestList:"="},link:function(i,e,t,a){},controller:e,controllerAs:"vm",bindToController:!0};function e(t,i,e,a){var s=this,n=e,o=a;function l(){s.validations.name.valid&&s.validations.email.valid?(s.invitationValidForSubmission=!0,s.submissionButton.class["btn-warning"]=!1,s.submissionButton.class["btn-success"]=!0,s.submissionButton.message="Invite Guest"):(s.invitationValidForSubmission=!1,s.submissionButton.class["btn-warning"]=!0,s.submissionButton.class["btn-success"]=!1,s.submissionButton.message="Address Invitation...")}s.tempGuest={name:"",email:"",status:"pending"},s.validations={name:{addressed:!1,valid:!1,errorMessage:""},email:{addressed:!1,valid:!1,errorMessage:""},invitation:{isTheHost:!1,alreadyInvited:!1,errorMessage:""}},s.invitationValidForSubmission=!1,s.submissionButton={style:{color:"red"},class:{"col-xs-12":!0,"col-sm-12":!0,btn:!0,"btn-warning":!0,"btn-success":!1},message:"Address Invitation..."},s.validateName=function(){s.validations.name.addressed=!0,angular.isDefined(s.tempGuest.name)&&""!=s.tempGuest.name?(s.validations.name.valid=!0,s.validations.name.errorMessage=""):(s.validations.name.valid=!1,s.validations.name.errorMessage="This guest needs a name"),l()},s.validateEmail=function(){s.validations.email.addressed=!0,angular.isDefined(s.tempGuest.email)&&""!=s.tempGuest.email?angular.isUndefined(n.email(s.tempGuest.email))?(s.validations.email.valid=!0,s.validations.email.errorMessage=""):(s.validations.email.valid=!1,s.validations.email.errorMessage=n.email(s.tempGuest.email)):(s.validations.email.valid=!1,s.validations.email.errorMessage="Not a valid email"),l()},s.showNameError=function(){return!(s.validations.name.valid||!s.validations.name.addressed)},s.showEmailError=function(){return!(s.validations.email.valid||!s.validations.email.addressed)},s.showInvitationError=function(){return!(!s.validations.invitation.isTheHost&&!s.validations.invitation.alreadyInvited)},s.submitGuestInvitation=function(){if(s.invitationValidForSubmission){if(o.thisIsTheHostEmail(s.tempGuest.email,i.eventId))return s.validations.invitation.isTheHost=!0,s.validations.invitation.errorMessage="No need to invite the host",0;s.validations.invitation.isTheHost=!1,o.getUserIdForGuest(s.tempGuest.email).then(function(i){return i}).then(function(i){angular.isObject(s.guestList)||(s.guestList={});var e=s.tempGuest;s.guestList[i]=e,s.tempGuest={name:"",email:"",status:"pending"}}).then(function(){}).then(function(){}).catch(function(i){t.info(i),idByEmail=function(i){return btoa(i)}(s.tempGuest.email),angular.isObject(s.guestList)||(s.guestList={});var e=s.tempGuest;s.guestList[idByEmail]=e,s.tempGuest={name:"",email:"",status:"pending"}})}},angular.isUndefined(o.getOneUserEventLocally("hosting",i.eventId))?o.getRemoteEventsForLocal().then(function(){o.getOneUserEventLocally("hosting",i.eventId)}):o.getOneUserEventLocally("hosting",i.eventId)}return e.$inject=["$log","$routeParams","validation","userData"],i}angular.module("meetUpEventApp").directive("addAGuest",addAGuest);
"use strict";function hostedEventsList(){var e={restrict:"AECM",templateUrl:"views/directives/hostedEventsList.directive.htm",replace:!0,scope:{hostedEvents:"=",userId:"="},link:function(e,n,t,i){e.$watch("hostedEvents",function(e,n){})},controller:n,controllerAs:"vm",bindToController:!0};function n(e,n){var t=this,i=n;function s(e){var n=0;return t.guestsAreInvited=!0,Object.keys[e].forEach(function(e){n++}),n}t.guestsAreInvited=!1,t.formatDate=function(e){return function(e){return new Date(parseInt(e))}(e)},t.guestsAttending=function(e){return angular.isDefined(e)&&angular.isDefined(e.attending)?s(e.attending):0},t.guestsInvited=function(e){if(angular.isDefined(e)){var n={attending:0,pending:0,declined:0};return angular.isDefined(e.attending)&&(n.attending=s(e.attending)),angular.isDefined(e.pending)&&(n.pending=s(e.pending)),angular.isDefined(e.declined)&&(n.declined=s(e.declined)),n.attending+n.pending+n.declined}return 0},t.percentageAttending=function(e){return angular.isDefined(e)?guestsAttending(guestlist)/guestsInvited(e):0},t.eventClicked=function(e){i.redirectTo("/event",e,t.hostedEvents[e].host.uid,t.userId)},t.inviteGuests=function(e){i.redirectTo("/event/host",e,t.hostedEvents[e].host.uid,"3")}}return n.$inject=["$log","trafficValet"],e}angular.module("meetUpEventApp").directive("hostedEventsList",hostedEventsList);
"use strict";function hostedGuestList(){var t={restrict:"AECM",templateUrl:"views/directives/hostedGuestList.directive.htm",replace:!0,scope:{guestList:"="},link:function(t,e,s,i){t.$watch("guestList",function(){t.$apply})},controller:e,controllerAs:"vm",bindToController:!0};function e(t,e,s){var i,u=this;u.isAGuestList=!1,i=s,(angular.isDefined(u.guestList)&&""!=u.guestList?u.isAGuestList=!0:u.isAGuestList=!1)||i.getEventGuestList(e.uid,e.eventId).then(function(t){u.guestList=t,angular.isObject(t)&&(u.isAGuestList=!0)}).catch(function(t){})}return e.$inject=["$log","$routeParams","userData"],t}angular.module("meetUpEventApp").directive("hostedGuestList",hostedGuestList);
"use strict";function pendingEventsList(){var e={restrict:"AECM",templateUrl:"views/directives/pendingEventsList.directive.htm",replace:!0,scope:{pendingEvents:"=",userId:"="},link:function(e,t,n,i){e.$watch("hostedEvents",function(e,t){})},controller:t,controllerAs:"vm",bindToController:!0};function t(e,t){var n=this;function i(){var e=new Date;return e.setHours(e.getHours()+Math.round(e.getMinutes()/60)),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),(e=function(e){return Date.parse(e)}(e))+864e5}n.pendingEvents={},n.eventClicked=function(){},n.formatDate=function(e){return function(e){return new Date(parseInt(e))}(e)},n.pendingEvents={welcome:{name:"Meet-up Event Planner Welcome Event",message:"Thanks for trying out Meet-up Event Planner!  Click here to learn more.",eventTimes:{end:i()+108e5,start:i()},rsvped:!1,accepted:!1,accept:function(){this.rsvped=!0,this.accepted=!0},decline:function(){this.rsvped=!0,this.accepted=!1}}}}return t.$inject=["$log","trafficValet"],e}angular.module("meetUpEventApp").directive("pendingEventsList",pendingEventsList);
"use strict";function toolBar(){var t={restrict:"AECM",templateUrl:"views/directives/toolBar.directive.htm",replace:!0,scope:{},link:function(t,e,n,o){},controller:e,controllerAs:"vm",bindToController:!0};function e(t,i,e,r){var c=this,n=e,o=r;function l(){n.checkLoginStatus().then(function(t){c.loggedIn=t}).catch()}c.login=function(){},c.logout=function(){n.logUserOut(),o.redirectTo("/login")},c.loginRegisteredUser=function(){var t=r,n=e,o=userData;n.LoginRegisteredUser(c.email,c.password).then(function(t){return t.uid}).then(function(e){n.getUserBio(e).then(function(t){o.updateBioLocally(t),n.getUserEvents(e).then(function(t){o.updateAllUserEventsLocally(t)}).catch(function(t){i.info(t)})}).catch(function(t){i.info(t)}),t.redirectTo("/userInformation",e)}).catch(function(t){})},l(),t.$on("$routeChangeStart",function(t,e){l()})}return e.$inject=["$scope","$log","backendServices","trafficValet"],t}angular.module("meetUpEventApp").directive("toolBar",toolBar);
"use strict";function focusMe(t,o,u){return{link:function(u,e,n){var c=o(n.focusMe);u.$watch(c,function(u){!0===u&&t(function(){e[0].focus()})}),e.bind("blur",function(){})}}}angular.module("meetUpEventApp").directive("focusMe",focusMe),focusMe.$inject=["$timeout","$parse","$log"];
"use strict";angular.module("meetUpEventApp",["ngRoute","ngTouch","firebase"]);
"use strict";function config(e){e.when("/",{templateUrl:"views/landingPage.htm",controller:"LandingPageController",controllerAs:"vm"}).when("/signup",{templateUrl:"views/newUserSignup.htm",controller:"NewUserSignUpController",controllerAs:"vm"}).when("/login",{templateUrl:"views/registeredUserLogin.htm",controller:"RegUserLoginController",controllerAs:"vm"}).when("/userInformation/:uid?",{templateUrl:"views/userInformation.htm",controller:"UserInformationController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).when("/userEvents/:uid?",{templateUrl:"views/userEvents.htm",controller:"UserEventsController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).when("/event/host/:eventId/:uid/:section",{templateUrl:"views/hostEvent.htm",controller:"HostEventController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).when("/event/guest/:eventId/:uid/:hostId",{templateUrl:"views/guestEvent.htm",controller:"GuestEventController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).when("/event/:eventId?/:hostId?/:uid?/:section?",{templateUrl:"views/anEvent.htm",controller:"AnEventController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService,eventViewChanger:eventViewChanger}}).otherwise({redirectTo:"/"})}function userAuthenticationService(e){e.isLoggedIn()}function eventViewChanger(e,t){e.eventRoute(t.current.params.eventId,t.current.params.hostId,t.current.params.uid,t.current.params.section)}angular.module("meetUpEventApp").config(config);