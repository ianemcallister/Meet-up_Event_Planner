function AnEventController(e,n,t,o,r){function a(){p.tempDateTime={start:"",end:""},p.newGuest={name:"",email:{address:"",valid:!1,style:{color:""}}},p.showIfHost=!1,p.hideIfAttending=!0,p.manageSections={1:{active:!0,complete:!1,style:{color:"black","background-color":"yellow"}},2:{active:!1,complete:!1,style:{color:"white","background-color":"gray"}},3:{active:!1,complete:!1,style:{color:"white","background-color":"gray"}}},m(),g(),p.showIfHost||v()}function s(e){return btoa(e)}function l(e){return atob(e)}function u(e){return Date.parse(e)}function c(){p.newGuest={name:"",email:{address:"",valid:!1,style:{color:""}}}}function d(e){n.info("adding them to the registered users list "+e),w.child("Users").child(e).child("events").child("pending").child(o.uid).child(o.eventId).set({id:o.eventId,eventTimes:{start:p.event.eventTimes.start,end:p.event.eventTimes.end},name:p.event.name,host:o.uid},function(e){e&&n.info("there was an error"+e)}),w.child("Users").child(e).child("events").child("pending").once("value",function(t){var i=t.val();n.info(t.val()),i.updated?(n.info("deleting updated"),w.child("Users").child(e).child("events").child("pending").child("updated").remove(function(e){e&&n.info("Deleting failed: "+e.code)})):n.info("nothing to do")},function(e){e&&n.info("The read failed: "+e.code)})}function f(e){n.info("adding them to the UNREGISTERED users list "+e),w.child("UnregisteredUsers").child(e).child("pending").child(o.uid).child(o.eventId).set({id:o.eventId,host:o.uid,eventTimes:{start:p.event.eventTimes.start,end:p.event.eventTimes.end},name:p.event.name},function(e){e&&n.info("there was an error"+e)})}function m(){var e=w.getAuth();e.uid==o.hostId?(n.info("is the host"),p.showIfHost=!0):(n.info("not the host"),p.showIfHost=!1)}function g(){p.showIfHost||(n.info("check guest attendance"),U.child("guestList").on("value",function(e){var n=e.val();p.hideIfAttending=!n[o.uid].attending}))}function v(){p.manageSections[1].active=!0,p.manageSections[2].active=!0,p.manageSections[3].active=!0}var p=this,h="https://meetupplanner.firebaseio.com/",w=new Firebase(h),U=w.child("Users").child(o.hostId).child("events").child("hosting").child(o.eventId);p.event=r(U);var b=r(w.child("Uids"));p.requiredInputs=["","","","","","","","",""],p.setTempTime=function(e){"start"==e&&(p.tempDateTime.start=new Date),"end"==e&&(p.tempDateTime.end=new Date)},p.unixTimeToDateTime=function(e){return new Date(parseInt(e))},p.dateTimeToUnixTime=function(e){return Date.parse(e)},p.submit=function(){n.info("submitting the form now!")},p.backToUserEvents=function(){t.path("/userEvents/"+o.uid+"/"+o.token)},p.eventRedirect=function(e,i){var r=e+"/"+o.uid+"/"+o.token;n.info("redirecting to: "+r),t.path(r)},p.changeSection=function(e){for(n.info("are we here"),i=1;i<=3;i++)i==e?(p.manageSections[i].active=!0,p.manageSections[i].style["background-color"]="yellow",p.manageSections[i].style.color="black"):(p.manageSections[i].active=!1,p.manageSections[i].style["background-color"]="gray",p.manageSections[i].style.color="white")},p.saveEventTime=function(e,n){p.event.eventTimes||(p.event.eventTimes={start:"",end:""},p.event.eventTimes.start=p.dateTimeToUnixTime(p.tempDateTime.start),p.event.eventTimes.end=p.dateTimeToUnixTime(p.tempDateTime.end)),p.tempDateTime.end<p.tempDateTime.start&&"start"==n&&(p.tempDateTime.end=p.tempDateTime.start),"start"==n&&(p.event.eventTimes.start=p.dateTimeToUnixTime(e)),"end"==n&&(p.event.eventTimes.end=p.dateTimeToUnixTime(e))},p.guestsAreInvited=function(){return!!p.event.guestList},p.validateGuestEmail=function(){if(p.newGuest.email.address){var e=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","");e.test(p.newGuest.email.address)?(p.newGuest.email.valid=!0,p.newGuest.email.style={color:"green"}):(p.newGuest.email.valid=!1,p.newGuest.email.style={color:""})}},p.isSectionComplete=function(){for(i=0;i<8;i++)n.info(p.requiredInputs[i])},p.saveAndAdvance=function(){p.event.$save().then(function(){n.info("event saved")})["catch"](function(e){n.info("error! "+e)}),p.isSectionComplete(),1==p.manageSections[1].complete&&1==p.manageSections[2].complete&&1==p.manageSections[3].complete?p.eventRedirect("/userEvents",o.uid):p.manageSections[1].active?p.changeSection(2):p.manageSections[2].active?p.changeSection(3):p.manageSections[3].active&&p.changeSection(1)},p.addGuestToHostsList=function(){var e=s(p.newGuest.email.address);if(p.newGuest.name&&p.newGuest.email.valid){if(p.event.guestList)for(var t=0;p.event.guestList[t];){if(p.event.guestList[t].email==l(e))return n.info("This guest is already on the list"),void c();t++}else p.event.guestList={};if(b[e]){if(b[e]==o.uid)return n.info("tried to register the host"),void c();d(b[e]),p.event.guestList[b[e]]={attending:!1,status:"pending",name:p.newGuest.name,email:p.newGuest.email.address}}else f(e),p.event.guestList[e]={attending:!1,status:"pending",name:p.newGuest.name,email:p.newGuest.email.address};p.saveEvent(),c()}else n.info("you didn't enter a name and or email")},p.guestWillAttend=function(e){var t=w.child("Users").child(o.uid).child("events"),i=0,r=!1;if(p.event.guestList[o.uid].attending=e,p.event.guestList[o.uid].status="attending",t.child("pending").on("value",function(r){var a=r.val();n.info(a),n.info(a[o.hostId]),n.info(a[o.hostId][o.eventId]);var s=a[o.hostId][o.eventId];n.info(s);for(invitation in a)i++;n.info("total attending: "+i),e&&t.child("attending").child(o.hostId).child(o.eventId).set(s,function(e){e&&n.info(e)})}),t.child("attending").on("value",function(e){var t=e.val();n.info("this is the attending list"),n.info(t),t.updated&&(r=!0)},function(e){e&&n.info(e)}),2>i){var a=new Date;t.child("pending").update({updated:u(a)},function(e){e&&n.info(e)})}t.child("pending").child(o.hostId).remove(),r&&n.info("removing the updated placeholder"),p.event.$save()},p.updateUpdatedParam=function(){var e=w.child("Users").child(o.uid).child("events");n.info("updating the param"),e.child("attending").on("value",function(e){n.info(e.val())}),e.child("attending").child("updated").remove()},p.addInvitationToAttending=function(e){var t=w.child("Users").child(o.uid).child("events"),i=0;t.child("pending").on("value",function(r){var a=r.val(),s=a[o.hostId][o.eventId];n.info(a),n.info(a[o.hostId]),n.info(a[o.hostId][o.eventId]);for(invitation in a)i++;n.info("total pending invitations: "+i),n.info(e),e&&t.child("attending").child(o.hostId).child(o.eventId).set(s,function(e){e&&n.info(e)})})},a()}function LandingPageController(e,n,t,o,r){function a(e){return btoa(e)}function s(e){return Date.parse(e)}function l(i,o){var r=i+"/"+d.uid+"/"+d.token;n.info("redirecting to: "+r),t.path(r),e.$apply()}var u=this,c="https://meetupplanner.firebaseio.com/",d={};u.showRequirnments=!1,u.validNewName={valid:!1,style:{color:""}},u.validNewEmail={valid:!1,style:{color:""}},u.securePassword={secure:!1,style:{color:""}},u.unlockCreateUserBtn={usable:!1,"class":"btn btn-warning"},u.message="testing",u.validUserEmail={valid:!1,style:{color:""}},u.validUserPassword={valid:!1,style:{color:""}},u.unclockUserLoginBtn={usable:!1,"class":"btn btn-warning"},u.passwordRequirnments={0:{constraint:"Is at least 16 characters long",style:{color:"red"},met:!1},1:{constraint:"Is no longer than 100 characters",style:{color:"red"},met:!1},2:{constraint:"Contains at least one required symbol (!@#$%^&*)",style:{color:"red"},met:!1},3:{constraint:"Contains at least one number",style:{color:"red"},met:!1},4:{constraint:"Contains at least one lowercase letter",style:{color:"red"},met:!1},5:{constraint:"Contains at least one uppercase letter",style:{color:"red"},met:!1},6:{constraint:"Doesn't have any illegal characters",style:{color:"red"},met:!1}},u.displayPassReqs=function(){u.newName&&u.newEmail?u.showRequirnments=!0:u.showRequirnments=!1},u.checkNewName=function(){u.newName&&(u.newName.length>0?(u.validNewName.valid=!0,u.validNewName.style={color:"green"}):(u.validNewName.valid=!1,u.validNewName.style={color:"red"})),u.openCreateUserButton()},u.checkNewEmail=function(){if(u.newEmail){var e=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","");e.test(u.newEmail)?(u.validNewEmail.valid=!0,u.validNewEmail.style={color:"green"}):(u.validNewEmail.valid=!1,u.validNewEmail.style={color:"red"})}u.openCreateUserButton()},u.checkUserEmail=function(){if(u.userEmail){var e=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","");e.test(u.userEmail)?(u.validUserEmail.valid=!0,u.validUserEmail.style={color:"green"}):(u.validUserEmail.valid=!1,u.validUserEmail.style={color:"red"})}u.openUserLoginBtn()},u.checkNewPasswords=function(){var e={0:[""," your password needs to be 16 characters or longer"],1:[""," your password needs to be less than 100 characters"],2:["[!@#$%^&*]"," no required symbols found"],3:["[0-9]"," no numbers found"],4:["[a-z]"," no lowercase letters found"],5:["[A-Z]"," no uppercase letters found"],6:["[^A-z0-9!@#$%^&*]"," illegal characters found"]};if(u.newPassword){for(u.newPassword.length>15?(u.passwordRequirnments[0].style={color:"green"},u.passwordRequirnments[0].met=!0):(u.passwordRequirnments[0].style={color:"red"},u.passwordRequirnments[0].met=!1),u.newPassword.length<=100?(u.passwordRequirnments[1].style={color:"green"},u.passwordRequirnments[1].met=!0):(u.passwordRequirnments[1].style={color:"red"},u.passwordRequirnments[1].met=!1),i=2;i<6;i++){var n=new RegExp(e[i][0],"");n.test(u.newPassword)?(u.passwordRequirnments[i].style={color:"green"},u.passwordRequirnments[i].met=!0):(u.passwordRequirnments[i].style={color:"red"},u.passwordRequirnments[i].met=!1)}var n=new RegExp(e[6][0],"");n.test(u.newPassword)?(u.passwordRequirnments[6].style={color:"green"},u.passwordRequirnments[6].met=!0):(u.passwordRequirnments[6].style={color:"red"},u.passwordRequirnments[6].met=!1),u.passwordRequirnments[0].met&&u.passwordRequirnments[1].met&&u.passwordRequirnments[2].met&&u.passwordRequirnments[3].met&&u.passwordRequirnments[4].met&&u.passwordRequirnments[5].met&&u.passwordRequirnments[6].met?u.securePassword.secure=!0:u.securePassword.secure=!1,u.securePassword.secure?u.securePassword.style={color:"green"}:u.securePassword.style={color:"red"}}u.openCreateUserButton()},u.checkUserPasswords=function(){u.userPassword&&(u.userPassword.length>15?(u.validUserPassword.style={color:"green"},u.validUserPassword.valid=!0):(u.validUserPassword.style={color:"red"},u.validUserPassword.valid=!1)),u.openUserLoginBtn()},u.openCreateUserButton=function(){u.validNewName.valid&&u.validNewEmail.valid&&u.securePassword.secure?(u.unlockCreateUserBtn["class"]="btn btn-success",u.unlockCreateUserBtn.usable=!0):(u.unlockCreateUserBtn["class"]="btn btn-warning",u.unlockCreateUserBtn.usable=!1)},u.openUserLoginBtn=function(){u.validUserEmail.valid&&u.validUserPassword.valid?(u.unclockUserLoginBtn["class"]="btn btn-success",u.unclockUserLoginBtn.usable=!0):(u.unclockUserLoginBtn["class"]="btn btn-warning",u.unclockUserLoginBtn.usable=!1)},u.update=function(){u.newName=o.find("#newName")[0].value,u.newEmail=o.find("#newEmail")[0].value,u.userEmail=o.find("#userEmail")[0].value,u.checkNewName(),u.checkNewEmail(),u.checkUserEmail()},u.createNewUser=function(){if(n.info("Creating a new user account now!"),u.unlockCreateUserBtn.usable){var e=new Firebase(c);e.createUser({email:u.newEmail,password:u.newPassword},function(t,i){if(t)n.info("Error creating user: "+t);else{n.info(i),d=i;var o=e.child("Users/"+i.uid),r=new Date;o.set({bio:{name:u.newName,email:u.newEmail},events:{pending:{updated:s(r)},hosting:{updated:s(r)},attending:{updated:s(r)},completed:{updated:s(r)}}},function(e){e?n.info("Data could not be saved: "+e):n.info("Data saved successfully.")}),e.child("Uids").child(a(u.newEmail)).set(d.uid,function(e){e?n.info("Data could not be saved. "+e):n.info("uid created sucessfully.")}),l("/userInformation",d)}})}},u.loginRegisteredUser=function(){if(u.unclockUserLoginBtn.usable){var t=new Firebase(c);t.authWithPassword({email:u.userEmail,password:u.userPassword},function(t,i){t?n.info("Error Logging In: "+t):(n.info("Logged In successfully: "+i.uid),n.info(i),d=i,l("/userInformation",d),e.$apply())})}},u.alertMe=function(){alert("this is working! an alert!")},u.onResizeFunction=function(){var e=angular.element(".inputText");r.outerWidth>r.outerHeight?(e.css("font-size","2em"),n.info("making bigger")):e.css("font-size","1.2em")},"addEventListener"in o&&o.addEventListener("DOMContentLoaded",function(){n.info("adding FastClick"),FastClick.attach(o.body)},!1),angular.element(r).bind("resize",function(){u.onResizeFunction()}),angular.element(o).ready(function(){r.outerWidth<600&&u.onResizeFunction()}),u.master={},u.update=function(e){u.master=angular.copy(e)},u.reset=function(e){e&&(e.$setPristine(),e.$setUntouched()),u.user=angular.copy(u.master)},u.reset()}function MainController(e,n,t,i){function o(){angular.element(t);t.css("hight",i.outerHeight)}var r=this,a="https://meetupplanner.firebaseio.com/",s=new Firebase(a);r.logout=function(){alert("logging you out!"),s.unauth(),n.path("/")},angular.element(t).ready(function(){o()})}function NewUserSignUpController(e,n,t,o,r,a){function s(){""!=l.errors.name||""!=l.errors.email||l.errors.password?l.errors.passesAllTests=!1:l.errors.passesAllTests=!0,angular.isDefined(l.inputs.newName)&&""!==l.inputs.newName&&angular.isDefined(l.inputs.newEmail)&&""!==l.inputs.newEmail&&angular.isDefined(l.inputs.newPassword)&&""!==l.inputs.newPassword?l.inputs.requiredFieldsDefined=!0:l.inputs.requiredFieldsDefined=!1}var l=this;l.inputs={newName:"",newEmail:"",newPassword:"",requiredFieldsDefined:!1},l.errors={name:"",email:"",password:!1,passesAllTests:!1},l.passReqs={0:{id:"",req:"Is at least 16 characters long",fulfilled:!1,style:{color:"red"}},1:{id:"",req:"Is no longer than 100 characters",fulfilled:!1,style:{color:"red"}},2:{id:"",req:"Contains at least one lowercase letter",fulfilled:!1,style:{color:"red"}},3:{id:"",req:"Contains at least one uppercase letter",fulfilled:!1,style:{color:"red"}},4:{id:"",req:"Contains at least one number",fulfilled:!1,style:{color:"red"}},5:{id:"",req:"Contains at least one required symbol (!@#$%^&*)",fulfilled:!1,style:{color:"red"}},6:{id:"",req:"Doesn't have any illegal characters",fulfilled:!0,style:{color:"red"}}},l.showReqsBox=!1;var u=t;l.checkNewName=function(){var e=[],n=u.required(l.inputs.newName),t=u.minNameLength(l.inputs.newName);angular.isDefined(n)&&e.push(n),angular.isDefined(t)&&e.push(t),e.length>0?l.errors.name=e.join(", "):l.errors.name="",s()},l.checkNewEmail=function(){var e=[],n=u.required(l.inputs.newEmail),t=u.email(l.inputs.newEmail);angular.isDefined(n)&&e.push(n),angular.isDefined(t)&&e.push(t),e.length>0?l.errors.email=e.join(", "):l.errors.email="",s()},l.checkNewPassword=function(){l.showReqsBox=!0;var e=[],n=u.required(l.inputs.newPassword),t=[u.minPassLength(l.inputs.newPassword),u.maxPassLength(l.inputs.newPassword),u.atLeastOneLowercase(l.inputs.newPassword),u.atLeastOneUppercase(l.inputs.newPassword),u.atLeastOneNumber(l.inputs.newPassword),u.atLeastOneSymbol(l.inputs.newPassword),u.illegalCharacter(l.inputs.newPassword)];angular.isDefined(n)&&e.push(n),e.length>0?l.errors.password=e.join(", "):l.errors.email="";var o=!1;for(i=0;i<7;i++)t[i]?(l.passReqs[i].fulfilled=!0,l.passReqs[i].style={color:"green"}):(l.passReqs[i].fulfilled=!1,l.passReqs[i].style={color:"red"},o=!0);l.errors.password=o,s()},l.exitPassword=function(){l.checkNewPassword(),l.showReqsBox=!1},l.createNewUser=function(){var e=r;if(l.errors.passesAllTests&&l.inputs.requiredFieldsDefined){var t=o,i=a;t.createNewUser(l.inputs.newEmail,l.inputs.newPassword).then(function(o){i.loadPrimaries(l.inputs.newEmail,l.inputs.newName,o.uid),t.addNewUserToDatabase(o.uid,l.inputs.newName,l.inputs.newEmail).then(function(i){n.info(i),t.addNewUserToRegUsersList(o.uid,l.inputs.newEmail).then(function(t){e.redirectTo("/userInformation",o.uid),n.info(t)})["catch"](function(e){n.info(e)})})["catch"](function(e){n.info(e)})})["catch"](function(e){n.info(e)})}}}function RegUserLoginController(e,n,t,i,o){function r(){angular.isDefined(a.inputs.email)&&""!==a.inputs.email&&angular.isDefined(a.inputs.password)&&""!==a.inputs.password?(a.inputs.requiredFieldsDefined=!0,a.unclockUserLoginBtn["class"]="btn btn-success",a.unclockUserLoginBtn.message="Login",a.unclockUserLoginBtn.usable=!0):(a.inputs.requiredFieldsDefined=!1,a.unclockUserLoginBtn["class"]="btn btn-warning",a.unclockUserLoginBtn.message="Need Email & Pass",a.unclockUserLoginBtn.usable=!1)}var a=this;a.inputs={email:"",password:"",requiredFieldsDefined:!1},a.errors={message:"",passesAllTests:!0},a.unclockUserLoginBtn={usable:!1,"class":"btn btn-warning",message:"Need Email & Pass"},a.update=function(){a.inputs.email=n.find("#userEmail")[0].value,a.inputs.password=n.find("#userPassword")[0].value,r()},a.loginRegisteredUser=function(){var n=i,r=t,s=o;r.LoginRegisteredUser(a.inputs.email,a.inputs.password).then(function(e){a.errors.passesAllTests=!0,s.setPrimariesLocally(a.inputs.email,a.inputs.name,e.uid)}).then(function(){e.info("uid is "+s.getUIDLocally()),r.getUserBio(s.getUIDLocally()).then(function(n){s.updateBioLocally(n),r.getUserEvents(s.getUIDLocally()).then(function(e){s.updateAllUserEventsLocally(e)})["catch"](function(n){e.info(n)})})["catch"](function(n){e.info(n)}),n.redirectTo("/userInformation",s.getUIDLocally())})["catch"](function(e){a.errors.message=e,a.errors.passesAllTests=!1})},a.clicked=function(){var e=t;e.logUserOut()}}function topMenuController(e,n,t,i,o){function r(e){e?(n.info("User "+e.uid+" is logged in with "+e.provider),s.loggedIn=!0):(n.info("User is logged out"),s.loggedIn=!1)}function a(e,i){var o=e+"/"+i.uid+"/"+i.token;n.info("redirecting to: "+o),t.path(o)}var s=this,l="https://meetupplanner.firebaseio.com/",u=new Firebase(l);s.loggedIn=!1,"addEventListener"in i&&i.addEventListener("DOMContentLoaded",function(){n.info("adding FastClick"),FastClick.attach(i.body)},!1),angular.element(o).bind("resize",function(){s.onResizeFunction(),e.$apply()}),angular.element(i).ready(function(){o.outerWidth<600&&(s.onResizeFunction(),e.$apply())}),s.logout=function(){n.info("logging out!"),s.loggedIn=!1,u.unauth(),a("/",{uid:"",token:""})},s.navBarLoginRegisteredUser=function(){n.info("launching login");var t=new Firebase(l);t.authWithPassword({email:s.navbarUserEmail,password:s.navbarUserPass},function(t,i){t?n.info("Error Logging In: "+t):(n.info("Logged In successfully: "+i.uid),n.info(i),a("/userInformation",i),e.$apply(),angular.element(".navbar-toggle").click())})},s.onResizeFunction=function(){var e=angular.element(".navbarInputs");e.css("width",o.outerWidth-26+"px")},u.onAuth(r)}function UserEventsController(e,n,t){function i(e){return Date.parse(e)}function o(){var e=0;for(event in s.events.hosting)e++;return e}function r(){var e=new Date,n=10*i(e)+o();return n}function a(){l.setUIDLocally(n.uid),l.loadBio(n.uid).then(function(e){s.userBio=e})["catch"](),s.events=l.getAllUserEventsLocally(),l.getRemoteEventsForLocal().then(function(n){e.info("got this from the db"),e.info(n),s.events=l.getAllUserEventsLocally()})}var s=this,l=t;s.showDecline=!1,s.userBio={},s.events={},s.errors={},s.createNewEvent=function(){var n=r();e.info("you're creating a new event! "+n),l.createNewEvent(n).then()["catch"]()},a()}function UserInformationController(e,n,t,i,o){function r(e){return new Date(parseInt(e))}function a(e){return Date.parse(e)}function s(){u.loadBio(t.uid).then(function(e){l.user=e,angular.isDefined(e.dob)&&""!==e.dob&&(l.tempBirthday=r(e.dob))})}var l=this,u=i;l.user={},l.tempBirthday,l.view={dataToSave:!1,isData:!1,btnMssg:"Move On...",proceedBtn:"btn btn-primary"},l.checkValues=function(){l.view.isData=!0,!angular.isUndefined(l.user.company)&&""!==l.user.company||!angular.isUndefined(l.user.title)&&""!==l.user.title||!angular.isUndefined(l.user.dob)&&""!==l.user.dob?(l.view.dataToSave=!0,l.view.proceedBtn="btn btn-success",l.view.btnMssg="Save & Continue"):(l.view.dataToSave=!1,l.view.proceedBtn="btn btn-primary",l.view.btnMssg="Move On...")},l.updateDOB=function(){l.user.dob=a(l.tempBirthday),l.checkValues()},l.saveAndMoveOn=function(){var n=o,i=u.getUIDLocally();0!==l.tempBirthday&&l.updateDOB(),(""==i||angular.isUndefined(i))&&u.setUIDLocally(t.uid),l.view.isData&&(e.info("saving the new data"),u.updateBioLocally(l.user)),n.redirectTo("/userEvents",l.user.uid)},s()}function authService(e,n,t){function i(){return e.info("logging from the isLoggedIn Method"),!0}var o="https://meetupplanner.firebaseio.com/",r=(new Firebase(o),{isLoggedIn:i});return r}function backendServices(e,n,t){function i(e){return btoa(e)}function o(e){return atob(e)}function r(e){return new Date(parseInt(e))}function a(e){return Date.parse(e)}function s(e,t){var i=new Firebase(U);return n(function(n,o){i.createUser({email:e,password:t},function(e,t){e?o("Error creating user: "+e):n(t)})})}function l(e,t,i){var o=new Firebase(U),r=o.child("Users").child(e),s=new Date;return n(function(n,o){r.set({bio:{uid:e,name:t,email:i},events:{pending:{updated:a(s)},hosting:{updated:a(s)},attending:{updated:a(s)},completed:{updated:a(s)}}},function(e){e?o("Data could not be saved: "+e):n("Data saved successfully.")})})}function u(e,t){var o=new Firebase(U),r=i(t),a=o.child("Uids").child(r);return n(function(n,t){a.set(e,function(e){e?t("Data could not be saved. "+e):n("uid created sucessfully.")})})}function c(t,i){var o=new Firebase(U);return n(function(n,r){o.authWithPassword({email:t,password:i},function(t,i){t?r("Error Logging In: "+t):(e.info("Logged In successfully: "+i.uid),n(i))})})}function d(){var n=new Firebase(U);return new Promise(function(t,i){n.onAuth(function(n){n?(e.info("User "+n.uid+" is logged in with "+n.provider),t(!0)):(e.info("User is logged out"),t(!1))})})}function f(){var n=new Firebase(U);e.info("logging user out"),n.unauth()}function m(e){var t=new Firebase(U),i=e.uid,o=t.child("Users").child(i);return n(function(n,t){o.update(e,function(e){e?t("There was a problem updating that record: "+e):n("all user data uploaded successfully")})})}function g(t){e.info(t);var i=new Firebase(U),o=t.uid.toString(),r=i.child("Users").child(o).child("bio");return n(function(n,i){e.info("uploading this"),e.info(t),r.update(t,function(e){e?i("There was a problem updating that record: "+e):n("all user bio data uploaded successfully")})})}function v(){}function p(e){var t=new Firebase(U),i=t.child("Users").child(e).child("bio");return n(function(e,n){i.once("value",function(n){e(n.val())},function(e){e&&n(e)})})}function h(t,i){var o=new Firebase(U),r=i.id,a=o.child("Users").child(t).child("events").child("hosting").child(r);return e.info(a),n(function(n,t){e.info("uploading this event:"),e.info(i),a.set(i,function(e){e?t("There was an error: "+e):n("New event saved to DB successfully")})})}function w(e){var t=new Firebase(U),i=t.child("Users").child(e);return n(function(e,n){i.once("value",function(n){var t=n.val(),i={hosting:t.hosting,attending:t.attending,pending:t.pending,completed:t.completed};e(i)},function(e){e&&n(e)})})}var U="https://meetupplanner.firebaseio.com/",b={utf8_to_b64:i,b64_to_utf8:o,unixTimeToDateTime:r,dateTimeToUnixTime:a,LoginRegisteredUser:c,checkLoginStatus:d,logUserOut:f,downloadUserData:v,getUserBio:p,getUserEvents:w,createNewUser:s,addNewUserToDatabase:l,addNewUserToRegUsersList:u,uploadUserData:m,uploadUserBio:g,createHostedEvent:h};return b}function trafficValet(e,n){function t(t,i,o){angular.isDefined(i)?(t=t+"/"+i,angular.isDefined(o)&&(t=t+"/"+o,e.info("redirecting now to "+t),n.path(t)),e.info("redirecting now to "+t),n.path(t)):(e.info("redirecting now to "+t),n.path(t))}var i={redirectTo:t};return i}function userData(e,n,t){function i(){return""!==A.bio.uid&&""!==A.bio.name&&""!==A.bio.email}function o(e){Object.keys(A.events[e]).forEach(function(n){angular.isObject(A.events[e][n])||delete A.events[e][n]})}function r(){return A.bio.uid}function a(){return A.bio.name}function s(){return A.bio.email}function l(){return A.bio.company}function u(){return A.bio.title}function c(){return A.bio.dob}function d(){return{uid:A.bio.uid,name:A.bio.name,email:A.bio.email,company:A.bio.company,title:A.bio.title,dob:A.bio.dob}}function f(e){return A.events[e]}function m(){return A.events}function g(e){A.bio.uid=e}function v(e){A.bio.name=e}function p(e){A.bio.email=e}function h(e){A.bio.company=e}function w(e){A.bio.title=e}function U(e){A.bio.dob=e}function b(e,n,t){angular.isDefined(e)&&p(e),angular.isDefined(n)&&a(n),angular.isDefined(t)&&g(t)}function y(e,n){o(e),A.events[e][n.id]=n}function E(e){A.events=allEvents}function L(e){v(e.name),p(e.email),h(e.company),w(e.title),U(e.dob),C()}function D(e,n){delete A.events[e][n.id]}function T(){var e=t;e.downloadUserData().then(function(e){A=e})}function $(i){var o=t;return e.info("going out to the db for bio"),n(function(n,t){o.getUserBio(i).then(function(t){e.info("found the bio remotly"),e.info(t),n(t)})["catch"](function(e){t("There was an error reading the user bio: "+e)})})}function I(){var i=t;return e.info("going out to the db for events"),n(function(n,t){e.info(r()),i.getUserEvents(r()).then(function(t){e.info("LOOK HERE"),e.info(t);for(eventType in t)if(angular.isDefined(eventType))for(event in eventType)y(eventType,event);n(t)})["catch"](function(e){t("There was an error reading the user events: "+e)})})}function R(){var e=t;e.uploadUserData(A)}function C(){var n=t;e.info("from setRemoteBioFromLocal"),e.info(A),n.uploadUserBio(A.bio)}function N(){}function k(t){return n(function(n,o){i()?(e.info("returning a local bio"),e.info(d()),n(d())):$(t).then(function(e){n(e)})["catch"](function(e){o(e)})})}function P(t){var i={};return n(function(n,t){I().then(function(e){n(e)}),i=f(type),e.info(i),n(i)})}function B(i){var o=t,a={};return a={id:i,name:"",type:"",host:{name:"",uid:""},message:"",eventTimes:{start:0,end:0},address:{street01:"",street02:"",street03:"",city:"",state:"",zip:0},guestList:{}},y("hosting",a),n(function(n,t){e.info("jumping into the promise here"),o.createHostedEvent(r(),a).then(function(n){e.info(n)})["catch"](function(n){e.info(n)})})}var A={bio:{uid:"",name:"",email:"",company:"",title:"",dob:0},events:{hosting:{},pending:{},attending:{},completed:{}}},q={bioPrimariesAreCompleteLocally:i,cleanEvents:o,getUIDLocally:r,getNameLocally:a,getEmailLocally:s,getCompanyLocally:l,getTitleLocally:u,getDOBLocally:c,getFullBioLocally:d,getUserEventsLocally:f,getAllUserEventsLocally:m,setUIDLocally:g,setNameLocally:v,setEmailLocally:p,setCompanyLocally:h,setTitleLocally:w,setDOBLocally:U,setPrimariesLocally:b,updateUserEventsLocally:y,updateAllUserEventsLocally:E,updateBioLocally:L,removeUserEventsLocally:D,getFullRemoteDBforLocal:T,getRemoteBioForLocal:$,getRemoteEventsForLocal:I,setFullRemoteDBfromLocal:R,setRemoteBioFromLocal:C,setRemoteEventsFromLocal:N,loadBio:k,loadEventsProgressively:P,createNewEvent:B};return q}function validation(e){function n(e){return angular.isUndefined(e)?"This is a required field":void 0}function t(e){return angular.isDefined(e)&&e.length<f?"Name should be at least "+f+" characters":void 0}function i(e){return angular.isDefined(e)&&!(e.length<m)}function o(e){return angular.isDefined(e)&&!(e.length>g)}function r(e){if(angular.isDefined(e)){var n=new RegExp("[!@#$%^&*]");return!!n.test(e)}return!1}function a(e){if(angular.isDefined(e)){var n=new RegExp("[0-9]","");return!!n.test(e)}return!1}function s(e){if(angular.isDefined(e)){var n=new RegExp("[a-z]","");return!!n.test(e)}return!1}function l(e){if(angular.isDefined(e)){var n=new RegExp("[A-Z]","");return!!n.test(e)}return!1}function u(e){if(angular.isDefined(e)){var n=new RegExp("[^A-z0-9!@#$%^&*]","");return!n.test(e)}return!1}function c(e){var n=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","");return n.test(e)?void 0:"Not a valid e-mail address"}function d(e){}var f=3,m=16,g=100,v={required:n,minNameLength:t,minPassLength:i,maxPassLength:o,atLeastOneSymbol:r,atLeastOneNumber:a,atLeastOneLowercase:s,atLeastOneUppercase:l,illegalCharacter:u,email:c,dateOfBirth:d};return v}function config(e){e.when("/",{templateUrl:"views/landingPage.htm",controller:"LandingPageController",controllerAs:"vm"}).when("/signup",{templateUrl:"views/newUserSignup.htm",controller:"NewUserSignUpController",controllerAs:"vm"}).when("/login",{templateUrl:"views/registeredUserLogin.htm",controller:"RegUserLoginController",controllerAs:"vm"}).when("/userInformation/:uid?",{templateUrl:"views/userInformation.htm",controller:"UserInformationController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).when("/userEvents/:uid?",{templateUrl:"views/userEvents.htm",controller:"UserEventsController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).when("/event/:eventId?/:hostId?/:uid?",{templateUrl:"views/anEvent.htm",controller:"AnEventController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).otherwise({redirectTo:"/"})}function userAuthenticationService(e){e.isLoggedIn()}function toolBar(){function e(e,n,t,i){}function n(e,n){var t=this,i=n;i.checkLoginStatus().then(function(e){t.loggedIn=e})["catch"](),t.clicked=function(){e.info("button clicked")}}e.$inject=["scope","el","attr","ctrl"];var t={restrict:"AECM",templateUrl:"../views/directives/toolBar.directive.htm",replace:!0,scope:{},link:e,controller:n,controllerAs:"vm",bindToController:!0};return n.$inject=["$log","backendServices"],t}config.$inject=["$routeProvider"],userAuthenticationService.$inject=["authService"],angular.module("meetUpEventApp",["ngRoute","ngTouch","firebase"]),angular.module("meetUpEventApp").controller("AnEventController",AnEventController),AnEventController.$inject=["$scope","$log","$location","$routeParams","$firebaseObject"],angular.module("meetUpEventApp").controller("LandingPageController",LandingPageController),LandingPageController.$inject=["$scope","$log","$location","$document","$window"],angular.module("meetUpEventApp").controller("MainController",MainController),MainController.$inject=["$log","$location","$document","$window"],angular.module("meetUpEventApp").controller("NewUserSignUpController",NewUserSignUpController),NewUserSignUpController.$inject=["$scope","$log","validation","backendServices","trafficValet","userData"],angular.module("meetUpEventApp").controller("RegUserLoginController",RegUserLoginController),RegUserLoginController.$inject=["$log","$document","backendServices","trafficValet","userData"],angular.module("meetUpEventApp").controller("topMenuController",topMenuController),topMenuController.$inject=["$scope","$log","$location","$document","$window"],angular.module("meetUpEventApp").controller("UserEventsController",UserEventsController),UserEventsController.$inject=["$log","$routeParams","userData"],angular.module("meetUpEventApp").controller("UserInformationController",UserInformationController),UserInformationController.$inject=["$log","$document","$routeParams","userData","trafficValet"],angular.module("meetUpEventApp").factory("authService",authService),authService.$inject=["$log","$q","$location"],angular.module("meetUpEventApp").factory("backendServices",backendServices),backendServices.$inject=["$log","$q","$window"],angular.module("meetUpEventApp").factory("trafficValet",trafficValet),trafficValet.$inject=["$log","$location"],angular.module("meetUpEventApp").factory("userData",userData),userData.$inject=["$log","$q","backendServices"],angular.module("meetUpEventApp").factory("validation",validation),validation.$inject=["$log"],angular.module("meetUpEventApp").config(config),angular.module("meetUpEventApp").directive("toolBar",toolBar);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFuRXZlbnQuY29udHJvbGxlci5qcyIsIkxhbmRpbmdQYWdlLmNvbnRyb2xsZXIuanMiLCJNYWluLmNvbnRyb2xsZXIuanMiLCJOZXdVc2VyU2lnblVwLmNvbnRyb2xsZXIuanMiLCJSZWdVc2VyTG9naW4uY29udHJvbGxlci5qcyIsIlRvcE1lbnUuY29udHJvbGxlci5qcyIsIlVzZXJFdmVudHMuY29udHJvbGxlci5qcyIsIlVzZXJJbmZvcm1hdGlvbi5jb250cm9sbGVyLmpzIiwiQXV0aFNlcnZpY2UuZmFjdG9yeS5qcyIsIkJhY2tlbmRTZXJ2aWNlcy5mYWN0b3J5LmpzIiwiVHJhZmZpY1ZhbGV0LmZhY3RvcnkuanMiLCJVc2VyRGF0YS5mYWN0b3J5LmpzIiwiVmFsaWRhdGlvbi5mYWN0b3J5LmpzIiwicm91dGUtY29uZmlnLmpzIiwiYXBwLmpzIiwiVG9vbEJhci5kaXJlY3RpdmUuanMiLCJhcHAubW9kdWxlLmpzIl0sIm5hbWVzIjpbIkFuRXZlbnRDb250cm9sbGVyIiwiJHNjb3BlIiwiJGxvZyIsIiRsb2NhdGlvbiIsIiRyb3V0ZVBhcmFtcyIsIiRmaXJlYmFzZU9iamVjdCIsImluaXQiLCJ2bSIsInRlbXBEYXRlVGltZSIsInN0YXJ0IiwiZW5kIiwibmV3R3Vlc3QiLCJuYW1lIiwiZW1haWwiLCJhZGRyZXNzIiwidmFsaWQiLCJzdHlsZSIsImNvbG9yIiwic2hvd0lmSG9zdCIsImhpZGVJZkF0dGVuZGluZyIsIm1hbmFnZVNlY3Rpb25zIiwxLCJhY3RpdmUiLCJjb21wbGV0ZSIsImJhY2tncm91bmQtY29sb3IiLDIsMywiY2hlY2tGb3JIb3N0IiwiY2hlY2tJZkd1ZXN0SXNBdHRlbmRpbmciLCJvcGVuQWxsU2VjdGlvbnMiLCJ1dGY4X3RvX2I2NCIsInN0ciIsImJ0b2EiLCJiNjRfdG9fdXRmOCIsImF0b2IiLCJkYXRlVGltZVRvVW5peFRpbWUiLCJkYXRlVGltZSIsIkRhdGUiLCJwYXJzZSIsImNsZWFuTmV3R3Vlc3RWYXJpYWJsZSIsImludml0ZUFSZWdpc3RlcmVkVXNlciIsInVpZCIsImluZm8iLCJyZWYiLCJjaGlsZCIsImV2ZW50SWQiLCJzZXQiLCJpZCIsImV2ZW50VGltZXMiLCJldmVudCIsImhvc3QiLCJlcnJvciIsIm9uY2UiLCJzbmFwc2hvdCIsImNoZWNrRm9yUGxhY2Vob2xkZXIiLCJ2YWwiLCJ1cGRhdGVkIiwicmVtb3ZlIiwiZXJyb3JPYmplY3QiLCJjb2RlIiwiaW52aXRlQW5VbnJlZ2lzdGVyZWRVc2VyIiwidXNlcktleSIsImF1dGhEYXRhIiwiZ2V0QXV0aCIsImhvc3RJZCIsInVzZXJFdmVudHMiLCJvbiIsImFsbEd1ZXN0cyIsImF0dGVuZGluZyIsInRoaXMiLCJmYlVSTCIsIkZpcmViYXNlIiwicmVnaXN0ZXJlZFVzZXJzIiwicmVxdWlyZWRJbnB1dHMiLCJzZXRUZW1wVGltZSIsImVuZHBvaW50IiwidW5peFRpbWVUb0RhdGVUaW1lIiwidW5peFRpbWUiLCJwYXJzZUludCIsInN1Ym1pdCIsImJhY2tUb1VzZXJFdmVudHMiLCJwYXRoIiwidG9rZW4iLCJldmVudFJlZGlyZWN0IiwiZXZlbnRJRCIsImZ1bGxQYXRoIiwiY2hhbmdlU2VjdGlvbiIsInRhcmdldFNlY3Rpb24iLCJpIiwic2F2ZUV2ZW50VGltZSIsInRhcmdldCIsImd1ZXN0c0FyZUludml0ZWQiLCJndWVzdExpc3QiLCJ2YWxpZGF0ZUd1ZXN0RW1haWwiLCJjb25zdHJhaW50IiwiUmVnRXhwIiwidGVzdCIsImlzU2VjdGlvbkNvbXBsZXRlIiwic2F2ZUFuZEFkdmFuY2UiLCIkc2F2ZSIsInRoZW4iLCJhZGRHdWVzdFRvSG9zdHNMaXN0Iiwic3RhdHVzIiwic2F2ZUV2ZW50IiwiZ3Vlc3RXaWxsQXR0ZW5kIiwicmVzcG9uc2UiLCJjdXJyZW50VXNlciIsInRvdGFsUGVuZGluZ0ludml0YXRpb25zIiwicmVtb3ZlQXR0ZW5kaW5nVXBkYXRlZCIsImludml0YXRpb25zIiwidGhpc0ludml0YXRpb24iLCJpbnZpdGF0aW9uIiwiYXR0ZW5kaW5nTGlzdCIsImN1cnJlbnREYXRlIiwidXBkYXRlIiwidXBkYXRlVXBkYXRlZFBhcmFtIiwiYWRkSW52aXRhdGlvblRvQXR0ZW5kaW5nIiwiTGFuZGluZ1BhZ2VDb250cm9sbGVyIiwiJGRvY3VtZW50IiwiJHdpbmRvdyIsInJlZGlyZWN0IiwidXNlckRhdGEiLCJjdXJyZW50VXNlckRhdGEiLCIkYXBwbHkiLCJzaG93UmVxdWlybm1lbnRzIiwidmFsaWROZXdOYW1lIiwidmFsaWROZXdFbWFpbCIsInNlY3VyZVBhc3N3b3JkIiwic2VjdXJlIiwidW5sb2NrQ3JlYXRlVXNlckJ0biIsInVzYWJsZSIsImNsYXNzIiwibWVzc2FnZSIsInZhbGlkVXNlckVtYWlsIiwidmFsaWRVc2VyUGFzc3dvcmQiLCJ1bmNsb2NrVXNlckxvZ2luQnRuIiwicGFzc3dvcmRSZXF1aXJubWVudHMiLDAsIm1ldCIsNCw1LDYsImRpc3BsYXlQYXNzUmVxcyIsIm5ld05hbWUiLCJuZXdFbWFpbCIsImNoZWNrTmV3TmFtZSIsImxlbmd0aCIsIm9wZW5DcmVhdGVVc2VyQnV0dG9uIiwiY2hlY2tOZXdFbWFpbCIsImNoZWNrVXNlckVtYWlsIiwidXNlckVtYWlsIiwib3BlblVzZXJMb2dpbkJ0biIsImNoZWNrTmV3UGFzc3dvcmRzIiwiY29uc3RyYWludHMiLCJuZXdQYXNzd29yZCIsImNoZWNrVXNlclBhc3N3b3JkcyIsInVzZXJQYXNzd29yZCIsImZpbmQiLCJ2YWx1ZSIsImNyZWF0ZU5ld1VzZXIiLCJjcmVhdGVVc2VyIiwicGFzc3dvcmQiLCJ1c2Vyc1JlZiIsImJpbyIsImV2ZW50cyIsInBlbmRpbmciLCJob3N0aW5nIiwiY29tcGxldGVkIiwibG9naW5SZWdpc3RlcmVkVXNlciIsImF1dGhXaXRoUGFzc3dvcmQiLCJhbGVydE1lIiwiYWxlcnQiLCJvblJlc2l6ZUZ1bmN0aW9uIiwiaW5wdXRUZXh0IiwiYW5ndWxhciIsImVsZW1lbnQiLCJvdXRlcldpZHRoIiwib3V0ZXJIZWlnaHQiLCJjc3MiLCJhZGRFdmVudExpc3RlbmVyIiwiRmFzdENsaWNrIiwiYXR0YWNoIiwiYm9keSIsImJpbmQiLCJyZWFkeSIsIm1hc3RlciIsInVzZXIiLCJjb3B5IiwicmVzZXQiLCJmb3JtIiwiJHNldFByaXN0aW5lIiwiJHNldFVudG91Y2hlZCIsIk1haW5Db250cm9sbGVyIiwicmVzaXplQkdJbWFnZSIsImxvZ291dCIsInVuYXV0aCIsIk5ld1VzZXJTaWduVXBDb250cm9sbGVyIiwidmFsaWRhdGlvbiIsImJhY2tlbmRTZXJ2aWNlcyIsInRyYWZmaWNWYWxldCIsInZlcmlmeVJlcXVpcm5tZW50cyIsImVycm9ycyIsInBhc3Nlc0FsbFRlc3RzIiwiaXNEZWZpbmVkIiwiaW5wdXRzIiwicmVxdWlyZWRGaWVsZHNEZWZpbmVkIiwicGFzc1JlcXMiLCJyZXEiLCJmdWxmaWxsZWQiLCJzaG93UmVxc0JveCIsInNpZ251cFZhbGlkYXRpb24iLCJoYXNOYW1lIiwicmVxdWlyZWQiLCJsb25nRW5vdWdoIiwibWluTmFtZUxlbmd0aCIsInB1c2giLCJqb2luIiwiaGFzRW1haWwiLCJpc0FuRW1haWwiLCJjaGVja05ld1Bhc3N3b3JkIiwiaGFzUGFzc3dvcmQiLCJzcGVjaWZpY1JlcXMiLCJtaW5QYXNzTGVuZ3RoIiwibWF4UGFzc0xlbmd0aCIsImF0TGVhc3RPbmVMb3dlcmNhc2UiLCJhdExlYXN0T25lVXBwZXJjYXNlIiwiYXRMZWFzdE9uZU51bWJlciIsImF0TGVhc3RPbmVTeW1ib2wiLCJpbGxlZ2FsQ2hhcmFjdGVyIiwiYW55RXJyb3JzIiwiZXhpdFBhc3N3b3JkIiwibmV3VXNlclNoZXJwYSIsIm5ld1VzZXJEYXRhIiwiZGJVc2VyRGF0YSIsImxvYWRQcmltYXJpZXMiLCJhZGROZXdVc2VyVG9EYXRhYmFzZSIsImFkZE5ld1VzZXJUb1JlZ1VzZXJzTGlzdCIsInJlZGlyZWN0VG8iLCJSZWdVc2VyTG9naW5Db250cm9sbGVyIiwicmVnaXN0ZXJlZFVzZXJTaGVycGEiLCJkYXRhYmFzZSIsInJlZ2lzdGVyZWRVc2VyRGF0YSIsIkxvZ2luUmVnaXN0ZXJlZFVzZXIiLCJ1c2VyQ3JlZGVudGlhbHMiLCJzZXRQcmltYXJpZXNMb2NhbGx5IiwiZ2V0VUlETG9jYWxseSIsImdldFVzZXJCaW8iLCJ1c2VyQmlvIiwidXBkYXRlQmlvTG9jYWxseSIsImdldFVzZXJFdmVudHMiLCJhbGxFdmVudHNGb3JUaGlzVXNlciIsInVwZGF0ZUFsbFVzZXJFdmVudHNMb2NhbGx5IiwiY2xpY2tlZCIsInVzZXJBdXRoZW50aWNhdGlvbiIsImxvZ1VzZXJPdXQiLCJ0b3BNZW51Q29udHJvbGxlciIsImF1dGhEYXRhQ2FsbGJhY2siLCJwcm92aWRlciIsImxvZ2dlZEluIiwibmF2QmFyTG9naW5SZWdpc3RlcmVkVXNlciIsIm5hdmJhclVzZXJFbWFpbCIsIm5hdmJhclVzZXJQYXNzIiwiY2xpY2siLCJuYXZiYXJJbnB1dHMiLCJvbkF1dGgiLCJVc2VyRXZlbnRzQ29udHJvbGxlciIsIm5vT2ZIb3N0ZUV2ZW50cyIsImNvdW50ZXIiLCJnZW5lcmF0ZUV2ZW50SUQiLCJkYXRlIiwiaW5pdGlhbGl6ZSIsInNldFVJRExvY2FsbHkiLCJsb2FkQmlvIiwicmV0cmlldmVkQmlvIiwiZ2V0QWxsVXNlckV2ZW50c0xvY2FsbHkiLCJnZXRSZW1vdGVFdmVudHNGb3JMb2NhbCIsIm9idGFpbmVkVXNlckV2ZW50cyIsInNob3dEZWNsaW5lIiwiY3JlYXRlTmV3RXZlbnQiLCJVc2VySW5mb3JtYXRpb25Db250cm9sbGVyIiwib2J0YWluZWRVc2VyRGF0YSIsImRvYiIsInRlbXBCaXJ0aGRheSIsInZpZXciLCJkYXRhVG9TYXZlIiwiaXNEYXRhIiwiYnRuTXNzZyIsInByb2NlZWRCdG4iLCJjaGVja1ZhbHVlcyIsImlzVW5kZWZpbmVkIiwiY29tcGFueSIsInRpdGxlIiwidXBkYXRlRE9CIiwic2F2ZUFuZE1vdmVPbiIsInVzZXJJbmZvU2hlcnBhIiwiY3VycmVudFVpZCIsImF1dGhTZXJ2aWNlIiwiJHEiLCJpc0xvZ2dlZEluIiwiYWxsQXV0aFNlcnZpY2VzIiwiZmlyZUJhc2VBY2NvdW50cyIsInJlc29sdmUiLCJyZWplY3QiLCJhcHAiLCJhcHBVc2VycyIsImI2NEVtYWlsIiwiUmVnaXN0ZXJlZFVzZXJzTGlzdCIsImNoZWNrTG9naW5TdGF0dXMiLCJQcm9taXNlIiwidXBsb2FkVXNlckRhdGEiLCJhbGxVc2VyRGF0YSIsInJlbW90ZVVzZXIiLCJ1cGxvYWRVc2VyQmlvIiwiY3VycmVudFVzZXJCaW8iLCJ0b1N0cmluZyIsInJlbW90ZVVzZXJCaW8iLCJkb3dubG9hZFVzZXJEYXRhIiwiY3JlYXRlSG9zdGVkRXZlbnQiLCJuZXdFdmVudCIsIm5ld0hvc3RlZEV2ZW50IiwidXNlclByb2ZpbGUiLCJldmVudHNQYWNrYWdlIiwiYWxsQmFja2VuZFNlcnZpY2VzIiwicGFyYW0xIiwicGFyYW0yIiwiYWxsVHJhZmZpY0NvbnRyb2xzIiwiYmlvUHJpbWFyaWVzQXJlQ29tcGxldGVMb2NhbGx5IiwiY2xlYW5FdmVudHMiLCJ0eXBlIiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJrZXkiLCJpc09iamVjdCIsImdldE5hbWVMb2NhbGx5IiwiZ2V0RW1haWxMb2NhbGx5IiwiZ2V0Q29tcGFueUxvY2FsbHkiLCJnZXRUaXRsZUxvY2FsbHkiLCJnZXRET0JMb2NhbGx5IiwiZ2V0RnVsbEJpb0xvY2FsbHkiLCJnZXRVc2VyRXZlbnRzTG9jYWxseSIsInNldE5hbWVMb2NhbGx5Iiwic2V0RW1haWxMb2NhbGx5Iiwic2V0Q29tcGFueUxvY2FsbHkiLCJzZXRUaXRsZUxvY2FsbHkiLCJzZXRET0JMb2NhbGx5IiwidXBkYXRlVXNlckV2ZW50c0xvY2FsbHkiLCJhbGxVc2VyRXZlbnRzIiwiYWxsRXZlbnRzIiwic2V0UmVtb3RlQmlvRnJvbUxvY2FsIiwicmVtb3ZlVXNlckV2ZW50c0xvY2FsbHkiLCJnZXRGdWxsUmVtb3RlREJmb3JMb2NhbCIsImRiIiwicmVtb3RlVXNlckRhdGEiLCJnZXRSZW1vdGVCaW9Gb3JMb2NhbCIsImV2ZW50VHlwZSIsInNldEZ1bGxSZW1vdGVEQmZyb21Mb2NhbCIsInNldFJlbW90ZUV2ZW50c0Zyb21Mb2NhbCIsImJpb0Zyb21SZW1vdGVEQiIsImxvYWRFdmVudHNQcm9ncmVzc2l2ZWx5Iiwic3RyZWV0MDEiLCJzdHJlZXQwMiIsInN0cmVldDAzIiwiY2l0eSIsInN0YXRlIiwiemlwIiwibWluaW11bU5hbWVMZW5ndGgiLCJtaW5pbXVtUGFzc0xlbmd0aCIsIm1heGltdW1QYXNzTGVuZ3RoIiwiZGF0ZU9mQmlydGgiLCJhbGxWYWxpZGF0aW9ucyIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwid2hlbiIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsImNvbnRyb2xsZXJBcyIsInVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2UiLCJvdGhlcndpc2UiLCJ0b29sQmFyIiwibGlua0Z1bmMiLCJzY29wZSIsImVsIiwiYXR0ciIsImN0cmwiLCJUb29sQmFyQ29udHJvbGxlciIsImZiQ29ubmVjdCIsIiRpbmplY3QiLCJkaXJlY3RpdmUiLCJyZXN0cmljdCIsInJlcGxhY2UiLCJsaW5rIiwiYmluZFRvQ29udHJvbGxlciIsIm1vZHVsZSIsImZhY3RvcnkiXSwibWFwcGluZ3MiOiJBQU9BLFFBQUFBLG1CQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQWNBLFFBQUFDLEtBRUFDLEVBQUFDLGNBQUFDLE1BQUEsR0FBQUMsSUFBQSxJQUNBSCxFQUFBSSxVQUFBQyxLQUFBLEdBQUFDLE9BQUFDLFFBQUEsR0FBQUMsT0FBQSxFQUFBQyxPQUFBQyxNQUFBLE1BQ0FWLEVBQUFXLFlBQUEsRUFDQVgsRUFBQVksaUJBQUEsRUFFQVosRUFBQWEsZ0JBQ0FDLEdBQUFDLFFBQUEsRUFBQUMsVUFBQSxFQUFBUCxPQUFBQyxNQUFBLFFBQUFPLG1CQUFBLFdBQ0FDLEdBQUFILFFBQUEsRUFBQUMsVUFBQSxFQUFBUCxPQUFBQyxNQUFBLFFBQUFPLG1CQUFBLFNBQ0FFLEdBQUFKLFFBQUEsRUFBQUMsVUFBQSxFQUFBUCxPQUFBQyxNQUFBLFFBQUFPLG1CQUFBLFVBSUFHLElBQ0FDLElBR0FyQixFQUFBVyxZQUFB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QTJGLFNBQUEsT0FBQSxLQUFBLGFDSkFyTixRQUNBMk4sT0FBQSxrQkFDQUMsUUFBQSxrQkFBQXBNLGlCQUVBQSxnQkFBQTZMLFNBQUEsT0FBQSxLQUFBLFdDSkFyTixRQUNBMk4sT0FBQSxrQkFDQUMsUUFBQSxlQUFBbk0sY0FFQUEsYUFBQTRMLFNBQUEsT0FBQSxhQ0pBck4sUUFDQTJOLE9BQUEsa0JBQ0FDLFFBQUEsV0FBQWpSLFVBRUFBLFNBQUEwUSxTQUFBLE9BQUEsS0FBQSxtQkNKQXJOLFFBQ0EyTixPQUFBLGtCQUNBQyxRQUFBLGFBQUFyTSxZQUVBQSxXQUFBOEwsU0FBQSxRQ0pBck4sUUFDQTJOLE9BQUEsa0JBQ0F0QixPQUFBQSxRRUtBck0sUUFDQTJOLE9BQUEsa0JBQ0FMLFVBQUEsVUFBQVQiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignQW5FdmVudENvbnRyb2xsZXInLCBBbkV2ZW50Q29udHJvbGxlcik7XG5cbkFuRXZlbnRDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJywgJyRsb2NhdGlvbicsICckcm91dGVQYXJhbXMnLCAnJGZpcmViYXNlT2JqZWN0J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gQW5FdmVudENvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCAkbG9jYXRpb24sICRyb3V0ZVBhcmFtcywgJGZpcmViYXNlT2JqZWN0KSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdHZhciBmYlVSTCA9ICdodHRwczovL21lZXR1cHBsYW5uZXIuZmlyZWJhc2Vpby5jb20vJztcblx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdHZhciB1c2VyRXZlbnRzID0gcmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ob3N0SWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgnaG9zdGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ldmVudElkKVxuXG5cdC8vYmluZGluZyB0byB0aGUgZXZlbnRcblx0dm0uZXZlbnQgPSAkZmlyZWJhc2VPYmplY3QodXNlckV2ZW50cylcblx0dmFyIHJlZ2lzdGVyZWRVc2VycyA9ICRmaXJlYmFzZU9iamVjdChyZWYuY2hpbGQoJ1VpZHMnKSk7XG5cblx0Ly9yZXF1aXJlZCBmaWVsZHNcblx0dm0ucmVxdWlyZWRJbnB1dHMgPSBbJycsICcnLCAnJywgJycsICcnLCAnJywgJycsICcnLCAnJ107XG5cblx0Ly9Mb2NhbCBNZXRob2RzXG5cdGZ1bmN0aW9uIGluaXQoKSB7XG5cdFx0Ly9kZWNsYXJlIGFuZCBpbml0aWFsaXplIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZtLnRlbXBEYXRlVGltZSA9IHtzdGFydDogJycsIGVuZDogJyd9O1xuXHRcdHZtLm5ld0d1ZXN0ID0ge25hbWU6ICcnLCBlbWFpbDp7YWRkcmVzczonJywgdmFsaWQ6ZmFsc2UsIHN0eWxlOntjb2xvcjonJ319fTtcblx0XHR2bS5zaG93SWZIb3N0ID0gZmFsc2U7XG5cdFx0dm0uaGlkZUlmQXR0ZW5kaW5nID0gdHJ1ZTtcblx0XHQvL3NlY3Rpb25zXG5cdFx0dm0ubWFuYWdlU2VjdGlvbnMgPSB7XG5cdFx0XHQxOiB7YWN0aXZlOiB0cnVlLCBjb21wbGV0ZTogZmFsc2UsIHN0eWxlOntjb2xvcjonYmxhY2snLCAnYmFja2dyb3VuZC1jb2xvcic6J3llbGxvdyd9fSxcblx0XHRcdDI6IHthY3RpdmU6IGZhbHNlLCBjb21wbGV0ZTogZmFsc2UsIHN0eWxlOntjb2xvcjond2hpdGUnLCAnYmFja2dyb3VuZC1jb2xvcic6J2dyYXknfX0sXG5cdFx0XHQzOiB7YWN0aXZlOiBmYWxzZSwgY29tcGxldGU6IGZhbHNlLCBzdHlsZTp7Y29sb3I6J3doaXRlJywgJ2JhY2tncm91bmQtY29sb3InOidncmF5J319XG5cdFx0fTtcblxuXHRcdC8vY2hlY2sgdXNlciB0byBkZXRlcm1pbmUgc3RhdGVcblx0XHRjaGVja0Zvckhvc3QoKTtcblx0XHRjaGVja0lmR3Vlc3RJc0F0dGVuZGluZygpO1xuXG5cdFx0Ly9vcGVuIHVwIHNlY3Rpb25zXG5cdFx0aWYoIXZtLnNob3dJZkhvc3QpIG9wZW5BbGxTZWN0aW9ucygpO1xuXHR9XG5cblx0ZnVuY3Rpb24gdXRmOF90b19iNjQoc3RyKSB7XG5cdFx0cmV0dXJuIGJ0b2Eoc3RyKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGI2NF90b191dGY4KHN0cikge1xuICAgIFx0cmV0dXJuIGF0b2Ioc3RyKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNsZWFuTmV3R3Vlc3RWYXJpYWJsZSgpIHtcblx0XHR2bS5uZXdHdWVzdCA9IHtuYW1lOiAnJywgZW1haWw6e2FkZHJlc3M6JycsIHZhbGlkOmZhbHNlLCBzdHlsZTp7Y29sb3I6Jyd9fX07XG5cdH1cblxuXHRmdW5jdGlvbiBpbnZpdGVBUmVnaXN0ZXJlZFVzZXIodWlkKSB7XG5cdFx0JGxvZy5pbmZvKCdhZGRpbmcgdGhlbSB0byB0aGUgcmVnaXN0ZXJlZCB1c2VycyBsaXN0ICcgKyB1aWQpO1xuXHRcdC8vc2V0IHRoZSBuZXcgZXZlbnRcblx0XHRyZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ3BlbmRpbmcnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS5jaGlsZCgkcm91dGVQYXJhbXMuZXZlbnRJZCkuc2V0KHtcblx0XHRcdGlkOiAkcm91dGVQYXJhbXMuZXZlbnRJZCxcblx0XHRcdGV2ZW50VGltZXM6IHtcblx0XHRcdFx0c3RhcnQ6IHZtLmV2ZW50LmV2ZW50VGltZXMuc3RhcnQsXG5cdFx0XHRcdGVuZDogdm0uZXZlbnQuZXZlbnRUaW1lcy5lbmRcblx0XHRcdH0sXG5cdFx0XHRuYW1lOiB2bS5ldmVudC5uYW1lLFxuXHRcdFx0aG9zdDogJHJvdXRlUGFyYW1zLnVpZFxuXHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKCd0aGVyZSB3YXMgYW4gZXJyb3InICsgZXJyb3IpO1xuXHRcdH0pO1xuXHRcdC8vaWYgdGhlcmUgd2FzIGFuIHVwZGF0ZWQgcGxhY2UgaG9sZGVyLCByZW1vdmUgaXRcblx0XHRyZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ3BlbmRpbmcnKS5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHR2YXIgY2hlY2tGb3JQbGFjZWhvbGRlciA9IHNuYXBzaG90LnZhbCgpXG5cdFx0XHQkbG9nLmluZm8oc25hcHNob3QudmFsKCkpO1xuXG5cdFx0XHRpZihjaGVja0ZvclBsYWNlaG9sZGVyLnVwZGF0ZWQpIHtcblx0XHRcdFx0JGxvZy5pbmZvKCdkZWxldGluZyB1cGRhdGVkJyk7XG5cdFx0XHRcdHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgncGVuZGluZycpLmNoaWxkKCd1cGRhdGVkJykucmVtb3ZlKGZ1bmN0aW9uKGVycm9yT2JqZWN0KSB7XG5cdFx0XHRcdFx0aWYoZXJyb3JPYmplY3QpICRsb2cuaW5mbyhcIkRlbGV0aW5nIGZhaWxlZDogXCIgKyBlcnJvck9iamVjdC5jb2RlKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2UgJGxvZy5pbmZvKCdub3RoaW5nIHRvIGRvJyk7XG5cblx0XHR9LCBmdW5jdGlvbihlcnJvck9iamVjdCkge1xuXHRcdFx0aWYoZXJyb3JPYmplY3QpICRsb2cuaW5mbyhcIlRoZSByZWFkIGZhaWxlZDogXCIgKyBlcnJvck9iamVjdC5jb2RlKTtcblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGludml0ZUFuVW5yZWdpc3RlcmVkVXNlcih1c2VyS2V5KSB7XG5cdFx0JGxvZy5pbmZvKCdhZGRpbmcgdGhlbSB0byB0aGUgVU5SRUdJU1RFUkVEIHVzZXJzIGxpc3QgJyArIHVzZXJLZXkpO1xuXHRcdHJlZi5jaGlsZCgnVW5yZWdpc3RlcmVkVXNlcnMnKS5jaGlsZCh1c2VyS2V5KS5jaGlsZCgncGVuZGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ldmVudElkKS5zZXQoe1xuXHRcdFx0aWQ6ICRyb3V0ZVBhcmFtcy5ldmVudElkLFxuXHRcdFx0aG9zdDogJHJvdXRlUGFyYW1zLnVpZCxcblx0XHRcdGV2ZW50VGltZXM6IHtcblx0XHRcdFx0c3RhcnQ6IHZtLmV2ZW50LmV2ZW50VGltZXMuc3RhcnQsXG5cdFx0XHRcdGVuZDogdm0uZXZlbnQuZXZlbnRUaW1lcy5lbmRcblx0XHRcdH0sXG5cdFx0XHRuYW1lOiB2bS5ldmVudC5uYW1lXG5cdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oJ3RoZXJlIHdhcyBhbiBlcnJvcicgKyBlcnJvcik7XG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBjaGVja0Zvckhvc3QoKSB7XG5cdFx0Ly9jaGVjayBldmVudCBob3N0XG5cdFx0dmFyIGF1dGhEYXRhID0gcmVmLmdldEF1dGgoKTtcblxuXHRcdGlmKGF1dGhEYXRhLnVpZCA9PSAkcm91dGVQYXJhbXMuaG9zdElkKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2lzIHRoZSBob3N0Jyk7XG5cdFx0XHR2bS5zaG93SWZIb3N0ID0gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JGxvZy5pbmZvKCdub3QgdGhlIGhvc3QnKTtcblx0XHRcdHZtLnNob3dJZkhvc3QgPSBmYWxzZTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBjaGVja0lmR3Vlc3RJc0F0dGVuZGluZygpIHtcblx0XHRpZighdm0uc2hvd0lmSG9zdCkge1xuXHRcdFx0JGxvZy5pbmZvKCdjaGVjayBndWVzdCBhdHRlbmRhbmNlJyk7XG5cdFx0XHR1c2VyRXZlbnRzLmNoaWxkKCdndWVzdExpc3QnKS5vbigndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0XHR2YXIgYWxsR3Vlc3RzID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHRcdHZtLmhpZGVJZkF0dGVuZGluZyA9ICFhbGxHdWVzdHNbJHJvdXRlUGFyYW1zLnVpZF0uYXR0ZW5kaW5nO1xuXHRcdFx0XHRcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIG9wZW5BbGxTZWN0aW9ucygpIHtcblx0XHR2bS5tYW5hZ2VTZWN0aW9uc1sxXS5hY3RpdmUgPSB0cnVlO1xuXHRcdHZtLm1hbmFnZVNlY3Rpb25zWzJdLmFjdGl2ZSA9IHRydWU7XG5cdFx0dm0ubWFuYWdlU2VjdGlvbnNbM10uYWN0aXZlID0gdHJ1ZTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNhdmVFdmVudCgpIHtcblx0XHR2bS5ldmVudC4kc2F2ZSgpLnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2V2ZW50IHNhdmVkJyk7XG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdCRsb2cuaW5mbygnZXJyb3IhICcgKyBlcnJvcik7XG5cdFx0fSk7XG5cdH1cblxuXHQvL3ZpZXcgTWV0aG9kXG5cdHZtLnNldFRlbXBUaW1lID0gZnVuY3Rpb24oZW5kcG9pbnQpIHtcblx0XHRpZihlbmRwb2ludCA9PSAnc3RhcnQnKSB2bS50ZW1wRGF0ZVRpbWUuc3RhcnQgPSBuZXcgRGF0ZSgpO1xuXHRcdGlmKGVuZHBvaW50ID09ICdlbmQnKSB2bS50ZW1wRGF0ZVRpbWUuZW5kID0gbmV3IERhdGUoKTtcblx0fVxuXG5cdHZtLnVuaXhUaW1lVG9EYXRlVGltZSA9IGZ1bmN0aW9uICh1bml4VGltZSkge1xuXHRcdHJldHVybiBuZXcgRGF0ZShwYXJzZUludCh1bml4VGltZSkpO1xuXHR9O1xuXG5cdHZtLmRhdGVUaW1lVG9Vbml4VGltZSA9IGZ1bmN0aW9uIChkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fTtcblxuXHR2bS5zdWJtaXQgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9nLmluZm8oJ3N1Ym1pdHRpbmcgdGhlIGZvcm0gbm93IScpO1xuXHR9XG5cblx0dm0uYmFja1RvVXNlckV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2NhdGlvbi5wYXRoKCcvdXNlckV2ZW50cy8nICsgJHJvdXRlUGFyYW1zLnVpZCArICcvJyArICRyb3V0ZVBhcmFtcy50b2tlbik7XG5cdH1cblxuXHR2bS5ldmVudFJlZGlyZWN0ID0gZnVuY3Rpb24ocGF0aCwgZXZlbnRJRCkge1xuXHRcdHZhciBmdWxsUGF0aCA9IHBhdGggKyAnLycgKyAkcm91dGVQYXJhbXMudWlkICsgJy8nICsgJHJvdXRlUGFyYW1zLnRva2VuO1xuXHRcdC8vcmVkaXJlY3Rcblx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIHRvOiAnICsgZnVsbFBhdGgpO1xuXHRcdCRsb2NhdGlvbi5wYXRoKGZ1bGxQYXRoKTtcblx0fVxuXG5cdHZtLmNoYW5nZVNlY3Rpb24gPSBmdW5jdGlvbih0YXJnZXRTZWN0aW9uKSB7XG5cdFx0JGxvZy5pbmZvKCdhcmUgd2UgaGVyZScpO1xuXHRcdGZvcihpID0gMTsgaSA8PTM7IGkrKykge1xuXHRcdFx0aWYoaT09dGFyZ2V0U2VjdGlvbikge1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5hY3RpdmUgPSB0cnVlO1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5zdHlsZVsnYmFja2dyb3VuZC1jb2xvciddID0neWVsbG93Jztcblx0XHRcdFx0dm0ubWFuYWdlU2VjdGlvbnNbaV0uc3R5bGVbJ2NvbG9yJ10gPSdibGFjayc7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5hY3RpdmUgPSBmYWxzZTtcblx0XHRcdFx0dm0ubWFuYWdlU2VjdGlvbnNbaV0uc3R5bGVbJ2JhY2tncm91bmQtY29sb3InXSA9J2dyYXknO1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5zdHlsZVsnY29sb3InXSA9J3doaXRlJztcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHR2bS5zYXZlRXZlbnRUaW1lID0gZnVuY3Rpb24oZGF0ZVRpbWUsIHRhcmdldCkge1xuXHRcdC8vaWYgdGhpcyBldmVudCBkaWRuJ3QgaGF2ZSBhIHN0YXJ0IHRpbWUsIGNyZWF0ZSBpdFxuXHRcdGlmKCF2bS5ldmVudC5ldmVudFRpbWVzKSB7IFxuXHRcdFx0dm0uZXZlbnQuZXZlbnRUaW1lcyA9IHtzdGFydDogJycsIGVuZDogJyd9O1xuXHRcdFx0dm0uZXZlbnQuZXZlbnRUaW1lcy5zdGFydCA9IHZtLmRhdGVUaW1lVG9Vbml4VGltZSh2bS50ZW1wRGF0ZVRpbWUuc3RhcnQpOyBcblx0XHRcdHZtLmV2ZW50LmV2ZW50VGltZXMuZW5kID0gdm0uZGF0ZVRpbWVUb1VuaXhUaW1lKHZtLnRlbXBEYXRlVGltZS5lbmQpO1xuXHRcdH1cblxuXHRcdGlmKCh2bS50ZW1wRGF0ZVRpbWUuZW5kIDwgdm0udGVtcERhdGVUaW1lLnN0YXJ0KSAmJiB0YXJnZXQgPT0gJ3N0YXJ0Jykgdm0udGVtcERhdGVUaW1lLmVuZCA9IHZtLnRlbXBEYXRlVGltZS5zdGFydDtcblx0XHRpZih0YXJnZXQgPT0gJ3N0YXJ0Jykgdm0uZXZlbnQuZXZlbnRUaW1lcy5zdGFydCA9IHZtLmRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSk7XG5cdFx0aWYodGFyZ2V0ID09ICdlbmQnKSB2bS5ldmVudC5ldmVudFRpbWVzLmVuZCA9IHZtLmRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSk7XG5cdH1cblxuXHR2bS5ndWVzdHNBcmVJbnZpdGVkID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodm0uZXZlbnQuZ3Vlc3RMaXN0KSByZXR1cm4gdHJ1ZTtcblx0XHRlbHNlIHJldHVybiBmYWxzZTtcblx0fVxuXG5cdHZtLnZhbGlkYXRlR3Vlc3RFbWFpbCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vaWYgdGhlcmUgaXMgYW4gZW1haWwgYWRkcmVzc1xuXHRcdGlmKHZtLm5ld0d1ZXN0LmVtYWlsLmFkZHJlc3MpIHtcblx0XHRcdC8vY2hlY2sgdmFsaWRpdHlcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSsoPzpcXC5bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKSpAKD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1xcLikrW2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1wiLCBcIlwiKTtcblxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZtLm5ld0d1ZXN0LmVtYWlsLmFkZHJlc3MpKSB7XG5cdFx0XHRcdHZtLm5ld0d1ZXN0LmVtYWlsLnZhbGlkID0gdHJ1ZTtcblx0XHRcdFx0dm0ubmV3R3Vlc3QuZW1haWwuc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS5uZXdHdWVzdC5lbWFpbC52YWxpZCA9IGZhbHNlO1xuXHRcdFx0XHR2bS5uZXdHdWVzdC5lbWFpbC5zdHlsZSA9IHtjb2xvcjonJ307XG5cdFx0XHR9XHRcdFx0XG5cdFx0fVxuXHR9XG5cblx0dm0uaXNTZWN0aW9uQ29tcGxldGUgPSBmdW5jdGlvbigpIHtcblx0XHRmb3IoaT0wO2k8ODtpKyspIHtcblx0XHRcdCRsb2cuaW5mbyh2bS5yZXF1aXJlZElucHV0c1tpXSk7XG5cdFx0fVxuXHR9XG5cblx0dm0uc2F2ZUFuZEFkdmFuY2UgPSBmdW5jdGlvbigpIHtcblx0XHR2bS5ldmVudC4kc2F2ZSgpLnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2V2ZW50IHNhdmVkJyk7XG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdCRsb2cuaW5mbygnZXJyb3IhICcgKyBlcnJvcik7XG5cdFx0fSk7XG5cblx0XHQvL2NoZWNrIGZvciBjb21wbGV0ZW5lc1xuXHRcdHZtLmlzU2VjdGlvbkNvbXBsZXRlKCk7XG5cblx0XHRpZih2bS5tYW5hZ2VTZWN0aW9uc1sxXS5jb21wbGV0ZSA9PSB0cnVlICYmIHZtLm1hbmFnZVNlY3Rpb25zWzJdLmNvbXBsZXRlID09IHRydWUgJiYgdm0ubWFuYWdlU2VjdGlvbnNbM10uY29tcGxldGUgPT0gdHJ1ZSkge1xuXHRcdFx0dm0uZXZlbnRSZWRpcmVjdCgnL3VzZXJFdmVudHMnLCAkcm91dGVQYXJhbXMudWlkKTtcblx0XHR9IGVsc2UgaWYgKHZtLm1hbmFnZVNlY3Rpb25zWzFdLmFjdGl2ZSkgdm0uY2hhbmdlU2VjdGlvbigyKTtcblx0XHRlbHNlIGlmICh2bS5tYW5hZ2VTZWN0aW9uc1syXS5hY3RpdmUpIHZtLmNoYW5nZVNlY3Rpb24oMyk7XG5cdFx0ZWxzZSBpZiAodm0ubWFuYWdlU2VjdGlvbnNbM10uYWN0aXZlKSB2bS5jaGFuZ2VTZWN0aW9uKDEpO1xuXHR9XG5cblx0dm0uYWRkR3Vlc3RUb0hvc3RzTGlzdCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vZGVjbGFyZSBhbmQgaW5pdGlhbGl6ZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgdXNlcktleSA9IHV0ZjhfdG9fYjY0KHZtLm5ld0d1ZXN0LmVtYWlsLmFkZHJlc3MpO1xuXG5cdFx0Ly9pZiBlbWFpbCBpcyB2YWxpZCBhbmQgbmFtZSBleGlzdHNcblx0XHRpZiAodm0ubmV3R3Vlc3QubmFtZSAmJiB2bS5uZXdHdWVzdC5lbWFpbC52YWxpZCkge1xuXHRcdFx0Ly9pcyB0aGVyZSBhIGd1ZXN0IGxpc3QgYWxyZWFkeT8gSWYgbm90IGNyZWF0ZSBvbmVcblx0XHRcdGlmKCF2bS5ldmVudC5ndWVzdExpc3QpIHtcblx0XHRcdFx0dm0uZXZlbnQuZ3Vlc3RMaXN0ID0ge307XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2lmIHNvIGlzIHRoaXMgcGVyc29uIGFscmVhZHkgb24gdGhlIGxpc3Q/XG5cdFx0XHRcdHZhciBpID0wO1xuXHRcdFx0XHR3aGlsZSh2bS5ldmVudC5ndWVzdExpc3RbaV0pIHtcblx0XHRcdFx0XHRpZih2bS5ldmVudC5ndWVzdExpc3RbaV0uZW1haWwgPT0gYjY0X3RvX3V0ZjgodXNlcktleSkpIHtcblx0XHRcdFx0XHRcdCRsb2cuaW5mbygnVGhpcyBndWVzdCBpcyBhbHJlYWR5IG9uIHRoZSBsaXN0Jyk7XG5cdFx0XHRcdFx0XHRjbGVhbk5ld0d1ZXN0VmFyaWFibGUoKTtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aSsrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vaXMgdGhpcyBndWVzdCBhIHJlZ2lzdGVyZWQgdXNlcj9cblx0XHRcdGlmKHJlZ2lzdGVyZWRVc2Vyc1t1c2VyS2V5XSkge1xuXHRcdFx0XHQvL2lzIHRoZSByZWdpc3RlcmVkIHVzZXIgdGhlIGhvc3Q/XG5cdFx0XHRcdGlmKHJlZ2lzdGVyZWRVc2Vyc1t1c2VyS2V5XSA9PSAkcm91dGVQYXJhbXMudWlkKSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCd0cmllZCB0byByZWdpc3RlciB0aGUgaG9zdCcpO1xuXHRcdFx0XHRcdGNsZWFuTmV3R3Vlc3RWYXJpYWJsZSgpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHQvL2FkZCB0aGVtIHRvIHRoZSBhcHByb3ByaWF0ZSByZWdpc3RlcmVkIHVzZXJzJyBsaXN0IG9mIGV2ZW50IGludml0ZXNcblx0XHRcdFx0XHRpbnZpdGVBUmVnaXN0ZXJlZFVzZXIocmVnaXN0ZXJlZFVzZXJzW3VzZXJLZXldKTtcblxuXHRcdFx0XHRcdC8vYWRkIHRoZSBndWVzdCB0byB0aGUgbGlzdFxuXHRcdFx0XHRcdHZtLmV2ZW50Lmd1ZXN0TGlzdFtyZWdpc3RlcmVkVXNlcnNbdXNlcktleV1dID0ge1xuXHRcdFx0XHRcdFx0YXR0ZW5kaW5nOiBmYWxzZSwgXG5cdFx0XHRcdFx0XHRzdGF0dXM6J3BlbmRpbmcnLCBcblx0XHRcdFx0XHRcdG5hbWU6IHZtLm5ld0d1ZXN0Lm5hbWUsIFxuXHRcdFx0XHRcdFx0ZW1haWw6dm0ubmV3R3Vlc3QuZW1haWwuYWRkcmVzcyxcblx0XHRcdFx0XHR9O1x0XHRcdFx0XHRcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9hZGQgdGhlIGludml0ZSB0byB0aGUgbm9uLXJlZ2lzdGVyZWQgdXNlcnMgbGlzdCBvZiBldmVudCBpbnZpdGVzXG5cdFx0XHRcdGludml0ZUFuVW5yZWdpc3RlcmVkVXNlcih1c2VyS2V5KTtcblxuXHRcdFx0XHQvL2FkZCB0aGUgZ3Vlc3QgdG8gdGhlIGxpc3Rcblx0XHRcdFx0dm0uZXZlbnQuZ3Vlc3RMaXN0W3VzZXJLZXldID0ge1xuXHRcdFx0XHRcdFx0YXR0ZW5kaW5nOiBmYWxzZSwgXG5cdFx0XHRcdFx0XHRzdGF0dXM6J3BlbmRpbmcnLCBcblx0XHRcdFx0XHRcdG5hbWU6IHZtLm5ld0d1ZXN0Lm5hbWUsIFxuXHRcdFx0XHRcdFx0ZW1haWw6dm0ubmV3R3Vlc3QuZW1haWwuYWRkcmVzcyxcblx0XHRcdFx0fTtcblx0XHRcdH1cblxuXG5cdFx0XHQvL3NhdmUgdGhlIGV2ZW50XG5cdFx0XHR2bS5zYXZlRXZlbnQoKTtcblx0XHRcdC8vY2xlYXIgdGhlIHRlbXAgdmFsdWVzXG5cdFx0XHRjbGVhbk5ld0d1ZXN0VmFyaWFibGUoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JGxvZy5pbmZvKCd5b3UgZGlkblxcJ3QgZW50ZXIgYSBuYW1lIGFuZCBvciBlbWFpbCcpO1xuXHRcdH1cblx0fVxuXG5cdHZtLmd1ZXN0V2lsbEF0dGVuZCA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdFx0dmFyIGN1cnJlbnRVc2VyID0gcmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCdldmVudHMnKTtcblx0XHR2YXIgdG90YWxQZW5kaW5nSW52aXRhdGlvbnMgPSAwO1xuXHRcdHZhciByZW1vdmVBdHRlbmRpbmdVcGRhdGVkID0gZmFsc2U7XG5cdFx0XG5cdFx0Ly9jaGFuZ2UgYXR0ZW5kaW5nIHRvIHRydWUgaW4gaG9zdCdzIGd1ZXN0TGlzdFxuXHRcdHZtLmV2ZW50Lmd1ZXN0TGlzdFskcm91dGVQYXJhbXMudWlkXS5hdHRlbmRpbmcgPSByZXNwb25zZTtcblx0XHQvL2NoYW5nZSBzdGF0dXMgdG8gJ2F0dGVuZGluZycgaW4gaG9zdCdzIGd1ZXN0TGlzdFxuXHRcdHZtLmV2ZW50Lmd1ZXN0TGlzdFskcm91dGVQYXJhbXMudWlkXS5zdGF0dXMgPSAnYXR0ZW5kaW5nJztcblx0XHRcblx0XHQvL2dldCB0aGUgaW52aXRhdGlvbiBkZXRhaWxzXG5cdFx0Y3VycmVudFVzZXIuY2hpbGQoJ3BlbmRpbmcnKS5vbigndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFsYmVcblx0XHRcdHZhciBpbnZpdGF0aW9ucyA9IHNuYXBzaG90LnZhbCgpO1xuXHRcdFx0Ly9sb2cgc3RhcnRpbmcgdmFsdWVzXG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnMpO1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdKTtcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9uc1skcm91dGVQYXJhbXMuaG9zdElkXVskcm91dGVQYXJhbXMuZXZlbnRJZF0pO1xuXG5cdFx0XHR2YXIgdGhpc0ludml0YXRpb24gPSBpbnZpdGF0aW9uc1skcm91dGVQYXJhbXMuaG9zdElkXVskcm91dGVQYXJhbXMuZXZlbnRJZF07XG5cdFx0XHRcblx0XHRcdCRsb2cuaW5mbyh0aGlzSW52aXRhdGlvbik7XG5cdFx0XHRcblx0XHRcdC8vY2hlY2sgIyBvZiBpbml2aWF0aW9uc1xuXHRcdFx0Zm9yKGludml0YXRpb24gaW4gaW52aXRhdGlvbnMpIHtcblx0XHRcdFx0dG90YWxQZW5kaW5nSW52aXRhdGlvbnMrKztcblx0XHRcdH1cblxuXHRcdFx0Ly9yZXBvcnQgIyBvZiBpbnZpdGF0aW9uc1xuXHRcdFx0JGxvZy5pbmZvKFwidG90YWwgYXR0ZW5kaW5nOiBcIiArIHRvdGFsUGVuZGluZ0ludml0YXRpb25zKTtcblx0XHRcdFxuXHRcdFx0Ly9hZGQgdGhlIGV2ZW50IHRvIHRoZSBndWVzdCdzIGF0dGVuZGluZyBsaXN0XG5cdFx0XHRpZihyZXNwb25zZSkgY3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ob3N0SWQpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ldmVudElkKS5zZXQodGhpc0ludml0YXRpb24sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oZXJyb3IpO1xuXHRcdFx0fSk7XG5cblx0XHR9KTtcblxuXHRcdC8vaWYgdGhlIHVwZGF0ZWQgcGxhY2Vob2xkZXIgd2FzIG9uIHRoZSBhdHRlbmRpbmcgbGlzdCByZW1vdmUgaXRcblx0XHRjdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykub24oJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgYXR0ZW5kaW5nTGlzdCA9IHNuYXBzaG90LnZhbCgpO1xuXHRcdFx0XG5cdFx0XHQvL3JlcG9ydCBhY3Rpb25zXG5cdFx0XHQkbG9nLmluZm8oJ3RoaXMgaXMgdGhlIGF0dGVuZGluZyBsaXN0Jyk7XG5cdFx0XHQkbG9nLmluZm8oYXR0ZW5kaW5nTGlzdCk7XG5cdFx0XHRcblx0XHRcdC8vdGhyb3cgZmxhZyBmb3IgbGF0ZXJcblx0XHRcdGlmKGF0dGVuZGluZ0xpc3QudXBkYXRlZCkgcmVtb3ZlQXR0ZW5kaW5nVXBkYXRlZCA9IHRydWU7XG5cblx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0Ly9pZiB0aGVyIHdhcyBhbiBlcnJvciByZXBvcnQgaXRcblx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oZXJyb3IpO1xuXHRcdH0pO1xuXG5cdFx0Ly9pZiB0aGlzIGlzIHRoZSBsYXN0IHBlbmRpbmcgZXZlbnQgb24gdGhlIGd1ZXN0J3MgcGVuZGluZyBsaXN0LCBhZGQgdGhlIHVwZGF0ZWQgcGxhY2Vob2xkZXJcblx0XHRpZih0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucyA8IDIpIHtcblx0XHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xuXG5cdFx0XHQvL3JlcGxhY2Ugd2l0aCB1cGRhdGVkIGZpZWxkXG5cdFx0XHRjdXJyZW50VXNlci5jaGlsZCgncGVuZGluZycpLnVwZGF0ZSh7XG5cdFx0XHRcdHVwZGF0ZWQ6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oZXJyb3IpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0Ly9yZW1vdmUgdGhlIGV2ZW50IGZyb20gdGhlIGd1ZXN0J3MgcGVuZGluZyBsaXN0XG5cdFx0Y3VycmVudFVzZXIuY2hpbGQoJ3BlbmRpbmcnKS5jaGlsZCgkcm91dGVQYXJhbXMuaG9zdElkKS5yZW1vdmUoKTtcblxuXHRcdC8vaWYgdGhlcmUgd2FzIGFuIHVwZGF0ZWQgZmllbGQgaW4gYXR0ZW5kaW5nLCByZW1vdmUgaXRcblx0XHRpZihyZW1vdmVBdHRlbmRpbmdVcGRhdGVkKSB7XG5cdFx0XHQkbG9nLmluZm8oJ3JlbW92aW5nIHRoZSB1cGRhdGVkIHBsYWNlaG9sZGVyJyk7XG5cdFx0XHQvL2N1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5jaGlsZCgndXBkYXRlZCcpLnJlbW92ZSgpO1xuXHRcdH1cblxuXHRcdC8vc2F2ZSBjaGFuZ2VzXG5cdFx0dm0uZXZlbnQuJHNhdmUoKTtcblx0fVxuXG5cdHZtLnVwZGF0ZVVwZGF0ZWRQYXJhbSA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBjdXJyZW50VXNlciA9IHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS5jaGlsZCgnZXZlbnRzJyk7XG5cdFx0XG5cdFx0JGxvZy5pbmZvKCd1cGRhdGluZyB0aGUgcGFyYW0nKTtcblx0XHRjdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykub24oJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdCRsb2cuaW5mbyhzbmFwc2hvdC52YWwoKSk7XG5cdFx0fSk7XG5cdFx0Y3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLmNoaWxkKCd1cGRhdGVkJykucmVtb3ZlKCk7XG5cdH1cblxuXHR2bS5hZGRJbnZpdGF0aW9uVG9BdHRlbmRpbmcgPSBmdW5jdGlvbihyZXNwb25zZSkge1xuXHRcdHZhciBjdXJyZW50VXNlciA9IHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS5jaGlsZCgnZXZlbnRzJyk7XG5cdFx0dmFyIHRvdGFsUGVuZGluZ0ludml0YXRpb25zID0gMDtcblxuXHRcdC8vZ2V0IHRoZSBpbnZpdGF0aW9uIGRldGFpbHNcblx0XHRjdXJyZW50VXNlci5jaGlsZCgncGVuZGluZycpLm9uKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWxiZVxuXHRcdFx0dmFyIGludml0YXRpb25zID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHR2YXIgdGhpc0ludml0YXRpb24gPSBpbnZpdGF0aW9uc1skcm91dGVQYXJhbXMuaG9zdElkXVskcm91dGVQYXJhbXMuZXZlbnRJZF07XG5cdFx0XHRcblx0XHRcdC8vbG9nIHN0YXJ0aW5nIHZhbHVlc1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zKTtcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9uc1skcm91dGVQYXJhbXMuaG9zdElkXSk7XG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnNbJHJvdXRlUGFyYW1zLmhvc3RJZF1bJHJvdXRlUGFyYW1zLmV2ZW50SWRdKTtcblx0XHRcdFxuXHRcdFx0Ly9jaGVjayAjIG9mIGluaXZpYXRpb25zXG5cdFx0XHRmb3IoaW52aXRhdGlvbiBpbiBpbnZpdGF0aW9ucykge1xuXHRcdFx0XHR0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucysrO1xuXHRcdFx0fVxuXG5cdFx0XHQvL3JlcG9ydCAjIG9mIGludml0YXRpb25zXG5cdFx0XHQkbG9nLmluZm8oXCJ0b3RhbCBwZW5kaW5nIGludml0YXRpb25zOiBcIiArIHRvdGFsUGVuZGluZ0ludml0YXRpb25zKTtcblx0XHRcdFxuXHRcdFx0JGxvZy5pbmZvKHJlc3BvbnNlKTtcblx0XHRcdC8vYWRkIHRoZSBldmVudCB0byB0aGUgZ3Vlc3QncyBhdHRlbmRpbmcgbGlzdFxuXHRcdFx0aWYocmVzcG9uc2UpIGN1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5jaGlsZCgkcm91dGVQYXJhbXMuaG9zdElkKS5jaGlsZCgkcm91dGVQYXJhbXMuZXZlbnRJZCkuc2V0KHRoaXNJbnZpdGF0aW9uLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKGVycm9yKTtcblx0XHRcdH0pO1xuXG5cblxuXHRcdH0pO1xuXHR9XG5cblx0Ly9zdGFydCBydW5cblx0aW5pdCgpO1xufVxuIiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignTGFuZGluZ1BhZ2VDb250cm9sbGVyJywgTGFuZGluZ1BhZ2VDb250cm9sbGVyKTtcblxuTGFuZGluZ1BhZ2VDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJywgJyRsb2NhdGlvbicsICckZG9jdW1lbnQnLCAnJHdpbmRvdyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIExhbmRpbmdQYWdlQ29udHJvbGxlcigkc2NvcGUsICRsb2csICRsb2NhdGlvbiwgJGRvY3VtZW50LCAkd2luZG93KSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdHZhciBmYlVSTCA9ICdodHRwczovL21lZXR1cHBsYW5uZXIuZmlyZWJhc2Vpby5jb20vJztcblx0dmFyIGF1dGhEYXRhID0ge307XG5cdHZhciBjdXJyZW50VXNlckRhdGEgPSB7fTtcblxuXHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0dm0uc2hvd1JlcXVpcm5tZW50cyA9IGZhbHNlO1xuXHR2bS52YWxpZE5ld05hbWUgPSB7J3ZhbGlkJzpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6Jyd9fTtcblx0dm0udmFsaWROZXdFbWFpbCA9IHsndmFsaWQnOmZhbHNlLCAnc3R5bGUnOntjb2xvcjonJ319O1xuXHR2bS5zZWN1cmVQYXNzd29yZCA9IHsnc2VjdXJlJzpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6Jyd9fTtcblx0dm0udW5sb2NrQ3JlYXRlVXNlckJ0biA9IHsndXNhYmxlJzpmYWxzZSwgJ2NsYXNzJzonYnRuIGJ0bi13YXJuaW5nJ307XG5cdHZtLm1lc3NhZ2UgPSAndGVzdGluZyc7XG5cblx0XG5cdHZtLnZhbGlkVXNlckVtYWlsID0geyd2YWxpZCc6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOicnfX07XG5cdHZtLnZhbGlkVXNlclBhc3N3b3JkID0geyd2YWxpZCc6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOicnfX07XG5cdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4gPSB7J3VzYWJsZSc6ZmFsc2UsICdjbGFzcyc6J2J0biBidG4td2FybmluZyd9O1xuXHR2bS5wYXNzd29yZFJlcXVpcm5tZW50cyA9IHtcblx0XHQwOnsnY29uc3RyYWludCc6J0lzIGF0IGxlYXN0IDE2IGNoYXJhY3RlcnMgbG9uZycsICdzdHlsZSc6e2NvbG9yOidyZWQnfSwgJ21ldCc6ZmFsc2V9LFxuXHRcdDE6eydjb25zdHJhaW50JzonSXMgbm8gbG9uZ2VyIHRoYW4gMTAwIGNoYXJhY3RlcnMnLCAnc3R5bGUnOntjb2xvcjoncmVkJ30sICdtZXQnOmZhbHNlfSxcblx0XHQyOnsnY29uc3RyYWludCc6J0NvbnRhaW5zIGF0IGxlYXN0IG9uZSByZXF1aXJlZCBzeW1ib2wgKFxcIVxcQFxcI1xcJFxcJVxcXlxcJlxcKiknLCAnc3R5bGUnOntjb2xvcjoncmVkJ30sICdtZXQnOmZhbHNlfSxcblx0XHQzOnsnY29uc3RyYWludCc6J0NvbnRhaW5zIGF0IGxlYXN0IG9uZSBudW1iZXInLCAnc3R5bGUnOntjb2xvcjoncmVkJ30sICdtZXQnOmZhbHNlfSxcblx0XHQ0OnsnY29uc3RyYWludCc6J0NvbnRhaW5zIGF0IGxlYXN0IG9uZSBsb3dlcmNhc2UgbGV0dGVyJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX0sXG5cdFx0NTp7J2NvbnN0cmFpbnQnOidDb250YWlucyBhdCBsZWFzdCBvbmUgdXBwZXJjYXNlIGxldHRlcicsICdzdHlsZSc6e2NvbG9yOidyZWQnfSwgJ21ldCc6ZmFsc2V9LFxuXHRcdDY6eydjb25zdHJhaW50JzpcIkRvZXNuJ3QgaGF2ZSBhbnkgaWxsZWdhbCBjaGFyYWN0ZXJzXCIsICdzdHlsZSc6e2NvbG9yOidyZWQnfSwgJ21ldCc6ZmFsc2V9XG5cdH07XG5cblx0Ly92YXIgdGhlVGVzdEJveCA9IGFuZ3VsYXIuZWxlbWVudCgkZG9jdW1lbnQpLmZpbmQoJyN0ZXN0Qm94Jyk7XG5cblx0Ly90aGVUZXN0Qm94LmNoZWNrVmFsaWRpdHkoKTtcblx0Ly9zZXRDdXN0b21WYWxpZGl0eSgneW91IG5lZWQgc29tZXRoaW5nIGVsc2UnKTtcblxuXHQvL2xvY2FsIG1ldGhvZHNcblx0ZnVuY3Rpb24gdXRmOF90b19iNjQoc3RyKSB7XG5cdFx0cmV0dXJuIGJ0b2Eoc3RyKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGI2NF90b191dGY4KHN0cikge1xuICAgIFx0cmV0dXJuIGF0b2Ioc3RyKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHVuaXhUaW1lVG9EYXRlVGltZSh1bml4VGltZSkge1xuXHRcdHJldHVybiBuZXcgRGF0ZShwYXJzZUludCh1bml4VGltZSkpO1xuXHR9XG5cblx0ZnVuY3Rpb24gZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKSB7XG5cdFx0cmV0dXJuIERhdGUucGFyc2UoZGF0ZVRpbWUpO1xuXHR9XG5cblx0Ly9kZWZpbmUgY29udHJvbGxlciBtZXRob2RzXG5cdHZtLmRpc3BsYXlQYXNzUmVxcyA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHZtLm5ld05hbWUgJiYgdm0ubmV3RW1haWwpIHtcblx0XHRcdHZtLnNob3dSZXF1aXJubWVudHMgPSB0cnVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2bS5zaG93UmVxdWlybm1lbnRzID0gZmFsc2U7XG5cdFx0fVxuXHR9XG5cblx0dm0uY2hlY2tOZXdOYW1lID0gZnVuY3Rpb24oKSB7XG5cdFx0XG5cdFx0aWYodm0ubmV3TmFtZSkge1xuXHRcdFx0aWYodm0ubmV3TmFtZS5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdHZtLnZhbGlkTmV3TmFtZS52YWxpZCA9IHRydWU7XG5cdFx0XHRcdHZtLnZhbGlkTmV3TmFtZS5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLnZhbGlkTmV3TmFtZS52YWxpZCA9IGZhbHNlO1xuXHRcdFx0XHR2bS52YWxpZE5ld05hbWUuc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHZtLm9wZW5DcmVhdGVVc2VyQnV0dG9uKCk7XG5cdH1cblxuXHR2bS5jaGVja05ld0VtYWlsID0gZnVuY3Rpb24gKCkge1xuXHRcdGlmKHZtLm5ld0VtYWlsKSB7XG5cdFx0XHQvL2NoZWNrIHZhbGlkaXR5XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKD86XFwuW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKykqQCg/OlthLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cXC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cIiwgXCJcIik7XG5cblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2bS5uZXdFbWFpbCkpIHtcblx0XHRcdFx0dm0udmFsaWROZXdFbWFpbC52YWxpZCA9IHRydWU7XG5cdFx0XHRcdHZtLnZhbGlkTmV3RW1haWwuc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS52YWxpZE5ld0VtYWlsLnZhbGlkID0gZmFsc2U7XG5cdFx0XHRcdHZtLnZhbGlkTmV3RW1haWwuc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHRcdFx0fVx0XHRcdFxuXHRcdH1cblx0XHRcblx0XHR2bS5vcGVuQ3JlYXRlVXNlckJ1dHRvbigpO1xuXHR9XG5cblx0dm0uY2hlY2tVc2VyRW1haWwgPSBmdW5jdGlvbigpIHtcblx0XHRpZih2bS51c2VyRW1haWwpIHtcblx0XHRcdC8vY2hlY2sgdmFsaWRpdHlcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSsoPzpcXC5bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKSpAKD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1xcLikrW2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1wiLCBcIlwiKTtcblxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZtLnVzZXJFbWFpbCkpIHtcblx0XHRcdFx0dm0udmFsaWRVc2VyRW1haWwudmFsaWQgPSB0cnVlO1xuXHRcdFx0XHR2bS52YWxpZFVzZXJFbWFpbC5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLnZhbGlkVXNlckVtYWlsLnZhbGlkID0gZmFsc2U7XG5cdFx0XHRcdHZtLnZhbGlkVXNlckVtYWlsLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR2bS5vcGVuVXNlckxvZ2luQnRuKCk7XG5cdH1cblxuXHR2bS5jaGVja05ld1Bhc3N3b3JkcyA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vZm9yIGVhY2ggcGFzc3dvcmQgZGVmaW5lIHRoZSBwYXR0ZXJuIHRoYXQgdGhlIHBhc3N3b3JkIG11c3QgbWF0Y2hcblx0XHR2YXIgY29uc3RyYWludHMgPSB7XG5cdCBcdFx0MDogWycnLCAnIHlvdXIgcGFzc3dvcmQgbmVlZHMgdG8gYmUgMTYgY2hhcmFjdGVycyBvciBsb25nZXInXSxcblx0IFx0XHQxOiBbJycsICcgeW91ciBwYXNzd29yZCBuZWVkcyB0byBiZSBsZXNzIHRoYW4gMTAwIGNoYXJhY3RlcnMnXSxcblx0IFx0XHQyOiBbJ1tcXCFcXEBcXCNcXCRcXCVcXF5cXCZcXCpdJywgXCIgbm8gcmVxdWlyZWQgc3ltYm9scyBmb3VuZFwiXSxcblx0IFx0XHQzOiBbJ1swLTldJywgXCIgbm8gbnVtYmVycyBmb3VuZFwiXSxcblx0IFx0XHQ0OiBbJ1thLXpdJywgXCIgbm8gbG93ZXJjYXNlIGxldHRlcnMgZm91bmRcIl0sXG5cdCBcdFx0NTogWydbQS1aXScsIFwiIG5vIHVwcGVyY2FzZSBsZXR0ZXJzIGZvdW5kXCJdLFxuXHQgXHRcdDY6IFsnW15BLXowLTlcXCFcXEBcXCNcXCRcXCVcXF5cXCZcXCpdJywgXCIgaWxsZWdhbCBjaGFyYWN0ZXJzIGZvdW5kXCJdLFxuIFx0XHR9O1xuIFx0XHRcbiBcdFx0Ly9jaGVjayBmb3IgbGVuZ3RoXG4gXHRcdGlmKHZtLm5ld1Bhc3N3b3JkKSB7XG4gXHRcdFx0aWYodm0ubmV3UGFzc3dvcmQubGVuZ3RoID4gMTUpIHsgXG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1swXS5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTsgXG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1swXS5tZXQgPSB0cnVlOyBcbiBcdFx0XHR9IGVsc2Uge1xuIFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMF0uc3R5bGUgPSB7Y29sb3I6J3JlZCd9OyBcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzBdLm1ldCA9IGZhbHNlO1xuIFx0XHRcdH1cbiBcdFx0XHRpZih2bS5uZXdQYXNzd29yZC5sZW5ndGggPD0gMTAwKSB7IFxuIFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMV0uc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307IFxuIFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMV0ubWV0ID0gdHJ1ZTtcbiBcdFx0XHR9IGVsc2Uge1xuIFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMV0uc3R5bGUgPSB7Y29sb3I6J3JlZCd9OyBcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzFdLm1ldCA9IGZhbHNlO1xuIFx0XHRcdH1cblxuIFx0XHRcdC8vY2hlY2sgY29uc3RyYWludHMgMi01XG4gXHRcdFx0Zm9yKGkgPSAyOyBpIDwgNjsgaSsrKSB7XG5cdCBcdFx0XHQvL2NoZWNrIGZvciByZXF1aXJlZCBzeW1ib2xzLCB1cHBlcmNhc2UsIGxvc2VyY2FzZSwgYW5kIGNoYXJhY3RlcnNcblx0IFx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChjb25zdHJhaW50c1tpXVswXSwgXCJcIik7XHRcblxuXHQgXHRcdFx0Ly90ZXN0IGVhY2ggY29uc3RyYXRpbnRcblx0IFx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2bS5uZXdQYXNzd29yZCkpIHtcblx0IFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbaV0uc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdCBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzW2ldLm1ldCA9IHRydWU7XG5cdCBcdFx0XHR9IGVsc2Uge1xuXHQgXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1tpXS5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdCBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzW2ldLm1ldCA9IGZhbHNlO1xuXHQgXHRcdFx0fVxuXHQgXHRcdH1cblxuXHQgXHRcdC8vY2hlY2sgaWxsZWdhbCBjaGFyYWN0ZXJzXG5cdCBcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKGNvbnN0cmFpbnRzWzZdWzBdLCBcIlwiKTtcblxuXHQgXHRcdC8vcnVuIHRoZSBjaGVja1xuXHQgXHRcdGlmKCFjb25zdHJhaW50LnRlc3Qodm0ubmV3UGFzc3dvcmQpKSB7XG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1s2XS5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1s2XS5tZXQgPSBmYWxzZTtcblx0IFx0XHR9IGVsc2Uge1xuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNl0uc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1s2XS5tZXQgPSB0cnVlO1xuXHQgXHRcdH1cblxuXHQgXHRcdC8vaWYgYWxsIGNvbnN0cmFpbnMgbWV0LCB0aHJvdyB2YWxpZCBwYXNzIGZsYWdcblx0IFx0XHRpZiggdm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMF0ubWV0ICYmXG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1sxXS5tZXQgJiZcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzJdLm1ldCAmJlxuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbM10ubWV0ICYmXG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1s0XS5tZXQgJiZcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzVdLm1ldCAmJlxuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNl0ubWV0KSB7XG5cdCBcdFx0XHR2bS5zZWN1cmVQYXNzd29yZC5zZWN1cmUgPSB0cnVlXG5cdCBcdFx0fSBlbHNlIHtcblx0IFx0XHRcdHZtLnNlY3VyZVBhc3N3b3JkLnNlY3VyZSA9IGZhbHNlO1xuXHQgXHRcdH1cblxuXHQgXHRcdGlmKHZtLnNlY3VyZVBhc3N3b3JkLnNlY3VyZSkge1xuXHQgXHRcdFx0dm0uc2VjdXJlUGFzc3dvcmQuc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdCBcdFx0fSBlbHNlIHtcblx0IFx0XHRcdHZtLnNlY3VyZVBhc3N3b3JkLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0IFx0XHR9XG4gXHRcdH1cbiBcdFx0XG4gXHRcdHZtLm9wZW5DcmVhdGVVc2VyQnV0dG9uKCk7XG5cdH1cblxuXHR2bS5jaGVja1VzZXJQYXNzd29yZHMgPSBmdW5jdGlvbigpIHtcblx0XHRpZih2bS51c2VyUGFzc3dvcmQpIHtcblx0XHRcdGlmKHZtLnVzZXJQYXNzd29yZC5sZW5ndGggPiAxNSkge1xuXHRcdFx0XHR2bS52YWxpZFVzZXJQYXNzd29yZC5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0XHRcdFx0dm0udmFsaWRVc2VyUGFzc3dvcmQudmFsaWQgPSB0cnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0udmFsaWRVc2VyUGFzc3dvcmQuc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHRcdFx0XHR2bS52YWxpZFVzZXJQYXNzd29yZC52YWxpZCA9IGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdFxuXHRcdHZtLm9wZW5Vc2VyTG9naW5CdG4oKTtcblx0fVxuXG5cdHZtLm9wZW5DcmVhdGVVc2VyQnV0dG9uID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodm0udmFsaWROZXdOYW1lLnZhbGlkICYmIHZtLnZhbGlkTmV3RW1haWwudmFsaWQgJiYgdm0uc2VjdXJlUGFzc3dvcmQuc2VjdXJlKSB7XG5cdFx0XHR2bS51bmxvY2tDcmVhdGVVc2VyQnRuLmNsYXNzID0gJ2J0biBidG4tc3VjY2Vzcyc7XG5cdFx0XHR2bS51bmxvY2tDcmVhdGVVc2VyQnRuLnVzYWJsZSA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZtLnVubG9ja0NyZWF0ZVVzZXJCdG4uY2xhc3MgPSAnYnRuIGJ0bi13YXJuaW5nJztcblx0XHRcdHZtLnVubG9ja0NyZWF0ZVVzZXJCdG4udXNhYmxlID0gZmFsc2U7XHRcblx0XHR9XG5cblx0fVxuXG5cdHZtLm9wZW5Vc2VyTG9naW5CdG4gPSBmdW5jdGlvbigpIHtcblx0XHRpZih2bS52YWxpZFVzZXJFbWFpbC52YWxpZCAmJiB2bS52YWxpZFVzZXJQYXNzd29yZC52YWxpZCkge1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi5jbGFzcyA9ICdidG4gYnRuLXN1Y2Nlc3MnO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi51c2FibGUgPSB0cnVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLmNsYXNzID0gJ2J0biBidG4td2FybmluZyc7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLnVzYWJsZSA9IGZhbHNlO1x0XG5cdFx0fVxuXHR9XG5cblx0dm0udXBkYXRlID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9zZXQgdmFsdWVzXG5cdFx0dm0ubmV3TmFtZSA9ICRkb2N1bWVudC5maW5kKCcjbmV3TmFtZScpWzBdLnZhbHVlO1xuXHRcdHZtLm5ld0VtYWlsID0gJGRvY3VtZW50LmZpbmQoJyNuZXdFbWFpbCcpWzBdLnZhbHVlO1xuXHRcdHZtLnVzZXJFbWFpbCA9ICRkb2N1bWVudC5maW5kKCcjdXNlckVtYWlsJylbMF0udmFsdWU7XG5cdFx0XG5cdFx0dm0uY2hlY2tOZXdOYW1lKCk7XG5cdFx0dm0uY2hlY2tOZXdFbWFpbCgpO1xuXHRcdHZtLmNoZWNrVXNlckVtYWlsKCk7XG5cdH1cblxuXHRmdW5jdGlvbiByZWRpcmVjdChwYXRoLCB1c2VyRGF0YSkge1xuXHRcdHZhciBmdWxsUGF0aCA9IHBhdGggKyAnLycgKyBjdXJyZW50VXNlckRhdGEudWlkICsgJy8nICsgY3VycmVudFVzZXJEYXRhLnRva2VuO1xuXHRcdC8vcmVkaXJlY3Rcblx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIHRvOiAnICsgZnVsbFBhdGgpO1xuXHRcdCRsb2NhdGlvbi5wYXRoKGZ1bGxQYXRoKTtcblx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cdH1cblxuXHR2bS5jcmVhdGVOZXdVc2VyID0gZnVuY3Rpb24oKSB7XG5cdFx0JGxvZy5pbmZvKCdDcmVhdGluZyBhIG5ldyB1c2VyIGFjY291bnQgbm93IScpO1xuXG5cdFx0aWYodm0udW5sb2NrQ3JlYXRlVXNlckJ0bi51c2FibGUpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlXG5cdFx0XHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHRcdFx0cmVmLmNyZWF0ZVVzZXIoe1xuXHRcdFx0XHRlbWFpbDp2bS5uZXdFbWFpbCxcblx0XHRcdFx0cGFzc3dvcmQ6dm0ubmV3UGFzc3dvcmRcblx0XHRcdH0sZnVuY3Rpb24oZXJyb3IsIHVzZXJEYXRhKSB7XG5cdFx0XHRcdGlmKGVycm9yKSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdFcnJvciBjcmVhdGluZyB1c2VyOiAnICsgZXJyb3IpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vbG9nIHJlc3VsdHNcblx0XHRcdFx0XHQkbG9nLmluZm8odXNlckRhdGEpO1xuXG5cdFx0XHRcdFx0Ly9zYXZlIGFsbCB0aGUgZGF0YVxuXHRcdFx0XHRcdGN1cnJlbnRVc2VyRGF0YSA9IHVzZXJEYXRhO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vZ2VuZXJhdGUgdGhlIHVzZXIgcmVjb3JkXG5cdFx0XHRcdFx0dmFyIHVzZXJzUmVmID0gcmVmLmNoaWxkKCdVc2Vycy8nICsgdXNlckRhdGEudWlkKTtcblx0XHRcdFx0XHR2YXIgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xuXG5cdFx0XHRcdFx0Ly93cml0ZSBuZXcgdXNlciB0byB0aGUgZGF0YWJhc2Ugd2l0aCBiaW8gaW5mb1xuXHRcdFx0XHRcdHVzZXJzUmVmLnNldCh7IFxuXHRcdFx0XHRcdFx0J2Jpbyc6IHtcblx0XHRcdFx0XHRcdFx0J25hbWUnOiB2bS5uZXdOYW1lLFxuXHRcdFx0XHRcdFx0XHQnZW1haWwnOiB2bS5uZXdFbWFpbFxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdCdldmVudHMnOiB7XG5cdFx0XHRcdFx0XHRcdCdwZW5kaW5nJzoge1xuXHRcdFx0XHRcdFx0XHRcdCd1cGRhdGVkJzogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHQnaG9zdGluZyc6IHtcblx0XHRcdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0J2F0dGVuZGluZyc6IHtcblx0XHRcdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0J2NvbXBsZXRlZCc6IHtcblx0XHRcdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdFx0XHQkbG9nLmluZm8oJ0RhdGEgY291bGQgbm90IGJlIHNhdmVkOiAnICsgZXJyb3IpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0JGxvZy5pbmZvKCdEYXRhIHNhdmVkIHN1Y2Nlc3NmdWxseS4nKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHQvL2FkZCB0aGlzIHVzZXIgdG8gdGhlIGxpc3Qgb2YgcmVnaXN0ZXJlZCB1c2Vyc1xuXHRcdFx0XHRcdHJlZi5jaGlsZCgnVWlkcycpLmNoaWxkKHV0ZjhfdG9fYjY0KHZtLm5ld0VtYWlsKSkuc2V0KGN1cnJlbnRVc2VyRGF0YS51aWQsIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKFwiRGF0YSBjb3VsZCBub3QgYmUgc2F2ZWQuIFwiICsgZXJyb3IpO1xuXHRcdFx0XHRcdFx0ZWxzZSAkbG9nLmluZm8oXCJ1aWQgY3JlYXRlZCBzdWNlc3NmdWxseS5cIik7XG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHQvL3JlZGlyZWN0IHRvIFVzZXJJbmZvcm1hdGlvblxuXHRcdFx0XHRcdHJlZGlyZWN0KCcvdXNlckluZm9ybWF0aW9uJywgY3VycmVudFVzZXJEYXRhKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHR9XG5cdH1cblxuXHR2bS5sb2dpblJlZ2lzdGVyZWRVc2VyID0gZnVuY3Rpb24oKSB7XG5cblx0XHRpZih2bS51bmNsb2NrVXNlckxvZ2luQnRuLnVzYWJsZSkge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVcblx0XHRcdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXG5cdFx0XHQvL2F1dGhlbnRpY2F0ZSB0aGUgdXNlclxuXHRcdFx0cmVmLmF1dGhXaXRoUGFzc3dvcmQoe1xuXHRcdFx0XHRlbWFpbDogdm0udXNlckVtYWlsLFxuXHRcdFx0XHRwYXNzd29yZDogdm0udXNlclBhc3N3b3JkXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvciwgYXV0aERhdGEpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ0Vycm9yIExvZ2dpbmcgSW46ICcgKyBlcnJvcik7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdMb2dnZWQgSW4gc3VjY2Vzc2Z1bGx5OiAnICsgYXV0aERhdGEudWlkKTtcblx0XHRcdFx0XHQkbG9nLmluZm8oYXV0aERhdGEpO1xuXHRcdFx0XHRcdC8vc2F2ZSBhbGwgdGhlIGRhdGFcblx0XHRcdFx0XHRjdXJyZW50VXNlckRhdGEgPSBhdXRoRGF0YTtcblxuXHRcdFx0XHRcdC8vbG9hZCB1c2VyIGJpb1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vbG9hZCB1c2VyIGV2ZW50c1xuXG5cdFx0XHRcdFx0Ly9yZWRpcmVjdFxuXHRcdFx0XHRcdHJlZGlyZWN0KCcvdXNlckluZm9ybWF0aW9uJywgY3VycmVudFVzZXJEYXRhKTtcblx0XHRcdFx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0fVxuXG5cdH1cblxuXHR2bS5hbGVydE1lID0gZnVuY3Rpb24oKSB7XG5cdFx0YWxlcnQoJ3RoaXMgaXMgd29ya2luZyEgYW4gYWxlcnQhJyk7XG5cdH1cblxuXHR2bS5vblJlc2l6ZUZ1bmN0aW9uID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGlucHV0VGV4dCA9IGFuZ3VsYXIuZWxlbWVudCgnLmlucHV0VGV4dCcpO1xuXHRcdGlmKCR3aW5kb3cub3V0ZXJXaWR0aCA+ICR3aW5kb3cub3V0ZXJIZWlnaHQpIHtcblx0XHRcdGlucHV0VGV4dC5jc3MoJ2ZvbnQtc2l6ZScsICcyZW0nKTtcblx0XHRcdCRsb2cuaW5mbygnbWFraW5nIGJpZ2dlcicpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpbnB1dFRleHQuY3NzKCdmb250LXNpemUnLCAnMS4yZW0nKTtcblx0XHR9XG5cdH1cblxuXHQvL2V2ZW50IGxpc3RlbmVyc1xuXHRpZiAoJ2FkZEV2ZW50TGlzdGVuZXInIGluICRkb2N1bWVudCkge1xuXHQgICAgJGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHtcblx0ICAgIFx0JGxvZy5pbmZvKCdhZGRpbmcgRmFzdENsaWNrJyk7XG5cdCAgICAgICAgRmFzdENsaWNrLmF0dGFjaCgkZG9jdW1lbnQuYm9keSk7XG5cdCAgICB9LCBmYWxzZSk7XG5cdH1cblxuXHRhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdykuYmluZCgncmVzaXplJywgZnVuY3Rpb24oKSB7XG5cdFx0dm0ub25SZXNpemVGdW5jdGlvbigpO1xuXHRcdC8vJHNjb3BlLiRhcHBseSgpO1xuXHR9KTtcblxuXHRhbmd1bGFyLmVsZW1lbnQoJGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcblx0XHRpZigkd2luZG93Lm91dGVyV2lkdGggPCA2MDApIHtcblx0XHRcdHZtLm9uUmVzaXplRnVuY3Rpb24oKTtcblx0XHRcdC8vJHNjb3BlLiRhcHBseSgpO1xuXHRcdH1cblx0fSlcblxuXG5cdCB2bS5tYXN0ZXIgPSB7fTtcblxuXHQgIHZtLnVwZGF0ZSA9IGZ1bmN0aW9uKHVzZXIpIHtcblx0ICAgIHZtLm1hc3RlciA9IGFuZ3VsYXIuY29weSh1c2VyKTtcblx0ICB9O1xuXG5cdCAgdm0ucmVzZXQgPSBmdW5jdGlvbihmb3JtKSB7XG5cdCAgICBpZiAoZm9ybSkge1xuXHQgICAgICBmb3JtLiRzZXRQcmlzdGluZSgpO1xuXHQgICAgICBmb3JtLiRzZXRVbnRvdWNoZWQoKTtcblx0ICAgIH1cblx0ICAgIHZtLnVzZXIgPSBhbmd1bGFyLmNvcHkodm0ubWFzdGVyKTtcblx0ICB9O1xuXG5cdCAgdm0ucmVzZXQoKTtcbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdNYWluQ29udHJvbGxlcicsIE1haW5Db250cm9sbGVyKTtcblxuTWFpbkNvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICckbG9jYXRpb24nLCAnJGRvY3VtZW50JywgJyR3aW5kb3cnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBNYWluQ29udHJvbGxlcigkbG9nLCAkbG9jYXRpb24sICRkb2N1bWVudCwgJHdpbmRvdykge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHR2YXIgZmJVUkwgPSAnaHR0cHM6Ly9tZWV0dXBwbGFubmVyLmZpcmViYXNlaW8uY29tLyc7XG5cdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoZmJVUkwpOyBcblxuXHRmdW5jdGlvbiByZXNpemVCR0ltYWdlKCkge1xuXHRcdHZhciBib2R5ID0gYW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCk7XG5cdFx0JGRvY3VtZW50LmNzcygnaGlnaHQnLCAkd2luZG93Lm91dGVySGVpZ2h0KVxuXHR9XG5cblx0dm0ubG9nb3V0ID0gZnVuY3Rpb24oKSB7XG5cdFx0YWxlcnQoJ2xvZ2dpbmcgeW91IG91dCEnKTtcblx0XHRyZWYudW5hdXRoKCk7XG5cdFx0JGxvY2F0aW9uLnBhdGgoJy8nKTtcblx0fTtcblxuXHRhbmd1bGFyLmVsZW1lbnQoJGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcblx0XHQvL0Zhc3RDbGljay5hdHRhY2goJGRvY3VtZW50LmJvZHkpO1xuXHRcdHJlc2l6ZUJHSW1hZ2UoKTtcblx0fSlcbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdOZXdVc2VyU2lnblVwQ29udHJvbGxlcicsIE5ld1VzZXJTaWduVXBDb250cm9sbGVyKTtcblxuTmV3VXNlclNpZ25VcENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnLCAndmFsaWRhdGlvbicsICdiYWNrZW5kU2VydmljZXMnLCAndHJhZmZpY1ZhbGV0JywgJ3VzZXJEYXRhJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gTmV3VXNlclNpZ25VcENvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCB2YWxpZGF0aW9uLCBiYWNrZW5kU2VydmljZXMsIHRyYWZmaWNWYWxldCwgdXNlckRhdGEpIHtcblx0dmFyIHZtID0gdGhpcztcblxuXHQvL2RlZmluZSB2bSBpbnB1dCB2YXJpYWJsZXNcblx0dm0uaW5wdXRzID0ge1xuXHRcdG5ld05hbWU6ICcnLFxuXHRcdG5ld0VtYWlsOiAnJyxcblx0XHRuZXdQYXNzd29yZDogJycsXG5cdFx0cmVxdWlyZWRGaWVsZHNEZWZpbmVkOiBmYWxzZVxuXHR9XG5cdHZtLmVycm9ycyA9IHtcblx0XHRuYW1lOiAnJyxcblx0XHRlbWFpbDogJycsXG5cdFx0cGFzc3dvcmQ6IGZhbHNlLFxuXHRcdHBhc3Nlc0FsbFRlc3RzOiBmYWxzZVxuXHR9XG5cdHZtLnBhc3NSZXFzID0ge1xuXHRcdDA6IHsgaWQ6JycsIHJlcTonSXMgYXQgbGVhc3QgMTYgY2hhcmFjdGVycyBsb25nJywgZnVsZmlsbGVkOmZhbHNlLCAnc3R5bGUnOntjb2xvcjoncmVkJ319LFxuXHRcdDE6IHsgaWQ6JycsIHJlcTonSXMgbm8gbG9uZ2VyIHRoYW4gMTAwIGNoYXJhY3RlcnMnLCBmdWxmaWxsZWQ6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOidyZWQnfSB9LFxuXHRcdDI6IHsgaWQ6JycsIHJlcTonQ29udGFpbnMgYXQgbGVhc3Qgb25lIGxvd2VyY2FzZSBsZXR0ZXInLCBmdWxmaWxsZWQ6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOidyZWQnfSB9LFxuXHRcdDM6IHsgaWQ6JycsIHJlcTonQ29udGFpbnMgYXQgbGVhc3Qgb25lIHVwcGVyY2FzZSBsZXR0ZXInLCBmdWxmaWxsZWQ6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOidyZWQnfSB9LFxuXHRcdDQ6IHsgaWQ6JycsIHJlcTonQ29udGFpbnMgYXQgbGVhc3Qgb25lIG51bWJlcicsIGZ1bGZpbGxlZDpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9IH0sXG5cdFx0NTogeyBpZDonJywgcmVxOidDb250YWlucyBhdCBsZWFzdCBvbmUgcmVxdWlyZWQgc3ltYm9sIChcXCFcXEBcXCNcXCRcXCVcXF5cXCZcXCopJywgZnVsZmlsbGVkOmZhbHNlLCAnc3R5bGUnOntjb2xvcjoncmVkJ30gfSxcblx0XHQ2OiB7IGlkOicnLCByZXE6XCJEb2Vzbid0IGhhdmUgYW55IGlsbGVnYWwgY2hhcmFjdGVyc1wiLCBmdWxmaWxsZWQ6dHJ1ZSwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9IH1cblx0fVxuXHR2bS5zaG93UmVxc0JveCA9IGZhbHNlO1xuXG5cdC8vZGVmaW5lIHJlcXVpcmVkIGZpZWxkIGNvbnN0cmFpbnRzXG5cdHZhciBzaWdudXBWYWxpZGF0aW9uID0gdmFsaWRhdGlvbjtcblxuXHQvL2RlZmluZSBjb250cm9sbGVyIG1ldGhvZHNcblx0ZnVuY3Rpb24gdmVyaWZ5UmVxdWlybm1lbnRzKCkge1xuXHRcdGlmKHZtLmVycm9ycy5uYW1lID09ICcnICYmIHZtLmVycm9ycy5lbWFpbCA9PSAnJyAmJiAhdm0uZXJyb3JzLnBhc3N3b3JkKSB2bS5lcnJvcnMucGFzc2VzQWxsVGVzdHMgPSB0cnVlO1xuXHRcdGVsc2Ugdm0uZXJyb3JzLnBhc3Nlc0FsbFRlc3RzID0gZmFsc2U7XG5cblx0XHRpZiggYW5ndWxhci5pc0RlZmluZWQodm0uaW5wdXRzLm5ld05hbWUpICYmIHZtLmlucHV0cy5uZXdOYW1lICE9PSAnJyAmJlxuXHRcdFx0YW5ndWxhci5pc0RlZmluZWQodm0uaW5wdXRzLm5ld0VtYWlsKSAmJiB2bS5pbnB1dHMubmV3RW1haWwgIT09ICcnICYmXG5cdFx0XHRhbmd1bGFyLmlzRGVmaW5lZCh2bS5pbnB1dHMubmV3UGFzc3dvcmQpICYmIHZtLmlucHV0cy5uZXdQYXNzd29yZCAhPT0gJycpIFxuXHRcdFx0XHR2bS5pbnB1dHMucmVxdWlyZWRGaWVsZHNEZWZpbmVkID0gdHJ1ZTtcblx0XHRlbHNlIHZtLmlucHV0cy5yZXF1aXJlZEZpZWxkc0RlZmluZWQgPSBmYWxzZTtcblx0fVxuXG5cdC8vZGVmaW5lIHZtIGFjY2Vzc2libGUgbWV0aG9kc1xuXHR2bS5jaGVja05ld05hbWUgPSBmdW5jdGlvbigpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlXG5cdFx0dmFyIGVycm9ycyA9IFtdO1xuXHRcdHZhciBoYXNOYW1lID0gc2lnbnVwVmFsaWRhdGlvbi5yZXF1aXJlZCh2bS5pbnB1dHMubmV3TmFtZSk7XG5cdFx0dmFyIGxvbmdFbm91Z2ggPSBzaWdudXBWYWxpZGF0aW9uLm1pbk5hbWVMZW5ndGgodm0uaW5wdXRzLm5ld05hbWUpXG5cdFx0XG5cdFx0Ly9sb2cgZXJyb3JzXG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoaGFzTmFtZSkpIGVycm9ycy5wdXNoKGhhc05hbWUpO1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGxvbmdFbm91Z2gpKSBlcnJvcnMucHVzaChsb25nRW5vdWdoKTtcblxuXHRcdC8vdXBkYXRlIHRoZSBlcnJvcnMgbW9kZWxcblx0XHRpZihlcnJvcnMubGVuZ3RoID4gMCkgdm0uZXJyb3JzLm5hbWUgPSBlcnJvcnMuam9pbignLCAnKTtcblx0XHRlbHNlIHZtLmVycm9ycy5uYW1lID0gJyc7XG5cblx0XHR2ZXJpZnlSZXF1aXJubWVudHMoKTtcblx0fVxuXG5cdHZtLmNoZWNrTmV3RW1haWwgPSBmdW5jdGlvbigpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlXG5cdFx0dmFyIGVycm9ycyA9IFtdO1xuXHRcdHZhciBoYXNFbWFpbCA9IHNpZ251cFZhbGlkYXRpb24ucmVxdWlyZWQodm0uaW5wdXRzLm5ld0VtYWlsKTtcblx0XHR2YXIgaXNBbkVtYWlsID0gc2lnbnVwVmFsaWRhdGlvbi5lbWFpbCh2bS5pbnB1dHMubmV3RW1haWwpO1xuXHRcdFxuXHRcdC8vbG9nIGVycm9yc1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGhhc0VtYWlsKSkgZXJyb3JzLnB1c2goaGFzRW1haWwpO1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGlzQW5FbWFpbCkpIGVycm9ycy5wdXNoKGlzQW5FbWFpbCk7XG5cblx0XHQvL3VwZGF0ZSB0aGUgZXJyb3JzIG1vZGVsXG5cdFx0aWYoZXJyb3JzLmxlbmd0aCA+IDApIHZtLmVycm9ycy5lbWFpbCA9IGVycm9ycy5qb2luKCcsICcpO1xuXHRcdGVsc2Ugdm0uZXJyb3JzLmVtYWlsID0gJyc7XG5cblx0XHR2ZXJpZnlSZXF1aXJubWVudHMoKTtcblx0fVxuXG5cdHZtLmNoZWNrTmV3UGFzc3dvcmQgPSBmdW5jdGlvbigpIHtcblx0XHQvL2ZsaXAgb24gcmVxcyBib3hcblx0XHR2bS5zaG93UmVxc0JveCA9IHRydWU7XG5cblx0XHQvL2xvY2FsIHZhcmlhYmxlXG5cdFx0dmFyIGVycm9ycyA9IFtdO1xuXHRcdHZhciBoYXNQYXNzd29yZCA9IHNpZ251cFZhbGlkYXRpb24ucmVxdWlyZWQodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKTtcblx0XHR2YXIgc3BlY2lmaWNSZXFzID0gW1xuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5taW5QYXNzTGVuZ3RoKHZtLmlucHV0cy5uZXdQYXNzd29yZCksXG5cdFx0XHRzaWdudXBWYWxpZGF0aW9uLm1heFBhc3NMZW5ndGgodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKSxcblx0XHRcdHNpZ251cFZhbGlkYXRpb24uYXRMZWFzdE9uZUxvd2VyY2FzZSh2bS5pbnB1dHMubmV3UGFzc3dvcmQpLFxuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5hdExlYXN0T25lVXBwZXJjYXNlKHZtLmlucHV0cy5uZXdQYXNzd29yZCksXG5cdFx0XHRzaWdudXBWYWxpZGF0aW9uLmF0TGVhc3RPbmVOdW1iZXIodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKSxcblx0XHRcdHNpZ251cFZhbGlkYXRpb24uYXRMZWFzdE9uZVN5bWJvbCh2bS5pbnB1dHMubmV3UGFzc3dvcmQpLFxuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5pbGxlZ2FsQ2hhcmFjdGVyKHZtLmlucHV0cy5uZXdQYXNzd29yZClcblx0XHRdO1xuXG5cdFx0Ly9sb2cgZXJyb3JzXG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoaGFzUGFzc3dvcmQpKSBlcnJvcnMucHVzaChoYXNQYXNzd29yZCk7XG5cblx0XHQvL3VwZGF0ZSB0aGUgZXJyb3JzIG1vZGVsXG5cdFx0aWYoZXJyb3JzLmxlbmd0aCA+IDApIHZtLmVycm9ycy5wYXNzd29yZCA9IGVycm9ycy5qb2luKCcsICcpO1xuXHRcdGVsc2Ugdm0uZXJyb3JzLmVtYWlsID0gJyc7XG5cblx0XHQvL3VwZGF0ZSByZXFzIG1vZGVsXG5cdFx0dmFyIGFueUVycm9ycyA9IGZhbHNlO1xuXHRcdGZvcihpPTA7IGk8NzsgaSsrKSB7XG5cdFx0XHRpZihzcGVjaWZpY1JlcXNbaV0pIHtcblx0XHRcdFx0dm0ucGFzc1JlcXNbaV0uZnVsZmlsbGVkID0gdHJ1ZTtcblx0XHRcdFx0dm0ucGFzc1JlcXNbaV0uc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS5wYXNzUmVxc1tpXS5mdWxmaWxsZWQgPSBmYWxzZTtcblx0XHRcdFx0dm0ucGFzc1JlcXNbaV0uc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHRcdFx0XHRhbnlFcnJvcnMgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHZtLmVycm9ycy5wYXNzd29yZCA9IGFueUVycm9ycztcblx0XHR2ZXJpZnlSZXF1aXJubWVudHMoKTtcblx0fVxuXG5cdHZtLmV4aXRQYXNzd29yZCA9IGZ1bmN0aW9uKCkge1xuXHRcdHZtLmNoZWNrTmV3UGFzc3dvcmQoKTtcblx0XHR2bS5zaG93UmVxc0JveCA9IGZhbHNlO1xuXHR9XG5cblx0dm0uY3JlYXRlTmV3VXNlciA9IGZ1bmN0aW9uICgpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIG5ld1VzZXJTaGVycGEgPSB0cmFmZmljVmFsZXQ7XG5cblx0XHQvL2NvbmZpcm0gYWxsIGZpZWxkcyBhcmUgdmFsaWRcblx0XHRpZih2bS5lcnJvcnMucGFzc2VzQWxsVGVzdHMgJiYgdm0uaW5wdXRzLnJlcXVpcmVkRmllbGRzRGVmaW5lZCkge1xuXHRcdFx0XG5cdFx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgY3JlYXRlTmV3VXNlciA9IGJhY2tlbmRTZXJ2aWNlcztcblx0XHRcdHZhciBuZXdVc2VyRGF0YSA9IHVzZXJEYXRhO1xuXHRcdFx0dmFyIHRoaXNVSUQ7XG5cblx0XHRcdC8vY3JlYXRlIHRoZSBuZXcgdXNlciBpbiB0aGUgZGF0YWJhc2Vcblx0XHRcdGNyZWF0ZU5ld1VzZXIuY3JlYXRlTmV3VXNlcih2bS5pbnB1dHMubmV3RW1haWwsIHZtLmlucHV0cy5uZXdQYXNzd29yZClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKGRiVXNlckRhdGEpIHtcblx0XHRcdFx0XG5cdFx0XHRcdC8vbWFpbnRhaW4gbG9jYWwgdmFsdWVzIHRvIHNwZWVkIHVwIHVzZXIgZXhwZXJpZW5jZVxuXHRcdFx0XHRuZXdVc2VyRGF0YS5sb2FkUHJpbWFyaWVzKHZtLmlucHV0cy5uZXdFbWFpbCwgdm0uaW5wdXRzLm5ld05hbWUsIGRiVXNlckRhdGEudWlkKTtcblxuXHRcdFx0XHQvL2NyZWF0ZSBhIHVzZXIgcHJvZmlsZSBpbiB0aGUgZGF0YWJhc2Vcblx0XHRcdFx0Y3JlYXRlTmV3VXNlci5hZGROZXdVc2VyVG9EYXRhYmFzZShkYlVzZXJEYXRhLnVpZCwgdm0uaW5wdXRzLm5ld05hbWUsIHZtLmlucHV0cy5uZXdFbWFpbClcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24obWVzc2FnZSkge1xuXG5cdFx0XHRcdFx0JGxvZy5pbmZvKG1lc3NhZ2UpO1xuXG5cdFx0XHRcdFx0Ly9hZGQgdGhpcyB1c2VyIHRvIHRoZSBsaXN0IG9mIHJlZ2lzdGVyZWQgdXNlcnNcblx0XHRcdFx0XHRjcmVhdGVOZXdVc2VyLmFkZE5ld1VzZXJUb1JlZ1VzZXJzTGlzdChkYlVzZXJEYXRhLnVpZCwgdm0uaW5wdXRzLm5ld0VtYWlsKVxuXHRcdFx0XHRcdC50aGVuKGZ1bmN0aW9uKG1lc3NhZ2UpIHtcblxuXHRcdFx0XHRcdFx0Ly9yZWRpcmVjdCB1c2luZyB0aGUgdWlkXG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdC8vcmVkaXJlY3QgdG8gdGhlIG5leHQgcGFnZSBcblx0XHRcdFx0XHRcdG5ld1VzZXJTaGVycGEucmVkaXJlY3RUbygnL3VzZXJJbmZvcm1hdGlvbicsIGRiVXNlckRhdGEudWlkKTtcblx0XHRcdFx0XHRcdCBcblx0XHRcdFx0XHRcdCRsb2cuaW5mbyhtZXNzYWdlKTsgXG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyAkbG9nLmluZm8obWVzc2FnZSk7IH0pXG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5jYXRjaChmdW5jdGlvbihtZXNzYWdlKSB7ICRsb2cuaW5mbyhtZXNzYWdlKTsgfSlcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyAkbG9nLmluZm8obWVzc2FnZSk7IH0pXG5cdFx0XHRcblx0XHR9XG5cblx0fVxuXHRcblx0Ly9ydW4gdGltZSBhY3Rpb25zXG5cbn1cbiIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ1JlZ1VzZXJMb2dpbkNvbnRyb2xsZXInLCBSZWdVc2VyTG9naW5Db250cm9sbGVyKTtcblxuUmVnVXNlckxvZ2luQ29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJywgJyRkb2N1bWVudCcsICdiYWNrZW5kU2VydmljZXMnLCAndHJhZmZpY1ZhbGV0JywgJ3VzZXJEYXRhJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gUmVnVXNlckxvZ2luQ29udHJvbGxlcigkbG9nLCAkZG9jdW1lbnQsIGJhY2tlbmRTZXJ2aWNlcywgdHJhZmZpY1ZhbGV0LCB1c2VyRGF0YSkge1xuXHR2YXIgdm0gPSB0aGlzO1xuXG5cdC8vZGVmaW5lIHZtIGlucHV0IHZhcmlhYmxlc1xuXHR2bS5pbnB1dHMgPSB7XG5cdFx0ZW1haWw6ICcnLFxuXHRcdHBhc3N3b3JkOiAnJyxcblx0XHRyZXF1aXJlZEZpZWxkc0RlZmluZWQ6IGZhbHNlXG5cdH1cblx0dm0uZXJyb3JzID0ge1xuXHRcdG1lc3NhZ2U6ICcnLFxuXHRcdHBhc3Nlc0FsbFRlc3RzOiB0cnVlXG5cdH1cblx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0biA9IHtcblx0XHQndXNhYmxlJzpmYWxzZSwgXG5cdFx0J2NsYXNzJzonYnRuIGJ0bi13YXJuaW5nJyxcblx0XHRtZXNzYWdlOiAnTmVlZCBFbWFpbCAmIFBhc3MnXG5cdH1cblxuXHQvL21ldGhvZHNcblx0ZnVuY3Rpb24gb3BlblVzZXJMb2dpbkJ0bigpIHtcblx0XHQvL2NoZWNrIHRoYXQgdGhlcmUgaXMgYW4gZW1haWwgYW5kIHRoZXJlIGlzIGEgcGFzc3dvcmRcblx0XHRpZihcdGFuZ3VsYXIuaXNEZWZpbmVkKHZtLmlucHV0cy5lbWFpbCkgJiYgdm0uaW5wdXRzLmVtYWlsICE9PSAnJyAmJlxuXHRcdFx0YW5ndWxhci5pc0RlZmluZWQodm0uaW5wdXRzLnBhc3N3b3JkKSAmJiB2bS5pbnB1dHMucGFzc3dvcmQgIT09ICcnKSBcblx0XHR7XG5cdFx0XHR2bS5pbnB1dHMucmVxdWlyZWRGaWVsZHNEZWZpbmVkID0gdHJ1ZTtcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4uY2xhc3MgPSAnYnRuIGJ0bi1zdWNjZXNzJztcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4ubWVzc2FnZSA9ICdMb2dpbic7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLnVzYWJsZSA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZtLmlucHV0cy5yZXF1aXJlZEZpZWxkc0RlZmluZWQgPSBmYWxzZTtcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4uY2xhc3MgPSAnYnRuIGJ0bi13YXJuaW5nJztcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4ubWVzc2FnZSA9ICdOZWVkIEVtYWlsICYgUGFzcyc7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLnVzYWJsZSA9IGZhbHNlO1xuXHRcdH1cblxuXHR9XG5cblx0Ly92aWV3IG1vZGVsIG1ldGhvZHNcblx0dm0udXBkYXRlID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9zZXQgdmFsdWVzXG5cdFx0dm0uaW5wdXRzLmVtYWlsID0gJGRvY3VtZW50LmZpbmQoJyN1c2VyRW1haWwnKVswXS52YWx1ZTtcblx0XHR2bS5pbnB1dHMucGFzc3dvcmQgPSAkZG9jdW1lbnQuZmluZCgnI3VzZXJQYXNzd29yZCcpWzBdLnZhbHVlO1xuXHRcdFxuXHRcdG9wZW5Vc2VyTG9naW5CdG4oKTtcblx0fVxuXG5cdHZtLmxvZ2luUmVnaXN0ZXJlZFVzZXIgPSBmdW5jdGlvbigpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIHJlZ2lzdGVyZWRVc2VyU2hlcnBhID0gdHJhZmZpY1ZhbGV0O1xuXG5cdFx0Ly9jb25maXJtIGFsbCBmaWVsZHMgYXJlIHZhbGlkXG5cdFx0aWYodHJ1ZSkge1xuXHRcdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdFx0dmFyIGRhdGFiYXNlID0gYmFja2VuZFNlcnZpY2VzO1xuXHRcdFx0dmFyIHJlZ2lzdGVyZWRVc2VyRGF0YSA9IHVzZXJEYXRhO1xuXG5cdFx0XHQvL3ZlcmlmeSB1c2VycyBjcmVkZW50aWFsc1xuXHRcdFx0ZGF0YWJhc2UuTG9naW5SZWdpc3RlcmVkVXNlcih2bS5pbnB1dHMuZW1haWwsIHZtLmlucHV0cy5wYXNzd29yZClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKHVzZXJDcmVkZW50aWFscykge1xuXHRcdFx0XHQvL2lmIG5vIHRyb3VibGUgbG9nZ2luZyBpbiB1cGRhdGUgZXJyb3Igb2JqZWN0XG5cdFx0XHRcdHZtLmVycm9ycy5wYXNzZXNBbGxUZXN0cyA9IHRydWU7XG5cblx0XHRcdFx0Ly9hZGQgcHJpbWFyeSBpbmZvcm1hdGlvbiB0byBsb2NhbCBtb2RlbFxuXHRcdFx0XHRyZWdpc3RlcmVkVXNlckRhdGEuc2V0UHJpbWFyaWVzTG9jYWxseSh2bS5pbnB1dHMuZW1haWwsIHZtLmlucHV0cy5uYW1lLCB1c2VyQ3JlZGVudGlhbHMudWlkKTtcblxuXHRcdFx0fSlcblx0XHRcdC50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQkbG9nLmluZm8oXCJ1aWQgaXMgXCIgKyByZWdpc3RlcmVkVXNlckRhdGEuZ2V0VUlETG9jYWxseSgpKTtcblxuXHRcdFx0XHRkYXRhYmFzZS5nZXRVc2VyQmlvKHJlZ2lzdGVyZWRVc2VyRGF0YS5nZXRVSURMb2NhbGx5KCkpXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKHVzZXJCaW8pIHtcblx0XHRcdFx0XHQvL3VwZGF0ZSB1c2VyRGF0YSBtb2RlbCB3aXRoIHVzZXJCaW9cblx0XHRcdFx0XHRyZWdpc3RlcmVkVXNlckRhdGEudXBkYXRlQmlvTG9jYWxseSh1c2VyQmlvKTtcblxuXHRcdFx0XHRcdC8vbG9hZCB1c2VyIGV2ZW50c1xuXHRcdFx0XHRcdGRhdGFiYXNlLmdldFVzZXJFdmVudHMocmVnaXN0ZXJlZFVzZXJEYXRhLmdldFVJRExvY2FsbHkoKSlcblx0XHRcdFx0XHQudGhlbihmdW5jdGlvbihhbGxFdmVudHNGb3JUaGlzVXNlcikge1xuXHRcdFx0XHRcdFx0Ly91cGRhdGUgdXNlckRhdGEgbW9kZWwgd2l0aCB1c2VyRXZlbnRzXG5cdFx0XHRcdFx0XHRyZWdpc3RlcmVkVXNlckRhdGEudXBkYXRlQWxsVXNlckV2ZW50c0xvY2FsbHkoYWxsRXZlbnRzRm9yVGhpc1VzZXIpO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKG1lc3NhZ2UpIHsgJGxvZy5pbmZvKG1lc3NhZ2UpOyB9KVxuXG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5jYXRjaChmdW5jdGlvbihtZXNzYWdlKSB7ICRsb2cuaW5mbyhtZXNzYWdlKTsgfSlcblxuXHRcdFx0XHQvL3JlZGlyZWN0IHRvIHRoZSBuZXh0IHBhZ2UgXG5cdFx0XHRcdHJlZ2lzdGVyZWRVc2VyU2hlcnBhLnJlZGlyZWN0VG8oJy91c2VySW5mb3JtYXRpb24nLCByZWdpc3RlcmVkVXNlckRhdGEuZ2V0VUlETG9jYWxseSgpKTtcblxuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihtZXNzYWdlKSB7IFxuXHRcdFx0XHQvL2lmIHRoZXJlIHdhcyBhbiBlcnJvciBsb2dnaW5nIGluLCBsZXQgdGhlIHVzZXIga25vd1xuXHRcdFx0XHR2bS5lcnJvcnMubWVzc2FnZSA9IG1lc3NhZ2U7XG5cdFx0XHRcdHZtLmVycm9ycy5wYXNzZXNBbGxUZXN0cyA9IGZhbHNlO1xuXHRcdFx0fSlcblxuXHRcdFx0Ly91c2UgdWlkIHRvIGNvbGxlY3QgdXNlciBiaW9cblx0XHRcdFxuXHRcdH1cblxuXHR9XG5cblx0dm0uY2xpY2tlZCA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciB1c2VyQXV0aGVudGljYXRpb24gPSBiYWNrZW5kU2VydmljZXM7XG5cblx0XHR1c2VyQXV0aGVudGljYXRpb24ubG9nVXNlck91dCgpO1xuXHR9XG5cblx0Ly9ydW4gY29tbWFuZHNcbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCd0b3BNZW51Q29udHJvbGxlcicsIHRvcE1lbnVDb250cm9sbGVyKTtcblxudG9wTWVudUNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnLCAnJGxvY2F0aW9uJywgJyRkb2N1bWVudCcsICckd2luZG93J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gdG9wTWVudUNvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCAkbG9jYXRpb24sICRkb2N1bWVudCwgJHdpbmRvdykge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHR2YXIgZmJVUkwgPSAnaHR0cHM6Ly9tZWV0dXBwbGFubmVyLmZpcmViYXNlaW8uY29tLyc7XG5cdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXG5cdC8vbG9jYWwgdmFyaWFibGVzXG5cdHZtLmxvZ2dlZEluID0gZmFsc2VcblxuXHQvL3N0eWxlcyB2YXJpYWJsZXNcblx0XG5cdC8vZXZlbnQgbGlzdGVuZXJzXG5cdGlmICgnYWRkRXZlbnRMaXN0ZW5lcicgaW4gJGRvY3VtZW50KSB7XG5cdCAgICAkZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkge1xuXHQgICAgXHQkbG9nLmluZm8oJ2FkZGluZyBGYXN0Q2xpY2snKTtcblx0ICAgICAgICBGYXN0Q2xpY2suYXR0YWNoKCRkb2N1bWVudC5ib2R5KTtcblx0ICAgIH0sIGZhbHNlKTtcblx0fVxuXG5cdGFuZ3VsYXIuZWxlbWVudCgkd2luZG93KS5iaW5kKCdyZXNpemUnLCBmdW5jdGlvbigpIHtcblx0XHR2bS5vblJlc2l6ZUZ1bmN0aW9uKCk7XG5cdFx0JHNjb3BlLiRhcHBseSgpO1xuXHR9KTtcblxuXHRhbmd1bGFyLmVsZW1lbnQoJGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcblx0XHRpZigkd2luZG93Lm91dGVyV2lkdGggPCA2MDApIHtcblx0XHRcdHZtLm9uUmVzaXplRnVuY3Rpb24oKTtcblx0XHRcdCRzY29wZS4kYXBwbHkoKTtcblx0XHR9XG5cdH0pXG5cdC8vZHluYW1pY2FsbHkgc2V0IGlucHV0IHdpZHRoXG5cblxuXHQvLyBDcmVhdGUgYSBjYWxsYmFjayB3aGljaCBsb2dzIHRoZSBjdXJyZW50IGF1dGggc3RhdGVcblx0ZnVuY3Rpb24gaW5pdCgpIHtcblx0XHR2bS5vblJlc2l6ZUZ1bmN0aW9uKCk7XG5cdFx0JHNjb3BlLiRhcHBseSgpO1xuXHR9XG5cblx0ZnVuY3Rpb24gYXV0aERhdGFDYWxsYmFjayhhdXRoRGF0YSkge1xuXHQgIGlmIChhdXRoRGF0YSkge1xuXHQgICAgJGxvZy5pbmZvKFwiVXNlciBcIiArIGF1dGhEYXRhLnVpZCArIFwiIGlzIGxvZ2dlZCBpbiB3aXRoIFwiICsgYXV0aERhdGEucHJvdmlkZXIpO1xuXHQgICAgdm0ubG9nZ2VkSW4gPSB0cnVlO1xuXHQgIH0gZWxzZSB7XG5cdCAgICAkbG9nLmluZm8oXCJVc2VyIGlzIGxvZ2dlZCBvdXRcIik7XG5cdCAgICB2bS5sb2dnZWRJbiA9IGZhbHNlO1xuXHQgIH1cblx0fVxuXG5cdGZ1bmN0aW9uIHJlZGlyZWN0KHBhdGgsIHVzZXJEYXRhKSB7XG5cdFx0dmFyIGZ1bGxQYXRoID0gcGF0aCArICcvJyArIHVzZXJEYXRhLnVpZCArICcvJyArIHVzZXJEYXRhLnRva2VuO1xuXHRcdC8vcmVkaXJlY3Rcblx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIHRvOiAnICsgZnVsbFBhdGgpO1xuXHRcdCRsb2NhdGlvbi5wYXRoKGZ1bGxQYXRoKTtcblx0XHQvLyRzY29wZS4kYXBwbHkoKTtcblx0fVxuXG5cdC8vdm0gYWNjZXNzaWJsZSBtZXRob2RzXG5cdHZtLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2cuaW5mbygnbG9nZ2luZyBvdXQhJyk7XG5cdFx0dm0ubG9nZ2VkSW4gPSBmYWxzZTtcblx0XHRyZWYudW5hdXRoKCk7XG5cdFx0cmVkaXJlY3QoJy8nLCB7dWlkOicnLCB0b2tlbjonJ30pO1xuXHR9XG5cblx0dm0ubmF2QmFyTG9naW5SZWdpc3RlcmVkVXNlciA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2cuaW5mbygnbGF1bmNoaW5nIGxvZ2luJyk7XG5cdFx0aWYodHJ1ZSkge1xuXHRcdC8vaWYodm0udW5jbG9ja1VzZXJMb2dpbkJ0bi51c2FibGUpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlXG5cdFx0XHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHRcdFx0Ly9hdXRoZW50aWNhdGUgdGhlIHVzZXJcblx0XHRcdHJlZi5hdXRoV2l0aFBhc3N3b3JkKHtcblx0XHRcdFx0ZW1haWw6IHZtLm5hdmJhclVzZXJFbWFpbCxcblx0XHRcdFx0cGFzc3dvcmQ6IHZtLm5hdmJhclVzZXJQYXNzXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvciwgYXV0aERhdGEpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ0Vycm9yIExvZ2dpbmcgSW46ICcgKyBlcnJvcik7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdMb2dnZWQgSW4gc3VjY2Vzc2Z1bGx5OiAnICsgYXV0aERhdGEudWlkKTtcblx0XHRcdFx0XHQkbG9nLmluZm8oYXV0aERhdGEpO1xuXHRcdFx0XHRcdC8vc2F2ZSBhbGwgdGhlIGRhdGFcblxuXHRcdFx0XHRcdC8vbG9hZCB1c2VyIGJpb1xuXHRcdFx0XHRcdC8vbG9hZCB1c2VyIGV2ZW50c1xuXG5cdFx0XHRcdFx0Ly9yZWRpcmVjdFxuXHRcdFx0XHRcdHJlZGlyZWN0KCcvdXNlckluZm9ybWF0aW9uJywgYXV0aERhdGEpO1xuXHRcdFx0XHRcdCRzY29wZS4kYXBwbHkoKTtcblxuXHRcdFx0XHRcdC8vY2xpY2sgY2xvc2VkIHRoZSBuYXZiYXJcblx0XHRcdFx0XHRhbmd1bGFyLmVsZW1lbnQoJy5uYXZiYXItdG9nZ2xlJykuY2xpY2soKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblxuXG5cdFx0fVxuXG5cdH1cblxuXHR2bS5vblJlc2l6ZUZ1bmN0aW9uID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG5hdmJhcklucHV0cyA9IGFuZ3VsYXIuZWxlbWVudCgnLm5hdmJhcklucHV0cycpO1xuXHRcdG5hdmJhcklucHV0cy5jc3MoJ3dpZHRoJywgKCR3aW5kb3cub3V0ZXJXaWR0aCAtIDI2KSArICdweCcpO1xuXHR9XG5cblx0Ly8gUmVnaXN0ZXIgdGhlIGNhbGxiYWNrIHRvIGJlIGZpcmVkIGV2ZXJ5IHRpbWUgYXV0aCBzdGF0ZSBjaGFuZ2VzXG5cdHJlZi5vbkF1dGgoYXV0aERhdGFDYWxsYmFjayk7XG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignVXNlckV2ZW50c0NvbnRyb2xsZXInLCBVc2VyRXZlbnRzQ29udHJvbGxlcik7XG5cblVzZXJFdmVudHNDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJHJvdXRlUGFyYW1zJywgJ3VzZXJEYXRhJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gVXNlckV2ZW50c0NvbnRyb2xsZXIoJGxvZywgJHJvdXRlUGFyYW1zLCB1c2VyRGF0YSkge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHR2YXIgY3VycmVudFVzZXIgPSB1c2VyRGF0YTtcblxuXHQvL2xvY2FsIHZpZXcgdmFyaWFibGVzXG5cdHZtLnNob3dEZWNsaW5lID0gZmFsc2U7XHQvL3doYXQgaXMgdGhpcyBiZWluZyB1c2VkIGZvcj9cblx0dm0udXNlckJpbyA9IHt9XG5cdHZtLmV2ZW50cyA9IHt9O1xuXHR2bS5lcnJvcnMgPSB7fTtcblxuXHQvL2RlY2xhcmUgbG9jYWwgbWV0aG9kc1xuXHRmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fTtcblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH07XG5cblx0ZnVuY3Rpb24gbm9PZkhvc3RlRXZlbnRzKCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZVxuXHRcdHZhciBjb3VudGVyID0gMDtcblxuXHRcdGZvcihldmVudCBpbiB2bS5ldmVudHMuaG9zdGluZykgY291bnRlcisrO1xuXG5cdFx0cmV0dXJuIGNvdW50ZXI7XG5cdH1cblxuXHRmdW5jdGlvbiBnZW5lcmF0ZUV2ZW50SUQoKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYXRlID0gbmV3IERhdGUoKTtcblx0XHR2YXIgZXZlbnRJRCA9IChkYXRlVGltZVRvVW5peFRpbWUoZGF0ZSkgKiAxMCkgKyAobm9PZkhvc3RlRXZlbnRzKCkpO1xuXG5cdFx0cmV0dXJuIGV2ZW50SUQ7XG5cdH1cblxuXHRmdW5jdGlvbiBpbml0aWFsaXplKCkge1xuXHRcdC8vbWFrZSBzdXJlIHRoZSB1aWQgaXMgc2V0XG5cdFx0Y3VycmVudFVzZXIuc2V0VUlETG9jYWxseSgkcm91dGVQYXJhbXMudWlkKTtcblxuXHRcdC8vbG9hZCB0aGUgdXNlciBiaW9cblx0XHRjdXJyZW50VXNlci5sb2FkQmlvKCRyb3V0ZVBhcmFtcy51aWQpXG5cdFx0LnRoZW4oZnVuY3Rpb24ocmV0cmlldmVkQmlvKSB7XG5cdFx0XHR2bS51c2VyQmlvID0gcmV0cmlldmVkQmlvO1xuXHRcdH0pXG5cdFx0LmNhdGNoKClcblxuXHRcdC8vbG9hZCB1c2VyIGV2ZW50cyBwcm9ncmVzc2l2bGV5XG5cdFx0Ly9maXN0IHdoYXRldmVyIGlzIGluIHRoZSBtb2RlbCBhbHJlYWR5XG5cdFx0dm0uZXZlbnRzID0gY3VycmVudFVzZXIuZ2V0QWxsVXNlckV2ZW50c0xvY2FsbHkoKTtcblxuXHRcdC8vdGhlbiBjYWxsIHRvIHRoZSBkYiBhbmQgZ2V0IHRoZSBtb3N0IHVwIHRvIGRhdGUgaW5mb1xuXHRcdGN1cnJlbnRVc2VyLmdldFJlbW90ZUV2ZW50c0ZvckxvY2FsKClcblx0XHQudGhlbihmdW5jdGlvbihvYnRhaW5lZFVzZXJFdmVudHMpIHtcblxuXHRcdFx0Ly9sb2cgd2hhdCB3YXMgZm91bmRcblx0XHRcdCRsb2cuaW5mbygnZ290IHRoaXMgZnJvbSB0aGUgZGInKTtcblx0XHRcdCRsb2cuaW5mbyhvYnRhaW5lZFVzZXJFdmVudHMpO1xuXG5cdFx0XHQvL3VwZGF0ZSB0aGUgdmlldyBtb2RlbCB3aXRoIHRoZSB1cGRhdGVkIERCIHJlc3VsdHNcblx0XHRcdHZtLmV2ZW50cyA9IGN1cnJlbnRVc2VyLmdldEFsbFVzZXJFdmVudHNMb2NhbGx5KCk7XG5cdFx0fSlcblxuXHR9XG5cblx0Ly9kZWNsYXJlIHZpZXcgbWV0aG9kc1xuXHR2bS5jcmVhdGVOZXdFdmVudCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBldmVudElEID0gZ2VuZXJhdGVFdmVudElEKCk7XG5cblx0XHQkbG9nLmluZm8oJ3lvdVxcJ3JlIGNyZWF0aW5nIGEgbmV3IGV2ZW50ISAnICsgZXZlbnRJRCk7XG5cblx0XHQvL2FkZCB0aGUgZXZlbnQgdG8gdGhlIG1vZGFsIChsb2NhbGx5IHRoZW4gb24gdGhlIGRiKVxuXHRcdGN1cnJlbnRVc2VyLmNyZWF0ZU5ld0V2ZW50KGV2ZW50SUQpXG5cdFx0LnRoZW4oKVxuXHRcdC5jYXRjaCgpXG5cdFx0Ly9pZiB0aGVyZSB3YXMgYW4gdXBkYXRlZCBmaWVsZCwgcmVtb3ZlIGl0XG5cblx0XHQvL3JlZGlyZWN0IHRvIHRoZSBuZXcgZXZlbnQgcGFnZVx0XHRcblxuXHRcdC8vY3JlYXRlIGV2ZW50IG1vZGVsIHRvIHN0YXJ0IHdpdGhcblxuXHR9XG5cblx0Ly9leGVjdXRlIHNjcmlwdHNcblx0aW5pdGlhbGl6ZSgpO1xuXG59XG4iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdVc2VySW5mb3JtYXRpb25Db250cm9sbGVyJywgVXNlckluZm9ybWF0aW9uQ29udHJvbGxlcik7XG5cblVzZXJJbmZvcm1hdGlvbkNvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICckZG9jdW1lbnQnLCAnJHJvdXRlUGFyYW1zJywndXNlckRhdGEnLCAndHJhZmZpY1ZhbGV0J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gVXNlckluZm9ybWF0aW9uQ29udHJvbGxlcigkbG9nLCAkZG9jdW1lbnQsICRyb3V0ZVBhcmFtcywgdXNlckRhdGEsIHRyYWZmaWNWYWxldCkge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHRcblx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0dmFyIGN1cnJlbnRVc2VyID0gdXNlckRhdGE7XG5cblx0Ly92aWV3IG1vZGVsIHZhcmlhYmxlc1xuXHR2bS51c2VyID0ge307XG5cdHZtLnRlbXBCaXJ0aGRheTtcblx0dm0udmlldyA9IHtcblx0XHRkYXRhVG9TYXZlOiBmYWxzZSxcblx0XHRpc0RhdGE6IGZhbHNlLFxuXHRcdGJ0bk1zc2c6ICdNb3ZlIE9uLi4uJyxcblx0XHRwcm9jZWVkQnRuOiAnYnRuIGJ0bi1wcmltYXJ5J1xuXHR9O1xuXG5cdC8vbG9jYWwgbWV0aG9kc1xuXHRmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fTtcblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH07XG5cblx0Ly92aWV3IGFjY2Vzc2libGUgbWV0aG9kc1xuXHR2bS5jaGVja1ZhbHVlcyA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vdGhyb3cgdGhlIGlzRGF0YSBmbGFnIGlmIHNvbWV0aGluZyBpcyB1cGRhdGVkXG5cdFx0dm0udmlldy5pc0RhdGEgPSB0cnVlO1xuXG5cdFx0aWYoICEoYW5ndWxhci5pc1VuZGVmaW5lZCh2bS51c2VyLmNvbXBhbnkpIHx8IHZtLnVzZXIuY29tcGFueSA9PT0gJycpIHx8IFxuXHRcdFx0IShhbmd1bGFyLmlzVW5kZWZpbmVkKHZtLnVzZXIudGl0bGUpIHx8IHZtLnVzZXIudGl0bGUgPT09ICcnKSB8fCBcblx0XHRcdCEoYW5ndWxhci5pc1VuZGVmaW5lZCh2bS51c2VyLmRvYikgfHwgdm0udXNlci5kb2IgPT09ICcnKSkgXG5cdFx0e1xuXHRcdFx0dm0udmlldy5kYXRhVG9TYXZlID0gdHJ1ZTtcblx0XHRcdHZtLnZpZXcucHJvY2VlZEJ0biA9ICdidG4gYnRuLXN1Y2Nlc3MnO1xuXHRcdFx0dm0udmlldy5idG5Nc3NnID0gJ1NhdmUgJiBDb250aW51ZSc7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZtLnZpZXcuZGF0YVRvU2F2ZSA9IGZhbHNlO1xuXHRcdFx0dm0udmlldy5wcm9jZWVkQnRuID0gJ2J0biBidG4tcHJpbWFyeSc7XG5cdFx0XHR2bS52aWV3LmJ0bk1zc2cgPSAnTW92ZSBPbi4uLic7XHRcblx0XHR9XG5cblx0fVxuXG5cdHZtLnVwZGF0ZURPQiA9IGZ1bmN0aW9uKCkge1xuXHRcdHZtLnVzZXIuZG9iID0gZGF0ZVRpbWVUb1VuaXhUaW1lKHZtLnRlbXBCaXJ0aGRheSk7XG5cdFx0dm0uY2hlY2tWYWx1ZXMoKTtcblx0fVxuXG5cdHZtLnNhdmVBbmRNb3ZlT24gPSBmdW5jdGlvbigpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciB1c2VySW5mb1NoZXJwYSA9IHRyYWZmaWNWYWxldDtcblx0XHR2YXIgY3VycmVudFVpZCA9IGN1cnJlbnRVc2VyLmdldFVJRExvY2FsbHkoKTtcblxuXHRcdC8vY29udmVydCBET0IgdG8gdW5peFRpbWUgYW5kIHNhdmVcblx0XHRpZih2bS50ZW1wQmlydGhkYXkgIT09IDApIHZtLnVwZGF0ZURPQigpO1xuXHRcdFxuXHRcdC8vaWYgdGhlcmUgaXNuJ3QgY3VycmVudGx5IGEgZG9iLCBncmFiIGZyb20gdGhlIHJvdXRlIHBhcmFtc1xuXHRcdGlmKGN1cnJlbnRVaWQgPT0gJycgfHwgYW5ndWxhci5pc1VuZGVmaW5lZChjdXJyZW50VWlkKSkge1xuXHRcdFx0Y3VycmVudFVzZXIuc2V0VUlETG9jYWxseSgkcm91dGVQYXJhbXMudWlkKTtcblx0XHR9XG5cblx0XHQvL2lmIHRoZXJlIGlzIG5ldyBkYXRhLCBzYXZlIGl0XG5cdFx0aWYodm0udmlldy5pc0RhdGEpIHtcblx0XHRcdCRsb2cuaW5mbygnc2F2aW5nIHRoZSBuZXcgZGF0YScpO1xuXHRcdFx0Y3VycmVudFVzZXIudXBkYXRlQmlvTG9jYWxseSh2bS51c2VyKTtcblx0XHR9XG5cdFx0XG5cdFx0Ly9tb3ZlIG9uXG5cdFx0dXNlckluZm9TaGVycGEucmVkaXJlY3RUbygnL3VzZXJFdmVudHMnLCB2bS51c2VyLnVpZClcblx0fVxuXG5cdGZ1bmN0aW9uIGluaXRpYWxpemUoKSB7XG5cdFx0Ly9sb2FkIEZhc3RDbGlja1xuXHRcdC8vRmFzdENsaWNrLmF0dGFjaCgkZG9jdW1lbnQuYm9keSk7XG5cdFx0XG5cdFx0Ly9sb2FkIHVzZXJEYXRhIGxvY2FsbHkgb3IgZnJvbSBkYlxuXHRcdGN1cnJlbnRVc2VyLmxvYWRCaW8oJHJvdXRlUGFyYW1zLnVpZClcblx0XHQudGhlbihmdW5jdGlvbihvYnRhaW5lZFVzZXJEYXRhKSB7XG5cdFx0XHQvL2Fzc2lnbiB1c2VyIHZhbHVlc1xuXHRcdFx0dm0udXNlciA9IG9idGFpbmVkVXNlckRhdGE7XG5cblx0XHRcdC8vYnVpbGQgdGVtcEJpcnRoZGF5XG5cdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChvYnRhaW5lZFVzZXJEYXRhLmRvYikgJiYgb2J0YWluZWRVc2VyRGF0YS5kb2IgIT09ICcnKSB7XG5cdFx0XHRcdHZtLnRlbXBCaXJ0aGRheSA9IHVuaXhUaW1lVG9EYXRlVGltZShvYnRhaW5lZFVzZXJEYXRhLmRvYilcblx0XHRcdH1cblxuXHRcdH0pO1xuXHRcblx0fVxuXG5cdC8vcnVuIHByb2Nlc3Nlc1xuXHRpbml0aWFsaXplKCk7IC8vd2l0aCBpbnRlcm5ldCB1c2UgdGhlIGV2ZW50IGxpc3RlbmVyIGluc3RlYWRcbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5mYWN0b3J5KCdhdXRoU2VydmljZScsIGF1dGhTZXJ2aWNlKTtcblxuYXV0aFNlcnZpY2UuJGluamVjdCA9IFsnJGxvZycsICckcScsICckbG9jYXRpb24nXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBhdXRoU2VydmljZSgkbG9nLCAkcSwgJGxvY2F0aW9uKSB7XG5cdHZhciBmYlVSTCA9ICdodHRwczovL21lZXR1cHBsYW5uZXIuZmlyZWJhc2Vpby5jb20vJztcblx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cblx0dmFyIGFsbEF1dGhTZXJ2aWNlcyA9IHtcblx0XHRpc0xvZ2dlZEluOiBpc0xvZ2dlZEluXG5cdH07XG5cblx0ZnVuY3Rpb24gYXV0aERhdGFDYWxsYmFjayhhdXRoRGF0YSkge1xuXHQgIFxuXHQgIGlmIChhdXRoRGF0YSkge1xuXHQgICAgJGxvZy5pbmZvKFwiVXNlciBcIiArIGF1dGhEYXRhLnVpZCArIFwiIGlzIGxvZ2dlZCBpbiB3aXRoIFwiICsgYXV0aERhdGEucHJvdmlkZXIpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICAkbG9nLmluZm8oXCJVc2VyIGlzIGxvZ2dlZCBvdXQuLi5kdW1waW5nIHRoZW0gYmFjayB0byBsYW5kaW5nIHBhZ2VcIik7XG5cdCAgICAvL2R1bXAgdGhlIHVzZXIgYmFjayBvdXRcblx0ICAgICRsb2NhdGlvbi5wYXRoKCcvJyk7XG5cdCAgfVxuXHR9XG5cblx0ZnVuY3Rpb24gaXNMb2dnZWRJbigpIHtcblx0XHQvL2NoZWNrIHRoZSB1c2VyIGF1dGhlbnRpY2Fpb24gc3RhdGVcblx0XHQkbG9nLmluZm8oJ2xvZ2dpbmcgZnJvbSB0aGUgaXNMb2dnZWRJbiBNZXRob2QnKTtcblx0XHQvL3JlZi5vbkF1dGgoYXV0aERhdGFDYWxsYmFjayk7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblx0XG5cdHJldHVybiBhbGxBdXRoU2VydmljZXM7XG5cbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5mYWN0b3J5KCdiYWNrZW5kU2VydmljZXMnLCBiYWNrZW5kU2VydmljZXMpO1xuXG5iYWNrZW5kU2VydmljZXMuJGluamVjdCA9IFsnJGxvZycsICckcScsICckd2luZG93J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gYmFja2VuZFNlcnZpY2VzKCRsb2csICRxLCAkd2luZG93KSB7XG5cdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgYWxsQmFja2VuZFNlcnZpY2VzID0ge1xuXHRcdHV0ZjhfdG9fYjY0OiB1dGY4X3RvX2I2NCwgXHRcdFx0XHRcdFx0Ly9sb2NhbCBmdW5jdGlvbnMgdG8gY29udmVydCBkYXRlc1xuXHRcdGI2NF90b191dGY4OiBiNjRfdG9fdXRmOCxcblx0XHR1bml4VGltZVRvRGF0ZVRpbWU6IHVuaXhUaW1lVG9EYXRlVGltZSxcblx0XHRkYXRlVGltZVRvVW5peFRpbWU6IGRhdGVUaW1lVG9Vbml4VGltZSxcblxuXHRcdExvZ2luUmVnaXN0ZXJlZFVzZXI6IExvZ2luUmVnaXN0ZXJlZFVzZXIsXHRcdC8vYXV0aGVudGljYWlvblxuXHRcdGNoZWNrTG9naW5TdGF0dXM6IGNoZWNrTG9naW5TdGF0dXMsXG5cdFx0bG9nVXNlck91dDogbG9nVXNlck91dCxcblxuXHRcdGRvd25sb2FkVXNlckRhdGE6IGRvd25sb2FkVXNlckRhdGEsXHRcdFx0XHQvL2dldHRlciBtZXRob2RzXG5cdFx0Z2V0VXNlckJpbzogZ2V0VXNlckJpbyxcblx0XHRnZXRVc2VyRXZlbnRzOiBnZXRVc2VyRXZlbnRzLFxuXG5cdFx0Y3JlYXRlTmV3VXNlcjogY3JlYXRlTmV3VXNlcixcdFx0XHRcdFx0Ly9zZXR0ZXIgTWV0aG9kc1xuXHRcdGFkZE5ld1VzZXJUb0RhdGFiYXNlOiBhZGROZXdVc2VyVG9EYXRhYmFzZSxcblx0XHRhZGROZXdVc2VyVG9SZWdVc2Vyc0xpc3Q6IGFkZE5ld1VzZXJUb1JlZ1VzZXJzTGlzdCxcblx0XHR1cGxvYWRVc2VyRGF0YTogdXBsb2FkVXNlckRhdGEsXG5cdFx0dXBsb2FkVXNlckJpbzogdXBsb2FkVXNlckJpbyxcblx0XHRjcmVhdGVIb3N0ZWRFdmVudDogY3JlYXRlSG9zdGVkRXZlbnRcblx0fTtcblxuXHRmdW5jdGlvbiB1dGY4X3RvX2I2NChzdHIpIHtcblx0XHRyZXR1cm4gYnRvYShzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gYjY0X3RvX3V0Zjgoc3RyKSB7XG4gICAgXHRyZXR1cm4gYXRvYihzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKSB7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KHVuaXhUaW1lKSk7XG5cdH1cblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH1cblxuXHRmdW5jdGlvbiBjcmVhdGVOZXdVc2VyKGVtYWlsLCBwYXNzd29yZCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZmlyZUJhc2VBY2NvdW50cyA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0XG5cdFx0Ly9yZXR1cm4gYSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XG5cdFx0XHRmaXJlQmFzZUFjY291bnRzLmNyZWF0ZVVzZXIoe1xuXHRcdFx0XHRcblx0XHRcdFx0ZW1haWw6IGVtYWlsLFxuXHRcdFx0XHRwYXNzd29yZDogcGFzc3dvcmRcblx0XHRcdFxuXHRcdFx0fSxmdW5jdGlvbihlcnJvciwgdXNlckRhdGEpIHtcblx0XHRcdFx0XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoJ0Vycm9yIGNyZWF0aW5nIHVzZXI6ICcgKyBlcnJvcik7XG5cblx0XHRcdFx0ZWxzZSByZXNvbHZlKHVzZXJEYXRhKTtcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBhZGROZXdVc2VyVG9EYXRhYmFzZSh1aWQsIG5hbWUsIGVtYWlsKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciBhcHBVc2VycyA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpO1xuXHRcdHZhciBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XG5cblx0XHQvL3JldHVybiBhIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcblx0XHRcdGFwcFVzZXJzLnNldCh7IFxuXHRcdFx0XHQnYmlvJzoge1xuXHRcdFx0XHRcdCd1aWQnOiB1aWQsXG5cdFx0XHRcdFx0J25hbWUnOiBuYW1lLFxuXHRcdFx0XHRcdCdlbWFpbCc6IGVtYWlsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdCdldmVudHMnOiB7XG5cdFx0XHRcdFx0J3BlbmRpbmcnOiB7XG5cdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdCdob3N0aW5nJzoge1xuXHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQnYXR0ZW5kaW5nJzoge1xuXHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQnY29tcGxldGVkJzoge1xuXHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblxuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KCdEYXRhIGNvdWxkIG5vdCBiZSBzYXZlZDogJyArIGVycm9yKTtcblx0XHRcdFx0XG5cdFx0XHRcdGVsc2UgcmVzb2x2ZSgnRGF0YSBzYXZlZCBzdWNjZXNzZnVsbHkuJyk7XG5cblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGFkZE5ld1VzZXJUb1JlZ1VzZXJzTGlzdCh1aWQsIGVtYWlsKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciBiNjRFbWFpbCA9IHV0ZjhfdG9fYjY0KGVtYWlsKTtcblx0XHR2YXIgUmVnaXN0ZXJlZFVzZXJzTGlzdCA9IGFwcC5jaGlsZCgnVWlkcycpLmNoaWxkKGI2NEVtYWlsKTtcblxuXHRcdC8vcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFxuXHRcdFx0UmVnaXN0ZXJlZFVzZXJzTGlzdC5zZXQodWlkLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KFwiRGF0YSBjb3VsZCBub3QgYmUgc2F2ZWQuIFwiICsgZXJyb3IpO1xuXHRcdFx0XHRlbHNlIHJlc29sdmUoXCJ1aWQgY3JlYXRlZCBzdWNlc3NmdWxseS5cIik7XG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBMb2dpblJlZ2lzdGVyZWRVc2VyKGVtYWlsLCBwYXNzd29yZCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHRcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHRcdC8vYXV0aGVudGljYXRlIHRoZSB1c2VyXG5cdFx0XHRhcHAuYXV0aFdpdGhQYXNzd29yZCh7XG5cblx0XHRcdFx0ZW1haWw6IGVtYWlsLFxuXHRcdFx0XHRwYXNzd29yZDogcGFzc3dvcmRcblxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IsIGF1dGhEYXRhKSB7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdHJlamVjdCgnRXJyb3IgTG9nZ2luZyBJbjogJyArIGVycm9yKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ0xvZ2dlZCBJbiBzdWNjZXNzZnVsbHk6ICcgKyBhdXRoRGF0YS51aWQpO1xuXHRcdFx0XHRcdHJlc29sdmUoYXV0aERhdGEpO1xuXHRcdFx0XHR9XG5cblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cdFx0XG5cdH1cblxuXHRmdW5jdGlvbiBjaGVja0xvZ2luU3RhdHVzKCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFxuXHRcdFx0YXBwLm9uQXV0aChmdW5jdGlvbihhdXRoRGF0YSkge1xuXHRcdFx0XHRpZiAoYXV0aERhdGEpIHtcblx0XHRcdFx0ICAgICRsb2cuaW5mbyhcIlVzZXIgXCIgKyBhdXRoRGF0YS51aWQgKyBcIiBpcyBsb2dnZWQgaW4gd2l0aCBcIiArIGF1dGhEYXRhLnByb3ZpZGVyKTtcblx0XHRcdFx0ICAgIHJlc29sdmUodHJ1ZSk7XG5cdFx0XHRcdCAgfSBlbHNlIHtcblx0XHRcdFx0ICAgICRsb2cuaW5mbyhcIlVzZXIgaXMgbG9nZ2VkIG91dFwiKTtcblx0XHRcdFx0ICAgIHJlc29sdmUoZmFsc2UpO1xuXHRcdFx0XHQgIH1cblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBsb2dVc2VyT3V0KCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHRcdCRsb2cuaW5mbygnbG9nZ2luZyB1c2VyIG91dCcpO1xuXHRcdGFwcC51bmF1dGgoKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHVwbG9hZFVzZXJEYXRhKGFsbFVzZXJEYXRhKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciB1aWQgPSBhbGxVc2VyRGF0YS51aWQ7XG5cdFx0dmFyIHJlbW90ZVVzZXIgPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKTtcblxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly90aGUgYWN0dWFsIGNhbGxcblx0XHRcdHJlbW90ZVVzZXIudXBkYXRlKGFsbFVzZXJEYXRhLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KCdUaGVyZSB3YXMgYSBwcm9ibGVtIHVwZGF0aW5nIHRoYXQgcmVjb3JkOiAnICsgZXJyb3IpO1xuXHRcdFx0XHRlbHNlIHJlc29sdmUoJ2FsbCB1c2VyIGRhdGEgdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5Jyk7XG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXHRcdFxuXHR9XG5cblx0ZnVuY3Rpb24gdXBsb2FkVXNlckJpbyhjdXJyZW50VXNlckJpbykge1xuXHRcdCRsb2cuaW5mbyhjdXJyZW50VXNlckJpbyk7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciB1aWQgPSAoY3VycmVudFVzZXJCaW8udWlkKS50b1N0cmluZygpO1xuXHRcdHZhciByZW1vdGVVc2VyQmlvID0gYXBwLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2JpbycpO1xuXG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL2NhbGwgdG8gdGhlIGRiXG5cdFx0XHQkbG9nLmluZm8oJ3VwbG9hZGluZyB0aGlzJyk7XG5cdFx0XHQkbG9nLmluZm8oY3VycmVudFVzZXJCaW8pO1xuXHRcdFx0cmVtb3RlVXNlckJpby51cGRhdGUoY3VycmVudFVzZXJCaW8sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoJ1RoZXJlIHdhcyBhIHByb2JsZW0gdXBkYXRpbmcgdGhhdCByZWNvcmQ6ICcgKyBlcnJvcik7XG5cdFx0XHRcdGVsc2UgcmVzb2x2ZSgnYWxsIHVzZXIgYmlvIGRhdGEgdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5Jyk7XG5cdFx0XHR9KVxuXG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBkb3dubG9hZFVzZXJEYXRhKCkge1xuXG5cdH1cblxuXHRmdW5jdGlvbiBnZXRVc2VyQmlvKHVpZCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgdXNlckJpbyA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdiaW8nKTtcblxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly90aGUgYWN0dWFsIGNhbGxcblx0XHRcdHVzZXJCaW8ub25jZSgndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0XHQvL3doZW4gdGhlIGNhbGwgaXMgc3VjY2Vzc2Z1bCByZXR1cm4gdGhlIGRhdGFcblx0XHRcdFx0cmVzb2x2ZShzbmFwc2hvdC52YWwoKSk7XG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHRcdH0gXG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gY3JlYXRlSG9zdGVkRXZlbnQodWlkLCBuZXdFdmVudCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgZXZlbnRJRCA9IG5ld0V2ZW50LmlkO1xuXHRcdHZhciBuZXdIb3N0ZWRFdmVudCA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgnaG9zdGluZycpLmNoaWxkKGV2ZW50SUQpO1xuXG5cdFx0JGxvZy5pbmZvKG5ld0hvc3RlZEV2ZW50KTtcblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vY2FsbCB0byBmaXJlYmFzZVxuXHRcdFx0JGxvZy5pbmZvKCd1cGxvYWRpbmcgdGhpcyBldmVudDonKTtcblx0XHRcdCRsb2cuaW5mbyhuZXdFdmVudCk7XG5cdFx0XHRuZXdIb3N0ZWRFdmVudC5zZXQobmV3RXZlbnQsIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoJ1RoZXJlIHdhcyBhbiBlcnJvcjogJyArIGVycm9yKTtcblx0XHRcdFx0ZWxzZSByZXNvbHZlKCdOZXcgZXZlbnQgc2F2ZWQgdG8gREIgc3VjY2Vzc2Z1bGx5Jyk7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBnZXRVc2VyRXZlbnRzKHVpZCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgdXNlckV2ZW50cyA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpO1xuXHRcdFxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly90aGUgYWN0dWFsIGNhbGxcblx0XHRcdHVzZXJFdmVudHMub25jZSgndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0XHR2YXIgdXNlclByb2ZpbGUgPSBzbmFwc2hvdC52YWwoKTtcblx0XHRcdFx0Ly93aGVuIHRoZSBjYWxsIGlzIHN1Y2Nlc3NmdWwgcmV0dXJuIHRoZSBkYXRhXG5cdFx0XHRcdHZhciBldmVudHNQYWNrYWdlID0ge1xuXHRcdFx0XHRcdGhvc3Rpbmc6IHVzZXJQcm9maWxlLmhvc3RpbmcsXG5cdFx0XHRcdFx0YXR0ZW5kaW5nOiB1c2VyUHJvZmlsZS5hdHRlbmRpbmcsXG5cdFx0XHRcdFx0cGVuZGluZzogdXNlclByb2ZpbGUucGVuZGluZyxcblx0XHRcdFx0XHRjb21wbGV0ZWQ6IHVzZXJQcm9maWxlLmNvbXBsZXRlZFxuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdHJlc29sdmUoZXZlbnRzUGFja2FnZSk7XG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHRcdH0gXG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXHR9XG5cblx0Ly9yZXR1cm4gdGhlIG9iamVjdFxuXHRyZXR1cm4gYWxsQmFja2VuZFNlcnZpY2VzO1xufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmZhY3RvcnkoJ3RyYWZmaWNWYWxldCcsIHRyYWZmaWNWYWxldCk7XG5cbnRyYWZmaWNWYWxldC4kaW5qZWN0ID0gWyckbG9nJywgJyRsb2NhdGlvbiddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHRyYWZmaWNWYWxldCgkbG9nLCAkbG9jYXRpb24pIHtcblx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHR2YXIgYWxsVHJhZmZpY0NvbnRyb2xzID0ge1xuXHRcdHJlZGlyZWN0VG86IHJlZGlyZWN0VG9cblx0fTtcblxuXHRmdW5jdGlvbiByZWRpcmVjdFRvKHBhdGgsIHBhcmFtMSwgcGFyYW0yKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQocGFyYW0xKSkge1xuXHRcdFx0cGF0aCA9IHBhdGggKyAnLycgKyBwYXJhbTE7XG5cblx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHBhcmFtMikpIHtcblx0XHRcdFx0Ly9nbyB0byBwYXRoIHdpdGggMiBwYXJhbXNcblx0XHRcdFx0cGF0aCA9IHBhdGggKyAnLycgKyBwYXJhbTI7XG5cdFx0XHRcdCRsb2cuaW5mbygncmVkaXJlY3Rpbmcgbm93IHRvICcgKyBwYXRoKTtcblx0XHRcdFx0JGxvY2F0aW9uLnBhdGgocGF0aCk7XG5cdFx0XHR9XG5cdFx0XHQvL2dvIHdpdGggMSBwYXJhbVxuXHRcdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyBub3cgdG8gJyArIHBhdGgpO1xuXHRcdFx0JGxvY2F0aW9uLnBhdGgocGF0aCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vanVzdCBnbyB0byBwYXRoXG5cdFx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIG5vdyB0byAnICsgcGF0aCk7XG5cdFx0XHQkbG9jYXRpb24ucGF0aChwYXRoKTtcblx0XHR9XG5cblx0fVxuXG5cdHJldHVybiBhbGxUcmFmZmljQ29udHJvbHM7XG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuZmFjdG9yeSgndXNlckRhdGEnLCB1c2VyRGF0YSk7XG5cbnVzZXJEYXRhLiRpbmplY3QgPSBbJyRsb2cnLCAnJHEnLCAnYmFja2VuZFNlcnZpY2VzJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gdXNlckRhdGEoJGxvZywgJHEsIGJhY2tlbmRTZXJ2aWNlcykge1xuXHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdHZhciBjdXJyZW50VXNlciA9IHtcblx0XHRiaW86IHsgXG5cdFx0XHR1aWQ6ICcnLFxuXHRcdFx0bmFtZTogJycsXG5cdFx0XHRlbWFpbDogJycsXG5cdFx0XHRjb21wYW55OiAnJyxcblx0XHRcdHRpdGxlOiAnJyxcblx0XHRcdGRvYjogMFxuXHRcdH0sXG5cdFx0ZXZlbnRzOiB7XG5cdFx0XHRob3N0aW5nOiB7fSxcblx0XHRcdHBlbmRpbmc6IHt9LFxuXHRcdFx0YXR0ZW5kaW5nOiB7fSxcblx0XHRcdGNvbXBsZXRlZDoge31cblx0XHR9XG5cdH07XG5cblx0dmFyIGFsbFVzZXJEYXRhID0ge1xuXHRcdGJpb1ByaW1hcmllc0FyZUNvbXBsZXRlTG9jYWxseTogYmlvUHJpbWFyaWVzQXJlQ29tcGxldGVMb2NhbGx5LFx0XHQvL21vZGFsIGFuYWx5c2lzXG5cblx0XHRjbGVhbkV2ZW50czogY2xlYW5FdmVudHMsXHRcdC8vbW9kZWwgbWFpbnRhaW5hbmNlXG5cblx0XHRnZXRVSURMb2NhbGx5OiBnZXRVSURMb2NhbGx5LFx0Ly9nZXR0ZXIgTWV0aG9kc1xuXHRcdGdldE5hbWVMb2NhbGx5OiBnZXROYW1lTG9jYWxseSxcblx0XHRnZXRFbWFpbExvY2FsbHk6IGdldEVtYWlsTG9jYWxseSxcblx0XHRnZXRDb21wYW55TG9jYWxseTogZ2V0Q29tcGFueUxvY2FsbHksXG5cdFx0Z2V0VGl0bGVMb2NhbGx5OiBnZXRUaXRsZUxvY2FsbHksXG5cdFx0Z2V0RE9CTG9jYWxseTogZ2V0RE9CTG9jYWxseSxcblx0XHRnZXRGdWxsQmlvTG9jYWxseTogZ2V0RnVsbEJpb0xvY2FsbHksXG5cdFx0Z2V0VXNlckV2ZW50c0xvY2FsbHk6IGdldFVzZXJFdmVudHNMb2NhbGx5LFxuXHRcdGdldEFsbFVzZXJFdmVudHNMb2NhbGx5OiBnZXRBbGxVc2VyRXZlbnRzTG9jYWxseSxcblxuXHRcdHNldFVJRExvY2FsbHk6IHNldFVJRExvY2FsbHksXHQvL3NldHRlciBNZXRob2RzXG5cdFx0c2V0TmFtZUxvY2FsbHk6IHNldE5hbWVMb2NhbGx5LFxuXHRcdHNldEVtYWlsTG9jYWxseTogc2V0RW1haWxMb2NhbGx5LFxuXHRcdHNldENvbXBhbnlMb2NhbGx5OiBzZXRDb21wYW55TG9jYWxseSxcblx0XHRzZXRUaXRsZUxvY2FsbHk6IHNldFRpdGxlTG9jYWxseSxcblx0XHRzZXRET0JMb2NhbGx5OiBzZXRET0JMb2NhbGx5LFxuXHRcdHNldFByaW1hcmllc0xvY2FsbHk6IHNldFByaW1hcmllc0xvY2FsbHksXG5cdFx0dXBkYXRlVXNlckV2ZW50c0xvY2FsbHk6IHVwZGF0ZVVzZXJFdmVudHNMb2NhbGx5LFxuXHRcdHVwZGF0ZUFsbFVzZXJFdmVudHNMb2NhbGx5OiB1cGRhdGVBbGxVc2VyRXZlbnRzTG9jYWxseSxcblx0XHR1cGRhdGVCaW9Mb2NhbGx5OiB1cGRhdGVCaW9Mb2NhbGx5LFxuXG5cdFx0cmVtb3ZlVXNlckV2ZW50c0xvY2FsbHk6IHJlbW92ZVVzZXJFdmVudHNMb2NhbGx5LCAvL3JlbW92ZSBkYXRhXG5cdFx0XG5cdFx0Z2V0RnVsbFJlbW90ZURCZm9yTG9jYWw6IGdldEZ1bGxSZW1vdGVEQmZvckxvY2FsLFx0Ly9sb2NhbC1yZW1vdGUgaW50ZXJhY2lvbnNcblx0XHRnZXRSZW1vdGVCaW9Gb3JMb2NhbDogZ2V0UmVtb3RlQmlvRm9yTG9jYWwsXHRcdFx0XG5cdFx0Z2V0UmVtb3RlRXZlbnRzRm9yTG9jYWw6IGdldFJlbW90ZUV2ZW50c0ZvckxvY2FsLFxuXHRcdHNldEZ1bGxSZW1vdGVEQmZyb21Mb2NhbDogc2V0RnVsbFJlbW90ZURCZnJvbUxvY2FsLFxuXHRcdHNldFJlbW90ZUJpb0Zyb21Mb2NhbDogc2V0UmVtb3RlQmlvRnJvbUxvY2FsLFxuXHRcdHNldFJlbW90ZUV2ZW50c0Zyb21Mb2NhbDogc2V0UmVtb3RlRXZlbnRzRnJvbUxvY2FsLFxuXG5cdFx0bG9hZEJpbzogbG9hZEJpbyxcdC8vZXh0ZXJuYWwgbWV0aG9kc1xuXHRcdGxvYWRFdmVudHNQcm9ncmVzc2l2ZWx5OiBsb2FkRXZlbnRzUHJvZ3Jlc3NpdmVseSxcblx0XHRjcmVhdGVOZXdFdmVudDogY3JlYXRlTmV3RXZlbnRcblx0fVxuXG5cdC8vYW5hbHlzaXMgbWV0aG9kc1xuXHRmdW5jdGlvbiBiaW9QcmltYXJpZXNBcmVDb21wbGV0ZUxvY2FsbHkoKSB7XG5cdFx0aWYoIGN1cnJlbnRVc2VyLmJpby51aWQgIT09ICcnICYmXG5cdFx0XHRjdXJyZW50VXNlci5iaW8ubmFtZSAhPT0gJycgJiZcblx0XHRcdGN1cnJlbnRVc2VyLmJpby5lbWFpbCAhPT0gJydcblx0XHRcdClcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdGVsc2UgcmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0Ly9tb2RlbCBtYWludGFpbmFuY2Vcblx0ZnVuY3Rpb24gY2xlYW5FdmVudHModHlwZSkge1xuXHRcdC8vaXRlcmF0ZSB0aHJvdWdoIG9iamVjdHMgaW4gb2JqZWN0XG5cdFx0T2JqZWN0LmtleXMoY3VycmVudFVzZXIuZXZlbnRzW3R5cGVdKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuXHRcdFx0Ly9pZiBhbnkgYXJlIG5vbi1vYmplY3RzLCBkZWxldGUgdGhlbVxuXHRcdFx0aWYoIWFuZ3VsYXIuaXNPYmplY3QoY3VycmVudFVzZXIuZXZlbnRzW3R5cGVdW2tleV0pKSB7XG5cdFx0XHRcdGRlbGV0ZSBjdXJyZW50VXNlci5ldmVudHNbdHlwZV1ba2V5XTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdC8vZ2V0dGVyIG1ldGhvZHNcblx0ZnVuY3Rpb24gZ2V0VUlETG9jYWxseSgpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuYmlvLnVpZDtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldE5hbWVMb2NhbGx5KCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5iaW8ubmFtZTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldEVtYWlsTG9jYWxseSgpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuYmlvLmVtYWlsO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0Q29tcGFueUxvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmJpby5jb21wYW55O1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0VGl0bGVMb2NhbGx5KCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5iaW8udGl0bGU7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldERPQkxvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmJpby5kb2I7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRGdWxsQmlvTG9jYWxseSgpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0dWlkOiBjdXJyZW50VXNlci5iaW8udWlkLFxuXHRcdFx0bmFtZTogY3VycmVudFVzZXIuYmlvLm5hbWUsXG5cdFx0XHRlbWFpbDogY3VycmVudFVzZXIuYmlvLmVtYWlsLFxuXHRcdFx0Y29tcGFueTogY3VycmVudFVzZXIuYmlvLmNvbXBhbnksXG5cdFx0XHR0aXRsZTogY3VycmVudFVzZXIuYmlvLnRpdGxlLFxuXHRcdFx0ZG9iOiBjdXJyZW50VXNlci5iaW8uZG9iXG5cdFx0fTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldFVzZXJFdmVudHNMb2NhbGx5KHR5cGUpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuZXZlbnRzW3R5cGVdO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0QWxsVXNlckV2ZW50c0xvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmV2ZW50cztcblx0fVxuXG5cdC8vc2V0dGVyIG1ldGhvZHNcblx0ZnVuY3Rpb24gc2V0VUlETG9jYWxseSh1aWQpIHtcblx0XHRjdXJyZW50VXNlci5iaW8udWlkID0gdWlkO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0TmFtZUxvY2FsbHkobmFtZSkge1xuXHRcdGN1cnJlbnRVc2VyLmJpby5uYW1lID0gbmFtZTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldEVtYWlsTG9jYWxseShlbWFpbCkge1xuXHRcdGN1cnJlbnRVc2VyLmJpby5lbWFpbCA9IGVtYWlsO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0Q29tcGFueUxvY2FsbHkoY29tcGFueSkge1xuXHRcdGN1cnJlbnRVc2VyLmJpby5jb21wYW55ID0gY29tcGFueTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2V0VGl0bGVMb2NhbGx5KHRpdGxlKSB7XG5cdFx0Y3VycmVudFVzZXIuYmlvLnRpdGxlID0gdGl0bGU7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXRET0JMb2NhbGx5KGRvYikge1xuXHRcdGN1cnJlbnRVc2VyLmJpby5kb2IgPSBkb2I7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXRQcmltYXJpZXNMb2NhbGx5KGVtYWlsLCBuYW1lLCB1aWQpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChlbWFpbCkpIHNldEVtYWlsTG9jYWxseShlbWFpbCk7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQobmFtZSkpIGdldE5hbWVMb2NhbGx5KG5hbWUpO1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHVpZCkpIHNldFVJRExvY2FsbHkodWlkKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHVwZGF0ZVVzZXJFdmVudHNMb2NhbGx5KHR5cGUsIGV2ZW50KSB7XG5cdFx0Ly9jaGVjayBpZiB0aGUgbW9kZWwgbmVlZHMgdG8gYmUgY2xlYW5lZFxuXHRcdGNsZWFuRXZlbnRzKHR5cGUpO1xuXHRcdC8vdGhlbiBsb2FkIHRoZSBuZXcgZXZlbnRcblx0XHRjdXJyZW50VXNlci5ldmVudHNbdHlwZV1bZXZlbnQuaWRdID0gZXZlbnQ7XG5cdH1cblxuXHRmdW5jdGlvbiB1cGRhdGVBbGxVc2VyRXZlbnRzTG9jYWxseShhbGxVc2VyRXZlbnRzKSB7XG5cdFx0Y3VycmVudFVzZXIuZXZlbnRzID0gYWxsRXZlbnRzO1xuXHR9XG5cblx0ZnVuY3Rpb24gdXBkYXRlQmlvTG9jYWxseSh1c2VyQmlvKSB7XG5cdFx0Ly91cGRhdGUgbG9jYWwgdmFsdWVzXG5cdFx0c2V0TmFtZUxvY2FsbHkodXNlckJpby5uYW1lKTtcblx0XHRzZXRFbWFpbExvY2FsbHkodXNlckJpby5lbWFpbCk7XG5cdFx0c2V0Q29tcGFueUxvY2FsbHkodXNlckJpby5jb21wYW55KTtcblx0XHRzZXRUaXRsZUxvY2FsbHkodXNlckJpby50aXRsZSk7XG5cdFx0c2V0RE9CTG9jYWxseSh1c2VyQmlvLmRvYik7XG5cdFx0Ly9zYXZlIHRvIGRiXG5cdFx0c2V0UmVtb3RlQmlvRnJvbUxvY2FsKCk7XG5cdH1cblxuXHQvL2RlbGV0ZSBNZXRob2RzXG5cdGZ1bmN0aW9uIHJlbW92ZVVzZXJFdmVudHNMb2NhbGx5KHR5cGUsIGV2ZW50KSB7XG5cdFx0Ly9kb2VzIHRoaXMgd29yaz9cblx0XHRkZWxldGUgY3VycmVudFVzZXIuZXZlbnRzW3R5cGVdW2V2ZW50LmlkXTtcblx0fVxuXG5cdC8vcmVtb3RlLWxvY2FsIGludGVyYWN0aW9uIE1ldGhvZHNcblx0ZnVuY3Rpb24gZ2V0RnVsbFJlbW90ZURCZm9yTG9jYWwoKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0XHRkYi5kb3dubG9hZFVzZXJEYXRhKClcblx0XHQudGhlbihmdW5jdGlvbihyZW1vdGVVc2VyRGF0YSkge1xuXHRcdFx0Y3VycmVudFVzZXIgPSByZW1vdGVVc2VyRGF0YTtcblx0XHR9KVxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0UmVtb3RlQmlvRm9yTG9jYWwodWlkKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0XHQkbG9nLmluZm8oJ2dvaW5nIG91dCB0byB0aGUgZGIgZm9yIGJpbycpO1xuXHRcdFx0XHRcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL2dvIG91dCB0byB0aGUgZGIgYmVmb3JlIHJlc29sdmluZ1xuXHRcdFx0ZGIuZ2V0VXNlckJpbyh1aWQpXG5cdFx0XHQudGhlbihmdW5jdGlvbih1c2VyQmlvKSB7XG5cdFx0XHRcdCRsb2cuaW5mbygnZm91bmQgdGhlIGJpbyByZW1vdGx5Jyk7XG5cdFx0XHRcdCRsb2cuaW5mbyh1c2VyQmlvKTtcblx0XHRcdFx0cmVzb2x2ZSh1c2VyQmlvKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0cmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3IgcmVhZGluZyB0aGUgdXNlciBiaW86ICcgKyBlcnJvcik7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXHRcdFxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0UmVtb3RlRXZlbnRzRm9yTG9jYWwoKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0XHQkbG9nLmluZm8oJ2dvaW5nIG91dCB0byB0aGUgZGIgZm9yIGV2ZW50cycpO1xuXHRcdFx0XHRcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQkbG9nLmluZm8oZ2V0VUlETG9jYWxseSgpKTtcblx0XHRcdC8vZ28gb3V0IHRvIHRoZSBkYiBiZWZvcmUgcmVzb2x2aW5nXG5cdFx0XHRkYi5nZXRVc2VyRXZlbnRzKGdldFVJRExvY2FsbHkoKSlcblx0XHRcdC50aGVuKGZ1bmN0aW9uKG9idGFpbmVkVXNlckV2ZW50cykge1xuXHRcdFx0XHQkbG9nLmluZm8oJ0xPT0sgSEVSRScpO1xuXHRcdFx0XHQkbG9nLmluZm8ob2J0YWluZWRVc2VyRXZlbnRzKTtcblx0XHRcdFx0Ly9zYXZlIHRoZSByZXN1bHRzIHRvIHRoZSBsb2NhbCBkYXRhYnNlXG5cdFx0XHRcdC8vb2J0YWluZWRVc2VyRXZlbnRzLmZvckVhY2goZnVuY3Rpb24oZXZlbnRUeXBlKSB7XG5cdFx0XHRcdGZvcihldmVudFR5cGUgaW4gb2J0YWluZWRVc2VyRXZlbnRzKSB7XG5cdFx0XHRcdFx0Ly9hY2Nlc3MgdGhlIGV2ZW50IGNhdGVnb3JpZXMsIGF0dGVuZGluZywgcGVuZGluZywgZXRjLi4uXG5cdFx0XHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoZXZlbnRUeXBlKSkge1xuXHRcdFx0XHRcdFx0Ly9pZiB0aGUgdHlwZSBoYXMgZXZlbnRzLCBzYXZlIHRoZW1cblx0XHRcdFx0XHRcdGZvcihldmVudCBpbiBldmVudFR5cGUpIHtcblx0XHRcdFx0XHRcdFx0Ly9zYXZlIGVhY2ggZXZlbnQgdG8gdGhlIHByb3BlciBwbGFjZVxuXHRcdFx0XHRcdFx0XHR1cGRhdGVVc2VyRXZlbnRzTG9jYWxseShldmVudFR5cGUsIGV2ZW50KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fTtcblx0XHRcdFx0XG5cdFx0XHRcdC8vcmV0dXJuIHRoZSByZXN1bHRzIHRvIHRoZSByZXF1ZXN0aW5nIG9iamVjdFxuXHRcdFx0XHRyZXNvbHZlKG9idGFpbmVkVXNlckV2ZW50cyk7XG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdHJlamVjdCgnVGhlcmUgd2FzIGFuIGVycm9yIHJlYWRpbmcgdGhlIHVzZXIgZXZlbnRzOiAnICsgZXJyb3IpO1xuXHRcdFx0fSlcblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldEZ1bGxSZW1vdGVEQmZyb21Mb2NhbCgpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdGRiLnVwbG9hZFVzZXJEYXRhKGN1cnJlbnRVc2VyKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldFJlbW90ZUJpb0Zyb21Mb2NhbCgpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdCRsb2cuaW5mbygnZnJvbSBzZXRSZW1vdGVCaW9Gcm9tTG9jYWwnKTtcblx0XHQkbG9nLmluZm8oY3VycmVudFVzZXIpO1xuXG5cdFx0ZGIudXBsb2FkVXNlckJpbyhjdXJyZW50VXNlci5iaW8pO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0UmVtb3RlRXZlbnRzRnJvbUxvY2FsKCkge31cblxuXHRmdW5jdGlvbiBsb2FkQmlvKHVpZCkge1xuXG5cdFx0Ly9taWdodCBuZWVkIHRvIGdvIG91dCB0byB0aGUgZGIgc28gcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9jaGVjayBmb3IgYmlvIGxvY2FsbHkgZmlyc3Rcblx0XHRcdGlmKGJpb1ByaW1hcmllc0FyZUNvbXBsZXRlTG9jYWxseSgpKSB7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdC8vbGV0IHVzIGtub3cgdGhhdCB5b3UnbGwgYmUgcGFzc2luZyB0aGVtIGJhY2tcblx0XHRcdFx0JGxvZy5pbmZvKCdyZXR1cm5pbmcgYSBsb2NhbCBiaW8nKTtcblx0XHRcdFx0XG5cdFx0XHRcdC8vc2hvdyB1cyB3aGF0IHdlJ2xsIGJlIHJldHVybmluZ1xuXHRcdFx0XHQkbG9nLmluZm8oZ2V0RnVsbEJpb0xvY2FsbHkoKSk7XG5cdFx0XHRcdFxuXHRcdFx0XHQvL3Bhc3MgaXQgYmFjayBhcyBzdWNjZXNzXG5cdFx0XHRcdHJlc29sdmUoZ2V0RnVsbEJpb0xvY2FsbHkoKSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2lmIHRoZXkncmUgbm90IGNvbXBsZXRlIGxvY2FsbHksIGNoZWNrIHRoZSBzZXJ2ZXJcblx0XHRcdFx0Z2V0UmVtb3RlQmlvRm9yTG9jYWwodWlkKVxuXHRcdFx0XHQudGhlbihmdW5jdGlvbihiaW9Gcm9tUmVtb3RlREIpIHtcblx0XHRcdFx0XHRyZXNvbHZlKGJpb0Zyb21SZW1vdGVEQik7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHRcdH0pXG5cdFx0XHR9XG5cblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gbG9hZEV2ZW50c1Byb2dyZXNzaXZlbHkodWlkKSB7XG5cdFx0dmFyIGV2ZW50VHlwZXMgPSBbJ2F0dGVuZGluZycsICdwZW5kaW5nJywgJ2hvc3RpbmcnLCAnY29tcGxldGVkJ107XG5cdFx0dmFyIGFsbEV2ZW50cyA9IHt9O1xuXG5cdFx0Ly93aWxsIGdvIG91dCB0byB0aGUgZGIgc28gcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Z2V0UmVtb3RlRXZlbnRzRm9yTG9jYWwoKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24ob2J0YWluZWRVc2VyRXZlbnRzKSB7XG5cdFx0XHRcdC8vd2hlbiB0aGUgZGIgcmVzdWx0cyBjb21lIGJhY2ssIHJldHVybiB0aG9zZVxuXHRcdFx0XHRyZXNvbHZlKG9idGFpbmVkVXNlckV2ZW50cyk7XG5cdFx0XHR9KVxuXG5cdFx0XHQvL2J1aWxkIHRoZSBsb2NhbCBtb2RlbFxuXHRcdFx0YWxsRXZlbnRzID0gZ2V0VXNlckV2ZW50c0xvY2FsbHkodHlwZSk7XG5cdFx0XHRcblx0XHRcdC8vc2hvdyB3aGF0IHdhcyBidWlsdFxuXHRcdFx0JGxvZy5pbmZvKGFsbEV2ZW50cyk7XG5cblx0XHRcdC8vZmlyc3QgcmV0dXJuIHdoYXRldmVyIGV2ZW50IGluZm8gaXMgc3RvcmVkIGxvY2FsbHlcblx0XHRcdHJlc29sdmUoYWxsRXZlbnRzKTtcblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gY3JlYXRlTmV3RXZlbnQoZXZlbnRJRCkge1xuXHRcdC8vZGVjbGFyIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblx0XHR2YXIgbmV3RXZlbnQgPSB7fTtcblxuXHRcdC8vZmlyc3QgY3JlYXRlIHRoZSBvYmplY3Rcblx0XHRuZXdFdmVudCA9IHtcblx0XHRcdGlkOiBldmVudElELFxuXHRcdFx0bmFtZTogJycsXG5cdFx0XHR0eXBlOiAnJyxcblx0XHRcdGhvc3Q6IHtcblx0XHRcdFx0bmFtZTogJycsXG5cdFx0XHRcdHVpZDogJydcblx0XHRcdH0sXG5cdFx0XHRtZXNzYWdlOiAnJyxcblx0XHRcdGV2ZW50VGltZXM6IHtcblx0XHRcdFx0c3RhcnQ6IDAsXG5cdFx0XHRcdGVuZDogMFxuXHRcdFx0fSxcblx0XHRcdGFkZHJlc3M6IHtcblx0XHRcdFx0c3RyZWV0MDE6ICcnLFxuXHRcdFx0XHRzdHJlZXQwMjogJycsXG5cdFx0XHRcdHN0cmVldDAzOiAnJyxcblx0XHRcdFx0Y2l0eTogJycsXG5cdFx0XHRcdHN0YXRlOiAnJyxcblx0XHRcdFx0emlwOiAwXG5cdFx0XHR9LFxuXHRcdFx0Z3Vlc3RMaXN0OiB7fVxuXHRcdH07XG5cblx0XHQvL3NhdmUgaXQgbG9jYWxseVxuXHRcdHVwZGF0ZVVzZXJFdmVudHNMb2NhbGx5KCdob3N0aW5nJywgbmV3RXZlbnQpO1xuXG5cdFx0Ly90aGVuIGNyZWF0ZSBpdCBvbiB0aGUgc2VydmVyXG5cdFx0Ly93aWxsIGdvIG91dCB0byB0aGUgZGIgc28gcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vbWFuYWdlIHRoZSBwcm9taXNlIHJlc3BvbnNlc1xuXHRcdFx0JGxvZy5pbmZvKCdqdW1waW5nIGludG8gdGhlIHByb21pc2UgaGVyZScpO1xuXHRcdFx0ZGIuY3JlYXRlSG9zdGVkRXZlbnQoZ2V0VUlETG9jYWxseSgpLCBuZXdFdmVudClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKG1lc3NhZ2UpIHtcblx0XHRcdFx0JGxvZy5pbmZvKG1lc3NhZ2UpO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHQkbG9nLmluZm8oZXJyb3IpXG5cdFx0XHR9KVxuXG5cdFx0fSk7XG5cblx0fVxuXHRcblx0cmV0dXJuIGFsbFVzZXJEYXRhO1xufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmZhY3RvcnkoJ3ZhbGlkYXRpb24nLCB2YWxpZGF0aW9uKTtcblxudmFsaWRhdGlvbi4kaW5qZWN0ID0gWyckbG9nJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gdmFsaWRhdGlvbigkbG9nKSB7XG5cdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0dmFyIG1pbmltdW1OYW1lTGVuZ3RoID0gMztcblx0dmFyIG1pbmltdW1QYXNzTGVuZ3RoID0gMTY7XG5cdHZhciBtYXhpbXVtUGFzc0xlbmd0aCA9IDEwMDtcblxuXHR2YXIgYWxsVmFsaWRhdGlvbnMgPSB7XG5cdFx0cmVxdWlyZWQ6IHJlcXVpcmVkLFxuXHRcdG1pbk5hbWVMZW5ndGg6IG1pbk5hbWVMZW5ndGgsXG5cdFx0bWluUGFzc0xlbmd0aDogbWluUGFzc0xlbmd0aCxcblx0XHRtYXhQYXNzTGVuZ3RoOiBtYXhQYXNzTGVuZ3RoLFxuXHRcdGF0TGVhc3RPbmVTeW1ib2w6IGF0TGVhc3RPbmVTeW1ib2wsXG5cdFx0YXRMZWFzdE9uZU51bWJlcjogYXRMZWFzdE9uZU51bWJlcixcblx0XHRhdExlYXN0T25lTG93ZXJjYXNlOiBhdExlYXN0T25lTG93ZXJjYXNlLFxuXHRcdGF0TGVhc3RPbmVVcHBlcmNhc2U6IGF0TGVhc3RPbmVVcHBlcmNhc2UsXG5cdFx0aWxsZWdhbENoYXJhY3RlcjogaWxsZWdhbENoYXJhY3Rlcixcblx0XHRlbWFpbDogZW1haWwsXG5cdFx0ZGF0ZU9mQmlydGg6IGRhdGVPZkJpcnRoXG5cdH07XG5cblx0ZnVuY3Rpb24gcmVxdWlyZWQodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzVW5kZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0cmV0dXJuICdUaGlzIGlzIGEgcmVxdWlyZWQgZmllbGQnO1xuXHRcdH0gXG5cdH1cblxuXHRmdW5jdGlvbiBtaW5OYW1lTGVuZ3RoKHZhbHVlKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHRpZih2YWx1ZS5sZW5ndGggPCBtaW5pbXVtTmFtZUxlbmd0aCkgcmV0dXJuICgnTmFtZSBzaG91bGQgYmUgYXQgbGVhc3QgJyArIG1pbmltdW1OYW1lTGVuZ3RoICsgJyBjaGFyYWN0ZXJzJyk7XG5cdFx0fSBcblx0fVxuXG5cdGZ1bmN0aW9uIG1pblBhc3NMZW5ndGgodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdGlmKCEodmFsdWUubGVuZ3RoIDwgbWluaW11bVBhc3NMZW5ndGgpKSByZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0ZnVuY3Rpb24gbWF4UGFzc0xlbmd0aCh2YWx1ZSkge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0aWYoISh2YWx1ZS5sZW5ndGggPiBtYXhpbXVtUGFzc0xlbmd0aCkpIHJldHVybiB0cnVlO1xuXHRcdH0gXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0ZnVuY3Rpb24gYXRMZWFzdE9uZVN5bWJvbCh2YWx1ZSkge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0Ly8gYnVpbGQgcmVnZXhcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIltcXCFcXEBcXCNcXCRcXCVcXF5cXCZcXCpdXCIpO1xuXG5cdFx0XHQvL2NoZWNrIGNvbnN0cmF0aW50XG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3QodmFsdWUpKSB7XG5cdFx0XHRcdC8vc3VjY2VzczogYXQgbGVhc3Qgb25lIHNwZWNpYWwgY2hhcmFjdGVyIGZvdW5kXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9mYWlsdXJlOiBkaWRuJ3QgZmluZCBhbnkgc3BjaWFsIGNoYXJhY3RlcnNcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGZ1bmN0aW9uIGF0TGVhc3RPbmVOdW1iZXIodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdC8vIGJ1aWxkIHJlZ2V4XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbMC05XVwiLCBcIlwiKTtcblxuXHRcdFx0Ly9jaGVjayBjb25zdHJhdGludFxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZhbHVlKSkge1xuXHRcdFx0XHQvL3N1Y2Nlc3M6IGF0IGxlYXN0IG9uZSBzcGVjaWFsIGNoYXJhY3RlciBmb3VuZFxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vZmFpbHVyZTogZGlkbid0IGZpbmQgYW55IHNwY2lhbCBjaGFyYWN0ZXJzXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuICAgIGZ1bmN0aW9uIGF0TGVhc3RPbmVMb3dlcmNhc2UodmFsdWUpIHtcbiAgICBcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0Ly8gYnVpbGQgcmVnZXhcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIlthLXpdXCIsIFwiXCIpO1xuXG5cdFx0XHQvL2NoZWNrIGNvbnN0cmF0aW50XG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3QodmFsdWUpKSB7XG5cdFx0XHRcdC8vc3VjY2VzczogYXQgbGVhc3Qgb25lIHNwZWNpYWwgY2hhcmFjdGVyIGZvdW5kXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9mYWlsdXJlOiBkaWRuJ3QgZmluZCBhbnkgc3BjaWFsIGNoYXJhY3RlcnNcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhdExlYXN0T25lVXBwZXJjYXNlKHZhbHVlKSB7XG4gICAgXHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdC8vIGJ1aWxkIHJlZ2V4XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbQS1aXVwiLCBcIlwiKTtcblxuXHRcdFx0Ly9jaGVjayBjb25zdHJhdGludFxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZhbHVlKSkge1xuXHRcdFx0XHQvL3N1Y2Nlc3M6IGF0IGxlYXN0IG9uZSBzcGVjaWFsIGNoYXJhY3RlciBmb3VuZFxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vZmFpbHVyZTogZGlkbid0IGZpbmQgYW55IHNwY2lhbCBjaGFyYWN0ZXJzXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaWxsZWdhbENoYXJhY3Rlcih2YWx1ZSkge1xuICAgIFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHQvLyBidWlsZCByZWdleFxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW15BLXowLTlcXCFcXEBcXCNcXCRcXCVcXF5cXCZcXCpdXCIsIFwiXCIpO1xuXG5cdFx0XHQvL2NoZWNrIGNvbnN0cmF0aW50XG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3QodmFsdWUpKSB7XG5cdFx0XHRcdC8vc3VjY2VzczogYXQgbGVhc3Qgb25lIHNwZWNpYWwgY2hhcmFjdGVyIGZvdW5kXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vZmFpbHVyZTogZGlkbid0IGZpbmQgYW55IHNwY2lhbCBjaGFyYWN0ZXJzXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gZW1haWwodmFsdWUpIHtcbiAgICBcdC8vZGVmaW5lIGNvbnN0cmFpbnRzXG4gICAgXHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKD86XFwuW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKykqQCg/OlthLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cXC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cIiwgXCJcIik7XG5cbiAgICBcdGlmKCFjb25zdHJhaW50LnRlc3QodmFsdWUpKSByZXR1cm4gJ05vdCBhIHZhbGlkIGUtbWFpbCBhZGRyZXNzJ1xuICAgIFx0XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGF0ZU9mQmlydGgodmFsdWUpIHt9XG5cblx0cmV0dXJuIGFsbFZhbGlkYXRpb25zO1xufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbmZpZyhjb25maWcpO1xuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBjb25maWcoJHJvdXRlUHJvdmlkZXIpIHsgICBcbiAgICAkcm91dGVQcm92aWRlclxuICAgIC53aGVuKCcvJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2xhbmRpbmdQYWdlLmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdMYW5kaW5nUGFnZUNvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICB9KVxuICAgIC53aGVuKCcvc2lnbnVwJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL25ld1VzZXJTaWdudXAuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ05ld1VzZXJTaWduVXBDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgfSlcbiAgICAud2hlbignL2xvZ2luJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3JlZ2lzdGVyZWRVc2VyTG9naW4uaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1JlZ1VzZXJMb2dpbkNvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICB9KVxuICAgIC53aGVuKCcvdXNlckluZm9ybWF0aW9uLzp1aWQ/Jywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3VzZXJJbmZvcm1hdGlvbi5odG0nLFxuICAgICAgICBjb250cm9sbGVyOiAnVXNlckluZm9ybWF0aW9uQ29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgcmVzb2x2ZTogeyAvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgICAgIHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2U6IHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2VcbiAgICAgICAgfVxuICAgIH0pXG4gICAgLndoZW4oJy91c2VyRXZlbnRzLzp1aWQ/Jywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3VzZXJFdmVudHMuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1VzZXJFdmVudHNDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICByZXNvbHZlOiB7IC8qIEBuZ0luamVjdCAqL1xuICAgICAgICAgICAgdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZTogdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZVxuICAgICAgICB9XG4gICAgfSlcbiAgICAud2hlbignL2V2ZW50LzpldmVudElkPy86aG9zdElkPy86dWlkPycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9hbkV2ZW50Lmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdBbkV2ZW50Q29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgcmVzb2x2ZTogeyAvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgICAgIHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2U6IHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2VcbiAgICAgICAgfVxuICAgIH0pXG4gICAgLm90aGVyd2lzZSh7XG4gICAgICAgIHJlZGlyZWN0VG86ICcvJ1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlKGF1dGhTZXJ2aWNlKSB7XG4gICAgYXV0aFNlcnZpY2UuaXNMb2dnZWRJbigpO1xufSIsIlxuY29uZmlnLiRpbmplY3QgPSBbXCIkcm91dGVQcm92aWRlclwiXTtcbnVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2UuJGluamVjdCA9IFtcImF1dGhTZXJ2aWNlXCJdO2FuZ3VsYXJcblx0Lm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnLCBbXG5cdFx0J25nUm91dGUnLFxuXHRcdCduZ1RvdWNoJyxcblx0XHQnZmlyZWJhc2UnXG5cdF0pO1xuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignQW5FdmVudENvbnRyb2xsZXInLCBBbkV2ZW50Q29udHJvbGxlcik7XG5cbkFuRXZlbnRDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJywgJyRsb2NhdGlvbicsICckcm91dGVQYXJhbXMnLCAnJGZpcmViYXNlT2JqZWN0J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gQW5FdmVudENvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCAkbG9jYXRpb24sICRyb3V0ZVBhcmFtcywgJGZpcmViYXNlT2JqZWN0KSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdHZhciBmYlVSTCA9ICdodHRwczovL21lZXR1cHBsYW5uZXIuZmlyZWJhc2Vpby5jb20vJztcblx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdHZhciB1c2VyRXZlbnRzID0gcmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ob3N0SWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgnaG9zdGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ldmVudElkKVxuXG5cdC8vYmluZGluZyB0byB0aGUgZXZlbnRcblx0dm0uZXZlbnQgPSAkZmlyZWJhc2VPYmplY3QodXNlckV2ZW50cylcblx0dmFyIHJlZ2lzdGVyZWRVc2VycyA9ICRmaXJlYmFzZU9iamVjdChyZWYuY2hpbGQoJ1VpZHMnKSk7XG5cblx0Ly9yZXF1aXJlZCBmaWVsZHNcblx0dm0ucmVxdWlyZWRJbnB1dHMgPSBbJycsICcnLCAnJywgJycsICcnLCAnJywgJycsICcnLCAnJ107XG5cblx0Ly9Mb2NhbCBNZXRob2RzXG5cdGZ1bmN0aW9uIGluaXQoKSB7XG5cdFx0Ly9kZWNsYXJlIGFuZCBpbml0aWFsaXplIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZtLnRlbXBEYXRlVGltZSA9IHtzdGFydDogJycsIGVuZDogJyd9O1xuXHRcdHZtLm5ld0d1ZXN0ID0ge25hbWU6ICcnLCBlbWFpbDp7YWRkcmVzczonJywgdmFsaWQ6ZmFsc2UsIHN0eWxlOntjb2xvcjonJ319fTtcblx0XHR2bS5zaG93SWZIb3N0ID0gZmFsc2U7XG5cdFx0dm0uaGlkZUlmQXR0ZW5kaW5nID0gdHJ1ZTtcblx0XHQvL3NlY3Rpb25zXG5cdFx0dm0ubWFuYWdlU2VjdGlvbnMgPSB7XG5cdFx0XHQxOiB7YWN0aXZlOiB0cnVlLCBjb21wbGV0ZTogZmFsc2UsIHN0eWxlOntjb2xvcjonYmxhY2snLCAnYmFja2dyb3VuZC1jb2xvcic6J3llbGxvdyd9fSxcblx0XHRcdDI6IHthY3RpdmU6IGZhbHNlLCBjb21wbGV0ZTogZmFsc2UsIHN0eWxlOntjb2xvcjond2hpdGUnLCAnYmFja2dyb3VuZC1jb2xvcic6J2dyYXknfX0sXG5cdFx0XHQzOiB7YWN0aXZlOiBmYWxzZSwgY29tcGxldGU6IGZhbHNlLCBzdHlsZTp7Y29sb3I6J3doaXRlJywgJ2JhY2tncm91bmQtY29sb3InOidncmF5J319XG5cdFx0fTtcblxuXHRcdC8vY2hlY2sgdXNlciB0byBkZXRlcm1pbmUgc3RhdGVcblx0XHRjaGVja0Zvckhvc3QoKTtcblx0XHRjaGVja0lmR3Vlc3RJc0F0dGVuZGluZygpO1xuXG5cdFx0Ly9vcGVuIHVwIHNlY3Rpb25zXG5cdFx0aWYoIXZtLnNob3dJZkhvc3QpIG9wZW5BbGxTZWN0aW9ucygpO1xuXHR9XG5cblx0ZnVuY3Rpb24gdXRmOF90b19iNjQoc3RyKSB7XG5cdFx0cmV0dXJuIGJ0b2Eoc3RyKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGI2NF90b191dGY4KHN0cikge1xuICAgIFx0cmV0dXJuIGF0b2Ioc3RyKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNsZWFuTmV3R3Vlc3RWYXJpYWJsZSgpIHtcblx0XHR2bS5uZXdHdWVzdCA9IHtuYW1lOiAnJywgZW1haWw6e2FkZHJlc3M6JycsIHZhbGlkOmZhbHNlLCBzdHlsZTp7Y29sb3I6Jyd9fX07XG5cdH1cblxuXHRmdW5jdGlvbiBpbnZpdGVBUmVnaXN0ZXJlZFVzZXIodWlkKSB7XG5cdFx0JGxvZy5pbmZvKCdhZGRpbmcgdGhlbSB0byB0aGUgcmVnaXN0ZXJlZCB1c2VycyBsaXN0ICcgKyB1aWQpO1xuXHRcdC8vc2V0IHRoZSBuZXcgZXZlbnRcblx0XHRyZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ3BlbmRpbmcnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS5jaGlsZCgkcm91dGVQYXJhbXMuZXZlbnRJZCkuc2V0KHtcblx0XHRcdGlkOiAkcm91dGVQYXJhbXMuZXZlbnRJZCxcblx0XHRcdGV2ZW50VGltZXM6IHtcblx0XHRcdFx0c3RhcnQ6IHZtLmV2ZW50LmV2ZW50VGltZXMuc3RhcnQsXG5cdFx0XHRcdGVuZDogdm0uZXZlbnQuZXZlbnRUaW1lcy5lbmRcblx0XHRcdH0sXG5cdFx0XHRuYW1lOiB2bS5ldmVudC5uYW1lLFxuXHRcdFx0aG9zdDogJHJvdXRlUGFyYW1zLnVpZFxuXHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKCd0aGVyZSB3YXMgYW4gZXJyb3InICsgZXJyb3IpO1xuXHRcdH0pO1xuXHRcdC8vaWYgdGhlcmUgd2FzIGFuIHVwZGF0ZWQgcGxhY2UgaG9sZGVyLCByZW1vdmUgaXRcblx0XHRyZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ3BlbmRpbmcnKS5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHR2YXIgY2hlY2tGb3JQbGFjZWhvbGRlciA9IHNuYXBzaG90LnZhbCgpXG5cdFx0XHQkbG9nLmluZm8oc25hcHNob3QudmFsKCkpO1xuXG5cdFx0XHRpZihjaGVja0ZvclBsYWNlaG9sZGVyLnVwZGF0ZWQpIHtcblx0XHRcdFx0JGxvZy5pbmZvKCdkZWxldGluZyB1cGRhdGVkJyk7XG5cdFx0XHRcdHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgncGVuZGluZycpLmNoaWxkKCd1cGRhdGVkJykucmVtb3ZlKGZ1bmN0aW9uKGVycm9yT2JqZWN0KSB7XG5cdFx0XHRcdFx0aWYoZXJyb3JPYmplY3QpICRsb2cuaW5mbyhcIkRlbGV0aW5nIGZhaWxlZDogXCIgKyBlcnJvck9iamVjdC5jb2RlKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2UgJGxvZy5pbmZvKCdub3RoaW5nIHRvIGRvJyk7XG5cblx0XHR9LCBmdW5jdGlvbihlcnJvck9iamVjdCkge1xuXHRcdFx0aWYoZXJyb3JPYmplY3QpICRsb2cuaW5mbyhcIlRoZSByZWFkIGZhaWxlZDogXCIgKyBlcnJvck9iamVjdC5jb2RlKTtcblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGludml0ZUFuVW5yZWdpc3RlcmVkVXNlcih1c2VyS2V5KSB7XG5cdFx0JGxvZy5pbmZvKCdhZGRpbmcgdGhlbSB0byB0aGUgVU5SRUdJU1RFUkVEIHVzZXJzIGxpc3QgJyArIHVzZXJLZXkpO1xuXHRcdHJlZi5jaGlsZCgnVW5yZWdpc3RlcmVkVXNlcnMnKS5jaGlsZCh1c2VyS2V5KS5jaGlsZCgncGVuZGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ldmVudElkKS5zZXQoe1xuXHRcdFx0aWQ6ICRyb3V0ZVBhcmFtcy5ldmVudElkLFxuXHRcdFx0aG9zdDogJHJvdXRlUGFyYW1zLnVpZCxcblx0XHRcdGV2ZW50VGltZXM6IHtcblx0XHRcdFx0c3RhcnQ6IHZtLmV2ZW50LmV2ZW50VGltZXMuc3RhcnQsXG5cdFx0XHRcdGVuZDogdm0uZXZlbnQuZXZlbnRUaW1lcy5lbmRcblx0XHRcdH0sXG5cdFx0XHRuYW1lOiB2bS5ldmVudC5uYW1lXG5cdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oJ3RoZXJlIHdhcyBhbiBlcnJvcicgKyBlcnJvcik7XG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBjaGVja0Zvckhvc3QoKSB7XG5cdFx0Ly9jaGVjayBldmVudCBob3N0XG5cdFx0dmFyIGF1dGhEYXRhID0gcmVmLmdldEF1dGgoKTtcblxuXHRcdGlmKGF1dGhEYXRhLnVpZCA9PSAkcm91dGVQYXJhbXMuaG9zdElkKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2lzIHRoZSBob3N0Jyk7XG5cdFx0XHR2bS5zaG93SWZIb3N0ID0gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JGxvZy5pbmZvKCdub3QgdGhlIGhvc3QnKTtcblx0XHRcdHZtLnNob3dJZkhvc3QgPSBmYWxzZTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBjaGVja0lmR3Vlc3RJc0F0dGVuZGluZygpIHtcblx0XHRpZighdm0uc2hvd0lmSG9zdCkge1xuXHRcdFx0JGxvZy5pbmZvKCdjaGVjayBndWVzdCBhdHRlbmRhbmNlJyk7XG5cdFx0XHR1c2VyRXZlbnRzLmNoaWxkKCdndWVzdExpc3QnKS5vbigndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0XHR2YXIgYWxsR3Vlc3RzID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHRcdHZtLmhpZGVJZkF0dGVuZGluZyA9ICFhbGxHdWVzdHNbJHJvdXRlUGFyYW1zLnVpZF0uYXR0ZW5kaW5nO1xuXHRcdFx0XHRcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIG9wZW5BbGxTZWN0aW9ucygpIHtcblx0XHR2bS5tYW5hZ2VTZWN0aW9uc1sxXS5hY3RpdmUgPSB0cnVlO1xuXHRcdHZtLm1hbmFnZVNlY3Rpb25zWzJdLmFjdGl2ZSA9IHRydWU7XG5cdFx0dm0ubWFuYWdlU2VjdGlvbnNbM10uYWN0aXZlID0gdHJ1ZTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNhdmVFdmVudCgpIHtcblx0XHR2bS5ldmVudC4kc2F2ZSgpLnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2V2ZW50IHNhdmVkJyk7XG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdCRsb2cuaW5mbygnZXJyb3IhICcgKyBlcnJvcik7XG5cdFx0fSk7XG5cdH1cblxuXHQvL3ZpZXcgTWV0aG9kXG5cdHZtLnNldFRlbXBUaW1lID0gZnVuY3Rpb24oZW5kcG9pbnQpIHtcblx0XHRpZihlbmRwb2ludCA9PSAnc3RhcnQnKSB2bS50ZW1wRGF0ZVRpbWUuc3RhcnQgPSBuZXcgRGF0ZSgpO1xuXHRcdGlmKGVuZHBvaW50ID09ICdlbmQnKSB2bS50ZW1wRGF0ZVRpbWUuZW5kID0gbmV3IERhdGUoKTtcblx0fVxuXG5cdHZtLnVuaXhUaW1lVG9EYXRlVGltZSA9IGZ1bmN0aW9uICh1bml4VGltZSkge1xuXHRcdHJldHVybiBuZXcgRGF0ZShwYXJzZUludCh1bml4VGltZSkpO1xuXHR9O1xuXG5cdHZtLmRhdGVUaW1lVG9Vbml4VGltZSA9IGZ1bmN0aW9uIChkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fTtcblxuXHR2bS5zdWJtaXQgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9nLmluZm8oJ3N1Ym1pdHRpbmcgdGhlIGZvcm0gbm93IScpO1xuXHR9XG5cblx0dm0uYmFja1RvVXNlckV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2NhdGlvbi5wYXRoKCcvdXNlckV2ZW50cy8nICsgJHJvdXRlUGFyYW1zLnVpZCArICcvJyArICRyb3V0ZVBhcmFtcy50b2tlbik7XG5cdH1cblxuXHR2bS5ldmVudFJlZGlyZWN0ID0gZnVuY3Rpb24ocGF0aCwgZXZlbnRJRCkge1xuXHRcdHZhciBmdWxsUGF0aCA9IHBhdGggKyAnLycgKyAkcm91dGVQYXJhbXMudWlkICsgJy8nICsgJHJvdXRlUGFyYW1zLnRva2VuO1xuXHRcdC8vcmVkaXJlY3Rcblx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIHRvOiAnICsgZnVsbFBhdGgpO1xuXHRcdCRsb2NhdGlvbi5wYXRoKGZ1bGxQYXRoKTtcblx0fVxuXG5cdHZtLmNoYW5nZVNlY3Rpb24gPSBmdW5jdGlvbih0YXJnZXRTZWN0aW9uKSB7XG5cdFx0JGxvZy5pbmZvKCdhcmUgd2UgaGVyZScpO1xuXHRcdGZvcihpID0gMTsgaSA8PTM7IGkrKykge1xuXHRcdFx0aWYoaT09dGFyZ2V0U2VjdGlvbikge1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5hY3RpdmUgPSB0cnVlO1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5zdHlsZVsnYmFja2dyb3VuZC1jb2xvciddID0neWVsbG93Jztcblx0XHRcdFx0dm0ubWFuYWdlU2VjdGlvbnNbaV0uc3R5bGVbJ2NvbG9yJ10gPSdibGFjayc7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5hY3RpdmUgPSBmYWxzZTtcblx0XHRcdFx0dm0ubWFuYWdlU2VjdGlvbnNbaV0uc3R5bGVbJ2JhY2tncm91bmQtY29sb3InXSA9J2dyYXknO1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5zdHlsZVsnY29sb3InXSA9J3doaXRlJztcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHR2bS5zYXZlRXZlbnRUaW1lID0gZnVuY3Rpb24oZGF0ZVRpbWUsIHRhcmdldCkge1xuXHRcdC8vaWYgdGhpcyBldmVudCBkaWRuJ3QgaGF2ZSBhIHN0YXJ0IHRpbWUsIGNyZWF0ZSBpdFxuXHRcdGlmKCF2bS5ldmVudC5ldmVudFRpbWVzKSB7IFxuXHRcdFx0dm0uZXZlbnQuZXZlbnRUaW1lcyA9IHtzdGFydDogJycsIGVuZDogJyd9O1xuXHRcdFx0dm0uZXZlbnQuZXZlbnRUaW1lcy5zdGFydCA9IHZtLmRhdGVUaW1lVG9Vbml4VGltZSh2bS50ZW1wRGF0ZVRpbWUuc3RhcnQpOyBcblx0XHRcdHZtLmV2ZW50LmV2ZW50VGltZXMuZW5kID0gdm0uZGF0ZVRpbWVUb1VuaXhUaW1lKHZtLnRlbXBEYXRlVGltZS5lbmQpO1xuXHRcdH1cblxuXHRcdGlmKCh2bS50ZW1wRGF0ZVRpbWUuZW5kIDwgdm0udGVtcERhdGVUaW1lLnN0YXJ0KSAmJiB0YXJnZXQgPT0gJ3N0YXJ0Jykgdm0udGVtcERhdGVUaW1lLmVuZCA9IHZtLnRlbXBEYXRlVGltZS5zdGFydDtcblx0XHRpZih0YXJnZXQgPT0gJ3N0YXJ0Jykgdm0uZXZlbnQuZXZlbnRUaW1lcy5zdGFydCA9IHZtLmRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSk7XG5cdFx0aWYodGFyZ2V0ID09ICdlbmQnKSB2bS5ldmVudC5ldmVudFRpbWVzLmVuZCA9IHZtLmRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSk7XG5cdH1cblxuXHR2bS5ndWVzdHNBcmVJbnZpdGVkID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodm0uZXZlbnQuZ3Vlc3RMaXN0KSByZXR1cm4gdHJ1ZTtcblx0XHRlbHNlIHJldHVybiBmYWxzZTtcblx0fVxuXG5cdHZtLnZhbGlkYXRlR3Vlc3RFbWFpbCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vaWYgdGhlcmUgaXMgYW4gZW1haWwgYWRkcmVzc1xuXHRcdGlmKHZtLm5ld0d1ZXN0LmVtYWlsLmFkZHJlc3MpIHtcblx0XHRcdC8vY2hlY2sgdmFsaWRpdHlcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSsoPzpcXC5bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKSpAKD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1xcLikrW2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1wiLCBcIlwiKTtcblxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZtLm5ld0d1ZXN0LmVtYWlsLmFkZHJlc3MpKSB7XG5cdFx0XHRcdHZtLm5ld0d1ZXN0LmVtYWlsLnZhbGlkID0gdHJ1ZTtcblx0XHRcdFx0dm0ubmV3R3Vlc3QuZW1haWwuc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS5uZXdHdWVzdC5lbWFpbC52YWxpZCA9IGZhbHNlO1xuXHRcdFx0XHR2bS5uZXdHdWVzdC5lbWFpbC5zdHlsZSA9IHtjb2xvcjonJ307XG5cdFx0XHR9XHRcdFx0XG5cdFx0fVxuXHR9XG5cblx0dm0uaXNTZWN0aW9uQ29tcGxldGUgPSBmdW5jdGlvbigpIHtcblx0XHRmb3IoaT0wO2k8ODtpKyspIHtcblx0XHRcdCRsb2cuaW5mbyh2bS5yZXF1aXJlZElucHV0c1tpXSk7XG5cdFx0fVxuXHR9XG5cblx0dm0uc2F2ZUFuZEFkdmFuY2UgPSBmdW5jdGlvbigpIHtcblx0XHR2bS5ldmVudC4kc2F2ZSgpLnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2V2ZW50IHNhdmVkJyk7XG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdCRsb2cuaW5mbygnZXJyb3IhICcgKyBlcnJvcik7XG5cdFx0fSk7XG5cblx0XHQvL2NoZWNrIGZvciBjb21wbGV0ZW5lc1xuXHRcdHZtLmlzU2VjdGlvbkNvbXBsZXRlKCk7XG5cblx0XHRpZih2bS5tYW5hZ2VTZWN0aW9uc1sxXS5jb21wbGV0ZSA9PSB0cnVlICYmIHZtLm1hbmFnZVNlY3Rpb25zWzJdLmNvbXBsZXRlID09IHRydWUgJiYgdm0ubWFuYWdlU2VjdGlvbnNbM10uY29tcGxldGUgPT0gdHJ1ZSkge1xuXHRcdFx0dm0uZXZlbnRSZWRpcmVjdCgnL3VzZXJFdmVudHMnLCAkcm91dGVQYXJhbXMudWlkKTtcblx0XHR9IGVsc2UgaWYgKHZtLm1hbmFnZVNlY3Rpb25zWzFdLmFjdGl2ZSkgdm0uY2hhbmdlU2VjdGlvbigyKTtcblx0XHRlbHNlIGlmICh2bS5tYW5hZ2VTZWN0aW9uc1syXS5hY3RpdmUpIHZtLmNoYW5nZVNlY3Rpb24oMyk7XG5cdFx0ZWxzZSBpZiAodm0ubWFuYWdlU2VjdGlvbnNbM10uYWN0aXZlKSB2bS5jaGFuZ2VTZWN0aW9uKDEpO1xuXHR9XG5cblx0dm0uYWRkR3Vlc3RUb0hvc3RzTGlzdCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vZGVjbGFyZSBhbmQgaW5pdGlhbGl6ZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgdXNlcktleSA9IHV0ZjhfdG9fYjY0KHZtLm5ld0d1ZXN0LmVtYWlsLmFkZHJlc3MpO1xuXG5cdFx0Ly9pZiBlbWFpbCBpcyB2YWxpZCBhbmQgbmFtZSBleGlzdHNcblx0XHRpZiAodm0ubmV3R3Vlc3QubmFtZSAmJiB2bS5uZXdHdWVzdC5lbWFpbC52YWxpZCkge1xuXHRcdFx0Ly9pcyB0aGVyZSBhIGd1ZXN0IGxpc3QgYWxyZWFkeT8gSWYgbm90IGNyZWF0ZSBvbmVcblx0XHRcdGlmKCF2bS5ldmVudC5ndWVzdExpc3QpIHtcblx0XHRcdFx0dm0uZXZlbnQuZ3Vlc3RMaXN0ID0ge307XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2lmIHNvIGlzIHRoaXMgcGVyc29uIGFscmVhZHkgb24gdGhlIGxpc3Q/XG5cdFx0XHRcdHZhciBpID0wO1xuXHRcdFx0XHR3aGlsZSh2bS5ldmVudC5ndWVzdExpc3RbaV0pIHtcblx0XHRcdFx0XHRpZih2bS5ldmVudC5ndWVzdExpc3RbaV0uZW1haWwgPT0gYjY0X3RvX3V0ZjgodXNlcktleSkpIHtcblx0XHRcdFx0XHRcdCRsb2cuaW5mbygnVGhpcyBndWVzdCBpcyBhbHJlYWR5IG9uIHRoZSBsaXN0Jyk7XG5cdFx0XHRcdFx0XHRjbGVhbk5ld0d1ZXN0VmFyaWFibGUoKTtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aSsrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vaXMgdGhpcyBndWVzdCBhIHJlZ2lzdGVyZWQgdXNlcj9cblx0XHRcdGlmKHJlZ2lzdGVyZWRVc2Vyc1t1c2VyS2V5XSkge1xuXHRcdFx0XHQvL2lzIHRoZSByZWdpc3RlcmVkIHVzZXIgdGhlIGhvc3Q/XG5cdFx0XHRcdGlmKHJlZ2lzdGVyZWRVc2Vyc1t1c2VyS2V5XSA9PSAkcm91dGVQYXJhbXMudWlkKSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCd0cmllZCB0byByZWdpc3RlciB0aGUgaG9zdCcpO1xuXHRcdFx0XHRcdGNsZWFuTmV3R3Vlc3RWYXJpYWJsZSgpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHQvL2FkZCB0aGVtIHRvIHRoZSBhcHByb3ByaWF0ZSByZWdpc3RlcmVkIHVzZXJzJyBsaXN0IG9mIGV2ZW50IGludml0ZXNcblx0XHRcdFx0XHRpbnZpdGVBUmVnaXN0ZXJlZFVzZXIocmVnaXN0ZXJlZFVzZXJzW3VzZXJLZXldKTtcblxuXHRcdFx0XHRcdC8vYWRkIHRoZSBndWVzdCB0byB0aGUgbGlzdFxuXHRcdFx0XHRcdHZtLmV2ZW50Lmd1ZXN0TGlzdFtyZWdpc3RlcmVkVXNlcnNbdXNlcktleV1dID0ge1xuXHRcdFx0XHRcdFx0YXR0ZW5kaW5nOiBmYWxzZSwgXG5cdFx0XHRcdFx0XHRzdGF0dXM6J3BlbmRpbmcnLCBcblx0XHRcdFx0XHRcdG5hbWU6IHZtLm5ld0d1ZXN0Lm5hbWUsIFxuXHRcdFx0XHRcdFx0ZW1haWw6dm0ubmV3R3Vlc3QuZW1haWwuYWRkcmVzcyxcblx0XHRcdFx0XHR9O1x0XHRcdFx0XHRcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9hZGQgdGhlIGludml0ZSB0byB0aGUgbm9uLXJlZ2lzdGVyZWQgdXNlcnMgbGlzdCBvZiBldmVudCBpbnZpdGVzXG5cdFx0XHRcdGludml0ZUFuVW5yZWdpc3RlcmVkVXNlcih1c2VyS2V5KTtcblxuXHRcdFx0XHQvL2FkZCB0aGUgZ3Vlc3QgdG8gdGhlIGxpc3Rcblx0XHRcdFx0dm0uZXZlbnQuZ3Vlc3RMaXN0W3VzZXJLZXldID0ge1xuXHRcdFx0XHRcdFx0YXR0ZW5kaW5nOiBmYWxzZSwgXG5cdFx0XHRcdFx0XHRzdGF0dXM6J3BlbmRpbmcnLCBcblx0XHRcdFx0XHRcdG5hbWU6IHZtLm5ld0d1ZXN0Lm5hbWUsIFxuXHRcdFx0XHRcdFx0ZW1haWw6dm0ubmV3R3Vlc3QuZW1haWwuYWRkcmVzcyxcblx0XHRcdFx0fTtcblx0XHRcdH1cblxuXG5cdFx0XHQvL3NhdmUgdGhlIGV2ZW50XG5cdFx0XHR2bS5zYXZlRXZlbnQoKTtcblx0XHRcdC8vY2xlYXIgdGhlIHRlbXAgdmFsdWVzXG5cdFx0XHRjbGVhbk5ld0d1ZXN0VmFyaWFibGUoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JGxvZy5pbmZvKCd5b3UgZGlkblxcJ3QgZW50ZXIgYSBuYW1lIGFuZCBvciBlbWFpbCcpO1xuXHRcdH1cblx0fVxuXG5cdHZtLmd1ZXN0V2lsbEF0dGVuZCA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdFx0dmFyIGN1cnJlbnRVc2VyID0gcmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCdldmVudHMnKTtcblx0XHR2YXIgdG90YWxQZW5kaW5nSW52aXRhdGlvbnMgPSAwO1xuXHRcdHZhciByZW1vdmVBdHRlbmRpbmdVcGRhdGVkID0gZmFsc2U7XG5cdFx0XG5cdFx0Ly9jaGFuZ2UgYXR0ZW5kaW5nIHRvIHRydWUgaW4gaG9zdCdzIGd1ZXN0TGlzdFxuXHRcdHZtLmV2ZW50Lmd1ZXN0TGlzdFskcm91dGVQYXJhbXMudWlkXS5hdHRlbmRpbmcgPSByZXNwb25zZTtcblx0XHQvL2NoYW5nZSBzdGF0dXMgdG8gJ2F0dGVuZGluZycgaW4gaG9zdCdzIGd1ZXN0TGlzdFxuXHRcdHZtLmV2ZW50Lmd1ZXN0TGlzdFskcm91dGVQYXJhbXMudWlkXS5zdGF0dXMgPSAnYXR0ZW5kaW5nJztcblx0XHRcblx0XHQvL2dldCB0aGUgaW52aXRhdGlvbiBkZXRhaWxzXG5cdFx0Y3VycmVudFVzZXIuY2hpbGQoJ3BlbmRpbmcnKS5vbigndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFsYmVcblx0XHRcdHZhciBpbnZpdGF0aW9ucyA9IHNuYXBzaG90LnZhbCgpO1xuXHRcdFx0Ly9sb2cgc3RhcnRpbmcgdmFsdWVzXG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnMpO1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdKTtcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9uc1skcm91dGVQYXJhbXMuaG9zdElkXVskcm91dGVQYXJhbXMuZXZlbnRJZF0pO1xuXG5cdFx0XHR2YXIgdGhpc0ludml0YXRpb24gPSBpbnZpdGF0aW9uc1skcm91dGVQYXJhbXMuaG9zdElkXVskcm91dGVQYXJhbXMuZXZlbnRJZF07XG5cdFx0XHRcblx0XHRcdCRsb2cuaW5mbyh0aGlzSW52aXRhdGlvbik7XG5cdFx0XHRcblx0XHRcdC8vY2hlY2sgIyBvZiBpbml2aWF0aW9uc1xuXHRcdFx0Zm9yKGludml0YXRpb24gaW4gaW52aXRhdGlvbnMpIHtcblx0XHRcdFx0dG90YWxQZW5kaW5nSW52aXRhdGlvbnMrKztcblx0XHRcdH1cblxuXHRcdFx0Ly9yZXBvcnQgIyBvZiBpbnZpdGF0aW9uc1xuXHRcdFx0JGxvZy5pbmZvKFwidG90YWwgYXR0ZW5kaW5nOiBcIiArIHRvdGFsUGVuZGluZ0ludml0YXRpb25zKTtcblx0XHRcdFxuXHRcdFx0Ly9hZGQgdGhlIGV2ZW50IHRvIHRoZSBndWVzdCdzIGF0dGVuZGluZyBsaXN0XG5cdFx0XHRpZihyZXNwb25zZSkgY3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ob3N0SWQpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ldmVudElkKS5zZXQodGhpc0ludml0YXRpb24sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oZXJyb3IpO1xuXHRcdFx0fSk7XG5cblx0XHR9KTtcblxuXHRcdC8vaWYgdGhlIHVwZGF0ZWQgcGxhY2Vob2xkZXIgd2FzIG9uIHRoZSBhdHRlbmRpbmcgbGlzdCByZW1vdmUgaXRcblx0XHRjdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykub24oJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgYXR0ZW5kaW5nTGlzdCA9IHNuYXBzaG90LnZhbCgpO1xuXHRcdFx0XG5cdFx0XHQvL3JlcG9ydCBhY3Rpb25zXG5cdFx0XHQkbG9nLmluZm8oJ3RoaXMgaXMgdGhlIGF0dGVuZGluZyBsaXN0Jyk7XG5cdFx0XHQkbG9nLmluZm8oYXR0ZW5kaW5nTGlzdCk7XG5cdFx0XHRcblx0XHRcdC8vdGhyb3cgZmxhZyBmb3IgbGF0ZXJcblx0XHRcdGlmKGF0dGVuZGluZ0xpc3QudXBkYXRlZCkgcmVtb3ZlQXR0ZW5kaW5nVXBkYXRlZCA9IHRydWU7XG5cblx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0Ly9pZiB0aGVyIHdhcyBhbiBlcnJvciByZXBvcnQgaXRcblx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oZXJyb3IpO1xuXHRcdH0pO1xuXG5cdFx0Ly9pZiB0aGlzIGlzIHRoZSBsYXN0IHBlbmRpbmcgZXZlbnQgb24gdGhlIGd1ZXN0J3MgcGVuZGluZyBsaXN0LCBhZGQgdGhlIHVwZGF0ZWQgcGxhY2Vob2xkZXJcblx0XHRpZih0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucyA8IDIpIHtcblx0XHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xuXG5cdFx0XHQvL3JlcGxhY2Ugd2l0aCB1cGRhdGVkIGZpZWxkXG5cdFx0XHRjdXJyZW50VXNlci5jaGlsZCgncGVuZGluZycpLnVwZGF0ZSh7XG5cdFx0XHRcdHVwZGF0ZWQ6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oZXJyb3IpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0Ly9yZW1vdmUgdGhlIGV2ZW50IGZyb20gdGhlIGd1ZXN0J3MgcGVuZGluZyBsaXN0XG5cdFx0Y3VycmVudFVzZXIuY2hpbGQoJ3BlbmRpbmcnKS5jaGlsZCgkcm91dGVQYXJhbXMuaG9zdElkKS5yZW1vdmUoKTtcblxuXHRcdC8vaWYgdGhlcmUgd2FzIGFuIHVwZGF0ZWQgZmllbGQgaW4gYXR0ZW5kaW5nLCByZW1vdmUgaXRcblx0XHRpZihyZW1vdmVBdHRlbmRpbmdVcGRhdGVkKSB7XG5cdFx0XHQkbG9nLmluZm8oJ3JlbW92aW5nIHRoZSB1cGRhdGVkIHBsYWNlaG9sZGVyJyk7XG5cdFx0XHQvL2N1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5jaGlsZCgndXBkYXRlZCcpLnJlbW92ZSgpO1xuXHRcdH1cblxuXHRcdC8vc2F2ZSBjaGFuZ2VzXG5cdFx0dm0uZXZlbnQuJHNhdmUoKTtcblx0fVxuXG5cdHZtLnVwZGF0ZVVwZGF0ZWRQYXJhbSA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBjdXJyZW50VXNlciA9IHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS5jaGlsZCgnZXZlbnRzJyk7XG5cdFx0XG5cdFx0JGxvZy5pbmZvKCd1cGRhdGluZyB0aGUgcGFyYW0nKTtcblx0XHRjdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykub24oJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdCRsb2cuaW5mbyhzbmFwc2hvdC52YWwoKSk7XG5cdFx0fSk7XG5cdFx0Y3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLmNoaWxkKCd1cGRhdGVkJykucmVtb3ZlKCk7XG5cdH1cblxuXHR2bS5hZGRJbnZpdGF0aW9uVG9BdHRlbmRpbmcgPSBmdW5jdGlvbihyZXNwb25zZSkge1xuXHRcdHZhciBjdXJyZW50VXNlciA9IHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS5jaGlsZCgnZXZlbnRzJyk7XG5cdFx0dmFyIHRvdGFsUGVuZGluZ0ludml0YXRpb25zID0gMDtcblxuXHRcdC8vZ2V0IHRoZSBpbnZpdGF0aW9uIGRldGFpbHNcblx0XHRjdXJyZW50VXNlci5jaGlsZCgncGVuZGluZycpLm9uKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWxiZVxuXHRcdFx0dmFyIGludml0YXRpb25zID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHR2YXIgdGhpc0ludml0YXRpb24gPSBpbnZpdGF0aW9uc1skcm91dGVQYXJhbXMuaG9zdElkXVskcm91dGVQYXJhbXMuZXZlbnRJZF07XG5cdFx0XHRcblx0XHRcdC8vbG9nIHN0YXJ0aW5nIHZhbHVlc1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zKTtcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9uc1skcm91dGVQYXJhbXMuaG9zdElkXSk7XG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnNbJHJvdXRlUGFyYW1zLmhvc3RJZF1bJHJvdXRlUGFyYW1zLmV2ZW50SWRdKTtcblx0XHRcdFxuXHRcdFx0Ly9jaGVjayAjIG9mIGluaXZpYXRpb25zXG5cdFx0XHRmb3IoaW52aXRhdGlvbiBpbiBpbnZpdGF0aW9ucykge1xuXHRcdFx0XHR0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucysrO1xuXHRcdFx0fVxuXG5cdFx0XHQvL3JlcG9ydCAjIG9mIGludml0YXRpb25zXG5cdFx0XHQkbG9nLmluZm8oXCJ0b3RhbCBwZW5kaW5nIGludml0YXRpb25zOiBcIiArIHRvdGFsUGVuZGluZ0ludml0YXRpb25zKTtcblx0XHRcdFxuXHRcdFx0JGxvZy5pbmZvKHJlc3BvbnNlKTtcblx0XHRcdC8vYWRkIHRoZSBldmVudCB0byB0aGUgZ3Vlc3QncyBhdHRlbmRpbmcgbGlzdFxuXHRcdFx0aWYocmVzcG9uc2UpIGN1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5jaGlsZCgkcm91dGVQYXJhbXMuaG9zdElkKS5jaGlsZCgkcm91dGVQYXJhbXMuZXZlbnRJZCkuc2V0KHRoaXNJbnZpdGF0aW9uLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKGVycm9yKTtcblx0XHRcdH0pO1xuXG5cblxuXHRcdH0pO1xuXHR9XG5cblx0Ly9zdGFydCBydW5cblx0aW5pdCgpO1xufVxuXG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdMYW5kaW5nUGFnZUNvbnRyb2xsZXInLCBMYW5kaW5nUGFnZUNvbnRyb2xsZXIpO1xuXG5MYW5kaW5nUGFnZUNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnLCAnJGxvY2F0aW9uJywgJyRkb2N1bWVudCcsICckd2luZG93J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gTGFuZGluZ1BhZ2VDb250cm9sbGVyKCRzY29wZSwgJGxvZywgJGxvY2F0aW9uLCAkZG9jdW1lbnQsICR3aW5kb3cpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgYXV0aERhdGEgPSB7fTtcblx0dmFyIGN1cnJlbnRVc2VyRGF0YSA9IHt9O1xuXG5cdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHR2bS5zaG93UmVxdWlybm1lbnRzID0gZmFsc2U7XG5cdHZtLnZhbGlkTmV3TmFtZSA9IHsndmFsaWQnOmZhbHNlLCAnc3R5bGUnOntjb2xvcjonJ319O1xuXHR2bS52YWxpZE5ld0VtYWlsID0geyd2YWxpZCc6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOicnfX07XG5cdHZtLnNlY3VyZVBhc3N3b3JkID0geydzZWN1cmUnOmZhbHNlLCAnc3R5bGUnOntjb2xvcjonJ319O1xuXHR2bS51bmxvY2tDcmVhdGVVc2VyQnRuID0geyd1c2FibGUnOmZhbHNlLCAnY2xhc3MnOididG4gYnRuLXdhcm5pbmcnfTtcblx0dm0ubWVzc2FnZSA9ICd0ZXN0aW5nJztcblxuXHRcblx0dm0udmFsaWRVc2VyRW1haWwgPSB7J3ZhbGlkJzpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6Jyd9fTtcblx0dm0udmFsaWRVc2VyUGFzc3dvcmQgPSB7J3ZhbGlkJzpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6Jyd9fTtcblx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0biA9IHsndXNhYmxlJzpmYWxzZSwgJ2NsYXNzJzonYnRuIGJ0bi13YXJuaW5nJ307XG5cdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzID0ge1xuXHRcdDA6eydjb25zdHJhaW50JzonSXMgYXQgbGVhc3QgMTYgY2hhcmFjdGVycyBsb25nJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX0sXG5cdFx0MTp7J2NvbnN0cmFpbnQnOidJcyBubyBsb25nZXIgdGhhbiAxMDAgY2hhcmFjdGVycycsICdzdHlsZSc6e2NvbG9yOidyZWQnfSwgJ21ldCc6ZmFsc2V9LFxuXHRcdDI6eydjb25zdHJhaW50JzonQ29udGFpbnMgYXQgbGVhc3Qgb25lIHJlcXVpcmVkIHN5bWJvbCAoXFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqKScsICdzdHlsZSc6e2NvbG9yOidyZWQnfSwgJ21ldCc6ZmFsc2V9LFxuXHRcdDM6eydjb25zdHJhaW50JzonQ29udGFpbnMgYXQgbGVhc3Qgb25lIG51bWJlcicsICdzdHlsZSc6e2NvbG9yOidyZWQnfSwgJ21ldCc6ZmFsc2V9LFxuXHRcdDQ6eydjb25zdHJhaW50JzonQ29udGFpbnMgYXQgbGVhc3Qgb25lIGxvd2VyY2FzZSBsZXR0ZXInLCAnc3R5bGUnOntjb2xvcjoncmVkJ30sICdtZXQnOmZhbHNlfSxcblx0XHQ1OnsnY29uc3RyYWludCc6J0NvbnRhaW5zIGF0IGxlYXN0IG9uZSB1cHBlcmNhc2UgbGV0dGVyJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX0sXG5cdFx0Njp7J2NvbnN0cmFpbnQnOlwiRG9lc24ndCBoYXZlIGFueSBpbGxlZ2FsIGNoYXJhY3RlcnNcIiwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX1cblx0fTtcblxuXHQvL3ZhciB0aGVUZXN0Qm94ID0gYW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCkuZmluZCgnI3Rlc3RCb3gnKTtcblxuXHQvL3RoZVRlc3RCb3guY2hlY2tWYWxpZGl0eSgpO1xuXHQvL3NldEN1c3RvbVZhbGlkaXR5KCd5b3UgbmVlZCBzb21ldGhpbmcgZWxzZScpO1xuXG5cdC8vbG9jYWwgbWV0aG9kc1xuXHRmdW5jdGlvbiB1dGY4X3RvX2I2NChzdHIpIHtcblx0XHRyZXR1cm4gYnRvYShzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gYjY0X3RvX3V0Zjgoc3RyKSB7XG4gICAgXHRyZXR1cm4gYXRvYihzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKSB7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KHVuaXhUaW1lKSk7XG5cdH1cblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH1cblxuXHQvL2RlZmluZSBjb250cm9sbGVyIG1ldGhvZHNcblx0dm0uZGlzcGxheVBhc3NSZXFzID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodm0ubmV3TmFtZSAmJiB2bS5uZXdFbWFpbCkge1xuXHRcdFx0dm0uc2hvd1JlcXVpcm5tZW50cyA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZtLnNob3dSZXF1aXJubWVudHMgPSBmYWxzZTtcblx0XHR9XG5cdH1cblxuXHR2bS5jaGVja05ld05hbWUgPSBmdW5jdGlvbigpIHtcblx0XHRcblx0XHRpZih2bS5uZXdOYW1lKSB7XG5cdFx0XHRpZih2bS5uZXdOYW1lLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0dm0udmFsaWROZXdOYW1lLnZhbGlkID0gdHJ1ZTtcblx0XHRcdFx0dm0udmFsaWROZXdOYW1lLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0udmFsaWROZXdOYW1lLnZhbGlkID0gZmFsc2U7XG5cdFx0XHRcdHZtLnZhbGlkTmV3TmFtZS5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dm0ub3BlbkNyZWF0ZVVzZXJCdXR0b24oKTtcblx0fVxuXG5cdHZtLmNoZWNrTmV3RW1haWwgPSBmdW5jdGlvbiAoKSB7XG5cdFx0aWYodm0ubmV3RW1haWwpIHtcblx0XHRcdC8vY2hlY2sgdmFsaWRpdHlcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSsoPzpcXC5bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKSpAKD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1xcLikrW2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1wiLCBcIlwiKTtcblxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZtLm5ld0VtYWlsKSkge1xuXHRcdFx0XHR2bS52YWxpZE5ld0VtYWlsLnZhbGlkID0gdHJ1ZTtcblx0XHRcdFx0dm0udmFsaWROZXdFbWFpbC5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLnZhbGlkTmV3RW1haWwudmFsaWQgPSBmYWxzZTtcblx0XHRcdFx0dm0udmFsaWROZXdFbWFpbC5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdFx0XHR9XHRcdFx0XG5cdFx0fVxuXHRcdFxuXHRcdHZtLm9wZW5DcmVhdGVVc2VyQnV0dG9uKCk7XG5cdH1cblxuXHR2bS5jaGVja1VzZXJFbWFpbCA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHZtLnVzZXJFbWFpbCkge1xuXHRcdFx0Ly9jaGVjayB2YWxpZGl0eVxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XCIsIFwiXCIpO1xuXG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3Qodm0udXNlckVtYWlsKSkge1xuXHRcdFx0XHR2bS52YWxpZFVzZXJFbWFpbC52YWxpZCA9IHRydWU7XG5cdFx0XHRcdHZtLnZhbGlkVXNlckVtYWlsLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0udmFsaWRVc2VyRW1haWwudmFsaWQgPSBmYWxzZTtcblx0XHRcdFx0dm0udmFsaWRVc2VyRW1haWwuc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHZtLm9wZW5Vc2VyTG9naW5CdG4oKTtcblx0fVxuXG5cdHZtLmNoZWNrTmV3UGFzc3dvcmRzID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9mb3IgZWFjaCBwYXNzd29yZCBkZWZpbmUgdGhlIHBhdHRlcm4gdGhhdCB0aGUgcGFzc3dvcmQgbXVzdCBtYXRjaFxuXHRcdHZhciBjb25zdHJhaW50cyA9IHtcblx0IFx0XHQwOiBbJycsICcgeW91ciBwYXNzd29yZCBuZWVkcyB0byBiZSAxNiBjaGFyYWN0ZXJzIG9yIGxvbmdlciddLFxuXHQgXHRcdDE6IFsnJywgJyB5b3VyIHBhc3N3b3JkIG5lZWRzIHRvIGJlIGxlc3MgdGhhbiAxMDAgY2hhcmFjdGVycyddLFxuXHQgXHRcdDI6IFsnW1xcIVxcQFxcI1xcJFxcJVxcXlxcJlxcKl0nLCBcIiBubyByZXF1aXJlZCBzeW1ib2xzIGZvdW5kXCJdLFxuXHQgXHRcdDM6IFsnWzAtOV0nLCBcIiBubyBudW1iZXJzIGZvdW5kXCJdLFxuXHQgXHRcdDQ6IFsnW2Etel0nLCBcIiBubyBsb3dlcmNhc2UgbGV0dGVycyBmb3VuZFwiXSxcblx0IFx0XHQ1OiBbJ1tBLVpdJywgXCIgbm8gdXBwZXJjYXNlIGxldHRlcnMgZm91bmRcIl0sXG5cdCBcdFx0NjogWydbXkEtejAtOVxcIVxcQFxcI1xcJFxcJVxcXlxcJlxcKl0nLCBcIiBpbGxlZ2FsIGNoYXJhY3RlcnMgZm91bmRcIl0sXG4gXHRcdH07XG4gXHRcdFxuIFx0XHQvL2NoZWNrIGZvciBsZW5ndGhcbiBcdFx0aWYodm0ubmV3UGFzc3dvcmQpIHtcbiBcdFx0XHRpZih2bS5uZXdQYXNzd29yZC5sZW5ndGggPiAxNSkgeyBcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzBdLnN0eWxlID0ge2NvbG9yOidncmVlbid9OyBcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzBdLm1ldCA9IHRydWU7IFxuIFx0XHRcdH0gZWxzZSB7XG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1swXS5zdHlsZSA9IHtjb2xvcjoncmVkJ307IFxuIFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMF0ubWV0ID0gZmFsc2U7XG4gXHRcdFx0fVxuIFx0XHRcdGlmKHZtLm5ld1Bhc3N3b3JkLmxlbmd0aCA8PSAxMDApIHsgXG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1sxXS5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTsgXG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1sxXS5tZXQgPSB0cnVlO1xuIFx0XHRcdH0gZWxzZSB7XG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1sxXS5zdHlsZSA9IHtjb2xvcjoncmVkJ307IFxuIFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMV0ubWV0ID0gZmFsc2U7XG4gXHRcdFx0fVxuXG4gXHRcdFx0Ly9jaGVjayBjb25zdHJhaW50cyAyLTVcbiBcdFx0XHRmb3IoaSA9IDI7IGkgPCA2OyBpKyspIHtcblx0IFx0XHRcdC8vY2hlY2sgZm9yIHJlcXVpcmVkIHN5bWJvbHMsIHVwcGVyY2FzZSwgbG9zZXJjYXNlLCBhbmQgY2hhcmFjdGVyc1xuXHQgXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKGNvbnN0cmFpbnRzW2ldWzBdLCBcIlwiKTtcdFxuXG5cdCBcdFx0XHQvL3Rlc3QgZWFjaCBjb25zdHJhdGludFxuXHQgXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZtLm5ld1Bhc3N3b3JkKSkge1xuXHQgXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1tpXS5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0IFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbaV0ubWV0ID0gdHJ1ZTtcblx0IFx0XHRcdH0gZWxzZSB7XG5cdCBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzW2ldLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0IFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbaV0ubWV0ID0gZmFsc2U7XG5cdCBcdFx0XHR9XG5cdCBcdFx0fVxuXG5cdCBcdFx0Ly9jaGVjayBpbGxlZ2FsIGNoYXJhY3RlcnNcblx0IFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoY29uc3RyYWludHNbNl1bMF0sIFwiXCIpO1xuXG5cdCBcdFx0Ly9ydW4gdGhlIGNoZWNrXG5cdCBcdFx0aWYoIWNvbnN0cmFpbnQudGVzdCh2bS5uZXdQYXNzd29yZCkpIHtcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzZdLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzZdLm1ldCA9IGZhbHNlO1xuXHQgXHRcdH0gZWxzZSB7XG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1s2XS5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzZdLm1ldCA9IHRydWU7XG5cdCBcdFx0fVxuXG5cdCBcdFx0Ly9pZiBhbGwgY29uc3RyYWlucyBtZXQsIHRocm93IHZhbGlkIHBhc3MgZmxhZ1xuXHQgXHRcdGlmKCB2bS5wYXNzd29yZFJlcXVpcm5tZW50c1swXS5tZXQgJiZcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzFdLm1ldCAmJlxuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMl0ubWV0ICYmXG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1szXS5tZXQgJiZcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzRdLm1ldCAmJlxuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNV0ubWV0ICYmXG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1s2XS5tZXQpIHtcblx0IFx0XHRcdHZtLnNlY3VyZVBhc3N3b3JkLnNlY3VyZSA9IHRydWVcblx0IFx0XHR9IGVsc2Uge1xuXHQgXHRcdFx0dm0uc2VjdXJlUGFzc3dvcmQuc2VjdXJlID0gZmFsc2U7XG5cdCBcdFx0fVxuXG5cdCBcdFx0aWYodm0uc2VjdXJlUGFzc3dvcmQuc2VjdXJlKSB7XG5cdCBcdFx0XHR2bS5zZWN1cmVQYXNzd29yZC5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0IFx0XHR9IGVsc2Uge1xuXHQgXHRcdFx0dm0uc2VjdXJlUGFzc3dvcmQuc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHQgXHRcdH1cbiBcdFx0fVxuIFx0XHRcbiBcdFx0dm0ub3BlbkNyZWF0ZVVzZXJCdXR0b24oKTtcblx0fVxuXG5cdHZtLmNoZWNrVXNlclBhc3N3b3JkcyA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHZtLnVzZXJQYXNzd29yZCkge1xuXHRcdFx0aWYodm0udXNlclBhc3N3b3JkLmxlbmd0aCA+IDE1KSB7XG5cdFx0XHRcdHZtLnZhbGlkVXNlclBhc3N3b3JkLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHRcdFx0XHR2bS52YWxpZFVzZXJQYXNzd29yZC52YWxpZCA9IHRydWU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS52YWxpZFVzZXJQYXNzd29yZC5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdFx0XHRcdHZtLnZhbGlkVXNlclBhc3N3b3JkLnZhbGlkID0gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHR9XG5cdFx0XG5cdFx0dm0ub3BlblVzZXJMb2dpbkJ0bigpO1xuXHR9XG5cblx0dm0ub3BlbkNyZWF0ZVVzZXJCdXR0b24gPSBmdW5jdGlvbigpIHtcblx0XHRpZih2bS52YWxpZE5ld05hbWUudmFsaWQgJiYgdm0udmFsaWROZXdFbWFpbC52YWxpZCAmJiB2bS5zZWN1cmVQYXNzd29yZC5zZWN1cmUpIHtcblx0XHRcdHZtLnVubG9ja0NyZWF0ZVVzZXJCdG4uY2xhc3MgPSAnYnRuIGJ0bi1zdWNjZXNzJztcblx0XHRcdHZtLnVubG9ja0NyZWF0ZVVzZXJCdG4udXNhYmxlID0gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dm0udW5sb2NrQ3JlYXRlVXNlckJ0bi5jbGFzcyA9ICdidG4gYnRuLXdhcm5pbmcnO1xuXHRcdFx0dm0udW5sb2NrQ3JlYXRlVXNlckJ0bi51c2FibGUgPSBmYWxzZTtcdFxuXHRcdH1cblxuXHR9XG5cblx0dm0ub3BlblVzZXJMb2dpbkJ0biA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHZtLnZhbGlkVXNlckVtYWlsLnZhbGlkICYmIHZtLnZhbGlkVXNlclBhc3N3b3JkLnZhbGlkKSB7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLmNsYXNzID0gJ2J0biBidG4tc3VjY2Vzcyc7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLnVzYWJsZSA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4uY2xhc3MgPSAnYnRuIGJ0bi13YXJuaW5nJztcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlID0gZmFsc2U7XHRcblx0XHR9XG5cdH1cblxuXHR2bS51cGRhdGUgPSBmdW5jdGlvbigpIHtcblx0XHQvL3NldCB2YWx1ZXNcblx0XHR2bS5uZXdOYW1lID0gJGRvY3VtZW50LmZpbmQoJyNuZXdOYW1lJylbMF0udmFsdWU7XG5cdFx0dm0ubmV3RW1haWwgPSAkZG9jdW1lbnQuZmluZCgnI25ld0VtYWlsJylbMF0udmFsdWU7XG5cdFx0dm0udXNlckVtYWlsID0gJGRvY3VtZW50LmZpbmQoJyN1c2VyRW1haWwnKVswXS52YWx1ZTtcblx0XHRcblx0XHR2bS5jaGVja05ld05hbWUoKTtcblx0XHR2bS5jaGVja05ld0VtYWlsKCk7XG5cdFx0dm0uY2hlY2tVc2VyRW1haWwoKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHJlZGlyZWN0KHBhdGgsIHVzZXJEYXRhKSB7XG5cdFx0dmFyIGZ1bGxQYXRoID0gcGF0aCArICcvJyArIGN1cnJlbnRVc2VyRGF0YS51aWQgKyAnLycgKyBjdXJyZW50VXNlckRhdGEudG9rZW47XG5cdFx0Ly9yZWRpcmVjdFxuXHRcdCRsb2cuaW5mbygncmVkaXJlY3RpbmcgdG86ICcgKyBmdWxsUGF0aCk7XG5cdFx0JGxvY2F0aW9uLnBhdGgoZnVsbFBhdGgpO1xuXHRcdCRzY29wZS4kYXBwbHkoKTtcblx0fVxuXG5cdHZtLmNyZWF0ZU5ld1VzZXIgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9nLmluZm8oJ0NyZWF0aW5nIGEgbmV3IHVzZXIgYWNjb3VudCBub3chJyk7XG5cblx0XHRpZih2bS51bmxvY2tDcmVhdGVVc2VyQnRuLnVzYWJsZSkge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVcblx0XHRcdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXG5cdFx0XHRyZWYuY3JlYXRlVXNlcih7XG5cdFx0XHRcdGVtYWlsOnZtLm5ld0VtYWlsLFxuXHRcdFx0XHRwYXNzd29yZDp2bS5uZXdQYXNzd29yZFxuXHRcdFx0fSxmdW5jdGlvbihlcnJvciwgdXNlckRhdGEpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ0Vycm9yIGNyZWF0aW5nIHVzZXI6ICcgKyBlcnJvcik7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly9sb2cgcmVzdWx0c1xuXHRcdFx0XHRcdCRsb2cuaW5mbyh1c2VyRGF0YSk7XG5cblx0XHRcdFx0XHQvL3NhdmUgYWxsIHRoZSBkYXRhXG5cdFx0XHRcdFx0Y3VycmVudFVzZXJEYXRhID0gdXNlckRhdGE7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly9nZW5lcmF0ZSB0aGUgdXNlciByZWNvcmRcblx0XHRcdFx0XHR2YXIgdXNlcnNSZWYgPSByZWYuY2hpbGQoJ1VzZXJzLycgKyB1c2VyRGF0YS51aWQpO1xuXHRcdFx0XHRcdHZhciBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XG5cblx0XHRcdFx0XHQvL3dyaXRlIG5ldyB1c2VyIHRvIHRoZSBkYXRhYmFzZSB3aXRoIGJpbyBpbmZvXG5cdFx0XHRcdFx0dXNlcnNSZWYuc2V0KHsgXG5cdFx0XHRcdFx0XHQnYmlvJzoge1xuXHRcdFx0XHRcdFx0XHQnbmFtZSc6IHZtLm5ld05hbWUsXG5cdFx0XHRcdFx0XHRcdCdlbWFpbCc6IHZtLm5ld0VtYWlsXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0J2V2ZW50cyc6IHtcblx0XHRcdFx0XHRcdFx0J3BlbmRpbmcnOiB7XG5cdFx0XHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdCdob3N0aW5nJzoge1xuXHRcdFx0XHRcdFx0XHRcdCd1cGRhdGVkJzogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHQnYXR0ZW5kaW5nJzoge1xuXHRcdFx0XHRcdFx0XHRcdCd1cGRhdGVkJzogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHQnY29tcGxldGVkJzoge1xuXHRcdFx0XHRcdFx0XHRcdCd1cGRhdGVkJzogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0XHRcdGlmKGVycm9yKSB7XG5cdFx0XHRcdFx0XHRcdCRsb2cuaW5mbygnRGF0YSBjb3VsZCBub3QgYmUgc2F2ZWQ6ICcgKyBlcnJvcik7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQkbG9nLmluZm8oJ0RhdGEgc2F2ZWQgc3VjY2Vzc2Z1bGx5LicpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdC8vYWRkIHRoaXMgdXNlciB0byB0aGUgbGlzdCBvZiByZWdpc3RlcmVkIHVzZXJzXG5cdFx0XHRcdFx0cmVmLmNoaWxkKCdVaWRzJykuY2hpbGQodXRmOF90b19iNjQodm0ubmV3RW1haWwpKS5zZXQoY3VycmVudFVzZXJEYXRhLnVpZCwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oXCJEYXRhIGNvdWxkIG5vdCBiZSBzYXZlZC4gXCIgKyBlcnJvcik7XG5cdFx0XHRcdFx0XHRlbHNlICRsb2cuaW5mbyhcInVpZCBjcmVhdGVkIHN1Y2Vzc2Z1bGx5LlwiKTtcblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdC8vcmVkaXJlY3QgdG8gVXNlckluZm9ybWF0aW9uXG5cdFx0XHRcdFx0cmVkaXJlY3QoJy91c2VySW5mb3JtYXRpb24nLCBjdXJyZW50VXNlckRhdGEpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdH1cblx0fVxuXG5cdHZtLmxvZ2luUmVnaXN0ZXJlZFVzZXIgPSBmdW5jdGlvbigpIHtcblxuXHRcdGlmKHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlKSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZVxuXHRcdFx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cblx0XHRcdC8vYXV0aGVudGljYXRlIHRoZSB1c2VyXG5cdFx0XHRyZWYuYXV0aFdpdGhQYXNzd29yZCh7XG5cdFx0XHRcdGVtYWlsOiB2bS51c2VyRW1haWwsXG5cdFx0XHRcdHBhc3N3b3JkOiB2bS51c2VyUGFzc3dvcmRcblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yLCBhdXRoRGF0YSkge1xuXHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnRXJyb3IgTG9nZ2luZyBJbjogJyArIGVycm9yKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ0xvZ2dlZCBJbiBzdWNjZXNzZnVsbHk6ICcgKyBhdXRoRGF0YS51aWQpO1xuXHRcdFx0XHRcdCRsb2cuaW5mbyhhdXRoRGF0YSk7XG5cdFx0XHRcdFx0Ly9zYXZlIGFsbCB0aGUgZGF0YVxuXHRcdFx0XHRcdGN1cnJlbnRVc2VyRGF0YSA9IGF1dGhEYXRhO1xuXG5cdFx0XHRcdFx0Ly9sb2FkIHVzZXIgYmlvXG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly9sb2FkIHVzZXIgZXZlbnRzXG5cblx0XHRcdFx0XHQvL3JlZGlyZWN0XG5cdFx0XHRcdFx0cmVkaXJlY3QoJy91c2VySW5mb3JtYXRpb24nLCBjdXJyZW50VXNlckRhdGEpO1xuXHRcdFx0XHRcdCRzY29wZS4kYXBwbHkoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHR9XG5cblx0fVxuXG5cdHZtLmFsZXJ0TWUgPSBmdW5jdGlvbigpIHtcblx0XHRhbGVydCgndGhpcyBpcyB3b3JraW5nISBhbiBhbGVydCEnKTtcblx0fVxuXG5cdHZtLm9uUmVzaXplRnVuY3Rpb24gPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgaW5wdXRUZXh0ID0gYW5ndWxhci5lbGVtZW50KCcuaW5wdXRUZXh0Jyk7XG5cdFx0aWYoJHdpbmRvdy5vdXRlcldpZHRoID4gJHdpbmRvdy5vdXRlckhlaWdodCkge1xuXHRcdFx0aW5wdXRUZXh0LmNzcygnZm9udC1zaXplJywgJzJlbScpO1xuXHRcdFx0JGxvZy5pbmZvKCdtYWtpbmcgYmlnZ2VyJyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlucHV0VGV4dC5jc3MoJ2ZvbnQtc2l6ZScsICcxLjJlbScpO1xuXHRcdH1cblx0fVxuXG5cdC8vZXZlbnQgbGlzdGVuZXJzXG5cdGlmICgnYWRkRXZlbnRMaXN0ZW5lcicgaW4gJGRvY3VtZW50KSB7XG5cdCAgICAkZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkge1xuXHQgICAgXHQkbG9nLmluZm8oJ2FkZGluZyBGYXN0Q2xpY2snKTtcblx0ICAgICAgICBGYXN0Q2xpY2suYXR0YWNoKCRkb2N1bWVudC5ib2R5KTtcblx0ICAgIH0sIGZhbHNlKTtcblx0fVxuXG5cdGFuZ3VsYXIuZWxlbWVudCgkd2luZG93KS5iaW5kKCdyZXNpemUnLCBmdW5jdGlvbigpIHtcblx0XHR2bS5vblJlc2l6ZUZ1bmN0aW9uKCk7XG5cdFx0Ly8kc2NvcGUuJGFwcGx5KCk7XG5cdH0pO1xuXG5cdGFuZ3VsYXIuZWxlbWVudCgkZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXHRcdGlmKCR3aW5kb3cub3V0ZXJXaWR0aCA8IDYwMCkge1xuXHRcdFx0dm0ub25SZXNpemVGdW5jdGlvbigpO1xuXHRcdFx0Ly8kc2NvcGUuJGFwcGx5KCk7XG5cdFx0fVxuXHR9KVxuXG5cblx0IHZtLm1hc3RlciA9IHt9O1xuXG5cdCAgdm0udXBkYXRlID0gZnVuY3Rpb24odXNlcikge1xuXHQgICAgdm0ubWFzdGVyID0gYW5ndWxhci5jb3B5KHVzZXIpO1xuXHQgIH07XG5cblx0ICB2bS5yZXNldCA9IGZ1bmN0aW9uKGZvcm0pIHtcblx0ICAgIGlmIChmb3JtKSB7XG5cdCAgICAgIGZvcm0uJHNldFByaXN0aW5lKCk7XG5cdCAgICAgIGZvcm0uJHNldFVudG91Y2hlZCgpO1xuXHQgICAgfVxuXHQgICAgdm0udXNlciA9IGFuZ3VsYXIuY29weSh2bS5tYXN0ZXIpO1xuXHQgIH07XG5cblx0ICB2bS5yZXNldCgpO1xufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignTWFpbkNvbnRyb2xsZXInLCBNYWluQ29udHJvbGxlcik7XG5cbk1haW5Db250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJGxvY2F0aW9uJywgJyRkb2N1bWVudCcsICckd2luZG93J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gTWFpbkNvbnRyb2xsZXIoJGxvZywgJGxvY2F0aW9uLCAkZG9jdW1lbnQsICR3aW5kb3cpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTsgXG5cblx0ZnVuY3Rpb24gcmVzaXplQkdJbWFnZSgpIHtcblx0XHR2YXIgYm9keSA9IGFuZ3VsYXIuZWxlbWVudCgkZG9jdW1lbnQpO1xuXHRcdCRkb2N1bWVudC5jc3MoJ2hpZ2h0JywgJHdpbmRvdy5vdXRlckhlaWdodClcblx0fVxuXG5cdHZtLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xuXHRcdGFsZXJ0KCdsb2dnaW5nIHlvdSBvdXQhJyk7XG5cdFx0cmVmLnVuYXV0aCgpO1xuXHRcdCRsb2NhdGlvbi5wYXRoKCcvJyk7XG5cdH07XG5cblx0YW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cdFx0Ly9GYXN0Q2xpY2suYXR0YWNoKCRkb2N1bWVudC5ib2R5KTtcblx0XHRyZXNpemVCR0ltYWdlKCk7XG5cdH0pXG59XG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdOZXdVc2VyU2lnblVwQ29udHJvbGxlcicsIE5ld1VzZXJTaWduVXBDb250cm9sbGVyKTtcblxuTmV3VXNlclNpZ25VcENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnLCAndmFsaWRhdGlvbicsICdiYWNrZW5kU2VydmljZXMnLCAndHJhZmZpY1ZhbGV0JywgJ3VzZXJEYXRhJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gTmV3VXNlclNpZ25VcENvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCB2YWxpZGF0aW9uLCBiYWNrZW5kU2VydmljZXMsIHRyYWZmaWNWYWxldCwgdXNlckRhdGEpIHtcblx0dmFyIHZtID0gdGhpcztcblxuXHQvL2RlZmluZSB2bSBpbnB1dCB2YXJpYWJsZXNcblx0dm0uaW5wdXRzID0ge1xuXHRcdG5ld05hbWU6ICcnLFxuXHRcdG5ld0VtYWlsOiAnJyxcblx0XHRuZXdQYXNzd29yZDogJycsXG5cdFx0cmVxdWlyZWRGaWVsZHNEZWZpbmVkOiBmYWxzZVxuXHR9XG5cdHZtLmVycm9ycyA9IHtcblx0XHRuYW1lOiAnJyxcblx0XHRlbWFpbDogJycsXG5cdFx0cGFzc3dvcmQ6IGZhbHNlLFxuXHRcdHBhc3Nlc0FsbFRlc3RzOiBmYWxzZVxuXHR9XG5cdHZtLnBhc3NSZXFzID0ge1xuXHRcdDA6IHsgaWQ6JycsIHJlcTonSXMgYXQgbGVhc3QgMTYgY2hhcmFjdGVycyBsb25nJywgZnVsZmlsbGVkOmZhbHNlLCAnc3R5bGUnOntjb2xvcjoncmVkJ319LFxuXHRcdDE6IHsgaWQ6JycsIHJlcTonSXMgbm8gbG9uZ2VyIHRoYW4gMTAwIGNoYXJhY3RlcnMnLCBmdWxmaWxsZWQ6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOidyZWQnfSB9LFxuXHRcdDI6IHsgaWQ6JycsIHJlcTonQ29udGFpbnMgYXQgbGVhc3Qgb25lIGxvd2VyY2FzZSBsZXR0ZXInLCBmdWxmaWxsZWQ6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOidyZWQnfSB9LFxuXHRcdDM6IHsgaWQ6JycsIHJlcTonQ29udGFpbnMgYXQgbGVhc3Qgb25lIHVwcGVyY2FzZSBsZXR0ZXInLCBmdWxmaWxsZWQ6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOidyZWQnfSB9LFxuXHRcdDQ6IHsgaWQ6JycsIHJlcTonQ29udGFpbnMgYXQgbGVhc3Qgb25lIG51bWJlcicsIGZ1bGZpbGxlZDpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9IH0sXG5cdFx0NTogeyBpZDonJywgcmVxOidDb250YWlucyBhdCBsZWFzdCBvbmUgcmVxdWlyZWQgc3ltYm9sIChcXCFcXEBcXCNcXCRcXCVcXF5cXCZcXCopJywgZnVsZmlsbGVkOmZhbHNlLCAnc3R5bGUnOntjb2xvcjoncmVkJ30gfSxcblx0XHQ2OiB7IGlkOicnLCByZXE6XCJEb2Vzbid0IGhhdmUgYW55IGlsbGVnYWwgY2hhcmFjdGVyc1wiLCBmdWxmaWxsZWQ6dHJ1ZSwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9IH1cblx0fVxuXHR2bS5zaG93UmVxc0JveCA9IGZhbHNlO1xuXG5cdC8vZGVmaW5lIHJlcXVpcmVkIGZpZWxkIGNvbnN0cmFpbnRzXG5cdHZhciBzaWdudXBWYWxpZGF0aW9uID0gdmFsaWRhdGlvbjtcblxuXHQvL2RlZmluZSBjb250cm9sbGVyIG1ldGhvZHNcblx0ZnVuY3Rpb24gdmVyaWZ5UmVxdWlybm1lbnRzKCkge1xuXHRcdGlmKHZtLmVycm9ycy5uYW1lID09ICcnICYmIHZtLmVycm9ycy5lbWFpbCA9PSAnJyAmJiAhdm0uZXJyb3JzLnBhc3N3b3JkKSB2bS5lcnJvcnMucGFzc2VzQWxsVGVzdHMgPSB0cnVlO1xuXHRcdGVsc2Ugdm0uZXJyb3JzLnBhc3Nlc0FsbFRlc3RzID0gZmFsc2U7XG5cblx0XHRpZiggYW5ndWxhci5pc0RlZmluZWQodm0uaW5wdXRzLm5ld05hbWUpICYmIHZtLmlucHV0cy5uZXdOYW1lICE9PSAnJyAmJlxuXHRcdFx0YW5ndWxhci5pc0RlZmluZWQodm0uaW5wdXRzLm5ld0VtYWlsKSAmJiB2bS5pbnB1dHMubmV3RW1haWwgIT09ICcnICYmXG5cdFx0XHRhbmd1bGFyLmlzRGVmaW5lZCh2bS5pbnB1dHMubmV3UGFzc3dvcmQpICYmIHZtLmlucHV0cy5uZXdQYXNzd29yZCAhPT0gJycpIFxuXHRcdFx0XHR2bS5pbnB1dHMucmVxdWlyZWRGaWVsZHNEZWZpbmVkID0gdHJ1ZTtcblx0XHRlbHNlIHZtLmlucHV0cy5yZXF1aXJlZEZpZWxkc0RlZmluZWQgPSBmYWxzZTtcblx0fVxuXG5cdC8vZGVmaW5lIHZtIGFjY2Vzc2libGUgbWV0aG9kc1xuXHR2bS5jaGVja05ld05hbWUgPSBmdW5jdGlvbigpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlXG5cdFx0dmFyIGVycm9ycyA9IFtdO1xuXHRcdHZhciBoYXNOYW1lID0gc2lnbnVwVmFsaWRhdGlvbi5yZXF1aXJlZCh2bS5pbnB1dHMubmV3TmFtZSk7XG5cdFx0dmFyIGxvbmdFbm91Z2ggPSBzaWdudXBWYWxpZGF0aW9uLm1pbk5hbWVMZW5ndGgodm0uaW5wdXRzLm5ld05hbWUpXG5cdFx0XG5cdFx0Ly9sb2cgZXJyb3JzXG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoaGFzTmFtZSkpIGVycm9ycy5wdXNoKGhhc05hbWUpO1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGxvbmdFbm91Z2gpKSBlcnJvcnMucHVzaChsb25nRW5vdWdoKTtcblxuXHRcdC8vdXBkYXRlIHRoZSBlcnJvcnMgbW9kZWxcblx0XHRpZihlcnJvcnMubGVuZ3RoID4gMCkgdm0uZXJyb3JzLm5hbWUgPSBlcnJvcnMuam9pbignLCAnKTtcblx0XHRlbHNlIHZtLmVycm9ycy5uYW1lID0gJyc7XG5cblx0XHR2ZXJpZnlSZXF1aXJubWVudHMoKTtcblx0fVxuXG5cdHZtLmNoZWNrTmV3RW1haWwgPSBmdW5jdGlvbigpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlXG5cdFx0dmFyIGVycm9ycyA9IFtdO1xuXHRcdHZhciBoYXNFbWFpbCA9IHNpZ251cFZhbGlkYXRpb24ucmVxdWlyZWQodm0uaW5wdXRzLm5ld0VtYWlsKTtcblx0XHR2YXIgaXNBbkVtYWlsID0gc2lnbnVwVmFsaWRhdGlvbi5lbWFpbCh2bS5pbnB1dHMubmV3RW1haWwpO1xuXHRcdFxuXHRcdC8vbG9nIGVycm9yc1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGhhc0VtYWlsKSkgZXJyb3JzLnB1c2goaGFzRW1haWwpO1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGlzQW5FbWFpbCkpIGVycm9ycy5wdXNoKGlzQW5FbWFpbCk7XG5cblx0XHQvL3VwZGF0ZSB0aGUgZXJyb3JzIG1vZGVsXG5cdFx0aWYoZXJyb3JzLmxlbmd0aCA+IDApIHZtLmVycm9ycy5lbWFpbCA9IGVycm9ycy5qb2luKCcsICcpO1xuXHRcdGVsc2Ugdm0uZXJyb3JzLmVtYWlsID0gJyc7XG5cblx0XHR2ZXJpZnlSZXF1aXJubWVudHMoKTtcblx0fVxuXG5cdHZtLmNoZWNrTmV3UGFzc3dvcmQgPSBmdW5jdGlvbigpIHtcblx0XHQvL2ZsaXAgb24gcmVxcyBib3hcblx0XHR2bS5zaG93UmVxc0JveCA9IHRydWU7XG5cblx0XHQvL2xvY2FsIHZhcmlhYmxlXG5cdFx0dmFyIGVycm9ycyA9IFtdO1xuXHRcdHZhciBoYXNQYXNzd29yZCA9IHNpZ251cFZhbGlkYXRpb24ucmVxdWlyZWQodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKTtcblx0XHR2YXIgc3BlY2lmaWNSZXFzID0gW1xuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5taW5QYXNzTGVuZ3RoKHZtLmlucHV0cy5uZXdQYXNzd29yZCksXG5cdFx0XHRzaWdudXBWYWxpZGF0aW9uLm1heFBhc3NMZW5ndGgodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKSxcblx0XHRcdHNpZ251cFZhbGlkYXRpb24uYXRMZWFzdE9uZUxvd2VyY2FzZSh2bS5pbnB1dHMubmV3UGFzc3dvcmQpLFxuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5hdExlYXN0T25lVXBwZXJjYXNlKHZtLmlucHV0cy5uZXdQYXNzd29yZCksXG5cdFx0XHRzaWdudXBWYWxpZGF0aW9uLmF0TGVhc3RPbmVOdW1iZXIodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKSxcblx0XHRcdHNpZ251cFZhbGlkYXRpb24uYXRMZWFzdE9uZVN5bWJvbCh2bS5pbnB1dHMubmV3UGFzc3dvcmQpLFxuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5pbGxlZ2FsQ2hhcmFjdGVyKHZtLmlucHV0cy5uZXdQYXNzd29yZClcblx0XHRdO1xuXG5cdFx0Ly9sb2cgZXJyb3JzXG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoaGFzUGFzc3dvcmQpKSBlcnJvcnMucHVzaChoYXNQYXNzd29yZCk7XG5cblx0XHQvL3VwZGF0ZSB0aGUgZXJyb3JzIG1vZGVsXG5cdFx0aWYoZXJyb3JzLmxlbmd0aCA+IDApIHZtLmVycm9ycy5wYXNzd29yZCA9IGVycm9ycy5qb2luKCcsICcpO1xuXHRcdGVsc2Ugdm0uZXJyb3JzLmVtYWlsID0gJyc7XG5cblx0XHQvL3VwZGF0ZSByZXFzIG1vZGVsXG5cdFx0dmFyIGFueUVycm9ycyA9IGZhbHNlO1xuXHRcdGZvcihpPTA7IGk8NzsgaSsrKSB7XG5cdFx0XHRpZihzcGVjaWZpY1JlcXNbaV0pIHtcblx0XHRcdFx0dm0ucGFzc1JlcXNbaV0uZnVsZmlsbGVkID0gdHJ1ZTtcblx0XHRcdFx0dm0ucGFzc1JlcXNbaV0uc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS5wYXNzUmVxc1tpXS5mdWxmaWxsZWQgPSBmYWxzZTtcblx0XHRcdFx0dm0ucGFzc1JlcXNbaV0uc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHRcdFx0XHRhbnlFcnJvcnMgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHZtLmVycm9ycy5wYXNzd29yZCA9IGFueUVycm9ycztcblx0XHR2ZXJpZnlSZXF1aXJubWVudHMoKTtcblx0fVxuXG5cdHZtLmV4aXRQYXNzd29yZCA9IGZ1bmN0aW9uKCkge1xuXHRcdHZtLmNoZWNrTmV3UGFzc3dvcmQoKTtcblx0XHR2bS5zaG93UmVxc0JveCA9IGZhbHNlO1xuXHR9XG5cblx0dm0uY3JlYXRlTmV3VXNlciA9IGZ1bmN0aW9uICgpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIG5ld1VzZXJTaGVycGEgPSB0cmFmZmljVmFsZXQ7XG5cblx0XHQvL2NvbmZpcm0gYWxsIGZpZWxkcyBhcmUgdmFsaWRcblx0XHRpZih2bS5lcnJvcnMucGFzc2VzQWxsVGVzdHMgJiYgdm0uaW5wdXRzLnJlcXVpcmVkRmllbGRzRGVmaW5lZCkge1xuXHRcdFx0XG5cdFx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgY3JlYXRlTmV3VXNlciA9IGJhY2tlbmRTZXJ2aWNlcztcblx0XHRcdHZhciBuZXdVc2VyRGF0YSA9IHVzZXJEYXRhO1xuXHRcdFx0dmFyIHRoaXNVSUQ7XG5cblx0XHRcdC8vY3JlYXRlIHRoZSBuZXcgdXNlciBpbiB0aGUgZGF0YWJhc2Vcblx0XHRcdGNyZWF0ZU5ld1VzZXIuY3JlYXRlTmV3VXNlcih2bS5pbnB1dHMubmV3RW1haWwsIHZtLmlucHV0cy5uZXdQYXNzd29yZClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKGRiVXNlckRhdGEpIHtcblx0XHRcdFx0XG5cdFx0XHRcdC8vbWFpbnRhaW4gbG9jYWwgdmFsdWVzIHRvIHNwZWVkIHVwIHVzZXIgZXhwZXJpZW5jZVxuXHRcdFx0XHRuZXdVc2VyRGF0YS5sb2FkUHJpbWFyaWVzKHZtLmlucHV0cy5uZXdFbWFpbCwgdm0uaW5wdXRzLm5ld05hbWUsIGRiVXNlckRhdGEudWlkKTtcblxuXHRcdFx0XHQvL2NyZWF0ZSBhIHVzZXIgcHJvZmlsZSBpbiB0aGUgZGF0YWJhc2Vcblx0XHRcdFx0Y3JlYXRlTmV3VXNlci5hZGROZXdVc2VyVG9EYXRhYmFzZShkYlVzZXJEYXRhLnVpZCwgdm0uaW5wdXRzLm5ld05hbWUsIHZtLmlucHV0cy5uZXdFbWFpbClcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24obWVzc2FnZSkge1xuXG5cdFx0XHRcdFx0JGxvZy5pbmZvKG1lc3NhZ2UpO1xuXG5cdFx0XHRcdFx0Ly9hZGQgdGhpcyB1c2VyIHRvIHRoZSBsaXN0IG9mIHJlZ2lzdGVyZWQgdXNlcnNcblx0XHRcdFx0XHRjcmVhdGVOZXdVc2VyLmFkZE5ld1VzZXJUb1JlZ1VzZXJzTGlzdChkYlVzZXJEYXRhLnVpZCwgdm0uaW5wdXRzLm5ld0VtYWlsKVxuXHRcdFx0XHRcdC50aGVuKGZ1bmN0aW9uKG1lc3NhZ2UpIHtcblxuXHRcdFx0XHRcdFx0Ly9yZWRpcmVjdCB1c2luZyB0aGUgdWlkXG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdC8vcmVkaXJlY3QgdG8gdGhlIG5leHQgcGFnZSBcblx0XHRcdFx0XHRcdG5ld1VzZXJTaGVycGEucmVkaXJlY3RUbygnL3VzZXJJbmZvcm1hdGlvbicsIGRiVXNlckRhdGEudWlkKTtcblx0XHRcdFx0XHRcdCBcblx0XHRcdFx0XHRcdCRsb2cuaW5mbyhtZXNzYWdlKTsgXG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyAkbG9nLmluZm8obWVzc2FnZSk7IH0pXG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5jYXRjaChmdW5jdGlvbihtZXNzYWdlKSB7ICRsb2cuaW5mbyhtZXNzYWdlKTsgfSlcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyAkbG9nLmluZm8obWVzc2FnZSk7IH0pXG5cdFx0XHRcblx0XHR9XG5cblx0fVxuXHRcblx0Ly9ydW4gdGltZSBhY3Rpb25zXG5cbn1cblxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignUmVnVXNlckxvZ2luQ29udHJvbGxlcicsIFJlZ1VzZXJMb2dpbkNvbnRyb2xsZXIpO1xuXG5SZWdVc2VyTG9naW5Db250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJGRvY3VtZW50JywgJ2JhY2tlbmRTZXJ2aWNlcycsICd0cmFmZmljVmFsZXQnLCAndXNlckRhdGEnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBSZWdVc2VyTG9naW5Db250cm9sbGVyKCRsb2csICRkb2N1bWVudCwgYmFja2VuZFNlcnZpY2VzLCB0cmFmZmljVmFsZXQsIHVzZXJEYXRhKSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cblx0Ly9kZWZpbmUgdm0gaW5wdXQgdmFyaWFibGVzXG5cdHZtLmlucHV0cyA9IHtcblx0XHRlbWFpbDogJycsXG5cdFx0cGFzc3dvcmQ6ICcnLFxuXHRcdHJlcXVpcmVkRmllbGRzRGVmaW5lZDogZmFsc2Vcblx0fVxuXHR2bS5lcnJvcnMgPSB7XG5cdFx0bWVzc2FnZTogJycsXG5cdFx0cGFzc2VzQWxsVGVzdHM6IHRydWVcblx0fVxuXHR2bS51bmNsb2NrVXNlckxvZ2luQnRuID0ge1xuXHRcdCd1c2FibGUnOmZhbHNlLCBcblx0XHQnY2xhc3MnOididG4gYnRuLXdhcm5pbmcnLFxuXHRcdG1lc3NhZ2U6ICdOZWVkIEVtYWlsICYgUGFzcydcblx0fVxuXG5cdC8vbWV0aG9kc1xuXHRmdW5jdGlvbiBvcGVuVXNlckxvZ2luQnRuKCkge1xuXHRcdC8vY2hlY2sgdGhhdCB0aGVyZSBpcyBhbiBlbWFpbCBhbmQgdGhlcmUgaXMgYSBwYXNzd29yZFxuXHRcdGlmKFx0YW5ndWxhci5pc0RlZmluZWQodm0uaW5wdXRzLmVtYWlsKSAmJiB2bS5pbnB1dHMuZW1haWwgIT09ICcnICYmXG5cdFx0XHRhbmd1bGFyLmlzRGVmaW5lZCh2bS5pbnB1dHMucGFzc3dvcmQpICYmIHZtLmlucHV0cy5wYXNzd29yZCAhPT0gJycpIFxuXHRcdHtcblx0XHRcdHZtLmlucHV0cy5yZXF1aXJlZEZpZWxkc0RlZmluZWQgPSB0cnVlO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi5jbGFzcyA9ICdidG4gYnRuLXN1Y2Nlc3MnO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi5tZXNzYWdlID0gJ0xvZ2luJztcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlID0gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dm0uaW5wdXRzLnJlcXVpcmVkRmllbGRzRGVmaW5lZCA9IGZhbHNlO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi5jbGFzcyA9ICdidG4gYnRuLXdhcm5pbmcnO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi5tZXNzYWdlID0gJ05lZWQgRW1haWwgJiBQYXNzJztcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlID0gZmFsc2U7XG5cdFx0fVxuXG5cdH1cblxuXHQvL3ZpZXcgbW9kZWwgbWV0aG9kc1xuXHR2bS51cGRhdGUgPSBmdW5jdGlvbigpIHtcblx0XHQvL3NldCB2YWx1ZXNcblx0XHR2bS5pbnB1dHMuZW1haWwgPSAkZG9jdW1lbnQuZmluZCgnI3VzZXJFbWFpbCcpWzBdLnZhbHVlO1xuXHRcdHZtLmlucHV0cy5wYXNzd29yZCA9ICRkb2N1bWVudC5maW5kKCcjdXNlclBhc3N3b3JkJylbMF0udmFsdWU7XG5cdFx0XG5cdFx0b3BlblVzZXJMb2dpbkJ0bigpO1xuXHR9XG5cblx0dm0ubG9naW5SZWdpc3RlcmVkVXNlciA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgcmVnaXN0ZXJlZFVzZXJTaGVycGEgPSB0cmFmZmljVmFsZXQ7XG5cblx0XHQvL2NvbmZpcm0gYWxsIGZpZWxkcyBhcmUgdmFsaWRcblx0XHRpZih0cnVlKSB7XG5cdFx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgZGF0YWJhc2UgPSBiYWNrZW5kU2VydmljZXM7XG5cdFx0XHR2YXIgcmVnaXN0ZXJlZFVzZXJEYXRhID0gdXNlckRhdGE7XG5cblx0XHRcdC8vdmVyaWZ5IHVzZXJzIGNyZWRlbnRpYWxzXG5cdFx0XHRkYXRhYmFzZS5Mb2dpblJlZ2lzdGVyZWRVc2VyKHZtLmlucHV0cy5lbWFpbCwgdm0uaW5wdXRzLnBhc3N3b3JkKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24odXNlckNyZWRlbnRpYWxzKSB7XG5cdFx0XHRcdC8vaWYgbm8gdHJvdWJsZSBsb2dnaW5nIGluIHVwZGF0ZSBlcnJvciBvYmplY3Rcblx0XHRcdFx0dm0uZXJyb3JzLnBhc3Nlc0FsbFRlc3RzID0gdHJ1ZTtcblxuXHRcdFx0XHQvL2FkZCBwcmltYXJ5IGluZm9ybWF0aW9uIHRvIGxvY2FsIG1vZGVsXG5cdFx0XHRcdHJlZ2lzdGVyZWRVc2VyRGF0YS5zZXRQcmltYXJpZXNMb2NhbGx5KHZtLmlucHV0cy5lbWFpbCwgdm0uaW5wdXRzLm5hbWUsIHVzZXJDcmVkZW50aWFscy51aWQpO1xuXG5cdFx0XHR9KVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCRsb2cuaW5mbyhcInVpZCBpcyBcIiArIHJlZ2lzdGVyZWRVc2VyRGF0YS5nZXRVSURMb2NhbGx5KCkpO1xuXG5cdFx0XHRcdGRhdGFiYXNlLmdldFVzZXJCaW8ocmVnaXN0ZXJlZFVzZXJEYXRhLmdldFVJRExvY2FsbHkoKSlcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24odXNlckJpbykge1xuXHRcdFx0XHRcdC8vdXBkYXRlIHVzZXJEYXRhIG1vZGVsIHdpdGggdXNlckJpb1xuXHRcdFx0XHRcdHJlZ2lzdGVyZWRVc2VyRGF0YS51cGRhdGVCaW9Mb2NhbGx5KHVzZXJCaW8pO1xuXG5cdFx0XHRcdFx0Ly9sb2FkIHVzZXIgZXZlbnRzXG5cdFx0XHRcdFx0ZGF0YWJhc2UuZ2V0VXNlckV2ZW50cyhyZWdpc3RlcmVkVXNlckRhdGEuZ2V0VUlETG9jYWxseSgpKVxuXHRcdFx0XHRcdC50aGVuKGZ1bmN0aW9uKGFsbEV2ZW50c0ZvclRoaXNVc2VyKSB7XG5cdFx0XHRcdFx0XHQvL3VwZGF0ZSB1c2VyRGF0YSBtb2RlbCB3aXRoIHVzZXJFdmVudHNcblx0XHRcdFx0XHRcdHJlZ2lzdGVyZWRVc2VyRGF0YS51cGRhdGVBbGxVc2VyRXZlbnRzTG9jYWxseShhbGxFdmVudHNGb3JUaGlzVXNlcik7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyAkbG9nLmluZm8obWVzc2FnZSk7IH0pXG5cblx0XHRcdFx0fSlcblx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKG1lc3NhZ2UpIHsgJGxvZy5pbmZvKG1lc3NhZ2UpOyB9KVxuXG5cdFx0XHRcdC8vcmVkaXJlY3QgdG8gdGhlIG5leHQgcGFnZSBcblx0XHRcdFx0cmVnaXN0ZXJlZFVzZXJTaGVycGEucmVkaXJlY3RUbygnL3VzZXJJbmZvcm1hdGlvbicsIHJlZ2lzdGVyZWRVc2VyRGF0YS5nZXRVSURMb2NhbGx5KCkpO1xuXG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKG1lc3NhZ2UpIHsgXG5cdFx0XHRcdC8vaWYgdGhlcmUgd2FzIGFuIGVycm9yIGxvZ2dpbmcgaW4sIGxldCB0aGUgdXNlciBrbm93XG5cdFx0XHRcdHZtLmVycm9ycy5tZXNzYWdlID0gbWVzc2FnZTtcblx0XHRcdFx0dm0uZXJyb3JzLnBhc3Nlc0FsbFRlc3RzID0gZmFsc2U7XG5cdFx0XHR9KVxuXG5cdFx0XHQvL3VzZSB1aWQgdG8gY29sbGVjdCB1c2VyIGJpb1xuXHRcdFx0XG5cdFx0fVxuXG5cdH1cblxuXHR2bS5jbGlja2VkID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHVzZXJBdXRoZW50aWNhdGlvbiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdHVzZXJBdXRoZW50aWNhdGlvbi5sb2dVc2VyT3V0KCk7XG5cdH1cblxuXHQvL3J1biBjb21tYW5kc1xufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcigndG9wTWVudUNvbnRyb2xsZXInLCB0b3BNZW51Q29udHJvbGxlcik7XG5cbnRvcE1lbnVDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJywgJyRsb2NhdGlvbicsICckZG9jdW1lbnQnLCAnJHdpbmRvdyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHRvcE1lbnVDb250cm9sbGVyKCRzY29wZSwgJGxvZywgJGxvY2F0aW9uLCAkZG9jdW1lbnQsICR3aW5kb3cpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHQvL2xvY2FsIHZhcmlhYmxlc1xuXHR2bS5sb2dnZWRJbiA9IGZhbHNlXG5cblx0Ly9zdHlsZXMgdmFyaWFibGVzXG5cdFxuXHQvL2V2ZW50IGxpc3RlbmVyc1xuXHRpZiAoJ2FkZEV2ZW50TGlzdGVuZXInIGluICRkb2N1bWVudCkge1xuXHQgICAgJGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHtcblx0ICAgIFx0JGxvZy5pbmZvKCdhZGRpbmcgRmFzdENsaWNrJyk7XG5cdCAgICAgICAgRmFzdENsaWNrLmF0dGFjaCgkZG9jdW1lbnQuYm9keSk7XG5cdCAgICB9LCBmYWxzZSk7XG5cdH1cblxuXHRhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdykuYmluZCgncmVzaXplJywgZnVuY3Rpb24oKSB7XG5cdFx0dm0ub25SZXNpemVGdW5jdGlvbigpO1xuXHRcdCRzY29wZS4kYXBwbHkoKTtcblx0fSk7XG5cblx0YW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cdFx0aWYoJHdpbmRvdy5vdXRlcldpZHRoIDwgNjAwKSB7XG5cdFx0XHR2bS5vblJlc2l6ZUZ1bmN0aW9uKCk7XG5cdFx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cdFx0fVxuXHR9KVxuXHQvL2R5bmFtaWNhbGx5IHNldCBpbnB1dCB3aWR0aFxuXG5cblx0Ly8gQ3JlYXRlIGEgY2FsbGJhY2sgd2hpY2ggbG9ncyB0aGUgY3VycmVudCBhdXRoIHN0YXRlXG5cdGZ1bmN0aW9uIGluaXQoKSB7XG5cdFx0dm0ub25SZXNpemVGdW5jdGlvbigpO1xuXHRcdCRzY29wZS4kYXBwbHkoKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGF1dGhEYXRhQ2FsbGJhY2soYXV0aERhdGEpIHtcblx0ICBpZiAoYXV0aERhdGEpIHtcblx0ICAgICRsb2cuaW5mbyhcIlVzZXIgXCIgKyBhdXRoRGF0YS51aWQgKyBcIiBpcyBsb2dnZWQgaW4gd2l0aCBcIiArIGF1dGhEYXRhLnByb3ZpZGVyKTtcblx0ICAgIHZtLmxvZ2dlZEluID0gdHJ1ZTtcblx0ICB9IGVsc2Uge1xuXHQgICAgJGxvZy5pbmZvKFwiVXNlciBpcyBsb2dnZWQgb3V0XCIpO1xuXHQgICAgdm0ubG9nZ2VkSW4gPSBmYWxzZTtcblx0ICB9XG5cdH1cblxuXHRmdW5jdGlvbiByZWRpcmVjdChwYXRoLCB1c2VyRGF0YSkge1xuXHRcdHZhciBmdWxsUGF0aCA9IHBhdGggKyAnLycgKyB1c2VyRGF0YS51aWQgKyAnLycgKyB1c2VyRGF0YS50b2tlbjtcblx0XHQvL3JlZGlyZWN0XG5cdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyB0bzogJyArIGZ1bGxQYXRoKTtcblx0XHQkbG9jYXRpb24ucGF0aChmdWxsUGF0aCk7XG5cdFx0Ly8kc2NvcGUuJGFwcGx5KCk7XG5cdH1cblxuXHQvL3ZtIGFjY2Vzc2libGUgbWV0aG9kc1xuXHR2bS5sb2dvdXQgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9nLmluZm8oJ2xvZ2dpbmcgb3V0IScpO1xuXHRcdHZtLmxvZ2dlZEluID0gZmFsc2U7XG5cdFx0cmVmLnVuYXV0aCgpO1xuXHRcdHJlZGlyZWN0KCcvJywge3VpZDonJywgdG9rZW46Jyd9KTtcblx0fVxuXG5cdHZtLm5hdkJhckxvZ2luUmVnaXN0ZXJlZFVzZXIgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9nLmluZm8oJ2xhdW5jaGluZyBsb2dpbicpO1xuXHRcdGlmKHRydWUpIHtcblx0XHQvL2lmKHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlKSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZVxuXHRcdFx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cblx0XHRcdC8vYXV0aGVudGljYXRlIHRoZSB1c2VyXG5cdFx0XHRyZWYuYXV0aFdpdGhQYXNzd29yZCh7XG5cdFx0XHRcdGVtYWlsOiB2bS5uYXZiYXJVc2VyRW1haWwsXG5cdFx0XHRcdHBhc3N3b3JkOiB2bS5uYXZiYXJVc2VyUGFzc1xuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IsIGF1dGhEYXRhKSB7XG5cdFx0XHRcdGlmKGVycm9yKSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdFcnJvciBMb2dnaW5nIEluOiAnICsgZXJyb3IpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnTG9nZ2VkIEluIHN1Y2Nlc3NmdWxseTogJyArIGF1dGhEYXRhLnVpZCk7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKGF1dGhEYXRhKTtcblx0XHRcdFx0XHQvL3NhdmUgYWxsIHRoZSBkYXRhXG5cblx0XHRcdFx0XHQvL2xvYWQgdXNlciBiaW9cblx0XHRcdFx0XHQvL2xvYWQgdXNlciBldmVudHNcblxuXHRcdFx0XHRcdC8vcmVkaXJlY3Rcblx0XHRcdFx0XHRyZWRpcmVjdCgnL3VzZXJJbmZvcm1hdGlvbicsIGF1dGhEYXRhKTtcblx0XHRcdFx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cblx0XHRcdFx0XHQvL2NsaWNrIGNsb3NlZCB0aGUgbmF2YmFyXG5cdFx0XHRcdFx0YW5ndWxhci5lbGVtZW50KCcubmF2YmFyLXRvZ2dsZScpLmNsaWNrKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cblxuXHRcdH1cblxuXHR9XG5cblx0dm0ub25SZXNpemVGdW5jdGlvbiA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBuYXZiYXJJbnB1dHMgPSBhbmd1bGFyLmVsZW1lbnQoJy5uYXZiYXJJbnB1dHMnKTtcblx0XHRuYXZiYXJJbnB1dHMuY3NzKCd3aWR0aCcsICgkd2luZG93Lm91dGVyV2lkdGggLSAyNikgKyAncHgnKTtcblx0fVxuXG5cdC8vIFJlZ2lzdGVyIHRoZSBjYWxsYmFjayB0byBiZSBmaXJlZCBldmVyeSB0aW1lIGF1dGggc3RhdGUgY2hhbmdlc1xuXHRyZWYub25BdXRoKGF1dGhEYXRhQ2FsbGJhY2spO1xufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignVXNlckV2ZW50c0NvbnRyb2xsZXInLCBVc2VyRXZlbnRzQ29udHJvbGxlcik7XG5cblVzZXJFdmVudHNDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJHJvdXRlUGFyYW1zJywgJ3VzZXJEYXRhJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gVXNlckV2ZW50c0NvbnRyb2xsZXIoJGxvZywgJHJvdXRlUGFyYW1zLCB1c2VyRGF0YSkge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHR2YXIgY3VycmVudFVzZXIgPSB1c2VyRGF0YTtcblxuXHQvL2xvY2FsIHZpZXcgdmFyaWFibGVzXG5cdHZtLnNob3dEZWNsaW5lID0gZmFsc2U7XHQvL3doYXQgaXMgdGhpcyBiZWluZyB1c2VkIGZvcj9cblx0dm0udXNlckJpbyA9IHt9XG5cdHZtLmV2ZW50cyA9IHt9O1xuXHR2bS5lcnJvcnMgPSB7fTtcblxuXHQvL2RlY2xhcmUgbG9jYWwgbWV0aG9kc1xuXHRmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fTtcblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH07XG5cblx0ZnVuY3Rpb24gbm9PZkhvc3RlRXZlbnRzKCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZVxuXHRcdHZhciBjb3VudGVyID0gMDtcblxuXHRcdGZvcihldmVudCBpbiB2bS5ldmVudHMuaG9zdGluZykgY291bnRlcisrO1xuXG5cdFx0cmV0dXJuIGNvdW50ZXI7XG5cdH1cblxuXHRmdW5jdGlvbiBnZW5lcmF0ZUV2ZW50SUQoKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYXRlID0gbmV3IERhdGUoKTtcblx0XHR2YXIgZXZlbnRJRCA9IChkYXRlVGltZVRvVW5peFRpbWUoZGF0ZSkgKiAxMCkgKyAobm9PZkhvc3RlRXZlbnRzKCkpO1xuXG5cdFx0cmV0dXJuIGV2ZW50SUQ7XG5cdH1cblxuXHRmdW5jdGlvbiBpbml0aWFsaXplKCkge1xuXHRcdC8vbWFrZSBzdXJlIHRoZSB1aWQgaXMgc2V0XG5cdFx0Y3VycmVudFVzZXIuc2V0VUlETG9jYWxseSgkcm91dGVQYXJhbXMudWlkKTtcblxuXHRcdC8vbG9hZCB0aGUgdXNlciBiaW9cblx0XHRjdXJyZW50VXNlci5sb2FkQmlvKCRyb3V0ZVBhcmFtcy51aWQpXG5cdFx0LnRoZW4oZnVuY3Rpb24ocmV0cmlldmVkQmlvKSB7XG5cdFx0XHR2bS51c2VyQmlvID0gcmV0cmlldmVkQmlvO1xuXHRcdH0pXG5cdFx0LmNhdGNoKClcblxuXHRcdC8vbG9hZCB1c2VyIGV2ZW50cyBwcm9ncmVzc2l2bGV5XG5cdFx0Ly9maXN0IHdoYXRldmVyIGlzIGluIHRoZSBtb2RlbCBhbHJlYWR5XG5cdFx0dm0uZXZlbnRzID0gY3VycmVudFVzZXIuZ2V0QWxsVXNlckV2ZW50c0xvY2FsbHkoKTtcblxuXHRcdC8vdGhlbiBjYWxsIHRvIHRoZSBkYiBhbmQgZ2V0IHRoZSBtb3N0IHVwIHRvIGRhdGUgaW5mb1xuXHRcdGN1cnJlbnRVc2VyLmdldFJlbW90ZUV2ZW50c0ZvckxvY2FsKClcblx0XHQudGhlbihmdW5jdGlvbihvYnRhaW5lZFVzZXJFdmVudHMpIHtcblxuXHRcdFx0Ly9sb2cgd2hhdCB3YXMgZm91bmRcblx0XHRcdCRsb2cuaW5mbygnZ290IHRoaXMgZnJvbSB0aGUgZGInKTtcblx0XHRcdCRsb2cuaW5mbyhvYnRhaW5lZFVzZXJFdmVudHMpO1xuXG5cdFx0XHQvL3VwZGF0ZSB0aGUgdmlldyBtb2RlbCB3aXRoIHRoZSB1cGRhdGVkIERCIHJlc3VsdHNcblx0XHRcdHZtLmV2ZW50cyA9IGN1cnJlbnRVc2VyLmdldEFsbFVzZXJFdmVudHNMb2NhbGx5KCk7XG5cdFx0fSlcblxuXHR9XG5cblx0Ly9kZWNsYXJlIHZpZXcgbWV0aG9kc1xuXHR2bS5jcmVhdGVOZXdFdmVudCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBldmVudElEID0gZ2VuZXJhdGVFdmVudElEKCk7XG5cblx0XHQkbG9nLmluZm8oJ3lvdVxcJ3JlIGNyZWF0aW5nIGEgbmV3IGV2ZW50ISAnICsgZXZlbnRJRCk7XG5cblx0XHQvL2FkZCB0aGUgZXZlbnQgdG8gdGhlIG1vZGFsIChsb2NhbGx5IHRoZW4gb24gdGhlIGRiKVxuXHRcdGN1cnJlbnRVc2VyLmNyZWF0ZU5ld0V2ZW50KGV2ZW50SUQpXG5cdFx0LnRoZW4oKVxuXHRcdC5jYXRjaCgpXG5cdFx0Ly9pZiB0aGVyZSB3YXMgYW4gdXBkYXRlZCBmaWVsZCwgcmVtb3ZlIGl0XG5cblx0XHQvL3JlZGlyZWN0IHRvIHRoZSBuZXcgZXZlbnQgcGFnZVx0XHRcblxuXHRcdC8vY3JlYXRlIGV2ZW50IG1vZGVsIHRvIHN0YXJ0IHdpdGhcblxuXHR9XG5cblx0Ly9leGVjdXRlIHNjcmlwdHNcblx0aW5pdGlhbGl6ZSgpO1xuXG59XG5cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ1VzZXJJbmZvcm1hdGlvbkNvbnRyb2xsZXInLCBVc2VySW5mb3JtYXRpb25Db250cm9sbGVyKTtcblxuVXNlckluZm9ybWF0aW9uQ29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJywgJyRkb2N1bWVudCcsICckcm91dGVQYXJhbXMnLCd1c2VyRGF0YScsICd0cmFmZmljVmFsZXQnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBVc2VySW5mb3JtYXRpb25Db250cm9sbGVyKCRsb2csICRkb2N1bWVudCwgJHJvdXRlUGFyYW1zLCB1c2VyRGF0YSwgdHJhZmZpY1ZhbGV0KSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdFxuXHQvL2xvY2FsIHZhcmlhYmxlc1xuXHR2YXIgY3VycmVudFVzZXIgPSB1c2VyRGF0YTtcblxuXHQvL3ZpZXcgbW9kZWwgdmFyaWFibGVzXG5cdHZtLnVzZXIgPSB7fTtcblx0dm0udGVtcEJpcnRoZGF5O1xuXHR2bS52aWV3ID0ge1xuXHRcdGRhdGFUb1NhdmU6IGZhbHNlLFxuXHRcdGlzRGF0YTogZmFsc2UsXG5cdFx0YnRuTXNzZzogJ01vdmUgT24uLi4nLFxuXHRcdHByb2NlZWRCdG46ICdidG4gYnRuLXByaW1hcnknXG5cdH07XG5cblx0Ly9sb2NhbCBtZXRob2RzXG5cdGZ1bmN0aW9uIHVuaXhUaW1lVG9EYXRlVGltZSh1bml4VGltZSkge1xuXHRcdHJldHVybiBuZXcgRGF0ZShwYXJzZUludCh1bml4VGltZSkpO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIGRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fTtcblxuXHQvL3ZpZXcgYWNjZXNzaWJsZSBtZXRob2RzXG5cdHZtLmNoZWNrVmFsdWVzID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly90aHJvdyB0aGUgaXNEYXRhIGZsYWcgaWYgc29tZXRoaW5nIGlzIHVwZGF0ZWRcblx0XHR2bS52aWV3LmlzRGF0YSA9IHRydWU7XG5cblx0XHRpZiggIShhbmd1bGFyLmlzVW5kZWZpbmVkKHZtLnVzZXIuY29tcGFueSkgfHwgdm0udXNlci5jb21wYW55ID09PSAnJykgfHwgXG5cdFx0XHQhKGFuZ3VsYXIuaXNVbmRlZmluZWQodm0udXNlci50aXRsZSkgfHwgdm0udXNlci50aXRsZSA9PT0gJycpIHx8IFxuXHRcdFx0IShhbmd1bGFyLmlzVW5kZWZpbmVkKHZtLnVzZXIuZG9iKSB8fCB2bS51c2VyLmRvYiA9PT0gJycpKSBcblx0XHR7XG5cdFx0XHR2bS52aWV3LmRhdGFUb1NhdmUgPSB0cnVlO1xuXHRcdFx0dm0udmlldy5wcm9jZWVkQnRuID0gJ2J0biBidG4tc3VjY2Vzcyc7XG5cdFx0XHR2bS52aWV3LmJ0bk1zc2cgPSAnU2F2ZSAmIENvbnRpbnVlJztcblx0XHR9IGVsc2Uge1xuXHRcdFx0dm0udmlldy5kYXRhVG9TYXZlID0gZmFsc2U7XG5cdFx0XHR2bS52aWV3LnByb2NlZWRCdG4gPSAnYnRuIGJ0bi1wcmltYXJ5Jztcblx0XHRcdHZtLnZpZXcuYnRuTXNzZyA9ICdNb3ZlIE9uLi4uJztcdFxuXHRcdH1cblxuXHR9XG5cblx0dm0udXBkYXRlRE9CID0gZnVuY3Rpb24oKSB7XG5cdFx0dm0udXNlci5kb2IgPSBkYXRlVGltZVRvVW5peFRpbWUodm0udGVtcEJpcnRoZGF5KTtcblx0XHR2bS5jaGVja1ZhbHVlcygpO1xuXHR9XG5cblx0dm0uc2F2ZUFuZE1vdmVPbiA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIHVzZXJJbmZvU2hlcnBhID0gdHJhZmZpY1ZhbGV0O1xuXHRcdHZhciBjdXJyZW50VWlkID0gY3VycmVudFVzZXIuZ2V0VUlETG9jYWxseSgpO1xuXG5cdFx0Ly9jb252ZXJ0IERPQiB0byB1bml4VGltZSBhbmQgc2F2ZVxuXHRcdGlmKHZtLnRlbXBCaXJ0aGRheSAhPT0gMCkgdm0udXBkYXRlRE9CKCk7XG5cdFx0XG5cdFx0Ly9pZiB0aGVyZSBpc24ndCBjdXJyZW50bHkgYSBkb2IsIGdyYWIgZnJvbSB0aGUgcm91dGUgcGFyYW1zXG5cdFx0aWYoY3VycmVudFVpZCA9PSAnJyB8fCBhbmd1bGFyLmlzVW5kZWZpbmVkKGN1cnJlbnRVaWQpKSB7XG5cdFx0XHRjdXJyZW50VXNlci5zZXRVSURMb2NhbGx5KCRyb3V0ZVBhcmFtcy51aWQpO1xuXHRcdH1cblxuXHRcdC8vaWYgdGhlcmUgaXMgbmV3IGRhdGEsIHNhdmUgaXRcblx0XHRpZih2bS52aWV3LmlzRGF0YSkge1xuXHRcdFx0JGxvZy5pbmZvKCdzYXZpbmcgdGhlIG5ldyBkYXRhJyk7XG5cdFx0XHRjdXJyZW50VXNlci51cGRhdGVCaW9Mb2NhbGx5KHZtLnVzZXIpO1xuXHRcdH1cblx0XHRcblx0XHQvL21vdmUgb25cblx0XHR1c2VySW5mb1NoZXJwYS5yZWRpcmVjdFRvKCcvdXNlckV2ZW50cycsIHZtLnVzZXIudWlkKVxuXHR9XG5cblx0ZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHtcblx0XHQvL2xvYWQgRmFzdENsaWNrXG5cdFx0Ly9GYXN0Q2xpY2suYXR0YWNoKCRkb2N1bWVudC5ib2R5KTtcblx0XHRcblx0XHQvL2xvYWQgdXNlckRhdGEgbG9jYWxseSBvciBmcm9tIGRiXG5cdFx0Y3VycmVudFVzZXIubG9hZEJpbygkcm91dGVQYXJhbXMudWlkKVxuXHRcdC50aGVuKGZ1bmN0aW9uKG9idGFpbmVkVXNlckRhdGEpIHtcblx0XHRcdC8vYXNzaWduIHVzZXIgdmFsdWVzXG5cdFx0XHR2bS51c2VyID0gb2J0YWluZWRVc2VyRGF0YTtcblxuXHRcdFx0Ly9idWlsZCB0ZW1wQmlydGhkYXlcblx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKG9idGFpbmVkVXNlckRhdGEuZG9iKSAmJiBvYnRhaW5lZFVzZXJEYXRhLmRvYiAhPT0gJycpIHtcblx0XHRcdFx0dm0udGVtcEJpcnRoZGF5ID0gdW5peFRpbWVUb0RhdGVUaW1lKG9idGFpbmVkVXNlckRhdGEuZG9iKVxuXHRcdFx0fVxuXG5cdFx0fSk7XG5cdFxuXHR9XG5cblx0Ly9ydW4gcHJvY2Vzc2VzXG5cdGluaXRpYWxpemUoKTsgLy93aXRoIGludGVybmV0IHVzZSB0aGUgZXZlbnQgbGlzdGVuZXIgaW5zdGVhZFxufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuZmFjdG9yeSgnYXV0aFNlcnZpY2UnLCBhdXRoU2VydmljZSk7XG5cbmF1dGhTZXJ2aWNlLiRpbmplY3QgPSBbJyRsb2cnLCAnJHEnLCAnJGxvY2F0aW9uJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gYXV0aFNlcnZpY2UoJGxvZywgJHEsICRsb2NhdGlvbikge1xuXHR2YXIgZmJVUkwgPSAnaHR0cHM6Ly9tZWV0dXBwbGFubmVyLmZpcmViYXNlaW8uY29tLyc7XG5cdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXG5cdHZhciBhbGxBdXRoU2VydmljZXMgPSB7XG5cdFx0aXNMb2dnZWRJbjogaXNMb2dnZWRJblxuXHR9O1xuXG5cdGZ1bmN0aW9uIGF1dGhEYXRhQ2FsbGJhY2soYXV0aERhdGEpIHtcblx0ICBcblx0ICBpZiAoYXV0aERhdGEpIHtcblx0ICAgICRsb2cuaW5mbyhcIlVzZXIgXCIgKyBhdXRoRGF0YS51aWQgKyBcIiBpcyBsb2dnZWQgaW4gd2l0aCBcIiArIGF1dGhEYXRhLnByb3ZpZGVyKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgJGxvZy5pbmZvKFwiVXNlciBpcyBsb2dnZWQgb3V0Li4uZHVtcGluZyB0aGVtIGJhY2sgdG8gbGFuZGluZyBwYWdlXCIpO1xuXHQgICAgLy9kdW1wIHRoZSB1c2VyIGJhY2sgb3V0XG5cdCAgICAkbG9jYXRpb24ucGF0aCgnLycpO1xuXHQgIH1cblx0fVxuXG5cdGZ1bmN0aW9uIGlzTG9nZ2VkSW4oKSB7XG5cdFx0Ly9jaGVjayB0aGUgdXNlciBhdXRoZW50aWNhaW9uIHN0YXRlXG5cdFx0JGxvZy5pbmZvKCdsb2dnaW5nIGZyb20gdGhlIGlzTG9nZ2VkSW4gTWV0aG9kJyk7XG5cdFx0Ly9yZWYub25BdXRoKGF1dGhEYXRhQ2FsbGJhY2spO1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cdFxuXHRyZXR1cm4gYWxsQXV0aFNlcnZpY2VzO1xuXG59XG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5mYWN0b3J5KCdiYWNrZW5kU2VydmljZXMnLCBiYWNrZW5kU2VydmljZXMpO1xuXG5iYWNrZW5kU2VydmljZXMuJGluamVjdCA9IFsnJGxvZycsICckcScsICckd2luZG93J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gYmFja2VuZFNlcnZpY2VzKCRsb2csICRxLCAkd2luZG93KSB7XG5cdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgYWxsQmFja2VuZFNlcnZpY2VzID0ge1xuXHRcdHV0ZjhfdG9fYjY0OiB1dGY4X3RvX2I2NCwgXHRcdFx0XHRcdFx0Ly9sb2NhbCBmdW5jdGlvbnMgdG8gY29udmVydCBkYXRlc1xuXHRcdGI2NF90b191dGY4OiBiNjRfdG9fdXRmOCxcblx0XHR1bml4VGltZVRvRGF0ZVRpbWU6IHVuaXhUaW1lVG9EYXRlVGltZSxcblx0XHRkYXRlVGltZVRvVW5peFRpbWU6IGRhdGVUaW1lVG9Vbml4VGltZSxcblxuXHRcdExvZ2luUmVnaXN0ZXJlZFVzZXI6IExvZ2luUmVnaXN0ZXJlZFVzZXIsXHRcdC8vYXV0aGVudGljYWlvblxuXHRcdGNoZWNrTG9naW5TdGF0dXM6IGNoZWNrTG9naW5TdGF0dXMsXG5cdFx0bG9nVXNlck91dDogbG9nVXNlck91dCxcblxuXHRcdGRvd25sb2FkVXNlckRhdGE6IGRvd25sb2FkVXNlckRhdGEsXHRcdFx0XHQvL2dldHRlciBtZXRob2RzXG5cdFx0Z2V0VXNlckJpbzogZ2V0VXNlckJpbyxcblx0XHRnZXRVc2VyRXZlbnRzOiBnZXRVc2VyRXZlbnRzLFxuXG5cdFx0Y3JlYXRlTmV3VXNlcjogY3JlYXRlTmV3VXNlcixcdFx0XHRcdFx0Ly9zZXR0ZXIgTWV0aG9kc1xuXHRcdGFkZE5ld1VzZXJUb0RhdGFiYXNlOiBhZGROZXdVc2VyVG9EYXRhYmFzZSxcblx0XHRhZGROZXdVc2VyVG9SZWdVc2Vyc0xpc3Q6IGFkZE5ld1VzZXJUb1JlZ1VzZXJzTGlzdCxcblx0XHR1cGxvYWRVc2VyRGF0YTogdXBsb2FkVXNlckRhdGEsXG5cdFx0dXBsb2FkVXNlckJpbzogdXBsb2FkVXNlckJpbyxcblx0XHRjcmVhdGVIb3N0ZWRFdmVudDogY3JlYXRlSG9zdGVkRXZlbnRcblx0fTtcblxuXHRmdW5jdGlvbiB1dGY4X3RvX2I2NChzdHIpIHtcblx0XHRyZXR1cm4gYnRvYShzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gYjY0X3RvX3V0Zjgoc3RyKSB7XG4gICAgXHRyZXR1cm4gYXRvYihzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKSB7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KHVuaXhUaW1lKSk7XG5cdH1cblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH1cblxuXHRmdW5jdGlvbiBjcmVhdGVOZXdVc2VyKGVtYWlsLCBwYXNzd29yZCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZmlyZUJhc2VBY2NvdW50cyA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0XG5cdFx0Ly9yZXR1cm4gYSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XG5cdFx0XHRmaXJlQmFzZUFjY291bnRzLmNyZWF0ZVVzZXIoe1xuXHRcdFx0XHRcblx0XHRcdFx0ZW1haWw6IGVtYWlsLFxuXHRcdFx0XHRwYXNzd29yZDogcGFzc3dvcmRcblx0XHRcdFxuXHRcdFx0fSxmdW5jdGlvbihlcnJvciwgdXNlckRhdGEpIHtcblx0XHRcdFx0XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoJ0Vycm9yIGNyZWF0aW5nIHVzZXI6ICcgKyBlcnJvcik7XG5cblx0XHRcdFx0ZWxzZSByZXNvbHZlKHVzZXJEYXRhKTtcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBhZGROZXdVc2VyVG9EYXRhYmFzZSh1aWQsIG5hbWUsIGVtYWlsKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciBhcHBVc2VycyA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpO1xuXHRcdHZhciBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XG5cblx0XHQvL3JldHVybiBhIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcblx0XHRcdGFwcFVzZXJzLnNldCh7IFxuXHRcdFx0XHQnYmlvJzoge1xuXHRcdFx0XHRcdCd1aWQnOiB1aWQsXG5cdFx0XHRcdFx0J25hbWUnOiBuYW1lLFxuXHRcdFx0XHRcdCdlbWFpbCc6IGVtYWlsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdCdldmVudHMnOiB7XG5cdFx0XHRcdFx0J3BlbmRpbmcnOiB7XG5cdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdCdob3N0aW5nJzoge1xuXHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQnYXR0ZW5kaW5nJzoge1xuXHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQnY29tcGxldGVkJzoge1xuXHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblxuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KCdEYXRhIGNvdWxkIG5vdCBiZSBzYXZlZDogJyArIGVycm9yKTtcblx0XHRcdFx0XG5cdFx0XHRcdGVsc2UgcmVzb2x2ZSgnRGF0YSBzYXZlZCBzdWNjZXNzZnVsbHkuJyk7XG5cblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGFkZE5ld1VzZXJUb1JlZ1VzZXJzTGlzdCh1aWQsIGVtYWlsKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciBiNjRFbWFpbCA9IHV0ZjhfdG9fYjY0KGVtYWlsKTtcblx0XHR2YXIgUmVnaXN0ZXJlZFVzZXJzTGlzdCA9IGFwcC5jaGlsZCgnVWlkcycpLmNoaWxkKGI2NEVtYWlsKTtcblxuXHRcdC8vcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFxuXHRcdFx0UmVnaXN0ZXJlZFVzZXJzTGlzdC5zZXQodWlkLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KFwiRGF0YSBjb3VsZCBub3QgYmUgc2F2ZWQuIFwiICsgZXJyb3IpO1xuXHRcdFx0XHRlbHNlIHJlc29sdmUoXCJ1aWQgY3JlYXRlZCBzdWNlc3NmdWxseS5cIik7XG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBMb2dpblJlZ2lzdGVyZWRVc2VyKGVtYWlsLCBwYXNzd29yZCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHRcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHRcdC8vYXV0aGVudGljYXRlIHRoZSB1c2VyXG5cdFx0XHRhcHAuYXV0aFdpdGhQYXNzd29yZCh7XG5cblx0XHRcdFx0ZW1haWw6IGVtYWlsLFxuXHRcdFx0XHRwYXNzd29yZDogcGFzc3dvcmRcblxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IsIGF1dGhEYXRhKSB7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdHJlamVjdCgnRXJyb3IgTG9nZ2luZyBJbjogJyArIGVycm9yKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ0xvZ2dlZCBJbiBzdWNjZXNzZnVsbHk6ICcgKyBhdXRoRGF0YS51aWQpO1xuXHRcdFx0XHRcdHJlc29sdmUoYXV0aERhdGEpO1xuXHRcdFx0XHR9XG5cblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cdFx0XG5cdH1cblxuXHRmdW5jdGlvbiBjaGVja0xvZ2luU3RhdHVzKCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFxuXHRcdFx0YXBwLm9uQXV0aChmdW5jdGlvbihhdXRoRGF0YSkge1xuXHRcdFx0XHRpZiAoYXV0aERhdGEpIHtcblx0XHRcdFx0ICAgICRsb2cuaW5mbyhcIlVzZXIgXCIgKyBhdXRoRGF0YS51aWQgKyBcIiBpcyBsb2dnZWQgaW4gd2l0aCBcIiArIGF1dGhEYXRhLnByb3ZpZGVyKTtcblx0XHRcdFx0ICAgIHJlc29sdmUodHJ1ZSk7XG5cdFx0XHRcdCAgfSBlbHNlIHtcblx0XHRcdFx0ICAgICRsb2cuaW5mbyhcIlVzZXIgaXMgbG9nZ2VkIG91dFwiKTtcblx0XHRcdFx0ICAgIHJlc29sdmUoZmFsc2UpO1xuXHRcdFx0XHQgIH1cblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBsb2dVc2VyT3V0KCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHRcdCRsb2cuaW5mbygnbG9nZ2luZyB1c2VyIG91dCcpO1xuXHRcdGFwcC51bmF1dGgoKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHVwbG9hZFVzZXJEYXRhKGFsbFVzZXJEYXRhKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciB1aWQgPSBhbGxVc2VyRGF0YS51aWQ7XG5cdFx0dmFyIHJlbW90ZVVzZXIgPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKTtcblxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly90aGUgYWN0dWFsIGNhbGxcblx0XHRcdHJlbW90ZVVzZXIudXBkYXRlKGFsbFVzZXJEYXRhLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KCdUaGVyZSB3YXMgYSBwcm9ibGVtIHVwZGF0aW5nIHRoYXQgcmVjb3JkOiAnICsgZXJyb3IpO1xuXHRcdFx0XHRlbHNlIHJlc29sdmUoJ2FsbCB1c2VyIGRhdGEgdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5Jyk7XG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXHRcdFxuXHR9XG5cblx0ZnVuY3Rpb24gdXBsb2FkVXNlckJpbyhjdXJyZW50VXNlckJpbykge1xuXHRcdCRsb2cuaW5mbyhjdXJyZW50VXNlckJpbyk7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciB1aWQgPSAoY3VycmVudFVzZXJCaW8udWlkKS50b1N0cmluZygpO1xuXHRcdHZhciByZW1vdGVVc2VyQmlvID0gYXBwLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2JpbycpO1xuXG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL2NhbGwgdG8gdGhlIGRiXG5cdFx0XHQkbG9nLmluZm8oJ3VwbG9hZGluZyB0aGlzJyk7XG5cdFx0XHQkbG9nLmluZm8oY3VycmVudFVzZXJCaW8pO1xuXHRcdFx0cmVtb3RlVXNlckJpby51cGRhdGUoY3VycmVudFVzZXJCaW8sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoJ1RoZXJlIHdhcyBhIHByb2JsZW0gdXBkYXRpbmcgdGhhdCByZWNvcmQ6ICcgKyBlcnJvcik7XG5cdFx0XHRcdGVsc2UgcmVzb2x2ZSgnYWxsIHVzZXIgYmlvIGRhdGEgdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5Jyk7XG5cdFx0XHR9KVxuXG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBkb3dubG9hZFVzZXJEYXRhKCkge1xuXG5cdH1cblxuXHRmdW5jdGlvbiBnZXRVc2VyQmlvKHVpZCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgdXNlckJpbyA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdiaW8nKTtcblxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly90aGUgYWN0dWFsIGNhbGxcblx0XHRcdHVzZXJCaW8ub25jZSgndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0XHQvL3doZW4gdGhlIGNhbGwgaXMgc3VjY2Vzc2Z1bCByZXR1cm4gdGhlIGRhdGFcblx0XHRcdFx0cmVzb2x2ZShzbmFwc2hvdC52YWwoKSk7XG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHRcdH0gXG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gY3JlYXRlSG9zdGVkRXZlbnQodWlkLCBuZXdFdmVudCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgZXZlbnRJRCA9IG5ld0V2ZW50LmlkO1xuXHRcdHZhciBuZXdIb3N0ZWRFdmVudCA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgnaG9zdGluZycpLmNoaWxkKGV2ZW50SUQpO1xuXG5cdFx0JGxvZy5pbmZvKG5ld0hvc3RlZEV2ZW50KTtcblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vY2FsbCB0byBmaXJlYmFzZVxuXHRcdFx0JGxvZy5pbmZvKCd1cGxvYWRpbmcgdGhpcyBldmVudDonKTtcblx0XHRcdCRsb2cuaW5mbyhuZXdFdmVudCk7XG5cdFx0XHRuZXdIb3N0ZWRFdmVudC5zZXQobmV3RXZlbnQsIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoJ1RoZXJlIHdhcyBhbiBlcnJvcjogJyArIGVycm9yKTtcblx0XHRcdFx0ZWxzZSByZXNvbHZlKCdOZXcgZXZlbnQgc2F2ZWQgdG8gREIgc3VjY2Vzc2Z1bGx5Jyk7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBnZXRVc2VyRXZlbnRzKHVpZCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgdXNlckV2ZW50cyA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpO1xuXHRcdFxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly90aGUgYWN0dWFsIGNhbGxcblx0XHRcdHVzZXJFdmVudHMub25jZSgndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0XHR2YXIgdXNlclByb2ZpbGUgPSBzbmFwc2hvdC52YWwoKTtcblx0XHRcdFx0Ly93aGVuIHRoZSBjYWxsIGlzIHN1Y2Nlc3NmdWwgcmV0dXJuIHRoZSBkYXRhXG5cdFx0XHRcdHZhciBldmVudHNQYWNrYWdlID0ge1xuXHRcdFx0XHRcdGhvc3Rpbmc6IHVzZXJQcm9maWxlLmhvc3RpbmcsXG5cdFx0XHRcdFx0YXR0ZW5kaW5nOiB1c2VyUHJvZmlsZS5hdHRlbmRpbmcsXG5cdFx0XHRcdFx0cGVuZGluZzogdXNlclByb2ZpbGUucGVuZGluZyxcblx0XHRcdFx0XHRjb21wbGV0ZWQ6IHVzZXJQcm9maWxlLmNvbXBsZXRlZFxuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdHJlc29sdmUoZXZlbnRzUGFja2FnZSk7XG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHRcdH0gXG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXHR9XG5cblx0Ly9yZXR1cm4gdGhlIG9iamVjdFxuXHRyZXR1cm4gYWxsQmFja2VuZFNlcnZpY2VzO1xufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuZmFjdG9yeSgndHJhZmZpY1ZhbGV0JywgdHJhZmZpY1ZhbGV0KTtcblxudHJhZmZpY1ZhbGV0LiRpbmplY3QgPSBbJyRsb2cnLCAnJGxvY2F0aW9uJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gdHJhZmZpY1ZhbGV0KCRsb2csICRsb2NhdGlvbikge1xuXHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdHZhciBhbGxUcmFmZmljQ29udHJvbHMgPSB7XG5cdFx0cmVkaXJlY3RUbzogcmVkaXJlY3RUb1xuXHR9O1xuXG5cdGZ1bmN0aW9uIHJlZGlyZWN0VG8ocGF0aCwgcGFyYW0xLCBwYXJhbTIpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChwYXJhbTEpKSB7XG5cdFx0XHRwYXRoID0gcGF0aCArICcvJyArIHBhcmFtMTtcblxuXHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQocGFyYW0yKSkge1xuXHRcdFx0XHQvL2dvIHRvIHBhdGggd2l0aCAyIHBhcmFtc1xuXHRcdFx0XHRwYXRoID0gcGF0aCArICcvJyArIHBhcmFtMjtcblx0XHRcdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyBub3cgdG8gJyArIHBhdGgpO1xuXHRcdFx0XHQkbG9jYXRpb24ucGF0aChwYXRoKTtcblx0XHRcdH1cblx0XHRcdC8vZ28gd2l0aCAxIHBhcmFtXG5cdFx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIG5vdyB0byAnICsgcGF0aCk7XG5cdFx0XHQkbG9jYXRpb24ucGF0aChwYXRoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly9qdXN0IGdvIHRvIHBhdGhcblx0XHRcdCRsb2cuaW5mbygncmVkaXJlY3Rpbmcgbm93IHRvICcgKyBwYXRoKTtcblx0XHRcdCRsb2NhdGlvbi5wYXRoKHBhdGgpO1xuXHRcdH1cblxuXHR9XG5cblx0cmV0dXJuIGFsbFRyYWZmaWNDb250cm9scztcbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmZhY3RvcnkoJ3VzZXJEYXRhJywgdXNlckRhdGEpO1xuXG51c2VyRGF0YS4kaW5qZWN0ID0gWyckbG9nJywgJyRxJywgJ2JhY2tlbmRTZXJ2aWNlcyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHVzZXJEYXRhKCRsb2csICRxLCBiYWNrZW5kU2VydmljZXMpIHtcblx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHR2YXIgY3VycmVudFVzZXIgPSB7XG5cdFx0YmlvOiB7IFxuXHRcdFx0dWlkOiAnJyxcblx0XHRcdG5hbWU6ICcnLFxuXHRcdFx0ZW1haWw6ICcnLFxuXHRcdFx0Y29tcGFueTogJycsXG5cdFx0XHR0aXRsZTogJycsXG5cdFx0XHRkb2I6IDBcblx0XHR9LFxuXHRcdGV2ZW50czoge1xuXHRcdFx0aG9zdGluZzoge30sXG5cdFx0XHRwZW5kaW5nOiB7fSxcblx0XHRcdGF0dGVuZGluZzoge30sXG5cdFx0XHRjb21wbGV0ZWQ6IHt9XG5cdFx0fVxuXHR9O1xuXG5cdHZhciBhbGxVc2VyRGF0YSA9IHtcblx0XHRiaW9QcmltYXJpZXNBcmVDb21wbGV0ZUxvY2FsbHk6IGJpb1ByaW1hcmllc0FyZUNvbXBsZXRlTG9jYWxseSxcdFx0Ly9tb2RhbCBhbmFseXNpc1xuXG5cdFx0Y2xlYW5FdmVudHM6IGNsZWFuRXZlbnRzLFx0XHQvL21vZGVsIG1haW50YWluYW5jZVxuXG5cdFx0Z2V0VUlETG9jYWxseTogZ2V0VUlETG9jYWxseSxcdC8vZ2V0dGVyIE1ldGhvZHNcblx0XHRnZXROYW1lTG9jYWxseTogZ2V0TmFtZUxvY2FsbHksXG5cdFx0Z2V0RW1haWxMb2NhbGx5OiBnZXRFbWFpbExvY2FsbHksXG5cdFx0Z2V0Q29tcGFueUxvY2FsbHk6IGdldENvbXBhbnlMb2NhbGx5LFxuXHRcdGdldFRpdGxlTG9jYWxseTogZ2V0VGl0bGVMb2NhbGx5LFxuXHRcdGdldERPQkxvY2FsbHk6IGdldERPQkxvY2FsbHksXG5cdFx0Z2V0RnVsbEJpb0xvY2FsbHk6IGdldEZ1bGxCaW9Mb2NhbGx5LFxuXHRcdGdldFVzZXJFdmVudHNMb2NhbGx5OiBnZXRVc2VyRXZlbnRzTG9jYWxseSxcblx0XHRnZXRBbGxVc2VyRXZlbnRzTG9jYWxseTogZ2V0QWxsVXNlckV2ZW50c0xvY2FsbHksXG5cblx0XHRzZXRVSURMb2NhbGx5OiBzZXRVSURMb2NhbGx5LFx0Ly9zZXR0ZXIgTWV0aG9kc1xuXHRcdHNldE5hbWVMb2NhbGx5OiBzZXROYW1lTG9jYWxseSxcblx0XHRzZXRFbWFpbExvY2FsbHk6IHNldEVtYWlsTG9jYWxseSxcblx0XHRzZXRDb21wYW55TG9jYWxseTogc2V0Q29tcGFueUxvY2FsbHksXG5cdFx0c2V0VGl0bGVMb2NhbGx5OiBzZXRUaXRsZUxvY2FsbHksXG5cdFx0c2V0RE9CTG9jYWxseTogc2V0RE9CTG9jYWxseSxcblx0XHRzZXRQcmltYXJpZXNMb2NhbGx5OiBzZXRQcmltYXJpZXNMb2NhbGx5LFxuXHRcdHVwZGF0ZVVzZXJFdmVudHNMb2NhbGx5OiB1cGRhdGVVc2VyRXZlbnRzTG9jYWxseSxcblx0XHR1cGRhdGVBbGxVc2VyRXZlbnRzTG9jYWxseTogdXBkYXRlQWxsVXNlckV2ZW50c0xvY2FsbHksXG5cdFx0dXBkYXRlQmlvTG9jYWxseTogdXBkYXRlQmlvTG9jYWxseSxcblxuXHRcdHJlbW92ZVVzZXJFdmVudHNMb2NhbGx5OiByZW1vdmVVc2VyRXZlbnRzTG9jYWxseSwgLy9yZW1vdmUgZGF0YVxuXHRcdFxuXHRcdGdldEZ1bGxSZW1vdGVEQmZvckxvY2FsOiBnZXRGdWxsUmVtb3RlREJmb3JMb2NhbCxcdC8vbG9jYWwtcmVtb3RlIGludGVyYWNpb25zXG5cdFx0Z2V0UmVtb3RlQmlvRm9yTG9jYWw6IGdldFJlbW90ZUJpb0ZvckxvY2FsLFx0XHRcdFxuXHRcdGdldFJlbW90ZUV2ZW50c0ZvckxvY2FsOiBnZXRSZW1vdGVFdmVudHNGb3JMb2NhbCxcblx0XHRzZXRGdWxsUmVtb3RlREJmcm9tTG9jYWw6IHNldEZ1bGxSZW1vdGVEQmZyb21Mb2NhbCxcblx0XHRzZXRSZW1vdGVCaW9Gcm9tTG9jYWw6IHNldFJlbW90ZUJpb0Zyb21Mb2NhbCxcblx0XHRzZXRSZW1vdGVFdmVudHNGcm9tTG9jYWw6IHNldFJlbW90ZUV2ZW50c0Zyb21Mb2NhbCxcblxuXHRcdGxvYWRCaW86IGxvYWRCaW8sXHQvL2V4dGVybmFsIG1ldGhvZHNcblx0XHRsb2FkRXZlbnRzUHJvZ3Jlc3NpdmVseTogbG9hZEV2ZW50c1Byb2dyZXNzaXZlbHksXG5cdFx0Y3JlYXRlTmV3RXZlbnQ6IGNyZWF0ZU5ld0V2ZW50XG5cdH1cblxuXHQvL2FuYWx5c2lzIG1ldGhvZHNcblx0ZnVuY3Rpb24gYmlvUHJpbWFyaWVzQXJlQ29tcGxldGVMb2NhbGx5KCkge1xuXHRcdGlmKCBjdXJyZW50VXNlci5iaW8udWlkICE9PSAnJyAmJlxuXHRcdFx0Y3VycmVudFVzZXIuYmlvLm5hbWUgIT09ICcnICYmXG5cdFx0XHRjdXJyZW50VXNlci5iaW8uZW1haWwgIT09ICcnXG5cdFx0XHQpXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRlbHNlIHJldHVybiBmYWxzZTtcblx0fVxuXG5cdC8vbW9kZWwgbWFpbnRhaW5hbmNlXG5cdGZ1bmN0aW9uIGNsZWFuRXZlbnRzKHR5cGUpIHtcblx0XHQvL2l0ZXJhdGUgdGhyb3VnaCBvYmplY3RzIGluIG9iamVjdFxuXHRcdE9iamVjdC5rZXlzKGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXSkuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcblx0XHRcdC8vaWYgYW55IGFyZSBub24tb2JqZWN0cywgZGVsZXRlIHRoZW1cblx0XHRcdGlmKCFhbmd1bGFyLmlzT2JqZWN0KGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXVtrZXldKSkge1xuXHRcdFx0XHRkZWxldGUgY3VycmVudFVzZXIuZXZlbnRzW3R5cGVdW2tleV07XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHQvL2dldHRlciBtZXRob2RzXG5cdGZ1bmN0aW9uIGdldFVJRExvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmJpby51aWQ7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXROYW1lTG9jYWxseSgpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuYmlvLm5hbWU7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRFbWFpbExvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmJpby5lbWFpbDtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldENvbXBhbnlMb2NhbGx5KCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5iaW8uY29tcGFueTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldFRpdGxlTG9jYWxseSgpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuYmlvLnRpdGxlO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXRET0JMb2NhbGx5KCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5iaW8uZG9iO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0RnVsbEJpb0xvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHVpZDogY3VycmVudFVzZXIuYmlvLnVpZCxcblx0XHRcdG5hbWU6IGN1cnJlbnRVc2VyLmJpby5uYW1lLFxuXHRcdFx0ZW1haWw6IGN1cnJlbnRVc2VyLmJpby5lbWFpbCxcblx0XHRcdGNvbXBhbnk6IGN1cnJlbnRVc2VyLmJpby5jb21wYW55LFxuXHRcdFx0dGl0bGU6IGN1cnJlbnRVc2VyLmJpby50aXRsZSxcblx0XHRcdGRvYjogY3VycmVudFVzZXIuYmlvLmRvYlxuXHRcdH07XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRVc2VyRXZlbnRzTG9jYWxseSh0eXBlKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldEFsbFVzZXJFdmVudHNMb2NhbGx5KCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5ldmVudHM7XG5cdH1cblxuXHQvL3NldHRlciBtZXRob2RzXG5cdGZ1bmN0aW9uIHNldFVJRExvY2FsbHkodWlkKSB7XG5cdFx0Y3VycmVudFVzZXIuYmlvLnVpZCA9IHVpZDtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldE5hbWVMb2NhbGx5KG5hbWUpIHtcblx0XHRjdXJyZW50VXNlci5iaW8ubmFtZSA9IG5hbWU7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXRFbWFpbExvY2FsbHkoZW1haWwpIHtcblx0XHRjdXJyZW50VXNlci5iaW8uZW1haWwgPSBlbWFpbDtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldENvbXBhbnlMb2NhbGx5KGNvbXBhbnkpIHtcblx0XHRjdXJyZW50VXNlci5iaW8uY29tcGFueSA9IGNvbXBhbnk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNldFRpdGxlTG9jYWxseSh0aXRsZSkge1xuXHRcdGN1cnJlbnRVc2VyLmJpby50aXRsZSA9IHRpdGxlO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0RE9CTG9jYWxseShkb2IpIHtcblx0XHRjdXJyZW50VXNlci5iaW8uZG9iID0gZG9iO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0UHJpbWFyaWVzTG9jYWxseShlbWFpbCwgbmFtZSwgdWlkKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoZW1haWwpKSBzZXRFbWFpbExvY2FsbHkoZW1haWwpO1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKG5hbWUpKSBnZXROYW1lTG9jYWxseShuYW1lKTtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh1aWQpKSBzZXRVSURMb2NhbGx5KHVpZCk7XG5cdH1cblxuXHRmdW5jdGlvbiB1cGRhdGVVc2VyRXZlbnRzTG9jYWxseSh0eXBlLCBldmVudCkge1xuXHRcdC8vY2hlY2sgaWYgdGhlIG1vZGVsIG5lZWRzIHRvIGJlIGNsZWFuZWRcblx0XHRjbGVhbkV2ZW50cyh0eXBlKTtcblx0XHQvL3RoZW4gbG9hZCB0aGUgbmV3IGV2ZW50XG5cdFx0Y3VycmVudFVzZXIuZXZlbnRzW3R5cGVdW2V2ZW50LmlkXSA9IGV2ZW50O1xuXHR9XG5cblx0ZnVuY3Rpb24gdXBkYXRlQWxsVXNlckV2ZW50c0xvY2FsbHkoYWxsVXNlckV2ZW50cykge1xuXHRcdGN1cnJlbnRVc2VyLmV2ZW50cyA9IGFsbEV2ZW50cztcblx0fVxuXG5cdGZ1bmN0aW9uIHVwZGF0ZUJpb0xvY2FsbHkodXNlckJpbykge1xuXHRcdC8vdXBkYXRlIGxvY2FsIHZhbHVlc1xuXHRcdHNldE5hbWVMb2NhbGx5KHVzZXJCaW8ubmFtZSk7XG5cdFx0c2V0RW1haWxMb2NhbGx5KHVzZXJCaW8uZW1haWwpO1xuXHRcdHNldENvbXBhbnlMb2NhbGx5KHVzZXJCaW8uY29tcGFueSk7XG5cdFx0c2V0VGl0bGVMb2NhbGx5KHVzZXJCaW8udGl0bGUpO1xuXHRcdHNldERPQkxvY2FsbHkodXNlckJpby5kb2IpO1xuXHRcdC8vc2F2ZSB0byBkYlxuXHRcdHNldFJlbW90ZUJpb0Zyb21Mb2NhbCgpO1xuXHR9XG5cblx0Ly9kZWxldGUgTWV0aG9kc1xuXHRmdW5jdGlvbiByZW1vdmVVc2VyRXZlbnRzTG9jYWxseSh0eXBlLCBldmVudCkge1xuXHRcdC8vZG9lcyB0aGlzIHdvcms/XG5cdFx0ZGVsZXRlIGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXVtldmVudC5pZF07XG5cdH1cblxuXHQvL3JlbW90ZS1sb2NhbCBpbnRlcmFjdGlvbiBNZXRob2RzXG5cdGZ1bmN0aW9uIGdldEZ1bGxSZW1vdGVEQmZvckxvY2FsKCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0ZGIuZG93bmxvYWRVc2VyRGF0YSgpXG5cdFx0LnRoZW4oZnVuY3Rpb24ocmVtb3RlVXNlckRhdGEpIHtcblx0XHRcdGN1cnJlbnRVc2VyID0gcmVtb3RlVXNlckRhdGE7XG5cdFx0fSlcblx0fVxuXG5cdGZ1bmN0aW9uIGdldFJlbW90ZUJpb0ZvckxvY2FsKHVpZCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0JGxvZy5pbmZvKCdnb2luZyBvdXQgdG8gdGhlIGRiIGZvciBiaW8nKTtcblx0XHRcdFx0XG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly9nbyBvdXQgdG8gdGhlIGRiIGJlZm9yZSByZXNvbHZpbmdcblx0XHRcdGRiLmdldFVzZXJCaW8odWlkKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24odXNlckJpbykge1xuXHRcdFx0XHQkbG9nLmluZm8oJ2ZvdW5kIHRoZSBiaW8gcmVtb3RseScpO1xuXHRcdFx0XHQkbG9nLmluZm8odXNlckJpbyk7XG5cdFx0XHRcdHJlc29sdmUodXNlckJpbyk7XG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdHJlamVjdCgnVGhlcmUgd2FzIGFuIGVycm9yIHJlYWRpbmcgdGhlIHVzZXIgYmlvOiAnICsgZXJyb3IpO1xuXHRcdFx0fSlcblx0XHR9KTtcblx0XHRcblx0fVxuXG5cdGZ1bmN0aW9uIGdldFJlbW90ZUV2ZW50c0ZvckxvY2FsKCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0JGxvZy5pbmZvKCdnb2luZyBvdXQgdG8gdGhlIGRiIGZvciBldmVudHMnKTtcblx0XHRcdFx0XG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0JGxvZy5pbmZvKGdldFVJRExvY2FsbHkoKSk7XG5cdFx0XHQvL2dvIG91dCB0byB0aGUgZGIgYmVmb3JlIHJlc29sdmluZ1xuXHRcdFx0ZGIuZ2V0VXNlckV2ZW50cyhnZXRVSURMb2NhbGx5KCkpXG5cdFx0XHQudGhlbihmdW5jdGlvbihvYnRhaW5lZFVzZXJFdmVudHMpIHtcblx0XHRcdFx0JGxvZy5pbmZvKCdMT09LIEhFUkUnKTtcblx0XHRcdFx0JGxvZy5pbmZvKG9idGFpbmVkVXNlckV2ZW50cyk7XG5cdFx0XHRcdC8vc2F2ZSB0aGUgcmVzdWx0cyB0byB0aGUgbG9jYWwgZGF0YWJzZVxuXHRcdFx0XHQvL29idGFpbmVkVXNlckV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGV2ZW50VHlwZSkge1xuXHRcdFx0XHRmb3IoZXZlbnRUeXBlIGluIG9idGFpbmVkVXNlckV2ZW50cykge1xuXHRcdFx0XHRcdC8vYWNjZXNzIHRoZSBldmVudCBjYXRlZ29yaWVzLCBhdHRlbmRpbmcsIHBlbmRpbmcsIGV0Yy4uLlxuXHRcdFx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGV2ZW50VHlwZSkpIHtcblx0XHRcdFx0XHRcdC8vaWYgdGhlIHR5cGUgaGFzIGV2ZW50cywgc2F2ZSB0aGVtXG5cdFx0XHRcdFx0XHRmb3IoZXZlbnQgaW4gZXZlbnRUeXBlKSB7XG5cdFx0XHRcdFx0XHRcdC8vc2F2ZSBlYWNoIGV2ZW50IHRvIHRoZSBwcm9wZXIgcGxhY2Vcblx0XHRcdFx0XHRcdFx0dXBkYXRlVXNlckV2ZW50c0xvY2FsbHkoZXZlbnRUeXBlLCBldmVudCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH07XG5cdFx0XHRcdFxuXHRcdFx0XHQvL3JldHVybiB0aGUgcmVzdWx0cyB0byB0aGUgcmVxdWVzdGluZyBvYmplY3Rcblx0XHRcdFx0cmVzb2x2ZShvYnRhaW5lZFVzZXJFdmVudHMpO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRyZWplY3QoJ1RoZXJlIHdhcyBhbiBlcnJvciByZWFkaW5nIHRoZSB1c2VyIGV2ZW50czogJyArIGVycm9yKTtcblx0XHRcdH0pXG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXRGdWxsUmVtb3RlREJmcm9tTG9jYWwoKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0XHRkYi51cGxvYWRVc2VyRGF0YShjdXJyZW50VXNlcik7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXRSZW1vdGVCaW9Gcm9tTG9jYWwoKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0XHQkbG9nLmluZm8oJ2Zyb20gc2V0UmVtb3RlQmlvRnJvbUxvY2FsJyk7XG5cdFx0JGxvZy5pbmZvKGN1cnJlbnRVc2VyKTtcblxuXHRcdGRiLnVwbG9hZFVzZXJCaW8oY3VycmVudFVzZXIuYmlvKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldFJlbW90ZUV2ZW50c0Zyb21Mb2NhbCgpIHt9XG5cblx0ZnVuY3Rpb24gbG9hZEJpbyh1aWQpIHtcblxuXHRcdC8vbWlnaHQgbmVlZCB0byBnbyBvdXQgdG8gdGhlIGRiIHNvIHJldHVybiBhIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHRcdC8vY2hlY2sgZm9yIGJpbyBsb2NhbGx5IGZpcnN0XG5cdFx0XHRpZihiaW9QcmltYXJpZXNBcmVDb21wbGV0ZUxvY2FsbHkoKSkge1xuXHRcdFx0XHRcdFxuXHRcdFx0XHQvL2xldCB1cyBrbm93IHRoYXQgeW91J2xsIGJlIHBhc3NpbmcgdGhlbSBiYWNrXG5cdFx0XHRcdCRsb2cuaW5mbygncmV0dXJuaW5nIGEgbG9jYWwgYmlvJyk7XG5cdFx0XHRcdFxuXHRcdFx0XHQvL3Nob3cgdXMgd2hhdCB3ZSdsbCBiZSByZXR1cm5pbmdcblx0XHRcdFx0JGxvZy5pbmZvKGdldEZ1bGxCaW9Mb2NhbGx5KCkpO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly9wYXNzIGl0IGJhY2sgYXMgc3VjY2Vzc1xuXHRcdFx0XHRyZXNvbHZlKGdldEZ1bGxCaW9Mb2NhbGx5KCkpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9pZiB0aGV5J3JlIG5vdCBjb21wbGV0ZSBsb2NhbGx5LCBjaGVjayB0aGUgc2VydmVyXG5cdFx0XHRcdGdldFJlbW90ZUJpb0ZvckxvY2FsKHVpZClcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24oYmlvRnJvbVJlbW90ZURCKSB7XG5cdFx0XHRcdFx0cmVzb2x2ZShiaW9Gcm9tUmVtb3RlREIpO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0XHR9KVxuXHRcdFx0fVxuXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGxvYWRFdmVudHNQcm9ncmVzc2l2ZWx5KHVpZCkge1xuXHRcdHZhciBldmVudFR5cGVzID0gWydhdHRlbmRpbmcnLCAncGVuZGluZycsICdob3N0aW5nJywgJ2NvbXBsZXRlZCddO1xuXHRcdHZhciBhbGxFdmVudHMgPSB7fTtcblxuXHRcdC8vd2lsbCBnbyBvdXQgdG8gdGhlIGRiIHNvIHJldHVybiBhIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHRcdGdldFJlbW90ZUV2ZW50c0ZvckxvY2FsKClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKG9idGFpbmVkVXNlckV2ZW50cykge1xuXHRcdFx0XHQvL3doZW4gdGhlIGRiIHJlc3VsdHMgY29tZSBiYWNrLCByZXR1cm4gdGhvc2Vcblx0XHRcdFx0cmVzb2x2ZShvYnRhaW5lZFVzZXJFdmVudHMpO1xuXHRcdFx0fSlcblxuXHRcdFx0Ly9idWlsZCB0aGUgbG9jYWwgbW9kZWxcblx0XHRcdGFsbEV2ZW50cyA9IGdldFVzZXJFdmVudHNMb2NhbGx5KHR5cGUpO1xuXHRcdFx0XG5cdFx0XHQvL3Nob3cgd2hhdCB3YXMgYnVpbHRcblx0XHRcdCRsb2cuaW5mbyhhbGxFdmVudHMpO1xuXG5cdFx0XHQvL2ZpcnN0IHJldHVybiB3aGF0ZXZlciBldmVudCBpbmZvIGlzIHN0b3JlZCBsb2NhbGx5XG5cdFx0XHRyZXNvbHZlKGFsbEV2ZW50cyk7XG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGNyZWF0ZU5ld0V2ZW50KGV2ZW50SUQpIHtcblx0XHQvL2RlY2xhciBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cdFx0dmFyIG5ld0V2ZW50ID0ge307XG5cblx0XHQvL2ZpcnN0IGNyZWF0ZSB0aGUgb2JqZWN0XG5cdFx0bmV3RXZlbnQgPSB7XG5cdFx0XHRpZDogZXZlbnRJRCxcblx0XHRcdG5hbWU6ICcnLFxuXHRcdFx0dHlwZTogJycsXG5cdFx0XHRob3N0OiB7XG5cdFx0XHRcdG5hbWU6ICcnLFxuXHRcdFx0XHR1aWQ6ICcnXG5cdFx0XHR9LFxuXHRcdFx0bWVzc2FnZTogJycsXG5cdFx0XHRldmVudFRpbWVzOiB7XG5cdFx0XHRcdHN0YXJ0OiAwLFxuXHRcdFx0XHRlbmQ6IDBcblx0XHRcdH0sXG5cdFx0XHRhZGRyZXNzOiB7XG5cdFx0XHRcdHN0cmVldDAxOiAnJyxcblx0XHRcdFx0c3RyZWV0MDI6ICcnLFxuXHRcdFx0XHRzdHJlZXQwMzogJycsXG5cdFx0XHRcdGNpdHk6ICcnLFxuXHRcdFx0XHRzdGF0ZTogJycsXG5cdFx0XHRcdHppcDogMFxuXHRcdFx0fSxcblx0XHRcdGd1ZXN0TGlzdDoge31cblx0XHR9O1xuXG5cdFx0Ly9zYXZlIGl0IGxvY2FsbHlcblx0XHR1cGRhdGVVc2VyRXZlbnRzTG9jYWxseSgnaG9zdGluZycsIG5ld0V2ZW50KTtcblxuXHRcdC8vdGhlbiBjcmVhdGUgaXQgb24gdGhlIHNlcnZlclxuXHRcdC8vd2lsbCBnbyBvdXQgdG8gdGhlIGRiIHNvIHJldHVybiBhIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL21hbmFnZSB0aGUgcHJvbWlzZSByZXNwb25zZXNcblx0XHRcdCRsb2cuaW5mbygnanVtcGluZyBpbnRvIHRoZSBwcm9taXNlIGhlcmUnKTtcblx0XHRcdGRiLmNyZWF0ZUhvc3RlZEV2ZW50KGdldFVJRExvY2FsbHkoKSwgbmV3RXZlbnQpXG5cdFx0XHQudGhlbihmdW5jdGlvbihtZXNzYWdlKSB7XG5cdFx0XHRcdCRsb2cuaW5mbyhtZXNzYWdlKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0JGxvZy5pbmZvKGVycm9yKVxuXHRcdFx0fSlcblxuXHRcdH0pO1xuXG5cdH1cblx0XG5cdHJldHVybiBhbGxVc2VyRGF0YTtcbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmZhY3RvcnkoJ3ZhbGlkYXRpb24nLCB2YWxpZGF0aW9uKTtcblxudmFsaWRhdGlvbi4kaW5qZWN0ID0gWyckbG9nJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gdmFsaWRhdGlvbigkbG9nKSB7XG5cdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0dmFyIG1pbmltdW1OYW1lTGVuZ3RoID0gMztcblx0dmFyIG1pbmltdW1QYXNzTGVuZ3RoID0gMTY7XG5cdHZhciBtYXhpbXVtUGFzc0xlbmd0aCA9IDEwMDtcblxuXHR2YXIgYWxsVmFsaWRhdGlvbnMgPSB7XG5cdFx0cmVxdWlyZWQ6IHJlcXVpcmVkLFxuXHRcdG1pbk5hbWVMZW5ndGg6IG1pbk5hbWVMZW5ndGgsXG5cdFx0bWluUGFzc0xlbmd0aDogbWluUGFzc0xlbmd0aCxcblx0XHRtYXhQYXNzTGVuZ3RoOiBtYXhQYXNzTGVuZ3RoLFxuXHRcdGF0TGVhc3RPbmVTeW1ib2w6IGF0TGVhc3RPbmVTeW1ib2wsXG5cdFx0YXRMZWFzdE9uZU51bWJlcjogYXRMZWFzdE9uZU51bWJlcixcblx0XHRhdExlYXN0T25lTG93ZXJjYXNlOiBhdExlYXN0T25lTG93ZXJjYXNlLFxuXHRcdGF0TGVhc3RPbmVVcHBlcmNhc2U6IGF0TGVhc3RPbmVVcHBlcmNhc2UsXG5cdFx0aWxsZWdhbENoYXJhY3RlcjogaWxsZWdhbENoYXJhY3Rlcixcblx0XHRlbWFpbDogZW1haWwsXG5cdFx0ZGF0ZU9mQmlydGg6IGRhdGVPZkJpcnRoXG5cdH07XG5cblx0ZnVuY3Rpb24gcmVxdWlyZWQodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzVW5kZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0cmV0dXJuICdUaGlzIGlzIGEgcmVxdWlyZWQgZmllbGQnO1xuXHRcdH0gXG5cdH1cblxuXHRmdW5jdGlvbiBtaW5OYW1lTGVuZ3RoKHZhbHVlKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHRpZih2YWx1ZS5sZW5ndGggPCBtaW5pbXVtTmFtZUxlbmd0aCkgcmV0dXJuICgnTmFtZSBzaG91bGQgYmUgYXQgbGVhc3QgJyArIG1pbmltdW1OYW1lTGVuZ3RoICsgJyBjaGFyYWN0ZXJzJyk7XG5cdFx0fSBcblx0fVxuXG5cdGZ1bmN0aW9uIG1pblBhc3NMZW5ndGgodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdGlmKCEodmFsdWUubGVuZ3RoIDwgbWluaW11bVBhc3NMZW5ndGgpKSByZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0ZnVuY3Rpb24gbWF4UGFzc0xlbmd0aCh2YWx1ZSkge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0aWYoISh2YWx1ZS5sZW5ndGggPiBtYXhpbXVtUGFzc0xlbmd0aCkpIHJldHVybiB0cnVlO1xuXHRcdH0gXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0ZnVuY3Rpb24gYXRMZWFzdE9uZVN5bWJvbCh2YWx1ZSkge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0Ly8gYnVpbGQgcmVnZXhcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIltcXCFcXEBcXCNcXCRcXCVcXF5cXCZcXCpdXCIpO1xuXG5cdFx0XHQvL2NoZWNrIGNvbnN0cmF0aW50XG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3QodmFsdWUpKSB7XG5cdFx0XHRcdC8vc3VjY2VzczogYXQgbGVhc3Qgb25lIHNwZWNpYWwgY2hhcmFjdGVyIGZvdW5kXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9mYWlsdXJlOiBkaWRuJ3QgZmluZCBhbnkgc3BjaWFsIGNoYXJhY3RlcnNcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGZ1bmN0aW9uIGF0TGVhc3RPbmVOdW1iZXIodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdC8vIGJ1aWxkIHJlZ2V4XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbMC05XVwiLCBcIlwiKTtcblxuXHRcdFx0Ly9jaGVjayBjb25zdHJhdGludFxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZhbHVlKSkge1xuXHRcdFx0XHQvL3N1Y2Nlc3M6IGF0IGxlYXN0IG9uZSBzcGVjaWFsIGNoYXJhY3RlciBmb3VuZFxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vZmFpbHVyZTogZGlkbid0IGZpbmQgYW55IHNwY2lhbCBjaGFyYWN0ZXJzXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuICAgIGZ1bmN0aW9uIGF0TGVhc3RPbmVMb3dlcmNhc2UodmFsdWUpIHtcbiAgICBcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0Ly8gYnVpbGQgcmVnZXhcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIlthLXpdXCIsIFwiXCIpO1xuXG5cdFx0XHQvL2NoZWNrIGNvbnN0cmF0aW50XG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3QodmFsdWUpKSB7XG5cdFx0XHRcdC8vc3VjY2VzczogYXQgbGVhc3Qgb25lIHNwZWNpYWwgY2hhcmFjdGVyIGZvdW5kXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9mYWlsdXJlOiBkaWRuJ3QgZmluZCBhbnkgc3BjaWFsIGNoYXJhY3RlcnNcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhdExlYXN0T25lVXBwZXJjYXNlKHZhbHVlKSB7XG4gICAgXHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdC8vIGJ1aWxkIHJlZ2V4XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbQS1aXVwiLCBcIlwiKTtcblxuXHRcdFx0Ly9jaGVjayBjb25zdHJhdGludFxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZhbHVlKSkge1xuXHRcdFx0XHQvL3N1Y2Nlc3M6IGF0IGxlYXN0IG9uZSBzcGVjaWFsIGNoYXJhY3RlciBmb3VuZFxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vZmFpbHVyZTogZGlkbid0IGZpbmQgYW55IHNwY2lhbCBjaGFyYWN0ZXJzXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaWxsZWdhbENoYXJhY3Rlcih2YWx1ZSkge1xuICAgIFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHQvLyBidWlsZCByZWdleFxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW15BLXowLTlcXCFcXEBcXCNcXCRcXCVcXF5cXCZcXCpdXCIsIFwiXCIpO1xuXG5cdFx0XHQvL2NoZWNrIGNvbnN0cmF0aW50XG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3QodmFsdWUpKSB7XG5cdFx0XHRcdC8vc3VjY2VzczogYXQgbGVhc3Qgb25lIHNwZWNpYWwgY2hhcmFjdGVyIGZvdW5kXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vZmFpbHVyZTogZGlkbid0IGZpbmQgYW55IHNwY2lhbCBjaGFyYWN0ZXJzXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gZW1haWwodmFsdWUpIHtcbiAgICBcdC8vZGVmaW5lIGNvbnN0cmFpbnRzXG4gICAgXHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKD86XFwuW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKykqQCg/OlthLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cXC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cIiwgXCJcIik7XG5cbiAgICBcdGlmKCFjb25zdHJhaW50LnRlc3QodmFsdWUpKSByZXR1cm4gJ05vdCBhIHZhbGlkIGUtbWFpbCBhZGRyZXNzJ1xuICAgIFx0XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGF0ZU9mQmlydGgodmFsdWUpIHt9XG5cblx0cmV0dXJuIGFsbFZhbGlkYXRpb25zO1xufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29uZmlnKGNvbmZpZyk7XG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGNvbmZpZygkcm91dGVQcm92aWRlcikgeyAgIFxuICAgICRyb3V0ZVByb3ZpZGVyXG4gICAgLndoZW4oJy8nLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvbGFuZGluZ1BhZ2UuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ0xhbmRpbmdQYWdlQ29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xuICAgIH0pXG4gICAgLndoZW4oJy9zaWdudXAnLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvbmV3VXNlclNpZ251cC5odG0nLFxuICAgICAgICBjb250cm9sbGVyOiAnTmV3VXNlclNpZ25VcENvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICB9KVxuICAgIC53aGVuKCcvbG9naW4nLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcmVnaXN0ZXJlZFVzZXJMb2dpbi5odG0nLFxuICAgICAgICBjb250cm9sbGVyOiAnUmVnVXNlckxvZ2luQ29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xuICAgIH0pXG4gICAgLndoZW4oJy91c2VySW5mb3JtYXRpb24vOnVpZD8nLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvdXNlckluZm9ybWF0aW9uLmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdVc2VySW5mb3JtYXRpb25Db250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICByZXNvbHZlOiB7IC8qIEBuZ0luamVjdCAqL1xuICAgICAgICAgICAgdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZTogdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZVxuICAgICAgICB9XG4gICAgfSlcbiAgICAud2hlbignL3VzZXJFdmVudHMvOnVpZD8nLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvdXNlckV2ZW50cy5odG0nLFxuICAgICAgICBjb250cm9sbGVyOiAnVXNlckV2ZW50c0NvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgIHJlc29sdmU6IHsgLyogQG5nSW5qZWN0ICovXG4gICAgICAgICAgICB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlOiB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlXG4gICAgICAgIH1cbiAgICB9KVxuICAgIC53aGVuKCcvZXZlbnQvOmV2ZW50SWQ/Lzpob3N0SWQ/Lzp1aWQ/Jywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2FuRXZlbnQuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ0FuRXZlbnRDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICByZXNvbHZlOiB7IC8qIEBuZ0luamVjdCAqL1xuICAgICAgICAgICAgdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZTogdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZVxuICAgICAgICB9XG4gICAgfSlcbiAgICAub3RoZXJ3aXNlKHtcbiAgICAgICAgcmVkaXJlY3RUbzogJy8nXG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2UoYXV0aFNlcnZpY2UpIHtcbiAgICBhdXRoU2VydmljZS5pc0xvZ2dlZEluKCk7XG59XG4vKiBUb29sQmFyLmRpcmVjdGl2ZS5qcyAqL1xuXG4vKipcbiogQGRlc2MgdG9vbGJhciBkaXJlY3RpdmUgdGhhdCBpcyB1c2VkIG9uIHRoZSBtYWluIHBhZ2UgYWNyb3NzIHRoZSBlbnRpcmUgYXBwLlxuKiBAZXhhbXBsZSA8ZGl2IHRvb2wtYmFyPjwvZGl2PlxuKi9cblxuYW5ndWxhclxuXHQubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG5cdC5kaXJlY3RpdmUoJ3Rvb2xCYXInLCB0b29sQmFyKTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiB0b29sQmFyKCkge1xuICAgIGxpbmtGdW5jLiRpbmplY3QgPSBbXCJzY29wZVwiLCBcImVsXCIsIFwiYXR0clwiLCBcImN0cmxcIl07XG5cdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0cmVzdHJpY3Q6ICdBRUNNJyxcblx0XHR0ZW1wbGF0ZVVybDogJy4uL3ZpZXdzL2RpcmVjdGl2ZXMvdG9vbEJhci5kaXJlY3RpdmUuaHRtJyxcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdHNjb3BlOiB7fSxcblx0XHRsaW5rOiBsaW5rRnVuYyxcblx0XHRjb250cm9sbGVyOiBUb29sQmFyQ29udHJvbGxlcixcblx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHR9XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCwgYXR0ciwgY3RybCkge1xuICAgIH1cblxuICAgIFRvb2xCYXJDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnYmFja2VuZFNlcnZpY2VzJ107XG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gVG9vbEJhckNvbnRyb2xsZXIoJGxvZywgYmFja2VuZFNlcnZpY2VzKSB7XG5cdCAgICB2YXIgdm0gPSB0aGlzO1xuXG5cdCAgICAvL2xvY2FsIGNvbnRyb2xlciB2YXJpYWJsZXNcblx0ICAgIHZhciBmYkNvbm5lY3QgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0ICAgIC8vbG9jYWwgdmlldyB2YXJpYWJsZXNcblx0XHRmYkNvbm5lY3QuY2hlY2tMb2dpblN0YXR1cygpXG5cdFx0LnRoZW4oZnVuY3Rpb24oc3RhdHVzKSB7XG5cdFx0XHR2bS5sb2dnZWRJbiA9IHN0YXR1cztcblx0XHR9KVxuXHRcdC5jYXRjaCgpXG5cblx0XHR2bS5jbGlja2VkID0gZnVuY3Rpb24oKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2J1dHRvbiBjbGlja2VkJyk7XG5cdFx0fVxuXG5cdFx0Ly9hY3Rpb25zXG5cdFx0XG5cdH1cblxuXHRyZXR1cm4gIGRpcmVjdGl2ZTtcblx0XHRcbn07IiwiLyogVG9vbEJhci5kaXJlY3RpdmUuanMgKi9cblxuLyoqXG4qIEBkZXNjIHRvb2xiYXIgZGlyZWN0aXZlIHRoYXQgaXMgdXNlZCBvbiB0aGUgbWFpbiBwYWdlIGFjcm9zcyB0aGUgZW50aXJlIGFwcC5cbiogQGV4YW1wbGUgPGRpdiB0b29sLWJhcj48L2Rpdj5cbiovXG5cbmFuZ3VsYXJcblx0Lm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuXHQuZGlyZWN0aXZlKCd0b29sQmFyJywgdG9vbEJhcik7XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gdG9vbEJhcigpIHtcblx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRyZXN0cmljdDogJ0FFQ00nLFxuXHRcdHRlbXBsYXRlVXJsOiAnLi4vdmlld3MvZGlyZWN0aXZlcy90b29sQmFyLmRpcmVjdGl2ZS5odG0nLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0c2NvcGU6IHt9LFxuXHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdGNvbnRyb2xsZXI6IFRvb2xCYXJDb250cm9sbGVyLFxuXHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdH1cblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7XG4gICAgfVxuXG4gICAgVG9vbEJhckNvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICdiYWNrZW5kU2VydmljZXMnXTtcbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBUb29sQmFyQ29udHJvbGxlcigkbG9nLCBiYWNrZW5kU2VydmljZXMpIHtcblx0ICAgIHZhciB2bSA9IHRoaXM7XG5cblx0ICAgIC8vbG9jYWwgY29udHJvbGVyIHZhcmlhYmxlc1xuXHQgICAgdmFyIGZiQ29ubmVjdCA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHQgICAgLy9sb2NhbCB2aWV3IHZhcmlhYmxlc1xuXHRcdGZiQ29ubmVjdC5jaGVja0xvZ2luU3RhdHVzKClcblx0XHQudGhlbihmdW5jdGlvbihzdGF0dXMpIHtcblx0XHRcdHZtLmxvZ2dlZEluID0gc3RhdHVzO1xuXHRcdH0pXG5cdFx0LmNhdGNoKClcblxuXHRcdHZtLmNsaWNrZWQgPSBmdW5jdGlvbigpIHtcblx0XHRcdCRsb2cuaW5mbygnYnV0dG9uIGNsaWNrZWQnKTtcblx0XHR9XG5cblx0XHQvL2FjdGlvbnNcblx0XHRcblx0fVxuXG5cdHJldHVybiAgZGlyZWN0aXZlO1xuXHRcdFxufTsiLCJhbmd1bGFyXG5cdC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJywgW1xuXHRcdCduZ1JvdXRlJyxcblx0XHQnbmdUb3VjaCcsXG5cdFx0J2ZpcmViYXNlJ1xuXHRdKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
