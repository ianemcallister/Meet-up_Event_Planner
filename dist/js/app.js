function AnEventController(e,n,t,o,r){function a(){p.tempDateTime={start:"",end:""},p.newGuest={name:"",email:{address:"",valid:!1,style:{color:""}}},p.showIfHost=!1,p.hideIfAttending=!0,p.manageSections={1:{active:!0,complete:!1,style:{color:"black","background-color":"yellow"}},2:{active:!1,complete:!1,style:{color:"white","background-color":"gray"}},3:{active:!1,complete:!1,style:{color:"white","background-color":"gray"}}},g(),m(),p.showIfHost||v()}function s(e){return btoa(e)}function l(e){return atob(e)}function c(e){return Date.parse(e)}function u(){p.newGuest={name:"",email:{address:"",valid:!1,style:{color:""}}}}function d(e){n.info("adding them to the registered users list "+e),w.child("Users").child(e).child("events").child("pending").child(o.uid).child(o.eventId).set({id:o.eventId,eventTimes:{start:p.event.eventTimes.start,end:p.event.eventTimes.end},name:p.event.name,host:o.uid},function(e){e&&n.info("there was an error"+e)}),w.child("Users").child(e).child("events").child("pending").once("value",function(t){var i=t.val();n.info(t.val()),i.updated?(n.info("deleting updated"),w.child("Users").child(e).child("events").child("pending").child("updated").remove(function(e){e&&n.info("Deleting failed: "+e.code)})):n.info("nothing to do")},function(e){e&&n.info("The read failed: "+e.code)})}function f(e){n.info("adding them to the UNREGISTERED users list "+e),w.child("UnregisteredUsers").child(e).child("pending").child(o.uid).child(o.eventId).set({id:o.eventId,host:o.uid,eventTimes:{start:p.event.eventTimes.start,end:p.event.eventTimes.end},name:p.event.name},function(e){e&&n.info("there was an error"+e)})}function g(){var e=w.getAuth();e.uid==o.hostId?(n.info("is the host"),p.showIfHost=!0):(n.info("not the host"),p.showIfHost=!1)}function m(){p.showIfHost||(n.info("check guest attendance"),U.child("guestList").on("value",function(e){var n=e.val();p.hideIfAttending=!n[o.uid].attending}))}function v(){p.manageSections[1].active=!0,p.manageSections[2].active=!0,p.manageSections[3].active=!0}var p=this,h="https://meetupplanner.firebaseio.com/",w=new Firebase(h),U=w.child("Users").child(o.hostId).child("events").child("hosting").child(o.eventId);p.event=r(U);var b=r(w.child("Uids"));p.requiredInputs=["","","","","","","","",""],p.setTempTime=function(e){"start"==e&&(p.tempDateTime.start=new Date),"end"==e&&(p.tempDateTime.end=new Date)},p.unixTimeToDateTime=function(e){return new Date(parseInt(e))},p.dateTimeToUnixTime=function(e){return Date.parse(e)},p.submit=function(){n.info("submitting the form now!")},p.backToUserEvents=function(){t.path("/userEvents/"+o.uid+"/"+o.token)},p.eventRedirect=function(e,i){var r=e+"/"+o.uid+"/"+o.token;n.info("redirecting to: "+r),t.path(r)},p.changeSection=function(e){for(n.info("are we here"),i=1;i<=3;i++)i==e?(p.manageSections[i].active=!0,p.manageSections[i].style["background-color"]="yellow",p.manageSections[i].style.color="black"):(p.manageSections[i].active=!1,p.manageSections[i].style["background-color"]="gray",p.manageSections[i].style.color="white")},p.saveEventTime=function(e,n){p.event.eventTimes||(p.event.eventTimes={start:"",end:""},p.event.eventTimes.start=p.dateTimeToUnixTime(p.tempDateTime.start),p.event.eventTimes.end=p.dateTimeToUnixTime(p.tempDateTime.end)),p.tempDateTime.end<p.tempDateTime.start&&"start"==n&&(p.tempDateTime.end=p.tempDateTime.start),"start"==n&&(p.event.eventTimes.start=p.dateTimeToUnixTime(e)),"end"==n&&(p.event.eventTimes.end=p.dateTimeToUnixTime(e))},p.guestsAreInvited=function(){return!!p.event.guestList},p.validateGuestEmail=function(){if(p.newGuest.email.address){var e=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","");e.test(p.newGuest.email.address)?(p.newGuest.email.valid=!0,p.newGuest.email.style={color:"green"}):(p.newGuest.email.valid=!1,p.newGuest.email.style={color:""})}},p.isSectionComplete=function(){for(i=0;i<8;i++)n.info(p.requiredInputs[i])},p.saveAndAdvance=function(){p.event.$save().then(function(){n.info("event saved")})["catch"](function(e){n.info("error! "+e)}),p.isSectionComplete(),1==p.manageSections[1].complete&&1==p.manageSections[2].complete&&1==p.manageSections[3].complete?p.eventRedirect("/userEvents",o.uid):p.manageSections[1].active?p.changeSection(2):p.manageSections[2].active?p.changeSection(3):p.manageSections[3].active&&p.changeSection(1)},p.addGuestToHostsList=function(){var e=s(p.newGuest.email.address);if(p.newGuest.name&&p.newGuest.email.valid){if(p.event.guestList)for(var t=0;p.event.guestList[t];){if(p.event.guestList[t].email==l(e))return n.info("This guest is already on the list"),void u();t++}else p.event.guestList={};if(b[e]){if(b[e]==o.uid)return n.info("tried to register the host"),void u();d(b[e]),p.event.guestList[b[e]]={attending:!1,status:"pending",name:p.newGuest.name,email:p.newGuest.email.address}}else f(e),p.event.guestList[e]={attending:!1,status:"pending",name:p.newGuest.name,email:p.newGuest.email.address};p.saveEvent(),u()}else n.info("you didn't enter a name and or email")},p.guestWillAttend=function(e){var t=w.child("Users").child(o.uid).child("events"),i=0,r=!1;if(p.event.guestList[o.uid].attending=e,p.event.guestList[o.uid].status="attending",t.child("pending").on("value",function(r){var a=r.val();n.info(a),n.info(a[o.hostId]),n.info(a[o.hostId][o.eventId]);var s=a[o.hostId][o.eventId];n.info(s);for(invitation in a)i++;n.info("total attending: "+i),e&&t.child("attending").child(o.hostId).child(o.eventId).set(s,function(e){e&&n.info(e)})}),t.child("attending").on("value",function(e){var t=e.val();n.info("this is the attending list"),n.info(t),t.updated&&(r=!0)},function(e){e&&n.info(e)}),2>i){var a=new Date;t.child("pending").update({updated:c(a)},function(e){e&&n.info(e)})}t.child("pending").child(o.hostId).remove(),r&&n.info("removing the updated placeholder"),p.event.$save()},p.updateUpdatedParam=function(){var e=w.child("Users").child(o.uid).child("events");n.info("updating the param"),e.child("attending").on("value",function(e){n.info(e.val())}),e.child("attending").child("updated").remove()},p.addInvitationToAttending=function(e){var t=w.child("Users").child(o.uid).child("events"),i=0;t.child("pending").on("value",function(r){var a=r.val(),s=a[o.hostId][o.eventId];n.info(a),n.info(a[o.hostId]),n.info(a[o.hostId][o.eventId]);for(invitation in a)i++;n.info("total pending invitations: "+i),n.info(e),e&&t.child("attending").child(o.hostId).child(o.eventId).set(s,function(e){e&&n.info(e)})})},a()}function LandingPageController(e,n,t,o,r){function a(e){return btoa(e)}function s(e){return Date.parse(e)}function l(i,o){var r=i+"/"+d.uid+"/"+d.token;n.info("redirecting to: "+r),t.path(r),e.$apply()}var c=this,u="https://meetupplanner.firebaseio.com/",d={};c.showRequirnments=!1,c.validNewName={valid:!1,style:{color:""}},c.validNewEmail={valid:!1,style:{color:""}},c.securePassword={secure:!1,style:{color:""}},c.unlockCreateUserBtn={usable:!1,"class":"btn btn-warning"},c.message="testing",c.validUserEmail={valid:!1,style:{color:""}},c.validUserPassword={valid:!1,style:{color:""}},c.unclockUserLoginBtn={usable:!1,"class":"btn btn-warning"},c.passwordRequirnments={0:{constraint:"Is at least 16 characters long",style:{color:"red"},met:!1},1:{constraint:"Is no longer than 100 characters",style:{color:"red"},met:!1},2:{constraint:"Contains at least one required symbol (!@#$%^&*)",style:{color:"red"},met:!1},3:{constraint:"Contains at least one number",style:{color:"red"},met:!1},4:{constraint:"Contains at least one lowercase letter",style:{color:"red"},met:!1},5:{constraint:"Contains at least one uppercase letter",style:{color:"red"},met:!1},6:{constraint:"Doesn't have any illegal characters",style:{color:"red"},met:!1}},c.displayPassReqs=function(){c.newName&&c.newEmail?c.showRequirnments=!0:c.showRequirnments=!1},c.checkNewName=function(){c.newName&&(c.newName.length>0?(c.validNewName.valid=!0,c.validNewName.style={color:"green"}):(c.validNewName.valid=!1,c.validNewName.style={color:"red"})),c.openCreateUserButton()},c.checkNewEmail=function(){if(c.newEmail){var e=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","");e.test(c.newEmail)?(c.validNewEmail.valid=!0,c.validNewEmail.style={color:"green"}):(c.validNewEmail.valid=!1,c.validNewEmail.style={color:"red"})}c.openCreateUserButton()},c.checkUserEmail=function(){if(c.userEmail){var e=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","");e.test(c.userEmail)?(c.validUserEmail.valid=!0,c.validUserEmail.style={color:"green"}):(c.validUserEmail.valid=!1,c.validUserEmail.style={color:"red"})}c.openUserLoginBtn()},c.checkNewPasswords=function(){var e={0:[""," your password needs to be 16 characters or longer"],1:[""," your password needs to be less than 100 characters"],2:["[!@#$%^&*]"," no required symbols found"],3:["[0-9]"," no numbers found"],4:["[a-z]"," no lowercase letters found"],5:["[A-Z]"," no uppercase letters found"],6:["[^A-z0-9!@#$%^&*]"," illegal characters found"]};if(c.newPassword){for(c.newPassword.length>15?(c.passwordRequirnments[0].style={color:"green"},c.passwordRequirnments[0].met=!0):(c.passwordRequirnments[0].style={color:"red"},c.passwordRequirnments[0].met=!1),c.newPassword.length<=100?(c.passwordRequirnments[1].style={color:"green"},c.passwordRequirnments[1].met=!0):(c.passwordRequirnments[1].style={color:"red"},c.passwordRequirnments[1].met=!1),i=2;i<6;i++){var n=new RegExp(e[i][0],"");n.test(c.newPassword)?(c.passwordRequirnments[i].style={color:"green"},c.passwordRequirnments[i].met=!0):(c.passwordRequirnments[i].style={color:"red"},c.passwordRequirnments[i].met=!1)}var n=new RegExp(e[6][0],"");n.test(c.newPassword)?(c.passwordRequirnments[6].style={color:"green"},c.passwordRequirnments[6].met=!0):(c.passwordRequirnments[6].style={color:"red"},c.passwordRequirnments[6].met=!1),c.passwordRequirnments[0].met&&c.passwordRequirnments[1].met&&c.passwordRequirnments[2].met&&c.passwordRequirnments[3].met&&c.passwordRequirnments[4].met&&c.passwordRequirnments[5].met&&c.passwordRequirnments[6].met?c.securePassword.secure=!0:c.securePassword.secure=!1,c.securePassword.secure?c.securePassword.style={color:"green"}:c.securePassword.style={color:"red"}}c.openCreateUserButton()},c.checkUserPasswords=function(){c.userPassword&&(c.userPassword.length>15?(c.validUserPassword.style={color:"green"},c.validUserPassword.valid=!0):(c.validUserPassword.style={color:"red"},c.validUserPassword.valid=!1)),c.openUserLoginBtn()},c.openCreateUserButton=function(){c.validNewName.valid&&c.validNewEmail.valid&&c.securePassword.secure?(c.unlockCreateUserBtn["class"]="btn btn-success",c.unlockCreateUserBtn.usable=!0):(c.unlockCreateUserBtn["class"]="btn btn-warning",c.unlockCreateUserBtn.usable=!1)},c.openUserLoginBtn=function(){c.validUserEmail.valid&&c.validUserPassword.valid?(c.unclockUserLoginBtn["class"]="btn btn-success",c.unclockUserLoginBtn.usable=!0):(c.unclockUserLoginBtn["class"]="btn btn-warning",c.unclockUserLoginBtn.usable=!1)},c.update=function(){c.newName=o.find("#newName")[0].value,c.newEmail=o.find("#newEmail")[0].value,c.userEmail=o.find("#userEmail")[0].value,c.checkNewName(),c.checkNewEmail(),c.checkUserEmail()},c.createNewUser=function(){if(n.info("Creating a new user account now!"),c.unlockCreateUserBtn.usable){var e=new Firebase(u);e.createUser({email:c.newEmail,password:c.newPassword},function(t,i){if(t)n.info("Error creating user: "+t);else{n.info(i),d=i;var o=e.child("Users/"+i.uid),r=new Date;o.set({bio:{name:c.newName,email:c.newEmail},events:{pending:{updated:s(r)},hosting:{updated:s(r)},attending:{updated:s(r)},completed:{updated:s(r)}}},function(e){e?n.info("Data could not be saved: "+e):n.info("Data saved successfully.")}),e.child("Uids").child(a(c.newEmail)).set(d.uid,function(e){e?n.info("Data could not be saved. "+e):n.info("uid created sucessfully.")}),l("/userInformation",d)}})}},c.loginRegisteredUser=function(){if(c.unclockUserLoginBtn.usable){var t=new Firebase(u);t.authWithPassword({email:c.userEmail,password:c.userPassword},function(t,i){t?n.info("Error Logging In: "+t):(n.info("Logged In successfully: "+i.uid),n.info(i),d=i,l("/userInformation",d),e.$apply())})}},c.alertMe=function(){alert("this is working! an alert!")},c.onResizeFunction=function(){var e=angular.element(".inputText");r.outerWidth>r.outerHeight?(e.css("font-size","2em"),n.info("making bigger")):e.css("font-size","1.2em")},"addEventListener"in o&&o.addEventListener("DOMContentLoaded",function(){n.info("adding FastClick"),FastClick.attach(o.body)},!1),angular.element(r).bind("resize",function(){c.onResizeFunction()}),angular.element(o).ready(function(){r.outerWidth<600&&c.onResizeFunction()}),c.master={},c.update=function(e){c.master=angular.copy(e)},c.reset=function(e){e&&(e.$setPristine(),e.$setUntouched()),c.user=angular.copy(c.master)},c.reset()}function MainController(e,n,t,i){function o(){angular.element(t);t.css("hight",i.outerHeight)}var r=this,a="https://meetupplanner.firebaseio.com/",s=new Firebase(a);r.logout=function(){alert("logging you out!"),s.unauth(),n.path("/")},angular.element(t).ready(function(){o()})}function NewUserSignUpController(e,n,t,o,r,a){function s(){""!=l.errors.name||""!=l.errors.email||l.errors.password?l.errors.passesAllTests=!1:l.errors.passesAllTests=!0,angular.isDefined(l.inputs.newName)&&""!==l.inputs.newName&&angular.isDefined(l.inputs.newEmail)&&""!==l.inputs.newEmail&&angular.isDefined(l.inputs.newPassword)&&""!==l.inputs.newPassword?l.inputs.requiredFieldsDefined=!0:l.inputs.requiredFieldsDefined=!1}var l=this;l.inputs={newName:"",newEmail:"",newPassword:"",requiredFieldsDefined:!1},l.errors={name:"",email:"",password:!1,passesAllTests:!1},l.passReqs={0:{id:"",req:"Is at least 16 characters long",fulfilled:!1,style:{color:"red"}},1:{id:"",req:"Is no longer than 100 characters",fulfilled:!1,style:{color:"red"}},2:{id:"",req:"Contains at least one lowercase letter",fulfilled:!1,style:{color:"red"}},3:{id:"",req:"Contains at least one uppercase letter",fulfilled:!1,style:{color:"red"}},4:{id:"",req:"Contains at least one number",fulfilled:!1,style:{color:"red"}},5:{id:"",req:"Contains at least one required symbol (!@#$%^&*)",fulfilled:!1,style:{color:"red"}},6:{id:"",req:"Doesn't have any illegal characters",fulfilled:!0,style:{color:"red"}}},l.showReqsBox=!1;var c=t;l.checkNewName=function(){var e=[],n=c.required(l.inputs.newName),t=c.minNameLength(l.inputs.newName);angular.isDefined(n)&&e.push(n),angular.isDefined(t)&&e.push(t),e.length>0?l.errors.name=e.join(", "):l.errors.name="",s()},l.checkNewEmail=function(){var e=[],n=c.required(l.inputs.newEmail),t=c.email(l.inputs.newEmail);angular.isDefined(n)&&e.push(n),angular.isDefined(t)&&e.push(t),e.length>0?l.errors.email=e.join(", "):l.errors.email="",s()},l.checkNewPassword=function(){l.showReqsBox=!0;var e=[],n=c.required(l.inputs.newPassword),t=[c.minPassLength(l.inputs.newPassword),c.maxPassLength(l.inputs.newPassword),c.atLeastOneLowercase(l.inputs.newPassword),c.atLeastOneUppercase(l.inputs.newPassword),c.atLeastOneNumber(l.inputs.newPassword),c.atLeastOneSymbol(l.inputs.newPassword),c.illegalCharacter(l.inputs.newPassword)];angular.isDefined(n)&&e.push(n),e.length>0?l.errors.password=e.join(", "):l.errors.email="";var o=!1;for(i=0;i<7;i++)t[i]?(l.passReqs[i].fulfilled=!0,l.passReqs[i].style={color:"green"}):(l.passReqs[i].fulfilled=!1,l.passReqs[i].style={color:"red"},o=!0);l.errors.password=o,s()},l.exitPassword=function(){l.checkNewPassword(),l.showReqsBox=!1},l.createNewUser=function(){var e=r;if(l.errors.passesAllTests&&l.inputs.requiredFieldsDefined){var t=o,i=a;t.createNewUser(l.inputs.newEmail,l.inputs.newPassword).then(function(o){i.loadPrimaries(l.inputs.newEmail,l.inputs.newName,o.uid),t.addNewUserToDatabase(o.uid,l.inputs.newName,l.inputs.newEmail).then(function(i){n.info(i),t.addNewUserToRegUsersList(o.uid,l.inputs.newEmail).then(function(t){e.redirectTo("/userInformation",o.uid),n.info(t)})["catch"](function(e){n.info(e)})})["catch"](function(e){n.info(e)})})["catch"](function(e){n.info(e)})}}}function RegUserLoginController(e,n,t,i,o){function r(){angular.isDefined(a.inputs.email)&&""!==a.inputs.email&&angular.isDefined(a.inputs.password)&&""!==a.inputs.password?(a.inputs.requiredFieldsDefined=!0,a.unclockUserLoginBtn["class"]="btn btn-success",a.unclockUserLoginBtn.message="Login",a.unclockUserLoginBtn.usable=!0):(a.inputs.requiredFieldsDefined=!1,a.unclockUserLoginBtn["class"]="btn btn-warning",a.unclockUserLoginBtn.message="Need Email & Pass",a.unclockUserLoginBtn.usable=!1)}var a=this;a.inputs={email:"",password:"",requiredFieldsDefined:!1},a.errors={message:"",passesAllTests:!0},a.unclockUserLoginBtn={usable:!1,"class":"btn btn-warning",message:"Need Email & Pass"},a.update=function(){a.inputs.email=n.find("#userEmail")[0].value,a.inputs.password=n.find("#userPassword")[0].value,r()},a.loginRegisteredUser=function(){var n=i,r=t,s=o;r.LoginRegisteredUser(a.inputs.email,a.inputs.password).then(function(e){a.errors.passesAllTests=!0,s.setPrimariesLocally(a.inputs.email,a.inputs.name,e.uid)}).then(function(){e.info("uid is "+s.getUIDLocally()),r.getUserBio(s.getUIDLocally()).then(function(n){s.updateBioLocally(n),r.getUserEvents(s.getUIDLocally()).then(function(e){s.updateAllUserEventsLocally(e)})["catch"](function(n){e.info(n)})})["catch"](function(n){e.info(n)}),n.redirectTo("/userInformation",s.getUIDLocally())})["catch"](function(e){a.errors.message=e,a.errors.passesAllTests=!1})},a.clicked=function(){var e=t;e.logUserOut()}}function topMenuController(e,n,t,i,o){function r(e){e?(n.info("User "+e.uid+" is logged in with "+e.provider),s.loggedIn=!0):(n.info("User is logged out"),s.loggedIn=!1)}function a(e,i){var o=e+"/"+i.uid+"/"+i.token;n.info("redirecting to: "+o),t.path(o)}var s=this,l="https://meetupplanner.firebaseio.com/",c=new Firebase(l);s.loggedIn=!1,"addEventListener"in i&&i.addEventListener("DOMContentLoaded",function(){n.info("adding FastClick"),FastClick.attach(i.body)},!1),angular.element(o).bind("resize",function(){s.onResizeFunction(),e.$apply()}),angular.element(i).ready(function(){o.outerWidth<600&&(s.onResizeFunction(),e.$apply())}),s.logout=function(){n.info("logging out!"),s.loggedIn=!1,c.unauth(),a("/",{uid:"",token:""})},s.navBarLoginRegisteredUser=function(){n.info("launching login");var t=new Firebase(l);t.authWithPassword({email:s.navbarUserEmail,password:s.navbarUserPass},function(t,i){t?n.info("Error Logging In: "+t):(n.info("Logged In successfully: "+i.uid),n.info(i),a("/userInformation",i),e.$apply(),angular.element(".navbar-toggle").click())})},s.onResizeFunction=function(){var e=angular.element(".navbarInputs");e.css("width",o.outerWidth-26+"px")},c.onAuth(r)}function UserEventsController(e,n,t,i){function o(e){return Date.parse(e)}function r(){var e=0;for(event in c.events.hosting)e++;return e}function a(){var e=new Date,n=10*o(e)+r();return n}function s(){Object.keys(c.events).forEach(function(e){Object.keys(c.events[e]).forEach(function(n){var t=0;angular.isObject(c.events[e][n])&&t++,t>0?c.sectionAvailable[e]=!0:c.sectionAvailable[e]=!1})})}function l(){u.setUIDLocally(n.uid),u.loadBio(n.uid).then(function(e){c.userBio=e})["catch"](),c.events=u.getAllUserEventsLocally(),u.getRemoteEventsForLocal().then(function(e){c.events=u.getAllUserEventsLocally()}).then(function(){s()})}var c=this,u=t;c.showDecline=!1,c.userBio={},c.events={},c.sectionAvailable={pending:!1,attending:!1,hosting:!1,completed:!1},c.errors={},c.createNewEvent=function(){var n=a(),t=i;u.createNewEvent(n).then(function(n){e.info(n)}).then(function(){u.cleanDBEventsCategory("hosting")})["catch"](function(n){e.info(n)}),t.redirectTo("/event",n,u.getUIDLocally(),u.getUIDLocally())},l()}function UserInformationController(e,n,t,i,o){function r(e){return new Date(parseInt(e))}function a(e){return Date.parse(e)}function s(){c.loadBio(t.uid).then(function(e){l.user=e,angular.isDefined(e.dob)&&""!==e.dob&&(l.tempBirthday=r(e.dob))})}var l=this,c=i;l.user={},l.tempBirthday,l.view={dataToSave:!1,isData:!1,btnMssg:"Move On...",proceedBtn:"btn btn-primary"},l.checkValues=function(){l.view.isData=!0,!angular.isUndefined(l.user.company)&&""!==l.user.company||!angular.isUndefined(l.user.title)&&""!==l.user.title||!angular.isUndefined(l.user.dob)&&""!==l.user.dob?(l.view.dataToSave=!0,l.view.proceedBtn="btn btn-success",l.view.btnMssg="Save & Continue"):(l.view.dataToSave=!1,l.view.proceedBtn="btn btn-primary",l.view.btnMssg="Move On...")},l.updateDOB=function(){l.user.dob=a(l.tempBirthday),l.checkValues()},l.saveAndMoveOn=function(){var n=o,i=c.getUIDLocally();0!==l.tempBirthday&&l.updateDOB(),(""==i||angular.isUndefined(i))&&c.setUIDLocally(t.uid),l.view.isData&&(e.info("saving the new data"),c.updateBioLocally(l.user)),n.redirectTo("/userEvents",l.user.uid)},s()}function authService(e,n,t){function i(n){n?e.info("User "+n.uid+" is logged in with "+n.provider):(e.info("User is logged out...dumping them back to landing page"),t.path("/"))}function o(){return a.onAuth(i),!0}var r="https://meetupplanner.firebaseio.com/",a=new Firebase(r),s={isLoggedIn:o};return s}function backendServices(e,n,t){function i(e){return btoa(e)}function o(e){return atob(e)}function r(e){return new Date(parseInt(e))}function a(e){return Date.parse(e)}function s(e,t){var i=new Firebase(y);return n(function(n,o){i.createUser({email:e,password:t},function(e,t){e?o("Error creating user: "+e):n(t)})})}function l(e,t,i){var o=new Firebase(y),r=o.child("Users").child(e),s=new Date;return n(function(n,o){r.set({bio:{uid:e,name:t,email:i},events:{pending:{updated:a(s)},hosting:{updated:a(s)},attending:{updated:a(s)},completed:{updated:a(s)}}},function(e){e?o("Data could not be saved: "+e):n("Data saved successfully.")})})}function c(e,t){var o=new Firebase(y),r=i(t),a=o.child("Uids").child(r);return n(function(n,t){a.set(e,function(e){e?t("Data could not be saved. "+e):n("uid created sucessfully.")})})}function u(t,i){var o=new Firebase(y);return n(function(n,r){o.authWithPassword({email:t,password:i},function(t,i){t?r("Error Logging In: "+t):(e.info("Logged In successfully: "+i.uid),n(i))})})}function d(){var n=new Firebase(y);return new Promise(function(t,i){n.onAuth(function(n){n?(e.info("User "+n.uid+" is logged in with "+n.provider),t(!0)):(e.info("User is logged out"),t(!1))})})}function f(){var n=new Firebase(y);e.info("logging user out"),n.unauth()}function g(e){var t=new Firebase(y),i=e.uid,o=t.child("Users").child(i);return n(function(n,t){o.update(e,function(e){e?t("There was a problem updating that record: "+e):n("all user data uploaded successfully")})})}function m(e){var t=new Firebase(y),i=e.uid.toString(),o=t.child("Users").child(i).child("bio");return n(function(n,t){o.update(e,function(e){e?t("There was a problem updating that record: "+e):n("all user bio data uploaded successfully")})})}function v(){}function p(e){var t=new Firebase(y),i=t.child("Users").child(e).child("bio");return n(function(e,n){i.once("value",function(n){e(n.val())},function(e){e&&n(e)})})}function h(e,t){var i=new Firebase(y),o=t.id,r=i.child("Users").child(e).child("events").child("hosting").child(o);return n(function(e,n){r.set(t,function(t){t?n("There was an error: "+t):e("New event saved to DB successfully")})})}function w(e){var t=new Firebase(y),i=t.child("Users").child(e).child("events");return n(function(e,n){i.once("value",function(n){var t=n.val(),i={hosting:t.hosting,attending:t.attending,pending:t.pending,completed:t.completed};e(i)},function(e){e&&n(e)})})}function U(e,t){var i=new Firebase(y),o=i.child("Users").child(t).child("events").child(e).child("updated");return n(function(e,n){o.set(null,function(t){t?n("There was an error deleting update field: "+t):e("Deleted update successfully")})})}function b(e,t){var i=new Firebase(y),o=i.child("Users").child(t).child("events").child(e);return n(function(e,n){o.once("value",function(t){var i=t.val();angular.isDefined(i.updated)?e(!0):n(!1)},function(e){e&&n(e)})})}var y="https://meetupplanner.firebaseio.com/",E={utf8_to_b64:i,b64_to_utf8:o,unixTimeToDateTime:r,dateTimeToUnixTime:a,LoginRegisteredUser:u,checkLoginStatus:d,logUserOut:f,downloadUserData:v,getUserBio:p,getUserEvents:w,createNewUser:s,addNewUserToDatabase:l,addNewUserToRegUsersList:c,uploadUserData:g,uploadUserBio:m,createHostedEvent:h,deleteUpdateField:U,thereWasAnUpdateField:b};return E}function trafficValet(e,n){function t(t,i,o,r){angular.isDefined(i)?(t=t+"/"+i,angular.isDefined(o)&&(t=t+"/"+o,angular.isDefined(r)&&(t=t+"/"+r,e.info("redirecting now to "+t),n.path(t)),e.info("redirecting now to "+t),n.path(t)),e.info("redirecting now to "+t),n.path(t)):(e.info("redirecting now to "+t),n.path(t))}var i={redirectTo:t};return i}function userData(e,n,t){function i(){return""!==q.bio.uid&&""!==q.bio.name&&""!==q.bio.email}function o(e){Object.keys(q.events[e]).forEach(function(n){angular.isObject(q.events[e][n])||delete q.events[e][n]})}function r(){return q.bio.uid}function a(){return q.bio.name}function s(){return q.bio.email}function l(){return q.bio.company}function c(){return q.bio.title}function u(){return q.bio.dob}function d(){return{uid:q.bio.uid,name:q.bio.name,email:q.bio.email,company:q.bio.company,title:q.bio.title,dob:q.bio.dob}}function f(e){return q.events[e]}function g(){return q.events}function m(e){q.bio.uid=e}function v(e){q.bio.name=e}function p(e){q.bio.email=e}function h(e){q.bio.company=e}function w(e){q.bio.title=e}function U(e){q.bio.dob=e}function b(e,n,t){angular.isDefined(e)&&p(e),angular.isDefined(n)&&a(n),angular.isDefined(t)&&m(t)}function y(e,n){var t=n.id;o(e),q.events[e][t]=n}function E(e){q.events=e}function L(e){v(e.name),p(e.email),h(e.company),w(e.title),U(e.dob),C()}function D(e,n){delete q.events[e][n.id]}function T(){var e=t;e.downloadUserData().then(function(e){q=e})}function I(e){var i=t;return n(function(n,t){i.getUserBio(e).then(function(e){n(e)})["catch"](function(e){t("There was an error reading the user bio: "+e)})})}function $(){var e=t;return n(function(n,t){e.getUserEvents(r()).then(function(e){Object.keys(e).forEach(function(n){Object.keys(e[n]).forEach(function(t){y(n,e[n][t])})}),n(e)})["catch"](function(e){t("There was an error reading the user events: "+e)})})}function A(){var e=t;e.uploadUserData(q)}function C(){var e=t;e.uploadUserBio(q.bio)}function k(){}function R(i){var o=t;return n(function(n,t){o.thereWasAnUpdateField(i,r()).then(function(n){o.deleteUpdateField(i,r()).then(function(n){e.info(n)})["catch"](function(n){e.info(n)})})["catch"](function(n){e.info(n)})})}function N(e){return n(function(n,t){i()?n(d()):I(e).then(function(e){n(e)})["catch"](function(e){t(e)})})}function P(e){var t={};return n(function(e,n){$().then(function(n){e(n)}),t=f(type),e(t)})}function B(e){var i=t,o={};return o={id:e,name:"",type:"",host:{name:"",uid:""},message:"",eventTimes:{start:0,end:0},address:{street01:"",street02:"",street03:"",city:"",state:"",zip:0},guestList:{}},y("hosting",o),n(function(e,n){i.createHostedEvent(r(),o).then(function(n){e(n)})["catch"](function(e){n(e)})})}var q={bio:{uid:"",name:"",email:"",company:"",title:"",dob:0},events:{hosting:{},pending:{},attending:{},completed:{}}},S={bioPrimariesAreCompleteLocally:i,cleanEvents:o,getUIDLocally:r,getNameLocally:a,getEmailLocally:s,getCompanyLocally:l,getTitleLocally:c,getDOBLocally:u,getFullBioLocally:d,getUserEventsLocally:f,getAllUserEventsLocally:g,setUIDLocally:m,setNameLocally:v,setEmailLocally:p,setCompanyLocally:h,setTitleLocally:w,setDOBLocally:U,setPrimariesLocally:b,updateUserEventsLocally:y,updateAllUserEventsLocally:E,updateBioLocally:L,removeUserEventsLocally:D,getFullRemoteDBforLocal:T,getRemoteBioForLocal:I,getRemoteEventsForLocal:$,setFullRemoteDBfromLocal:A,setRemoteBioFromLocal:C,setRemoteEventsFromLocal:k,cleanDBEventsCategory:R,loadBio:N,loadEventsProgressively:P,createNewEvent:B};return S}function validation(e){function n(e){return angular.isUndefined(e)?"This is a required field":void 0}function t(e){return angular.isDefined(e)&&e.length<f?"Name should be at least "+f+" characters":void 0}function i(e){return angular.isDefined(e)&&!(e.length<g)}function o(e){return angular.isDefined(e)&&!(e.length>m)}function r(e){if(angular.isDefined(e)){var n=new RegExp("[!@#$%^&*]");return!!n.test(e)}return!1}function a(e){if(angular.isDefined(e)){var n=new RegExp("[0-9]","");return!!n.test(e)}return!1}function s(e){if(angular.isDefined(e)){var n=new RegExp("[a-z]","");return!!n.test(e)}return!1}function l(e){if(angular.isDefined(e)){var n=new RegExp("[A-Z]","");return!!n.test(e)}return!1}function c(e){if(angular.isDefined(e)){var n=new RegExp("[^A-z0-9!@#$%^&*]","");return!n.test(e)}return!1}function u(e){var n=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","");return n.test(e)?void 0:"Not a valid e-mail address"}function d(e){}var f=3,g=16,m=100,v={required:n,minNameLength:t,minPassLength:i,maxPassLength:o,atLeastOneSymbol:r,atLeastOneNumber:a,atLeastOneLowercase:s,atLeastOneUppercase:l,illegalCharacter:c,email:u,dateOfBirth:d};return v}function config(e){e.when("/",{templateUrl:"views/landingPage.htm",controller:"LandingPageController",controllerAs:"vm"}).when("/signup",{templateUrl:"views/newUserSignup.htm",controller:"NewUserSignUpController",controllerAs:"vm"}).when("/login",{templateUrl:"views/registeredUserLogin.htm",controller:"RegUserLoginController",controllerAs:"vm"}).when("/userInformation/:uid?",{templateUrl:"views/userInformation.htm",controller:"UserInformationController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).when("/userEvents/:uid?",{templateUrl:"views/userEvents.htm",controller:"UserEventsController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).when("/event/:eventId?/:hostId?/:uid?",{templateUrl:"views/anEvent.htm",controller:"AnEventController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).otherwise({redirectTo:"/"})}function userAuthenticationService(e){e.isLoggedIn()}function hostedEventsList(){function e(e,n,t,i){}function n(e,n){function t(e){return new Date(parseInt(e))}function i(e){var n=0;return o.guestsAreInvited=!0,Object.keys[e].forEach(function(e){n++}),n}var o=this,r=n;o.guestsAreInvited=!1,o.formatDate=function(n){return e.info("got thist time: "+n),t(n)},o.guestsAttending=function(e){return angular.isDefined(e)&&angular.isDefined(e.attending)?i(e.attending):0},o.guestsInvited=function(e){function n(){return t.attending+t.pending+t.declined}if(angular.isDefined(e)){var t={attending:0,pending:0,declined:0};return angular.isDefined(e.attending)&&(t.attending=i(e.attending)),angular.isDefined(e.pending)&&(t.pending=i(e.pending)),angular.isDefined(e.declined)&&(t.declined=i(e.declined)),n()}return 0},o.percentageAttending=function(e){return angular.isDefined(e)?guestsAttending(guestlist)/guestsInvited(e):0},o.eventClicked=function(n){e.info("redirecting to: /event/"+n+"/"+o.hostedEvents[n].host.uid+"/"+o.userId),r.redirectTo("/event",n,o.hostedEvents[n].host.uid,o.userId)}}e.$inject=["scope","el","attr","ctrl"];var t={restrict:"AECM",templateUrl:"../views/directives/hostedEventsList.directive.htm",replace:!0,scope:{hostedEvents:"=",userId:"="},link:e,controller:n,controllerAs:"vm",bindToController:!0};return n.$inject=["$log","trafficValet"],t}function toolBar(){function e(e,n,t,i){}function n(e,n){var t=this,i=n;i.checkLoginStatus().then(function(e){t.loggedIn=e})["catch"](),t.clicked=function(){e.info("button clicked")}}e.$inject=["scope","el","attr","ctrl"];var t={restrict:"AECM",templateUrl:"../views/directives/toolBar.directive.htm",replace:!0,scope:{},link:e,controller:n,controllerAs:"vm",
bindToController:!0};return n.$inject=["$log","backendServices"],t}config.$inject=["$routeProvider"],userAuthenticationService.$inject=["authService"],angular.module("meetUpEventApp",["ngRoute","ngTouch","firebase"]),angular.module("meetUpEventApp").controller("AnEventController",AnEventController),AnEventController.$inject=["$scope","$log","$location","$routeParams","$firebaseObject"],angular.module("meetUpEventApp").controller("LandingPageController",LandingPageController),LandingPageController.$inject=["$scope","$log","$location","$document","$window"],angular.module("meetUpEventApp").controller("MainController",MainController),MainController.$inject=["$log","$location","$document","$window"],angular.module("meetUpEventApp").controller("NewUserSignUpController",NewUserSignUpController),NewUserSignUpController.$inject=["$scope","$log","validation","backendServices","trafficValet","userData"],angular.module("meetUpEventApp").controller("RegUserLoginController",RegUserLoginController),RegUserLoginController.$inject=["$log","$document","backendServices","trafficValet","userData"],angular.module("meetUpEventApp").controller("topMenuController",topMenuController),topMenuController.$inject=["$scope","$log","$location","$document","$window"],angular.module("meetUpEventApp").controller("UserEventsController",UserEventsController),UserEventsController.$inject=["$log","$routeParams","userData","trafficValet"],angular.module("meetUpEventApp").controller("UserInformationController",UserInformationController),UserInformationController.$inject=["$log","$document","$routeParams","userData","trafficValet"],angular.module("meetUpEventApp").factory("authService",authService),authService.$inject=["$log","$q","$location"],angular.module("meetUpEventApp").factory("backendServices",backendServices),backendServices.$inject=["$log","$q","$window"],angular.module("meetUpEventApp").factory("trafficValet",trafficValet),trafficValet.$inject=["$log","$location"],angular.module("meetUpEventApp").factory("userData",userData),userData.$inject=["$log","$q","backendServices"],angular.module("meetUpEventApp").factory("validation",validation),validation.$inject=["$log"],angular.module("meetUpEventApp").config(config),angular.module("meetUpEventApp").directive("hostedEventsList",hostedEventsList),angular.module("meetUpEventApp").directive("toolBar",toolBar);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFuRXZlbnQuY29udHJvbGxlci5qcyIsIkxhbmRpbmdQYWdlLmNvbnRyb2xsZXIuanMiLCJNYWluLmNvbnRyb2xsZXIuanMiLCJOZXdVc2VyU2lnblVwLmNvbnRyb2xsZXIuanMiLCJSZWdVc2VyTG9naW4uY29udHJvbGxlci5qcyIsIlRvcE1lbnUuY29udHJvbGxlci5qcyIsIlVzZXJFdmVudHMuY29udHJvbGxlci5qcyIsIlVzZXJJbmZvcm1hdGlvbi5jb250cm9sbGVyLmpzIiwiQXV0aFNlcnZpY2UuZmFjdG9yeS5qcyIsIkJhY2tlbmRTZXJ2aWNlcy5mYWN0b3J5LmpzIiwiVHJhZmZpY1ZhbGV0LmZhY3RvcnkuanMiLCJVc2VyRGF0YS5mYWN0b3J5LmpzIiwiVmFsaWRhdGlvbi5mYWN0b3J5LmpzIiwicm91dGUtY29uZmlnLmpzIiwiYXBwLmpzIiwiSG9zdGVkRXZlbnRzTGlzdC5kaXJlY3RpdmUuanMiLCJUb29sQmFyLmRpcmVjdGl2ZS5qcyIsImFwcC5tb2R1bGUuanMiXSwibmFtZXMiOlsiQW5FdmVudENvbnRyb2xsZXIiLCIkc2NvcGUiLCIkbG9nIiwiJGxvY2F0aW9uIiwiJHJvdXRlUGFyYW1zIiwiJGZpcmViYXNlT2JqZWN0IiwiaW5pdCIsInZtIiwidGVtcERhdGVUaW1lIiwic3RhcnQiLCJlbmQiLCJuZXdHdWVzdCIsIm5hbWUiLCJlbWFpbCIsImFkZHJlc3MiLCJ2YWxpZCIsInN0eWxlIiwiY29sb3IiLCJzaG93SWZIb3N0IiwiaGlkZUlmQXR0ZW5kaW5nIiwibWFuYWdlU2VjdGlvbnMiLDEsImFjdGl2ZSIsImNvbXBsZXRlIiwiYmFja2dyb3VuZC1jb2xvciIsMiwzLCJjaGVja0Zvckhvc3QiLCJjaGVja0lmR3Vlc3RJc0F0dGVuZGluZyIsIm9wZW5BbGxTZWN0aW9ucyIsInV0ZjhfdG9fYjY0Iiwic3RyIiwiYnRvYSIsImI2NF90b191dGY4IiwiYXRvYiIsImRhdGVUaW1lVG9Vbml4VGltZSIsImRhdGVUaW1lIiwiRGF0ZSIsInBhcnNlIiwiY2xlYW5OZXdHdWVzdFZhcmlhYmxlIiwiaW52aXRlQVJlZ2lzdGVyZWRVc2VyIiwidWlkIiwiaW5mbyIsInJlZiIsImNoaWxkIiwiZXZlbnRJZCIsInNldCIsImlkIiwiZXZlbnRUaW1lcyIsImV2ZW50IiwiaG9zdCIsImVycm9yIiwib25jZSIsInNuYXBzaG90IiwiY2hlY2tGb3JQbGFjZWhvbGRlciIsInZhbCIsInVwZGF0ZWQiLCJyZW1vdmUiLCJlcnJvck9iamVjdCIsImNvZGUiLCJpbnZpdGVBblVucmVnaXN0ZXJlZFVzZXIiLCJ1c2VyS2V5IiwiYXV0aERhdGEiLCJnZXRBdXRoIiwiaG9zdElkIiwidXNlckV2ZW50cyIsIm9uIiwiYWxsR3Vlc3RzIiwiYXR0ZW5kaW5nIiwidGhpcyIsImZiVVJMIiwiRmlyZWJhc2UiLCJyZWdpc3RlcmVkVXNlcnMiLCJyZXF1aXJlZElucHV0cyIsInNldFRlbXBUaW1lIiwiZW5kcG9pbnQiLCJ1bml4VGltZVRvRGF0ZVRpbWUiLCJ1bml4VGltZSIsInBhcnNlSW50Iiwic3VibWl0IiwiYmFja1RvVXNlckV2ZW50cyIsInBhdGgiLCJ0b2tlbiIsImV2ZW50UmVkaXJlY3QiLCJldmVudElEIiwiZnVsbFBhdGgiLCJjaGFuZ2VTZWN0aW9uIiwidGFyZ2V0U2VjdGlvbiIsImkiLCJzYXZlRXZlbnRUaW1lIiwidGFyZ2V0IiwiZ3Vlc3RzQXJlSW52aXRlZCIsImd1ZXN0TGlzdCIsInZhbGlkYXRlR3Vlc3RFbWFpbCIsImNvbnN0cmFpbnQiLCJSZWdFeHAiLCJ0ZXN0IiwiaXNTZWN0aW9uQ29tcGxldGUiLCJzYXZlQW5kQWR2YW5jZSIsIiRzYXZlIiwidGhlbiIsImFkZEd1ZXN0VG9Ib3N0c0xpc3QiLCJzdGF0dXMiLCJzYXZlRXZlbnQiLCJndWVzdFdpbGxBdHRlbmQiLCJyZXNwb25zZSIsImN1cnJlbnRVc2VyIiwidG90YWxQZW5kaW5nSW52aXRhdGlvbnMiLCJyZW1vdmVBdHRlbmRpbmdVcGRhdGVkIiwiaW52aXRhdGlvbnMiLCJ0aGlzSW52aXRhdGlvbiIsImludml0YXRpb24iLCJhdHRlbmRpbmdMaXN0IiwiY3VycmVudERhdGUiLCJ1cGRhdGUiLCJ1cGRhdGVVcGRhdGVkUGFyYW0iLCJhZGRJbnZpdGF0aW9uVG9BdHRlbmRpbmciLCJMYW5kaW5nUGFnZUNvbnRyb2xsZXIiLCIkZG9jdW1lbnQiLCIkd2luZG93IiwicmVkaXJlY3QiLCJ1c2VyRGF0YSIsImN1cnJlbnRVc2VyRGF0YSIsIiRhcHBseSIsInNob3dSZXF1aXJubWVudHMiLCJ2YWxpZE5ld05hbWUiLCJ2YWxpZE5ld0VtYWlsIiwic2VjdXJlUGFzc3dvcmQiLCJzZWN1cmUiLCJ1bmxvY2tDcmVhdGVVc2VyQnRuIiwidXNhYmxlIiwiY2xhc3MiLCJtZXNzYWdlIiwidmFsaWRVc2VyRW1haWwiLCJ2YWxpZFVzZXJQYXNzd29yZCIsInVuY2xvY2tVc2VyTG9naW5CdG4iLCJwYXNzd29yZFJlcXVpcm5tZW50cyIsMCwibWV0Iiw0LDUsNiwiZGlzcGxheVBhc3NSZXFzIiwibmV3TmFtZSIsIm5ld0VtYWlsIiwiY2hlY2tOZXdOYW1lIiwibGVuZ3RoIiwib3BlbkNyZWF0ZVVzZXJCdXR0b24iLCJjaGVja05ld0VtYWlsIiwiY2hlY2tVc2VyRW1haWwiLCJ1c2VyRW1haWwiLCJvcGVuVXNlckxvZ2luQnRuIiwiY2hlY2tOZXdQYXNzd29yZHMiLCJjb25zdHJhaW50cyIsIm5ld1Bhc3N3b3JkIiwiY2hlY2tVc2VyUGFzc3dvcmRzIiwidXNlclBhc3N3b3JkIiwiZmluZCIsInZhbHVlIiwiY3JlYXRlTmV3VXNlciIsImNyZWF0ZVVzZXIiLCJwYXNzd29yZCIsInVzZXJzUmVmIiwiYmlvIiwiZXZlbnRzIiwicGVuZGluZyIsImhvc3RpbmciLCJjb21wbGV0ZWQiLCJsb2dpblJlZ2lzdGVyZWRVc2VyIiwiYXV0aFdpdGhQYXNzd29yZCIsImFsZXJ0TWUiLCJhbGVydCIsIm9uUmVzaXplRnVuY3Rpb24iLCJpbnB1dFRleHQiLCJhbmd1bGFyIiwiZWxlbWVudCIsIm91dGVyV2lkdGgiLCJvdXRlckhlaWdodCIsImNzcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJGYXN0Q2xpY2siLCJhdHRhY2giLCJib2R5IiwiYmluZCIsInJlYWR5IiwibWFzdGVyIiwidXNlciIsImNvcHkiLCJyZXNldCIsImZvcm0iLCIkc2V0UHJpc3RpbmUiLCIkc2V0VW50b3VjaGVkIiwiTWFpbkNvbnRyb2xsZXIiLCJyZXNpemVCR0ltYWdlIiwibG9nb3V0IiwidW5hdXRoIiwiTmV3VXNlclNpZ25VcENvbnRyb2xsZXIiLCJ2YWxpZGF0aW9uIiwiYmFja2VuZFNlcnZpY2VzIiwidHJhZmZpY1ZhbGV0IiwidmVyaWZ5UmVxdWlybm1lbnRzIiwiZXJyb3JzIiwicGFzc2VzQWxsVGVzdHMiLCJpc0RlZmluZWQiLCJpbnB1dHMiLCJyZXF1aXJlZEZpZWxkc0RlZmluZWQiLCJwYXNzUmVxcyIsInJlcSIsImZ1bGZpbGxlZCIsInNob3dSZXFzQm94Iiwic2lnbnVwVmFsaWRhdGlvbiIsImhhc05hbWUiLCJyZXF1aXJlZCIsImxvbmdFbm91Z2giLCJtaW5OYW1lTGVuZ3RoIiwicHVzaCIsImpvaW4iLCJoYXNFbWFpbCIsImlzQW5FbWFpbCIsImNoZWNrTmV3UGFzc3dvcmQiLCJoYXNQYXNzd29yZCIsInNwZWNpZmljUmVxcyIsIm1pblBhc3NMZW5ndGgiLCJtYXhQYXNzTGVuZ3RoIiwiYXRMZWFzdE9uZUxvd2VyY2FzZSIsImF0TGVhc3RPbmVVcHBlcmNhc2UiLCJhdExlYXN0T25lTnVtYmVyIiwiYXRMZWFzdE9uZVN5bWJvbCIsImlsbGVnYWxDaGFyYWN0ZXIiLCJhbnlFcnJvcnMiLCJleGl0UGFzc3dvcmQiLCJuZXdVc2VyU2hlcnBhIiwibmV3VXNlckRhdGEiLCJkYlVzZXJEYXRhIiwibG9hZFByaW1hcmllcyIsImFkZE5ld1VzZXJUb0RhdGFiYXNlIiwiYWRkTmV3VXNlclRvUmVnVXNlcnNMaXN0IiwicmVkaXJlY3RUbyIsIlJlZ1VzZXJMb2dpbkNvbnRyb2xsZXIiLCJyZWdpc3RlcmVkVXNlclNoZXJwYSIsImRhdGFiYXNlIiwicmVnaXN0ZXJlZFVzZXJEYXRhIiwiTG9naW5SZWdpc3RlcmVkVXNlciIsInVzZXJDcmVkZW50aWFscyIsInNldFByaW1hcmllc0xvY2FsbHkiLCJnZXRVSURMb2NhbGx5IiwiZ2V0VXNlckJpbyIsInVzZXJCaW8iLCJ1cGRhdGVCaW9Mb2NhbGx5IiwiZ2V0VXNlckV2ZW50cyIsImFsbEV2ZW50c0ZvclRoaXNVc2VyIiwidXBkYXRlQWxsVXNlckV2ZW50c0xvY2FsbHkiLCJjbGlja2VkIiwidXNlckF1dGhlbnRpY2F0aW9uIiwibG9nVXNlck91dCIsInRvcE1lbnVDb250cm9sbGVyIiwiYXV0aERhdGFDYWxsYmFjayIsInByb3ZpZGVyIiwibG9nZ2VkSW4iLCJuYXZCYXJMb2dpblJlZ2lzdGVyZWRVc2VyIiwibmF2YmFyVXNlckVtYWlsIiwibmF2YmFyVXNlclBhc3MiLCJjbGljayIsIm5hdmJhcklucHV0cyIsIm9uQXV0aCIsIlVzZXJFdmVudHNDb250cm9sbGVyIiwibm9PZkhvc3RlRXZlbnRzIiwiY291bnRlciIsImdlbmVyYXRlRXZlbnRJRCIsImRhdGUiLCJjaGVja0ZvckV2ZW50cyIsIk9iamVjdCIsImtleXMiLCJmb3JFYWNoIiwiY2F0ZWdvcnkiLCJpc09iamVjdCIsInNlY3Rpb25BdmFpbGFibGUiLCJpbml0aWFsaXplIiwic2V0VUlETG9jYWxseSIsImxvYWRCaW8iLCJyZXRyaWV2ZWRCaW8iLCJnZXRBbGxVc2VyRXZlbnRzTG9jYWxseSIsImdldFJlbW90ZUV2ZW50c0ZvckxvY2FsIiwib2J0YWluZWRVc2VyRXZlbnRzIiwic2hvd0RlY2xpbmUiLCJjcmVhdGVOZXdFdmVudCIsIm5ld0V2ZW50U2hlcnBhIiwiYWZmaXJtYXRpdmVSZXNwb25zZSIsImNsZWFuREJFdmVudHNDYXRlZ29yeSIsImVycm9yUmVzcG9uc2UiLCJVc2VySW5mb3JtYXRpb25Db250cm9sbGVyIiwib2J0YWluZWRVc2VyRGF0YSIsImRvYiIsInRlbXBCaXJ0aGRheSIsInZpZXciLCJkYXRhVG9TYXZlIiwiaXNEYXRhIiwiYnRuTXNzZyIsInByb2NlZWRCdG4iLCJjaGVja1ZhbHVlcyIsImlzVW5kZWZpbmVkIiwiY29tcGFueSIsInRpdGxlIiwidXBkYXRlRE9CIiwic2F2ZUFuZE1vdmVPbiIsInVzZXJJbmZvU2hlcnBhIiwiY3VycmVudFVpZCIsImF1dGhTZXJ2aWNlIiwiJHEiLCJpc0xvZ2dlZEluIiwiYWxsQXV0aFNlcnZpY2VzIiwiZmlyZUJhc2VBY2NvdW50cyIsInJlc29sdmUiLCJyZWplY3QiLCJhcHAiLCJhcHBVc2VycyIsImI2NEVtYWlsIiwiUmVnaXN0ZXJlZFVzZXJzTGlzdCIsImNoZWNrTG9naW5TdGF0dXMiLCJQcm9taXNlIiwidXBsb2FkVXNlckRhdGEiLCJhbGxVc2VyRGF0YSIsInJlbW90ZVVzZXIiLCJ1cGxvYWRVc2VyQmlvIiwiY3VycmVudFVzZXJCaW8iLCJ0b1N0cmluZyIsInJlbW90ZVVzZXJCaW8iLCJkb3dubG9hZFVzZXJEYXRhIiwiY3JlYXRlSG9zdGVkRXZlbnQiLCJuZXdFdmVudCIsIm5ld0hvc3RlZEV2ZW50IiwidXNlclByb2ZpbGUiLCJldmVudHNQYWNrYWdlIiwiZGVsZXRlVXBkYXRlRmllbGQiLCJjYXRSZW1vdmluZ0Zyb20iLCJ0aGVyZVdhc0FuVXBkYXRlRmllbGQiLCJjYXRUb0NoZWNrIiwiY3VycmVudENhdE1vZGVsIiwiYWxsQmFja2VuZFNlcnZpY2VzIiwicGFyYW0xIiwicGFyYW0yIiwicGFyYW0zIiwiYWxsVHJhZmZpY0NvbnRyb2xzIiwiYmlvUHJpbWFyaWVzQXJlQ29tcGxldGVMb2NhbGx5IiwiY2xlYW5FdmVudHMiLCJ0eXBlIiwia2V5IiwiZ2V0TmFtZUxvY2FsbHkiLCJnZXRFbWFpbExvY2FsbHkiLCJnZXRDb21wYW55TG9jYWxseSIsImdldFRpdGxlTG9jYWxseSIsImdldERPQkxvY2FsbHkiLCJnZXRGdWxsQmlvTG9jYWxseSIsImdldFVzZXJFdmVudHNMb2NhbGx5Iiwic2V0TmFtZUxvY2FsbHkiLCJzZXRFbWFpbExvY2FsbHkiLCJzZXRDb21wYW55TG9jYWxseSIsInNldFRpdGxlTG9jYWxseSIsInNldERPQkxvY2FsbHkiLCJ1cGRhdGVVc2VyRXZlbnRzTG9jYWxseSIsImFsbFVzZXJFdmVudHMiLCJzZXRSZW1vdGVCaW9Gcm9tTG9jYWwiLCJyZW1vdmVVc2VyRXZlbnRzTG9jYWxseSIsImdldEZ1bGxSZW1vdGVEQmZvckxvY2FsIiwiZGIiLCJyZW1vdGVVc2VyRGF0YSIsImdldFJlbW90ZUJpb0ZvckxvY2FsIiwiZXZlbnRUeXBlIiwic2V0RnVsbFJlbW90ZURCZnJvbUxvY2FsIiwic2V0UmVtb3RlRXZlbnRzRnJvbUxvY2FsIiwiYmlvRnJvbVJlbW90ZURCIiwibG9hZEV2ZW50c1Byb2dyZXNzaXZlbHkiLCJhbGxFdmVudHMiLCJzdHJlZXQwMSIsInN0cmVldDAyIiwic3RyZWV0MDMiLCJjaXR5Iiwic3RhdGUiLCJ6aXAiLCJtaW5pbXVtTmFtZUxlbmd0aCIsIm1pbmltdW1QYXNzTGVuZ3RoIiwibWF4aW11bVBhc3NMZW5ndGgiLCJkYXRlT2ZCaXJ0aCIsImFsbFZhbGlkYXRpb25zIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwiY29udHJvbGxlckFzIiwidXNlckF1dGhlbnRpY2F0aW9uU2VydmljZSIsIm90aGVyd2lzZSIsImhvc3RlZEV2ZW50c0xpc3QiLCJsaW5rRnVuYyIsInNjb3BlIiwiZWwiLCJhdHRyIiwiY3RybCIsImhvc3RlZEV2ZW50c0xpc3RDb250cm9sbGVyIiwiY291bnRHdWVzdHMiLCJsaXN0IiwiZ3Vlc3QiLCJob3N0ZWRFdmVudHNTaGVycGEiLCJmb3JtYXREYXRlIiwiZ3Vlc3RzQXR0ZW5kaW5nIiwiZ3Vlc3RzSW52aXRlZCIsInRvdGFsR3Vlc3RDb3VudCIsImd1ZXN0Q291bnQiLCJkZWNsaW5lZCIsInBlcmNlbnRhZ2VBdHRlbmRpbmciLCJndWVzdGxpc3QiLCJldmVudENsaWNrZWQiLCJob3N0ZWRFdmVudHMiLCJ1c2VySWQiLCIkaW5qZWN0IiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJyZXBsYWNlIiwibGluayIsImJpbmRUb0NvbnRyb2xsZXIiLCJ0b29sQmFyIiwiVG9vbEJhckNvbnRyb2xsZXIiLCJmYkNvbm5lY3QiLCJtb2R1bGUiLCJmYWN0b3J5Il0sIm1hcHBpbmdzIjoiQUFPQSxRQUFBQSxtQkFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FjQSxRQUFBQyxLQUVBQyxFQUFBQyxjQUFBQyxNQUFBLEdBQUFDLElBQUEsSUFDQUgsRUFBQUksVUFBQUMsS0FBQSxHQUFBQyxPQUFBQyxRQUFBLEdBQUFDLE9BQUEsRUFBQUMsT0FBQUMsTUFBQSxNQUNBVixFQUFBVyxZQUFBLEVBQ0FYLEVBQUFZLGlCQUFBLEVBRUFaLEVBQUFhLGdCQUNBQyxHQUFBQyxRQUFBLEVBQUFDLFVBQUEsRUFBQVAsT0FBQUMsTUFBQSxRQUFBTyxtQkFBQSxXQUNBQyxHQUFBSCxRQUFBLEVBQUFDLFVBQUEsRUFBQVAsT0FBQUMsTUFBQSxRQUFBTyxtQkFBQSxTQUNBRSxHQUFBSixRQUFBLEVBQUFDLFVBQUEsRUFBQVAsT0FBQUMsTUFBQSxRQUFBTyxtQkFBQSxVQUlBRyxJQUNBQyxJQUdBckIsRUFBQVcsWUFBQVcsSUFHQSxRQUFBQyxHQUFBQyxHQUNBLE1BQUFDLE1BQUFELEdBR0EsUUFBQUUsR0FBQUYsR0FDQSxNQUFBRyxNQUFBSCxHQUdBLFFBQUFJLEdBQUFDLEdBQ0EsTUFBQUMsTUFBQUMsTUFBQUYsR0FHQSxRQUFBRyxLQUNBaEMsRUFBQUksVUFBQUMsS0FBQSxHQUFBQyxPQUFBQyxRQUFBLEdBQUFDLE9BQUEsRUFBQUMsT0FBQUMsTUFBQSxNQUdBLFFBQUF1QixHQUFBQyxHQUNBdkMsRUFBQXdDLEtBQUEsNENBQUFELEdBRUFFLEVBQUFDLE1BQUEsU0FBQUEsTUFBQUgsR0FBQUcsTUFBQSxVQUFBQSxNQUFBLFdBQUFBLE1BQUF4QyxFQUFBcUMsS0FBQUcsTUFBQXhDLEVBQUF5QyxTQUFBQyxLQUNBQyxHQUFBM0MsRUFBQXlDLFFBQ0FHLFlBQ0F2QyxNQUFBRixFQUFBMEMsTUFB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LG9CQUFBckksbUJBRUFBLGtCQUFBK0osU0FBQSxTQUFBLE9BQUEsWUFBQSxZQUFBLFdDSkFoUCxRQUNBeVAsT0FBQSxrQkFDQW5DLFdBQUEsdUJBQUEzSCxzQkFFQUEscUJBQUFxSixTQUFBLE9BQUEsZUFBQSxXQUFBLGdCQ0pBaFAsUUFDQXlQLE9BQUEsa0JBQ0FuQyxXQUFBLDRCQUFBbEcsMkJBRUFBLDBCQUFBNEgsU0FBQSxPQUFBLFlBQUEsZUFBQSxXQUFBLGdCQ0pBaFAsUUFDQXlQLE9BQUEsa0JBQ0FDLFFBQUEsY0FBQXJILGFBRUFBLFlBQUEyRyxTQUFBLE9BQUEsS0FBQSxhQ0pBaFAsUUFDQXlQLE9BQUEsa0JBQ0FDLFFBQUEsa0JBQUFsTyxpQkFFQUEsZ0JBQUF3TixTQUFBLE9BQUEsS0FBQSxXQ0pBaFAsUUFDQXlQLE9BQUEsa0JBQ0FDLFFBQUEsZUFBQWpPLGNBRUFBLGFBQUF1TixTQUFBLE9BQUEsYUNKQWhQLFFBQ0F5UCxPQUFBLGtCQUNBQyxRQUFBLFdBQUEvUyxVQUVBQSxTQUFBcVMsU0FBQSxPQUFBLEtBQUEsbUJDSkFoUCxRQUNBeVAsT0FBQSxrQkFDQUMsUUFBQSxhQUFBbk8sWUFFQUEsV0FBQXlOLFNBQUEsUUNKQWhQLFFBQ0F5UCxPQUFBLGtCQUNBdkMsT0FBQUEsUUVLQWxOLFFBQ0F5UCxPQUFBLGtCQUNBUixVQUFBLG1CQUFBdkIsa0JDRkExTixRQUNBeVAsT0FBQSxrQkFDQVIsVUFBQSxVQUFBSyIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdBbkV2ZW50Q29udHJvbGxlcicsIEFuRXZlbnRDb250cm9sbGVyKTtcblxuQW5FdmVudENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnLCAnJGxvY2F0aW9uJywgJyRyb3V0ZVBhcmFtcycsICckZmlyZWJhc2VPYmplY3QnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBBbkV2ZW50Q29udHJvbGxlcigkc2NvcGUsICRsb2csICRsb2NhdGlvbiwgJHJvdXRlUGFyYW1zLCAkZmlyZWJhc2VPYmplY3QpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0dmFyIHVzZXJFdmVudHMgPSByZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQoJHJvdXRlUGFyYW1zLmhvc3RJZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdob3N0aW5nJykuY2hpbGQoJHJvdXRlUGFyYW1zLmV2ZW50SWQpXG5cblx0Ly9iaW5kaW5nIHRvIHRoZSBldmVudFxuXHR2bS5ldmVudCA9ICRmaXJlYmFzZU9iamVjdCh1c2VyRXZlbnRzKVxuXHR2YXIgcmVnaXN0ZXJlZFVzZXJzID0gJGZpcmViYXNlT2JqZWN0KHJlZi5jaGlsZCgnVWlkcycpKTtcblxuXHQvL3JlcXVpcmVkIGZpZWxkc1xuXHR2bS5yZXF1aXJlZElucHV0cyA9IFsnJywgJycsICcnLCAnJywgJycsICcnLCAnJywgJycsICcnXTtcblxuXHQvL0xvY2FsIE1ldGhvZHNcblx0ZnVuY3Rpb24gaW5pdCgpIHtcblx0XHQvL2RlY2xhcmUgYW5kIGluaXRpYWxpemUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dm0udGVtcERhdGVUaW1lID0ge3N0YXJ0OiAnJywgZW5kOiAnJ307XG5cdFx0dm0ubmV3R3Vlc3QgPSB7bmFtZTogJycsIGVtYWlsOnthZGRyZXNzOicnLCB2YWxpZDpmYWxzZSwgc3R5bGU6e2NvbG9yOicnfX19O1xuXHRcdHZtLnNob3dJZkhvc3QgPSBmYWxzZTtcblx0XHR2bS5oaWRlSWZBdHRlbmRpbmcgPSB0cnVlO1xuXHRcdC8vc2VjdGlvbnNcblx0XHR2bS5tYW5hZ2VTZWN0aW9ucyA9IHtcblx0XHRcdDE6IHthY3RpdmU6IHRydWUsIGNvbXBsZXRlOiBmYWxzZSwgc3R5bGU6e2NvbG9yOidibGFjaycsICdiYWNrZ3JvdW5kLWNvbG9yJzoneWVsbG93J319LFxuXHRcdFx0Mjoge2FjdGl2ZTogZmFsc2UsIGNvbXBsZXRlOiBmYWxzZSwgc3R5bGU6e2NvbG9yOid3aGl0ZScsICdiYWNrZ3JvdW5kLWNvbG9yJzonZ3JheSd9fSxcblx0XHRcdDM6IHthY3RpdmU6IGZhbHNlLCBjb21wbGV0ZTogZmFsc2UsIHN0eWxlOntjb2xvcjond2hpdGUnLCAnYmFja2dyb3VuZC1jb2xvcic6J2dyYXknfX1cblx0XHR9O1xuXG5cdFx0Ly9jaGVjayB1c2VyIHRvIGRldGVybWluZSBzdGF0ZVxuXHRcdGNoZWNrRm9ySG9zdCgpO1xuXHRcdGNoZWNrSWZHdWVzdElzQXR0ZW5kaW5nKCk7XG5cblx0XHQvL29wZW4gdXAgc2VjdGlvbnNcblx0XHRpZighdm0uc2hvd0lmSG9zdCkgb3BlbkFsbFNlY3Rpb25zKCk7XG5cdH1cblxuXHRmdW5jdGlvbiB1dGY4X3RvX2I2NChzdHIpIHtcblx0XHRyZXR1cm4gYnRvYShzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gYjY0X3RvX3V0Zjgoc3RyKSB7XG4gICAgXHRyZXR1cm4gYXRvYihzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKSB7XG5cdFx0cmV0dXJuIERhdGUucGFyc2UoZGF0ZVRpbWUpO1xuXHR9XG5cblx0ZnVuY3Rpb24gY2xlYW5OZXdHdWVzdFZhcmlhYmxlKCkge1xuXHRcdHZtLm5ld0d1ZXN0ID0ge25hbWU6ICcnLCBlbWFpbDp7YWRkcmVzczonJywgdmFsaWQ6ZmFsc2UsIHN0eWxlOntjb2xvcjonJ319fTtcblx0fVxuXG5cdGZ1bmN0aW9uIGludml0ZUFSZWdpc3RlcmVkVXNlcih1aWQpIHtcblx0XHQkbG9nLmluZm8oJ2FkZGluZyB0aGVtIHRvIHRoZSByZWdpc3RlcmVkIHVzZXJzIGxpc3QgJyArIHVpZCk7XG5cdFx0Ly9zZXQgdGhlIG5ldyBldmVudFxuXHRcdHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgncGVuZGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ldmVudElkKS5zZXQoe1xuXHRcdFx0aWQ6ICRyb3V0ZVBhcmFtcy5ldmVudElkLFxuXHRcdFx0ZXZlbnRUaW1lczoge1xuXHRcdFx0XHRzdGFydDogdm0uZXZlbnQuZXZlbnRUaW1lcy5zdGFydCxcblx0XHRcdFx0ZW5kOiB2bS5ldmVudC5ldmVudFRpbWVzLmVuZFxuXHRcdFx0fSxcblx0XHRcdG5hbWU6IHZtLmV2ZW50Lm5hbWUsXG5cdFx0XHRob3N0OiAkcm91dGVQYXJhbXMudWlkXG5cdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oJ3RoZXJlIHdhcyBhbiBlcnJvcicgKyBlcnJvcik7XG5cdFx0fSk7XG5cdFx0Ly9pZiB0aGVyZSB3YXMgYW4gdXBkYXRlZCBwbGFjZSBob2xkZXIsIHJlbW92ZSBpdFxuXHRcdHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgncGVuZGluZycpLm9uY2UoJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdHZhciBjaGVja0ZvclBsYWNlaG9sZGVyID0gc25hcHNob3QudmFsKClcblx0XHRcdCRsb2cuaW5mbyhzbmFwc2hvdC52YWwoKSk7XG5cblx0XHRcdGlmKGNoZWNrRm9yUGxhY2Vob2xkZXIudXBkYXRlZCkge1xuXHRcdFx0XHQkbG9nLmluZm8oJ2RlbGV0aW5nIHVwZGF0ZWQnKTtcblx0XHRcdFx0cmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdwZW5kaW5nJykuY2hpbGQoJ3VwZGF0ZWQnKS5yZW1vdmUoZnVuY3Rpb24oZXJyb3JPYmplY3QpIHtcblx0XHRcdFx0XHRpZihlcnJvck9iamVjdCkgJGxvZy5pbmZvKFwiRGVsZXRpbmcgZmFpbGVkOiBcIiArIGVycm9yT2JqZWN0LmNvZGUpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSAkbG9nLmluZm8oJ25vdGhpbmcgdG8gZG8nKTtcblxuXHRcdH0sIGZ1bmN0aW9uKGVycm9yT2JqZWN0KSB7XG5cdFx0XHRpZihlcnJvck9iamVjdCkgJGxvZy5pbmZvKFwiVGhlIHJlYWQgZmFpbGVkOiBcIiArIGVycm9yT2JqZWN0LmNvZGUpO1xuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gaW52aXRlQW5VbnJlZ2lzdGVyZWRVc2VyKHVzZXJLZXkpIHtcblx0XHQkbG9nLmluZm8oJ2FkZGluZyB0aGVtIHRvIHRoZSBVTlJFR0lTVEVSRUQgdXNlcnMgbGlzdCAnICsgdXNlcktleSk7XG5cdFx0cmVmLmNoaWxkKCdVbnJlZ2lzdGVyZWRVc2VycycpLmNoaWxkKHVzZXJLZXkpLmNoaWxkKCdwZW5kaW5nJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJHJvdXRlUGFyYW1zLmV2ZW50SWQpLnNldCh7XG5cdFx0XHRpZDogJHJvdXRlUGFyYW1zLmV2ZW50SWQsXG5cdFx0XHRob3N0OiAkcm91dGVQYXJhbXMudWlkLFxuXHRcdFx0ZXZlbnRUaW1lczoge1xuXHRcdFx0XHRzdGFydDogdm0uZXZlbnQuZXZlbnRUaW1lcy5zdGFydCxcblx0XHRcdFx0ZW5kOiB2bS5ldmVudC5ldmVudFRpbWVzLmVuZFxuXHRcdFx0fSxcblx0XHRcdG5hbWU6IHZtLmV2ZW50Lm5hbWVcblx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbygndGhlcmUgd2FzIGFuIGVycm9yJyArIGVycm9yKTtcblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNoZWNrRm9ySG9zdCgpIHtcblx0XHQvL2NoZWNrIGV2ZW50IGhvc3Rcblx0XHR2YXIgYXV0aERhdGEgPSByZWYuZ2V0QXV0aCgpO1xuXG5cdFx0aWYoYXV0aERhdGEudWlkID09ICRyb3V0ZVBhcmFtcy5ob3N0SWQpIHtcblx0XHRcdCRsb2cuaW5mbygnaXMgdGhlIGhvc3QnKTtcblx0XHRcdHZtLnNob3dJZkhvc3QgPSB0cnVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkbG9nLmluZm8oJ25vdCB0aGUgaG9zdCcpO1xuXHRcdFx0dm0uc2hvd0lmSG9zdCA9IGZhbHNlO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIGNoZWNrSWZHdWVzdElzQXR0ZW5kaW5nKCkge1xuXHRcdGlmKCF2bS5zaG93SWZIb3N0KSB7XG5cdFx0XHQkbG9nLmluZm8oJ2NoZWNrIGd1ZXN0IGF0dGVuZGFuY2UnKTtcblx0XHRcdHVzZXJFdmVudHMuY2hpbGQoJ2d1ZXN0TGlzdCcpLm9uKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHRcdHZhciBhbGxHdWVzdHMgPSBzbmFwc2hvdC52YWwoKTtcblx0XHRcdFx0dm0uaGlkZUlmQXR0ZW5kaW5nID0gIWFsbEd1ZXN0c1skcm91dGVQYXJhbXMudWlkXS5hdHRlbmRpbmc7XG5cdFx0XHRcdFxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gb3BlbkFsbFNlY3Rpb25zKCkge1xuXHRcdHZtLm1hbmFnZVNlY3Rpb25zWzFdLmFjdGl2ZSA9IHRydWU7XG5cdFx0dm0ubWFuYWdlU2VjdGlvbnNbMl0uYWN0aXZlID0gdHJ1ZTtcblx0XHR2bS5tYW5hZ2VTZWN0aW9uc1szXS5hY3RpdmUgPSB0cnVlO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2F2ZUV2ZW50KCkge1xuXHRcdHZtLmV2ZW50LiRzYXZlKCkudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdCRsb2cuaW5mbygnZXZlbnQgc2F2ZWQnKTtcblx0XHR9KS5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0JGxvZy5pbmZvKCdlcnJvciEgJyArIGVycm9yKTtcblx0XHR9KTtcblx0fVxuXG5cdC8vdmlldyBNZXRob2Rcblx0dm0uc2V0VGVtcFRpbWUgPSBmdW5jdGlvbihlbmRwb2ludCkge1xuXHRcdGlmKGVuZHBvaW50ID09ICdzdGFydCcpIHZtLnRlbXBEYXRlVGltZS5zdGFydCA9IG5ldyBEYXRlKCk7XG5cdFx0aWYoZW5kcG9pbnQgPT0gJ2VuZCcpIHZtLnRlbXBEYXRlVGltZS5lbmQgPSBuZXcgRGF0ZSgpO1xuXHR9XG5cblx0dm0udW5peFRpbWVUb0RhdGVUaW1lID0gZnVuY3Rpb24gKHVuaXhUaW1lKSB7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KHVuaXhUaW1lKSk7XG5cdH07XG5cblx0dm0uZGF0ZVRpbWVUb1VuaXhUaW1lID0gZnVuY3Rpb24gKGRhdGVUaW1lKSB7XG5cdFx0cmV0dXJuIERhdGUucGFyc2UoZGF0ZVRpbWUpO1xuXHR9O1xuXG5cdHZtLnN1Ym1pdCA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2cuaW5mbygnc3VibWl0dGluZyB0aGUgZm9ybSBub3chJyk7XG5cdH1cblxuXHR2bS5iYWNrVG9Vc2VyRXZlbnRzID0gZnVuY3Rpb24oKSB7XG5cdFx0JGxvY2F0aW9uLnBhdGgoJy91c2VyRXZlbnRzLycgKyAkcm91dGVQYXJhbXMudWlkICsgJy8nICsgJHJvdXRlUGFyYW1zLnRva2VuKTtcblx0fVxuXG5cdHZtLmV2ZW50UmVkaXJlY3QgPSBmdW5jdGlvbihwYXRoLCBldmVudElEKSB7XG5cdFx0dmFyIGZ1bGxQYXRoID0gcGF0aCArICcvJyArICRyb3V0ZVBhcmFtcy51aWQgKyAnLycgKyAkcm91dGVQYXJhbXMudG9rZW47XG5cdFx0Ly9yZWRpcmVjdFxuXHRcdCRsb2cuaW5mbygncmVkaXJlY3RpbmcgdG86ICcgKyBmdWxsUGF0aCk7XG5cdFx0JGxvY2F0aW9uLnBhdGgoZnVsbFBhdGgpO1xuXHR9XG5cblx0dm0uY2hhbmdlU2VjdGlvbiA9IGZ1bmN0aW9uKHRhcmdldFNlY3Rpb24pIHtcblx0XHQkbG9nLmluZm8oJ2FyZSB3ZSBoZXJlJyk7XG5cdFx0Zm9yKGkgPSAxOyBpIDw9MzsgaSsrKSB7XG5cdFx0XHRpZihpPT10YXJnZXRTZWN0aW9uKSB7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLmFjdGl2ZSA9IHRydWU7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLnN0eWxlWydiYWNrZ3JvdW5kLWNvbG9yJ10gPSd5ZWxsb3cnO1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5zdHlsZVsnY29sb3InXSA9J2JsYWNrJztcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLmFjdGl2ZSA9IGZhbHNlO1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5zdHlsZVsnYmFja2dyb3VuZC1jb2xvciddID0nZ3JheSc7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLnN0eWxlWydjb2xvciddID0nd2hpdGUnO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHZtLnNhdmVFdmVudFRpbWUgPSBmdW5jdGlvbihkYXRlVGltZSwgdGFyZ2V0KSB7XG5cdFx0Ly9pZiB0aGlzIGV2ZW50IGRpZG4ndCBoYXZlIGEgc3RhcnQgdGltZSwgY3JlYXRlIGl0XG5cdFx0aWYoIXZtLmV2ZW50LmV2ZW50VGltZXMpIHsgXG5cdFx0XHR2bS5ldmVudC5ldmVudFRpbWVzID0ge3N0YXJ0OiAnJywgZW5kOiAnJ307XG5cdFx0XHR2bS5ldmVudC5ldmVudFRpbWVzLnN0YXJ0ID0gdm0uZGF0ZVRpbWVUb1VuaXhUaW1lKHZtLnRlbXBEYXRlVGltZS5zdGFydCk7IFxuXHRcdFx0dm0uZXZlbnQuZXZlbnRUaW1lcy5lbmQgPSB2bS5kYXRlVGltZVRvVW5peFRpbWUodm0udGVtcERhdGVUaW1lLmVuZCk7XG5cdFx0fVxuXG5cdFx0aWYoKHZtLnRlbXBEYXRlVGltZS5lbmQgPCB2bS50ZW1wRGF0ZVRpbWUuc3RhcnQpICYmIHRhcmdldCA9PSAnc3RhcnQnKSB2bS50ZW1wRGF0ZVRpbWUuZW5kID0gdm0udGVtcERhdGVUaW1lLnN0YXJ0O1xuXHRcdGlmKHRhcmdldCA9PSAnc3RhcnQnKSB2bS5ldmVudC5ldmVudFRpbWVzLnN0YXJ0ID0gdm0uZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKTtcblx0XHRpZih0YXJnZXQgPT0gJ2VuZCcpIHZtLmV2ZW50LmV2ZW50VGltZXMuZW5kID0gdm0uZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKTtcblx0fVxuXG5cdHZtLmd1ZXN0c0FyZUludml0ZWQgPSBmdW5jdGlvbigpIHtcblx0XHRpZih2bS5ldmVudC5ndWVzdExpc3QpIHJldHVybiB0cnVlO1xuXHRcdGVsc2UgcmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0dm0udmFsaWRhdGVHdWVzdEVtYWlsID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9pZiB0aGVyZSBpcyBhbiBlbWFpbCBhZGRyZXNzXG5cdFx0aWYodm0ubmV3R3Vlc3QuZW1haWwuYWRkcmVzcykge1xuXHRcdFx0Ly9jaGVjayB2YWxpZGl0eVxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XCIsIFwiXCIpO1xuXG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3Qodm0ubmV3R3Vlc3QuZW1haWwuYWRkcmVzcykpIHtcblx0XHRcdFx0dm0ubmV3R3Vlc3QuZW1haWwudmFsaWQgPSB0cnVlO1xuXHRcdFx0XHR2bS5uZXdHdWVzdC5lbWFpbC5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLm5ld0d1ZXN0LmVtYWlsLnZhbGlkID0gZmFsc2U7XG5cdFx0XHRcdHZtLm5ld0d1ZXN0LmVtYWlsLnN0eWxlID0ge2NvbG9yOicnfTtcblx0XHRcdH1cdFx0XHRcblx0XHR9XG5cdH1cblxuXHR2bS5pc1NlY3Rpb25Db21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdGZvcihpPTA7aTw4O2krKykge1xuXHRcdFx0JGxvZy5pbmZvKHZtLnJlcXVpcmVkSW5wdXRzW2ldKTtcblx0XHR9XG5cdH1cblxuXHR2bS5zYXZlQW5kQWR2YW5jZSA9IGZ1bmN0aW9uKCkge1xuXHRcdHZtLmV2ZW50LiRzYXZlKCkudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdCRsb2cuaW5mbygnZXZlbnQgc2F2ZWQnKTtcblx0XHR9KS5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0JGxvZy5pbmZvKCdlcnJvciEgJyArIGVycm9yKTtcblx0XHR9KTtcblxuXHRcdC8vY2hlY2sgZm9yIGNvbXBsZXRlbmVzXG5cdFx0dm0uaXNTZWN0aW9uQ29tcGxldGUoKTtcblxuXHRcdGlmKHZtLm1hbmFnZVNlY3Rpb25zWzFdLmNvbXBsZXRlID09IHRydWUgJiYgdm0ubWFuYWdlU2VjdGlvbnNbMl0uY29tcGxldGUgPT0gdHJ1ZSAmJiB2bS5tYW5hZ2VTZWN0aW9uc1szXS5jb21wbGV0ZSA9PSB0cnVlKSB7XG5cdFx0XHR2bS5ldmVudFJlZGlyZWN0KCcvdXNlckV2ZW50cycsICRyb3V0ZVBhcmFtcy51aWQpO1xuXHRcdH0gZWxzZSBpZiAodm0ubWFuYWdlU2VjdGlvbnNbMV0uYWN0aXZlKSB2bS5jaGFuZ2VTZWN0aW9uKDIpO1xuXHRcdGVsc2UgaWYgKHZtLm1hbmFnZVNlY3Rpb25zWzJdLmFjdGl2ZSkgdm0uY2hhbmdlU2VjdGlvbigzKTtcblx0XHRlbHNlIGlmICh2bS5tYW5hZ2VTZWN0aW9uc1szXS5hY3RpdmUpIHZtLmNoYW5nZVNlY3Rpb24oMSk7XG5cdH1cblxuXHR2bS5hZGRHdWVzdFRvSG9zdHNMaXN0ID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9kZWNsYXJlIGFuZCBpbml0aWFsaXplIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciB1c2VyS2V5ID0gdXRmOF90b19iNjQodm0ubmV3R3Vlc3QuZW1haWwuYWRkcmVzcyk7XG5cblx0XHQvL2lmIGVtYWlsIGlzIHZhbGlkIGFuZCBuYW1lIGV4aXN0c1xuXHRcdGlmICh2bS5uZXdHdWVzdC5uYW1lICYmIHZtLm5ld0d1ZXN0LmVtYWlsLnZhbGlkKSB7XG5cdFx0XHQvL2lzIHRoZXJlIGEgZ3Vlc3QgbGlzdCBhbHJlYWR5PyBJZiBub3QgY3JlYXRlIG9uZVxuXHRcdFx0aWYoIXZtLmV2ZW50Lmd1ZXN0TGlzdCkge1xuXHRcdFx0XHR2bS5ldmVudC5ndWVzdExpc3QgPSB7fTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vaWYgc28gaXMgdGhpcyBwZXJzb24gYWxyZWFkeSBvbiB0aGUgbGlzdD9cblx0XHRcdFx0dmFyIGkgPTA7XG5cdFx0XHRcdHdoaWxlKHZtLmV2ZW50Lmd1ZXN0TGlzdFtpXSkge1xuXHRcdFx0XHRcdGlmKHZtLmV2ZW50Lmd1ZXN0TGlzdFtpXS5lbWFpbCA9PSBiNjRfdG9fdXRmOCh1c2VyS2V5KSkge1xuXHRcdFx0XHRcdFx0JGxvZy5pbmZvKCdUaGlzIGd1ZXN0IGlzIGFscmVhZHkgb24gdGhlIGxpc3QnKTtcblx0XHRcdFx0XHRcdGNsZWFuTmV3R3Vlc3RWYXJpYWJsZSgpO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpKys7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly9pcyB0aGlzIGd1ZXN0IGEgcmVnaXN0ZXJlZCB1c2VyP1xuXHRcdFx0aWYocmVnaXN0ZXJlZFVzZXJzW3VzZXJLZXldKSB7XG5cdFx0XHRcdC8vaXMgdGhlIHJlZ2lzdGVyZWQgdXNlciB0aGUgaG9zdD9cblx0XHRcdFx0aWYocmVnaXN0ZXJlZFVzZXJzW3VzZXJLZXldID09ICRyb3V0ZVBhcmFtcy51aWQpIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ3RyaWVkIHRvIHJlZ2lzdGVyIHRoZSBob3N0Jyk7XG5cdFx0XHRcdFx0Y2xlYW5OZXdHdWVzdFZhcmlhYmxlKCk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdC8vYWRkIHRoZW0gdG8gdGhlIGFwcHJvcHJpYXRlIHJlZ2lzdGVyZWQgdXNlcnMnIGxpc3Qgb2YgZXZlbnQgaW52aXRlc1xuXHRcdFx0XHRcdGludml0ZUFSZWdpc3RlcmVkVXNlcihyZWdpc3RlcmVkVXNlcnNbdXNlcktleV0pO1xuXG5cdFx0XHRcdFx0Ly9hZGQgdGhlIGd1ZXN0IHRvIHRoZSBsaXN0XG5cdFx0XHRcdFx0dm0uZXZlbnQuZ3Vlc3RMaXN0W3JlZ2lzdGVyZWRVc2Vyc1t1c2VyS2V5XV0gPSB7XG5cdFx0XHRcdFx0XHRhdHRlbmRpbmc6IGZhbHNlLCBcblx0XHRcdFx0XHRcdHN0YXR1czoncGVuZGluZycsIFxuXHRcdFx0XHRcdFx0bmFtZTogdm0ubmV3R3Vlc3QubmFtZSwgXG5cdFx0XHRcdFx0XHRlbWFpbDp2bS5uZXdHdWVzdC5lbWFpbC5hZGRyZXNzLFxuXHRcdFx0XHRcdH07XHRcdFx0XHRcdFxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2FkZCB0aGUgaW52aXRlIHRvIHRoZSBub24tcmVnaXN0ZXJlZCB1c2VycyBsaXN0IG9mIGV2ZW50IGludml0ZXNcblx0XHRcdFx0aW52aXRlQW5VbnJlZ2lzdGVyZWRVc2VyKHVzZXJLZXkpO1xuXG5cdFx0XHRcdC8vYWRkIHRoZSBndWVzdCB0byB0aGUgbGlzdFxuXHRcdFx0XHR2bS5ldmVudC5ndWVzdExpc3RbdXNlcktleV0gPSB7XG5cdFx0XHRcdFx0XHRhdHRlbmRpbmc6IGZhbHNlLCBcblx0XHRcdFx0XHRcdHN0YXR1czoncGVuZGluZycsIFxuXHRcdFx0XHRcdFx0bmFtZTogdm0ubmV3R3Vlc3QubmFtZSwgXG5cdFx0XHRcdFx0XHRlbWFpbDp2bS5uZXdHdWVzdC5lbWFpbC5hZGRyZXNzLFxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXG5cblx0XHRcdC8vc2F2ZSB0aGUgZXZlbnRcblx0XHRcdHZtLnNhdmVFdmVudCgpO1xuXHRcdFx0Ly9jbGVhciB0aGUgdGVtcCB2YWx1ZXNcblx0XHRcdGNsZWFuTmV3R3Vlc3RWYXJpYWJsZSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkbG9nLmluZm8oJ3lvdSBkaWRuXFwndCBlbnRlciBhIG5hbWUgYW5kIG9yIGVtYWlsJyk7XG5cdFx0fVxuXHR9XG5cblx0dm0uZ3Vlc3RXaWxsQXR0ZW5kID0gZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHR2YXIgY3VycmVudFVzZXIgPSByZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJ2V2ZW50cycpO1xuXHRcdHZhciB0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucyA9IDA7XG5cdFx0dmFyIHJlbW92ZUF0dGVuZGluZ1VwZGF0ZWQgPSBmYWxzZTtcblx0XHRcblx0XHQvL2NoYW5nZSBhdHRlbmRpbmcgdG8gdHJ1ZSBpbiBob3N0J3MgZ3Vlc3RMaXN0XG5cdFx0dm0uZXZlbnQuZ3Vlc3RMaXN0WyRyb3V0ZVBhcmFtcy51aWRdLmF0dGVuZGluZyA9IHJlc3BvbnNlO1xuXHRcdC8vY2hhbmdlIHN0YXR1cyB0byAnYXR0ZW5kaW5nJyBpbiBob3N0J3MgZ3Vlc3RMaXN0XG5cdFx0dm0uZXZlbnQuZ3Vlc3RMaXN0WyRyb3V0ZVBhcmFtcy51aWRdLnN0YXR1cyA9ICdhdHRlbmRpbmcnO1xuXHRcdFxuXHRcdC8vZ2V0IHRoZSBpbnZpdGF0aW9uIGRldGFpbHNcblx0XHRjdXJyZW50VXNlci5jaGlsZCgncGVuZGluZycpLm9uKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWxiZVxuXHRcdFx0dmFyIGludml0YXRpb25zID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHQvL2xvZyBzdGFydGluZyB2YWx1ZXNcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9ucyk7XG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnNbJHJvdXRlUGFyYW1zLmhvc3RJZF0pO1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdWyRyb3V0ZVBhcmFtcy5ldmVudElkXSk7XG5cblx0XHRcdHZhciB0aGlzSW52aXRhdGlvbiA9IGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdWyRyb3V0ZVBhcmFtcy5ldmVudElkXTtcblx0XHRcdFxuXHRcdFx0JGxvZy5pbmZvKHRoaXNJbnZpdGF0aW9uKTtcblx0XHRcdFxuXHRcdFx0Ly9jaGVjayAjIG9mIGluaXZpYXRpb25zXG5cdFx0XHRmb3IoaW52aXRhdGlvbiBpbiBpbnZpdGF0aW9ucykge1xuXHRcdFx0XHR0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucysrO1xuXHRcdFx0fVxuXG5cdFx0XHQvL3JlcG9ydCAjIG9mIGludml0YXRpb25zXG5cdFx0XHQkbG9nLmluZm8oXCJ0b3RhbCBhdHRlbmRpbmc6IFwiICsgdG90YWxQZW5kaW5nSW52aXRhdGlvbnMpO1xuXHRcdFx0XG5cdFx0XHQvL2FkZCB0aGUgZXZlbnQgdG8gdGhlIGd1ZXN0J3MgYXR0ZW5kaW5nIGxpc3Rcblx0XHRcdGlmKHJlc3BvbnNlKSBjdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykuY2hpbGQoJHJvdXRlUGFyYW1zLmhvc3RJZCkuY2hpbGQoJHJvdXRlUGFyYW1zLmV2ZW50SWQpLnNldCh0aGlzSW52aXRhdGlvbiwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbyhlcnJvcik7XG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXG5cdFx0Ly9pZiB0aGUgdXBkYXRlZCBwbGFjZWhvbGRlciB3YXMgb24gdGhlIGF0dGVuZGluZyBsaXN0IHJlbW92ZSBpdFxuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5vbigndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHRcdHZhciBhdHRlbmRpbmdMaXN0ID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHRcblx0XHRcdC8vcmVwb3J0IGFjdGlvbnNcblx0XHRcdCRsb2cuaW5mbygndGhpcyBpcyB0aGUgYXR0ZW5kaW5nIGxpc3QnKTtcblx0XHRcdCRsb2cuaW5mbyhhdHRlbmRpbmdMaXN0KTtcblx0XHRcdFxuXHRcdFx0Ly90aHJvdyBmbGFnIGZvciBsYXRlclxuXHRcdFx0aWYoYXR0ZW5kaW5nTGlzdC51cGRhdGVkKSByZW1vdmVBdHRlbmRpbmdVcGRhdGVkID0gdHJ1ZTtcblxuXHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHQvL2lmIHRoZXIgd2FzIGFuIGVycm9yIHJlcG9ydCBpdFxuXHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbyhlcnJvcik7XG5cdFx0fSk7XG5cblx0XHQvL2lmIHRoaXMgaXMgdGhlIGxhc3QgcGVuZGluZyBldmVudCBvbiB0aGUgZ3Vlc3QncyBwZW5kaW5nIGxpc3QsIGFkZCB0aGUgdXBkYXRlZCBwbGFjZWhvbGRlclxuXHRcdGlmKHRvdGFsUGVuZGluZ0ludml0YXRpb25zIDwgMikge1xuXHRcdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHRcdHZhciBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XG5cblx0XHRcdC8vcmVwbGFjZSB3aXRoIHVwZGF0ZWQgZmllbGRcblx0XHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdwZW5kaW5nJykudXBkYXRlKHtcblx0XHRcdFx0dXBkYXRlZDogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbyhlcnJvcik7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHQvL3JlbW92ZSB0aGUgZXZlbnQgZnJvbSB0aGUgZ3Vlc3QncyBwZW5kaW5nIGxpc3Rcblx0XHRjdXJyZW50VXNlci5jaGlsZCgncGVuZGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ob3N0SWQpLnJlbW92ZSgpO1xuXG5cdFx0Ly9pZiB0aGVyZSB3YXMgYW4gdXBkYXRlZCBmaWVsZCBpbiBhdHRlbmRpbmcsIHJlbW92ZSBpdFxuXHRcdGlmKHJlbW92ZUF0dGVuZGluZ1VwZGF0ZWQpIHtcblx0XHRcdCRsb2cuaW5mbygncmVtb3ZpbmcgdGhlIHVwZGF0ZWQgcGxhY2Vob2xkZXInKTtcblx0XHRcdC8vY3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLmNoaWxkKCd1cGRhdGVkJykucmVtb3ZlKCk7XG5cdFx0fVxuXG5cdFx0Ly9zYXZlIGNoYW5nZXNcblx0XHR2bS5ldmVudC4kc2F2ZSgpO1xuXHR9XG5cblx0dm0udXBkYXRlVXBkYXRlZFBhcmFtID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGN1cnJlbnRVc2VyID0gcmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCdldmVudHMnKTtcblx0XHRcblx0XHQkbG9nLmluZm8oJ3VwZGF0aW5nIHRoZSBwYXJhbScpO1xuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5vbigndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0JGxvZy5pbmZvKHNuYXBzaG90LnZhbCgpKTtcblx0XHR9KTtcblx0XHRjdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykuY2hpbGQoJ3VwZGF0ZWQnKS5yZW1vdmUoKTtcblx0fVxuXG5cdHZtLmFkZEludml0YXRpb25Ub0F0dGVuZGluZyA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdFx0dmFyIGN1cnJlbnRVc2VyID0gcmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCdldmVudHMnKTtcblx0XHR2YXIgdG90YWxQZW5kaW5nSW52aXRhdGlvbnMgPSAwO1xuXG5cdFx0Ly9nZXQgdGhlIGludml0YXRpb24gZGV0YWlsc1xuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdwZW5kaW5nJykub24oJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhbGJlXG5cdFx0XHR2YXIgaW52aXRhdGlvbnMgPSBzbmFwc2hvdC52YWwoKTtcblx0XHRcdHZhciB0aGlzSW52aXRhdGlvbiA9IGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdWyRyb3V0ZVBhcmFtcy5ldmVudElkXTtcblx0XHRcdFxuXHRcdFx0Ly9sb2cgc3RhcnRpbmcgdmFsdWVzXG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnMpO1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdKTtcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9uc1skcm91dGVQYXJhbXMuaG9zdElkXVskcm91dGVQYXJhbXMuZXZlbnRJZF0pO1xuXHRcdFx0XG5cdFx0XHQvL2NoZWNrICMgb2YgaW5pdmlhdGlvbnNcblx0XHRcdGZvcihpbnZpdGF0aW9uIGluIGludml0YXRpb25zKSB7XG5cdFx0XHRcdHRvdGFsUGVuZGluZ0ludml0YXRpb25zKys7XG5cdFx0XHR9XG5cblx0XHRcdC8vcmVwb3J0ICMgb2YgaW52aXRhdGlvbnNcblx0XHRcdCRsb2cuaW5mbyhcInRvdGFsIHBlbmRpbmcgaW52aXRhdGlvbnM6IFwiICsgdG90YWxQZW5kaW5nSW52aXRhdGlvbnMpO1xuXHRcdFx0XG5cdFx0XHQkbG9nLmluZm8ocmVzcG9uc2UpO1xuXHRcdFx0Ly9hZGQgdGhlIGV2ZW50IHRvIHRoZSBndWVzdCdzIGF0dGVuZGluZyBsaXN0XG5cdFx0XHRpZihyZXNwb25zZSkgY3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ob3N0SWQpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ldmVudElkKS5zZXQodGhpc0ludml0YXRpb24sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oZXJyb3IpO1xuXHRcdFx0fSk7XG5cblxuXG5cdFx0fSk7XG5cdH1cblxuXHQvL3N0YXJ0IHJ1blxuXHRpbml0KCk7XG59XG4iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdMYW5kaW5nUGFnZUNvbnRyb2xsZXInLCBMYW5kaW5nUGFnZUNvbnRyb2xsZXIpO1xuXG5MYW5kaW5nUGFnZUNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnLCAnJGxvY2F0aW9uJywgJyRkb2N1bWVudCcsICckd2luZG93J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gTGFuZGluZ1BhZ2VDb250cm9sbGVyKCRzY29wZSwgJGxvZywgJGxvY2F0aW9uLCAkZG9jdW1lbnQsICR3aW5kb3cpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgYXV0aERhdGEgPSB7fTtcblx0dmFyIGN1cnJlbnRVc2VyRGF0YSA9IHt9O1xuXG5cdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHR2bS5zaG93UmVxdWlybm1lbnRzID0gZmFsc2U7XG5cdHZtLnZhbGlkTmV3TmFtZSA9IHsndmFsaWQnOmZhbHNlLCAnc3R5bGUnOntjb2xvcjonJ319O1xuXHR2bS52YWxpZE5ld0VtYWlsID0geyd2YWxpZCc6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOicnfX07XG5cdHZtLnNlY3VyZVBhc3N3b3JkID0geydzZWN1cmUnOmZhbHNlLCAnc3R5bGUnOntjb2xvcjonJ319O1xuXHR2bS51bmxvY2tDcmVhdGVVc2VyQnRuID0geyd1c2FibGUnOmZhbHNlLCAnY2xhc3MnOididG4gYnRuLXdhcm5pbmcnfTtcblx0dm0ubWVzc2FnZSA9ICd0ZXN0aW5nJztcblxuXHRcblx0dm0udmFsaWRVc2VyRW1haWwgPSB7J3ZhbGlkJzpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6Jyd9fTtcblx0dm0udmFsaWRVc2VyUGFzc3dvcmQgPSB7J3ZhbGlkJzpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6Jyd9fTtcblx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0biA9IHsndXNhYmxlJzpmYWxzZSwgJ2NsYXNzJzonYnRuIGJ0bi13YXJuaW5nJ307XG5cdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzID0ge1xuXHRcdDA6eydjb25zdHJhaW50JzonSXMgYXQgbGVhc3QgMTYgY2hhcmFjdGVycyBsb25nJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX0sXG5cdFx0MTp7J2NvbnN0cmFpbnQnOidJcyBubyBsb25nZXIgdGhhbiAxMDAgY2hhcmFjdGVycycsICdzdHlsZSc6e2NvbG9yOidyZWQnfSwgJ21ldCc6ZmFsc2V9LFxuXHRcdDI6eydjb25zdHJhaW50JzonQ29udGFpbnMgYXQgbGVhc3Qgb25lIHJlcXVpcmVkIHN5bWJvbCAoXFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqKScsICdzdHlsZSc6e2NvbG9yOidyZWQnfSwgJ21ldCc6ZmFsc2V9LFxuXHRcdDM6eydjb25zdHJhaW50JzonQ29udGFpbnMgYXQgbGVhc3Qgb25lIG51bWJlcicsICdzdHlsZSc6e2NvbG9yOidyZWQnfSwgJ21ldCc6ZmFsc2V9LFxuXHRcdDQ6eydjb25zdHJhaW50JzonQ29udGFpbnMgYXQgbGVhc3Qgb25lIGxvd2VyY2FzZSBsZXR0ZXInLCAnc3R5bGUnOntjb2xvcjoncmVkJ30sICdtZXQnOmZhbHNlfSxcblx0XHQ1OnsnY29uc3RyYWludCc6J0NvbnRhaW5zIGF0IGxlYXN0IG9uZSB1cHBlcmNhc2UgbGV0dGVyJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX0sXG5cdFx0Njp7J2NvbnN0cmFpbnQnOlwiRG9lc24ndCBoYXZlIGFueSBpbGxlZ2FsIGNoYXJhY3RlcnNcIiwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX1cblx0fTtcblxuXHQvL3ZhciB0aGVUZXN0Qm94ID0gYW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCkuZmluZCgnI3Rlc3RCb3gnKTtcblxuXHQvL3RoZVRlc3RCb3guY2hlY2tWYWxpZGl0eSgpO1xuXHQvL3NldEN1c3RvbVZhbGlkaXR5KCd5b3UgbmVlZCBzb21ldGhpbmcgZWxzZScpO1xuXG5cdC8vbG9jYWwgbWV0aG9kc1xuXHRmdW5jdGlvbiB1dGY4X3RvX2I2NChzdHIpIHtcblx0XHRyZXR1cm4gYnRvYShzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gYjY0X3RvX3V0Zjgoc3RyKSB7XG4gICAgXHRyZXR1cm4gYXRvYihzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKSB7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KHVuaXhUaW1lKSk7XG5cdH1cblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH1cblxuXHQvL2RlZmluZSBjb250cm9sbGVyIG1ldGhvZHNcblx0dm0uZGlzcGxheVBhc3NSZXFzID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodm0ubmV3TmFtZSAmJiB2bS5uZXdFbWFpbCkge1xuXHRcdFx0dm0uc2hvd1JlcXVpcm5tZW50cyA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZtLnNob3dSZXF1aXJubWVudHMgPSBmYWxzZTtcblx0XHR9XG5cdH1cblxuXHR2bS5jaGVja05ld05hbWUgPSBmdW5jdGlvbigpIHtcblx0XHRcblx0XHRpZih2bS5uZXdOYW1lKSB7XG5cdFx0XHRpZih2bS5uZXdOYW1lLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0dm0udmFsaWROZXdOYW1lLnZhbGlkID0gdHJ1ZTtcblx0XHRcdFx0dm0udmFsaWROZXdOYW1lLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0udmFsaWROZXdOYW1lLnZhbGlkID0gZmFsc2U7XG5cdFx0XHRcdHZtLnZhbGlkTmV3TmFtZS5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dm0ub3BlbkNyZWF0ZVVzZXJCdXR0b24oKTtcblx0fVxuXG5cdHZtLmNoZWNrTmV3RW1haWwgPSBmdW5jdGlvbiAoKSB7XG5cdFx0aWYodm0ubmV3RW1haWwpIHtcblx0XHRcdC8vY2hlY2sgdmFsaWRpdHlcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSsoPzpcXC5bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKSpAKD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1xcLikrW2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1wiLCBcIlwiKTtcblxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZtLm5ld0VtYWlsKSkge1xuXHRcdFx0XHR2bS52YWxpZE5ld0VtYWlsLnZhbGlkID0gdHJ1ZTtcblx0XHRcdFx0dm0udmFsaWROZXdFbWFpbC5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLnZhbGlkTmV3RW1haWwudmFsaWQgPSBmYWxzZTtcblx0XHRcdFx0dm0udmFsaWROZXdFbWFpbC5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdFx0XHR9XHRcdFx0XG5cdFx0fVxuXHRcdFxuXHRcdHZtLm9wZW5DcmVhdGVVc2VyQnV0dG9uKCk7XG5cdH1cblxuXHR2bS5jaGVja1VzZXJFbWFpbCA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHZtLnVzZXJFbWFpbCkge1xuXHRcdFx0Ly9jaGVjayB2YWxpZGl0eVxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XCIsIFwiXCIpO1xuXG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3Qodm0udXNlckVtYWlsKSkge1xuXHRcdFx0XHR2bS52YWxpZFVzZXJFbWFpbC52YWxpZCA9IHRydWU7XG5cdFx0XHRcdHZtLnZhbGlkVXNlckVtYWlsLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0udmFsaWRVc2VyRW1haWwudmFsaWQgPSBmYWxzZTtcblx0XHRcdFx0dm0udmFsaWRVc2VyRW1haWwuc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHZtLm9wZW5Vc2VyTG9naW5CdG4oKTtcblx0fVxuXG5cdHZtLmNoZWNrTmV3UGFzc3dvcmRzID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9mb3IgZWFjaCBwYXNzd29yZCBkZWZpbmUgdGhlIHBhdHRlcm4gdGhhdCB0aGUgcGFzc3dvcmQgbXVzdCBtYXRjaFxuXHRcdHZhciBjb25zdHJhaW50cyA9IHtcblx0IFx0XHQwOiBbJycsICcgeW91ciBwYXNzd29yZCBuZWVkcyB0byBiZSAxNiBjaGFyYWN0ZXJzIG9yIGxvbmdlciddLFxuXHQgXHRcdDE6IFsnJywgJyB5b3VyIHBhc3N3b3JkIG5lZWRzIHRvIGJlIGxlc3MgdGhhbiAxMDAgY2hhcmFjdGVycyddLFxuXHQgXHRcdDI6IFsnW1xcIVxcQFxcI1xcJFxcJVxcXlxcJlxcKl0nLCBcIiBubyByZXF1aXJlZCBzeW1ib2xzIGZvdW5kXCJdLFxuXHQgXHRcdDM6IFsnWzAtOV0nLCBcIiBubyBudW1iZXJzIGZvdW5kXCJdLFxuXHQgXHRcdDQ6IFsnW2Etel0nLCBcIiBubyBsb3dlcmNhc2UgbGV0dGVycyBmb3VuZFwiXSxcblx0IFx0XHQ1OiBbJ1tBLVpdJywgXCIgbm8gdXBwZXJjYXNlIGxldHRlcnMgZm91bmRcIl0sXG5cdCBcdFx0NjogWydbXkEtejAtOVxcIVxcQFxcI1xcJFxcJVxcXlxcJlxcKl0nLCBcIiBpbGxlZ2FsIGNoYXJhY3RlcnMgZm91bmRcIl0sXG4gXHRcdH07XG4gXHRcdFxuIFx0XHQvL2NoZWNrIGZvciBsZW5ndGhcbiBcdFx0aWYodm0ubmV3UGFzc3dvcmQpIHtcbiBcdFx0XHRpZih2bS5uZXdQYXNzd29yZC5sZW5ndGggPiAxNSkgeyBcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzBdLnN0eWxlID0ge2NvbG9yOidncmVlbid9OyBcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzBdLm1ldCA9IHRydWU7IFxuIFx0XHRcdH0gZWxzZSB7XG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1swXS5zdHlsZSA9IHtjb2xvcjoncmVkJ307IFxuIFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMF0ubWV0ID0gZmFsc2U7XG4gXHRcdFx0fVxuIFx0XHRcdGlmKHZtLm5ld1Bhc3N3b3JkLmxlbmd0aCA8PSAxMDApIHsgXG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1sxXS5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTsgXG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1sxXS5tZXQgPSB0cnVlO1xuIFx0XHRcdH0gZWxzZSB7XG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1sxXS5zdHlsZSA9IHtjb2xvcjoncmVkJ307IFxuIFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMV0ubWV0ID0gZmFsc2U7XG4gXHRcdFx0fVxuXG4gXHRcdFx0Ly9jaGVjayBjb25zdHJhaW50cyAyLTVcbiBcdFx0XHRmb3IoaSA9IDI7IGkgPCA2OyBpKyspIHtcblx0IFx0XHRcdC8vY2hlY2sgZm9yIHJlcXVpcmVkIHN5bWJvbHMsIHVwcGVyY2FzZSwgbG9zZXJjYXNlLCBhbmQgY2hhcmFjdGVyc1xuXHQgXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKGNvbnN0cmFpbnRzW2ldWzBdLCBcIlwiKTtcdFxuXG5cdCBcdFx0XHQvL3Rlc3QgZWFjaCBjb25zdHJhdGludFxuXHQgXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZtLm5ld1Bhc3N3b3JkKSkge1xuXHQgXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1tpXS5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0IFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbaV0ubWV0ID0gdHJ1ZTtcblx0IFx0XHRcdH0gZWxzZSB7XG5cdCBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzW2ldLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0IFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbaV0ubWV0ID0gZmFsc2U7XG5cdCBcdFx0XHR9XG5cdCBcdFx0fVxuXG5cdCBcdFx0Ly9jaGVjayBpbGxlZ2FsIGNoYXJhY3RlcnNcblx0IFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoY29uc3RyYWludHNbNl1bMF0sIFwiXCIpO1xuXG5cdCBcdFx0Ly9ydW4gdGhlIGNoZWNrXG5cdCBcdFx0aWYoIWNvbnN0cmFpbnQudGVzdCh2bS5uZXdQYXNzd29yZCkpIHtcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzZdLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzZdLm1ldCA9IGZhbHNlO1xuXHQgXHRcdH0gZWxzZSB7XG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1s2XS5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzZdLm1ldCA9IHRydWU7XG5cdCBcdFx0fVxuXG5cdCBcdFx0Ly9pZiBhbGwgY29uc3RyYWlucyBtZXQsIHRocm93IHZhbGlkIHBhc3MgZmxhZ1xuXHQgXHRcdGlmKCB2bS5wYXNzd29yZFJlcXVpcm5tZW50c1swXS5tZXQgJiZcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzFdLm1ldCAmJlxuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMl0ubWV0ICYmXG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1szXS5tZXQgJiZcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzRdLm1ldCAmJlxuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNV0ubWV0ICYmXG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1s2XS5tZXQpIHtcblx0IFx0XHRcdHZtLnNlY3VyZVBhc3N3b3JkLnNlY3VyZSA9IHRydWVcblx0IFx0XHR9IGVsc2Uge1xuXHQgXHRcdFx0dm0uc2VjdXJlUGFzc3dvcmQuc2VjdXJlID0gZmFsc2U7XG5cdCBcdFx0fVxuXG5cdCBcdFx0aWYodm0uc2VjdXJlUGFzc3dvcmQuc2VjdXJlKSB7XG5cdCBcdFx0XHR2bS5zZWN1cmVQYXNzd29yZC5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0IFx0XHR9IGVsc2Uge1xuXHQgXHRcdFx0dm0uc2VjdXJlUGFzc3dvcmQuc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHQgXHRcdH1cbiBcdFx0fVxuIFx0XHRcbiBcdFx0dm0ub3BlbkNyZWF0ZVVzZXJCdXR0b24oKTtcblx0fVxuXG5cdHZtLmNoZWNrVXNlclBhc3N3b3JkcyA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHZtLnVzZXJQYXNzd29yZCkge1xuXHRcdFx0aWYodm0udXNlclBhc3N3b3JkLmxlbmd0aCA+IDE1KSB7XG5cdFx0XHRcdHZtLnZhbGlkVXNlclBhc3N3b3JkLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHRcdFx0XHR2bS52YWxpZFVzZXJQYXNzd29yZC52YWxpZCA9IHRydWU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS52YWxpZFVzZXJQYXNzd29yZC5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdFx0XHRcdHZtLnZhbGlkVXNlclBhc3N3b3JkLnZhbGlkID0gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHR9XG5cdFx0XG5cdFx0dm0ub3BlblVzZXJMb2dpbkJ0bigpO1xuXHR9XG5cblx0dm0ub3BlbkNyZWF0ZVVzZXJCdXR0b24gPSBmdW5jdGlvbigpIHtcblx0XHRpZih2bS52YWxpZE5ld05hbWUudmFsaWQgJiYgdm0udmFsaWROZXdFbWFpbC52YWxpZCAmJiB2bS5zZWN1cmVQYXNzd29yZC5zZWN1cmUpIHtcblx0XHRcdHZtLnVubG9ja0NyZWF0ZVVzZXJCdG4uY2xhc3MgPSAnYnRuIGJ0bi1zdWNjZXNzJztcblx0XHRcdHZtLnVubG9ja0NyZWF0ZVVzZXJCdG4udXNhYmxlID0gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dm0udW5sb2NrQ3JlYXRlVXNlckJ0bi5jbGFzcyA9ICdidG4gYnRuLXdhcm5pbmcnO1xuXHRcdFx0dm0udW5sb2NrQ3JlYXRlVXNlckJ0bi51c2FibGUgPSBmYWxzZTtcdFxuXHRcdH1cblxuXHR9XG5cblx0dm0ub3BlblVzZXJMb2dpbkJ0biA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHZtLnZhbGlkVXNlckVtYWlsLnZhbGlkICYmIHZtLnZhbGlkVXNlclBhc3N3b3JkLnZhbGlkKSB7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLmNsYXNzID0gJ2J0biBidG4tc3VjY2Vzcyc7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLnVzYWJsZSA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4uY2xhc3MgPSAnYnRuIGJ0bi13YXJuaW5nJztcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlID0gZmFsc2U7XHRcblx0XHR9XG5cdH1cblxuXHR2bS51cGRhdGUgPSBmdW5jdGlvbigpIHtcblx0XHQvL3NldCB2YWx1ZXNcblx0XHR2bS5uZXdOYW1lID0gJGRvY3VtZW50LmZpbmQoJyNuZXdOYW1lJylbMF0udmFsdWU7XG5cdFx0dm0ubmV3RW1haWwgPSAkZG9jdW1lbnQuZmluZCgnI25ld0VtYWlsJylbMF0udmFsdWU7XG5cdFx0dm0udXNlckVtYWlsID0gJGRvY3VtZW50LmZpbmQoJyN1c2VyRW1haWwnKVswXS52YWx1ZTtcblx0XHRcblx0XHR2bS5jaGVja05ld05hbWUoKTtcblx0XHR2bS5jaGVja05ld0VtYWlsKCk7XG5cdFx0dm0uY2hlY2tVc2VyRW1haWwoKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHJlZGlyZWN0KHBhdGgsIHVzZXJEYXRhKSB7XG5cdFx0dmFyIGZ1bGxQYXRoID0gcGF0aCArICcvJyArIGN1cnJlbnRVc2VyRGF0YS51aWQgKyAnLycgKyBjdXJyZW50VXNlckRhdGEudG9rZW47XG5cdFx0Ly9yZWRpcmVjdFxuXHRcdCRsb2cuaW5mbygncmVkaXJlY3RpbmcgdG86ICcgKyBmdWxsUGF0aCk7XG5cdFx0JGxvY2F0aW9uLnBhdGgoZnVsbFBhdGgpO1xuXHRcdCRzY29wZS4kYXBwbHkoKTtcblx0fVxuXG5cdHZtLmNyZWF0ZU5ld1VzZXIgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9nLmluZm8oJ0NyZWF0aW5nIGEgbmV3IHVzZXIgYWNjb3VudCBub3chJyk7XG5cblx0XHRpZih2bS51bmxvY2tDcmVhdGVVc2VyQnRuLnVzYWJsZSkge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVcblx0XHRcdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXG5cdFx0XHRyZWYuY3JlYXRlVXNlcih7XG5cdFx0XHRcdGVtYWlsOnZtLm5ld0VtYWlsLFxuXHRcdFx0XHRwYXNzd29yZDp2bS5uZXdQYXNzd29yZFxuXHRcdFx0fSxmdW5jdGlvbihlcnJvciwgdXNlckRhdGEpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ0Vycm9yIGNyZWF0aW5nIHVzZXI6ICcgKyBlcnJvcik7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly9sb2cgcmVzdWx0c1xuXHRcdFx0XHRcdCRsb2cuaW5mbyh1c2VyRGF0YSk7XG5cblx0XHRcdFx0XHQvL3NhdmUgYWxsIHRoZSBkYXRhXG5cdFx0XHRcdFx0Y3VycmVudFVzZXJEYXRhID0gdXNlckRhdGE7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly9nZW5lcmF0ZSB0aGUgdXNlciByZWNvcmRcblx0XHRcdFx0XHR2YXIgdXNlcnNSZWYgPSByZWYuY2hpbGQoJ1VzZXJzLycgKyB1c2VyRGF0YS51aWQpO1xuXHRcdFx0XHRcdHZhciBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XG5cblx0XHRcdFx0XHQvL3dyaXRlIG5ldyB1c2VyIHRvIHRoZSBkYXRhYmFzZSB3aXRoIGJpbyBpbmZvXG5cdFx0XHRcdFx0dXNlcnNSZWYuc2V0KHsgXG5cdFx0XHRcdFx0XHQnYmlvJzoge1xuXHRcdFx0XHRcdFx0XHQnbmFtZSc6IHZtLm5ld05hbWUsXG5cdFx0XHRcdFx0XHRcdCdlbWFpbCc6IHZtLm5ld0VtYWlsXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0J2V2ZW50cyc6IHtcblx0XHRcdFx0XHRcdFx0J3BlbmRpbmcnOiB7XG5cdFx0XHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdCdob3N0aW5nJzoge1xuXHRcdFx0XHRcdFx0XHRcdCd1cGRhdGVkJzogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHQnYXR0ZW5kaW5nJzoge1xuXHRcdFx0XHRcdFx0XHRcdCd1cGRhdGVkJzogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHQnY29tcGxldGVkJzoge1xuXHRcdFx0XHRcdFx0XHRcdCd1cGRhdGVkJzogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0XHRcdGlmKGVycm9yKSB7XG5cdFx0XHRcdFx0XHRcdCRsb2cuaW5mbygnRGF0YSBjb3VsZCBub3QgYmUgc2F2ZWQ6ICcgKyBlcnJvcik7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQkbG9nLmluZm8oJ0RhdGEgc2F2ZWQgc3VjY2Vzc2Z1bGx5LicpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdC8vYWRkIHRoaXMgdXNlciB0byB0aGUgbGlzdCBvZiByZWdpc3RlcmVkIHVzZXJzXG5cdFx0XHRcdFx0cmVmLmNoaWxkKCdVaWRzJykuY2hpbGQodXRmOF90b19iNjQodm0ubmV3RW1haWwpKS5zZXQoY3VycmVudFVzZXJEYXRhLnVpZCwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oXCJEYXRhIGNvdWxkIG5vdCBiZSBzYXZlZC4gXCIgKyBlcnJvcik7XG5cdFx0XHRcdFx0XHRlbHNlICRsb2cuaW5mbyhcInVpZCBjcmVhdGVkIHN1Y2Vzc2Z1bGx5LlwiKTtcblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdC8vcmVkaXJlY3QgdG8gVXNlckluZm9ybWF0aW9uXG5cdFx0XHRcdFx0cmVkaXJlY3QoJy91c2VySW5mb3JtYXRpb24nLCBjdXJyZW50VXNlckRhdGEpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdH1cblx0fVxuXG5cdHZtLmxvZ2luUmVnaXN0ZXJlZFVzZXIgPSBmdW5jdGlvbigpIHtcblxuXHRcdGlmKHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlKSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZVxuXHRcdFx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cblx0XHRcdC8vYXV0aGVudGljYXRlIHRoZSB1c2VyXG5cdFx0XHRyZWYuYXV0aFdpdGhQYXNzd29yZCh7XG5cdFx0XHRcdGVtYWlsOiB2bS51c2VyRW1haWwsXG5cdFx0XHRcdHBhc3N3b3JkOiB2bS51c2VyUGFzc3dvcmRcblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yLCBhdXRoRGF0YSkge1xuXHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnRXJyb3IgTG9nZ2luZyBJbjogJyArIGVycm9yKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ0xvZ2dlZCBJbiBzdWNjZXNzZnVsbHk6ICcgKyBhdXRoRGF0YS51aWQpO1xuXHRcdFx0XHRcdCRsb2cuaW5mbyhhdXRoRGF0YSk7XG5cdFx0XHRcdFx0Ly9zYXZlIGFsbCB0aGUgZGF0YVxuXHRcdFx0XHRcdGN1cnJlbnRVc2VyRGF0YSA9IGF1dGhEYXRhO1xuXG5cdFx0XHRcdFx0Ly9sb2FkIHVzZXIgYmlvXG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly9sb2FkIHVzZXIgZXZlbnRzXG5cblx0XHRcdFx0XHQvL3JlZGlyZWN0XG5cdFx0XHRcdFx0cmVkaXJlY3QoJy91c2VySW5mb3JtYXRpb24nLCBjdXJyZW50VXNlckRhdGEpO1xuXHRcdFx0XHRcdCRzY29wZS4kYXBwbHkoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHR9XG5cblx0fVxuXG5cdHZtLmFsZXJ0TWUgPSBmdW5jdGlvbigpIHtcblx0XHRhbGVydCgndGhpcyBpcyB3b3JraW5nISBhbiBhbGVydCEnKTtcblx0fVxuXG5cdHZtLm9uUmVzaXplRnVuY3Rpb24gPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgaW5wdXRUZXh0ID0gYW5ndWxhci5lbGVtZW50KCcuaW5wdXRUZXh0Jyk7XG5cdFx0aWYoJHdpbmRvdy5vdXRlcldpZHRoID4gJHdpbmRvdy5vdXRlckhlaWdodCkge1xuXHRcdFx0aW5wdXRUZXh0LmNzcygnZm9udC1zaXplJywgJzJlbScpO1xuXHRcdFx0JGxvZy5pbmZvKCdtYWtpbmcgYmlnZ2VyJyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlucHV0VGV4dC5jc3MoJ2ZvbnQtc2l6ZScsICcxLjJlbScpO1xuXHRcdH1cblx0fVxuXG5cdC8vZXZlbnQgbGlzdGVuZXJzXG5cdGlmICgnYWRkRXZlbnRMaXN0ZW5lcicgaW4gJGRvY3VtZW50KSB7XG5cdCAgICAkZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkge1xuXHQgICAgXHQkbG9nLmluZm8oJ2FkZGluZyBGYXN0Q2xpY2snKTtcblx0ICAgICAgICBGYXN0Q2xpY2suYXR0YWNoKCRkb2N1bWVudC5ib2R5KTtcblx0ICAgIH0sIGZhbHNlKTtcblx0fVxuXG5cdGFuZ3VsYXIuZWxlbWVudCgkd2luZG93KS5iaW5kKCdyZXNpemUnLCBmdW5jdGlvbigpIHtcblx0XHR2bS5vblJlc2l6ZUZ1bmN0aW9uKCk7XG5cdFx0Ly8kc2NvcGUuJGFwcGx5KCk7XG5cdH0pO1xuXG5cdGFuZ3VsYXIuZWxlbWVudCgkZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXHRcdGlmKCR3aW5kb3cub3V0ZXJXaWR0aCA8IDYwMCkge1xuXHRcdFx0dm0ub25SZXNpemVGdW5jdGlvbigpO1xuXHRcdFx0Ly8kc2NvcGUuJGFwcGx5KCk7XG5cdFx0fVxuXHR9KVxuXG5cblx0IHZtLm1hc3RlciA9IHt9O1xuXG5cdCAgdm0udXBkYXRlID0gZnVuY3Rpb24odXNlcikge1xuXHQgICAgdm0ubWFzdGVyID0gYW5ndWxhci5jb3B5KHVzZXIpO1xuXHQgIH07XG5cblx0ICB2bS5yZXNldCA9IGZ1bmN0aW9uKGZvcm0pIHtcblx0ICAgIGlmIChmb3JtKSB7XG5cdCAgICAgIGZvcm0uJHNldFByaXN0aW5lKCk7XG5cdCAgICAgIGZvcm0uJHNldFVudG91Y2hlZCgpO1xuXHQgICAgfVxuXHQgICAgdm0udXNlciA9IGFuZ3VsYXIuY29weSh2bS5tYXN0ZXIpO1xuXHQgIH07XG5cblx0ICB2bS5yZXNldCgpO1xufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ01haW5Db250cm9sbGVyJywgTWFpbkNvbnRyb2xsZXIpO1xuXG5NYWluQ29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJywgJyRsb2NhdGlvbicsICckZG9jdW1lbnQnLCAnJHdpbmRvdyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIE1haW5Db250cm9sbGVyKCRsb2csICRsb2NhdGlvbiwgJGRvY3VtZW50LCAkd2luZG93KSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdHZhciBmYlVSTCA9ICdodHRwczovL21lZXR1cHBsYW5uZXIuZmlyZWJhc2Vpby5jb20vJztcblx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7IFxuXG5cdGZ1bmN0aW9uIHJlc2l6ZUJHSW1hZ2UoKSB7XG5cdFx0dmFyIGJvZHkgPSBhbmd1bGFyLmVsZW1lbnQoJGRvY3VtZW50KTtcblx0XHQkZG9jdW1lbnQuY3NzKCdoaWdodCcsICR3aW5kb3cub3V0ZXJIZWlnaHQpXG5cdH1cblxuXHR2bS5sb2dvdXQgPSBmdW5jdGlvbigpIHtcblx0XHRhbGVydCgnbG9nZ2luZyB5b3Ugb3V0IScpO1xuXHRcdHJlZi51bmF1dGgoKTtcblx0XHQkbG9jYXRpb24ucGF0aCgnLycpO1xuXHR9O1xuXG5cdGFuZ3VsYXIuZWxlbWVudCgkZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXHRcdC8vRmFzdENsaWNrLmF0dGFjaCgkZG9jdW1lbnQuYm9keSk7XG5cdFx0cmVzaXplQkdJbWFnZSgpO1xuXHR9KVxufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ05ld1VzZXJTaWduVXBDb250cm9sbGVyJywgTmV3VXNlclNpZ25VcENvbnRyb2xsZXIpO1xuXG5OZXdVc2VyU2lnblVwQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZycsICd2YWxpZGF0aW9uJywgJ2JhY2tlbmRTZXJ2aWNlcycsICd0cmFmZmljVmFsZXQnLCAndXNlckRhdGEnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBOZXdVc2VyU2lnblVwQ29udHJvbGxlcigkc2NvcGUsICRsb2csIHZhbGlkYXRpb24sIGJhY2tlbmRTZXJ2aWNlcywgdHJhZmZpY1ZhbGV0LCB1c2VyRGF0YSkge1xuXHR2YXIgdm0gPSB0aGlzO1xuXG5cdC8vZGVmaW5lIHZtIGlucHV0IHZhcmlhYmxlc1xuXHR2bS5pbnB1dHMgPSB7XG5cdFx0bmV3TmFtZTogJycsXG5cdFx0bmV3RW1haWw6ICcnLFxuXHRcdG5ld1Bhc3N3b3JkOiAnJyxcblx0XHRyZXF1aXJlZEZpZWxkc0RlZmluZWQ6IGZhbHNlXG5cdH1cblx0dm0uZXJyb3JzID0ge1xuXHRcdG5hbWU6ICcnLFxuXHRcdGVtYWlsOiAnJyxcblx0XHRwYXNzd29yZDogZmFsc2UsXG5cdFx0cGFzc2VzQWxsVGVzdHM6IGZhbHNlXG5cdH1cblx0dm0ucGFzc1JlcXMgPSB7XG5cdFx0MDogeyBpZDonJywgcmVxOidJcyBhdCBsZWFzdCAxNiBjaGFyYWN0ZXJzIGxvbmcnLCBmdWxmaWxsZWQ6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOidyZWQnfX0sXG5cdFx0MTogeyBpZDonJywgcmVxOidJcyBubyBsb25nZXIgdGhhbiAxMDAgY2hhcmFjdGVycycsIGZ1bGZpbGxlZDpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9IH0sXG5cdFx0MjogeyBpZDonJywgcmVxOidDb250YWlucyBhdCBsZWFzdCBvbmUgbG93ZXJjYXNlIGxldHRlcicsIGZ1bGZpbGxlZDpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9IH0sXG5cdFx0MzogeyBpZDonJywgcmVxOidDb250YWlucyBhdCBsZWFzdCBvbmUgdXBwZXJjYXNlIGxldHRlcicsIGZ1bGZpbGxlZDpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9IH0sXG5cdFx0NDogeyBpZDonJywgcmVxOidDb250YWlucyBhdCBsZWFzdCBvbmUgbnVtYmVyJywgZnVsZmlsbGVkOmZhbHNlLCAnc3R5bGUnOntjb2xvcjoncmVkJ30gfSxcblx0XHQ1OiB7IGlkOicnLCByZXE6J0NvbnRhaW5zIGF0IGxlYXN0IG9uZSByZXF1aXJlZCBzeW1ib2wgKFxcIVxcQFxcI1xcJFxcJVxcXlxcJlxcKiknLCBmdWxmaWxsZWQ6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOidyZWQnfSB9LFxuXHRcdDY6IHsgaWQ6JycsIHJlcTpcIkRvZXNuJ3QgaGF2ZSBhbnkgaWxsZWdhbCBjaGFyYWN0ZXJzXCIsIGZ1bGZpbGxlZDp0cnVlLCAnc3R5bGUnOntjb2xvcjoncmVkJ30gfVxuXHR9XG5cdHZtLnNob3dSZXFzQm94ID0gZmFsc2U7XG5cblx0Ly9kZWZpbmUgcmVxdWlyZWQgZmllbGQgY29uc3RyYWludHNcblx0dmFyIHNpZ251cFZhbGlkYXRpb24gPSB2YWxpZGF0aW9uO1xuXG5cdC8vZGVmaW5lIGNvbnRyb2xsZXIgbWV0aG9kc1xuXHRmdW5jdGlvbiB2ZXJpZnlSZXF1aXJubWVudHMoKSB7XG5cdFx0aWYodm0uZXJyb3JzLm5hbWUgPT0gJycgJiYgdm0uZXJyb3JzLmVtYWlsID09ICcnICYmICF2bS5lcnJvcnMucGFzc3dvcmQpIHZtLmVycm9ycy5wYXNzZXNBbGxUZXN0cyA9IHRydWU7XG5cdFx0ZWxzZSB2bS5lcnJvcnMucGFzc2VzQWxsVGVzdHMgPSBmYWxzZTtcblxuXHRcdGlmKCBhbmd1bGFyLmlzRGVmaW5lZCh2bS5pbnB1dHMubmV3TmFtZSkgJiYgdm0uaW5wdXRzLm5ld05hbWUgIT09ICcnICYmXG5cdFx0XHRhbmd1bGFyLmlzRGVmaW5lZCh2bS5pbnB1dHMubmV3RW1haWwpICYmIHZtLmlucHV0cy5uZXdFbWFpbCAhPT0gJycgJiZcblx0XHRcdGFuZ3VsYXIuaXNEZWZpbmVkKHZtLmlucHV0cy5uZXdQYXNzd29yZCkgJiYgdm0uaW5wdXRzLm5ld1Bhc3N3b3JkICE9PSAnJykgXG5cdFx0XHRcdHZtLmlucHV0cy5yZXF1aXJlZEZpZWxkc0RlZmluZWQgPSB0cnVlO1xuXHRcdGVsc2Ugdm0uaW5wdXRzLnJlcXVpcmVkRmllbGRzRGVmaW5lZCA9IGZhbHNlO1xuXHR9XG5cblx0Ly9kZWZpbmUgdm0gYWNjZXNzaWJsZSBtZXRob2RzXG5cdHZtLmNoZWNrTmV3TmFtZSA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVcblx0XHR2YXIgZXJyb3JzID0gW107XG5cdFx0dmFyIGhhc05hbWUgPSBzaWdudXBWYWxpZGF0aW9uLnJlcXVpcmVkKHZtLmlucHV0cy5uZXdOYW1lKTtcblx0XHR2YXIgbG9uZ0Vub3VnaCA9IHNpZ251cFZhbGlkYXRpb24ubWluTmFtZUxlbmd0aCh2bS5pbnB1dHMubmV3TmFtZSlcblx0XHRcblx0XHQvL2xvZyBlcnJvcnNcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChoYXNOYW1lKSkgZXJyb3JzLnB1c2goaGFzTmFtZSk7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQobG9uZ0Vub3VnaCkpIGVycm9ycy5wdXNoKGxvbmdFbm91Z2gpO1xuXG5cdFx0Ly91cGRhdGUgdGhlIGVycm9ycyBtb2RlbFxuXHRcdGlmKGVycm9ycy5sZW5ndGggPiAwKSB2bS5lcnJvcnMubmFtZSA9IGVycm9ycy5qb2luKCcsICcpO1xuXHRcdGVsc2Ugdm0uZXJyb3JzLm5hbWUgPSAnJztcblxuXHRcdHZlcmlmeVJlcXVpcm5tZW50cygpO1xuXHR9XG5cblx0dm0uY2hlY2tOZXdFbWFpbCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVcblx0XHR2YXIgZXJyb3JzID0gW107XG5cdFx0dmFyIGhhc0VtYWlsID0gc2lnbnVwVmFsaWRhdGlvbi5yZXF1aXJlZCh2bS5pbnB1dHMubmV3RW1haWwpO1xuXHRcdHZhciBpc0FuRW1haWwgPSBzaWdudXBWYWxpZGF0aW9uLmVtYWlsKHZtLmlucHV0cy5uZXdFbWFpbCk7XG5cdFx0XG5cdFx0Ly9sb2cgZXJyb3JzXG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoaGFzRW1haWwpKSBlcnJvcnMucHVzaChoYXNFbWFpbCk7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoaXNBbkVtYWlsKSkgZXJyb3JzLnB1c2goaXNBbkVtYWlsKTtcblxuXHRcdC8vdXBkYXRlIHRoZSBlcnJvcnMgbW9kZWxcblx0XHRpZihlcnJvcnMubGVuZ3RoID4gMCkgdm0uZXJyb3JzLmVtYWlsID0gZXJyb3JzLmpvaW4oJywgJyk7XG5cdFx0ZWxzZSB2bS5lcnJvcnMuZW1haWwgPSAnJztcblxuXHRcdHZlcmlmeVJlcXVpcm5tZW50cygpO1xuXHR9XG5cblx0dm0uY2hlY2tOZXdQYXNzd29yZCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vZmxpcCBvbiByZXFzIGJveFxuXHRcdHZtLnNob3dSZXFzQm94ID0gdHJ1ZTtcblxuXHRcdC8vbG9jYWwgdmFyaWFibGVcblx0XHR2YXIgZXJyb3JzID0gW107XG5cdFx0dmFyIGhhc1Bhc3N3b3JkID0gc2lnbnVwVmFsaWRhdGlvbi5yZXF1aXJlZCh2bS5pbnB1dHMubmV3UGFzc3dvcmQpO1xuXHRcdHZhciBzcGVjaWZpY1JlcXMgPSBbXG5cdFx0XHRzaWdudXBWYWxpZGF0aW9uLm1pblBhc3NMZW5ndGgodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKSxcblx0XHRcdHNpZ251cFZhbGlkYXRpb24ubWF4UGFzc0xlbmd0aCh2bS5pbnB1dHMubmV3UGFzc3dvcmQpLFxuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5hdExlYXN0T25lTG93ZXJjYXNlKHZtLmlucHV0cy5uZXdQYXNzd29yZCksXG5cdFx0XHRzaWdudXBWYWxpZGF0aW9uLmF0TGVhc3RPbmVVcHBlcmNhc2Uodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKSxcblx0XHRcdHNpZ251cFZhbGlkYXRpb24uYXRMZWFzdE9uZU51bWJlcih2bS5pbnB1dHMubmV3UGFzc3dvcmQpLFxuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5hdExlYXN0T25lU3ltYm9sKHZtLmlucHV0cy5uZXdQYXNzd29yZCksXG5cdFx0XHRzaWdudXBWYWxpZGF0aW9uLmlsbGVnYWxDaGFyYWN0ZXIodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKVxuXHRcdF07XG5cblx0XHQvL2xvZyBlcnJvcnNcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChoYXNQYXNzd29yZCkpIGVycm9ycy5wdXNoKGhhc1Bhc3N3b3JkKTtcblxuXHRcdC8vdXBkYXRlIHRoZSBlcnJvcnMgbW9kZWxcblx0XHRpZihlcnJvcnMubGVuZ3RoID4gMCkgdm0uZXJyb3JzLnBhc3N3b3JkID0gZXJyb3JzLmpvaW4oJywgJyk7XG5cdFx0ZWxzZSB2bS5lcnJvcnMuZW1haWwgPSAnJztcblxuXHRcdC8vdXBkYXRlIHJlcXMgbW9kZWxcblx0XHR2YXIgYW55RXJyb3JzID0gZmFsc2U7XG5cdFx0Zm9yKGk9MDsgaTw3OyBpKyspIHtcblx0XHRcdGlmKHNwZWNpZmljUmVxc1tpXSkge1xuXHRcdFx0XHR2bS5wYXNzUmVxc1tpXS5mdWxmaWxsZWQgPSB0cnVlO1xuXHRcdFx0XHR2bS5wYXNzUmVxc1tpXS5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLnBhc3NSZXFzW2ldLmZ1bGZpbGxlZCA9IGZhbHNlO1xuXHRcdFx0XHR2bS5wYXNzUmVxc1tpXS5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdFx0XHRcdGFueUVycm9ycyA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dm0uZXJyb3JzLnBhc3N3b3JkID0gYW55RXJyb3JzO1xuXHRcdHZlcmlmeVJlcXVpcm5tZW50cygpO1xuXHR9XG5cblx0dm0uZXhpdFBhc3N3b3JkID0gZnVuY3Rpb24oKSB7XG5cdFx0dm0uY2hlY2tOZXdQYXNzd29yZCgpO1xuXHRcdHZtLnNob3dSZXFzQm94ID0gZmFsc2U7XG5cdH1cblxuXHR2bS5jcmVhdGVOZXdVc2VyID0gZnVuY3Rpb24gKCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgbmV3VXNlclNoZXJwYSA9IHRyYWZmaWNWYWxldDtcblxuXHRcdC8vY29uZmlybSBhbGwgZmllbGRzIGFyZSB2YWxpZFxuXHRcdGlmKHZtLmVycm9ycy5wYXNzZXNBbGxUZXN0cyAmJiB2bS5pbnB1dHMucmVxdWlyZWRGaWVsZHNEZWZpbmVkKSB7XG5cdFx0XHRcblx0XHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRcdHZhciBjcmVhdGVOZXdVc2VyID0gYmFja2VuZFNlcnZpY2VzO1xuXHRcdFx0dmFyIG5ld1VzZXJEYXRhID0gdXNlckRhdGE7XG5cdFx0XHR2YXIgdGhpc1VJRDtcblxuXHRcdFx0Ly9jcmVhdGUgdGhlIG5ldyB1c2VyIGluIHRoZSBkYXRhYmFzZVxuXHRcdFx0Y3JlYXRlTmV3VXNlci5jcmVhdGVOZXdVc2VyKHZtLmlucHV0cy5uZXdFbWFpbCwgdm0uaW5wdXRzLm5ld1Bhc3N3b3JkKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24oZGJVc2VyRGF0YSkge1xuXHRcdFx0XHRcblx0XHRcdFx0Ly9tYWludGFpbiBsb2NhbCB2YWx1ZXMgdG8gc3BlZWQgdXAgdXNlciBleHBlcmllbmNlXG5cdFx0XHRcdG5ld1VzZXJEYXRhLmxvYWRQcmltYXJpZXModm0uaW5wdXRzLm5ld0VtYWlsLCB2bS5pbnB1dHMubmV3TmFtZSwgZGJVc2VyRGF0YS51aWQpO1xuXG5cdFx0XHRcdC8vY3JlYXRlIGEgdXNlciBwcm9maWxlIGluIHRoZSBkYXRhYmFzZVxuXHRcdFx0XHRjcmVhdGVOZXdVc2VyLmFkZE5ld1VzZXJUb0RhdGFiYXNlKGRiVXNlckRhdGEudWlkLCB2bS5pbnB1dHMubmV3TmFtZSwgdm0uaW5wdXRzLm5ld0VtYWlsKVxuXHRcdFx0XHQudGhlbihmdW5jdGlvbihtZXNzYWdlKSB7XG5cblx0XHRcdFx0XHQkbG9nLmluZm8obWVzc2FnZSk7XG5cblx0XHRcdFx0XHQvL2FkZCB0aGlzIHVzZXIgdG8gdGhlIGxpc3Qgb2YgcmVnaXN0ZXJlZCB1c2Vyc1xuXHRcdFx0XHRcdGNyZWF0ZU5ld1VzZXIuYWRkTmV3VXNlclRvUmVnVXNlcnNMaXN0KGRiVXNlckRhdGEudWlkLCB2bS5pbnB1dHMubmV3RW1haWwpXG5cdFx0XHRcdFx0LnRoZW4oZnVuY3Rpb24obWVzc2FnZSkge1xuXG5cdFx0XHRcdFx0XHQvL3JlZGlyZWN0IHVzaW5nIHRoZSB1aWRcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0Ly9yZWRpcmVjdCB0byB0aGUgbmV4dCBwYWdlIFxuXHRcdFx0XHRcdFx0bmV3VXNlclNoZXJwYS5yZWRpcmVjdFRvKCcvdXNlckluZm9ybWF0aW9uJywgZGJVc2VyRGF0YS51aWQpO1xuXHRcdFx0XHRcdFx0IFxuXHRcdFx0XHRcdFx0JGxvZy5pbmZvKG1lc3NhZ2UpOyBcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdC5jYXRjaChmdW5jdGlvbihtZXNzYWdlKSB7ICRsb2cuaW5mbyhtZXNzYWdlKTsgfSlcblx0XHRcdFx0fSlcblx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKG1lc3NhZ2UpIHsgJGxvZy5pbmZvKG1lc3NhZ2UpOyB9KVxuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihtZXNzYWdlKSB7ICRsb2cuaW5mbyhtZXNzYWdlKTsgfSlcblx0XHRcdFxuXHRcdH1cblxuXHR9XG5cdFxuXHQvL3J1biB0aW1lIGFjdGlvbnNcblxufVxuIiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignUmVnVXNlckxvZ2luQ29udHJvbGxlcicsIFJlZ1VzZXJMb2dpbkNvbnRyb2xsZXIpO1xuXG5SZWdVc2VyTG9naW5Db250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJGRvY3VtZW50JywgJ2JhY2tlbmRTZXJ2aWNlcycsICd0cmFmZmljVmFsZXQnLCAndXNlckRhdGEnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBSZWdVc2VyTG9naW5Db250cm9sbGVyKCRsb2csICRkb2N1bWVudCwgYmFja2VuZFNlcnZpY2VzLCB0cmFmZmljVmFsZXQsIHVzZXJEYXRhKSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cblx0Ly9kZWZpbmUgdm0gaW5wdXQgdmFyaWFibGVzXG5cdHZtLmlucHV0cyA9IHtcblx0XHRlbWFpbDogJycsXG5cdFx0cGFzc3dvcmQ6ICcnLFxuXHRcdHJlcXVpcmVkRmllbGRzRGVmaW5lZDogZmFsc2Vcblx0fVxuXHR2bS5lcnJvcnMgPSB7XG5cdFx0bWVzc2FnZTogJycsXG5cdFx0cGFzc2VzQWxsVGVzdHM6IHRydWVcblx0fVxuXHR2bS51bmNsb2NrVXNlckxvZ2luQnRuID0ge1xuXHRcdCd1c2FibGUnOmZhbHNlLCBcblx0XHQnY2xhc3MnOididG4gYnRuLXdhcm5pbmcnLFxuXHRcdG1lc3NhZ2U6ICdOZWVkIEVtYWlsICYgUGFzcydcblx0fVxuXG5cdC8vbWV0aG9kc1xuXHRmdW5jdGlvbiBvcGVuVXNlckxvZ2luQnRuKCkge1xuXHRcdC8vY2hlY2sgdGhhdCB0aGVyZSBpcyBhbiBlbWFpbCBhbmQgdGhlcmUgaXMgYSBwYXNzd29yZFxuXHRcdGlmKFx0YW5ndWxhci5pc0RlZmluZWQodm0uaW5wdXRzLmVtYWlsKSAmJiB2bS5pbnB1dHMuZW1haWwgIT09ICcnICYmXG5cdFx0XHRhbmd1bGFyLmlzRGVmaW5lZCh2bS5pbnB1dHMucGFzc3dvcmQpICYmIHZtLmlucHV0cy5wYXNzd29yZCAhPT0gJycpIFxuXHRcdHtcblx0XHRcdHZtLmlucHV0cy5yZXF1aXJlZEZpZWxkc0RlZmluZWQgPSB0cnVlO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi5jbGFzcyA9ICdidG4gYnRuLXN1Y2Nlc3MnO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi5tZXNzYWdlID0gJ0xvZ2luJztcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlID0gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dm0uaW5wdXRzLnJlcXVpcmVkRmllbGRzRGVmaW5lZCA9IGZhbHNlO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi5jbGFzcyA9ICdidG4gYnRuLXdhcm5pbmcnO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi5tZXNzYWdlID0gJ05lZWQgRW1haWwgJiBQYXNzJztcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlID0gZmFsc2U7XG5cdFx0fVxuXG5cdH1cblxuXHQvL3ZpZXcgbW9kZWwgbWV0aG9kc1xuXHR2bS51cGRhdGUgPSBmdW5jdGlvbigpIHtcblx0XHQvL3NldCB2YWx1ZXNcblx0XHR2bS5pbnB1dHMuZW1haWwgPSAkZG9jdW1lbnQuZmluZCgnI3VzZXJFbWFpbCcpWzBdLnZhbHVlO1xuXHRcdHZtLmlucHV0cy5wYXNzd29yZCA9ICRkb2N1bWVudC5maW5kKCcjdXNlclBhc3N3b3JkJylbMF0udmFsdWU7XG5cdFx0XG5cdFx0b3BlblVzZXJMb2dpbkJ0bigpO1xuXHR9XG5cblx0dm0ubG9naW5SZWdpc3RlcmVkVXNlciA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgcmVnaXN0ZXJlZFVzZXJTaGVycGEgPSB0cmFmZmljVmFsZXQ7XG5cblx0XHQvL2NvbmZpcm0gYWxsIGZpZWxkcyBhcmUgdmFsaWRcblx0XHRpZih0cnVlKSB7XG5cdFx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgZGF0YWJhc2UgPSBiYWNrZW5kU2VydmljZXM7XG5cdFx0XHR2YXIgcmVnaXN0ZXJlZFVzZXJEYXRhID0gdXNlckRhdGE7XG5cblx0XHRcdC8vdmVyaWZ5IHVzZXJzIGNyZWRlbnRpYWxzXG5cdFx0XHRkYXRhYmFzZS5Mb2dpblJlZ2lzdGVyZWRVc2VyKHZtLmlucHV0cy5lbWFpbCwgdm0uaW5wdXRzLnBhc3N3b3JkKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24odXNlckNyZWRlbnRpYWxzKSB7XG5cdFx0XHRcdC8vaWYgbm8gdHJvdWJsZSBsb2dnaW5nIGluIHVwZGF0ZSBlcnJvciBvYmplY3Rcblx0XHRcdFx0dm0uZXJyb3JzLnBhc3Nlc0FsbFRlc3RzID0gdHJ1ZTtcblxuXHRcdFx0XHQvL2FkZCBwcmltYXJ5IGluZm9ybWF0aW9uIHRvIGxvY2FsIG1vZGVsXG5cdFx0XHRcdHJlZ2lzdGVyZWRVc2VyRGF0YS5zZXRQcmltYXJpZXNMb2NhbGx5KHZtLmlucHV0cy5lbWFpbCwgdm0uaW5wdXRzLm5hbWUsIHVzZXJDcmVkZW50aWFscy51aWQpO1xuXG5cdFx0XHR9KVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCRsb2cuaW5mbyhcInVpZCBpcyBcIiArIHJlZ2lzdGVyZWRVc2VyRGF0YS5nZXRVSURMb2NhbGx5KCkpO1xuXG5cdFx0XHRcdGRhdGFiYXNlLmdldFVzZXJCaW8ocmVnaXN0ZXJlZFVzZXJEYXRhLmdldFVJRExvY2FsbHkoKSlcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24odXNlckJpbykge1xuXHRcdFx0XHRcdC8vdXBkYXRlIHVzZXJEYXRhIG1vZGVsIHdpdGggdXNlckJpb1xuXHRcdFx0XHRcdHJlZ2lzdGVyZWRVc2VyRGF0YS51cGRhdGVCaW9Mb2NhbGx5KHVzZXJCaW8pO1xuXG5cdFx0XHRcdFx0Ly9sb2FkIHVzZXIgZXZlbnRzXG5cdFx0XHRcdFx0ZGF0YWJhc2UuZ2V0VXNlckV2ZW50cyhyZWdpc3RlcmVkVXNlckRhdGEuZ2V0VUlETG9jYWxseSgpKVxuXHRcdFx0XHRcdC50aGVuKGZ1bmN0aW9uKGFsbEV2ZW50c0ZvclRoaXNVc2VyKSB7XG5cdFx0XHRcdFx0XHQvL3VwZGF0ZSB1c2VyRGF0YSBtb2RlbCB3aXRoIHVzZXJFdmVudHNcblx0XHRcdFx0XHRcdHJlZ2lzdGVyZWRVc2VyRGF0YS51cGRhdGVBbGxVc2VyRXZlbnRzTG9jYWxseShhbGxFdmVudHNGb3JUaGlzVXNlcik7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyAkbG9nLmluZm8obWVzc2FnZSk7IH0pXG5cblx0XHRcdFx0fSlcblx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKG1lc3NhZ2UpIHsgJGxvZy5pbmZvKG1lc3NhZ2UpOyB9KVxuXG5cdFx0XHRcdC8vcmVkaXJlY3QgdG8gdGhlIG5leHQgcGFnZSBcblx0XHRcdFx0cmVnaXN0ZXJlZFVzZXJTaGVycGEucmVkaXJlY3RUbygnL3VzZXJJbmZvcm1hdGlvbicsIHJlZ2lzdGVyZWRVc2VyRGF0YS5nZXRVSURMb2NhbGx5KCkpO1xuXG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKG1lc3NhZ2UpIHsgXG5cdFx0XHRcdC8vaWYgdGhlcmUgd2FzIGFuIGVycm9yIGxvZ2dpbmcgaW4sIGxldCB0aGUgdXNlciBrbm93XG5cdFx0XHRcdHZtLmVycm9ycy5tZXNzYWdlID0gbWVzc2FnZTtcblx0XHRcdFx0dm0uZXJyb3JzLnBhc3Nlc0FsbFRlc3RzID0gZmFsc2U7XG5cdFx0XHR9KVxuXG5cdFx0XHQvL3VzZSB1aWQgdG8gY29sbGVjdCB1c2VyIGJpb1xuXHRcdFx0XG5cdFx0fVxuXG5cdH1cblxuXHR2bS5jbGlja2VkID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHVzZXJBdXRoZW50aWNhdGlvbiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdHVzZXJBdXRoZW50aWNhdGlvbi5sb2dVc2VyT3V0KCk7XG5cdH1cblxuXHQvL3J1biBjb21tYW5kc1xufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ3RvcE1lbnVDb250cm9sbGVyJywgdG9wTWVudUNvbnRyb2xsZXIpO1xuXG50b3BNZW51Q29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZycsICckbG9jYXRpb24nLCAnJGRvY3VtZW50JywgJyR3aW5kb3cnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiB0b3BNZW51Q29udHJvbGxlcigkc2NvcGUsICRsb2csICRsb2NhdGlvbiwgJGRvY3VtZW50LCAkd2luZG93KSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdHZhciBmYlVSTCA9ICdodHRwczovL21lZXR1cHBsYW5uZXIuZmlyZWJhc2Vpby5jb20vJztcblx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cblx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0dm0ubG9nZ2VkSW4gPSBmYWxzZVxuXG5cdC8vc3R5bGVzIHZhcmlhYmxlc1xuXHRcblx0Ly9ldmVudCBsaXN0ZW5lcnNcblx0aWYgKCdhZGRFdmVudExpc3RlbmVyJyBpbiAkZG9jdW1lbnQpIHtcblx0ICAgICRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XG5cdCAgICBcdCRsb2cuaW5mbygnYWRkaW5nIEZhc3RDbGljaycpO1xuXHQgICAgICAgIEZhc3RDbGljay5hdHRhY2goJGRvY3VtZW50LmJvZHkpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHR9XG5cblx0YW5ndWxhci5lbGVtZW50KCR3aW5kb3cpLmJpbmQoJ3Jlc2l6ZScsIGZ1bmN0aW9uKCkge1xuXHRcdHZtLm9uUmVzaXplRnVuY3Rpb24oKTtcblx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cdH0pO1xuXG5cdGFuZ3VsYXIuZWxlbWVudCgkZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXHRcdGlmKCR3aW5kb3cub3V0ZXJXaWR0aCA8IDYwMCkge1xuXHRcdFx0dm0ub25SZXNpemVGdW5jdGlvbigpO1xuXHRcdFx0JHNjb3BlLiRhcHBseSgpO1xuXHRcdH1cblx0fSlcblx0Ly9keW5hbWljYWxseSBzZXQgaW5wdXQgd2lkdGhcblxuXG5cdC8vIENyZWF0ZSBhIGNhbGxiYWNrIHdoaWNoIGxvZ3MgdGhlIGN1cnJlbnQgYXV0aCBzdGF0ZVxuXHRmdW5jdGlvbiBpbml0KCkge1xuXHRcdHZtLm9uUmVzaXplRnVuY3Rpb24oKTtcblx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cdH1cblxuXHRmdW5jdGlvbiBhdXRoRGF0YUNhbGxiYWNrKGF1dGhEYXRhKSB7XG5cdCAgaWYgKGF1dGhEYXRhKSB7XG5cdCAgICAkbG9nLmluZm8oXCJVc2VyIFwiICsgYXV0aERhdGEudWlkICsgXCIgaXMgbG9nZ2VkIGluIHdpdGggXCIgKyBhdXRoRGF0YS5wcm92aWRlcik7XG5cdCAgICB2bS5sb2dnZWRJbiA9IHRydWU7XG5cdCAgfSBlbHNlIHtcblx0ICAgICRsb2cuaW5mbyhcIlVzZXIgaXMgbG9nZ2VkIG91dFwiKTtcblx0ICAgIHZtLmxvZ2dlZEluID0gZmFsc2U7XG5cdCAgfVxuXHR9XG5cblx0ZnVuY3Rpb24gcmVkaXJlY3QocGF0aCwgdXNlckRhdGEpIHtcblx0XHR2YXIgZnVsbFBhdGggPSBwYXRoICsgJy8nICsgdXNlckRhdGEudWlkICsgJy8nICsgdXNlckRhdGEudG9rZW47XG5cdFx0Ly9yZWRpcmVjdFxuXHRcdCRsb2cuaW5mbygncmVkaXJlY3RpbmcgdG86ICcgKyBmdWxsUGF0aCk7XG5cdFx0JGxvY2F0aW9uLnBhdGgoZnVsbFBhdGgpO1xuXHRcdC8vJHNjb3BlLiRhcHBseSgpO1xuXHR9XG5cblx0Ly92bSBhY2Nlc3NpYmxlIG1ldGhvZHNcblx0dm0ubG9nb3V0ID0gZnVuY3Rpb24oKSB7XG5cdFx0JGxvZy5pbmZvKCdsb2dnaW5nIG91dCEnKTtcblx0XHR2bS5sb2dnZWRJbiA9IGZhbHNlO1xuXHRcdHJlZi51bmF1dGgoKTtcblx0XHRyZWRpcmVjdCgnLycsIHt1aWQ6JycsIHRva2VuOicnfSk7XG5cdH1cblxuXHR2bS5uYXZCYXJMb2dpblJlZ2lzdGVyZWRVc2VyID0gZnVuY3Rpb24oKSB7XG5cdFx0JGxvZy5pbmZvKCdsYXVuY2hpbmcgbG9naW4nKTtcblx0XHRpZih0cnVlKSB7XG5cdFx0Ly9pZih2bS51bmNsb2NrVXNlckxvZ2luQnRuLnVzYWJsZSkge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVcblx0XHRcdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXG5cdFx0XHQvL2F1dGhlbnRpY2F0ZSB0aGUgdXNlclxuXHRcdFx0cmVmLmF1dGhXaXRoUGFzc3dvcmQoe1xuXHRcdFx0XHRlbWFpbDogdm0ubmF2YmFyVXNlckVtYWlsLFxuXHRcdFx0XHRwYXNzd29yZDogdm0ubmF2YmFyVXNlclBhc3Ncblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yLCBhdXRoRGF0YSkge1xuXHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnRXJyb3IgTG9nZ2luZyBJbjogJyArIGVycm9yKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ0xvZ2dlZCBJbiBzdWNjZXNzZnVsbHk6ICcgKyBhdXRoRGF0YS51aWQpO1xuXHRcdFx0XHRcdCRsb2cuaW5mbyhhdXRoRGF0YSk7XG5cdFx0XHRcdFx0Ly9zYXZlIGFsbCB0aGUgZGF0YVxuXG5cdFx0XHRcdFx0Ly9sb2FkIHVzZXIgYmlvXG5cdFx0XHRcdFx0Ly9sb2FkIHVzZXIgZXZlbnRzXG5cblx0XHRcdFx0XHQvL3JlZGlyZWN0XG5cdFx0XHRcdFx0cmVkaXJlY3QoJy91c2VySW5mb3JtYXRpb24nLCBhdXRoRGF0YSk7XG5cdFx0XHRcdFx0JHNjb3BlLiRhcHBseSgpO1xuXG5cdFx0XHRcdFx0Ly9jbGljayBjbG9zZWQgdGhlIG5hdmJhclxuXHRcdFx0XHRcdGFuZ3VsYXIuZWxlbWVudCgnLm5hdmJhci10b2dnbGUnKS5jbGljaygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXG5cblx0XHR9XG5cblx0fVxuXG5cdHZtLm9uUmVzaXplRnVuY3Rpb24gPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgbmF2YmFySW5wdXRzID0gYW5ndWxhci5lbGVtZW50KCcubmF2YmFySW5wdXRzJyk7XG5cdFx0bmF2YmFySW5wdXRzLmNzcygnd2lkdGgnLCAoJHdpbmRvdy5vdXRlcldpZHRoIC0gMjYpICsgJ3B4Jyk7XG5cdH1cblxuXHQvLyBSZWdpc3RlciB0aGUgY2FsbGJhY2sgdG8gYmUgZmlyZWQgZXZlcnkgdGltZSBhdXRoIHN0YXRlIGNoYW5nZXNcblx0cmVmLm9uQXV0aChhdXRoRGF0YUNhbGxiYWNrKTtcbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdVc2VyRXZlbnRzQ29udHJvbGxlcicsIFVzZXJFdmVudHNDb250cm9sbGVyKTtcblxuVXNlckV2ZW50c0NvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICckcm91dGVQYXJhbXMnLCAndXNlckRhdGEnLCAndHJhZmZpY1ZhbGV0J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gVXNlckV2ZW50c0NvbnRyb2xsZXIoJGxvZywgJHJvdXRlUGFyYW1zLCB1c2VyRGF0YSwgdHJhZmZpY1ZhbGV0KSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdHZhciBjdXJyZW50VXNlciA9IHVzZXJEYXRhO1xuXG5cdC8vbG9jYWwgdmlldyB2YXJpYWJsZXNcblx0dm0uc2hvd0RlY2xpbmUgPSBmYWxzZTtcdC8vd2hhdCBpcyB0aGlzIGJlaW5nIHVzZWQgZm9yP1xuXHR2bS51c2VyQmlvID0ge31cblx0dm0uZXZlbnRzID0ge307XG5cdHZtLnNlY3Rpb25BdmFpbGFibGUgPSB7XG5cdFx0cGVuZGluZzogZmFsc2UsXG5cdFx0YXR0ZW5kaW5nOiBmYWxzZSxcblx0XHRob3N0aW5nOiBmYWxzZSxcblx0XHRjb21wbGV0ZWQ6IGZhbHNlXG5cdH07XG5cdHZtLmVycm9ycyA9IHt9O1xuXG5cdC8vZGVjbGFyZSBsb2NhbCBtZXRob2RzXG5cdGZ1bmN0aW9uIHVuaXhUaW1lVG9EYXRlVGltZSh1bml4VGltZSkge1xuXHRcdHJldHVybiBuZXcgRGF0ZShwYXJzZUludCh1bml4VGltZSkpO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIGRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fTtcblxuXHRmdW5jdGlvbiBub09mSG9zdGVFdmVudHMoKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlXG5cdFx0dmFyIGNvdW50ZXIgPSAwO1xuXG5cdFx0Zm9yKGV2ZW50IGluIHZtLmV2ZW50cy5ob3N0aW5nKSBjb3VudGVyKys7XG5cblx0XHRyZXR1cm4gY291bnRlcjtcblx0fVxuXG5cdGZ1bmN0aW9uIGdlbmVyYXRlRXZlbnRJRCgpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xuXHRcdHZhciBldmVudElEID0gKGRhdGVUaW1lVG9Vbml4VGltZShkYXRlKSAqIDEwKSArIChub09mSG9zdGVFdmVudHMoKSk7XG5cblx0XHRyZXR1cm4gZXZlbnRJRDtcblx0fVxuXG5cdGZ1bmN0aW9uIGNoZWNrRm9yRXZlbnRzKCkge1xuXHRcdFxuXHRcdC8vbG9vcCB0aHJvdWdoIGFsbCB0aGUgZXZlbnQgY2F0ZWdvcmllc1xuXHRcdE9iamVjdC5rZXlzKHZtLmV2ZW50cykuZm9yRWFjaChmdW5jdGlvbihjYXRlZ29yeSkge1xuXHRcdFx0XG5cdFx0XHQvL2luc2lkZSBlYWNoIGNhdGVnb3J5IGNvdW50IHRoZSBudW1iZXIgb2YgZXZlbnQgb2JqZWN0cy4uLk5PVCB1cGRhdGVkIHBsYWNlaG9sZGVyIHRob3VnaFxuXHRcdFx0T2JqZWN0LmtleXModm0uZXZlbnRzW2NhdGVnb3J5XSkuZm9yRWFjaChmdW5jdGlvbihldmVudElEKSB7XG5cdFx0XHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZVxuXHRcdFx0XHR2YXIgY291bnRlciA9IDA7XG5cdFx0XHRcdC8vY291bnQgZXZlbnRzIHdpdGggaWQncyAvIE5PVCAndXBkYXRlZCcgcGxhY2Vob2xkZXJzXG5cdFx0XHRcdGlmKGFuZ3VsYXIuaXNPYmplY3Qodm0uZXZlbnRzW2NhdGVnb3J5XVtldmVudElEXSkpIGNvdW50ZXIrKztcblx0XHRcdFx0XG5cdFx0XHRcdC8vaWYgYXQgbGVhc3Qgb25lIGV2ZW50IGlkIChvYmplY3QpIHdhcyBjb3VudGVkLCB0aGVuIHNob3cgdGhlIHNlY3Rpb25cblx0XHRcdFx0aWYoY291bnRlciA+IDApIHZtLnNlY3Rpb25BdmFpbGFibGVbY2F0ZWdvcnldID0gdHJ1ZTtcblx0XHRcdFx0ZWxzZSB2bS5zZWN0aW9uQXZhaWxhYmxlW2NhdGVnb3J5XSA9IGZhbHNlO1xuXHRcdFx0fSk7XG5cblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHtcblx0XHQvL21ha2Ugc3VyZSB0aGUgdWlkIGlzIHNldFxuXHRcdGN1cnJlbnRVc2VyLnNldFVJRExvY2FsbHkoJHJvdXRlUGFyYW1zLnVpZCk7XG5cblx0XHQvL2xvYWQgdGhlIHVzZXIgYmlvXG5cdFx0Y3VycmVudFVzZXIubG9hZEJpbygkcm91dGVQYXJhbXMudWlkKVxuXHRcdC50aGVuKGZ1bmN0aW9uKHJldHJpZXZlZEJpbykge1xuXHRcdFx0dm0udXNlckJpbyA9IHJldHJpZXZlZEJpbztcblx0XHR9KVxuXHRcdC5jYXRjaCgpXG5cblx0XHQvL2xvYWQgdXNlciBldmVudHMgcHJvZ3Jlc3NpdmxleVxuXHRcdC8vZmlzdCB3aGF0ZXZlciBpcyBpbiB0aGUgbW9kZWwgYWxyZWFkeVxuXHRcdHZtLmV2ZW50cyA9IGN1cnJlbnRVc2VyLmdldEFsbFVzZXJFdmVudHNMb2NhbGx5KCk7XG5cblx0XHQvL3RoZW4gY2FsbCB0byB0aGUgZGIgYW5kIGdldCB0aGUgbW9zdCB1cCB0byBkYXRlIGluZm9cblx0XHRjdXJyZW50VXNlci5nZXRSZW1vdGVFdmVudHNGb3JMb2NhbCgpXG5cdFx0LnRoZW4oZnVuY3Rpb24ob2J0YWluZWRVc2VyRXZlbnRzKSB7XG5cblx0XHRcdC8vdXBkYXRlIHRoZSB2aWV3IG1vZGVsIHdpdGggdGhlIHVwZGF0ZWQgREIgcmVzdWx0c1xuXHRcdFx0dm0uZXZlbnRzID0gY3VycmVudFVzZXIuZ2V0QWxsVXNlckV2ZW50c0xvY2FsbHkoKTtcblx0XHR9KVxuXHRcdC50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdFx0Ly9ub3cgdGhhdCBldmVudHMgYXJlIGxvYWRlZCwgcmVmbGVjdCBpdCBpbiB0aGUgdmlldyBtb2RlbFxuXHRcdFx0Y2hlY2tGb3JFdmVudHMoKTtcblx0XHR9KVxuXG5cdH1cblxuXHQvL2RlY2xhcmUgdmlldyBtZXRob2RzXG5cdHZtLmNyZWF0ZU5ld0V2ZW50ID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGV2ZW50SUQgPSBnZW5lcmF0ZUV2ZW50SUQoKTtcblx0XHR2YXIgbmV3RXZlbnRTaGVycGEgPSB0cmFmZmljVmFsZXQ7XG5cblx0XHQvL2FkZCB0aGUgZXZlbnQgdG8gdGhlIG1vZGFsIChsb2NhbGx5IHRoZW4gb24gdGhlIGRiKVxuXHRcdGN1cnJlbnRVc2VyLmNyZWF0ZU5ld0V2ZW50KGV2ZW50SUQpXG5cdFx0LnRoZW4oZnVuY3Rpb24oYWZmaXJtYXRpdmVSZXNwb25zZSkge1xuXHRcdFx0Ly9yZXBvcnQgdGhlIHN1Y2Nlc3Ncblx0XHRcdCRsb2cuaW5mbyhhZmZpcm1hdGl2ZVJlc3BvbnNlKTtcblx0XHR9KVxuXHRcdC50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdFx0Ly9pZiB0aGVyZSB3YXMgYW4gdXBkYXRlZCBmaWVsZCwgcmVtb3ZlIGl0IG5vd1xuXHRcdFx0Y3VycmVudFVzZXIuY2xlYW5EQkV2ZW50c0NhdGVnb3J5KCdob3N0aW5nJyk7XG5cblx0XHR9KVxuXHRcdC5jYXRjaChmdW5jdGlvbihlcnJvclJlc3BvbnNlKSB7XG5cdFx0XHQvL3JlcG9ydCB0aGUgZXJyb3Jcblx0XHRcdCRsb2cuaW5mbyhlcnJvclJlc3BvbnNlKTtcblx0XHR9KVxuXHRcdFxuXG5cdFx0Ly9yZWRpcmVjdCB0byB0aGUgbmV3IGV2ZW50IHBhZ2VcdFx0XG5cdFx0bmV3RXZlbnRTaGVycGEucmVkaXJlY3RUbygnL2V2ZW50JywgZXZlbnRJRCwgY3VycmVudFVzZXIuZ2V0VUlETG9jYWxseSgpLCBjdXJyZW50VXNlci5nZXRVSURMb2NhbGx5KCkpO1xuXHR9XG5cblx0Ly9leGVjdXRlIHNjcmlwdHNcblx0aW5pdGlhbGl6ZSgpO1xuXG59XG4iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdVc2VySW5mb3JtYXRpb25Db250cm9sbGVyJywgVXNlckluZm9ybWF0aW9uQ29udHJvbGxlcik7XG5cblVzZXJJbmZvcm1hdGlvbkNvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICckZG9jdW1lbnQnLCAnJHJvdXRlUGFyYW1zJywndXNlckRhdGEnLCAndHJhZmZpY1ZhbGV0J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gVXNlckluZm9ybWF0aW9uQ29udHJvbGxlcigkbG9nLCAkZG9jdW1lbnQsICRyb3V0ZVBhcmFtcywgdXNlckRhdGEsIHRyYWZmaWNWYWxldCkge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHRcblx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0dmFyIGN1cnJlbnRVc2VyID0gdXNlckRhdGE7XG5cblx0Ly92aWV3IG1vZGVsIHZhcmlhYmxlc1xuXHR2bS51c2VyID0ge307XG5cdHZtLnRlbXBCaXJ0aGRheTtcblx0dm0udmlldyA9IHtcblx0XHRkYXRhVG9TYXZlOiBmYWxzZSxcblx0XHRpc0RhdGE6IGZhbHNlLFxuXHRcdGJ0bk1zc2c6ICdNb3ZlIE9uLi4uJyxcblx0XHRwcm9jZWVkQnRuOiAnYnRuIGJ0bi1wcmltYXJ5J1xuXHR9O1xuXG5cdC8vbG9jYWwgbWV0aG9kc1xuXHRmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fTtcblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH07XG5cblx0Ly92aWV3IGFjY2Vzc2libGUgbWV0aG9kc1xuXHR2bS5jaGVja1ZhbHVlcyA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vdGhyb3cgdGhlIGlzRGF0YSBmbGFnIGlmIHNvbWV0aGluZyBpcyB1cGRhdGVkXG5cdFx0dm0udmlldy5pc0RhdGEgPSB0cnVlO1xuXG5cdFx0aWYoICEoYW5ndWxhci5pc1VuZGVmaW5lZCh2bS51c2VyLmNvbXBhbnkpIHx8IHZtLnVzZXIuY29tcGFueSA9PT0gJycpIHx8IFxuXHRcdFx0IShhbmd1bGFyLmlzVW5kZWZpbmVkKHZtLnVzZXIudGl0bGUpIHx8IHZtLnVzZXIudGl0bGUgPT09ICcnKSB8fCBcblx0XHRcdCEoYW5ndWxhci5pc1VuZGVmaW5lZCh2bS51c2VyLmRvYikgfHwgdm0udXNlci5kb2IgPT09ICcnKSkgXG5cdFx0e1xuXHRcdFx0dm0udmlldy5kYXRhVG9TYXZlID0gdHJ1ZTtcblx0XHRcdHZtLnZpZXcucHJvY2VlZEJ0biA9ICdidG4gYnRuLXN1Y2Nlc3MnO1xuXHRcdFx0dm0udmlldy5idG5Nc3NnID0gJ1NhdmUgJiBDb250aW51ZSc7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZtLnZpZXcuZGF0YVRvU2F2ZSA9IGZhbHNlO1xuXHRcdFx0dm0udmlldy5wcm9jZWVkQnRuID0gJ2J0biBidG4tcHJpbWFyeSc7XG5cdFx0XHR2bS52aWV3LmJ0bk1zc2cgPSAnTW92ZSBPbi4uLic7XHRcblx0XHR9XG5cblx0fVxuXG5cdHZtLnVwZGF0ZURPQiA9IGZ1bmN0aW9uKCkge1xuXHRcdHZtLnVzZXIuZG9iID0gZGF0ZVRpbWVUb1VuaXhUaW1lKHZtLnRlbXBCaXJ0aGRheSk7XG5cdFx0dm0uY2hlY2tWYWx1ZXMoKTtcblx0fVxuXG5cdHZtLnNhdmVBbmRNb3ZlT24gPSBmdW5jdGlvbigpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciB1c2VySW5mb1NoZXJwYSA9IHRyYWZmaWNWYWxldDtcblx0XHR2YXIgY3VycmVudFVpZCA9IGN1cnJlbnRVc2VyLmdldFVJRExvY2FsbHkoKTtcblxuXHRcdC8vY29udmVydCBET0IgdG8gdW5peFRpbWUgYW5kIHNhdmVcblx0XHRpZih2bS50ZW1wQmlydGhkYXkgIT09IDApIHZtLnVwZGF0ZURPQigpO1xuXHRcdFxuXHRcdC8vaWYgdGhlcmUgaXNuJ3QgY3VycmVudGx5IGEgZG9iLCBncmFiIGZyb20gdGhlIHJvdXRlIHBhcmFtc1xuXHRcdGlmKGN1cnJlbnRVaWQgPT0gJycgfHwgYW5ndWxhci5pc1VuZGVmaW5lZChjdXJyZW50VWlkKSkge1xuXHRcdFx0Y3VycmVudFVzZXIuc2V0VUlETG9jYWxseSgkcm91dGVQYXJhbXMudWlkKTtcblx0XHR9XG5cblx0XHQvL2lmIHRoZXJlIGlzIG5ldyBkYXRhLCBzYXZlIGl0XG5cdFx0aWYodm0udmlldy5pc0RhdGEpIHtcblx0XHRcdCRsb2cuaW5mbygnc2F2aW5nIHRoZSBuZXcgZGF0YScpO1xuXHRcdFx0Y3VycmVudFVzZXIudXBkYXRlQmlvTG9jYWxseSh2bS51c2VyKTtcblx0XHR9XG5cdFx0XG5cdFx0Ly9tb3ZlIG9uXG5cdFx0dXNlckluZm9TaGVycGEucmVkaXJlY3RUbygnL3VzZXJFdmVudHMnLCB2bS51c2VyLnVpZClcblx0fVxuXG5cdGZ1bmN0aW9uIGluaXRpYWxpemUoKSB7XG5cdFx0Ly9sb2FkIEZhc3RDbGlja1xuXHRcdC8vRmFzdENsaWNrLmF0dGFjaCgkZG9jdW1lbnQuYm9keSk7XG5cdFx0XG5cdFx0Ly9sb2FkIHVzZXJEYXRhIGxvY2FsbHkgb3IgZnJvbSBkYlxuXHRcdGN1cnJlbnRVc2VyLmxvYWRCaW8oJHJvdXRlUGFyYW1zLnVpZClcblx0XHQudGhlbihmdW5jdGlvbihvYnRhaW5lZFVzZXJEYXRhKSB7XG5cdFx0XHQvL2Fzc2lnbiB1c2VyIHZhbHVlc1xuXHRcdFx0dm0udXNlciA9IG9idGFpbmVkVXNlckRhdGE7XG5cblx0XHRcdC8vYnVpbGQgdGVtcEJpcnRoZGF5XG5cdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChvYnRhaW5lZFVzZXJEYXRhLmRvYikgJiYgb2J0YWluZWRVc2VyRGF0YS5kb2IgIT09ICcnKSB7XG5cdFx0XHRcdHZtLnRlbXBCaXJ0aGRheSA9IHVuaXhUaW1lVG9EYXRlVGltZShvYnRhaW5lZFVzZXJEYXRhLmRvYilcblx0XHRcdH1cblxuXHRcdH0pO1xuXHRcblx0fVxuXG5cdC8vcnVuIHByb2Nlc3Nlc1xuXHRpbml0aWFsaXplKCk7IC8vd2l0aCBpbnRlcm5ldCB1c2UgdGhlIGV2ZW50IGxpc3RlbmVyIGluc3RlYWRcbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5mYWN0b3J5KCdhdXRoU2VydmljZScsIGF1dGhTZXJ2aWNlKTtcblxuYXV0aFNlcnZpY2UuJGluamVjdCA9IFsnJGxvZycsICckcScsICckbG9jYXRpb24nXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBhdXRoU2VydmljZSgkbG9nLCAkcSwgJGxvY2F0aW9uKSB7XG5cdHZhciBmYlVSTCA9ICdodHRwczovL21lZXR1cHBsYW5uZXIuZmlyZWJhc2Vpby5jb20vJztcblx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cblx0dmFyIGFsbEF1dGhTZXJ2aWNlcyA9IHtcblx0XHRpc0xvZ2dlZEluOiBpc0xvZ2dlZEluXG5cdH07XG5cblx0ZnVuY3Rpb24gYXV0aERhdGFDYWxsYmFjayhhdXRoRGF0YSkge1xuXHQgIFxuXHQgIGlmIChhdXRoRGF0YSkge1xuXHQgICAgJGxvZy5pbmZvKFwiVXNlciBcIiArIGF1dGhEYXRhLnVpZCArIFwiIGlzIGxvZ2dlZCBpbiB3aXRoIFwiICsgYXV0aERhdGEucHJvdmlkZXIpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICAkbG9nLmluZm8oXCJVc2VyIGlzIGxvZ2dlZCBvdXQuLi5kdW1waW5nIHRoZW0gYmFjayB0byBsYW5kaW5nIHBhZ2VcIik7XG5cdCAgICAvL2R1bXAgdGhlIHVzZXIgYmFjayBvdXRcblx0ICAgICRsb2NhdGlvbi5wYXRoKCcvJyk7XG5cdCAgfVxuXHR9XG5cblx0ZnVuY3Rpb24gaXNMb2dnZWRJbigpIHtcblx0XHQvL2NoZWNrIHRoZSB1c2VyIGF1dGhlbnRpY2Fpb24gc3RhdGVcblxuXHRcdHJlZi5vbkF1dGgoYXV0aERhdGFDYWxsYmFjayk7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblx0XG5cdHJldHVybiBhbGxBdXRoU2VydmljZXM7XG5cbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5mYWN0b3J5KCdiYWNrZW5kU2VydmljZXMnLCBiYWNrZW5kU2VydmljZXMpO1xuXG5iYWNrZW5kU2VydmljZXMuJGluamVjdCA9IFsnJGxvZycsICckcScsICckd2luZG93J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gYmFja2VuZFNlcnZpY2VzKCRsb2csICRxLCAkd2luZG93KSB7XG5cdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgYWxsQmFja2VuZFNlcnZpY2VzID0ge1xuXHRcdHV0ZjhfdG9fYjY0OiB1dGY4X3RvX2I2NCwgXHRcdFx0XHRcdFx0Ly9sb2NhbCBmdW5jdGlvbnMgdG8gY29udmVydCBkYXRlc1xuXHRcdGI2NF90b191dGY4OiBiNjRfdG9fdXRmOCxcblx0XHR1bml4VGltZVRvRGF0ZVRpbWU6IHVuaXhUaW1lVG9EYXRlVGltZSxcblx0XHRkYXRlVGltZVRvVW5peFRpbWU6IGRhdGVUaW1lVG9Vbml4VGltZSxcblxuXHRcdExvZ2luUmVnaXN0ZXJlZFVzZXI6IExvZ2luUmVnaXN0ZXJlZFVzZXIsXHRcdC8vYXV0aGVudGljYWlvblxuXHRcdGNoZWNrTG9naW5TdGF0dXM6IGNoZWNrTG9naW5TdGF0dXMsXG5cdFx0bG9nVXNlck91dDogbG9nVXNlck91dCxcblxuXHRcdGRvd25sb2FkVXNlckRhdGE6IGRvd25sb2FkVXNlckRhdGEsXHRcdFx0XHQvL2dldHRlciBtZXRob2RzXG5cdFx0Z2V0VXNlckJpbzogZ2V0VXNlckJpbyxcblx0XHRnZXRVc2VyRXZlbnRzOiBnZXRVc2VyRXZlbnRzLFxuXG5cdFx0Y3JlYXRlTmV3VXNlcjogY3JlYXRlTmV3VXNlcixcdFx0XHRcdFx0Ly9zZXR0ZXIgTWV0aG9kc1xuXHRcdGFkZE5ld1VzZXJUb0RhdGFiYXNlOiBhZGROZXdVc2VyVG9EYXRhYmFzZSxcblx0XHRhZGROZXdVc2VyVG9SZWdVc2Vyc0xpc3Q6IGFkZE5ld1VzZXJUb1JlZ1VzZXJzTGlzdCxcblx0XHR1cGxvYWRVc2VyRGF0YTogdXBsb2FkVXNlckRhdGEsXG5cdFx0dXBsb2FkVXNlckJpbzogdXBsb2FkVXNlckJpbyxcblx0XHRjcmVhdGVIb3N0ZWRFdmVudDogY3JlYXRlSG9zdGVkRXZlbnQsXG5cdFx0ZGVsZXRlVXBkYXRlRmllbGQ6IGRlbGV0ZVVwZGF0ZUZpZWxkLFxuXG5cdFx0dGhlcmVXYXNBblVwZGF0ZUZpZWxkOiB0aGVyZVdhc0FuVXBkYXRlRmllbGRcdC8vbW9kZWwgbWFpbnRhaW5hbmNlXG5cdH07XG5cblx0ZnVuY3Rpb24gdXRmOF90b19iNjQoc3RyKSB7XG5cdFx0cmV0dXJuIGJ0b2Eoc3RyKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGI2NF90b191dGY4KHN0cikge1xuICAgIFx0cmV0dXJuIGF0b2Ioc3RyKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHVuaXhUaW1lVG9EYXRlVGltZSh1bml4VGltZSkge1xuXHRcdHJldHVybiBuZXcgRGF0ZShwYXJzZUludCh1bml4VGltZSkpO1xuXHR9XG5cblx0ZnVuY3Rpb24gZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKSB7XG5cdFx0cmV0dXJuIERhdGUucGFyc2UoZGF0ZVRpbWUpO1xuXHR9XG5cblx0ZnVuY3Rpb24gY3JlYXRlTmV3VXNlcihlbWFpbCwgcGFzc3dvcmQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGZpcmVCYXNlQWNjb3VudHMgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdFxuXHRcdC8vcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFxuXHRcdFx0ZmlyZUJhc2VBY2NvdW50cy5jcmVhdGVVc2VyKHtcblx0XHRcdFx0XG5cdFx0XHRcdGVtYWlsOiBlbWFpbCxcblx0XHRcdFx0cGFzc3dvcmQ6IHBhc3N3b3JkXG5cdFx0XHRcblx0XHRcdH0sZnVuY3Rpb24oZXJyb3IsIHVzZXJEYXRhKSB7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KCdFcnJvciBjcmVhdGluZyB1c2VyOiAnICsgZXJyb3IpO1xuXG5cdFx0XHRcdGVsc2UgcmVzb2x2ZSh1c2VyRGF0YSk7XG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gYWRkTmV3VXNlclRvRGF0YWJhc2UodWlkLCBuYW1lLCBlbWFpbCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgYXBwVXNlcnMgPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKTtcblx0XHR2YXIgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xuXG5cdFx0Ly9yZXR1cm4gYSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XG5cdFx0XHRhcHBVc2Vycy5zZXQoeyBcblx0XHRcdFx0J2Jpbyc6IHtcblx0XHRcdFx0XHQndWlkJzogdWlkLFxuXHRcdFx0XHRcdCduYW1lJzogbmFtZSxcblx0XHRcdFx0XHQnZW1haWwnOiBlbWFpbFxuXHRcdFx0XHR9LFxuXHRcdFx0XHQnZXZlbnRzJzoge1xuXHRcdFx0XHRcdCdwZW5kaW5nJzoge1xuXHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQnaG9zdGluZyc6IHtcblx0XHRcdFx0XHRcdCd1cGRhdGVkJzogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0J2F0dGVuZGluZyc6IHtcblx0XHRcdFx0XHRcdCd1cGRhdGVkJzogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0J2NvbXBsZXRlZCc6IHtcblx0XHRcdFx0XHRcdCd1cGRhdGVkJzogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdCgnRGF0YSBjb3VsZCBub3QgYmUgc2F2ZWQ6ICcgKyBlcnJvcik7XG5cdFx0XHRcdFxuXHRcdFx0XHRlbHNlIHJlc29sdmUoJ0RhdGEgc2F2ZWQgc3VjY2Vzc2Z1bGx5LicpO1xuXG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBhZGROZXdVc2VyVG9SZWdVc2Vyc0xpc3QodWlkLCBlbWFpbCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgYjY0RW1haWwgPSB1dGY4X3RvX2I2NChlbWFpbCk7XG5cdFx0dmFyIFJlZ2lzdGVyZWRVc2Vyc0xpc3QgPSBhcHAuY2hpbGQoJ1VpZHMnKS5jaGlsZChiNjRFbWFpbCk7XG5cblx0XHQvL3JldHVybiBhIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcblx0XHRcdFJlZ2lzdGVyZWRVc2Vyc0xpc3Quc2V0KHVpZCwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdChcIkRhdGEgY291bGQgbm90IGJlIHNhdmVkLiBcIiArIGVycm9yKTtcblx0XHRcdFx0ZWxzZSByZXNvbHZlKFwidWlkIGNyZWF0ZWQgc3VjZXNzZnVsbHkuXCIpO1xuXHRcdFx0fSk7XG5cblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gTG9naW5SZWdpc3RlcmVkVXNlcihlbWFpbCwgcGFzc3dvcmQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0XG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHQvL2F1dGhlbnRpY2F0ZSB0aGUgdXNlclxuXHRcdFx0YXBwLmF1dGhXaXRoUGFzc3dvcmQoe1xuXG5cdFx0XHRcdGVtYWlsOiBlbWFpbCxcblx0XHRcdFx0cGFzc3dvcmQ6IHBhc3N3b3JkXG5cblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yLCBhdXRoRGF0YSkge1xuXHRcdFx0XHRcblx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHRyZWplY3QoJ0Vycm9yIExvZ2dpbmcgSW46ICcgKyBlcnJvcik7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdMb2dnZWQgSW4gc3VjY2Vzc2Z1bGx5OiAnICsgYXV0aERhdGEudWlkKTtcblx0XHRcdFx0XHRyZXNvbHZlKGF1dGhEYXRhKTtcblx0XHRcdFx0fVxuXG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXHRcdFxuXHR9XG5cblx0ZnVuY3Rpb24gY2hlY2tMb2dpblN0YXR1cygpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cblx0XHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcblx0XHRcdGFwcC5vbkF1dGgoZnVuY3Rpb24oYXV0aERhdGEpIHtcblx0XHRcdFx0aWYgKGF1dGhEYXRhKSB7XG5cdFx0XHRcdCAgICAkbG9nLmluZm8oXCJVc2VyIFwiICsgYXV0aERhdGEudWlkICsgXCIgaXMgbG9nZ2VkIGluIHdpdGggXCIgKyBhdXRoRGF0YS5wcm92aWRlcik7XG5cdFx0XHRcdCAgICByZXNvbHZlKHRydWUpO1xuXHRcdFx0XHQgIH0gZWxzZSB7XG5cdFx0XHRcdCAgICAkbG9nLmluZm8oXCJVc2VyIGlzIGxvZ2dlZCBvdXRcIik7XG5cdFx0XHRcdCAgICByZXNvbHZlKGZhbHNlKTtcblx0XHRcdFx0ICB9XG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gbG9nVXNlck91dCgpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cblx0XHQkbG9nLmluZm8oJ2xvZ2dpbmcgdXNlciBvdXQnKTtcblx0XHRhcHAudW5hdXRoKCk7XG5cdH1cblxuXHRmdW5jdGlvbiB1cGxvYWRVc2VyRGF0YShhbGxVc2VyRGF0YSkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgdWlkID0gYWxsVXNlckRhdGEudWlkO1xuXHRcdHZhciByZW1vdGVVc2VyID0gYXBwLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCk7XG5cblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vdGhlIGFjdHVhbCBjYWxsXG5cdFx0XHRyZW1vdGVVc2VyLnVwZGF0ZShhbGxVc2VyRGF0YSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdCgnVGhlcmUgd2FzIGEgcHJvYmxlbSB1cGRhdGluZyB0aGF0IHJlY29yZDogJyArIGVycm9yKTtcblx0XHRcdFx0ZWxzZSByZXNvbHZlKCdhbGwgdXNlciBkYXRhIHVwbG9hZGVkIHN1Y2Nlc3NmdWxseScpO1xuXHRcdFx0fSk7XG5cblx0XHR9KTtcblx0XHRcblx0fVxuXG5cdGZ1bmN0aW9uIHVwbG9hZFVzZXJCaW8oY3VycmVudFVzZXJCaW8pIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIHVpZCA9IChjdXJyZW50VXNlckJpby51aWQpLnRvU3RyaW5nKCk7XG5cdFx0dmFyIHJlbW90ZVVzZXJCaW8gPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnYmlvJyk7XG5cblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9jYWxsIHRvIHRoZSBkYlxuXHRcdFx0cmVtb3RlVXNlckJpby51cGRhdGUoY3VycmVudFVzZXJCaW8sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoJ1RoZXJlIHdhcyBhIHByb2JsZW0gdXBkYXRpbmcgdGhhdCByZWNvcmQ6ICcgKyBlcnJvcik7XG5cdFx0XHRcdGVsc2UgcmVzb2x2ZSgnYWxsIHVzZXIgYmlvIGRhdGEgdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5Jyk7XG5cdFx0XHR9KVxuXG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBkb3dubG9hZFVzZXJEYXRhKCkge1xuXG5cdH1cblxuXHRmdW5jdGlvbiBnZXRVc2VyQmlvKHVpZCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgdXNlckJpbyA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdiaW8nKTtcblxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly90aGUgYWN0dWFsIGNhbGxcblx0XHRcdHVzZXJCaW8ub25jZSgndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0XHQvL3doZW4gdGhlIGNhbGwgaXMgc3VjY2Vzc2Z1bCByZXR1cm4gdGhlIGRhdGFcblx0XHRcdFx0cmVzb2x2ZShzbmFwc2hvdC52YWwoKSk7XG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHRcdH0gXG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gY3JlYXRlSG9zdGVkRXZlbnQodWlkLCBuZXdFdmVudCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgZXZlbnRJRCA9IG5ld0V2ZW50LmlkO1xuXHRcdHZhciBuZXdIb3N0ZWRFdmVudCA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgnaG9zdGluZycpLmNoaWxkKGV2ZW50SUQpO1xuXG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcblx0XHRcdC8vY2FsbCB0byBmaXJlYmFzZVxuXHRcdFx0bmV3SG9zdGVkRXZlbnQuc2V0KG5ld0V2ZW50LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3I6ICcgKyBlcnJvcik7XG5cdFx0XHRcdGVsc2UgcmVzb2x2ZSgnTmV3IGV2ZW50IHNhdmVkIHRvIERCIHN1Y2Nlc3NmdWxseScpO1xuXHRcdFx0fSlcblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0VXNlckV2ZW50cyh1aWQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIHVzZXJFdmVudHMgPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJyk7XG5cdFx0XG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL3RoZSBhY3R1YWwgY2FsbFxuXHRcdFx0dXNlckV2ZW50cy5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHRcdHZhciB1c2VyUHJvZmlsZSA9IHNuYXBzaG90LnZhbCgpO1xuXG5cdFx0XHRcdC8vd2hlbiB0aGUgY2FsbCBpcyBzdWNjZXNzZnVsIHJldHVybiB0aGUgZGF0YVxuXHRcdFx0XHR2YXIgZXZlbnRzUGFja2FnZSA9IHtcblx0XHRcdFx0XHRob3N0aW5nOiB1c2VyUHJvZmlsZS5ob3N0aW5nLFxuXHRcdFx0XHRcdGF0dGVuZGluZzogdXNlclByb2ZpbGUuYXR0ZW5kaW5nLFxuXHRcdFx0XHRcdHBlbmRpbmc6IHVzZXJQcm9maWxlLnBlbmRpbmcsXG5cdFx0XHRcdFx0Y29tcGxldGVkOiB1c2VyUHJvZmlsZS5jb21wbGV0ZWRcblx0XHRcdFx0fTtcblxuXHRcdFx0XHRyZXNvbHZlKGV2ZW50c1BhY2thZ2UpO1xuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0XHR9IFxuXHRcdFx0fSk7XG5cblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGRlbGV0ZVVwZGF0ZUZpZWxkKGNhdGVnb3J5LCB1aWQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIGNhdFJlbW92aW5nRnJvbSA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZChjYXRlZ29yeSkuY2hpbGQoJ3VwZGF0ZWQnKTtcblxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Y2F0UmVtb3ZpbmdGcm9tLnNldChudWxsLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3IgZGVsZXRpbmcgdXBkYXRlIGZpZWxkOiAnICsgZXJyb3IpO1xuXHRcdFx0XHRlbHNlIHJlc29sdmUoJ0RlbGV0ZWQgdXBkYXRlIHN1Y2Nlc3NmdWxseScpO1xuXHRcdFx0fSlcblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gdGhlcmVXYXNBblVwZGF0ZUZpZWxkKGNhdGVnb3J5LCB1aWQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIGNhdFRvQ2hlY2sgPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoY2F0ZWdvcnkpO1xuXG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL2NhbGwgdGhlIGRiXG5cdFx0XHRjYXRUb0NoZWNrLm9uY2UoJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdFx0Ly9zYXZlIHRoZSByZXNwb25zZVxuXHRcdFx0XHR2YXIgY3VycmVudENhdE1vZGVsID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHRcdC8vc2hvdyB3aGF0IHdhcyBmb3VuZFxuXHRcdFx0XHQvL2xvb2sgZm9yIHRoZSB1cGRhdGUgZmllbGRcblx0XHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoY3VycmVudENhdE1vZGVsWyd1cGRhdGVkJ10pKSByZXNvbHZlKHRydWUpO1xuXHRcdFx0XHRlbHNlIHJlamVjdChmYWxzZSk7XG5cblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoZXJyb3IpO1xuXHRcdFx0fSlcblx0XHR9KTtcblx0fVxuXG5cdC8vcmV0dXJuIHRoZSBvYmplY3Rcblx0cmV0dXJuIGFsbEJhY2tlbmRTZXJ2aWNlcztcbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5mYWN0b3J5KCd0cmFmZmljVmFsZXQnLCB0cmFmZmljVmFsZXQpO1xuXG50cmFmZmljVmFsZXQuJGluamVjdCA9IFsnJGxvZycsICckbG9jYXRpb24nXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiB0cmFmZmljVmFsZXQoJGxvZywgJGxvY2F0aW9uKSB7XG5cdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0dmFyIGFsbFRyYWZmaWNDb250cm9scyA9IHtcblx0XHRyZWRpcmVjdFRvOiByZWRpcmVjdFRvXG5cdH07XG5cblx0ZnVuY3Rpb24gcmVkaXJlY3RUbyhwYXRoLCBwYXJhbTEsIHBhcmFtMiwgcGFyYW0zKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQocGFyYW0xKSkge1xuXHRcdFx0cGF0aCA9IHBhdGggKyAnLycgKyBwYXJhbTE7XG5cblx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHBhcmFtMikpIHtcblx0XHRcdFx0Ly9nbyB0byBwYXRoIHdpdGggMiBwYXJhbXNcblx0XHRcdFx0cGF0aCA9IHBhdGggKyAnLycgKyBwYXJhbTI7XG5cblx0XHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQocGFyYW0zKSkge1xuXHRcdFx0XHRcdHBhdGggPSBwYXRoICsgJy8nICsgcGFyYW0zO1xuXG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyBub3cgdG8gJyArIHBhdGgpO1xuXHRcdFx0XHRcdCRsb2NhdGlvbi5wYXRoKHBhdGgpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyBub3cgdG8gJyArIHBhdGgpO1xuXHRcdFx0XHQkbG9jYXRpb24ucGF0aChwYXRoKTtcblx0XHRcdH1cblx0XHRcdC8vZ28gd2l0aCAxIHBhcmFtXG5cdFx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIG5vdyB0byAnICsgcGF0aCk7XG5cdFx0XHQkbG9jYXRpb24ucGF0aChwYXRoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly9qdXN0IGdvIHRvIHBhdGhcblx0XHRcdCRsb2cuaW5mbygncmVkaXJlY3Rpbmcgbm93IHRvICcgKyBwYXRoKTtcblx0XHRcdCRsb2NhdGlvbi5wYXRoKHBhdGgpO1xuXHRcdH1cblxuXHR9XG5cblx0cmV0dXJuIGFsbFRyYWZmaWNDb250cm9scztcbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5mYWN0b3J5KCd1c2VyRGF0YScsIHVzZXJEYXRhKTtcblxudXNlckRhdGEuJGluamVjdCA9IFsnJGxvZycsICckcScsICdiYWNrZW5kU2VydmljZXMnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiB1c2VyRGF0YSgkbG9nLCAkcSwgYmFja2VuZFNlcnZpY2VzKSB7XG5cdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0dmFyIGN1cnJlbnRVc2VyID0ge1xuXHRcdGJpbzogeyBcblx0XHRcdHVpZDogJycsXG5cdFx0XHRuYW1lOiAnJyxcblx0XHRcdGVtYWlsOiAnJyxcblx0XHRcdGNvbXBhbnk6ICcnLFxuXHRcdFx0dGl0bGU6ICcnLFxuXHRcdFx0ZG9iOiAwXG5cdFx0fSxcblx0XHRldmVudHM6IHtcblx0XHRcdGhvc3Rpbmc6IHt9LFxuXHRcdFx0cGVuZGluZzoge30sXG5cdFx0XHRhdHRlbmRpbmc6IHt9LFxuXHRcdFx0Y29tcGxldGVkOiB7fVxuXHRcdH1cblx0fTtcblxuXHR2YXIgYWxsVXNlckRhdGEgPSB7XG5cdFx0YmlvUHJpbWFyaWVzQXJlQ29tcGxldGVMb2NhbGx5OiBiaW9QcmltYXJpZXNBcmVDb21wbGV0ZUxvY2FsbHksXHRcdC8vbW9kYWwgYW5hbHlzaXNcblxuXHRcdGNsZWFuRXZlbnRzOiBjbGVhbkV2ZW50cyxcdFx0Ly9tb2RlbCBtYWludGFpbmFuY2VcblxuXHRcdGdldFVJRExvY2FsbHk6IGdldFVJRExvY2FsbHksXHQvL2dldHRlciBNZXRob2RzXG5cdFx0Z2V0TmFtZUxvY2FsbHk6IGdldE5hbWVMb2NhbGx5LFxuXHRcdGdldEVtYWlsTG9jYWxseTogZ2V0RW1haWxMb2NhbGx5LFxuXHRcdGdldENvbXBhbnlMb2NhbGx5OiBnZXRDb21wYW55TG9jYWxseSxcblx0XHRnZXRUaXRsZUxvY2FsbHk6IGdldFRpdGxlTG9jYWxseSxcblx0XHRnZXRET0JMb2NhbGx5OiBnZXRET0JMb2NhbGx5LFxuXHRcdGdldEZ1bGxCaW9Mb2NhbGx5OiBnZXRGdWxsQmlvTG9jYWxseSxcblx0XHRnZXRVc2VyRXZlbnRzTG9jYWxseTogZ2V0VXNlckV2ZW50c0xvY2FsbHksXG5cdFx0Z2V0QWxsVXNlckV2ZW50c0xvY2FsbHk6IGdldEFsbFVzZXJFdmVudHNMb2NhbGx5LFxuXG5cdFx0c2V0VUlETG9jYWxseTogc2V0VUlETG9jYWxseSxcdC8vc2V0dGVyIE1ldGhvZHNcblx0XHRzZXROYW1lTG9jYWxseTogc2V0TmFtZUxvY2FsbHksXG5cdFx0c2V0RW1haWxMb2NhbGx5OiBzZXRFbWFpbExvY2FsbHksXG5cdFx0c2V0Q29tcGFueUxvY2FsbHk6IHNldENvbXBhbnlMb2NhbGx5LFxuXHRcdHNldFRpdGxlTG9jYWxseTogc2V0VGl0bGVMb2NhbGx5LFxuXHRcdHNldERPQkxvY2FsbHk6IHNldERPQkxvY2FsbHksXG5cdFx0c2V0UHJpbWFyaWVzTG9jYWxseTogc2V0UHJpbWFyaWVzTG9jYWxseSxcblx0XHR1cGRhdGVVc2VyRXZlbnRzTG9jYWxseTogdXBkYXRlVXNlckV2ZW50c0xvY2FsbHksXG5cdFx0dXBkYXRlQWxsVXNlckV2ZW50c0xvY2FsbHk6IHVwZGF0ZUFsbFVzZXJFdmVudHNMb2NhbGx5LFxuXHRcdHVwZGF0ZUJpb0xvY2FsbHk6IHVwZGF0ZUJpb0xvY2FsbHksXG5cblx0XHRyZW1vdmVVc2VyRXZlbnRzTG9jYWxseTogcmVtb3ZlVXNlckV2ZW50c0xvY2FsbHksIC8vcmVtb3ZlIGRhdGFcblx0XHRcblx0XHRnZXRGdWxsUmVtb3RlREJmb3JMb2NhbDogZ2V0RnVsbFJlbW90ZURCZm9yTG9jYWwsXHQvL2xvY2FsLXJlbW90ZSBpbnRlcmFjaW9uc1xuXHRcdGdldFJlbW90ZUJpb0ZvckxvY2FsOiBnZXRSZW1vdGVCaW9Gb3JMb2NhbCxcdFx0XHRcblx0XHRnZXRSZW1vdGVFdmVudHNGb3JMb2NhbDogZ2V0UmVtb3RlRXZlbnRzRm9yTG9jYWwsXG5cdFx0c2V0RnVsbFJlbW90ZURCZnJvbUxvY2FsOiBzZXRGdWxsUmVtb3RlREJmcm9tTG9jYWwsXG5cdFx0c2V0UmVtb3RlQmlvRnJvbUxvY2FsOiBzZXRSZW1vdGVCaW9Gcm9tTG9jYWwsXG5cdFx0c2V0UmVtb3RlRXZlbnRzRnJvbUxvY2FsOiBzZXRSZW1vdGVFdmVudHNGcm9tTG9jYWwsXG5cdFx0Y2xlYW5EQkV2ZW50c0NhdGVnb3J5OiBjbGVhbkRCRXZlbnRzQ2F0ZWdvcnksXG5cblx0XHRsb2FkQmlvOiBsb2FkQmlvLFx0Ly9leHRlcm5hbCBtZXRob2RzXG5cdFx0bG9hZEV2ZW50c1Byb2dyZXNzaXZlbHk6IGxvYWRFdmVudHNQcm9ncmVzc2l2ZWx5LFxuXHRcdGNyZWF0ZU5ld0V2ZW50OiBjcmVhdGVOZXdFdmVudFxuXHR9XG5cblx0Ly9hbmFseXNpcyBtZXRob2RzXG5cdGZ1bmN0aW9uIGJpb1ByaW1hcmllc0FyZUNvbXBsZXRlTG9jYWxseSgpIHtcblx0XHRpZiggY3VycmVudFVzZXIuYmlvLnVpZCAhPT0gJycgJiZcblx0XHRcdGN1cnJlbnRVc2VyLmJpby5uYW1lICE9PSAnJyAmJlxuXHRcdFx0Y3VycmVudFVzZXIuYmlvLmVtYWlsICE9PSAnJ1xuXHRcdFx0KVxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0ZWxzZSByZXR1cm4gZmFsc2U7XG5cdH1cblxuXHQvL21vZGVsIG1haW50YWluYW5jZVxuXHRmdW5jdGlvbiBjbGVhbkV2ZW50cyh0eXBlKSB7XG5cdFx0Ly9pdGVyYXRlIHRocm91Z2ggb2JqZWN0cyBpbiBvYmplY3Rcblx0XHRPYmplY3Qua2V5cyhjdXJyZW50VXNlci5ldmVudHNbdHlwZV0pLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG5cdFx0XHQvL2lmIGFueSBhcmUgbm9uLW9iamVjdHMsIGRlbGV0ZSB0aGVtXG5cdFx0XHRpZighYW5ndWxhci5pc09iamVjdChjdXJyZW50VXNlci5ldmVudHNbdHlwZV1ba2V5XSkpIHtcblx0XHRcdFx0ZGVsZXRlIGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXVtrZXldO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0Ly9nZXR0ZXIgbWV0aG9kc1xuXHRmdW5jdGlvbiBnZXRVSURMb2NhbGx5KCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5iaW8udWlkO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0TmFtZUxvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmJpby5uYW1lO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0RW1haWxMb2NhbGx5KCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5iaW8uZW1haWw7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRDb21wYW55TG9jYWxseSgpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuYmlvLmNvbXBhbnk7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRUaXRsZUxvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmJpby50aXRsZTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0RE9CTG9jYWxseSgpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuYmlvLmRvYjtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldEZ1bGxCaW9Mb2NhbGx5KCkge1xuXHRcdHJldHVybiB7XG5cdFx0XHR1aWQ6IGN1cnJlbnRVc2VyLmJpby51aWQsXG5cdFx0XHRuYW1lOiBjdXJyZW50VXNlci5iaW8ubmFtZSxcblx0XHRcdGVtYWlsOiBjdXJyZW50VXNlci5iaW8uZW1haWwsXG5cdFx0XHRjb21wYW55OiBjdXJyZW50VXNlci5iaW8uY29tcGFueSxcblx0XHRcdHRpdGxlOiBjdXJyZW50VXNlci5iaW8udGl0bGUsXG5cdFx0XHRkb2I6IGN1cnJlbnRVc2VyLmJpby5kb2Jcblx0XHR9O1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0VXNlckV2ZW50c0xvY2FsbHkodHlwZSkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5ldmVudHNbdHlwZV07XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRBbGxVc2VyRXZlbnRzTG9jYWxseSgpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuZXZlbnRzO1xuXHR9XG5cblx0Ly9zZXR0ZXIgbWV0aG9kc1xuXHRmdW5jdGlvbiBzZXRVSURMb2NhbGx5KHVpZCkge1xuXHRcdGN1cnJlbnRVc2VyLmJpby51aWQgPSB1aWQ7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXROYW1lTG9jYWxseShuYW1lKSB7XG5cdFx0Y3VycmVudFVzZXIuYmlvLm5hbWUgPSBuYW1lO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0RW1haWxMb2NhbGx5KGVtYWlsKSB7XG5cdFx0Y3VycmVudFVzZXIuYmlvLmVtYWlsID0gZW1haWw7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXRDb21wYW55TG9jYWxseShjb21wYW55KSB7XG5cdFx0Y3VycmVudFVzZXIuYmlvLmNvbXBhbnkgPSBjb21wYW55O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzZXRUaXRsZUxvY2FsbHkodGl0bGUpIHtcblx0XHRjdXJyZW50VXNlci5iaW8udGl0bGUgPSB0aXRsZTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldERPQkxvY2FsbHkoZG9iKSB7XG5cdFx0Y3VycmVudFVzZXIuYmlvLmRvYiA9IGRvYjtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldFByaW1hcmllc0xvY2FsbHkoZW1haWwsIG5hbWUsIHVpZCkge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGVtYWlsKSkgc2V0RW1haWxMb2NhbGx5KGVtYWlsKTtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChuYW1lKSkgZ2V0TmFtZUxvY2FsbHkobmFtZSk7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodWlkKSkgc2V0VUlETG9jYWxseSh1aWQpO1xuXHR9XG5cblx0ZnVuY3Rpb24gdXBkYXRlVXNlckV2ZW50c0xvY2FsbHkodHlwZSwgZXZlbnQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGV2ZW50SUQgPSBldmVudC5pZDtcblxuXHRcdC8vY2hlY2sgaWYgdGhlIG1vZGVsIG5lZWRzIHRvIGJlIGNsZWFuZWRcblx0XHRjbGVhbkV2ZW50cyh0eXBlKTtcblx0XHQvL3RoZW4gbG9hZCB0aGUgbmV3IGV2ZW50XG5cdFx0Y3VycmVudFVzZXIuZXZlbnRzW3R5cGVdW2V2ZW50SURdID0gZXZlbnQ7XG5cdH1cblxuXHRmdW5jdGlvbiB1cGRhdGVBbGxVc2VyRXZlbnRzTG9jYWxseShhbGxVc2VyRXZlbnRzKSB7XG5cdFx0Y3VycmVudFVzZXIuZXZlbnRzID0gYWxsVXNlckV2ZW50cztcblx0fVxuXG5cdGZ1bmN0aW9uIHVwZGF0ZUJpb0xvY2FsbHkodXNlckJpbykge1xuXHRcdC8vdXBkYXRlIGxvY2FsIHZhbHVlc1xuXHRcdHNldE5hbWVMb2NhbGx5KHVzZXJCaW8ubmFtZSk7XG5cdFx0c2V0RW1haWxMb2NhbGx5KHVzZXJCaW8uZW1haWwpO1xuXHRcdHNldENvbXBhbnlMb2NhbGx5KHVzZXJCaW8uY29tcGFueSk7XG5cdFx0c2V0VGl0bGVMb2NhbGx5KHVzZXJCaW8udGl0bGUpO1xuXHRcdHNldERPQkxvY2FsbHkodXNlckJpby5kb2IpO1xuXHRcdC8vc2F2ZSB0byBkYlxuXHRcdHNldFJlbW90ZUJpb0Zyb21Mb2NhbCgpO1xuXHR9XG5cblx0Ly9kZWxldGUgTWV0aG9kc1xuXHRmdW5jdGlvbiByZW1vdmVVc2VyRXZlbnRzTG9jYWxseSh0eXBlLCBldmVudCkge1xuXHRcdC8vZG9lcyB0aGlzIHdvcms/XG5cdFx0ZGVsZXRlIGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXVtldmVudC5pZF07XG5cdH1cblxuXHQvL3JlbW90ZS1sb2NhbCBpbnRlcmFjdGlvbiBNZXRob2RzXG5cdGZ1bmN0aW9uIGdldEZ1bGxSZW1vdGVEQmZvckxvY2FsKCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0ZGIuZG93bmxvYWRVc2VyRGF0YSgpXG5cdFx0LnRoZW4oZnVuY3Rpb24ocmVtb3RlVXNlckRhdGEpIHtcblx0XHRcdGN1cnJlbnRVc2VyID0gcmVtb3RlVXNlckRhdGE7XG5cdFx0fSlcblx0fVxuXG5cdGZ1bmN0aW9uIGdldFJlbW90ZUJpb0ZvckxvY2FsKHVpZCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXHRcdFx0XHRcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL2dvIG91dCB0byB0aGUgZGIgYmVmb3JlIHJlc29sdmluZ1xuXHRcdFx0ZGIuZ2V0VXNlckJpbyh1aWQpXG5cdFx0XHQudGhlbihmdW5jdGlvbih1c2VyQmlvKSB7XG5cblx0XHRcdFx0cmVzb2x2ZSh1c2VyQmlvKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0cmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3IgcmVhZGluZyB0aGUgdXNlciBiaW86ICcgKyBlcnJvcik7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXHRcdFxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0UmVtb3RlRXZlbnRzRm9yTG9jYWwoKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cdFx0XHRcdFxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9nbyBvdXQgdG8gdGhlIGRiIGJlZm9yZSByZXNvbHZpbmdcblx0XHRcdGRiLmdldFVzZXJFdmVudHMoZ2V0VUlETG9jYWxseSgpKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24ob2J0YWluZWRVc2VyRXZlbnRzKSB7XG5cblx0XHRcdFx0Ly9zYXZlIHRoZSByZXN1bHRzIHRvIHRoZSBsb2NhbCBkYXRhYnNlXG5cdFx0XHRcdE9iamVjdC5rZXlzKG9idGFpbmVkVXNlckV2ZW50cykuZm9yRWFjaChmdW5jdGlvbihldmVudFR5cGUpIHtcblx0XHRcdFx0XHQvL3dpdGhpbiBlYWNoIGV2ZW50IHR5cGUgaXRlcmF0ZSB0aHJvdWdoIHRoZSBhY3R1YWwgZXZlbnRzXG5cdFx0XHRcdFx0T2JqZWN0LmtleXMob2J0YWluZWRVc2VyRXZlbnRzW2V2ZW50VHlwZV0pLmZvckVhY2goZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRcdFx0XHRcdC8vb25jZSB3ZSBzZWUgdGhlIGV2ZW50cywgc2F2ZSB0aGVtIHRvIHRoZSBsb2NhbCBtb2RlbFxuXG5cdFx0XHRcdFx0XHR1cGRhdGVVc2VyRXZlbnRzTG9jYWxseShldmVudFR5cGUsIG9idGFpbmVkVXNlckV2ZW50c1tldmVudFR5cGVdW2V2ZW50XSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly9yZXR1cm4gdGhlIHJlc3VsdHMgdG8gdGhlIHJlcXVlc3Rpbmcgb2JqZWN0XG5cdFx0XHRcdHJlc29sdmUob2J0YWluZWRVc2VyRXZlbnRzKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0cmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3IgcmVhZGluZyB0aGUgdXNlciBldmVudHM6ICcgKyBlcnJvcik7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0RnVsbFJlbW90ZURCZnJvbUxvY2FsKCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0ZGIudXBsb2FkVXNlckRhdGEoY3VycmVudFVzZXIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0UmVtb3RlQmlvRnJvbUxvY2FsKCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0ZGIudXBsb2FkVXNlckJpbyhjdXJyZW50VXNlci5iaW8pO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0UmVtb3RlRXZlbnRzRnJvbUxvY2FsKCkge31cblxuXHRmdW5jdGlvbiBjbGVhbkRCRXZlbnRzQ2F0ZWdvcnkoY2F0ZWdvcnkpIHtcblx0XHQvL2RlY2xhciBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0XHQvL3JlbW92ZSAndXBkYXRlZCcgb2JqZWN0IGlmIG5lZWQgYmVcblx0XHQvL2RiIGNhbGwgc28gcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vY2hlY2sgZm9yIG9iamVjdFxuXHRcdFx0ZGIudGhlcmVXYXNBblVwZGF0ZUZpZWxkKGNhdGVnb3J5LCBnZXRVSURMb2NhbGx5KCkpXG5cdFx0XHQudGhlbihmdW5jdGlvbihhZmZpcm1hdGl2ZVJlc3BvbnNlKSB7XG5cdFx0XHRcdC8vaWYgdGhlcmUgd2FzIGFuIHVwZGF0ZSBmaWVsZCwgZGVsZXRlIGl0XG5cdFx0XHRcdGRiLmRlbGV0ZVVwZGF0ZUZpZWxkKGNhdGVnb3J5LCBnZXRVSURMb2NhbGx5KCkpXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKGFmZmlybWF0aXZlUmVzcG9uc2UpIHsgJGxvZy5pbmZvKGFmZmlybWF0aXZlUmVzcG9uc2UpOyB9IClcblx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yUmVzcG9uc2UpIHsgJGxvZy5pbmZvKGVycm9yUmVzcG9uc2UpOyB9IClcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3JSZXNwb25zZSkge1xuXHRcdFx0XHQkbG9nLmluZm8oZXJyb3JSZXNwb25zZSlcblx0XHRcdH0pXG5cblx0XHR9KTtcblx0XHQvL2lmIGl0IGlzIHRoZXJlLCByZW1vdmUgaXRcblx0fVxuXG5cdGZ1bmN0aW9uIGxvYWRCaW8odWlkKSB7XG5cblx0XHQvL21pZ2h0IG5lZWQgdG8gZ28gb3V0IHRvIHRoZSBkYiBzbyByZXR1cm4gYSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHQvL2NoZWNrIGZvciBiaW8gbG9jYWxseSBmaXJzdFxuXHRcdFx0aWYoYmlvUHJpbWFyaWVzQXJlQ29tcGxldGVMb2NhbGx5KCkpIHtcblx0XHRcdFx0XG5cdFx0XHRcdC8vcGFzcyBpdCBiYWNrIGFzIHN1Y2Nlc3Ncblx0XHRcdFx0cmVzb2x2ZShnZXRGdWxsQmlvTG9jYWxseSgpKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vaWYgdGhleSdyZSBub3QgY29tcGxldGUgbG9jYWxseSwgY2hlY2sgdGhlIHNlcnZlclxuXHRcdFx0XHRnZXRSZW1vdGVCaW9Gb3JMb2NhbCh1aWQpXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKGJpb0Zyb21SZW1vdGVEQikge1xuXHRcdFx0XHRcdHJlc29sdmUoYmlvRnJvbVJlbW90ZURCKTtcblx0XHRcdFx0fSlcblx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHRcdFx0fSlcblx0XHRcdH1cblxuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBsb2FkRXZlbnRzUHJvZ3Jlc3NpdmVseSh1aWQpIHtcblx0XHR2YXIgZXZlbnRUeXBlcyA9IFsnYXR0ZW5kaW5nJywgJ3BlbmRpbmcnLCAnaG9zdGluZycsICdjb21wbGV0ZWQnXTtcblx0XHR2YXIgYWxsRXZlbnRzID0ge307XG5cblx0XHQvL3dpbGwgZ28gb3V0IHRvIHRoZSBkYiBzbyByZXR1cm4gYSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHRnZXRSZW1vdGVFdmVudHNGb3JMb2NhbCgpXG5cdFx0XHQudGhlbihmdW5jdGlvbihvYnRhaW5lZFVzZXJFdmVudHMpIHtcblx0XHRcdFx0Ly93aGVuIHRoZSBkYiByZXN1bHRzIGNvbWUgYmFjaywgcmV0dXJuIHRob3NlXG5cdFx0XHRcdHJlc29sdmUob2J0YWluZWRVc2VyRXZlbnRzKTtcblx0XHRcdH0pXG5cblx0XHRcdC8vYnVpbGQgdGhlIGxvY2FsIG1vZGVsXG5cdFx0XHRhbGxFdmVudHMgPSBnZXRVc2VyRXZlbnRzTG9jYWxseSh0eXBlKTtcblxuXHRcdFx0Ly9maXJzdCByZXR1cm4gd2hhdGV2ZXIgZXZlbnQgaW5mbyBpcyBzdG9yZWQgbG9jYWxseVxuXHRcdFx0cmVzb2x2ZShhbGxFdmVudHMpO1xuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBjcmVhdGVOZXdFdmVudChldmVudElEKSB7XG5cdFx0Ly9kZWNsYXIgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXHRcdHZhciBuZXdFdmVudCA9IHt9O1xuXG5cdFx0Ly9maXJzdCBjcmVhdGUgdGhlIG9iamVjdFxuXHRcdG5ld0V2ZW50ID0ge1xuXHRcdFx0aWQ6IGV2ZW50SUQsXG5cdFx0XHRuYW1lOiAnJyxcblx0XHRcdHR5cGU6ICcnLFxuXHRcdFx0aG9zdDoge1xuXHRcdFx0XHRuYW1lOiAnJyxcblx0XHRcdFx0dWlkOiAnJ1xuXHRcdFx0fSxcblx0XHRcdG1lc3NhZ2U6ICcnLFxuXHRcdFx0ZXZlbnRUaW1lczoge1xuXHRcdFx0XHRzdGFydDogMCxcblx0XHRcdFx0ZW5kOiAwXG5cdFx0XHR9LFxuXHRcdFx0YWRkcmVzczoge1xuXHRcdFx0XHRzdHJlZXQwMTogJycsXG5cdFx0XHRcdHN0cmVldDAyOiAnJyxcblx0XHRcdFx0c3RyZWV0MDM6ICcnLFxuXHRcdFx0XHRjaXR5OiAnJyxcblx0XHRcdFx0c3RhdGU6ICcnLFxuXHRcdFx0XHR6aXA6IDBcblx0XHRcdH0sXG5cdFx0XHRndWVzdExpc3Q6IHt9XG5cdFx0fTtcblxuXHRcdC8vc2F2ZSBpdCBsb2NhbGx5XG5cdFx0dXBkYXRlVXNlckV2ZW50c0xvY2FsbHkoJ2hvc3RpbmcnLCBuZXdFdmVudCk7XG5cblx0XHQvL3RoZW4gY3JlYXRlIGl0IG9uIHRoZSBzZXJ2ZXJcblx0XHQvL3dpbGwgZ28gb3V0IHRvIHRoZSBkYiBzbyByZXR1cm4gYSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XG5cdFx0XHQvL21hbmFnZSB0aGUgcHJvbWlzZSByZXNwb25zZXNcblx0XHRcdGRiLmNyZWF0ZUhvc3RlZEV2ZW50KGdldFVJRExvY2FsbHkoKSwgbmV3RXZlbnQpXG5cdFx0XHQudGhlbihmdW5jdGlvbihtZXNzYWdlKSB7XG5cdFx0XHRcdHJlc29sdmUobWVzc2FnZSk7XG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHR9KVxuXG5cdFx0fSk7XG5cblx0fVxuXHRcblx0cmV0dXJuIGFsbFVzZXJEYXRhO1xufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmZhY3RvcnkoJ3ZhbGlkYXRpb24nLCB2YWxpZGF0aW9uKTtcblxudmFsaWRhdGlvbi4kaW5qZWN0ID0gWyckbG9nJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gdmFsaWRhdGlvbigkbG9nKSB7XG5cdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0dmFyIG1pbmltdW1OYW1lTGVuZ3RoID0gMztcblx0dmFyIG1pbmltdW1QYXNzTGVuZ3RoID0gMTY7XG5cdHZhciBtYXhpbXVtUGFzc0xlbmd0aCA9IDEwMDtcblxuXHR2YXIgYWxsVmFsaWRhdGlvbnMgPSB7XG5cdFx0cmVxdWlyZWQ6IHJlcXVpcmVkLFxuXHRcdG1pbk5hbWVMZW5ndGg6IG1pbk5hbWVMZW5ndGgsXG5cdFx0bWluUGFzc0xlbmd0aDogbWluUGFzc0xlbmd0aCxcblx0XHRtYXhQYXNzTGVuZ3RoOiBtYXhQYXNzTGVuZ3RoLFxuXHRcdGF0TGVhc3RPbmVTeW1ib2w6IGF0TGVhc3RPbmVTeW1ib2wsXG5cdFx0YXRMZWFzdE9uZU51bWJlcjogYXRMZWFzdE9uZU51bWJlcixcblx0XHRhdExlYXN0T25lTG93ZXJjYXNlOiBhdExlYXN0T25lTG93ZXJjYXNlLFxuXHRcdGF0TGVhc3RPbmVVcHBlcmNhc2U6IGF0TGVhc3RPbmVVcHBlcmNhc2UsXG5cdFx0aWxsZWdhbENoYXJhY3RlcjogaWxsZWdhbENoYXJhY3Rlcixcblx0XHRlbWFpbDogZW1haWwsXG5cdFx0ZGF0ZU9mQmlydGg6IGRhdGVPZkJpcnRoXG5cdH07XG5cblx0ZnVuY3Rpb24gcmVxdWlyZWQodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzVW5kZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0cmV0dXJuICdUaGlzIGlzIGEgcmVxdWlyZWQgZmllbGQnO1xuXHRcdH0gXG5cdH1cblxuXHRmdW5jdGlvbiBtaW5OYW1lTGVuZ3RoKHZhbHVlKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHRpZih2YWx1ZS5sZW5ndGggPCBtaW5pbXVtTmFtZUxlbmd0aCkgcmV0dXJuICgnTmFtZSBzaG91bGQgYmUgYXQgbGVhc3QgJyArIG1pbmltdW1OYW1lTGVuZ3RoICsgJyBjaGFyYWN0ZXJzJyk7XG5cdFx0fSBcblx0fVxuXG5cdGZ1bmN0aW9uIG1pblBhc3NMZW5ndGgodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdGlmKCEodmFsdWUubGVuZ3RoIDwgbWluaW11bVBhc3NMZW5ndGgpKSByZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0ZnVuY3Rpb24gbWF4UGFzc0xlbmd0aCh2YWx1ZSkge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0aWYoISh2YWx1ZS5sZW5ndGggPiBtYXhpbXVtUGFzc0xlbmd0aCkpIHJldHVybiB0cnVlO1xuXHRcdH0gXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0ZnVuY3Rpb24gYXRMZWFzdE9uZVN5bWJvbCh2YWx1ZSkge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0Ly8gYnVpbGQgcmVnZXhcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIltcXCFcXEBcXCNcXCRcXCVcXF5cXCZcXCpdXCIpO1xuXG5cdFx0XHQvL2NoZWNrIGNvbnN0cmF0aW50XG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3QodmFsdWUpKSB7XG5cdFx0XHRcdC8vc3VjY2VzczogYXQgbGVhc3Qgb25lIHNwZWNpYWwgY2hhcmFjdGVyIGZvdW5kXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9mYWlsdXJlOiBkaWRuJ3QgZmluZCBhbnkgc3BjaWFsIGNoYXJhY3RlcnNcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGZ1bmN0aW9uIGF0TGVhc3RPbmVOdW1iZXIodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdC8vIGJ1aWxkIHJlZ2V4XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbMC05XVwiLCBcIlwiKTtcblxuXHRcdFx0Ly9jaGVjayBjb25zdHJhdGludFxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZhbHVlKSkge1xuXHRcdFx0XHQvL3N1Y2Nlc3M6IGF0IGxlYXN0IG9uZSBzcGVjaWFsIGNoYXJhY3RlciBmb3VuZFxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vZmFpbHVyZTogZGlkbid0IGZpbmQgYW55IHNwY2lhbCBjaGFyYWN0ZXJzXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuICAgIGZ1bmN0aW9uIGF0TGVhc3RPbmVMb3dlcmNhc2UodmFsdWUpIHtcbiAgICBcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0Ly8gYnVpbGQgcmVnZXhcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIlthLXpdXCIsIFwiXCIpO1xuXG5cdFx0XHQvL2NoZWNrIGNvbnN0cmF0aW50XG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3QodmFsdWUpKSB7XG5cdFx0XHRcdC8vc3VjY2VzczogYXQgbGVhc3Qgb25lIHNwZWNpYWwgY2hhcmFjdGVyIGZvdW5kXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9mYWlsdXJlOiBkaWRuJ3QgZmluZCBhbnkgc3BjaWFsIGNoYXJhY3RlcnNcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhdExlYXN0T25lVXBwZXJjYXNlKHZhbHVlKSB7XG4gICAgXHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdC8vIGJ1aWxkIHJlZ2V4XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbQS1aXVwiLCBcIlwiKTtcblxuXHRcdFx0Ly9jaGVjayBjb25zdHJhdGludFxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZhbHVlKSkge1xuXHRcdFx0XHQvL3N1Y2Nlc3M6IGF0IGxlYXN0IG9uZSBzcGVjaWFsIGNoYXJhY3RlciBmb3VuZFxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vZmFpbHVyZTogZGlkbid0IGZpbmQgYW55IHNwY2lhbCBjaGFyYWN0ZXJzXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaWxsZWdhbENoYXJhY3Rlcih2YWx1ZSkge1xuICAgIFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHQvLyBidWlsZCByZWdleFxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW15BLXowLTlcXCFcXEBcXCNcXCRcXCVcXF5cXCZcXCpdXCIsIFwiXCIpO1xuXG5cdFx0XHQvL2NoZWNrIGNvbnN0cmF0aW50XG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3QodmFsdWUpKSB7XG5cdFx0XHRcdC8vc3VjY2VzczogYXQgbGVhc3Qgb25lIHNwZWNpYWwgY2hhcmFjdGVyIGZvdW5kXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vZmFpbHVyZTogZGlkbid0IGZpbmQgYW55IHNwY2lhbCBjaGFyYWN0ZXJzXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gZW1haWwodmFsdWUpIHtcbiAgICBcdC8vZGVmaW5lIGNvbnN0cmFpbnRzXG4gICAgXHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKD86XFwuW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKykqQCg/OlthLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cXC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cIiwgXCJcIik7XG5cbiAgICBcdGlmKCFjb25zdHJhaW50LnRlc3QodmFsdWUpKSByZXR1cm4gJ05vdCBhIHZhbGlkIGUtbWFpbCBhZGRyZXNzJ1xuICAgIFx0XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGF0ZU9mQmlydGgodmFsdWUpIHt9XG5cblx0cmV0dXJuIGFsbFZhbGlkYXRpb25zO1xufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbmZpZyhjb25maWcpO1xuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBjb25maWcoJHJvdXRlUHJvdmlkZXIpIHsgICBcbiAgICAkcm91dGVQcm92aWRlclxuICAgIC53aGVuKCcvJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2xhbmRpbmdQYWdlLmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdMYW5kaW5nUGFnZUNvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICB9KVxuICAgIC53aGVuKCcvc2lnbnVwJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL25ld1VzZXJTaWdudXAuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ05ld1VzZXJTaWduVXBDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgfSlcbiAgICAud2hlbignL2xvZ2luJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3JlZ2lzdGVyZWRVc2VyTG9naW4uaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1JlZ1VzZXJMb2dpbkNvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICB9KVxuICAgIC53aGVuKCcvdXNlckluZm9ybWF0aW9uLzp1aWQ/Jywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3VzZXJJbmZvcm1hdGlvbi5odG0nLFxuICAgICAgICBjb250cm9sbGVyOiAnVXNlckluZm9ybWF0aW9uQ29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgcmVzb2x2ZTogeyAvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgICAgIHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2U6IHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2VcbiAgICAgICAgfVxuICAgIH0pXG4gICAgLndoZW4oJy91c2VyRXZlbnRzLzp1aWQ/Jywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3VzZXJFdmVudHMuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1VzZXJFdmVudHNDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICByZXNvbHZlOiB7IC8qIEBuZ0luamVjdCAqL1xuICAgICAgICAgICAgdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZTogdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZVxuICAgICAgICB9XG4gICAgfSlcbiAgICAud2hlbignL2V2ZW50LzpldmVudElkPy86aG9zdElkPy86dWlkPycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9hbkV2ZW50Lmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdBbkV2ZW50Q29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgcmVzb2x2ZTogeyAvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgICAgIHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2U6IHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2VcbiAgICAgICAgfVxuICAgIH0pXG4gICAgLm90aGVyd2lzZSh7XG4gICAgICAgIHJlZGlyZWN0VG86ICcvJ1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlKGF1dGhTZXJ2aWNlKSB7XG4gICAgYXV0aFNlcnZpY2UuaXNMb2dnZWRJbigpO1xufSIsIlxuY29uZmlnLiRpbmplY3QgPSBbXCIkcm91dGVQcm92aWRlclwiXTtcbnVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2UuJGluamVjdCA9IFtcImF1dGhTZXJ2aWNlXCJdO2FuZ3VsYXJcblx0Lm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnLCBbXG5cdFx0J25nUm91dGUnLFxuXHRcdCduZ1RvdWNoJyxcblx0XHQnZmlyZWJhc2UnXG5cdF0pO1xuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignQW5FdmVudENvbnRyb2xsZXInLCBBbkV2ZW50Q29udHJvbGxlcik7XG5cbkFuRXZlbnRDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJywgJyRsb2NhdGlvbicsICckcm91dGVQYXJhbXMnLCAnJGZpcmViYXNlT2JqZWN0J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gQW5FdmVudENvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCAkbG9jYXRpb24sICRyb3V0ZVBhcmFtcywgJGZpcmViYXNlT2JqZWN0KSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdHZhciBmYlVSTCA9ICdodHRwczovL21lZXR1cHBsYW5uZXIuZmlyZWJhc2Vpby5jb20vJztcblx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdHZhciB1c2VyRXZlbnRzID0gcmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ob3N0SWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgnaG9zdGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ldmVudElkKVxuXG5cdC8vYmluZGluZyB0byB0aGUgZXZlbnRcblx0dm0uZXZlbnQgPSAkZmlyZWJhc2VPYmplY3QodXNlckV2ZW50cylcblx0dmFyIHJlZ2lzdGVyZWRVc2VycyA9ICRmaXJlYmFzZU9iamVjdChyZWYuY2hpbGQoJ1VpZHMnKSk7XG5cblx0Ly9yZXF1aXJlZCBmaWVsZHNcblx0dm0ucmVxdWlyZWRJbnB1dHMgPSBbJycsICcnLCAnJywgJycsICcnLCAnJywgJycsICcnLCAnJ107XG5cblx0Ly9Mb2NhbCBNZXRob2RzXG5cdGZ1bmN0aW9uIGluaXQoKSB7XG5cdFx0Ly9kZWNsYXJlIGFuZCBpbml0aWFsaXplIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZtLnRlbXBEYXRlVGltZSA9IHtzdGFydDogJycsIGVuZDogJyd9O1xuXHRcdHZtLm5ld0d1ZXN0ID0ge25hbWU6ICcnLCBlbWFpbDp7YWRkcmVzczonJywgdmFsaWQ6ZmFsc2UsIHN0eWxlOntjb2xvcjonJ319fTtcblx0XHR2bS5zaG93SWZIb3N0ID0gZmFsc2U7XG5cdFx0dm0uaGlkZUlmQXR0ZW5kaW5nID0gdHJ1ZTtcblx0XHQvL3NlY3Rpb25zXG5cdFx0dm0ubWFuYWdlU2VjdGlvbnMgPSB7XG5cdFx0XHQxOiB7YWN0aXZlOiB0cnVlLCBjb21wbGV0ZTogZmFsc2UsIHN0eWxlOntjb2xvcjonYmxhY2snLCAnYmFja2dyb3VuZC1jb2xvcic6J3llbGxvdyd9fSxcblx0XHRcdDI6IHthY3RpdmU6IGZhbHNlLCBjb21wbGV0ZTogZmFsc2UsIHN0eWxlOntjb2xvcjond2hpdGUnLCAnYmFja2dyb3VuZC1jb2xvcic6J2dyYXknfX0sXG5cdFx0XHQzOiB7YWN0aXZlOiBmYWxzZSwgY29tcGxldGU6IGZhbHNlLCBzdHlsZTp7Y29sb3I6J3doaXRlJywgJ2JhY2tncm91bmQtY29sb3InOidncmF5J319XG5cdFx0fTtcblxuXHRcdC8vY2hlY2sgdXNlciB0byBkZXRlcm1pbmUgc3RhdGVcblx0XHRjaGVja0Zvckhvc3QoKTtcblx0XHRjaGVja0lmR3Vlc3RJc0F0dGVuZGluZygpO1xuXG5cdFx0Ly9vcGVuIHVwIHNlY3Rpb25zXG5cdFx0aWYoIXZtLnNob3dJZkhvc3QpIG9wZW5BbGxTZWN0aW9ucygpO1xuXHR9XG5cblx0ZnVuY3Rpb24gdXRmOF90b19iNjQoc3RyKSB7XG5cdFx0cmV0dXJuIGJ0b2Eoc3RyKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGI2NF90b191dGY4KHN0cikge1xuICAgIFx0cmV0dXJuIGF0b2Ioc3RyKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNsZWFuTmV3R3Vlc3RWYXJpYWJsZSgpIHtcblx0XHR2bS5uZXdHdWVzdCA9IHtuYW1lOiAnJywgZW1haWw6e2FkZHJlc3M6JycsIHZhbGlkOmZhbHNlLCBzdHlsZTp7Y29sb3I6Jyd9fX07XG5cdH1cblxuXHRmdW5jdGlvbiBpbnZpdGVBUmVnaXN0ZXJlZFVzZXIodWlkKSB7XG5cdFx0JGxvZy5pbmZvKCdhZGRpbmcgdGhlbSB0byB0aGUgcmVnaXN0ZXJlZCB1c2VycyBsaXN0ICcgKyB1aWQpO1xuXHRcdC8vc2V0IHRoZSBuZXcgZXZlbnRcblx0XHRyZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ3BlbmRpbmcnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS5jaGlsZCgkcm91dGVQYXJhbXMuZXZlbnRJZCkuc2V0KHtcblx0XHRcdGlkOiAkcm91dGVQYXJhbXMuZXZlbnRJZCxcblx0XHRcdGV2ZW50VGltZXM6IHtcblx0XHRcdFx0c3RhcnQ6IHZtLmV2ZW50LmV2ZW50VGltZXMuc3RhcnQsXG5cdFx0XHRcdGVuZDogdm0uZXZlbnQuZXZlbnRUaW1lcy5lbmRcblx0XHRcdH0sXG5cdFx0XHRuYW1lOiB2bS5ldmVudC5uYW1lLFxuXHRcdFx0aG9zdDogJHJvdXRlUGFyYW1zLnVpZFxuXHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKCd0aGVyZSB3YXMgYW4gZXJyb3InICsgZXJyb3IpO1xuXHRcdH0pO1xuXHRcdC8vaWYgdGhlcmUgd2FzIGFuIHVwZGF0ZWQgcGxhY2UgaG9sZGVyLCByZW1vdmUgaXRcblx0XHRyZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ3BlbmRpbmcnKS5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHR2YXIgY2hlY2tGb3JQbGFjZWhvbGRlciA9IHNuYXBzaG90LnZhbCgpXG5cdFx0XHQkbG9nLmluZm8oc25hcHNob3QudmFsKCkpO1xuXG5cdFx0XHRpZihjaGVja0ZvclBsYWNlaG9sZGVyLnVwZGF0ZWQpIHtcblx0XHRcdFx0JGxvZy5pbmZvKCdkZWxldGluZyB1cGRhdGVkJyk7XG5cdFx0XHRcdHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgncGVuZGluZycpLmNoaWxkKCd1cGRhdGVkJykucmVtb3ZlKGZ1bmN0aW9uKGVycm9yT2JqZWN0KSB7XG5cdFx0XHRcdFx0aWYoZXJyb3JPYmplY3QpICRsb2cuaW5mbyhcIkRlbGV0aW5nIGZhaWxlZDogXCIgKyBlcnJvck9iamVjdC5jb2RlKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2UgJGxvZy5pbmZvKCdub3RoaW5nIHRvIGRvJyk7XG5cblx0XHR9LCBmdW5jdGlvbihlcnJvck9iamVjdCkge1xuXHRcdFx0aWYoZXJyb3JPYmplY3QpICRsb2cuaW5mbyhcIlRoZSByZWFkIGZhaWxlZDogXCIgKyBlcnJvck9iamVjdC5jb2RlKTtcblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGludml0ZUFuVW5yZWdpc3RlcmVkVXNlcih1c2VyS2V5KSB7XG5cdFx0JGxvZy5pbmZvKCdhZGRpbmcgdGhlbSB0byB0aGUgVU5SRUdJU1RFUkVEIHVzZXJzIGxpc3QgJyArIHVzZXJLZXkpO1xuXHRcdHJlZi5jaGlsZCgnVW5yZWdpc3RlcmVkVXNlcnMnKS5jaGlsZCh1c2VyS2V5KS5jaGlsZCgncGVuZGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ldmVudElkKS5zZXQoe1xuXHRcdFx0aWQ6ICRyb3V0ZVBhcmFtcy5ldmVudElkLFxuXHRcdFx0aG9zdDogJHJvdXRlUGFyYW1zLnVpZCxcblx0XHRcdGV2ZW50VGltZXM6IHtcblx0XHRcdFx0c3RhcnQ6IHZtLmV2ZW50LmV2ZW50VGltZXMuc3RhcnQsXG5cdFx0XHRcdGVuZDogdm0uZXZlbnQuZXZlbnRUaW1lcy5lbmRcblx0XHRcdH0sXG5cdFx0XHRuYW1lOiB2bS5ldmVudC5uYW1lXG5cdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oJ3RoZXJlIHdhcyBhbiBlcnJvcicgKyBlcnJvcik7XG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBjaGVja0Zvckhvc3QoKSB7XG5cdFx0Ly9jaGVjayBldmVudCBob3N0XG5cdFx0dmFyIGF1dGhEYXRhID0gcmVmLmdldEF1dGgoKTtcblxuXHRcdGlmKGF1dGhEYXRhLnVpZCA9PSAkcm91dGVQYXJhbXMuaG9zdElkKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2lzIHRoZSBob3N0Jyk7XG5cdFx0XHR2bS5zaG93SWZIb3N0ID0gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JGxvZy5pbmZvKCdub3QgdGhlIGhvc3QnKTtcblx0XHRcdHZtLnNob3dJZkhvc3QgPSBmYWxzZTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBjaGVja0lmR3Vlc3RJc0F0dGVuZGluZygpIHtcblx0XHRpZighdm0uc2hvd0lmSG9zdCkge1xuXHRcdFx0JGxvZy5pbmZvKCdjaGVjayBndWVzdCBhdHRlbmRhbmNlJyk7XG5cdFx0XHR1c2VyRXZlbnRzLmNoaWxkKCdndWVzdExpc3QnKS5vbigndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0XHR2YXIgYWxsR3Vlc3RzID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHRcdHZtLmhpZGVJZkF0dGVuZGluZyA9ICFhbGxHdWVzdHNbJHJvdXRlUGFyYW1zLnVpZF0uYXR0ZW5kaW5nO1xuXHRcdFx0XHRcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIG9wZW5BbGxTZWN0aW9ucygpIHtcblx0XHR2bS5tYW5hZ2VTZWN0aW9uc1sxXS5hY3RpdmUgPSB0cnVlO1xuXHRcdHZtLm1hbmFnZVNlY3Rpb25zWzJdLmFjdGl2ZSA9IHRydWU7XG5cdFx0dm0ubWFuYWdlU2VjdGlvbnNbM10uYWN0aXZlID0gdHJ1ZTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNhdmVFdmVudCgpIHtcblx0XHR2bS5ldmVudC4kc2F2ZSgpLnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2V2ZW50IHNhdmVkJyk7XG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdCRsb2cuaW5mbygnZXJyb3IhICcgKyBlcnJvcik7XG5cdFx0fSk7XG5cdH1cblxuXHQvL3ZpZXcgTWV0aG9kXG5cdHZtLnNldFRlbXBUaW1lID0gZnVuY3Rpb24oZW5kcG9pbnQpIHtcblx0XHRpZihlbmRwb2ludCA9PSAnc3RhcnQnKSB2bS50ZW1wRGF0ZVRpbWUuc3RhcnQgPSBuZXcgRGF0ZSgpO1xuXHRcdGlmKGVuZHBvaW50ID09ICdlbmQnKSB2bS50ZW1wRGF0ZVRpbWUuZW5kID0gbmV3IERhdGUoKTtcblx0fVxuXG5cdHZtLnVuaXhUaW1lVG9EYXRlVGltZSA9IGZ1bmN0aW9uICh1bml4VGltZSkge1xuXHRcdHJldHVybiBuZXcgRGF0ZShwYXJzZUludCh1bml4VGltZSkpO1xuXHR9O1xuXG5cdHZtLmRhdGVUaW1lVG9Vbml4VGltZSA9IGZ1bmN0aW9uIChkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fTtcblxuXHR2bS5zdWJtaXQgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9nLmluZm8oJ3N1Ym1pdHRpbmcgdGhlIGZvcm0gbm93IScpO1xuXHR9XG5cblx0dm0uYmFja1RvVXNlckV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2NhdGlvbi5wYXRoKCcvdXNlckV2ZW50cy8nICsgJHJvdXRlUGFyYW1zLnVpZCArICcvJyArICRyb3V0ZVBhcmFtcy50b2tlbik7XG5cdH1cblxuXHR2bS5ldmVudFJlZGlyZWN0ID0gZnVuY3Rpb24ocGF0aCwgZXZlbnRJRCkge1xuXHRcdHZhciBmdWxsUGF0aCA9IHBhdGggKyAnLycgKyAkcm91dGVQYXJhbXMudWlkICsgJy8nICsgJHJvdXRlUGFyYW1zLnRva2VuO1xuXHRcdC8vcmVkaXJlY3Rcblx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIHRvOiAnICsgZnVsbFBhdGgpO1xuXHRcdCRsb2NhdGlvbi5wYXRoKGZ1bGxQYXRoKTtcblx0fVxuXG5cdHZtLmNoYW5nZVNlY3Rpb24gPSBmdW5jdGlvbih0YXJnZXRTZWN0aW9uKSB7XG5cdFx0JGxvZy5pbmZvKCdhcmUgd2UgaGVyZScpO1xuXHRcdGZvcihpID0gMTsgaSA8PTM7IGkrKykge1xuXHRcdFx0aWYoaT09dGFyZ2V0U2VjdGlvbikge1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5hY3RpdmUgPSB0cnVlO1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5zdHlsZVsnYmFja2dyb3VuZC1jb2xvciddID0neWVsbG93Jztcblx0XHRcdFx0dm0ubWFuYWdlU2VjdGlvbnNbaV0uc3R5bGVbJ2NvbG9yJ10gPSdibGFjayc7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5hY3RpdmUgPSBmYWxzZTtcblx0XHRcdFx0dm0ubWFuYWdlU2VjdGlvbnNbaV0uc3R5bGVbJ2JhY2tncm91bmQtY29sb3InXSA9J2dyYXknO1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5zdHlsZVsnY29sb3InXSA9J3doaXRlJztcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHR2bS5zYXZlRXZlbnRUaW1lID0gZnVuY3Rpb24oZGF0ZVRpbWUsIHRhcmdldCkge1xuXHRcdC8vaWYgdGhpcyBldmVudCBkaWRuJ3QgaGF2ZSBhIHN0YXJ0IHRpbWUsIGNyZWF0ZSBpdFxuXHRcdGlmKCF2bS5ldmVudC5ldmVudFRpbWVzKSB7IFxuXHRcdFx0dm0uZXZlbnQuZXZlbnRUaW1lcyA9IHtzdGFydDogJycsIGVuZDogJyd9O1xuXHRcdFx0dm0uZXZlbnQuZXZlbnRUaW1lcy5zdGFydCA9IHZtLmRhdGVUaW1lVG9Vbml4VGltZSh2bS50ZW1wRGF0ZVRpbWUuc3RhcnQpOyBcblx0XHRcdHZtLmV2ZW50LmV2ZW50VGltZXMuZW5kID0gdm0uZGF0ZVRpbWVUb1VuaXhUaW1lKHZtLnRlbXBEYXRlVGltZS5lbmQpO1xuXHRcdH1cblxuXHRcdGlmKCh2bS50ZW1wRGF0ZVRpbWUuZW5kIDwgdm0udGVtcERhdGVUaW1lLnN0YXJ0KSAmJiB0YXJnZXQgPT0gJ3N0YXJ0Jykgdm0udGVtcERhdGVUaW1lLmVuZCA9IHZtLnRlbXBEYXRlVGltZS5zdGFydDtcblx0XHRpZih0YXJnZXQgPT0gJ3N0YXJ0Jykgdm0uZXZlbnQuZXZlbnRUaW1lcy5zdGFydCA9IHZtLmRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSk7XG5cdFx0aWYodGFyZ2V0ID09ICdlbmQnKSB2bS5ldmVudC5ldmVudFRpbWVzLmVuZCA9IHZtLmRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSk7XG5cdH1cblxuXHR2bS5ndWVzdHNBcmVJbnZpdGVkID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodm0uZXZlbnQuZ3Vlc3RMaXN0KSByZXR1cm4gdHJ1ZTtcblx0XHRlbHNlIHJldHVybiBmYWxzZTtcblx0fVxuXG5cdHZtLnZhbGlkYXRlR3Vlc3RFbWFpbCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vaWYgdGhlcmUgaXMgYW4gZW1haWwgYWRkcmVzc1xuXHRcdGlmKHZtLm5ld0d1ZXN0LmVtYWlsLmFkZHJlc3MpIHtcblx0XHRcdC8vY2hlY2sgdmFsaWRpdHlcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSsoPzpcXC5bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKSpAKD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1xcLikrW2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1wiLCBcIlwiKTtcblxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZtLm5ld0d1ZXN0LmVtYWlsLmFkZHJlc3MpKSB7XG5cdFx0XHRcdHZtLm5ld0d1ZXN0LmVtYWlsLnZhbGlkID0gdHJ1ZTtcblx0XHRcdFx0dm0ubmV3R3Vlc3QuZW1haWwuc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS5uZXdHdWVzdC5lbWFpbC52YWxpZCA9IGZhbHNlO1xuXHRcdFx0XHR2bS5uZXdHdWVzdC5lbWFpbC5zdHlsZSA9IHtjb2xvcjonJ307XG5cdFx0XHR9XHRcdFx0XG5cdFx0fVxuXHR9XG5cblx0dm0uaXNTZWN0aW9uQ29tcGxldGUgPSBmdW5jdGlvbigpIHtcblx0XHRmb3IoaT0wO2k8ODtpKyspIHtcblx0XHRcdCRsb2cuaW5mbyh2bS5yZXF1aXJlZElucHV0c1tpXSk7XG5cdFx0fVxuXHR9XG5cblx0dm0uc2F2ZUFuZEFkdmFuY2UgPSBmdW5jdGlvbigpIHtcblx0XHR2bS5ldmVudC4kc2F2ZSgpLnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2V2ZW50IHNhdmVkJyk7XG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdCRsb2cuaW5mbygnZXJyb3IhICcgKyBlcnJvcik7XG5cdFx0fSk7XG5cblx0XHQvL2NoZWNrIGZvciBjb21wbGV0ZW5lc1xuXHRcdHZtLmlzU2VjdGlvbkNvbXBsZXRlKCk7XG5cblx0XHRpZih2bS5tYW5hZ2VTZWN0aW9uc1sxXS5jb21wbGV0ZSA9PSB0cnVlICYmIHZtLm1hbmFnZVNlY3Rpb25zWzJdLmNvbXBsZXRlID09IHRydWUgJiYgdm0ubWFuYWdlU2VjdGlvbnNbM10uY29tcGxldGUgPT0gdHJ1ZSkge1xuXHRcdFx0dm0uZXZlbnRSZWRpcmVjdCgnL3VzZXJFdmVudHMnLCAkcm91dGVQYXJhbXMudWlkKTtcblx0XHR9IGVsc2UgaWYgKHZtLm1hbmFnZVNlY3Rpb25zWzFdLmFjdGl2ZSkgdm0uY2hhbmdlU2VjdGlvbigyKTtcblx0XHRlbHNlIGlmICh2bS5tYW5hZ2VTZWN0aW9uc1syXS5hY3RpdmUpIHZtLmNoYW5nZVNlY3Rpb24oMyk7XG5cdFx0ZWxzZSBpZiAodm0ubWFuYWdlU2VjdGlvbnNbM10uYWN0aXZlKSB2bS5jaGFuZ2VTZWN0aW9uKDEpO1xuXHR9XG5cblx0dm0uYWRkR3Vlc3RUb0hvc3RzTGlzdCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vZGVjbGFyZSBhbmQgaW5pdGlhbGl6ZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgdXNlcktleSA9IHV0ZjhfdG9fYjY0KHZtLm5ld0d1ZXN0LmVtYWlsLmFkZHJlc3MpO1xuXG5cdFx0Ly9pZiBlbWFpbCBpcyB2YWxpZCBhbmQgbmFtZSBleGlzdHNcblx0XHRpZiAodm0ubmV3R3Vlc3QubmFtZSAmJiB2bS5uZXdHdWVzdC5lbWFpbC52YWxpZCkge1xuXHRcdFx0Ly9pcyB0aGVyZSBhIGd1ZXN0IGxpc3QgYWxyZWFkeT8gSWYgbm90IGNyZWF0ZSBvbmVcblx0XHRcdGlmKCF2bS5ldmVudC5ndWVzdExpc3QpIHtcblx0XHRcdFx0dm0uZXZlbnQuZ3Vlc3RMaXN0ID0ge307XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2lmIHNvIGlzIHRoaXMgcGVyc29uIGFscmVhZHkgb24gdGhlIGxpc3Q/XG5cdFx0XHRcdHZhciBpID0wO1xuXHRcdFx0XHR3aGlsZSh2bS5ldmVudC5ndWVzdExpc3RbaV0pIHtcblx0XHRcdFx0XHRpZih2bS5ldmVudC5ndWVzdExpc3RbaV0uZW1haWwgPT0gYjY0X3RvX3V0ZjgodXNlcktleSkpIHtcblx0XHRcdFx0XHRcdCRsb2cuaW5mbygnVGhpcyBndWVzdCBpcyBhbHJlYWR5IG9uIHRoZSBsaXN0Jyk7XG5cdFx0XHRcdFx0XHRjbGVhbk5ld0d1ZXN0VmFyaWFibGUoKTtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aSsrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vaXMgdGhpcyBndWVzdCBhIHJlZ2lzdGVyZWQgdXNlcj9cblx0XHRcdGlmKHJlZ2lzdGVyZWRVc2Vyc1t1c2VyS2V5XSkge1xuXHRcdFx0XHQvL2lzIHRoZSByZWdpc3RlcmVkIHVzZXIgdGhlIGhvc3Q/XG5cdFx0XHRcdGlmKHJlZ2lzdGVyZWRVc2Vyc1t1c2VyS2V5XSA9PSAkcm91dGVQYXJhbXMudWlkKSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCd0cmllZCB0byByZWdpc3RlciB0aGUgaG9zdCcpO1xuXHRcdFx0XHRcdGNsZWFuTmV3R3Vlc3RWYXJpYWJsZSgpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHQvL2FkZCB0aGVtIHRvIHRoZSBhcHByb3ByaWF0ZSByZWdpc3RlcmVkIHVzZXJzJyBsaXN0IG9mIGV2ZW50IGludml0ZXNcblx0XHRcdFx0XHRpbnZpdGVBUmVnaXN0ZXJlZFVzZXIocmVnaXN0ZXJlZFVzZXJzW3VzZXJLZXldKTtcblxuXHRcdFx0XHRcdC8vYWRkIHRoZSBndWVzdCB0byB0aGUgbGlzdFxuXHRcdFx0XHRcdHZtLmV2ZW50Lmd1ZXN0TGlzdFtyZWdpc3RlcmVkVXNlcnNbdXNlcktleV1dID0ge1xuXHRcdFx0XHRcdFx0YXR0ZW5kaW5nOiBmYWxzZSwgXG5cdFx0XHRcdFx0XHRzdGF0dXM6J3BlbmRpbmcnLCBcblx0XHRcdFx0XHRcdG5hbWU6IHZtLm5ld0d1ZXN0Lm5hbWUsIFxuXHRcdFx0XHRcdFx0ZW1haWw6dm0ubmV3R3Vlc3QuZW1haWwuYWRkcmVzcyxcblx0XHRcdFx0XHR9O1x0XHRcdFx0XHRcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9hZGQgdGhlIGludml0ZSB0byB0aGUgbm9uLXJlZ2lzdGVyZWQgdXNlcnMgbGlzdCBvZiBldmVudCBpbnZpdGVzXG5cdFx0XHRcdGludml0ZUFuVW5yZWdpc3RlcmVkVXNlcih1c2VyS2V5KTtcblxuXHRcdFx0XHQvL2FkZCB0aGUgZ3Vlc3QgdG8gdGhlIGxpc3Rcblx0XHRcdFx0dm0uZXZlbnQuZ3Vlc3RMaXN0W3VzZXJLZXldID0ge1xuXHRcdFx0XHRcdFx0YXR0ZW5kaW5nOiBmYWxzZSwgXG5cdFx0XHRcdFx0XHRzdGF0dXM6J3BlbmRpbmcnLCBcblx0XHRcdFx0XHRcdG5hbWU6IHZtLm5ld0d1ZXN0Lm5hbWUsIFxuXHRcdFx0XHRcdFx0ZW1haWw6dm0ubmV3R3Vlc3QuZW1haWwuYWRkcmVzcyxcblx0XHRcdFx0fTtcblx0XHRcdH1cblxuXG5cdFx0XHQvL3NhdmUgdGhlIGV2ZW50XG5cdFx0XHR2bS5zYXZlRXZlbnQoKTtcblx0XHRcdC8vY2xlYXIgdGhlIHRlbXAgdmFsdWVzXG5cdFx0XHRjbGVhbk5ld0d1ZXN0VmFyaWFibGUoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JGxvZy5pbmZvKCd5b3UgZGlkblxcJ3QgZW50ZXIgYSBuYW1lIGFuZCBvciBlbWFpbCcpO1xuXHRcdH1cblx0fVxuXG5cdHZtLmd1ZXN0V2lsbEF0dGVuZCA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdFx0dmFyIGN1cnJlbnRVc2VyID0gcmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCdldmVudHMnKTtcblx0XHR2YXIgdG90YWxQZW5kaW5nSW52aXRhdGlvbnMgPSAwO1xuXHRcdHZhciByZW1vdmVBdHRlbmRpbmdVcGRhdGVkID0gZmFsc2U7XG5cdFx0XG5cdFx0Ly9jaGFuZ2UgYXR0ZW5kaW5nIHRvIHRydWUgaW4gaG9zdCdzIGd1ZXN0TGlzdFxuXHRcdHZtLmV2ZW50Lmd1ZXN0TGlzdFskcm91dGVQYXJhbXMudWlkXS5hdHRlbmRpbmcgPSByZXNwb25zZTtcblx0XHQvL2NoYW5nZSBzdGF0dXMgdG8gJ2F0dGVuZGluZycgaW4gaG9zdCdzIGd1ZXN0TGlzdFxuXHRcdHZtLmV2ZW50Lmd1ZXN0TGlzdFskcm91dGVQYXJhbXMudWlkXS5zdGF0dXMgPSAnYXR0ZW5kaW5nJztcblx0XHRcblx0XHQvL2dldCB0aGUgaW52aXRhdGlvbiBkZXRhaWxzXG5cdFx0Y3VycmVudFVzZXIuY2hpbGQoJ3BlbmRpbmcnKS5vbigndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFsYmVcblx0XHRcdHZhciBpbnZpdGF0aW9ucyA9IHNuYXBzaG90LnZhbCgpO1xuXHRcdFx0Ly9sb2cgc3RhcnRpbmcgdmFsdWVzXG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnMpO1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdKTtcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9uc1skcm91dGVQYXJhbXMuaG9zdElkXVskcm91dGVQYXJhbXMuZXZlbnRJZF0pO1xuXG5cdFx0XHR2YXIgdGhpc0ludml0YXRpb24gPSBpbnZpdGF0aW9uc1skcm91dGVQYXJhbXMuaG9zdElkXVskcm91dGVQYXJhbXMuZXZlbnRJZF07XG5cdFx0XHRcblx0XHRcdCRsb2cuaW5mbyh0aGlzSW52aXRhdGlvbik7XG5cdFx0XHRcblx0XHRcdC8vY2hlY2sgIyBvZiBpbml2aWF0aW9uc1xuXHRcdFx0Zm9yKGludml0YXRpb24gaW4gaW52aXRhdGlvbnMpIHtcblx0XHRcdFx0dG90YWxQZW5kaW5nSW52aXRhdGlvbnMrKztcblx0XHRcdH1cblxuXHRcdFx0Ly9yZXBvcnQgIyBvZiBpbnZpdGF0aW9uc1xuXHRcdFx0JGxvZy5pbmZvKFwidG90YWwgYXR0ZW5kaW5nOiBcIiArIHRvdGFsUGVuZGluZ0ludml0YXRpb25zKTtcblx0XHRcdFxuXHRcdFx0Ly9hZGQgdGhlIGV2ZW50IHRvIHRoZSBndWVzdCdzIGF0dGVuZGluZyBsaXN0XG5cdFx0XHRpZihyZXNwb25zZSkgY3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ob3N0SWQpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ldmVudElkKS5zZXQodGhpc0ludml0YXRpb24sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oZXJyb3IpO1xuXHRcdFx0fSk7XG5cblx0XHR9KTtcblxuXHRcdC8vaWYgdGhlIHVwZGF0ZWQgcGxhY2Vob2xkZXIgd2FzIG9uIHRoZSBhdHRlbmRpbmcgbGlzdCByZW1vdmUgaXRcblx0XHRjdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykub24oJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgYXR0ZW5kaW5nTGlzdCA9IHNuYXBzaG90LnZhbCgpO1xuXHRcdFx0XG5cdFx0XHQvL3JlcG9ydCBhY3Rpb25zXG5cdFx0XHQkbG9nLmluZm8oJ3RoaXMgaXMgdGhlIGF0dGVuZGluZyBsaXN0Jyk7XG5cdFx0XHQkbG9nLmluZm8oYXR0ZW5kaW5nTGlzdCk7XG5cdFx0XHRcblx0XHRcdC8vdGhyb3cgZmxhZyBmb3IgbGF0ZXJcblx0XHRcdGlmKGF0dGVuZGluZ0xpc3QudXBkYXRlZCkgcmVtb3ZlQXR0ZW5kaW5nVXBkYXRlZCA9IHRydWU7XG5cblx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0Ly9pZiB0aGVyIHdhcyBhbiBlcnJvciByZXBvcnQgaXRcblx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oZXJyb3IpO1xuXHRcdH0pO1xuXG5cdFx0Ly9pZiB0aGlzIGlzIHRoZSBsYXN0IHBlbmRpbmcgZXZlbnQgb24gdGhlIGd1ZXN0J3MgcGVuZGluZyBsaXN0LCBhZGQgdGhlIHVwZGF0ZWQgcGxhY2Vob2xkZXJcblx0XHRpZih0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucyA8IDIpIHtcblx0XHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xuXG5cdFx0XHQvL3JlcGxhY2Ugd2l0aCB1cGRhdGVkIGZpZWxkXG5cdFx0XHRjdXJyZW50VXNlci5jaGlsZCgncGVuZGluZycpLnVwZGF0ZSh7XG5cdFx0XHRcdHVwZGF0ZWQ6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oZXJyb3IpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0Ly9yZW1vdmUgdGhlIGV2ZW50IGZyb20gdGhlIGd1ZXN0J3MgcGVuZGluZyBsaXN0XG5cdFx0Y3VycmVudFVzZXIuY2hpbGQoJ3BlbmRpbmcnKS5jaGlsZCgkcm91dGVQYXJhbXMuaG9zdElkKS5yZW1vdmUoKTtcblxuXHRcdC8vaWYgdGhlcmUgd2FzIGFuIHVwZGF0ZWQgZmllbGQgaW4gYXR0ZW5kaW5nLCByZW1vdmUgaXRcblx0XHRpZihyZW1vdmVBdHRlbmRpbmdVcGRhdGVkKSB7XG5cdFx0XHQkbG9nLmluZm8oJ3JlbW92aW5nIHRoZSB1cGRhdGVkIHBsYWNlaG9sZGVyJyk7XG5cdFx0XHQvL2N1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5jaGlsZCgndXBkYXRlZCcpLnJlbW92ZSgpO1xuXHRcdH1cblxuXHRcdC8vc2F2ZSBjaGFuZ2VzXG5cdFx0dm0uZXZlbnQuJHNhdmUoKTtcblx0fVxuXG5cdHZtLnVwZGF0ZVVwZGF0ZWRQYXJhbSA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBjdXJyZW50VXNlciA9IHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS5jaGlsZCgnZXZlbnRzJyk7XG5cdFx0XG5cdFx0JGxvZy5pbmZvKCd1cGRhdGluZyB0aGUgcGFyYW0nKTtcblx0XHRjdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykub24oJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdCRsb2cuaW5mbyhzbmFwc2hvdC52YWwoKSk7XG5cdFx0fSk7XG5cdFx0Y3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLmNoaWxkKCd1cGRhdGVkJykucmVtb3ZlKCk7XG5cdH1cblxuXHR2bS5hZGRJbnZpdGF0aW9uVG9BdHRlbmRpbmcgPSBmdW5jdGlvbihyZXNwb25zZSkge1xuXHRcdHZhciBjdXJyZW50VXNlciA9IHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS5jaGlsZCgnZXZlbnRzJyk7XG5cdFx0dmFyIHRvdGFsUGVuZGluZ0ludml0YXRpb25zID0gMDtcblxuXHRcdC8vZ2V0IHRoZSBpbnZpdGF0aW9uIGRldGFpbHNcblx0XHRjdXJyZW50VXNlci5jaGlsZCgncGVuZGluZycpLm9uKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWxiZVxuXHRcdFx0dmFyIGludml0YXRpb25zID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHR2YXIgdGhpc0ludml0YXRpb24gPSBpbnZpdGF0aW9uc1skcm91dGVQYXJhbXMuaG9zdElkXVskcm91dGVQYXJhbXMuZXZlbnRJZF07XG5cdFx0XHRcblx0XHRcdC8vbG9nIHN0YXJ0aW5nIHZhbHVlc1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zKTtcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9uc1skcm91dGVQYXJhbXMuaG9zdElkXSk7XG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnNbJHJvdXRlUGFyYW1zLmhvc3RJZF1bJHJvdXRlUGFyYW1zLmV2ZW50SWRdKTtcblx0XHRcdFxuXHRcdFx0Ly9jaGVjayAjIG9mIGluaXZpYXRpb25zXG5cdFx0XHRmb3IoaW52aXRhdGlvbiBpbiBpbnZpdGF0aW9ucykge1xuXHRcdFx0XHR0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucysrO1xuXHRcdFx0fVxuXG5cdFx0XHQvL3JlcG9ydCAjIG9mIGludml0YXRpb25zXG5cdFx0XHQkbG9nLmluZm8oXCJ0b3RhbCBwZW5kaW5nIGludml0YXRpb25zOiBcIiArIHRvdGFsUGVuZGluZ0ludml0YXRpb25zKTtcblx0XHRcdFxuXHRcdFx0JGxvZy5pbmZvKHJlc3BvbnNlKTtcblx0XHRcdC8vYWRkIHRoZSBldmVudCB0byB0aGUgZ3Vlc3QncyBhdHRlbmRpbmcgbGlzdFxuXHRcdFx0aWYocmVzcG9uc2UpIGN1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5jaGlsZCgkcm91dGVQYXJhbXMuaG9zdElkKS5jaGlsZCgkcm91dGVQYXJhbXMuZXZlbnRJZCkuc2V0KHRoaXNJbnZpdGF0aW9uLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKGVycm9yKTtcblx0XHRcdH0pO1xuXG5cblxuXHRcdH0pO1xuXHR9XG5cblx0Ly9zdGFydCBydW5cblx0aW5pdCgpO1xufVxuXG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdMYW5kaW5nUGFnZUNvbnRyb2xsZXInLCBMYW5kaW5nUGFnZUNvbnRyb2xsZXIpO1xuXG5MYW5kaW5nUGFnZUNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnLCAnJGxvY2F0aW9uJywgJyRkb2N1bWVudCcsICckd2luZG93J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gTGFuZGluZ1BhZ2VDb250cm9sbGVyKCRzY29wZSwgJGxvZywgJGxvY2F0aW9uLCAkZG9jdW1lbnQsICR3aW5kb3cpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgYXV0aERhdGEgPSB7fTtcblx0dmFyIGN1cnJlbnRVc2VyRGF0YSA9IHt9O1xuXG5cdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHR2bS5zaG93UmVxdWlybm1lbnRzID0gZmFsc2U7XG5cdHZtLnZhbGlkTmV3TmFtZSA9IHsndmFsaWQnOmZhbHNlLCAnc3R5bGUnOntjb2xvcjonJ319O1xuXHR2bS52YWxpZE5ld0VtYWlsID0geyd2YWxpZCc6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOicnfX07XG5cdHZtLnNlY3VyZVBhc3N3b3JkID0geydzZWN1cmUnOmZhbHNlLCAnc3R5bGUnOntjb2xvcjonJ319O1xuXHR2bS51bmxvY2tDcmVhdGVVc2VyQnRuID0geyd1c2FibGUnOmZhbHNlLCAnY2xhc3MnOididG4gYnRuLXdhcm5pbmcnfTtcblx0dm0ubWVzc2FnZSA9ICd0ZXN0aW5nJztcblxuXHRcblx0dm0udmFsaWRVc2VyRW1haWwgPSB7J3ZhbGlkJzpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6Jyd9fTtcblx0dm0udmFsaWRVc2VyUGFzc3dvcmQgPSB7J3ZhbGlkJzpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6Jyd9fTtcblx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0biA9IHsndXNhYmxlJzpmYWxzZSwgJ2NsYXNzJzonYnRuIGJ0bi13YXJuaW5nJ307XG5cdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzID0ge1xuXHRcdDA6eydjb25zdHJhaW50JzonSXMgYXQgbGVhc3QgMTYgY2hhcmFjdGVycyBsb25nJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX0sXG5cdFx0MTp7J2NvbnN0cmFpbnQnOidJcyBubyBsb25nZXIgdGhhbiAxMDAgY2hhcmFjdGVycycsICdzdHlsZSc6e2NvbG9yOidyZWQnfSwgJ21ldCc6ZmFsc2V9LFxuXHRcdDI6eydjb25zdHJhaW50JzonQ29udGFpbnMgYXQgbGVhc3Qgb25lIHJlcXVpcmVkIHN5bWJvbCAoXFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqKScsICdzdHlsZSc6e2NvbG9yOidyZWQnfSwgJ21ldCc6ZmFsc2V9LFxuXHRcdDM6eydjb25zdHJhaW50JzonQ29udGFpbnMgYXQgbGVhc3Qgb25lIG51bWJlcicsICdzdHlsZSc6e2NvbG9yOidyZWQnfSwgJ21ldCc6ZmFsc2V9LFxuXHRcdDQ6eydjb25zdHJhaW50JzonQ29udGFpbnMgYXQgbGVhc3Qgb25lIGxvd2VyY2FzZSBsZXR0ZXInLCAnc3R5bGUnOntjb2xvcjoncmVkJ30sICdtZXQnOmZhbHNlfSxcblx0XHQ1OnsnY29uc3RyYWludCc6J0NvbnRhaW5zIGF0IGxlYXN0IG9uZSB1cHBlcmNhc2UgbGV0dGVyJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX0sXG5cdFx0Njp7J2NvbnN0cmFpbnQnOlwiRG9lc24ndCBoYXZlIGFueSBpbGxlZ2FsIGNoYXJhY3RlcnNcIiwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX1cblx0fTtcblxuXHQvL3ZhciB0aGVUZXN0Qm94ID0gYW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCkuZmluZCgnI3Rlc3RCb3gnKTtcblxuXHQvL3RoZVRlc3RCb3guY2hlY2tWYWxpZGl0eSgpO1xuXHQvL3NldEN1c3RvbVZhbGlkaXR5KCd5b3UgbmVlZCBzb21ldGhpbmcgZWxzZScpO1xuXG5cdC8vbG9jYWwgbWV0aG9kc1xuXHRmdW5jdGlvbiB1dGY4X3RvX2I2NChzdHIpIHtcblx0XHRyZXR1cm4gYnRvYShzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gYjY0X3RvX3V0Zjgoc3RyKSB7XG4gICAgXHRyZXR1cm4gYXRvYihzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKSB7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KHVuaXhUaW1lKSk7XG5cdH1cblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH1cblxuXHQvL2RlZmluZSBjb250cm9sbGVyIG1ldGhvZHNcblx0dm0uZGlzcGxheVBhc3NSZXFzID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodm0ubmV3TmFtZSAmJiB2bS5uZXdFbWFpbCkge1xuXHRcdFx0dm0uc2hvd1JlcXVpcm5tZW50cyA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZtLnNob3dSZXF1aXJubWVudHMgPSBmYWxzZTtcblx0XHR9XG5cdH1cblxuXHR2bS5jaGVja05ld05hbWUgPSBmdW5jdGlvbigpIHtcblx0XHRcblx0XHRpZih2bS5uZXdOYW1lKSB7XG5cdFx0XHRpZih2bS5uZXdOYW1lLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0dm0udmFsaWROZXdOYW1lLnZhbGlkID0gdHJ1ZTtcblx0XHRcdFx0dm0udmFsaWROZXdOYW1lLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0udmFsaWROZXdOYW1lLnZhbGlkID0gZmFsc2U7XG5cdFx0XHRcdHZtLnZhbGlkTmV3TmFtZS5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dm0ub3BlbkNyZWF0ZVVzZXJCdXR0b24oKTtcblx0fVxuXG5cdHZtLmNoZWNrTmV3RW1haWwgPSBmdW5jdGlvbiAoKSB7XG5cdFx0aWYodm0ubmV3RW1haWwpIHtcblx0XHRcdC8vY2hlY2sgdmFsaWRpdHlcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSsoPzpcXC5bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKSpAKD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1xcLikrW2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1wiLCBcIlwiKTtcblxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZtLm5ld0VtYWlsKSkge1xuXHRcdFx0XHR2bS52YWxpZE5ld0VtYWlsLnZhbGlkID0gdHJ1ZTtcblx0XHRcdFx0dm0udmFsaWROZXdFbWFpbC5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLnZhbGlkTmV3RW1haWwudmFsaWQgPSBmYWxzZTtcblx0XHRcdFx0dm0udmFsaWROZXdFbWFpbC5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdFx0XHR9XHRcdFx0XG5cdFx0fVxuXHRcdFxuXHRcdHZtLm9wZW5DcmVhdGVVc2VyQnV0dG9uKCk7XG5cdH1cblxuXHR2bS5jaGVja1VzZXJFbWFpbCA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHZtLnVzZXJFbWFpbCkge1xuXHRcdFx0Ly9jaGVjayB2YWxpZGl0eVxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XCIsIFwiXCIpO1xuXG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3Qodm0udXNlckVtYWlsKSkge1xuXHRcdFx0XHR2bS52YWxpZFVzZXJFbWFpbC52YWxpZCA9IHRydWU7XG5cdFx0XHRcdHZtLnZhbGlkVXNlckVtYWlsLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0udmFsaWRVc2VyRW1haWwudmFsaWQgPSBmYWxzZTtcblx0XHRcdFx0dm0udmFsaWRVc2VyRW1haWwuc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHZtLm9wZW5Vc2VyTG9naW5CdG4oKTtcblx0fVxuXG5cdHZtLmNoZWNrTmV3UGFzc3dvcmRzID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9mb3IgZWFjaCBwYXNzd29yZCBkZWZpbmUgdGhlIHBhdHRlcm4gdGhhdCB0aGUgcGFzc3dvcmQgbXVzdCBtYXRjaFxuXHRcdHZhciBjb25zdHJhaW50cyA9IHtcblx0IFx0XHQwOiBbJycsICcgeW91ciBwYXNzd29yZCBuZWVkcyB0byBiZSAxNiBjaGFyYWN0ZXJzIG9yIGxvbmdlciddLFxuXHQgXHRcdDE6IFsnJywgJyB5b3VyIHBhc3N3b3JkIG5lZWRzIHRvIGJlIGxlc3MgdGhhbiAxMDAgY2hhcmFjdGVycyddLFxuXHQgXHRcdDI6IFsnW1xcIVxcQFxcI1xcJFxcJVxcXlxcJlxcKl0nLCBcIiBubyByZXF1aXJlZCBzeW1ib2xzIGZvdW5kXCJdLFxuXHQgXHRcdDM6IFsnWzAtOV0nLCBcIiBubyBudW1iZXJzIGZvdW5kXCJdLFxuXHQgXHRcdDQ6IFsnW2Etel0nLCBcIiBubyBsb3dlcmNhc2UgbGV0dGVycyBmb3VuZFwiXSxcblx0IFx0XHQ1OiBbJ1tBLVpdJywgXCIgbm8gdXBwZXJjYXNlIGxldHRlcnMgZm91bmRcIl0sXG5cdCBcdFx0NjogWydbXkEtejAtOVxcIVxcQFxcI1xcJFxcJVxcXlxcJlxcKl0nLCBcIiBpbGxlZ2FsIGNoYXJhY3RlcnMgZm91bmRcIl0sXG4gXHRcdH07XG4gXHRcdFxuIFx0XHQvL2NoZWNrIGZvciBsZW5ndGhcbiBcdFx0aWYodm0ubmV3UGFzc3dvcmQpIHtcbiBcdFx0XHRpZih2bS5uZXdQYXNzd29yZC5sZW5ndGggPiAxNSkgeyBcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzBdLnN0eWxlID0ge2NvbG9yOidncmVlbid9OyBcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzBdLm1ldCA9IHRydWU7IFxuIFx0XHRcdH0gZWxzZSB7XG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1swXS5zdHlsZSA9IHtjb2xvcjoncmVkJ307IFxuIFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMF0ubWV0ID0gZmFsc2U7XG4gXHRcdFx0fVxuIFx0XHRcdGlmKHZtLm5ld1Bhc3N3b3JkLmxlbmd0aCA8PSAxMDApIHsgXG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1sxXS5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTsgXG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1sxXS5tZXQgPSB0cnVlO1xuIFx0XHRcdH0gZWxzZSB7XG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1sxXS5zdHlsZSA9IHtjb2xvcjoncmVkJ307IFxuIFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMV0ubWV0ID0gZmFsc2U7XG4gXHRcdFx0fVxuXG4gXHRcdFx0Ly9jaGVjayBjb25zdHJhaW50cyAyLTVcbiBcdFx0XHRmb3IoaSA9IDI7IGkgPCA2OyBpKyspIHtcblx0IFx0XHRcdC8vY2hlY2sgZm9yIHJlcXVpcmVkIHN5bWJvbHMsIHVwcGVyY2FzZSwgbG9zZXJjYXNlLCBhbmQgY2hhcmFjdGVyc1xuXHQgXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKGNvbnN0cmFpbnRzW2ldWzBdLCBcIlwiKTtcdFxuXG5cdCBcdFx0XHQvL3Rlc3QgZWFjaCBjb25zdHJhdGludFxuXHQgXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZtLm5ld1Bhc3N3b3JkKSkge1xuXHQgXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1tpXS5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0IFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbaV0ubWV0ID0gdHJ1ZTtcblx0IFx0XHRcdH0gZWxzZSB7XG5cdCBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzW2ldLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0IFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbaV0ubWV0ID0gZmFsc2U7XG5cdCBcdFx0XHR9XG5cdCBcdFx0fVxuXG5cdCBcdFx0Ly9jaGVjayBpbGxlZ2FsIGNoYXJhY3RlcnNcblx0IFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoY29uc3RyYWludHNbNl1bMF0sIFwiXCIpO1xuXG5cdCBcdFx0Ly9ydW4gdGhlIGNoZWNrXG5cdCBcdFx0aWYoIWNvbnN0cmFpbnQudGVzdCh2bS5uZXdQYXNzd29yZCkpIHtcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzZdLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzZdLm1ldCA9IGZhbHNlO1xuXHQgXHRcdH0gZWxzZSB7XG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1s2XS5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzZdLm1ldCA9IHRydWU7XG5cdCBcdFx0fVxuXG5cdCBcdFx0Ly9pZiBhbGwgY29uc3RyYWlucyBtZXQsIHRocm93IHZhbGlkIHBhc3MgZmxhZ1xuXHQgXHRcdGlmKCB2bS5wYXNzd29yZFJlcXVpcm5tZW50c1swXS5tZXQgJiZcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzFdLm1ldCAmJlxuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMl0ubWV0ICYmXG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1szXS5tZXQgJiZcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzRdLm1ldCAmJlxuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNV0ubWV0ICYmXG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1s2XS5tZXQpIHtcblx0IFx0XHRcdHZtLnNlY3VyZVBhc3N3b3JkLnNlY3VyZSA9IHRydWVcblx0IFx0XHR9IGVsc2Uge1xuXHQgXHRcdFx0dm0uc2VjdXJlUGFzc3dvcmQuc2VjdXJlID0gZmFsc2U7XG5cdCBcdFx0fVxuXG5cdCBcdFx0aWYodm0uc2VjdXJlUGFzc3dvcmQuc2VjdXJlKSB7XG5cdCBcdFx0XHR2bS5zZWN1cmVQYXNzd29yZC5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0IFx0XHR9IGVsc2Uge1xuXHQgXHRcdFx0dm0uc2VjdXJlUGFzc3dvcmQuc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHQgXHRcdH1cbiBcdFx0fVxuIFx0XHRcbiBcdFx0dm0ub3BlbkNyZWF0ZVVzZXJCdXR0b24oKTtcblx0fVxuXG5cdHZtLmNoZWNrVXNlclBhc3N3b3JkcyA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHZtLnVzZXJQYXNzd29yZCkge1xuXHRcdFx0aWYodm0udXNlclBhc3N3b3JkLmxlbmd0aCA+IDE1KSB7XG5cdFx0XHRcdHZtLnZhbGlkVXNlclBhc3N3b3JkLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHRcdFx0XHR2bS52YWxpZFVzZXJQYXNzd29yZC52YWxpZCA9IHRydWU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS52YWxpZFVzZXJQYXNzd29yZC5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdFx0XHRcdHZtLnZhbGlkVXNlclBhc3N3b3JkLnZhbGlkID0gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHR9XG5cdFx0XG5cdFx0dm0ub3BlblVzZXJMb2dpbkJ0bigpO1xuXHR9XG5cblx0dm0ub3BlbkNyZWF0ZVVzZXJCdXR0b24gPSBmdW5jdGlvbigpIHtcblx0XHRpZih2bS52YWxpZE5ld05hbWUudmFsaWQgJiYgdm0udmFsaWROZXdFbWFpbC52YWxpZCAmJiB2bS5zZWN1cmVQYXNzd29yZC5zZWN1cmUpIHtcblx0XHRcdHZtLnVubG9ja0NyZWF0ZVVzZXJCdG4uY2xhc3MgPSAnYnRuIGJ0bi1zdWNjZXNzJztcblx0XHRcdHZtLnVubG9ja0NyZWF0ZVVzZXJCdG4udXNhYmxlID0gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dm0udW5sb2NrQ3JlYXRlVXNlckJ0bi5jbGFzcyA9ICdidG4gYnRuLXdhcm5pbmcnO1xuXHRcdFx0dm0udW5sb2NrQ3JlYXRlVXNlckJ0bi51c2FibGUgPSBmYWxzZTtcdFxuXHRcdH1cblxuXHR9XG5cblx0dm0ub3BlblVzZXJMb2dpbkJ0biA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHZtLnZhbGlkVXNlckVtYWlsLnZhbGlkICYmIHZtLnZhbGlkVXNlclBhc3N3b3JkLnZhbGlkKSB7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLmNsYXNzID0gJ2J0biBidG4tc3VjY2Vzcyc7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLnVzYWJsZSA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4uY2xhc3MgPSAnYnRuIGJ0bi13YXJuaW5nJztcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlID0gZmFsc2U7XHRcblx0XHR9XG5cdH1cblxuXHR2bS51cGRhdGUgPSBmdW5jdGlvbigpIHtcblx0XHQvL3NldCB2YWx1ZXNcblx0XHR2bS5uZXdOYW1lID0gJGRvY3VtZW50LmZpbmQoJyNuZXdOYW1lJylbMF0udmFsdWU7XG5cdFx0dm0ubmV3RW1haWwgPSAkZG9jdW1lbnQuZmluZCgnI25ld0VtYWlsJylbMF0udmFsdWU7XG5cdFx0dm0udXNlckVtYWlsID0gJGRvY3VtZW50LmZpbmQoJyN1c2VyRW1haWwnKVswXS52YWx1ZTtcblx0XHRcblx0XHR2bS5jaGVja05ld05hbWUoKTtcblx0XHR2bS5jaGVja05ld0VtYWlsKCk7XG5cdFx0dm0uY2hlY2tVc2VyRW1haWwoKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHJlZGlyZWN0KHBhdGgsIHVzZXJEYXRhKSB7XG5cdFx0dmFyIGZ1bGxQYXRoID0gcGF0aCArICcvJyArIGN1cnJlbnRVc2VyRGF0YS51aWQgKyAnLycgKyBjdXJyZW50VXNlckRhdGEudG9rZW47XG5cdFx0Ly9yZWRpcmVjdFxuXHRcdCRsb2cuaW5mbygncmVkaXJlY3RpbmcgdG86ICcgKyBmdWxsUGF0aCk7XG5cdFx0JGxvY2F0aW9uLnBhdGgoZnVsbFBhdGgpO1xuXHRcdCRzY29wZS4kYXBwbHkoKTtcblx0fVxuXG5cdHZtLmNyZWF0ZU5ld1VzZXIgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9nLmluZm8oJ0NyZWF0aW5nIGEgbmV3IHVzZXIgYWNjb3VudCBub3chJyk7XG5cblx0XHRpZih2bS51bmxvY2tDcmVhdGVVc2VyQnRuLnVzYWJsZSkge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVcblx0XHRcdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXG5cdFx0XHRyZWYuY3JlYXRlVXNlcih7XG5cdFx0XHRcdGVtYWlsOnZtLm5ld0VtYWlsLFxuXHRcdFx0XHRwYXNzd29yZDp2bS5uZXdQYXNzd29yZFxuXHRcdFx0fSxmdW5jdGlvbihlcnJvciwgdXNlckRhdGEpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ0Vycm9yIGNyZWF0aW5nIHVzZXI6ICcgKyBlcnJvcik7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly9sb2cgcmVzdWx0c1xuXHRcdFx0XHRcdCRsb2cuaW5mbyh1c2VyRGF0YSk7XG5cblx0XHRcdFx0XHQvL3NhdmUgYWxsIHRoZSBkYXRhXG5cdFx0XHRcdFx0Y3VycmVudFVzZXJEYXRhID0gdXNlckRhdGE7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly9nZW5lcmF0ZSB0aGUgdXNlciByZWNvcmRcblx0XHRcdFx0XHR2YXIgdXNlcnNSZWYgPSByZWYuY2hpbGQoJ1VzZXJzLycgKyB1c2VyRGF0YS51aWQpO1xuXHRcdFx0XHRcdHZhciBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XG5cblx0XHRcdFx0XHQvL3dyaXRlIG5ldyB1c2VyIHRvIHRoZSBkYXRhYmFzZSB3aXRoIGJpbyBpbmZvXG5cdFx0XHRcdFx0dXNlcnNSZWYuc2V0KHsgXG5cdFx0XHRcdFx0XHQnYmlvJzoge1xuXHRcdFx0XHRcdFx0XHQnbmFtZSc6IHZtLm5ld05hbWUsXG5cdFx0XHRcdFx0XHRcdCdlbWFpbCc6IHZtLm5ld0VtYWlsXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0J2V2ZW50cyc6IHtcblx0XHRcdFx0XHRcdFx0J3BlbmRpbmcnOiB7XG5cdFx0XHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdCdob3N0aW5nJzoge1xuXHRcdFx0XHRcdFx0XHRcdCd1cGRhdGVkJzogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHQnYXR0ZW5kaW5nJzoge1xuXHRcdFx0XHRcdFx0XHRcdCd1cGRhdGVkJzogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHQnY29tcGxldGVkJzoge1xuXHRcdFx0XHRcdFx0XHRcdCd1cGRhdGVkJzogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0XHRcdGlmKGVycm9yKSB7XG5cdFx0XHRcdFx0XHRcdCRsb2cuaW5mbygnRGF0YSBjb3VsZCBub3QgYmUgc2F2ZWQ6ICcgKyBlcnJvcik7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQkbG9nLmluZm8oJ0RhdGEgc2F2ZWQgc3VjY2Vzc2Z1bGx5LicpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdC8vYWRkIHRoaXMgdXNlciB0byB0aGUgbGlzdCBvZiByZWdpc3RlcmVkIHVzZXJzXG5cdFx0XHRcdFx0cmVmLmNoaWxkKCdVaWRzJykuY2hpbGQodXRmOF90b19iNjQodm0ubmV3RW1haWwpKS5zZXQoY3VycmVudFVzZXJEYXRhLnVpZCwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oXCJEYXRhIGNvdWxkIG5vdCBiZSBzYXZlZC4gXCIgKyBlcnJvcik7XG5cdFx0XHRcdFx0XHRlbHNlICRsb2cuaW5mbyhcInVpZCBjcmVhdGVkIHN1Y2Vzc2Z1bGx5LlwiKTtcblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdC8vcmVkaXJlY3QgdG8gVXNlckluZm9ybWF0aW9uXG5cdFx0XHRcdFx0cmVkaXJlY3QoJy91c2VySW5mb3JtYXRpb24nLCBjdXJyZW50VXNlckRhdGEpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdH1cblx0fVxuXG5cdHZtLmxvZ2luUmVnaXN0ZXJlZFVzZXIgPSBmdW5jdGlvbigpIHtcblxuXHRcdGlmKHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlKSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZVxuXHRcdFx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cblx0XHRcdC8vYXV0aGVudGljYXRlIHRoZSB1c2VyXG5cdFx0XHRyZWYuYXV0aFdpdGhQYXNzd29yZCh7XG5cdFx0XHRcdGVtYWlsOiB2bS51c2VyRW1haWwsXG5cdFx0XHRcdHBhc3N3b3JkOiB2bS51c2VyUGFzc3dvcmRcblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yLCBhdXRoRGF0YSkge1xuXHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnRXJyb3IgTG9nZ2luZyBJbjogJyArIGVycm9yKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ0xvZ2dlZCBJbiBzdWNjZXNzZnVsbHk6ICcgKyBhdXRoRGF0YS51aWQpO1xuXHRcdFx0XHRcdCRsb2cuaW5mbyhhdXRoRGF0YSk7XG5cdFx0XHRcdFx0Ly9zYXZlIGFsbCB0aGUgZGF0YVxuXHRcdFx0XHRcdGN1cnJlbnRVc2VyRGF0YSA9IGF1dGhEYXRhO1xuXG5cdFx0XHRcdFx0Ly9sb2FkIHVzZXIgYmlvXG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly9sb2FkIHVzZXIgZXZlbnRzXG5cblx0XHRcdFx0XHQvL3JlZGlyZWN0XG5cdFx0XHRcdFx0cmVkaXJlY3QoJy91c2VySW5mb3JtYXRpb24nLCBjdXJyZW50VXNlckRhdGEpO1xuXHRcdFx0XHRcdCRzY29wZS4kYXBwbHkoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHR9XG5cblx0fVxuXG5cdHZtLmFsZXJ0TWUgPSBmdW5jdGlvbigpIHtcblx0XHRhbGVydCgndGhpcyBpcyB3b3JraW5nISBhbiBhbGVydCEnKTtcblx0fVxuXG5cdHZtLm9uUmVzaXplRnVuY3Rpb24gPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgaW5wdXRUZXh0ID0gYW5ndWxhci5lbGVtZW50KCcuaW5wdXRUZXh0Jyk7XG5cdFx0aWYoJHdpbmRvdy5vdXRlcldpZHRoID4gJHdpbmRvdy5vdXRlckhlaWdodCkge1xuXHRcdFx0aW5wdXRUZXh0LmNzcygnZm9udC1zaXplJywgJzJlbScpO1xuXHRcdFx0JGxvZy5pbmZvKCdtYWtpbmcgYmlnZ2VyJyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlucHV0VGV4dC5jc3MoJ2ZvbnQtc2l6ZScsICcxLjJlbScpO1xuXHRcdH1cblx0fVxuXG5cdC8vZXZlbnQgbGlzdGVuZXJzXG5cdGlmICgnYWRkRXZlbnRMaXN0ZW5lcicgaW4gJGRvY3VtZW50KSB7XG5cdCAgICAkZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkge1xuXHQgICAgXHQkbG9nLmluZm8oJ2FkZGluZyBGYXN0Q2xpY2snKTtcblx0ICAgICAgICBGYXN0Q2xpY2suYXR0YWNoKCRkb2N1bWVudC5ib2R5KTtcblx0ICAgIH0sIGZhbHNlKTtcblx0fVxuXG5cdGFuZ3VsYXIuZWxlbWVudCgkd2luZG93KS5iaW5kKCdyZXNpemUnLCBmdW5jdGlvbigpIHtcblx0XHR2bS5vblJlc2l6ZUZ1bmN0aW9uKCk7XG5cdFx0Ly8kc2NvcGUuJGFwcGx5KCk7XG5cdH0pO1xuXG5cdGFuZ3VsYXIuZWxlbWVudCgkZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXHRcdGlmKCR3aW5kb3cub3V0ZXJXaWR0aCA8IDYwMCkge1xuXHRcdFx0dm0ub25SZXNpemVGdW5jdGlvbigpO1xuXHRcdFx0Ly8kc2NvcGUuJGFwcGx5KCk7XG5cdFx0fVxuXHR9KVxuXG5cblx0IHZtLm1hc3RlciA9IHt9O1xuXG5cdCAgdm0udXBkYXRlID0gZnVuY3Rpb24odXNlcikge1xuXHQgICAgdm0ubWFzdGVyID0gYW5ndWxhci5jb3B5KHVzZXIpO1xuXHQgIH07XG5cblx0ICB2bS5yZXNldCA9IGZ1bmN0aW9uKGZvcm0pIHtcblx0ICAgIGlmIChmb3JtKSB7XG5cdCAgICAgIGZvcm0uJHNldFByaXN0aW5lKCk7XG5cdCAgICAgIGZvcm0uJHNldFVudG91Y2hlZCgpO1xuXHQgICAgfVxuXHQgICAgdm0udXNlciA9IGFuZ3VsYXIuY29weSh2bS5tYXN0ZXIpO1xuXHQgIH07XG5cblx0ICB2bS5yZXNldCgpO1xufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignTWFpbkNvbnRyb2xsZXInLCBNYWluQ29udHJvbGxlcik7XG5cbk1haW5Db250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJGxvY2F0aW9uJywgJyRkb2N1bWVudCcsICckd2luZG93J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gTWFpbkNvbnRyb2xsZXIoJGxvZywgJGxvY2F0aW9uLCAkZG9jdW1lbnQsICR3aW5kb3cpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTsgXG5cblx0ZnVuY3Rpb24gcmVzaXplQkdJbWFnZSgpIHtcblx0XHR2YXIgYm9keSA9IGFuZ3VsYXIuZWxlbWVudCgkZG9jdW1lbnQpO1xuXHRcdCRkb2N1bWVudC5jc3MoJ2hpZ2h0JywgJHdpbmRvdy5vdXRlckhlaWdodClcblx0fVxuXG5cdHZtLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xuXHRcdGFsZXJ0KCdsb2dnaW5nIHlvdSBvdXQhJyk7XG5cdFx0cmVmLnVuYXV0aCgpO1xuXHRcdCRsb2NhdGlvbi5wYXRoKCcvJyk7XG5cdH07XG5cblx0YW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cdFx0Ly9GYXN0Q2xpY2suYXR0YWNoKCRkb2N1bWVudC5ib2R5KTtcblx0XHRyZXNpemVCR0ltYWdlKCk7XG5cdH0pXG59XG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdOZXdVc2VyU2lnblVwQ29udHJvbGxlcicsIE5ld1VzZXJTaWduVXBDb250cm9sbGVyKTtcblxuTmV3VXNlclNpZ25VcENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnLCAndmFsaWRhdGlvbicsICdiYWNrZW5kU2VydmljZXMnLCAndHJhZmZpY1ZhbGV0JywgJ3VzZXJEYXRhJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gTmV3VXNlclNpZ25VcENvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCB2YWxpZGF0aW9uLCBiYWNrZW5kU2VydmljZXMsIHRyYWZmaWNWYWxldCwgdXNlckRhdGEpIHtcblx0dmFyIHZtID0gdGhpcztcblxuXHQvL2RlZmluZSB2bSBpbnB1dCB2YXJpYWJsZXNcblx0dm0uaW5wdXRzID0ge1xuXHRcdG5ld05hbWU6ICcnLFxuXHRcdG5ld0VtYWlsOiAnJyxcblx0XHRuZXdQYXNzd29yZDogJycsXG5cdFx0cmVxdWlyZWRGaWVsZHNEZWZpbmVkOiBmYWxzZVxuXHR9XG5cdHZtLmVycm9ycyA9IHtcblx0XHRuYW1lOiAnJyxcblx0XHRlbWFpbDogJycsXG5cdFx0cGFzc3dvcmQ6IGZhbHNlLFxuXHRcdHBhc3Nlc0FsbFRlc3RzOiBmYWxzZVxuXHR9XG5cdHZtLnBhc3NSZXFzID0ge1xuXHRcdDA6IHsgaWQ6JycsIHJlcTonSXMgYXQgbGVhc3QgMTYgY2hhcmFjdGVycyBsb25nJywgZnVsZmlsbGVkOmZhbHNlLCAnc3R5bGUnOntjb2xvcjoncmVkJ319LFxuXHRcdDE6IHsgaWQ6JycsIHJlcTonSXMgbm8gbG9uZ2VyIHRoYW4gMTAwIGNoYXJhY3RlcnMnLCBmdWxmaWxsZWQ6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOidyZWQnfSB9LFxuXHRcdDI6IHsgaWQ6JycsIHJlcTonQ29udGFpbnMgYXQgbGVhc3Qgb25lIGxvd2VyY2FzZSBsZXR0ZXInLCBmdWxmaWxsZWQ6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOidyZWQnfSB9LFxuXHRcdDM6IHsgaWQ6JycsIHJlcTonQ29udGFpbnMgYXQgbGVhc3Qgb25lIHVwcGVyY2FzZSBsZXR0ZXInLCBmdWxmaWxsZWQ6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOidyZWQnfSB9LFxuXHRcdDQ6IHsgaWQ6JycsIHJlcTonQ29udGFpbnMgYXQgbGVhc3Qgb25lIG51bWJlcicsIGZ1bGZpbGxlZDpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9IH0sXG5cdFx0NTogeyBpZDonJywgcmVxOidDb250YWlucyBhdCBsZWFzdCBvbmUgcmVxdWlyZWQgc3ltYm9sIChcXCFcXEBcXCNcXCRcXCVcXF5cXCZcXCopJywgZnVsZmlsbGVkOmZhbHNlLCAnc3R5bGUnOntjb2xvcjoncmVkJ30gfSxcblx0XHQ2OiB7IGlkOicnLCByZXE6XCJEb2Vzbid0IGhhdmUgYW55IGlsbGVnYWwgY2hhcmFjdGVyc1wiLCBmdWxmaWxsZWQ6dHJ1ZSwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9IH1cblx0fVxuXHR2bS5zaG93UmVxc0JveCA9IGZhbHNlO1xuXG5cdC8vZGVmaW5lIHJlcXVpcmVkIGZpZWxkIGNvbnN0cmFpbnRzXG5cdHZhciBzaWdudXBWYWxpZGF0aW9uID0gdmFsaWRhdGlvbjtcblxuXHQvL2RlZmluZSBjb250cm9sbGVyIG1ldGhvZHNcblx0ZnVuY3Rpb24gdmVyaWZ5UmVxdWlybm1lbnRzKCkge1xuXHRcdGlmKHZtLmVycm9ycy5uYW1lID09ICcnICYmIHZtLmVycm9ycy5lbWFpbCA9PSAnJyAmJiAhdm0uZXJyb3JzLnBhc3N3b3JkKSB2bS5lcnJvcnMucGFzc2VzQWxsVGVzdHMgPSB0cnVlO1xuXHRcdGVsc2Ugdm0uZXJyb3JzLnBhc3Nlc0FsbFRlc3RzID0gZmFsc2U7XG5cblx0XHRpZiggYW5ndWxhci5pc0RlZmluZWQodm0uaW5wdXRzLm5ld05hbWUpICYmIHZtLmlucHV0cy5uZXdOYW1lICE9PSAnJyAmJlxuXHRcdFx0YW5ndWxhci5pc0RlZmluZWQodm0uaW5wdXRzLm5ld0VtYWlsKSAmJiB2bS5pbnB1dHMubmV3RW1haWwgIT09ICcnICYmXG5cdFx0XHRhbmd1bGFyLmlzRGVmaW5lZCh2bS5pbnB1dHMubmV3UGFzc3dvcmQpICYmIHZtLmlucHV0cy5uZXdQYXNzd29yZCAhPT0gJycpIFxuXHRcdFx0XHR2bS5pbnB1dHMucmVxdWlyZWRGaWVsZHNEZWZpbmVkID0gdHJ1ZTtcblx0XHRlbHNlIHZtLmlucHV0cy5yZXF1aXJlZEZpZWxkc0RlZmluZWQgPSBmYWxzZTtcblx0fVxuXG5cdC8vZGVmaW5lIHZtIGFjY2Vzc2libGUgbWV0aG9kc1xuXHR2bS5jaGVja05ld05hbWUgPSBmdW5jdGlvbigpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlXG5cdFx0dmFyIGVycm9ycyA9IFtdO1xuXHRcdHZhciBoYXNOYW1lID0gc2lnbnVwVmFsaWRhdGlvbi5yZXF1aXJlZCh2bS5pbnB1dHMubmV3TmFtZSk7XG5cdFx0dmFyIGxvbmdFbm91Z2ggPSBzaWdudXBWYWxpZGF0aW9uLm1pbk5hbWVMZW5ndGgodm0uaW5wdXRzLm5ld05hbWUpXG5cdFx0XG5cdFx0Ly9sb2cgZXJyb3JzXG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoaGFzTmFtZSkpIGVycm9ycy5wdXNoKGhhc05hbWUpO1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGxvbmdFbm91Z2gpKSBlcnJvcnMucHVzaChsb25nRW5vdWdoKTtcblxuXHRcdC8vdXBkYXRlIHRoZSBlcnJvcnMgbW9kZWxcblx0XHRpZihlcnJvcnMubGVuZ3RoID4gMCkgdm0uZXJyb3JzLm5hbWUgPSBlcnJvcnMuam9pbignLCAnKTtcblx0XHRlbHNlIHZtLmVycm9ycy5uYW1lID0gJyc7XG5cblx0XHR2ZXJpZnlSZXF1aXJubWVudHMoKTtcblx0fVxuXG5cdHZtLmNoZWNrTmV3RW1haWwgPSBmdW5jdGlvbigpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlXG5cdFx0dmFyIGVycm9ycyA9IFtdO1xuXHRcdHZhciBoYXNFbWFpbCA9IHNpZ251cFZhbGlkYXRpb24ucmVxdWlyZWQodm0uaW5wdXRzLm5ld0VtYWlsKTtcblx0XHR2YXIgaXNBbkVtYWlsID0gc2lnbnVwVmFsaWRhdGlvbi5lbWFpbCh2bS5pbnB1dHMubmV3RW1haWwpO1xuXHRcdFxuXHRcdC8vbG9nIGVycm9yc1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGhhc0VtYWlsKSkgZXJyb3JzLnB1c2goaGFzRW1haWwpO1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGlzQW5FbWFpbCkpIGVycm9ycy5wdXNoKGlzQW5FbWFpbCk7XG5cblx0XHQvL3VwZGF0ZSB0aGUgZXJyb3JzIG1vZGVsXG5cdFx0aWYoZXJyb3JzLmxlbmd0aCA+IDApIHZtLmVycm9ycy5lbWFpbCA9IGVycm9ycy5qb2luKCcsICcpO1xuXHRcdGVsc2Ugdm0uZXJyb3JzLmVtYWlsID0gJyc7XG5cblx0XHR2ZXJpZnlSZXF1aXJubWVudHMoKTtcblx0fVxuXG5cdHZtLmNoZWNrTmV3UGFzc3dvcmQgPSBmdW5jdGlvbigpIHtcblx0XHQvL2ZsaXAgb24gcmVxcyBib3hcblx0XHR2bS5zaG93UmVxc0JveCA9IHRydWU7XG5cblx0XHQvL2xvY2FsIHZhcmlhYmxlXG5cdFx0dmFyIGVycm9ycyA9IFtdO1xuXHRcdHZhciBoYXNQYXNzd29yZCA9IHNpZ251cFZhbGlkYXRpb24ucmVxdWlyZWQodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKTtcblx0XHR2YXIgc3BlY2lmaWNSZXFzID0gW1xuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5taW5QYXNzTGVuZ3RoKHZtLmlucHV0cy5uZXdQYXNzd29yZCksXG5cdFx0XHRzaWdudXBWYWxpZGF0aW9uLm1heFBhc3NMZW5ndGgodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKSxcblx0XHRcdHNpZ251cFZhbGlkYXRpb24uYXRMZWFzdE9uZUxvd2VyY2FzZSh2bS5pbnB1dHMubmV3UGFzc3dvcmQpLFxuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5hdExlYXN0T25lVXBwZXJjYXNlKHZtLmlucHV0cy5uZXdQYXNzd29yZCksXG5cdFx0XHRzaWdudXBWYWxpZGF0aW9uLmF0TGVhc3RPbmVOdW1iZXIodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKSxcblx0XHRcdHNpZ251cFZhbGlkYXRpb24uYXRMZWFzdE9uZVN5bWJvbCh2bS5pbnB1dHMubmV3UGFzc3dvcmQpLFxuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5pbGxlZ2FsQ2hhcmFjdGVyKHZtLmlucHV0cy5uZXdQYXNzd29yZClcblx0XHRdO1xuXG5cdFx0Ly9sb2cgZXJyb3JzXG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoaGFzUGFzc3dvcmQpKSBlcnJvcnMucHVzaChoYXNQYXNzd29yZCk7XG5cblx0XHQvL3VwZGF0ZSB0aGUgZXJyb3JzIG1vZGVsXG5cdFx0aWYoZXJyb3JzLmxlbmd0aCA+IDApIHZtLmVycm9ycy5wYXNzd29yZCA9IGVycm9ycy5qb2luKCcsICcpO1xuXHRcdGVsc2Ugdm0uZXJyb3JzLmVtYWlsID0gJyc7XG5cblx0XHQvL3VwZGF0ZSByZXFzIG1vZGVsXG5cdFx0dmFyIGFueUVycm9ycyA9IGZhbHNlO1xuXHRcdGZvcihpPTA7IGk8NzsgaSsrKSB7XG5cdFx0XHRpZihzcGVjaWZpY1JlcXNbaV0pIHtcblx0XHRcdFx0dm0ucGFzc1JlcXNbaV0uZnVsZmlsbGVkID0gdHJ1ZTtcblx0XHRcdFx0dm0ucGFzc1JlcXNbaV0uc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS5wYXNzUmVxc1tpXS5mdWxmaWxsZWQgPSBmYWxzZTtcblx0XHRcdFx0dm0ucGFzc1JlcXNbaV0uc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHRcdFx0XHRhbnlFcnJvcnMgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHZtLmVycm9ycy5wYXNzd29yZCA9IGFueUVycm9ycztcblx0XHR2ZXJpZnlSZXF1aXJubWVudHMoKTtcblx0fVxuXG5cdHZtLmV4aXRQYXNzd29yZCA9IGZ1bmN0aW9uKCkge1xuXHRcdHZtLmNoZWNrTmV3UGFzc3dvcmQoKTtcblx0XHR2bS5zaG93UmVxc0JveCA9IGZhbHNlO1xuXHR9XG5cblx0dm0uY3JlYXRlTmV3VXNlciA9IGZ1bmN0aW9uICgpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIG5ld1VzZXJTaGVycGEgPSB0cmFmZmljVmFsZXQ7XG5cblx0XHQvL2NvbmZpcm0gYWxsIGZpZWxkcyBhcmUgdmFsaWRcblx0XHRpZih2bS5lcnJvcnMucGFzc2VzQWxsVGVzdHMgJiYgdm0uaW5wdXRzLnJlcXVpcmVkRmllbGRzRGVmaW5lZCkge1xuXHRcdFx0XG5cdFx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgY3JlYXRlTmV3VXNlciA9IGJhY2tlbmRTZXJ2aWNlcztcblx0XHRcdHZhciBuZXdVc2VyRGF0YSA9IHVzZXJEYXRhO1xuXHRcdFx0dmFyIHRoaXNVSUQ7XG5cblx0XHRcdC8vY3JlYXRlIHRoZSBuZXcgdXNlciBpbiB0aGUgZGF0YWJhc2Vcblx0XHRcdGNyZWF0ZU5ld1VzZXIuY3JlYXRlTmV3VXNlcih2bS5pbnB1dHMubmV3RW1haWwsIHZtLmlucHV0cy5uZXdQYXNzd29yZClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKGRiVXNlckRhdGEpIHtcblx0XHRcdFx0XG5cdFx0XHRcdC8vbWFpbnRhaW4gbG9jYWwgdmFsdWVzIHRvIHNwZWVkIHVwIHVzZXIgZXhwZXJpZW5jZVxuXHRcdFx0XHRuZXdVc2VyRGF0YS5sb2FkUHJpbWFyaWVzKHZtLmlucHV0cy5uZXdFbWFpbCwgdm0uaW5wdXRzLm5ld05hbWUsIGRiVXNlckRhdGEudWlkKTtcblxuXHRcdFx0XHQvL2NyZWF0ZSBhIHVzZXIgcHJvZmlsZSBpbiB0aGUgZGF0YWJhc2Vcblx0XHRcdFx0Y3JlYXRlTmV3VXNlci5hZGROZXdVc2VyVG9EYXRhYmFzZShkYlVzZXJEYXRhLnVpZCwgdm0uaW5wdXRzLm5ld05hbWUsIHZtLmlucHV0cy5uZXdFbWFpbClcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24obWVzc2FnZSkge1xuXG5cdFx0XHRcdFx0JGxvZy5pbmZvKG1lc3NhZ2UpO1xuXG5cdFx0XHRcdFx0Ly9hZGQgdGhpcyB1c2VyIHRvIHRoZSBsaXN0IG9mIHJlZ2lzdGVyZWQgdXNlcnNcblx0XHRcdFx0XHRjcmVhdGVOZXdVc2VyLmFkZE5ld1VzZXJUb1JlZ1VzZXJzTGlzdChkYlVzZXJEYXRhLnVpZCwgdm0uaW5wdXRzLm5ld0VtYWlsKVxuXHRcdFx0XHRcdC50aGVuKGZ1bmN0aW9uKG1lc3NhZ2UpIHtcblxuXHRcdFx0XHRcdFx0Ly9yZWRpcmVjdCB1c2luZyB0aGUgdWlkXG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdC8vcmVkaXJlY3QgdG8gdGhlIG5leHQgcGFnZSBcblx0XHRcdFx0XHRcdG5ld1VzZXJTaGVycGEucmVkaXJlY3RUbygnL3VzZXJJbmZvcm1hdGlvbicsIGRiVXNlckRhdGEudWlkKTtcblx0XHRcdFx0XHRcdCBcblx0XHRcdFx0XHRcdCRsb2cuaW5mbyhtZXNzYWdlKTsgXG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyAkbG9nLmluZm8obWVzc2FnZSk7IH0pXG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5jYXRjaChmdW5jdGlvbihtZXNzYWdlKSB7ICRsb2cuaW5mbyhtZXNzYWdlKTsgfSlcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyAkbG9nLmluZm8obWVzc2FnZSk7IH0pXG5cdFx0XHRcblx0XHR9XG5cblx0fVxuXHRcblx0Ly9ydW4gdGltZSBhY3Rpb25zXG5cbn1cblxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignUmVnVXNlckxvZ2luQ29udHJvbGxlcicsIFJlZ1VzZXJMb2dpbkNvbnRyb2xsZXIpO1xuXG5SZWdVc2VyTG9naW5Db250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJGRvY3VtZW50JywgJ2JhY2tlbmRTZXJ2aWNlcycsICd0cmFmZmljVmFsZXQnLCAndXNlckRhdGEnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBSZWdVc2VyTG9naW5Db250cm9sbGVyKCRsb2csICRkb2N1bWVudCwgYmFja2VuZFNlcnZpY2VzLCB0cmFmZmljVmFsZXQsIHVzZXJEYXRhKSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cblx0Ly9kZWZpbmUgdm0gaW5wdXQgdmFyaWFibGVzXG5cdHZtLmlucHV0cyA9IHtcblx0XHRlbWFpbDogJycsXG5cdFx0cGFzc3dvcmQ6ICcnLFxuXHRcdHJlcXVpcmVkRmllbGRzRGVmaW5lZDogZmFsc2Vcblx0fVxuXHR2bS5lcnJvcnMgPSB7XG5cdFx0bWVzc2FnZTogJycsXG5cdFx0cGFzc2VzQWxsVGVzdHM6IHRydWVcblx0fVxuXHR2bS51bmNsb2NrVXNlckxvZ2luQnRuID0ge1xuXHRcdCd1c2FibGUnOmZhbHNlLCBcblx0XHQnY2xhc3MnOididG4gYnRuLXdhcm5pbmcnLFxuXHRcdG1lc3NhZ2U6ICdOZWVkIEVtYWlsICYgUGFzcydcblx0fVxuXG5cdC8vbWV0aG9kc1xuXHRmdW5jdGlvbiBvcGVuVXNlckxvZ2luQnRuKCkge1xuXHRcdC8vY2hlY2sgdGhhdCB0aGVyZSBpcyBhbiBlbWFpbCBhbmQgdGhlcmUgaXMgYSBwYXNzd29yZFxuXHRcdGlmKFx0YW5ndWxhci5pc0RlZmluZWQodm0uaW5wdXRzLmVtYWlsKSAmJiB2bS5pbnB1dHMuZW1haWwgIT09ICcnICYmXG5cdFx0XHRhbmd1bGFyLmlzRGVmaW5lZCh2bS5pbnB1dHMucGFzc3dvcmQpICYmIHZtLmlucHV0cy5wYXNzd29yZCAhPT0gJycpIFxuXHRcdHtcblx0XHRcdHZtLmlucHV0cy5yZXF1aXJlZEZpZWxkc0RlZmluZWQgPSB0cnVlO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi5jbGFzcyA9ICdidG4gYnRuLXN1Y2Nlc3MnO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi5tZXNzYWdlID0gJ0xvZ2luJztcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlID0gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dm0uaW5wdXRzLnJlcXVpcmVkRmllbGRzRGVmaW5lZCA9IGZhbHNlO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi5jbGFzcyA9ICdidG4gYnRuLXdhcm5pbmcnO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi5tZXNzYWdlID0gJ05lZWQgRW1haWwgJiBQYXNzJztcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlID0gZmFsc2U7XG5cdFx0fVxuXG5cdH1cblxuXHQvL3ZpZXcgbW9kZWwgbWV0aG9kc1xuXHR2bS51cGRhdGUgPSBmdW5jdGlvbigpIHtcblx0XHQvL3NldCB2YWx1ZXNcblx0XHR2bS5pbnB1dHMuZW1haWwgPSAkZG9jdW1lbnQuZmluZCgnI3VzZXJFbWFpbCcpWzBdLnZhbHVlO1xuXHRcdHZtLmlucHV0cy5wYXNzd29yZCA9ICRkb2N1bWVudC5maW5kKCcjdXNlclBhc3N3b3JkJylbMF0udmFsdWU7XG5cdFx0XG5cdFx0b3BlblVzZXJMb2dpbkJ0bigpO1xuXHR9XG5cblx0dm0ubG9naW5SZWdpc3RlcmVkVXNlciA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgcmVnaXN0ZXJlZFVzZXJTaGVycGEgPSB0cmFmZmljVmFsZXQ7XG5cblx0XHQvL2NvbmZpcm0gYWxsIGZpZWxkcyBhcmUgdmFsaWRcblx0XHRpZih0cnVlKSB7XG5cdFx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgZGF0YWJhc2UgPSBiYWNrZW5kU2VydmljZXM7XG5cdFx0XHR2YXIgcmVnaXN0ZXJlZFVzZXJEYXRhID0gdXNlckRhdGE7XG5cblx0XHRcdC8vdmVyaWZ5IHVzZXJzIGNyZWRlbnRpYWxzXG5cdFx0XHRkYXRhYmFzZS5Mb2dpblJlZ2lzdGVyZWRVc2VyKHZtLmlucHV0cy5lbWFpbCwgdm0uaW5wdXRzLnBhc3N3b3JkKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24odXNlckNyZWRlbnRpYWxzKSB7XG5cdFx0XHRcdC8vaWYgbm8gdHJvdWJsZSBsb2dnaW5nIGluIHVwZGF0ZSBlcnJvciBvYmplY3Rcblx0XHRcdFx0dm0uZXJyb3JzLnBhc3Nlc0FsbFRlc3RzID0gdHJ1ZTtcblxuXHRcdFx0XHQvL2FkZCBwcmltYXJ5IGluZm9ybWF0aW9uIHRvIGxvY2FsIG1vZGVsXG5cdFx0XHRcdHJlZ2lzdGVyZWRVc2VyRGF0YS5zZXRQcmltYXJpZXNMb2NhbGx5KHZtLmlucHV0cy5lbWFpbCwgdm0uaW5wdXRzLm5hbWUsIHVzZXJDcmVkZW50aWFscy51aWQpO1xuXG5cdFx0XHR9KVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCRsb2cuaW5mbyhcInVpZCBpcyBcIiArIHJlZ2lzdGVyZWRVc2VyRGF0YS5nZXRVSURMb2NhbGx5KCkpO1xuXG5cdFx0XHRcdGRhdGFiYXNlLmdldFVzZXJCaW8ocmVnaXN0ZXJlZFVzZXJEYXRhLmdldFVJRExvY2FsbHkoKSlcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24odXNlckJpbykge1xuXHRcdFx0XHRcdC8vdXBkYXRlIHVzZXJEYXRhIG1vZGVsIHdpdGggdXNlckJpb1xuXHRcdFx0XHRcdHJlZ2lzdGVyZWRVc2VyRGF0YS51cGRhdGVCaW9Mb2NhbGx5KHVzZXJCaW8pO1xuXG5cdFx0XHRcdFx0Ly9sb2FkIHVzZXIgZXZlbnRzXG5cdFx0XHRcdFx0ZGF0YWJhc2UuZ2V0VXNlckV2ZW50cyhyZWdpc3RlcmVkVXNlckRhdGEuZ2V0VUlETG9jYWxseSgpKVxuXHRcdFx0XHRcdC50aGVuKGZ1bmN0aW9uKGFsbEV2ZW50c0ZvclRoaXNVc2VyKSB7XG5cdFx0XHRcdFx0XHQvL3VwZGF0ZSB1c2VyRGF0YSBtb2RlbCB3aXRoIHVzZXJFdmVudHNcblx0XHRcdFx0XHRcdHJlZ2lzdGVyZWRVc2VyRGF0YS51cGRhdGVBbGxVc2VyRXZlbnRzTG9jYWxseShhbGxFdmVudHNGb3JUaGlzVXNlcik7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyAkbG9nLmluZm8obWVzc2FnZSk7IH0pXG5cblx0XHRcdFx0fSlcblx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKG1lc3NhZ2UpIHsgJGxvZy5pbmZvKG1lc3NhZ2UpOyB9KVxuXG5cdFx0XHRcdC8vcmVkaXJlY3QgdG8gdGhlIG5leHQgcGFnZSBcblx0XHRcdFx0cmVnaXN0ZXJlZFVzZXJTaGVycGEucmVkaXJlY3RUbygnL3VzZXJJbmZvcm1hdGlvbicsIHJlZ2lzdGVyZWRVc2VyRGF0YS5nZXRVSURMb2NhbGx5KCkpO1xuXG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKG1lc3NhZ2UpIHsgXG5cdFx0XHRcdC8vaWYgdGhlcmUgd2FzIGFuIGVycm9yIGxvZ2dpbmcgaW4sIGxldCB0aGUgdXNlciBrbm93XG5cdFx0XHRcdHZtLmVycm9ycy5tZXNzYWdlID0gbWVzc2FnZTtcblx0XHRcdFx0dm0uZXJyb3JzLnBhc3Nlc0FsbFRlc3RzID0gZmFsc2U7XG5cdFx0XHR9KVxuXG5cdFx0XHQvL3VzZSB1aWQgdG8gY29sbGVjdCB1c2VyIGJpb1xuXHRcdFx0XG5cdFx0fVxuXG5cdH1cblxuXHR2bS5jbGlja2VkID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHVzZXJBdXRoZW50aWNhdGlvbiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdHVzZXJBdXRoZW50aWNhdGlvbi5sb2dVc2VyT3V0KCk7XG5cdH1cblxuXHQvL3J1biBjb21tYW5kc1xufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcigndG9wTWVudUNvbnRyb2xsZXInLCB0b3BNZW51Q29udHJvbGxlcik7XG5cbnRvcE1lbnVDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJywgJyRsb2NhdGlvbicsICckZG9jdW1lbnQnLCAnJHdpbmRvdyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHRvcE1lbnVDb250cm9sbGVyKCRzY29wZSwgJGxvZywgJGxvY2F0aW9uLCAkZG9jdW1lbnQsICR3aW5kb3cpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHQvL2xvY2FsIHZhcmlhYmxlc1xuXHR2bS5sb2dnZWRJbiA9IGZhbHNlXG5cblx0Ly9zdHlsZXMgdmFyaWFibGVzXG5cdFxuXHQvL2V2ZW50IGxpc3RlbmVyc1xuXHRpZiAoJ2FkZEV2ZW50TGlzdGVuZXInIGluICRkb2N1bWVudCkge1xuXHQgICAgJGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHtcblx0ICAgIFx0JGxvZy5pbmZvKCdhZGRpbmcgRmFzdENsaWNrJyk7XG5cdCAgICAgICAgRmFzdENsaWNrLmF0dGFjaCgkZG9jdW1lbnQuYm9keSk7XG5cdCAgICB9LCBmYWxzZSk7XG5cdH1cblxuXHRhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdykuYmluZCgncmVzaXplJywgZnVuY3Rpb24oKSB7XG5cdFx0dm0ub25SZXNpemVGdW5jdGlvbigpO1xuXHRcdCRzY29wZS4kYXBwbHkoKTtcblx0fSk7XG5cblx0YW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cdFx0aWYoJHdpbmRvdy5vdXRlcldpZHRoIDwgNjAwKSB7XG5cdFx0XHR2bS5vblJlc2l6ZUZ1bmN0aW9uKCk7XG5cdFx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cdFx0fVxuXHR9KVxuXHQvL2R5bmFtaWNhbGx5IHNldCBpbnB1dCB3aWR0aFxuXG5cblx0Ly8gQ3JlYXRlIGEgY2FsbGJhY2sgd2hpY2ggbG9ncyB0aGUgY3VycmVudCBhdXRoIHN0YXRlXG5cdGZ1bmN0aW9uIGluaXQoKSB7XG5cdFx0dm0ub25SZXNpemVGdW5jdGlvbigpO1xuXHRcdCRzY29wZS4kYXBwbHkoKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGF1dGhEYXRhQ2FsbGJhY2soYXV0aERhdGEpIHtcblx0ICBpZiAoYXV0aERhdGEpIHtcblx0ICAgICRsb2cuaW5mbyhcIlVzZXIgXCIgKyBhdXRoRGF0YS51aWQgKyBcIiBpcyBsb2dnZWQgaW4gd2l0aCBcIiArIGF1dGhEYXRhLnByb3ZpZGVyKTtcblx0ICAgIHZtLmxvZ2dlZEluID0gdHJ1ZTtcblx0ICB9IGVsc2Uge1xuXHQgICAgJGxvZy5pbmZvKFwiVXNlciBpcyBsb2dnZWQgb3V0XCIpO1xuXHQgICAgdm0ubG9nZ2VkSW4gPSBmYWxzZTtcblx0ICB9XG5cdH1cblxuXHRmdW5jdGlvbiByZWRpcmVjdChwYXRoLCB1c2VyRGF0YSkge1xuXHRcdHZhciBmdWxsUGF0aCA9IHBhdGggKyAnLycgKyB1c2VyRGF0YS51aWQgKyAnLycgKyB1c2VyRGF0YS50b2tlbjtcblx0XHQvL3JlZGlyZWN0XG5cdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyB0bzogJyArIGZ1bGxQYXRoKTtcblx0XHQkbG9jYXRpb24ucGF0aChmdWxsUGF0aCk7XG5cdFx0Ly8kc2NvcGUuJGFwcGx5KCk7XG5cdH1cblxuXHQvL3ZtIGFjY2Vzc2libGUgbWV0aG9kc1xuXHR2bS5sb2dvdXQgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9nLmluZm8oJ2xvZ2dpbmcgb3V0IScpO1xuXHRcdHZtLmxvZ2dlZEluID0gZmFsc2U7XG5cdFx0cmVmLnVuYXV0aCgpO1xuXHRcdHJlZGlyZWN0KCcvJywge3VpZDonJywgdG9rZW46Jyd9KTtcblx0fVxuXG5cdHZtLm5hdkJhckxvZ2luUmVnaXN0ZXJlZFVzZXIgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9nLmluZm8oJ2xhdW5jaGluZyBsb2dpbicpO1xuXHRcdGlmKHRydWUpIHtcblx0XHQvL2lmKHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlKSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZVxuXHRcdFx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cblx0XHRcdC8vYXV0aGVudGljYXRlIHRoZSB1c2VyXG5cdFx0XHRyZWYuYXV0aFdpdGhQYXNzd29yZCh7XG5cdFx0XHRcdGVtYWlsOiB2bS5uYXZiYXJVc2VyRW1haWwsXG5cdFx0XHRcdHBhc3N3b3JkOiB2bS5uYXZiYXJVc2VyUGFzc1xuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IsIGF1dGhEYXRhKSB7XG5cdFx0XHRcdGlmKGVycm9yKSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdFcnJvciBMb2dnaW5nIEluOiAnICsgZXJyb3IpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnTG9nZ2VkIEluIHN1Y2Nlc3NmdWxseTogJyArIGF1dGhEYXRhLnVpZCk7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKGF1dGhEYXRhKTtcblx0XHRcdFx0XHQvL3NhdmUgYWxsIHRoZSBkYXRhXG5cblx0XHRcdFx0XHQvL2xvYWQgdXNlciBiaW9cblx0XHRcdFx0XHQvL2xvYWQgdXNlciBldmVudHNcblxuXHRcdFx0XHRcdC8vcmVkaXJlY3Rcblx0XHRcdFx0XHRyZWRpcmVjdCgnL3VzZXJJbmZvcm1hdGlvbicsIGF1dGhEYXRhKTtcblx0XHRcdFx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cblx0XHRcdFx0XHQvL2NsaWNrIGNsb3NlZCB0aGUgbmF2YmFyXG5cdFx0XHRcdFx0YW5ndWxhci5lbGVtZW50KCcubmF2YmFyLXRvZ2dsZScpLmNsaWNrKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cblxuXHRcdH1cblxuXHR9XG5cblx0dm0ub25SZXNpemVGdW5jdGlvbiA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBuYXZiYXJJbnB1dHMgPSBhbmd1bGFyLmVsZW1lbnQoJy5uYXZiYXJJbnB1dHMnKTtcblx0XHRuYXZiYXJJbnB1dHMuY3NzKCd3aWR0aCcsICgkd2luZG93Lm91dGVyV2lkdGggLSAyNikgKyAncHgnKTtcblx0fVxuXG5cdC8vIFJlZ2lzdGVyIHRoZSBjYWxsYmFjayB0byBiZSBmaXJlZCBldmVyeSB0aW1lIGF1dGggc3RhdGUgY2hhbmdlc1xuXHRyZWYub25BdXRoKGF1dGhEYXRhQ2FsbGJhY2spO1xufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignVXNlckV2ZW50c0NvbnRyb2xsZXInLCBVc2VyRXZlbnRzQ29udHJvbGxlcik7XG5cblVzZXJFdmVudHNDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJHJvdXRlUGFyYW1zJywgJ3VzZXJEYXRhJywgJ3RyYWZmaWNWYWxldCddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIFVzZXJFdmVudHNDb250cm9sbGVyKCRsb2csICRyb3V0ZVBhcmFtcywgdXNlckRhdGEsIHRyYWZmaWNWYWxldCkge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHR2YXIgY3VycmVudFVzZXIgPSB1c2VyRGF0YTtcblxuXHQvL2xvY2FsIHZpZXcgdmFyaWFibGVzXG5cdHZtLnNob3dEZWNsaW5lID0gZmFsc2U7XHQvL3doYXQgaXMgdGhpcyBiZWluZyB1c2VkIGZvcj9cblx0dm0udXNlckJpbyA9IHt9XG5cdHZtLmV2ZW50cyA9IHt9O1xuXHR2bS5zZWN0aW9uQXZhaWxhYmxlID0ge1xuXHRcdHBlbmRpbmc6IGZhbHNlLFxuXHRcdGF0dGVuZGluZzogZmFsc2UsXG5cdFx0aG9zdGluZzogZmFsc2UsXG5cdFx0Y29tcGxldGVkOiBmYWxzZVxuXHR9O1xuXHR2bS5lcnJvcnMgPSB7fTtcblxuXHQvL2RlY2xhcmUgbG9jYWwgbWV0aG9kc1xuXHRmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fTtcblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH07XG5cblx0ZnVuY3Rpb24gbm9PZkhvc3RlRXZlbnRzKCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZVxuXHRcdHZhciBjb3VudGVyID0gMDtcblxuXHRcdGZvcihldmVudCBpbiB2bS5ldmVudHMuaG9zdGluZykgY291bnRlcisrO1xuXG5cdFx0cmV0dXJuIGNvdW50ZXI7XG5cdH1cblxuXHRmdW5jdGlvbiBnZW5lcmF0ZUV2ZW50SUQoKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYXRlID0gbmV3IERhdGUoKTtcblx0XHR2YXIgZXZlbnRJRCA9IChkYXRlVGltZVRvVW5peFRpbWUoZGF0ZSkgKiAxMCkgKyAobm9PZkhvc3RlRXZlbnRzKCkpO1xuXG5cdFx0cmV0dXJuIGV2ZW50SUQ7XG5cdH1cblxuXHRmdW5jdGlvbiBjaGVja0ZvckV2ZW50cygpIHtcblx0XHRcblx0XHQvL2xvb3AgdGhyb3VnaCBhbGwgdGhlIGV2ZW50IGNhdGVnb3JpZXNcblx0XHRPYmplY3Qua2V5cyh2bS5ldmVudHMpLmZvckVhY2goZnVuY3Rpb24oY2F0ZWdvcnkpIHtcblx0XHRcdFxuXHRcdFx0Ly9pbnNpZGUgZWFjaCBjYXRlZ29yeSBjb3VudCB0aGUgbnVtYmVyIG9mIGV2ZW50IG9iamVjdHMuLi5OT1QgdXBkYXRlZCBwbGFjZWhvbGRlciB0aG91Z2hcblx0XHRcdE9iamVjdC5rZXlzKHZtLmV2ZW50c1tjYXRlZ29yeV0pLmZvckVhY2goZnVuY3Rpb24oZXZlbnRJRCkge1xuXHRcdFx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVcblx0XHRcdFx0dmFyIGNvdW50ZXIgPSAwO1xuXHRcdFx0XHQvL2NvdW50IGV2ZW50cyB3aXRoIGlkJ3MgLyBOT1QgJ3VwZGF0ZWQnIHBsYWNlaG9sZGVyc1xuXHRcdFx0XHRpZihhbmd1bGFyLmlzT2JqZWN0KHZtLmV2ZW50c1tjYXRlZ29yeV1bZXZlbnRJRF0pKSBjb3VudGVyKys7XG5cdFx0XHRcdFxuXHRcdFx0XHQvL2lmIGF0IGxlYXN0IG9uZSBldmVudCBpZCAob2JqZWN0KSB3YXMgY291bnRlZCwgdGhlbiBzaG93IHRoZSBzZWN0aW9uXG5cdFx0XHRcdGlmKGNvdW50ZXIgPiAwKSB2bS5zZWN0aW9uQXZhaWxhYmxlW2NhdGVnb3J5XSA9IHRydWU7XG5cdFx0XHRcdGVsc2Ugdm0uc2VjdGlvbkF2YWlsYWJsZVtjYXRlZ29yeV0gPSBmYWxzZTtcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGluaXRpYWxpemUoKSB7XG5cdFx0Ly9tYWtlIHN1cmUgdGhlIHVpZCBpcyBzZXRcblx0XHRjdXJyZW50VXNlci5zZXRVSURMb2NhbGx5KCRyb3V0ZVBhcmFtcy51aWQpO1xuXG5cdFx0Ly9sb2FkIHRoZSB1c2VyIGJpb1xuXHRcdGN1cnJlbnRVc2VyLmxvYWRCaW8oJHJvdXRlUGFyYW1zLnVpZClcblx0XHQudGhlbihmdW5jdGlvbihyZXRyaWV2ZWRCaW8pIHtcblx0XHRcdHZtLnVzZXJCaW8gPSByZXRyaWV2ZWRCaW87XG5cdFx0fSlcblx0XHQuY2F0Y2goKVxuXG5cdFx0Ly9sb2FkIHVzZXIgZXZlbnRzIHByb2dyZXNzaXZsZXlcblx0XHQvL2Zpc3Qgd2hhdGV2ZXIgaXMgaW4gdGhlIG1vZGVsIGFscmVhZHlcblx0XHR2bS5ldmVudHMgPSBjdXJyZW50VXNlci5nZXRBbGxVc2VyRXZlbnRzTG9jYWxseSgpO1xuXG5cdFx0Ly90aGVuIGNhbGwgdG8gdGhlIGRiIGFuZCBnZXQgdGhlIG1vc3QgdXAgdG8gZGF0ZSBpbmZvXG5cdFx0Y3VycmVudFVzZXIuZ2V0UmVtb3RlRXZlbnRzRm9yTG9jYWwoKVxuXHRcdC50aGVuKGZ1bmN0aW9uKG9idGFpbmVkVXNlckV2ZW50cykge1xuXG5cdFx0XHQvL3VwZGF0ZSB0aGUgdmlldyBtb2RlbCB3aXRoIHRoZSB1cGRhdGVkIERCIHJlc3VsdHNcblx0XHRcdHZtLmV2ZW50cyA9IGN1cnJlbnRVc2VyLmdldEFsbFVzZXJFdmVudHNMb2NhbGx5KCk7XG5cdFx0fSlcblx0XHQudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdC8vbm93IHRoYXQgZXZlbnRzIGFyZSBsb2FkZWQsIHJlZmxlY3QgaXQgaW4gdGhlIHZpZXcgbW9kZWxcblx0XHRcdGNoZWNrRm9yRXZlbnRzKCk7XG5cdFx0fSlcblxuXHR9XG5cblx0Ly9kZWNsYXJlIHZpZXcgbWV0aG9kc1xuXHR2bS5jcmVhdGVOZXdFdmVudCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBldmVudElEID0gZ2VuZXJhdGVFdmVudElEKCk7XG5cdFx0dmFyIG5ld0V2ZW50U2hlcnBhID0gdHJhZmZpY1ZhbGV0O1xuXG5cdFx0Ly9hZGQgdGhlIGV2ZW50IHRvIHRoZSBtb2RhbCAobG9jYWxseSB0aGVuIG9uIHRoZSBkYilcblx0XHRjdXJyZW50VXNlci5jcmVhdGVOZXdFdmVudChldmVudElEKVxuXHRcdC50aGVuKGZ1bmN0aW9uKGFmZmlybWF0aXZlUmVzcG9uc2UpIHtcblx0XHRcdC8vcmVwb3J0IHRoZSBzdWNjZXNzXG5cdFx0XHQkbG9nLmluZm8oYWZmaXJtYXRpdmVSZXNwb25zZSk7XG5cdFx0fSlcblx0XHQudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdC8vaWYgdGhlcmUgd2FzIGFuIHVwZGF0ZWQgZmllbGQsIHJlbW92ZSBpdCBub3dcblx0XHRcdGN1cnJlbnRVc2VyLmNsZWFuREJFdmVudHNDYXRlZ29yeSgnaG9zdGluZycpO1xuXG5cdFx0fSlcblx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3JSZXNwb25zZSkge1xuXHRcdFx0Ly9yZXBvcnQgdGhlIGVycm9yXG5cdFx0XHQkbG9nLmluZm8oZXJyb3JSZXNwb25zZSk7XG5cdFx0fSlcblx0XHRcblxuXHRcdC8vcmVkaXJlY3QgdG8gdGhlIG5ldyBldmVudCBwYWdlXHRcdFxuXHRcdG5ld0V2ZW50U2hlcnBhLnJlZGlyZWN0VG8oJy9ldmVudCcsIGV2ZW50SUQsIGN1cnJlbnRVc2VyLmdldFVJRExvY2FsbHkoKSwgY3VycmVudFVzZXIuZ2V0VUlETG9jYWxseSgpKTtcblx0fVxuXG5cdC8vZXhlY3V0ZSBzY3JpcHRzXG5cdGluaXRpYWxpemUoKTtcblxufVxuXG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdVc2VySW5mb3JtYXRpb25Db250cm9sbGVyJywgVXNlckluZm9ybWF0aW9uQ29udHJvbGxlcik7XG5cblVzZXJJbmZvcm1hdGlvbkNvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICckZG9jdW1lbnQnLCAnJHJvdXRlUGFyYW1zJywndXNlckRhdGEnLCAndHJhZmZpY1ZhbGV0J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gVXNlckluZm9ybWF0aW9uQ29udHJvbGxlcigkbG9nLCAkZG9jdW1lbnQsICRyb3V0ZVBhcmFtcywgdXNlckRhdGEsIHRyYWZmaWNWYWxldCkge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHRcblx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0dmFyIGN1cnJlbnRVc2VyID0gdXNlckRhdGE7XG5cblx0Ly92aWV3IG1vZGVsIHZhcmlhYmxlc1xuXHR2bS51c2VyID0ge307XG5cdHZtLnRlbXBCaXJ0aGRheTtcblx0dm0udmlldyA9IHtcblx0XHRkYXRhVG9TYXZlOiBmYWxzZSxcblx0XHRpc0RhdGE6IGZhbHNlLFxuXHRcdGJ0bk1zc2c6ICdNb3ZlIE9uLi4uJyxcblx0XHRwcm9jZWVkQnRuOiAnYnRuIGJ0bi1wcmltYXJ5J1xuXHR9O1xuXG5cdC8vbG9jYWwgbWV0aG9kc1xuXHRmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fTtcblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH07XG5cblx0Ly92aWV3IGFjY2Vzc2libGUgbWV0aG9kc1xuXHR2bS5jaGVja1ZhbHVlcyA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vdGhyb3cgdGhlIGlzRGF0YSBmbGFnIGlmIHNvbWV0aGluZyBpcyB1cGRhdGVkXG5cdFx0dm0udmlldy5pc0RhdGEgPSB0cnVlO1xuXG5cdFx0aWYoICEoYW5ndWxhci5pc1VuZGVmaW5lZCh2bS51c2VyLmNvbXBhbnkpIHx8IHZtLnVzZXIuY29tcGFueSA9PT0gJycpIHx8IFxuXHRcdFx0IShhbmd1bGFyLmlzVW5kZWZpbmVkKHZtLnVzZXIudGl0bGUpIHx8IHZtLnVzZXIudGl0bGUgPT09ICcnKSB8fCBcblx0XHRcdCEoYW5ndWxhci5pc1VuZGVmaW5lZCh2bS51c2VyLmRvYikgfHwgdm0udXNlci5kb2IgPT09ICcnKSkgXG5cdFx0e1xuXHRcdFx0dm0udmlldy5kYXRhVG9TYXZlID0gdHJ1ZTtcblx0XHRcdHZtLnZpZXcucHJvY2VlZEJ0biA9ICdidG4gYnRuLXN1Y2Nlc3MnO1xuXHRcdFx0dm0udmlldy5idG5Nc3NnID0gJ1NhdmUgJiBDb250aW51ZSc7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZtLnZpZXcuZGF0YVRvU2F2ZSA9IGZhbHNlO1xuXHRcdFx0dm0udmlldy5wcm9jZWVkQnRuID0gJ2J0biBidG4tcHJpbWFyeSc7XG5cdFx0XHR2bS52aWV3LmJ0bk1zc2cgPSAnTW92ZSBPbi4uLic7XHRcblx0XHR9XG5cblx0fVxuXG5cdHZtLnVwZGF0ZURPQiA9IGZ1bmN0aW9uKCkge1xuXHRcdHZtLnVzZXIuZG9iID0gZGF0ZVRpbWVUb1VuaXhUaW1lKHZtLnRlbXBCaXJ0aGRheSk7XG5cdFx0dm0uY2hlY2tWYWx1ZXMoKTtcblx0fVxuXG5cdHZtLnNhdmVBbmRNb3ZlT24gPSBmdW5jdGlvbigpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciB1c2VySW5mb1NoZXJwYSA9IHRyYWZmaWNWYWxldDtcblx0XHR2YXIgY3VycmVudFVpZCA9IGN1cnJlbnRVc2VyLmdldFVJRExvY2FsbHkoKTtcblxuXHRcdC8vY29udmVydCBET0IgdG8gdW5peFRpbWUgYW5kIHNhdmVcblx0XHRpZih2bS50ZW1wQmlydGhkYXkgIT09IDApIHZtLnVwZGF0ZURPQigpO1xuXHRcdFxuXHRcdC8vaWYgdGhlcmUgaXNuJ3QgY3VycmVudGx5IGEgZG9iLCBncmFiIGZyb20gdGhlIHJvdXRlIHBhcmFtc1xuXHRcdGlmKGN1cnJlbnRVaWQgPT0gJycgfHwgYW5ndWxhci5pc1VuZGVmaW5lZChjdXJyZW50VWlkKSkge1xuXHRcdFx0Y3VycmVudFVzZXIuc2V0VUlETG9jYWxseSgkcm91dGVQYXJhbXMudWlkKTtcblx0XHR9XG5cblx0XHQvL2lmIHRoZXJlIGlzIG5ldyBkYXRhLCBzYXZlIGl0XG5cdFx0aWYodm0udmlldy5pc0RhdGEpIHtcblx0XHRcdCRsb2cuaW5mbygnc2F2aW5nIHRoZSBuZXcgZGF0YScpO1xuXHRcdFx0Y3VycmVudFVzZXIudXBkYXRlQmlvTG9jYWxseSh2bS51c2VyKTtcblx0XHR9XG5cdFx0XG5cdFx0Ly9tb3ZlIG9uXG5cdFx0dXNlckluZm9TaGVycGEucmVkaXJlY3RUbygnL3VzZXJFdmVudHMnLCB2bS51c2VyLnVpZClcblx0fVxuXG5cdGZ1bmN0aW9uIGluaXRpYWxpemUoKSB7XG5cdFx0Ly9sb2FkIEZhc3RDbGlja1xuXHRcdC8vRmFzdENsaWNrLmF0dGFjaCgkZG9jdW1lbnQuYm9keSk7XG5cdFx0XG5cdFx0Ly9sb2FkIHVzZXJEYXRhIGxvY2FsbHkgb3IgZnJvbSBkYlxuXHRcdGN1cnJlbnRVc2VyLmxvYWRCaW8oJHJvdXRlUGFyYW1zLnVpZClcblx0XHQudGhlbihmdW5jdGlvbihvYnRhaW5lZFVzZXJEYXRhKSB7XG5cdFx0XHQvL2Fzc2lnbiB1c2VyIHZhbHVlc1xuXHRcdFx0dm0udXNlciA9IG9idGFpbmVkVXNlckRhdGE7XG5cblx0XHRcdC8vYnVpbGQgdGVtcEJpcnRoZGF5XG5cdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChvYnRhaW5lZFVzZXJEYXRhLmRvYikgJiYgb2J0YWluZWRVc2VyRGF0YS5kb2IgIT09ICcnKSB7XG5cdFx0XHRcdHZtLnRlbXBCaXJ0aGRheSA9IHVuaXhUaW1lVG9EYXRlVGltZShvYnRhaW5lZFVzZXJEYXRhLmRvYilcblx0XHRcdH1cblxuXHRcdH0pO1xuXHRcblx0fVxuXG5cdC8vcnVuIHByb2Nlc3Nlc1xuXHRpbml0aWFsaXplKCk7IC8vd2l0aCBpbnRlcm5ldCB1c2UgdGhlIGV2ZW50IGxpc3RlbmVyIGluc3RlYWRcbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmZhY3RvcnkoJ2F1dGhTZXJ2aWNlJywgYXV0aFNlcnZpY2UpO1xuXG5hdXRoU2VydmljZS4kaW5qZWN0ID0gWyckbG9nJywgJyRxJywgJyRsb2NhdGlvbiddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGF1dGhTZXJ2aWNlKCRsb2csICRxLCAkbG9jYXRpb24pIHtcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHR2YXIgYWxsQXV0aFNlcnZpY2VzID0ge1xuXHRcdGlzTG9nZ2VkSW46IGlzTG9nZ2VkSW5cblx0fTtcblxuXHRmdW5jdGlvbiBhdXRoRGF0YUNhbGxiYWNrKGF1dGhEYXRhKSB7XG5cdCAgXG5cdCAgaWYgKGF1dGhEYXRhKSB7XG5cdCAgICAkbG9nLmluZm8oXCJVc2VyIFwiICsgYXV0aERhdGEudWlkICsgXCIgaXMgbG9nZ2VkIGluIHdpdGggXCIgKyBhdXRoRGF0YS5wcm92aWRlcik7XG5cdCAgfSBlbHNlIHtcblx0ICAgICRsb2cuaW5mbyhcIlVzZXIgaXMgbG9nZ2VkIG91dC4uLmR1bXBpbmcgdGhlbSBiYWNrIHRvIGxhbmRpbmcgcGFnZVwiKTtcblx0ICAgIC8vZHVtcCB0aGUgdXNlciBiYWNrIG91dFxuXHQgICAgJGxvY2F0aW9uLnBhdGgoJy8nKTtcblx0ICB9XG5cdH1cblxuXHRmdW5jdGlvbiBpc0xvZ2dlZEluKCkge1xuXHRcdC8vY2hlY2sgdGhlIHVzZXIgYXV0aGVudGljYWlvbiBzdGF0ZVxuXG5cdFx0cmVmLm9uQXV0aChhdXRoRGF0YUNhbGxiYWNrKTtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXHRcblx0cmV0dXJuIGFsbEF1dGhTZXJ2aWNlcztcblxufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuZmFjdG9yeSgnYmFja2VuZFNlcnZpY2VzJywgYmFja2VuZFNlcnZpY2VzKTtcblxuYmFja2VuZFNlcnZpY2VzLiRpbmplY3QgPSBbJyRsb2cnLCAnJHEnLCAnJHdpbmRvdyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGJhY2tlbmRTZXJ2aWNlcygkbG9nLCAkcSwgJHdpbmRvdykge1xuXHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdHZhciBmYlVSTCA9ICdodHRwczovL21lZXR1cHBsYW5uZXIuZmlyZWJhc2Vpby5jb20vJztcblx0dmFyIGFsbEJhY2tlbmRTZXJ2aWNlcyA9IHtcblx0XHR1dGY4X3RvX2I2NDogdXRmOF90b19iNjQsIFx0XHRcdFx0XHRcdC8vbG9jYWwgZnVuY3Rpb25zIHRvIGNvbnZlcnQgZGF0ZXNcblx0XHRiNjRfdG9fdXRmODogYjY0X3RvX3V0ZjgsXG5cdFx0dW5peFRpbWVUb0RhdGVUaW1lOiB1bml4VGltZVRvRGF0ZVRpbWUsXG5cdFx0ZGF0ZVRpbWVUb1VuaXhUaW1lOiBkYXRlVGltZVRvVW5peFRpbWUsXG5cblx0XHRMb2dpblJlZ2lzdGVyZWRVc2VyOiBMb2dpblJlZ2lzdGVyZWRVc2VyLFx0XHQvL2F1dGhlbnRpY2Fpb25cblx0XHRjaGVja0xvZ2luU3RhdHVzOiBjaGVja0xvZ2luU3RhdHVzLFxuXHRcdGxvZ1VzZXJPdXQ6IGxvZ1VzZXJPdXQsXG5cblx0XHRkb3dubG9hZFVzZXJEYXRhOiBkb3dubG9hZFVzZXJEYXRhLFx0XHRcdFx0Ly9nZXR0ZXIgbWV0aG9kc1xuXHRcdGdldFVzZXJCaW86IGdldFVzZXJCaW8sXG5cdFx0Z2V0VXNlckV2ZW50czogZ2V0VXNlckV2ZW50cyxcblxuXHRcdGNyZWF0ZU5ld1VzZXI6IGNyZWF0ZU5ld1VzZXIsXHRcdFx0XHRcdC8vc2V0dGVyIE1ldGhvZHNcblx0XHRhZGROZXdVc2VyVG9EYXRhYmFzZTogYWRkTmV3VXNlclRvRGF0YWJhc2UsXG5cdFx0YWRkTmV3VXNlclRvUmVnVXNlcnNMaXN0OiBhZGROZXdVc2VyVG9SZWdVc2Vyc0xpc3QsXG5cdFx0dXBsb2FkVXNlckRhdGE6IHVwbG9hZFVzZXJEYXRhLFxuXHRcdHVwbG9hZFVzZXJCaW86IHVwbG9hZFVzZXJCaW8sXG5cdFx0Y3JlYXRlSG9zdGVkRXZlbnQ6IGNyZWF0ZUhvc3RlZEV2ZW50LFxuXHRcdGRlbGV0ZVVwZGF0ZUZpZWxkOiBkZWxldGVVcGRhdGVGaWVsZCxcblxuXHRcdHRoZXJlV2FzQW5VcGRhdGVGaWVsZDogdGhlcmVXYXNBblVwZGF0ZUZpZWxkXHQvL21vZGVsIG1haW50YWluYW5jZVxuXHR9O1xuXG5cdGZ1bmN0aW9uIHV0ZjhfdG9fYjY0KHN0cikge1xuXHRcdHJldHVybiBidG9hKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiBiNjRfdG9fdXRmOChzdHIpIHtcbiAgICBcdHJldHVybiBhdG9iKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNyZWF0ZU5ld1VzZXIoZW1haWwsIHBhc3N3b3JkKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBmaXJlQmFzZUFjY291bnRzID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHRcblx0XHQvL3JldHVybiBhIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcblx0XHRcdGZpcmVCYXNlQWNjb3VudHMuY3JlYXRlVXNlcih7XG5cdFx0XHRcdFxuXHRcdFx0XHRlbWFpbDogZW1haWwsXG5cdFx0XHRcdHBhc3N3b3JkOiBwYXNzd29yZFxuXHRcdFx0XG5cdFx0XHR9LGZ1bmN0aW9uKGVycm9yLCB1c2VyRGF0YSkge1xuXHRcdFx0XHRcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdCgnRXJyb3IgY3JlYXRpbmcgdXNlcjogJyArIGVycm9yKTtcblxuXHRcdFx0XHRlbHNlIHJlc29sdmUodXNlckRhdGEpO1xuXHRcdFx0fSk7XG5cblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGFkZE5ld1VzZXJUb0RhdGFiYXNlKHVpZCwgbmFtZSwgZW1haWwpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIGFwcFVzZXJzID0gYXBwLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCk7XG5cdFx0dmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcblxuXHRcdC8vcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFxuXHRcdFx0YXBwVXNlcnMuc2V0KHsgXG5cdFx0XHRcdCdiaW8nOiB7XG5cdFx0XHRcdFx0J3VpZCc6IHVpZCxcblx0XHRcdFx0XHQnbmFtZSc6IG5hbWUsXG5cdFx0XHRcdFx0J2VtYWlsJzogZW1haWxcblx0XHRcdFx0fSxcblx0XHRcdFx0J2V2ZW50cyc6IHtcblx0XHRcdFx0XHQncGVuZGluZyc6IHtcblx0XHRcdFx0XHRcdCd1cGRhdGVkJzogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0J2hvc3RpbmcnOiB7XG5cdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdCdhdHRlbmRpbmcnOiB7XG5cdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdCdjb21wbGV0ZWQnOiB7XG5cdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoJ0RhdGEgY291bGQgbm90IGJlIHNhdmVkOiAnICsgZXJyb3IpO1xuXHRcdFx0XHRcblx0XHRcdFx0ZWxzZSByZXNvbHZlKCdEYXRhIHNhdmVkIHN1Y2Nlc3NmdWxseS4nKTtcblxuXHRcdFx0fSk7XG5cblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gYWRkTmV3VXNlclRvUmVnVXNlcnNMaXN0KHVpZCwgZW1haWwpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIGI2NEVtYWlsID0gdXRmOF90b19iNjQoZW1haWwpO1xuXHRcdHZhciBSZWdpc3RlcmVkVXNlcnNMaXN0ID0gYXBwLmNoaWxkKCdVaWRzJykuY2hpbGQoYjY0RW1haWwpO1xuXG5cdFx0Ly9yZXR1cm4gYSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XG5cdFx0XHRSZWdpc3RlcmVkVXNlcnNMaXN0LnNldCh1aWQsIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoXCJEYXRhIGNvdWxkIG5vdCBiZSBzYXZlZC4gXCIgKyBlcnJvcik7XG5cdFx0XHRcdGVsc2UgcmVzb2x2ZShcInVpZCBjcmVhdGVkIHN1Y2Vzc2Z1bGx5LlwiKTtcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIExvZ2luUmVnaXN0ZXJlZFVzZXIoZW1haWwsIHBhc3N3b3JkKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdFxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9hdXRoZW50aWNhdGUgdGhlIHVzZXJcblx0XHRcdGFwcC5hdXRoV2l0aFBhc3N3b3JkKHtcblxuXHRcdFx0XHRlbWFpbDogZW1haWwsXG5cdFx0XHRcdHBhc3N3b3JkOiBwYXNzd29yZFxuXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvciwgYXV0aERhdGEpIHtcblx0XHRcdFx0XG5cdFx0XHRcdGlmKGVycm9yKSB7XG5cdFx0XHRcdFx0cmVqZWN0KCdFcnJvciBMb2dnaW5nIEluOiAnICsgZXJyb3IpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnTG9nZ2VkIEluIHN1Y2Nlc3NmdWxseTogJyArIGF1dGhEYXRhLnVpZCk7XG5cdFx0XHRcdFx0cmVzb2x2ZShhdXRoRGF0YSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0fSk7XG5cblx0XHR9KTtcblx0XHRcblx0fVxuXG5cdGZ1bmN0aW9uIGNoZWNrTG9naW5TdGF0dXMoKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XG5cdFx0XHRhcHAub25BdXRoKGZ1bmN0aW9uKGF1dGhEYXRhKSB7XG5cdFx0XHRcdGlmIChhdXRoRGF0YSkge1xuXHRcdFx0XHQgICAgJGxvZy5pbmZvKFwiVXNlciBcIiArIGF1dGhEYXRhLnVpZCArIFwiIGlzIGxvZ2dlZCBpbiB3aXRoIFwiICsgYXV0aERhdGEucHJvdmlkZXIpO1xuXHRcdFx0XHQgICAgcmVzb2x2ZSh0cnVlKTtcblx0XHRcdFx0ICB9IGVsc2Uge1xuXHRcdFx0XHQgICAgJGxvZy5pbmZvKFwiVXNlciBpcyBsb2dnZWQgb3V0XCIpO1xuXHRcdFx0XHQgICAgcmVzb2x2ZShmYWxzZSk7XG5cdFx0XHRcdCAgfVxuXHRcdFx0fSk7XG5cblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGxvZ1VzZXJPdXQoKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXG5cdFx0JGxvZy5pbmZvKCdsb2dnaW5nIHVzZXIgb3V0Jyk7XG5cdFx0YXBwLnVuYXV0aCgpO1xuXHR9XG5cblx0ZnVuY3Rpb24gdXBsb2FkVXNlckRhdGEoYWxsVXNlckRhdGEpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIHVpZCA9IGFsbFVzZXJEYXRhLnVpZDtcblx0XHR2YXIgcmVtb3RlVXNlciA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpO1xuXG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL3RoZSBhY3R1YWwgY2FsbFxuXHRcdFx0cmVtb3RlVXNlci51cGRhdGUoYWxsVXNlckRhdGEsIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoJ1RoZXJlIHdhcyBhIHByb2JsZW0gdXBkYXRpbmcgdGhhdCByZWNvcmQ6ICcgKyBlcnJvcik7XG5cdFx0XHRcdGVsc2UgcmVzb2x2ZSgnYWxsIHVzZXIgZGF0YSB1cGxvYWRlZCBzdWNjZXNzZnVsbHknKTtcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cdFx0XG5cdH1cblxuXHRmdW5jdGlvbiB1cGxvYWRVc2VyQmlvKGN1cnJlbnRVc2VyQmlvKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciB1aWQgPSAoY3VycmVudFVzZXJCaW8udWlkKS50b1N0cmluZygpO1xuXHRcdHZhciByZW1vdGVVc2VyQmlvID0gYXBwLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2JpbycpO1xuXG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHRcdC8vY2FsbCB0byB0aGUgZGJcblx0XHRcdHJlbW90ZVVzZXJCaW8udXBkYXRlKGN1cnJlbnRVc2VyQmlvLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KCdUaGVyZSB3YXMgYSBwcm9ibGVtIHVwZGF0aW5nIHRoYXQgcmVjb3JkOiAnICsgZXJyb3IpO1xuXHRcdFx0XHRlbHNlIHJlc29sdmUoJ2FsbCB1c2VyIGJpbyBkYXRhIHVwbG9hZGVkIHN1Y2Nlc3NmdWxseScpO1xuXHRcdFx0fSlcblxuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gZG93bmxvYWRVc2VyRGF0YSgpIHtcblxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0VXNlckJpbyh1aWQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIHVzZXJCaW8gPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnYmlvJyk7XG5cblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vdGhlIGFjdHVhbCBjYWxsXG5cdFx0XHR1c2VyQmlvLm9uY2UoJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdFx0Ly93aGVuIHRoZSBjYWxsIGlzIHN1Y2Nlc3NmdWwgcmV0dXJuIHRoZSBkYXRhXG5cdFx0XHRcdHJlc29sdmUoc25hcHNob3QudmFsKCkpO1xuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0XHR9IFxuXHRcdFx0fSk7XG5cblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNyZWF0ZUhvc3RlZEV2ZW50KHVpZCwgbmV3RXZlbnQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIGV2ZW50SUQgPSBuZXdFdmVudC5pZDtcblx0XHR2YXIgbmV3SG9zdGVkRXZlbnQgPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ2hvc3RpbmcnKS5jaGlsZChldmVudElEKTtcblxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XG5cdFx0XHQvL2NhbGwgdG8gZmlyZWJhc2Vcblx0XHRcdG5ld0hvc3RlZEV2ZW50LnNldChuZXdFdmVudCwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdCgnVGhlcmUgd2FzIGFuIGVycm9yOiAnICsgZXJyb3IpO1xuXHRcdFx0XHRlbHNlIHJlc29sdmUoJ05ldyBldmVudCBzYXZlZCB0byBEQiBzdWNjZXNzZnVsbHknKTtcblx0XHRcdH0pXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGdldFVzZXJFdmVudHModWlkKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciB1c2VyRXZlbnRzID0gYXBwLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpO1xuXHRcdFxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly90aGUgYWN0dWFsIGNhbGxcblx0XHRcdHVzZXJFdmVudHMub25jZSgndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0XHR2YXIgdXNlclByb2ZpbGUgPSBzbmFwc2hvdC52YWwoKTtcblxuXHRcdFx0XHQvL3doZW4gdGhlIGNhbGwgaXMgc3VjY2Vzc2Z1bCByZXR1cm4gdGhlIGRhdGFcblx0XHRcdFx0dmFyIGV2ZW50c1BhY2thZ2UgPSB7XG5cdFx0XHRcdFx0aG9zdGluZzogdXNlclByb2ZpbGUuaG9zdGluZyxcblx0XHRcdFx0XHRhdHRlbmRpbmc6IHVzZXJQcm9maWxlLmF0dGVuZGluZyxcblx0XHRcdFx0XHRwZW5kaW5nOiB1c2VyUHJvZmlsZS5wZW5kaW5nLFxuXHRcdFx0XHRcdGNvbXBsZXRlZDogdXNlclByb2ZpbGUuY29tcGxldGVkXG5cdFx0XHRcdH07XG5cblx0XHRcdFx0cmVzb2x2ZShldmVudHNQYWNrYWdlKTtcblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSB7XG5cdFx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHRcdFx0fSBcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBkZWxldGVVcGRhdGVGaWVsZChjYXRlZ29yeSwgdWlkKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciBjYXRSZW1vdmluZ0Zyb20gPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoY2F0ZWdvcnkpLmNoaWxkKCd1cGRhdGVkJyk7XG5cblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdGNhdFJlbW92aW5nRnJvbS5zZXQobnVsbCwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdCgnVGhlcmUgd2FzIGFuIGVycm9yIGRlbGV0aW5nIHVwZGF0ZSBmaWVsZDogJyArIGVycm9yKTtcblx0XHRcdFx0ZWxzZSByZXNvbHZlKCdEZWxldGVkIHVwZGF0ZSBzdWNjZXNzZnVsbHknKTtcblx0XHRcdH0pXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIHRoZXJlV2FzQW5VcGRhdGVGaWVsZChjYXRlZ29yeSwgdWlkKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciBjYXRUb0NoZWNrID0gYXBwLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKGNhdGVnb3J5KTtcblxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly9jYWxsIHRoZSBkYlxuXHRcdFx0Y2F0VG9DaGVjay5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHRcdC8vc2F2ZSB0aGUgcmVzcG9uc2Vcblx0XHRcdFx0dmFyIGN1cnJlbnRDYXRNb2RlbCA9IHNuYXBzaG90LnZhbCgpO1xuXHRcdFx0XHQvL3Nob3cgd2hhdCB3YXMgZm91bmRcblx0XHRcdFx0Ly9sb29rIGZvciB0aGUgdXBkYXRlIGZpZWxkXG5cdFx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGN1cnJlbnRDYXRNb2RlbFsndXBkYXRlZCddKSkgcmVzb2x2ZSh0cnVlKTtcblx0XHRcdFx0ZWxzZSByZWplY3QoZmFsc2UpO1xuXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KGVycm9yKTtcblx0XHRcdH0pXG5cdFx0fSk7XG5cdH1cblxuXHQvL3JldHVybiB0aGUgb2JqZWN0XG5cdHJldHVybiBhbGxCYWNrZW5kU2VydmljZXM7XG59XG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5mYWN0b3J5KCd0cmFmZmljVmFsZXQnLCB0cmFmZmljVmFsZXQpO1xuXG50cmFmZmljVmFsZXQuJGluamVjdCA9IFsnJGxvZycsICckbG9jYXRpb24nXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiB0cmFmZmljVmFsZXQoJGxvZywgJGxvY2F0aW9uKSB7XG5cdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0dmFyIGFsbFRyYWZmaWNDb250cm9scyA9IHtcblx0XHRyZWRpcmVjdFRvOiByZWRpcmVjdFRvXG5cdH07XG5cblx0ZnVuY3Rpb24gcmVkaXJlY3RUbyhwYXRoLCBwYXJhbTEsIHBhcmFtMiwgcGFyYW0zKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQocGFyYW0xKSkge1xuXHRcdFx0cGF0aCA9IHBhdGggKyAnLycgKyBwYXJhbTE7XG5cblx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHBhcmFtMikpIHtcblx0XHRcdFx0Ly9nbyB0byBwYXRoIHdpdGggMiBwYXJhbXNcblx0XHRcdFx0cGF0aCA9IHBhdGggKyAnLycgKyBwYXJhbTI7XG5cblx0XHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQocGFyYW0zKSkge1xuXHRcdFx0XHRcdHBhdGggPSBwYXRoICsgJy8nICsgcGFyYW0zO1xuXG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyBub3cgdG8gJyArIHBhdGgpO1xuXHRcdFx0XHRcdCRsb2NhdGlvbi5wYXRoKHBhdGgpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyBub3cgdG8gJyArIHBhdGgpO1xuXHRcdFx0XHQkbG9jYXRpb24ucGF0aChwYXRoKTtcblx0XHRcdH1cblx0XHRcdC8vZ28gd2l0aCAxIHBhcmFtXG5cdFx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIG5vdyB0byAnICsgcGF0aCk7XG5cdFx0XHQkbG9jYXRpb24ucGF0aChwYXRoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly9qdXN0IGdvIHRvIHBhdGhcblx0XHRcdCRsb2cuaW5mbygncmVkaXJlY3Rpbmcgbm93IHRvICcgKyBwYXRoKTtcblx0XHRcdCRsb2NhdGlvbi5wYXRoKHBhdGgpO1xuXHRcdH1cblxuXHR9XG5cblx0cmV0dXJuIGFsbFRyYWZmaWNDb250cm9scztcbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmZhY3RvcnkoJ3VzZXJEYXRhJywgdXNlckRhdGEpO1xuXG51c2VyRGF0YS4kaW5qZWN0ID0gWyckbG9nJywgJyRxJywgJ2JhY2tlbmRTZXJ2aWNlcyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHVzZXJEYXRhKCRsb2csICRxLCBiYWNrZW5kU2VydmljZXMpIHtcblx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHR2YXIgY3VycmVudFVzZXIgPSB7XG5cdFx0YmlvOiB7IFxuXHRcdFx0dWlkOiAnJyxcblx0XHRcdG5hbWU6ICcnLFxuXHRcdFx0ZW1haWw6ICcnLFxuXHRcdFx0Y29tcGFueTogJycsXG5cdFx0XHR0aXRsZTogJycsXG5cdFx0XHRkb2I6IDBcblx0XHR9LFxuXHRcdGV2ZW50czoge1xuXHRcdFx0aG9zdGluZzoge30sXG5cdFx0XHRwZW5kaW5nOiB7fSxcblx0XHRcdGF0dGVuZGluZzoge30sXG5cdFx0XHRjb21wbGV0ZWQ6IHt9XG5cdFx0fVxuXHR9O1xuXG5cdHZhciBhbGxVc2VyRGF0YSA9IHtcblx0XHRiaW9QcmltYXJpZXNBcmVDb21wbGV0ZUxvY2FsbHk6IGJpb1ByaW1hcmllc0FyZUNvbXBsZXRlTG9jYWxseSxcdFx0Ly9tb2RhbCBhbmFseXNpc1xuXG5cdFx0Y2xlYW5FdmVudHM6IGNsZWFuRXZlbnRzLFx0XHQvL21vZGVsIG1haW50YWluYW5jZVxuXG5cdFx0Z2V0VUlETG9jYWxseTogZ2V0VUlETG9jYWxseSxcdC8vZ2V0dGVyIE1ldGhvZHNcblx0XHRnZXROYW1lTG9jYWxseTogZ2V0TmFtZUxvY2FsbHksXG5cdFx0Z2V0RW1haWxMb2NhbGx5OiBnZXRFbWFpbExvY2FsbHksXG5cdFx0Z2V0Q29tcGFueUxvY2FsbHk6IGdldENvbXBhbnlMb2NhbGx5LFxuXHRcdGdldFRpdGxlTG9jYWxseTogZ2V0VGl0bGVMb2NhbGx5LFxuXHRcdGdldERPQkxvY2FsbHk6IGdldERPQkxvY2FsbHksXG5cdFx0Z2V0RnVsbEJpb0xvY2FsbHk6IGdldEZ1bGxCaW9Mb2NhbGx5LFxuXHRcdGdldFVzZXJFdmVudHNMb2NhbGx5OiBnZXRVc2VyRXZlbnRzTG9jYWxseSxcblx0XHRnZXRBbGxVc2VyRXZlbnRzTG9jYWxseTogZ2V0QWxsVXNlckV2ZW50c0xvY2FsbHksXG5cblx0XHRzZXRVSURMb2NhbGx5OiBzZXRVSURMb2NhbGx5LFx0Ly9zZXR0ZXIgTWV0aG9kc1xuXHRcdHNldE5hbWVMb2NhbGx5OiBzZXROYW1lTG9jYWxseSxcblx0XHRzZXRFbWFpbExvY2FsbHk6IHNldEVtYWlsTG9jYWxseSxcblx0XHRzZXRDb21wYW55TG9jYWxseTogc2V0Q29tcGFueUxvY2FsbHksXG5cdFx0c2V0VGl0bGVMb2NhbGx5OiBzZXRUaXRsZUxvY2FsbHksXG5cdFx0c2V0RE9CTG9jYWxseTogc2V0RE9CTG9jYWxseSxcblx0XHRzZXRQcmltYXJpZXNMb2NhbGx5OiBzZXRQcmltYXJpZXNMb2NhbGx5LFxuXHRcdHVwZGF0ZVVzZXJFdmVudHNMb2NhbGx5OiB1cGRhdGVVc2VyRXZlbnRzTG9jYWxseSxcblx0XHR1cGRhdGVBbGxVc2VyRXZlbnRzTG9jYWxseTogdXBkYXRlQWxsVXNlckV2ZW50c0xvY2FsbHksXG5cdFx0dXBkYXRlQmlvTG9jYWxseTogdXBkYXRlQmlvTG9jYWxseSxcblxuXHRcdHJlbW92ZVVzZXJFdmVudHNMb2NhbGx5OiByZW1vdmVVc2VyRXZlbnRzTG9jYWxseSwgLy9yZW1vdmUgZGF0YVxuXHRcdFxuXHRcdGdldEZ1bGxSZW1vdGVEQmZvckxvY2FsOiBnZXRGdWxsUmVtb3RlREJmb3JMb2NhbCxcdC8vbG9jYWwtcmVtb3RlIGludGVyYWNpb25zXG5cdFx0Z2V0UmVtb3RlQmlvRm9yTG9jYWw6IGdldFJlbW90ZUJpb0ZvckxvY2FsLFx0XHRcdFxuXHRcdGdldFJlbW90ZUV2ZW50c0ZvckxvY2FsOiBnZXRSZW1vdGVFdmVudHNGb3JMb2NhbCxcblx0XHRzZXRGdWxsUmVtb3RlREJmcm9tTG9jYWw6IHNldEZ1bGxSZW1vdGVEQmZyb21Mb2NhbCxcblx0XHRzZXRSZW1vdGVCaW9Gcm9tTG9jYWw6IHNldFJlbW90ZUJpb0Zyb21Mb2NhbCxcblx0XHRzZXRSZW1vdGVFdmVudHNGcm9tTG9jYWw6IHNldFJlbW90ZUV2ZW50c0Zyb21Mb2NhbCxcblx0XHRjbGVhbkRCRXZlbnRzQ2F0ZWdvcnk6IGNsZWFuREJFdmVudHNDYXRlZ29yeSxcblxuXHRcdGxvYWRCaW86IGxvYWRCaW8sXHQvL2V4dGVybmFsIG1ldGhvZHNcblx0XHRsb2FkRXZlbnRzUHJvZ3Jlc3NpdmVseTogbG9hZEV2ZW50c1Byb2dyZXNzaXZlbHksXG5cdFx0Y3JlYXRlTmV3RXZlbnQ6IGNyZWF0ZU5ld0V2ZW50XG5cdH1cblxuXHQvL2FuYWx5c2lzIG1ldGhvZHNcblx0ZnVuY3Rpb24gYmlvUHJpbWFyaWVzQXJlQ29tcGxldGVMb2NhbGx5KCkge1xuXHRcdGlmKCBjdXJyZW50VXNlci5iaW8udWlkICE9PSAnJyAmJlxuXHRcdFx0Y3VycmVudFVzZXIuYmlvLm5hbWUgIT09ICcnICYmXG5cdFx0XHRjdXJyZW50VXNlci5iaW8uZW1haWwgIT09ICcnXG5cdFx0XHQpXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRlbHNlIHJldHVybiBmYWxzZTtcblx0fVxuXG5cdC8vbW9kZWwgbWFpbnRhaW5hbmNlXG5cdGZ1bmN0aW9uIGNsZWFuRXZlbnRzKHR5cGUpIHtcblx0XHQvL2l0ZXJhdGUgdGhyb3VnaCBvYmplY3RzIGluIG9iamVjdFxuXHRcdE9iamVjdC5rZXlzKGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXSkuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcblx0XHRcdC8vaWYgYW55IGFyZSBub24tb2JqZWN0cywgZGVsZXRlIHRoZW1cblx0XHRcdGlmKCFhbmd1bGFyLmlzT2JqZWN0KGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXVtrZXldKSkge1xuXHRcdFx0XHRkZWxldGUgY3VycmVudFVzZXIuZXZlbnRzW3R5cGVdW2tleV07XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHQvL2dldHRlciBtZXRob2RzXG5cdGZ1bmN0aW9uIGdldFVJRExvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmJpby51aWQ7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXROYW1lTG9jYWxseSgpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuYmlvLm5hbWU7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRFbWFpbExvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmJpby5lbWFpbDtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldENvbXBhbnlMb2NhbGx5KCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5iaW8uY29tcGFueTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldFRpdGxlTG9jYWxseSgpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuYmlvLnRpdGxlO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXRET0JMb2NhbGx5KCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5iaW8uZG9iO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0RnVsbEJpb0xvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHVpZDogY3VycmVudFVzZXIuYmlvLnVpZCxcblx0XHRcdG5hbWU6IGN1cnJlbnRVc2VyLmJpby5uYW1lLFxuXHRcdFx0ZW1haWw6IGN1cnJlbnRVc2VyLmJpby5lbWFpbCxcblx0XHRcdGNvbXBhbnk6IGN1cnJlbnRVc2VyLmJpby5jb21wYW55LFxuXHRcdFx0dGl0bGU6IGN1cnJlbnRVc2VyLmJpby50aXRsZSxcblx0XHRcdGRvYjogY3VycmVudFVzZXIuYmlvLmRvYlxuXHRcdH07XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRVc2VyRXZlbnRzTG9jYWxseSh0eXBlKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldEFsbFVzZXJFdmVudHNMb2NhbGx5KCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5ldmVudHM7XG5cdH1cblxuXHQvL3NldHRlciBtZXRob2RzXG5cdGZ1bmN0aW9uIHNldFVJRExvY2FsbHkodWlkKSB7XG5cdFx0Y3VycmVudFVzZXIuYmlvLnVpZCA9IHVpZDtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldE5hbWVMb2NhbGx5KG5hbWUpIHtcblx0XHRjdXJyZW50VXNlci5iaW8ubmFtZSA9IG5hbWU7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXRFbWFpbExvY2FsbHkoZW1haWwpIHtcblx0XHRjdXJyZW50VXNlci5iaW8uZW1haWwgPSBlbWFpbDtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldENvbXBhbnlMb2NhbGx5KGNvbXBhbnkpIHtcblx0XHRjdXJyZW50VXNlci5iaW8uY29tcGFueSA9IGNvbXBhbnk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNldFRpdGxlTG9jYWxseSh0aXRsZSkge1xuXHRcdGN1cnJlbnRVc2VyLmJpby50aXRsZSA9IHRpdGxlO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0RE9CTG9jYWxseShkb2IpIHtcblx0XHRjdXJyZW50VXNlci5iaW8uZG9iID0gZG9iO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0UHJpbWFyaWVzTG9jYWxseShlbWFpbCwgbmFtZSwgdWlkKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoZW1haWwpKSBzZXRFbWFpbExvY2FsbHkoZW1haWwpO1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKG5hbWUpKSBnZXROYW1lTG9jYWxseShuYW1lKTtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh1aWQpKSBzZXRVSURMb2NhbGx5KHVpZCk7XG5cdH1cblxuXHRmdW5jdGlvbiB1cGRhdGVVc2VyRXZlbnRzTG9jYWxseSh0eXBlLCBldmVudCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZXZlbnRJRCA9IGV2ZW50LmlkO1xuXG5cdFx0Ly9jaGVjayBpZiB0aGUgbW9kZWwgbmVlZHMgdG8gYmUgY2xlYW5lZFxuXHRcdGNsZWFuRXZlbnRzKHR5cGUpO1xuXHRcdC8vdGhlbiBsb2FkIHRoZSBuZXcgZXZlbnRcblx0XHRjdXJyZW50VXNlci5ldmVudHNbdHlwZV1bZXZlbnRJRF0gPSBldmVudDtcblx0fVxuXG5cdGZ1bmN0aW9uIHVwZGF0ZUFsbFVzZXJFdmVudHNMb2NhbGx5KGFsbFVzZXJFdmVudHMpIHtcblx0XHRjdXJyZW50VXNlci5ldmVudHMgPSBhbGxVc2VyRXZlbnRzO1xuXHR9XG5cblx0ZnVuY3Rpb24gdXBkYXRlQmlvTG9jYWxseSh1c2VyQmlvKSB7XG5cdFx0Ly91cGRhdGUgbG9jYWwgdmFsdWVzXG5cdFx0c2V0TmFtZUxvY2FsbHkodXNlckJpby5uYW1lKTtcblx0XHRzZXRFbWFpbExvY2FsbHkodXNlckJpby5lbWFpbCk7XG5cdFx0c2V0Q29tcGFueUxvY2FsbHkodXNlckJpby5jb21wYW55KTtcblx0XHRzZXRUaXRsZUxvY2FsbHkodXNlckJpby50aXRsZSk7XG5cdFx0c2V0RE9CTG9jYWxseSh1c2VyQmlvLmRvYik7XG5cdFx0Ly9zYXZlIHRvIGRiXG5cdFx0c2V0UmVtb3RlQmlvRnJvbUxvY2FsKCk7XG5cdH1cblxuXHQvL2RlbGV0ZSBNZXRob2RzXG5cdGZ1bmN0aW9uIHJlbW92ZVVzZXJFdmVudHNMb2NhbGx5KHR5cGUsIGV2ZW50KSB7XG5cdFx0Ly9kb2VzIHRoaXMgd29yaz9cblx0XHRkZWxldGUgY3VycmVudFVzZXIuZXZlbnRzW3R5cGVdW2V2ZW50LmlkXTtcblx0fVxuXG5cdC8vcmVtb3RlLWxvY2FsIGludGVyYWN0aW9uIE1ldGhvZHNcblx0ZnVuY3Rpb24gZ2V0RnVsbFJlbW90ZURCZm9yTG9jYWwoKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0XHRkYi5kb3dubG9hZFVzZXJEYXRhKClcblx0XHQudGhlbihmdW5jdGlvbihyZW1vdGVVc2VyRGF0YSkge1xuXHRcdFx0Y3VycmVudFVzZXIgPSByZW1vdGVVc2VyRGF0YTtcblx0XHR9KVxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0UmVtb3RlQmlvRm9yTG9jYWwodWlkKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cdFx0XHRcdFxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vZ28gb3V0IHRvIHRoZSBkYiBiZWZvcmUgcmVzb2x2aW5nXG5cdFx0XHRkYi5nZXRVc2VyQmlvKHVpZClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKHVzZXJCaW8pIHtcblxuXHRcdFx0XHRyZXNvbHZlKHVzZXJCaW8pO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRyZWplY3QoJ1RoZXJlIHdhcyBhbiBlcnJvciByZWFkaW5nIHRoZSB1c2VyIGJpbzogJyArIGVycm9yKTtcblx0XHRcdH0pXG5cdFx0fSk7XG5cdFx0XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRSZW1vdGVFdmVudHNGb3JMb2NhbCgpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblx0XHRcdFx0XG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHQvL2dvIG91dCB0byB0aGUgZGIgYmVmb3JlIHJlc29sdmluZ1xuXHRcdFx0ZGIuZ2V0VXNlckV2ZW50cyhnZXRVSURMb2NhbGx5KCkpXG5cdFx0XHQudGhlbihmdW5jdGlvbihvYnRhaW5lZFVzZXJFdmVudHMpIHtcblxuXHRcdFx0XHQvL3NhdmUgdGhlIHJlc3VsdHMgdG8gdGhlIGxvY2FsIGRhdGFic2Vcblx0XHRcdFx0T2JqZWN0LmtleXMob2J0YWluZWRVc2VyRXZlbnRzKS5mb3JFYWNoKGZ1bmN0aW9uKGV2ZW50VHlwZSkge1xuXHRcdFx0XHRcdC8vd2l0aGluIGVhY2ggZXZlbnQgdHlwZSBpdGVyYXRlIHRocm91Z2ggdGhlIGFjdHVhbCBldmVudHNcblx0XHRcdFx0XHRPYmplY3Qua2V5cyhvYnRhaW5lZFVzZXJFdmVudHNbZXZlbnRUeXBlXSkuZm9yRWFjaChmdW5jdGlvbihldmVudCkge1xuXHRcdFx0XHRcdFx0Ly9vbmNlIHdlIHNlZSB0aGUgZXZlbnRzLCBzYXZlIHRoZW0gdG8gdGhlIGxvY2FsIG1vZGVsXG5cblx0XHRcdFx0XHRcdHVwZGF0ZVVzZXJFdmVudHNMb2NhbGx5KGV2ZW50VHlwZSwgb2J0YWluZWRVc2VyRXZlbnRzW2V2ZW50VHlwZV1bZXZlbnRdKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdFxuXHRcdFx0XHQvL3JldHVybiB0aGUgcmVzdWx0cyB0byB0aGUgcmVxdWVzdGluZyBvYmplY3Rcblx0XHRcdFx0cmVzb2x2ZShvYnRhaW5lZFVzZXJFdmVudHMpO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRyZWplY3QoJ1RoZXJlIHdhcyBhbiBlcnJvciByZWFkaW5nIHRoZSB1c2VyIGV2ZW50czogJyArIGVycm9yKTtcblx0XHRcdH0pXG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXRGdWxsUmVtb3RlREJmcm9tTG9jYWwoKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0XHRkYi51cGxvYWRVc2VyRGF0YShjdXJyZW50VXNlcik7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXRSZW1vdGVCaW9Gcm9tTG9jYWwoKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0XHRkYi51cGxvYWRVc2VyQmlvKGN1cnJlbnRVc2VyLmJpbyk7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXRSZW1vdGVFdmVudHNGcm9tTG9jYWwoKSB7fVxuXG5cdGZ1bmN0aW9uIGNsZWFuREJFdmVudHNDYXRlZ29yeShjYXRlZ29yeSkge1xuXHRcdC8vZGVjbGFyIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdC8vcmVtb3ZlICd1cGRhdGVkJyBvYmplY3QgaWYgbmVlZCBiZVxuXHRcdC8vZGIgY2FsbCBzbyByZXR1cm4gYSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly9jaGVjayBmb3Igb2JqZWN0XG5cdFx0XHRkYi50aGVyZVdhc0FuVXBkYXRlRmllbGQoY2F0ZWdvcnksIGdldFVJRExvY2FsbHkoKSlcblx0XHRcdC50aGVuKGZ1bmN0aW9uKGFmZmlybWF0aXZlUmVzcG9uc2UpIHtcblx0XHRcdFx0Ly9pZiB0aGVyZSB3YXMgYW4gdXBkYXRlIGZpZWxkLCBkZWxldGUgaXRcblx0XHRcdFx0ZGIuZGVsZXRlVXBkYXRlRmllbGQoY2F0ZWdvcnksIGdldFVJRExvY2FsbHkoKSlcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24oYWZmaXJtYXRpdmVSZXNwb25zZSkgeyAkbG9nLmluZm8oYWZmaXJtYXRpdmVSZXNwb25zZSk7IH0gKVxuXHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3JSZXNwb25zZSkgeyAkbG9nLmluZm8oZXJyb3JSZXNwb25zZSk7IH0gKVxuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvclJlc3BvbnNlKSB7XG5cdFx0XHRcdCRsb2cuaW5mbyhlcnJvclJlc3BvbnNlKVxuXHRcdFx0fSlcblxuXHRcdH0pO1xuXHRcdC8vaWYgaXQgaXMgdGhlcmUsIHJlbW92ZSBpdFxuXHR9XG5cblx0ZnVuY3Rpb24gbG9hZEJpbyh1aWQpIHtcblxuXHRcdC8vbWlnaHQgbmVlZCB0byBnbyBvdXQgdG8gdGhlIGRiIHNvIHJldHVybiBhIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHRcdC8vY2hlY2sgZm9yIGJpbyBsb2NhbGx5IGZpcnN0XG5cdFx0XHRpZihiaW9QcmltYXJpZXNBcmVDb21wbGV0ZUxvY2FsbHkoKSkge1xuXHRcdFx0XHRcblx0XHRcdFx0Ly9wYXNzIGl0IGJhY2sgYXMgc3VjY2Vzc1xuXHRcdFx0XHRyZXNvbHZlKGdldEZ1bGxCaW9Mb2NhbGx5KCkpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9pZiB0aGV5J3JlIG5vdCBjb21wbGV0ZSBsb2NhbGx5LCBjaGVjayB0aGUgc2VydmVyXG5cdFx0XHRcdGdldFJlbW90ZUJpb0ZvckxvY2FsKHVpZClcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24oYmlvRnJvbVJlbW90ZURCKSB7XG5cdFx0XHRcdFx0cmVzb2x2ZShiaW9Gcm9tUmVtb3RlREIpO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0XHR9KVxuXHRcdFx0fVxuXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGxvYWRFdmVudHNQcm9ncmVzc2l2ZWx5KHVpZCkge1xuXHRcdHZhciBldmVudFR5cGVzID0gWydhdHRlbmRpbmcnLCAncGVuZGluZycsICdob3N0aW5nJywgJ2NvbXBsZXRlZCddO1xuXHRcdHZhciBhbGxFdmVudHMgPSB7fTtcblxuXHRcdC8vd2lsbCBnbyBvdXQgdG8gdGhlIGRiIHNvIHJldHVybiBhIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHRcdGdldFJlbW90ZUV2ZW50c0ZvckxvY2FsKClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKG9idGFpbmVkVXNlckV2ZW50cykge1xuXHRcdFx0XHQvL3doZW4gdGhlIGRiIHJlc3VsdHMgY29tZSBiYWNrLCByZXR1cm4gdGhvc2Vcblx0XHRcdFx0cmVzb2x2ZShvYnRhaW5lZFVzZXJFdmVudHMpO1xuXHRcdFx0fSlcblxuXHRcdFx0Ly9idWlsZCB0aGUgbG9jYWwgbW9kZWxcblx0XHRcdGFsbEV2ZW50cyA9IGdldFVzZXJFdmVudHNMb2NhbGx5KHR5cGUpO1xuXG5cdFx0XHQvL2ZpcnN0IHJldHVybiB3aGF0ZXZlciBldmVudCBpbmZvIGlzIHN0b3JlZCBsb2NhbGx5XG5cdFx0XHRyZXNvbHZlKGFsbEV2ZW50cyk7XG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGNyZWF0ZU5ld0V2ZW50KGV2ZW50SUQpIHtcblx0XHQvL2RlY2xhciBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cdFx0dmFyIG5ld0V2ZW50ID0ge307XG5cblx0XHQvL2ZpcnN0IGNyZWF0ZSB0aGUgb2JqZWN0XG5cdFx0bmV3RXZlbnQgPSB7XG5cdFx0XHRpZDogZXZlbnRJRCxcblx0XHRcdG5hbWU6ICcnLFxuXHRcdFx0dHlwZTogJycsXG5cdFx0XHRob3N0OiB7XG5cdFx0XHRcdG5hbWU6ICcnLFxuXHRcdFx0XHR1aWQ6ICcnXG5cdFx0XHR9LFxuXHRcdFx0bWVzc2FnZTogJycsXG5cdFx0XHRldmVudFRpbWVzOiB7XG5cdFx0XHRcdHN0YXJ0OiAwLFxuXHRcdFx0XHRlbmQ6IDBcblx0XHRcdH0sXG5cdFx0XHRhZGRyZXNzOiB7XG5cdFx0XHRcdHN0cmVldDAxOiAnJyxcblx0XHRcdFx0c3RyZWV0MDI6ICcnLFxuXHRcdFx0XHRzdHJlZXQwMzogJycsXG5cdFx0XHRcdGNpdHk6ICcnLFxuXHRcdFx0XHRzdGF0ZTogJycsXG5cdFx0XHRcdHppcDogMFxuXHRcdFx0fSxcblx0XHRcdGd1ZXN0TGlzdDoge31cblx0XHR9O1xuXG5cdFx0Ly9zYXZlIGl0IGxvY2FsbHlcblx0XHR1cGRhdGVVc2VyRXZlbnRzTG9jYWxseSgnaG9zdGluZycsIG5ld0V2ZW50KTtcblxuXHRcdC8vdGhlbiBjcmVhdGUgaXQgb24gdGhlIHNlcnZlclxuXHRcdC8vd2lsbCBnbyBvdXQgdG8gdGhlIGRiIHNvIHJldHVybiBhIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcblx0XHRcdC8vbWFuYWdlIHRoZSBwcm9taXNlIHJlc3BvbnNlc1xuXHRcdFx0ZGIuY3JlYXRlSG9zdGVkRXZlbnQoZ2V0VUlETG9jYWxseSgpLCBuZXdFdmVudClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKG1lc3NhZ2UpIHtcblx0XHRcdFx0cmVzb2x2ZShtZXNzYWdlKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHRcdH0pXG5cblx0XHR9KTtcblxuXHR9XG5cdFxuXHRyZXR1cm4gYWxsVXNlckRhdGE7XG59XG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5mYWN0b3J5KCd2YWxpZGF0aW9uJywgdmFsaWRhdGlvbik7XG5cbnZhbGlkYXRpb24uJGluamVjdCA9IFsnJGxvZyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHZhbGlkYXRpb24oJGxvZykge1xuXHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdHZhciBtaW5pbXVtTmFtZUxlbmd0aCA9IDM7XG5cdHZhciBtaW5pbXVtUGFzc0xlbmd0aCA9IDE2O1xuXHR2YXIgbWF4aW11bVBhc3NMZW5ndGggPSAxMDA7XG5cblx0dmFyIGFsbFZhbGlkYXRpb25zID0ge1xuXHRcdHJlcXVpcmVkOiByZXF1aXJlZCxcblx0XHRtaW5OYW1lTGVuZ3RoOiBtaW5OYW1lTGVuZ3RoLFxuXHRcdG1pblBhc3NMZW5ndGg6IG1pblBhc3NMZW5ndGgsXG5cdFx0bWF4UGFzc0xlbmd0aDogbWF4UGFzc0xlbmd0aCxcblx0XHRhdExlYXN0T25lU3ltYm9sOiBhdExlYXN0T25lU3ltYm9sLFxuXHRcdGF0TGVhc3RPbmVOdW1iZXI6IGF0TGVhc3RPbmVOdW1iZXIsXG5cdFx0YXRMZWFzdE9uZUxvd2VyY2FzZTogYXRMZWFzdE9uZUxvd2VyY2FzZSxcblx0XHRhdExlYXN0T25lVXBwZXJjYXNlOiBhdExlYXN0T25lVXBwZXJjYXNlLFxuXHRcdGlsbGVnYWxDaGFyYWN0ZXI6IGlsbGVnYWxDaGFyYWN0ZXIsXG5cdFx0ZW1haWw6IGVtYWlsLFxuXHRcdGRhdGVPZkJpcnRoOiBkYXRlT2ZCaXJ0aFxuXHR9O1xuXG5cdGZ1bmN0aW9uIHJlcXVpcmVkKHZhbHVlKSB7XG5cdFx0aWYoYW5ndWxhci5pc1VuZGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdHJldHVybiAnVGhpcyBpcyBhIHJlcXVpcmVkIGZpZWxkJztcblx0XHR9IFxuXHR9XG5cblx0ZnVuY3Rpb24gbWluTmFtZUxlbmd0aCh2YWx1ZSkge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0aWYodmFsdWUubGVuZ3RoIDwgbWluaW11bU5hbWVMZW5ndGgpIHJldHVybiAoJ05hbWUgc2hvdWxkIGJlIGF0IGxlYXN0ICcgKyBtaW5pbXVtTmFtZUxlbmd0aCArICcgY2hhcmFjdGVycycpO1xuXHRcdH0gXG5cdH1cblxuXHRmdW5jdGlvbiBtaW5QYXNzTGVuZ3RoKHZhbHVlKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHRpZighKHZhbHVlLmxlbmd0aCA8IG1pbmltdW1QYXNzTGVuZ3RoKSkgcmV0dXJuIHRydWU7XG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGZ1bmN0aW9uIG1heFBhc3NMZW5ndGgodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdGlmKCEodmFsdWUubGVuZ3RoID4gbWF4aW11bVBhc3NMZW5ndGgpKSByZXR1cm4gdHJ1ZTtcblx0XHR9IFxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGZ1bmN0aW9uIGF0TGVhc3RPbmVTeW1ib2wodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdC8vIGJ1aWxkIHJlZ2V4XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbXFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqXVwiKTtcblxuXHRcdFx0Ly9jaGVjayBjb25zdHJhdGludFxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZhbHVlKSkge1xuXHRcdFx0XHQvL3N1Y2Nlc3M6IGF0IGxlYXN0IG9uZSBzcGVjaWFsIGNoYXJhY3RlciBmb3VuZFxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vZmFpbHVyZTogZGlkbid0IGZpbmQgYW55IHNwY2lhbCBjaGFyYWN0ZXJzXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRmdW5jdGlvbiBhdExlYXN0T25lTnVtYmVyKHZhbHVlKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHQvLyBidWlsZCByZWdleFxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiWzAtOV1cIiwgXCJcIik7XG5cblx0XHRcdC8vY2hlY2sgY29uc3RyYXRpbnRcblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2YWx1ZSkpIHtcblx0XHRcdFx0Ly9zdWNjZXNzOiBhdCBsZWFzdCBvbmUgc3BlY2lhbCBjaGFyYWN0ZXIgZm91bmRcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2ZhaWx1cmU6IGRpZG4ndCBmaW5kIGFueSBzcGNpYWwgY2hhcmFjdGVyc1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cbiAgICBmdW5jdGlvbiBhdExlYXN0T25lTG93ZXJjYXNlKHZhbHVlKSB7XG4gICAgXHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdC8vIGJ1aWxkIHJlZ2V4XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbYS16XVwiLCBcIlwiKTtcblxuXHRcdFx0Ly9jaGVjayBjb25zdHJhdGludFxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZhbHVlKSkge1xuXHRcdFx0XHQvL3N1Y2Nlc3M6IGF0IGxlYXN0IG9uZSBzcGVjaWFsIGNoYXJhY3RlciBmb3VuZFxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vZmFpbHVyZTogZGlkbid0IGZpbmQgYW55IHNwY2lhbCBjaGFyYWN0ZXJzXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYXRMZWFzdE9uZVVwcGVyY2FzZSh2YWx1ZSkge1xuICAgIFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHQvLyBidWlsZCByZWdleFxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW0EtWl1cIiwgXCJcIik7XG5cblx0XHRcdC8vY2hlY2sgY29uc3RyYXRpbnRcblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2YWx1ZSkpIHtcblx0XHRcdFx0Ly9zdWNjZXNzOiBhdCBsZWFzdCBvbmUgc3BlY2lhbCBjaGFyYWN0ZXIgZm91bmRcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2ZhaWx1cmU6IGRpZG4ndCBmaW5kIGFueSBzcGNpYWwgY2hhcmFjdGVyc1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlsbGVnYWxDaGFyYWN0ZXIodmFsdWUpIHtcbiAgICBcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0Ly8gYnVpbGQgcmVnZXhcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIlteQS16MC05XFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqXVwiLCBcIlwiKTtcblxuXHRcdFx0Ly9jaGVjayBjb25zdHJhdGludFxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZhbHVlKSkge1xuXHRcdFx0XHQvL3N1Y2Nlc3M6IGF0IGxlYXN0IG9uZSBzcGVjaWFsIGNoYXJhY3RlciBmb3VuZFxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2ZhaWx1cmU6IGRpZG4ndCBmaW5kIGFueSBzcGNpYWwgY2hhcmFjdGVyc1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIGVtYWlsKHZhbHVlKSB7XG4gICAgXHQvL2RlZmluZSBjb25zdHJhaW50c1xuICAgIFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XCIsIFwiXCIpO1xuXG4gICAgXHRpZighY29uc3RyYWludC50ZXN0KHZhbHVlKSkgcmV0dXJuICdOb3QgYSB2YWxpZCBlLW1haWwgYWRkcmVzcydcbiAgICBcdFxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRhdGVPZkJpcnRoKHZhbHVlKSB7fVxuXG5cdHJldHVybiBhbGxWYWxpZGF0aW9ucztcbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbmZpZyhjb25maWcpO1xuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBjb25maWcoJHJvdXRlUHJvdmlkZXIpIHsgICBcbiAgICAkcm91dGVQcm92aWRlclxuICAgIC53aGVuKCcvJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2xhbmRpbmdQYWdlLmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdMYW5kaW5nUGFnZUNvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICB9KVxuICAgIC53aGVuKCcvc2lnbnVwJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL25ld1VzZXJTaWdudXAuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ05ld1VzZXJTaWduVXBDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgfSlcbiAgICAud2hlbignL2xvZ2luJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3JlZ2lzdGVyZWRVc2VyTG9naW4uaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1JlZ1VzZXJMb2dpbkNvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICB9KVxuICAgIC53aGVuKCcvdXNlckluZm9ybWF0aW9uLzp1aWQ/Jywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3VzZXJJbmZvcm1hdGlvbi5odG0nLFxuICAgICAgICBjb250cm9sbGVyOiAnVXNlckluZm9ybWF0aW9uQ29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgcmVzb2x2ZTogeyAvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgICAgIHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2U6IHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2VcbiAgICAgICAgfVxuICAgIH0pXG4gICAgLndoZW4oJy91c2VyRXZlbnRzLzp1aWQ/Jywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3VzZXJFdmVudHMuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1VzZXJFdmVudHNDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICByZXNvbHZlOiB7IC8qIEBuZ0luamVjdCAqL1xuICAgICAgICAgICAgdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZTogdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZVxuICAgICAgICB9XG4gICAgfSlcbiAgICAud2hlbignL2V2ZW50LzpldmVudElkPy86aG9zdElkPy86dWlkPycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9hbkV2ZW50Lmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdBbkV2ZW50Q29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgcmVzb2x2ZTogeyAvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgICAgIHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2U6IHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2VcbiAgICAgICAgfVxuICAgIH0pXG4gICAgLm90aGVyd2lzZSh7XG4gICAgICAgIHJlZGlyZWN0VG86ICcvJ1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlKGF1dGhTZXJ2aWNlKSB7XG4gICAgYXV0aFNlcnZpY2UuaXNMb2dnZWRJbigpO1xufVxuLyogSG9zdGVkRXZlbnRzTGlzdC5kaXJlY3RpdmUuanMgKi9cblxuLyoqXG4qIEBkZXNjIGRpc3BsYXlzIGEgbGlzdCBvZiBhbGwgdGhlIGV2ZW50cyB0aGUgY3VycmVudCB1c2VyIGlzIGhvc3RpbmcuXG4qIEBleGFtcGxlIDxob3N0ZWQtZXZlbnRzLWxpc3Q+PC9ob3N0ZWQtZXZlbnRzLWxpc3Q+XG4qL1xuXG5hbmd1bGFyXG5cdC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcblx0LmRpcmVjdGl2ZSgnaG9zdGVkRXZlbnRzTGlzdCcsIGhvc3RlZEV2ZW50c0xpc3QpO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGhvc3RlZEV2ZW50c0xpc3QoKSB7XG4gICAgbGlua0Z1bmMuJGluamVjdCA9IFtcInNjb3BlXCIsIFwiZWxcIiwgXCJhdHRyXCIsIFwiY3RybFwiXTtcblx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRyZXN0cmljdDogJ0FFQ00nLFxuXHRcdHRlbXBsYXRlVXJsOiAnLi4vdmlld3MvZGlyZWN0aXZlcy9ob3N0ZWRFdmVudHNMaXN0LmRpcmVjdGl2ZS5odG0nLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0c2NvcGU6IHtcblx0XHRcdGhvc3RlZEV2ZW50czogJz0nLFxuXHRcdFx0dXNlcklkOiAnPSdcblx0XHR9LFxuXHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdGNvbnRyb2xsZXI6IGhvc3RlZEV2ZW50c0xpc3RDb250cm9sbGVyLFxuXHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdH1cblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7XG4gICAgfVxuXG4gICAgaG9zdGVkRXZlbnRzTGlzdENvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICd0cmFmZmljVmFsZXQnXTtcbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBob3N0ZWRFdmVudHNMaXN0Q29udHJvbGxlcigkbG9nLCB0cmFmZmljVmFsZXQpIHtcblx0ICAgIHZhciB2bSA9IHRoaXM7XG5cblx0ICAgIC8vbG9jYWwgdmFyaWFibGVzXG5cdCAgICB2YXIgaG9zdGVkRXZlbnRzU2hlcnBhID0gdHJhZmZpY1ZhbGV0O1xuXG5cdCAgICAvL3ZpZXcgbW9kZWwgdmFyaWFibGVzXG5cdCAgICB2bS5ndWVzdHNBcmVJbnZpdGVkID0gZmFsc2U7XG5cblx0ICAgIC8vbG9jYWwgbWV0aG9kc1xuXHQgICAgZnVuY3Rpb24gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKSB7XG5cdFx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gY291bnRHdWVzdHMobGlzdCkge1xuXHRcdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlXG5cdFx0XHR2YXIgY291bnRlciA9IDA7XG5cblx0XHRcdC8vaWYgd2UncmUgY291bnRpbmcsIHRoZW4gdGhlcmUncyBhIGxpc3QsIHNvIHRocm93IHRoZSBmbGFnXG5cdFx0XHR2bS5ndWVzdHNBcmVJbnZpdGVkID0gdHJ1ZTtcblxuXHRcdFx0T2JqZWN0LmtleXNbbGlzdF0uZm9yRWFjaChmdW5jdGlvbihndWVzdCkge1xuXHRcdFx0XHRjb3VudGVyKys7XG5cdFx0XHR9KVxuXG5cdFx0XHRyZXR1cm4gY291bnRlcjtcblx0XHR9XG5cblx0XHQvL3ZpZXcgbW9kZWwgbWV0aG9kc1xuXHRcdHZtLmZvcm1hdERhdGUgPSBmdW5jdGlvbih1bml4VGltZSkge1xuXHRcdFx0Ly9yZWZvcm1hdCB0aGUgdGltZVxuXHRcdFx0JGxvZy5pbmZvKCdnb3QgdGhpc3QgdGltZTogJyArIHVuaXhUaW1lKTtcblx0XHRcdHJldHVybiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpO1xuXHRcdH1cblxuXHRcdHZtLmd1ZXN0c0F0dGVuZGluZyA9IGZ1bmN0aW9uKGd1ZXN0TGlzdCkge1xuXHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoZ3Vlc3RMaXN0KSkge1xuXHRcdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChndWVzdExpc3RbJ2F0dGVuZGluZyddKSkgcmV0dXJuIGNvdW50R3Vlc3RzKGd1ZXN0TGlzdFsnYXR0ZW5kaW5nJ10pO1xuXHRcdFx0XHRlbHNlIHJldHVybiAwO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSByZXR1cm4gMDtcblx0XHR9XG5cblx0XHR2bS5ndWVzdHNJbnZpdGVkID0gZnVuY3Rpb24oZ3Vlc3RMaXN0KSB7XG5cdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChndWVzdExpc3QpKSB7XG5cdFx0XHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRcdFx0dmFyIGd1ZXN0Q291bnQgPSB7IGF0dGVuZGluZzogMCwgcGVuZGluZzogMCwgZGVjbGluZWQ6IDAgfTtcblxuXHRcdFx0XHQvL2xvY2FsIG1ldGhvZHNcblx0XHRcdFx0ZnVuY3Rpb24gdG90YWxHdWVzdENvdW50KCkge1xuXHRcdFx0XHRcdHJldHVybiBndWVzdENvdW50LmF0dGVuZGluZyArIGd1ZXN0Q291bnQucGVuZGluZyArIGd1ZXN0Q291bnQuZGVjbGluZWQ7XG5cdFx0XHRcdH0gXG5cblx0XHRcdFx0Ly9jaGVjayB2YWx1ZXNcblx0XHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoZ3Vlc3RMaXN0WydhdHRlbmRpbmcnXSkpIGd1ZXN0Q291bnQuYXR0ZW5kaW5nID0gY291bnRHdWVzdHMoZ3Vlc3RMaXN0WydhdHRlbmRpbmcnXSk7XG5cdFx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGd1ZXN0TGlzdFsncGVuZGluZyddKSkgZ3Vlc3RDb3VudC5wZW5kaW5nID0gY291bnRHdWVzdHMoZ3Vlc3RMaXN0WydwZW5kaW5nJ10pO1xuXHRcdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChndWVzdExpc3RbJ2RlY2xpbmVkJ10pKSBndWVzdENvdW50LmRlY2xpbmVkID0gY291bnRHdWVzdHMoZ3Vlc3RMaXN0WydkZWNsaW5lZCddKTtcblxuXHRcdFx0XHRyZXR1cm4gdG90YWxHdWVzdENvdW50KCk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHJldHVybiAwO1xuXHRcdH1cblxuXHRcdHZtLnBlcmNlbnRhZ2VBdHRlbmRpbmcgPSBmdW5jdGlvbihndWVzdExpc3QpIHtcblx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGd1ZXN0TGlzdCkpIHtcblx0XHRcdFx0cmV0dXJuIChndWVzdHNBdHRlbmRpbmcoZ3Vlc3RsaXN0KSAvIGd1ZXN0c0ludml0ZWQoZ3Vlc3RMaXN0KSk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHJldHVybiAwO1xuXHRcdH1cblxuXHRcdHZtLmV2ZW50Q2xpY2tlZCA9IGZ1bmN0aW9uKGV2ZW50SUQpIHtcblx0XHRcdC8vcmVkaXJlY3QgdG8gdGhlIGV2ZW50IHBhZ2Vcblx0XHRcdCRsb2cuaW5mbygncmVkaXJlY3RpbmcgdG86IC9ldmVudC8nICsgZXZlbnRJRCArICcvJyArIHZtLmhvc3RlZEV2ZW50c1tldmVudElEXS5ob3N0LnVpZCArICcvJyArIHZtLnVzZXJJZCk7XG5cdFx0XHRob3N0ZWRFdmVudHNTaGVycGEucmVkaXJlY3RUbygnL2V2ZW50JywgZXZlbnRJRCwgdm0uaG9zdGVkRXZlbnRzW2V2ZW50SURdLmhvc3QudWlkLCB2bS51c2VySWQpO1xuXHRcdH1cblxuXHRcdC8vYWN0aW9uc1xuXG5cdH1cblxuXHRyZXR1cm4gIGRpcmVjdGl2ZTtcblx0XHRcbn07XG4vKiBUb29sQmFyLmRpcmVjdGl2ZS5qcyAqL1xuXG4vKipcbiogQGRlc2MgdG9vbGJhciBkaXJlY3RpdmUgdGhhdCBpcyB1c2VkIG9uIHRoZSBtYWluIHBhZ2UgYWNyb3NzIHRoZSBlbnRpcmUgYXBwLlxuKiBAZXhhbXBsZSA8ZGl2IHRvb2wtYmFyPjwvZGl2PlxuKi9cblxuYW5ndWxhclxuXHQubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG5cdC5kaXJlY3RpdmUoJ3Rvb2xCYXInLCB0b29sQmFyKTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiB0b29sQmFyKCkge1xuICAgIGxpbmtGdW5jLiRpbmplY3QgPSBbXCJzY29wZVwiLCBcImVsXCIsIFwiYXR0clwiLCBcImN0cmxcIl07XG5cdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0cmVzdHJpY3Q6ICdBRUNNJyxcblx0XHR0ZW1wbGF0ZVVybDogJy4uL3ZpZXdzL2RpcmVjdGl2ZXMvdG9vbEJhci5kaXJlY3RpdmUuaHRtJyxcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdHNjb3BlOiB7fSxcblx0XHRsaW5rOiBsaW5rRnVuYyxcblx0XHRjb250cm9sbGVyOiBUb29sQmFyQ29udHJvbGxlcixcblx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHR9XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCwgYXR0ciwgY3RybCkge1xuICAgIH1cblxuICAgIFRvb2xCYXJDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnYmFja2VuZFNlcnZpY2VzJ107XG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gVG9vbEJhckNvbnRyb2xsZXIoJGxvZywgYmFja2VuZFNlcnZpY2VzKSB7XG5cdCAgICB2YXIgdm0gPSB0aGlzO1xuXG5cdCAgICAvL2xvY2FsIGNvbnRyb2xlciB2YXJpYWJsZXNcblx0ICAgIHZhciBmYkNvbm5lY3QgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0ICAgIC8vbG9jYWwgdmlldyB2YXJpYWJsZXNcblx0XHRmYkNvbm5lY3QuY2hlY2tMb2dpblN0YXR1cygpXG5cdFx0LnRoZW4oZnVuY3Rpb24oc3RhdHVzKSB7XG5cdFx0XHR2bS5sb2dnZWRJbiA9IHN0YXR1cztcblx0XHR9KVxuXHRcdC5jYXRjaCgpXG5cblx0XHR2bS5jbGlja2VkID0gZnVuY3Rpb24oKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2J1dHRvbiBjbGlja2VkJyk7XG5cdFx0fVxuXG5cdFx0Ly9hY3Rpb25zXG5cdFx0XG5cdH1cblxuXHRyZXR1cm4gIGRpcmVjdGl2ZTtcblx0XHRcbn07IiwiLyogSG9zdGVkRXZlbnRzTGlzdC5kaXJlY3RpdmUuanMgKi9cblxuLyoqXG4qIEBkZXNjIGRpc3BsYXlzIGEgbGlzdCBvZiBhbGwgdGhlIGV2ZW50cyB0aGUgY3VycmVudCB1c2VyIGlzIGhvc3RpbmcuXG4qIEBleGFtcGxlIDxob3N0ZWQtZXZlbnRzLWxpc3Q+PC9ob3N0ZWQtZXZlbnRzLWxpc3Q+XG4qL1xuXG5hbmd1bGFyXG5cdC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcblx0LmRpcmVjdGl2ZSgnaG9zdGVkRXZlbnRzTGlzdCcsIGhvc3RlZEV2ZW50c0xpc3QpO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGhvc3RlZEV2ZW50c0xpc3QoKSB7XG5cdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0cmVzdHJpY3Q6ICdBRUNNJyxcblx0XHR0ZW1wbGF0ZVVybDogJy4uL3ZpZXdzL2RpcmVjdGl2ZXMvaG9zdGVkRXZlbnRzTGlzdC5kaXJlY3RpdmUuaHRtJyxcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdHNjb3BlOiB7XG5cdFx0XHRob3N0ZWRFdmVudHM6ICc9Jyxcblx0XHRcdHVzZXJJZDogJz0nXG5cdFx0fSxcblx0XHRsaW5rOiBsaW5rRnVuYyxcblx0XHRjb250cm9sbGVyOiBob3N0ZWRFdmVudHNMaXN0Q29udHJvbGxlcixcblx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHR9XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCwgYXR0ciwgY3RybCkge1xuICAgIH1cblxuICAgIGhvc3RlZEV2ZW50c0xpc3RDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAndHJhZmZpY1ZhbGV0J107XG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gaG9zdGVkRXZlbnRzTGlzdENvbnRyb2xsZXIoJGxvZywgdHJhZmZpY1ZhbGV0KSB7XG5cdCAgICB2YXIgdm0gPSB0aGlzO1xuXG5cdCAgICAvL2xvY2FsIHZhcmlhYmxlc1xuXHQgICAgdmFyIGhvc3RlZEV2ZW50c1NoZXJwYSA9IHRyYWZmaWNWYWxldDtcblxuXHQgICAgLy92aWV3IG1vZGVsIHZhcmlhYmxlc1xuXHQgICAgdm0uZ3Vlc3RzQXJlSW52aXRlZCA9IGZhbHNlO1xuXG5cdCAgICAvL2xvY2FsIG1ldGhvZHNcblx0ICAgIGZ1bmN0aW9uIHVuaXhUaW1lVG9EYXRlVGltZSh1bml4VGltZSkge1xuXHRcdFx0cmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KHVuaXhUaW1lKSk7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIGNvdW50R3Vlc3RzKGxpc3QpIHtcblx0XHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZVxuXHRcdFx0dmFyIGNvdW50ZXIgPSAwO1xuXG5cdFx0XHQvL2lmIHdlJ3JlIGNvdW50aW5nLCB0aGVuIHRoZXJlJ3MgYSBsaXN0LCBzbyB0aHJvdyB0aGUgZmxhZ1xuXHRcdFx0dm0uZ3Vlc3RzQXJlSW52aXRlZCA9IHRydWU7XG5cblx0XHRcdE9iamVjdC5rZXlzW2xpc3RdLmZvckVhY2goZnVuY3Rpb24oZ3Vlc3QpIHtcblx0XHRcdFx0Y291bnRlcisrO1xuXHRcdFx0fSlcblxuXHRcdFx0cmV0dXJuIGNvdW50ZXI7XG5cdFx0fVxuXG5cdFx0Ly92aWV3IG1vZGVsIG1ldGhvZHNcblx0XHR2bS5mb3JtYXREYXRlID0gZnVuY3Rpb24odW5peFRpbWUpIHtcblx0XHRcdC8vcmVmb3JtYXQgdGhlIHRpbWVcblx0XHRcdCRsb2cuaW5mbygnZ290IHRoaXN0IHRpbWU6ICcgKyB1bml4VGltZSk7XG5cdFx0XHRyZXR1cm4gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKTtcblx0XHR9XG5cblx0XHR2bS5ndWVzdHNBdHRlbmRpbmcgPSBmdW5jdGlvbihndWVzdExpc3QpIHtcblx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGd1ZXN0TGlzdCkpIHtcblx0XHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoZ3Vlc3RMaXN0WydhdHRlbmRpbmcnXSkpIHJldHVybiBjb3VudEd1ZXN0cyhndWVzdExpc3RbJ2F0dGVuZGluZyddKTtcblx0XHRcdFx0ZWxzZSByZXR1cm4gMDtcblx0XHRcdH1cblx0XHRcdGVsc2UgcmV0dXJuIDA7XG5cdFx0fVxuXG5cdFx0dm0uZ3Vlc3RzSW52aXRlZCA9IGZ1bmN0aW9uKGd1ZXN0TGlzdCkge1xuXHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoZ3Vlc3RMaXN0KSkge1xuXHRcdFx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XHRcdHZhciBndWVzdENvdW50ID0geyBhdHRlbmRpbmc6IDAsIHBlbmRpbmc6IDAsIGRlY2xpbmVkOiAwIH07XG5cblx0XHRcdFx0Ly9sb2NhbCBtZXRob2RzXG5cdFx0XHRcdGZ1bmN0aW9uIHRvdGFsR3Vlc3RDb3VudCgpIHtcblx0XHRcdFx0XHRyZXR1cm4gZ3Vlc3RDb3VudC5hdHRlbmRpbmcgKyBndWVzdENvdW50LnBlbmRpbmcgKyBndWVzdENvdW50LmRlY2xpbmVkO1xuXHRcdFx0XHR9IFxuXG5cdFx0XHRcdC8vY2hlY2sgdmFsdWVzXG5cdFx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGd1ZXN0TGlzdFsnYXR0ZW5kaW5nJ10pKSBndWVzdENvdW50LmF0dGVuZGluZyA9IGNvdW50R3Vlc3RzKGd1ZXN0TGlzdFsnYXR0ZW5kaW5nJ10pO1xuXHRcdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChndWVzdExpc3RbJ3BlbmRpbmcnXSkpIGd1ZXN0Q291bnQucGVuZGluZyA9IGNvdW50R3Vlc3RzKGd1ZXN0TGlzdFsncGVuZGluZyddKTtcblx0XHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoZ3Vlc3RMaXN0WydkZWNsaW5lZCddKSkgZ3Vlc3RDb3VudC5kZWNsaW5lZCA9IGNvdW50R3Vlc3RzKGd1ZXN0TGlzdFsnZGVjbGluZWQnXSk7XG5cblx0XHRcdFx0cmV0dXJuIHRvdGFsR3Vlc3RDb3VudCgpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSByZXR1cm4gMDtcblx0XHR9XG5cblx0XHR2bS5wZXJjZW50YWdlQXR0ZW5kaW5nID0gZnVuY3Rpb24oZ3Vlc3RMaXN0KSB7XG5cdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChndWVzdExpc3QpKSB7XG5cdFx0XHRcdHJldHVybiAoZ3Vlc3RzQXR0ZW5kaW5nKGd1ZXN0bGlzdCkgLyBndWVzdHNJbnZpdGVkKGd1ZXN0TGlzdCkpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSByZXR1cm4gMDtcblx0XHR9XG5cblx0XHR2bS5ldmVudENsaWNrZWQgPSBmdW5jdGlvbihldmVudElEKSB7XG5cdFx0XHQvL3JlZGlyZWN0IHRvIHRoZSBldmVudCBwYWdlXG5cdFx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIHRvOiAvZXZlbnQvJyArIGV2ZW50SUQgKyAnLycgKyB2bS5ob3N0ZWRFdmVudHNbZXZlbnRJRF0uaG9zdC51aWQgKyAnLycgKyB2bS51c2VySWQpO1xuXHRcdFx0aG9zdGVkRXZlbnRzU2hlcnBhLnJlZGlyZWN0VG8oJy9ldmVudCcsIGV2ZW50SUQsIHZtLmhvc3RlZEV2ZW50c1tldmVudElEXS5ob3N0LnVpZCwgdm0udXNlcklkKTtcblx0XHR9XG5cblx0XHQvL2FjdGlvbnNcblxuXHR9XG5cblx0cmV0dXJuICBkaXJlY3RpdmU7XG5cdFx0XG59OyIsIi8qIFRvb2xCYXIuZGlyZWN0aXZlLmpzICovXG5cbi8qKlxuKiBAZGVzYyB0b29sYmFyIGRpcmVjdGl2ZSB0aGF0IGlzIHVzZWQgb24gdGhlIG1haW4gcGFnZSBhY3Jvc3MgdGhlIGVudGlyZSBhcHAuXG4qIEBleGFtcGxlIDxkaXYgdG9vbC1iYXI+PC9kaXY+XG4qL1xuXG5hbmd1bGFyXG5cdC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcblx0LmRpcmVjdGl2ZSgndG9vbEJhcicsIHRvb2xCYXIpO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHRvb2xCYXIoKSB7XG5cdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0cmVzdHJpY3Q6ICdBRUNNJyxcblx0XHR0ZW1wbGF0ZVVybDogJy4uL3ZpZXdzL2RpcmVjdGl2ZXMvdG9vbEJhci5kaXJlY3RpdmUuaHRtJyxcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdHNjb3BlOiB7fSxcblx0XHRsaW5rOiBsaW5rRnVuYyxcblx0XHRjb250cm9sbGVyOiBUb29sQmFyQ29udHJvbGxlcixcblx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHR9XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCwgYXR0ciwgY3RybCkge1xuICAgIH1cblxuICAgIFRvb2xCYXJDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnYmFja2VuZFNlcnZpY2VzJ107XG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gVG9vbEJhckNvbnRyb2xsZXIoJGxvZywgYmFja2VuZFNlcnZpY2VzKSB7XG5cdCAgICB2YXIgdm0gPSB0aGlzO1xuXG5cdCAgICAvL2xvY2FsIGNvbnRyb2xlciB2YXJpYWJsZXNcblx0ICAgIHZhciBmYkNvbm5lY3QgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0ICAgIC8vbG9jYWwgdmlldyB2YXJpYWJsZXNcblx0XHRmYkNvbm5lY3QuY2hlY2tMb2dpblN0YXR1cygpXG5cdFx0LnRoZW4oZnVuY3Rpb24oc3RhdHVzKSB7XG5cdFx0XHR2bS5sb2dnZWRJbiA9IHN0YXR1cztcblx0XHR9KVxuXHRcdC5jYXRjaCgpXG5cblx0XHR2bS5jbGlja2VkID0gZnVuY3Rpb24oKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2J1dHRvbiBjbGlja2VkJyk7XG5cdFx0fVxuXG5cdFx0Ly9hY3Rpb25zXG5cdFx0XG5cdH1cblxuXHRyZXR1cm4gIGRpcmVjdGl2ZTtcblx0XHRcbn07IiwiYW5ndWxhclxuXHQubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcsIFtcblx0XHQnbmdSb3V0ZScsXG5cdFx0J25nVG91Y2gnLFxuXHRcdCdmaXJlYmFzZSdcblx0XSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
