function AnEventController(e,t){function n(){f.tempDateTime={start:"",end:""},f.newGuest={name:"",email:{address:"",valid:!1,style:{color:""}}},f.showIfHost=!1,f.hideIfAttending=!0,f.manageSections={1:{active:!0,complete:!1,style:{color:"black","background-color":"yellow"}},2:{active:!1,complete:!1,style:{color:"white","background-color":"gray"}},3:{active:!1,complete:!1,style:{color:"white","background-color":"gray"}}},u(),d(),f.showIfHost||m()}function s(e){return btoa(e)}function o(e){return atob(e)}function r(e){return Date.parse(e)}function a(){f.newGuest={name:"",email:{address:"",valid:!1,style:{color:""}}}}function l(n){e.info("adding them to the registered users list "+n),ref.child("Users").child(n).child("events").child("pending").child(t.uid).child(t.eventId).set({id:t.eventId,eventTimes:{start:f.event.eventTimes.start,end:f.event.eventTimes.end},name:f.event.name,host:t.uid},function(t){t&&e.info("there was an error"+t)}),ref.child("Users").child(n).child("events").child("pending").once("value",function(t){var i=t.val();e.info(t.val()),i.updated?(e.info("deleting updated"),ref.child("Users").child(n).child("events").child("pending").child("updated").remove(function(t){t&&e.info("Deleting failed: "+t.code)})):e.info("nothing to do")},function(t){t&&e.info("The read failed: "+t.code)})}function c(n){e.info("adding them to the UNREGISTERED users list "+n),ref.child("UnregisteredUsers").child(n).child("pending").child(t.uid).child(t.eventId).set({id:t.eventId,host:t.uid,eventTimes:{start:f.event.eventTimes.start,end:f.event.eventTimes.end},name:f.event.name},function(t){t&&e.info("there was an error"+t)})}function u(){var n=ref.getAuth();n.uid==t.hostId?(e.info("is the host"),f.showIfHost=!0):(e.info("not the host"),f.showIfHost=!1)}function d(){f.showIfHost||(e.info("check guest attendance"),userEvents.child("guestList").on("value",function(e){var n=e.val();f.hideIfAttending=!n[t.uid].attending}))}function m(){f.manageSections[1].active=!0,f.manageSections[2].active=!0,f.manageSections[3].active=!0}var f=this;f.tempTime={start:"",end:""},f.userIsHost=!1,f.setTempTime=function(e){"start"==e&&(f.tempDateTime.start=new Date),"end"==e&&(f.tempDateTime.end=new Date)},f.unixTimeToDateTime=function(e){return new Date(parseInt(e))},f.dateTimeToUnixTime=function(e){return Date.parse(e)},f.submit=function(){e.info("submitting the form now!")},f.backToUserEvents=function(){$location.path("/userEvents/"+t.uid+"/"+t.token)},f.eventRedirect=function(n,i){var s=n+"/"+t.uid+"/"+t.token;e.info("redirecting to: "+s),$location.path(s)},f.changeSection=function(t){for(e.info("are we here"),i=1;i<=3;i++)i==t?(f.manageSections[i].active=!0,f.manageSections[i].style["background-color"]="yellow",f.manageSections[i].style.color="black"):(f.manageSections[i].active=!1,f.manageSections[i].style["background-color"]="gray",f.manageSections[i].style.color="white")},f.saveEventTime=function(e,t){f.event.eventTimes||(f.event.eventTimes={start:"",end:""},f.event.eventTimes.start=f.dateTimeToUnixTime(f.tempDateTime.start),f.event.eventTimes.end=f.dateTimeToUnixTime(f.tempDateTime.end)),f.tempDateTime.end<f.tempDateTime.start&&"start"==t&&(f.tempDateTime.end=f.tempDateTime.start),"start"==t&&(f.event.eventTimes.start=f.dateTimeToUnixTime(e)),"end"==t&&(f.event.eventTimes.end=f.dateTimeToUnixTime(e))},f.guestsAreInvited=function(){return!!f.event.guestList},f.validateGuestEmail=function(){if(f.newGuest.email.address){var e=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","");e.test(f.newGuest.email.address)?(f.newGuest.email.valid=!0,f.newGuest.email.style={color:"green"}):(f.newGuest.email.valid=!1,f.newGuest.email.style={color:""})}},f.isSectionComplete=function(){for(i=0;i<8;i++)e.info(f.requiredInputs[i])},f.saveAndAdvance=function(){f.event.$save().then(function(){e.info("event saved")})["catch"](function(t){e.info("error! "+t)}),f.isSectionComplete(),1==f.manageSections[1].complete&&1==f.manageSections[2].complete&&1==f.manageSections[3].complete?f.eventRedirect("/userEvents",t.uid):f.manageSections[1].active?f.changeSection(2):f.manageSections[2].active?f.changeSection(3):f.manageSections[3].active&&f.changeSection(1)},f.addGuestToHostsList=function(){var n=s(f.newGuest.email.address);if(f.newGuest.name&&f.newGuest.email.valid){if(f.event.guestList)for(var i=0;f.event.guestList[i];){if(f.event.guestList[i].email==o(n))return e.info("This guest is already on the list"),void a();i++}else f.event.guestList={};if(registeredUsers[n]){if(registeredUsers[n]==t.uid)return e.info("tried to register the host"),void a();l(registeredUsers[n]),f.event.guestList[registeredUsers[n]]={attending:!1,status:"pending",name:f.newGuest.name,email:f.newGuest.email.address}}else c(n),f.event.guestList[n]={attending:!1,status:"pending",name:f.newGuest.name,email:f.newGuest.email.address};f.saveEvent(),a()}else e.info("you didn't enter a name and or email")},f.guestWillAttend=function(n){var i=ref.child("Users").child(t.uid).child("events"),s=0,o=!1;if(f.event.guestList[t.uid].attending=n,f.event.guestList[t.uid].status="attending",i.child("pending").on("value",function(o){var r=o.val();e.info(r),e.info(r[t.hostId]),e.info(r[t.hostId][t.eventId]);var a=r[t.hostId][t.eventId];e.info(a);for(invitation in r)s++;e.info("total attending: "+s),n&&i.child("attending").child(t.hostId).child(t.eventId).set(a,function(t){t&&e.info(t)})}),i.child("attending").on("value",function(t){var n=t.val();e.info("this is the attending list"),e.info(n),n.updated&&(o=!0)},function(t){t&&e.info(t)}),2>s){var a=new Date;i.child("pending").update({updated:r(a)},function(t){t&&e.info(t)})}i.child("pending").child(t.hostId).remove(),o&&e.info("removing the updated placeholder"),f.event.$save()},f.updateUpdatedParam=function(){var n=ref.child("Users").child(t.uid).child("events");e.info("updating the param"),n.child("attending").on("value",function(t){e.info(t.val())}),n.child("attending").child("updated").remove()},f.addInvitationToAttending=function(n){var i=ref.child("Users").child(t.uid).child("events"),s=0;i.child("pending").on("value",function(o){var r=o.val(),a=r[t.hostId][t.eventId];e.info(r),e.info(r[t.hostId]),e.info(r[t.hostId][t.eventId]);for(invitation in r)s++;e.info("total pending invitations: "+s),e.info(n),n&&i.child("attending").child(t.hostId).child(t.eventId).set(a,function(t){t&&e.info(t)})})},n()}function GuestEventController(e){e.info("into the GuestEventController")}function HostEventController(e,t,n,i,s,o){function r(e){return new Date(parseInt(e))}function a(e){return Date.parse(e)}function l(e,t){return(a(t)-a(e))/6e4}function c(e){"open"==e?(v.actionBtn.btn["class"]["btn-success"]=!0,v.actionBtn.btn["class"]["btn-warning"]=!1,v.actionBtn.btn.message="Save Event"):"close"==e&&(v.actionBtn.btn["class"]["btn-success"]=!1,v.actionBtn.btn["class"]["btn-warning"]=!0,v.actionBtn.btn.message="Add Info")}function u(e){w+=e,v.progressBar.complete=w,v.progressBar.style.width=w+"%",v.progressBar.message=w+"%",w>99&&c("open"),99>w&&c("close")}function d(){var e=new Date;e.setHours(e.getHours()+Math.round(e.getMinutes()/60)),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),v.tempTime.start=e,v.tempTime.end=e,v.tempTime.duration=l(v.tempTime.start,v.tempTime.end)}function m(){angular.isDefined(v.tempEvent.eventTimes.start)&&(v.tempTime.start=r(v.tempEvent.eventTimes.start),v.tempTime.end=r(v.tempEvent.eventTimes.end))}function f(){if(t.info(p.getActiveEvent()),p.thereIsAnActiveEvent()){t.info("loading the active event");var e=p.getActiveEvent();v.progressBar=e.progressBar,w=e.percentComplete,v.tempEvent=e.event,v.requiredFieldComplete=e.requiredFields,t.info(v.progressBar)}else p.loadAnEventProgressively(n.uid,n.eventId).then(function(e){v.tempEvent=e,m()})["catch"](function(e){t("the error is: "+e)});v.activeSection=parseInt(n.section),d()}var v=this,g=s,p=i,h=o,w=0;v.activeSection=1,v.tempTime={start:"",end:"",duration:""},v.progressBar={complete:v.percentComplete,style:{width:v.percentComplete+"%"},message:v.percentComplete+"%"},v.actionBtn={div:{"class":{"col-xs-6":!0,"col-sm-6":!0}},btn:{"class":{btn:!0,"btn-success":!1,"btn-warning":!0,"pull-right":!0},message:"Add Info"}},v.tempEvent={},v.requiredFieldComplete=h.generateEventRequirnments(),v.formatDuration=function(){v.tempTime.duration=l(v.tempTime.start,v.tempTime.end);var e=Math.floor(v.tempTime.duration/60),t=v.tempTime.duration%60,n=Math.round(t/15)/4;return e+n+" h"},v.validateTime=function(e){v.tempTime.duration>24&&v.settingTempStart();var t={eventStart:v.tempTime.start,eventEnd:v.tempTime.end};angular.isDefined(t[e])&&""!=t[e]&&v.tempTime.duration>0?(0==v.requiredFieldComplete[e].completed&&u(11),v.requiredFieldComplete[e].completed=!0,v.requiredFieldComplete[e].row["class"]["has-success"]=!0,v.requiredFieldComplete[e].row["class"]["has-feedback"]=!0,v.requiredFieldComplete[e].row["class"]["has-error"]=!1):(1==v.requiredFieldComplete[e].completed&&u(-11),v.requiredFieldComplete[e].completed=!1,v.requiredFieldComplete[e].row["class"]["has-success"]=!1,v.requiredFieldComplete[e].row["class"]["has-feedback"]=!1,v.requiredFieldComplete[e].row["class"]["has-error"]=!0)},v.settingTempStart=function(){t.info(a(v.tempTime.end)-a(v.tempTime.start)/864e5),(a(v.tempTime.end)<=a(v.tempTime.start)||a(v.tempTime.end)-a(v.tempTime.start)>864e5)&&(oldStart=a(v.tempTime.start),oldEnd=a(v.tempTime.end),newEnd=oldStart+36e5,v.tempTime.end=r(newEnd))},v.settingTempEnd=function(){v.tempTime.start>v.tempTime.end&&(v.tempTime.start=v.tempTime.end),v.validateTime("eventEnd"),v.tempTime.duration=l(v.tempTime.start,v.tempTime.end)},v.backToUserEvents=function(){w>99&&(p.saveNewHostingEvent("hosting",v.tempEvent),p.setRemoteEventsFromLocal("hosting",v.tempEvent).then(function(e){t.info(e)})["catch"](function(e){t.info(e)})),g.redirectTo("/userEvents",n.uid)},v.sectionBack=function(){var e={event:v.tempEvent,progressBar:v.progressBar,percentComplete:w,requiredFields:v.requiredFieldComplete};p.setActiveEvent(e),targetSection=v.activeSection-1,g.redirectTo("/event/host",n.eventId,n.uid,targetSection)},v.sectionForward=function(){var e={event:v.tempEvent,progressBar:v.progressBar,percentComplete:w,requiredFields:v.requiredFieldComplete};p.setActiveEvent(e),targetSection=v.activeSection+1,g.redirectTo("/event/host",n.eventId,n.uid,targetSection)},v.verifyRequired=function(e,t){angular.isDefined(t)&&""!=t?(0==v.requiredFieldComplete[e].completed&&u(11),v.requiredFieldComplete[e].completed=!0,v.requiredFieldComplete[e].row["class"]["has-success"]=!0,v.requiredFieldComplete[e].row["class"]["has-feedback"]=!0,v.requiredFieldComplete[e].row["class"]["has-error"]=!1):(1==v.requiredFieldComplete[e].completed&&u(-11),v.requiredFieldComplete[e].completed=!1,v.requiredFieldComplete[e].row["class"]["has-success"]=!1,v.requiredFieldComplete[e].row["class"]["has-feedback"]=!1,v.requiredFieldComplete[e].row["class"]["has-error"]=!0)},v.saveEventToDB=function(){w>99&&(p.saveNewHostingEvent("hosting",v.tempEvent),p.setRemoteEventsFromLocal(n.uid,v.tempEvent).then(function(e){t.info(e)})["catch"](function(e){t.info(e)}),g.redirectTo("/userEvents",n.uid))},e.$watch("vm.tempEvent.guestList",function(e,t){angular.isObject(v.tempEvent.guestList)&&u(12)}),f()}function LandingPageController(e,t,n,s,o){function r(e){return btoa(e)}function a(e){return Date.parse(e)}function l(i,s){var o=i+"/"+d.uid+"/"+d.token;t.info("redirecting to: "+o),n.path(o),e.$apply()}var c=this,u="https://meetupplanner.firebaseio.com/",d={};c.showRequirnments=!1,c.validNewName={valid:!1,style:{color:""}},c.validNewEmail={valid:!1,style:{color:""}},c.securePassword={secure:!1,style:{color:""}},c.unlockCreateUserBtn={usable:!1,"class":"btn btn-warning"},c.message="testing",c.validUserEmail={valid:!1,style:{color:""}},c.validUserPassword={valid:!1,style:{color:""}},c.unclockUserLoginBtn={usable:!1,"class":"btn btn-warning"},c.passwordRequirnments={0:{constraint:"Is at least 16 characters long",style:{color:"red"},met:!1},1:{constraint:"Is no longer than 100 characters",style:{color:"red"},met:!1},2:{constraint:"Contains at least one required symbol (!@#$%^&*)",style:{color:"red"},met:!1},3:{constraint:"Contains at least one number",style:{color:"red"},met:!1},4:{constraint:"Contains at least one lowercase letter",style:{color:"red"},met:!1},5:{constraint:"Contains at least one uppercase letter",style:{color:"red"},met:!1},6:{constraint:"Doesn't have any illegal characters",style:{color:"red"},met:!1}},c.displayPassReqs=function(){c.newName&&c.newEmail?c.showRequirnments=!0:c.showRequirnments=!1},c.checkNewName=function(){c.newName&&(c.newName.length>0?(c.validNewName.valid=!0,c.validNewName.style={color:"green"}):(c.validNewName.valid=!1,c.validNewName.style={color:"red"})),c.openCreateUserButton()},c.checkNewEmail=function(){if(c.newEmail){var e=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","");e.test(c.newEmail)?(c.validNewEmail.valid=!0,c.validNewEmail.style={color:"green"}):(c.validNewEmail.valid=!1,c.validNewEmail.style={color:"red"})}c.openCreateUserButton()},c.checkUserEmail=function(){if(c.userEmail){var e=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","");e.test(c.userEmail)?(c.validUserEmail.valid=!0,c.validUserEmail.style={color:"green"}):(c.validUserEmail.valid=!1,c.validUserEmail.style={color:"red"})}c.openUserLoginBtn()},c.checkNewPasswords=function(){var e={0:[""," your password needs to be 16 characters or longer"],1:[""," your password needs to be less than 100 characters"],2:["[!@#$%^&*]"," no required symbols found"],3:["[0-9]"," no numbers found"],4:["[a-z]"," no lowercase letters found"],5:["[A-Z]"," no uppercase letters found"],6:["[^A-z0-9!@#$%^&*]"," illegal characters found"]};if(c.newPassword){for(c.newPassword.length>15?(c.passwordRequirnments[0].style={color:"green"},c.passwordRequirnments[0].met=!0):(c.passwordRequirnments[0].style={color:"red"},c.passwordRequirnments[0].met=!1),c.newPassword.length<=100?(c.passwordRequirnments[1].style={color:"green"},c.passwordRequirnments[1].met=!0):(c.passwordRequirnments[1].style={color:"red"},c.passwordRequirnments[1].met=!1),i=2;i<6;i++){var t=new RegExp(e[i][0],"");t.test(c.newPassword)?(c.passwordRequirnments[i].style={color:"green"},c.passwordRequirnments[i].met=!0):(c.passwordRequirnments[i].style={color:"red"},c.passwordRequirnments[i].met=!1)}var t=new RegExp(e[6][0],"");t.test(c.newPassword)?(c.passwordRequirnments[6].style={color:"green"},c.passwordRequirnments[6].met=!0):(c.passwordRequirnments[6].style={color:"red"},c.passwordRequirnments[6].met=!1),c.passwordRequirnments[0].met&&c.passwordRequirnments[1].met&&c.passwordRequirnments[2].met&&c.passwordRequirnments[3].met&&c.passwordRequirnments[4].met&&c.passwordRequirnments[5].met&&c.passwordRequirnments[6].met?c.securePassword.secure=!0:c.securePassword.secure=!1,c.securePassword.secure?c.securePassword.style={color:"green"}:c.securePassword.style={color:"red"}}c.openCreateUserButton()},c.checkUserPasswords=function(){c.userPassword&&(c.userPassword.length>15?(c.validUserPassword.style={color:"green"},c.validUserPassword.valid=!0):(c.validUserPassword.style={color:"red"},c.validUserPassword.valid=!1)),c.openUserLoginBtn()},c.openCreateUserButton=function(){c.validNewName.valid&&c.validNewEmail.valid&&c.securePassword.secure?(c.unlockCreateUserBtn["class"]="btn btn-success",c.unlockCreateUserBtn.usable=!0):(c.unlockCreateUserBtn["class"]="btn btn-warning",c.unlockCreateUserBtn.usable=!1)},c.openUserLoginBtn=function(){c.validUserEmail.valid&&c.validUserPassword.valid?(c.unclockUserLoginBtn["class"]="btn btn-success",c.unclockUserLoginBtn.usable=!0):(c.unclockUserLoginBtn["class"]="btn btn-warning",c.unclockUserLoginBtn.usable=!1)},c.update=function(){c.newName=s.find("#newName")[0].value,c.newEmail=s.find("#newEmail")[0].value,c.userEmail=s.find("#userEmail")[0].value,c.checkNewName(),c.checkNewEmail(),c.checkUserEmail()},c.createNewUser=function(){if(t.info("Creating a new user account now!"),c.unlockCreateUserBtn.usable){var e=new Firebase(u);e.createUser({email:c.newEmail,password:c.newPassword},function(n,i){if(n)t.info("Error creating user: "+n);else{t.info(i),d=i;var s=e.child("Users/"+i.uid),o=new Date;s.set({bio:{name:c.newName,email:c.newEmail},events:{pending:{updated:a(o)},hosting:{updated:a(o)},attending:{updated:a(o)},completed:{updated:a(o)}}},function(e){e?t.info("Data could not be saved: "+e):t.info("Data saved successfully.")}),e.child("Uids").child(r(c.newEmail)).set(d.uid,function(e){e?t.info("Data could not be saved. "+e):t.info("uid created sucessfully.")}),l("/userInformation",d)}})}},c.loginRegisteredUser=function(){if(c.unclockUserLoginBtn.usable){var n=new Firebase(u);n.authWithPassword({email:c.userEmail,password:c.userPassword},function(n,i){n?t.info("Error Logging In: "+n):(t.info("Logged In successfully: "+i.uid),t.info(i),d=i,l("/userInformation",d),e.$apply())})}},c.alertMe=function(){alert("this is working! an alert!")},c.onResizeFunction=function(){var e=angular.element(".inputText");o.outerWidth>o.outerHeight?(e.css("font-size","2em"),t.info("making bigger")):e.css("font-size","1.2em")},"addEventListener"in s&&s.addEventListener("DOMContentLoaded",function(){t.info("adding FastClick"),FastClick.attach(s.body)},!1),angular.element(o).bind("resize",function(){c.onResizeFunction()}),angular.element(s).ready(function(){o.outerWidth<600&&c.onResizeFunction()}),c.master={},c.update=function(e){c.master=angular.copy(e)},c.reset=function(e){e&&(e.$setPristine(),e.$setUntouched()),c.user=angular.copy(c.master)},c.reset()}function MainController(e,t,n,i){function s(){angular.element(n);n.css("hight",i.outerHeight)}var o=this,r="https://meetupplanner.firebaseio.com/",a=new Firebase(r);o.logout=function(){alert("logging you out!"),a.unauth(),t.path("/")},angular.element(n).ready(function(){s()})}function NewUserSignUpController(e,t,n,s,o,r){function a(){""!=l.errors.name||""!=l.errors.email||l.errors.password?l.errors.passesAllTests=!1:l.errors.passesAllTests=!0,angular.isDefined(l.inputs.newName)&&""!==l.inputs.newName&&angular.isDefined(l.inputs.newEmail)&&""!==l.inputs.newEmail&&angular.isDefined(l.inputs.newPassword)&&""!==l.inputs.newPassword?l.inputs.requiredFieldsDefined=!0:l.inputs.requiredFieldsDefined=!1}var l=this;l.inputs={newName:"",newEmail:"",newPassword:"",requiredFieldsDefined:!1},l.errors={name:"",email:"",password:!1,passesAllTests:!1},l.passReqs={0:{id:"",req:"Is at least 16 characters long",fulfilled:!1,style:{color:"red"}},1:{id:"",req:"Is no longer than 100 characters",fulfilled:!1,style:{color:"red"}},2:{id:"",req:"Contains at least one lowercase letter",fulfilled:!1,style:{color:"red"}},3:{id:"",req:"Contains at least one uppercase letter",fulfilled:!1,style:{color:"red"}},4:{id:"",req:"Contains at least one number",fulfilled:!1,style:{color:"red"}},5:{id:"",req:"Contains at least one required symbol (!@#$%^&*)",fulfilled:!1,style:{color:"red"}},6:{id:"",req:"Doesn't have any illegal characters",fulfilled:!0,style:{color:"red"}}},l.showReqsBox=!1;var c=n;l.checkNewName=function(){var e=[],t=c.required(l.inputs.newName),n=c.minNameLength(l.inputs.newName);angular.isDefined(t)&&e.push(t),angular.isDefined(n)&&e.push(n),e.length>0?l.errors.name=e.join(", "):l.errors.name="",a()},l.checkNewEmail=function(){var e=[],t=c.required(l.inputs.newEmail),n=c.email(l.inputs.newEmail);angular.isDefined(t)&&e.push(t),angular.isDefined(n)&&e.push(n),e.length>0?l.errors.email=e.join(", "):l.errors.email="",a()},l.checkNewPassword=function(){l.showReqsBox=!0;var e=[],t=c.required(l.inputs.newPassword),n=[c.minPassLength(l.inputs.newPassword),c.maxPassLength(l.inputs.newPassword),c.atLeastOneLowercase(l.inputs.newPassword),c.atLeastOneUppercase(l.inputs.newPassword),c.atLeastOneNumber(l.inputs.newPassword),c.atLeastOneSymbol(l.inputs.newPassword),c.illegalCharacter(l.inputs.newPassword)];angular.isDefined(t)&&e.push(t),e.length>0?l.errors.password=e.join(", "):l.errors.email="";var s=!1;for(i=0;i<7;i++)n[i]?(l.passReqs[i].fulfilled=!0,l.passReqs[i].style={color:"green"}):(l.passReqs[i].fulfilled=!1,l.passReqs[i].style={color:"red"},s=!0);l.errors.password=s,a()},l.exitPassword=function(){l.checkNewPassword(),l.showReqsBox=!1},l.createNewUser=function(){var e=o;if(l.errors.passesAllTests&&l.inputs.requiredFieldsDefined){var n=s,i=r;n.createNewUser(l.inputs.newEmail,l.inputs.newPassword).then(function(s){i.loadPrimaries(l.inputs.newEmail,l.inputs.newName,s.uid),n.addNewUserToDatabase(s.uid,l.inputs.newName,l.inputs.newEmail).then(function(i){t.info(i),n.addNewUserToRegUsersList(s.uid,l.inputs.newEmail).then(function(n){e.redirectTo("/userInformation",s.uid),t.info(n)})["catch"](function(e){t.info(e)})})["catch"](function(e){t.info(e)})})["catch"](function(e){t.info(e)})}}}function RegUserLoginController(e,t,n,i,s){function o(){angular.isDefined(r.inputs.email)&&""!==r.inputs.email&&angular.isDefined(r.inputs.password)&&""!==r.inputs.password?(r.inputs.requiredFieldsDefined=!0,r.unclockUserLoginBtn["class"]="btn btn-success",r.unclockUserLoginBtn.message="Login",r.unclockUserLoginBtn.usable=!0):(r.inputs.requiredFieldsDefined=!1,r.unclockUserLoginBtn["class"]="btn btn-warning",r.unclockUserLoginBtn.message="Need Email & Pass",r.unclockUserLoginBtn.usable=!1)}var r=this;r.inputs={email:"",password:"",requiredFieldsDefined:!1},r.errors={message:"",passesAllTests:!0},r.unclockUserLoginBtn={usable:!1,"class":"btn btn-warning",message:"Need Email & Pass"},r.update=function(){r.inputs.email=t.find("#userEmail")[0].value,r.inputs.password=t.find("#userPassword")[0].value,o()},r.loginRegisteredUser=function(){var t=i,o=n,a=s;o.LoginRegisteredUser(r.inputs.email,r.inputs.password).then(function(e){r.errors.passesAllTests=!0,a.setPrimariesLocally(r.inputs.email,r.inputs.name,e.uid)}).then(function(){e.info("uid is "+a.getUIDLocally()),o.getUserBio(a.getUIDLocally()).then(function(t){a.updateBioLocally(t),o.getUserEvents(a.getUIDLocally()).then(function(e){a.updateAllUserEventsLocally(e)})["catch"](function(t){e.info(t)})})["catch"](function(t){e.info(t)}),t.redirectTo("/userInformation",a.getUIDLocally())})["catch"](function(e){r.errors.message=e,r.errors.passesAllTests=!1})},r.clicked=function(){var e=n;e.logUserOut()}}function topMenuController(e,t,n,i,s){function o(e){e?(t.info("User "+e.uid+" is logged in with "+e.provider),a.loggedIn=!0):(t.info("User is logged out"),a.loggedIn=!1)}function r(e,i){var s=e+"/"+i.uid+"/"+i.token;t.info("redirecting to: "+s),n.path(s)}var a=this,l="https://meetupplanner.firebaseio.com/",c=new Firebase(l);a.loggedIn=!1,"addEventListener"in i&&i.addEventListener("DOMContentLoaded",function(){t.info("adding FastClick"),FastClick.attach(i.body)},!1),angular.element(s).bind("resize",function(){a.onResizeFunction(),e.$apply()}),angular.element(i).ready(function(){s.outerWidth<600&&(a.onResizeFunction(),e.$apply())}),a.logout=function(){t.info("logging out!"),a.loggedIn=!1,c.unauth(),r("/",{uid:"",token:""})},a.navBarLoginRegisteredUser=function(){t.info("launching login");var n=new Firebase(l);n.authWithPassword({email:a.navbarUserEmail,password:a.navbarUserPass},function(n,i){n?t.info("Error Logging In: "+n):(t.info("Logged In successfully: "+i.uid),t.info(i),r("/userInformation",i),e.$apply(),angular.element(".navbar-toggle").click())})},a.onResizeFunction=function(){var e=angular.element(".navbarInputs");e.css("width",s.outerWidth-26+"px")},c.onAuth(o)}function UserEventsController(e,t,n,i){function s(e){return Date.parse(e)}function o(){var e=0;for(event in c.events.hosting)e++;return e}function r(){var e=new Date,t=10*s(e)+o();return t}function a(){Object.keys(c.events).forEach(function(e){Object.keys(c.events[e]).forEach(function(t){var n=0;angular.isObject(c.events[e][t])&&n++,n>0?c.sectionAvailable[e]=!0:c.sectionAvailable[e]=!1})})}function l(){e.info(u.getAllUserEventsLocally()),u.setUIDLocally(t.uid),u.loadBio(t.uid).then(function(e){c.userBio=e})["catch"](),c.events=u.getAllUserEventsLocally(),u.getRemoteEventsForLocal().then(function(t){e.info("checking the db for events"),c.events=u.getAllUserEventsLocally()}).then(function(){a()})}var c=this,u=n;c.showDecline=!1,c.userBio={},c.events={},c.sectionAvailable={pending:!1,attending:!1,hosting:!1,completed:!1},c.errors={},c.createNewEvent=function(){var e=r(),t=i;u.createNewEvent(e),t.redirectTo("/event",e,u.getUIDLocally(),u.getUIDLocally())},l()}function UserInformationController(e,t,n,i,s){function o(e){return new Date(parseInt(e))}function r(e){return Date.parse(e)}function a(){c.loadBio(n.uid).then(function(e){l.user=e,angular.isDefined(e.dob)&&""!==e.dob&&(l.tempBirthday=o(e.dob))})}var l=this,c=i;l.user={},l.tempBirthday,l.view={dataToSave:!1,isData:!1,btnMssg:"Move On...",proceedBtn:"btn btn-primary"},l.checkValues=function(){l.view.isData=!0,!angular.isUndefined(l.user.company)&&""!==l.user.company||!angular.isUndefined(l.user.title)&&""!==l.user.title||!angular.isUndefined(l.user.dob)&&""!==l.user.dob?(l.view.dataToSave=!0,l.view.proceedBtn="btn btn-success",l.view.btnMssg="Save & Continue"):(l.view.dataToSave=!1,l.view.proceedBtn="btn btn-primary",l.view.btnMssg="Move On...")},l.updateDOB=function(){l.user.dob=r(l.tempBirthday),l.checkValues()},l.saveAndMoveOn=function(){var t=s,i=c.getUIDLocally();0!==l.tempBirthday&&l.updateDOB(),(""==i||angular.isUndefined(i))&&c.setUIDLocally(n.uid),l.view.isData&&(e.info("saving the new data"),c.updateBioLocally(l.user)),t.redirectTo("/userEvents",l.user.uid)},a()}function authService(e,t){function n(){var e=t;e.checkLoginStatus().then(function(e){return e})["catch"](function(e){return e})}var i={isLoggedIn:n};return i}function backendServices(e,t,n){function i(e){return btoa(e)}function s(e){return atob(e)}function o(e){return new Date(parseInt(e))}function r(e){return Date.parse(e)}function a(e,n){var i=new Firebase(I);return t(function(t,s){i.createUser({email:e,password:n},function(e,n){e?s("Error creating user: "+e):t(n)})})}function l(e,n,i){var s=new Firebase(I),o=s.child("Users").child(e),a=new Date;return t(function(t,s){o.set({bio:{uid:e,name:n,email:i},events:{pending:{updated:r(a)},hosting:{updated:r(a)},attending:{updated:r(a)},completed:{updated:r(a)}}},function(e){e?s("Data could not be saved: "+e):t("Data saved successfully.")})})}function c(e,n){var s=new Firebase(I),o=i(n),r=s.child("Uids").child(o);return t(function(t,n){r.set(e,function(e){e?n("Data could not be saved. "+e):t("uid created sucessfully.")})})}function u(n,i){var s=new Firebase(I);return t(function(t,o){s.authWithPassword({email:n,password:i},function(n,i){n?o("Error Logging In: "+n):(e.info("Logged In successfully: "+i.uid),t(i))})})}function d(){var t=new Firebase(I);return new Promise(function(n,i){t.onAuth(function(t){t?(e.info("User "+t.uid+" is logged in with "+t.provider),n(!0)):(e.info("User is logged out"),n(!1))})})}function m(){var t=new Firebase(I);e.info("logging user out"),t.unauth()}function f(e){var n=new Firebase(I),i=e.uid,s=n.child("Users").child(i);return t(function(t,n){s.update(e,function(e){e?n("There was a problem updating that record: "+e):t("all user data uploaded successfully")})})}function v(e){var n=new Firebase(I),i=e.uid.toString(),s=n.child("Users").child(i).child("bio");return t(function(t,n){s.update(e,function(e){e?n("There was a problem updating that record: "+e):t("all user bio data uploaded successfully")})})}function g(){}function p(e){var n=new Firebase(I),i=n.child("Users").child(e).child("bio");return t(function(e,t){i.once("value",function(t){e(t.val())},function(e){e&&t(e)})})}function h(n,i){e.info("got passed..."),e.info(n),e.info(i);var s=new Firebase(I),o=i.id,r=s.child("Users").child(n).child("events").child("hosting").child(o);return t(function(e,t){r.set(i,function(n){n?t("There was an error: "+n):e("New event saved to DB successfully")})})}function w(e,n,i,s){var o=new Firebase(I),r=o.child("Users").child(s).child("events").child("hosting").child(i).child("guestList").child(n);return t(function(t,n){r.set({rsvpd:!1,status:"pending",name:e},function(e){e?n("There was an error: "+e):t("New event saved to DB successfully")})})}function b(e){var n=new Firebase(I),i=n.child("Users").child(e).child("events");return t(function(e,t){i.orderByKey().once("value",function(t){var n=t.val(),i={hosting:n.hosting,attending:n.attending,pending:n.pending,completed:n.completed};e(i)},function(e){e&&t(e)})})}function E(e,n){var i=new Firebase(I),s=i.child("Users").child(e).child("events").child("hosting").child(n);return t(function(e,t){s.once("value",function(t){var n=t.val();e(n)},function(e){e&&t(e)})})}function U(n){var i=new Firebase(I),s=i.child("Uids");return t(function(t,i){s.once("value",function(s){var o=s.val();Object.keys(o).forEach(function(s){e.info("from list: "+s+", matching to: "+n),s==n?t(o[s]):i("No user by that email")})})})}function y(e,n){var i=new Firebase(I),s=i.child("Users").child(e).child("events").child("hosting").child(n).child("guestList");return t(function(e,t){s.once("value",function(t){var n=t.val();e(n)},function(e){e&&t("There was an error getting the guest list: "+e)})})}function L(e,t,n){}function T(e,n){var i=new Firebase(I),s=i.child("Users").child(n).child("events").child(e).child("updated");return t(function(e,t){s.set(null,function(n){n?t("There was an error deleting update field: "+n):e("Deleted update successfully")})})}function D(e,n){var i=new Firebase(I),s=i.child("Users").child(e).child("events").child("hosting").child(n);return t(function(e,t){var n=function(n){n?t("Synchronization failed"):e("Synchronization succeeded")};s.remove(n)})}function C(e,n){var i=new Firebase(I),s=i.child("Users").child(n).child("events").child(e);return t(function(e,t){s.once("value",function(n){var i=n.val();angular.isDefined(i.updated)?e(!0):t(!1)},function(e){e&&t(e)})})}var I="https://meetupplanner.firebaseio.com/",A={utf8_to_b64:i,b64_to_utf8:s,unixTimeToDateTime:o,dateTimeToUnixTime:r,LoginRegisteredUser:u,checkLoginStatus:d,logUserOut:m,downloadUserData:g,getUserBio:p,getUserEvents:b,getAHostedEvent:E,getAnInvitedEvent:L,findGuestUID:U,getGuestListForEvent:y,createNewUser:a,addNewUserToDatabase:l,addNewUserToRegUsersList:c,uploadUserData:f,uploadUserBio:v,createHostedEvent:h,addGuestToHostGuestListonDB:w,deleteUpdateField:T,removeIncompleteEvent:D,thereWasAnUpdateField:C};return A}function trafficValet(e,t){function n(n,i,s,o){angular.isDefined(i)?(n=n+"/"+i,angular.isDefined(s)&&(n=n+"/"+s,angular.isDefined(o)&&(n=n+"/"+o,e.info("redirecting now to "+n),t.path(n)),e.info("redirecting now to "+n),t.path(n)),e.info("redirecting now to "+n),t.path(n)):(e.info("redirecting now to "+n),t.path(n))}function i(n,i,s,o){if(e.info("Traffic valet accessed"),e.info("eventId: "+n),e.info("hostId: "+i),e.info("userId: "+s),angular.isUndefined(o)&&(o=1),i===s){var r="/event/host/"+n+"/"+s+"/"+o;e.info(r),t.path(r)}else{var r="/event/guest/"+n+"/"+s+"/"+i;e.info(r),t.path(r)}}var s={redirectTo:n,eventRoute:i};return s}function userData(e,t,n){function i(e){return btoa(e)}function s(e){return Date.parse(e)}function o(){return""!==ee.bio.uid&&""!==ee.bio.name&&""!==ee.bio.email}function r(e,t){return!!angular.isDefined(ee.events[e][t])}function a(e,t){return angular.isDefined(ee.bio.email)&&""!=ee.bio.email?e==ee.bio.email:ee.events.hosting[t].host.email==e}function l(t,n){return angular.isDefined(ee.events.hosting[n].guestList)?(e.info("there is a guest list"),refEmail=i(t),Object.keys(ee.events.hosting[n].guestList).forEach(function(t){return refEmail==t?(e.info("an email match was found, this guest has been invited already"),!0):(e.info("no email match found, ok to invite guest"),!1)}),void 0):(e.info("no guestlist"),!1)}function c(){return!!angular.isDefined(te.event);
}function u(e){Object.keys(ee.events[e]).forEach(function(t){angular.isObject(ee.events[e][t])||delete ee.events[e][t]})}function d(){return ee.bio.uid}function m(){return ee.bio.name}function f(){return ee.bio.email}function v(){return ee.bio.company}function g(){return ee.bio.title}function p(){return ee.bio.dob}function h(){return{uid:ee.bio.uid,name:ee.bio.name,email:ee.bio.email,company:ee.bio.company,title:ee.bio.title,dob:ee.bio.dob}}function w(e,t){return ee.events[e][t]}function b(e){return ee.events[e]}function E(){return ee.events}function U(){return te}function y(e){ee.bio.uid=e}function L(e){ee.bio.name=e}function T(e){ee.bio.email=e}function D(e){ee.bio.company=e}function C(e){ee.bio.title=e}function I(e){ee.bio.dob=e}function A(e,t,n){angular.isDefined(e)&&T(e),angular.isDefined(t)&&L(t),angular.isDefined(n)&&y(n)}function B(e,t){var n=t.id;u(e),ee.events[e][n]=t}function $(e){ee.events=e}function F(e){L(e.name),T(e.email),D(e.company),C(e.title),I(e.dob),O()}function q(e,s,o,r,a){var l=n;return t(function(t,n){angular.isDefined(s)&&(o=i(s)),l.addGuestToHostGuestListonDB(e,o,r,a).then(function(e){t(e)})["catch"](function(e){n(e)})})}function k(e){te=e}function R(t){var n=t.uid;angular.isObject(te.event.guestList)||(e.info("creating the object"),te.event.guestList={}),e.info(te.event),te.event.guestList[n]=t.guest,e.info(te.event.guestList[n])}function S(e){var s=n;return t(function(t,n){guestEmail=i(e),s.findGuestUID(guestEmail).then(function(e){t(e)})["catch"](function(e){n(e)})})}function N(e,t){delete ee.events[e][t.id]}function P(){var e=n;e.downloadUserData().then(function(e){ee=e})}function G(e){var i=n;return t(function(t,n){i.getUserBio(e).then(function(e){t(e)})["catch"](function(e){n("There was an error reading the user bio: "+e)})})}function z(){var e=n;return t(function(t,n){e.getUserEvents(d()).then(function(e){Object.keys(e).forEach(function(t){Object.keys(e[t]).forEach(function(n){B(t,e[t][n])})}),t(e)})["catch"](function(e){n("There was an error reading the user events: "+e)})})}function j(e){var i=n;return t(function(t,n){i.getAHostedEvent(d(),e).then(function(e){t(e)})["catch"](function(e){n("There was an error reading the user event: "+e)})})}function x(){var e=n;e.uploadUserData(ee)}function O(){var e=n;e.uploadUserBio(ee.bio)}function M(){}function H(e,i){var s=n;return t(function(t,n){s.createHostedEvent(e,i).then(function(e){t(e)})["catch"](function(e){n(e)})})}function V(i){var s=n;return t(function(t,n){s.thereWasAnUpdateField(i,d()).then(function(t){s.deleteUpdateField(i,d()).then(function(t){e.info(t)})["catch"](function(t){e.info(t)})})["catch"](function(t){e.info(t)})})}function _(e,i){var s=n;return t(function(t,n){s.getGuestListForEvent(e,i).then(function(e){t(e)})["catch"](function(e){n(e)})})}function W(e){var i=n;return t(function(t,n){i.removeIncompleteEvent(ee.getUIDLocally,e).then(function(e){t(e)})["catch"](function(e){n(e)})})}function Z(e){return t(function(t,n){o()?t(h()):G(e).then(function(e){A(e.email,e.name,e.uid),t(e)})["catch"](function(e){n(e)})})}function K(e,n){return y(e),t(function(e,t){j(n).then(function(t){e(t)})["catch"](),r("hosting",n)&&e(w("hosting",n))})}function J(e){var n={};return t(function(e,t){z().then(function(t){e(t)}),n=b(type),e(n)})}function Q(e){var t={},n=new Date;n.setMinutes(0,0,0);var i=s(n);t={id:e,name:"",type:"",host:{name:ee.bio.name,uid:ee.bio.uid,email:ee.bio.email},message:"",eventTimes:{start:i,end:i+36e5},address:{street01:"",street02:"",street03:"",city:"",state:"",zip:0}},B("hosting",t),k(t)}function X(e){return t(function(e,t){})}function Y(e,t){B(e,t)}var ee={bio:{uid:"",name:"",email:"",company:"",title:"",dob:0},events:{hosting:{},pending:{},attending:{},completed:{}}},te={},ne={bioPrimariesAreCompleteLocally:o,eventExistsLocally:r,thisIsTheHostEmail:a,guestInvitedAlready:l,thereIsAnActiveEvent:c,cleanEvents:u,getUIDLocally:d,getNameLocally:m,getEmailLocally:f,getCompanyLocally:v,getTitleLocally:g,getDOBLocally:p,getFullBioLocally:h,getOneUserEventLocally:w,getUserEventsLocally:b,getAllUserEventsLocally:E,getActiveEvent:U,setUIDLocally:y,setNameLocally:L,setEmailLocally:T,setCompanyLocally:D,setTitleLocally:C,setDOBLocally:I,setPrimariesLocally:A,updateUserEventsLocally:B,updateAllUserEventsLocally:$,updateBioLocally:F,addGuestToHostGuestList:q,setActiveEvent:k,addGuestToActiveEvent:R,saveNewHostingEvent:Y,removeUserEventsLocally:N,getFullRemoteDBforLocal:P,getRemoteBioForLocal:G,getRemoteEventsForLocal:z,getOneRemoteEventForLocal:j,setFullRemoteDBfromLocal:x,setRemoteBioFromLocal:O,setARemoteEventFromLocal:M,setRemoteEventsFromLocal:H,cleanDBEventsCategory:V,getUserIdForGuest:S,getEventGuestList:_,removeIncompleteEventFromDB:W,loadBio:Z,loadEventsProgressively:J,loadAnEventProgressively:K,createNewEvent:Q,updatePendingEventsListForGuest:X};return ne}function validation(e){function t(e){return angular.isUndefined(e)?"This is a required field":void 0}function n(e){return angular.isDefined(e)&&e.length<p?"Name should be at least "+p+" characters":void 0}function i(e){return angular.isDefined(e)&&!(e.length<h)}function s(e){return angular.isDefined(e)&&!(e.length>w)}function o(e){if(angular.isDefined(e)){var t=new RegExp("[!@#$%^&*]");return!!t.test(e)}return!1}function r(e){if(angular.isDefined(e)){var t=new RegExp("[0-9]","");return!!t.test(e)}return!1}function a(e){if(angular.isDefined(e)){var t=new RegExp("[a-z]","");return!!t.test(e)}return!1}function l(e){if(angular.isDefined(e)){var t=new RegExp("[A-Z]","");return!!t.test(e)}return!1}function c(e){if(angular.isDefined(e)){var t=new RegExp("[^A-z0-9!@#$%^&*]","");return!t.test(e)}return!1}function u(e){var t=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","");return angular.isDefined(e)&&!t.test(e)?"Not a valid email":void 0}function d(e){}function m(){var e={eventName:{completed:!1,addressed:!1,row:{"class":{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{"class":{"control-label":!0}},input:{"class":{"form-control":!0}}},eventHost:{completed:!1,addressed:!1,row:{"class":{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{"class":{"control-label":!0}},input:{"class":{"form-control":!0}}},eventStart:{completed:!1,addressed:!1,row:{"class":{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{"class":{"control-label":!0}},input:{"class":{"form-control":!0}}},eventEnd:{completed:!1,addressed:!1,row:{"class":{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{"class":{"control-label":!0}},input:{"class":{"form-control":!0}}},eventStreet01:{completed:!1,addressed:!1,row:{"class":{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{"class":{"control-label":!0}},input:{"class":{"form-control":!0}}},eventCity:{completed:!1,addressed:!1,row:{"class":{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{"class":{"control-label":!0}},input:{"class":{"form-control":!0}}},eventState:{completed:!1,addressed:!1,row:{"class":{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{"class":{"control-label":!0}},input:{"class":{"form-control":!0}}},eventZip:{completed:!1,addressed:!1,row:{"class":{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{"class":{"control-label":!0}},input:{"class":{"form-control":!0}}},eventGuest:{completed:!1,addressed:!1,row:{"class":{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{"class":{"control-label":!0}},input:{"class":{"form-control":!0}}}};return e}function f(){}function v(){}function g(){}var p=3,h=16,w=100,b={required:t,minNameLength:n,minPassLength:i,maxPassLength:s,atLeastOneSymbol:o,atLeastOneNumber:r,atLeastOneLowercase:a,atLeastOneUppercase:l,illegalCharacter:c,email:u,dateOfBirth:d,generateEventRequirnments:m,updateEventReqStatus:f,updateEventReqAddressed:v,updateEventReqClass:g};return b}function config(e){e.when("/",{templateUrl:"views/landingPage.htm",controller:"LandingPageController",controllerAs:"vm"}).when("/signup",{templateUrl:"views/newUserSignup.htm",controller:"NewUserSignUpController",controllerAs:"vm"}).when("/login",{templateUrl:"views/registeredUserLogin.htm",controller:"RegUserLoginController",controllerAs:"vm"}).when("/userInformation/:uid?",{templateUrl:"views/userInformation.htm",controller:"UserInformationController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).when("/userEvents/:uid?",{templateUrl:"views/userEvents.htm",controller:"UserEventsController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).when("/event/host/:eventId/:uid/:section",{templateUrl:"views/hostEvent.htm",controller:"HostEventController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).when("/event/guest/:eventId/:uid/:hostId",{templateUrl:"views/guestEvent.htm",controller:"GuestEventController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).when("/event/:eventId?/:hostId?/:uid?/:section?",{templateUrl:"views/anEvent.htm",controller:"AnEventController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService,eventViewChanger:eventViewChanger}}).otherwise({redirectTo:"/"})}function userAuthenticationService(e){e.isLoggedIn()}function eventViewChanger(e,t){e.eventRoute(t.current.params.eventId,t.current.params.hostId,t.current.params.uid,t.current.params.section)}function addAGuest(){function e(e,t,n,i){}function t(e,t,n,i){function s(e){return btoa(e)}function o(){a.validations.name.valid&&a.validations.email.valid?(e.info("ready to submit"),a.invitationValidForSubmission=!0,a.submissionButton["class"]["btn-warning"]=!1,a.submissionButton["class"]["btn-success"]=!0,a.submissionButton.message="Invite Guest"):(e.info("not ready to submit"),a.invitationValidForSubmission=!1,a.submissionButton["class"]["btn-warning"]=!0,a.submissionButton["class"]["btn-success"]=!1,a.submissionButton.message="Address Invitation...")}function r(){angular.isUndefined(c.getOneUserEventLocally("hosting",t.eventId))?c.getRemoteEventsForLocal().then(function(){u=c.getOneUserEventLocally("hosting",t.eventId)}):u=c.getOneUserEventLocally("hosting",t.eventId)}var a=this,l=n,c=i,u={};a.tempGuest={name:"",email:"",status:"pending"},a.validations={name:{addressed:!1,valid:!1,errorMessage:""},email:{addressed:!1,valid:!1,errorMessage:""},invitation:{isTheHost:!1,alreadyInvited:!1,errorMessage:""}},a.invitationValidForSubmission=!1,a.submissionButton={style:{color:"red"},"class":{"col-xs-12":!0,"col-sm-12":!0,btn:!0,"btn-warning":!0,"btn-success":!1},message:"Address Invitation..."},a.validateName=function(){a.validations.name.addressed=!0,angular.isDefined(a.tempGuest.name)&&""!=a.tempGuest.name?(a.validations.name.valid=!0,a.validations.name.errorMessage=""):(a.validations.name.valid=!1,a.validations.name.errorMessage="This guest needs a name"),o()},a.validateEmail=function(){a.validations.email.addressed=!0,angular.isDefined(a.tempGuest.email)&&""!=a.tempGuest.email?angular.isUndefined(l.email(a.tempGuest.email))?(a.validations.email.valid=!0,a.validations.email.errorMessage=""):(a.validations.email.valid=!1,a.validations.email.errorMessage=l.email(a.tempGuest.email),e.info(a.validations.email.errorMessage)):(a.validations.email.valid=!1,a.validations.email.errorMessage="Not a valid email"),o()},a.showNameError=function(){return!(a.validations.name.valid||!a.validations.name.addressed)},a.showEmailError=function(){return!(a.validations.email.valid||!a.validations.email.addressed)},a.showInvitationError=function(){return!(!a.validations.invitation.isTheHost&&!a.validations.invitation.alreadyInvited)},a.submitGuestInvitation=function(){if(e.info("submitting the invitation"),a.invitationValidForSubmission){if(c.thisIsTheHostEmail(a.tempGuest.email,t.eventId))return a.validations.invitation.isTheHost=!0,a.validations.invitation.errorMessage="No need to invite the host",0;a.validations.invitation.isTheHost=!1,c.getUserIdForGuest(a.tempGuest.email).then(function(t){return e.info("found user with that email: "+t),t}).then(function(t){e.info("the guest list is..."),e.info(a.guestList),angular.isObject(a.guestList)||(e.info("creating the object"),a.guestList={});var n=a.tempGuest;a.guestList[t]=n,a.tempGuest={name:"",email:"",status:"pending"}}).then(function(){}).then(function(){})["catch"](function(t){e.info(t),idByEmail=s(a.tempGuest.email),angular.isObject(a.guestList)||(e.info("creating the object"),a.guestList={});var n=a.tempGuest;a.guestList[idByEmail]=n,a.tempGuest={name:"",email:"",status:"pending"}})}},r()}e.$inject=["scope","el","attr","ctrl"];var n={restrict:"AECM",templateUrl:"../views/directives/addAGuest.directive.htm",replace:!0,scope:{guestList:"="},link:e,controller:t,controllerAs:"vm",bindToController:!0};return t.$inject=["$log","$routeParams","validation","userData"],n}function hostedEventsList(){function e(e,t,n,i){}function t(e,t){function n(e){return new Date(parseInt(e))}function i(e){var t=0;return s.guestsAreInvited=!0,Object.keys[e].forEach(function(e){t++}),t}var s=this,o=t;s.guestsAreInvited=!1,s.formatDate=function(t){return e.info("got thist time: "+t),n(t)},s.guestsAttending=function(e){return angular.isDefined(e)&&angular.isDefined(e.attending)?i(e.attending):0},s.guestsInvited=function(e){function t(){return n.attending+n.pending+n.declined}if(angular.isDefined(e)){var n={attending:0,pending:0,declined:0};return angular.isDefined(e.attending)&&(n.attending=i(e.attending)),angular.isDefined(e.pending)&&(n.pending=i(e.pending)),angular.isDefined(e.declined)&&(n.declined=i(e.declined)),t()}return 0},s.percentageAttending=function(e){return angular.isDefined(e)?guestsAttending(guestlist)/guestsInvited(e):0},s.eventClicked=function(t){e.info("redirecting to: /event/"+t+"/"+s.hostedEvents[t].host.uid+"/"+s.userId),o.redirectTo("/event",t,s.hostedEvents[t].host.uid,s.userId)}}e.$inject=["scope","el","attr","ctrl"];var n={restrict:"AECM",templateUrl:"../views/directives/hostedEventsList.directive.htm",replace:!0,scope:{hostedEvents:"=",userId:"="},link:e,controller:t,controllerAs:"vm",bindToController:!0};return t.$inject=["$log","trafficValet"],n}function progressBar(){return{restrict:"E",scope:{curVal:"@",maxVal:"@"},template:"<div class='progress-bar'><div class='progress-bar-bar'>testing</div></div>",link:function(e,t,n){function i(){var n=0;e.maxVal&&(n=Math.min(e.curVal,e.maxVal)/e.maxVal*t.find(".progress-bar").width()),t.find(".progress-bar-bar").css("width",n)}e.$watch("curVal",i),e.$watch("maxVal",i)}}}function hostedGuestList(){function e(e,t,n,i){e.$watch("guestList",function(){e.$apply})}function t(e,t,n){function i(){return angular.isDefined(o.guestList)&&""!=o.guestList?(o.isAGuestList=!0,!0):(o.isAGuestList=!1,!1)}function s(){var s=n;i()||(e.info("going after the list"),s.getEventGuestList(t.uid,t.eventId).then(function(t){e.info("got the list"),e.info(t),o.guestList=t,angular.isObject(t)&&(o.isAGuestList=!0)})["catch"](function(t){e.info("There was an error: "+t)}))}var o=this;o.isAGuestList=!1,s()}e.$inject=["scope","el","attr","ctrl"];var n={restrict:"AECM",templateUrl:"../views/directives/hostedGuestList.directive.htm",replace:!0,scope:{guestList:"="},link:e,controller:t,controllerAs:"vm",bindToController:!0};return t.$inject=["$log","$routeParams","userData"],n}function toolBar(){function e(e,t,n,i){}function t(e,t){var n=this,i=t;i.checkLoginStatus().then(function(e){n.loggedIn=e})["catch"](),n.clicked=function(){e.info("button clicked")}}e.$inject=["scope","el","attr","ctrl"];var n={restrict:"AECM",templateUrl:"../views/directives/toolBar.directive.htm",replace:!0,scope:{},link:e,controller:t,controllerAs:"vm",bindToController:!0};return t.$inject=["$log","backendServices"],n}config.$inject=["$routeProvider"],userAuthenticationService.$inject=["authService"],eventViewChanger.$inject=["trafficValet","$route"],angular.module("meetUpEventApp",["ngRoute","ngTouch","firebase"]),angular.module("meetUpEventApp").controller("AnEventController",AnEventController),AnEventController.$inject=["$log","$routeParams"],angular.module("meetUpEventApp").controller("GuestEventController",GuestEventController),GuestEventController.$inject=["$log"],angular.module("meetUpEventApp").controller("HostEventController",HostEventController),HostEventController.$inject=["$scope","$log","$routeParams","userData","trafficValet","validation"],angular.module("meetUpEventApp").controller("LandingPageController",LandingPageController),LandingPageController.$inject=["$scope","$log","$location","$document","$window"],angular.module("meetUpEventApp").controller("MainController",MainController),MainController.$inject=["$log","$location","$document","$window"],angular.module("meetUpEventApp").controller("NewUserSignUpController",NewUserSignUpController),NewUserSignUpController.$inject=["$scope","$log","validation","backendServices","trafficValet","userData"],angular.module("meetUpEventApp").controller("RegUserLoginController",RegUserLoginController),RegUserLoginController.$inject=["$log","$document","backendServices","trafficValet","userData"],angular.module("meetUpEventApp").controller("topMenuController",topMenuController),topMenuController.$inject=["$scope","$log","$location","$document","$window"],angular.module("meetUpEventApp").controller("UserEventsController",UserEventsController),UserEventsController.$inject=["$log","$routeParams","userData","trafficValet"],angular.module("meetUpEventApp").controller("UserInformationController",UserInformationController),UserInformationController.$inject=["$log","$document","$routeParams","userData","trafficValet"],angular.module("meetUpEventApp").factory("authService",authService),authService.$inject=["$log","backendServices"],angular.module("meetUpEventApp").factory("backendServices",backendServices),backendServices.$inject=["$log","$q","$window"],angular.module("meetUpEventApp").factory("trafficValet",trafficValet),trafficValet.$inject=["$log","$location"],angular.module("meetUpEventApp").factory("userData",userData),userData.$inject=["$log","$q","backendServices"],angular.module("meetUpEventApp").factory("validation",validation),validation.$inject=["$log"],angular.module("meetUpEventApp").config(config),angular.module("meetUpEventApp").directive("addAGuest",addAGuest),angular.module("meetUpEventApp").directive("hostedEventsList",hostedEventsList),angular.module("meetUpEventApp").directive("progressBar",progressBar),angular.module("meetUpEventApp").directive("hostedGuestList",hostedGuestList),angular.module("meetUpEventApp").directive("toolBar",toolBar);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFuRXZlbnQuY29udHJvbGxlci5qcyIsIkd1ZXN0RXZlbnQuY29udHJvbGxlci5qcyIsIkhvc3RFdmVudC5jb250cm9sbGVyLmpzIiwiTGFuZGluZ1BhZ2UuY29udHJvbGxlci5qcyIsIk1haW4uY29udHJvbGxlci5qcyIsIk5ld1VzZXJTaWduVXAuY29udHJvbGxlci5qcyIsIlJlZ1VzZXJMb2dpbi5jb250cm9sbGVyLmpzIiwiVG9wTWVudS5jb250cm9sbGVyLmpzIiwiVXNlckV2ZW50cy5jb250cm9sbGVyLmpzIiwiVXNlckluZm9ybWF0aW9uLmNvbnRyb2xsZXIuanMiLCJBdXRoU2VydmljZS5mYWN0b3J5LmpzIiwiQmFja2VuZFNlcnZpY2VzLmZhY3RvcnkuanMiLCJUcmFmZmljVmFsZXQuZmFjdG9yeS5qcyIsIlVzZXJEYXRhLmZhY3RvcnkuanMiLCJWYWxpZGF0aW9uLmZhY3RvcnkuanMiLCJyb3V0ZS1jb25maWcuanMiLCJhcHAuanMiLCJBZGRBR3Vlc3QuZGlyZWN0aXZlLmpzIiwiSG9zdGVkRXZlbnRzTGlzdC5kaXJlY3RpdmUuanMiLCJIb3N0ZWRFdmVudHNQcm9ncmVzc0Jhci5kaXJlY3RpdmUuanMiLCJIb3N0ZWRHdWVzdExpc3QuZGlyZWN0aXZlLmpzIiwiVG9vbEJhci5kaXJlY3RpdmUuanMiLCJhcHAubW9kdWxlLmpzIl0sIm5hbWVzIjpbIkFuRXZlbnRDb250cm9sbGVyIiwiJGxvZyIsIiRyb3V0ZVBhcmFtcyIsImluaXQiLCJ2bSIsInRlbXBEYXRlVGltZSIsInN0YXJ0IiwiZW5kIiwibmV3R3Vlc3QiLCJuYW1lIiwiZW1haWwiLCJhZGRyZXNzIiwidmFsaWQiLCJzdHlsZSIsImNvbG9yIiwic2hvd0lmSG9zdCIsImhpZGVJZkF0dGVuZGluZyIsIm1hbmFnZVNlY3Rpb25zIiwxLCJhY3RpdmUiLCJjb21wbGV0ZSIsImJhY2tncm91bmQtY29sb3IiLDIsMywiY2hlY2tGb3JIb3N0IiwiY2hlY2tJZkd1ZXN0SXNBdHRlbmRpbmciLCJvcGVuQWxsU2VjdGlvbnMiLCJ1dGY4X3RvX2I2NCIsInN0ciIsImJ0b2EiLCJiNjRfdG9fdXRmOCIsImF0b2IiLCJkYXRlVGltZVRvVW5peFRpbWUiLCJkYXRlVGltZSIsIkRhdGUiLCJwYXJzZSIsImNsZWFuTmV3R3Vlc3RWYXJpYWJsZSIsImludml0ZUFSZWdpc3RlcmVkVXNlciIsInVpZCIsImluZm8iLCJyZWYiLCJjaGlsZCIsImV2ZW50SWQiLCJzZXQiLCJpZCIsImV2ZW50VGltZXMiLCJldmVudCIsImhvc3QiLCJlcnJvciIsIm9uY2UiLCJzbmFwc2hvdCIsImNoZWNrRm9yUGxhY2Vob2xkZXIiLCJ2YWwiLCJ1cGRhdGVkIiwicmVtb3ZlIiwiZXJyb3JPYmplY3QiLCJjb2RlIiwiaW52aXRlQW5VbnJlZ2lzdGVyZWRVc2VyIiwidXNlcktleSIsImF1dGhEYXRhIiwiZ2V0QXV0aCIsImhvc3RJZCIsInVzZXJFdmVudHMiLCJvbiIsImFsbEd1ZXN0cyIsImF0dGVuZGluZyIsInRoaXMiLCJ0ZW1wVGltZSIsInVzZXJJc0hvc3QiLCJzZXRUZW1wVGltZSIsImVuZHBvaW50IiwidW5peFRpbWVUb0RhdGVUaW1lIiwidW5peFRpbWUiLCJwYXJzZUludCIsInN1Ym1pdCIsImJhY2tUb1VzZXJFdmVudHMiLCIkbG9jYXRpb24iLCJwYXRoIiwidG9rZW4iLCJldmVudFJlZGlyZWN0IiwiZXZlbnRJRCIsImZ1bGxQYXRoIiwiY2hhbmdlU2VjdGlvbiIsInRhcmdldFNlY3Rpb24iLCJpIiwic2F2ZUV2ZW50VGltZSIsInRhcmdldCIsImd1ZXN0c0FyZUludml0ZWQiLCJndWVzdExpc3QiLCJ2YWxpZGF0ZUd1ZXN0RW1haWwiLCJjb25zdHJhaW50IiwiUmVnRXhwIiwidGVzdCIsImlzU2VjdGlvbkNvbXBsZXRlIiwicmVxdWlyZWRJbnB1dHMiLCJzYXZlQW5kQWR2YW5jZSIsIiRzYXZlIiwidGhlbiIsImFkZEd1ZXN0VG9Ib3N0c0xpc3QiLCJyZWdpc3RlcmVkVXNlcnMiLCJzdGF0dXMiLCJzYXZlRXZlbnQiLCJndWVzdFdpbGxBdHRlbmQiLCJyZXNwb25zZSIsImN1cnJlbnRVc2VyIiwidG90YWxQZW5kaW5nSW52aXRhdGlvbnMiLCJyZW1vdmVBdHRlbmRpbmdVcGRhdGVkIiwiaW52aXRhdGlvbnMiLCJ0aGlzSW52aXRhdGlvbiIsImludml0YXRpb24iLCJhdHRlbmRpbmdMaXN0IiwiY3VycmVudERhdGUiLCJ1cGRhdGUiLCJ1cGRhdGVVcGRhdGVkUGFyYW0iLCJhZGRJbnZpdGF0aW9uVG9BdHRlbmRpbmciLCJHdWVzdEV2ZW50Q29udHJvbGxlciIsIkhvc3RFdmVudENvbnRyb2xsZXIiLCIkc2NvcGUiLCJ1c2VyRGF0YSIsInRyYWZmaWNWYWxldCIsInZhbGlkYXRpb24iLCJjYWxjdWxhdGVEdXJhdGlvbiIsImNoYW5nZVNhdmVCdG4iLCJkaXJlY3Rpb24iLCJhY3Rpb25CdG4iLCJidG4iLCJtZXNzYWdlIiwidXBkYXRlUHJvZ3Jlc3NCYXIiLCJ1bml0cyIsInBlcmNlbnRDb21wbGV0ZSIsInByb2dyZXNzQmFyIiwid2lkdGgiLCJpbml0RXZlbnRUaW1lcyIsIm5vdyIsInNldEhvdXJzIiwiZ2V0SG91cnMiLCJNYXRoIiwicm91bmQiLCJnZXRNaW51dGVzIiwic2V0TWludXRlcyIsInNldFNlY29uZHMiLCJzZXRNaWxsaXNlY29uZHMiLCJkdXJhdGlvbiIsInVwZGF0ZVRlbXBUaW1lRnJvbU1vZGVsIiwiYW5ndWxhciIsImlzRGVmaW5lZCIsInRlbXBFdmVudCIsInRoaXNFdmVudE1hbmFnZXIiLCJnZXRBY3RpdmVFdmVudCIsInRoZXJlSXNBbkFjdGl2ZUV2ZW50IiwiYWN0aXZlUGFja2FnZSIsInJlcXVpcmVkRmllbGRDb21wbGV0ZSIsInJlcXVpcmVkRmllbGRzIiwibG9hZEFuRXZlbnRQcm9ncmVzc2l2ZWx5IiwidGhlRXZlbnQiLCJhY3RpdmVTZWN0aW9uIiwic2VjdGlvbiIsImhvc3RlZEV2ZW50U2hlcnBhIiwicmVxdWlybm1lbnRzRmFjdG9yeSIsImRpdiIsImNsYXNzIiwiY29sLXhzLTYiLCJjb2wtc20tNiIsImJ0bi1zdWNjZXNzIiwiYnRuLXdhcm5pbmciLCJwdWxsLXJpZ2h0IiwiZ2VuZXJhdGVFdmVudFJlcXVpcm5tZW50cyIsImZvcm1hdER1cmF0aW9uIiwiaG91cnMiLCJmbG9vciIsIm1pbiIsImZyYWN0aW9uIiwidmFsaWRhdGVUaW1lIiwic3RhcnRPckVuZCIsInNldHRpbmdUZW1wU3RhcnQiLCJ0aW1lcyIsImV2ZW50U3RhcnQiLCJldmVudEVuZCIsImNvbXBsZXRlZCIsInJvdyIsIm9sZFN0YXJ0Iiwib2xkRW5kIiwibmV3RW5kIiwic2V0dGluZ1RlbXBFbmQiLCJzYXZlTmV3SG9zdGluZ0V2ZW50Iiwic2V0UmVtb3RlRXZlbnRzRnJvbUxvY2FsIiwic3VjY2VzTWVzc2FnZSIsImVycm9NZXNzYWdlIiwicmVkaXJlY3RUbyIsInNlY3Rpb25CYWNrIiwiZXZlbnRQYWNrYWdlIiwic2V0QWN0aXZlRXZlbnQiLCJzZWN0aW9uRm9yd2FyZCIsInZlcmlmeVJlcXVpcmVkIiwiZmllbGQiLCJ2YWx1ZSIsInNhdmVFdmVudFRvREIiLCIkd2F0Y2giLCJjdXJyZW50Iiwib3JpZ2luYWwiLCJpc09iamVjdCIsIkxhbmRpbmdQYWdlQ29udHJvbGxlciIsIiRkb2N1bWVudCIsIiR3aW5kb3ciLCJyZWRpcmVjdCIsImN1cnJlbnRVc2VyRGF0YSIsIiRhcHBseSIsImZiVVJMIiwic2hvd1JlcXVpcm5tZW50cyIsInZhbGlkTmV3TmFtZSIsInZhbGlkTmV3RW1haWwiLCJzZWN1cmVQYXNzd29yZCIsInNlY3VyZSIsInVubG9ja0NyZWF0ZVVzZXJCdG4iLCJ1c2FibGUiLCJ2YWxpZFVzZXJFbWFpbCIsInZhbGlkVXNlclBhc3N3b3JkIiwidW5jbG9ja1VzZXJMb2dpbkJ0biIsInBhc3N3b3JkUmVxdWlybm1lbnRzIiwwLCJtZXQiLDQsNSw2LCJkaXNwbGF5UGFzc1JlcXMiLCJuZXdOYW1lIiwibmV3RW1haWwiLCJjaGVja05ld05hbWUiLCJsZW5ndGgiLCJvcGVuQ3JlYXRlVXNlckJ1dHRvbiIsImNoZWNrTmV3RW1haWwiLCJjaGVja1VzZXJFbWFpbCIsInVzZXJFbWFpbCIsIm9wZW5Vc2VyTG9naW5CdG4iLCJjaGVja05ld1Bhc3N3b3JkcyIsImNvbnN0cmFpbnRzIiwibmV3UGFzc3dvcmQiLCJjaGVja1VzZXJQYXNzd29yZHMiLCJ1c2VyUGFzc3dvcmQiLCJmaW5kIiwiY3JlYXRlTmV3VXNlciIsIkZpcmViYXNlIiwiY3JlYXRlVXNlciIsInBhc3N3b3JkIiwidXNlcnNSZWYiLCJiaW8iLCJldmVudHMiLCJwZW5kaW5nIiwiaG9zdGluZyIsImxvZ2luUmVnaXN0ZXJlZFVzZXIiLCJhdXRoV2l0aFBhc3N3b3JkIiwiYWxlcnRNZSIsImFsZXJ0Iiwib25SZXNpemVGdW5jdGlvbiIsImlucHV0VGV4dCIsImVsZW1lbnQiLCJvdXRlcldpZHRoIiwib3V0ZXJIZWlnaHQiLCJjc3MiLCJhZGRFdmVudExpc3RlbmVyIiwiRmFzdENsaWNrIiwiYXR0YWNoIiwiYm9keSIsImJpbmQiLCJyZWFkeSIsIm1hc3RlciIsInVzZXIiLCJjb3B5IiwicmVzZXQiLCJmb3JtIiwiJHNldFByaXN0aW5lIiwiJHNldFVudG91Y2hlZCIsIk1haW5Db250cm9sbGVyIiwicmVzaXplQkdJbWFnZSIsImxvZ291dCIsInVuYXV0aCIsIk5ld1VzZXJTaWduVXBDb250cm9sbGVyIiwiYmFja2VuZFNlcnZpY2VzIiwidmVyaWZ5UmVxdWlybm1lbnRzIiwiZXJyb3JzIiwicGFzc2VzQWxsVGVzdHMiLCJpbnB1dHMiLCJyZXF1aXJlZEZpZWxkc0RlZmluZWQiLCJwYXNzUmVxcyIsInJlcSIsImZ1bGZpbGxlZCIsInNob3dSZXFzQm94Iiwic2lnbnVwVmFsaWRhdGlvbiIsImhhc05hbWUiLCJyZXF1aXJlZCIsImxvbmdFbm91Z2giLCJtaW5OYW1lTGVuZ3RoIiwicHVzaCIsImpvaW4iLCJoYXNFbWFpbCIsImlzQW5FbWFpbCIsImNoZWNrTmV3UGFzc3dvcmQiLCJoYXNQYXNzd29yZCIsInNwZWNpZmljUmVxcyIsIm1pblBhc3NMZW5ndGgiLCJtYXhQYXNzTGVuZ3RoIiwiYXRMZWFzdE9uZUxvd2VyY2FzZSIsImF0TGVhc3RPbmVVcHBlcmNhc2UiLCJhdExlYXN0T25lTnVtYmVyIiwiYXRMZWFzdE9uZVN5bWJvbCIsImlsbGVnYWxDaGFyYWN0ZXIiLCJhbnlFcnJvcnMiLCJleGl0UGFzc3dvcmQiLCJuZXdVc2VyU2hlcnBhIiwibmV3VXNlckRhdGEiLCJkYlVzZXJEYXRhIiwibG9hZFByaW1hcmllcyIsImFkZE5ld1VzZXJUb0RhdGFiYXNlIiwiYWRkTmV3VXNlclRvUmVnVXNlcnNMaXN0IiwiUmVnVXNlckxvZ2luQ29udHJvbGxlciIsInJlZ2lzdGVyZWRVc2VyU2hlcnBhIiwiZGF0YWJhc2UiLCJyZWdpc3RlcmVkVXNlckRhdGEiLCJMb2dpblJlZ2lzdGVyZWRVc2VyIiwidXNlckNyZWRlbnRpYWxzIiwic2V0UHJpbWFyaWVzTG9jYWxseSIsImdldFVJRExvY2FsbHkiLCJnZXRVc2VyQmlvIiwidXNlckJpbyIsInVwZGF0ZUJpb0xvY2FsbHkiLCJnZXRVc2VyRXZlbnRzIiwiYWxsRXZlbnRzRm9yVGhpc1VzZXIiLCJ1cGRhdGVBbGxVc2VyRXZlbnRzTG9jYWxseSIsImNsaWNrZWQiLCJ1c2VyQXV0aGVudGljYXRpb24iLCJsb2dVc2VyT3V0IiwidG9wTWVudUNvbnRyb2xsZXIiLCJhdXRoRGF0YUNhbGxiYWNrIiwicHJvdmlkZXIiLCJsb2dnZWRJbiIsIm5hdkJhckxvZ2luUmVnaXN0ZXJlZFVzZXIiLCJuYXZiYXJVc2VyRW1haWwiLCJuYXZiYXJVc2VyUGFzcyIsImNsaWNrIiwibmF2YmFySW5wdXRzIiwib25BdXRoIiwiVXNlckV2ZW50c0NvbnRyb2xsZXIiLCJub09mSG9zdGVFdmVudHMiLCJjb3VudGVyIiwiZ2VuZXJhdGVFdmVudElEIiwiZGF0ZSIsImNoZWNrRm9yRXZlbnRzIiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJjYXRlZ29yeSIsInNlY3Rpb25BdmFpbGFibGUiLCJpbml0aWFsaXplIiwiZ2V0QWxsVXNlckV2ZW50c0xvY2FsbHkiLCJzZXRVSURMb2NhbGx5IiwibG9hZEJpbyIsInJldHJpZXZlZEJpbyIsImdldFJlbW90ZUV2ZW50c0ZvckxvY2FsIiwib2J0YWluZWRVc2VyRXZlbnRzIiwic2hvd0RlY2xpbmUiLCJjcmVhdGVOZXdFdmVudCIsIm5ld0V2ZW50U2hlcnBhIiwiVXNlckluZm9ybWF0aW9uQ29udHJvbGxlciIsIm9idGFpbmVkVXNlckRhdGEiLCJkb2IiLCJ0ZW1wQmlydGhkYXkiLCJ2aWV3IiwiZGF0YVRvU2F2ZSIsImlzRGF0YSIsImJ0bk1zc2ciLCJwcm9jZWVkQnRuIiwiY2hlY2tWYWx1ZXMiLCJpc1VuZGVmaW5lZCIsImNvbXBhbnkiLCJ0aXRsZSIsInVwZGF0ZURPQiIsInNhdmVBbmRNb3ZlT24iLCJ1c2VySW5mb1NoZXJwYSIsImN1cnJlbnRVaWQiLCJhdXRoU2VydmljZSIsImlzTG9nZ2VkSW4iLCJkYkF1dGhlbnRpY2F0aW9uIiwiY2hlY2tMb2dpblN0YXR1cyIsImFsbEF1dGhTZXJ2aWNlcyIsIiRxIiwiZmlyZUJhc2VBY2NvdW50cyIsInJlc29sdmUiLCJyZWplY3QiLCJhcHAiLCJhcHBVc2VycyIsImI2NEVtYWlsIiwiUmVnaXN0ZXJlZFVzZXJzTGlzdCIsIlByb21pc2UiLCJ1cGxvYWRVc2VyRGF0YSIsImFsbFVzZXJEYXRhIiwicmVtb3RlVXNlciIsInVwbG9hZFVzZXJCaW8iLCJjdXJyZW50VXNlckJpbyIsInRvU3RyaW5nIiwicmVtb3RlVXNlckJpbyIsImRvd25sb2FkVXNlckRhdGEiLCJjcmVhdGVIb3N0ZWRFdmVudCIsIm5ld0V2ZW50IiwibmV3SG9zdGVkRXZlbnQiLCJhZGRHdWVzdFRvSG9zdEd1ZXN0TGlzdG9uREIiLCJndWllc3RJZCIsInJzdnBkIiwib3JkZXJCeUtleSIsInVzZXJQcm9maWxlIiwiZXZlbnRzUGFja2FnZSIsImdldEFIb3N0ZWRFdmVudCIsImhvc3RlZEV2ZW50Iiwic2VsZWN0RXZlbnQiLCJmaW5kR3Vlc3RVSUQiLCJndWVzdGI2NEVtYWlsIiwidWlkcyIsImFsbFVzZXJzIiwia2V5IiwiZ2V0R3Vlc3RMaXN0Rm9yRXZlbnQiLCJ0aGVMaXN0IiwiZ2V0QW5JbnZpdGVkRXZlbnQiLCJkZWxldGVVcGRhdGVGaWVsZCIsImNhdFJlbW92aW5nRnJvbSIsInJlbW92ZUluY29tcGxldGVFdmVudCIsImV2ZW50VG9SZW1vdmUiLCJvbkNvbXBsZXRlIiwidGhlcmVXYXNBblVwZGF0ZUZpZWxkIiwiY2F0VG9DaGVjayIsImN1cnJlbnRDYXRNb2RlbCIsImFsbEJhY2tlbmRTZXJ2aWNlcyIsInBhcmFtMSIsInBhcmFtMiIsInBhcmFtMyIsImV2ZW50Um91dGUiLCJ1c2VySWQiLCJhbGxUcmFmZmljQ29udHJvbHMiLCJiaW9QcmltYXJpZXNBcmVDb21wbGV0ZUxvY2FsbHkiLCJldmVudEV4aXN0c0xvY2FsbHkiLCJ0eXBlIiwidGhpc0lzVGhlSG9zdEVtYWlsIiwiZ3Vlc3RJbnZpdGVkQWxyZWFkeSIsInJlZkVtYWlsIiwiYWN0aXZlRXZlbnQiLCJjbGVhbkV2ZW50cyIsImdldE5hbWVMb2NhbGx5IiwiZ2V0RW1haWxMb2NhbGx5IiwiZ2V0Q29tcGFueUxvY2FsbHkiLCJnZXRUaXRsZUxvY2FsbHkiLCJnZXRET0JMb2NhbGx5IiwiZ2V0RnVsbEJpb0xvY2FsbHkiLCJnZXRPbmVVc2VyRXZlbnRMb2NhbGx5IiwiZ2V0VXNlckV2ZW50c0xvY2FsbHkiLCJzZXROYW1lTG9jYWxseSIsInNldEVtYWlsTG9jYWxseSIsInNldENvbXBhbnlMb2NhbGx5Iiwic2V0VGl0bGVMb2NhbGx5Iiwic2V0RE9CTG9jYWxseSIsInVwZGF0ZVVzZXJFdmVudHNMb2NhbGx5IiwiYWxsVXNlckV2ZW50cyIsInNldFJlbW90ZUJpb0Zyb21Mb2NhbCIsImFkZEd1ZXN0VG9Ib3N0R3Vlc3RMaXN0IiwiZ3Vlc3RJZCIsImRiIiwicG9zaXRpdmVSZXN1bHQiLCJuZWdhdGl2ZVJlc3VsdCIsImFkZEd1ZXN0VG9BY3RpdmVFdmVudCIsImd1ZXN0IiwiZ2V0VXNlcklkRm9yR3Vlc3QiLCJndWVzdEVtYWlsIiwiZXJyb3JSZXNwb25zZSIsInJlbW92ZVVzZXJFdmVudHNMb2NhbGx5IiwiZ2V0RnVsbFJlbW90ZURCZm9yTG9jYWwiLCJyZW1vdGVVc2VyRGF0YSIsImdldFJlbW90ZUJpb0ZvckxvY2FsIiwiZXZlbnRUeXBlIiwiZ2V0T25lUmVtb3RlRXZlbnRGb3JMb2NhbCIsIm9idGFpbmVkRXZlbnQiLCJzZXRGdWxsUmVtb3RlREJmcm9tTG9jYWwiLCJzZXRBUmVtb3RlRXZlbnRGcm9tTG9jYWwiLCJzdWNjZXNzTWVzc2FnZSIsImVycm9yTWVzc2FnZSIsImNsZWFuREJFdmVudHNDYXRlZ29yeSIsImFmZmlybWF0aXZlUmVzcG9uc2UiLCJnZXRFdmVudEd1ZXN0TGlzdCIsIm9idGFpbmVkTGlzdCIsInJlbW92ZUluY29tcGxldGVFdmVudEZyb21EQiIsImJpb0Zyb21SZW1vdGVEQiIsIm9idGFpbmVkVXNlckV2ZW50IiwibG9hZEV2ZW50c1Byb2dyZXNzaXZlbHkiLCJhbGxFdmVudHMiLCJzdHJlZXQwMSIsInN0cmVldDAyIiwic3RyZWV0MDMiLCJjaXR5Iiwic3RhdGUiLCJ6aXAiLCJ1cGRhdGVQZW5kaW5nRXZlbnRzTGlzdEZvckd1ZXN0IiwibWluaW11bU5hbWVMZW5ndGgiLCJtaW5pbXVtUGFzc0xlbmd0aCIsIm1heGltdW1QYXNzTGVuZ3RoIiwiZGF0ZU9mQmlydGgiLCJldmVudFZhbGlkYXRpb25zIiwiZXZlbnROYW1lIiwiYWRkcmVzc2VkIiwiY29sLXhzLTEyIiwiY29sLXNtLTEyIiwiZm9ybS1ncm91cCIsImhhcy1zdWNjZXNzIiwiaGFzLWVycm9yIiwibGFiZWwiLCJjb250cm9sLWxhYmVsIiwiaW5wdXQiLCJmb3JtLWNvbnRyb2wiLCJldmVudEhvc3QiLCJldmVudFN0cmVldDAxIiwiZXZlbnRDaXR5IiwiZXZlbnRTdGF0ZSIsImV2ZW50WmlwIiwiZXZlbnRHdWVzdCIsInVwZGF0ZUV2ZW50UmVxU3RhdHVzIiwidXBkYXRlRXZlbnRSZXFBZGRyZXNzZWQiLCJ1cGRhdGVFdmVudFJlcUNsYXNzIiwiYWxsVmFsaWRhdGlvbnMiLCJjb25maWciLCIkcm91dGVQcm92aWRlciIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJjb250cm9sbGVyQXMiLCJ1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlIiwiZXZlbnRWaWV3Q2hhbmdlciIsIm90aGVyd2lzZSIsIiRyb3V0ZSIsInBhcmFtcyIsImFkZEFHdWVzdCIsImxpbmtGdW5jIiwic2NvcGUiLCJlbCIsImF0dHIiLCJjdHJsIiwiYWRkQUd1ZXN0Q29udHJvbGxlciIsInZhbGlkYXRlSW52aXRhdGlvbiIsInZhbGlkYXRpb25zIiwiaW52aXRhdGlvblZhbGlkRm9yU3VibWlzc2lvbiIsInN1Ym1pc3Npb25CdXR0b24iLCJpbnZpdGF0aW9uTWFuYWdlciIsImV2ZW50RGV0YWlscyIsImVtYWlsQ2hlY2tlciIsInRlbXBHdWVzdCIsImlzVGhlSG9zdCIsImFscmVhZHlJbnZpdGVkIiwidmFsaWRhdGVOYW1lIiwidmFsaWRhdGVFbWFpbCIsInNob3dOYW1lRXJyb3IiLCJzaG93RW1haWxFcnJvciIsInNob3dJbnZpdGF0aW9uRXJyb3IiLCJzdWJtaXRHdWVzdEludml0YXRpb24iLCJndWVzdEJlaW5nQWRkZWQiLCJpZEJ5RW1haWwiLCIkaW5qZWN0IiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJyZXBsYWNlIiwibGluayIsImJpbmRUb0NvbnRyb2xsZXIiLCJob3N0ZWRFdmVudHNMaXN0IiwiaG9zdGVkRXZlbnRzTGlzdENvbnRyb2xsZXIiLCJjb3VudEd1ZXN0cyIsImxpc3QiLCJob3N0ZWRFdmVudHNTaGVycGEiLCJmb3JtYXREYXRlIiwiZ3Vlc3RzQXR0ZW5kaW5nIiwiZ3Vlc3RzSW52aXRlZCIsInRvdGFsR3Vlc3RDb3VudCIsImd1ZXN0Q291bnQiLCJkZWNsaW5lZCIsInBlcmNlbnRhZ2VBdHRlbmRpbmciLCJndWVzdGxpc3QiLCJldmVudENsaWNrZWQiLCJob3N0ZWRFdmVudHMiLCJjdXJWYWwiLCJtYXhWYWwiLCJ0ZW1wbGF0ZSIsImF0dHJzIiwidXBkYXRlUHJvZ3Jlc3MiLCJwcm9ncmVzcyIsImhvc3RlZEd1ZXN0TGlzdCIsImhvc3RlZEd1ZXN0TGlzdENvbnRyb2xsZXIiLCJ0aGVyZUlzQUd1ZXN0TGlzdCIsImlzQUd1ZXN0TGlzdCIsImxpc3RDb2xsZWN0b3IiLCJyZXR1cm5lZExpc3QiLCJ0b29sQmFyIiwiVG9vbEJhckNvbnRyb2xsZXIiLCJmYkNvbm5lY3QiLCJtb2R1bGUiLCJmYWN0b3J5Il0sIm1hcHBpbmdzIjoiQUFPQSxRQUFBQSxtQkFBQUMsRUFBQUMsR0FTQSxRQUFBQyxLQUVBQyxFQUFBQyxjQUFBQyxNQUFBLEdBQUFDLElBQUEsSUFDQUgsRUFBQUksVUFBQUMsS0FBQSxHQUFBQyxPQUFBQyxRQUFBLEdBQUFDLE9BQUEsRUFBQUMsT0FBQUMsTUFBQSxNQUNBVixFQUFBVyxZQUFBLEVBQ0FYLEVBQUFZLGlCQUFBLEVBRUFaLEVBQUFhLGdCQUNBQyxHQUFBQyxRQUFBLEVBQUFDLFVBQUEsRUFBQVAsT0FBQUMsTUFBQSxRQUFBTyxtQkFBQSxXQUNBQyxHQUFBSCxRQUFBLEVBQUFDLFVBQUEsRUFBQVAsT0FBQUMsTUFBQSxRQUFBTyxtQkFBQSxTQUNBRSxHQUFBSixRQUFBLEVBQUFDLFVBQUEsRUFBQVAsT0FBQUMsTUFBQSxRQUFBTyxtQkFBQSxVQUlBRyxJQUNBQyxJQUdBckIsRUFBQVcsWUFBQVcsSUFHQSxRQUFBQyxHQUFBQyxHQUNBLE1BQUFDLE1BQUFELEdBR0EsUUFBQUUsR0FBQUYsR0FDQSxNQUFBRyxNQUFBSCxHQUdBLFFBQUFJLEdBQUFDLEdBQ0EsTUFBQUMsTUFBQUMsTUFBQUYsR0FHQSxRQUFBRyxLQUNBaEMsRUFBQUksVUFBQUMsS0FBQSxHQUFBQyxPQUFBQyxRQUFBLEdBQUFDLE9BQUEsRUFBQUMsT0FBQUMsTUFBQSxNQUdBLFFBQUF1QixHQUFBQyxHQUNBckMsRUFBQXNDLEtBQUEsNENBQUFELEdBRUFFLElBQUFDLE1BQUEsU0FBQUEsTUFBQUgsR0FBQUcsTUFBQSxVQUFBQSxNQUFBLFdBQUFB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Q0FwRSxXQUFBLDRCQUFBckssMkJBRUFBLDBCQUFBcU0sU0FBQSxPQUFBLFlBQUEsZUFBQSxXQUFBLGdCQ0pBL1osUUFDQW1jLE9BQUEsa0JBQ0FDLFFBQUEsY0FBQXpOLGFBRUFBLFlBQUFvTCxTQUFBLE9BQUEsbUJDSkEvWixRQUNBbWMsT0FBQSxrQkFDQUMsUUFBQSxrQkFBQS9ULGlCQUVBQSxnQkFBQTBSLFNBQUEsT0FBQSxLQUFBLFdDSkEvWixRQUNBbWMsT0FBQSxrQkFDQUMsUUFBQSxlQUFBN2QsY0FFQUEsYUFBQXdiLFNBQUEsT0FBQSxhQ0pBL1osUUFDQW1jLE9BQUEsa0JBQ0FDLFFBQUEsV0FBQTlkLFVBRUFBLFNBQUF5YixTQUFBLE9BQUEsS0FBQSxtQkNKQS9aLFFBQ0FtYyxPQUFBLGtCQUNBQyxRQUFBLGFBQUE1ZCxZQUVBQSxXQUFBdWIsU0FBQSxRQ0pBL1osUUFDQW1jLE9BQUEsa0JBQ0F4RSxPQUFBQSxRRUtBM1gsUUFDQW1jLE9BQUEsa0JBQ0FuQyxVQUFBLFlBQUExQixXQ0ZBdFksUUFDQW1jLE9BQUEsa0JBQ0FuQyxVQUFBLG1CQUFBSyxrQkNGQXJhLFFBQ0FtYyxPQUFBLGtCQUNBbkMsVUFBQSxjQUFBOWEsYUNGQWMsUUFDQW1jLE9BQUEsa0JBQ0FuQyxVQUFBLGtCQUFBMEIsaUJDRkExYixRQUNBbWMsT0FBQSxrQkFDQW5DLFVBQUEsVUFBQWdDIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ0FuRXZlbnRDb250cm9sbGVyJywgQW5FdmVudENvbnRyb2xsZXIpO1xuXG5BbkV2ZW50Q29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJywgJyRyb3V0ZVBhcmFtcycsIF07XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gQW5FdmVudENvbnRyb2xsZXIoJGxvZywgJHJvdXRlUGFyYW1zKSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdFxuXHQvL2xvY2FsIHZhcmlhYmxlc1xuXHR2bS50ZW1wVGltZSA9IHtzdGFydDogJycsIGVuZDogJyd9O1xuXHR2bS51c2VySXNIb3N0ID0gZmFsc2U7XG5cblxuXHQvL0xvY2FsIE1ldGhvZHNcblx0ZnVuY3Rpb24gaW5pdCgpIHtcblx0XHQvL2RlY2xhcmUgYW5kIGluaXRpYWxpemUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dm0udGVtcERhdGVUaW1lID0ge3N0YXJ0OiAnJywgZW5kOiAnJ307XG5cdFx0dm0ubmV3R3Vlc3QgPSB7bmFtZTogJycsIGVtYWlsOnthZGRyZXNzOicnLCB2YWxpZDpmYWxzZSwgc3R5bGU6e2NvbG9yOicnfX19O1xuXHRcdHZtLnNob3dJZkhvc3QgPSBmYWxzZTtcblx0XHR2bS5oaWRlSWZBdHRlbmRpbmcgPSB0cnVlO1xuXHRcdC8vc2VjdGlvbnNcblx0XHR2bS5tYW5hZ2VTZWN0aW9ucyA9IHtcblx0XHRcdDE6IHthY3RpdmU6IHRydWUsIGNvbXBsZXRlOiBmYWxzZSwgc3R5bGU6e2NvbG9yOidibGFjaycsICdiYWNrZ3JvdW5kLWNvbG9yJzoneWVsbG93J319LFxuXHRcdFx0Mjoge2FjdGl2ZTogZmFsc2UsIGNvbXBsZXRlOiBmYWxzZSwgc3R5bGU6e2NvbG9yOid3aGl0ZScsICdiYWNrZ3JvdW5kLWNvbG9yJzonZ3JheSd9fSxcblx0XHRcdDM6IHthY3RpdmU6IGZhbHNlLCBjb21wbGV0ZTogZmFsc2UsIHN0eWxlOntjb2xvcjond2hpdGUnLCAnYmFja2dyb3VuZC1jb2xvcic6J2dyYXknfX1cblx0XHR9O1xuXG5cdFx0Ly9jaGVjayB1c2VyIHRvIGRldGVybWluZSBzdGF0ZVxuXHRcdGNoZWNrRm9ySG9zdCgpO1xuXHRcdGNoZWNrSWZHdWVzdElzQXR0ZW5kaW5nKCk7XG5cblx0XHQvL29wZW4gdXAgc2VjdGlvbnNcblx0XHRpZighdm0uc2hvd0lmSG9zdCkgb3BlbkFsbFNlY3Rpb25zKCk7XG5cdH1cblxuXHRmdW5jdGlvbiB1dGY4X3RvX2I2NChzdHIpIHtcblx0XHRyZXR1cm4gYnRvYShzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gYjY0X3RvX3V0Zjgoc3RyKSB7XG4gICAgXHRyZXR1cm4gYXRvYihzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKSB7XG5cdFx0cmV0dXJuIERhdGUucGFyc2UoZGF0ZVRpbWUpO1xuXHR9XG5cblx0ZnVuY3Rpb24gY2xlYW5OZXdHdWVzdFZhcmlhYmxlKCkge1xuXHRcdHZtLm5ld0d1ZXN0ID0ge25hbWU6ICcnLCBlbWFpbDp7YWRkcmVzczonJywgdmFsaWQ6ZmFsc2UsIHN0eWxlOntjb2xvcjonJ319fTtcblx0fVxuXG5cdGZ1bmN0aW9uIGludml0ZUFSZWdpc3RlcmVkVXNlcih1aWQpIHtcblx0XHQkbG9nLmluZm8oJ2FkZGluZyB0aGVtIHRvIHRoZSByZWdpc3RlcmVkIHVzZXJzIGxpc3QgJyArIHVpZCk7XG5cdFx0Ly9zZXQgdGhlIG5ldyBldmVudFxuXHRcdHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgncGVuZGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ldmVudElkKS5zZXQoe1xuXHRcdFx0aWQ6ICRyb3V0ZVBhcmFtcy5ldmVudElkLFxuXHRcdFx0ZXZlbnRUaW1lczoge1xuXHRcdFx0XHRzdGFydDogdm0uZXZlbnQuZXZlbnRUaW1lcy5zdGFydCxcblx0XHRcdFx0ZW5kOiB2bS5ldmVudC5ldmVudFRpbWVzLmVuZFxuXHRcdFx0fSxcblx0XHRcdG5hbWU6IHZtLmV2ZW50Lm5hbWUsXG5cdFx0XHRob3N0OiAkcm91dGVQYXJhbXMudWlkXG5cdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oJ3RoZXJlIHdhcyBhbiBlcnJvcicgKyBlcnJvcik7XG5cdFx0fSk7XG5cdFx0Ly9pZiB0aGVyZSB3YXMgYW4gdXBkYXRlZCBwbGFjZSBob2xkZXIsIHJlbW92ZSBpdFxuXHRcdHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgncGVuZGluZycpLm9uY2UoJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdHZhciBjaGVja0ZvclBsYWNlaG9sZGVyID0gc25hcHNob3QudmFsKClcblx0XHRcdCRsb2cuaW5mbyhzbmFwc2hvdC52YWwoKSk7XG5cblx0XHRcdGlmKGNoZWNrRm9yUGxhY2Vob2xkZXIudXBkYXRlZCkge1xuXHRcdFx0XHQkbG9nLmluZm8oJ2RlbGV0aW5nIHVwZGF0ZWQnKTtcblx0XHRcdFx0cmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdwZW5kaW5nJykuY2hpbGQoJ3VwZGF0ZWQnKS5yZW1vdmUoZnVuY3Rpb24oZXJyb3JPYmplY3QpIHtcblx0XHRcdFx0XHRpZihlcnJvck9iamVjdCkgJGxvZy5pbmZvKFwiRGVsZXRpbmcgZmFpbGVkOiBcIiArIGVycm9yT2JqZWN0LmNvZGUpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSAkbG9nLmluZm8oJ25vdGhpbmcgdG8gZG8nKTtcblxuXHRcdH0sIGZ1bmN0aW9uKGVycm9yT2JqZWN0KSB7XG5cdFx0XHRpZihlcnJvck9iamVjdCkgJGxvZy5pbmZvKFwiVGhlIHJlYWQgZmFpbGVkOiBcIiArIGVycm9yT2JqZWN0LmNvZGUpO1xuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gaW52aXRlQW5VbnJlZ2lzdGVyZWRVc2VyKHVzZXJLZXkpIHtcblx0XHQkbG9nLmluZm8oJ2FkZGluZyB0aGVtIHRvIHRoZSBVTlJFR0lTVEVSRUQgdXNlcnMgbGlzdCAnICsgdXNlcktleSk7XG5cdFx0cmVmLmNoaWxkKCdVbnJlZ2lzdGVyZWRVc2VycycpLmNoaWxkKHVzZXJLZXkpLmNoaWxkKCdwZW5kaW5nJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJHJvdXRlUGFyYW1zLmV2ZW50SWQpLnNldCh7XG5cdFx0XHRpZDogJHJvdXRlUGFyYW1zLmV2ZW50SWQsXG5cdFx0XHRob3N0OiAkcm91dGVQYXJhbXMudWlkLFxuXHRcdFx0ZXZlbnRUaW1lczoge1xuXHRcdFx0XHRzdGFydDogdm0uZXZlbnQuZXZlbnRUaW1lcy5zdGFydCxcblx0XHRcdFx0ZW5kOiB2bS5ldmVudC5ldmVudFRpbWVzLmVuZFxuXHRcdFx0fSxcblx0XHRcdG5hbWU6IHZtLmV2ZW50Lm5hbWVcblx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbygndGhlcmUgd2FzIGFuIGVycm9yJyArIGVycm9yKTtcblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNoZWNrRm9ySG9zdCgpIHtcblx0XHQvL2NoZWNrIGV2ZW50IGhvc3Rcblx0XHR2YXIgYXV0aERhdGEgPSByZWYuZ2V0QXV0aCgpO1xuXG5cdFx0aWYoYXV0aERhdGEudWlkID09ICRyb3V0ZVBhcmFtcy5ob3N0SWQpIHtcblx0XHRcdCRsb2cuaW5mbygnaXMgdGhlIGhvc3QnKTtcblx0XHRcdHZtLnNob3dJZkhvc3QgPSB0cnVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkbG9nLmluZm8oJ25vdCB0aGUgaG9zdCcpO1xuXHRcdFx0dm0uc2hvd0lmSG9zdCA9IGZhbHNlO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIGNoZWNrSWZHdWVzdElzQXR0ZW5kaW5nKCkge1xuXHRcdGlmKCF2bS5zaG93SWZIb3N0KSB7XG5cdFx0XHQkbG9nLmluZm8oJ2NoZWNrIGd1ZXN0IGF0dGVuZGFuY2UnKTtcblx0XHRcdHVzZXJFdmVudHMuY2hpbGQoJ2d1ZXN0TGlzdCcpLm9uKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHRcdHZhciBhbGxHdWVzdHMgPSBzbmFwc2hvdC52YWwoKTtcblx0XHRcdFx0dm0uaGlkZUlmQXR0ZW5kaW5nID0gIWFsbEd1ZXN0c1skcm91dGVQYXJhbXMudWlkXS5hdHRlbmRpbmc7XG5cdFx0XHRcdFxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gb3BlbkFsbFNlY3Rpb25zKCkge1xuXHRcdHZtLm1hbmFnZVNlY3Rpb25zWzFdLmFjdGl2ZSA9IHRydWU7XG5cdFx0dm0ubWFuYWdlU2VjdGlvbnNbMl0uYWN0aXZlID0gdHJ1ZTtcblx0XHR2bS5tYW5hZ2VTZWN0aW9uc1szXS5hY3RpdmUgPSB0cnVlO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2F2ZUV2ZW50KCkge1xuXHRcdHZtLmV2ZW50LiRzYXZlKCkudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdCRsb2cuaW5mbygnZXZlbnQgc2F2ZWQnKTtcblx0XHR9KS5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0JGxvZy5pbmZvKCdlcnJvciEgJyArIGVycm9yKTtcblx0XHR9KTtcblx0fVxuXG5cdC8vdmlldyBNZXRob2Rcblx0dm0uc2V0VGVtcFRpbWUgPSBmdW5jdGlvbihlbmRwb2ludCkge1xuXHRcdGlmKGVuZHBvaW50ID09ICdzdGFydCcpIHZtLnRlbXBEYXRlVGltZS5zdGFydCA9IG5ldyBEYXRlKCk7XG5cdFx0aWYoZW5kcG9pbnQgPT0gJ2VuZCcpIHZtLnRlbXBEYXRlVGltZS5lbmQgPSBuZXcgRGF0ZSgpO1xuXHR9XG5cblx0dm0udW5peFRpbWVUb0RhdGVUaW1lID0gZnVuY3Rpb24gKHVuaXhUaW1lKSB7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KHVuaXhUaW1lKSk7XG5cdH07XG5cblx0dm0uZGF0ZVRpbWVUb1VuaXhUaW1lID0gZnVuY3Rpb24gKGRhdGVUaW1lKSB7XG5cdFx0cmV0dXJuIERhdGUucGFyc2UoZGF0ZVRpbWUpO1xuXHR9O1xuXG5cdHZtLnN1Ym1pdCA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2cuaW5mbygnc3VibWl0dGluZyB0aGUgZm9ybSBub3chJyk7XG5cdH1cblxuXHR2bS5iYWNrVG9Vc2VyRXZlbnRzID0gZnVuY3Rpb24oKSB7XG5cdFx0JGxvY2F0aW9uLnBhdGgoJy91c2VyRXZlbnRzLycgKyAkcm91dGVQYXJhbXMudWlkICsgJy8nICsgJHJvdXRlUGFyYW1zLnRva2VuKTtcblx0fVxuXG5cdHZtLmV2ZW50UmVkaXJlY3QgPSBmdW5jdGlvbihwYXRoLCBldmVudElEKSB7XG5cdFx0dmFyIGZ1bGxQYXRoID0gcGF0aCArICcvJyArICRyb3V0ZVBhcmFtcy51aWQgKyAnLycgKyAkcm91dGVQYXJhbXMudG9rZW47XG5cdFx0Ly9yZWRpcmVjdFxuXHRcdCRsb2cuaW5mbygncmVkaXJlY3RpbmcgdG86ICcgKyBmdWxsUGF0aCk7XG5cdFx0JGxvY2F0aW9uLnBhdGgoZnVsbFBhdGgpO1xuXHR9XG5cblx0dm0uY2hhbmdlU2VjdGlvbiA9IGZ1bmN0aW9uKHRhcmdldFNlY3Rpb24pIHtcblx0XHQkbG9nLmluZm8oJ2FyZSB3ZSBoZXJlJyk7XG5cdFx0Zm9yKGkgPSAxOyBpIDw9MzsgaSsrKSB7XG5cdFx0XHRpZihpPT10YXJnZXRTZWN0aW9uKSB7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLmFjdGl2ZSA9IHRydWU7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLnN0eWxlWydiYWNrZ3JvdW5kLWNvbG9yJ10gPSd5ZWxsb3cnO1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5zdHlsZVsnY29sb3InXSA9J2JsYWNrJztcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLmFjdGl2ZSA9IGZhbHNlO1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5zdHlsZVsnYmFja2dyb3VuZC1jb2xvciddID0nZ3JheSc7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLnN0eWxlWydjb2xvciddID0nd2hpdGUnO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHZtLnNhdmVFdmVudFRpbWUgPSBmdW5jdGlvbihkYXRlVGltZSwgdGFyZ2V0KSB7XG5cdFx0Ly9pZiB0aGlzIGV2ZW50IGRpZG4ndCBoYXZlIGEgc3RhcnQgdGltZSwgY3JlYXRlIGl0XG5cdFx0aWYoIXZtLmV2ZW50LmV2ZW50VGltZXMpIHsgXG5cdFx0XHR2bS5ldmVudC5ldmVudFRpbWVzID0ge3N0YXJ0OiAnJywgZW5kOiAnJ307XG5cdFx0XHR2bS5ldmVudC5ldmVudFRpbWVzLnN0YXJ0ID0gdm0uZGF0ZVRpbWVUb1VuaXhUaW1lKHZtLnRlbXBEYXRlVGltZS5zdGFydCk7IFxuXHRcdFx0dm0uZXZlbnQuZXZlbnRUaW1lcy5lbmQgPSB2bS5kYXRlVGltZVRvVW5peFRpbWUodm0udGVtcERhdGVUaW1lLmVuZCk7XG5cdFx0fVxuXG5cdFx0aWYoKHZtLnRlbXBEYXRlVGltZS5lbmQgPCB2bS50ZW1wRGF0ZVRpbWUuc3RhcnQpICYmIHRhcmdldCA9PSAnc3RhcnQnKSB2bS50ZW1wRGF0ZVRpbWUuZW5kID0gdm0udGVtcERhdGVUaW1lLnN0YXJ0O1xuXHRcdGlmKHRhcmdldCA9PSAnc3RhcnQnKSB2bS5ldmVudC5ldmVudFRpbWVzLnN0YXJ0ID0gdm0uZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKTtcblx0XHRpZih0YXJnZXQgPT0gJ2VuZCcpIHZtLmV2ZW50LmV2ZW50VGltZXMuZW5kID0gdm0uZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKTtcblx0fVxuXG5cdHZtLmd1ZXN0c0FyZUludml0ZWQgPSBmdW5jdGlvbigpIHtcblx0XHRpZih2bS5ldmVudC5ndWVzdExpc3QpIHJldHVybiB0cnVlO1xuXHRcdGVsc2UgcmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0dm0udmFsaWRhdGVHdWVzdEVtYWlsID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9pZiB0aGVyZSBpcyBhbiBlbWFpbCBhZGRyZXNzXG5cdFx0aWYodm0ubmV3R3Vlc3QuZW1haWwuYWRkcmVzcykge1xuXHRcdFx0Ly9jaGVjayB2YWxpZGl0eVxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XCIsIFwiXCIpO1xuXG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3Qodm0ubmV3R3Vlc3QuZW1haWwuYWRkcmVzcykpIHtcblx0XHRcdFx0dm0ubmV3R3Vlc3QuZW1haWwudmFsaWQgPSB0cnVlO1xuXHRcdFx0XHR2bS5uZXdHdWVzdC5lbWFpbC5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLm5ld0d1ZXN0LmVtYWlsLnZhbGlkID0gZmFsc2U7XG5cdFx0XHRcdHZtLm5ld0d1ZXN0LmVtYWlsLnN0eWxlID0ge2NvbG9yOicnfTtcblx0XHRcdH1cdFx0XHRcblx0XHR9XG5cdH1cblxuXHR2bS5pc1NlY3Rpb25Db21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdGZvcihpPTA7aTw4O2krKykge1xuXHRcdFx0JGxvZy5pbmZvKHZtLnJlcXVpcmVkSW5wdXRzW2ldKTtcblx0XHR9XG5cdH1cblxuXHR2bS5zYXZlQW5kQWR2YW5jZSA9IGZ1bmN0aW9uKCkge1xuXHRcdHZtLmV2ZW50LiRzYXZlKCkudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdCRsb2cuaW5mbygnZXZlbnQgc2F2ZWQnKTtcblx0XHR9KS5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0JGxvZy5pbmZvKCdlcnJvciEgJyArIGVycm9yKTtcblx0XHR9KTtcblxuXHRcdC8vY2hlY2sgZm9yIGNvbXBsZXRlbmVzXG5cdFx0dm0uaXNTZWN0aW9uQ29tcGxldGUoKTtcblxuXHRcdGlmKHZtLm1hbmFnZVNlY3Rpb25zWzFdLmNvbXBsZXRlID09IHRydWUgJiYgdm0ubWFuYWdlU2VjdGlvbnNbMl0uY29tcGxldGUgPT0gdHJ1ZSAmJiB2bS5tYW5hZ2VTZWN0aW9uc1szXS5jb21wbGV0ZSA9PSB0cnVlKSB7XG5cdFx0XHR2bS5ldmVudFJlZGlyZWN0KCcvdXNlckV2ZW50cycsICRyb3V0ZVBhcmFtcy51aWQpO1xuXHRcdH0gZWxzZSBpZiAodm0ubWFuYWdlU2VjdGlvbnNbMV0uYWN0aXZlKSB2bS5jaGFuZ2VTZWN0aW9uKDIpO1xuXHRcdGVsc2UgaWYgKHZtLm1hbmFnZVNlY3Rpb25zWzJdLmFjdGl2ZSkgdm0uY2hhbmdlU2VjdGlvbigzKTtcblx0XHRlbHNlIGlmICh2bS5tYW5hZ2VTZWN0aW9uc1szXS5hY3RpdmUpIHZtLmNoYW5nZVNlY3Rpb24oMSk7XG5cdH1cblxuXHR2bS5hZGRHdWVzdFRvSG9zdHNMaXN0ID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9kZWNsYXJlIGFuZCBpbml0aWFsaXplIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciB1c2VyS2V5ID0gdXRmOF90b19iNjQodm0ubmV3R3Vlc3QuZW1haWwuYWRkcmVzcyk7XG5cblx0XHQvL2lmIGVtYWlsIGlzIHZhbGlkIGFuZCBuYW1lIGV4aXN0c1xuXHRcdGlmICh2bS5uZXdHdWVzdC5uYW1lICYmIHZtLm5ld0d1ZXN0LmVtYWlsLnZhbGlkKSB7XG5cdFx0XHQvL2lzIHRoZXJlIGEgZ3Vlc3QgbGlzdCBhbHJlYWR5PyBJZiBub3QgY3JlYXRlIG9uZVxuXHRcdFx0aWYoIXZtLmV2ZW50Lmd1ZXN0TGlzdCkge1xuXHRcdFx0XHR2bS5ldmVudC5ndWVzdExpc3QgPSB7fTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vaWYgc28gaXMgdGhpcyBwZXJzb24gYWxyZWFkeSBvbiB0aGUgbGlzdD9cblx0XHRcdFx0dmFyIGkgPTA7XG5cdFx0XHRcdHdoaWxlKHZtLmV2ZW50Lmd1ZXN0TGlzdFtpXSkge1xuXHRcdFx0XHRcdGlmKHZtLmV2ZW50Lmd1ZXN0TGlzdFtpXS5lbWFpbCA9PSBiNjRfdG9fdXRmOCh1c2VyS2V5KSkge1xuXHRcdFx0XHRcdFx0JGxvZy5pbmZvKCdUaGlzIGd1ZXN0IGlzIGFscmVhZHkgb24gdGhlIGxpc3QnKTtcblx0XHRcdFx0XHRcdGNsZWFuTmV3R3Vlc3RWYXJpYWJsZSgpO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpKys7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly9pcyB0aGlzIGd1ZXN0IGEgcmVnaXN0ZXJlZCB1c2VyP1xuXHRcdFx0aWYocmVnaXN0ZXJlZFVzZXJzW3VzZXJLZXldKSB7XG5cdFx0XHRcdC8vaXMgdGhlIHJlZ2lzdGVyZWQgdXNlciB0aGUgaG9zdD9cblx0XHRcdFx0aWYocmVnaXN0ZXJlZFVzZXJzW3VzZXJLZXldID09ICRyb3V0ZVBhcmFtcy51aWQpIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ3RyaWVkIHRvIHJlZ2lzdGVyIHRoZSBob3N0Jyk7XG5cdFx0XHRcdFx0Y2xlYW5OZXdHdWVzdFZhcmlhYmxlKCk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdC8vYWRkIHRoZW0gdG8gdGhlIGFwcHJvcHJpYXRlIHJlZ2lzdGVyZWQgdXNlcnMnIGxpc3Qgb2YgZXZlbnQgaW52aXRlc1xuXHRcdFx0XHRcdGludml0ZUFSZWdpc3RlcmVkVXNlcihyZWdpc3RlcmVkVXNlcnNbdXNlcktleV0pO1xuXG5cdFx0XHRcdFx0Ly9hZGQgdGhlIGd1ZXN0IHRvIHRoZSBsaXN0XG5cdFx0XHRcdFx0dm0uZXZlbnQuZ3Vlc3RMaXN0W3JlZ2lzdGVyZWRVc2Vyc1t1c2VyS2V5XV0gPSB7XG5cdFx0XHRcdFx0XHRhdHRlbmRpbmc6IGZhbHNlLCBcblx0XHRcdFx0XHRcdHN0YXR1czoncGVuZGluZycsIFxuXHRcdFx0XHRcdFx0bmFtZTogdm0ubmV3R3Vlc3QubmFtZSwgXG5cdFx0XHRcdFx0XHRlbWFpbDp2bS5uZXdHdWVzdC5lbWFpbC5hZGRyZXNzLFxuXHRcdFx0XHRcdH07XHRcdFx0XHRcdFxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2FkZCB0aGUgaW52aXRlIHRvIHRoZSBub24tcmVnaXN0ZXJlZCB1c2VycyBsaXN0IG9mIGV2ZW50IGludml0ZXNcblx0XHRcdFx0aW52aXRlQW5VbnJlZ2lzdGVyZWRVc2VyKHVzZXJLZXkpO1xuXG5cdFx0XHRcdC8vYWRkIHRoZSBndWVzdCB0byB0aGUgbGlzdFxuXHRcdFx0XHR2bS5ldmVudC5ndWVzdExpc3RbdXNlcktleV0gPSB7XG5cdFx0XHRcdFx0XHRhdHRlbmRpbmc6IGZhbHNlLCBcblx0XHRcdFx0XHRcdHN0YXR1czoncGVuZGluZycsIFxuXHRcdFx0XHRcdFx0bmFtZTogdm0ubmV3R3Vlc3QubmFtZSwgXG5cdFx0XHRcdFx0XHRlbWFpbDp2bS5uZXdHdWVzdC5lbWFpbC5hZGRyZXNzLFxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXG5cblx0XHRcdC8vc2F2ZSB0aGUgZXZlbnRcblx0XHRcdHZtLnNhdmVFdmVudCgpO1xuXHRcdFx0Ly9jbGVhciB0aGUgdGVtcCB2YWx1ZXNcblx0XHRcdGNsZWFuTmV3R3Vlc3RWYXJpYWJsZSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkbG9nLmluZm8oJ3lvdSBkaWRuXFwndCBlbnRlciBhIG5hbWUgYW5kIG9yIGVtYWlsJyk7XG5cdFx0fVxuXHR9XG5cblx0dm0uZ3Vlc3RXaWxsQXR0ZW5kID0gZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHR2YXIgY3VycmVudFVzZXIgPSByZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJ2V2ZW50cycpO1xuXHRcdHZhciB0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucyA9IDA7XG5cdFx0dmFyIHJlbW92ZUF0dGVuZGluZ1VwZGF0ZWQgPSBmYWxzZTtcblx0XHRcblx0XHQvL2NoYW5nZSBhdHRlbmRpbmcgdG8gdHJ1ZSBpbiBob3N0J3MgZ3Vlc3RMaXN0XG5cdFx0dm0uZXZlbnQuZ3Vlc3RMaXN0WyRyb3V0ZVBhcmFtcy51aWRdLmF0dGVuZGluZyA9IHJlc3BvbnNlO1xuXHRcdC8vY2hhbmdlIHN0YXR1cyB0byAnYXR0ZW5kaW5nJyBpbiBob3N0J3MgZ3Vlc3RMaXN0XG5cdFx0dm0uZXZlbnQuZ3Vlc3RMaXN0WyRyb3V0ZVBhcmFtcy51aWRdLnN0YXR1cyA9ICdhdHRlbmRpbmcnO1xuXHRcdFxuXHRcdC8vZ2V0IHRoZSBpbnZpdGF0aW9uIGRldGFpbHNcblx0XHRjdXJyZW50VXNlci5jaGlsZCgncGVuZGluZycpLm9uKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWxiZVxuXHRcdFx0dmFyIGludml0YXRpb25zID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHQvL2xvZyBzdGFydGluZyB2YWx1ZXNcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9ucyk7XG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnNbJHJvdXRlUGFyYW1zLmhvc3RJZF0pO1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdWyRyb3V0ZVBhcmFtcy5ldmVudElkXSk7XG5cblx0XHRcdHZhciB0aGlzSW52aXRhdGlvbiA9IGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdWyRyb3V0ZVBhcmFtcy5ldmVudElkXTtcblx0XHRcdFxuXHRcdFx0JGxvZy5pbmZvKHRoaXNJbnZpdGF0aW9uKTtcblx0XHRcdFxuXHRcdFx0Ly9jaGVjayAjIG9mIGluaXZpYXRpb25zXG5cdFx0XHRmb3IoaW52aXRhdGlvbiBpbiBpbnZpdGF0aW9ucykge1xuXHRcdFx0XHR0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucysrO1xuXHRcdFx0fVxuXG5cdFx0XHQvL3JlcG9ydCAjIG9mIGludml0YXRpb25zXG5cdFx0XHQkbG9nLmluZm8oXCJ0b3RhbCBhdHRlbmRpbmc6IFwiICsgdG90YWxQZW5kaW5nSW52aXRhdGlvbnMpO1xuXHRcdFx0XG5cdFx0XHQvL2FkZCB0aGUgZXZlbnQgdG8gdGhlIGd1ZXN0J3MgYXR0ZW5kaW5nIGxpc3Rcblx0XHRcdGlmKHJlc3BvbnNlKSBjdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykuY2hpbGQoJHJvdXRlUGFyYW1zLmhvc3RJZCkuY2hpbGQoJHJvdXRlUGFyYW1zLmV2ZW50SWQpLnNldCh0aGlzSW52aXRhdGlvbiwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbyhlcnJvcik7XG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXG5cdFx0Ly9pZiB0aGUgdXBkYXRlZCBwbGFjZWhvbGRlciB3YXMgb24gdGhlIGF0dGVuZGluZyBsaXN0IHJlbW92ZSBpdFxuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5vbigndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHRcdHZhciBhdHRlbmRpbmdMaXN0ID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHRcblx0XHRcdC8vcmVwb3J0IGFjdGlvbnNcblx0XHRcdCRsb2cuaW5mbygndGhpcyBpcyB0aGUgYXR0ZW5kaW5nIGxpc3QnKTtcblx0XHRcdCRsb2cuaW5mbyhhdHRlbmRpbmdMaXN0KTtcblx0XHRcdFxuXHRcdFx0Ly90aHJvdyBmbGFnIGZvciBsYXRlclxuXHRcdFx0aWYoYXR0ZW5kaW5nTGlzdC51cGRhdGVkKSByZW1vdmVBdHRlbmRpbmdVcGRhdGVkID0gdHJ1ZTtcblxuXHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHQvL2lmIHRoZXIgd2FzIGFuIGVycm9yIHJlcG9ydCBpdFxuXHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbyhlcnJvcik7XG5cdFx0fSk7XG5cblx0XHQvL2lmIHRoaXMgaXMgdGhlIGxhc3QgcGVuZGluZyBldmVudCBvbiB0aGUgZ3Vlc3QncyBwZW5kaW5nIGxpc3QsIGFkZCB0aGUgdXBkYXRlZCBwbGFjZWhvbGRlclxuXHRcdGlmKHRvdGFsUGVuZGluZ0ludml0YXRpb25zIDwgMikge1xuXHRcdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHRcdHZhciBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XG5cblx0XHRcdC8vcmVwbGFjZSB3aXRoIHVwZGF0ZWQgZmllbGRcblx0XHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdwZW5kaW5nJykudXBkYXRlKHtcblx0XHRcdFx0dXBkYXRlZDogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbyhlcnJvcik7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHQvL3JlbW92ZSB0aGUgZXZlbnQgZnJvbSB0aGUgZ3Vlc3QncyBwZW5kaW5nIGxpc3Rcblx0XHRjdXJyZW50VXNlci5jaGlsZCgncGVuZGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ob3N0SWQpLnJlbW92ZSgpO1xuXG5cdFx0Ly9pZiB0aGVyZSB3YXMgYW4gdXBkYXRlZCBmaWVsZCBpbiBhdHRlbmRpbmcsIHJlbW92ZSBpdFxuXHRcdGlmKHJlbW92ZUF0dGVuZGluZ1VwZGF0ZWQpIHtcblx0XHRcdCRsb2cuaW5mbygncmVtb3ZpbmcgdGhlIHVwZGF0ZWQgcGxhY2Vob2xkZXInKTtcblx0XHRcdC8vY3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLmNoaWxkKCd1cGRhdGVkJykucmVtb3ZlKCk7XG5cdFx0fVxuXG5cdFx0Ly9zYXZlIGNoYW5nZXNcblx0XHR2bS5ldmVudC4kc2F2ZSgpO1xuXHR9XG5cblx0dm0udXBkYXRlVXBkYXRlZFBhcmFtID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGN1cnJlbnRVc2VyID0gcmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCdldmVudHMnKTtcblx0XHRcblx0XHQkbG9nLmluZm8oJ3VwZGF0aW5nIHRoZSBwYXJhbScpO1xuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5vbigndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0JGxvZy5pbmZvKHNuYXBzaG90LnZhbCgpKTtcblx0XHR9KTtcblx0XHRjdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykuY2hpbGQoJ3VwZGF0ZWQnKS5yZW1vdmUoKTtcblx0fVxuXG5cdHZtLmFkZEludml0YXRpb25Ub0F0dGVuZGluZyA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdFx0dmFyIGN1cnJlbnRVc2VyID0gcmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCdldmVudHMnKTtcblx0XHR2YXIgdG90YWxQZW5kaW5nSW52aXRhdGlvbnMgPSAwO1xuXG5cdFx0Ly9nZXQgdGhlIGludml0YXRpb24gZGV0YWlsc1xuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdwZW5kaW5nJykub24oJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhbGJlXG5cdFx0XHR2YXIgaW52aXRhdGlvbnMgPSBzbmFwc2hvdC52YWwoKTtcblx0XHRcdHZhciB0aGlzSW52aXRhdGlvbiA9IGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdWyRyb3V0ZVBhcmFtcy5ldmVudElkXTtcblx0XHRcdFxuXHRcdFx0Ly9sb2cgc3RhcnRpbmcgdmFsdWVzXG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnMpO1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdKTtcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9uc1skcm91dGVQYXJhbXMuaG9zdElkXVskcm91dGVQYXJhbXMuZXZlbnRJZF0pO1xuXHRcdFx0XG5cdFx0XHQvL2NoZWNrICMgb2YgaW5pdmlhdGlvbnNcblx0XHRcdGZvcihpbnZpdGF0aW9uIGluIGludml0YXRpb25zKSB7XG5cdFx0XHRcdHRvdGFsUGVuZGluZ0ludml0YXRpb25zKys7XG5cdFx0XHR9XG5cblx0XHRcdC8vcmVwb3J0ICMgb2YgaW52aXRhdGlvbnNcblx0XHRcdCRsb2cuaW5mbyhcInRvdGFsIHBlbmRpbmcgaW52aXRhdGlvbnM6IFwiICsgdG90YWxQZW5kaW5nSW52aXRhdGlvbnMpO1xuXHRcdFx0XG5cdFx0XHQkbG9nLmluZm8ocmVzcG9uc2UpO1xuXHRcdFx0Ly9hZGQgdGhlIGV2ZW50IHRvIHRoZSBndWVzdCdzIGF0dGVuZGluZyBsaXN0XG5cdFx0XHRpZihyZXNwb25zZSkgY3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ob3N0SWQpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ldmVudElkKS5zZXQodGhpc0ludml0YXRpb24sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oZXJyb3IpO1xuXHRcdFx0fSk7XG5cblxuXG5cdFx0fSk7XG5cdH1cblxuXHQvL3N0YXJ0IHJ1blxuXHRpbml0KCk7XG59XG4iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdHdWVzdEV2ZW50Q29udHJvbGxlcicsIEd1ZXN0RXZlbnRDb250cm9sbGVyKTtcblxuR3Vlc3RFdmVudENvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIEd1ZXN0RXZlbnRDb250cm9sbGVyKCRsb2cpIHtcblx0JGxvZy5pbmZvKCdpbnRvIHRoZSBHdWVzdEV2ZW50Q29udHJvbGxlcicpO1xufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ0hvc3RFdmVudENvbnRyb2xsZXInLCBIb3N0RXZlbnRDb250cm9sbGVyKTtcblxuSG9zdEV2ZW50Q29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZycsICckcm91dGVQYXJhbXMnLCAndXNlckRhdGEnLCAndHJhZmZpY1ZhbGV0JywgJ3ZhbGlkYXRpb24nXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBIb3N0RXZlbnRDb250cm9sbGVyKCRzY29wZSwgJGxvZywgJHJvdXRlUGFyYW1zLCB1c2VyRGF0YSwgdHJhZmZpY1ZhbGV0LCB2YWxpZGF0aW9uKSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdFxuXHQvL2xvY2FsIHZhcmlhYmxlc1xuXHR2YXIgaG9zdGVkRXZlbnRTaGVycGEgPSB0cmFmZmljVmFsZXQ7XG5cdHZhciB0aGlzRXZlbnRNYW5hZ2VyID0gdXNlckRhdGE7XG5cdHZhciByZXF1aXJubWVudHNGYWN0b3J5ID0gdmFsaWRhdGlvbjtcblxuXHQvL2xvY2FsIHZhcmlhYmxlc1xuXHR2YXIgcGVyY2VudENvbXBsZXRlID0gMDtcblxuXHQvL3ZpZXcgbW9kZWwgdmFyaWFibGVzXG5cdHZtLmFjdGl2ZVNlY3Rpb24gPSAxO1xuXHR2bS50ZW1wVGltZSA9IHtzdGFydDogJycsIGVuZDogJycsIGR1cmF0aW9uOicnfTtcblx0dm0ucHJvZ3Jlc3NCYXIgPSB7XG5cdFx0Y29tcGxldGU6IHZtLnBlcmNlbnRDb21wbGV0ZSxcblx0XHRzdHlsZToge1xuXHRcdFx0d2lkdGg6ICh2bS5wZXJjZW50Q29tcGxldGUgKyAnJScpXG5cdFx0fSxcblx0XHRtZXNzYWdlOiAodm0ucGVyY2VudENvbXBsZXRlICsgJyUnKVxuXHR9XG5cdHZtLmFjdGlvbkJ0biA9IHtcblx0XHRkaXY6IHtcblx0XHRcdGNsYXNzOiB7XG5cdFx0XHRcdCdjb2wteHMtNic6IHRydWUsXG5cdFx0XHRcdCdjb2wtc20tNic6IHRydWUsXG5cdFx0XHR9XG5cdFx0fSxcblx0XHRidG46IHtcblx0XHRcdGNsYXNzOiB7XG5cdFx0XHRcdCdidG4nOiB0cnVlLFxuXHRcdFx0XHQnYnRuLXN1Y2Nlc3MnOiBmYWxzZSxcblx0XHRcdFx0J2J0bi13YXJuaW5nJzogdHJ1ZSxcblx0XHRcdFx0J3B1bGwtcmlnaHQnOiB0cnVlLFxuXHRcdFx0fSxcblx0XHRcdG1lc3NhZ2U6ICdBZGQgSW5mbydcblx0XHR9XG5cdH1cblx0dm0udGVtcEV2ZW50ID0ge307XG5cdHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZSA9IHJlcXVpcm5tZW50c0ZhY3RvcnkuZ2VuZXJhdGVFdmVudFJlcXVpcm5tZW50cygpO1xuXG5cdC8vbG9jYWwgbWV0aG9kc1xuXHRmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fTtcblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH07XG5cblx0ZnVuY3Rpb24gY2FsY3VsYXRlRHVyYXRpb24oc3RhcnQsIGVuZCkge1xuXHRcdHJldHVybiAoZGF0ZVRpbWVUb1VuaXhUaW1lKGVuZCkgLSBkYXRlVGltZVRvVW5peFRpbWUoc3RhcnQpKSAvICg2MCoxMDAwKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNoYW5nZVNhdmVCdG4oZGlyZWN0aW9uKSB7XG5cdFx0aWYoZGlyZWN0aW9uID09ICdvcGVuJykge1xuXHRcdFx0dm0uYWN0aW9uQnRuLmJ0bi5jbGFzc1snYnRuLXN1Y2Nlc3MnXSA9IHRydWU7XG5cdFx0XHR2bS5hY3Rpb25CdG4uYnRuLmNsYXNzWydidG4td2FybmluZyddID0gZmFsc2U7XG5cdFx0XHR2bS5hY3Rpb25CdG4uYnRuLm1lc3NhZ2UgPSAnU2F2ZSBFdmVudCc7XG5cdFx0fSBlbHNlIGlmKGRpcmVjdGlvbiA9PSAnY2xvc2UnKSB7XG5cdFx0XHR2bS5hY3Rpb25CdG4uYnRuLmNsYXNzWydidG4tc3VjY2VzcyddID0gZmFsc2U7XG5cdFx0XHR2bS5hY3Rpb25CdG4uYnRuLmNsYXNzWydidG4td2FybmluZyddID0gdHJ1ZTtcblx0XHRcdHZtLmFjdGlvbkJ0bi5idG4ubWVzc2FnZSA9ICdBZGQgSW5mbyc7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gdXBkYXRlUHJvZ3Jlc3NCYXIodW5pdHMpIHtcblx0XHRwZXJjZW50Q29tcGxldGUgKz0gdW5pdHM7XG5cdFx0dm0ucHJvZ3Jlc3NCYXIuY29tcGxldGUgPSBwZXJjZW50Q29tcGxldGU7XG5cdFx0dm0ucHJvZ3Jlc3NCYXIuc3R5bGUud2lkdGggPSAocGVyY2VudENvbXBsZXRlICsgJyUnKTtcblx0XHR2bS5wcm9ncmVzc0Jhci5tZXNzYWdlID0gKHBlcmNlbnRDb21wbGV0ZSArICclJyk7XG5cdFx0aWYocGVyY2VudENvbXBsZXRlID4gOTkpIGNoYW5nZVNhdmVCdG4oJ29wZW4nKTtcdFxuXHRcdGlmKHBlcmNlbnRDb21wbGV0ZSA8IDk5KSBjaGFuZ2VTYXZlQnRuKCdjbG9zZScpO1x0XHRcblx0fVxuXG5cdGZ1bmN0aW9uIGluaXRFdmVudFRpbWVzKCkge1xuXHRcdC8vYnVpbGQgbmV3IHRlbXAgdGltZXNcblx0XHR2YXIgbm93ID0gbmV3IERhdGUoKTtcblxuXHRcdC8vcm91bmQgdG8gdGhlIG5lYXJlc3QgaG91ciwgY3V0IG9mZiBhbnl0aGluZyBzbWFsbGVyXG5cdFx0bm93LnNldEhvdXJzKG5vdy5nZXRIb3VycygpICsgTWF0aC5yb3VuZChub3cuZ2V0TWludXRlcygpLzYwKSk7XG5cdFx0bm93LnNldE1pbnV0ZXMoMCk7XG5cdFx0bm93LnNldFNlY29uZHMoMCk7XG5cdFx0bm93LnNldE1pbGxpc2Vjb25kcygwKTtcblxuXHRcdHZtLnRlbXBUaW1lLnN0YXJ0ID0gbm93O1xuXHRcdHZtLnRlbXBUaW1lLmVuZCA9IG5vdztcblxuXHRcdHZtLnRlbXBUaW1lLmR1cmF0aW9uID0gY2FsY3VsYXRlRHVyYXRpb24odm0udGVtcFRpbWUuc3RhcnQsIHZtLnRlbXBUaW1lLmVuZCk7XG5cdFx0XG5cdH1cblxuXHRmdW5jdGlvbiB1cGRhdGVUZW1wVGltZUZyb21Nb2RlbCgpIHtcblx0XHQvL2lmIHN0YXJ0IHRpbWVzIGFyZSBhdmFpbGFibGVcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2bS50ZW1wRXZlbnQuZXZlbnRUaW1lcy5zdGFydCkpIHtcblx0XHRcdC8vc2V0IHRoZSB0ZW1wVGltZSBtb2RlbFxuXHRcdFx0dm0udGVtcFRpbWUuc3RhcnQgPSB1bml4VGltZVRvRGF0ZVRpbWUodm0udGVtcEV2ZW50LmV2ZW50VGltZXMuc3RhcnQpO1xuXHRcdFx0dm0udGVtcFRpbWUuZW5kID0gdW5peFRpbWVUb0RhdGVUaW1lKHZtLnRlbXBFdmVudC5ldmVudFRpbWVzLmVuZCk7XG5cdFx0fVxuXG5cdH1cblxuXHRmdW5jdGlvbiBpbml0KCkge1xuXHRcdCRsb2cuaW5mbyh0aGlzRXZlbnRNYW5hZ2VyLmdldEFjdGl2ZUV2ZW50KCkpO1xuXHRcdC8vaWYgdGhlcmUgaXMgYW4gYWN0aXZlIGV2ZW50LCBsb2FkIGl0XG5cdFx0aWYodGhpc0V2ZW50TWFuYWdlci50aGVyZUlzQW5BY3RpdmVFdmVudCgpKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2xvYWRpbmcgdGhlIGFjdGl2ZSBldmVudCcpO1xuXHRcdFx0dmFyIGFjdGl2ZVBhY2thZ2UgPSB0aGlzRXZlbnRNYW5hZ2VyLmdldEFjdGl2ZUV2ZW50KCk7XG5cblx0XHRcdHZtLnByb2dyZXNzQmFyID0gYWN0aXZlUGFja2FnZS5wcm9ncmVzc0Jhcjtcblx0XHRcdHBlcmNlbnRDb21wbGV0ZSA9IGFjdGl2ZVBhY2thZ2UucGVyY2VudENvbXBsZXRlXG5cdFx0XHR2bS50ZW1wRXZlbnQgPSBhY3RpdmVQYWNrYWdlLmV2ZW50O1xuXHRcdFx0dm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlID0gYWN0aXZlUGFja2FnZS5yZXF1aXJlZEZpZWxkcztcblxuXHRcdFx0JGxvZy5pbmZvKHZtLnByb2dyZXNzQmFyKTtcblxuXHRcdH0gZWxzZSB7XG5cdFx0XHQvL2xvYWQgZXZlbnQgZGV0YWlsc1xuXHRcdFx0dGhpc0V2ZW50TWFuYWdlci5sb2FkQW5FdmVudFByb2dyZXNzaXZlbHkoJHJvdXRlUGFyYW1zLnVpZCwgJHJvdXRlUGFyYW1zLmV2ZW50SWQpXG5cdFx0XHQudGhlbihmdW5jdGlvbih0aGVFdmVudCkge1xuXHRcdFx0XHQvL2FkZCB0aGlzIGV2ZW50IG1vZGVsIHRvIHRoZSB2aWV3IG1vZGVsIGV2ZW50XG5cdFx0XHRcdHZtLnRlbXBFdmVudCA9IHRoZUV2ZW50O1xuXG5cdFx0XHRcdC8vdXBkYXRlIHRlbXBUaW1lXG5cdFx0XHRcdHVwZGF0ZVRlbXBUaW1lRnJvbU1vZGVsKCk7XG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdCRsb2coJ3RoZSBlcnJvciBpczogJyArIGVycm9yKTtcblx0XHRcdH0pXG5cdFx0fVxuXG5cdFx0Ly9sb2FkIHNwZWNpZmllZCBzZWN0aW9uXG5cdFx0dm0uYWN0aXZlU2VjdGlvbiA9IHBhcnNlSW50KCRyb3V0ZVBhcmFtcy5zZWN0aW9uKTtcblx0XHQvL3NldCB0ZW1wVGltZXNcblx0XHRpbml0RXZlbnRUaW1lcygpO1xuXHR9XG5cblx0Ly92aWV3IG1vZGVsIG1ldGhvZHNcblx0dm0uZm9ybWF0RHVyYXRpb24gPSBmdW5jdGlvbigpIHtcblx0XHQvL2NhbGMgZHVyYXRpb25cblx0XHR2bS50ZW1wVGltZS5kdXJhdGlvbiA9IGNhbGN1bGF0ZUR1cmF0aW9uKHZtLnRlbXBUaW1lLnN0YXJ0LCB2bS50ZW1wVGltZS5lbmQpO1xuXHRcdFxuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGhvdXJzID0gTWF0aC5mbG9vcih2bS50ZW1wVGltZS5kdXJhdGlvbi8oNjApKTtcblx0XHR2YXIgbWluID0gdm0udGVtcFRpbWUuZHVyYXRpb24gJSA2MDtcblx0XHR2YXIgZnJhY3Rpb24gPSAoTWF0aC5yb3VuZChtaW4vMTUpLzQpO1xuXG5cdFx0cmV0dXJuIChob3VycytmcmFjdGlvbikgKyAnIGgnO1xuXHR9XG5cblx0dm0udmFsaWRhdGVUaW1lID0gZnVuY3Rpb24oc3RhcnRPckVuZCkge1x0XG5cblx0XHRpZih2bS50ZW1wVGltZS5kdXJhdGlvbiA+IDI0KSB2bS5zZXR0aW5nVGVtcFN0YXJ0KCk7XG5cblx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciB0aW1lcyA9IHtcblx0XHRcdCdldmVudFN0YXJ0Jzogdm0udGVtcFRpbWUuc3RhcnQsXG5cdFx0XHQnZXZlbnRFbmQnOiB2bS50ZW1wVGltZS5lbmRcblx0XHR9O1xuXG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodGltZXNbc3RhcnRPckVuZF0pICYmIHRpbWVzW3N0YXJ0T3JFbmRdICE9ICcnICYmIHZtLnRlbXBUaW1lLmR1cmF0aW9uID4gMCkge1xuXHRcdFx0aWYodm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlW3N0YXJ0T3JFbmRdLmNvbXBsZXRlZCA9PSBmYWxzZSkgdXBkYXRlUHJvZ3Jlc3NCYXIoMTEpO1xuXHRcdFx0dm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlW3N0YXJ0T3JFbmRdLmNvbXBsZXRlZCA9IHRydWU7XG5cdFx0XHR2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbc3RhcnRPckVuZF0ucm93LmNsYXNzWydoYXMtc3VjY2VzcyddID0gdHJ1ZTtcblx0XHRcdHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtzdGFydE9yRW5kXS5yb3cuY2xhc3NbJ2hhcy1mZWVkYmFjayddID0gdHJ1ZTtcblx0XHRcdHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtzdGFydE9yRW5kXS5yb3cuY2xhc3NbJ2hhcy1lcnJvciddID0gZmFsc2U7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmKHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtzdGFydE9yRW5kXS5jb21wbGV0ZWQgPT0gdHJ1ZSkgdXBkYXRlUHJvZ3Jlc3NCYXIoLTExKTtcblx0XHRcdHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtzdGFydE9yRW5kXS5jb21wbGV0ZWQgPSBmYWxzZTtcblx0XHRcdHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtzdGFydE9yRW5kXS5yb3cuY2xhc3NbJ2hhcy1zdWNjZXNzJ10gPSBmYWxzZTtcblx0XHRcdHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtzdGFydE9yRW5kXS5yb3cuY2xhc3NbJ2hhcy1mZWVkYmFjayddID0gZmFsc2U7XG5cdFx0XHR2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbc3RhcnRPckVuZF0ucm93LmNsYXNzWydoYXMtZXJyb3InXSA9IHRydWU7XG5cdFx0fVxuXHR9XG5cblx0dm0uc2V0dGluZ1RlbXBTdGFydCA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0JGxvZy5pbmZvKGRhdGVUaW1lVG9Vbml4VGltZSh2bS50ZW1wVGltZS5lbmQpIC0gZGF0ZVRpbWVUb1VuaXhUaW1lKHZtLnRlbXBUaW1lLnN0YXJ0KS8oMTAwMCo2MCo2MCoyNCkpO1xuXG5cdFx0aWYoKGRhdGVUaW1lVG9Vbml4VGltZSh2bS50ZW1wVGltZS5lbmQpIDw9IGRhdGVUaW1lVG9Vbml4VGltZSh2bS50ZW1wVGltZS5zdGFydCkpIHx8IFxuXHRcdFx0KGRhdGVUaW1lVG9Vbml4VGltZSh2bS50ZW1wVGltZS5lbmQpIC0gZGF0ZVRpbWVUb1VuaXhUaW1lKHZtLnRlbXBUaW1lLnN0YXJ0KSA+ICgxMDAwKjYwKjYwKjI0KSkpIHtcblx0XHRcdG9sZFN0YXJ0ID0gZGF0ZVRpbWVUb1VuaXhUaW1lKHZtLnRlbXBUaW1lLnN0YXJ0KTtcblx0XHRcdG9sZEVuZCA9IGRhdGVUaW1lVG9Vbml4VGltZSh2bS50ZW1wVGltZS5lbmQpO1xuXG5cdFx0XHRuZXdFbmQgPSBvbGRTdGFydCArICg2MCo2MCoxMDAwKTtcblxuXHRcdFx0dm0udGVtcFRpbWUuZW5kID0gdW5peFRpbWVUb0RhdGVUaW1lKG5ld0VuZCk7XG5cdFx0fVxuXHRcdFxuIFx0fVxuXG5cdHZtLnNldHRpbmdUZW1wRW5kID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9zZXQgdmFsaWQgZW5kIHdpdGggc3RhcnRcblx0XHRpZih2bS50ZW1wVGltZS5zdGFydCA+IHZtLnRlbXBUaW1lLmVuZCkgdm0udGVtcFRpbWUuc3RhcnQgPSB2bS50ZW1wVGltZS5lbmQ7XG5cblx0XHQvL3ZhbGlkYXRlXG5cdFx0dm0udmFsaWRhdGVUaW1lKCdldmVudEVuZCcpO1xuXG5cdFx0Ly9jYWxjIGR1cmF0aW9uXG5cdFx0dm0udGVtcFRpbWUuZHVyYXRpb24gPSBjYWxjdWxhdGVEdXJhdGlvbih2bS50ZW1wVGltZS5zdGFydCwgdm0udGVtcFRpbWUuZW5kKTtcblxuXHRcdFxuXHR9XG5cblx0dm0uYmFja1RvVXNlckV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vaWYgdGhlIGV2ZW50IGlzIGNvbXBsZXRlZCwgc2F2ZSB0byB0aGUgZGJcblx0XHQvL2NoZWNrIHRoYXQgdGhlIGV2ZW50IGlzIGNvbXBsZXRlXG5cdFx0aWYocGVyY2VudENvbXBsZXRlID4gOTkpIHtcblx0XHRcdC8vaWYgc28gc2F2ZSB0aGUgZXZlbnQgbG9jYWxseVxuXHRcdFx0dGhpc0V2ZW50TWFuYWdlci5zYXZlTmV3SG9zdGluZ0V2ZW50KCdob3N0aW5nJywgdm0udGVtcEV2ZW50KTtcblx0XHRcdC8vdGhlbiBzeW5jIHRoZSBsb2NhbCB3aXRoIHRoZSBkYlxuXHRcdFx0dGhpc0V2ZW50TWFuYWdlci5zZXRSZW1vdGVFdmVudHNGcm9tTG9jYWwoJ2hvc3RpbmcnLCB2bS50ZW1wRXZlbnQpXG5cdFx0XHQudGhlbihmdW5jdGlvbihzdWNjZXNNZXNzYWdlKSB7XG5cdFx0XHRcdCRsb2cuaW5mbyhzdWNjZXNNZXNzYWdlKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb01lc3NhZ2UpIHtcblx0XHRcdFx0JGxvZy5pbmZvKGVycm9NZXNzYWdlKTtcblx0XHRcdH0pXG5cdFx0fVxuXG5cdFx0Ly9pZiBub3QgY29tcGxldGVkLCBkZWxldGUgdGhlIGV2ZW50IGVudGlyZWx5XG5cdFx0Ly90aGlzRXZlbnRNYW5hZ2VyLnJlbW92ZUluY29tcGxldGVFdmVudEZyb21EQih2bS50ZW1wRXZlbnQuaWQpO1xuXG5cdFx0Ly9zZW5kIHRoZSB1c2VyIGJhY2sgdG8gdGhlIHBhZ2UgdGhleSBjYW1lIGZyb21cblx0XHRob3N0ZWRFdmVudFNoZXJwYS5yZWRpcmVjdFRvKCcvdXNlckV2ZW50cycsICRyb3V0ZVBhcmFtcy51aWQpO1xuXHR9XG5cblx0dm0uc2VjdGlvbkJhY2sgPSBmdW5jdGlvbigpIHtcblx0XHQvL3NhdmUgdGVtcCBldmVudCBwYWNrYWdlXG5cdFx0dmFyIGV2ZW50UGFja2FnZSA9IHtcblx0XHRcdGV2ZW50OiB2bS50ZW1wRXZlbnQsXG5cdFx0XHRwcm9ncmVzc0Jhcjogdm0ucHJvZ3Jlc3NCYXIsXG5cdFx0XHRwZXJjZW50Q29tcGxldGU6IHBlcmNlbnRDb21wbGV0ZSxcblx0XHRcdHJlcXVpcmVkRmllbGRzOiB2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVcblx0XHR9O1xuXG5cdFx0dGhpc0V2ZW50TWFuYWdlci5zZXRBY3RpdmVFdmVudChldmVudFBhY2thZ2UpXG5cblx0XHQvL21vdmUgYmFja1xuXHRcdHRhcmdldFNlY3Rpb24gPSB2bS5hY3RpdmVTZWN0aW9uIC0gMTtcblx0XHRob3N0ZWRFdmVudFNoZXJwYS5yZWRpcmVjdFRvKCcvZXZlbnQvaG9zdCcsICRyb3V0ZVBhcmFtcy5ldmVudElkLCAkcm91dGVQYXJhbXMudWlkLCB0YXJnZXRTZWN0aW9uKTtcblx0fVx0XG5cblx0dm0uc2VjdGlvbkZvcndhcmQgPSBmdW5jdGlvbigpIHtcblx0XHQvL2lmIGFsbCByZXF1aXJlZCBmaWVsZHMgaGF2ZSBiZWVuIGVudGVyZWRcblx0XHQvL3NhdmUgdGVtcCBldmVudCBwYWNrYWdlXG5cdFx0dmFyIGV2ZW50UGFja2FnZSA9IHtcblx0XHRcdGV2ZW50OiB2bS50ZW1wRXZlbnQsXG5cdFx0XHRwcm9ncmVzc0Jhcjogdm0ucHJvZ3Jlc3NCYXIsXG5cdFx0XHRwZXJjZW50Q29tcGxldGU6IHBlcmNlbnRDb21wbGV0ZSxcblx0XHRcdHJlcXVpcmVkRmllbGRzOiB2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVcblx0XHR9O1xuXG5cdFx0dGhpc0V2ZW50TWFuYWdlci5zZXRBY3RpdmVFdmVudChldmVudFBhY2thZ2UpXG5cblx0XHQvL21vdmUgZm9yd2FyZFxuXHRcdHRhcmdldFNlY3Rpb24gPSB2bS5hY3RpdmVTZWN0aW9uICsgMTtcblx0XHRob3N0ZWRFdmVudFNoZXJwYS5yZWRpcmVjdFRvKCcvZXZlbnQvaG9zdCcsICRyb3V0ZVBhcmFtcy5ldmVudElkLCAkcm91dGVQYXJhbXMudWlkLCB0YXJnZXRTZWN0aW9uKTtcblx0fVxuXG5cdHZtLnZlcmlmeVJlcXVpcmVkID0gZnVuY3Rpb24oZmllbGQsIHZhbHVlKSB7XG5cdFxuXHRcdC8vY2hlY2sgdmFsaWRpdHlcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkgJiYgdmFsdWUgIT0gJycpIHtcblx0XHRcdGlmKHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtmaWVsZF0uY29tcGxldGVkID09IGZhbHNlKSB7XG5cdFx0XHRcdHVwZGF0ZVByb2dyZXNzQmFyKDExKTtcblx0XHRcdH1cblx0XHRcdHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtmaWVsZF0uY29tcGxldGVkID0gdHJ1ZTtcblx0XHRcdHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtmaWVsZF0ucm93LmNsYXNzWydoYXMtc3VjY2VzcyddID0gdHJ1ZTtcblx0XHRcdHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtmaWVsZF0ucm93LmNsYXNzWydoYXMtZmVlZGJhY2snXSA9IHRydWU7XG5cdFx0XHR2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbZmllbGRdLnJvdy5jbGFzc1snaGFzLWVycm9yJ10gPSBmYWxzZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYodm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlW2ZpZWxkXS5jb21wbGV0ZWQgPT0gdHJ1ZSkge1xuXHRcdFx0XHR1cGRhdGVQcm9ncmVzc0JhcigtMTEpO1xuXHRcdFx0fVxuXHRcdFx0dm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlW2ZpZWxkXS5jb21wbGV0ZWQgPSBmYWxzZTtcblx0XHRcdHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtmaWVsZF0ucm93LmNsYXNzWydoYXMtc3VjY2VzcyddID0gZmFsc2U7XG5cdFx0XHR2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbZmllbGRdLnJvdy5jbGFzc1snaGFzLWZlZWRiYWNrJ10gPSBmYWxzZTtcblx0XHRcdHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtmaWVsZF0ucm93LmNsYXNzWydoYXMtZXJyb3InXSA9IHRydWU7XG5cdFx0fVxuXHRcdC8vZmllbGQgdXBkYXRlZFxuXHRcdFxuXHR9XG5cblx0dm0uc2F2ZUV2ZW50VG9EQiA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vY2hlY2sgdGhhdCB0aGUgZXZlbnQgaXMgY29tcGxldGVcblx0XHRpZihwZXJjZW50Q29tcGxldGUgPiA5OSkge1xuXHRcdFx0Ly9pZiBzbyBzYXZlIHRoZSBldmVudCBsb2NhbGx5XG5cdFx0XHR0aGlzRXZlbnRNYW5hZ2VyLnNhdmVOZXdIb3N0aW5nRXZlbnQoJ2hvc3RpbmcnLCB2bS50ZW1wRXZlbnQpO1xuXHRcdFx0Ly90aGVuIHN5bmMgdGhlIGxvY2FsIHdpdGggdGhlIGRiXG5cdFx0XHR0aGlzRXZlbnRNYW5hZ2VyLnNldFJlbW90ZUV2ZW50c0Zyb21Mb2NhbCgkcm91dGVQYXJhbXMudWlkLCB2bS50ZW1wRXZlbnQpXG5cdFx0XHQudGhlbihmdW5jdGlvbihzdWNjZXNNZXNzYWdlKSB7XG5cdFx0XHRcdCRsb2cuaW5mbyhzdWNjZXNNZXNzYWdlKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb01lc3NhZ2UpIHtcblx0XHRcdFx0JGxvZy5pbmZvKGVycm9NZXNzYWdlKTtcblx0XHRcdH0pXG5cblx0XHRcdC8vcmVkaXJlY3QgYmFjayB0byBldmVudHNcblx0XHRcdGhvc3RlZEV2ZW50U2hlcnBhLnJlZGlyZWN0VG8oJy91c2VyRXZlbnRzJywgJHJvdXRlUGFyYW1zLnVpZCk7XG5cdFx0fVxuXHRcdFxuXHR9XG5cblx0Ly93YXRjaGVyc1xuXHQkc2NvcGUuJHdhdGNoKCd2bS50ZW1wRXZlbnQuZ3Vlc3RMaXN0JywgZnVuY3Rpb24oY3VycmVudCwgb3JpZ2luYWwpIHtcblx0XHQvL2lmIGEgZ3Vlc3QgaXMgYWRkZWQgdG8gdGhlIGxpc3QgdXBkYXRlIHRoZSBwcm9ncmVzcyBiYXJcbiAgICAgICAgaWYoYW5ndWxhci5pc09iamVjdCh2bS50ZW1wRXZlbnQuZ3Vlc3RMaXN0KSkge1xuICAgICAgICBcdHVwZGF0ZVByb2dyZXNzQmFyKDEyKTtcbiAgICAgICAgfVxuXHR9KTtcblxuXHQvL3Rha2UgYWN0aW9uXG5cdGluaXQoKTtcblxufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ0xhbmRpbmdQYWdlQ29udHJvbGxlcicsIExhbmRpbmdQYWdlQ29udHJvbGxlcik7XG5cbkxhbmRpbmdQYWdlQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZycsICckbG9jYXRpb24nLCAnJGRvY3VtZW50JywgJyR3aW5kb3cnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBMYW5kaW5nUGFnZUNvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCAkbG9jYXRpb24sICRkb2N1bWVudCwgJHdpbmRvdykge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHR2YXIgZmJVUkwgPSAnaHR0cHM6Ly9tZWV0dXBwbGFubmVyLmZpcmViYXNlaW8uY29tLyc7XG5cdHZhciBhdXRoRGF0YSA9IHt9O1xuXHR2YXIgY3VycmVudFVzZXJEYXRhID0ge307XG5cblx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdHZtLnNob3dSZXF1aXJubWVudHMgPSBmYWxzZTtcblx0dm0udmFsaWROZXdOYW1lID0geyd2YWxpZCc6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOicnfX07XG5cdHZtLnZhbGlkTmV3RW1haWwgPSB7J3ZhbGlkJzpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6Jyd9fTtcblx0dm0uc2VjdXJlUGFzc3dvcmQgPSB7J3NlY3VyZSc6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOicnfX07XG5cdHZtLnVubG9ja0NyZWF0ZVVzZXJCdG4gPSB7J3VzYWJsZSc6ZmFsc2UsICdjbGFzcyc6J2J0biBidG4td2FybmluZyd9O1xuXHR2bS5tZXNzYWdlID0gJ3Rlc3RpbmcnO1xuXG5cdFxuXHR2bS52YWxpZFVzZXJFbWFpbCA9IHsndmFsaWQnOmZhbHNlLCAnc3R5bGUnOntjb2xvcjonJ319O1xuXHR2bS52YWxpZFVzZXJQYXNzd29yZCA9IHsndmFsaWQnOmZhbHNlLCAnc3R5bGUnOntjb2xvcjonJ319O1xuXHR2bS51bmNsb2NrVXNlckxvZ2luQnRuID0geyd1c2FibGUnOmZhbHNlLCAnY2xhc3MnOididG4gYnRuLXdhcm5pbmcnfTtcblx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHMgPSB7XG5cdFx0MDp7J2NvbnN0cmFpbnQnOidJcyBhdCBsZWFzdCAxNiBjaGFyYWN0ZXJzIGxvbmcnLCAnc3R5bGUnOntjb2xvcjoncmVkJ30sICdtZXQnOmZhbHNlfSxcblx0XHQxOnsnY29uc3RyYWludCc6J0lzIG5vIGxvbmdlciB0aGFuIDEwMCBjaGFyYWN0ZXJzJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX0sXG5cdFx0Mjp7J2NvbnN0cmFpbnQnOidDb250YWlucyBhdCBsZWFzdCBvbmUgcmVxdWlyZWQgc3ltYm9sIChcXCFcXEBcXCNcXCRcXCVcXF5cXCZcXCopJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX0sXG5cdFx0Mzp7J2NvbnN0cmFpbnQnOidDb250YWlucyBhdCBsZWFzdCBvbmUgbnVtYmVyJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX0sXG5cdFx0NDp7J2NvbnN0cmFpbnQnOidDb250YWlucyBhdCBsZWFzdCBvbmUgbG93ZXJjYXNlIGxldHRlcicsICdzdHlsZSc6e2NvbG9yOidyZWQnfSwgJ21ldCc6ZmFsc2V9LFxuXHRcdDU6eydjb25zdHJhaW50JzonQ29udGFpbnMgYXQgbGVhc3Qgb25lIHVwcGVyY2FzZSBsZXR0ZXInLCAnc3R5bGUnOntjb2xvcjoncmVkJ30sICdtZXQnOmZhbHNlfSxcblx0XHQ2OnsnY29uc3RyYWludCc6XCJEb2Vzbid0IGhhdmUgYW55IGlsbGVnYWwgY2hhcmFjdGVyc1wiLCAnc3R5bGUnOntjb2xvcjoncmVkJ30sICdtZXQnOmZhbHNlfVxuXHR9O1xuXG5cdC8vdmFyIHRoZVRlc3RCb3ggPSBhbmd1bGFyLmVsZW1lbnQoJGRvY3VtZW50KS5maW5kKCcjdGVzdEJveCcpO1xuXG5cdC8vdGhlVGVzdEJveC5jaGVja1ZhbGlkaXR5KCk7XG5cdC8vc2V0Q3VzdG9tVmFsaWRpdHkoJ3lvdSBuZWVkIHNvbWV0aGluZyBlbHNlJyk7XG5cblx0Ly9sb2NhbCBtZXRob2RzXG5cdGZ1bmN0aW9uIHV0ZjhfdG9fYjY0KHN0cikge1xuXHRcdHJldHVybiBidG9hKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiBiNjRfdG9fdXRmOChzdHIpIHtcbiAgICBcdHJldHVybiBhdG9iKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fVxuXG5cdC8vZGVmaW5lIGNvbnRyb2xsZXIgbWV0aG9kc1xuXHR2bS5kaXNwbGF5UGFzc1JlcXMgPSBmdW5jdGlvbigpIHtcblx0XHRpZih2bS5uZXdOYW1lICYmIHZtLm5ld0VtYWlsKSB7XG5cdFx0XHR2bS5zaG93UmVxdWlybm1lbnRzID0gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dm0uc2hvd1JlcXVpcm5tZW50cyA9IGZhbHNlO1xuXHRcdH1cblx0fVxuXG5cdHZtLmNoZWNrTmV3TmFtZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFxuXHRcdGlmKHZtLm5ld05hbWUpIHtcblx0XHRcdGlmKHZtLm5ld05hbWUubGVuZ3RoID4gMCkge1xuXHRcdFx0XHR2bS52YWxpZE5ld05hbWUudmFsaWQgPSB0cnVlO1xuXHRcdFx0XHR2bS52YWxpZE5ld05hbWUuc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS52YWxpZE5ld05hbWUudmFsaWQgPSBmYWxzZTtcblx0XHRcdFx0dm0udmFsaWROZXdOYW1lLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR2bS5vcGVuQ3JlYXRlVXNlckJ1dHRvbigpO1xuXHR9XG5cblx0dm0uY2hlY2tOZXdFbWFpbCA9IGZ1bmN0aW9uICgpIHtcblx0XHRpZih2bS5uZXdFbWFpbCkge1xuXHRcdFx0Ly9jaGVjayB2YWxpZGl0eVxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XCIsIFwiXCIpO1xuXG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3Qodm0ubmV3RW1haWwpKSB7XG5cdFx0XHRcdHZtLnZhbGlkTmV3RW1haWwudmFsaWQgPSB0cnVlO1xuXHRcdFx0XHR2bS52YWxpZE5ld0VtYWlsLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0udmFsaWROZXdFbWFpbC52YWxpZCA9IGZhbHNlO1xuXHRcdFx0XHR2bS52YWxpZE5ld0VtYWlsLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0XHRcdH1cdFx0XHRcblx0XHR9XG5cdFx0XG5cdFx0dm0ub3BlbkNyZWF0ZVVzZXJCdXR0b24oKTtcblx0fVxuXG5cdHZtLmNoZWNrVXNlckVtYWlsID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodm0udXNlckVtYWlsKSB7XG5cdFx0XHQvL2NoZWNrIHZhbGlkaXR5XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKD86XFwuW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKykqQCg/OlthLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cXC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cIiwgXCJcIik7XG5cblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2bS51c2VyRW1haWwpKSB7XG5cdFx0XHRcdHZtLnZhbGlkVXNlckVtYWlsLnZhbGlkID0gdHJ1ZTtcblx0XHRcdFx0dm0udmFsaWRVc2VyRW1haWwuc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS52YWxpZFVzZXJFbWFpbC52YWxpZCA9IGZhbHNlO1xuXHRcdFx0XHR2bS52YWxpZFVzZXJFbWFpbC5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dm0ub3BlblVzZXJMb2dpbkJ0bigpO1xuXHR9XG5cblx0dm0uY2hlY2tOZXdQYXNzd29yZHMgPSBmdW5jdGlvbigpIHtcblx0XHQvL2ZvciBlYWNoIHBhc3N3b3JkIGRlZmluZSB0aGUgcGF0dGVybiB0aGF0IHRoZSBwYXNzd29yZCBtdXN0IG1hdGNoXG5cdFx0dmFyIGNvbnN0cmFpbnRzID0ge1xuXHQgXHRcdDA6IFsnJywgJyB5b3VyIHBhc3N3b3JkIG5lZWRzIHRvIGJlIDE2IGNoYXJhY3RlcnMgb3IgbG9uZ2VyJ10sXG5cdCBcdFx0MTogWycnLCAnIHlvdXIgcGFzc3dvcmQgbmVlZHMgdG8gYmUgbGVzcyB0aGFuIDEwMCBjaGFyYWN0ZXJzJ10sXG5cdCBcdFx0MjogWydbXFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqXScsIFwiIG5vIHJlcXVpcmVkIHN5bWJvbHMgZm91bmRcIl0sXG5cdCBcdFx0MzogWydbMC05XScsIFwiIG5vIG51bWJlcnMgZm91bmRcIl0sXG5cdCBcdFx0NDogWydbYS16XScsIFwiIG5vIGxvd2VyY2FzZSBsZXR0ZXJzIGZvdW5kXCJdLFxuXHQgXHRcdDU6IFsnW0EtWl0nLCBcIiBubyB1cHBlcmNhc2UgbGV0dGVycyBmb3VuZFwiXSxcblx0IFx0XHQ2OiBbJ1teQS16MC05XFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqXScsIFwiIGlsbGVnYWwgY2hhcmFjdGVycyBmb3VuZFwiXSxcbiBcdFx0fTtcbiBcdFx0XG4gXHRcdC8vY2hlY2sgZm9yIGxlbmd0aFxuIFx0XHRpZih2bS5uZXdQYXNzd29yZCkge1xuIFx0XHRcdGlmKHZtLm5ld1Bhc3N3b3JkLmxlbmd0aCA+IDE1KSB7IFxuIFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMF0uc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307IFxuIFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMF0ubWV0ID0gdHJ1ZTsgXG4gXHRcdFx0fSBlbHNlIHtcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzBdLnN0eWxlID0ge2NvbG9yOidyZWQnfTsgXG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1swXS5tZXQgPSBmYWxzZTtcbiBcdFx0XHR9XG4gXHRcdFx0aWYodm0ubmV3UGFzc3dvcmQubGVuZ3RoIDw9IDEwMCkgeyBcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzFdLnN0eWxlID0ge2NvbG9yOidncmVlbid9OyBcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzFdLm1ldCA9IHRydWU7XG4gXHRcdFx0fSBlbHNlIHtcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzFdLnN0eWxlID0ge2NvbG9yOidyZWQnfTsgXG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1sxXS5tZXQgPSBmYWxzZTtcbiBcdFx0XHR9XG5cbiBcdFx0XHQvL2NoZWNrIGNvbnN0cmFpbnRzIDItNVxuIFx0XHRcdGZvcihpID0gMjsgaSA8IDY7IGkrKykge1xuXHQgXHRcdFx0Ly9jaGVjayBmb3IgcmVxdWlyZWQgc3ltYm9scywgdXBwZXJjYXNlLCBsb3NlcmNhc2UsIGFuZCBjaGFyYWN0ZXJzXG5cdCBcdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoY29uc3RyYWludHNbaV1bMF0sIFwiXCIpO1x0XG5cblx0IFx0XHRcdC8vdGVzdCBlYWNoIGNvbnN0cmF0aW50XG5cdCBcdFx0XHRpZihjb25zdHJhaW50LnRlc3Qodm0ubmV3UGFzc3dvcmQpKSB7XG5cdCBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzW2ldLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHQgXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1tpXS5tZXQgPSB0cnVlO1xuXHQgXHRcdFx0fSBlbHNlIHtcblx0IFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbaV0uc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHQgXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1tpXS5tZXQgPSBmYWxzZTtcblx0IFx0XHRcdH1cblx0IFx0XHR9XG5cblx0IFx0XHQvL2NoZWNrIGlsbGVnYWwgY2hhcmFjdGVyc1xuXHQgXHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChjb25zdHJhaW50c1s2XVswXSwgXCJcIik7XG5cblx0IFx0XHQvL3J1biB0aGUgY2hlY2tcblx0IFx0XHRpZighY29uc3RyYWludC50ZXN0KHZtLm5ld1Bhc3N3b3JkKSkge1xuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNl0uc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNl0ubWV0ID0gZmFsc2U7XG5cdCBcdFx0fSBlbHNlIHtcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzZdLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNl0ubWV0ID0gdHJ1ZTtcblx0IFx0XHR9XG5cblx0IFx0XHQvL2lmIGFsbCBjb25zdHJhaW5zIG1ldCwgdGhyb3cgdmFsaWQgcGFzcyBmbGFnXG5cdCBcdFx0aWYoIHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzBdLm1ldCAmJlxuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMV0ubWV0ICYmXG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1syXS5tZXQgJiZcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzNdLm1ldCAmJlxuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNF0ubWV0ICYmXG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1s1XS5tZXQgJiZcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzZdLm1ldCkge1xuXHQgXHRcdFx0dm0uc2VjdXJlUGFzc3dvcmQuc2VjdXJlID0gdHJ1ZVxuXHQgXHRcdH0gZWxzZSB7XG5cdCBcdFx0XHR2bS5zZWN1cmVQYXNzd29yZC5zZWN1cmUgPSBmYWxzZTtcblx0IFx0XHR9XG5cblx0IFx0XHRpZih2bS5zZWN1cmVQYXNzd29yZC5zZWN1cmUpIHtcblx0IFx0XHRcdHZtLnNlY3VyZVBhc3N3b3JkLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHQgXHRcdH0gZWxzZSB7XG5cdCBcdFx0XHR2bS5zZWN1cmVQYXNzd29yZC5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdCBcdFx0fVxuIFx0XHR9XG4gXHRcdFxuIFx0XHR2bS5vcGVuQ3JlYXRlVXNlckJ1dHRvbigpO1xuXHR9XG5cblx0dm0uY2hlY2tVc2VyUGFzc3dvcmRzID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodm0udXNlclBhc3N3b3JkKSB7XG5cdFx0XHRpZih2bS51c2VyUGFzc3dvcmQubGVuZ3RoID4gMTUpIHtcblx0XHRcdFx0dm0udmFsaWRVc2VyUGFzc3dvcmQuc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdFx0XHRcdHZtLnZhbGlkVXNlclBhc3N3b3JkLnZhbGlkID0gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLnZhbGlkVXNlclBhc3N3b3JkLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0XHRcdFx0dm0udmFsaWRVc2VyUGFzc3dvcmQudmFsaWQgPSBmYWxzZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRcblx0XHR2bS5vcGVuVXNlckxvZ2luQnRuKCk7XG5cdH1cblxuXHR2bS5vcGVuQ3JlYXRlVXNlckJ1dHRvbiA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHZtLnZhbGlkTmV3TmFtZS52YWxpZCAmJiB2bS52YWxpZE5ld0VtYWlsLnZhbGlkICYmIHZtLnNlY3VyZVBhc3N3b3JkLnNlY3VyZSkge1xuXHRcdFx0dm0udW5sb2NrQ3JlYXRlVXNlckJ0bi5jbGFzcyA9ICdidG4gYnRuLXN1Y2Nlc3MnO1xuXHRcdFx0dm0udW5sb2NrQ3JlYXRlVXNlckJ0bi51c2FibGUgPSB0cnVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2bS51bmxvY2tDcmVhdGVVc2VyQnRuLmNsYXNzID0gJ2J0biBidG4td2FybmluZyc7XG5cdFx0XHR2bS51bmxvY2tDcmVhdGVVc2VyQnRuLnVzYWJsZSA9IGZhbHNlO1x0XG5cdFx0fVxuXG5cdH1cblxuXHR2bS5vcGVuVXNlckxvZ2luQnRuID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodm0udmFsaWRVc2VyRW1haWwudmFsaWQgJiYgdm0udmFsaWRVc2VyUGFzc3dvcmQudmFsaWQpIHtcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4uY2xhc3MgPSAnYnRuIGJ0bi1zdWNjZXNzJztcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlID0gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi5jbGFzcyA9ICdidG4gYnRuLXdhcm5pbmcnO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi51c2FibGUgPSBmYWxzZTtcdFxuXHRcdH1cblx0fVxuXG5cdHZtLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vc2V0IHZhbHVlc1xuXHRcdHZtLm5ld05hbWUgPSAkZG9jdW1lbnQuZmluZCgnI25ld05hbWUnKVswXS52YWx1ZTtcblx0XHR2bS5uZXdFbWFpbCA9ICRkb2N1bWVudC5maW5kKCcjbmV3RW1haWwnKVswXS52YWx1ZTtcblx0XHR2bS51c2VyRW1haWwgPSAkZG9jdW1lbnQuZmluZCgnI3VzZXJFbWFpbCcpWzBdLnZhbHVlO1xuXHRcdFxuXHRcdHZtLmNoZWNrTmV3TmFtZSgpO1xuXHRcdHZtLmNoZWNrTmV3RW1haWwoKTtcblx0XHR2bS5jaGVja1VzZXJFbWFpbCgpO1xuXHR9XG5cblx0ZnVuY3Rpb24gcmVkaXJlY3QocGF0aCwgdXNlckRhdGEpIHtcblx0XHR2YXIgZnVsbFBhdGggPSBwYXRoICsgJy8nICsgY3VycmVudFVzZXJEYXRhLnVpZCArICcvJyArIGN1cnJlbnRVc2VyRGF0YS50b2tlbjtcblx0XHQvL3JlZGlyZWN0XG5cdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyB0bzogJyArIGZ1bGxQYXRoKTtcblx0XHQkbG9jYXRpb24ucGF0aChmdWxsUGF0aCk7XG5cdFx0JHNjb3BlLiRhcHBseSgpO1xuXHR9XG5cblx0dm0uY3JlYXRlTmV3VXNlciA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2cuaW5mbygnQ3JlYXRpbmcgYSBuZXcgdXNlciBhY2NvdW50IG5vdyEnKTtcblxuXHRcdGlmKHZtLnVubG9ja0NyZWF0ZVVzZXJCdG4udXNhYmxlKSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZVxuXHRcdFx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cblx0XHRcdHJlZi5jcmVhdGVVc2VyKHtcblx0XHRcdFx0ZW1haWw6dm0ubmV3RW1haWwsXG5cdFx0XHRcdHBhc3N3b3JkOnZtLm5ld1Bhc3N3b3JkXG5cdFx0XHR9LGZ1bmN0aW9uKGVycm9yLCB1c2VyRGF0YSkge1xuXHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnRXJyb3IgY3JlYXRpbmcgdXNlcjogJyArIGVycm9yKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvL2xvZyByZXN1bHRzXG5cdFx0XHRcdFx0JGxvZy5pbmZvKHVzZXJEYXRhKTtcblxuXHRcdFx0XHRcdC8vc2F2ZSBhbGwgdGhlIGRhdGFcblx0XHRcdFx0XHRjdXJyZW50VXNlckRhdGEgPSB1c2VyRGF0YTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvL2dlbmVyYXRlIHRoZSB1c2VyIHJlY29yZFxuXHRcdFx0XHRcdHZhciB1c2Vyc1JlZiA9IHJlZi5jaGlsZCgnVXNlcnMvJyArIHVzZXJEYXRhLnVpZCk7XG5cdFx0XHRcdFx0dmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcblxuXHRcdFx0XHRcdC8vd3JpdGUgbmV3IHVzZXIgdG8gdGhlIGRhdGFiYXNlIHdpdGggYmlvIGluZm9cblx0XHRcdFx0XHR1c2Vyc1JlZi5zZXQoeyBcblx0XHRcdFx0XHRcdCdiaW8nOiB7XG5cdFx0XHRcdFx0XHRcdCduYW1lJzogdm0ubmV3TmFtZSxcblx0XHRcdFx0XHRcdFx0J2VtYWlsJzogdm0ubmV3RW1haWxcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHQnZXZlbnRzJzoge1xuXHRcdFx0XHRcdFx0XHQncGVuZGluZyc6IHtcblx0XHRcdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0J2hvc3RpbmcnOiB7XG5cdFx0XHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdCdhdHRlbmRpbmcnOiB7XG5cdFx0XHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdCdjb21wbGV0ZWQnOiB7XG5cdFx0XHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHRcdFx0JGxvZy5pbmZvKCdEYXRhIGNvdWxkIG5vdCBiZSBzYXZlZDogJyArIGVycm9yKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdCRsb2cuaW5mbygnRGF0YSBzYXZlZCBzdWNjZXNzZnVsbHkuJyk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Ly9hZGQgdGhpcyB1c2VyIHRvIHRoZSBsaXN0IG9mIHJlZ2lzdGVyZWQgdXNlcnNcblx0XHRcdFx0XHRyZWYuY2hpbGQoJ1VpZHMnKS5jaGlsZCh1dGY4X3RvX2I2NCh2bS5uZXdFbWFpbCkpLnNldChjdXJyZW50VXNlckRhdGEudWlkLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbyhcIkRhdGEgY291bGQgbm90IGJlIHNhdmVkLiBcIiArIGVycm9yKTtcblx0XHRcdFx0XHRcdGVsc2UgJGxvZy5pbmZvKFwidWlkIGNyZWF0ZWQgc3VjZXNzZnVsbHkuXCIpO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0Ly9yZWRpcmVjdCB0byBVc2VySW5mb3JtYXRpb25cblx0XHRcdFx0XHRyZWRpcmVjdCgnL3VzZXJJbmZvcm1hdGlvbicsIGN1cnJlbnRVc2VyRGF0YSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0fVxuXHR9XG5cblx0dm0ubG9naW5SZWdpc3RlcmVkVXNlciA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0aWYodm0udW5jbG9ja1VzZXJMb2dpbkJ0bi51c2FibGUpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlXG5cdFx0XHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHRcdFx0Ly9hdXRoZW50aWNhdGUgdGhlIHVzZXJcblx0XHRcdHJlZi5hdXRoV2l0aFBhc3N3b3JkKHtcblx0XHRcdFx0ZW1haWw6IHZtLnVzZXJFbWFpbCxcblx0XHRcdFx0cGFzc3dvcmQ6IHZtLnVzZXJQYXNzd29yZFxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IsIGF1dGhEYXRhKSB7XG5cdFx0XHRcdGlmKGVycm9yKSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdFcnJvciBMb2dnaW5nIEluOiAnICsgZXJyb3IpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnTG9nZ2VkIEluIHN1Y2Nlc3NmdWxseTogJyArIGF1dGhEYXRhLnVpZCk7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKGF1dGhEYXRhKTtcblx0XHRcdFx0XHQvL3NhdmUgYWxsIHRoZSBkYXRhXG5cdFx0XHRcdFx0Y3VycmVudFVzZXJEYXRhID0gYXV0aERhdGE7XG5cblx0XHRcdFx0XHQvL2xvYWQgdXNlciBiaW9cblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvL2xvYWQgdXNlciBldmVudHNcblxuXHRcdFx0XHRcdC8vcmVkaXJlY3Rcblx0XHRcdFx0XHRyZWRpcmVjdCgnL3VzZXJJbmZvcm1hdGlvbicsIGN1cnJlbnRVc2VyRGF0YSk7XG5cdFx0XHRcdFx0JHNjb3BlLiRhcHBseSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdH1cblxuXHR9XG5cblx0dm0uYWxlcnRNZSA9IGZ1bmN0aW9uKCkge1xuXHRcdGFsZXJ0KCd0aGlzIGlzIHdvcmtpbmchIGFuIGFsZXJ0IScpO1xuXHR9XG5cblx0dm0ub25SZXNpemVGdW5jdGlvbiA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBpbnB1dFRleHQgPSBhbmd1bGFyLmVsZW1lbnQoJy5pbnB1dFRleHQnKTtcblx0XHRpZigkd2luZG93Lm91dGVyV2lkdGggPiAkd2luZG93Lm91dGVySGVpZ2h0KSB7XG5cdFx0XHRpbnB1dFRleHQuY3NzKCdmb250LXNpemUnLCAnMmVtJyk7XG5cdFx0XHQkbG9nLmluZm8oJ21ha2luZyBiaWdnZXInKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aW5wdXRUZXh0LmNzcygnZm9udC1zaXplJywgJzEuMmVtJyk7XG5cdFx0fVxuXHR9XG5cblx0Ly9ldmVudCBsaXN0ZW5lcnNcblx0aWYgKCdhZGRFdmVudExpc3RlbmVyJyBpbiAkZG9jdW1lbnQpIHtcblx0ICAgICRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XG5cdCAgICBcdCRsb2cuaW5mbygnYWRkaW5nIEZhc3RDbGljaycpO1xuXHQgICAgICAgIEZhc3RDbGljay5hdHRhY2goJGRvY3VtZW50LmJvZHkpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHR9XG5cblx0YW5ndWxhci5lbGVtZW50KCR3aW5kb3cpLmJpbmQoJ3Jlc2l6ZScsIGZ1bmN0aW9uKCkge1xuXHRcdHZtLm9uUmVzaXplRnVuY3Rpb24oKTtcblx0XHQvLyRzY29wZS4kYXBwbHkoKTtcblx0fSk7XG5cblx0YW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cdFx0aWYoJHdpbmRvdy5vdXRlcldpZHRoIDwgNjAwKSB7XG5cdFx0XHR2bS5vblJlc2l6ZUZ1bmN0aW9uKCk7XG5cdFx0XHQvLyRzY29wZS4kYXBwbHkoKTtcblx0XHR9XG5cdH0pXG5cblxuXHQgdm0ubWFzdGVyID0ge307XG5cblx0ICB2bS51cGRhdGUgPSBmdW5jdGlvbih1c2VyKSB7XG5cdCAgICB2bS5tYXN0ZXIgPSBhbmd1bGFyLmNvcHkodXNlcik7XG5cdCAgfTtcblxuXHQgIHZtLnJlc2V0ID0gZnVuY3Rpb24oZm9ybSkge1xuXHQgICAgaWYgKGZvcm0pIHtcblx0ICAgICAgZm9ybS4kc2V0UHJpc3RpbmUoKTtcblx0ICAgICAgZm9ybS4kc2V0VW50b3VjaGVkKCk7XG5cdCAgICB9XG5cdCAgICB2bS51c2VyID0gYW5ndWxhci5jb3B5KHZtLm1hc3Rlcik7XG5cdCAgfTtcblxuXHQgIHZtLnJlc2V0KCk7XG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignTWFpbkNvbnRyb2xsZXInLCBNYWluQ29udHJvbGxlcik7XG5cbk1haW5Db250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJGxvY2F0aW9uJywgJyRkb2N1bWVudCcsICckd2luZG93J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gTWFpbkNvbnRyb2xsZXIoJGxvZywgJGxvY2F0aW9uLCAkZG9jdW1lbnQsICR3aW5kb3cpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTsgXG5cblx0ZnVuY3Rpb24gcmVzaXplQkdJbWFnZSgpIHtcblx0XHR2YXIgYm9keSA9IGFuZ3VsYXIuZWxlbWVudCgkZG9jdW1lbnQpO1xuXHRcdCRkb2N1bWVudC5jc3MoJ2hpZ2h0JywgJHdpbmRvdy5vdXRlckhlaWdodClcblx0fVxuXG5cdHZtLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xuXHRcdGFsZXJ0KCdsb2dnaW5nIHlvdSBvdXQhJyk7XG5cdFx0cmVmLnVuYXV0aCgpO1xuXHRcdCRsb2NhdGlvbi5wYXRoKCcvJyk7XG5cdH07XG5cblx0YW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cdFx0Ly9GYXN0Q2xpY2suYXR0YWNoKCRkb2N1bWVudC5ib2R5KTtcblx0XHRyZXNpemVCR0ltYWdlKCk7XG5cdH0pXG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignTmV3VXNlclNpZ25VcENvbnRyb2xsZXInLCBOZXdVc2VyU2lnblVwQ29udHJvbGxlcik7XG5cbk5ld1VzZXJTaWduVXBDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJywgJ3ZhbGlkYXRpb24nLCAnYmFja2VuZFNlcnZpY2VzJywgJ3RyYWZmaWNWYWxldCcsICd1c2VyRGF0YSddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIE5ld1VzZXJTaWduVXBDb250cm9sbGVyKCRzY29wZSwgJGxvZywgdmFsaWRhdGlvbiwgYmFja2VuZFNlcnZpY2VzLCB0cmFmZmljVmFsZXQsIHVzZXJEYXRhKSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cblx0Ly9kZWZpbmUgdm0gaW5wdXQgdmFyaWFibGVzXG5cdHZtLmlucHV0cyA9IHtcblx0XHRuZXdOYW1lOiAnJyxcblx0XHRuZXdFbWFpbDogJycsXG5cdFx0bmV3UGFzc3dvcmQ6ICcnLFxuXHRcdHJlcXVpcmVkRmllbGRzRGVmaW5lZDogZmFsc2Vcblx0fVxuXHR2bS5lcnJvcnMgPSB7XG5cdFx0bmFtZTogJycsXG5cdFx0ZW1haWw6ICcnLFxuXHRcdHBhc3N3b3JkOiBmYWxzZSxcblx0XHRwYXNzZXNBbGxUZXN0czogZmFsc2Vcblx0fVxuXHR2bS5wYXNzUmVxcyA9IHtcblx0XHQwOiB7IGlkOicnLCByZXE6J0lzIGF0IGxlYXN0IDE2IGNoYXJhY3RlcnMgbG9uZycsIGZ1bGZpbGxlZDpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9fSxcblx0XHQxOiB7IGlkOicnLCByZXE6J0lzIG5vIGxvbmdlciB0aGFuIDEwMCBjaGFyYWN0ZXJzJywgZnVsZmlsbGVkOmZhbHNlLCAnc3R5bGUnOntjb2xvcjoncmVkJ30gfSxcblx0XHQyOiB7IGlkOicnLCByZXE6J0NvbnRhaW5zIGF0IGxlYXN0IG9uZSBsb3dlcmNhc2UgbGV0dGVyJywgZnVsZmlsbGVkOmZhbHNlLCAnc3R5bGUnOntjb2xvcjoncmVkJ30gfSxcblx0XHQzOiB7IGlkOicnLCByZXE6J0NvbnRhaW5zIGF0IGxlYXN0IG9uZSB1cHBlcmNhc2UgbGV0dGVyJywgZnVsZmlsbGVkOmZhbHNlLCAnc3R5bGUnOntjb2xvcjoncmVkJ30gfSxcblx0XHQ0OiB7IGlkOicnLCByZXE6J0NvbnRhaW5zIGF0IGxlYXN0IG9uZSBudW1iZXInLCBmdWxmaWxsZWQ6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOidyZWQnfSB9LFxuXHRcdDU6IHsgaWQ6JycsIHJlcTonQ29udGFpbnMgYXQgbGVhc3Qgb25lIHJlcXVpcmVkIHN5bWJvbCAoXFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqKScsIGZ1bGZpbGxlZDpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9IH0sXG5cdFx0NjogeyBpZDonJywgcmVxOlwiRG9lc24ndCBoYXZlIGFueSBpbGxlZ2FsIGNoYXJhY3RlcnNcIiwgZnVsZmlsbGVkOnRydWUsICdzdHlsZSc6e2NvbG9yOidyZWQnfSB9XG5cdH1cblx0dm0uc2hvd1JlcXNCb3ggPSBmYWxzZTtcblxuXHQvL2RlZmluZSByZXF1aXJlZCBmaWVsZCBjb25zdHJhaW50c1xuXHR2YXIgc2lnbnVwVmFsaWRhdGlvbiA9IHZhbGlkYXRpb247XG5cblx0Ly9kZWZpbmUgY29udHJvbGxlciBtZXRob2RzXG5cdGZ1bmN0aW9uIHZlcmlmeVJlcXVpcm5tZW50cygpIHtcblx0XHRpZih2bS5lcnJvcnMubmFtZSA9PSAnJyAmJiB2bS5lcnJvcnMuZW1haWwgPT0gJycgJiYgIXZtLmVycm9ycy5wYXNzd29yZCkgdm0uZXJyb3JzLnBhc3Nlc0FsbFRlc3RzID0gdHJ1ZTtcblx0XHRlbHNlIHZtLmVycm9ycy5wYXNzZXNBbGxUZXN0cyA9IGZhbHNlO1xuXG5cdFx0aWYoIGFuZ3VsYXIuaXNEZWZpbmVkKHZtLmlucHV0cy5uZXdOYW1lKSAmJiB2bS5pbnB1dHMubmV3TmFtZSAhPT0gJycgJiZcblx0XHRcdGFuZ3VsYXIuaXNEZWZpbmVkKHZtLmlucHV0cy5uZXdFbWFpbCkgJiYgdm0uaW5wdXRzLm5ld0VtYWlsICE9PSAnJyAmJlxuXHRcdFx0YW5ndWxhci5pc0RlZmluZWQodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKSAmJiB2bS5pbnB1dHMubmV3UGFzc3dvcmQgIT09ICcnKSBcblx0XHRcdFx0dm0uaW5wdXRzLnJlcXVpcmVkRmllbGRzRGVmaW5lZCA9IHRydWU7XG5cdFx0ZWxzZSB2bS5pbnB1dHMucmVxdWlyZWRGaWVsZHNEZWZpbmVkID0gZmFsc2U7XG5cdH1cblxuXHQvL2RlZmluZSB2bSBhY2Nlc3NpYmxlIG1ldGhvZHNcblx0dm0uY2hlY2tOZXdOYW1lID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZVxuXHRcdHZhciBlcnJvcnMgPSBbXTtcblx0XHR2YXIgaGFzTmFtZSA9IHNpZ251cFZhbGlkYXRpb24ucmVxdWlyZWQodm0uaW5wdXRzLm5ld05hbWUpO1xuXHRcdHZhciBsb25nRW5vdWdoID0gc2lnbnVwVmFsaWRhdGlvbi5taW5OYW1lTGVuZ3RoKHZtLmlucHV0cy5uZXdOYW1lKVxuXHRcdFxuXHRcdC8vbG9nIGVycm9yc1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGhhc05hbWUpKSBlcnJvcnMucHVzaChoYXNOYW1lKTtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChsb25nRW5vdWdoKSkgZXJyb3JzLnB1c2gobG9uZ0Vub3VnaCk7XG5cblx0XHQvL3VwZGF0ZSB0aGUgZXJyb3JzIG1vZGVsXG5cdFx0aWYoZXJyb3JzLmxlbmd0aCA+IDApIHZtLmVycm9ycy5uYW1lID0gZXJyb3JzLmpvaW4oJywgJyk7XG5cdFx0ZWxzZSB2bS5lcnJvcnMubmFtZSA9ICcnO1xuXG5cdFx0dmVyaWZ5UmVxdWlybm1lbnRzKCk7XG5cdH1cblxuXHR2bS5jaGVja05ld0VtYWlsID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZVxuXHRcdHZhciBlcnJvcnMgPSBbXTtcblx0XHR2YXIgaGFzRW1haWwgPSBzaWdudXBWYWxpZGF0aW9uLnJlcXVpcmVkKHZtLmlucHV0cy5uZXdFbWFpbCk7XG5cdFx0dmFyIGlzQW5FbWFpbCA9IHNpZ251cFZhbGlkYXRpb24uZW1haWwodm0uaW5wdXRzLm5ld0VtYWlsKTtcblx0XHRcblx0XHQvL2xvZyBlcnJvcnNcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChoYXNFbWFpbCkpIGVycm9ycy5wdXNoKGhhc0VtYWlsKTtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChpc0FuRW1haWwpKSBlcnJvcnMucHVzaChpc0FuRW1haWwpO1xuXG5cdFx0Ly91cGRhdGUgdGhlIGVycm9ycyBtb2RlbFxuXHRcdGlmKGVycm9ycy5sZW5ndGggPiAwKSB2bS5lcnJvcnMuZW1haWwgPSBlcnJvcnMuam9pbignLCAnKTtcblx0XHRlbHNlIHZtLmVycm9ycy5lbWFpbCA9ICcnO1xuXG5cdFx0dmVyaWZ5UmVxdWlybm1lbnRzKCk7XG5cdH1cblxuXHR2bS5jaGVja05ld1Bhc3N3b3JkID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9mbGlwIG9uIHJlcXMgYm94XG5cdFx0dm0uc2hvd1JlcXNCb3ggPSB0cnVlO1xuXG5cdFx0Ly9sb2NhbCB2YXJpYWJsZVxuXHRcdHZhciBlcnJvcnMgPSBbXTtcblx0XHR2YXIgaGFzUGFzc3dvcmQgPSBzaWdudXBWYWxpZGF0aW9uLnJlcXVpcmVkKHZtLmlucHV0cy5uZXdQYXNzd29yZCk7XG5cdFx0dmFyIHNwZWNpZmljUmVxcyA9IFtcblx0XHRcdHNpZ251cFZhbGlkYXRpb24ubWluUGFzc0xlbmd0aCh2bS5pbnB1dHMubmV3UGFzc3dvcmQpLFxuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5tYXhQYXNzTGVuZ3RoKHZtLmlucHV0cy5uZXdQYXNzd29yZCksXG5cdFx0XHRzaWdudXBWYWxpZGF0aW9uLmF0TGVhc3RPbmVMb3dlcmNhc2Uodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKSxcblx0XHRcdHNpZ251cFZhbGlkYXRpb24uYXRMZWFzdE9uZVVwcGVyY2FzZSh2bS5pbnB1dHMubmV3UGFzc3dvcmQpLFxuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5hdExlYXN0T25lTnVtYmVyKHZtLmlucHV0cy5uZXdQYXNzd29yZCksXG5cdFx0XHRzaWdudXBWYWxpZGF0aW9uLmF0TGVhc3RPbmVTeW1ib2wodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKSxcblx0XHRcdHNpZ251cFZhbGlkYXRpb24uaWxsZWdhbENoYXJhY3Rlcih2bS5pbnB1dHMubmV3UGFzc3dvcmQpXG5cdFx0XTtcblxuXHRcdC8vbG9nIGVycm9yc1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGhhc1Bhc3N3b3JkKSkgZXJyb3JzLnB1c2goaGFzUGFzc3dvcmQpO1xuXG5cdFx0Ly91cGRhdGUgdGhlIGVycm9ycyBtb2RlbFxuXHRcdGlmKGVycm9ycy5sZW5ndGggPiAwKSB2bS5lcnJvcnMucGFzc3dvcmQgPSBlcnJvcnMuam9pbignLCAnKTtcblx0XHRlbHNlIHZtLmVycm9ycy5lbWFpbCA9ICcnO1xuXG5cdFx0Ly91cGRhdGUgcmVxcyBtb2RlbFxuXHRcdHZhciBhbnlFcnJvcnMgPSBmYWxzZTtcblx0XHRmb3IoaT0wOyBpPDc7IGkrKykge1xuXHRcdFx0aWYoc3BlY2lmaWNSZXFzW2ldKSB7XG5cdFx0XHRcdHZtLnBhc3NSZXFzW2ldLmZ1bGZpbGxlZCA9IHRydWU7XG5cdFx0XHRcdHZtLnBhc3NSZXFzW2ldLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0ucGFzc1JlcXNbaV0uZnVsZmlsbGVkID0gZmFsc2U7XG5cdFx0XHRcdHZtLnBhc3NSZXFzW2ldLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0XHRcdFx0YW55RXJyb3JzID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR2bS5lcnJvcnMucGFzc3dvcmQgPSBhbnlFcnJvcnM7XG5cdFx0dmVyaWZ5UmVxdWlybm1lbnRzKCk7XG5cdH1cblxuXHR2bS5leGl0UGFzc3dvcmQgPSBmdW5jdGlvbigpIHtcblx0XHR2bS5jaGVja05ld1Bhc3N3b3JkKCk7XG5cdFx0dm0uc2hvd1JlcXNCb3ggPSBmYWxzZTtcblx0fVxuXG5cdHZtLmNyZWF0ZU5ld1VzZXIgPSBmdW5jdGlvbiAoKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBuZXdVc2VyU2hlcnBhID0gdHJhZmZpY1ZhbGV0O1xuXG5cdFx0Ly9jb25maXJtIGFsbCBmaWVsZHMgYXJlIHZhbGlkXG5cdFx0aWYodm0uZXJyb3JzLnBhc3Nlc0FsbFRlc3RzICYmIHZtLmlucHV0cy5yZXF1aXJlZEZpZWxkc0RlZmluZWQpIHtcblx0XHRcdFxuXHRcdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdFx0dmFyIGNyZWF0ZU5ld1VzZXIgPSBiYWNrZW5kU2VydmljZXM7XG5cdFx0XHR2YXIgbmV3VXNlckRhdGEgPSB1c2VyRGF0YTtcblx0XHRcdHZhciB0aGlzVUlEO1xuXG5cdFx0XHQvL2NyZWF0ZSB0aGUgbmV3IHVzZXIgaW4gdGhlIGRhdGFiYXNlXG5cdFx0XHRjcmVhdGVOZXdVc2VyLmNyZWF0ZU5ld1VzZXIodm0uaW5wdXRzLm5ld0VtYWlsLCB2bS5pbnB1dHMubmV3UGFzc3dvcmQpXG5cdFx0XHQudGhlbihmdW5jdGlvbihkYlVzZXJEYXRhKSB7XG5cdFx0XHRcdFxuXHRcdFx0XHQvL21haW50YWluIGxvY2FsIHZhbHVlcyB0byBzcGVlZCB1cCB1c2VyIGV4cGVyaWVuY2Vcblx0XHRcdFx0bmV3VXNlckRhdGEubG9hZFByaW1hcmllcyh2bS5pbnB1dHMubmV3RW1haWwsIHZtLmlucHV0cy5uZXdOYW1lLCBkYlVzZXJEYXRhLnVpZCk7XG5cblx0XHRcdFx0Ly9jcmVhdGUgYSB1c2VyIHByb2ZpbGUgaW4gdGhlIGRhdGFiYXNlXG5cdFx0XHRcdGNyZWF0ZU5ld1VzZXIuYWRkTmV3VXNlclRvRGF0YWJhc2UoZGJVc2VyRGF0YS51aWQsIHZtLmlucHV0cy5uZXdOYW1lLCB2bS5pbnB1dHMubmV3RW1haWwpXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKG1lc3NhZ2UpIHtcblxuXHRcdFx0XHRcdCRsb2cuaW5mbyhtZXNzYWdlKTtcblxuXHRcdFx0XHRcdC8vYWRkIHRoaXMgdXNlciB0byB0aGUgbGlzdCBvZiByZWdpc3RlcmVkIHVzZXJzXG5cdFx0XHRcdFx0Y3JlYXRlTmV3VXNlci5hZGROZXdVc2VyVG9SZWdVc2Vyc0xpc3QoZGJVc2VyRGF0YS51aWQsIHZtLmlucHV0cy5uZXdFbWFpbClcblx0XHRcdFx0XHQudGhlbihmdW5jdGlvbihtZXNzYWdlKSB7XG5cblx0XHRcdFx0XHRcdC8vcmVkaXJlY3QgdXNpbmcgdGhlIHVpZFxuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHQvL3JlZGlyZWN0IHRvIHRoZSBuZXh0IHBhZ2UgXG5cdFx0XHRcdFx0XHRuZXdVc2VyU2hlcnBhLnJlZGlyZWN0VG8oJy91c2VySW5mb3JtYXRpb24nLCBkYlVzZXJEYXRhLnVpZCk7XG5cdFx0XHRcdFx0XHQgXG5cdFx0XHRcdFx0XHQkbG9nLmluZm8obWVzc2FnZSk7IFxuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKG1lc3NhZ2UpIHsgJGxvZy5pbmZvKG1lc3NhZ2UpOyB9KVxuXHRcdFx0XHR9KVxuXHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyAkbG9nLmluZm8obWVzc2FnZSk7IH0pXG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKG1lc3NhZ2UpIHsgJGxvZy5pbmZvKG1lc3NhZ2UpOyB9KVxuXHRcdFx0XG5cdFx0fVxuXG5cdH1cblx0XG5cdC8vcnVuIHRpbWUgYWN0aW9uc1xuXG59XG4iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdSZWdVc2VyTG9naW5Db250cm9sbGVyJywgUmVnVXNlckxvZ2luQ29udHJvbGxlcik7XG5cblJlZ1VzZXJMb2dpbkNvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICckZG9jdW1lbnQnLCAnYmFja2VuZFNlcnZpY2VzJywgJ3RyYWZmaWNWYWxldCcsICd1c2VyRGF0YSddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIFJlZ1VzZXJMb2dpbkNvbnRyb2xsZXIoJGxvZywgJGRvY3VtZW50LCBiYWNrZW5kU2VydmljZXMsIHRyYWZmaWNWYWxldCwgdXNlckRhdGEpIHtcblx0dmFyIHZtID0gdGhpcztcblxuXHQvL2RlZmluZSB2bSBpbnB1dCB2YXJpYWJsZXNcblx0dm0uaW5wdXRzID0ge1xuXHRcdGVtYWlsOiAnJyxcblx0XHRwYXNzd29yZDogJycsXG5cdFx0cmVxdWlyZWRGaWVsZHNEZWZpbmVkOiBmYWxzZVxuXHR9XG5cdHZtLmVycm9ycyA9IHtcblx0XHRtZXNzYWdlOiAnJyxcblx0XHRwYXNzZXNBbGxUZXN0czogdHJ1ZVxuXHR9XG5cdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4gPSB7XG5cdFx0J3VzYWJsZSc6ZmFsc2UsIFxuXHRcdCdjbGFzcyc6J2J0biBidG4td2FybmluZycsXG5cdFx0bWVzc2FnZTogJ05lZWQgRW1haWwgJiBQYXNzJ1xuXHR9XG5cblx0Ly9tZXRob2RzXG5cdGZ1bmN0aW9uIG9wZW5Vc2VyTG9naW5CdG4oKSB7XG5cdFx0Ly9jaGVjayB0aGF0IHRoZXJlIGlzIGFuIGVtYWlsIGFuZCB0aGVyZSBpcyBhIHBhc3N3b3JkXG5cdFx0aWYoXHRhbmd1bGFyLmlzRGVmaW5lZCh2bS5pbnB1dHMuZW1haWwpICYmIHZtLmlucHV0cy5lbWFpbCAhPT0gJycgJiZcblx0XHRcdGFuZ3VsYXIuaXNEZWZpbmVkKHZtLmlucHV0cy5wYXNzd29yZCkgJiYgdm0uaW5wdXRzLnBhc3N3b3JkICE9PSAnJykgXG5cdFx0e1xuXHRcdFx0dm0uaW5wdXRzLnJlcXVpcmVkRmllbGRzRGVmaW5lZCA9IHRydWU7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLmNsYXNzID0gJ2J0biBidG4tc3VjY2Vzcyc7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLm1lc3NhZ2UgPSAnTG9naW4nO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi51c2FibGUgPSB0cnVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2bS5pbnB1dHMucmVxdWlyZWRGaWVsZHNEZWZpbmVkID0gZmFsc2U7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLmNsYXNzID0gJ2J0biBidG4td2FybmluZyc7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLm1lc3NhZ2UgPSAnTmVlZCBFbWFpbCAmIFBhc3MnO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi51c2FibGUgPSBmYWxzZTtcblx0XHR9XG5cblx0fVxuXG5cdC8vdmlldyBtb2RlbCBtZXRob2RzXG5cdHZtLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vc2V0IHZhbHVlc1xuXHRcdHZtLmlucHV0cy5lbWFpbCA9ICRkb2N1bWVudC5maW5kKCcjdXNlckVtYWlsJylbMF0udmFsdWU7XG5cdFx0dm0uaW5wdXRzLnBhc3N3b3JkID0gJGRvY3VtZW50LmZpbmQoJyN1c2VyUGFzc3dvcmQnKVswXS52YWx1ZTtcblx0XHRcblx0XHRvcGVuVXNlckxvZ2luQnRuKCk7XG5cdH1cblxuXHR2bS5sb2dpblJlZ2lzdGVyZWRVc2VyID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciByZWdpc3RlcmVkVXNlclNoZXJwYSA9IHRyYWZmaWNWYWxldDtcblxuXHRcdC8vY29uZmlybSBhbGwgZmllbGRzIGFyZSB2YWxpZFxuXHRcdGlmKHRydWUpIHtcblx0XHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRcdHZhciBkYXRhYmFzZSA9IGJhY2tlbmRTZXJ2aWNlcztcblx0XHRcdHZhciByZWdpc3RlcmVkVXNlckRhdGEgPSB1c2VyRGF0YTtcblxuXHRcdFx0Ly92ZXJpZnkgdXNlcnMgY3JlZGVudGlhbHNcblx0XHRcdGRhdGFiYXNlLkxvZ2luUmVnaXN0ZXJlZFVzZXIodm0uaW5wdXRzLmVtYWlsLCB2bS5pbnB1dHMucGFzc3dvcmQpXG5cdFx0XHQudGhlbihmdW5jdGlvbih1c2VyQ3JlZGVudGlhbHMpIHtcblx0XHRcdFx0Ly9pZiBubyB0cm91YmxlIGxvZ2dpbmcgaW4gdXBkYXRlIGVycm9yIG9iamVjdFxuXHRcdFx0XHR2bS5lcnJvcnMucGFzc2VzQWxsVGVzdHMgPSB0cnVlO1xuXG5cdFx0XHRcdC8vYWRkIHByaW1hcnkgaW5mb3JtYXRpb24gdG8gbG9jYWwgbW9kZWxcblx0XHRcdFx0cmVnaXN0ZXJlZFVzZXJEYXRhLnNldFByaW1hcmllc0xvY2FsbHkodm0uaW5wdXRzLmVtYWlsLCB2bS5pbnB1dHMubmFtZSwgdXNlckNyZWRlbnRpYWxzLnVpZCk7XG5cblx0XHRcdH0pXG5cdFx0XHQudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdFx0JGxvZy5pbmZvKFwidWlkIGlzIFwiICsgcmVnaXN0ZXJlZFVzZXJEYXRhLmdldFVJRExvY2FsbHkoKSk7XG5cblx0XHRcdFx0ZGF0YWJhc2UuZ2V0VXNlckJpbyhyZWdpc3RlcmVkVXNlckRhdGEuZ2V0VUlETG9jYWxseSgpKVxuXHRcdFx0XHQudGhlbihmdW5jdGlvbih1c2VyQmlvKSB7XG5cdFx0XHRcdFx0Ly91cGRhdGUgdXNlckRhdGEgbW9kZWwgd2l0aCB1c2VyQmlvXG5cdFx0XHRcdFx0cmVnaXN0ZXJlZFVzZXJEYXRhLnVwZGF0ZUJpb0xvY2FsbHkodXNlckJpbyk7XG5cblx0XHRcdFx0XHQvL2xvYWQgdXNlciBldmVudHNcblx0XHRcdFx0XHRkYXRhYmFzZS5nZXRVc2VyRXZlbnRzKHJlZ2lzdGVyZWRVc2VyRGF0YS5nZXRVSURMb2NhbGx5KCkpXG5cdFx0XHRcdFx0LnRoZW4oZnVuY3Rpb24oYWxsRXZlbnRzRm9yVGhpc1VzZXIpIHtcblx0XHRcdFx0XHRcdC8vdXBkYXRlIHVzZXJEYXRhIG1vZGVsIHdpdGggdXNlckV2ZW50c1xuXHRcdFx0XHRcdFx0cmVnaXN0ZXJlZFVzZXJEYXRhLnVwZGF0ZUFsbFVzZXJFdmVudHNMb2NhbGx5KGFsbEV2ZW50c0ZvclRoaXNVc2VyKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdC5jYXRjaChmdW5jdGlvbihtZXNzYWdlKSB7ICRsb2cuaW5mbyhtZXNzYWdlKTsgfSlcblxuXHRcdFx0XHR9KVxuXHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyAkbG9nLmluZm8obWVzc2FnZSk7IH0pXG5cblx0XHRcdFx0Ly9yZWRpcmVjdCB0byB0aGUgbmV4dCBwYWdlIFxuXHRcdFx0XHRyZWdpc3RlcmVkVXNlclNoZXJwYS5yZWRpcmVjdFRvKCcvdXNlckluZm9ybWF0aW9uJywgcmVnaXN0ZXJlZFVzZXJEYXRhLmdldFVJRExvY2FsbHkoKSk7XG5cblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyBcblx0XHRcdFx0Ly9pZiB0aGVyZSB3YXMgYW4gZXJyb3IgbG9nZ2luZyBpbiwgbGV0IHRoZSB1c2VyIGtub3dcblx0XHRcdFx0dm0uZXJyb3JzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuXHRcdFx0XHR2bS5lcnJvcnMucGFzc2VzQWxsVGVzdHMgPSBmYWxzZTtcblx0XHRcdH0pXG5cblx0XHRcdC8vdXNlIHVpZCB0byBjb2xsZWN0IHVzZXIgYmlvXG5cdFx0XHRcblx0XHR9XG5cblx0fVxuXG5cdHZtLmNsaWNrZWQgPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgdXNlckF1dGhlbnRpY2F0aW9uID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0dXNlckF1dGhlbnRpY2F0aW9uLmxvZ1VzZXJPdXQoKTtcblx0fVxuXG5cdC8vcnVuIGNvbW1hbmRzXG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcigndG9wTWVudUNvbnRyb2xsZXInLCB0b3BNZW51Q29udHJvbGxlcik7XG5cbnRvcE1lbnVDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJywgJyRsb2NhdGlvbicsICckZG9jdW1lbnQnLCAnJHdpbmRvdyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHRvcE1lbnVDb250cm9sbGVyKCRzY29wZSwgJGxvZywgJGxvY2F0aW9uLCAkZG9jdW1lbnQsICR3aW5kb3cpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHQvL2xvY2FsIHZhcmlhYmxlc1xuXHR2bS5sb2dnZWRJbiA9IGZhbHNlXG5cblx0Ly9zdHlsZXMgdmFyaWFibGVzXG5cdFxuXHQvL2V2ZW50IGxpc3RlbmVyc1xuXHRpZiAoJ2FkZEV2ZW50TGlzdGVuZXInIGluICRkb2N1bWVudCkge1xuXHQgICAgJGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHtcblx0ICAgIFx0JGxvZy5pbmZvKCdhZGRpbmcgRmFzdENsaWNrJyk7XG5cdCAgICAgICAgRmFzdENsaWNrLmF0dGFjaCgkZG9jdW1lbnQuYm9keSk7XG5cdCAgICB9LCBmYWxzZSk7XG5cdH1cblxuXHRhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdykuYmluZCgncmVzaXplJywgZnVuY3Rpb24oKSB7XG5cdFx0dm0ub25SZXNpemVGdW5jdGlvbigpO1xuXHRcdCRzY29wZS4kYXBwbHkoKTtcblx0fSk7XG5cblx0YW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cdFx0aWYoJHdpbmRvdy5vdXRlcldpZHRoIDwgNjAwKSB7XG5cdFx0XHR2bS5vblJlc2l6ZUZ1bmN0aW9uKCk7XG5cdFx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cdFx0fVxuXHR9KVxuXHQvL2R5bmFtaWNhbGx5IHNldCBpbnB1dCB3aWR0aFxuXG5cblx0Ly8gQ3JlYXRlIGEgY2FsbGJhY2sgd2hpY2ggbG9ncyB0aGUgY3VycmVudCBhdXRoIHN0YXRlXG5cdGZ1bmN0aW9uIGluaXQoKSB7XG5cdFx0dm0ub25SZXNpemVGdW5jdGlvbigpO1xuXHRcdCRzY29wZS4kYXBwbHkoKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGF1dGhEYXRhQ2FsbGJhY2soYXV0aERhdGEpIHtcblx0ICBpZiAoYXV0aERhdGEpIHtcblx0ICAgICRsb2cuaW5mbyhcIlVzZXIgXCIgKyBhdXRoRGF0YS51aWQgKyBcIiBpcyBsb2dnZWQgaW4gd2l0aCBcIiArIGF1dGhEYXRhLnByb3ZpZGVyKTtcblx0ICAgIHZtLmxvZ2dlZEluID0gdHJ1ZTtcblx0ICB9IGVsc2Uge1xuXHQgICAgJGxvZy5pbmZvKFwiVXNlciBpcyBsb2dnZWQgb3V0XCIpO1xuXHQgICAgdm0ubG9nZ2VkSW4gPSBmYWxzZTtcblx0ICB9XG5cdH1cblxuXHRmdW5jdGlvbiByZWRpcmVjdChwYXRoLCB1c2VyRGF0YSkge1xuXHRcdHZhciBmdWxsUGF0aCA9IHBhdGggKyAnLycgKyB1c2VyRGF0YS51aWQgKyAnLycgKyB1c2VyRGF0YS50b2tlbjtcblx0XHQvL3JlZGlyZWN0XG5cdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyB0bzogJyArIGZ1bGxQYXRoKTtcblx0XHQkbG9jYXRpb24ucGF0aChmdWxsUGF0aCk7XG5cdFx0Ly8kc2NvcGUuJGFwcGx5KCk7XG5cdH1cblxuXHQvL3ZtIGFjY2Vzc2libGUgbWV0aG9kc1xuXHR2bS5sb2dvdXQgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9nLmluZm8oJ2xvZ2dpbmcgb3V0IScpO1xuXHRcdHZtLmxvZ2dlZEluID0gZmFsc2U7XG5cdFx0cmVmLnVuYXV0aCgpO1xuXHRcdHJlZGlyZWN0KCcvJywge3VpZDonJywgdG9rZW46Jyd9KTtcblx0fVxuXG5cdHZtLm5hdkJhckxvZ2luUmVnaXN0ZXJlZFVzZXIgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9nLmluZm8oJ2xhdW5jaGluZyBsb2dpbicpO1xuXHRcdGlmKHRydWUpIHtcblx0XHQvL2lmKHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlKSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZVxuXHRcdFx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cblx0XHRcdC8vYXV0aGVudGljYXRlIHRoZSB1c2VyXG5cdFx0XHRyZWYuYXV0aFdpdGhQYXNzd29yZCh7XG5cdFx0XHRcdGVtYWlsOiB2bS5uYXZiYXJVc2VyRW1haWwsXG5cdFx0XHRcdHBhc3N3b3JkOiB2bS5uYXZiYXJVc2VyUGFzc1xuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IsIGF1dGhEYXRhKSB7XG5cdFx0XHRcdGlmKGVycm9yKSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdFcnJvciBMb2dnaW5nIEluOiAnICsgZXJyb3IpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnTG9nZ2VkIEluIHN1Y2Nlc3NmdWxseTogJyArIGF1dGhEYXRhLnVpZCk7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKGF1dGhEYXRhKTtcblx0XHRcdFx0XHQvL3NhdmUgYWxsIHRoZSBkYXRhXG5cblx0XHRcdFx0XHQvL2xvYWQgdXNlciBiaW9cblx0XHRcdFx0XHQvL2xvYWQgdXNlciBldmVudHNcblxuXHRcdFx0XHRcdC8vcmVkaXJlY3Rcblx0XHRcdFx0XHRyZWRpcmVjdCgnL3VzZXJJbmZvcm1hdGlvbicsIGF1dGhEYXRhKTtcblx0XHRcdFx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cblx0XHRcdFx0XHQvL2NsaWNrIGNsb3NlZCB0aGUgbmF2YmFyXG5cdFx0XHRcdFx0YW5ndWxhci5lbGVtZW50KCcubmF2YmFyLXRvZ2dsZScpLmNsaWNrKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cblxuXHRcdH1cblxuXHR9XG5cblx0dm0ub25SZXNpemVGdW5jdGlvbiA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBuYXZiYXJJbnB1dHMgPSBhbmd1bGFyLmVsZW1lbnQoJy5uYXZiYXJJbnB1dHMnKTtcblx0XHRuYXZiYXJJbnB1dHMuY3NzKCd3aWR0aCcsICgkd2luZG93Lm91dGVyV2lkdGggLSAyNikgKyAncHgnKTtcblx0fVxuXG5cdC8vIFJlZ2lzdGVyIHRoZSBjYWxsYmFjayB0byBiZSBmaXJlZCBldmVyeSB0aW1lIGF1dGggc3RhdGUgY2hhbmdlc1xuXHRyZWYub25BdXRoKGF1dGhEYXRhQ2FsbGJhY2spO1xufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ1VzZXJFdmVudHNDb250cm9sbGVyJywgVXNlckV2ZW50c0NvbnRyb2xsZXIpO1xuXG5Vc2VyRXZlbnRzQ29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJywgJyRyb3V0ZVBhcmFtcycsICd1c2VyRGF0YScsICd0cmFmZmljVmFsZXQnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBVc2VyRXZlbnRzQ29udHJvbGxlcigkbG9nLCAkcm91dGVQYXJhbXMsIHVzZXJEYXRhLCB0cmFmZmljVmFsZXQpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGN1cnJlbnRVc2VyID0gdXNlckRhdGE7XG5cblx0Ly9sb2NhbCB2aWV3IHZhcmlhYmxlc1xuXHR2bS5zaG93RGVjbGluZSA9IGZhbHNlO1x0Ly93aGF0IGlzIHRoaXMgYmVpbmcgdXNlZCBmb3I/XG5cdHZtLnVzZXJCaW8gPSB7fVxuXHR2bS5ldmVudHMgPSB7fTtcblx0dm0uc2VjdGlvbkF2YWlsYWJsZSA9IHtcblx0XHRwZW5kaW5nOiBmYWxzZSxcblx0XHRhdHRlbmRpbmc6IGZhbHNlLFxuXHRcdGhvc3Rpbmc6IGZhbHNlLFxuXHRcdGNvbXBsZXRlZDogZmFsc2Vcblx0fTtcblx0dm0uZXJyb3JzID0ge307XG5cblx0Ly9kZWNsYXJlIGxvY2FsIG1ldGhvZHNcblx0ZnVuY3Rpb24gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKSB7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KHVuaXhUaW1lKSk7XG5cdH07XG5cblx0ZnVuY3Rpb24gZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKSB7XG5cdFx0cmV0dXJuIERhdGUucGFyc2UoZGF0ZVRpbWUpO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIG5vT2ZIb3N0ZUV2ZW50cygpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVcblx0XHR2YXIgY291bnRlciA9IDA7XG5cblx0XHRmb3IoZXZlbnQgaW4gdm0uZXZlbnRzLmhvc3RpbmcpIGNvdW50ZXIrKztcblxuXHRcdHJldHVybiBjb3VudGVyO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2VuZXJhdGVFdmVudElEKCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XG5cdFx0dmFyIGV2ZW50SUQgPSAoZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGUpICogMTApICsgKG5vT2ZIb3N0ZUV2ZW50cygpKTtcblxuXHRcdHJldHVybiBldmVudElEO1xuXHR9XG5cblx0ZnVuY3Rpb24gY2hlY2tGb3JFdmVudHMoKSB7XG5cdFx0XG5cdFx0Ly9sb29wIHRocm91Z2ggYWxsIHRoZSBldmVudCBjYXRlZ29yaWVzXG5cdFx0T2JqZWN0LmtleXModm0uZXZlbnRzKS5mb3JFYWNoKGZ1bmN0aW9uKGNhdGVnb3J5KSB7XG5cdFx0XHRcblx0XHRcdC8vaW5zaWRlIGVhY2ggY2F0ZWdvcnkgY291bnQgdGhlIG51bWJlciBvZiBldmVudCBvYmplY3RzLi4uTk9UIHVwZGF0ZWQgcGxhY2Vob2xkZXIgdGhvdWdoXG5cdFx0XHRPYmplY3Qua2V5cyh2bS5ldmVudHNbY2F0ZWdvcnldKS5mb3JFYWNoKGZ1bmN0aW9uKGV2ZW50SUQpIHtcblx0XHRcdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlXG5cdFx0XHRcdHZhciBjb3VudGVyID0gMDtcblx0XHRcdFx0Ly9jb3VudCBldmVudHMgd2l0aCBpZCdzIC8gTk9UICd1cGRhdGVkJyBwbGFjZWhvbGRlcnNcblx0XHRcdFx0aWYoYW5ndWxhci5pc09iamVjdCh2bS5ldmVudHNbY2F0ZWdvcnldW2V2ZW50SURdKSkgY291bnRlcisrO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly9pZiBhdCBsZWFzdCBvbmUgZXZlbnQgaWQgKG9iamVjdCkgd2FzIGNvdW50ZWQsIHRoZW4gc2hvdyB0aGUgc2VjdGlvblxuXHRcdFx0XHRpZihjb3VudGVyID4gMCkgdm0uc2VjdGlvbkF2YWlsYWJsZVtjYXRlZ29yeV0gPSB0cnVlO1xuXHRcdFx0XHRlbHNlIHZtLnNlY3Rpb25BdmFpbGFibGVbY2F0ZWdvcnldID0gZmFsc2U7XG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBpbml0aWFsaXplKCkge1xuXHRcdCRsb2cuaW5mbyhjdXJyZW50VXNlci5nZXRBbGxVc2VyRXZlbnRzTG9jYWxseSgpKTtcblx0XHQvL21ha2Ugc3VyZSB0aGUgdWlkIGlzIHNldFxuXHRcdGN1cnJlbnRVc2VyLnNldFVJRExvY2FsbHkoJHJvdXRlUGFyYW1zLnVpZCk7XG5cblx0XHQvL2xvYWQgdGhlIHVzZXIgYmlvXG5cdFx0Y3VycmVudFVzZXIubG9hZEJpbygkcm91dGVQYXJhbXMudWlkKVxuXHRcdC50aGVuKGZ1bmN0aW9uKHJldHJpZXZlZEJpbykge1xuXHRcdFx0dm0udXNlckJpbyA9IHJldHJpZXZlZEJpbztcblx0XHR9KVxuXHRcdC5jYXRjaCgpXG5cblx0XHQvL2xvYWQgdXNlciBldmVudHMgcHJvZ3Jlc3NpdmxleVxuXHRcdC8vZmlzdCB3aGF0ZXZlciBpcyBpbiB0aGUgbW9kZWwgYWxyZWFkeVxuXHRcdHZtLmV2ZW50cyA9IGN1cnJlbnRVc2VyLmdldEFsbFVzZXJFdmVudHNMb2NhbGx5KCk7XG5cblx0XHQvL3RoZW4gY2FsbCB0byB0aGUgZGIgYW5kIGdldCB0aGUgbW9zdCB1cCB0byBkYXRlIGluZm9cblx0XHRjdXJyZW50VXNlci5nZXRSZW1vdGVFdmVudHNGb3JMb2NhbCgpXG5cdFx0LnRoZW4oZnVuY3Rpb24ob2J0YWluZWRVc2VyRXZlbnRzKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2NoZWNraW5nIHRoZSBkYiBmb3IgZXZlbnRzJyk7XG5cdFx0XHQvL3VwZGF0ZSB0aGUgdmlldyBtb2RlbCB3aXRoIHRoZSB1cGRhdGVkIERCIHJlc3VsdHNcblx0XHRcdHZtLmV2ZW50cyA9IGN1cnJlbnRVc2VyLmdldEFsbFVzZXJFdmVudHNMb2NhbGx5KCk7XG5cdFx0fSlcblx0XHQudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdC8vbm93IHRoYXQgZXZlbnRzIGFyZSBsb2FkZWQsIHJlZmxlY3QgaXQgaW4gdGhlIHZpZXcgbW9kZWxcblx0XHRcdGNoZWNrRm9yRXZlbnRzKCk7XG5cdFx0fSlcblxuXHR9XG5cblx0Ly9kZWNsYXJlIHZpZXcgbWV0aG9kc1xuXHR2bS5jcmVhdGVOZXdFdmVudCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBldmVudElEID0gZ2VuZXJhdGVFdmVudElEKCk7XG5cdFx0dmFyIG5ld0V2ZW50U2hlcnBhID0gdHJhZmZpY1ZhbGV0O1xuXG5cdFx0Ly9hZGQgdGhlIGV2ZW50IHRvIHRoZSBtb2RhbCAobG9jYWxseSBPTkxZKVxuXHRcdGN1cnJlbnRVc2VyLmNyZWF0ZU5ld0V2ZW50KGV2ZW50SUQpXG5cdFx0LyoudGhlbihmdW5jdGlvbihhZmZpcm1hdGl2ZVJlc3BvbnNlKSB7XG5cdFx0XHQvL3JlcG9ydCB0aGUgc3VjY2Vzc1xuXHRcdFx0JGxvZy5pbmZvKGFmZmlybWF0aXZlUmVzcG9uc2UpO1xuXHRcdH0pXG5cdFx0LnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHQvL2lmIHRoZXJlIHdhcyBhbiB1cGRhdGVkIGZpZWxkLCByZW1vdmUgaXQgbm93XG5cdFx0XHRjdXJyZW50VXNlci5jbGVhbkRCRXZlbnRzQ2F0ZWdvcnkoJ2hvc3RpbmcnKTtcblxuXHRcdH0pXG5cdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yUmVzcG9uc2UpIHtcblx0XHRcdC8vcmVwb3J0IHRoZSBlcnJvclxuXHRcdFx0JGxvZy5pbmZvKGVycm9yUmVzcG9uc2UpO1xuXHRcdH0pKi9cblx0XHRcblxuXHRcdC8vcmVkaXJlY3QgdG8gdGhlIG5ldyBldmVudCBwYWdlXHRcdFxuXHRcdG5ld0V2ZW50U2hlcnBhLnJlZGlyZWN0VG8oJy9ldmVudCcsIGV2ZW50SUQsIGN1cnJlbnRVc2VyLmdldFVJRExvY2FsbHkoKSwgY3VycmVudFVzZXIuZ2V0VUlETG9jYWxseSgpKTtcblx0fVxuXG5cdC8vZXhlY3V0ZSBzY3JpcHRzXG5cdGluaXRpYWxpemUoKTtcblxufVxuIiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignVXNlckluZm9ybWF0aW9uQ29udHJvbGxlcicsIFVzZXJJbmZvcm1hdGlvbkNvbnRyb2xsZXIpO1xuXG5Vc2VySW5mb3JtYXRpb25Db250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJGRvY3VtZW50JywgJyRyb3V0ZVBhcmFtcycsJ3VzZXJEYXRhJywgJ3RyYWZmaWNWYWxldCddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIFVzZXJJbmZvcm1hdGlvbkNvbnRyb2xsZXIoJGxvZywgJGRvY3VtZW50LCAkcm91dGVQYXJhbXMsIHVzZXJEYXRhLCB0cmFmZmljVmFsZXQpIHtcblx0dmFyIHZtID0gdGhpcztcblx0XG5cdC8vbG9jYWwgdmFyaWFibGVzXG5cdHZhciBjdXJyZW50VXNlciA9IHVzZXJEYXRhO1xuXG5cdC8vdmlldyBtb2RlbCB2YXJpYWJsZXNcblx0dm0udXNlciA9IHt9O1xuXHR2bS50ZW1wQmlydGhkYXk7XG5cdHZtLnZpZXcgPSB7XG5cdFx0ZGF0YVRvU2F2ZTogZmFsc2UsXG5cdFx0aXNEYXRhOiBmYWxzZSxcblx0XHRidG5Nc3NnOiAnTW92ZSBPbi4uLicsXG5cdFx0cHJvY2VlZEJ0bjogJ2J0biBidG4tcHJpbWFyeSdcblx0fTtcblxuXHQvL2xvY2FsIG1ldGhvZHNcblx0ZnVuY3Rpb24gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKSB7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KHVuaXhUaW1lKSk7XG5cdH07XG5cblx0ZnVuY3Rpb24gZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKSB7XG5cdFx0cmV0dXJuIERhdGUucGFyc2UoZGF0ZVRpbWUpO1xuXHR9O1xuXG5cdC8vdmlldyBhY2Nlc3NpYmxlIG1ldGhvZHNcblx0dm0uY2hlY2tWYWx1ZXMgPSBmdW5jdGlvbigpIHtcblx0XHQvL3Rocm93IHRoZSBpc0RhdGEgZmxhZyBpZiBzb21ldGhpbmcgaXMgdXBkYXRlZFxuXHRcdHZtLnZpZXcuaXNEYXRhID0gdHJ1ZTtcblxuXHRcdGlmKCAhKGFuZ3VsYXIuaXNVbmRlZmluZWQodm0udXNlci5jb21wYW55KSB8fCB2bS51c2VyLmNvbXBhbnkgPT09ICcnKSB8fCBcblx0XHRcdCEoYW5ndWxhci5pc1VuZGVmaW5lZCh2bS51c2VyLnRpdGxlKSB8fCB2bS51c2VyLnRpdGxlID09PSAnJykgfHwgXG5cdFx0XHQhKGFuZ3VsYXIuaXNVbmRlZmluZWQodm0udXNlci5kb2IpIHx8IHZtLnVzZXIuZG9iID09PSAnJykpIFxuXHRcdHtcblx0XHRcdHZtLnZpZXcuZGF0YVRvU2F2ZSA9IHRydWU7XG5cdFx0XHR2bS52aWV3LnByb2NlZWRCdG4gPSAnYnRuIGJ0bi1zdWNjZXNzJztcblx0XHRcdHZtLnZpZXcuYnRuTXNzZyA9ICdTYXZlICYgQ29udGludWUnO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2bS52aWV3LmRhdGFUb1NhdmUgPSBmYWxzZTtcblx0XHRcdHZtLnZpZXcucHJvY2VlZEJ0biA9ICdidG4gYnRuLXByaW1hcnknO1xuXHRcdFx0dm0udmlldy5idG5Nc3NnID0gJ01vdmUgT24uLi4nO1x0XG5cdFx0fVxuXG5cdH1cblxuXHR2bS51cGRhdGVET0IgPSBmdW5jdGlvbigpIHtcblx0XHR2bS51c2VyLmRvYiA9IGRhdGVUaW1lVG9Vbml4VGltZSh2bS50ZW1wQmlydGhkYXkpO1xuXHRcdHZtLmNoZWNrVmFsdWVzKCk7XG5cdH1cblxuXHR2bS5zYXZlQW5kTW92ZU9uID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgdXNlckluZm9TaGVycGEgPSB0cmFmZmljVmFsZXQ7XG5cdFx0dmFyIGN1cnJlbnRVaWQgPSBjdXJyZW50VXNlci5nZXRVSURMb2NhbGx5KCk7XG5cblx0XHQvL2NvbnZlcnQgRE9CIHRvIHVuaXhUaW1lIGFuZCBzYXZlXG5cdFx0aWYodm0udGVtcEJpcnRoZGF5ICE9PSAwKSB2bS51cGRhdGVET0IoKTtcblx0XHRcblx0XHQvL2lmIHRoZXJlIGlzbid0IGN1cnJlbnRseSBhIGRvYiwgZ3JhYiBmcm9tIHRoZSByb3V0ZSBwYXJhbXNcblx0XHRpZihjdXJyZW50VWlkID09ICcnIHx8IGFuZ3VsYXIuaXNVbmRlZmluZWQoY3VycmVudFVpZCkpIHtcblx0XHRcdGN1cnJlbnRVc2VyLnNldFVJRExvY2FsbHkoJHJvdXRlUGFyYW1zLnVpZCk7XG5cdFx0fVxuXG5cdFx0Ly9pZiB0aGVyZSBpcyBuZXcgZGF0YSwgc2F2ZSBpdFxuXHRcdGlmKHZtLnZpZXcuaXNEYXRhKSB7XG5cdFx0XHQkbG9nLmluZm8oJ3NhdmluZyB0aGUgbmV3IGRhdGEnKTtcblx0XHRcdGN1cnJlbnRVc2VyLnVwZGF0ZUJpb0xvY2FsbHkodm0udXNlcik7XG5cdFx0fVxuXHRcdFxuXHRcdC8vbW92ZSBvblxuXHRcdHVzZXJJbmZvU2hlcnBhLnJlZGlyZWN0VG8oJy91c2VyRXZlbnRzJywgdm0udXNlci51aWQpXG5cdH1cblxuXHRmdW5jdGlvbiBpbml0aWFsaXplKCkge1xuXHRcdC8vbG9hZCBGYXN0Q2xpY2tcblx0XHQvL0Zhc3RDbGljay5hdHRhY2goJGRvY3VtZW50LmJvZHkpO1xuXHRcdFxuXHRcdC8vbG9hZCB1c2VyRGF0YSBsb2NhbGx5IG9yIGZyb20gZGJcblx0XHRjdXJyZW50VXNlci5sb2FkQmlvKCRyb3V0ZVBhcmFtcy51aWQpXG5cdFx0LnRoZW4oZnVuY3Rpb24ob2J0YWluZWRVc2VyRGF0YSkge1xuXHRcdFx0Ly9hc3NpZ24gdXNlciB2YWx1ZXNcblx0XHRcdHZtLnVzZXIgPSBvYnRhaW5lZFVzZXJEYXRhO1xuXG5cdFx0XHQvL2J1aWxkIHRlbXBCaXJ0aGRheVxuXHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQob2J0YWluZWRVc2VyRGF0YS5kb2IpICYmIG9idGFpbmVkVXNlckRhdGEuZG9iICE9PSAnJykge1xuXHRcdFx0XHR2bS50ZW1wQmlydGhkYXkgPSB1bml4VGltZVRvRGF0ZVRpbWUob2J0YWluZWRVc2VyRGF0YS5kb2IpXG5cdFx0XHR9XG5cblx0XHR9KTtcblx0XG5cdH1cblxuXHQvL3J1biBwcm9jZXNzZXNcblx0aW5pdGlhbGl6ZSgpOyAvL3dpdGggaW50ZXJuZXQgdXNlIHRoZSBldmVudCBsaXN0ZW5lciBpbnN0ZWFkXG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuZmFjdG9yeSgnYXV0aFNlcnZpY2UnLCBhdXRoU2VydmljZSk7XG5cbmF1dGhTZXJ2aWNlLiRpbmplY3QgPSBbJyRsb2cnLCAnYmFja2VuZFNlcnZpY2VzJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gYXV0aFNlcnZpY2UoJGxvZywgYmFja2VuZFNlcnZpY2VzKSB7XG5cblx0dmFyIGFsbEF1dGhTZXJ2aWNlcyA9IHtcblx0XHRpc0xvZ2dlZEluOiBpc0xvZ2dlZEluXG5cdH07XG5cblx0ZnVuY3Rpb24gaXNMb2dnZWRJbigpIHtcblx0XHQvL2NoZWNrIHRoZSB1c2VyIGF1dGhlbnRpY2Fpb24gc3RhdGVcblx0XHR2YXIgZGJBdXRoZW50aWNhdGlvbiA9IGJhY2tlbmRTZXJ2aWNlcztcblx0XHRcblx0XHRkYkF1dGhlbnRpY2F0aW9uLmNoZWNrTG9naW5TdGF0dXMoKVxuXHRcdC50aGVuKGZ1bmN0aW9uKHN0YXR1cykge1xuXHRcdFx0cmV0dXJuIHN0YXR1cztcblx0XHR9KVxuXHRcdC5jYXRjaChmdW5jdGlvbihzdGF0dXMpIHtcblx0XHRcdHJldHVybiBzdGF0dXM7XG5cdFx0fSlcblx0fVxuXHRcblx0cmV0dXJuIGFsbEF1dGhTZXJ2aWNlcztcblxufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmZhY3RvcnkoJ2JhY2tlbmRTZXJ2aWNlcycsIGJhY2tlbmRTZXJ2aWNlcyk7XG5cbmJhY2tlbmRTZXJ2aWNlcy4kaW5qZWN0ID0gWyckbG9nJywgJyRxJywgJyR3aW5kb3cnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBiYWNrZW5kU2VydmljZXMoJGxvZywgJHEsICR3aW5kb3cpIHtcblx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHR2YXIgZmJVUkwgPSAnaHR0cHM6Ly9tZWV0dXBwbGFubmVyLmZpcmViYXNlaW8uY29tLyc7XG5cdHZhciBhbGxCYWNrZW5kU2VydmljZXMgPSB7XG5cdFx0dXRmOF90b19iNjQ6IHV0ZjhfdG9fYjY0LCBcdFx0XHRcdFx0XHQvL2xvY2FsIGZ1bmN0aW9ucyB0byBjb252ZXJ0IGRhdGVzXG5cdFx0YjY0X3RvX3V0Zjg6IGI2NF90b191dGY4LFxuXHRcdHVuaXhUaW1lVG9EYXRlVGltZTogdW5peFRpbWVUb0RhdGVUaW1lLFxuXHRcdGRhdGVUaW1lVG9Vbml4VGltZTogZGF0ZVRpbWVUb1VuaXhUaW1lLFxuXG5cdFx0TG9naW5SZWdpc3RlcmVkVXNlcjogTG9naW5SZWdpc3RlcmVkVXNlcixcdFx0Ly9hdXRoZW50aWNhaW9uXG5cdFx0Y2hlY2tMb2dpblN0YXR1czogY2hlY2tMb2dpblN0YXR1cyxcblx0XHRsb2dVc2VyT3V0OiBsb2dVc2VyT3V0LFxuXG5cdFx0ZG93bmxvYWRVc2VyRGF0YTogZG93bmxvYWRVc2VyRGF0YSxcdFx0XHRcdC8vZ2V0dGVyIG1ldGhvZHNcblx0XHRnZXRVc2VyQmlvOiBnZXRVc2VyQmlvLFxuXHRcdGdldFVzZXJFdmVudHM6IGdldFVzZXJFdmVudHMsXG5cdFx0Z2V0QUhvc3RlZEV2ZW50OiBnZXRBSG9zdGVkRXZlbnQsXG5cdFx0Z2V0QW5JbnZpdGVkRXZlbnQ6IGdldEFuSW52aXRlZEV2ZW50LFxuXHRcdGZpbmRHdWVzdFVJRDogZmluZEd1ZXN0VUlELFxuXHRcdGdldEd1ZXN0TGlzdEZvckV2ZW50OiBnZXRHdWVzdExpc3RGb3JFdmVudCxcblxuXHRcdGNyZWF0ZU5ld1VzZXI6IGNyZWF0ZU5ld1VzZXIsXHRcdFx0XHRcdC8vc2V0dGVyIE1ldGhvZHNcblx0XHRhZGROZXdVc2VyVG9EYXRhYmFzZTogYWRkTmV3VXNlclRvRGF0YWJhc2UsXG5cdFx0YWRkTmV3VXNlclRvUmVnVXNlcnNMaXN0OiBhZGROZXdVc2VyVG9SZWdVc2Vyc0xpc3QsXG5cdFx0dXBsb2FkVXNlckRhdGE6IHVwbG9hZFVzZXJEYXRhLFxuXHRcdHVwbG9hZFVzZXJCaW86IHVwbG9hZFVzZXJCaW8sXG5cdFx0Y3JlYXRlSG9zdGVkRXZlbnQ6IGNyZWF0ZUhvc3RlZEV2ZW50LFxuXHRcdGFkZEd1ZXN0VG9Ib3N0R3Vlc3RMaXN0b25EQjogYWRkR3Vlc3RUb0hvc3RHdWVzdExpc3RvbkRCLFxuXHRcdC8vYWRkUGVuZGluZ0V2ZW50Rm9yVXNlcjogYWRkUGVuZGluZ0V2ZW50Rm9yVXNlcixcblx0XHQvL2FkZFBlbmRpbmdFdmVudEZvckd1ZXN0OiBhZGRQZW5kaW5nRXZlbnRGb3JHdWVzdCxcblxuXHRcdGRlbGV0ZVVwZGF0ZUZpZWxkOiBkZWxldGVVcGRhdGVGaWVsZCxcdFx0XHQvL2RlbGV0ZSBtZXRob2RzXG5cdFx0cmVtb3ZlSW5jb21wbGV0ZUV2ZW50OiByZW1vdmVJbmNvbXBsZXRlRXZlbnQsXG5cblx0XHR0aGVyZVdhc0FuVXBkYXRlRmllbGQ6IHRoZXJlV2FzQW5VcGRhdGVGaWVsZFx0Ly9tb2RlbCBtYWludGFpbmFuY2Vcblx0fTtcblxuXHRmdW5jdGlvbiB1dGY4X3RvX2I2NChzdHIpIHtcblx0XHRyZXR1cm4gYnRvYShzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gYjY0X3RvX3V0Zjgoc3RyKSB7XG4gICAgXHRyZXR1cm4gYXRvYihzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKSB7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KHVuaXhUaW1lKSk7XG5cdH1cblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH1cblxuXHRmdW5jdGlvbiBjcmVhdGVOZXdVc2VyKGVtYWlsLCBwYXNzd29yZCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZmlyZUJhc2VBY2NvdW50cyA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0XG5cdFx0Ly9yZXR1cm4gYSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XG5cdFx0XHRmaXJlQmFzZUFjY291bnRzLmNyZWF0ZVVzZXIoe1xuXHRcdFx0XHRcblx0XHRcdFx0ZW1haWw6IGVtYWlsLFxuXHRcdFx0XHRwYXNzd29yZDogcGFzc3dvcmRcblx0XHRcdFxuXHRcdFx0fSxmdW5jdGlvbihlcnJvciwgdXNlckRhdGEpIHtcblx0XHRcdFx0XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoJ0Vycm9yIGNyZWF0aW5nIHVzZXI6ICcgKyBlcnJvcik7XG5cblx0XHRcdFx0ZWxzZSByZXNvbHZlKHVzZXJEYXRhKTtcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBhZGROZXdVc2VyVG9EYXRhYmFzZSh1aWQsIG5hbWUsIGVtYWlsKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciBhcHBVc2VycyA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpO1xuXHRcdHZhciBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XG5cblx0XHQvL3JldHVybiBhIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcblx0XHRcdGFwcFVzZXJzLnNldCh7IFxuXHRcdFx0XHQnYmlvJzoge1xuXHRcdFx0XHRcdCd1aWQnOiB1aWQsXG5cdFx0XHRcdFx0J25hbWUnOiBuYW1lLFxuXHRcdFx0XHRcdCdlbWFpbCc6IGVtYWlsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdCdldmVudHMnOiB7XG5cdFx0XHRcdFx0J3BlbmRpbmcnOiB7XG5cdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdCdob3N0aW5nJzoge1xuXHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQnYXR0ZW5kaW5nJzoge1xuXHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQnY29tcGxldGVkJzoge1xuXHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblxuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KCdEYXRhIGNvdWxkIG5vdCBiZSBzYXZlZDogJyArIGVycm9yKTtcblx0XHRcdFx0XG5cdFx0XHRcdGVsc2UgcmVzb2x2ZSgnRGF0YSBzYXZlZCBzdWNjZXNzZnVsbHkuJyk7XG5cblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGFkZE5ld1VzZXJUb1JlZ1VzZXJzTGlzdCh1aWQsIGVtYWlsKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciBiNjRFbWFpbCA9IHV0ZjhfdG9fYjY0KGVtYWlsKTtcblx0XHR2YXIgUmVnaXN0ZXJlZFVzZXJzTGlzdCA9IGFwcC5jaGlsZCgnVWlkcycpLmNoaWxkKGI2NEVtYWlsKTtcblxuXHRcdC8vcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFxuXHRcdFx0UmVnaXN0ZXJlZFVzZXJzTGlzdC5zZXQodWlkLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KFwiRGF0YSBjb3VsZCBub3QgYmUgc2F2ZWQuIFwiICsgZXJyb3IpO1xuXHRcdFx0XHRlbHNlIHJlc29sdmUoXCJ1aWQgY3JlYXRlZCBzdWNlc3NmdWxseS5cIik7XG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBMb2dpblJlZ2lzdGVyZWRVc2VyKGVtYWlsLCBwYXNzd29yZCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHRcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHRcdC8vYXV0aGVudGljYXRlIHRoZSB1c2VyXG5cdFx0XHRhcHAuYXV0aFdpdGhQYXNzd29yZCh7XG5cblx0XHRcdFx0ZW1haWw6IGVtYWlsLFxuXHRcdFx0XHRwYXNzd29yZDogcGFzc3dvcmRcblxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IsIGF1dGhEYXRhKSB7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdHJlamVjdCgnRXJyb3IgTG9nZ2luZyBJbjogJyArIGVycm9yKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ0xvZ2dlZCBJbiBzdWNjZXNzZnVsbHk6ICcgKyBhdXRoRGF0YS51aWQpO1xuXHRcdFx0XHRcdHJlc29sdmUoYXV0aERhdGEpO1xuXHRcdFx0XHR9XG5cblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cdFx0XG5cdH1cblxuXHRmdW5jdGlvbiBjaGVja0xvZ2luU3RhdHVzKCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFxuXHRcdFx0YXBwLm9uQXV0aChmdW5jdGlvbihhdXRoRGF0YSkge1xuXHRcdFx0XHRpZiAoYXV0aERhdGEpIHtcblx0XHRcdFx0ICAgICRsb2cuaW5mbyhcIlVzZXIgXCIgKyBhdXRoRGF0YS51aWQgKyBcIiBpcyBsb2dnZWQgaW4gd2l0aCBcIiArIGF1dGhEYXRhLnByb3ZpZGVyKTtcblx0XHRcdFx0ICAgIHJlc29sdmUodHJ1ZSk7XG5cdFx0XHRcdCAgfSBlbHNlIHtcblx0XHRcdFx0ICAgICRsb2cuaW5mbyhcIlVzZXIgaXMgbG9nZ2VkIG91dFwiKTtcblx0XHRcdFx0ICAgIHJlc29sdmUoZmFsc2UpO1xuXHRcdFx0XHQgIH1cblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBsb2dVc2VyT3V0KCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHRcdCRsb2cuaW5mbygnbG9nZ2luZyB1c2VyIG91dCcpO1xuXHRcdGFwcC51bmF1dGgoKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHVwbG9hZFVzZXJEYXRhKGFsbFVzZXJEYXRhKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciB1aWQgPSBhbGxVc2VyRGF0YS51aWQ7XG5cdFx0dmFyIHJlbW90ZVVzZXIgPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKTtcblxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly90aGUgYWN0dWFsIGNhbGxcblx0XHRcdHJlbW90ZVVzZXIudXBkYXRlKGFsbFVzZXJEYXRhLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KCdUaGVyZSB3YXMgYSBwcm9ibGVtIHVwZGF0aW5nIHRoYXQgcmVjb3JkOiAnICsgZXJyb3IpO1xuXHRcdFx0XHRlbHNlIHJlc29sdmUoJ2FsbCB1c2VyIGRhdGEgdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5Jyk7XG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXHRcdFxuXHR9XG5cblx0ZnVuY3Rpb24gdXBsb2FkVXNlckJpbyhjdXJyZW50VXNlckJpbykge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgdWlkID0gKGN1cnJlbnRVc2VyQmlvLnVpZCkudG9TdHJpbmcoKTtcblx0XHR2YXIgcmVtb3RlVXNlckJpbyA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdiaW8nKTtcblxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHQvL2NhbGwgdG8gdGhlIGRiXG5cdFx0XHRyZW1vdGVVc2VyQmlvLnVwZGF0ZShjdXJyZW50VXNlckJpbywgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdCgnVGhlcmUgd2FzIGEgcHJvYmxlbSB1cGRhdGluZyB0aGF0IHJlY29yZDogJyArIGVycm9yKTtcblx0XHRcdFx0ZWxzZSByZXNvbHZlKCdhbGwgdXNlciBiaW8gZGF0YSB1cGxvYWRlZCBzdWNjZXNzZnVsbHknKTtcblx0XHRcdH0pXG5cblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGRvd25sb2FkVXNlckRhdGEoKSB7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGdldFVzZXJCaW8odWlkKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciB1c2VyQmlvID0gYXBwLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2JpbycpO1xuXG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL3RoZSBhY3R1YWwgY2FsbFxuXHRcdFx0dXNlckJpby5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHRcdC8vd2hlbiB0aGUgY2FsbCBpcyBzdWNjZXNzZnVsIHJldHVybiB0aGUgZGF0YVxuXHRcdFx0XHRyZXNvbHZlKHNuYXBzaG90LnZhbCgpKTtcblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSB7XG5cdFx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHRcdFx0fSBcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBjcmVhdGVIb3N0ZWRFdmVudCh1aWQsIG5ld0V2ZW50KSB7XG5cdFx0JGxvZy5pbmZvKCdnb3QgcGFzc2VkLi4uJyk7XG5cdFx0JGxvZy5pbmZvKHVpZCk7XG5cdFx0JGxvZy5pbmZvKG5ld0V2ZW50KTtcblxuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgZXZlbnRJRCA9IG5ld0V2ZW50LmlkO1xuXHRcdHZhciBuZXdIb3N0ZWRFdmVudCA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgnaG9zdGluZycpLmNoaWxkKGV2ZW50SUQpO1xuXG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcblx0XHRcdC8vY2FsbCB0byBmaXJlYmFzZVxuXHRcdFx0bmV3SG9zdGVkRXZlbnQuc2V0KG5ld0V2ZW50LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3I6ICcgKyBlcnJvcik7XG5cdFx0XHRcdGVsc2UgcmVzb2x2ZSgnTmV3IGV2ZW50IHNhdmVkIHRvIERCIHN1Y2Nlc3NmdWxseScpO1xuXHRcdFx0fSlcblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gYWRkR3Vlc3RUb0hvc3RHdWVzdExpc3RvbkRCKG5hbWUsIGd1aWVzdElkLCBldmVudElkLCB1aWQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIGd1ZXN0TGlzdCA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgnaG9zdGluZycpLmNoaWxkKGV2ZW50SWQpLmNoaWxkKCdndWVzdExpc3QnKS5jaGlsZChndWllc3RJZCk7XG5cblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9jYWxsIHRvIHRoZSBkYlxuXHRcdFx0Z3Vlc3RMaXN0LnNldCh7XG5cdFx0XHRcdHJzdnBkOiBmYWxzZSxcblx0XHRcdFx0c3RhdHVzOiAncGVuZGluZycsXG5cdFx0XHRcdG5hbWU6IG5hbWVcblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoJ1RoZXJlIHdhcyBhbiBlcnJvcjogJyArIGVycm9yKTtcblx0XHRcdFx0ZWxzZSByZXNvbHZlKCdOZXcgZXZlbnQgc2F2ZWQgdG8gREIgc3VjY2Vzc2Z1bGx5Jyk7XG5cdFx0XHR9KVxuXG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRVc2VyRXZlbnRzKHVpZCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgdXNlckV2ZW50cyA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKTtcblx0XHRcblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vdGhlIGFjdHVhbCBjYWxsXG5cdFx0XHR1c2VyRXZlbnRzLm9yZGVyQnlLZXkoKS5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHRcdHZhciB1c2VyUHJvZmlsZSA9IHNuYXBzaG90LnZhbCgpO1xuXG5cdFx0XHRcdC8vd2hlbiB0aGUgY2FsbCBpcyBzdWNjZXNzZnVsIHJldHVybiB0aGUgZGF0YVxuXHRcdFx0XHR2YXIgZXZlbnRzUGFja2FnZSA9IHtcblx0XHRcdFx0XHRob3N0aW5nOiB1c2VyUHJvZmlsZS5ob3N0aW5nLFxuXHRcdFx0XHRcdGF0dGVuZGluZzogdXNlclByb2ZpbGUuYXR0ZW5kaW5nLFxuXHRcdFx0XHRcdHBlbmRpbmc6IHVzZXJQcm9maWxlLnBlbmRpbmcsXG5cdFx0XHRcdFx0Y29tcGxldGVkOiB1c2VyUHJvZmlsZS5jb21wbGV0ZWRcblx0XHRcdFx0fTtcblxuXHRcdFx0XHRyZXNvbHZlKGV2ZW50c1BhY2thZ2UpO1xuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0XHR9IFxuXHRcdFx0fSk7XG5cblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldEFIb3N0ZWRFdmVudCh1aWQsIGV2ZW50SWQpIHtcblxuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgaG9zdGVkRXZlbnQgPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ2hvc3RpbmcnKS5jaGlsZChldmVudElkKTtcblxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly90aGUgYWN0dWFsIGNhbGxcblx0XHRcdGhvc3RlZEV2ZW50Lm9uY2UoJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdFx0dmFyIHNlbGVjdEV2ZW50ID0gc25hcHNob3QudmFsKCk7XG5cblx0XHRcdFx0cmVzb2x2ZShzZWxlY3RFdmVudCk7XG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KGVycm9yKTtcblx0XHRcdH0pXG5cdFx0fSlcblx0fVxuXG5cdGZ1bmN0aW9uIGZpbmRHdWVzdFVJRChndWVzdGI2NEVtYWlsKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciB1aWRzID0gYXBwLmNoaWxkKCdVaWRzJyk7XG5cblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vY2FsbCB0byBkYlxuXHRcdFx0dWlkcy5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHRcdC8vZGlzdGlsbCByZXN1bHRzXG5cdFx0XHRcdHZhciBhbGxVc2VycyA9IHNuYXBzaG90LnZhbCgpO1xuXG5cdFx0XHRcdE9iamVjdC5rZXlzKGFsbFVzZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnZnJvbSBsaXN0OiAnICsga2V5ICsgJywgbWF0Y2hpbmcgdG86ICcgKyBndWVzdGI2NEVtYWlsKTtcblx0XHRcdFx0XHQvL2NoZWNrIGVhY2ggdXNlclxuXHRcdFx0XHRcdGlmKGtleSA9PSBndWVzdGI2NEVtYWlsKSB7XG5cdFx0XHRcdFx0XHRyZXNvbHZlKGFsbFVzZXJzW2tleV0pO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRyZWplY3QoJ05vIHVzZXIgYnkgdGhhdCBlbWFpbCcpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9KTtcblxuXHRcdFx0fSk7XG5cblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0R3Vlc3RMaXN0Rm9yRXZlbnQoaG9zdElkLCBldmVudElkKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciBndWVzdExpc3QgPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQoaG9zdElkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ2hvc3RpbmcnKS5jaGlsZChldmVudElkKS5jaGlsZCgnZ3Vlc3RMaXN0Jyk7XG5cblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHRcdC8vY2FsbCB0aGUgZGJcblx0XHRcdGd1ZXN0TGlzdC5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHRcdC8vbG9jYWwgdmFyaWFibGVcblx0XHRcdFx0dmFyIHRoZUxpc3QgPSBzbmFwc2hvdC52YWwoKTtcblxuXHRcdFx0XHRyZXNvbHZlKHRoZUxpc3QpO1xuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdCgnVGhlcmUgd2FzIGFuIGVycm9yIGdldHRpbmcgdGhlIGd1ZXN0IGxpc3Q6ICcgKyAgZXJyb3IpO1xuXHRcdFx0fSlcblx0XHR9KVxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0QW5JbnZpdGVkRXZlbnQoaG9zdElkLCB1aWQsIGV2ZW50SWQpIHt9XG5cblx0Lypcblx0ZnVuY3Rpb24gYWRkUGVuZGluZ0V2ZW50Rm9yVXNlcih1aWQsIGhvc3RJZCwgZXZlbnRJZCwgZXZlbnQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIHVzZXJQZW5kaW5nTGlzdCA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgncGVuZGluZycpO1xuXG5cdFx0Ly9tYW5nZSB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9jYWxsIHRoZSBkYlxuXHRcdFx0dXNlclBlbmRpbmdMaXN0LnNldCh7XG5cdFx0XHRcdGhvc3RJZDoge1xuXHRcdFx0XHRcdGV2ZW50SWQ6IHtcblx0XHRcdFx0XHRcdGV2ZW50XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KFwiRXJyb3IgYWRkaW5nIHRvIHVzZXIgcGVuZGluZyBsaXN0OiBcIiArIGVycm9yKTtcblx0XHRcdFx0ZWxzZSByZXR1cm4gcmVzb2x2ZSgnQWRkZWQgdG8gdXNlciBwZW5kaW5nIGxpc3Qgc3VjY2Vzc2Z1bGx5Jyk7XG5cdFx0XHR9KVxuXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGFkZFBlbmRpbmdFdmVudEZvckd1ZXN0KHVpZCwgaG9zdElkLCBldmVudElkLCBldmVudCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgZ3Vlc3RzUGVuZGluZ0xpc3QgPSBhcHAuY2hpbGQoJ1VucmVnaXN0ZXJlZCcpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdwZW5kaW5nJyk7XG5cblx0XHQvL21hbmdlIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHQvL2NhbGwgdGhlIGRiXG5cdFx0XHR1c2VyUGVuZGluZ0xpc3Quc2V0KHtcblx0XHRcdFx0aG9zdElkOiB7XG5cdFx0XHRcdFx0ZXZlbnRJZDoge1xuXHRcdFx0XHRcdFx0ZXZlbnRcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoXCJFcnJvciBhZGRpbmcgdG8gdXNlciBwZW5kaW5nIGxpc3Q6IFwiICsgZXJyb3IpO1xuXHRcdFx0XHRlbHNlIHJldHVybiByZXNvbHZlKCdBZGRlZCB0byB1c2VyIHBlbmRpbmcgbGlzdCBzdWNjZXNzZnVsbHknKTtcblx0XHRcdH0pXG5cblx0XHR9KTtcblxuXHR9Ki9cblxuXHRmdW5jdGlvbiBkZWxldGVVcGRhdGVGaWVsZChjYXRlZ29yeSwgdWlkKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciBjYXRSZW1vdmluZ0Zyb20gPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoY2F0ZWdvcnkpLmNoaWxkKCd1cGRhdGVkJyk7XG5cblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdGNhdFJlbW92aW5nRnJvbS5zZXQobnVsbCwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdCgnVGhlcmUgd2FzIGFuIGVycm9yIGRlbGV0aW5nIHVwZGF0ZSBmaWVsZDogJyArIGVycm9yKTtcblx0XHRcdFx0ZWxzZSByZXNvbHZlKCdEZWxldGVkIHVwZGF0ZSBzdWNjZXNzZnVsbHknKTtcblx0XHRcdH0pXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIHJlbW92ZUluY29tcGxldGVFdmVudCh1aWQsIGV2ZW50SWQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIGV2ZW50VG9SZW1vdmUgPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ2hvc3RpbmcnKS5jaGlsZChldmVudElkKTtcblxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdHZhciBvbkNvbXBsZXRlID0gZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHRyZWplY3QoJ1N5bmNocm9uaXphdGlvbiBmYWlsZWQnKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRyZXNvbHZlKCdTeW5jaHJvbml6YXRpb24gc3VjY2VlZGVkJyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly9jYWxsIGRvIGRiXG5cdFx0XHRldmVudFRvUmVtb3ZlLnJlbW92ZShvbkNvbXBsZXRlKTtcblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gdGhlcmVXYXNBblVwZGF0ZUZpZWxkKGNhdGVnb3J5LCB1aWQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIGNhdFRvQ2hlY2sgPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoY2F0ZWdvcnkpO1xuXG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL2NhbGwgdGhlIGRiXG5cdFx0XHRjYXRUb0NoZWNrLm9uY2UoJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdFx0Ly9zYXZlIHRoZSByZXNwb25zZVxuXHRcdFx0XHR2YXIgY3VycmVudENhdE1vZGVsID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHRcdC8vc2hvdyB3aGF0IHdhcyBmb3VuZFxuXHRcdFx0XHQvL2xvb2sgZm9yIHRoZSB1cGRhdGUgZmllbGRcblx0XHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoY3VycmVudENhdE1vZGVsWyd1cGRhdGVkJ10pKSByZXNvbHZlKHRydWUpO1xuXHRcdFx0XHRlbHNlIHJlamVjdChmYWxzZSk7XG5cblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoZXJyb3IpO1xuXHRcdFx0fSlcblx0XHR9KTtcblx0fVxuXG5cdC8vcmV0dXJuIHRoZSBvYmplY3Rcblx0cmV0dXJuIGFsbEJhY2tlbmRTZXJ2aWNlcztcbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5mYWN0b3J5KCd0cmFmZmljVmFsZXQnLCB0cmFmZmljVmFsZXQpO1xuXG50cmFmZmljVmFsZXQuJGluamVjdCA9IFsnJGxvZycsICckbG9jYXRpb24nXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiB0cmFmZmljVmFsZXQoJGxvZywgJGxvY2F0aW9uKSB7XG5cdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0dmFyIGFsbFRyYWZmaWNDb250cm9scyA9IHtcblx0XHRyZWRpcmVjdFRvOiByZWRpcmVjdFRvLFxuXHRcdGV2ZW50Um91dGU6IGV2ZW50Um91dGVcblx0fTtcblxuXHRmdW5jdGlvbiByZWRpcmVjdFRvKHBhdGgsIHBhcmFtMSwgcGFyYW0yLCBwYXJhbTMpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChwYXJhbTEpKSB7XG5cdFx0XHRwYXRoID0gcGF0aCArICcvJyArIHBhcmFtMTtcblxuXHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQocGFyYW0yKSkge1xuXHRcdFx0XHQvL2dvIHRvIHBhdGggd2l0aCAyIHBhcmFtc1xuXHRcdFx0XHRwYXRoID0gcGF0aCArICcvJyArIHBhcmFtMjtcblxuXHRcdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChwYXJhbTMpKSB7XG5cdFx0XHRcdFx0cGF0aCA9IHBhdGggKyAnLycgKyBwYXJhbTM7XG5cblx0XHRcdFx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIG5vdyB0byAnICsgcGF0aCk7XG5cdFx0XHRcdFx0JGxvY2F0aW9uLnBhdGgocGF0aCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIG5vdyB0byAnICsgcGF0aCk7XG5cdFx0XHRcdCRsb2NhdGlvbi5wYXRoKHBhdGgpO1xuXHRcdFx0fVxuXHRcdFx0Ly9nbyB3aXRoIDEgcGFyYW1cblx0XHRcdCRsb2cuaW5mbygncmVkaXJlY3Rpbmcgbm93IHRvICcgKyBwYXRoKTtcblx0XHRcdCRsb2NhdGlvbi5wYXRoKHBhdGgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvL2p1c3QgZ28gdG8gcGF0aFxuXHRcdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyBub3cgdG8gJyArIHBhdGgpO1xuXHRcdFx0JGxvY2F0aW9uLnBhdGgocGF0aCk7XG5cdFx0fVxuXG5cdH1cblxuXHRmdW5jdGlvbiBldmVudFJvdXRlKGV2ZW50SWQsIGhvc3RJZCwgdXNlcklkLCBzZWN0aW9uKSB7XG5cdFx0JGxvZy5pbmZvKCdUcmFmZmljIHZhbGV0IGFjY2Vzc2VkJyk7XG5cdFx0JGxvZy5pbmZvKCdldmVudElkOiAnICsgZXZlbnRJZCk7XG5cdFx0JGxvZy5pbmZvKCdob3N0SWQ6ICcgKyBob3N0SWQpO1xuXHRcdCRsb2cuaW5mbygndXNlcklkOiAnICsgdXNlcklkKTtcblxuXHRcdC8vaWYgdGhlcmUgaXNuJ3QgYSBzZWN0aW9uIHNldCB0byBkZWZhdWx0XG5cdFx0aWYoYW5ndWxhci5pc1VuZGVmaW5lZChzZWN0aW9uKSkgc2VjdGlvbiA9IDE7XG5cblx0XHQvL2lmIHRoZSBob3N0SWQgYW5kIHVzZXJJZCBtYXRjaCwgbGF1bmNoIGhvc3Qgdmlld1xuXHRcdGlmKGhvc3RJZCA9PT0gdXNlcklkKSB7IFxuXHRcdFx0dmFyIHBhdGggPSAnL2V2ZW50L2hvc3QvJyArIGV2ZW50SWQgKyAnLycgKyB1c2VySWQgKyAnLycrIHNlY3Rpb247XG5cdFx0XHQkbG9nLmluZm8ocGF0aCk7XG5cdFx0XHQvL3JlZGlyZWN0XG5cdFx0XHQkbG9jYXRpb24ucGF0aChwYXRoKTtcblx0XHR9XG5cdFx0Ly9pZiB0aGUgaG9zdElkIGFuZCB1c2VySWQgRE9OJ1QgbWF0Y2gsIGxhdW5jaCBndWVzdCB2aWV3XG5cdFx0ZWxzZSB7XG5cdFx0XHR2YXIgcGF0aCA9ICcvZXZlbnQvZ3Vlc3QvJyArIGV2ZW50SWQgKyAnLycgKyB1c2VySWQgKyAnLycgKyBob3N0SWQ7XG5cdFx0XHQkbG9nLmluZm8ocGF0aCk7XG5cdFx0XHQvL3JlZGlyZWN0XG5cdFx0XHQkbG9jYXRpb24ucGF0aChwYXRoKTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gYWxsVHJhZmZpY0NvbnRyb2xzO1xufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmZhY3RvcnkoJ3VzZXJEYXRhJywgdXNlckRhdGEpO1xuXG51c2VyRGF0YS4kaW5qZWN0ID0gWyckbG9nJywgJyRxJywgJ2JhY2tlbmRTZXJ2aWNlcyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHVzZXJEYXRhKCRsb2csICRxLCBiYWNrZW5kU2VydmljZXMpIHtcblx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHR2YXIgY3VycmVudFVzZXIgPSB7XG5cdFx0YmlvOiB7IFxuXHRcdFx0dWlkOiAnJyxcblx0XHRcdG5hbWU6ICcnLFxuXHRcdFx0ZW1haWw6ICcnLFxuXHRcdFx0Y29tcGFueTogJycsXG5cdFx0XHR0aXRsZTogJycsXG5cdFx0XHRkb2I6IDBcblx0XHR9LFxuXHRcdGV2ZW50czoge1xuXHRcdFx0aG9zdGluZzoge30sXG5cdFx0XHRwZW5kaW5nOiB7fSxcblx0XHRcdGF0dGVuZGluZzoge30sXG5cdFx0XHRjb21wbGV0ZWQ6IHt9XG5cdFx0fVxuXHR9O1xuXG5cdHZhciBhY3RpdmVFdmVudCA9IHt9O1xuXG5cdC8vbG9jYWwgZnVuY3Rpb25zXG5cdGZ1bmN0aW9uIHV0ZjhfdG9fYjY0KHN0cikge1xuXHRcdHJldHVybiBidG9hKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiBiNjRfdG9fdXRmOChzdHIpIHtcbiAgICBcdHJldHVybiBhdG9iKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fTtcblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH07XG5cblx0dmFyIGFsbFVzZXJEYXRhID0ge1xuXHRcdGJpb1ByaW1hcmllc0FyZUNvbXBsZXRlTG9jYWxseTogYmlvUHJpbWFyaWVzQXJlQ29tcGxldGVMb2NhbGx5LFx0XHQvL21vZGFsIGFuYWx5c2lzXG5cdFx0ZXZlbnRFeGlzdHNMb2NhbGx5OiBldmVudEV4aXN0c0xvY2FsbHksXG5cdFx0dGhpc0lzVGhlSG9zdEVtYWlsOiB0aGlzSXNUaGVIb3N0RW1haWwsXG5cdFx0Z3Vlc3RJbnZpdGVkQWxyZWFkeTogZ3Vlc3RJbnZpdGVkQWxyZWFkeSxcblx0XHR0aGVyZUlzQW5BY3RpdmVFdmVudDogdGhlcmVJc0FuQWN0aXZlRXZlbnQsXG5cblx0XHRjbGVhbkV2ZW50czogY2xlYW5FdmVudHMsXHRcdFx0XHRcdFx0XHQvL21vZGVsIG1haW50YWluYW5jZVxuXG5cdFx0Z2V0VUlETG9jYWxseTogZ2V0VUlETG9jYWxseSxcdFx0XHRcdFx0XHQvL2dldHRlciBNZXRob2RzXG5cdFx0Z2V0TmFtZUxvY2FsbHk6IGdldE5hbWVMb2NhbGx5LFxuXHRcdGdldEVtYWlsTG9jYWxseTogZ2V0RW1haWxMb2NhbGx5LFxuXHRcdGdldENvbXBhbnlMb2NhbGx5OiBnZXRDb21wYW55TG9jYWxseSxcblx0XHRnZXRUaXRsZUxvY2FsbHk6IGdldFRpdGxlTG9jYWxseSxcblx0XHRnZXRET0JMb2NhbGx5OiBnZXRET0JMb2NhbGx5LFxuXHRcdGdldEZ1bGxCaW9Mb2NhbGx5OiBnZXRGdWxsQmlvTG9jYWxseSxcblx0XHRnZXRPbmVVc2VyRXZlbnRMb2NhbGx5OiBnZXRPbmVVc2VyRXZlbnRMb2NhbGx5LFxuXHRcdGdldFVzZXJFdmVudHNMb2NhbGx5OiBnZXRVc2VyRXZlbnRzTG9jYWxseSxcblx0XHRnZXRBbGxVc2VyRXZlbnRzTG9jYWxseTogZ2V0QWxsVXNlckV2ZW50c0xvY2FsbHksXG5cdFx0Z2V0QWN0aXZlRXZlbnQ6IGdldEFjdGl2ZUV2ZW50LFxuXG5cdFx0c2V0VUlETG9jYWxseTogc2V0VUlETG9jYWxseSxcdFx0XHRcdFx0XHQvL3NldHRlciBNZXRob2RzXG5cdFx0c2V0TmFtZUxvY2FsbHk6IHNldE5hbWVMb2NhbGx5LFxuXHRcdHNldEVtYWlsTG9jYWxseTogc2V0RW1haWxMb2NhbGx5LFxuXHRcdHNldENvbXBhbnlMb2NhbGx5OiBzZXRDb21wYW55TG9jYWxseSxcblx0XHRzZXRUaXRsZUxvY2FsbHk6IHNldFRpdGxlTG9jYWxseSxcblx0XHRzZXRET0JMb2NhbGx5OiBzZXRET0JMb2NhbGx5LFxuXHRcdHNldFByaW1hcmllc0xvY2FsbHk6IHNldFByaW1hcmllc0xvY2FsbHksXG5cdFx0dXBkYXRlVXNlckV2ZW50c0xvY2FsbHk6IHVwZGF0ZVVzZXJFdmVudHNMb2NhbGx5LFxuXHRcdHVwZGF0ZUFsbFVzZXJFdmVudHNMb2NhbGx5OiB1cGRhdGVBbGxVc2VyRXZlbnRzTG9jYWxseSxcblx0XHR1cGRhdGVCaW9Mb2NhbGx5OiB1cGRhdGVCaW9Mb2NhbGx5LFxuXHRcdGFkZEd1ZXN0VG9Ib3N0R3Vlc3RMaXN0OiBhZGRHdWVzdFRvSG9zdEd1ZXN0TGlzdCxcblx0XHRzZXRBY3RpdmVFdmVudDogc2V0QWN0aXZlRXZlbnQsXG5cdFx0YWRkR3Vlc3RUb0FjdGl2ZUV2ZW50OiBhZGRHdWVzdFRvQWN0aXZlRXZlbnQsXG5cdFx0c2F2ZU5ld0hvc3RpbmdFdmVudDogc2F2ZU5ld0hvc3RpbmdFdmVudCxcblxuXHRcdHJlbW92ZVVzZXJFdmVudHNMb2NhbGx5OiByZW1vdmVVc2VyRXZlbnRzTG9jYWxseSwgXHQvL3JlbW92ZSBkYXRhXG5cdFx0XG5cdFx0Z2V0RnVsbFJlbW90ZURCZm9yTG9jYWw6IGdldEZ1bGxSZW1vdGVEQmZvckxvY2FsLFx0Ly9sb2NhbC1yZW1vdGUgaW50ZXJhY2lvbnNcblx0XHRnZXRSZW1vdGVCaW9Gb3JMb2NhbDogZ2V0UmVtb3RlQmlvRm9yTG9jYWwsXHRcdFx0XG5cdFx0Z2V0UmVtb3RlRXZlbnRzRm9yTG9jYWw6IGdldFJlbW90ZUV2ZW50c0ZvckxvY2FsLFxuXHRcdGdldE9uZVJlbW90ZUV2ZW50Rm9yTG9jYWw6IGdldE9uZVJlbW90ZUV2ZW50Rm9yTG9jYWwsXG5cdFx0c2V0RnVsbFJlbW90ZURCZnJvbUxvY2FsOiBzZXRGdWxsUmVtb3RlREJmcm9tTG9jYWwsXG5cdFx0c2V0UmVtb3RlQmlvRnJvbUxvY2FsOiBzZXRSZW1vdGVCaW9Gcm9tTG9jYWwsXG5cdFx0c2V0QVJlbW90ZUV2ZW50RnJvbUxvY2FsOiBzZXRBUmVtb3RlRXZlbnRGcm9tTG9jYWwsXG5cdFx0c2V0UmVtb3RlRXZlbnRzRnJvbUxvY2FsOiBzZXRSZW1vdGVFdmVudHNGcm9tTG9jYWwsXG5cdFx0Y2xlYW5EQkV2ZW50c0NhdGVnb3J5OiBjbGVhbkRCRXZlbnRzQ2F0ZWdvcnksXG5cdFx0Z2V0VXNlcklkRm9yR3Vlc3Q6IGdldFVzZXJJZEZvckd1ZXN0LFxuXHRcdGdldEV2ZW50R3Vlc3RMaXN0OiBnZXRFdmVudEd1ZXN0TGlzdCxcblx0XHRyZW1vdmVJbmNvbXBsZXRlRXZlbnRGcm9tREI6IHJlbW92ZUluY29tcGxldGVFdmVudEZyb21EQixcblxuXHRcdGxvYWRCaW86IGxvYWRCaW8sXHRcdFx0XHRcdFx0XHRcdFx0Ly9leHRlcm5hbCBtZXRob2RzXG5cdFx0bG9hZEV2ZW50c1Byb2dyZXNzaXZlbHk6IGxvYWRFdmVudHNQcm9ncmVzc2l2ZWx5LFxuXHRcdGxvYWRBbkV2ZW50UHJvZ3Jlc3NpdmVseTogbG9hZEFuRXZlbnRQcm9ncmVzc2l2ZWx5LFxuXHRcdGNyZWF0ZU5ld0V2ZW50OiBjcmVhdGVOZXdFdmVudCxcblx0XHR1cGRhdGVQZW5kaW5nRXZlbnRzTGlzdEZvckd1ZXN0OiB1cGRhdGVQZW5kaW5nRXZlbnRzTGlzdEZvckd1ZXN0XG5cdH1cblxuXHQvL2FuYWx5c2lzIG1ldGhvZHNcblx0ZnVuY3Rpb24gYmlvUHJpbWFyaWVzQXJlQ29tcGxldGVMb2NhbGx5KCkge1xuXHRcdGlmKCBjdXJyZW50VXNlci5iaW8udWlkICE9PSAnJyAmJlxuXHRcdFx0Y3VycmVudFVzZXIuYmlvLm5hbWUgIT09ICcnICYmXG5cdFx0XHRjdXJyZW50VXNlci5iaW8uZW1haWwgIT09ICcnXG5cdFx0XHQpXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRlbHNlIHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGZ1bmN0aW9uIGV2ZW50RXhpc3RzTG9jYWxseSh0eXBlLCBldmVudElkKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoY3VycmVudFVzZXIuZXZlbnRzW3R5cGVdW2V2ZW50SWRdKSkgcmV0dXJuIHRydWU7XG5cdFx0ZWxzZSByZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRmdW5jdGlvbiB0aGlzSXNUaGVIb3N0RW1haWwoZW1haWwsIGV2ZW50SWQpIHtcblx0XHRcblx0XHQvL2NoZWNrIGlmIGEgYmlvIGlzIGxvYWRlZFxuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGN1cnJlbnRVc2VyLmJpby5lbWFpbCkpIHtcblx0XHRcdFxuXHRcdFx0aWYoY3VycmVudFVzZXIuYmlvLmVtYWlsICE9ICcnKSB7XG5cdFx0XHRcdC8vY2hlY2sgZm9yIGEgbWF0Y2hcblx0XHRcdFx0aWYoZW1haWwgPT0gY3VycmVudFVzZXIuYmlvLmVtYWlsKSB7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cblx0XHRcdH0gXG5cdFx0XHRcblx0XHR9IFxuXHRcdFxuXHRcdC8vaWYgdGhhdCBkaWRuJ3Qgd29yayBjaGVjayB0aGUgY3VycmVudCBldmVudFxuXHRcdFxuXHRcdGlmKGN1cnJlbnRVc2VyLmV2ZW50cy5ob3N0aW5nW2V2ZW50SWRdLmhvc3QuZW1haWwgPT0gZW1haWwpIHtcblx0XHRcdFxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdFxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRcblx0fVxuXG5cdGZ1bmN0aW9uIGd1ZXN0SW52aXRlZEFscmVhZHkoZW1haWwsIGV2ZW50SWQpIHtcblx0XHQvL2ZpcnN0IGNoZWNrIGlmIHRoZXJlIGlzIGEgZ3Vlc3QgbGlzdFxuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGN1cnJlbnRVc2VyLmV2ZW50cy5ob3N0aW5nW2V2ZW50SWRdLmd1ZXN0TGlzdCkpIHtcblx0XHRcdC8vaWYgdGhlcmUgaXMgYSBsaXN0LCBjaGVjayBmb3IgdGhlIGVtYWlsXG5cdFx0XHQkbG9nLmluZm8oJ3RoZXJlIGlzIGEgZ3Vlc3QgbGlzdCcpO1xuXG5cdFx0XHQvL2NvbnZlcnQgZW1haWwgZm9yIGV2YWx1YXRpb25cblx0XHRcdHJlZkVtYWlsID0gdXRmOF90b19iNjQoZW1haWwpO1xuXG5cdFx0XHQvL3J1biB0aHJvdWdoIGVhY2ggZ3Vlc3QgYW5kIGNvbXBhcmVcblx0XHRcdE9iamVjdC5rZXlzKGN1cnJlbnRVc2VyLmV2ZW50cy5ob3N0aW5nW2V2ZW50SWRdLmd1ZXN0TGlzdCkuZm9yRWFjaChmdW5jdGlvbihiNjRFbWFpbCkge1xuXHRcdFx0XHRpZihyZWZFbWFpbCA9PSBiNjRFbWFpbCkge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnYW4gZW1haWwgbWF0Y2ggd2FzIGZvdW5kLCB0aGlzIGd1ZXN0IGhhcyBiZWVuIGludml0ZWQgYWxyZWFkeScpO1xuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnbm8gZW1haWwgbWF0Y2ggZm91bmQsIG9rIHRvIGludml0ZSBndWVzdCcpO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSlcblxuXHRcdH0gZWxzZSB7XG5cdFx0XHQvL2lmIG5vIGd1ZXN0IGxpc3QgdGhhbiBjYW4ndCBhbHJlYWR5IGJlIG9uIGl0XG5cdFx0XHQkbG9nLmluZm8oJ25vIGd1ZXN0bGlzdCcpO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHR9XG5cblx0ZnVuY3Rpb24gdGhlcmVJc0FuQWN0aXZlRXZlbnQoKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoYWN0aXZlRXZlbnQuZXZlbnQpKSB7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0ZWxzZSByZXR1cm4gZmFsc2U7XG5cdH1cblxuXHQvL21vZGVsIG1haW50YWluYW5jZVxuXHRmdW5jdGlvbiBjbGVhbkV2ZW50cyh0eXBlKSB7XG5cdFx0Ly9pdGVyYXRlIHRocm91Z2ggb2JqZWN0cyBpbiBvYmplY3Rcblx0XHRPYmplY3Qua2V5cyhjdXJyZW50VXNlci5ldmVudHNbdHlwZV0pLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG5cdFx0XHQvL2lmIGFueSBhcmUgbm9uLW9iamVjdHMsIGRlbGV0ZSB0aGVtXG5cdFx0XHRpZighYW5ndWxhci5pc09iamVjdChjdXJyZW50VXNlci5ldmVudHNbdHlwZV1ba2V5XSkpIHtcblx0XHRcdFx0ZGVsZXRlIGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXVtrZXldO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0Ly9nZXR0ZXIgbWV0aG9kc1xuXHRmdW5jdGlvbiBnZXRVSURMb2NhbGx5KCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5iaW8udWlkO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0TmFtZUxvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmJpby5uYW1lO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0RW1haWxMb2NhbGx5KCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5iaW8uZW1haWw7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRDb21wYW55TG9jYWxseSgpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuYmlvLmNvbXBhbnk7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRUaXRsZUxvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmJpby50aXRsZTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0RE9CTG9jYWxseSgpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuYmlvLmRvYjtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldEZ1bGxCaW9Mb2NhbGx5KCkge1xuXHRcdHJldHVybiB7XG5cdFx0XHR1aWQ6IGN1cnJlbnRVc2VyLmJpby51aWQsXG5cdFx0XHRuYW1lOiBjdXJyZW50VXNlci5iaW8ubmFtZSxcblx0XHRcdGVtYWlsOiBjdXJyZW50VXNlci5iaW8uZW1haWwsXG5cdFx0XHRjb21wYW55OiBjdXJyZW50VXNlci5iaW8uY29tcGFueSxcblx0XHRcdHRpdGxlOiBjdXJyZW50VXNlci5iaW8udGl0bGUsXG5cdFx0XHRkb2I6IGN1cnJlbnRVc2VyLmJpby5kb2Jcblx0XHR9O1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0T25lVXNlckV2ZW50TG9jYWxseSh0eXBlLCBldmVudElkKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXVtldmVudElkXTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldFVzZXJFdmVudHNMb2NhbGx5KHR5cGUpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuZXZlbnRzW3R5cGVdO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0QWxsVXNlckV2ZW50c0xvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmV2ZW50cztcblx0fVxuXG5cdGZ1bmN0aW9uIGdldEFjdGl2ZUV2ZW50KCkge1xuXHRcdHJldHVybiBhY3RpdmVFdmVudDtcblx0fVxuXG5cdC8vc2V0dGVyIG1ldGhvZHNcblx0ZnVuY3Rpb24gc2V0VUlETG9jYWxseSh1aWQpIHtcblx0XHRjdXJyZW50VXNlci5iaW8udWlkID0gdWlkO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0TmFtZUxvY2FsbHkobmFtZSkge1xuXHRcdGN1cnJlbnRVc2VyLmJpby5uYW1lID0gbmFtZTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldEVtYWlsTG9jYWxseShlbWFpbCkge1xuXHRcdGN1cnJlbnRVc2VyLmJpby5lbWFpbCA9IGVtYWlsO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0Q29tcGFueUxvY2FsbHkoY29tcGFueSkge1xuXHRcdGN1cnJlbnRVc2VyLmJpby5jb21wYW55ID0gY29tcGFueTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2V0VGl0bGVMb2NhbGx5KHRpdGxlKSB7XG5cdFx0Y3VycmVudFVzZXIuYmlvLnRpdGxlID0gdGl0bGU7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXRET0JMb2NhbGx5KGRvYikge1xuXHRcdGN1cnJlbnRVc2VyLmJpby5kb2IgPSBkb2I7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXRQcmltYXJpZXNMb2NhbGx5KGVtYWlsLCBuYW1lLCB1aWQpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChlbWFpbCkpIHNldEVtYWlsTG9jYWxseShlbWFpbCk7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQobmFtZSkpIHNldE5hbWVMb2NhbGx5KG5hbWUpO1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHVpZCkpIHNldFVJRExvY2FsbHkodWlkKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHVwZGF0ZVVzZXJFdmVudHNMb2NhbGx5KHR5cGUsIGV2ZW50KSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBldmVudElEID0gZXZlbnQuaWQ7XG5cblx0XHQvL2NoZWNrIGlmIHRoZSBtb2RlbCBuZWVkcyB0byBiZSBjbGVhbmVkXG5cdFx0Y2xlYW5FdmVudHModHlwZSk7XG5cdFx0Ly90aGVuIGxvYWQgdGhlIG5ldyBldmVudFxuXHRcdGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXVtldmVudElEXSA9IGV2ZW50O1xuXHR9XG5cblx0ZnVuY3Rpb24gdXBkYXRlQWxsVXNlckV2ZW50c0xvY2FsbHkoYWxsVXNlckV2ZW50cykge1xuXHRcdGN1cnJlbnRVc2VyLmV2ZW50cyA9IGFsbFVzZXJFdmVudHM7XG5cdH1cblxuXHRmdW5jdGlvbiB1cGRhdGVCaW9Mb2NhbGx5KHVzZXJCaW8pIHtcblx0XHQvL3VwZGF0ZSBsb2NhbCB2YWx1ZXNcblx0XHRzZXROYW1lTG9jYWxseSh1c2VyQmlvLm5hbWUpO1xuXHRcdHNldEVtYWlsTG9jYWxseSh1c2VyQmlvLmVtYWlsKTtcblx0XHRzZXRDb21wYW55TG9jYWxseSh1c2VyQmlvLmNvbXBhbnkpO1xuXHRcdHNldFRpdGxlTG9jYWxseSh1c2VyQmlvLnRpdGxlKTtcblx0XHRzZXRET0JMb2NhbGx5KHVzZXJCaW8uZG9iKTtcblx0XHQvL3NhdmUgdG8gZGJcblx0XHRzZXRSZW1vdGVCaW9Gcm9tTG9jYWwoKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGFkZEd1ZXN0VG9Ib3N0R3Vlc3RMaXN0KG5hbWUsIGVtYWlsLCBndWVzdElkLCBldmVudElkLCB1aWQpIHtcblx0XHQvL2NhbGwgdG8gdGhlIGRiIHNvIHJldHVybiBhIHByb21pc2Vcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL2NvbnZlcnQgdGhlIGVtYWlsIGlmIG9uZSB3YXMgcGFzc2VkXG5cdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChlbWFpbCkpIHtcblx0XHRcdFx0Z3Vlc3RJZCA9IHV0ZjhfdG9fYjY0KGVtYWlsKTtcblx0XHRcdH1cblxuXHRcdFx0ZGIuYWRkR3Vlc3RUb0hvc3RHdWVzdExpc3RvbkRCKG5hbWUsIGd1ZXN0SWQsIGV2ZW50SWQsIHVpZClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKHBvc2l0aXZlUmVzdWx0KSB7XG5cdFx0XHRcdHJlc29sdmUocG9zaXRpdmVSZXN1bHQpO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihuZWdhdGl2ZVJlc3VsdCkge1xuXHRcdFx0XHRyZWplY3QobmVnYXRpdmVSZXN1bHQpO1xuXHRcdFx0fSlcblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gc2V0QWN0aXZlRXZlbnQoZXZlbnQpIHtcblx0XHQvL1xuXHRcdGFjdGl2ZUV2ZW50ID0gZXZlbnQ7XG5cdH1cblxuXHRmdW5jdGlvbiBhZGRHdWVzdFRvQWN0aXZlRXZlbnQobmV3R3Vlc3QpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciB1aWQgPSBuZXdHdWVzdC51aWQ7XG5cblx0XHQvL2lmIHRoaXMgaXMgdGhlIGZpcnN0IGd1ZXN0LCBjcmVhdGUgdGhlIGxpc3Qgb2JqZWN0XG5cdFx0aWYoIWFuZ3VsYXIuaXNPYmplY3QoYWN0aXZlRXZlbnQuZXZlbnQuZ3Vlc3RMaXN0KSkge1xuXHRcdFx0JGxvZy5pbmZvKCdjcmVhdGluZyB0aGUgb2JqZWN0Jyk7XG5cdFx0XHRhY3RpdmVFdmVudC5ldmVudC5ndWVzdExpc3QgPSB7fTtcblx0XHR9XG5cblx0XHQkbG9nLmluZm8oYWN0aXZlRXZlbnQuZXZlbnQpO1xuXHRcdC8vYWRkIHRoZSBndWVzdCB0byB0aGUgbGlzdFxuXHRcdGFjdGl2ZUV2ZW50LmV2ZW50Lmd1ZXN0TGlzdFt1aWRdID0gbmV3R3Vlc3QuZ3Vlc3Q7XG5cblx0XHQkbG9nLmluZm8oYWN0aXZlRXZlbnQuZXZlbnQuZ3Vlc3RMaXN0W3VpZF0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0VXNlcklkRm9yR3Vlc3QoZW1haWwpIHtcblx0XHQvL2NhbGwgdG8gdGhlIGRiIHNvIHJldHVybiBhIHByb21pc2Vcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL2NvbnZlcnQgdGhlIGVtYWlsXG5cdFx0XHRndWVzdEVtYWlsID0gdXRmOF90b19iNjQoZW1haWwpO1xuXG5cdFx0XHRkYi5maW5kR3Vlc3RVSUQoZ3Vlc3RFbWFpbClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKHVpZCkge1xuXHRcdFx0XHRyZXNvbHZlKHVpZCk7XG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yUmVzcG9uc2UpIHtcblx0XHRcdFx0cmVqZWN0KGVycm9yUmVzcG9uc2UpO1xuXHRcdFx0fSlcblxuXHRcdH0pO1xuXHR9XG5cblx0Ly9kZWxldGUgTWV0aG9kc1xuXHRmdW5jdGlvbiByZW1vdmVVc2VyRXZlbnRzTG9jYWxseSh0eXBlLCBldmVudCkge1xuXHRcdC8vZG9lcyB0aGlzIHdvcms/XG5cdFx0ZGVsZXRlIGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXVtldmVudC5pZF07XG5cdH1cblxuXHQvL3JlbW90ZS1sb2NhbCBpbnRlcmFjdGlvbiBNZXRob2RzXG5cdGZ1bmN0aW9uIGdldEZ1bGxSZW1vdGVEQmZvckxvY2FsKCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0ZGIuZG93bmxvYWRVc2VyRGF0YSgpXG5cdFx0LnRoZW4oZnVuY3Rpb24ocmVtb3RlVXNlckRhdGEpIHtcblx0XHRcdGN1cnJlbnRVc2VyID0gcmVtb3RlVXNlckRhdGE7XG5cdFx0fSlcblx0fVxuXG5cdGZ1bmN0aW9uIGdldFJlbW90ZUJpb0ZvckxvY2FsKHVpZCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXHRcdFx0XHRcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL2dvIG91dCB0byB0aGUgZGIgYmVmb3JlIHJlc29sdmluZ1xuXHRcdFx0ZGIuZ2V0VXNlckJpbyh1aWQpXG5cdFx0XHQudGhlbihmdW5jdGlvbih1c2VyQmlvKSB7XG5cblx0XHRcdFx0cmVzb2x2ZSh1c2VyQmlvKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0cmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3IgcmVhZGluZyB0aGUgdXNlciBiaW86ICcgKyBlcnJvcik7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXHRcdFxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0UmVtb3RlRXZlbnRzRm9yTG9jYWwoKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cdFx0XHRcdFxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9nbyBvdXQgdG8gdGhlIGRiIGJlZm9yZSByZXNvbHZpbmdcblx0XHRcdGRiLmdldFVzZXJFdmVudHMoZ2V0VUlETG9jYWxseSgpKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24ob2J0YWluZWRVc2VyRXZlbnRzKSB7XG5cblx0XHRcdFx0Ly9zYXZlIHRoZSByZXN1bHRzIHRvIHRoZSBsb2NhbCBkYXRhYnNlXG5cdFx0XHRcdE9iamVjdC5rZXlzKG9idGFpbmVkVXNlckV2ZW50cykuZm9yRWFjaChmdW5jdGlvbihldmVudFR5cGUpIHtcblx0XHRcdFx0XHQvL3dpdGhpbiBlYWNoIGV2ZW50IHR5cGUgaXRlcmF0ZSB0aHJvdWdoIHRoZSBhY3R1YWwgZXZlbnRzXG5cdFx0XHRcdFx0T2JqZWN0LmtleXMob2J0YWluZWRVc2VyRXZlbnRzW2V2ZW50VHlwZV0pLmZvckVhY2goZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRcdFx0XHRcdC8vb25jZSB3ZSBzZWUgdGhlIGV2ZW50cywgc2F2ZSB0aGVtIHRvIHRoZSBsb2NhbCBtb2RlbFxuXG5cdFx0XHRcdFx0XHR1cGRhdGVVc2VyRXZlbnRzTG9jYWxseShldmVudFR5cGUsIG9idGFpbmVkVXNlckV2ZW50c1tldmVudFR5cGVdW2V2ZW50XSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly9yZXR1cm4gdGhlIHJlc3VsdHMgdG8gdGhlIHJlcXVlc3Rpbmcgb2JqZWN0XG5cdFx0XHRcdHJlc29sdmUob2J0YWluZWRVc2VyRXZlbnRzKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0cmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3IgcmVhZGluZyB0aGUgdXNlciBldmVudHM6ICcgKyBlcnJvcik7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0T25lUmVtb3RlRXZlbnRGb3JMb2NhbChldmVudElkKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcblx0XHRcdC8vZ29pbmcgdG8gYmFja2VuZCBzZXJ2aWNlc1xuXHRcdFx0ZGIuZ2V0QUhvc3RlZEV2ZW50KGdldFVJRExvY2FsbHkoKSwgZXZlbnRJZClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKG9idGFpbmVkRXZlbnQpIHtcblxuXHRcdFx0XHQvL3NhdmUgdGhlIHJlc3VsdCB0byB0aGUgbG9jYWwgbW9kZWxcblx0XHRcdFx0XG5cdFx0XHRcdC8vcmV0dXJuIHRoZSByZXN1bHQgdG8gdGhlIHJlcXVlc3Rpbmcgb2JqZWN0XG5cdFx0XHRcdHJlc29sdmUob2J0YWluZWRFdmVudCk7XG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdHJlamVjdCgnVGhlcmUgd2FzIGFuIGVycm9yIHJlYWRpbmcgdGhlIHVzZXIgZXZlbnQ6ICcgKyBlcnJvcik7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0RnVsbFJlbW90ZURCZnJvbUxvY2FsKCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0ZGIudXBsb2FkVXNlckRhdGEoY3VycmVudFVzZXIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0UmVtb3RlQmlvRnJvbUxvY2FsKCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0ZGIudXBsb2FkVXNlckJpbyhjdXJyZW50VXNlci5iaW8pO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0QVJlbW90ZUV2ZW50RnJvbUxvY2FsKCkge1xuXG5cdH1cblxuXHRmdW5jdGlvbiBzZXRSZW1vdGVFdmVudHNGcm9tTG9jYWwodWlkLCBldmVudCkge1xuXHRcdC8vZGVjbGFyIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vc2VuZCB0aGUgZXZlbnQgdG8gdGhlIGRiXG5cdFx0XHRkYi5jcmVhdGVIb3N0ZWRFdmVudCh1aWQsIGV2ZW50KVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24oc3VjY2Vzc01lc3NhZ2UpIHtcblx0XHRcdFx0cmVzb2x2ZShzdWNjZXNzTWVzc2FnZSk7XG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yTWVzc2FnZSkge1xuXHRcdFx0XHRyZWplY3QoZXJyb3JNZXNzYWdlKTtcblx0XHRcdH0pXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGNsZWFuREJFdmVudHNDYXRlZ29yeShjYXRlZ29yeSkge1xuXHRcdC8vZGVjbGFyIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdC8vcmVtb3ZlICd1cGRhdGVkJyBvYmplY3QgaWYgbmVlZCBiZVxuXHRcdC8vZGIgY2FsbCBzbyByZXR1cm4gYSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly9jaGVjayBmb3Igb2JqZWN0XG5cdFx0XHRkYi50aGVyZVdhc0FuVXBkYXRlRmllbGQoY2F0ZWdvcnksIGdldFVJRExvY2FsbHkoKSlcblx0XHRcdC50aGVuKGZ1bmN0aW9uKGFmZmlybWF0aXZlUmVzcG9uc2UpIHtcblx0XHRcdFx0Ly9pZiB0aGVyZSB3YXMgYW4gdXBkYXRlIGZpZWxkLCBkZWxldGUgaXRcblx0XHRcdFx0ZGIuZGVsZXRlVXBkYXRlRmllbGQoY2F0ZWdvcnksIGdldFVJRExvY2FsbHkoKSlcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24oYWZmaXJtYXRpdmVSZXNwb25zZSkgeyAkbG9nLmluZm8oYWZmaXJtYXRpdmVSZXNwb25zZSk7IH0gKVxuXHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3JSZXNwb25zZSkgeyAkbG9nLmluZm8oZXJyb3JSZXNwb25zZSk7IH0gKVxuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvclJlc3BvbnNlKSB7XG5cdFx0XHRcdCRsb2cuaW5mbyhlcnJvclJlc3BvbnNlKVxuXHRcdFx0fSlcblxuXHRcdH0pO1xuXHRcdC8vaWYgaXQgaXMgdGhlcmUsIHJlbW92ZSBpdFxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0RXZlbnRHdWVzdExpc3QoaG9zdElkLCBldmVudElkKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vZ2V0IHRoZSBvYmplY3Rcblx0XHRcdGRiLmdldEd1ZXN0TGlzdEZvckV2ZW50KGhvc3RJZCwgZXZlbnRJZClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKG9idGFpbmVkTGlzdCkge1xuXHRcdFx0XHRyZXNvbHZlKG9idGFpbmVkTGlzdCk7XG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yUmVzcG9uc2UpIHtcblx0XHRcdFx0cmVqZWN0KGVycm9yUmVzcG9uc2UpO1xuXHRcdFx0fSlcblx0XHR9KVxuXHR9XG5cblx0ZnVuY3Rpb24gcmVtb3ZlSW5jb21wbGV0ZUV2ZW50RnJvbURCKGV2ZW50SWQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0ZGIucmVtb3ZlSW5jb21wbGV0ZUV2ZW50KGN1cnJlbnRVc2VyLmdldFVJRExvY2FsbHksIGV2ZW50SWQpXG5cdFx0XHQudGhlbihmdW5jdGlvbihzdWNjZXNzTWVzc2FnZSl7XG5cdFx0XHRcdHJlc29sdmUoc3VjY2Vzc01lc3NhZ2UpO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvck1lc3NhZ2UpIHtcblx0XHRcdFx0cmVqZWN0KGVycm9yTWVzc2FnZSk7XG5cdFx0XHR9KVxuXHRcdH0pXG5cdH1cblxuXHRmdW5jdGlvbiBsb2FkQmlvKHVpZCkge1xuXG5cdFx0Ly9taWdodCBuZWVkIHRvIGdvIG91dCB0byB0aGUgZGIgc28gcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9jaGVjayBmb3IgYmlvIGxvY2FsbHkgZmlyc3Rcblx0XHRcdGlmKGJpb1ByaW1hcmllc0FyZUNvbXBsZXRlTG9jYWxseSgpKSB7XG5cblx0XHRcdFx0Ly9wYXNzIGl0IGJhY2sgYXMgc3VjY2Vzc1xuXHRcdFx0XHRyZXNvbHZlKGdldEZ1bGxCaW9Mb2NhbGx5KCkpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9pZiB0aGV5J3JlIG5vdCBjb21wbGV0ZSBsb2NhbGx5LCBjaGVjayB0aGUgc2VydmVyXG5cdFx0XHRcdGdldFJlbW90ZUJpb0ZvckxvY2FsKHVpZClcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24oYmlvRnJvbVJlbW90ZURCKSB7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly9zYXZlIHRoZW0gbG9jYWxseSBmaXJzdFxuXHRcdFx0XHRcdHNldFByaW1hcmllc0xvY2FsbHkoYmlvRnJvbVJlbW90ZURCLmVtYWlsLCBiaW9Gcm9tUmVtb3RlREIubmFtZSwgYmlvRnJvbVJlbW90ZURCLnVpZCk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly9yZXR1cm4gdGhlIGZpbmRpbmdzXG5cdFx0XHRcdFx0cmVzb2x2ZShiaW9Gcm9tUmVtb3RlREIpO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0XHR9KVxuXHRcdFx0fVxuXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGxvYWRBbkV2ZW50UHJvZ3Jlc3NpdmVseSh1aWQsIGV2ZW50SWQpIHtcblx0XHQvL3VwZGF0ZSB1aWQgaWYgbmVlZCBiZVxuXHRcdHNldFVJRExvY2FsbHkodWlkKTtcblxuXHRcdC8vZ29pbmcgb3V0IHRoZSB0aGUgZGIgc28gcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9yZWFjaCBvdXQgdG8gZGJcblx0XHRcdGdldE9uZVJlbW90ZUV2ZW50Rm9yTG9jYWwoZXZlbnRJZClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKG9idGFpbmVkVXNlckV2ZW50KSB7XG5cdFx0XHRcdC8vd2hlbiB0aGUgZGIgcmVzdWx0cyBjb21lIGJhY2ssIHJldHVybiBpdFxuXHRcdFx0XHRyZXNvbHZlKG9idGFpbmVkVXNlckV2ZW50KVxuXHRcdFx0fSlcblx0XHRcdC5jYXRjaCgpXG5cblx0XHRcdC8vZmlyc3QgcmV0dXJuIHdoYXRldmVyIGV2ZW50IGluZm8gaXMgc3RvcmVkIGxvY2FsbHlcblx0XHRcdC8vY2hlY2sgaWYgdGhlIGV2ZW50IGlzIGF2YWlsYWJsZSBsb2NhbGx5XG5cdFx0XHRpZihldmVudEV4aXN0c0xvY2FsbHkoJ2hvc3RpbmcnLCBldmVudElkKSkgcmVzb2x2ZShnZXRPbmVVc2VyRXZlbnRMb2NhbGx5KCdob3N0aW5nJywgZXZlbnRJZCkpO1xuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBsb2FkRXZlbnRzUHJvZ3Jlc3NpdmVseSh1aWQpIHtcblx0XHR2YXIgZXZlbnRUeXBlcyA9IFsnYXR0ZW5kaW5nJywgJ3BlbmRpbmcnLCAnaG9zdGluZycsICdjb21wbGV0ZWQnXTtcblx0XHR2YXIgYWxsRXZlbnRzID0ge307XG5cblx0XHQvL3dpbGwgZ28gb3V0IHRvIHRoZSBkYiBzbyByZXR1cm4gYSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHRnZXRSZW1vdGVFdmVudHNGb3JMb2NhbCgpXG5cdFx0XHQudGhlbihmdW5jdGlvbihvYnRhaW5lZFVzZXJFdmVudHMpIHtcblx0XHRcdFx0Ly93aGVuIHRoZSBkYiByZXN1bHRzIGNvbWUgYmFjaywgcmV0dXJuIHRob3NlXG5cdFx0XHRcdHJlc29sdmUob2J0YWluZWRVc2VyRXZlbnRzKTtcblx0XHRcdH0pXG5cblx0XHRcdC8vYnVpbGQgdGhlIGxvY2FsIG1vZGVsXG5cdFx0XHRhbGxFdmVudHMgPSBnZXRVc2VyRXZlbnRzTG9jYWxseSh0eXBlKTtcblxuXHRcdFx0Ly9maXJzdCByZXR1cm4gd2hhdGV2ZXIgZXZlbnQgaW5mbyBpcyBzdG9yZWQgbG9jYWxseVxuXHRcdFx0cmVzb2x2ZShhbGxFdmVudHMpO1xuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBjcmVhdGVOZXdFdmVudChldmVudElEKSB7XG5cdFx0Ly9kZWNsYXIgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXHRcdHZhciBuZXdFdmVudCA9IHt9O1xuXHRcdHZhciBkYXRlVGltZSA9IG5ldyBEYXRlKCk7XG5cdFx0ZGF0ZVRpbWUuc2V0TWludXRlcygwLCAwLCAwKTtcblx0XHR2YXIgdGVtcFRpbWUgPSBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpO1xuXG5cdFx0Ly9maXJzdCBjcmVhdGUgdGhlIG9iamVjdFxuXHRcdG5ld0V2ZW50ID0ge1xuXHRcdFx0aWQ6IGV2ZW50SUQsXG5cdFx0XHRuYW1lOiAnJyxcblx0XHRcdHR5cGU6ICcnLFxuXHRcdFx0aG9zdDoge1xuXHRcdFx0XHRuYW1lOiBjdXJyZW50VXNlci5iaW8ubmFtZSxcblx0XHRcdFx0dWlkOiBjdXJyZW50VXNlci5iaW8udWlkLFxuXHRcdFx0XHRlbWFpbDogY3VycmVudFVzZXIuYmlvLmVtYWlsXG5cdFx0XHR9LFxuXHRcdFx0bWVzc2FnZTogJycsXG5cdFx0XHRldmVudFRpbWVzOiB7XG5cdFx0XHRcdHN0YXJ0OiB0ZW1wVGltZSxcblx0XHRcdFx0ZW5kOiAodGVtcFRpbWUgKyAoNjAqNjAqMTAwMCkpXG5cdFx0XHR9LFxuXHRcdFx0YWRkcmVzczoge1xuXHRcdFx0XHRzdHJlZXQwMTogJycsXG5cdFx0XHRcdHN0cmVldDAyOiAnJyxcblx0XHRcdFx0c3RyZWV0MDM6ICcnLFxuXHRcdFx0XHRjaXR5OiAnJyxcblx0XHRcdFx0c3RhdGU6ICcnLFxuXHRcdFx0XHR6aXA6IDBcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Ly9zYXZlIGl0IGxvY2FsbHlcblx0XHR1cGRhdGVVc2VyRXZlbnRzTG9jYWxseSgnaG9zdGluZycsIG5ld0V2ZW50KTtcblxuXHRcdC8vc2F2ZSBpdCBhcyB0aGUgYWN0aXZlIGV2ZW50XG5cdFx0c2V0QWN0aXZlRXZlbnQobmV3RXZlbnQpO1xuXG5cdFx0Ly90aGVuIGNyZWF0ZSBpdCBvbiB0aGUgc2VydmVyXG5cdFx0Ly93aWxsIGdvIG91dCB0byB0aGUgZGIgc28gcmV0dXJuIGEgcHJvbWlzZVxuXHRcdFxuXHRcdC8qcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XG5cdFx0XHQkbG9nLmluZm8oJ3NhdmVkIGxvY2FsbHksIG5vdCBvbiB0aGUgZGInKTtcblx0XHRcdC8vbWFuYWdlIHRoZSBwcm9taXNlIHJlc3BvbnNlc1xuXHRcdFx0LypkYi5jcmVhdGVIb3N0ZWRFdmVudChnZXRVSURMb2NhbGx5KCksIG5ld0V2ZW50KVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24obWVzc2FnZSkge1xuXHRcdFx0XHRyZXNvbHZlKG1lc3NhZ2UpO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0fSlcblxuXHRcdH0pOyovXG5cblx0fVxuXG5cdGZ1bmN0aW9uIHVwZGF0ZVBlbmRpbmdFdmVudHNMaXN0Rm9yR3Vlc3QoZXZlbnRJZCkge1xuXHRcdC8vZGVjbGFyIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9tYW5hZ2UgdGhlIGRiIHByb21pc2Vcblx0XHRcdC8vZGIuYWRkUGVuZGluZ0V2ZW50Rm9yR3Vlc3QoY3VycmVudFVzZXIuZ2V0VUlETG9jYWxseSgpLCBob3N0SWQsIGV2ZW50SWQsIGN1cnJlbnRVc2VyLmdldFVzZXJFdmVudHNMb2NhbGx5KCcnLCBldmVudElkKSlcblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gc2F2ZU5ld0hvc3RpbmdFdmVudChjYXRlZ29yeSwgZXZlbnQpIHtcblx0XHQvL1xuXHRcdHVwZGF0ZVVzZXJFdmVudHNMb2NhbGx5KGNhdGVnb3J5LCBldmVudCk7XG5cdH1cblx0XG5cdHJldHVybiBhbGxVc2VyRGF0YTtcbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5mYWN0b3J5KCd2YWxpZGF0aW9uJywgdmFsaWRhdGlvbik7XG5cbnZhbGlkYXRpb24uJGluamVjdCA9IFsnJGxvZyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHZhbGlkYXRpb24oJGxvZykge1xuXHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdHZhciBtaW5pbXVtTmFtZUxlbmd0aCA9IDM7XG5cdHZhciBtaW5pbXVtUGFzc0xlbmd0aCA9IDE2O1xuXHR2YXIgbWF4aW11bVBhc3NMZW5ndGggPSAxMDA7XG5cblx0dmFyIGFsbFZhbGlkYXRpb25zID0ge1xuXHRcdHJlcXVpcmVkOiByZXF1aXJlZCxcdFx0XHRcdFx0XHQvL25ldyBVc2VyIHZhbGlkYXRpb25zXG5cdFx0bWluTmFtZUxlbmd0aDogbWluTmFtZUxlbmd0aCxcblx0XHRtaW5QYXNzTGVuZ3RoOiBtaW5QYXNzTGVuZ3RoLFxuXHRcdG1heFBhc3NMZW5ndGg6IG1heFBhc3NMZW5ndGgsXG5cdFx0YXRMZWFzdE9uZVN5bWJvbDogYXRMZWFzdE9uZVN5bWJvbCxcblx0XHRhdExlYXN0T25lTnVtYmVyOiBhdExlYXN0T25lTnVtYmVyLFxuXHRcdGF0TGVhc3RPbmVMb3dlcmNhc2U6IGF0TGVhc3RPbmVMb3dlcmNhc2UsXG5cdFx0YXRMZWFzdE9uZVVwcGVyY2FzZTogYXRMZWFzdE9uZVVwcGVyY2FzZSxcblx0XHRpbGxlZ2FsQ2hhcmFjdGVyOiBpbGxlZ2FsQ2hhcmFjdGVyLFxuXHRcdGVtYWlsOiBlbWFpbCxcblx0XHRkYXRlT2ZCaXJ0aDogZGF0ZU9mQmlydGgsXG5cblx0XHRnZW5lcmF0ZUV2ZW50UmVxdWlybm1lbnRzOiBnZW5lcmF0ZUV2ZW50UmVxdWlybm1lbnRzLFx0XHQvL2V2ZW50IHJlcXVpcm5tZW50cyBcblx0XHR1cGRhdGVFdmVudFJlcVN0YXR1czogdXBkYXRlRXZlbnRSZXFTdGF0dXMsXG5cdFx0dXBkYXRlRXZlbnRSZXFBZGRyZXNzZWQ6IHVwZGF0ZUV2ZW50UmVxQWRkcmVzc2VkLFxuXHRcdHVwZGF0ZUV2ZW50UmVxQ2xhc3M6IHVwZGF0ZUV2ZW50UmVxQ2xhc3Ncblx0fTtcblxuXHRmdW5jdGlvbiByZXF1aXJlZCh2YWx1ZSkge1xuXHRcdGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQodmFsdWUpKSB7XG5cdFx0XHRyZXR1cm4gJ1RoaXMgaXMgYSByZXF1aXJlZCBmaWVsZCc7XG5cdFx0fSBcblx0fVxuXG5cdGZ1bmN0aW9uIG1pbk5hbWVMZW5ndGgodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdGlmKHZhbHVlLmxlbmd0aCA8IG1pbmltdW1OYW1lTGVuZ3RoKSByZXR1cm4gKCdOYW1lIHNob3VsZCBiZSBhdCBsZWFzdCAnICsgbWluaW11bU5hbWVMZW5ndGggKyAnIGNoYXJhY3RlcnMnKTtcblx0XHR9IFxuXHR9XG5cblx0ZnVuY3Rpb24gbWluUGFzc0xlbmd0aCh2YWx1ZSkge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0aWYoISh2YWx1ZS5sZW5ndGggPCBtaW5pbXVtUGFzc0xlbmd0aCkpIHJldHVybiB0cnVlO1xuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRmdW5jdGlvbiBtYXhQYXNzTGVuZ3RoKHZhbHVlKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHRpZighKHZhbHVlLmxlbmd0aCA+IG1heGltdW1QYXNzTGVuZ3RoKSkgcmV0dXJuIHRydWU7XG5cdFx0fSBcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRmdW5jdGlvbiBhdExlYXN0T25lU3ltYm9sKHZhbHVlKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHQvLyBidWlsZCByZWdleFxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW1xcIVxcQFxcI1xcJFxcJVxcXlxcJlxcKl1cIik7XG5cblx0XHRcdC8vY2hlY2sgY29uc3RyYXRpbnRcblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2YWx1ZSkpIHtcblx0XHRcdFx0Ly9zdWNjZXNzOiBhdCBsZWFzdCBvbmUgc3BlY2lhbCBjaGFyYWN0ZXIgZm91bmRcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2ZhaWx1cmU6IGRpZG4ndCBmaW5kIGFueSBzcGNpYWwgY2hhcmFjdGVyc1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0ZnVuY3Rpb24gYXRMZWFzdE9uZU51bWJlcih2YWx1ZSkge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0Ly8gYnVpbGQgcmVnZXhcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIlswLTldXCIsIFwiXCIpO1xuXG5cdFx0XHQvL2NoZWNrIGNvbnN0cmF0aW50XG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3QodmFsdWUpKSB7XG5cdFx0XHRcdC8vc3VjY2VzczogYXQgbGVhc3Qgb25lIHNwZWNpYWwgY2hhcmFjdGVyIGZvdW5kXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9mYWlsdXJlOiBkaWRuJ3QgZmluZCBhbnkgc3BjaWFsIGNoYXJhY3RlcnNcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG4gICAgZnVuY3Rpb24gYXRMZWFzdE9uZUxvd2VyY2FzZSh2YWx1ZSkge1xuICAgIFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHQvLyBidWlsZCByZWdleFxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW2Etel1cIiwgXCJcIik7XG5cblx0XHRcdC8vY2hlY2sgY29uc3RyYXRpbnRcblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2YWx1ZSkpIHtcblx0XHRcdFx0Ly9zdWNjZXNzOiBhdCBsZWFzdCBvbmUgc3BlY2lhbCBjaGFyYWN0ZXIgZm91bmRcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2ZhaWx1cmU6IGRpZG4ndCBmaW5kIGFueSBzcGNpYWwgY2hhcmFjdGVyc1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGF0TGVhc3RPbmVVcHBlcmNhc2UodmFsdWUpIHtcbiAgICBcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0Ly8gYnVpbGQgcmVnZXhcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIltBLVpdXCIsIFwiXCIpO1xuXG5cdFx0XHQvL2NoZWNrIGNvbnN0cmF0aW50XG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3QodmFsdWUpKSB7XG5cdFx0XHRcdC8vc3VjY2VzczogYXQgbGVhc3Qgb25lIHNwZWNpYWwgY2hhcmFjdGVyIGZvdW5kXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9mYWlsdXJlOiBkaWRuJ3QgZmluZCBhbnkgc3BjaWFsIGNoYXJhY3RlcnNcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbGxlZ2FsQ2hhcmFjdGVyKHZhbHVlKSB7XG4gICAgXHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdC8vIGJ1aWxkIHJlZ2V4XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbXkEtejAtOVxcIVxcQFxcI1xcJFxcJVxcXlxcJlxcKl1cIiwgXCJcIik7XG5cblx0XHRcdC8vY2hlY2sgY29uc3RyYXRpbnRcblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2YWx1ZSkpIHtcblx0XHRcdFx0Ly9zdWNjZXNzOiBhdCBsZWFzdCBvbmUgc3BlY2lhbCBjaGFyYWN0ZXIgZm91bmRcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9mYWlsdXJlOiBkaWRuJ3QgZmluZCBhbnkgc3BjaWFsIGNoYXJhY3RlcnNcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiBlbWFpbCh2YWx1ZSkge1xuICAgIFx0Ly9kZWZpbmUgY29uc3RyYWludHNcbiAgICBcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSsoPzpcXC5bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKSpAKD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1xcLikrW2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1wiLCBcIlwiKTtcbiAgICBcdFxuICAgIFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpICYmICFjb25zdHJhaW50LnRlc3QodmFsdWUpKSB7XG4gICAgXHRcdHJldHVybiAnTm90IGEgdmFsaWQgZW1haWwnO1xuICAgIFx0fVxuICAgIFx0Ly9pZighY29uc3RyYWludC50ZXN0KHZhbHVlKSkgcmV0dXJuICdOb3QgYSB2YWxpZCBlLW1haWwgYWRkcmVzcydcbiAgICBcdFxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRhdGVPZkJpcnRoKHZhbHVlKSB7fVxuXG4gICAgZnVuY3Rpb24gZ2VuZXJhdGVFdmVudFJlcXVpcm5tZW50cygpIHtcbiAgICBcdC8vYnVpbGQgdGhlIG9iamVjdCBhbmQgcmV0dXJuIGl0XG4gICAgXHR2YXIgZXZlbnRWYWxpZGF0aW9ucyA9IHtcbiAgICBcdFx0ZXZlbnROYW1lOiB7IFxuICAgIFx0XHRcdGNvbXBsZXRlZCA6ZmFsc2UsIFxuICAgIFx0XHRcdGFkZHJlc3NlZDpmYWxzZSwgXG4gICAgXHRcdFx0cm93OiB7XG4gICAgXHRcdFx0XHRjbGFzczoge1xuICAgIFx0XHRcdFx0XHQnY29sLXhzLTEyJzogdHJ1ZSxcbiAgICBcdFx0XHRcdFx0J2NvbC1zbS0xMic6IHRydWUsXG4gICAgXHRcdFx0XHRcdCdmb3JtLWdyb3VwJzogdHJ1ZSxcbiAgICBcdFx0XHRcdFx0J2hhcy1zdWNjZXNzJzogZmFsc2UsXG4gICAgXHRcdFx0XHRcdCdoYXMtZXJyb3InOiBmYWxzZVxuICAgIFx0XHRcdFx0fVxuICAgIFx0XHRcdH0sXG4gICAgXHRcdFx0bGFiZWw6IHtcbiAgICBcdFx0XHRcdGNsYXNzOiB7XG4gICAgXHRcdFx0XHRcdCdjb250cm9sLWxhYmVsJzogdHJ1ZVxuICAgIFx0XHRcdFx0fVxuICAgIFx0XHRcdH0sXG4gICAgXHRcdFx0aW5wdXQ6IHtcbiAgICBcdFx0XHRcdGNsYXNzOiB7XG4gICAgXHRcdFx0XHRcdCdmb3JtLWNvbnRyb2wnOiB0cnVlXG4gICAgXHRcdFx0XHR9XG4gICAgXHRcdFx0fVxuICAgIFx0XHR9LFxuXHRcdFx0ZXZlbnRIb3N0OiB7IGNvbXBsZXRlZCA6ZmFsc2UsIGFkZHJlc3NlZDpmYWxzZSwgcm93OiB7IGNsYXNzOiB7J2NvbC14cy0xMic6IHRydWUsICdjb2wtc20tMTInOiB0cnVlLCAnZm9ybS1ncm91cCc6IHRydWUsICdoYXMtc3VjY2Vzcyc6IGZhbHNlLCAnaGFzLWVycm9yJzogZmFsc2UgfSB9LCBsYWJlbDogeyBjbGFzczogeyAnY29udHJvbC1sYWJlbCc6IHRydWUgfSB9LCBpbnB1dDogeyBjbGFzczogeyAnZm9ybS1jb250cm9sJzogdHJ1ZSB9IH0gfSxcblx0XHRcdGV2ZW50U3RhcnQ6IHsgY29tcGxldGVkIDpmYWxzZSwgYWRkcmVzc2VkOmZhbHNlLCByb3c6IHsgY2xhc3M6IHsnY29sLXhzLTEyJzogdHJ1ZSwgJ2NvbC1zbS0xMic6IHRydWUsICdmb3JtLWdyb3VwJzogdHJ1ZSwgJ2hhcy1zdWNjZXNzJzogZmFsc2UsICdoYXMtZXJyb3InOiBmYWxzZSB9IH0sIGxhYmVsOiB7IGNsYXNzOiB7ICdjb250cm9sLWxhYmVsJzogdHJ1ZSB9IH0sIGlucHV0OiB7IGNsYXNzOiB7ICdmb3JtLWNvbnRyb2wnOiB0cnVlIH0gfSB9LFxuXHRcdFx0ZXZlbnRFbmQ6IHsgY29tcGxldGVkIDpmYWxzZSwgYWRkcmVzc2VkOmZhbHNlLCByb3c6IHsgY2xhc3M6IHsnY29sLXhzLTEyJzogdHJ1ZSwgJ2NvbC1zbS0xMic6IHRydWUsICdmb3JtLWdyb3VwJzogdHJ1ZSwgJ2hhcy1zdWNjZXNzJzogZmFsc2UsICdoYXMtZXJyb3InOiBmYWxzZSB9IH0sIGxhYmVsOiB7IGNsYXNzOiB7ICdjb250cm9sLWxhYmVsJzogdHJ1ZSB9IH0sIGlucHV0OiB7IGNsYXNzOiB7ICdmb3JtLWNvbnRyb2wnOiB0cnVlIH0gfSB9LFxuXHRcdFx0ZXZlbnRTdHJlZXQwMTogeyBjb21wbGV0ZWQgOmZhbHNlLCBhZGRyZXNzZWQ6ZmFsc2UsIHJvdzogeyBjbGFzczogeydjb2wteHMtMTInOiB0cnVlLCAnY29sLXNtLTEyJzogdHJ1ZSwgJ2Zvcm0tZ3JvdXAnOiB0cnVlLCAnaGFzLXN1Y2Nlc3MnOiBmYWxzZSwgJ2hhcy1lcnJvcic6IGZhbHNlIH0gfSwgbGFiZWw6IHsgY2xhc3M6IHsgJ2NvbnRyb2wtbGFiZWwnOiB0cnVlIH0gfSwgaW5wdXQ6IHsgY2xhc3M6IHsgJ2Zvcm0tY29udHJvbCc6IHRydWUgfSB9IH0sXG5cdFx0XHRldmVudENpdHk6IHsgY29tcGxldGVkIDpmYWxzZSwgYWRkcmVzc2VkOmZhbHNlLCByb3c6IHsgY2xhc3M6IHsnY29sLXhzLTEyJzogdHJ1ZSwgJ2NvbC1zbS0xMic6IHRydWUsICdmb3JtLWdyb3VwJzogdHJ1ZSwgJ2hhcy1zdWNjZXNzJzogZmFsc2UsICdoYXMtZXJyb3InOiBmYWxzZSB9IH0sIGxhYmVsOiB7IGNsYXNzOiB7ICdjb250cm9sLWxhYmVsJzogdHJ1ZSB9IH0sIGlucHV0OiB7IGNsYXNzOiB7ICdmb3JtLWNvbnRyb2wnOiB0cnVlIH0gfSB9LFxuXHRcdFx0ZXZlbnRTdGF0ZTogeyBjb21wbGV0ZWQgOmZhbHNlLCBhZGRyZXNzZWQ6ZmFsc2UsIHJvdzogeyBjbGFzczogeydjb2wteHMtMTInOiB0cnVlLCAnY29sLXNtLTEyJzogdHJ1ZSwgJ2Zvcm0tZ3JvdXAnOiB0cnVlLCAnaGFzLXN1Y2Nlc3MnOiBmYWxzZSwgJ2hhcy1lcnJvcic6IGZhbHNlIH0gfSwgbGFiZWw6IHsgY2xhc3M6IHsgJ2NvbnRyb2wtbGFiZWwnOiB0cnVlIH0gfSwgaW5wdXQ6IHsgY2xhc3M6IHsgJ2Zvcm0tY29udHJvbCc6IHRydWUgfSB9IH0sXG5cdFx0XHRldmVudFppcDogeyBjb21wbGV0ZWQgOmZhbHNlLCBhZGRyZXNzZWQ6ZmFsc2UsIHJvdzogeyBjbGFzczogeydjb2wteHMtMTInOiB0cnVlLCAnY29sLXNtLTEyJzogdHJ1ZSwgJ2Zvcm0tZ3JvdXAnOiB0cnVlLCAnaGFzLXN1Y2Nlc3MnOiBmYWxzZSwgJ2hhcy1lcnJvcic6IGZhbHNlIH0gfSwgbGFiZWw6IHsgY2xhc3M6IHsgJ2NvbnRyb2wtbGFiZWwnOiB0cnVlIH0gfSwgaW5wdXQ6IHsgY2xhc3M6IHsgJ2Zvcm0tY29udHJvbCc6IHRydWUgfSB9IH0sXG5cdFx0XHRldmVudEd1ZXN0OiB7IGNvbXBsZXRlZCA6ZmFsc2UsIGFkZHJlc3NlZDpmYWxzZSwgcm93OiB7IGNsYXNzOiB7J2NvbC14cy0xMic6IHRydWUsICdjb2wtc20tMTInOiB0cnVlLCAnZm9ybS1ncm91cCc6IHRydWUsICdoYXMtc3VjY2Vzcyc6IGZhbHNlLCAnaGFzLWVycm9yJzogZmFsc2UgfSB9LCBsYWJlbDogeyBjbGFzczogeyAnY29udHJvbC1sYWJlbCc6IHRydWUgfSB9LCBpbnB1dDogeyBjbGFzczogeyAnZm9ybS1jb250cm9sJzogdHJ1ZSB9IH0gfVxuICAgIFx0fVxuXG4gICAgXHRyZXR1cm4gZXZlbnRWYWxpZGF0aW9ucztcbiAgICB9XG5cblx0ZnVuY3Rpb24gdXBkYXRlRXZlbnRSZXFTdGF0dXMoKSB7fVxuXHRmdW5jdGlvbiB1cGRhdGVFdmVudFJlcUFkZHJlc3NlZCgpIHt9IFxuXHRmdW5jdGlvbiB1cGRhdGVFdmVudFJlcUNsYXNzKCkge31cblxuXHRyZXR1cm4gYWxsVmFsaWRhdGlvbnM7XG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29uZmlnKGNvbmZpZyk7XG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGNvbmZpZygkcm91dGVQcm92aWRlcikgeyAgIFxuICAgICRyb3V0ZVByb3ZpZGVyXG4gICAgLndoZW4oJy8nLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvbGFuZGluZ1BhZ2UuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ0xhbmRpbmdQYWdlQ29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xuICAgIH0pXG4gICAgLndoZW4oJy9zaWdudXAnLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvbmV3VXNlclNpZ251cC5odG0nLFxuICAgICAgICBjb250cm9sbGVyOiAnTmV3VXNlclNpZ25VcENvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICB9KVxuICAgIC53aGVuKCcvbG9naW4nLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcmVnaXN0ZXJlZFVzZXJMb2dpbi5odG0nLFxuICAgICAgICBjb250cm9sbGVyOiAnUmVnVXNlckxvZ2luQ29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xuICAgIH0pXG4gICAgLndoZW4oJy91c2VySW5mb3JtYXRpb24vOnVpZD8nLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvdXNlckluZm9ybWF0aW9uLmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdVc2VySW5mb3JtYXRpb25Db250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICByZXNvbHZlOiB7IC8qIEBuZ0luamVjdCAqL1xuICAgICAgICAgICAgdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZTogdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZVxuICAgICAgICB9XG4gICAgfSlcbiAgICAud2hlbignL3VzZXJFdmVudHMvOnVpZD8nLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvdXNlckV2ZW50cy5odG0nLFxuICAgICAgICBjb250cm9sbGVyOiAnVXNlckV2ZW50c0NvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgIHJlc29sdmU6IHsgLyogQG5nSW5qZWN0ICovXG4gICAgICAgICAgICB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlOiB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlXG4gICAgICAgIH1cbiAgICB9KVxuICAgIC53aGVuKCcvZXZlbnQvaG9zdC86ZXZlbnRJZC86dWlkLzpzZWN0aW9uJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2hvc3RFdmVudC5odG0nLFxuICAgICAgICBjb250cm9sbGVyOiAnSG9zdEV2ZW50Q29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgcmVzb2x2ZTogeyAvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgICAgIHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2U6IHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2UsXG4gICAgICAgIH1cbiAgICB9KVxuICAgIC53aGVuKCcvZXZlbnQvZ3Vlc3QvOmV2ZW50SWQvOnVpZC86aG9zdElkJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2d1ZXN0RXZlbnQuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ0d1ZXN0RXZlbnRDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICByZXNvbHZlOiB7IC8qIEBuZ0luamVjdCAqL1xuICAgICAgICAgICAgdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZTogdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZSxcbiAgICAgICAgfVxuICAgIH0pXG4gICAgLndoZW4oJy9ldmVudC86ZXZlbnRJZD8vOmhvc3RJZD8vOnVpZD8vOnNlY3Rpb24/Jywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2FuRXZlbnQuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ0FuRXZlbnRDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICByZXNvbHZlOiB7IC8qIEBuZ0luamVjdCAqL1xuICAgICAgICAgICAgdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZTogdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZSxcbiAgICAgICAgICAgIGV2ZW50Vmlld0NoYW5nZXI6IGV2ZW50Vmlld0NoYW5nZXJcbiAgICAgICAgfVxuICAgIH0pXG4gICAgLm90aGVyd2lzZSh7XG4gICAgICAgIHJlZGlyZWN0VG86ICcvJ1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlKGF1dGhTZXJ2aWNlKSB7XG4gICAgYXV0aFNlcnZpY2UuaXNMb2dnZWRJbigpO1xufTtcblxuZnVuY3Rpb24gZXZlbnRWaWV3Q2hhbmdlcih0cmFmZmljVmFsZXQsICRyb3V0ZSkge1xuICAgIHRyYWZmaWNWYWxldC5ldmVudFJvdXRlKCRyb3V0ZS5jdXJyZW50LnBhcmFtcy5ldmVudElkLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm91dGUuY3VycmVudC5wYXJhbXMuaG9zdElkLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm91dGUuY3VycmVudC5wYXJhbXMudWlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyb3V0ZS5jdXJyZW50LnBhcmFtcy5zZWN0aW9uKTtcbn07IiwiXG5jb25maWcuJGluamVjdCA9IFtcIiRyb3V0ZVByb3ZpZGVyXCJdO1xudXNlckF1dGhlbnRpY2F0aW9uU2VydmljZS4kaW5qZWN0ID0gW1wiYXV0aFNlcnZpY2VcIl07XG5ldmVudFZpZXdDaGFuZ2VyLiRpbmplY3QgPSBbXCJ0cmFmZmljVmFsZXRcIiwgXCIkcm91dGVcIl07YW5ndWxhclxuXHQubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcsIFtcblx0XHQnbmdSb3V0ZScsXG5cdFx0J25nVG91Y2gnLFxuXHRcdCdmaXJlYmFzZSdcblx0XSk7XG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdBbkV2ZW50Q29udHJvbGxlcicsIEFuRXZlbnRDb250cm9sbGVyKTtcblxuQW5FdmVudENvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICckcm91dGVQYXJhbXMnLCBdO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIEFuRXZlbnRDb250cm9sbGVyKCRsb2csICRyb3V0ZVBhcmFtcykge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHRcblx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0dm0udGVtcFRpbWUgPSB7c3RhcnQ6ICcnLCBlbmQ6ICcnfTtcblx0dm0udXNlcklzSG9zdCA9IGZhbHNlO1xuXG5cblx0Ly9Mb2NhbCBNZXRob2RzXG5cdGZ1bmN0aW9uIGluaXQoKSB7XG5cdFx0Ly9kZWNsYXJlIGFuZCBpbml0aWFsaXplIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZtLnRlbXBEYXRlVGltZSA9IHtzdGFydDogJycsIGVuZDogJyd9O1xuXHRcdHZtLm5ld0d1ZXN0ID0ge25hbWU6ICcnLCBlbWFpbDp7YWRkcmVzczonJywgdmFsaWQ6ZmFsc2UsIHN0eWxlOntjb2xvcjonJ319fTtcblx0XHR2bS5zaG93SWZIb3N0ID0gZmFsc2U7XG5cdFx0dm0uaGlkZUlmQXR0ZW5kaW5nID0gdHJ1ZTtcblx0XHQvL3NlY3Rpb25zXG5cdFx0dm0ubWFuYWdlU2VjdGlvbnMgPSB7XG5cdFx0XHQxOiB7YWN0aXZlOiB0cnVlLCBjb21wbGV0ZTogZmFsc2UsIHN0eWxlOntjb2xvcjonYmxhY2snLCAnYmFja2dyb3VuZC1jb2xvcic6J3llbGxvdyd9fSxcblx0XHRcdDI6IHthY3RpdmU6IGZhbHNlLCBjb21wbGV0ZTogZmFsc2UsIHN0eWxlOntjb2xvcjond2hpdGUnLCAnYmFja2dyb3VuZC1jb2xvcic6J2dyYXknfX0sXG5cdFx0XHQzOiB7YWN0aXZlOiBmYWxzZSwgY29tcGxldGU6IGZhbHNlLCBzdHlsZTp7Y29sb3I6J3doaXRlJywgJ2JhY2tncm91bmQtY29sb3InOidncmF5J319XG5cdFx0fTtcblxuXHRcdC8vY2hlY2sgdXNlciB0byBkZXRlcm1pbmUgc3RhdGVcblx0XHRjaGVja0Zvckhvc3QoKTtcblx0XHRjaGVja0lmR3Vlc3RJc0F0dGVuZGluZygpO1xuXG5cdFx0Ly9vcGVuIHVwIHNlY3Rpb25zXG5cdFx0aWYoIXZtLnNob3dJZkhvc3QpIG9wZW5BbGxTZWN0aW9ucygpO1xuXHR9XG5cblx0ZnVuY3Rpb24gdXRmOF90b19iNjQoc3RyKSB7XG5cdFx0cmV0dXJuIGJ0b2Eoc3RyKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGI2NF90b191dGY4KHN0cikge1xuICAgIFx0cmV0dXJuIGF0b2Ioc3RyKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNsZWFuTmV3R3Vlc3RWYXJpYWJsZSgpIHtcblx0XHR2bS5uZXdHdWVzdCA9IHtuYW1lOiAnJywgZW1haWw6e2FkZHJlc3M6JycsIHZhbGlkOmZhbHNlLCBzdHlsZTp7Y29sb3I6Jyd9fX07XG5cdH1cblxuXHRmdW5jdGlvbiBpbnZpdGVBUmVnaXN0ZXJlZFVzZXIodWlkKSB7XG5cdFx0JGxvZy5pbmZvKCdhZGRpbmcgdGhlbSB0byB0aGUgcmVnaXN0ZXJlZCB1c2VycyBsaXN0ICcgKyB1aWQpO1xuXHRcdC8vc2V0IHRoZSBuZXcgZXZlbnRcblx0XHRyZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ3BlbmRpbmcnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS5jaGlsZCgkcm91dGVQYXJhbXMuZXZlbnRJZCkuc2V0KHtcblx0XHRcdGlkOiAkcm91dGVQYXJhbXMuZXZlbnRJZCxcblx0XHRcdGV2ZW50VGltZXM6IHtcblx0XHRcdFx0c3RhcnQ6IHZtLmV2ZW50LmV2ZW50VGltZXMuc3RhcnQsXG5cdFx0XHRcdGVuZDogdm0uZXZlbnQuZXZlbnRUaW1lcy5lbmRcblx0XHRcdH0sXG5cdFx0XHRuYW1lOiB2bS5ldmVudC5uYW1lLFxuXHRcdFx0aG9zdDogJHJvdXRlUGFyYW1zLnVpZFxuXHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKCd0aGVyZSB3YXMgYW4gZXJyb3InICsgZXJyb3IpO1xuXHRcdH0pO1xuXHRcdC8vaWYgdGhlcmUgd2FzIGFuIHVwZGF0ZWQgcGxhY2UgaG9sZGVyLCByZW1vdmUgaXRcblx0XHRyZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ3BlbmRpbmcnKS5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHR2YXIgY2hlY2tGb3JQbGFjZWhvbGRlciA9IHNuYXBzaG90LnZhbCgpXG5cdFx0XHQkbG9nLmluZm8oc25hcHNob3QudmFsKCkpO1xuXG5cdFx0XHRpZihjaGVja0ZvclBsYWNlaG9sZGVyLnVwZGF0ZWQpIHtcblx0XHRcdFx0JGxvZy5pbmZvKCdkZWxldGluZyB1cGRhdGVkJyk7XG5cdFx0XHRcdHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgncGVuZGluZycpLmNoaWxkKCd1cGRhdGVkJykucmVtb3ZlKGZ1bmN0aW9uKGVycm9yT2JqZWN0KSB7XG5cdFx0XHRcdFx0aWYoZXJyb3JPYmplY3QpICRsb2cuaW5mbyhcIkRlbGV0aW5nIGZhaWxlZDogXCIgKyBlcnJvck9iamVjdC5jb2RlKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2UgJGxvZy5pbmZvKCdub3RoaW5nIHRvIGRvJyk7XG5cblx0XHR9LCBmdW5jdGlvbihlcnJvck9iamVjdCkge1xuXHRcdFx0aWYoZXJyb3JPYmplY3QpICRsb2cuaW5mbyhcIlRoZSByZWFkIGZhaWxlZDogXCIgKyBlcnJvck9iamVjdC5jb2RlKTtcblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGludml0ZUFuVW5yZWdpc3RlcmVkVXNlcih1c2VyS2V5KSB7XG5cdFx0JGxvZy5pbmZvKCdhZGRpbmcgdGhlbSB0byB0aGUgVU5SRUdJU1RFUkVEIHVzZXJzIGxpc3QgJyArIHVzZXJLZXkpO1xuXHRcdHJlZi5jaGlsZCgnVW5yZWdpc3RlcmVkVXNlcnMnKS5jaGlsZCh1c2VyS2V5KS5jaGlsZCgncGVuZGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ldmVudElkKS5zZXQoe1xuXHRcdFx0aWQ6ICRyb3V0ZVBhcmFtcy5ldmVudElkLFxuXHRcdFx0aG9zdDogJHJvdXRlUGFyYW1zLnVpZCxcblx0XHRcdGV2ZW50VGltZXM6IHtcblx0XHRcdFx0c3RhcnQ6IHZtLmV2ZW50LmV2ZW50VGltZXMuc3RhcnQsXG5cdFx0XHRcdGVuZDogdm0uZXZlbnQuZXZlbnRUaW1lcy5lbmRcblx0XHRcdH0sXG5cdFx0XHRuYW1lOiB2bS5ldmVudC5uYW1lXG5cdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oJ3RoZXJlIHdhcyBhbiBlcnJvcicgKyBlcnJvcik7XG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBjaGVja0Zvckhvc3QoKSB7XG5cdFx0Ly9jaGVjayBldmVudCBob3N0XG5cdFx0dmFyIGF1dGhEYXRhID0gcmVmLmdldEF1dGgoKTtcblxuXHRcdGlmKGF1dGhEYXRhLnVpZCA9PSAkcm91dGVQYXJhbXMuaG9zdElkKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2lzIHRoZSBob3N0Jyk7XG5cdFx0XHR2bS5zaG93SWZIb3N0ID0gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JGxvZy5pbmZvKCdub3QgdGhlIGhvc3QnKTtcblx0XHRcdHZtLnNob3dJZkhvc3QgPSBmYWxzZTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBjaGVja0lmR3Vlc3RJc0F0dGVuZGluZygpIHtcblx0XHRpZighdm0uc2hvd0lmSG9zdCkge1xuXHRcdFx0JGxvZy5pbmZvKCdjaGVjayBndWVzdCBhdHRlbmRhbmNlJyk7XG5cdFx0XHR1c2VyRXZlbnRzLmNoaWxkKCdndWVzdExpc3QnKS5vbigndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0XHR2YXIgYWxsR3Vlc3RzID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHRcdHZtLmhpZGVJZkF0dGVuZGluZyA9ICFhbGxHdWVzdHNbJHJvdXRlUGFyYW1zLnVpZF0uYXR0ZW5kaW5nO1xuXHRcdFx0XHRcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIG9wZW5BbGxTZWN0aW9ucygpIHtcblx0XHR2bS5tYW5hZ2VTZWN0aW9uc1sxXS5hY3RpdmUgPSB0cnVlO1xuXHRcdHZtLm1hbmFnZVNlY3Rpb25zWzJdLmFjdGl2ZSA9IHRydWU7XG5cdFx0dm0ubWFuYWdlU2VjdGlvbnNbM10uYWN0aXZlID0gdHJ1ZTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNhdmVFdmVudCgpIHtcblx0XHR2bS5ldmVudC4kc2F2ZSgpLnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2V2ZW50IHNhdmVkJyk7XG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdCRsb2cuaW5mbygnZXJyb3IhICcgKyBlcnJvcik7XG5cdFx0fSk7XG5cdH1cblxuXHQvL3ZpZXcgTWV0aG9kXG5cdHZtLnNldFRlbXBUaW1lID0gZnVuY3Rpb24oZW5kcG9pbnQpIHtcblx0XHRpZihlbmRwb2ludCA9PSAnc3RhcnQnKSB2bS50ZW1wRGF0ZVRpbWUuc3RhcnQgPSBuZXcgRGF0ZSgpO1xuXHRcdGlmKGVuZHBvaW50ID09ICdlbmQnKSB2bS50ZW1wRGF0ZVRpbWUuZW5kID0gbmV3IERhdGUoKTtcblx0fVxuXG5cdHZtLnVuaXhUaW1lVG9EYXRlVGltZSA9IGZ1bmN0aW9uICh1bml4VGltZSkge1xuXHRcdHJldHVybiBuZXcgRGF0ZShwYXJzZUludCh1bml4VGltZSkpO1xuXHR9O1xuXG5cdHZtLmRhdGVUaW1lVG9Vbml4VGltZSA9IGZ1bmN0aW9uIChkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fTtcblxuXHR2bS5zdWJtaXQgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9nLmluZm8oJ3N1Ym1pdHRpbmcgdGhlIGZvcm0gbm93IScpO1xuXHR9XG5cblx0dm0uYmFja1RvVXNlckV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2NhdGlvbi5wYXRoKCcvdXNlckV2ZW50cy8nICsgJHJvdXRlUGFyYW1zLnVpZCArICcvJyArICRyb3V0ZVBhcmFtcy50b2tlbik7XG5cdH1cblxuXHR2bS5ldmVudFJlZGlyZWN0ID0gZnVuY3Rpb24ocGF0aCwgZXZlbnRJRCkge1xuXHRcdHZhciBmdWxsUGF0aCA9IHBhdGggKyAnLycgKyAkcm91dGVQYXJhbXMudWlkICsgJy8nICsgJHJvdXRlUGFyYW1zLnRva2VuO1xuXHRcdC8vcmVkaXJlY3Rcblx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIHRvOiAnICsgZnVsbFBhdGgpO1xuXHRcdCRsb2NhdGlvbi5wYXRoKGZ1bGxQYXRoKTtcblx0fVxuXG5cdHZtLmNoYW5nZVNlY3Rpb24gPSBmdW5jdGlvbih0YXJnZXRTZWN0aW9uKSB7XG5cdFx0JGxvZy5pbmZvKCdhcmUgd2UgaGVyZScpO1xuXHRcdGZvcihpID0gMTsgaSA8PTM7IGkrKykge1xuXHRcdFx0aWYoaT09dGFyZ2V0U2VjdGlvbikge1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5hY3RpdmUgPSB0cnVlO1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5zdHlsZVsnYmFja2dyb3VuZC1jb2xvciddID0neWVsbG93Jztcblx0XHRcdFx0dm0ubWFuYWdlU2VjdGlvbnNbaV0uc3R5bGVbJ2NvbG9yJ10gPSdibGFjayc7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5hY3RpdmUgPSBmYWxzZTtcblx0XHRcdFx0dm0ubWFuYWdlU2VjdGlvbnNbaV0uc3R5bGVbJ2JhY2tncm91bmQtY29sb3InXSA9J2dyYXknO1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5zdHlsZVsnY29sb3InXSA9J3doaXRlJztcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHR2bS5zYXZlRXZlbnRUaW1lID0gZnVuY3Rpb24oZGF0ZVRpbWUsIHRhcmdldCkge1xuXHRcdC8vaWYgdGhpcyBldmVudCBkaWRuJ3QgaGF2ZSBhIHN0YXJ0IHRpbWUsIGNyZWF0ZSBpdFxuXHRcdGlmKCF2bS5ldmVudC5ldmVudFRpbWVzKSB7IFxuXHRcdFx0dm0uZXZlbnQuZXZlbnRUaW1lcyA9IHtzdGFydDogJycsIGVuZDogJyd9O1xuXHRcdFx0dm0uZXZlbnQuZXZlbnRUaW1lcy5zdGFydCA9IHZtLmRhdGVUaW1lVG9Vbml4VGltZSh2bS50ZW1wRGF0ZVRpbWUuc3RhcnQpOyBcblx0XHRcdHZtLmV2ZW50LmV2ZW50VGltZXMuZW5kID0gdm0uZGF0ZVRpbWVUb1VuaXhUaW1lKHZtLnRlbXBEYXRlVGltZS5lbmQpO1xuXHRcdH1cblxuXHRcdGlmKCh2bS50ZW1wRGF0ZVRpbWUuZW5kIDwgdm0udGVtcERhdGVUaW1lLnN0YXJ0KSAmJiB0YXJnZXQgPT0gJ3N0YXJ0Jykgdm0udGVtcERhdGVUaW1lLmVuZCA9IHZtLnRlbXBEYXRlVGltZS5zdGFydDtcblx0XHRpZih0YXJnZXQgPT0gJ3N0YXJ0Jykgdm0uZXZlbnQuZXZlbnRUaW1lcy5zdGFydCA9IHZtLmRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSk7XG5cdFx0aWYodGFyZ2V0ID09ICdlbmQnKSB2bS5ldmVudC5ldmVudFRpbWVzLmVuZCA9IHZtLmRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSk7XG5cdH1cblxuXHR2bS5ndWVzdHNBcmVJbnZpdGVkID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodm0uZXZlbnQuZ3Vlc3RMaXN0KSByZXR1cm4gdHJ1ZTtcblx0XHRlbHNlIHJldHVybiBmYWxzZTtcblx0fVxuXG5cdHZtLnZhbGlkYXRlR3Vlc3RFbWFpbCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vaWYgdGhlcmUgaXMgYW4gZW1haWwgYWRkcmVzc1xuXHRcdGlmKHZtLm5ld0d1ZXN0LmVtYWlsLmFkZHJlc3MpIHtcblx0XHRcdC8vY2hlY2sgdmFsaWRpdHlcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSsoPzpcXC5bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKSpAKD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1xcLikrW2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1wiLCBcIlwiKTtcblxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZtLm5ld0d1ZXN0LmVtYWlsLmFkZHJlc3MpKSB7XG5cdFx0XHRcdHZtLm5ld0d1ZXN0LmVtYWlsLnZhbGlkID0gdHJ1ZTtcblx0XHRcdFx0dm0ubmV3R3Vlc3QuZW1haWwuc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS5uZXdHdWVzdC5lbWFpbC52YWxpZCA9IGZhbHNlO1xuXHRcdFx0XHR2bS5uZXdHdWVzdC5lbWFpbC5zdHlsZSA9IHtjb2xvcjonJ307XG5cdFx0XHR9XHRcdFx0XG5cdFx0fVxuXHR9XG5cblx0dm0uaXNTZWN0aW9uQ29tcGxldGUgPSBmdW5jdGlvbigpIHtcblx0XHRmb3IoaT0wO2k8ODtpKyspIHtcblx0XHRcdCRsb2cuaW5mbyh2bS5yZXF1aXJlZElucHV0c1tpXSk7XG5cdFx0fVxuXHR9XG5cblx0dm0uc2F2ZUFuZEFkdmFuY2UgPSBmdW5jdGlvbigpIHtcblx0XHR2bS5ldmVudC4kc2F2ZSgpLnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2V2ZW50IHNhdmVkJyk7XG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdCRsb2cuaW5mbygnZXJyb3IhICcgKyBlcnJvcik7XG5cdFx0fSk7XG5cblx0XHQvL2NoZWNrIGZvciBjb21wbGV0ZW5lc1xuXHRcdHZtLmlzU2VjdGlvbkNvbXBsZXRlKCk7XG5cblx0XHRpZih2bS5tYW5hZ2VTZWN0aW9uc1sxXS5jb21wbGV0ZSA9PSB0cnVlICYmIHZtLm1hbmFnZVNlY3Rpb25zWzJdLmNvbXBsZXRlID09IHRydWUgJiYgdm0ubWFuYWdlU2VjdGlvbnNbM10uY29tcGxldGUgPT0gdHJ1ZSkge1xuXHRcdFx0dm0uZXZlbnRSZWRpcmVjdCgnL3VzZXJFdmVudHMnLCAkcm91dGVQYXJhbXMudWlkKTtcblx0XHR9IGVsc2UgaWYgKHZtLm1hbmFnZVNlY3Rpb25zWzFdLmFjdGl2ZSkgdm0uY2hhbmdlU2VjdGlvbigyKTtcblx0XHRlbHNlIGlmICh2bS5tYW5hZ2VTZWN0aW9uc1syXS5hY3RpdmUpIHZtLmNoYW5nZVNlY3Rpb24oMyk7XG5cdFx0ZWxzZSBpZiAodm0ubWFuYWdlU2VjdGlvbnNbM10uYWN0aXZlKSB2bS5jaGFuZ2VTZWN0aW9uKDEpO1xuXHR9XG5cblx0dm0uYWRkR3Vlc3RUb0hvc3RzTGlzdCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vZGVjbGFyZSBhbmQgaW5pdGlhbGl6ZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgdXNlcktleSA9IHV0ZjhfdG9fYjY0KHZtLm5ld0d1ZXN0LmVtYWlsLmFkZHJlc3MpO1xuXG5cdFx0Ly9pZiBlbWFpbCBpcyB2YWxpZCBhbmQgbmFtZSBleGlzdHNcblx0XHRpZiAodm0ubmV3R3Vlc3QubmFtZSAmJiB2bS5uZXdHdWVzdC5lbWFpbC52YWxpZCkge1xuXHRcdFx0Ly9pcyB0aGVyZSBhIGd1ZXN0IGxpc3QgYWxyZWFkeT8gSWYgbm90IGNyZWF0ZSBvbmVcblx0XHRcdGlmKCF2bS5ldmVudC5ndWVzdExpc3QpIHtcblx0XHRcdFx0dm0uZXZlbnQuZ3Vlc3RMaXN0ID0ge307XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2lmIHNvIGlzIHRoaXMgcGVyc29uIGFscmVhZHkgb24gdGhlIGxpc3Q/XG5cdFx0XHRcdHZhciBpID0wO1xuXHRcdFx0XHR3aGlsZSh2bS5ldmVudC5ndWVzdExpc3RbaV0pIHtcblx0XHRcdFx0XHRpZih2bS5ldmVudC5ndWVzdExpc3RbaV0uZW1haWwgPT0gYjY0X3RvX3V0ZjgodXNlcktleSkpIHtcblx0XHRcdFx0XHRcdCRsb2cuaW5mbygnVGhpcyBndWVzdCBpcyBhbHJlYWR5IG9uIHRoZSBsaXN0Jyk7XG5cdFx0XHRcdFx0XHRjbGVhbk5ld0d1ZXN0VmFyaWFibGUoKTtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aSsrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vaXMgdGhpcyBndWVzdCBhIHJlZ2lzdGVyZWQgdXNlcj9cblx0XHRcdGlmKHJlZ2lzdGVyZWRVc2Vyc1t1c2VyS2V5XSkge1xuXHRcdFx0XHQvL2lzIHRoZSByZWdpc3RlcmVkIHVzZXIgdGhlIGhvc3Q/XG5cdFx0XHRcdGlmKHJlZ2lzdGVyZWRVc2Vyc1t1c2VyS2V5XSA9PSAkcm91dGVQYXJhbXMudWlkKSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCd0cmllZCB0byByZWdpc3RlciB0aGUgaG9zdCcpO1xuXHRcdFx0XHRcdGNsZWFuTmV3R3Vlc3RWYXJpYWJsZSgpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHQvL2FkZCB0aGVtIHRvIHRoZSBhcHByb3ByaWF0ZSByZWdpc3RlcmVkIHVzZXJzJyBsaXN0IG9mIGV2ZW50IGludml0ZXNcblx0XHRcdFx0XHRpbnZpdGVBUmVnaXN0ZXJlZFVzZXIocmVnaXN0ZXJlZFVzZXJzW3VzZXJLZXldKTtcblxuXHRcdFx0XHRcdC8vYWRkIHRoZSBndWVzdCB0byB0aGUgbGlzdFxuXHRcdFx0XHRcdHZtLmV2ZW50Lmd1ZXN0TGlzdFtyZWdpc3RlcmVkVXNlcnNbdXNlcktleV1dID0ge1xuXHRcdFx0XHRcdFx0YXR0ZW5kaW5nOiBmYWxzZSwgXG5cdFx0XHRcdFx0XHRzdGF0dXM6J3BlbmRpbmcnLCBcblx0XHRcdFx0XHRcdG5hbWU6IHZtLm5ld0d1ZXN0Lm5hbWUsIFxuXHRcdFx0XHRcdFx0ZW1haWw6dm0ubmV3R3Vlc3QuZW1haWwuYWRkcmVzcyxcblx0XHRcdFx0XHR9O1x0XHRcdFx0XHRcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9hZGQgdGhlIGludml0ZSB0byB0aGUgbm9uLXJlZ2lzdGVyZWQgdXNlcnMgbGlzdCBvZiBldmVudCBpbnZpdGVzXG5cdFx0XHRcdGludml0ZUFuVW5yZWdpc3RlcmVkVXNlcih1c2VyS2V5KTtcblxuXHRcdFx0XHQvL2FkZCB0aGUgZ3Vlc3QgdG8gdGhlIGxpc3Rcblx0XHRcdFx0dm0uZXZlbnQuZ3Vlc3RMaXN0W3VzZXJLZXldID0ge1xuXHRcdFx0XHRcdFx0YXR0ZW5kaW5nOiBmYWxzZSwgXG5cdFx0XHRcdFx0XHRzdGF0dXM6J3BlbmRpbmcnLCBcblx0XHRcdFx0XHRcdG5hbWU6IHZtLm5ld0d1ZXN0Lm5hbWUsIFxuXHRcdFx0XHRcdFx0ZW1haWw6dm0ubmV3R3Vlc3QuZW1haWwuYWRkcmVzcyxcblx0XHRcdFx0fTtcblx0XHRcdH1cblxuXG5cdFx0XHQvL3NhdmUgdGhlIGV2ZW50XG5cdFx0XHR2bS5zYXZlRXZlbnQoKTtcblx0XHRcdC8vY2xlYXIgdGhlIHRlbXAgdmFsdWVzXG5cdFx0XHRjbGVhbk5ld0d1ZXN0VmFyaWFibGUoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JGxvZy5pbmZvKCd5b3UgZGlkblxcJ3QgZW50ZXIgYSBuYW1lIGFuZCBvciBlbWFpbCcpO1xuXHRcdH1cblx0fVxuXG5cdHZtLmd1ZXN0V2lsbEF0dGVuZCA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdFx0dmFyIGN1cnJlbnRVc2VyID0gcmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCdldmVudHMnKTtcblx0XHR2YXIgdG90YWxQZW5kaW5nSW52aXRhdGlvbnMgPSAwO1xuXHRcdHZhciByZW1vdmVBdHRlbmRpbmdVcGRhdGVkID0gZmFsc2U7XG5cdFx0XG5cdFx0Ly9jaGFuZ2UgYXR0ZW5kaW5nIHRvIHRydWUgaW4gaG9zdCdzIGd1ZXN0TGlzdFxuXHRcdHZtLmV2ZW50Lmd1ZXN0TGlzdFskcm91dGVQYXJhbXMudWlkXS5hdHRlbmRpbmcgPSByZXNwb25zZTtcblx0XHQvL2NoYW5nZSBzdGF0dXMgdG8gJ2F0dGVuZGluZycgaW4gaG9zdCdzIGd1ZXN0TGlzdFxuXHRcdHZtLmV2ZW50Lmd1ZXN0TGlzdFskcm91dGVQYXJhbXMudWlkXS5zdGF0dXMgPSAnYXR0ZW5kaW5nJztcblx0XHRcblx0XHQvL2dldCB0aGUgaW52aXRhdGlvbiBkZXRhaWxzXG5cdFx0Y3VycmVudFVzZXIuY2hpbGQoJ3BlbmRpbmcnKS5vbigndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFsYmVcblx0XHRcdHZhciBpbnZpdGF0aW9ucyA9IHNuYXBzaG90LnZhbCgpO1xuXHRcdFx0Ly9sb2cgc3RhcnRpbmcgdmFsdWVzXG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnMpO1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdKTtcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9uc1skcm91dGVQYXJhbXMuaG9zdElkXVskcm91dGVQYXJhbXMuZXZlbnRJZF0pO1xuXG5cdFx0XHR2YXIgdGhpc0ludml0YXRpb24gPSBpbnZpdGF0aW9uc1skcm91dGVQYXJhbXMuaG9zdElkXVskcm91dGVQYXJhbXMuZXZlbnRJZF07XG5cdFx0XHRcblx0XHRcdCRsb2cuaW5mbyh0aGlzSW52aXRhdGlvbik7XG5cdFx0XHRcblx0XHRcdC8vY2hlY2sgIyBvZiBpbml2aWF0aW9uc1xuXHRcdFx0Zm9yKGludml0YXRpb24gaW4gaW52aXRhdGlvbnMpIHtcblx0XHRcdFx0dG90YWxQZW5kaW5nSW52aXRhdGlvbnMrKztcblx0XHRcdH1cblxuXHRcdFx0Ly9yZXBvcnQgIyBvZiBpbnZpdGF0aW9uc1xuXHRcdFx0JGxvZy5pbmZvKFwidG90YWwgYXR0ZW5kaW5nOiBcIiArIHRvdGFsUGVuZGluZ0ludml0YXRpb25zKTtcblx0XHRcdFxuXHRcdFx0Ly9hZGQgdGhlIGV2ZW50IHRvIHRoZSBndWVzdCdzIGF0dGVuZGluZyBsaXN0XG5cdFx0XHRpZihyZXNwb25zZSkgY3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ob3N0SWQpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ldmVudElkKS5zZXQodGhpc0ludml0YXRpb24sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oZXJyb3IpO1xuXHRcdFx0fSk7XG5cblx0XHR9KTtcblxuXHRcdC8vaWYgdGhlIHVwZGF0ZWQgcGxhY2Vob2xkZXIgd2FzIG9uIHRoZSBhdHRlbmRpbmcgbGlzdCByZW1vdmUgaXRcblx0XHRjdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykub24oJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgYXR0ZW5kaW5nTGlzdCA9IHNuYXBzaG90LnZhbCgpO1xuXHRcdFx0XG5cdFx0XHQvL3JlcG9ydCBhY3Rpb25zXG5cdFx0XHQkbG9nLmluZm8oJ3RoaXMgaXMgdGhlIGF0dGVuZGluZyBsaXN0Jyk7XG5cdFx0XHQkbG9nLmluZm8oYXR0ZW5kaW5nTGlzdCk7XG5cdFx0XHRcblx0XHRcdC8vdGhyb3cgZmxhZyBmb3IgbGF0ZXJcblx0XHRcdGlmKGF0dGVuZGluZ0xpc3QudXBkYXRlZCkgcmVtb3ZlQXR0ZW5kaW5nVXBkYXRlZCA9IHRydWU7XG5cblx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0Ly9pZiB0aGVyIHdhcyBhbiBlcnJvciByZXBvcnQgaXRcblx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oZXJyb3IpO1xuXHRcdH0pO1xuXG5cdFx0Ly9pZiB0aGlzIGlzIHRoZSBsYXN0IHBlbmRpbmcgZXZlbnQgb24gdGhlIGd1ZXN0J3MgcGVuZGluZyBsaXN0LCBhZGQgdGhlIHVwZGF0ZWQgcGxhY2Vob2xkZXJcblx0XHRpZih0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucyA8IDIpIHtcblx0XHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xuXG5cdFx0XHQvL3JlcGxhY2Ugd2l0aCB1cGRhdGVkIGZpZWxkXG5cdFx0XHRjdXJyZW50VXNlci5jaGlsZCgncGVuZGluZycpLnVwZGF0ZSh7XG5cdFx0XHRcdHVwZGF0ZWQ6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oZXJyb3IpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0Ly9yZW1vdmUgdGhlIGV2ZW50IGZyb20gdGhlIGd1ZXN0J3MgcGVuZGluZyBsaXN0XG5cdFx0Y3VycmVudFVzZXIuY2hpbGQoJ3BlbmRpbmcnKS5jaGlsZCgkcm91dGVQYXJhbXMuaG9zdElkKS5yZW1vdmUoKTtcblxuXHRcdC8vaWYgdGhlcmUgd2FzIGFuIHVwZGF0ZWQgZmllbGQgaW4gYXR0ZW5kaW5nLCByZW1vdmUgaXRcblx0XHRpZihyZW1vdmVBdHRlbmRpbmdVcGRhdGVkKSB7XG5cdFx0XHQkbG9nLmluZm8oJ3JlbW92aW5nIHRoZSB1cGRhdGVkIHBsYWNlaG9sZGVyJyk7XG5cdFx0XHQvL2N1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5jaGlsZCgndXBkYXRlZCcpLnJlbW92ZSgpO1xuXHRcdH1cblxuXHRcdC8vc2F2ZSBjaGFuZ2VzXG5cdFx0dm0uZXZlbnQuJHNhdmUoKTtcblx0fVxuXG5cdHZtLnVwZGF0ZVVwZGF0ZWRQYXJhbSA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBjdXJyZW50VXNlciA9IHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS5jaGlsZCgnZXZlbnRzJyk7XG5cdFx0XG5cdFx0JGxvZy5pbmZvKCd1cGRhdGluZyB0aGUgcGFyYW0nKTtcblx0XHRjdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykub24oJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdCRsb2cuaW5mbyhzbmFwc2hvdC52YWwoKSk7XG5cdFx0fSk7XG5cdFx0Y3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLmNoaWxkKCd1cGRhdGVkJykucmVtb3ZlKCk7XG5cdH1cblxuXHR2bS5hZGRJbnZpdGF0aW9uVG9BdHRlbmRpbmcgPSBmdW5jdGlvbihyZXNwb25zZSkge1xuXHRcdHZhciBjdXJyZW50VXNlciA9IHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS5jaGlsZCgnZXZlbnRzJyk7XG5cdFx0dmFyIHRvdGFsUGVuZGluZ0ludml0YXRpb25zID0gMDtcblxuXHRcdC8vZ2V0IHRoZSBpbnZpdGF0aW9uIGRldGFpbHNcblx0XHRjdXJyZW50VXNlci5jaGlsZCgncGVuZGluZycpLm9uKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWxiZVxuXHRcdFx0dmFyIGludml0YXRpb25zID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHR2YXIgdGhpc0ludml0YXRpb24gPSBpbnZpdGF0aW9uc1skcm91dGVQYXJhbXMuaG9zdElkXVskcm91dGVQYXJhbXMuZXZlbnRJZF07XG5cdFx0XHRcblx0XHRcdC8vbG9nIHN0YXJ0aW5nIHZhbHVlc1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zKTtcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9uc1skcm91dGVQYXJhbXMuaG9zdElkXSk7XG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnNbJHJvdXRlUGFyYW1zLmhvc3RJZF1bJHJvdXRlUGFyYW1zLmV2ZW50SWRdKTtcblx0XHRcdFxuXHRcdFx0Ly9jaGVjayAjIG9mIGluaXZpYXRpb25zXG5cdFx0XHRmb3IoaW52aXRhdGlvbiBpbiBpbnZpdGF0aW9ucykge1xuXHRcdFx0XHR0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucysrO1xuXHRcdFx0fVxuXG5cdFx0XHQvL3JlcG9ydCAjIG9mIGludml0YXRpb25zXG5cdFx0XHQkbG9nLmluZm8oXCJ0b3RhbCBwZW5kaW5nIGludml0YXRpb25zOiBcIiArIHRvdGFsUGVuZGluZ0ludml0YXRpb25zKTtcblx0XHRcdFxuXHRcdFx0JGxvZy5pbmZvKHJlc3BvbnNlKTtcblx0XHRcdC8vYWRkIHRoZSBldmVudCB0byB0aGUgZ3Vlc3QncyBhdHRlbmRpbmcgbGlzdFxuXHRcdFx0aWYocmVzcG9uc2UpIGN1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5jaGlsZCgkcm91dGVQYXJhbXMuaG9zdElkKS5jaGlsZCgkcm91dGVQYXJhbXMuZXZlbnRJZCkuc2V0KHRoaXNJbnZpdGF0aW9uLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKGVycm9yKTtcblx0XHRcdH0pO1xuXG5cblxuXHRcdH0pO1xuXHR9XG5cblx0Ly9zdGFydCBydW5cblx0aW5pdCgpO1xufVxuXG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdHdWVzdEV2ZW50Q29udHJvbGxlcicsIEd1ZXN0RXZlbnRDb250cm9sbGVyKTtcblxuR3Vlc3RFdmVudENvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIEd1ZXN0RXZlbnRDb250cm9sbGVyKCRsb2cpIHtcblx0JGxvZy5pbmZvKCdpbnRvIHRoZSBHdWVzdEV2ZW50Q29udHJvbGxlcicpO1xufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignSG9zdEV2ZW50Q29udHJvbGxlcicsIEhvc3RFdmVudENvbnRyb2xsZXIpO1xuXG5Ib3N0RXZlbnRDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJywgJyRyb3V0ZVBhcmFtcycsICd1c2VyRGF0YScsICd0cmFmZmljVmFsZXQnLCAndmFsaWRhdGlvbiddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIEhvc3RFdmVudENvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCAkcm91dGVQYXJhbXMsIHVzZXJEYXRhLCB0cmFmZmljVmFsZXQsIHZhbGlkYXRpb24pIHtcblx0dmFyIHZtID0gdGhpcztcblx0XG5cdC8vbG9jYWwgdmFyaWFibGVzXG5cdHZhciBob3N0ZWRFdmVudFNoZXJwYSA9IHRyYWZmaWNWYWxldDtcblx0dmFyIHRoaXNFdmVudE1hbmFnZXIgPSB1c2VyRGF0YTtcblx0dmFyIHJlcXVpcm5tZW50c0ZhY3RvcnkgPSB2YWxpZGF0aW9uO1xuXG5cdC8vbG9jYWwgdmFyaWFibGVzXG5cdHZhciBwZXJjZW50Q29tcGxldGUgPSAwO1xuXG5cdC8vdmlldyBtb2RlbCB2YXJpYWJsZXNcblx0dm0uYWN0aXZlU2VjdGlvbiA9IDE7XG5cdHZtLnRlbXBUaW1lID0ge3N0YXJ0OiAnJywgZW5kOiAnJywgZHVyYXRpb246Jyd9O1xuXHR2bS5wcm9ncmVzc0JhciA9IHtcblx0XHRjb21wbGV0ZTogdm0ucGVyY2VudENvbXBsZXRlLFxuXHRcdHN0eWxlOiB7XG5cdFx0XHR3aWR0aDogKHZtLnBlcmNlbnRDb21wbGV0ZSArICclJylcblx0XHR9LFxuXHRcdG1lc3NhZ2U6ICh2bS5wZXJjZW50Q29tcGxldGUgKyAnJScpXG5cdH1cblx0dm0uYWN0aW9uQnRuID0ge1xuXHRcdGRpdjoge1xuXHRcdFx0Y2xhc3M6IHtcblx0XHRcdFx0J2NvbC14cy02JzogdHJ1ZSxcblx0XHRcdFx0J2NvbC1zbS02JzogdHJ1ZSxcblx0XHRcdH1cblx0XHR9LFxuXHRcdGJ0bjoge1xuXHRcdFx0Y2xhc3M6IHtcblx0XHRcdFx0J2J0bic6IHRydWUsXG5cdFx0XHRcdCdidG4tc3VjY2Vzcyc6IGZhbHNlLFxuXHRcdFx0XHQnYnRuLXdhcm5pbmcnOiB0cnVlLFxuXHRcdFx0XHQncHVsbC1yaWdodCc6IHRydWUsXG5cdFx0XHR9LFxuXHRcdFx0bWVzc2FnZTogJ0FkZCBJbmZvJ1xuXHRcdH1cblx0fVxuXHR2bS50ZW1wRXZlbnQgPSB7fTtcblx0dm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlID0gcmVxdWlybm1lbnRzRmFjdG9yeS5nZW5lcmF0ZUV2ZW50UmVxdWlybm1lbnRzKCk7XG5cblx0Ly9sb2NhbCBtZXRob2RzXG5cdGZ1bmN0aW9uIHVuaXhUaW1lVG9EYXRlVGltZSh1bml4VGltZSkge1xuXHRcdHJldHVybiBuZXcgRGF0ZShwYXJzZUludCh1bml4VGltZSkpO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIGRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fTtcblxuXHRmdW5jdGlvbiBjYWxjdWxhdGVEdXJhdGlvbihzdGFydCwgZW5kKSB7XG5cdFx0cmV0dXJuIChkYXRlVGltZVRvVW5peFRpbWUoZW5kKSAtIGRhdGVUaW1lVG9Vbml4VGltZShzdGFydCkpIC8gKDYwKjEwMDApO1xuXHR9XG5cblx0ZnVuY3Rpb24gY2hhbmdlU2F2ZUJ0bihkaXJlY3Rpb24pIHtcblx0XHRpZihkaXJlY3Rpb24gPT0gJ29wZW4nKSB7XG5cdFx0XHR2bS5hY3Rpb25CdG4uYnRuLmNsYXNzWydidG4tc3VjY2VzcyddID0gdHJ1ZTtcblx0XHRcdHZtLmFjdGlvbkJ0bi5idG4uY2xhc3NbJ2J0bi13YXJuaW5nJ10gPSBmYWxzZTtcblx0XHRcdHZtLmFjdGlvbkJ0bi5idG4ubWVzc2FnZSA9ICdTYXZlIEV2ZW50Jztcblx0XHR9IGVsc2UgaWYoZGlyZWN0aW9uID09ICdjbG9zZScpIHtcblx0XHRcdHZtLmFjdGlvbkJ0bi5idG4uY2xhc3NbJ2J0bi1zdWNjZXNzJ10gPSBmYWxzZTtcblx0XHRcdHZtLmFjdGlvbkJ0bi5idG4uY2xhc3NbJ2J0bi13YXJuaW5nJ10gPSB0cnVlO1xuXHRcdFx0dm0uYWN0aW9uQnRuLmJ0bi5tZXNzYWdlID0gJ0FkZCBJbmZvJztcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiB1cGRhdGVQcm9ncmVzc0Jhcih1bml0cykge1xuXHRcdHBlcmNlbnRDb21wbGV0ZSArPSB1bml0cztcblx0XHR2bS5wcm9ncmVzc0Jhci5jb21wbGV0ZSA9IHBlcmNlbnRDb21wbGV0ZTtcblx0XHR2bS5wcm9ncmVzc0Jhci5zdHlsZS53aWR0aCA9IChwZXJjZW50Q29tcGxldGUgKyAnJScpO1xuXHRcdHZtLnByb2dyZXNzQmFyLm1lc3NhZ2UgPSAocGVyY2VudENvbXBsZXRlICsgJyUnKTtcblx0XHRpZihwZXJjZW50Q29tcGxldGUgPiA5OSkgY2hhbmdlU2F2ZUJ0bignb3BlbicpO1x0XG5cdFx0aWYocGVyY2VudENvbXBsZXRlIDwgOTkpIGNoYW5nZVNhdmVCdG4oJ2Nsb3NlJyk7XHRcdFxuXHR9XG5cblx0ZnVuY3Rpb24gaW5pdEV2ZW50VGltZXMoKSB7XG5cdFx0Ly9idWlsZCBuZXcgdGVtcCB0aW1lc1xuXHRcdHZhciBub3cgPSBuZXcgRGF0ZSgpO1xuXG5cdFx0Ly9yb3VuZCB0byB0aGUgbmVhcmVzdCBob3VyLCBjdXQgb2ZmIGFueXRoaW5nIHNtYWxsZXJcblx0XHRub3cuc2V0SG91cnMobm93LmdldEhvdXJzKCkgKyBNYXRoLnJvdW5kKG5vdy5nZXRNaW51dGVzKCkvNjApKTtcblx0XHRub3cuc2V0TWludXRlcygwKTtcblx0XHRub3cuc2V0U2Vjb25kcygwKTtcblx0XHRub3cuc2V0TWlsbGlzZWNvbmRzKDApO1xuXG5cdFx0dm0udGVtcFRpbWUuc3RhcnQgPSBub3c7XG5cdFx0dm0udGVtcFRpbWUuZW5kID0gbm93O1xuXG5cdFx0dm0udGVtcFRpbWUuZHVyYXRpb24gPSBjYWxjdWxhdGVEdXJhdGlvbih2bS50ZW1wVGltZS5zdGFydCwgdm0udGVtcFRpbWUuZW5kKTtcblx0XHRcblx0fVxuXG5cdGZ1bmN0aW9uIHVwZGF0ZVRlbXBUaW1lRnJvbU1vZGVsKCkge1xuXHRcdC8vaWYgc3RhcnQgdGltZXMgYXJlIGF2YWlsYWJsZVxuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZtLnRlbXBFdmVudC5ldmVudFRpbWVzLnN0YXJ0KSkge1xuXHRcdFx0Ly9zZXQgdGhlIHRlbXBUaW1lIG1vZGVsXG5cdFx0XHR2bS50ZW1wVGltZS5zdGFydCA9IHVuaXhUaW1lVG9EYXRlVGltZSh2bS50ZW1wRXZlbnQuZXZlbnRUaW1lcy5zdGFydCk7XG5cdFx0XHR2bS50ZW1wVGltZS5lbmQgPSB1bml4VGltZVRvRGF0ZVRpbWUodm0udGVtcEV2ZW50LmV2ZW50VGltZXMuZW5kKTtcblx0XHR9XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGluaXQoKSB7XG5cdFx0JGxvZy5pbmZvKHRoaXNFdmVudE1hbmFnZXIuZ2V0QWN0aXZlRXZlbnQoKSk7XG5cdFx0Ly9pZiB0aGVyZSBpcyBhbiBhY3RpdmUgZXZlbnQsIGxvYWQgaXRcblx0XHRpZih0aGlzRXZlbnRNYW5hZ2VyLnRoZXJlSXNBbkFjdGl2ZUV2ZW50KCkpIHtcblx0XHRcdCRsb2cuaW5mbygnbG9hZGluZyB0aGUgYWN0aXZlIGV2ZW50Jyk7XG5cdFx0XHR2YXIgYWN0aXZlUGFja2FnZSA9IHRoaXNFdmVudE1hbmFnZXIuZ2V0QWN0aXZlRXZlbnQoKTtcblxuXHRcdFx0dm0ucHJvZ3Jlc3NCYXIgPSBhY3RpdmVQYWNrYWdlLnByb2dyZXNzQmFyO1xuXHRcdFx0cGVyY2VudENvbXBsZXRlID0gYWN0aXZlUGFja2FnZS5wZXJjZW50Q29tcGxldGVcblx0XHRcdHZtLnRlbXBFdmVudCA9IGFjdGl2ZVBhY2thZ2UuZXZlbnQ7XG5cdFx0XHR2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGUgPSBhY3RpdmVQYWNrYWdlLnJlcXVpcmVkRmllbGRzO1xuXG5cdFx0XHQkbG9nLmluZm8odm0ucHJvZ3Jlc3NCYXIpO1xuXG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vbG9hZCBldmVudCBkZXRhaWxzXG5cdFx0XHR0aGlzRXZlbnRNYW5hZ2VyLmxvYWRBbkV2ZW50UHJvZ3Jlc3NpdmVseSgkcm91dGVQYXJhbXMudWlkLCAkcm91dGVQYXJhbXMuZXZlbnRJZClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKHRoZUV2ZW50KSB7XG5cdFx0XHRcdC8vYWRkIHRoaXMgZXZlbnQgbW9kZWwgdG8gdGhlIHZpZXcgbW9kZWwgZXZlbnRcblx0XHRcdFx0dm0udGVtcEV2ZW50ID0gdGhlRXZlbnQ7XG5cblx0XHRcdFx0Ly91cGRhdGUgdGVtcFRpbWVcblx0XHRcdFx0dXBkYXRlVGVtcFRpbWVGcm9tTW9kZWwoKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0JGxvZygndGhlIGVycm9yIGlzOiAnICsgZXJyb3IpO1xuXHRcdFx0fSlcblx0XHR9XG5cblx0XHQvL2xvYWQgc3BlY2lmaWVkIHNlY3Rpb25cblx0XHR2bS5hY3RpdmVTZWN0aW9uID0gcGFyc2VJbnQoJHJvdXRlUGFyYW1zLnNlY3Rpb24pO1xuXHRcdC8vc2V0IHRlbXBUaW1lc1xuXHRcdGluaXRFdmVudFRpbWVzKCk7XG5cdH1cblxuXHQvL3ZpZXcgbW9kZWwgbWV0aG9kc1xuXHR2bS5mb3JtYXREdXJhdGlvbiA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vY2FsYyBkdXJhdGlvblxuXHRcdHZtLnRlbXBUaW1lLmR1cmF0aW9uID0gY2FsY3VsYXRlRHVyYXRpb24odm0udGVtcFRpbWUuc3RhcnQsIHZtLnRlbXBUaW1lLmVuZCk7XG5cdFx0XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgaG91cnMgPSBNYXRoLmZsb29yKHZtLnRlbXBUaW1lLmR1cmF0aW9uLyg2MCkpO1xuXHRcdHZhciBtaW4gPSB2bS50ZW1wVGltZS5kdXJhdGlvbiAlIDYwO1xuXHRcdHZhciBmcmFjdGlvbiA9IChNYXRoLnJvdW5kKG1pbi8xNSkvNCk7XG5cblx0XHRyZXR1cm4gKGhvdXJzK2ZyYWN0aW9uKSArICcgaCc7XG5cdH1cblxuXHR2bS52YWxpZGF0ZVRpbWUgPSBmdW5jdGlvbihzdGFydE9yRW5kKSB7XHRcblxuXHRcdGlmKHZtLnRlbXBUaW1lLmR1cmF0aW9uID4gMjQpIHZtLnNldHRpbmdUZW1wU3RhcnQoKTtcblxuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIHRpbWVzID0ge1xuXHRcdFx0J2V2ZW50U3RhcnQnOiB2bS50ZW1wVGltZS5zdGFydCxcblx0XHRcdCdldmVudEVuZCc6IHZtLnRlbXBUaW1lLmVuZFxuXHRcdH07XG5cblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh0aW1lc1tzdGFydE9yRW5kXSkgJiYgdGltZXNbc3RhcnRPckVuZF0gIT0gJycgJiYgdm0udGVtcFRpbWUuZHVyYXRpb24gPiAwKSB7XG5cdFx0XHRpZih2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbc3RhcnRPckVuZF0uY29tcGxldGVkID09IGZhbHNlKSB1cGRhdGVQcm9ncmVzc0JhcigxMSk7XG5cdFx0XHR2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbc3RhcnRPckVuZF0uY29tcGxldGVkID0gdHJ1ZTtcblx0XHRcdHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtzdGFydE9yRW5kXS5yb3cuY2xhc3NbJ2hhcy1zdWNjZXNzJ10gPSB0cnVlO1xuXHRcdFx0dm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlW3N0YXJ0T3JFbmRdLnJvdy5jbGFzc1snaGFzLWZlZWRiYWNrJ10gPSB0cnVlO1xuXHRcdFx0dm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlW3N0YXJ0T3JFbmRdLnJvdy5jbGFzc1snaGFzLWVycm9yJ10gPSBmYWxzZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYodm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlW3N0YXJ0T3JFbmRdLmNvbXBsZXRlZCA9PSB0cnVlKSB1cGRhdGVQcm9ncmVzc0JhcigtMTEpO1xuXHRcdFx0dm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlW3N0YXJ0T3JFbmRdLmNvbXBsZXRlZCA9IGZhbHNlO1xuXHRcdFx0dm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlW3N0YXJ0T3JFbmRdLnJvdy5jbGFzc1snaGFzLXN1Y2Nlc3MnXSA9IGZhbHNlO1xuXHRcdFx0dm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlW3N0YXJ0T3JFbmRdLnJvdy5jbGFzc1snaGFzLWZlZWRiYWNrJ10gPSBmYWxzZTtcblx0XHRcdHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtzdGFydE9yRW5kXS5yb3cuY2xhc3NbJ2hhcy1lcnJvciddID0gdHJ1ZTtcblx0XHR9XG5cdH1cblxuXHR2bS5zZXR0aW5nVGVtcFN0YXJ0ID0gZnVuY3Rpb24oKSB7XG5cblx0XHQkbG9nLmluZm8oZGF0ZVRpbWVUb1VuaXhUaW1lKHZtLnRlbXBUaW1lLmVuZCkgLSBkYXRlVGltZVRvVW5peFRpbWUodm0udGVtcFRpbWUuc3RhcnQpLygxMDAwKjYwKjYwKjI0KSk7XG5cblx0XHRpZigoZGF0ZVRpbWVUb1VuaXhUaW1lKHZtLnRlbXBUaW1lLmVuZCkgPD0gZGF0ZVRpbWVUb1VuaXhUaW1lKHZtLnRlbXBUaW1lLnN0YXJ0KSkgfHwgXG5cdFx0XHQoZGF0ZVRpbWVUb1VuaXhUaW1lKHZtLnRlbXBUaW1lLmVuZCkgLSBkYXRlVGltZVRvVW5peFRpbWUodm0udGVtcFRpbWUuc3RhcnQpID4gKDEwMDAqNjAqNjAqMjQpKSkge1xuXHRcdFx0b2xkU3RhcnQgPSBkYXRlVGltZVRvVW5peFRpbWUodm0udGVtcFRpbWUuc3RhcnQpO1xuXHRcdFx0b2xkRW5kID0gZGF0ZVRpbWVUb1VuaXhUaW1lKHZtLnRlbXBUaW1lLmVuZCk7XG5cblx0XHRcdG5ld0VuZCA9IG9sZFN0YXJ0ICsgKDYwKjYwKjEwMDApO1xuXG5cdFx0XHR2bS50ZW1wVGltZS5lbmQgPSB1bml4VGltZVRvRGF0ZVRpbWUobmV3RW5kKTtcblx0XHR9XG5cdFx0XG4gXHR9XG5cblx0dm0uc2V0dGluZ1RlbXBFbmQgPSBmdW5jdGlvbigpIHtcblx0XHQvL3NldCB2YWxpZCBlbmQgd2l0aCBzdGFydFxuXHRcdGlmKHZtLnRlbXBUaW1lLnN0YXJ0ID4gdm0udGVtcFRpbWUuZW5kKSB2bS50ZW1wVGltZS5zdGFydCA9IHZtLnRlbXBUaW1lLmVuZDtcblxuXHRcdC8vdmFsaWRhdGVcblx0XHR2bS52YWxpZGF0ZVRpbWUoJ2V2ZW50RW5kJyk7XG5cblx0XHQvL2NhbGMgZHVyYXRpb25cblx0XHR2bS50ZW1wVGltZS5kdXJhdGlvbiA9IGNhbGN1bGF0ZUR1cmF0aW9uKHZtLnRlbXBUaW1lLnN0YXJ0LCB2bS50ZW1wVGltZS5lbmQpO1xuXG5cdFx0XG5cdH1cblxuXHR2bS5iYWNrVG9Vc2VyRXZlbnRzID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9pZiB0aGUgZXZlbnQgaXMgY29tcGxldGVkLCBzYXZlIHRvIHRoZSBkYlxuXHRcdC8vY2hlY2sgdGhhdCB0aGUgZXZlbnQgaXMgY29tcGxldGVcblx0XHRpZihwZXJjZW50Q29tcGxldGUgPiA5OSkge1xuXHRcdFx0Ly9pZiBzbyBzYXZlIHRoZSBldmVudCBsb2NhbGx5XG5cdFx0XHR0aGlzRXZlbnRNYW5hZ2VyLnNhdmVOZXdIb3N0aW5nRXZlbnQoJ2hvc3RpbmcnLCB2bS50ZW1wRXZlbnQpO1xuXHRcdFx0Ly90aGVuIHN5bmMgdGhlIGxvY2FsIHdpdGggdGhlIGRiXG5cdFx0XHR0aGlzRXZlbnRNYW5hZ2VyLnNldFJlbW90ZUV2ZW50c0Zyb21Mb2NhbCgnaG9zdGluZycsIHZtLnRlbXBFdmVudClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKHN1Y2Nlc01lc3NhZ2UpIHtcblx0XHRcdFx0JGxvZy5pbmZvKHN1Y2Nlc01lc3NhZ2UpO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvTWVzc2FnZSkge1xuXHRcdFx0XHQkbG9nLmluZm8oZXJyb01lc3NhZ2UpO1xuXHRcdFx0fSlcblx0XHR9XG5cblx0XHQvL2lmIG5vdCBjb21wbGV0ZWQsIGRlbGV0ZSB0aGUgZXZlbnQgZW50aXJlbHlcblx0XHQvL3RoaXNFdmVudE1hbmFnZXIucmVtb3ZlSW5jb21wbGV0ZUV2ZW50RnJvbURCKHZtLnRlbXBFdmVudC5pZCk7XG5cblx0XHQvL3NlbmQgdGhlIHVzZXIgYmFjayB0byB0aGUgcGFnZSB0aGV5IGNhbWUgZnJvbVxuXHRcdGhvc3RlZEV2ZW50U2hlcnBhLnJlZGlyZWN0VG8oJy91c2VyRXZlbnRzJywgJHJvdXRlUGFyYW1zLnVpZCk7XG5cdH1cblxuXHR2bS5zZWN0aW9uQmFjayA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vc2F2ZSB0ZW1wIGV2ZW50IHBhY2thZ2Vcblx0XHR2YXIgZXZlbnRQYWNrYWdlID0ge1xuXHRcdFx0ZXZlbnQ6IHZtLnRlbXBFdmVudCxcblx0XHRcdHByb2dyZXNzQmFyOiB2bS5wcm9ncmVzc0Jhcixcblx0XHRcdHBlcmNlbnRDb21wbGV0ZTogcGVyY2VudENvbXBsZXRlLFxuXHRcdFx0cmVxdWlyZWRGaWVsZHM6IHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVxuXHRcdH07XG5cblx0XHR0aGlzRXZlbnRNYW5hZ2VyLnNldEFjdGl2ZUV2ZW50KGV2ZW50UGFja2FnZSlcblxuXHRcdC8vbW92ZSBiYWNrXG5cdFx0dGFyZ2V0U2VjdGlvbiA9IHZtLmFjdGl2ZVNlY3Rpb24gLSAxO1xuXHRcdGhvc3RlZEV2ZW50U2hlcnBhLnJlZGlyZWN0VG8oJy9ldmVudC9ob3N0JywgJHJvdXRlUGFyYW1zLmV2ZW50SWQsICRyb3V0ZVBhcmFtcy51aWQsIHRhcmdldFNlY3Rpb24pO1xuXHR9XHRcblxuXHR2bS5zZWN0aW9uRm9yd2FyZCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vaWYgYWxsIHJlcXVpcmVkIGZpZWxkcyBoYXZlIGJlZW4gZW50ZXJlZFxuXHRcdC8vc2F2ZSB0ZW1wIGV2ZW50IHBhY2thZ2Vcblx0XHR2YXIgZXZlbnRQYWNrYWdlID0ge1xuXHRcdFx0ZXZlbnQ6IHZtLnRlbXBFdmVudCxcblx0XHRcdHByb2dyZXNzQmFyOiB2bS5wcm9ncmVzc0Jhcixcblx0XHRcdHBlcmNlbnRDb21wbGV0ZTogcGVyY2VudENvbXBsZXRlLFxuXHRcdFx0cmVxdWlyZWRGaWVsZHM6IHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVxuXHRcdH07XG5cblx0XHR0aGlzRXZlbnRNYW5hZ2VyLnNldEFjdGl2ZUV2ZW50KGV2ZW50UGFja2FnZSlcblxuXHRcdC8vbW92ZSBmb3J3YXJkXG5cdFx0dGFyZ2V0U2VjdGlvbiA9IHZtLmFjdGl2ZVNlY3Rpb24gKyAxO1xuXHRcdGhvc3RlZEV2ZW50U2hlcnBhLnJlZGlyZWN0VG8oJy9ldmVudC9ob3N0JywgJHJvdXRlUGFyYW1zLmV2ZW50SWQsICRyb3V0ZVBhcmFtcy51aWQsIHRhcmdldFNlY3Rpb24pO1xuXHR9XG5cblx0dm0udmVyaWZ5UmVxdWlyZWQgPSBmdW5jdGlvbihmaWVsZCwgdmFsdWUpIHtcblx0XG5cdFx0Ly9jaGVjayB2YWxpZGl0eVxuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSAmJiB2YWx1ZSAhPSAnJykge1xuXHRcdFx0aWYodm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlW2ZpZWxkXS5jb21wbGV0ZWQgPT0gZmFsc2UpIHtcblx0XHRcdFx0dXBkYXRlUHJvZ3Jlc3NCYXIoMTEpO1xuXHRcdFx0fVxuXHRcdFx0dm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlW2ZpZWxkXS5jb21wbGV0ZWQgPSB0cnVlO1xuXHRcdFx0dm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlW2ZpZWxkXS5yb3cuY2xhc3NbJ2hhcy1zdWNjZXNzJ10gPSB0cnVlO1xuXHRcdFx0dm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlW2ZpZWxkXS5yb3cuY2xhc3NbJ2hhcy1mZWVkYmFjayddID0gdHJ1ZTtcblx0XHRcdHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtmaWVsZF0ucm93LmNsYXNzWydoYXMtZXJyb3InXSA9IGZhbHNlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpZih2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbZmllbGRdLmNvbXBsZXRlZCA9PSB0cnVlKSB7XG5cdFx0XHRcdHVwZGF0ZVByb2dyZXNzQmFyKC0xMSk7XG5cdFx0XHR9XG5cdFx0XHR2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbZmllbGRdLmNvbXBsZXRlZCA9IGZhbHNlO1xuXHRcdFx0dm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlW2ZpZWxkXS5yb3cuY2xhc3NbJ2hhcy1zdWNjZXNzJ10gPSBmYWxzZTtcblx0XHRcdHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtmaWVsZF0ucm93LmNsYXNzWydoYXMtZmVlZGJhY2snXSA9IGZhbHNlO1xuXHRcdFx0dm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlW2ZpZWxkXS5yb3cuY2xhc3NbJ2hhcy1lcnJvciddID0gdHJ1ZTtcblx0XHR9XG5cdFx0Ly9maWVsZCB1cGRhdGVkXG5cdFx0XG5cdH1cblxuXHR2bS5zYXZlRXZlbnRUb0RCID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9jaGVjayB0aGF0IHRoZSBldmVudCBpcyBjb21wbGV0ZVxuXHRcdGlmKHBlcmNlbnRDb21wbGV0ZSA+IDk5KSB7XG5cdFx0XHQvL2lmIHNvIHNhdmUgdGhlIGV2ZW50IGxvY2FsbHlcblx0XHRcdHRoaXNFdmVudE1hbmFnZXIuc2F2ZU5ld0hvc3RpbmdFdmVudCgnaG9zdGluZycsIHZtLnRlbXBFdmVudCk7XG5cdFx0XHQvL3RoZW4gc3luYyB0aGUgbG9jYWwgd2l0aCB0aGUgZGJcblx0XHRcdHRoaXNFdmVudE1hbmFnZXIuc2V0UmVtb3RlRXZlbnRzRnJvbUxvY2FsKCRyb3V0ZVBhcmFtcy51aWQsIHZtLnRlbXBFdmVudClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKHN1Y2Nlc01lc3NhZ2UpIHtcblx0XHRcdFx0JGxvZy5pbmZvKHN1Y2Nlc01lc3NhZ2UpO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvTWVzc2FnZSkge1xuXHRcdFx0XHQkbG9nLmluZm8oZXJyb01lc3NhZ2UpO1xuXHRcdFx0fSlcblxuXHRcdFx0Ly9yZWRpcmVjdCBiYWNrIHRvIGV2ZW50c1xuXHRcdFx0aG9zdGVkRXZlbnRTaGVycGEucmVkaXJlY3RUbygnL3VzZXJFdmVudHMnLCAkcm91dGVQYXJhbXMudWlkKTtcblx0XHR9XG5cdFx0XG5cdH1cblxuXHQvL3dhdGNoZXJzXG5cdCRzY29wZS4kd2F0Y2goJ3ZtLnRlbXBFdmVudC5ndWVzdExpc3QnLCBmdW5jdGlvbihjdXJyZW50LCBvcmlnaW5hbCkge1xuXHRcdC8vaWYgYSBndWVzdCBpcyBhZGRlZCB0byB0aGUgbGlzdCB1cGRhdGUgdGhlIHByb2dyZXNzIGJhclxuICAgICAgICBpZihhbmd1bGFyLmlzT2JqZWN0KHZtLnRlbXBFdmVudC5ndWVzdExpc3QpKSB7XG4gICAgICAgIFx0dXBkYXRlUHJvZ3Jlc3NCYXIoMTIpO1xuICAgICAgICB9XG5cdH0pO1xuXG5cdC8vdGFrZSBhY3Rpb25cblx0aW5pdCgpO1xuXG59XG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdMYW5kaW5nUGFnZUNvbnRyb2xsZXInLCBMYW5kaW5nUGFnZUNvbnRyb2xsZXIpO1xuXG5MYW5kaW5nUGFnZUNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnLCAnJGxvY2F0aW9uJywgJyRkb2N1bWVudCcsICckd2luZG93J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gTGFuZGluZ1BhZ2VDb250cm9sbGVyKCRzY29wZSwgJGxvZywgJGxvY2F0aW9uLCAkZG9jdW1lbnQsICR3aW5kb3cpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgYXV0aERhdGEgPSB7fTtcblx0dmFyIGN1cnJlbnRVc2VyRGF0YSA9IHt9O1xuXG5cdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHR2bS5zaG93UmVxdWlybm1lbnRzID0gZmFsc2U7XG5cdHZtLnZhbGlkTmV3TmFtZSA9IHsndmFsaWQnOmZhbHNlLCAnc3R5bGUnOntjb2xvcjonJ319O1xuXHR2bS52YWxpZE5ld0VtYWlsID0geyd2YWxpZCc6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOicnfX07XG5cdHZtLnNlY3VyZVBhc3N3b3JkID0geydzZWN1cmUnOmZhbHNlLCAnc3R5bGUnOntjb2xvcjonJ319O1xuXHR2bS51bmxvY2tDcmVhdGVVc2VyQnRuID0geyd1c2FibGUnOmZhbHNlLCAnY2xhc3MnOididG4gYnRuLXdhcm5pbmcnfTtcblx0dm0ubWVzc2FnZSA9ICd0ZXN0aW5nJztcblxuXHRcblx0dm0udmFsaWRVc2VyRW1haWwgPSB7J3ZhbGlkJzpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6Jyd9fTtcblx0dm0udmFsaWRVc2VyUGFzc3dvcmQgPSB7J3ZhbGlkJzpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6Jyd9fTtcblx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0biA9IHsndXNhYmxlJzpmYWxzZSwgJ2NsYXNzJzonYnRuIGJ0bi13YXJuaW5nJ307XG5cdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzID0ge1xuXHRcdDA6eydjb25zdHJhaW50JzonSXMgYXQgbGVhc3QgMTYgY2hhcmFjdGVycyBsb25nJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX0sXG5cdFx0MTp7J2NvbnN0cmFpbnQnOidJcyBubyBsb25nZXIgdGhhbiAxMDAgY2hhcmFjdGVycycsICdzdHlsZSc6e2NvbG9yOidyZWQnfSwgJ21ldCc6ZmFsc2V9LFxuXHRcdDI6eydjb25zdHJhaW50JzonQ29udGFpbnMgYXQgbGVhc3Qgb25lIHJlcXVpcmVkIHN5bWJvbCAoXFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqKScsICdzdHlsZSc6e2NvbG9yOidyZWQnfSwgJ21ldCc6ZmFsc2V9LFxuXHRcdDM6eydjb25zdHJhaW50JzonQ29udGFpbnMgYXQgbGVhc3Qgb25lIG51bWJlcicsICdzdHlsZSc6e2NvbG9yOidyZWQnfSwgJ21ldCc6ZmFsc2V9LFxuXHRcdDQ6eydjb25zdHJhaW50JzonQ29udGFpbnMgYXQgbGVhc3Qgb25lIGxvd2VyY2FzZSBsZXR0ZXInLCAnc3R5bGUnOntjb2xvcjoncmVkJ30sICdtZXQnOmZhbHNlfSxcblx0XHQ1OnsnY29uc3RyYWludCc6J0NvbnRhaW5zIGF0IGxlYXN0IG9uZSB1cHBlcmNhc2UgbGV0dGVyJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX0sXG5cdFx0Njp7J2NvbnN0cmFpbnQnOlwiRG9lc24ndCBoYXZlIGFueSBpbGxlZ2FsIGNoYXJhY3RlcnNcIiwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX1cblx0fTtcblxuXHQvL3ZhciB0aGVUZXN0Qm94ID0gYW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCkuZmluZCgnI3Rlc3RCb3gnKTtcblxuXHQvL3RoZVRlc3RCb3guY2hlY2tWYWxpZGl0eSgpO1xuXHQvL3NldEN1c3RvbVZhbGlkaXR5KCd5b3UgbmVlZCBzb21ldGhpbmcgZWxzZScpO1xuXG5cdC8vbG9jYWwgbWV0aG9kc1xuXHRmdW5jdGlvbiB1dGY4X3RvX2I2NChzdHIpIHtcblx0XHRyZXR1cm4gYnRvYShzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gYjY0X3RvX3V0Zjgoc3RyKSB7XG4gICAgXHRyZXR1cm4gYXRvYihzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKSB7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KHVuaXhUaW1lKSk7XG5cdH1cblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH1cblxuXHQvL2RlZmluZSBjb250cm9sbGVyIG1ldGhvZHNcblx0dm0uZGlzcGxheVBhc3NSZXFzID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodm0ubmV3TmFtZSAmJiB2bS5uZXdFbWFpbCkge1xuXHRcdFx0dm0uc2hvd1JlcXVpcm5tZW50cyA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZtLnNob3dSZXF1aXJubWVudHMgPSBmYWxzZTtcblx0XHR9XG5cdH1cblxuXHR2bS5jaGVja05ld05hbWUgPSBmdW5jdGlvbigpIHtcblx0XHRcblx0XHRpZih2bS5uZXdOYW1lKSB7XG5cdFx0XHRpZih2bS5uZXdOYW1lLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0dm0udmFsaWROZXdOYW1lLnZhbGlkID0gdHJ1ZTtcblx0XHRcdFx0dm0udmFsaWROZXdOYW1lLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0udmFsaWROZXdOYW1lLnZhbGlkID0gZmFsc2U7XG5cdFx0XHRcdHZtLnZhbGlkTmV3TmFtZS5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dm0ub3BlbkNyZWF0ZVVzZXJCdXR0b24oKTtcblx0fVxuXG5cdHZtLmNoZWNrTmV3RW1haWwgPSBmdW5jdGlvbiAoKSB7XG5cdFx0aWYodm0ubmV3RW1haWwpIHtcblx0XHRcdC8vY2hlY2sgdmFsaWRpdHlcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSsoPzpcXC5bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKSpAKD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1xcLikrW2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1wiLCBcIlwiKTtcblxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZtLm5ld0VtYWlsKSkge1xuXHRcdFx0XHR2bS52YWxpZE5ld0VtYWlsLnZhbGlkID0gdHJ1ZTtcblx0XHRcdFx0dm0udmFsaWROZXdFbWFpbC5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLnZhbGlkTmV3RW1haWwudmFsaWQgPSBmYWxzZTtcblx0XHRcdFx0dm0udmFsaWROZXdFbWFpbC5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdFx0XHR9XHRcdFx0XG5cdFx0fVxuXHRcdFxuXHRcdHZtLm9wZW5DcmVhdGVVc2VyQnV0dG9uKCk7XG5cdH1cblxuXHR2bS5jaGVja1VzZXJFbWFpbCA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHZtLnVzZXJFbWFpbCkge1xuXHRcdFx0Ly9jaGVjayB2YWxpZGl0eVxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XCIsIFwiXCIpO1xuXG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3Qodm0udXNlckVtYWlsKSkge1xuXHRcdFx0XHR2bS52YWxpZFVzZXJFbWFpbC52YWxpZCA9IHRydWU7XG5cdFx0XHRcdHZtLnZhbGlkVXNlckVtYWlsLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0udmFsaWRVc2VyRW1haWwudmFsaWQgPSBmYWxzZTtcblx0XHRcdFx0dm0udmFsaWRVc2VyRW1haWwuc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHZtLm9wZW5Vc2VyTG9naW5CdG4oKTtcblx0fVxuXG5cdHZtLmNoZWNrTmV3UGFzc3dvcmRzID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9mb3IgZWFjaCBwYXNzd29yZCBkZWZpbmUgdGhlIHBhdHRlcm4gdGhhdCB0aGUgcGFzc3dvcmQgbXVzdCBtYXRjaFxuXHRcdHZhciBjb25zdHJhaW50cyA9IHtcblx0IFx0XHQwOiBbJycsICcgeW91ciBwYXNzd29yZCBuZWVkcyB0byBiZSAxNiBjaGFyYWN0ZXJzIG9yIGxvbmdlciddLFxuXHQgXHRcdDE6IFsnJywgJyB5b3VyIHBhc3N3b3JkIG5lZWRzIHRvIGJlIGxlc3MgdGhhbiAxMDAgY2hhcmFjdGVycyddLFxuXHQgXHRcdDI6IFsnW1xcIVxcQFxcI1xcJFxcJVxcXlxcJlxcKl0nLCBcIiBubyByZXF1aXJlZCBzeW1ib2xzIGZvdW5kXCJdLFxuXHQgXHRcdDM6IFsnWzAtOV0nLCBcIiBubyBudW1iZXJzIGZvdW5kXCJdLFxuXHQgXHRcdDQ6IFsnW2Etel0nLCBcIiBubyBsb3dlcmNhc2UgbGV0dGVycyBmb3VuZFwiXSxcblx0IFx0XHQ1OiBbJ1tBLVpdJywgXCIgbm8gdXBwZXJjYXNlIGxldHRlcnMgZm91bmRcIl0sXG5cdCBcdFx0NjogWydbXkEtejAtOVxcIVxcQFxcI1xcJFxcJVxcXlxcJlxcKl0nLCBcIiBpbGxlZ2FsIGNoYXJhY3RlcnMgZm91bmRcIl0sXG4gXHRcdH07XG4gXHRcdFxuIFx0XHQvL2NoZWNrIGZvciBsZW5ndGhcbiBcdFx0aWYodm0ubmV3UGFzc3dvcmQpIHtcbiBcdFx0XHRpZih2bS5uZXdQYXNzd29yZC5sZW5ndGggPiAxNSkgeyBcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzBdLnN0eWxlID0ge2NvbG9yOidncmVlbid9OyBcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzBdLm1ldCA9IHRydWU7IFxuIFx0XHRcdH0gZWxzZSB7XG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1swXS5zdHlsZSA9IHtjb2xvcjoncmVkJ307IFxuIFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMF0ubWV0ID0gZmFsc2U7XG4gXHRcdFx0fVxuIFx0XHRcdGlmKHZtLm5ld1Bhc3N3b3JkLmxlbmd0aCA8PSAxMDApIHsgXG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1sxXS5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTsgXG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1sxXS5tZXQgPSB0cnVlO1xuIFx0XHRcdH0gZWxzZSB7XG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1sxXS5zdHlsZSA9IHtjb2xvcjoncmVkJ307IFxuIFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMV0ubWV0ID0gZmFsc2U7XG4gXHRcdFx0fVxuXG4gXHRcdFx0Ly9jaGVjayBjb25zdHJhaW50cyAyLTVcbiBcdFx0XHRmb3IoaSA9IDI7IGkgPCA2OyBpKyspIHtcblx0IFx0XHRcdC8vY2hlY2sgZm9yIHJlcXVpcmVkIHN5bWJvbHMsIHVwcGVyY2FzZSwgbG9zZXJjYXNlLCBhbmQgY2hhcmFjdGVyc1xuXHQgXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKGNvbnN0cmFpbnRzW2ldWzBdLCBcIlwiKTtcdFxuXG5cdCBcdFx0XHQvL3Rlc3QgZWFjaCBjb25zdHJhdGludFxuXHQgXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZtLm5ld1Bhc3N3b3JkKSkge1xuXHQgXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1tpXS5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0IFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbaV0ubWV0ID0gdHJ1ZTtcblx0IFx0XHRcdH0gZWxzZSB7XG5cdCBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzW2ldLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0IFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbaV0ubWV0ID0gZmFsc2U7XG5cdCBcdFx0XHR9XG5cdCBcdFx0fVxuXG5cdCBcdFx0Ly9jaGVjayBpbGxlZ2FsIGNoYXJhY3RlcnNcblx0IFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoY29uc3RyYWludHNbNl1bMF0sIFwiXCIpO1xuXG5cdCBcdFx0Ly9ydW4gdGhlIGNoZWNrXG5cdCBcdFx0aWYoIWNvbnN0cmFpbnQudGVzdCh2bS5uZXdQYXNzd29yZCkpIHtcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzZdLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzZdLm1ldCA9IGZhbHNlO1xuXHQgXHRcdH0gZWxzZSB7XG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1s2XS5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzZdLm1ldCA9IHRydWU7XG5cdCBcdFx0fVxuXG5cdCBcdFx0Ly9pZiBhbGwgY29uc3RyYWlucyBtZXQsIHRocm93IHZhbGlkIHBhc3MgZmxhZ1xuXHQgXHRcdGlmKCB2bS5wYXNzd29yZFJlcXVpcm5tZW50c1swXS5tZXQgJiZcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzFdLm1ldCAmJlxuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMl0ubWV0ICYmXG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1szXS5tZXQgJiZcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzRdLm1ldCAmJlxuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNV0ubWV0ICYmXG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1s2XS5tZXQpIHtcblx0IFx0XHRcdHZtLnNlY3VyZVBhc3N3b3JkLnNlY3VyZSA9IHRydWVcblx0IFx0XHR9IGVsc2Uge1xuXHQgXHRcdFx0dm0uc2VjdXJlUGFzc3dvcmQuc2VjdXJlID0gZmFsc2U7XG5cdCBcdFx0fVxuXG5cdCBcdFx0aWYodm0uc2VjdXJlUGFzc3dvcmQuc2VjdXJlKSB7XG5cdCBcdFx0XHR2bS5zZWN1cmVQYXNzd29yZC5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0IFx0XHR9IGVsc2Uge1xuXHQgXHRcdFx0dm0uc2VjdXJlUGFzc3dvcmQuc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHQgXHRcdH1cbiBcdFx0fVxuIFx0XHRcbiBcdFx0dm0ub3BlbkNyZWF0ZVVzZXJCdXR0b24oKTtcblx0fVxuXG5cdHZtLmNoZWNrVXNlclBhc3N3b3JkcyA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHZtLnVzZXJQYXNzd29yZCkge1xuXHRcdFx0aWYodm0udXNlclBhc3N3b3JkLmxlbmd0aCA+IDE1KSB7XG5cdFx0XHRcdHZtLnZhbGlkVXNlclBhc3N3b3JkLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHRcdFx0XHR2bS52YWxpZFVzZXJQYXNzd29yZC52YWxpZCA9IHRydWU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS52YWxpZFVzZXJQYXNzd29yZC5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdFx0XHRcdHZtLnZhbGlkVXNlclBhc3N3b3JkLnZhbGlkID0gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHR9XG5cdFx0XG5cdFx0dm0ub3BlblVzZXJMb2dpbkJ0bigpO1xuXHR9XG5cblx0dm0ub3BlbkNyZWF0ZVVzZXJCdXR0b24gPSBmdW5jdGlvbigpIHtcblx0XHRpZih2bS52YWxpZE5ld05hbWUudmFsaWQgJiYgdm0udmFsaWROZXdFbWFpbC52YWxpZCAmJiB2bS5zZWN1cmVQYXNzd29yZC5zZWN1cmUpIHtcblx0XHRcdHZtLnVubG9ja0NyZWF0ZVVzZXJCdG4uY2xhc3MgPSAnYnRuIGJ0bi1zdWNjZXNzJztcblx0XHRcdHZtLnVubG9ja0NyZWF0ZVVzZXJCdG4udXNhYmxlID0gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dm0udW5sb2NrQ3JlYXRlVXNlckJ0bi5jbGFzcyA9ICdidG4gYnRuLXdhcm5pbmcnO1xuXHRcdFx0dm0udW5sb2NrQ3JlYXRlVXNlckJ0bi51c2FibGUgPSBmYWxzZTtcdFxuXHRcdH1cblxuXHR9XG5cblx0dm0ub3BlblVzZXJMb2dpbkJ0biA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHZtLnZhbGlkVXNlckVtYWlsLnZhbGlkICYmIHZtLnZhbGlkVXNlclBhc3N3b3JkLnZhbGlkKSB7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLmNsYXNzID0gJ2J0biBidG4tc3VjY2Vzcyc7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLnVzYWJsZSA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4uY2xhc3MgPSAnYnRuIGJ0bi13YXJuaW5nJztcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlID0gZmFsc2U7XHRcblx0XHR9XG5cdH1cblxuXHR2bS51cGRhdGUgPSBmdW5jdGlvbigpIHtcblx0XHQvL3NldCB2YWx1ZXNcblx0XHR2bS5uZXdOYW1lID0gJGRvY3VtZW50LmZpbmQoJyNuZXdOYW1lJylbMF0udmFsdWU7XG5cdFx0dm0ubmV3RW1haWwgPSAkZG9jdW1lbnQuZmluZCgnI25ld0VtYWlsJylbMF0udmFsdWU7XG5cdFx0dm0udXNlckVtYWlsID0gJGRvY3VtZW50LmZpbmQoJyN1c2VyRW1haWwnKVswXS52YWx1ZTtcblx0XHRcblx0XHR2bS5jaGVja05ld05hbWUoKTtcblx0XHR2bS5jaGVja05ld0VtYWlsKCk7XG5cdFx0dm0uY2hlY2tVc2VyRW1haWwoKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHJlZGlyZWN0KHBhdGgsIHVzZXJEYXRhKSB7XG5cdFx0dmFyIGZ1bGxQYXRoID0gcGF0aCArICcvJyArIGN1cnJlbnRVc2VyRGF0YS51aWQgKyAnLycgKyBjdXJyZW50VXNlckRhdGEudG9rZW47XG5cdFx0Ly9yZWRpcmVjdFxuXHRcdCRsb2cuaW5mbygncmVkaXJlY3RpbmcgdG86ICcgKyBmdWxsUGF0aCk7XG5cdFx0JGxvY2F0aW9uLnBhdGgoZnVsbFBhdGgpO1xuXHRcdCRzY29wZS4kYXBwbHkoKTtcblx0fVxuXG5cdHZtLmNyZWF0ZU5ld1VzZXIgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9nLmluZm8oJ0NyZWF0aW5nIGEgbmV3IHVzZXIgYWNjb3VudCBub3chJyk7XG5cblx0XHRpZih2bS51bmxvY2tDcmVhdGVVc2VyQnRuLnVzYWJsZSkge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVcblx0XHRcdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXG5cdFx0XHRyZWYuY3JlYXRlVXNlcih7XG5cdFx0XHRcdGVtYWlsOnZtLm5ld0VtYWlsLFxuXHRcdFx0XHRwYXNzd29yZDp2bS5uZXdQYXNzd29yZFxuXHRcdFx0fSxmdW5jdGlvbihlcnJvciwgdXNlckRhdGEpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ0Vycm9yIGNyZWF0aW5nIHVzZXI6ICcgKyBlcnJvcik7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly9sb2cgcmVzdWx0c1xuXHRcdFx0XHRcdCRsb2cuaW5mbyh1c2VyRGF0YSk7XG5cblx0XHRcdFx0XHQvL3NhdmUgYWxsIHRoZSBkYXRhXG5cdFx0XHRcdFx0Y3VycmVudFVzZXJEYXRhID0gdXNlckRhdGE7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly9nZW5lcmF0ZSB0aGUgdXNlciByZWNvcmRcblx0XHRcdFx0XHR2YXIgdXNlcnNSZWYgPSByZWYuY2hpbGQoJ1VzZXJzLycgKyB1c2VyRGF0YS51aWQpO1xuXHRcdFx0XHRcdHZhciBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XG5cblx0XHRcdFx0XHQvL3dyaXRlIG5ldyB1c2VyIHRvIHRoZSBkYXRhYmFzZSB3aXRoIGJpbyBpbmZvXG5cdFx0XHRcdFx0dXNlcnNSZWYuc2V0KHsgXG5cdFx0XHRcdFx0XHQnYmlvJzoge1xuXHRcdFx0XHRcdFx0XHQnbmFtZSc6IHZtLm5ld05hbWUsXG5cdFx0XHRcdFx0XHRcdCdlbWFpbCc6IHZtLm5ld0VtYWlsXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0J2V2ZW50cyc6IHtcblx0XHRcdFx0XHRcdFx0J3BlbmRpbmcnOiB7XG5cdFx0XHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdCdob3N0aW5nJzoge1xuXHRcdFx0XHRcdFx0XHRcdCd1cGRhdGVkJzogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHQnYXR0ZW5kaW5nJzoge1xuXHRcdFx0XHRcdFx0XHRcdCd1cGRhdGVkJzogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHQnY29tcGxldGVkJzoge1xuXHRcdFx0XHRcdFx0XHRcdCd1cGRhdGVkJzogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0XHRcdGlmKGVycm9yKSB7XG5cdFx0XHRcdFx0XHRcdCRsb2cuaW5mbygnRGF0YSBjb3VsZCBub3QgYmUgc2F2ZWQ6ICcgKyBlcnJvcik7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQkbG9nLmluZm8oJ0RhdGEgc2F2ZWQgc3VjY2Vzc2Z1bGx5LicpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdC8vYWRkIHRoaXMgdXNlciB0byB0aGUgbGlzdCBvZiByZWdpc3RlcmVkIHVzZXJzXG5cdFx0XHRcdFx0cmVmLmNoaWxkKCdVaWRzJykuY2hpbGQodXRmOF90b19iNjQodm0ubmV3RW1haWwpKS5zZXQoY3VycmVudFVzZXJEYXRhLnVpZCwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oXCJEYXRhIGNvdWxkIG5vdCBiZSBzYXZlZC4gXCIgKyBlcnJvcik7XG5cdFx0XHRcdFx0XHRlbHNlICRsb2cuaW5mbyhcInVpZCBjcmVhdGVkIHN1Y2Vzc2Z1bGx5LlwiKTtcblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdC8vcmVkaXJlY3QgdG8gVXNlckluZm9ybWF0aW9uXG5cdFx0XHRcdFx0cmVkaXJlY3QoJy91c2VySW5mb3JtYXRpb24nLCBjdXJyZW50VXNlckRhdGEpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdH1cblx0fVxuXG5cdHZtLmxvZ2luUmVnaXN0ZXJlZFVzZXIgPSBmdW5jdGlvbigpIHtcblxuXHRcdGlmKHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlKSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZVxuXHRcdFx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cblx0XHRcdC8vYXV0aGVudGljYXRlIHRoZSB1c2VyXG5cdFx0XHRyZWYuYXV0aFdpdGhQYXNzd29yZCh7XG5cdFx0XHRcdGVtYWlsOiB2bS51c2VyRW1haWwsXG5cdFx0XHRcdHBhc3N3b3JkOiB2bS51c2VyUGFzc3dvcmRcblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yLCBhdXRoRGF0YSkge1xuXHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnRXJyb3IgTG9nZ2luZyBJbjogJyArIGVycm9yKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ0xvZ2dlZCBJbiBzdWNjZXNzZnVsbHk6ICcgKyBhdXRoRGF0YS51aWQpO1xuXHRcdFx0XHRcdCRsb2cuaW5mbyhhdXRoRGF0YSk7XG5cdFx0XHRcdFx0Ly9zYXZlIGFsbCB0aGUgZGF0YVxuXHRcdFx0XHRcdGN1cnJlbnRVc2VyRGF0YSA9IGF1dGhEYXRhO1xuXG5cdFx0XHRcdFx0Ly9sb2FkIHVzZXIgYmlvXG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly9sb2FkIHVzZXIgZXZlbnRzXG5cblx0XHRcdFx0XHQvL3JlZGlyZWN0XG5cdFx0XHRcdFx0cmVkaXJlY3QoJy91c2VySW5mb3JtYXRpb24nLCBjdXJyZW50VXNlckRhdGEpO1xuXHRcdFx0XHRcdCRzY29wZS4kYXBwbHkoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHR9XG5cblx0fVxuXG5cdHZtLmFsZXJ0TWUgPSBmdW5jdGlvbigpIHtcblx0XHRhbGVydCgndGhpcyBpcyB3b3JraW5nISBhbiBhbGVydCEnKTtcblx0fVxuXG5cdHZtLm9uUmVzaXplRnVuY3Rpb24gPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgaW5wdXRUZXh0ID0gYW5ndWxhci5lbGVtZW50KCcuaW5wdXRUZXh0Jyk7XG5cdFx0aWYoJHdpbmRvdy5vdXRlcldpZHRoID4gJHdpbmRvdy5vdXRlckhlaWdodCkge1xuXHRcdFx0aW5wdXRUZXh0LmNzcygnZm9udC1zaXplJywgJzJlbScpO1xuXHRcdFx0JGxvZy5pbmZvKCdtYWtpbmcgYmlnZ2VyJyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlucHV0VGV4dC5jc3MoJ2ZvbnQtc2l6ZScsICcxLjJlbScpO1xuXHRcdH1cblx0fVxuXG5cdC8vZXZlbnQgbGlzdGVuZXJzXG5cdGlmICgnYWRkRXZlbnRMaXN0ZW5lcicgaW4gJGRvY3VtZW50KSB7XG5cdCAgICAkZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkge1xuXHQgICAgXHQkbG9nLmluZm8oJ2FkZGluZyBGYXN0Q2xpY2snKTtcblx0ICAgICAgICBGYXN0Q2xpY2suYXR0YWNoKCRkb2N1bWVudC5ib2R5KTtcblx0ICAgIH0sIGZhbHNlKTtcblx0fVxuXG5cdGFuZ3VsYXIuZWxlbWVudCgkd2luZG93KS5iaW5kKCdyZXNpemUnLCBmdW5jdGlvbigpIHtcblx0XHR2bS5vblJlc2l6ZUZ1bmN0aW9uKCk7XG5cdFx0Ly8kc2NvcGUuJGFwcGx5KCk7XG5cdH0pO1xuXG5cdGFuZ3VsYXIuZWxlbWVudCgkZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXHRcdGlmKCR3aW5kb3cub3V0ZXJXaWR0aCA8IDYwMCkge1xuXHRcdFx0dm0ub25SZXNpemVGdW5jdGlvbigpO1xuXHRcdFx0Ly8kc2NvcGUuJGFwcGx5KCk7XG5cdFx0fVxuXHR9KVxuXG5cblx0IHZtLm1hc3RlciA9IHt9O1xuXG5cdCAgdm0udXBkYXRlID0gZnVuY3Rpb24odXNlcikge1xuXHQgICAgdm0ubWFzdGVyID0gYW5ndWxhci5jb3B5KHVzZXIpO1xuXHQgIH07XG5cblx0ICB2bS5yZXNldCA9IGZ1bmN0aW9uKGZvcm0pIHtcblx0ICAgIGlmIChmb3JtKSB7XG5cdCAgICAgIGZvcm0uJHNldFByaXN0aW5lKCk7XG5cdCAgICAgIGZvcm0uJHNldFVudG91Y2hlZCgpO1xuXHQgICAgfVxuXHQgICAgdm0udXNlciA9IGFuZ3VsYXIuY29weSh2bS5tYXN0ZXIpO1xuXHQgIH07XG5cblx0ICB2bS5yZXNldCgpO1xufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignTWFpbkNvbnRyb2xsZXInLCBNYWluQ29udHJvbGxlcik7XG5cbk1haW5Db250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJGxvY2F0aW9uJywgJyRkb2N1bWVudCcsICckd2luZG93J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gTWFpbkNvbnRyb2xsZXIoJGxvZywgJGxvY2F0aW9uLCAkZG9jdW1lbnQsICR3aW5kb3cpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTsgXG5cblx0ZnVuY3Rpb24gcmVzaXplQkdJbWFnZSgpIHtcblx0XHR2YXIgYm9keSA9IGFuZ3VsYXIuZWxlbWVudCgkZG9jdW1lbnQpO1xuXHRcdCRkb2N1bWVudC5jc3MoJ2hpZ2h0JywgJHdpbmRvdy5vdXRlckhlaWdodClcblx0fVxuXG5cdHZtLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xuXHRcdGFsZXJ0KCdsb2dnaW5nIHlvdSBvdXQhJyk7XG5cdFx0cmVmLnVuYXV0aCgpO1xuXHRcdCRsb2NhdGlvbi5wYXRoKCcvJyk7XG5cdH07XG5cblx0YW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cdFx0Ly9GYXN0Q2xpY2suYXR0YWNoKCRkb2N1bWVudC5ib2R5KTtcblx0XHRyZXNpemVCR0ltYWdlKCk7XG5cdH0pXG59XG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdOZXdVc2VyU2lnblVwQ29udHJvbGxlcicsIE5ld1VzZXJTaWduVXBDb250cm9sbGVyKTtcblxuTmV3VXNlclNpZ25VcENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnLCAndmFsaWRhdGlvbicsICdiYWNrZW5kU2VydmljZXMnLCAndHJhZmZpY1ZhbGV0JywgJ3VzZXJEYXRhJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gTmV3VXNlclNpZ25VcENvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCB2YWxpZGF0aW9uLCBiYWNrZW5kU2VydmljZXMsIHRyYWZmaWNWYWxldCwgdXNlckRhdGEpIHtcblx0dmFyIHZtID0gdGhpcztcblxuXHQvL2RlZmluZSB2bSBpbnB1dCB2YXJpYWJsZXNcblx0dm0uaW5wdXRzID0ge1xuXHRcdG5ld05hbWU6ICcnLFxuXHRcdG5ld0VtYWlsOiAnJyxcblx0XHRuZXdQYXNzd29yZDogJycsXG5cdFx0cmVxdWlyZWRGaWVsZHNEZWZpbmVkOiBmYWxzZVxuXHR9XG5cdHZtLmVycm9ycyA9IHtcblx0XHRuYW1lOiAnJyxcblx0XHRlbWFpbDogJycsXG5cdFx0cGFzc3dvcmQ6IGZhbHNlLFxuXHRcdHBhc3Nlc0FsbFRlc3RzOiBmYWxzZVxuXHR9XG5cdHZtLnBhc3NSZXFzID0ge1xuXHRcdDA6IHsgaWQ6JycsIHJlcTonSXMgYXQgbGVhc3QgMTYgY2hhcmFjdGVycyBsb25nJywgZnVsZmlsbGVkOmZhbHNlLCAnc3R5bGUnOntjb2xvcjoncmVkJ319LFxuXHRcdDE6IHsgaWQ6JycsIHJlcTonSXMgbm8gbG9uZ2VyIHRoYW4gMTAwIGNoYXJhY3RlcnMnLCBmdWxmaWxsZWQ6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOidyZWQnfSB9LFxuXHRcdDI6IHsgaWQ6JycsIHJlcTonQ29udGFpbnMgYXQgbGVhc3Qgb25lIGxvd2VyY2FzZSBsZXR0ZXInLCBmdWxmaWxsZWQ6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOidyZWQnfSB9LFxuXHRcdDM6IHsgaWQ6JycsIHJlcTonQ29udGFpbnMgYXQgbGVhc3Qgb25lIHVwcGVyY2FzZSBsZXR0ZXInLCBmdWxmaWxsZWQ6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOidyZWQnfSB9LFxuXHRcdDQ6IHsgaWQ6JycsIHJlcTonQ29udGFpbnMgYXQgbGVhc3Qgb25lIG51bWJlcicsIGZ1bGZpbGxlZDpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9IH0sXG5cdFx0NTogeyBpZDonJywgcmVxOidDb250YWlucyBhdCBsZWFzdCBvbmUgcmVxdWlyZWQgc3ltYm9sIChcXCFcXEBcXCNcXCRcXCVcXF5cXCZcXCopJywgZnVsZmlsbGVkOmZhbHNlLCAnc3R5bGUnOntjb2xvcjoncmVkJ30gfSxcblx0XHQ2OiB7IGlkOicnLCByZXE6XCJEb2Vzbid0IGhhdmUgYW55IGlsbGVnYWwgY2hhcmFjdGVyc1wiLCBmdWxmaWxsZWQ6dHJ1ZSwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9IH1cblx0fVxuXHR2bS5zaG93UmVxc0JveCA9IGZhbHNlO1xuXG5cdC8vZGVmaW5lIHJlcXVpcmVkIGZpZWxkIGNvbnN0cmFpbnRzXG5cdHZhciBzaWdudXBWYWxpZGF0aW9uID0gdmFsaWRhdGlvbjtcblxuXHQvL2RlZmluZSBjb250cm9sbGVyIG1ldGhvZHNcblx0ZnVuY3Rpb24gdmVyaWZ5UmVxdWlybm1lbnRzKCkge1xuXHRcdGlmKHZtLmVycm9ycy5uYW1lID09ICcnICYmIHZtLmVycm9ycy5lbWFpbCA9PSAnJyAmJiAhdm0uZXJyb3JzLnBhc3N3b3JkKSB2bS5lcnJvcnMucGFzc2VzQWxsVGVzdHMgPSB0cnVlO1xuXHRcdGVsc2Ugdm0uZXJyb3JzLnBhc3Nlc0FsbFRlc3RzID0gZmFsc2U7XG5cblx0XHRpZiggYW5ndWxhci5pc0RlZmluZWQodm0uaW5wdXRzLm5ld05hbWUpICYmIHZtLmlucHV0cy5uZXdOYW1lICE9PSAnJyAmJlxuXHRcdFx0YW5ndWxhci5pc0RlZmluZWQodm0uaW5wdXRzLm5ld0VtYWlsKSAmJiB2bS5pbnB1dHMubmV3RW1haWwgIT09ICcnICYmXG5cdFx0XHRhbmd1bGFyLmlzRGVmaW5lZCh2bS5pbnB1dHMubmV3UGFzc3dvcmQpICYmIHZtLmlucHV0cy5uZXdQYXNzd29yZCAhPT0gJycpIFxuXHRcdFx0XHR2bS5pbnB1dHMucmVxdWlyZWRGaWVsZHNEZWZpbmVkID0gdHJ1ZTtcblx0XHRlbHNlIHZtLmlucHV0cy5yZXF1aXJlZEZpZWxkc0RlZmluZWQgPSBmYWxzZTtcblx0fVxuXG5cdC8vZGVmaW5lIHZtIGFjY2Vzc2libGUgbWV0aG9kc1xuXHR2bS5jaGVja05ld05hbWUgPSBmdW5jdGlvbigpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlXG5cdFx0dmFyIGVycm9ycyA9IFtdO1xuXHRcdHZhciBoYXNOYW1lID0gc2lnbnVwVmFsaWRhdGlvbi5yZXF1aXJlZCh2bS5pbnB1dHMubmV3TmFtZSk7XG5cdFx0dmFyIGxvbmdFbm91Z2ggPSBzaWdudXBWYWxpZGF0aW9uLm1pbk5hbWVMZW5ndGgodm0uaW5wdXRzLm5ld05hbWUpXG5cdFx0XG5cdFx0Ly9sb2cgZXJyb3JzXG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoaGFzTmFtZSkpIGVycm9ycy5wdXNoKGhhc05hbWUpO1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGxvbmdFbm91Z2gpKSBlcnJvcnMucHVzaChsb25nRW5vdWdoKTtcblxuXHRcdC8vdXBkYXRlIHRoZSBlcnJvcnMgbW9kZWxcblx0XHRpZihlcnJvcnMubGVuZ3RoID4gMCkgdm0uZXJyb3JzLm5hbWUgPSBlcnJvcnMuam9pbignLCAnKTtcblx0XHRlbHNlIHZtLmVycm9ycy5uYW1lID0gJyc7XG5cblx0XHR2ZXJpZnlSZXF1aXJubWVudHMoKTtcblx0fVxuXG5cdHZtLmNoZWNrTmV3RW1haWwgPSBmdW5jdGlvbigpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlXG5cdFx0dmFyIGVycm9ycyA9IFtdO1xuXHRcdHZhciBoYXNFbWFpbCA9IHNpZ251cFZhbGlkYXRpb24ucmVxdWlyZWQodm0uaW5wdXRzLm5ld0VtYWlsKTtcblx0XHR2YXIgaXNBbkVtYWlsID0gc2lnbnVwVmFsaWRhdGlvbi5lbWFpbCh2bS5pbnB1dHMubmV3RW1haWwpO1xuXHRcdFxuXHRcdC8vbG9nIGVycm9yc1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGhhc0VtYWlsKSkgZXJyb3JzLnB1c2goaGFzRW1haWwpO1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGlzQW5FbWFpbCkpIGVycm9ycy5wdXNoKGlzQW5FbWFpbCk7XG5cblx0XHQvL3VwZGF0ZSB0aGUgZXJyb3JzIG1vZGVsXG5cdFx0aWYoZXJyb3JzLmxlbmd0aCA+IDApIHZtLmVycm9ycy5lbWFpbCA9IGVycm9ycy5qb2luKCcsICcpO1xuXHRcdGVsc2Ugdm0uZXJyb3JzLmVtYWlsID0gJyc7XG5cblx0XHR2ZXJpZnlSZXF1aXJubWVudHMoKTtcblx0fVxuXG5cdHZtLmNoZWNrTmV3UGFzc3dvcmQgPSBmdW5jdGlvbigpIHtcblx0XHQvL2ZsaXAgb24gcmVxcyBib3hcblx0XHR2bS5zaG93UmVxc0JveCA9IHRydWU7XG5cblx0XHQvL2xvY2FsIHZhcmlhYmxlXG5cdFx0dmFyIGVycm9ycyA9IFtdO1xuXHRcdHZhciBoYXNQYXNzd29yZCA9IHNpZ251cFZhbGlkYXRpb24ucmVxdWlyZWQodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKTtcblx0XHR2YXIgc3BlY2lmaWNSZXFzID0gW1xuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5taW5QYXNzTGVuZ3RoKHZtLmlucHV0cy5uZXdQYXNzd29yZCksXG5cdFx0XHRzaWdudXBWYWxpZGF0aW9uLm1heFBhc3NMZW5ndGgodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKSxcblx0XHRcdHNpZ251cFZhbGlkYXRpb24uYXRMZWFzdE9uZUxvd2VyY2FzZSh2bS5pbnB1dHMubmV3UGFzc3dvcmQpLFxuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5hdExlYXN0T25lVXBwZXJjYXNlKHZtLmlucHV0cy5uZXdQYXNzd29yZCksXG5cdFx0XHRzaWdudXBWYWxpZGF0aW9uLmF0TGVhc3RPbmVOdW1iZXIodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKSxcblx0XHRcdHNpZ251cFZhbGlkYXRpb24uYXRMZWFzdE9uZVN5bWJvbCh2bS5pbnB1dHMubmV3UGFzc3dvcmQpLFxuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5pbGxlZ2FsQ2hhcmFjdGVyKHZtLmlucHV0cy5uZXdQYXNzd29yZClcblx0XHRdO1xuXG5cdFx0Ly9sb2cgZXJyb3JzXG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoaGFzUGFzc3dvcmQpKSBlcnJvcnMucHVzaChoYXNQYXNzd29yZCk7XG5cblx0XHQvL3VwZGF0ZSB0aGUgZXJyb3JzIG1vZGVsXG5cdFx0aWYoZXJyb3JzLmxlbmd0aCA+IDApIHZtLmVycm9ycy5wYXNzd29yZCA9IGVycm9ycy5qb2luKCcsICcpO1xuXHRcdGVsc2Ugdm0uZXJyb3JzLmVtYWlsID0gJyc7XG5cblx0XHQvL3VwZGF0ZSByZXFzIG1vZGVsXG5cdFx0dmFyIGFueUVycm9ycyA9IGZhbHNlO1xuXHRcdGZvcihpPTA7IGk8NzsgaSsrKSB7XG5cdFx0XHRpZihzcGVjaWZpY1JlcXNbaV0pIHtcblx0XHRcdFx0dm0ucGFzc1JlcXNbaV0uZnVsZmlsbGVkID0gdHJ1ZTtcblx0XHRcdFx0dm0ucGFzc1JlcXNbaV0uc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS5wYXNzUmVxc1tpXS5mdWxmaWxsZWQgPSBmYWxzZTtcblx0XHRcdFx0dm0ucGFzc1JlcXNbaV0uc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHRcdFx0XHRhbnlFcnJvcnMgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHZtLmVycm9ycy5wYXNzd29yZCA9IGFueUVycm9ycztcblx0XHR2ZXJpZnlSZXF1aXJubWVudHMoKTtcblx0fVxuXG5cdHZtLmV4aXRQYXNzd29yZCA9IGZ1bmN0aW9uKCkge1xuXHRcdHZtLmNoZWNrTmV3UGFzc3dvcmQoKTtcblx0XHR2bS5zaG93UmVxc0JveCA9IGZhbHNlO1xuXHR9XG5cblx0dm0uY3JlYXRlTmV3VXNlciA9IGZ1bmN0aW9uICgpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIG5ld1VzZXJTaGVycGEgPSB0cmFmZmljVmFsZXQ7XG5cblx0XHQvL2NvbmZpcm0gYWxsIGZpZWxkcyBhcmUgdmFsaWRcblx0XHRpZih2bS5lcnJvcnMucGFzc2VzQWxsVGVzdHMgJiYgdm0uaW5wdXRzLnJlcXVpcmVkRmllbGRzRGVmaW5lZCkge1xuXHRcdFx0XG5cdFx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgY3JlYXRlTmV3VXNlciA9IGJhY2tlbmRTZXJ2aWNlcztcblx0XHRcdHZhciBuZXdVc2VyRGF0YSA9IHVzZXJEYXRhO1xuXHRcdFx0dmFyIHRoaXNVSUQ7XG5cblx0XHRcdC8vY3JlYXRlIHRoZSBuZXcgdXNlciBpbiB0aGUgZGF0YWJhc2Vcblx0XHRcdGNyZWF0ZU5ld1VzZXIuY3JlYXRlTmV3VXNlcih2bS5pbnB1dHMubmV3RW1haWwsIHZtLmlucHV0cy5uZXdQYXNzd29yZClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKGRiVXNlckRhdGEpIHtcblx0XHRcdFx0XG5cdFx0XHRcdC8vbWFpbnRhaW4gbG9jYWwgdmFsdWVzIHRvIHNwZWVkIHVwIHVzZXIgZXhwZXJpZW5jZVxuXHRcdFx0XHRuZXdVc2VyRGF0YS5sb2FkUHJpbWFyaWVzKHZtLmlucHV0cy5uZXdFbWFpbCwgdm0uaW5wdXRzLm5ld05hbWUsIGRiVXNlckRhdGEudWlkKTtcblxuXHRcdFx0XHQvL2NyZWF0ZSBhIHVzZXIgcHJvZmlsZSBpbiB0aGUgZGF0YWJhc2Vcblx0XHRcdFx0Y3JlYXRlTmV3VXNlci5hZGROZXdVc2VyVG9EYXRhYmFzZShkYlVzZXJEYXRhLnVpZCwgdm0uaW5wdXRzLm5ld05hbWUsIHZtLmlucHV0cy5uZXdFbWFpbClcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24obWVzc2FnZSkge1xuXG5cdFx0XHRcdFx0JGxvZy5pbmZvKG1lc3NhZ2UpO1xuXG5cdFx0XHRcdFx0Ly9hZGQgdGhpcyB1c2VyIHRvIHRoZSBsaXN0IG9mIHJlZ2lzdGVyZWQgdXNlcnNcblx0XHRcdFx0XHRjcmVhdGVOZXdVc2VyLmFkZE5ld1VzZXJUb1JlZ1VzZXJzTGlzdChkYlVzZXJEYXRhLnVpZCwgdm0uaW5wdXRzLm5ld0VtYWlsKVxuXHRcdFx0XHRcdC50aGVuKGZ1bmN0aW9uKG1lc3NhZ2UpIHtcblxuXHRcdFx0XHRcdFx0Ly9yZWRpcmVjdCB1c2luZyB0aGUgdWlkXG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdC8vcmVkaXJlY3QgdG8gdGhlIG5leHQgcGFnZSBcblx0XHRcdFx0XHRcdG5ld1VzZXJTaGVycGEucmVkaXJlY3RUbygnL3VzZXJJbmZvcm1hdGlvbicsIGRiVXNlckRhdGEudWlkKTtcblx0XHRcdFx0XHRcdCBcblx0XHRcdFx0XHRcdCRsb2cuaW5mbyhtZXNzYWdlKTsgXG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyAkbG9nLmluZm8obWVzc2FnZSk7IH0pXG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5jYXRjaChmdW5jdGlvbihtZXNzYWdlKSB7ICRsb2cuaW5mbyhtZXNzYWdlKTsgfSlcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyAkbG9nLmluZm8obWVzc2FnZSk7IH0pXG5cdFx0XHRcblx0XHR9XG5cblx0fVxuXHRcblx0Ly9ydW4gdGltZSBhY3Rpb25zXG5cbn1cblxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignUmVnVXNlckxvZ2luQ29udHJvbGxlcicsIFJlZ1VzZXJMb2dpbkNvbnRyb2xsZXIpO1xuXG5SZWdVc2VyTG9naW5Db250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJGRvY3VtZW50JywgJ2JhY2tlbmRTZXJ2aWNlcycsICd0cmFmZmljVmFsZXQnLCAndXNlckRhdGEnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBSZWdVc2VyTG9naW5Db250cm9sbGVyKCRsb2csICRkb2N1bWVudCwgYmFja2VuZFNlcnZpY2VzLCB0cmFmZmljVmFsZXQsIHVzZXJEYXRhKSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cblx0Ly9kZWZpbmUgdm0gaW5wdXQgdmFyaWFibGVzXG5cdHZtLmlucHV0cyA9IHtcblx0XHRlbWFpbDogJycsXG5cdFx0cGFzc3dvcmQ6ICcnLFxuXHRcdHJlcXVpcmVkRmllbGRzRGVmaW5lZDogZmFsc2Vcblx0fVxuXHR2bS5lcnJvcnMgPSB7XG5cdFx0bWVzc2FnZTogJycsXG5cdFx0cGFzc2VzQWxsVGVzdHM6IHRydWVcblx0fVxuXHR2bS51bmNsb2NrVXNlckxvZ2luQnRuID0ge1xuXHRcdCd1c2FibGUnOmZhbHNlLCBcblx0XHQnY2xhc3MnOididG4gYnRuLXdhcm5pbmcnLFxuXHRcdG1lc3NhZ2U6ICdOZWVkIEVtYWlsICYgUGFzcydcblx0fVxuXG5cdC8vbWV0aG9kc1xuXHRmdW5jdGlvbiBvcGVuVXNlckxvZ2luQnRuKCkge1xuXHRcdC8vY2hlY2sgdGhhdCB0aGVyZSBpcyBhbiBlbWFpbCBhbmQgdGhlcmUgaXMgYSBwYXNzd29yZFxuXHRcdGlmKFx0YW5ndWxhci5pc0RlZmluZWQodm0uaW5wdXRzLmVtYWlsKSAmJiB2bS5pbnB1dHMuZW1haWwgIT09ICcnICYmXG5cdFx0XHRhbmd1bGFyLmlzRGVmaW5lZCh2bS5pbnB1dHMucGFzc3dvcmQpICYmIHZtLmlucHV0cy5wYXNzd29yZCAhPT0gJycpIFxuXHRcdHtcblx0XHRcdHZtLmlucHV0cy5yZXF1aXJlZEZpZWxkc0RlZmluZWQgPSB0cnVlO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi5jbGFzcyA9ICdidG4gYnRuLXN1Y2Nlc3MnO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi5tZXNzYWdlID0gJ0xvZ2luJztcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlID0gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dm0uaW5wdXRzLnJlcXVpcmVkRmllbGRzRGVmaW5lZCA9IGZhbHNlO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi5jbGFzcyA9ICdidG4gYnRuLXdhcm5pbmcnO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi5tZXNzYWdlID0gJ05lZWQgRW1haWwgJiBQYXNzJztcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlID0gZmFsc2U7XG5cdFx0fVxuXG5cdH1cblxuXHQvL3ZpZXcgbW9kZWwgbWV0aG9kc1xuXHR2bS51cGRhdGUgPSBmdW5jdGlvbigpIHtcblx0XHQvL3NldCB2YWx1ZXNcblx0XHR2bS5pbnB1dHMuZW1haWwgPSAkZG9jdW1lbnQuZmluZCgnI3VzZXJFbWFpbCcpWzBdLnZhbHVlO1xuXHRcdHZtLmlucHV0cy5wYXNzd29yZCA9ICRkb2N1bWVudC5maW5kKCcjdXNlclBhc3N3b3JkJylbMF0udmFsdWU7XG5cdFx0XG5cdFx0b3BlblVzZXJMb2dpbkJ0bigpO1xuXHR9XG5cblx0dm0ubG9naW5SZWdpc3RlcmVkVXNlciA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgcmVnaXN0ZXJlZFVzZXJTaGVycGEgPSB0cmFmZmljVmFsZXQ7XG5cblx0XHQvL2NvbmZpcm0gYWxsIGZpZWxkcyBhcmUgdmFsaWRcblx0XHRpZih0cnVlKSB7XG5cdFx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgZGF0YWJhc2UgPSBiYWNrZW5kU2VydmljZXM7XG5cdFx0XHR2YXIgcmVnaXN0ZXJlZFVzZXJEYXRhID0gdXNlckRhdGE7XG5cblx0XHRcdC8vdmVyaWZ5IHVzZXJzIGNyZWRlbnRpYWxzXG5cdFx0XHRkYXRhYmFzZS5Mb2dpblJlZ2lzdGVyZWRVc2VyKHZtLmlucHV0cy5lbWFpbCwgdm0uaW5wdXRzLnBhc3N3b3JkKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24odXNlckNyZWRlbnRpYWxzKSB7XG5cdFx0XHRcdC8vaWYgbm8gdHJvdWJsZSBsb2dnaW5nIGluIHVwZGF0ZSBlcnJvciBvYmplY3Rcblx0XHRcdFx0dm0uZXJyb3JzLnBhc3Nlc0FsbFRlc3RzID0gdHJ1ZTtcblxuXHRcdFx0XHQvL2FkZCBwcmltYXJ5IGluZm9ybWF0aW9uIHRvIGxvY2FsIG1vZGVsXG5cdFx0XHRcdHJlZ2lzdGVyZWRVc2VyRGF0YS5zZXRQcmltYXJpZXNMb2NhbGx5KHZtLmlucHV0cy5lbWFpbCwgdm0uaW5wdXRzLm5hbWUsIHVzZXJDcmVkZW50aWFscy51aWQpO1xuXG5cdFx0XHR9KVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCRsb2cuaW5mbyhcInVpZCBpcyBcIiArIHJlZ2lzdGVyZWRVc2VyRGF0YS5nZXRVSURMb2NhbGx5KCkpO1xuXG5cdFx0XHRcdGRhdGFiYXNlLmdldFVzZXJCaW8ocmVnaXN0ZXJlZFVzZXJEYXRhLmdldFVJRExvY2FsbHkoKSlcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24odXNlckJpbykge1xuXHRcdFx0XHRcdC8vdXBkYXRlIHVzZXJEYXRhIG1vZGVsIHdpdGggdXNlckJpb1xuXHRcdFx0XHRcdHJlZ2lzdGVyZWRVc2VyRGF0YS51cGRhdGVCaW9Mb2NhbGx5KHVzZXJCaW8pO1xuXG5cdFx0XHRcdFx0Ly9sb2FkIHVzZXIgZXZlbnRzXG5cdFx0XHRcdFx0ZGF0YWJhc2UuZ2V0VXNlckV2ZW50cyhyZWdpc3RlcmVkVXNlckRhdGEuZ2V0VUlETG9jYWxseSgpKVxuXHRcdFx0XHRcdC50aGVuKGZ1bmN0aW9uKGFsbEV2ZW50c0ZvclRoaXNVc2VyKSB7XG5cdFx0XHRcdFx0XHQvL3VwZGF0ZSB1c2VyRGF0YSBtb2RlbCB3aXRoIHVzZXJFdmVudHNcblx0XHRcdFx0XHRcdHJlZ2lzdGVyZWRVc2VyRGF0YS51cGRhdGVBbGxVc2VyRXZlbnRzTG9jYWxseShhbGxFdmVudHNGb3JUaGlzVXNlcik7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyAkbG9nLmluZm8obWVzc2FnZSk7IH0pXG5cblx0XHRcdFx0fSlcblx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKG1lc3NhZ2UpIHsgJGxvZy5pbmZvKG1lc3NhZ2UpOyB9KVxuXG5cdFx0XHRcdC8vcmVkaXJlY3QgdG8gdGhlIG5leHQgcGFnZSBcblx0XHRcdFx0cmVnaXN0ZXJlZFVzZXJTaGVycGEucmVkaXJlY3RUbygnL3VzZXJJbmZvcm1hdGlvbicsIHJlZ2lzdGVyZWRVc2VyRGF0YS5nZXRVSURMb2NhbGx5KCkpO1xuXG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKG1lc3NhZ2UpIHsgXG5cdFx0XHRcdC8vaWYgdGhlcmUgd2FzIGFuIGVycm9yIGxvZ2dpbmcgaW4sIGxldCB0aGUgdXNlciBrbm93XG5cdFx0XHRcdHZtLmVycm9ycy5tZXNzYWdlID0gbWVzc2FnZTtcblx0XHRcdFx0dm0uZXJyb3JzLnBhc3Nlc0FsbFRlc3RzID0gZmFsc2U7XG5cdFx0XHR9KVxuXG5cdFx0XHQvL3VzZSB1aWQgdG8gY29sbGVjdCB1c2VyIGJpb1xuXHRcdFx0XG5cdFx0fVxuXG5cdH1cblxuXHR2bS5jbGlja2VkID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHVzZXJBdXRoZW50aWNhdGlvbiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdHVzZXJBdXRoZW50aWNhdGlvbi5sb2dVc2VyT3V0KCk7XG5cdH1cblxuXHQvL3J1biBjb21tYW5kc1xufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcigndG9wTWVudUNvbnRyb2xsZXInLCB0b3BNZW51Q29udHJvbGxlcik7XG5cbnRvcE1lbnVDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJywgJyRsb2NhdGlvbicsICckZG9jdW1lbnQnLCAnJHdpbmRvdyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHRvcE1lbnVDb250cm9sbGVyKCRzY29wZSwgJGxvZywgJGxvY2F0aW9uLCAkZG9jdW1lbnQsICR3aW5kb3cpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHQvL2xvY2FsIHZhcmlhYmxlc1xuXHR2bS5sb2dnZWRJbiA9IGZhbHNlXG5cblx0Ly9zdHlsZXMgdmFyaWFibGVzXG5cdFxuXHQvL2V2ZW50IGxpc3RlbmVyc1xuXHRpZiAoJ2FkZEV2ZW50TGlzdGVuZXInIGluICRkb2N1bWVudCkge1xuXHQgICAgJGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHtcblx0ICAgIFx0JGxvZy5pbmZvKCdhZGRpbmcgRmFzdENsaWNrJyk7XG5cdCAgICAgICAgRmFzdENsaWNrLmF0dGFjaCgkZG9jdW1lbnQuYm9keSk7XG5cdCAgICB9LCBmYWxzZSk7XG5cdH1cblxuXHRhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdykuYmluZCgncmVzaXplJywgZnVuY3Rpb24oKSB7XG5cdFx0dm0ub25SZXNpemVGdW5jdGlvbigpO1xuXHRcdCRzY29wZS4kYXBwbHkoKTtcblx0fSk7XG5cblx0YW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cdFx0aWYoJHdpbmRvdy5vdXRlcldpZHRoIDwgNjAwKSB7XG5cdFx0XHR2bS5vblJlc2l6ZUZ1bmN0aW9uKCk7XG5cdFx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cdFx0fVxuXHR9KVxuXHQvL2R5bmFtaWNhbGx5IHNldCBpbnB1dCB3aWR0aFxuXG5cblx0Ly8gQ3JlYXRlIGEgY2FsbGJhY2sgd2hpY2ggbG9ncyB0aGUgY3VycmVudCBhdXRoIHN0YXRlXG5cdGZ1bmN0aW9uIGluaXQoKSB7XG5cdFx0dm0ub25SZXNpemVGdW5jdGlvbigpO1xuXHRcdCRzY29wZS4kYXBwbHkoKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGF1dGhEYXRhQ2FsbGJhY2soYXV0aERhdGEpIHtcblx0ICBpZiAoYXV0aERhdGEpIHtcblx0ICAgICRsb2cuaW5mbyhcIlVzZXIgXCIgKyBhdXRoRGF0YS51aWQgKyBcIiBpcyBsb2dnZWQgaW4gd2l0aCBcIiArIGF1dGhEYXRhLnByb3ZpZGVyKTtcblx0ICAgIHZtLmxvZ2dlZEluID0gdHJ1ZTtcblx0ICB9IGVsc2Uge1xuXHQgICAgJGxvZy5pbmZvKFwiVXNlciBpcyBsb2dnZWQgb3V0XCIpO1xuXHQgICAgdm0ubG9nZ2VkSW4gPSBmYWxzZTtcblx0ICB9XG5cdH1cblxuXHRmdW5jdGlvbiByZWRpcmVjdChwYXRoLCB1c2VyRGF0YSkge1xuXHRcdHZhciBmdWxsUGF0aCA9IHBhdGggKyAnLycgKyB1c2VyRGF0YS51aWQgKyAnLycgKyB1c2VyRGF0YS50b2tlbjtcblx0XHQvL3JlZGlyZWN0XG5cdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyB0bzogJyArIGZ1bGxQYXRoKTtcblx0XHQkbG9jYXRpb24ucGF0aChmdWxsUGF0aCk7XG5cdFx0Ly8kc2NvcGUuJGFwcGx5KCk7XG5cdH1cblxuXHQvL3ZtIGFjY2Vzc2libGUgbWV0aG9kc1xuXHR2bS5sb2dvdXQgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9nLmluZm8oJ2xvZ2dpbmcgb3V0IScpO1xuXHRcdHZtLmxvZ2dlZEluID0gZmFsc2U7XG5cdFx0cmVmLnVuYXV0aCgpO1xuXHRcdHJlZGlyZWN0KCcvJywge3VpZDonJywgdG9rZW46Jyd9KTtcblx0fVxuXG5cdHZtLm5hdkJhckxvZ2luUmVnaXN0ZXJlZFVzZXIgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9nLmluZm8oJ2xhdW5jaGluZyBsb2dpbicpO1xuXHRcdGlmKHRydWUpIHtcblx0XHQvL2lmKHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlKSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZVxuXHRcdFx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cblx0XHRcdC8vYXV0aGVudGljYXRlIHRoZSB1c2VyXG5cdFx0XHRyZWYuYXV0aFdpdGhQYXNzd29yZCh7XG5cdFx0XHRcdGVtYWlsOiB2bS5uYXZiYXJVc2VyRW1haWwsXG5cdFx0XHRcdHBhc3N3b3JkOiB2bS5uYXZiYXJVc2VyUGFzc1xuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IsIGF1dGhEYXRhKSB7XG5cdFx0XHRcdGlmKGVycm9yKSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdFcnJvciBMb2dnaW5nIEluOiAnICsgZXJyb3IpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnTG9nZ2VkIEluIHN1Y2Nlc3NmdWxseTogJyArIGF1dGhEYXRhLnVpZCk7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKGF1dGhEYXRhKTtcblx0XHRcdFx0XHQvL3NhdmUgYWxsIHRoZSBkYXRhXG5cblx0XHRcdFx0XHQvL2xvYWQgdXNlciBiaW9cblx0XHRcdFx0XHQvL2xvYWQgdXNlciBldmVudHNcblxuXHRcdFx0XHRcdC8vcmVkaXJlY3Rcblx0XHRcdFx0XHRyZWRpcmVjdCgnL3VzZXJJbmZvcm1hdGlvbicsIGF1dGhEYXRhKTtcblx0XHRcdFx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cblx0XHRcdFx0XHQvL2NsaWNrIGNsb3NlZCB0aGUgbmF2YmFyXG5cdFx0XHRcdFx0YW5ndWxhci5lbGVtZW50KCcubmF2YmFyLXRvZ2dsZScpLmNsaWNrKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cblxuXHRcdH1cblxuXHR9XG5cblx0dm0ub25SZXNpemVGdW5jdGlvbiA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBuYXZiYXJJbnB1dHMgPSBhbmd1bGFyLmVsZW1lbnQoJy5uYXZiYXJJbnB1dHMnKTtcblx0XHRuYXZiYXJJbnB1dHMuY3NzKCd3aWR0aCcsICgkd2luZG93Lm91dGVyV2lkdGggLSAyNikgKyAncHgnKTtcblx0fVxuXG5cdC8vIFJlZ2lzdGVyIHRoZSBjYWxsYmFjayB0byBiZSBmaXJlZCBldmVyeSB0aW1lIGF1dGggc3RhdGUgY2hhbmdlc1xuXHRyZWYub25BdXRoKGF1dGhEYXRhQ2FsbGJhY2spO1xufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignVXNlckV2ZW50c0NvbnRyb2xsZXInLCBVc2VyRXZlbnRzQ29udHJvbGxlcik7XG5cblVzZXJFdmVudHNDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJHJvdXRlUGFyYW1zJywgJ3VzZXJEYXRhJywgJ3RyYWZmaWNWYWxldCddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIFVzZXJFdmVudHNDb250cm9sbGVyKCRsb2csICRyb3V0ZVBhcmFtcywgdXNlckRhdGEsIHRyYWZmaWNWYWxldCkge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHR2YXIgY3VycmVudFVzZXIgPSB1c2VyRGF0YTtcblxuXHQvL2xvY2FsIHZpZXcgdmFyaWFibGVzXG5cdHZtLnNob3dEZWNsaW5lID0gZmFsc2U7XHQvL3doYXQgaXMgdGhpcyBiZWluZyB1c2VkIGZvcj9cblx0dm0udXNlckJpbyA9IHt9XG5cdHZtLmV2ZW50cyA9IHt9O1xuXHR2bS5zZWN0aW9uQXZhaWxhYmxlID0ge1xuXHRcdHBlbmRpbmc6IGZhbHNlLFxuXHRcdGF0dGVuZGluZzogZmFsc2UsXG5cdFx0aG9zdGluZzogZmFsc2UsXG5cdFx0Y29tcGxldGVkOiBmYWxzZVxuXHR9O1xuXHR2bS5lcnJvcnMgPSB7fTtcblxuXHQvL2RlY2xhcmUgbG9jYWwgbWV0aG9kc1xuXHRmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fTtcblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH07XG5cblx0ZnVuY3Rpb24gbm9PZkhvc3RlRXZlbnRzKCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZVxuXHRcdHZhciBjb3VudGVyID0gMDtcblxuXHRcdGZvcihldmVudCBpbiB2bS5ldmVudHMuaG9zdGluZykgY291bnRlcisrO1xuXG5cdFx0cmV0dXJuIGNvdW50ZXI7XG5cdH1cblxuXHRmdW5jdGlvbiBnZW5lcmF0ZUV2ZW50SUQoKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYXRlID0gbmV3IERhdGUoKTtcblx0XHR2YXIgZXZlbnRJRCA9IChkYXRlVGltZVRvVW5peFRpbWUoZGF0ZSkgKiAxMCkgKyAobm9PZkhvc3RlRXZlbnRzKCkpO1xuXG5cdFx0cmV0dXJuIGV2ZW50SUQ7XG5cdH1cblxuXHRmdW5jdGlvbiBjaGVja0ZvckV2ZW50cygpIHtcblx0XHRcblx0XHQvL2xvb3AgdGhyb3VnaCBhbGwgdGhlIGV2ZW50IGNhdGVnb3JpZXNcblx0XHRPYmplY3Qua2V5cyh2bS5ldmVudHMpLmZvckVhY2goZnVuY3Rpb24oY2F0ZWdvcnkpIHtcblx0XHRcdFxuXHRcdFx0Ly9pbnNpZGUgZWFjaCBjYXRlZ29yeSBjb3VudCB0aGUgbnVtYmVyIG9mIGV2ZW50IG9iamVjdHMuLi5OT1QgdXBkYXRlZCBwbGFjZWhvbGRlciB0aG91Z2hcblx0XHRcdE9iamVjdC5rZXlzKHZtLmV2ZW50c1tjYXRlZ29yeV0pLmZvckVhY2goZnVuY3Rpb24oZXZlbnRJRCkge1xuXHRcdFx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVcblx0XHRcdFx0dmFyIGNvdW50ZXIgPSAwO1xuXHRcdFx0XHQvL2NvdW50IGV2ZW50cyB3aXRoIGlkJ3MgLyBOT1QgJ3VwZGF0ZWQnIHBsYWNlaG9sZGVyc1xuXHRcdFx0XHRpZihhbmd1bGFyLmlzT2JqZWN0KHZtLmV2ZW50c1tjYXRlZ29yeV1bZXZlbnRJRF0pKSBjb3VudGVyKys7XG5cdFx0XHRcdFxuXHRcdFx0XHQvL2lmIGF0IGxlYXN0IG9uZSBldmVudCBpZCAob2JqZWN0KSB3YXMgY291bnRlZCwgdGhlbiBzaG93IHRoZSBzZWN0aW9uXG5cdFx0XHRcdGlmKGNvdW50ZXIgPiAwKSB2bS5zZWN0aW9uQXZhaWxhYmxlW2NhdGVnb3J5XSA9IHRydWU7XG5cdFx0XHRcdGVsc2Ugdm0uc2VjdGlvbkF2YWlsYWJsZVtjYXRlZ29yeV0gPSBmYWxzZTtcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGluaXRpYWxpemUoKSB7XG5cdFx0JGxvZy5pbmZvKGN1cnJlbnRVc2VyLmdldEFsbFVzZXJFdmVudHNMb2NhbGx5KCkpO1xuXHRcdC8vbWFrZSBzdXJlIHRoZSB1aWQgaXMgc2V0XG5cdFx0Y3VycmVudFVzZXIuc2V0VUlETG9jYWxseSgkcm91dGVQYXJhbXMudWlkKTtcblxuXHRcdC8vbG9hZCB0aGUgdXNlciBiaW9cblx0XHRjdXJyZW50VXNlci5sb2FkQmlvKCRyb3V0ZVBhcmFtcy51aWQpXG5cdFx0LnRoZW4oZnVuY3Rpb24ocmV0cmlldmVkQmlvKSB7XG5cdFx0XHR2bS51c2VyQmlvID0gcmV0cmlldmVkQmlvO1xuXHRcdH0pXG5cdFx0LmNhdGNoKClcblxuXHRcdC8vbG9hZCB1c2VyIGV2ZW50cyBwcm9ncmVzc2l2bGV5XG5cdFx0Ly9maXN0IHdoYXRldmVyIGlzIGluIHRoZSBtb2RlbCBhbHJlYWR5XG5cdFx0dm0uZXZlbnRzID0gY3VycmVudFVzZXIuZ2V0QWxsVXNlckV2ZW50c0xvY2FsbHkoKTtcblxuXHRcdC8vdGhlbiBjYWxsIHRvIHRoZSBkYiBhbmQgZ2V0IHRoZSBtb3N0IHVwIHRvIGRhdGUgaW5mb1xuXHRcdGN1cnJlbnRVc2VyLmdldFJlbW90ZUV2ZW50c0ZvckxvY2FsKClcblx0XHQudGhlbihmdW5jdGlvbihvYnRhaW5lZFVzZXJFdmVudHMpIHtcblx0XHRcdCRsb2cuaW5mbygnY2hlY2tpbmcgdGhlIGRiIGZvciBldmVudHMnKTtcblx0XHRcdC8vdXBkYXRlIHRoZSB2aWV3IG1vZGVsIHdpdGggdGhlIHVwZGF0ZWQgREIgcmVzdWx0c1xuXHRcdFx0dm0uZXZlbnRzID0gY3VycmVudFVzZXIuZ2V0QWxsVXNlckV2ZW50c0xvY2FsbHkoKTtcblx0XHR9KVxuXHRcdC50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdFx0Ly9ub3cgdGhhdCBldmVudHMgYXJlIGxvYWRlZCwgcmVmbGVjdCBpdCBpbiB0aGUgdmlldyBtb2RlbFxuXHRcdFx0Y2hlY2tGb3JFdmVudHMoKTtcblx0XHR9KVxuXG5cdH1cblxuXHQvL2RlY2xhcmUgdmlldyBtZXRob2RzXG5cdHZtLmNyZWF0ZU5ld0V2ZW50ID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGV2ZW50SUQgPSBnZW5lcmF0ZUV2ZW50SUQoKTtcblx0XHR2YXIgbmV3RXZlbnRTaGVycGEgPSB0cmFmZmljVmFsZXQ7XG5cblx0XHQvL2FkZCB0aGUgZXZlbnQgdG8gdGhlIG1vZGFsIChsb2NhbGx5IE9OTFkpXG5cdFx0Y3VycmVudFVzZXIuY3JlYXRlTmV3RXZlbnQoZXZlbnRJRClcblx0XHQvKi50aGVuKGZ1bmN0aW9uKGFmZmlybWF0aXZlUmVzcG9uc2UpIHtcblx0XHRcdC8vcmVwb3J0IHRoZSBzdWNjZXNzXG5cdFx0XHQkbG9nLmluZm8oYWZmaXJtYXRpdmVSZXNwb25zZSk7XG5cdFx0fSlcblx0XHQudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdC8vaWYgdGhlcmUgd2FzIGFuIHVwZGF0ZWQgZmllbGQsIHJlbW92ZSBpdCBub3dcblx0XHRcdGN1cnJlbnRVc2VyLmNsZWFuREJFdmVudHNDYXRlZ29yeSgnaG9zdGluZycpO1xuXG5cdFx0fSlcblx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3JSZXNwb25zZSkge1xuXHRcdFx0Ly9yZXBvcnQgdGhlIGVycm9yXG5cdFx0XHQkbG9nLmluZm8oZXJyb3JSZXNwb25zZSk7XG5cdFx0fSkqL1xuXHRcdFxuXG5cdFx0Ly9yZWRpcmVjdCB0byB0aGUgbmV3IGV2ZW50IHBhZ2VcdFx0XG5cdFx0bmV3RXZlbnRTaGVycGEucmVkaXJlY3RUbygnL2V2ZW50JywgZXZlbnRJRCwgY3VycmVudFVzZXIuZ2V0VUlETG9jYWxseSgpLCBjdXJyZW50VXNlci5nZXRVSURMb2NhbGx5KCkpO1xuXHR9XG5cblx0Ly9leGVjdXRlIHNjcmlwdHNcblx0aW5pdGlhbGl6ZSgpO1xuXG59XG5cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ1VzZXJJbmZvcm1hdGlvbkNvbnRyb2xsZXInLCBVc2VySW5mb3JtYXRpb25Db250cm9sbGVyKTtcblxuVXNlckluZm9ybWF0aW9uQ29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJywgJyRkb2N1bWVudCcsICckcm91dGVQYXJhbXMnLCd1c2VyRGF0YScsICd0cmFmZmljVmFsZXQnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBVc2VySW5mb3JtYXRpb25Db250cm9sbGVyKCRsb2csICRkb2N1bWVudCwgJHJvdXRlUGFyYW1zLCB1c2VyRGF0YSwgdHJhZmZpY1ZhbGV0KSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdFxuXHQvL2xvY2FsIHZhcmlhYmxlc1xuXHR2YXIgY3VycmVudFVzZXIgPSB1c2VyRGF0YTtcblxuXHQvL3ZpZXcgbW9kZWwgdmFyaWFibGVzXG5cdHZtLnVzZXIgPSB7fTtcblx0dm0udGVtcEJpcnRoZGF5O1xuXHR2bS52aWV3ID0ge1xuXHRcdGRhdGFUb1NhdmU6IGZhbHNlLFxuXHRcdGlzRGF0YTogZmFsc2UsXG5cdFx0YnRuTXNzZzogJ01vdmUgT24uLi4nLFxuXHRcdHByb2NlZWRCdG46ICdidG4gYnRuLXByaW1hcnknXG5cdH07XG5cblx0Ly9sb2NhbCBtZXRob2RzXG5cdGZ1bmN0aW9uIHVuaXhUaW1lVG9EYXRlVGltZSh1bml4VGltZSkge1xuXHRcdHJldHVybiBuZXcgRGF0ZShwYXJzZUludCh1bml4VGltZSkpO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIGRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fTtcblxuXHQvL3ZpZXcgYWNjZXNzaWJsZSBtZXRob2RzXG5cdHZtLmNoZWNrVmFsdWVzID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly90aHJvdyB0aGUgaXNEYXRhIGZsYWcgaWYgc29tZXRoaW5nIGlzIHVwZGF0ZWRcblx0XHR2bS52aWV3LmlzRGF0YSA9IHRydWU7XG5cblx0XHRpZiggIShhbmd1bGFyLmlzVW5kZWZpbmVkKHZtLnVzZXIuY29tcGFueSkgfHwgdm0udXNlci5jb21wYW55ID09PSAnJykgfHwgXG5cdFx0XHQhKGFuZ3VsYXIuaXNVbmRlZmluZWQodm0udXNlci50aXRsZSkgfHwgdm0udXNlci50aXRsZSA9PT0gJycpIHx8IFxuXHRcdFx0IShhbmd1bGFyLmlzVW5kZWZpbmVkKHZtLnVzZXIuZG9iKSB8fCB2bS51c2VyLmRvYiA9PT0gJycpKSBcblx0XHR7XG5cdFx0XHR2bS52aWV3LmRhdGFUb1NhdmUgPSB0cnVlO1xuXHRcdFx0dm0udmlldy5wcm9jZWVkQnRuID0gJ2J0biBidG4tc3VjY2Vzcyc7XG5cdFx0XHR2bS52aWV3LmJ0bk1zc2cgPSAnU2F2ZSAmIENvbnRpbnVlJztcblx0XHR9IGVsc2Uge1xuXHRcdFx0dm0udmlldy5kYXRhVG9TYXZlID0gZmFsc2U7XG5cdFx0XHR2bS52aWV3LnByb2NlZWRCdG4gPSAnYnRuIGJ0bi1wcmltYXJ5Jztcblx0XHRcdHZtLnZpZXcuYnRuTXNzZyA9ICdNb3ZlIE9uLi4uJztcdFxuXHRcdH1cblxuXHR9XG5cblx0dm0udXBkYXRlRE9CID0gZnVuY3Rpb24oKSB7XG5cdFx0dm0udXNlci5kb2IgPSBkYXRlVGltZVRvVW5peFRpbWUodm0udGVtcEJpcnRoZGF5KTtcblx0XHR2bS5jaGVja1ZhbHVlcygpO1xuXHR9XG5cblx0dm0uc2F2ZUFuZE1vdmVPbiA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIHVzZXJJbmZvU2hlcnBhID0gdHJhZmZpY1ZhbGV0O1xuXHRcdHZhciBjdXJyZW50VWlkID0gY3VycmVudFVzZXIuZ2V0VUlETG9jYWxseSgpO1xuXG5cdFx0Ly9jb252ZXJ0IERPQiB0byB1bml4VGltZSBhbmQgc2F2ZVxuXHRcdGlmKHZtLnRlbXBCaXJ0aGRheSAhPT0gMCkgdm0udXBkYXRlRE9CKCk7XG5cdFx0XG5cdFx0Ly9pZiB0aGVyZSBpc24ndCBjdXJyZW50bHkgYSBkb2IsIGdyYWIgZnJvbSB0aGUgcm91dGUgcGFyYW1zXG5cdFx0aWYoY3VycmVudFVpZCA9PSAnJyB8fCBhbmd1bGFyLmlzVW5kZWZpbmVkKGN1cnJlbnRVaWQpKSB7XG5cdFx0XHRjdXJyZW50VXNlci5zZXRVSURMb2NhbGx5KCRyb3V0ZVBhcmFtcy51aWQpO1xuXHRcdH1cblxuXHRcdC8vaWYgdGhlcmUgaXMgbmV3IGRhdGEsIHNhdmUgaXRcblx0XHRpZih2bS52aWV3LmlzRGF0YSkge1xuXHRcdFx0JGxvZy5pbmZvKCdzYXZpbmcgdGhlIG5ldyBkYXRhJyk7XG5cdFx0XHRjdXJyZW50VXNlci51cGRhdGVCaW9Mb2NhbGx5KHZtLnVzZXIpO1xuXHRcdH1cblx0XHRcblx0XHQvL21vdmUgb25cblx0XHR1c2VySW5mb1NoZXJwYS5yZWRpcmVjdFRvKCcvdXNlckV2ZW50cycsIHZtLnVzZXIudWlkKVxuXHR9XG5cblx0ZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHtcblx0XHQvL2xvYWQgRmFzdENsaWNrXG5cdFx0Ly9GYXN0Q2xpY2suYXR0YWNoKCRkb2N1bWVudC5ib2R5KTtcblx0XHRcblx0XHQvL2xvYWQgdXNlckRhdGEgbG9jYWxseSBvciBmcm9tIGRiXG5cdFx0Y3VycmVudFVzZXIubG9hZEJpbygkcm91dGVQYXJhbXMudWlkKVxuXHRcdC50aGVuKGZ1bmN0aW9uKG9idGFpbmVkVXNlckRhdGEpIHtcblx0XHRcdC8vYXNzaWduIHVzZXIgdmFsdWVzXG5cdFx0XHR2bS51c2VyID0gb2J0YWluZWRVc2VyRGF0YTtcblxuXHRcdFx0Ly9idWlsZCB0ZW1wQmlydGhkYXlcblx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKG9idGFpbmVkVXNlckRhdGEuZG9iKSAmJiBvYnRhaW5lZFVzZXJEYXRhLmRvYiAhPT0gJycpIHtcblx0XHRcdFx0dm0udGVtcEJpcnRoZGF5ID0gdW5peFRpbWVUb0RhdGVUaW1lKG9idGFpbmVkVXNlckRhdGEuZG9iKVxuXHRcdFx0fVxuXG5cdFx0fSk7XG5cdFxuXHR9XG5cblx0Ly9ydW4gcHJvY2Vzc2VzXG5cdGluaXRpYWxpemUoKTsgLy93aXRoIGludGVybmV0IHVzZSB0aGUgZXZlbnQgbGlzdGVuZXIgaW5zdGVhZFxufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuZmFjdG9yeSgnYXV0aFNlcnZpY2UnLCBhdXRoU2VydmljZSk7XG5cbmF1dGhTZXJ2aWNlLiRpbmplY3QgPSBbJyRsb2cnLCAnYmFja2VuZFNlcnZpY2VzJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gYXV0aFNlcnZpY2UoJGxvZywgYmFja2VuZFNlcnZpY2VzKSB7XG5cblx0dmFyIGFsbEF1dGhTZXJ2aWNlcyA9IHtcblx0XHRpc0xvZ2dlZEluOiBpc0xvZ2dlZEluXG5cdH07XG5cblx0ZnVuY3Rpb24gaXNMb2dnZWRJbigpIHtcblx0XHQvL2NoZWNrIHRoZSB1c2VyIGF1dGhlbnRpY2Fpb24gc3RhdGVcblx0XHR2YXIgZGJBdXRoZW50aWNhdGlvbiA9IGJhY2tlbmRTZXJ2aWNlcztcblx0XHRcblx0XHRkYkF1dGhlbnRpY2F0aW9uLmNoZWNrTG9naW5TdGF0dXMoKVxuXHRcdC50aGVuKGZ1bmN0aW9uKHN0YXR1cykge1xuXHRcdFx0cmV0dXJuIHN0YXR1cztcblx0XHR9KVxuXHRcdC5jYXRjaChmdW5jdGlvbihzdGF0dXMpIHtcblx0XHRcdHJldHVybiBzdGF0dXM7XG5cdFx0fSlcblx0fVxuXHRcblx0cmV0dXJuIGFsbEF1dGhTZXJ2aWNlcztcblxufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuZmFjdG9yeSgnYmFja2VuZFNlcnZpY2VzJywgYmFja2VuZFNlcnZpY2VzKTtcblxuYmFja2VuZFNlcnZpY2VzLiRpbmplY3QgPSBbJyRsb2cnLCAnJHEnLCAnJHdpbmRvdyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGJhY2tlbmRTZXJ2aWNlcygkbG9nLCAkcSwgJHdpbmRvdykge1xuXHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdHZhciBmYlVSTCA9ICdodHRwczovL21lZXR1cHBsYW5uZXIuZmlyZWJhc2Vpby5jb20vJztcblx0dmFyIGFsbEJhY2tlbmRTZXJ2aWNlcyA9IHtcblx0XHR1dGY4X3RvX2I2NDogdXRmOF90b19iNjQsIFx0XHRcdFx0XHRcdC8vbG9jYWwgZnVuY3Rpb25zIHRvIGNvbnZlcnQgZGF0ZXNcblx0XHRiNjRfdG9fdXRmODogYjY0X3RvX3V0ZjgsXG5cdFx0dW5peFRpbWVUb0RhdGVUaW1lOiB1bml4VGltZVRvRGF0ZVRpbWUsXG5cdFx0ZGF0ZVRpbWVUb1VuaXhUaW1lOiBkYXRlVGltZVRvVW5peFRpbWUsXG5cblx0XHRMb2dpblJlZ2lzdGVyZWRVc2VyOiBMb2dpblJlZ2lzdGVyZWRVc2VyLFx0XHQvL2F1dGhlbnRpY2Fpb25cblx0XHRjaGVja0xvZ2luU3RhdHVzOiBjaGVja0xvZ2luU3RhdHVzLFxuXHRcdGxvZ1VzZXJPdXQ6IGxvZ1VzZXJPdXQsXG5cblx0XHRkb3dubG9hZFVzZXJEYXRhOiBkb3dubG9hZFVzZXJEYXRhLFx0XHRcdFx0Ly9nZXR0ZXIgbWV0aG9kc1xuXHRcdGdldFVzZXJCaW86IGdldFVzZXJCaW8sXG5cdFx0Z2V0VXNlckV2ZW50czogZ2V0VXNlckV2ZW50cyxcblx0XHRnZXRBSG9zdGVkRXZlbnQ6IGdldEFIb3N0ZWRFdmVudCxcblx0XHRnZXRBbkludml0ZWRFdmVudDogZ2V0QW5JbnZpdGVkRXZlbnQsXG5cdFx0ZmluZEd1ZXN0VUlEOiBmaW5kR3Vlc3RVSUQsXG5cdFx0Z2V0R3Vlc3RMaXN0Rm9yRXZlbnQ6IGdldEd1ZXN0TGlzdEZvckV2ZW50LFxuXG5cdFx0Y3JlYXRlTmV3VXNlcjogY3JlYXRlTmV3VXNlcixcdFx0XHRcdFx0Ly9zZXR0ZXIgTWV0aG9kc1xuXHRcdGFkZE5ld1VzZXJUb0RhdGFiYXNlOiBhZGROZXdVc2VyVG9EYXRhYmFzZSxcblx0XHRhZGROZXdVc2VyVG9SZWdVc2Vyc0xpc3Q6IGFkZE5ld1VzZXJUb1JlZ1VzZXJzTGlzdCxcblx0XHR1cGxvYWRVc2VyRGF0YTogdXBsb2FkVXNlckRhdGEsXG5cdFx0dXBsb2FkVXNlckJpbzogdXBsb2FkVXNlckJpbyxcblx0XHRjcmVhdGVIb3N0ZWRFdmVudDogY3JlYXRlSG9zdGVkRXZlbnQsXG5cdFx0YWRkR3Vlc3RUb0hvc3RHdWVzdExpc3RvbkRCOiBhZGRHdWVzdFRvSG9zdEd1ZXN0TGlzdG9uREIsXG5cdFx0Ly9hZGRQZW5kaW5nRXZlbnRGb3JVc2VyOiBhZGRQZW5kaW5nRXZlbnRGb3JVc2VyLFxuXHRcdC8vYWRkUGVuZGluZ0V2ZW50Rm9yR3Vlc3Q6IGFkZFBlbmRpbmdFdmVudEZvckd1ZXN0LFxuXG5cdFx0ZGVsZXRlVXBkYXRlRmllbGQ6IGRlbGV0ZVVwZGF0ZUZpZWxkLFx0XHRcdC8vZGVsZXRlIG1ldGhvZHNcblx0XHRyZW1vdmVJbmNvbXBsZXRlRXZlbnQ6IHJlbW92ZUluY29tcGxldGVFdmVudCxcblxuXHRcdHRoZXJlV2FzQW5VcGRhdGVGaWVsZDogdGhlcmVXYXNBblVwZGF0ZUZpZWxkXHQvL21vZGVsIG1haW50YWluYW5jZVxuXHR9O1xuXG5cdGZ1bmN0aW9uIHV0ZjhfdG9fYjY0KHN0cikge1xuXHRcdHJldHVybiBidG9hKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiBiNjRfdG9fdXRmOChzdHIpIHtcbiAgICBcdHJldHVybiBhdG9iKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNyZWF0ZU5ld1VzZXIoZW1haWwsIHBhc3N3b3JkKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBmaXJlQmFzZUFjY291bnRzID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHRcblx0XHQvL3JldHVybiBhIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcblx0XHRcdGZpcmVCYXNlQWNjb3VudHMuY3JlYXRlVXNlcih7XG5cdFx0XHRcdFxuXHRcdFx0XHRlbWFpbDogZW1haWwsXG5cdFx0XHRcdHBhc3N3b3JkOiBwYXNzd29yZFxuXHRcdFx0XG5cdFx0XHR9LGZ1bmN0aW9uKGVycm9yLCB1c2VyRGF0YSkge1xuXHRcdFx0XHRcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdCgnRXJyb3IgY3JlYXRpbmcgdXNlcjogJyArIGVycm9yKTtcblxuXHRcdFx0XHRlbHNlIHJlc29sdmUodXNlckRhdGEpO1xuXHRcdFx0fSk7XG5cblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGFkZE5ld1VzZXJUb0RhdGFiYXNlKHVpZCwgbmFtZSwgZW1haWwpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIGFwcFVzZXJzID0gYXBwLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCk7XG5cdFx0dmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcblxuXHRcdC8vcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFxuXHRcdFx0YXBwVXNlcnMuc2V0KHsgXG5cdFx0XHRcdCdiaW8nOiB7XG5cdFx0XHRcdFx0J3VpZCc6IHVpZCxcblx0XHRcdFx0XHQnbmFtZSc6IG5hbWUsXG5cdFx0XHRcdFx0J2VtYWlsJzogZW1haWxcblx0XHRcdFx0fSxcblx0XHRcdFx0J2V2ZW50cyc6IHtcblx0XHRcdFx0XHQncGVuZGluZyc6IHtcblx0XHRcdFx0XHRcdCd1cGRhdGVkJzogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0J2hvc3RpbmcnOiB7XG5cdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdCdhdHRlbmRpbmcnOiB7XG5cdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdCdjb21wbGV0ZWQnOiB7XG5cdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoJ0RhdGEgY291bGQgbm90IGJlIHNhdmVkOiAnICsgZXJyb3IpO1xuXHRcdFx0XHRcblx0XHRcdFx0ZWxzZSByZXNvbHZlKCdEYXRhIHNhdmVkIHN1Y2Nlc3NmdWxseS4nKTtcblxuXHRcdFx0fSk7XG5cblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gYWRkTmV3VXNlclRvUmVnVXNlcnNMaXN0KHVpZCwgZW1haWwpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIGI2NEVtYWlsID0gdXRmOF90b19iNjQoZW1haWwpO1xuXHRcdHZhciBSZWdpc3RlcmVkVXNlcnNMaXN0ID0gYXBwLmNoaWxkKCdVaWRzJykuY2hpbGQoYjY0RW1haWwpO1xuXG5cdFx0Ly9yZXR1cm4gYSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XG5cdFx0XHRSZWdpc3RlcmVkVXNlcnNMaXN0LnNldCh1aWQsIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoXCJEYXRhIGNvdWxkIG5vdCBiZSBzYXZlZC4gXCIgKyBlcnJvcik7XG5cdFx0XHRcdGVsc2UgcmVzb2x2ZShcInVpZCBjcmVhdGVkIHN1Y2Vzc2Z1bGx5LlwiKTtcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIExvZ2luUmVnaXN0ZXJlZFVzZXIoZW1haWwsIHBhc3N3b3JkKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdFxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9hdXRoZW50aWNhdGUgdGhlIHVzZXJcblx0XHRcdGFwcC5hdXRoV2l0aFBhc3N3b3JkKHtcblxuXHRcdFx0XHRlbWFpbDogZW1haWwsXG5cdFx0XHRcdHBhc3N3b3JkOiBwYXNzd29yZFxuXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvciwgYXV0aERhdGEpIHtcblx0XHRcdFx0XG5cdFx0XHRcdGlmKGVycm9yKSB7XG5cdFx0XHRcdFx0cmVqZWN0KCdFcnJvciBMb2dnaW5nIEluOiAnICsgZXJyb3IpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnTG9nZ2VkIEluIHN1Y2Nlc3NmdWxseTogJyArIGF1dGhEYXRhLnVpZCk7XG5cdFx0XHRcdFx0cmVzb2x2ZShhdXRoRGF0YSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0fSk7XG5cblx0XHR9KTtcblx0XHRcblx0fVxuXG5cdGZ1bmN0aW9uIGNoZWNrTG9naW5TdGF0dXMoKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XG5cdFx0XHRhcHAub25BdXRoKGZ1bmN0aW9uKGF1dGhEYXRhKSB7XG5cdFx0XHRcdGlmIChhdXRoRGF0YSkge1xuXHRcdFx0XHQgICAgJGxvZy5pbmZvKFwiVXNlciBcIiArIGF1dGhEYXRhLnVpZCArIFwiIGlzIGxvZ2dlZCBpbiB3aXRoIFwiICsgYXV0aERhdGEucHJvdmlkZXIpO1xuXHRcdFx0XHQgICAgcmVzb2x2ZSh0cnVlKTtcblx0XHRcdFx0ICB9IGVsc2Uge1xuXHRcdFx0XHQgICAgJGxvZy5pbmZvKFwiVXNlciBpcyBsb2dnZWQgb3V0XCIpO1xuXHRcdFx0XHQgICAgcmVzb2x2ZShmYWxzZSk7XG5cdFx0XHRcdCAgfVxuXHRcdFx0fSk7XG5cblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGxvZ1VzZXJPdXQoKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXG5cdFx0JGxvZy5pbmZvKCdsb2dnaW5nIHVzZXIgb3V0Jyk7XG5cdFx0YXBwLnVuYXV0aCgpO1xuXHR9XG5cblx0ZnVuY3Rpb24gdXBsb2FkVXNlckRhdGEoYWxsVXNlckRhdGEpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIHVpZCA9IGFsbFVzZXJEYXRhLnVpZDtcblx0XHR2YXIgcmVtb3RlVXNlciA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpO1xuXG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL3RoZSBhY3R1YWwgY2FsbFxuXHRcdFx0cmVtb3RlVXNlci51cGRhdGUoYWxsVXNlckRhdGEsIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoJ1RoZXJlIHdhcyBhIHByb2JsZW0gdXBkYXRpbmcgdGhhdCByZWNvcmQ6ICcgKyBlcnJvcik7XG5cdFx0XHRcdGVsc2UgcmVzb2x2ZSgnYWxsIHVzZXIgZGF0YSB1cGxvYWRlZCBzdWNjZXNzZnVsbHknKTtcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cdFx0XG5cdH1cblxuXHRmdW5jdGlvbiB1cGxvYWRVc2VyQmlvKGN1cnJlbnRVc2VyQmlvKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciB1aWQgPSAoY3VycmVudFVzZXJCaW8udWlkKS50b1N0cmluZygpO1xuXHRcdHZhciByZW1vdGVVc2VyQmlvID0gYXBwLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2JpbycpO1xuXG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHRcdC8vY2FsbCB0byB0aGUgZGJcblx0XHRcdHJlbW90ZVVzZXJCaW8udXBkYXRlKGN1cnJlbnRVc2VyQmlvLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KCdUaGVyZSB3YXMgYSBwcm9ibGVtIHVwZGF0aW5nIHRoYXQgcmVjb3JkOiAnICsgZXJyb3IpO1xuXHRcdFx0XHRlbHNlIHJlc29sdmUoJ2FsbCB1c2VyIGJpbyBkYXRhIHVwbG9hZGVkIHN1Y2Nlc3NmdWxseScpO1xuXHRcdFx0fSlcblxuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gZG93bmxvYWRVc2VyRGF0YSgpIHtcblxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0VXNlckJpbyh1aWQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIHVzZXJCaW8gPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnYmlvJyk7XG5cblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vdGhlIGFjdHVhbCBjYWxsXG5cdFx0XHR1c2VyQmlvLm9uY2UoJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdFx0Ly93aGVuIHRoZSBjYWxsIGlzIHN1Y2Nlc3NmdWwgcmV0dXJuIHRoZSBkYXRhXG5cdFx0XHRcdHJlc29sdmUoc25hcHNob3QudmFsKCkpO1xuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0XHR9IFxuXHRcdFx0fSk7XG5cblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNyZWF0ZUhvc3RlZEV2ZW50KHVpZCwgbmV3RXZlbnQpIHtcblx0XHQkbG9nLmluZm8oJ2dvdCBwYXNzZWQuLi4nKTtcblx0XHQkbG9nLmluZm8odWlkKTtcblx0XHQkbG9nLmluZm8obmV3RXZlbnQpO1xuXG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciBldmVudElEID0gbmV3RXZlbnQuaWQ7XG5cdFx0dmFyIG5ld0hvc3RlZEV2ZW50ID0gYXBwLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdob3N0aW5nJykuY2hpbGQoZXZlbnRJRCk7XG5cblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFxuXHRcdFx0Ly9jYWxsIHRvIGZpcmViYXNlXG5cdFx0XHRuZXdIb3N0ZWRFdmVudC5zZXQobmV3RXZlbnQsIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoJ1RoZXJlIHdhcyBhbiBlcnJvcjogJyArIGVycm9yKTtcblx0XHRcdFx0ZWxzZSByZXNvbHZlKCdOZXcgZXZlbnQgc2F2ZWQgdG8gREIgc3VjY2Vzc2Z1bGx5Jyk7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBhZGRHdWVzdFRvSG9zdEd1ZXN0TGlzdG9uREIobmFtZSwgZ3VpZXN0SWQsIGV2ZW50SWQsIHVpZCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgZ3Vlc3RMaXN0ID0gYXBwLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdob3N0aW5nJykuY2hpbGQoZXZlbnRJZCkuY2hpbGQoJ2d1ZXN0TGlzdCcpLmNoaWxkKGd1aWVzdElkKTtcblxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHQvL2NhbGwgdG8gdGhlIGRiXG5cdFx0XHRndWVzdExpc3Quc2V0KHtcblx0XHRcdFx0cnN2cGQ6IGZhbHNlLFxuXHRcdFx0XHRzdGF0dXM6ICdwZW5kaW5nJyxcblx0XHRcdFx0bmFtZTogbmFtZVxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdCgnVGhlcmUgd2FzIGFuIGVycm9yOiAnICsgZXJyb3IpO1xuXHRcdFx0XHRlbHNlIHJlc29sdmUoJ05ldyBldmVudCBzYXZlZCB0byBEQiBzdWNjZXNzZnVsbHknKTtcblx0XHRcdH0pXG5cblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldFVzZXJFdmVudHModWlkKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciB1c2VyRXZlbnRzID0gYXBwLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpO1xuXHRcdFxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly90aGUgYWN0dWFsIGNhbGxcblx0XHRcdHVzZXJFdmVudHMub3JkZXJCeUtleSgpLm9uY2UoJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdFx0dmFyIHVzZXJQcm9maWxlID0gc25hcHNob3QudmFsKCk7XG5cblx0XHRcdFx0Ly93aGVuIHRoZSBjYWxsIGlzIHN1Y2Nlc3NmdWwgcmV0dXJuIHRoZSBkYXRhXG5cdFx0XHRcdHZhciBldmVudHNQYWNrYWdlID0ge1xuXHRcdFx0XHRcdGhvc3Rpbmc6IHVzZXJQcm9maWxlLmhvc3RpbmcsXG5cdFx0XHRcdFx0YXR0ZW5kaW5nOiB1c2VyUHJvZmlsZS5hdHRlbmRpbmcsXG5cdFx0XHRcdFx0cGVuZGluZzogdXNlclByb2ZpbGUucGVuZGluZyxcblx0XHRcdFx0XHRjb21wbGV0ZWQ6IHVzZXJQcm9maWxlLmNvbXBsZXRlZFxuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdHJlc29sdmUoZXZlbnRzUGFja2FnZSk7XG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHRcdH0gXG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0QUhvc3RlZEV2ZW50KHVpZCwgZXZlbnRJZCkge1xuXG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciBob3N0ZWRFdmVudCA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgnaG9zdGluZycpLmNoaWxkKGV2ZW50SWQpO1xuXG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL3RoZSBhY3R1YWwgY2FsbFxuXHRcdFx0aG9zdGVkRXZlbnQub25jZSgndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0XHR2YXIgc2VsZWN0RXZlbnQgPSBzbmFwc2hvdC52YWwoKTtcblxuXHRcdFx0XHRyZXNvbHZlKHNlbGVjdEV2ZW50KTtcblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoZXJyb3IpO1xuXHRcdFx0fSlcblx0XHR9KVxuXHR9XG5cblx0ZnVuY3Rpb24gZmluZEd1ZXN0VUlEKGd1ZXN0YjY0RW1haWwpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIHVpZHMgPSBhcHAuY2hpbGQoJ1VpZHMnKTtcblxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly9jYWxsIHRvIGRiXG5cdFx0XHR1aWRzLm9uY2UoJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdFx0Ly9kaXN0aWxsIHJlc3VsdHNcblx0XHRcdFx0dmFyIGFsbFVzZXJzID0gc25hcHNob3QudmFsKCk7XG5cblx0XHRcdFx0T2JqZWN0LmtleXMoYWxsVXNlcnMpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdmcm9tIGxpc3Q6ICcgKyBrZXkgKyAnLCBtYXRjaGluZyB0bzogJyArIGd1ZXN0YjY0RW1haWwpO1xuXHRcdFx0XHRcdC8vY2hlY2sgZWFjaCB1c2VyXG5cdFx0XHRcdFx0aWYoa2V5ID09IGd1ZXN0YjY0RW1haWwpIHtcblx0XHRcdFx0XHRcdHJlc29sdmUoYWxsVXNlcnNba2V5XSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJlamVjdCgnTm8gdXNlciBieSB0aGF0IGVtYWlsJyk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH0pO1xuXG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBnZXRHdWVzdExpc3RGb3JFdmVudChob3N0SWQsIGV2ZW50SWQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIGd1ZXN0TGlzdCA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZChob3N0SWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgnaG9zdGluZycpLmNoaWxkKGV2ZW50SWQpLmNoaWxkKCdndWVzdExpc3QnKTtcblxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9jYWxsIHRoZSBkYlxuXHRcdFx0Z3Vlc3RMaXN0Lm9uY2UoJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdFx0Ly9sb2NhbCB2YXJpYWJsZVxuXHRcdFx0XHR2YXIgdGhlTGlzdCA9IHNuYXBzaG90LnZhbCgpO1xuXG5cdFx0XHRcdHJlc29sdmUodGhlTGlzdCk7XG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3IgZ2V0dGluZyB0aGUgZ3Vlc3QgbGlzdDogJyArICBlcnJvcik7XG5cdFx0XHR9KVxuXHRcdH0pXG5cdH1cblxuXHRmdW5jdGlvbiBnZXRBbkludml0ZWRFdmVudChob3N0SWQsIHVpZCwgZXZlbnRJZCkge31cblxuXHQvKlxuXHRmdW5jdGlvbiBhZGRQZW5kaW5nRXZlbnRGb3JVc2VyKHVpZCwgaG9zdElkLCBldmVudElkLCBldmVudCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgdXNlclBlbmRpbmdMaXN0ID0gYXBwLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdwZW5kaW5nJyk7XG5cblx0XHQvL21hbmdlIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHQvL2NhbGwgdGhlIGRiXG5cdFx0XHR1c2VyUGVuZGluZ0xpc3Quc2V0KHtcblx0XHRcdFx0aG9zdElkOiB7XG5cdFx0XHRcdFx0ZXZlbnRJZDoge1xuXHRcdFx0XHRcdFx0ZXZlbnRcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoXCJFcnJvciBhZGRpbmcgdG8gdXNlciBwZW5kaW5nIGxpc3Q6IFwiICsgZXJyb3IpO1xuXHRcdFx0XHRlbHNlIHJldHVybiByZXNvbHZlKCdBZGRlZCB0byB1c2VyIHBlbmRpbmcgbGlzdCBzdWNjZXNzZnVsbHknKTtcblx0XHRcdH0pXG5cblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gYWRkUGVuZGluZ0V2ZW50Rm9yR3Vlc3QodWlkLCBob3N0SWQsIGV2ZW50SWQsIGV2ZW50KSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciBndWVzdHNQZW5kaW5nTGlzdCA9IGFwcC5jaGlsZCgnVW5yZWdpc3RlcmVkJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ3BlbmRpbmcnKTtcblxuXHRcdC8vbWFuZ2UgdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHRcdC8vY2FsbCB0aGUgZGJcblx0XHRcdHVzZXJQZW5kaW5nTGlzdC5zZXQoe1xuXHRcdFx0XHRob3N0SWQ6IHtcblx0XHRcdFx0XHRldmVudElkOiB7XG5cdFx0XHRcdFx0XHRldmVudFxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdChcIkVycm9yIGFkZGluZyB0byB1c2VyIHBlbmRpbmcgbGlzdDogXCIgKyBlcnJvcik7XG5cdFx0XHRcdGVsc2UgcmV0dXJuIHJlc29sdmUoJ0FkZGVkIHRvIHVzZXIgcGVuZGluZyBsaXN0IHN1Y2Nlc3NmdWxseScpO1xuXHRcdFx0fSlcblxuXHRcdH0pO1xuXG5cdH0qL1xuXG5cdGZ1bmN0aW9uIGRlbGV0ZVVwZGF0ZUZpZWxkKGNhdGVnb3J5LCB1aWQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIGNhdFJlbW92aW5nRnJvbSA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZChjYXRlZ29yeSkuY2hpbGQoJ3VwZGF0ZWQnKTtcblxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Y2F0UmVtb3ZpbmdGcm9tLnNldChudWxsLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3IgZGVsZXRpbmcgdXBkYXRlIGZpZWxkOiAnICsgZXJyb3IpO1xuXHRcdFx0XHRlbHNlIHJlc29sdmUoJ0RlbGV0ZWQgdXBkYXRlIHN1Y2Nlc3NmdWxseScpO1xuXHRcdFx0fSlcblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gcmVtb3ZlSW5jb21wbGV0ZUV2ZW50KHVpZCwgZXZlbnRJZCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgZXZlbnRUb1JlbW92ZSA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgnaG9zdGluZycpLmNoaWxkKGV2ZW50SWQpO1xuXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0dmFyIG9uQ29tcGxldGUgPSBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdHJlamVjdCgnU3luY2hyb25pemF0aW9uIGZhaWxlZCcpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJlc29sdmUoJ1N5bmNocm9uaXphdGlvbiBzdWNjZWVkZWQnKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvL2NhbGwgZG8gZGJcblx0XHRcdGV2ZW50VG9SZW1vdmUucmVtb3ZlKG9uQ29tcGxldGUpO1xuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiB0aGVyZVdhc0FuVXBkYXRlRmllbGQoY2F0ZWdvcnksIHVpZCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgY2F0VG9DaGVjayA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZChjYXRlZ29yeSk7XG5cblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vY2FsbCB0aGUgZGJcblx0XHRcdGNhdFRvQ2hlY2sub25jZSgndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0XHQvL3NhdmUgdGhlIHJlc3BvbnNlXG5cdFx0XHRcdHZhciBjdXJyZW50Q2F0TW9kZWwgPSBzbmFwc2hvdC52YWwoKTtcblx0XHRcdFx0Ly9zaG93IHdoYXQgd2FzIGZvdW5kXG5cdFx0XHRcdC8vbG9vayBmb3IgdGhlIHVwZGF0ZSBmaWVsZFxuXHRcdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChjdXJyZW50Q2F0TW9kZWxbJ3VwZGF0ZWQnXSkpIHJlc29sdmUodHJ1ZSk7XG5cdFx0XHRcdGVsc2UgcmVqZWN0KGZhbHNlKTtcblxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdChlcnJvcik7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXHR9XG5cblx0Ly9yZXR1cm4gdGhlIG9iamVjdFxuXHRyZXR1cm4gYWxsQmFja2VuZFNlcnZpY2VzO1xufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuZmFjdG9yeSgndHJhZmZpY1ZhbGV0JywgdHJhZmZpY1ZhbGV0KTtcblxudHJhZmZpY1ZhbGV0LiRpbmplY3QgPSBbJyRsb2cnLCAnJGxvY2F0aW9uJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gdHJhZmZpY1ZhbGV0KCRsb2csICRsb2NhdGlvbikge1xuXHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdHZhciBhbGxUcmFmZmljQ29udHJvbHMgPSB7XG5cdFx0cmVkaXJlY3RUbzogcmVkaXJlY3RUbyxcblx0XHRldmVudFJvdXRlOiBldmVudFJvdXRlXG5cdH07XG5cblx0ZnVuY3Rpb24gcmVkaXJlY3RUbyhwYXRoLCBwYXJhbTEsIHBhcmFtMiwgcGFyYW0zKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQocGFyYW0xKSkge1xuXHRcdFx0cGF0aCA9IHBhdGggKyAnLycgKyBwYXJhbTE7XG5cblx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHBhcmFtMikpIHtcblx0XHRcdFx0Ly9nbyB0byBwYXRoIHdpdGggMiBwYXJhbXNcblx0XHRcdFx0cGF0aCA9IHBhdGggKyAnLycgKyBwYXJhbTI7XG5cblx0XHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQocGFyYW0zKSkge1xuXHRcdFx0XHRcdHBhdGggPSBwYXRoICsgJy8nICsgcGFyYW0zO1xuXG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyBub3cgdG8gJyArIHBhdGgpO1xuXHRcdFx0XHRcdCRsb2NhdGlvbi5wYXRoKHBhdGgpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyBub3cgdG8gJyArIHBhdGgpO1xuXHRcdFx0XHQkbG9jYXRpb24ucGF0aChwYXRoKTtcblx0XHRcdH1cblx0XHRcdC8vZ28gd2l0aCAxIHBhcmFtXG5cdFx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIG5vdyB0byAnICsgcGF0aCk7XG5cdFx0XHQkbG9jYXRpb24ucGF0aChwYXRoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly9qdXN0IGdvIHRvIHBhdGhcblx0XHRcdCRsb2cuaW5mbygncmVkaXJlY3Rpbmcgbm93IHRvICcgKyBwYXRoKTtcblx0XHRcdCRsb2NhdGlvbi5wYXRoKHBhdGgpO1xuXHRcdH1cblxuXHR9XG5cblx0ZnVuY3Rpb24gZXZlbnRSb3V0ZShldmVudElkLCBob3N0SWQsIHVzZXJJZCwgc2VjdGlvbikge1xuXHRcdCRsb2cuaW5mbygnVHJhZmZpYyB2YWxldCBhY2Nlc3NlZCcpO1xuXHRcdCRsb2cuaW5mbygnZXZlbnRJZDogJyArIGV2ZW50SWQpO1xuXHRcdCRsb2cuaW5mbygnaG9zdElkOiAnICsgaG9zdElkKTtcblx0XHQkbG9nLmluZm8oJ3VzZXJJZDogJyArIHVzZXJJZCk7XG5cblx0XHQvL2lmIHRoZXJlIGlzbid0IGEgc2VjdGlvbiBzZXQgdG8gZGVmYXVsdFxuXHRcdGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQoc2VjdGlvbikpIHNlY3Rpb24gPSAxO1xuXG5cdFx0Ly9pZiB0aGUgaG9zdElkIGFuZCB1c2VySWQgbWF0Y2gsIGxhdW5jaCBob3N0IHZpZXdcblx0XHRpZihob3N0SWQgPT09IHVzZXJJZCkgeyBcblx0XHRcdHZhciBwYXRoID0gJy9ldmVudC9ob3N0LycgKyBldmVudElkICsgJy8nICsgdXNlcklkICsgJy8nKyBzZWN0aW9uO1xuXHRcdFx0JGxvZy5pbmZvKHBhdGgpO1xuXHRcdFx0Ly9yZWRpcmVjdFxuXHRcdFx0JGxvY2F0aW9uLnBhdGgocGF0aCk7XG5cdFx0fVxuXHRcdC8vaWYgdGhlIGhvc3RJZCBhbmQgdXNlcklkIERPTidUIG1hdGNoLCBsYXVuY2ggZ3Vlc3Qgdmlld1xuXHRcdGVsc2Uge1xuXHRcdFx0dmFyIHBhdGggPSAnL2V2ZW50L2d1ZXN0LycgKyBldmVudElkICsgJy8nICsgdXNlcklkICsgJy8nICsgaG9zdElkO1xuXHRcdFx0JGxvZy5pbmZvKHBhdGgpO1xuXHRcdFx0Ly9yZWRpcmVjdFxuXHRcdFx0JGxvY2F0aW9uLnBhdGgocGF0aCk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGFsbFRyYWZmaWNDb250cm9scztcbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmZhY3RvcnkoJ3VzZXJEYXRhJywgdXNlckRhdGEpO1xuXG51c2VyRGF0YS4kaW5qZWN0ID0gWyckbG9nJywgJyRxJywgJ2JhY2tlbmRTZXJ2aWNlcyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHVzZXJEYXRhKCRsb2csICRxLCBiYWNrZW5kU2VydmljZXMpIHtcblx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHR2YXIgY3VycmVudFVzZXIgPSB7XG5cdFx0YmlvOiB7IFxuXHRcdFx0dWlkOiAnJyxcblx0XHRcdG5hbWU6ICcnLFxuXHRcdFx0ZW1haWw6ICcnLFxuXHRcdFx0Y29tcGFueTogJycsXG5cdFx0XHR0aXRsZTogJycsXG5cdFx0XHRkb2I6IDBcblx0XHR9LFxuXHRcdGV2ZW50czoge1xuXHRcdFx0aG9zdGluZzoge30sXG5cdFx0XHRwZW5kaW5nOiB7fSxcblx0XHRcdGF0dGVuZGluZzoge30sXG5cdFx0XHRjb21wbGV0ZWQ6IHt9XG5cdFx0fVxuXHR9O1xuXG5cdHZhciBhY3RpdmVFdmVudCA9IHt9O1xuXG5cdC8vbG9jYWwgZnVuY3Rpb25zXG5cdGZ1bmN0aW9uIHV0ZjhfdG9fYjY0KHN0cikge1xuXHRcdHJldHVybiBidG9hKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiBiNjRfdG9fdXRmOChzdHIpIHtcbiAgICBcdHJldHVybiBhdG9iKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fTtcblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH07XG5cblx0dmFyIGFsbFVzZXJEYXRhID0ge1xuXHRcdGJpb1ByaW1hcmllc0FyZUNvbXBsZXRlTG9jYWxseTogYmlvUHJpbWFyaWVzQXJlQ29tcGxldGVMb2NhbGx5LFx0XHQvL21vZGFsIGFuYWx5c2lzXG5cdFx0ZXZlbnRFeGlzdHNMb2NhbGx5OiBldmVudEV4aXN0c0xvY2FsbHksXG5cdFx0dGhpc0lzVGhlSG9zdEVtYWlsOiB0aGlzSXNUaGVIb3N0RW1haWwsXG5cdFx0Z3Vlc3RJbnZpdGVkQWxyZWFkeTogZ3Vlc3RJbnZpdGVkQWxyZWFkeSxcblx0XHR0aGVyZUlzQW5BY3RpdmVFdmVudDogdGhlcmVJc0FuQWN0aXZlRXZlbnQsXG5cblx0XHRjbGVhbkV2ZW50czogY2xlYW5FdmVudHMsXHRcdFx0XHRcdFx0XHQvL21vZGVsIG1haW50YWluYW5jZVxuXG5cdFx0Z2V0VUlETG9jYWxseTogZ2V0VUlETG9jYWxseSxcdFx0XHRcdFx0XHQvL2dldHRlciBNZXRob2RzXG5cdFx0Z2V0TmFtZUxvY2FsbHk6IGdldE5hbWVMb2NhbGx5LFxuXHRcdGdldEVtYWlsTG9jYWxseTogZ2V0RW1haWxMb2NhbGx5LFxuXHRcdGdldENvbXBhbnlMb2NhbGx5OiBnZXRDb21wYW55TG9jYWxseSxcblx0XHRnZXRUaXRsZUxvY2FsbHk6IGdldFRpdGxlTG9jYWxseSxcblx0XHRnZXRET0JMb2NhbGx5OiBnZXRET0JMb2NhbGx5LFxuXHRcdGdldEZ1bGxCaW9Mb2NhbGx5OiBnZXRGdWxsQmlvTG9jYWxseSxcblx0XHRnZXRPbmVVc2VyRXZlbnRMb2NhbGx5OiBnZXRPbmVVc2VyRXZlbnRMb2NhbGx5LFxuXHRcdGdldFVzZXJFdmVudHNMb2NhbGx5OiBnZXRVc2VyRXZlbnRzTG9jYWxseSxcblx0XHRnZXRBbGxVc2VyRXZlbnRzTG9jYWxseTogZ2V0QWxsVXNlckV2ZW50c0xvY2FsbHksXG5cdFx0Z2V0QWN0aXZlRXZlbnQ6IGdldEFjdGl2ZUV2ZW50LFxuXG5cdFx0c2V0VUlETG9jYWxseTogc2V0VUlETG9jYWxseSxcdFx0XHRcdFx0XHQvL3NldHRlciBNZXRob2RzXG5cdFx0c2V0TmFtZUxvY2FsbHk6IHNldE5hbWVMb2NhbGx5LFxuXHRcdHNldEVtYWlsTG9jYWxseTogc2V0RW1haWxMb2NhbGx5LFxuXHRcdHNldENvbXBhbnlMb2NhbGx5OiBzZXRDb21wYW55TG9jYWxseSxcblx0XHRzZXRUaXRsZUxvY2FsbHk6IHNldFRpdGxlTG9jYWxseSxcblx0XHRzZXRET0JMb2NhbGx5OiBzZXRET0JMb2NhbGx5LFxuXHRcdHNldFByaW1hcmllc0xvY2FsbHk6IHNldFByaW1hcmllc0xvY2FsbHksXG5cdFx0dXBkYXRlVXNlckV2ZW50c0xvY2FsbHk6IHVwZGF0ZVVzZXJFdmVudHNMb2NhbGx5LFxuXHRcdHVwZGF0ZUFsbFVzZXJFdmVudHNMb2NhbGx5OiB1cGRhdGVBbGxVc2VyRXZlbnRzTG9jYWxseSxcblx0XHR1cGRhdGVCaW9Mb2NhbGx5OiB1cGRhdGVCaW9Mb2NhbGx5LFxuXHRcdGFkZEd1ZXN0VG9Ib3N0R3Vlc3RMaXN0OiBhZGRHdWVzdFRvSG9zdEd1ZXN0TGlzdCxcblx0XHRzZXRBY3RpdmVFdmVudDogc2V0QWN0aXZlRXZlbnQsXG5cdFx0YWRkR3Vlc3RUb0FjdGl2ZUV2ZW50OiBhZGRHdWVzdFRvQWN0aXZlRXZlbnQsXG5cdFx0c2F2ZU5ld0hvc3RpbmdFdmVudDogc2F2ZU5ld0hvc3RpbmdFdmVudCxcblxuXHRcdHJlbW92ZVVzZXJFdmVudHNMb2NhbGx5OiByZW1vdmVVc2VyRXZlbnRzTG9jYWxseSwgXHQvL3JlbW92ZSBkYXRhXG5cdFx0XG5cdFx0Z2V0RnVsbFJlbW90ZURCZm9yTG9jYWw6IGdldEZ1bGxSZW1vdGVEQmZvckxvY2FsLFx0Ly9sb2NhbC1yZW1vdGUgaW50ZXJhY2lvbnNcblx0XHRnZXRSZW1vdGVCaW9Gb3JMb2NhbDogZ2V0UmVtb3RlQmlvRm9yTG9jYWwsXHRcdFx0XG5cdFx0Z2V0UmVtb3RlRXZlbnRzRm9yTG9jYWw6IGdldFJlbW90ZUV2ZW50c0ZvckxvY2FsLFxuXHRcdGdldE9uZVJlbW90ZUV2ZW50Rm9yTG9jYWw6IGdldE9uZVJlbW90ZUV2ZW50Rm9yTG9jYWwsXG5cdFx0c2V0RnVsbFJlbW90ZURCZnJvbUxvY2FsOiBzZXRGdWxsUmVtb3RlREJmcm9tTG9jYWwsXG5cdFx0c2V0UmVtb3RlQmlvRnJvbUxvY2FsOiBzZXRSZW1vdGVCaW9Gcm9tTG9jYWwsXG5cdFx0c2V0QVJlbW90ZUV2ZW50RnJvbUxvY2FsOiBzZXRBUmVtb3RlRXZlbnRGcm9tTG9jYWwsXG5cdFx0c2V0UmVtb3RlRXZlbnRzRnJvbUxvY2FsOiBzZXRSZW1vdGVFdmVudHNGcm9tTG9jYWwsXG5cdFx0Y2xlYW5EQkV2ZW50c0NhdGVnb3J5OiBjbGVhbkRCRXZlbnRzQ2F0ZWdvcnksXG5cdFx0Z2V0VXNlcklkRm9yR3Vlc3Q6IGdldFVzZXJJZEZvckd1ZXN0LFxuXHRcdGdldEV2ZW50R3Vlc3RMaXN0OiBnZXRFdmVudEd1ZXN0TGlzdCxcblx0XHRyZW1vdmVJbmNvbXBsZXRlRXZlbnRGcm9tREI6IHJlbW92ZUluY29tcGxldGVFdmVudEZyb21EQixcblxuXHRcdGxvYWRCaW86IGxvYWRCaW8sXHRcdFx0XHRcdFx0XHRcdFx0Ly9leHRlcm5hbCBtZXRob2RzXG5cdFx0bG9hZEV2ZW50c1Byb2dyZXNzaXZlbHk6IGxvYWRFdmVudHNQcm9ncmVzc2l2ZWx5LFxuXHRcdGxvYWRBbkV2ZW50UHJvZ3Jlc3NpdmVseTogbG9hZEFuRXZlbnRQcm9ncmVzc2l2ZWx5LFxuXHRcdGNyZWF0ZU5ld0V2ZW50OiBjcmVhdGVOZXdFdmVudCxcblx0XHR1cGRhdGVQZW5kaW5nRXZlbnRzTGlzdEZvckd1ZXN0OiB1cGRhdGVQZW5kaW5nRXZlbnRzTGlzdEZvckd1ZXN0XG5cdH1cblxuXHQvL2FuYWx5c2lzIG1ldGhvZHNcblx0ZnVuY3Rpb24gYmlvUHJpbWFyaWVzQXJlQ29tcGxldGVMb2NhbGx5KCkge1xuXHRcdGlmKCBjdXJyZW50VXNlci5iaW8udWlkICE9PSAnJyAmJlxuXHRcdFx0Y3VycmVudFVzZXIuYmlvLm5hbWUgIT09ICcnICYmXG5cdFx0XHRjdXJyZW50VXNlci5iaW8uZW1haWwgIT09ICcnXG5cdFx0XHQpXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRlbHNlIHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGZ1bmN0aW9uIGV2ZW50RXhpc3RzTG9jYWxseSh0eXBlLCBldmVudElkKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoY3VycmVudFVzZXIuZXZlbnRzW3R5cGVdW2V2ZW50SWRdKSkgcmV0dXJuIHRydWU7XG5cdFx0ZWxzZSByZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRmdW5jdGlvbiB0aGlzSXNUaGVIb3N0RW1haWwoZW1haWwsIGV2ZW50SWQpIHtcblx0XHRcblx0XHQvL2NoZWNrIGlmIGEgYmlvIGlzIGxvYWRlZFxuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGN1cnJlbnRVc2VyLmJpby5lbWFpbCkpIHtcblx0XHRcdFxuXHRcdFx0aWYoY3VycmVudFVzZXIuYmlvLmVtYWlsICE9ICcnKSB7XG5cdFx0XHRcdC8vY2hlY2sgZm9yIGEgbWF0Y2hcblx0XHRcdFx0aWYoZW1haWwgPT0gY3VycmVudFVzZXIuYmlvLmVtYWlsKSB7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cblx0XHRcdH0gXG5cdFx0XHRcblx0XHR9IFxuXHRcdFxuXHRcdC8vaWYgdGhhdCBkaWRuJ3Qgd29yayBjaGVjayB0aGUgY3VycmVudCBldmVudFxuXHRcdFxuXHRcdGlmKGN1cnJlbnRVc2VyLmV2ZW50cy5ob3N0aW5nW2V2ZW50SWRdLmhvc3QuZW1haWwgPT0gZW1haWwpIHtcblx0XHRcdFxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdFxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRcblx0fVxuXG5cdGZ1bmN0aW9uIGd1ZXN0SW52aXRlZEFscmVhZHkoZW1haWwsIGV2ZW50SWQpIHtcblx0XHQvL2ZpcnN0IGNoZWNrIGlmIHRoZXJlIGlzIGEgZ3Vlc3QgbGlzdFxuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGN1cnJlbnRVc2VyLmV2ZW50cy5ob3N0aW5nW2V2ZW50SWRdLmd1ZXN0TGlzdCkpIHtcblx0XHRcdC8vaWYgdGhlcmUgaXMgYSBsaXN0LCBjaGVjayBmb3IgdGhlIGVtYWlsXG5cdFx0XHQkbG9nLmluZm8oJ3RoZXJlIGlzIGEgZ3Vlc3QgbGlzdCcpO1xuXG5cdFx0XHQvL2NvbnZlcnQgZW1haWwgZm9yIGV2YWx1YXRpb25cblx0XHRcdHJlZkVtYWlsID0gdXRmOF90b19iNjQoZW1haWwpO1xuXG5cdFx0XHQvL3J1biB0aHJvdWdoIGVhY2ggZ3Vlc3QgYW5kIGNvbXBhcmVcblx0XHRcdE9iamVjdC5rZXlzKGN1cnJlbnRVc2VyLmV2ZW50cy5ob3N0aW5nW2V2ZW50SWRdLmd1ZXN0TGlzdCkuZm9yRWFjaChmdW5jdGlvbihiNjRFbWFpbCkge1xuXHRcdFx0XHRpZihyZWZFbWFpbCA9PSBiNjRFbWFpbCkge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnYW4gZW1haWwgbWF0Y2ggd2FzIGZvdW5kLCB0aGlzIGd1ZXN0IGhhcyBiZWVuIGludml0ZWQgYWxyZWFkeScpO1xuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnbm8gZW1haWwgbWF0Y2ggZm91bmQsIG9rIHRvIGludml0ZSBndWVzdCcpO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSlcblxuXHRcdH0gZWxzZSB7XG5cdFx0XHQvL2lmIG5vIGd1ZXN0IGxpc3QgdGhhbiBjYW4ndCBhbHJlYWR5IGJlIG9uIGl0XG5cdFx0XHQkbG9nLmluZm8oJ25vIGd1ZXN0bGlzdCcpO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHR9XG5cblx0ZnVuY3Rpb24gdGhlcmVJc0FuQWN0aXZlRXZlbnQoKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoYWN0aXZlRXZlbnQuZXZlbnQpKSB7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0ZWxzZSByZXR1cm4gZmFsc2U7XG5cdH1cblxuXHQvL21vZGVsIG1haW50YWluYW5jZVxuXHRmdW5jdGlvbiBjbGVhbkV2ZW50cyh0eXBlKSB7XG5cdFx0Ly9pdGVyYXRlIHRocm91Z2ggb2JqZWN0cyBpbiBvYmplY3Rcblx0XHRPYmplY3Qua2V5cyhjdXJyZW50VXNlci5ldmVudHNbdHlwZV0pLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG5cdFx0XHQvL2lmIGFueSBhcmUgbm9uLW9iamVjdHMsIGRlbGV0ZSB0aGVtXG5cdFx0XHRpZighYW5ndWxhci5pc09iamVjdChjdXJyZW50VXNlci5ldmVudHNbdHlwZV1ba2V5XSkpIHtcblx0XHRcdFx0ZGVsZXRlIGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXVtrZXldO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0Ly9nZXR0ZXIgbWV0aG9kc1xuXHRmdW5jdGlvbiBnZXRVSURMb2NhbGx5KCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5iaW8udWlkO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0TmFtZUxvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmJpby5uYW1lO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0RW1haWxMb2NhbGx5KCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5iaW8uZW1haWw7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRDb21wYW55TG9jYWxseSgpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuYmlvLmNvbXBhbnk7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRUaXRsZUxvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmJpby50aXRsZTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0RE9CTG9jYWxseSgpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuYmlvLmRvYjtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldEZ1bGxCaW9Mb2NhbGx5KCkge1xuXHRcdHJldHVybiB7XG5cdFx0XHR1aWQ6IGN1cnJlbnRVc2VyLmJpby51aWQsXG5cdFx0XHRuYW1lOiBjdXJyZW50VXNlci5iaW8ubmFtZSxcblx0XHRcdGVtYWlsOiBjdXJyZW50VXNlci5iaW8uZW1haWwsXG5cdFx0XHRjb21wYW55OiBjdXJyZW50VXNlci5iaW8uY29tcGFueSxcblx0XHRcdHRpdGxlOiBjdXJyZW50VXNlci5iaW8udGl0bGUsXG5cdFx0XHRkb2I6IGN1cnJlbnRVc2VyLmJpby5kb2Jcblx0XHR9O1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0T25lVXNlckV2ZW50TG9jYWxseSh0eXBlLCBldmVudElkKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXVtldmVudElkXTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldFVzZXJFdmVudHNMb2NhbGx5KHR5cGUpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuZXZlbnRzW3R5cGVdO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0QWxsVXNlckV2ZW50c0xvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmV2ZW50cztcblx0fVxuXG5cdGZ1bmN0aW9uIGdldEFjdGl2ZUV2ZW50KCkge1xuXHRcdHJldHVybiBhY3RpdmVFdmVudDtcblx0fVxuXG5cdC8vc2V0dGVyIG1ldGhvZHNcblx0ZnVuY3Rpb24gc2V0VUlETG9jYWxseSh1aWQpIHtcblx0XHRjdXJyZW50VXNlci5iaW8udWlkID0gdWlkO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0TmFtZUxvY2FsbHkobmFtZSkge1xuXHRcdGN1cnJlbnRVc2VyLmJpby5uYW1lID0gbmFtZTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldEVtYWlsTG9jYWxseShlbWFpbCkge1xuXHRcdGN1cnJlbnRVc2VyLmJpby5lbWFpbCA9IGVtYWlsO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0Q29tcGFueUxvY2FsbHkoY29tcGFueSkge1xuXHRcdGN1cnJlbnRVc2VyLmJpby5jb21wYW55ID0gY29tcGFueTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2V0VGl0bGVMb2NhbGx5KHRpdGxlKSB7XG5cdFx0Y3VycmVudFVzZXIuYmlvLnRpdGxlID0gdGl0bGU7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXRET0JMb2NhbGx5KGRvYikge1xuXHRcdGN1cnJlbnRVc2VyLmJpby5kb2IgPSBkb2I7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXRQcmltYXJpZXNMb2NhbGx5KGVtYWlsLCBuYW1lLCB1aWQpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChlbWFpbCkpIHNldEVtYWlsTG9jYWxseShlbWFpbCk7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQobmFtZSkpIHNldE5hbWVMb2NhbGx5KG5hbWUpO1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHVpZCkpIHNldFVJRExvY2FsbHkodWlkKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHVwZGF0ZVVzZXJFdmVudHNMb2NhbGx5KHR5cGUsIGV2ZW50KSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBldmVudElEID0gZXZlbnQuaWQ7XG5cblx0XHQvL2NoZWNrIGlmIHRoZSBtb2RlbCBuZWVkcyB0byBiZSBjbGVhbmVkXG5cdFx0Y2xlYW5FdmVudHModHlwZSk7XG5cdFx0Ly90aGVuIGxvYWQgdGhlIG5ldyBldmVudFxuXHRcdGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXVtldmVudElEXSA9IGV2ZW50O1xuXHR9XG5cblx0ZnVuY3Rpb24gdXBkYXRlQWxsVXNlckV2ZW50c0xvY2FsbHkoYWxsVXNlckV2ZW50cykge1xuXHRcdGN1cnJlbnRVc2VyLmV2ZW50cyA9IGFsbFVzZXJFdmVudHM7XG5cdH1cblxuXHRmdW5jdGlvbiB1cGRhdGVCaW9Mb2NhbGx5KHVzZXJCaW8pIHtcblx0XHQvL3VwZGF0ZSBsb2NhbCB2YWx1ZXNcblx0XHRzZXROYW1lTG9jYWxseSh1c2VyQmlvLm5hbWUpO1xuXHRcdHNldEVtYWlsTG9jYWxseSh1c2VyQmlvLmVtYWlsKTtcblx0XHRzZXRDb21wYW55TG9jYWxseSh1c2VyQmlvLmNvbXBhbnkpO1xuXHRcdHNldFRpdGxlTG9jYWxseSh1c2VyQmlvLnRpdGxlKTtcblx0XHRzZXRET0JMb2NhbGx5KHVzZXJCaW8uZG9iKTtcblx0XHQvL3NhdmUgdG8gZGJcblx0XHRzZXRSZW1vdGVCaW9Gcm9tTG9jYWwoKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGFkZEd1ZXN0VG9Ib3N0R3Vlc3RMaXN0KG5hbWUsIGVtYWlsLCBndWVzdElkLCBldmVudElkLCB1aWQpIHtcblx0XHQvL2NhbGwgdG8gdGhlIGRiIHNvIHJldHVybiBhIHByb21pc2Vcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL2NvbnZlcnQgdGhlIGVtYWlsIGlmIG9uZSB3YXMgcGFzc2VkXG5cdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChlbWFpbCkpIHtcblx0XHRcdFx0Z3Vlc3RJZCA9IHV0ZjhfdG9fYjY0KGVtYWlsKTtcblx0XHRcdH1cblxuXHRcdFx0ZGIuYWRkR3Vlc3RUb0hvc3RHdWVzdExpc3RvbkRCKG5hbWUsIGd1ZXN0SWQsIGV2ZW50SWQsIHVpZClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKHBvc2l0aXZlUmVzdWx0KSB7XG5cdFx0XHRcdHJlc29sdmUocG9zaXRpdmVSZXN1bHQpO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihuZWdhdGl2ZVJlc3VsdCkge1xuXHRcdFx0XHRyZWplY3QobmVnYXRpdmVSZXN1bHQpO1xuXHRcdFx0fSlcblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gc2V0QWN0aXZlRXZlbnQoZXZlbnQpIHtcblx0XHQvL1xuXHRcdGFjdGl2ZUV2ZW50ID0gZXZlbnQ7XG5cdH1cblxuXHRmdW5jdGlvbiBhZGRHdWVzdFRvQWN0aXZlRXZlbnQobmV3R3Vlc3QpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciB1aWQgPSBuZXdHdWVzdC51aWQ7XG5cblx0XHQvL2lmIHRoaXMgaXMgdGhlIGZpcnN0IGd1ZXN0LCBjcmVhdGUgdGhlIGxpc3Qgb2JqZWN0XG5cdFx0aWYoIWFuZ3VsYXIuaXNPYmplY3QoYWN0aXZlRXZlbnQuZXZlbnQuZ3Vlc3RMaXN0KSkge1xuXHRcdFx0JGxvZy5pbmZvKCdjcmVhdGluZyB0aGUgb2JqZWN0Jyk7XG5cdFx0XHRhY3RpdmVFdmVudC5ldmVudC5ndWVzdExpc3QgPSB7fTtcblx0XHR9XG5cblx0XHQkbG9nLmluZm8oYWN0aXZlRXZlbnQuZXZlbnQpO1xuXHRcdC8vYWRkIHRoZSBndWVzdCB0byB0aGUgbGlzdFxuXHRcdGFjdGl2ZUV2ZW50LmV2ZW50Lmd1ZXN0TGlzdFt1aWRdID0gbmV3R3Vlc3QuZ3Vlc3Q7XG5cblx0XHQkbG9nLmluZm8oYWN0aXZlRXZlbnQuZXZlbnQuZ3Vlc3RMaXN0W3VpZF0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0VXNlcklkRm9yR3Vlc3QoZW1haWwpIHtcblx0XHQvL2NhbGwgdG8gdGhlIGRiIHNvIHJldHVybiBhIHByb21pc2Vcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL2NvbnZlcnQgdGhlIGVtYWlsXG5cdFx0XHRndWVzdEVtYWlsID0gdXRmOF90b19iNjQoZW1haWwpO1xuXG5cdFx0XHRkYi5maW5kR3Vlc3RVSUQoZ3Vlc3RFbWFpbClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKHVpZCkge1xuXHRcdFx0XHRyZXNvbHZlKHVpZCk7XG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yUmVzcG9uc2UpIHtcblx0XHRcdFx0cmVqZWN0KGVycm9yUmVzcG9uc2UpO1xuXHRcdFx0fSlcblxuXHRcdH0pO1xuXHR9XG5cblx0Ly9kZWxldGUgTWV0aG9kc1xuXHRmdW5jdGlvbiByZW1vdmVVc2VyRXZlbnRzTG9jYWxseSh0eXBlLCBldmVudCkge1xuXHRcdC8vZG9lcyB0aGlzIHdvcms/XG5cdFx0ZGVsZXRlIGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXVtldmVudC5pZF07XG5cdH1cblxuXHQvL3JlbW90ZS1sb2NhbCBpbnRlcmFjdGlvbiBNZXRob2RzXG5cdGZ1bmN0aW9uIGdldEZ1bGxSZW1vdGVEQmZvckxvY2FsKCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0ZGIuZG93bmxvYWRVc2VyRGF0YSgpXG5cdFx0LnRoZW4oZnVuY3Rpb24ocmVtb3RlVXNlckRhdGEpIHtcblx0XHRcdGN1cnJlbnRVc2VyID0gcmVtb3RlVXNlckRhdGE7XG5cdFx0fSlcblx0fVxuXG5cdGZ1bmN0aW9uIGdldFJlbW90ZUJpb0ZvckxvY2FsKHVpZCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXHRcdFx0XHRcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL2dvIG91dCB0byB0aGUgZGIgYmVmb3JlIHJlc29sdmluZ1xuXHRcdFx0ZGIuZ2V0VXNlckJpbyh1aWQpXG5cdFx0XHQudGhlbihmdW5jdGlvbih1c2VyQmlvKSB7XG5cblx0XHRcdFx0cmVzb2x2ZSh1c2VyQmlvKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0cmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3IgcmVhZGluZyB0aGUgdXNlciBiaW86ICcgKyBlcnJvcik7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXHRcdFxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0UmVtb3RlRXZlbnRzRm9yTG9jYWwoKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cdFx0XHRcdFxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9nbyBvdXQgdG8gdGhlIGRiIGJlZm9yZSByZXNvbHZpbmdcblx0XHRcdGRiLmdldFVzZXJFdmVudHMoZ2V0VUlETG9jYWxseSgpKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24ob2J0YWluZWRVc2VyRXZlbnRzKSB7XG5cblx0XHRcdFx0Ly9zYXZlIHRoZSByZXN1bHRzIHRvIHRoZSBsb2NhbCBkYXRhYnNlXG5cdFx0XHRcdE9iamVjdC5rZXlzKG9idGFpbmVkVXNlckV2ZW50cykuZm9yRWFjaChmdW5jdGlvbihldmVudFR5cGUpIHtcblx0XHRcdFx0XHQvL3dpdGhpbiBlYWNoIGV2ZW50IHR5cGUgaXRlcmF0ZSB0aHJvdWdoIHRoZSBhY3R1YWwgZXZlbnRzXG5cdFx0XHRcdFx0T2JqZWN0LmtleXMob2J0YWluZWRVc2VyRXZlbnRzW2V2ZW50VHlwZV0pLmZvckVhY2goZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRcdFx0XHRcdC8vb25jZSB3ZSBzZWUgdGhlIGV2ZW50cywgc2F2ZSB0aGVtIHRvIHRoZSBsb2NhbCBtb2RlbFxuXG5cdFx0XHRcdFx0XHR1cGRhdGVVc2VyRXZlbnRzTG9jYWxseShldmVudFR5cGUsIG9idGFpbmVkVXNlckV2ZW50c1tldmVudFR5cGVdW2V2ZW50XSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly9yZXR1cm4gdGhlIHJlc3VsdHMgdG8gdGhlIHJlcXVlc3Rpbmcgb2JqZWN0XG5cdFx0XHRcdHJlc29sdmUob2J0YWluZWRVc2VyRXZlbnRzKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0cmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3IgcmVhZGluZyB0aGUgdXNlciBldmVudHM6ICcgKyBlcnJvcik7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0T25lUmVtb3RlRXZlbnRGb3JMb2NhbChldmVudElkKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcblx0XHRcdC8vZ29pbmcgdG8gYmFja2VuZCBzZXJ2aWNlc1xuXHRcdFx0ZGIuZ2V0QUhvc3RlZEV2ZW50KGdldFVJRExvY2FsbHkoKSwgZXZlbnRJZClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKG9idGFpbmVkRXZlbnQpIHtcblxuXHRcdFx0XHQvL3NhdmUgdGhlIHJlc3VsdCB0byB0aGUgbG9jYWwgbW9kZWxcblx0XHRcdFx0XG5cdFx0XHRcdC8vcmV0dXJuIHRoZSByZXN1bHQgdG8gdGhlIHJlcXVlc3Rpbmcgb2JqZWN0XG5cdFx0XHRcdHJlc29sdmUob2J0YWluZWRFdmVudCk7XG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdHJlamVjdCgnVGhlcmUgd2FzIGFuIGVycm9yIHJlYWRpbmcgdGhlIHVzZXIgZXZlbnQ6ICcgKyBlcnJvcik7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0RnVsbFJlbW90ZURCZnJvbUxvY2FsKCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0ZGIudXBsb2FkVXNlckRhdGEoY3VycmVudFVzZXIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0UmVtb3RlQmlvRnJvbUxvY2FsKCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0ZGIudXBsb2FkVXNlckJpbyhjdXJyZW50VXNlci5iaW8pO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0QVJlbW90ZUV2ZW50RnJvbUxvY2FsKCkge1xuXG5cdH1cblxuXHRmdW5jdGlvbiBzZXRSZW1vdGVFdmVudHNGcm9tTG9jYWwodWlkLCBldmVudCkge1xuXHRcdC8vZGVjbGFyIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vc2VuZCB0aGUgZXZlbnQgdG8gdGhlIGRiXG5cdFx0XHRkYi5jcmVhdGVIb3N0ZWRFdmVudCh1aWQsIGV2ZW50KVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24oc3VjY2Vzc01lc3NhZ2UpIHtcblx0XHRcdFx0cmVzb2x2ZShzdWNjZXNzTWVzc2FnZSk7XG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yTWVzc2FnZSkge1xuXHRcdFx0XHRyZWplY3QoZXJyb3JNZXNzYWdlKTtcblx0XHRcdH0pXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGNsZWFuREJFdmVudHNDYXRlZ29yeShjYXRlZ29yeSkge1xuXHRcdC8vZGVjbGFyIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdC8vcmVtb3ZlICd1cGRhdGVkJyBvYmplY3QgaWYgbmVlZCBiZVxuXHRcdC8vZGIgY2FsbCBzbyByZXR1cm4gYSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly9jaGVjayBmb3Igb2JqZWN0XG5cdFx0XHRkYi50aGVyZVdhc0FuVXBkYXRlRmllbGQoY2F0ZWdvcnksIGdldFVJRExvY2FsbHkoKSlcblx0XHRcdC50aGVuKGZ1bmN0aW9uKGFmZmlybWF0aXZlUmVzcG9uc2UpIHtcblx0XHRcdFx0Ly9pZiB0aGVyZSB3YXMgYW4gdXBkYXRlIGZpZWxkLCBkZWxldGUgaXRcblx0XHRcdFx0ZGIuZGVsZXRlVXBkYXRlRmllbGQoY2F0ZWdvcnksIGdldFVJRExvY2FsbHkoKSlcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24oYWZmaXJtYXRpdmVSZXNwb25zZSkgeyAkbG9nLmluZm8oYWZmaXJtYXRpdmVSZXNwb25zZSk7IH0gKVxuXHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3JSZXNwb25zZSkgeyAkbG9nLmluZm8oZXJyb3JSZXNwb25zZSk7IH0gKVxuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvclJlc3BvbnNlKSB7XG5cdFx0XHRcdCRsb2cuaW5mbyhlcnJvclJlc3BvbnNlKVxuXHRcdFx0fSlcblxuXHRcdH0pO1xuXHRcdC8vaWYgaXQgaXMgdGhlcmUsIHJlbW92ZSBpdFxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0RXZlbnRHdWVzdExpc3QoaG9zdElkLCBldmVudElkKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vZ2V0IHRoZSBvYmplY3Rcblx0XHRcdGRiLmdldEd1ZXN0TGlzdEZvckV2ZW50KGhvc3RJZCwgZXZlbnRJZClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKG9idGFpbmVkTGlzdCkge1xuXHRcdFx0XHRyZXNvbHZlKG9idGFpbmVkTGlzdCk7XG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yUmVzcG9uc2UpIHtcblx0XHRcdFx0cmVqZWN0KGVycm9yUmVzcG9uc2UpO1xuXHRcdFx0fSlcblx0XHR9KVxuXHR9XG5cblx0ZnVuY3Rpb24gcmVtb3ZlSW5jb21wbGV0ZUV2ZW50RnJvbURCKGV2ZW50SWQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0ZGIucmVtb3ZlSW5jb21wbGV0ZUV2ZW50KGN1cnJlbnRVc2VyLmdldFVJRExvY2FsbHksIGV2ZW50SWQpXG5cdFx0XHQudGhlbihmdW5jdGlvbihzdWNjZXNzTWVzc2FnZSl7XG5cdFx0XHRcdHJlc29sdmUoc3VjY2Vzc01lc3NhZ2UpO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvck1lc3NhZ2UpIHtcblx0XHRcdFx0cmVqZWN0KGVycm9yTWVzc2FnZSk7XG5cdFx0XHR9KVxuXHRcdH0pXG5cdH1cblxuXHRmdW5jdGlvbiBsb2FkQmlvKHVpZCkge1xuXG5cdFx0Ly9taWdodCBuZWVkIHRvIGdvIG91dCB0byB0aGUgZGIgc28gcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9jaGVjayBmb3IgYmlvIGxvY2FsbHkgZmlyc3Rcblx0XHRcdGlmKGJpb1ByaW1hcmllc0FyZUNvbXBsZXRlTG9jYWxseSgpKSB7XG5cblx0XHRcdFx0Ly9wYXNzIGl0IGJhY2sgYXMgc3VjY2Vzc1xuXHRcdFx0XHRyZXNvbHZlKGdldEZ1bGxCaW9Mb2NhbGx5KCkpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9pZiB0aGV5J3JlIG5vdCBjb21wbGV0ZSBsb2NhbGx5LCBjaGVjayB0aGUgc2VydmVyXG5cdFx0XHRcdGdldFJlbW90ZUJpb0ZvckxvY2FsKHVpZClcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24oYmlvRnJvbVJlbW90ZURCKSB7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly9zYXZlIHRoZW0gbG9jYWxseSBmaXJzdFxuXHRcdFx0XHRcdHNldFByaW1hcmllc0xvY2FsbHkoYmlvRnJvbVJlbW90ZURCLmVtYWlsLCBiaW9Gcm9tUmVtb3RlREIubmFtZSwgYmlvRnJvbVJlbW90ZURCLnVpZCk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly9yZXR1cm4gdGhlIGZpbmRpbmdzXG5cdFx0XHRcdFx0cmVzb2x2ZShiaW9Gcm9tUmVtb3RlREIpO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0XHR9KVxuXHRcdFx0fVxuXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGxvYWRBbkV2ZW50UHJvZ3Jlc3NpdmVseSh1aWQsIGV2ZW50SWQpIHtcblx0XHQvL3VwZGF0ZSB1aWQgaWYgbmVlZCBiZVxuXHRcdHNldFVJRExvY2FsbHkodWlkKTtcblxuXHRcdC8vZ29pbmcgb3V0IHRoZSB0aGUgZGIgc28gcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9yZWFjaCBvdXQgdG8gZGJcblx0XHRcdGdldE9uZVJlbW90ZUV2ZW50Rm9yTG9jYWwoZXZlbnRJZClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKG9idGFpbmVkVXNlckV2ZW50KSB7XG5cdFx0XHRcdC8vd2hlbiB0aGUgZGIgcmVzdWx0cyBjb21lIGJhY2ssIHJldHVybiBpdFxuXHRcdFx0XHRyZXNvbHZlKG9idGFpbmVkVXNlckV2ZW50KVxuXHRcdFx0fSlcblx0XHRcdC5jYXRjaCgpXG5cblx0XHRcdC8vZmlyc3QgcmV0dXJuIHdoYXRldmVyIGV2ZW50IGluZm8gaXMgc3RvcmVkIGxvY2FsbHlcblx0XHRcdC8vY2hlY2sgaWYgdGhlIGV2ZW50IGlzIGF2YWlsYWJsZSBsb2NhbGx5XG5cdFx0XHRpZihldmVudEV4aXN0c0xvY2FsbHkoJ2hvc3RpbmcnLCBldmVudElkKSkgcmVzb2x2ZShnZXRPbmVVc2VyRXZlbnRMb2NhbGx5KCdob3N0aW5nJywgZXZlbnRJZCkpO1xuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBsb2FkRXZlbnRzUHJvZ3Jlc3NpdmVseSh1aWQpIHtcblx0XHR2YXIgZXZlbnRUeXBlcyA9IFsnYXR0ZW5kaW5nJywgJ3BlbmRpbmcnLCAnaG9zdGluZycsICdjb21wbGV0ZWQnXTtcblx0XHR2YXIgYWxsRXZlbnRzID0ge307XG5cblx0XHQvL3dpbGwgZ28gb3V0IHRvIHRoZSBkYiBzbyByZXR1cm4gYSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHRnZXRSZW1vdGVFdmVudHNGb3JMb2NhbCgpXG5cdFx0XHQudGhlbihmdW5jdGlvbihvYnRhaW5lZFVzZXJFdmVudHMpIHtcblx0XHRcdFx0Ly93aGVuIHRoZSBkYiByZXN1bHRzIGNvbWUgYmFjaywgcmV0dXJuIHRob3NlXG5cdFx0XHRcdHJlc29sdmUob2J0YWluZWRVc2VyRXZlbnRzKTtcblx0XHRcdH0pXG5cblx0XHRcdC8vYnVpbGQgdGhlIGxvY2FsIG1vZGVsXG5cdFx0XHRhbGxFdmVudHMgPSBnZXRVc2VyRXZlbnRzTG9jYWxseSh0eXBlKTtcblxuXHRcdFx0Ly9maXJzdCByZXR1cm4gd2hhdGV2ZXIgZXZlbnQgaW5mbyBpcyBzdG9yZWQgbG9jYWxseVxuXHRcdFx0cmVzb2x2ZShhbGxFdmVudHMpO1xuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBjcmVhdGVOZXdFdmVudChldmVudElEKSB7XG5cdFx0Ly9kZWNsYXIgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXHRcdHZhciBuZXdFdmVudCA9IHt9O1xuXHRcdHZhciBkYXRlVGltZSA9IG5ldyBEYXRlKCk7XG5cdFx0ZGF0ZVRpbWUuc2V0TWludXRlcygwLCAwLCAwKTtcblx0XHR2YXIgdGVtcFRpbWUgPSBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpO1xuXG5cdFx0Ly9maXJzdCBjcmVhdGUgdGhlIG9iamVjdFxuXHRcdG5ld0V2ZW50ID0ge1xuXHRcdFx0aWQ6IGV2ZW50SUQsXG5cdFx0XHRuYW1lOiAnJyxcblx0XHRcdHR5cGU6ICcnLFxuXHRcdFx0aG9zdDoge1xuXHRcdFx0XHRuYW1lOiBjdXJyZW50VXNlci5iaW8ubmFtZSxcblx0XHRcdFx0dWlkOiBjdXJyZW50VXNlci5iaW8udWlkLFxuXHRcdFx0XHRlbWFpbDogY3VycmVudFVzZXIuYmlvLmVtYWlsXG5cdFx0XHR9LFxuXHRcdFx0bWVzc2FnZTogJycsXG5cdFx0XHRldmVudFRpbWVzOiB7XG5cdFx0XHRcdHN0YXJ0OiB0ZW1wVGltZSxcblx0XHRcdFx0ZW5kOiAodGVtcFRpbWUgKyAoNjAqNjAqMTAwMCkpXG5cdFx0XHR9LFxuXHRcdFx0YWRkcmVzczoge1xuXHRcdFx0XHRzdHJlZXQwMTogJycsXG5cdFx0XHRcdHN0cmVldDAyOiAnJyxcblx0XHRcdFx0c3RyZWV0MDM6ICcnLFxuXHRcdFx0XHRjaXR5OiAnJyxcblx0XHRcdFx0c3RhdGU6ICcnLFxuXHRcdFx0XHR6aXA6IDBcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Ly9zYXZlIGl0IGxvY2FsbHlcblx0XHR1cGRhdGVVc2VyRXZlbnRzTG9jYWxseSgnaG9zdGluZycsIG5ld0V2ZW50KTtcblxuXHRcdC8vc2F2ZSBpdCBhcyB0aGUgYWN0aXZlIGV2ZW50XG5cdFx0c2V0QWN0aXZlRXZlbnQobmV3RXZlbnQpO1xuXG5cdFx0Ly90aGVuIGNyZWF0ZSBpdCBvbiB0aGUgc2VydmVyXG5cdFx0Ly93aWxsIGdvIG91dCB0byB0aGUgZGIgc28gcmV0dXJuIGEgcHJvbWlzZVxuXHRcdFxuXHRcdC8qcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XG5cdFx0XHQkbG9nLmluZm8oJ3NhdmVkIGxvY2FsbHksIG5vdCBvbiB0aGUgZGInKTtcblx0XHRcdC8vbWFuYWdlIHRoZSBwcm9taXNlIHJlc3BvbnNlc1xuXHRcdFx0LypkYi5jcmVhdGVIb3N0ZWRFdmVudChnZXRVSURMb2NhbGx5KCksIG5ld0V2ZW50KVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24obWVzc2FnZSkge1xuXHRcdFx0XHRyZXNvbHZlKG1lc3NhZ2UpO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0fSlcblxuXHRcdH0pOyovXG5cblx0fVxuXG5cdGZ1bmN0aW9uIHVwZGF0ZVBlbmRpbmdFdmVudHNMaXN0Rm9yR3Vlc3QoZXZlbnRJZCkge1xuXHRcdC8vZGVjbGFyIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9tYW5hZ2UgdGhlIGRiIHByb21pc2Vcblx0XHRcdC8vZGIuYWRkUGVuZGluZ0V2ZW50Rm9yR3Vlc3QoY3VycmVudFVzZXIuZ2V0VUlETG9jYWxseSgpLCBob3N0SWQsIGV2ZW50SWQsIGN1cnJlbnRVc2VyLmdldFVzZXJFdmVudHNMb2NhbGx5KCcnLCBldmVudElkKSlcblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gc2F2ZU5ld0hvc3RpbmdFdmVudChjYXRlZ29yeSwgZXZlbnQpIHtcblx0XHQvL1xuXHRcdHVwZGF0ZVVzZXJFdmVudHNMb2NhbGx5KGNhdGVnb3J5LCBldmVudCk7XG5cdH1cblx0XG5cdHJldHVybiBhbGxVc2VyRGF0YTtcbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmZhY3RvcnkoJ3ZhbGlkYXRpb24nLCB2YWxpZGF0aW9uKTtcblxudmFsaWRhdGlvbi4kaW5qZWN0ID0gWyckbG9nJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gdmFsaWRhdGlvbigkbG9nKSB7XG5cdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0dmFyIG1pbmltdW1OYW1lTGVuZ3RoID0gMztcblx0dmFyIG1pbmltdW1QYXNzTGVuZ3RoID0gMTY7XG5cdHZhciBtYXhpbXVtUGFzc0xlbmd0aCA9IDEwMDtcblxuXHR2YXIgYWxsVmFsaWRhdGlvbnMgPSB7XG5cdFx0cmVxdWlyZWQ6IHJlcXVpcmVkLFx0XHRcdFx0XHRcdC8vbmV3IFVzZXIgdmFsaWRhdGlvbnNcblx0XHRtaW5OYW1lTGVuZ3RoOiBtaW5OYW1lTGVuZ3RoLFxuXHRcdG1pblBhc3NMZW5ndGg6IG1pblBhc3NMZW5ndGgsXG5cdFx0bWF4UGFzc0xlbmd0aDogbWF4UGFzc0xlbmd0aCxcblx0XHRhdExlYXN0T25lU3ltYm9sOiBhdExlYXN0T25lU3ltYm9sLFxuXHRcdGF0TGVhc3RPbmVOdW1iZXI6IGF0TGVhc3RPbmVOdW1iZXIsXG5cdFx0YXRMZWFzdE9uZUxvd2VyY2FzZTogYXRMZWFzdE9uZUxvd2VyY2FzZSxcblx0XHRhdExlYXN0T25lVXBwZXJjYXNlOiBhdExlYXN0T25lVXBwZXJjYXNlLFxuXHRcdGlsbGVnYWxDaGFyYWN0ZXI6IGlsbGVnYWxDaGFyYWN0ZXIsXG5cdFx0ZW1haWw6IGVtYWlsLFxuXHRcdGRhdGVPZkJpcnRoOiBkYXRlT2ZCaXJ0aCxcblxuXHRcdGdlbmVyYXRlRXZlbnRSZXF1aXJubWVudHM6IGdlbmVyYXRlRXZlbnRSZXF1aXJubWVudHMsXHRcdC8vZXZlbnQgcmVxdWlybm1lbnRzIFxuXHRcdHVwZGF0ZUV2ZW50UmVxU3RhdHVzOiB1cGRhdGVFdmVudFJlcVN0YXR1cyxcblx0XHR1cGRhdGVFdmVudFJlcUFkZHJlc3NlZDogdXBkYXRlRXZlbnRSZXFBZGRyZXNzZWQsXG5cdFx0dXBkYXRlRXZlbnRSZXFDbGFzczogdXBkYXRlRXZlbnRSZXFDbGFzc1xuXHR9O1xuXG5cdGZ1bmN0aW9uIHJlcXVpcmVkKHZhbHVlKSB7XG5cdFx0aWYoYW5ndWxhci5pc1VuZGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdHJldHVybiAnVGhpcyBpcyBhIHJlcXVpcmVkIGZpZWxkJztcblx0XHR9IFxuXHR9XG5cblx0ZnVuY3Rpb24gbWluTmFtZUxlbmd0aCh2YWx1ZSkge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0aWYodmFsdWUubGVuZ3RoIDwgbWluaW11bU5hbWVMZW5ndGgpIHJldHVybiAoJ05hbWUgc2hvdWxkIGJlIGF0IGxlYXN0ICcgKyBtaW5pbXVtTmFtZUxlbmd0aCArICcgY2hhcmFjdGVycycpO1xuXHRcdH0gXG5cdH1cblxuXHRmdW5jdGlvbiBtaW5QYXNzTGVuZ3RoKHZhbHVlKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHRpZighKHZhbHVlLmxlbmd0aCA8IG1pbmltdW1QYXNzTGVuZ3RoKSkgcmV0dXJuIHRydWU7XG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGZ1bmN0aW9uIG1heFBhc3NMZW5ndGgodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdGlmKCEodmFsdWUubGVuZ3RoID4gbWF4aW11bVBhc3NMZW5ndGgpKSByZXR1cm4gdHJ1ZTtcblx0XHR9IFxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGZ1bmN0aW9uIGF0TGVhc3RPbmVTeW1ib2wodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdC8vIGJ1aWxkIHJlZ2V4XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbXFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqXVwiKTtcblxuXHRcdFx0Ly9jaGVjayBjb25zdHJhdGludFxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZhbHVlKSkge1xuXHRcdFx0XHQvL3N1Y2Nlc3M6IGF0IGxlYXN0IG9uZSBzcGVjaWFsIGNoYXJhY3RlciBmb3VuZFxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vZmFpbHVyZTogZGlkbid0IGZpbmQgYW55IHNwY2lhbCBjaGFyYWN0ZXJzXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRmdW5jdGlvbiBhdExlYXN0T25lTnVtYmVyKHZhbHVlKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHQvLyBidWlsZCByZWdleFxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiWzAtOV1cIiwgXCJcIik7XG5cblx0XHRcdC8vY2hlY2sgY29uc3RyYXRpbnRcblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2YWx1ZSkpIHtcblx0XHRcdFx0Ly9zdWNjZXNzOiBhdCBsZWFzdCBvbmUgc3BlY2lhbCBjaGFyYWN0ZXIgZm91bmRcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2ZhaWx1cmU6IGRpZG4ndCBmaW5kIGFueSBzcGNpYWwgY2hhcmFjdGVyc1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cbiAgICBmdW5jdGlvbiBhdExlYXN0T25lTG93ZXJjYXNlKHZhbHVlKSB7XG4gICAgXHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdC8vIGJ1aWxkIHJlZ2V4XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbYS16XVwiLCBcIlwiKTtcblxuXHRcdFx0Ly9jaGVjayBjb25zdHJhdGludFxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZhbHVlKSkge1xuXHRcdFx0XHQvL3N1Y2Nlc3M6IGF0IGxlYXN0IG9uZSBzcGVjaWFsIGNoYXJhY3RlciBmb3VuZFxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vZmFpbHVyZTogZGlkbid0IGZpbmQgYW55IHNwY2lhbCBjaGFyYWN0ZXJzXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYXRMZWFzdE9uZVVwcGVyY2FzZSh2YWx1ZSkge1xuICAgIFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHQvLyBidWlsZCByZWdleFxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW0EtWl1cIiwgXCJcIik7XG5cblx0XHRcdC8vY2hlY2sgY29uc3RyYXRpbnRcblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2YWx1ZSkpIHtcblx0XHRcdFx0Ly9zdWNjZXNzOiBhdCBsZWFzdCBvbmUgc3BlY2lhbCBjaGFyYWN0ZXIgZm91bmRcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2ZhaWx1cmU6IGRpZG4ndCBmaW5kIGFueSBzcGNpYWwgY2hhcmFjdGVyc1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlsbGVnYWxDaGFyYWN0ZXIodmFsdWUpIHtcbiAgICBcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0Ly8gYnVpbGQgcmVnZXhcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIlteQS16MC05XFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqXVwiLCBcIlwiKTtcblxuXHRcdFx0Ly9jaGVjayBjb25zdHJhdGludFxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZhbHVlKSkge1xuXHRcdFx0XHQvL3N1Y2Nlc3M6IGF0IGxlYXN0IG9uZSBzcGVjaWFsIGNoYXJhY3RlciBmb3VuZFxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2ZhaWx1cmU6IGRpZG4ndCBmaW5kIGFueSBzcGNpYWwgY2hhcmFjdGVyc1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIGVtYWlsKHZhbHVlKSB7XG4gICAgXHQvL2RlZmluZSBjb25zdHJhaW50c1xuICAgIFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XCIsIFwiXCIpO1xuICAgIFx0XG4gICAgXHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkgJiYgIWNvbnN0cmFpbnQudGVzdCh2YWx1ZSkpIHtcbiAgICBcdFx0cmV0dXJuICdOb3QgYSB2YWxpZCBlbWFpbCc7XG4gICAgXHR9XG4gICAgXHQvL2lmKCFjb25zdHJhaW50LnRlc3QodmFsdWUpKSByZXR1cm4gJ05vdCBhIHZhbGlkIGUtbWFpbCBhZGRyZXNzJ1xuICAgIFx0XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGF0ZU9mQmlydGgodmFsdWUpIHt9XG5cbiAgICBmdW5jdGlvbiBnZW5lcmF0ZUV2ZW50UmVxdWlybm1lbnRzKCkge1xuICAgIFx0Ly9idWlsZCB0aGUgb2JqZWN0IGFuZCByZXR1cm4gaXRcbiAgICBcdHZhciBldmVudFZhbGlkYXRpb25zID0ge1xuICAgIFx0XHRldmVudE5hbWU6IHsgXG4gICAgXHRcdFx0Y29tcGxldGVkIDpmYWxzZSwgXG4gICAgXHRcdFx0YWRkcmVzc2VkOmZhbHNlLCBcbiAgICBcdFx0XHRyb3c6IHtcbiAgICBcdFx0XHRcdGNsYXNzOiB7XG4gICAgXHRcdFx0XHRcdCdjb2wteHMtMTInOiB0cnVlLFxuICAgIFx0XHRcdFx0XHQnY29sLXNtLTEyJzogdHJ1ZSxcbiAgICBcdFx0XHRcdFx0J2Zvcm0tZ3JvdXAnOiB0cnVlLFxuICAgIFx0XHRcdFx0XHQnaGFzLXN1Y2Nlc3MnOiBmYWxzZSxcbiAgICBcdFx0XHRcdFx0J2hhcy1lcnJvcic6IGZhbHNlXG4gICAgXHRcdFx0XHR9XG4gICAgXHRcdFx0fSxcbiAgICBcdFx0XHRsYWJlbDoge1xuICAgIFx0XHRcdFx0Y2xhc3M6IHtcbiAgICBcdFx0XHRcdFx0J2NvbnRyb2wtbGFiZWwnOiB0cnVlXG4gICAgXHRcdFx0XHR9XG4gICAgXHRcdFx0fSxcbiAgICBcdFx0XHRpbnB1dDoge1xuICAgIFx0XHRcdFx0Y2xhc3M6IHtcbiAgICBcdFx0XHRcdFx0J2Zvcm0tY29udHJvbCc6IHRydWVcbiAgICBcdFx0XHRcdH1cbiAgICBcdFx0XHR9XG4gICAgXHRcdH0sXG5cdFx0XHRldmVudEhvc3Q6IHsgY29tcGxldGVkIDpmYWxzZSwgYWRkcmVzc2VkOmZhbHNlLCByb3c6IHsgY2xhc3M6IHsnY29sLXhzLTEyJzogdHJ1ZSwgJ2NvbC1zbS0xMic6IHRydWUsICdmb3JtLWdyb3VwJzogdHJ1ZSwgJ2hhcy1zdWNjZXNzJzogZmFsc2UsICdoYXMtZXJyb3InOiBmYWxzZSB9IH0sIGxhYmVsOiB7IGNsYXNzOiB7ICdjb250cm9sLWxhYmVsJzogdHJ1ZSB9IH0sIGlucHV0OiB7IGNsYXNzOiB7ICdmb3JtLWNvbnRyb2wnOiB0cnVlIH0gfSB9LFxuXHRcdFx0ZXZlbnRTdGFydDogeyBjb21wbGV0ZWQgOmZhbHNlLCBhZGRyZXNzZWQ6ZmFsc2UsIHJvdzogeyBjbGFzczogeydjb2wteHMtMTInOiB0cnVlLCAnY29sLXNtLTEyJzogdHJ1ZSwgJ2Zvcm0tZ3JvdXAnOiB0cnVlLCAnaGFzLXN1Y2Nlc3MnOiBmYWxzZSwgJ2hhcy1lcnJvcic6IGZhbHNlIH0gfSwgbGFiZWw6IHsgY2xhc3M6IHsgJ2NvbnRyb2wtbGFiZWwnOiB0cnVlIH0gfSwgaW5wdXQ6IHsgY2xhc3M6IHsgJ2Zvcm0tY29udHJvbCc6IHRydWUgfSB9IH0sXG5cdFx0XHRldmVudEVuZDogeyBjb21wbGV0ZWQgOmZhbHNlLCBhZGRyZXNzZWQ6ZmFsc2UsIHJvdzogeyBjbGFzczogeydjb2wteHMtMTInOiB0cnVlLCAnY29sLXNtLTEyJzogdHJ1ZSwgJ2Zvcm0tZ3JvdXAnOiB0cnVlLCAnaGFzLXN1Y2Nlc3MnOiBmYWxzZSwgJ2hhcy1lcnJvcic6IGZhbHNlIH0gfSwgbGFiZWw6IHsgY2xhc3M6IHsgJ2NvbnRyb2wtbGFiZWwnOiB0cnVlIH0gfSwgaW5wdXQ6IHsgY2xhc3M6IHsgJ2Zvcm0tY29udHJvbCc6IHRydWUgfSB9IH0sXG5cdFx0XHRldmVudFN0cmVldDAxOiB7IGNvbXBsZXRlZCA6ZmFsc2UsIGFkZHJlc3NlZDpmYWxzZSwgcm93OiB7IGNsYXNzOiB7J2NvbC14cy0xMic6IHRydWUsICdjb2wtc20tMTInOiB0cnVlLCAnZm9ybS1ncm91cCc6IHRydWUsICdoYXMtc3VjY2Vzcyc6IGZhbHNlLCAnaGFzLWVycm9yJzogZmFsc2UgfSB9LCBsYWJlbDogeyBjbGFzczogeyAnY29udHJvbC1sYWJlbCc6IHRydWUgfSB9LCBpbnB1dDogeyBjbGFzczogeyAnZm9ybS1jb250cm9sJzogdHJ1ZSB9IH0gfSxcblx0XHRcdGV2ZW50Q2l0eTogeyBjb21wbGV0ZWQgOmZhbHNlLCBhZGRyZXNzZWQ6ZmFsc2UsIHJvdzogeyBjbGFzczogeydjb2wteHMtMTInOiB0cnVlLCAnY29sLXNtLTEyJzogdHJ1ZSwgJ2Zvcm0tZ3JvdXAnOiB0cnVlLCAnaGFzLXN1Y2Nlc3MnOiBmYWxzZSwgJ2hhcy1lcnJvcic6IGZhbHNlIH0gfSwgbGFiZWw6IHsgY2xhc3M6IHsgJ2NvbnRyb2wtbGFiZWwnOiB0cnVlIH0gfSwgaW5wdXQ6IHsgY2xhc3M6IHsgJ2Zvcm0tY29udHJvbCc6IHRydWUgfSB9IH0sXG5cdFx0XHRldmVudFN0YXRlOiB7IGNvbXBsZXRlZCA6ZmFsc2UsIGFkZHJlc3NlZDpmYWxzZSwgcm93OiB7IGNsYXNzOiB7J2NvbC14cy0xMic6IHRydWUsICdjb2wtc20tMTInOiB0cnVlLCAnZm9ybS1ncm91cCc6IHRydWUsICdoYXMtc3VjY2Vzcyc6IGZhbHNlLCAnaGFzLWVycm9yJzogZmFsc2UgfSB9LCBsYWJlbDogeyBjbGFzczogeyAnY29udHJvbC1sYWJlbCc6IHRydWUgfSB9LCBpbnB1dDogeyBjbGFzczogeyAnZm9ybS1jb250cm9sJzogdHJ1ZSB9IH0gfSxcblx0XHRcdGV2ZW50WmlwOiB7IGNvbXBsZXRlZCA6ZmFsc2UsIGFkZHJlc3NlZDpmYWxzZSwgcm93OiB7IGNsYXNzOiB7J2NvbC14cy0xMic6IHRydWUsICdjb2wtc20tMTInOiB0cnVlLCAnZm9ybS1ncm91cCc6IHRydWUsICdoYXMtc3VjY2Vzcyc6IGZhbHNlLCAnaGFzLWVycm9yJzogZmFsc2UgfSB9LCBsYWJlbDogeyBjbGFzczogeyAnY29udHJvbC1sYWJlbCc6IHRydWUgfSB9LCBpbnB1dDogeyBjbGFzczogeyAnZm9ybS1jb250cm9sJzogdHJ1ZSB9IH0gfSxcblx0XHRcdGV2ZW50R3Vlc3Q6IHsgY29tcGxldGVkIDpmYWxzZSwgYWRkcmVzc2VkOmZhbHNlLCByb3c6IHsgY2xhc3M6IHsnY29sLXhzLTEyJzogdHJ1ZSwgJ2NvbC1zbS0xMic6IHRydWUsICdmb3JtLWdyb3VwJzogdHJ1ZSwgJ2hhcy1zdWNjZXNzJzogZmFsc2UsICdoYXMtZXJyb3InOiBmYWxzZSB9IH0sIGxhYmVsOiB7IGNsYXNzOiB7ICdjb250cm9sLWxhYmVsJzogdHJ1ZSB9IH0sIGlucHV0OiB7IGNsYXNzOiB7ICdmb3JtLWNvbnRyb2wnOiB0cnVlIH0gfSB9XG4gICAgXHR9XG5cbiAgICBcdHJldHVybiBldmVudFZhbGlkYXRpb25zO1xuICAgIH1cblxuXHRmdW5jdGlvbiB1cGRhdGVFdmVudFJlcVN0YXR1cygpIHt9XG5cdGZ1bmN0aW9uIHVwZGF0ZUV2ZW50UmVxQWRkcmVzc2VkKCkge30gXG5cdGZ1bmN0aW9uIHVwZGF0ZUV2ZW50UmVxQ2xhc3MoKSB7fVxuXG5cdHJldHVybiBhbGxWYWxpZGF0aW9ucztcbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbmZpZyhjb25maWcpO1xuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBjb25maWcoJHJvdXRlUHJvdmlkZXIpIHsgICBcbiAgICAkcm91dGVQcm92aWRlclxuICAgIC53aGVuKCcvJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2xhbmRpbmdQYWdlLmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdMYW5kaW5nUGFnZUNvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICB9KVxuICAgIC53aGVuKCcvc2lnbnVwJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL25ld1VzZXJTaWdudXAuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ05ld1VzZXJTaWduVXBDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgfSlcbiAgICAud2hlbignL2xvZ2luJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3JlZ2lzdGVyZWRVc2VyTG9naW4uaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1JlZ1VzZXJMb2dpbkNvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICB9KVxuICAgIC53aGVuKCcvdXNlckluZm9ybWF0aW9uLzp1aWQ/Jywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3VzZXJJbmZvcm1hdGlvbi5odG0nLFxuICAgICAgICBjb250cm9sbGVyOiAnVXNlckluZm9ybWF0aW9uQ29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgcmVzb2x2ZTogeyAvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgICAgIHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2U6IHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2VcbiAgICAgICAgfVxuICAgIH0pXG4gICAgLndoZW4oJy91c2VyRXZlbnRzLzp1aWQ/Jywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3VzZXJFdmVudHMuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1VzZXJFdmVudHNDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICByZXNvbHZlOiB7IC8qIEBuZ0luamVjdCAqL1xuICAgICAgICAgICAgdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZTogdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZVxuICAgICAgICB9XG4gICAgfSlcbiAgICAud2hlbignL2V2ZW50L2hvc3QvOmV2ZW50SWQvOnVpZC86c2VjdGlvbicsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9ob3N0RXZlbnQuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ0hvc3RFdmVudENvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgIHJlc29sdmU6IHsgLyogQG5nSW5qZWN0ICovXG4gICAgICAgICAgICB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlOiB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlLFxuICAgICAgICB9XG4gICAgfSlcbiAgICAud2hlbignL2V2ZW50L2d1ZXN0LzpldmVudElkLzp1aWQvOmhvc3RJZCcsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9ndWVzdEV2ZW50Lmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdHdWVzdEV2ZW50Q29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgcmVzb2x2ZTogeyAvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgICAgIHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2U6IHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2UsXG4gICAgICAgIH1cbiAgICB9KVxuICAgIC53aGVuKCcvZXZlbnQvOmV2ZW50SWQ/Lzpob3N0SWQ/Lzp1aWQ/LzpzZWN0aW9uPycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9hbkV2ZW50Lmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdBbkV2ZW50Q29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgcmVzb2x2ZTogeyAvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgICAgIHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2U6IHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2UsXG4gICAgICAgICAgICBldmVudFZpZXdDaGFuZ2VyOiBldmVudFZpZXdDaGFuZ2VyXG4gICAgICAgIH1cbiAgICB9KVxuICAgIC5vdGhlcndpc2Uoe1xuICAgICAgICByZWRpcmVjdFRvOiAnLydcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZShhdXRoU2VydmljZSkge1xuICAgIGF1dGhTZXJ2aWNlLmlzTG9nZ2VkSW4oKTtcbn07XG5cbmZ1bmN0aW9uIGV2ZW50Vmlld0NoYW5nZXIodHJhZmZpY1ZhbGV0LCAkcm91dGUpIHtcbiAgICB0cmFmZmljVmFsZXQuZXZlbnRSb3V0ZSgkcm91dGUuY3VycmVudC5wYXJhbXMuZXZlbnRJZCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvdXRlLmN1cnJlbnQucGFyYW1zLmhvc3RJZCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvdXRlLmN1cnJlbnQucGFyYW1zLnVpZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm91dGUuY3VycmVudC5wYXJhbXMuc2VjdGlvbik7XG59O1xuLyogQWRkQUd1ZXN0LmRpcmVjdGl2ZS5qcyAqL1xuXG4vKipcbiogQGRlc2MgZGlzcGxheXMgYSBsaXN0IG9mIGFsbCBndWVzdHMgaW52aXRlZCB0byBhbiBldmVudCB0aGlzIHVzZXIgaXMgaG9zdGluZy5cbiogQGV4YW1wbGUgPGFkZC1hLWd1ZXN0PjwvYWRkLWEtZ3Vlc3Q+XG4qL1xuXG5hbmd1bGFyXG5cdC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcblx0LmRpcmVjdGl2ZSgnYWRkQUd1ZXN0JywgYWRkQUd1ZXN0KTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBhZGRBR3Vlc3QoKSB7XG4gICAgbGlua0Z1bmMuJGluamVjdCA9IFtcInNjb3BlXCIsIFwiZWxcIiwgXCJhdHRyXCIsIFwiY3RybFwiXTtcblx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRyZXN0cmljdDogJ0FFQ00nLFxuXHRcdHRlbXBsYXRlVXJsOiAnLi4vdmlld3MvZGlyZWN0aXZlcy9hZGRBR3Vlc3QuZGlyZWN0aXZlLmh0bScsXG5cdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRzY29wZToge1xuXHRcdFx0Z3Vlc3RMaXN0OiAnPSdcblx0XHR9LFxuXHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdGNvbnRyb2xsZXI6IGFkZEFHdWVzdENvbnRyb2xsZXIsXG5cdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0fVxuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHtcbiAgICB9XG5cbiAgICBhZGRBR3Vlc3RDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJHJvdXRlUGFyYW1zJywgJ3ZhbGlkYXRpb24nLCAndXNlckRhdGEnXTtcbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBhZGRBR3Vlc3RDb250cm9sbGVyKCRsb2csICRyb3V0ZVBhcmFtcywgdmFsaWRhdGlvbiwgdXNlckRhdGEpIHtcblx0ICAgIHZhciB2bSA9IHRoaXM7XG5cdCAgICB2YXIgZW1haWxDaGVja2VyID0gdmFsaWRhdGlvbjtcblx0ICAgIHZhciBpbnZpdGF0aW9uTWFuYWdlciA9IHVzZXJEYXRhO1xuXG5cdCAgICAvL2xvY2FsIHZhcmlhYmxlc1xuXHQgICAgdmFyIGV2ZW50RGV0YWlscyA9IHt9O1xuXG5cdCAgICAvL3ZtIHZhcmlhYmxlc1xuXHQgICAgdm0udGVtcEd1ZXN0ID0ge1xuXHQgICAgXHRuYW1lOiAnJyxcblx0ICAgIFx0ZW1haWw6ICcnLFxuXHQgICAgXHRzdGF0dXM6ICdwZW5kaW5nJ1xuXHQgICAgfVxuXHQgICAgdm0udmFsaWRhdGlvbnMgPSB7XG5cdCAgICBcdG5hbWU6IHtcblx0ICAgIFx0XHRhZGRyZXNzZWQ6IGZhbHNlLFxuXHQgICAgXHRcdHZhbGlkOiBmYWxzZSxcblx0ICAgIFx0XHRlcnJvck1lc3NhZ2U6ICcnXG5cdCAgICBcdH0sXG5cdCAgICBcdGVtYWlsOiB7XG5cdCAgICBcdFx0YWRkcmVzc2VkOiBmYWxzZSxcblx0ICAgIFx0XHR2YWxpZDogZmFsc2UsXG5cdCAgICBcdFx0ZXJyb3JNZXNzYWdlOiAnJ1xuXHQgICAgXHR9LFxuXHQgICAgXHRpbnZpdGF0aW9uOiB7XG5cdCAgICBcdFx0aXNUaGVIb3N0OiBmYWxzZSxcblx0ICAgIFx0XHRhbHJlYWR5SW52aXRlZDogZmFsc2UsXG5cdCAgICBcdFx0ZXJyb3JNZXNzYWdlOiAnJ1xuXHQgICAgXHR9XG5cdCAgICB9XG5cdCAgICB2bS5pbnZpdGF0aW9uVmFsaWRGb3JTdWJtaXNzaW9uID0gZmFsc2U7XG5cdCAgICB2bS5zdWJtaXNzaW9uQnV0dG9uID0ge1xuXHQgICAgXHRzdHlsZToge1xuXHQgICAgXHRcdGNvbG9yOidyZWQnXG5cdCAgICBcdH0sXG5cdCAgICBcdGNsYXNzOiB7XG5cdCAgICBcdFx0J2NvbC14cy0xMic6IHRydWUsXG5cdCAgICBcdFx0J2NvbC1zbS0xMic6IHRydWUsXG5cdCAgICBcdFx0J2J0bic6IHRydWUsXG5cdCAgICBcdFx0J2J0bi13YXJuaW5nJzogdHJ1ZSxcblx0ICAgIFx0XHQnYnRuLXN1Y2Nlc3MnOiBmYWxzZVxuXHQgICAgXHR9LFxuXHQgICAgXHRtZXNzYWdlOiAnQWRkcmVzcyBJbnZpdGF0aW9uLi4uJ1xuXHQgICAgfVxuXHQgICAgLy9sb2NhbCBtZXRob2RzXG5cdCAgICBmdW5jdGlvbiB1dGY4X3RvX2I2NChzdHIpIHtcblx0XHRcdHJldHVybiBidG9hKHN0cik7XG5cdFx0fVxuXG5cdCAgICBmdW5jdGlvbiB2YWxpZGF0ZUludml0YXRpb24oKSB7XG5cdCAgICBcdC8vY2hlY2sgaWYgYm90aCBpbnB1dHMgYXJlIHZhbGlkXG5cdCAgICBcdGlmKHZtLnZhbGlkYXRpb25zLm5hbWUudmFsaWQgJiYgdm0udmFsaWRhdGlvbnMuZW1haWwudmFsaWQpIHtcblx0ICAgIFx0XHQkbG9nLmluZm8oJ3JlYWR5IHRvIHN1Ym1pdCcpO1xuXHQgICAgXHRcdC8vc2V0IHRoZSB2YWxpZGl0eSBmbGFnXG5cdCAgICBcdFx0dm0uaW52aXRhdGlvblZhbGlkRm9yU3VibWlzc2lvbiA9IHRydWU7XG5cdCAgICBcdFx0Ly91cGRhdGUgdGhlIHN1Ym1pc3Npb24gYnV0dG9uXG5cdCAgICBcdFx0dm0uc3VibWlzc2lvbkJ1dHRvbi5jbGFzc1snYnRuLXdhcm5pbmcnXSA9IGZhbHNlO1xuXHQgICAgXHRcdHZtLnN1Ym1pc3Npb25CdXR0b24uY2xhc3NbJ2J0bi1zdWNjZXNzJ10gPSB0cnVlO1xuXHQgICAgXHRcdHZtLnN1Ym1pc3Npb25CdXR0b24ubWVzc2FnZT0nSW52aXRlIEd1ZXN0Jztcblx0ICAgIFx0fSBlbHNlIHtcblx0ICAgIFx0XHQkbG9nLmluZm8oJ25vdCByZWFkeSB0byBzdWJtaXQnKTtcblx0ICAgIFx0XHQvL3NldCB0aGUgdmFsaWRpdHkgZmxhZ1xuXHQgICAgXHRcdHZtLmludml0YXRpb25WYWxpZEZvclN1Ym1pc3Npb24gPSBmYWxzZTtcblx0ICAgIFx0XHQvL3VwZGF0ZSB0aGUgc3VibWlzc2lvbiBidXR0b25cblx0ICAgIFx0XHR2bS5zdWJtaXNzaW9uQnV0dG9uLmNsYXNzWydidG4td2FybmluZyddID0gdHJ1ZTtcblx0ICAgIFx0XHR2bS5zdWJtaXNzaW9uQnV0dG9uLmNsYXNzWydidG4tc3VjY2VzcyddID0gZmFsc2U7XG5cdCAgICBcdFx0dm0uc3VibWlzc2lvbkJ1dHRvbi5tZXNzYWdlPSdBZGRyZXNzIEludml0YXRpb24uLi4nO1xuXHQgICAgXHR9XG5cdCAgICB9XG5cblx0ICAgIGZ1bmN0aW9uIGluaXQoKSB7XG5cdCAgICBcdC8vbG9hZCB0aGUgZXZlbnQgZm9yIHJlZmVyZW5jZVxuXHQgICAgXHRpZihhbmd1bGFyLmlzVW5kZWZpbmVkKGludml0YXRpb25NYW5hZ2VyLmdldE9uZVVzZXJFdmVudExvY2FsbHkoJ2hvc3RpbmcnLCAkcm91dGVQYXJhbXMuZXZlbnRJZCkpKSB7XG5cdCAgICBcdFx0Ly9pZiB0aGlzIHBhZ2Ugd2FzIGxvYWRlZCBiZWZvcmUgdGhlIG1vZGVsIGdldCB0aGUgZXZlbnRcblx0ICAgIFx0XHRpbnZpdGF0aW9uTWFuYWdlci5nZXRSZW1vdGVFdmVudHNGb3JMb2NhbCgpXG5cdFx0ICAgIFx0LnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0ICAgIFx0XHQvL3doZW4gdGhlIGV2ZW50IGhhcyBiZWVuIGxvYWRlZFxuXHRcdCAgICBcdFx0ZXZlbnREZXRhaWxzID0gaW52aXRhdGlvbk1hbmFnZXIuZ2V0T25lVXNlckV2ZW50TG9jYWxseSgnaG9zdGluZycsICRyb3V0ZVBhcmFtcy5ldmVudElkKTtcblxuXHRcdCAgICBcdH0pXG5cdCAgICBcdH0gZWxzZSB7XG5cdCAgICBcdFx0Ly9qdXN0IGdldCB0aGUgbW9kZWwgbG9jYWxseVxuXHQgICAgXHRcdGV2ZW50RGV0YWlscyA9IGludml0YXRpb25NYW5hZ2VyLmdldE9uZVVzZXJFdmVudExvY2FsbHkoJ2hvc3RpbmcnLCAkcm91dGVQYXJhbXMuZXZlbnRJZCk7XG5cdCAgICBcdH1cblx0ICAgIFx0ICBcdFxuXHQgICAgfVxuXG5cdCAgICAvL3ZtIG1ldGhvZHNcblx0ICAgIHZtLnZhbGlkYXRlTmFtZSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgXHQvL3RoaXMgZmllbGQgaXMgYmVpbmcgZWRpdGVkLCB0aHJvdyBmbGFnXG5cdCAgICBcdHZtLnZhbGlkYXRpb25zLm5hbWUuYWRkcmVzc2VkID0gdHJ1ZTtcblxuXHQgICAgXHQvL2NoZWNrIGZvciB2YWx1ZVxuXHQgICAgXHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2bS50ZW1wR3Vlc3QubmFtZSkgJiYgdm0udGVtcEd1ZXN0Lm5hbWUgIT0gJycpIHtcblx0ICAgIFx0XHR2bS52YWxpZGF0aW9ucy5uYW1lLnZhbGlkID0gdHJ1ZTtcblx0ICAgIFx0XHR2bS52YWxpZGF0aW9ucy5uYW1lLmVycm9yTWVzc2FnZSA9ICcnO1xuXHQgICAgXHR9IGVsc2Uge1xuXHQgICAgXHRcdHZtLnZhbGlkYXRpb25zLm5hbWUudmFsaWQgPSBmYWxzZTtcblx0ICAgIFx0XHR2bS52YWxpZGF0aW9ucy5uYW1lLmVycm9yTWVzc2FnZSA9ICdUaGlzIGd1ZXN0IG5lZWRzIGEgbmFtZSc7XG5cdCAgICBcdH1cblxuXHQgICAgXHR2YWxpZGF0ZUludml0YXRpb24oKTtcblx0ICAgIH1cblx0ICAgIHZtLnZhbGlkYXRlRW1haWwgPSBmdW5jdGlvbigpIHtcblx0ICAgIFx0Ly90aGlzIGZpZWxkIGlzIGJlaW5nIGVkaXRlZCwgdGhyb3cgZmxhZ1xuXHQgICAgXHR2bS52YWxpZGF0aW9ucy5lbWFpbC5hZGRyZXNzZWQgPSB0cnVlO1xuXG5cdCAgICBcdC8vaXMgdGhlcmUgYW4gZW1haWwgdmFsdWU/XG5cdCAgICBcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZtLnRlbXBHdWVzdC5lbWFpbCkgJiYgdm0udGVtcEd1ZXN0LmVtYWlsICE9ICcnKSB7XG5cdCAgICBcdFx0XG5cdCAgICBcdFx0Ly9pZiBhbiBlbWFpbCBleGlzdHMgY2hlY2sgaXQncyB2YWxpZGl0eVxuXHQgICAgXHRcdGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQoZW1haWxDaGVja2VyLmVtYWlsKHZtLnRlbXBHdWVzdC5lbWFpbCkpKSB7XG5cdCAgICBcdFx0XHQvL2VtYWlsIGlzIHZhbGlkXG5cdCAgICBcdFx0XHR2bS52YWxpZGF0aW9ucy5lbWFpbC52YWxpZCA9IHRydWU7XG5cdCAgICBcdFx0XHR2bS52YWxpZGF0aW9ucy5lbWFpbC5lcnJvck1lc3NhZ2UgPSAnJztcblx0ICAgIFx0XHR9IGVsc2Uge1xuXHQgICAgXHRcdFx0Ly9nZXQgdGhlIGVycm9yXG5cdCAgICBcdFx0XHR2bS52YWxpZGF0aW9ucy5lbWFpbC52YWxpZCA9IGZhbHNlO1xuXHQgICAgXHRcdFx0dm0udmFsaWRhdGlvbnMuZW1haWwuZXJyb3JNZXNzYWdlID0gZW1haWxDaGVja2VyLmVtYWlsKHZtLnRlbXBHdWVzdC5lbWFpbCk7XG5cdCAgICBcdFx0XHQkbG9nLmluZm8odm0udmFsaWRhdGlvbnMuZW1haWwuZXJyb3JNZXNzYWdlKTtcblx0ICAgIFx0XHR9XG5cblx0ICAgIFx0fSBlbHNlIHtcblx0ICAgIFx0XHQvL3RoZXJlIGlzbid0IGFuIGVtYWlsIHlldFxuXHQgICAgXHRcdHZtLnZhbGlkYXRpb25zLmVtYWlsLnZhbGlkID0gZmFsc2U7XG5cdCAgICBcdFx0dm0udmFsaWRhdGlvbnMuZW1haWwuZXJyb3JNZXNzYWdlID0gJ05vdCBhIHZhbGlkIGVtYWlsJztcblx0ICAgIFx0fVxuXG5cdCAgICBcdHZhbGlkYXRlSW52aXRhdGlvbigpO1xuXHQgICAgfVxuXG5cdCAgICB2bS5zaG93TmFtZUVycm9yID0gZnVuY3Rpb24oKSB7XG5cdCAgICBcdGlmKCF2bS52YWxpZGF0aW9ucy5uYW1lLnZhbGlkICYmIHZtLnZhbGlkYXRpb25zLm5hbWUuYWRkcmVzc2VkKSByZXR1cm4gdHJ1ZTtcblx0ICAgIFx0ZWxzZSByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cblx0ICAgIHZtLnNob3dFbWFpbEVycm9yID0gZnVuY3Rpb24oKSB7XG5cdCAgICBcdGlmKCF2bS52YWxpZGF0aW9ucy5lbWFpbC52YWxpZCAmJiB2bS52YWxpZGF0aW9ucy5lbWFpbC5hZGRyZXNzZWQpIHJldHVybiB0cnVlO1xuXHQgICAgXHRlbHNlIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblxuXHQgICAgdm0uc2hvd0ludml0YXRpb25FcnJvciA9IGZ1bmN0aW9uKCkge1xuXHQgICAgXHRpZiggdm0udmFsaWRhdGlvbnMuaW52aXRhdGlvbi5pc1RoZUhvc3QgfHxcblx0ICAgIFx0XHR2bS52YWxpZGF0aW9ucy5pbnZpdGF0aW9uLmFscmVhZHlJbnZpdGVkICkgXG5cdCAgICBcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0ICAgIFx0ZWxzZSByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cblx0ICAgIHZtLnN1Ym1pdEd1ZXN0SW52aXRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuXHQgICAgXHQkbG9nLmluZm8oJ3N1Ym1pdHRpbmcgdGhlIGludml0YXRpb24nKTtcblx0ICAgIFx0Ly9pZiB0aGUgcmVxdWlybm1lbnRzIGFyZSBmdWxmaWxsZWQuLi5cblx0ICAgIFx0aWYodm0uaW52aXRhdGlvblZhbGlkRm9yU3VibWlzc2lvbikge1xuXHQgICAgXHRcdC8vbWFrZSBzdXJlIHRoZSBpbnZpdGF0aW9uIGlzIG5vdCB0byB0aGUgY3VycmVudCB1c2VyXG5cdCAgICBcdFx0aWYoaW52aXRhdGlvbk1hbmFnZXIudGhpc0lzVGhlSG9zdEVtYWlsKHZtLnRlbXBHdWVzdC5lbWFpbCwgJHJvdXRlUGFyYW1zLmV2ZW50SWQpKSB7XG5cdFx0XHRcdFx0dm0udmFsaWRhdGlvbnMuaW52aXRhdGlvbi5pc1RoZUhvc3QgPSB0cnVlO1xuXHRcdFx0XHRcdHZtLnZhbGlkYXRpb25zLmludml0YXRpb24uZXJyb3JNZXNzYWdlID0gJ05vIG5lZWQgdG8gaW52aXRlIHRoZSBob3N0Jztcblx0XHRcdFx0XHRyZXR1cm4gMDtcblx0ICAgIFx0XHR9IGVsc2Uge1xuXHQgICAgXHRcdFx0dm0udmFsaWRhdGlvbnMuaW52aXRhdGlvbi5pc1RoZUhvc3QgPSBmYWxzZTtcblx0ICAgIFx0XHR9XG5cdCAgICBcdFx0XG5cdFx0ICAgIFx0Ly9tYWtlIHN1cmUgdGhpcyBwZXJzb24gaGFzIG5vdCBhbHJlYWR5IGJlZW4gaW52aXRlZFxuXHRcdCAgICBcdC8qXG5cdFx0ICAgIFx0aWYoaW52aXRhdGlvbk1hbmFnZXIuZ3Vlc3RJbnZpdGVkQWxyZWFkeSh2bS50ZW1wR3Vlc3QuZW1haWwsICRyb3V0ZVBhcmFtcy5ldmVudElkKSkge1xuXHRcdCAgICBcdFx0dm0udmFsaWRhdGlvbnMuaW52aXRhdGlvbi5hbHJlYWR5SW52aXRlZCA9IHRydWU7XG5cdFx0XHRcdFx0dm0udmFsaWRhdGlvbnMuaW52aXRhdGlvbi5lcnJvck1lc3NhZ2UgPSAnVGhpcyBndWVzdCBoYXMgYWxyZWFkeSBiZWVuIGludml0ZWQnO1xuXHRcdFx0XHRcdHJldHVybiAwO1xuXHQgICAgXHRcdH0gZWxzZSB7XG5cdCAgICBcdFx0XHR2bS52YWxpZGF0aW9ucy5pbnZpdGF0aW9uLmFscmVhZHlJbnZpdGVkID0gZmFsc2U7XG5cdCAgICBcdFx0fSovXG5cblx0ICAgIFx0XHQvL2lmIHRoaXMgcGVyc29uIGlzIGEgcmVnaXN0ZXJlZCB1c2VyIGdldCB0aGVpciB1c2VyIGlkXG5cdCAgICBcdFx0aW52aXRhdGlvbk1hbmFnZXIuZ2V0VXNlcklkRm9yR3Vlc3Qodm0udGVtcEd1ZXN0LmVtYWlsKVxuXHQgICAgXHRcdC50aGVuKGZ1bmN0aW9uKHVpZCkge1xuXHQgICAgXHRcdFx0JGxvZy5pbmZvKCdmb3VuZCB1c2VyIHdpdGggdGhhdCBlbWFpbDogJyArIHVpZCk7XG5cdCAgICBcdFx0XHRyZXR1cm4gdWlkO1xuXHQgICAgXHRcdH0pXG5cdCAgICBcdFx0LnRoZW4oZnVuY3Rpb24odWlkKSB7XG5cdCAgICBcdFx0XHQvL3VzZSB0aGF0IHVpZCB0byByZWdpc3RlciB0aGUgdXNlclxuXHQgICAgXHRcdFx0Ly9hZGQgdGhlIHBlcnNvbiB0byB0aGUgaG9zdCdzIExPQ0FMIGd1ZXN0IGxpc3Rcblx0ICAgIFx0XHRcdCRsb2cuaW5mbygndGhlIGd1ZXN0IGxpc3QgaXMuLi4nKTtcblx0ICAgIFx0XHRcdCRsb2cuaW5mbyh2bS5ndWVzdExpc3QpO1xuXG5cdCAgICBcdFx0XHRpZighYW5ndWxhci5pc09iamVjdCh2bS5ndWVzdExpc3QpKSB7XG5cdFx0XHRcdFx0XHQkbG9nLmluZm8oJ2NyZWF0aW5nIHRoZSBvYmplY3QnKTtcblx0XHRcdFx0XHRcdHZtLmd1ZXN0TGlzdCA9IHt9O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQvL2NyZWF0ZSB0aGUgZ3Vlc3QgdG8gc2F2ZVxuXHRcdFx0XHRcdHZhciBndWVzdEJlaW5nQWRkZWQgPSB2bS50ZW1wR3Vlc3Q7XG5cblx0ICAgIFx0XHRcdHZtLmd1ZXN0TGlzdFt1aWRdID0gZ3Vlc3RCZWluZ0FkZGVkO1xuXG5cdCAgICBcdFx0XHR2bS50ZW1wR3Vlc3QgPSB7XG5cdFx0XHRcdCAgICBcdG5hbWU6ICcnLFxuXHRcdFx0XHQgICAgXHRlbWFpbDogJycsXG5cdFx0XHRcdCAgICBcdHN0YXR1czogJ3BlbmRpbmcnXG5cdFx0XHRcdCAgICB9O1xuXG5cdCAgICBcdFx0fSlcblx0ICAgIFx0XHQudGhlbihmdW5jdGlvbigpIHtcblx0ICAgIFx0XHRcdC8vYWRkIHRoaXMgZXZlbnQgdG8gdGhlIHVzZXJzJyBwZW5kaW5nIGxpc3Rcblx0ICAgIFx0XHRcdC8qaW52aXRhdGlvbk1hbmFnZXIudXBkYXRlUGVuZGluZ0V2ZW50c0xpc3RGb3JVc2VyKCkqL1xuXHQgICAgXHRcdH0pXG5cdCAgICBcdFx0LnRoZW4oZnVuY3Rpb24oKSB7XG5cdCAgICBcdFx0XHQvL3JlbW92ZSB0aGUgJ3VwZGF0ZWQnIGZpZWxkIGlmIG5lZWQgYmVcblx0ICAgIFx0XHR9KVxuXHQgICAgXHRcdC5jYXRjaChmdW5jdGlvbihlcnJvck1lc3NhZ2UpIHtcblx0ICAgIFx0XHRcdC8vYXNzdW1pbmcgbm8gdWlkIHdhcyBmb3VuZCBqdXN0IHVzZSB0aGUgZW1haWxcblx0ICAgIFx0XHRcdCRsb2cuaW5mbyhlcnJvck1lc3NhZ2UpO1xuXHQgICAgXHRcdFx0XG5cdCAgICBcdFx0XHQvL2NyZWF0ZSB0aGUgZW1haWxJZFxuXHQgICAgXHRcdFx0aWRCeUVtYWlsID0gdXRmOF90b19iNjQodm0udGVtcEd1ZXN0LmVtYWlsKTtcblx0ICAgIFx0XHRcdC8vYWRkIHRoaXMgcGVyc29uIHRvIHRoZSBob3N0J3MgZ3Vlc3QgbGlzdFxuXHQgICAgXHRcdFx0aWYoIWFuZ3VsYXIuaXNPYmplY3Qodm0uZ3Vlc3RMaXN0KSkge1xuXHRcdFx0XHRcdFx0JGxvZy5pbmZvKCdjcmVhdGluZyB0aGUgb2JqZWN0Jyk7XG5cdFx0XHRcdFx0XHR2bS5ndWVzdExpc3QgPSB7fTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Ly9jcmVhdGUgdGhlIGd1ZXN0IHRvIHNhdmVcblx0XHRcdFx0XHR2YXIgZ3Vlc3RCZWluZ0FkZGVkID0gdm0udGVtcEd1ZXN0O1xuXG5cdCAgICBcdFx0XHR2bS5ndWVzdExpc3RbaWRCeUVtYWlsXSA9IGd1ZXN0QmVpbmdBZGRlZDtcblxuXHRcdFx0ICAgIFx0LyppbnZpdGF0aW9uTWFuYWdlci5hZGRHdWVzdFRvSG9zdEd1ZXN0TGlzdCh2bS50ZW1wR3Vlc3QubmFtZSwgdm0udGVtcEd1ZXN0LmVtYWlsLCB1bmRlZmluZWQsICRyb3V0ZVBhcmFtcy5ldmVudElkLCAkcm91dGVQYXJhbXMudWlkKVxuXHRcdFx0ICAgIFx0LnRoZW4oZnVuY3Rpb24ocG9zaXRpdmVSZXN1bHQpIHtcblx0XHRcdCAgICBcdFx0JGxvZy5pbmZvKCdnb3QgdGhpcyByZXN1bHQ6ICcgKyBwb3NpdGl2ZVJlc3VsdCk7XG5cdFx0XHQgICAgXHR9KVxuXHRcdFx0ICAgIFx0LnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHQgICAgXHRcdC8vYWRkIHRoaXMgZXZlbnQgdG8gdGhlIGd1ZXN0J3MgcGVuZGluZyBsaXN0XG5cdFx0XHQgICAgXHRcdGludml0YXRpb25NYW5hZ2VyLnVwZGF0ZVBlbmRpbmdFdmVudHNMaXN0Rm9yR3Vlc3QoJHJvdXRlUGFyYW1zLmV2ZW50SWQpXG5cdFx0XHQgICAgXHR9KVxuXHRcdFx0ICAgIFx0LnRoZW4oZnVuY3Rpb24oKSB7XG5cdCAgICBcdFx0XHQvL3JlbW92ZSB0aGUgJ3VwZGF0ZWQnIGZpZWxkIGlmIG5lZWQgYmVcblx0ICAgIFx0XHRcdH0pXG5cdFx0XHQgICAgXHQuY2F0Y2goZnVuY3Rpb24obmVnYXRpdmVSZXN1bHQpIHtcblx0XHRcdCAgICBcdFx0JGxvZy5pbmZvKCdnb3QgdGhpcyByZXN1bHQ6ICcgKyBwb3NpdGl2ZVJlc3VsdCk7XG5cdFx0XHQgICAgXHR9KSovXG5cblx0XHRcdCAgICBcdHZtLnRlbXBHdWVzdCA9IHtcblx0XHRcdFx0ICAgIFx0bmFtZTogJycsXG5cdFx0XHRcdCAgICBcdGVtYWlsOiAnJyxcblx0XHRcdFx0ICAgIFx0c3RhdHVzOiAncGVuZGluZydcblx0XHRcdFx0ICAgIH0gXG5cblx0ICAgIFx0XHR9KVxuXHQgICAgXHRcdFxuXHQgICAgXHR9XG5cdCAgICBcdFxuXHQgICAgfVxuXG5cdFx0Ly9hY3Rpb25zXG5cdFx0aW5pdCgpO1xuXG5cdH1cblxuXHRyZXR1cm4gIGRpcmVjdGl2ZTtcblx0XHRcbn07XG4vKiBIb3N0ZWRFdmVudHNMaXN0LmRpcmVjdGl2ZS5qcyAqL1xuXG4vKipcbiogQGRlc2MgZGlzcGxheXMgYSBsaXN0IG9mIGFsbCB0aGUgZXZlbnRzIHRoZSBjdXJyZW50IHVzZXIgaXMgaG9zdGluZy5cbiogQGV4YW1wbGUgPGhvc3RlZC1ldmVudHMtbGlzdD48L2hvc3RlZC1ldmVudHMtbGlzdD5cbiovXG5cbmFuZ3VsYXJcblx0Lm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuXHQuZGlyZWN0aXZlKCdob3N0ZWRFdmVudHNMaXN0JywgaG9zdGVkRXZlbnRzTGlzdCk7XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gaG9zdGVkRXZlbnRzTGlzdCgpIHtcbiAgICBsaW5rRnVuYy4kaW5qZWN0ID0gW1wic2NvcGVcIiwgXCJlbFwiLCBcImF0dHJcIiwgXCJjdHJsXCJdO1xuXHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdHJlc3RyaWN0OiAnQUVDTScsXG5cdFx0dGVtcGxhdGVVcmw6ICcuLi92aWV3cy9kaXJlY3RpdmVzL2hvc3RlZEV2ZW50c0xpc3QuZGlyZWN0aXZlLmh0bScsXG5cdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRzY29wZToge1xuXHRcdFx0aG9zdGVkRXZlbnRzOiAnPScsXG5cdFx0XHR1c2VySWQ6ICc9J1xuXHRcdH0sXG5cdFx0bGluazogbGlua0Z1bmMsXG5cdFx0Y29udHJvbGxlcjogaG9zdGVkRXZlbnRzTGlzdENvbnRyb2xsZXIsXG5cdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0fVxuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHtcbiAgICB9XG5cbiAgICBob3N0ZWRFdmVudHNMaXN0Q29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJywgJ3RyYWZmaWNWYWxldCddO1xuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIGhvc3RlZEV2ZW50c0xpc3RDb250cm9sbGVyKCRsb2csIHRyYWZmaWNWYWxldCkge1xuXHQgICAgdmFyIHZtID0gdGhpcztcblxuXHQgICAgLy9sb2NhbCB2YXJpYWJsZXNcblx0ICAgIHZhciBob3N0ZWRFdmVudHNTaGVycGEgPSB0cmFmZmljVmFsZXQ7XG5cblx0ICAgIC8vdmlldyBtb2RlbCB2YXJpYWJsZXNcblx0ICAgIHZtLmd1ZXN0c0FyZUludml0ZWQgPSBmYWxzZTtcblxuXHQgICAgLy9sb2NhbCBtZXRob2RzXG5cdCAgICBmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRcdHJldHVybiBuZXcgRGF0ZShwYXJzZUludCh1bml4VGltZSkpO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBjb3VudEd1ZXN0cyhsaXN0KSB7XG5cdFx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVcblx0XHRcdHZhciBjb3VudGVyID0gMDtcblxuXHRcdFx0Ly9pZiB3ZSdyZSBjb3VudGluZywgdGhlbiB0aGVyZSdzIGEgbGlzdCwgc28gdGhyb3cgdGhlIGZsYWdcblx0XHRcdHZtLmd1ZXN0c0FyZUludml0ZWQgPSB0cnVlO1xuXG5cdFx0XHRPYmplY3Qua2V5c1tsaXN0XS5mb3JFYWNoKGZ1bmN0aW9uKGd1ZXN0KSB7XG5cdFx0XHRcdGNvdW50ZXIrKztcblx0XHRcdH0pXG5cblx0XHRcdHJldHVybiBjb3VudGVyO1xuXHRcdH1cblxuXHRcdC8vdmlldyBtb2RlbCBtZXRob2RzXG5cdFx0dm0uZm9ybWF0RGF0ZSA9IGZ1bmN0aW9uKHVuaXhUaW1lKSB7XG5cdFx0XHQvL3JlZm9ybWF0IHRoZSB0aW1lXG5cdFx0XHQkbG9nLmluZm8oJ2dvdCB0aGlzdCB0aW1lOiAnICsgdW5peFRpbWUpO1xuXHRcdFx0cmV0dXJuIHVuaXhUaW1lVG9EYXRlVGltZSh1bml4VGltZSk7XG5cdFx0fVxuXG5cdFx0dm0uZ3Vlc3RzQXR0ZW5kaW5nID0gZnVuY3Rpb24oZ3Vlc3RMaXN0KSB7XG5cdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChndWVzdExpc3QpKSB7XG5cdFx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGd1ZXN0TGlzdFsnYXR0ZW5kaW5nJ10pKSByZXR1cm4gY291bnRHdWVzdHMoZ3Vlc3RMaXN0WydhdHRlbmRpbmcnXSk7XG5cdFx0XHRcdGVsc2UgcmV0dXJuIDA7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHJldHVybiAwO1xuXHRcdH1cblxuXHRcdHZtLmd1ZXN0c0ludml0ZWQgPSBmdW5jdGlvbihndWVzdExpc3QpIHtcblx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGd1ZXN0TGlzdCkpIHtcblx0XHRcdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdFx0XHR2YXIgZ3Vlc3RDb3VudCA9IHsgYXR0ZW5kaW5nOiAwLCBwZW5kaW5nOiAwLCBkZWNsaW5lZDogMCB9O1xuXG5cdFx0XHRcdC8vbG9jYWwgbWV0aG9kc1xuXHRcdFx0XHRmdW5jdGlvbiB0b3RhbEd1ZXN0Q291bnQoKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGd1ZXN0Q291bnQuYXR0ZW5kaW5nICsgZ3Vlc3RDb3VudC5wZW5kaW5nICsgZ3Vlc3RDb3VudC5kZWNsaW5lZDtcblx0XHRcdFx0fSBcblxuXHRcdFx0XHQvL2NoZWNrIHZhbHVlc1xuXHRcdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChndWVzdExpc3RbJ2F0dGVuZGluZyddKSkgZ3Vlc3RDb3VudC5hdHRlbmRpbmcgPSBjb3VudEd1ZXN0cyhndWVzdExpc3RbJ2F0dGVuZGluZyddKTtcblx0XHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoZ3Vlc3RMaXN0WydwZW5kaW5nJ10pKSBndWVzdENvdW50LnBlbmRpbmcgPSBjb3VudEd1ZXN0cyhndWVzdExpc3RbJ3BlbmRpbmcnXSk7XG5cdFx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGd1ZXN0TGlzdFsnZGVjbGluZWQnXSkpIGd1ZXN0Q291bnQuZGVjbGluZWQgPSBjb3VudEd1ZXN0cyhndWVzdExpc3RbJ2RlY2xpbmVkJ10pO1xuXG5cdFx0XHRcdHJldHVybiB0b3RhbEd1ZXN0Q291bnQoKTtcblx0XHRcdH1cblx0XHRcdGVsc2UgcmV0dXJuIDA7XG5cdFx0fVxuXG5cdFx0dm0ucGVyY2VudGFnZUF0dGVuZGluZyA9IGZ1bmN0aW9uKGd1ZXN0TGlzdCkge1xuXHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoZ3Vlc3RMaXN0KSkge1xuXHRcdFx0XHRyZXR1cm4gKGd1ZXN0c0F0dGVuZGluZyhndWVzdGxpc3QpIC8gZ3Vlc3RzSW52aXRlZChndWVzdExpc3QpKTtcblx0XHRcdH1cblx0XHRcdGVsc2UgcmV0dXJuIDA7XG5cdFx0fVxuXG5cdFx0dm0uZXZlbnRDbGlja2VkID0gZnVuY3Rpb24oZXZlbnRJRCkge1xuXHRcdFx0Ly9yZWRpcmVjdCB0byB0aGUgZXZlbnQgcGFnZVxuXHRcdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyB0bzogL2V2ZW50LycgKyBldmVudElEICsgJy8nICsgdm0uaG9zdGVkRXZlbnRzW2V2ZW50SURdLmhvc3QudWlkICsgJy8nICsgdm0udXNlcklkKTtcblx0XHRcdGhvc3RlZEV2ZW50c1NoZXJwYS5yZWRpcmVjdFRvKCcvZXZlbnQnLCBldmVudElELCB2bS5ob3N0ZWRFdmVudHNbZXZlbnRJRF0uaG9zdC51aWQsIHZtLnVzZXJJZCk7XG5cdFx0fVxuXG5cdFx0Ly9hY3Rpb25zXG5cblx0fVxuXG5cdHJldHVybiAgZGlyZWN0aXZlO1xuXHRcdFxufTtcbi8qIEhvc3RlZEV2ZW50c1Byb2dyZXNzQmFyLmRpcmVjdGl2ZS5qcyAqL1xuXG4vKipcbiogQGRlc2MgZGlzcGxheXMgYSB1c2VycyBwcm9ncmVzcyB0aHJvdWdoIHRoZSBldmVudHMgcGFnZS5cbiogQGV4YW1wbGUgPGhvc3RlZC1ldmVudHMtcHJvZ3Jlc3MtYmFyPjwvaG9zdGVkLWV2ZW50cy1wcm9ncmVzcy1iYXI+XG4qL1xuXG5hbmd1bGFyXG5cdC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcblx0LmRpcmVjdGl2ZSgncHJvZ3Jlc3NCYXInLCBwcm9ncmVzc0Jhcik7XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gcHJvZ3Jlc3NCYXIoKSB7XG5yZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIGN1clZhbDogJ0AnLFxuICAgICAgICBtYXhWYWw6ICdAJ1xuICAgICAgfSxcbiAgICAgIHRlbXBsYXRlOiBcIjxkaXYgY2xhc3M9J3Byb2dyZXNzLWJhcic+XCIrXG4gICAgICAgICAgICAgICAgICBcIjxkaXYgY2xhc3M9J3Byb2dyZXNzLWJhci1iYXInPnRlc3Rpbmc8L2Rpdj5cIitcbiAgICAgICAgICAgICAgICBcIjwvZGl2PlwiLCAgICBcblxuICAgICAgbGluazogZnVuY3Rpb24gKCRzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVByb2dyZXNzKCkge1xuICAgICAgICAgIHZhciBwcm9ncmVzcyA9IDA7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKCRzY29wZS5tYXhWYWwpIHtcbiAgICAgICAgICAgIHByb2dyZXNzID0gTWF0aC5taW4oJHNjb3BlLmN1clZhbCwgJHNjb3BlLm1heFZhbCkgLyAkc2NvcGUubWF4VmFsICogZWxlbWVudC5maW5kKCcucHJvZ3Jlc3MtYmFyJykud2lkdGgoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgZWxlbWVudC5maW5kKCcucHJvZ3Jlc3MtYmFyLWJhcicpLmNzcygnd2lkdGgnLCBwcm9ncmVzcyk7ICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAkc2NvcGUuJHdhdGNoKCdjdXJWYWwnLCB1cGRhdGVQcm9ncmVzcyk7XG4gICAgICAgICRzY29wZS4kd2F0Y2goJ21heFZhbCcsIHVwZGF0ZVByb2dyZXNzKTsgICAgICAgIFxuICAgICAgfVxuICAgIH07ICBcbiB9O1xuLyogSG9zdGVkR3Vlc3RMaXN0LmRpcmVjdGl2ZS5qcyAqL1xuXG4vKipcbiogQGRlc2MgZGlzcGxheXMgYSBsaXN0IG9mIGFsbCBndWVzdHMgaW52aXRlZCB0byBhbiBldmVudCB0aGlzIHVzZXIgaXMgaG9zdGluZy5cbiogQGV4YW1wbGUgPGhvc3RlZC1ndWVzdC1saXN0PjwvaG9zdGVkLWd1ZXN0LWxpc3Q+XG4qL1xuXG5hbmd1bGFyXG5cdC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcblx0LmRpcmVjdGl2ZSgnaG9zdGVkR3Vlc3RMaXN0JywgaG9zdGVkR3Vlc3RMaXN0KTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBob3N0ZWRHdWVzdExpc3QoKSB7XG4gICAgbGlua0Z1bmMuJGluamVjdCA9IFtcInNjb3BlXCIsIFwiZWxcIiwgXCJhdHRyXCIsIFwiY3RybFwiXTtcblx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRyZXN0cmljdDogJ0FFQ00nLFxuXHRcdHRlbXBsYXRlVXJsOiAnLi4vdmlld3MvZGlyZWN0aXZlcy9ob3N0ZWRHdWVzdExpc3QuZGlyZWN0aXZlLmh0bScsXG5cdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRzY29wZToge1xuXHRcdFx0Z3Vlc3RMaXN0OiAnPScsXG5cdFx0fSxcblx0XHRsaW5rOiBsaW5rRnVuYyxcblx0XHRjb250cm9sbGVyOiBob3N0ZWRHdWVzdExpc3RDb250cm9sbGVyLFxuXHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdH1cblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7XG5cdFx0c2NvcGUuJHdhdGNoKCdndWVzdExpc3QnLCBmdW5jdGlvbigpIHtcblx0XHRcdHNjb3BlLiRhcHBseTtcblx0XHR9KTtcbiAgICB9XG5cbiAgICBob3N0ZWRHdWVzdExpc3RDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJHJvdXRlUGFyYW1zJywgJ3VzZXJEYXRhJ107XG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gaG9zdGVkR3Vlc3RMaXN0Q29udHJvbGxlcigkbG9nLCAkcm91dGVQYXJhbXMsIHVzZXJEYXRhKSB7XG5cdCAgICB2YXIgdm0gPSB0aGlzO1xuXG5cdCAgICAvL2xvY2FsIHZhcmlhYmxlc1xuXHQgICAgdm0uaXNBR3Vlc3RMaXN0ID0gZmFsc2U7XG5cblx0ICAgIC8vbG9jYWwgbWV0aG9kc1xuXHQgICAgZnVuY3Rpb24gdGhlcmVJc0FHdWVzdExpc3QoKSB7XG5cdCAgICBcdC8vY2hlY2sgZm9yIGEgZ3Vlc3RMaXN0IG9iamVjdFxuXHQgICAgXHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2bS5ndWVzdExpc3QpICYmIHZtLmd1ZXN0TGlzdCAhPSAnJykge1xuXHQgICAgXHRcdHZtLmlzQUd1ZXN0TGlzdCA9IHRydWU7XG5cdCAgICBcdFx0cmV0dXJuIHRydWU7XG5cdCAgICBcdH0gZWxzZSB7XG5cdCAgICBcdFx0dm0uaXNBR3Vlc3RMaXN0ID0gZmFsc2U7XG5cdCAgICBcdFx0cmV0dXJuIGZhbHNlO1xuXHQgICAgXHR9XG5cdCAgICB9XG5cblx0ICAgIGZ1bmN0aW9uIGluaXQoKSB7XG5cdCAgICBcdC8vbG9jYWwgdmFyaWFibGVzXG5cdCAgICBcdHZhciBsaXN0Q29sbGVjdG9yID0gdXNlckRhdGE7XG5cblx0ICAgIFx0Ly9pZiB0aGVyZSBpc24ndCBhIGd1ZXN0IGxpc3QsIGdvIG91dCB0byB0aGUgZGIgdG8gZ2V0IGl0XG5cblx0XHRcdGlmKCF0aGVyZUlzQUd1ZXN0TGlzdCgpKSB7XG5cdFx0XHRcdCRsb2cuaW5mbygnZ29pbmcgYWZ0ZXIgdGhlIGxpc3QnKTtcblx0XHRcdFx0bGlzdENvbGxlY3Rvci5nZXRFdmVudEd1ZXN0TGlzdCgkcm91dGVQYXJhbXMudWlkLCAkcm91dGVQYXJhbXMuZXZlbnRJZClcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24ocmV0dXJuZWRMaXN0KSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdnb3QgdGhlIGxpc3QnKTtcblx0XHRcdFx0XHQkbG9nLmluZm8ocmV0dXJuZWRMaXN0KTtcblx0XHRcdFx0XHR2bS5ndWVzdExpc3QgPSByZXR1cm5lZExpc3Q7XG5cdFx0XHRcdFx0aWYoYW5ndWxhci5pc09iamVjdChyZXR1cm5lZExpc3QpKSB2bS5pc0FHdWVzdExpc3QgPSB0cnVlO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHsgXG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdUaGVyZSB3YXMgYW4gZXJyb3I6ICcrIGVycm9yKTtcblx0XHRcdFx0fSlcblx0XHRcdH1cblx0ICAgIH1cblx0ICAgIC8vdm0gbWV0aG9kc1xuXG5cdFx0Ly9hY3Rpb25zXG5cdFx0aW5pdCgpO1xuXG5cdH1cblxuXHRyZXR1cm4gIGRpcmVjdGl2ZTtcblx0XHRcbn07XG4vKiBUb29sQmFyLmRpcmVjdGl2ZS5qcyAqL1xuXG4vKipcbiogQGRlc2MgdG9vbGJhciBkaXJlY3RpdmUgdGhhdCBpcyB1c2VkIG9uIHRoZSBtYWluIHBhZ2UgYWNyb3NzIHRoZSBlbnRpcmUgYXBwLlxuKiBAZXhhbXBsZSA8ZGl2IHRvb2wtYmFyPjwvZGl2PlxuKi9cblxuYW5ndWxhclxuXHQubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG5cdC5kaXJlY3RpdmUoJ3Rvb2xCYXInLCB0b29sQmFyKTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiB0b29sQmFyKCkge1xuICAgIGxpbmtGdW5jLiRpbmplY3QgPSBbXCJzY29wZVwiLCBcImVsXCIsIFwiYXR0clwiLCBcImN0cmxcIl07XG5cdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0cmVzdHJpY3Q6ICdBRUNNJyxcblx0XHR0ZW1wbGF0ZVVybDogJy4uL3ZpZXdzL2RpcmVjdGl2ZXMvdG9vbEJhci5kaXJlY3RpdmUuaHRtJyxcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdHNjb3BlOiB7fSxcblx0XHRsaW5rOiBsaW5rRnVuYyxcblx0XHRjb250cm9sbGVyOiBUb29sQmFyQ29udHJvbGxlcixcblx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHR9XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCwgYXR0ciwgY3RybCkge1xuICAgIH1cblxuICAgIFRvb2xCYXJDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnYmFja2VuZFNlcnZpY2VzJ107XG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gVG9vbEJhckNvbnRyb2xsZXIoJGxvZywgYmFja2VuZFNlcnZpY2VzKSB7XG5cdCAgICB2YXIgdm0gPSB0aGlzO1xuXG5cdCAgICAvL2xvY2FsIGNvbnRyb2xlciB2YXJpYWJsZXNcblx0ICAgIHZhciBmYkNvbm5lY3QgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0ICAgIC8vbG9jYWwgdmlldyB2YXJpYWJsZXNcblx0XHRmYkNvbm5lY3QuY2hlY2tMb2dpblN0YXR1cygpXG5cdFx0LnRoZW4oZnVuY3Rpb24oc3RhdHVzKSB7XG5cdFx0XHR2bS5sb2dnZWRJbiA9IHN0YXR1cztcblx0XHR9KVxuXHRcdC5jYXRjaCgpXG5cblx0XHR2bS5jbGlja2VkID0gZnVuY3Rpb24oKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2J1dHRvbiBjbGlja2VkJyk7XG5cdFx0fVxuXG5cdFx0Ly9hY3Rpb25zXG5cdFx0XG5cdH1cblxuXHRyZXR1cm4gIGRpcmVjdGl2ZTtcblx0XHRcbn07IiwiLyogQWRkQUd1ZXN0LmRpcmVjdGl2ZS5qcyAqL1xuXG4vKipcbiogQGRlc2MgZGlzcGxheXMgYSBsaXN0IG9mIGFsbCBndWVzdHMgaW52aXRlZCB0byBhbiBldmVudCB0aGlzIHVzZXIgaXMgaG9zdGluZy5cbiogQGV4YW1wbGUgPGFkZC1hLWd1ZXN0PjwvYWRkLWEtZ3Vlc3Q+XG4qL1xuXG5hbmd1bGFyXG5cdC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcblx0LmRpcmVjdGl2ZSgnYWRkQUd1ZXN0JywgYWRkQUd1ZXN0KTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBhZGRBR3Vlc3QoKSB7XG5cdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0cmVzdHJpY3Q6ICdBRUNNJyxcblx0XHR0ZW1wbGF0ZVVybDogJy4uL3ZpZXdzL2RpcmVjdGl2ZXMvYWRkQUd1ZXN0LmRpcmVjdGl2ZS5odG0nLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0c2NvcGU6IHtcblx0XHRcdGd1ZXN0TGlzdDogJz0nXG5cdFx0fSxcblx0XHRsaW5rOiBsaW5rRnVuYyxcblx0XHRjb250cm9sbGVyOiBhZGRBR3Vlc3RDb250cm9sbGVyLFxuXHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdH1cblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7XG4gICAgfVxuXG4gICAgYWRkQUd1ZXN0Q29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJywgJyRyb3V0ZVBhcmFtcycsICd2YWxpZGF0aW9uJywgJ3VzZXJEYXRhJ107XG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gYWRkQUd1ZXN0Q29udHJvbGxlcigkbG9nLCAkcm91dGVQYXJhbXMsIHZhbGlkYXRpb24sIHVzZXJEYXRhKSB7XG5cdCAgICB2YXIgdm0gPSB0aGlzO1xuXHQgICAgdmFyIGVtYWlsQ2hlY2tlciA9IHZhbGlkYXRpb247XG5cdCAgICB2YXIgaW52aXRhdGlvbk1hbmFnZXIgPSB1c2VyRGF0YTtcblxuXHQgICAgLy9sb2NhbCB2YXJpYWJsZXNcblx0ICAgIHZhciBldmVudERldGFpbHMgPSB7fTtcblxuXHQgICAgLy92bSB2YXJpYWJsZXNcblx0ICAgIHZtLnRlbXBHdWVzdCA9IHtcblx0ICAgIFx0bmFtZTogJycsXG5cdCAgICBcdGVtYWlsOiAnJyxcblx0ICAgIFx0c3RhdHVzOiAncGVuZGluZydcblx0ICAgIH1cblx0ICAgIHZtLnZhbGlkYXRpb25zID0ge1xuXHQgICAgXHRuYW1lOiB7XG5cdCAgICBcdFx0YWRkcmVzc2VkOiBmYWxzZSxcblx0ICAgIFx0XHR2YWxpZDogZmFsc2UsXG5cdCAgICBcdFx0ZXJyb3JNZXNzYWdlOiAnJ1xuXHQgICAgXHR9LFxuXHQgICAgXHRlbWFpbDoge1xuXHQgICAgXHRcdGFkZHJlc3NlZDogZmFsc2UsXG5cdCAgICBcdFx0dmFsaWQ6IGZhbHNlLFxuXHQgICAgXHRcdGVycm9yTWVzc2FnZTogJydcblx0ICAgIFx0fSxcblx0ICAgIFx0aW52aXRhdGlvbjoge1xuXHQgICAgXHRcdGlzVGhlSG9zdDogZmFsc2UsXG5cdCAgICBcdFx0YWxyZWFkeUludml0ZWQ6IGZhbHNlLFxuXHQgICAgXHRcdGVycm9yTWVzc2FnZTogJydcblx0ICAgIFx0fVxuXHQgICAgfVxuXHQgICAgdm0uaW52aXRhdGlvblZhbGlkRm9yU3VibWlzc2lvbiA9IGZhbHNlO1xuXHQgICAgdm0uc3VibWlzc2lvbkJ1dHRvbiA9IHtcblx0ICAgIFx0c3R5bGU6IHtcblx0ICAgIFx0XHRjb2xvcjoncmVkJ1xuXHQgICAgXHR9LFxuXHQgICAgXHRjbGFzczoge1xuXHQgICAgXHRcdCdjb2wteHMtMTInOiB0cnVlLFxuXHQgICAgXHRcdCdjb2wtc20tMTInOiB0cnVlLFxuXHQgICAgXHRcdCdidG4nOiB0cnVlLFxuXHQgICAgXHRcdCdidG4td2FybmluZyc6IHRydWUsXG5cdCAgICBcdFx0J2J0bi1zdWNjZXNzJzogZmFsc2Vcblx0ICAgIFx0fSxcblx0ICAgIFx0bWVzc2FnZTogJ0FkZHJlc3MgSW52aXRhdGlvbi4uLidcblx0ICAgIH1cblx0ICAgIC8vbG9jYWwgbWV0aG9kc1xuXHQgICAgZnVuY3Rpb24gdXRmOF90b19iNjQoc3RyKSB7XG5cdFx0XHRyZXR1cm4gYnRvYShzdHIpO1xuXHRcdH1cblxuXHQgICAgZnVuY3Rpb24gdmFsaWRhdGVJbnZpdGF0aW9uKCkge1xuXHQgICAgXHQvL2NoZWNrIGlmIGJvdGggaW5wdXRzIGFyZSB2YWxpZFxuXHQgICAgXHRpZih2bS52YWxpZGF0aW9ucy5uYW1lLnZhbGlkICYmIHZtLnZhbGlkYXRpb25zLmVtYWlsLnZhbGlkKSB7XG5cdCAgICBcdFx0JGxvZy5pbmZvKCdyZWFkeSB0byBzdWJtaXQnKTtcblx0ICAgIFx0XHQvL3NldCB0aGUgdmFsaWRpdHkgZmxhZ1xuXHQgICAgXHRcdHZtLmludml0YXRpb25WYWxpZEZvclN1Ym1pc3Npb24gPSB0cnVlO1xuXHQgICAgXHRcdC8vdXBkYXRlIHRoZSBzdWJtaXNzaW9uIGJ1dHRvblxuXHQgICAgXHRcdHZtLnN1Ym1pc3Npb25CdXR0b24uY2xhc3NbJ2J0bi13YXJuaW5nJ10gPSBmYWxzZTtcblx0ICAgIFx0XHR2bS5zdWJtaXNzaW9uQnV0dG9uLmNsYXNzWydidG4tc3VjY2VzcyddID0gdHJ1ZTtcblx0ICAgIFx0XHR2bS5zdWJtaXNzaW9uQnV0dG9uLm1lc3NhZ2U9J0ludml0ZSBHdWVzdCc7XG5cdCAgICBcdH0gZWxzZSB7XG5cdCAgICBcdFx0JGxvZy5pbmZvKCdub3QgcmVhZHkgdG8gc3VibWl0Jyk7XG5cdCAgICBcdFx0Ly9zZXQgdGhlIHZhbGlkaXR5IGZsYWdcblx0ICAgIFx0XHR2bS5pbnZpdGF0aW9uVmFsaWRGb3JTdWJtaXNzaW9uID0gZmFsc2U7XG5cdCAgICBcdFx0Ly91cGRhdGUgdGhlIHN1Ym1pc3Npb24gYnV0dG9uXG5cdCAgICBcdFx0dm0uc3VibWlzc2lvbkJ1dHRvbi5jbGFzc1snYnRuLXdhcm5pbmcnXSA9IHRydWU7XG5cdCAgICBcdFx0dm0uc3VibWlzc2lvbkJ1dHRvbi5jbGFzc1snYnRuLXN1Y2Nlc3MnXSA9IGZhbHNlO1xuXHQgICAgXHRcdHZtLnN1Ym1pc3Npb25CdXR0b24ubWVzc2FnZT0nQWRkcmVzcyBJbnZpdGF0aW9uLi4uJztcblx0ICAgIFx0fVxuXHQgICAgfVxuXG5cdCAgICBmdW5jdGlvbiBpbml0KCkge1xuXHQgICAgXHQvL2xvYWQgdGhlIGV2ZW50IGZvciByZWZlcmVuY2Vcblx0ICAgIFx0aWYoYW5ndWxhci5pc1VuZGVmaW5lZChpbnZpdGF0aW9uTWFuYWdlci5nZXRPbmVVc2VyRXZlbnRMb2NhbGx5KCdob3N0aW5nJywgJHJvdXRlUGFyYW1zLmV2ZW50SWQpKSkge1xuXHQgICAgXHRcdC8vaWYgdGhpcyBwYWdlIHdhcyBsb2FkZWQgYmVmb3JlIHRoZSBtb2RlbCBnZXQgdGhlIGV2ZW50XG5cdCAgICBcdFx0aW52aXRhdGlvbk1hbmFnZXIuZ2V0UmVtb3RlRXZlbnRzRm9yTG9jYWwoKVxuXHRcdCAgICBcdC50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdCAgICBcdFx0Ly93aGVuIHRoZSBldmVudCBoYXMgYmVlbiBsb2FkZWRcblx0XHQgICAgXHRcdGV2ZW50RGV0YWlscyA9IGludml0YXRpb25NYW5hZ2VyLmdldE9uZVVzZXJFdmVudExvY2FsbHkoJ2hvc3RpbmcnLCAkcm91dGVQYXJhbXMuZXZlbnRJZCk7XG5cblx0XHQgICAgXHR9KVxuXHQgICAgXHR9IGVsc2Uge1xuXHQgICAgXHRcdC8vanVzdCBnZXQgdGhlIG1vZGVsIGxvY2FsbHlcblx0ICAgIFx0XHRldmVudERldGFpbHMgPSBpbnZpdGF0aW9uTWFuYWdlci5nZXRPbmVVc2VyRXZlbnRMb2NhbGx5KCdob3N0aW5nJywgJHJvdXRlUGFyYW1zLmV2ZW50SWQpO1xuXHQgICAgXHR9XG5cdCAgICBcdCAgXHRcblx0ICAgIH1cblxuXHQgICAgLy92bSBtZXRob2RzXG5cdCAgICB2bS52YWxpZGF0ZU5hbWUgPSBmdW5jdGlvbigpIHtcblx0ICAgIFx0Ly90aGlzIGZpZWxkIGlzIGJlaW5nIGVkaXRlZCwgdGhyb3cgZmxhZ1xuXHQgICAgXHR2bS52YWxpZGF0aW9ucy5uYW1lLmFkZHJlc3NlZCA9IHRydWU7XG5cblx0ICAgIFx0Ly9jaGVjayBmb3IgdmFsdWVcblx0ICAgIFx0aWYoYW5ndWxhci5pc0RlZmluZWQodm0udGVtcEd1ZXN0Lm5hbWUpICYmIHZtLnRlbXBHdWVzdC5uYW1lICE9ICcnKSB7XG5cdCAgICBcdFx0dm0udmFsaWRhdGlvbnMubmFtZS52YWxpZCA9IHRydWU7XG5cdCAgICBcdFx0dm0udmFsaWRhdGlvbnMubmFtZS5lcnJvck1lc3NhZ2UgPSAnJztcblx0ICAgIFx0fSBlbHNlIHtcblx0ICAgIFx0XHR2bS52YWxpZGF0aW9ucy5uYW1lLnZhbGlkID0gZmFsc2U7XG5cdCAgICBcdFx0dm0udmFsaWRhdGlvbnMubmFtZS5lcnJvck1lc3NhZ2UgPSAnVGhpcyBndWVzdCBuZWVkcyBhIG5hbWUnO1xuXHQgICAgXHR9XG5cblx0ICAgIFx0dmFsaWRhdGVJbnZpdGF0aW9uKCk7XG5cdCAgICB9XG5cdCAgICB2bS52YWxpZGF0ZUVtYWlsID0gZnVuY3Rpb24oKSB7XG5cdCAgICBcdC8vdGhpcyBmaWVsZCBpcyBiZWluZyBlZGl0ZWQsIHRocm93IGZsYWdcblx0ICAgIFx0dm0udmFsaWRhdGlvbnMuZW1haWwuYWRkcmVzc2VkID0gdHJ1ZTtcblxuXHQgICAgXHQvL2lzIHRoZXJlIGFuIGVtYWlsIHZhbHVlP1xuXHQgICAgXHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2bS50ZW1wR3Vlc3QuZW1haWwpICYmIHZtLnRlbXBHdWVzdC5lbWFpbCAhPSAnJykge1xuXHQgICAgXHRcdFxuXHQgICAgXHRcdC8vaWYgYW4gZW1haWwgZXhpc3RzIGNoZWNrIGl0J3MgdmFsaWRpdHlcblx0ICAgIFx0XHRpZihhbmd1bGFyLmlzVW5kZWZpbmVkKGVtYWlsQ2hlY2tlci5lbWFpbCh2bS50ZW1wR3Vlc3QuZW1haWwpKSkge1xuXHQgICAgXHRcdFx0Ly9lbWFpbCBpcyB2YWxpZFxuXHQgICAgXHRcdFx0dm0udmFsaWRhdGlvbnMuZW1haWwudmFsaWQgPSB0cnVlO1xuXHQgICAgXHRcdFx0dm0udmFsaWRhdGlvbnMuZW1haWwuZXJyb3JNZXNzYWdlID0gJyc7XG5cdCAgICBcdFx0fSBlbHNlIHtcblx0ICAgIFx0XHRcdC8vZ2V0IHRoZSBlcnJvclxuXHQgICAgXHRcdFx0dm0udmFsaWRhdGlvbnMuZW1haWwudmFsaWQgPSBmYWxzZTtcblx0ICAgIFx0XHRcdHZtLnZhbGlkYXRpb25zLmVtYWlsLmVycm9yTWVzc2FnZSA9IGVtYWlsQ2hlY2tlci5lbWFpbCh2bS50ZW1wR3Vlc3QuZW1haWwpO1xuXHQgICAgXHRcdFx0JGxvZy5pbmZvKHZtLnZhbGlkYXRpb25zLmVtYWlsLmVycm9yTWVzc2FnZSk7XG5cdCAgICBcdFx0fVxuXG5cdCAgICBcdH0gZWxzZSB7XG5cdCAgICBcdFx0Ly90aGVyZSBpc24ndCBhbiBlbWFpbCB5ZXRcblx0ICAgIFx0XHR2bS52YWxpZGF0aW9ucy5lbWFpbC52YWxpZCA9IGZhbHNlO1xuXHQgICAgXHRcdHZtLnZhbGlkYXRpb25zLmVtYWlsLmVycm9yTWVzc2FnZSA9ICdOb3QgYSB2YWxpZCBlbWFpbCc7XG5cdCAgICBcdH1cblxuXHQgICAgXHR2YWxpZGF0ZUludml0YXRpb24oKTtcblx0ICAgIH1cblxuXHQgICAgdm0uc2hvd05hbWVFcnJvciA9IGZ1bmN0aW9uKCkge1xuXHQgICAgXHRpZighdm0udmFsaWRhdGlvbnMubmFtZS52YWxpZCAmJiB2bS52YWxpZGF0aW9ucy5uYW1lLmFkZHJlc3NlZCkgcmV0dXJuIHRydWU7XG5cdCAgICBcdGVsc2UgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXG5cdCAgICB2bS5zaG93RW1haWxFcnJvciA9IGZ1bmN0aW9uKCkge1xuXHQgICAgXHRpZighdm0udmFsaWRhdGlvbnMuZW1haWwudmFsaWQgJiYgdm0udmFsaWRhdGlvbnMuZW1haWwuYWRkcmVzc2VkKSByZXR1cm4gdHJ1ZTtcblx0ICAgIFx0ZWxzZSByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cblx0ICAgIHZtLnNob3dJbnZpdGF0aW9uRXJyb3IgPSBmdW5jdGlvbigpIHtcblx0ICAgIFx0aWYoIHZtLnZhbGlkYXRpb25zLmludml0YXRpb24uaXNUaGVIb3N0IHx8XG5cdCAgICBcdFx0dm0udmFsaWRhdGlvbnMuaW52aXRhdGlvbi5hbHJlYWR5SW52aXRlZCApIFxuXHQgICAgXHRcdFx0cmV0dXJuIHRydWU7XG5cdCAgICBcdGVsc2UgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXG5cdCAgICB2bS5zdWJtaXRHdWVzdEludml0YXRpb24gPSBmdW5jdGlvbigpIHtcblx0ICAgIFx0JGxvZy5pbmZvKCdzdWJtaXR0aW5nIHRoZSBpbnZpdGF0aW9uJyk7XG5cdCAgICBcdC8vaWYgdGhlIHJlcXVpcm5tZW50cyBhcmUgZnVsZmlsbGVkLi4uXG5cdCAgICBcdGlmKHZtLmludml0YXRpb25WYWxpZEZvclN1Ym1pc3Npb24pIHtcblx0ICAgIFx0XHQvL21ha2Ugc3VyZSB0aGUgaW52aXRhdGlvbiBpcyBub3QgdG8gdGhlIGN1cnJlbnQgdXNlclxuXHQgICAgXHRcdGlmKGludml0YXRpb25NYW5hZ2VyLnRoaXNJc1RoZUhvc3RFbWFpbCh2bS50ZW1wR3Vlc3QuZW1haWwsICRyb3V0ZVBhcmFtcy5ldmVudElkKSkge1xuXHRcdFx0XHRcdHZtLnZhbGlkYXRpb25zLmludml0YXRpb24uaXNUaGVIb3N0ID0gdHJ1ZTtcblx0XHRcdFx0XHR2bS52YWxpZGF0aW9ucy5pbnZpdGF0aW9uLmVycm9yTWVzc2FnZSA9ICdObyBuZWVkIHRvIGludml0ZSB0aGUgaG9zdCc7XG5cdFx0XHRcdFx0cmV0dXJuIDA7XG5cdCAgICBcdFx0fSBlbHNlIHtcblx0ICAgIFx0XHRcdHZtLnZhbGlkYXRpb25zLmludml0YXRpb24uaXNUaGVIb3N0ID0gZmFsc2U7XG5cdCAgICBcdFx0fVxuXHQgICAgXHRcdFxuXHRcdCAgICBcdC8vbWFrZSBzdXJlIHRoaXMgcGVyc29uIGhhcyBub3QgYWxyZWFkeSBiZWVuIGludml0ZWRcblx0XHQgICAgXHQvKlxuXHRcdCAgICBcdGlmKGludml0YXRpb25NYW5hZ2VyLmd1ZXN0SW52aXRlZEFscmVhZHkodm0udGVtcEd1ZXN0LmVtYWlsLCAkcm91dGVQYXJhbXMuZXZlbnRJZCkpIHtcblx0XHQgICAgXHRcdHZtLnZhbGlkYXRpb25zLmludml0YXRpb24uYWxyZWFkeUludml0ZWQgPSB0cnVlO1xuXHRcdFx0XHRcdHZtLnZhbGlkYXRpb25zLmludml0YXRpb24uZXJyb3JNZXNzYWdlID0gJ1RoaXMgZ3Vlc3QgaGFzIGFscmVhZHkgYmVlbiBpbnZpdGVkJztcblx0XHRcdFx0XHRyZXR1cm4gMDtcblx0ICAgIFx0XHR9IGVsc2Uge1xuXHQgICAgXHRcdFx0dm0udmFsaWRhdGlvbnMuaW52aXRhdGlvbi5hbHJlYWR5SW52aXRlZCA9IGZhbHNlO1xuXHQgICAgXHRcdH0qL1xuXG5cdCAgICBcdFx0Ly9pZiB0aGlzIHBlcnNvbiBpcyBhIHJlZ2lzdGVyZWQgdXNlciBnZXQgdGhlaXIgdXNlciBpZFxuXHQgICAgXHRcdGludml0YXRpb25NYW5hZ2VyLmdldFVzZXJJZEZvckd1ZXN0KHZtLnRlbXBHdWVzdC5lbWFpbClcblx0ICAgIFx0XHQudGhlbihmdW5jdGlvbih1aWQpIHtcblx0ICAgIFx0XHRcdCRsb2cuaW5mbygnZm91bmQgdXNlciB3aXRoIHRoYXQgZW1haWw6ICcgKyB1aWQpO1xuXHQgICAgXHRcdFx0cmV0dXJuIHVpZDtcblx0ICAgIFx0XHR9KVxuXHQgICAgXHRcdC50aGVuKGZ1bmN0aW9uKHVpZCkge1xuXHQgICAgXHRcdFx0Ly91c2UgdGhhdCB1aWQgdG8gcmVnaXN0ZXIgdGhlIHVzZXJcblx0ICAgIFx0XHRcdC8vYWRkIHRoZSBwZXJzb24gdG8gdGhlIGhvc3QncyBMT0NBTCBndWVzdCBsaXN0XG5cdCAgICBcdFx0XHQkbG9nLmluZm8oJ3RoZSBndWVzdCBsaXN0IGlzLi4uJyk7XG5cdCAgICBcdFx0XHQkbG9nLmluZm8odm0uZ3Vlc3RMaXN0KTtcblxuXHQgICAgXHRcdFx0aWYoIWFuZ3VsYXIuaXNPYmplY3Qodm0uZ3Vlc3RMaXN0KSkge1xuXHRcdFx0XHRcdFx0JGxvZy5pbmZvKCdjcmVhdGluZyB0aGUgb2JqZWN0Jyk7XG5cdFx0XHRcdFx0XHR2bS5ndWVzdExpc3QgPSB7fTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Ly9jcmVhdGUgdGhlIGd1ZXN0IHRvIHNhdmVcblx0XHRcdFx0XHR2YXIgZ3Vlc3RCZWluZ0FkZGVkID0gdm0udGVtcEd1ZXN0O1xuXG5cdCAgICBcdFx0XHR2bS5ndWVzdExpc3RbdWlkXSA9IGd1ZXN0QmVpbmdBZGRlZDtcblxuXHQgICAgXHRcdFx0dm0udGVtcEd1ZXN0ID0ge1xuXHRcdFx0XHQgICAgXHRuYW1lOiAnJyxcblx0XHRcdFx0ICAgIFx0ZW1haWw6ICcnLFxuXHRcdFx0XHQgICAgXHRzdGF0dXM6ICdwZW5kaW5nJ1xuXHRcdFx0XHQgICAgfTtcblxuXHQgICAgXHRcdH0pXG5cdCAgICBcdFx0LnRoZW4oZnVuY3Rpb24oKSB7XG5cdCAgICBcdFx0XHQvL2FkZCB0aGlzIGV2ZW50IHRvIHRoZSB1c2VycycgcGVuZGluZyBsaXN0XG5cdCAgICBcdFx0XHQvKmludml0YXRpb25NYW5hZ2VyLnVwZGF0ZVBlbmRpbmdFdmVudHNMaXN0Rm9yVXNlcigpKi9cblx0ICAgIFx0XHR9KVxuXHQgICAgXHRcdC50aGVuKGZ1bmN0aW9uKCkge1xuXHQgICAgXHRcdFx0Ly9yZW1vdmUgdGhlICd1cGRhdGVkJyBmaWVsZCBpZiBuZWVkIGJlXG5cdCAgICBcdFx0fSlcblx0ICAgIFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3JNZXNzYWdlKSB7XG5cdCAgICBcdFx0XHQvL2Fzc3VtaW5nIG5vIHVpZCB3YXMgZm91bmQganVzdCB1c2UgdGhlIGVtYWlsXG5cdCAgICBcdFx0XHQkbG9nLmluZm8oZXJyb3JNZXNzYWdlKTtcblx0ICAgIFx0XHRcdFxuXHQgICAgXHRcdFx0Ly9jcmVhdGUgdGhlIGVtYWlsSWRcblx0ICAgIFx0XHRcdGlkQnlFbWFpbCA9IHV0ZjhfdG9fYjY0KHZtLnRlbXBHdWVzdC5lbWFpbCk7XG5cdCAgICBcdFx0XHQvL2FkZCB0aGlzIHBlcnNvbiB0byB0aGUgaG9zdCdzIGd1ZXN0IGxpc3Rcblx0ICAgIFx0XHRcdGlmKCFhbmd1bGFyLmlzT2JqZWN0KHZtLmd1ZXN0TGlzdCkpIHtcblx0XHRcdFx0XHRcdCRsb2cuaW5mbygnY3JlYXRpbmcgdGhlIG9iamVjdCcpO1xuXHRcdFx0XHRcdFx0dm0uZ3Vlc3RMaXN0ID0ge307XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vY3JlYXRlIHRoZSBndWVzdCB0byBzYXZlXG5cdFx0XHRcdFx0dmFyIGd1ZXN0QmVpbmdBZGRlZCA9IHZtLnRlbXBHdWVzdDtcblxuXHQgICAgXHRcdFx0dm0uZ3Vlc3RMaXN0W2lkQnlFbWFpbF0gPSBndWVzdEJlaW5nQWRkZWQ7XG5cblx0XHRcdCAgICBcdC8qaW52aXRhdGlvbk1hbmFnZXIuYWRkR3Vlc3RUb0hvc3RHdWVzdExpc3Qodm0udGVtcEd1ZXN0Lm5hbWUsIHZtLnRlbXBHdWVzdC5lbWFpbCwgdW5kZWZpbmVkLCAkcm91dGVQYXJhbXMuZXZlbnRJZCwgJHJvdXRlUGFyYW1zLnVpZClcblx0XHRcdCAgICBcdC50aGVuKGZ1bmN0aW9uKHBvc2l0aXZlUmVzdWx0KSB7XG5cdFx0XHQgICAgXHRcdCRsb2cuaW5mbygnZ290IHRoaXMgcmVzdWx0OiAnICsgcG9zaXRpdmVSZXN1bHQpO1xuXHRcdFx0ICAgIFx0fSlcblx0XHRcdCAgICBcdC50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdFx0ICAgIFx0XHQvL2FkZCB0aGlzIGV2ZW50IHRvIHRoZSBndWVzdCdzIHBlbmRpbmcgbGlzdFxuXHRcdFx0ICAgIFx0XHRpbnZpdGF0aW9uTWFuYWdlci51cGRhdGVQZW5kaW5nRXZlbnRzTGlzdEZvckd1ZXN0KCRyb3V0ZVBhcmFtcy5ldmVudElkKVxuXHRcdFx0ICAgIFx0fSlcblx0XHRcdCAgICBcdC50aGVuKGZ1bmN0aW9uKCkge1xuXHQgICAgXHRcdFx0Ly9yZW1vdmUgdGhlICd1cGRhdGVkJyBmaWVsZCBpZiBuZWVkIGJlXG5cdCAgICBcdFx0XHR9KVxuXHRcdFx0ICAgIFx0LmNhdGNoKGZ1bmN0aW9uKG5lZ2F0aXZlUmVzdWx0KSB7XG5cdFx0XHQgICAgXHRcdCRsb2cuaW5mbygnZ290IHRoaXMgcmVzdWx0OiAnICsgcG9zaXRpdmVSZXN1bHQpO1xuXHRcdFx0ICAgIFx0fSkqL1xuXG5cdFx0XHQgICAgXHR2bS50ZW1wR3Vlc3QgPSB7XG5cdFx0XHRcdCAgICBcdG5hbWU6ICcnLFxuXHRcdFx0XHQgICAgXHRlbWFpbDogJycsXG5cdFx0XHRcdCAgICBcdHN0YXR1czogJ3BlbmRpbmcnXG5cdFx0XHRcdCAgICB9IFxuXG5cdCAgICBcdFx0fSlcblx0ICAgIFx0XHRcblx0ICAgIFx0fVxuXHQgICAgXHRcblx0ICAgIH1cblxuXHRcdC8vYWN0aW9uc1xuXHRcdGluaXQoKTtcblxuXHR9XG5cblx0cmV0dXJuICBkaXJlY3RpdmU7XG5cdFx0XG59OyIsIi8qIEhvc3RlZEV2ZW50c0xpc3QuZGlyZWN0aXZlLmpzICovXG5cbi8qKlxuKiBAZGVzYyBkaXNwbGF5cyBhIGxpc3Qgb2YgYWxsIHRoZSBldmVudHMgdGhlIGN1cnJlbnQgdXNlciBpcyBob3N0aW5nLlxuKiBAZXhhbXBsZSA8aG9zdGVkLWV2ZW50cy1saXN0PjwvaG9zdGVkLWV2ZW50cy1saXN0PlxuKi9cblxuYW5ndWxhclxuXHQubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG5cdC5kaXJlY3RpdmUoJ2hvc3RlZEV2ZW50c0xpc3QnLCBob3N0ZWRFdmVudHNMaXN0KTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBob3N0ZWRFdmVudHNMaXN0KCkge1xuXHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdHJlc3RyaWN0OiAnQUVDTScsXG5cdFx0dGVtcGxhdGVVcmw6ICcuLi92aWV3cy9kaXJlY3RpdmVzL2hvc3RlZEV2ZW50c0xpc3QuZGlyZWN0aXZlLmh0bScsXG5cdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRzY29wZToge1xuXHRcdFx0aG9zdGVkRXZlbnRzOiAnPScsXG5cdFx0XHR1c2VySWQ6ICc9J1xuXHRcdH0sXG5cdFx0bGluazogbGlua0Z1bmMsXG5cdFx0Y29udHJvbGxlcjogaG9zdGVkRXZlbnRzTGlzdENvbnRyb2xsZXIsXG5cdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0fVxuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHtcbiAgICB9XG5cbiAgICBob3N0ZWRFdmVudHNMaXN0Q29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJywgJ3RyYWZmaWNWYWxldCddO1xuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIGhvc3RlZEV2ZW50c0xpc3RDb250cm9sbGVyKCRsb2csIHRyYWZmaWNWYWxldCkge1xuXHQgICAgdmFyIHZtID0gdGhpcztcblxuXHQgICAgLy9sb2NhbCB2YXJpYWJsZXNcblx0ICAgIHZhciBob3N0ZWRFdmVudHNTaGVycGEgPSB0cmFmZmljVmFsZXQ7XG5cblx0ICAgIC8vdmlldyBtb2RlbCB2YXJpYWJsZXNcblx0ICAgIHZtLmd1ZXN0c0FyZUludml0ZWQgPSBmYWxzZTtcblxuXHQgICAgLy9sb2NhbCBtZXRob2RzXG5cdCAgICBmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRcdHJldHVybiBuZXcgRGF0ZShwYXJzZUludCh1bml4VGltZSkpO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBjb3VudEd1ZXN0cyhsaXN0KSB7XG5cdFx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVcblx0XHRcdHZhciBjb3VudGVyID0gMDtcblxuXHRcdFx0Ly9pZiB3ZSdyZSBjb3VudGluZywgdGhlbiB0aGVyZSdzIGEgbGlzdCwgc28gdGhyb3cgdGhlIGZsYWdcblx0XHRcdHZtLmd1ZXN0c0FyZUludml0ZWQgPSB0cnVlO1xuXG5cdFx0XHRPYmplY3Qua2V5c1tsaXN0XS5mb3JFYWNoKGZ1bmN0aW9uKGd1ZXN0KSB7XG5cdFx0XHRcdGNvdW50ZXIrKztcblx0XHRcdH0pXG5cblx0XHRcdHJldHVybiBjb3VudGVyO1xuXHRcdH1cblxuXHRcdC8vdmlldyBtb2RlbCBtZXRob2RzXG5cdFx0dm0uZm9ybWF0RGF0ZSA9IGZ1bmN0aW9uKHVuaXhUaW1lKSB7XG5cdFx0XHQvL3JlZm9ybWF0IHRoZSB0aW1lXG5cdFx0XHQkbG9nLmluZm8oJ2dvdCB0aGlzdCB0aW1lOiAnICsgdW5peFRpbWUpO1xuXHRcdFx0cmV0dXJuIHVuaXhUaW1lVG9EYXRlVGltZSh1bml4VGltZSk7XG5cdFx0fVxuXG5cdFx0dm0uZ3Vlc3RzQXR0ZW5kaW5nID0gZnVuY3Rpb24oZ3Vlc3RMaXN0KSB7XG5cdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChndWVzdExpc3QpKSB7XG5cdFx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGd1ZXN0TGlzdFsnYXR0ZW5kaW5nJ10pKSByZXR1cm4gY291bnRHdWVzdHMoZ3Vlc3RMaXN0WydhdHRlbmRpbmcnXSk7XG5cdFx0XHRcdGVsc2UgcmV0dXJuIDA7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHJldHVybiAwO1xuXHRcdH1cblxuXHRcdHZtLmd1ZXN0c0ludml0ZWQgPSBmdW5jdGlvbihndWVzdExpc3QpIHtcblx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGd1ZXN0TGlzdCkpIHtcblx0XHRcdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdFx0XHR2YXIgZ3Vlc3RDb3VudCA9IHsgYXR0ZW5kaW5nOiAwLCBwZW5kaW5nOiAwLCBkZWNsaW5lZDogMCB9O1xuXG5cdFx0XHRcdC8vbG9jYWwgbWV0aG9kc1xuXHRcdFx0XHRmdW5jdGlvbiB0b3RhbEd1ZXN0Q291bnQoKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGd1ZXN0Q291bnQuYXR0ZW5kaW5nICsgZ3Vlc3RDb3VudC5wZW5kaW5nICsgZ3Vlc3RDb3VudC5kZWNsaW5lZDtcblx0XHRcdFx0fSBcblxuXHRcdFx0XHQvL2NoZWNrIHZhbHVlc1xuXHRcdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChndWVzdExpc3RbJ2F0dGVuZGluZyddKSkgZ3Vlc3RDb3VudC5hdHRlbmRpbmcgPSBjb3VudEd1ZXN0cyhndWVzdExpc3RbJ2F0dGVuZGluZyddKTtcblx0XHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoZ3Vlc3RMaXN0WydwZW5kaW5nJ10pKSBndWVzdENvdW50LnBlbmRpbmcgPSBjb3VudEd1ZXN0cyhndWVzdExpc3RbJ3BlbmRpbmcnXSk7XG5cdFx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGd1ZXN0TGlzdFsnZGVjbGluZWQnXSkpIGd1ZXN0Q291bnQuZGVjbGluZWQgPSBjb3VudEd1ZXN0cyhndWVzdExpc3RbJ2RlY2xpbmVkJ10pO1xuXG5cdFx0XHRcdHJldHVybiB0b3RhbEd1ZXN0Q291bnQoKTtcblx0XHRcdH1cblx0XHRcdGVsc2UgcmV0dXJuIDA7XG5cdFx0fVxuXG5cdFx0dm0ucGVyY2VudGFnZUF0dGVuZGluZyA9IGZ1bmN0aW9uKGd1ZXN0TGlzdCkge1xuXHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoZ3Vlc3RMaXN0KSkge1xuXHRcdFx0XHRyZXR1cm4gKGd1ZXN0c0F0dGVuZGluZyhndWVzdGxpc3QpIC8gZ3Vlc3RzSW52aXRlZChndWVzdExpc3QpKTtcblx0XHRcdH1cblx0XHRcdGVsc2UgcmV0dXJuIDA7XG5cdFx0fVxuXG5cdFx0dm0uZXZlbnRDbGlja2VkID0gZnVuY3Rpb24oZXZlbnRJRCkge1xuXHRcdFx0Ly9yZWRpcmVjdCB0byB0aGUgZXZlbnQgcGFnZVxuXHRcdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyB0bzogL2V2ZW50LycgKyBldmVudElEICsgJy8nICsgdm0uaG9zdGVkRXZlbnRzW2V2ZW50SURdLmhvc3QudWlkICsgJy8nICsgdm0udXNlcklkKTtcblx0XHRcdGhvc3RlZEV2ZW50c1NoZXJwYS5yZWRpcmVjdFRvKCcvZXZlbnQnLCBldmVudElELCB2bS5ob3N0ZWRFdmVudHNbZXZlbnRJRF0uaG9zdC51aWQsIHZtLnVzZXJJZCk7XG5cdFx0fVxuXG5cdFx0Ly9hY3Rpb25zXG5cblx0fVxuXG5cdHJldHVybiAgZGlyZWN0aXZlO1xuXHRcdFxufTsiLCIvKiBIb3N0ZWRFdmVudHNQcm9ncmVzc0Jhci5kaXJlY3RpdmUuanMgKi9cblxuLyoqXG4qIEBkZXNjIGRpc3BsYXlzIGEgdXNlcnMgcHJvZ3Jlc3MgdGhyb3VnaCB0aGUgZXZlbnRzIHBhZ2UuXG4qIEBleGFtcGxlIDxob3N0ZWQtZXZlbnRzLXByb2dyZXNzLWJhcj48L2hvc3RlZC1ldmVudHMtcHJvZ3Jlc3MtYmFyPlxuKi9cblxuYW5ndWxhclxuXHQubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG5cdC5kaXJlY3RpdmUoJ3Byb2dyZXNzQmFyJywgcHJvZ3Jlc3NCYXIpO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHByb2dyZXNzQmFyKCkge1xucmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICBzY29wZToge1xuICAgICAgICBjdXJWYWw6ICdAJyxcbiAgICAgICAgbWF4VmFsOiAnQCdcbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZTogXCI8ZGl2IGNsYXNzPSdwcm9ncmVzcy1iYXInPlwiK1xuICAgICAgICAgICAgICAgICAgXCI8ZGl2IGNsYXNzPSdwcm9ncmVzcy1iYXItYmFyJz50ZXN0aW5nPC9kaXY+XCIrXG4gICAgICAgICAgICAgICAgXCI8L2Rpdj5cIiwgICAgXG5cbiAgICAgIGxpbms6IGZ1bmN0aW9uICgkc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVQcm9ncmVzcygpIHtcbiAgICAgICAgICB2YXIgcHJvZ3Jlc3MgPSAwO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmICgkc2NvcGUubWF4VmFsKSB7XG4gICAgICAgICAgICBwcm9ncmVzcyA9IE1hdGgubWluKCRzY29wZS5jdXJWYWwsICRzY29wZS5tYXhWYWwpIC8gJHNjb3BlLm1heFZhbCAqIGVsZW1lbnQuZmluZCgnLnByb2dyZXNzLWJhcicpLndpZHRoKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGVsZW1lbnQuZmluZCgnLnByb2dyZXNzLWJhci1iYXInKS5jc3MoJ3dpZHRoJywgcHJvZ3Jlc3MpOyAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgJHNjb3BlLiR3YXRjaCgnY3VyVmFsJywgdXBkYXRlUHJvZ3Jlc3MpO1xuICAgICAgICAkc2NvcGUuJHdhdGNoKCdtYXhWYWwnLCB1cGRhdGVQcm9ncmVzcyk7ICAgICAgICBcbiAgICAgIH1cbiAgICB9OyAgXG4gfTsiLCIvKiBIb3N0ZWRHdWVzdExpc3QuZGlyZWN0aXZlLmpzICovXG5cbi8qKlxuKiBAZGVzYyBkaXNwbGF5cyBhIGxpc3Qgb2YgYWxsIGd1ZXN0cyBpbnZpdGVkIHRvIGFuIGV2ZW50IHRoaXMgdXNlciBpcyBob3N0aW5nLlxuKiBAZXhhbXBsZSA8aG9zdGVkLWd1ZXN0LWxpc3Q+PC9ob3N0ZWQtZ3Vlc3QtbGlzdD5cbiovXG5cbmFuZ3VsYXJcblx0Lm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuXHQuZGlyZWN0aXZlKCdob3N0ZWRHdWVzdExpc3QnLCBob3N0ZWRHdWVzdExpc3QpO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGhvc3RlZEd1ZXN0TGlzdCgpIHtcblx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRyZXN0cmljdDogJ0FFQ00nLFxuXHRcdHRlbXBsYXRlVXJsOiAnLi4vdmlld3MvZGlyZWN0aXZlcy9ob3N0ZWRHdWVzdExpc3QuZGlyZWN0aXZlLmh0bScsXG5cdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRzY29wZToge1xuXHRcdFx0Z3Vlc3RMaXN0OiAnPScsXG5cdFx0fSxcblx0XHRsaW5rOiBsaW5rRnVuYyxcblx0XHRjb250cm9sbGVyOiBob3N0ZWRHdWVzdExpc3RDb250cm9sbGVyLFxuXHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdH1cblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7XG5cdFx0c2NvcGUuJHdhdGNoKCdndWVzdExpc3QnLCBmdW5jdGlvbigpIHtcblx0XHRcdHNjb3BlLiRhcHBseTtcblx0XHR9KTtcbiAgICB9XG5cbiAgICBob3N0ZWRHdWVzdExpc3RDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJHJvdXRlUGFyYW1zJywgJ3VzZXJEYXRhJ107XG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gaG9zdGVkR3Vlc3RMaXN0Q29udHJvbGxlcigkbG9nLCAkcm91dGVQYXJhbXMsIHVzZXJEYXRhKSB7XG5cdCAgICB2YXIgdm0gPSB0aGlzO1xuXG5cdCAgICAvL2xvY2FsIHZhcmlhYmxlc1xuXHQgICAgdm0uaXNBR3Vlc3RMaXN0ID0gZmFsc2U7XG5cblx0ICAgIC8vbG9jYWwgbWV0aG9kc1xuXHQgICAgZnVuY3Rpb24gdGhlcmVJc0FHdWVzdExpc3QoKSB7XG5cdCAgICBcdC8vY2hlY2sgZm9yIGEgZ3Vlc3RMaXN0IG9iamVjdFxuXHQgICAgXHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2bS5ndWVzdExpc3QpICYmIHZtLmd1ZXN0TGlzdCAhPSAnJykge1xuXHQgICAgXHRcdHZtLmlzQUd1ZXN0TGlzdCA9IHRydWU7XG5cdCAgICBcdFx0cmV0dXJuIHRydWU7XG5cdCAgICBcdH0gZWxzZSB7XG5cdCAgICBcdFx0dm0uaXNBR3Vlc3RMaXN0ID0gZmFsc2U7XG5cdCAgICBcdFx0cmV0dXJuIGZhbHNlO1xuXHQgICAgXHR9XG5cdCAgICB9XG5cblx0ICAgIGZ1bmN0aW9uIGluaXQoKSB7XG5cdCAgICBcdC8vbG9jYWwgdmFyaWFibGVzXG5cdCAgICBcdHZhciBsaXN0Q29sbGVjdG9yID0gdXNlckRhdGE7XG5cblx0ICAgIFx0Ly9pZiB0aGVyZSBpc24ndCBhIGd1ZXN0IGxpc3QsIGdvIG91dCB0byB0aGUgZGIgdG8gZ2V0IGl0XG5cblx0XHRcdGlmKCF0aGVyZUlzQUd1ZXN0TGlzdCgpKSB7XG5cdFx0XHRcdCRsb2cuaW5mbygnZ29pbmcgYWZ0ZXIgdGhlIGxpc3QnKTtcblx0XHRcdFx0bGlzdENvbGxlY3Rvci5nZXRFdmVudEd1ZXN0TGlzdCgkcm91dGVQYXJhbXMudWlkLCAkcm91dGVQYXJhbXMuZXZlbnRJZClcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24ocmV0dXJuZWRMaXN0KSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdnb3QgdGhlIGxpc3QnKTtcblx0XHRcdFx0XHQkbG9nLmluZm8ocmV0dXJuZWRMaXN0KTtcblx0XHRcdFx0XHR2bS5ndWVzdExpc3QgPSByZXR1cm5lZExpc3Q7XG5cdFx0XHRcdFx0aWYoYW5ndWxhci5pc09iamVjdChyZXR1cm5lZExpc3QpKSB2bS5pc0FHdWVzdExpc3QgPSB0cnVlO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHsgXG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdUaGVyZSB3YXMgYW4gZXJyb3I6ICcrIGVycm9yKTtcblx0XHRcdFx0fSlcblx0XHRcdH1cblx0ICAgIH1cblx0ICAgIC8vdm0gbWV0aG9kc1xuXG5cdFx0Ly9hY3Rpb25zXG5cdFx0aW5pdCgpO1xuXG5cdH1cblxuXHRyZXR1cm4gIGRpcmVjdGl2ZTtcblx0XHRcbn07IiwiLyogVG9vbEJhci5kaXJlY3RpdmUuanMgKi9cblxuLyoqXG4qIEBkZXNjIHRvb2xiYXIgZGlyZWN0aXZlIHRoYXQgaXMgdXNlZCBvbiB0aGUgbWFpbiBwYWdlIGFjcm9zcyB0aGUgZW50aXJlIGFwcC5cbiogQGV4YW1wbGUgPGRpdiB0b29sLWJhcj48L2Rpdj5cbiovXG5cbmFuZ3VsYXJcblx0Lm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuXHQuZGlyZWN0aXZlKCd0b29sQmFyJywgdG9vbEJhcik7XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gdG9vbEJhcigpIHtcblx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRyZXN0cmljdDogJ0FFQ00nLFxuXHRcdHRlbXBsYXRlVXJsOiAnLi4vdmlld3MvZGlyZWN0aXZlcy90b29sQmFyLmRpcmVjdGl2ZS5odG0nLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0c2NvcGU6IHt9LFxuXHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdGNvbnRyb2xsZXI6IFRvb2xCYXJDb250cm9sbGVyLFxuXHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdH1cblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7XG4gICAgfVxuXG4gICAgVG9vbEJhckNvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICdiYWNrZW5kU2VydmljZXMnXTtcbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBUb29sQmFyQ29udHJvbGxlcigkbG9nLCBiYWNrZW5kU2VydmljZXMpIHtcblx0ICAgIHZhciB2bSA9IHRoaXM7XG5cblx0ICAgIC8vbG9jYWwgY29udHJvbGVyIHZhcmlhYmxlc1xuXHQgICAgdmFyIGZiQ29ubmVjdCA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHQgICAgLy9sb2NhbCB2aWV3IHZhcmlhYmxlc1xuXHRcdGZiQ29ubmVjdC5jaGVja0xvZ2luU3RhdHVzKClcblx0XHQudGhlbihmdW5jdGlvbihzdGF0dXMpIHtcblx0XHRcdHZtLmxvZ2dlZEluID0gc3RhdHVzO1xuXHRcdH0pXG5cdFx0LmNhdGNoKClcblxuXHRcdHZtLmNsaWNrZWQgPSBmdW5jdGlvbigpIHtcblx0XHRcdCRsb2cuaW5mbygnYnV0dG9uIGNsaWNrZWQnKTtcblx0XHR9XG5cblx0XHQvL2FjdGlvbnNcblx0XHRcblx0fVxuXG5cdHJldHVybiAgZGlyZWN0aXZlO1xuXHRcdFxufTsiLCJhbmd1bGFyXG5cdC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJywgW1xuXHRcdCduZ1JvdXRlJyxcblx0XHQnbmdUb3VjaCcsXG5cdFx0J2ZpcmViYXNlJ1xuXHRdKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
