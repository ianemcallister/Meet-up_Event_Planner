function AnEventController(e,n,t,a,r){function o(){p.tempDateTime={start:"",end:""},p.newGuest={name:"",email:{address:"",valid:!1,style:{color:""}}},p.showIfHost=!1,p.hideIfAttending=!0,p.manageSections={1:{active:!0,complete:!1,style:{color:"black","background-color":"yellow"}},2:{active:!1,complete:!1,style:{color:"white","background-color":"gray"}},3:{active:!1,complete:!1,style:{color:"white","background-color":"gray"}}},m(),v(),p.showIfHost||g()}function s(e){return btoa(e)}function l(e){return atob(e)}function u(e){return Date.parse(e)}function d(){p.newGuest={name:"",email:{address:"",valid:!1,style:{color:""}}}}function c(e){n.info("adding them to the registered users list "+e),w.child("Users").child(e).child("events").child("pending").child(a.uid).child(a.eventId).set({id:a.eventId,eventTimes:{start:p.event.eventTimes.start,end:p.event.eventTimes.end},name:p.event.name,host:a.uid},function(e){e&&n.info("there was an error"+e)}),w.child("Users").child(e).child("events").child("pending").once("value",function(t){var i=t.val();n.info(t.val()),i.updated?(n.info("deleting updated"),w.child("Users").child(e).child("events").child("pending").child("updated").remove(function(e){e&&n.info("Deleting failed: "+e.code)})):n.info("nothing to do")},function(e){e&&n.info("The read failed: "+e.code)})}function f(e){n.info("adding them to the UNREGISTERED users list "+e),w.child("UnregisteredUsers").child(e).child("pending").child(a.uid).child(a.eventId).set({id:a.eventId,host:a.uid,eventTimes:{start:p.event.eventTimes.start,end:p.event.eventTimes.end},name:p.event.name},function(e){e&&n.info("there was an error"+e)})}function m(){var e=w.getAuth();e.uid==a.hostId?(n.info("is the host"),p.showIfHost=!0):(n.info("not the host"),p.showIfHost=!1)}function v(){p.showIfHost||(n.info("check guest attendance"),U.child("guestList").on("value",function(e){var n=e.val();p.hideIfAttending=!n[a.uid].attending}))}function g(){p.manageSections[1].active=!0,p.manageSections[2].active=!0,p.manageSections[3].active=!0}var p=this,h="https://meetupplanner.firebaseio.com/",w=new Firebase(h),U=w.child("Users").child(a.hostId).child("events").child("hosting").child(a.eventId);p.event=r(U);var b=r(w.child("Uids"));p.requiredInputs=["","","","","","","","",""],p.setTempTime=function(e){"start"==e&&(p.tempDateTime.start=new Date),"end"==e&&(p.tempDateTime.end=new Date)},p.unixTimeToDateTime=function(e){return new Date(parseInt(e))},p.dateTimeToUnixTime=function(e){return Date.parse(e)},p.submit=function(){n.info("submitting the form now!")},p.backToUserEvents=function(){t.path("/userEvents/"+a.uid+"/"+a.token)},p.eventRedirect=function(e,i){var r=e+"/"+a.uid+"/"+a.token;n.info("redirecting to: "+r),t.path(r)},p.changeSection=function(e){for(n.info("are we here"),i=1;i<=3;i++)i==e?(p.manageSections[i].active=!0,p.manageSections[i].style["background-color"]="yellow",p.manageSections[i].style.color="black"):(p.manageSections[i].active=!1,p.manageSections[i].style["background-color"]="gray",p.manageSections[i].style.color="white")},p.saveEventTime=function(e,n){p.event.eventTimes||(p.event.eventTimes={start:"",end:""},p.event.eventTimes.start=p.dateTimeToUnixTime(p.tempDateTime.start),p.event.eventTimes.end=p.dateTimeToUnixTime(p.tempDateTime.end)),p.tempDateTime.end<p.tempDateTime.start&&"start"==n&&(p.tempDateTime.end=p.tempDateTime.start),"start"==n&&(p.event.eventTimes.start=p.dateTimeToUnixTime(e)),"end"==n&&(p.event.eventTimes.end=p.dateTimeToUnixTime(e))},p.guestsAreInvited=function(){return!!p.event.guestList},p.validateGuestEmail=function(){if(p.newGuest.email.address){var e=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","");e.test(p.newGuest.email.address)?(p.newGuest.email.valid=!0,p.newGuest.email.style={color:"green"}):(p.newGuest.email.valid=!1,p.newGuest.email.style={color:""})}},p.isSectionComplete=function(){for(i=0;i<8;i++)n.info(p.requiredInputs[i])},p.saveAndAdvance=function(){p.event.$save().then(function(){n.info("event saved")})["catch"](function(e){n.info("error! "+e)}),p.isSectionComplete(),1==p.manageSections[1].complete&&1==p.manageSections[2].complete&&1==p.manageSections[3].complete?p.eventRedirect("/userEvents",a.uid):p.manageSections[1].active?p.changeSection(2):p.manageSections[2].active?p.changeSection(3):p.manageSections[3].active&&p.changeSection(1)},p.addGuestToHostsList=function(){var e=s(p.newGuest.email.address);if(p.newGuest.name&&p.newGuest.email.valid){if(p.event.guestList)for(var t=0;p.event.guestList[t];){if(p.event.guestList[t].email==l(e))return n.info("This guest is already on the list"),void d();t++}else p.event.guestList={};if(b[e]){if(b[e]==a.uid)return n.info("tried to register the host"),void d();c(b[e]),p.event.guestList[b[e]]={attending:!1,status:"pending",name:p.newGuest.name,email:p.newGuest.email.address}}else f(e),p.event.guestList[e]={attending:!1,status:"pending",name:p.newGuest.name,email:p.newGuest.email.address};p.saveEvent(),d()}else n.info("you didn't enter a name and or email")},p.guestWillAttend=function(e){var t=w.child("Users").child(a.uid).child("events"),i=0,r=!1;if(p.event.guestList[a.uid].attending=e,p.event.guestList[a.uid].status="attending",t.child("pending").on("value",function(r){var o=r.val();n.info(o),n.info(o[a.hostId]),n.info(o[a.hostId][a.eventId]);var s=o[a.hostId][a.eventId];n.info(s);for(invitation in o)i++;n.info("total attending: "+i),e&&t.child("attending").child(a.hostId).child(a.eventId).set(s,function(e){e&&n.info(e)})}),t.child("attending").on("value",function(e){var t=e.val();n.info("this is the attending list"),n.info(t),t.updated&&(r=!0)},function(e){e&&n.info(e)}),2>i){var o=new Date;t.child("pending").update({updated:u(o)},function(e){e&&n.info(e)})}t.child("pending").child(a.hostId).remove(),r&&n.info("removing the updated placeholder"),p.event.$save()},p.updateUpdatedParam=function(){var e=w.child("Users").child(a.uid).child("events");n.info("updating the param"),e.child("attending").on("value",function(e){n.info(e.val())}),e.child("attending").child("updated").remove()},p.addInvitationToAttending=function(e){var t=w.child("Users").child(a.uid).child("events"),i=0;t.child("pending").on("value",function(r){var o=r.val(),s=o[a.hostId][a.eventId];n.info(o),n.info(o[a.hostId]),n.info(o[a.hostId][a.eventId]);for(invitation in o)i++;n.info("total pending invitations: "+i),n.info(e),e&&t.child("attending").child(a.hostId).child(a.eventId).set(s,function(e){e&&n.info(e)})})},o()}function LandingPageController(e,n,t,a,r){function o(e){return btoa(e)}function s(e){return Date.parse(e)}function l(i,a){var r=i+"/"+c.uid+"/"+c.token;n.info("redirecting to: "+r),t.path(r),e.$apply()}var u=this,d="https://meetupplanner.firebaseio.com/",c={};u.showRequirnments=!1,u.validNewName={valid:!1,style:{color:""}},u.validNewEmail={valid:!1,style:{color:""}},u.securePassword={secure:!1,style:{color:""}},u.unlockCreateUserBtn={usable:!1,"class":"btn btn-warning"},u.message="testing",u.validUserEmail={valid:!1,style:{color:""}},u.validUserPassword={valid:!1,style:{color:""}},u.unclockUserLoginBtn={usable:!1,"class":"btn btn-warning"},u.passwordRequirnments={0:{constraint:"Is at least 16 characters long",style:{color:"red"},met:!1},1:{constraint:"Is no longer than 100 characters",style:{color:"red"},met:!1},2:{constraint:"Contains at least one required symbol (!@#$%^&*)",style:{color:"red"},met:!1},3:{constraint:"Contains at least one number",style:{color:"red"},met:!1},4:{constraint:"Contains at least one lowercase letter",style:{color:"red"},met:!1},5:{constraint:"Contains at least one uppercase letter",style:{color:"red"},met:!1},6:{constraint:"Doesn't have any illegal characters",style:{color:"red"},met:!1}},u.displayPassReqs=function(){u.newName&&u.newEmail?u.showRequirnments=!0:u.showRequirnments=!1},u.checkNewName=function(){u.newName&&(u.newName.length>0?(u.validNewName.valid=!0,u.validNewName.style={color:"green"}):(u.validNewName.valid=!1,u.validNewName.style={color:"red"})),u.openCreateUserButton()},u.checkNewEmail=function(){if(u.newEmail){var e=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","");e.test(u.newEmail)?(u.validNewEmail.valid=!0,u.validNewEmail.style={color:"green"}):(u.validNewEmail.valid=!1,u.validNewEmail.style={color:"red"})}u.openCreateUserButton()},u.checkUserEmail=function(){if(u.userEmail){var e=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","");e.test(u.userEmail)?(u.validUserEmail.valid=!0,u.validUserEmail.style={color:"green"}):(u.validUserEmail.valid=!1,u.validUserEmail.style={color:"red"})}u.openUserLoginBtn()},u.checkNewPasswords=function(){var e={0:[""," your password needs to be 16 characters or longer"],1:[""," your password needs to be less than 100 characters"],2:["[!@#$%^&*]"," no required symbols found"],3:["[0-9]"," no numbers found"],4:["[a-z]"," no lowercase letters found"],5:["[A-Z]"," no uppercase letters found"],6:["[^A-z0-9!@#$%^&*]"," illegal characters found"]};if(u.newPassword){for(u.newPassword.length>15?(u.passwordRequirnments[0].style={color:"green"},u.passwordRequirnments[0].met=!0):(u.passwordRequirnments[0].style={color:"red"},u.passwordRequirnments[0].met=!1),u.newPassword.length<=100?(u.passwordRequirnments[1].style={color:"green"},u.passwordRequirnments[1].met=!0):(u.passwordRequirnments[1].style={color:"red"},u.passwordRequirnments[1].met=!1),i=2;i<6;i++){var n=new RegExp(e[i][0],"");n.test(u.newPassword)?(u.passwordRequirnments[i].style={color:"green"},u.passwordRequirnments[i].met=!0):(u.passwordRequirnments[i].style={color:"red"},u.passwordRequirnments[i].met=!1)}var n=new RegExp(e[6][0],"");n.test(u.newPassword)?(u.passwordRequirnments[6].style={color:"green"},u.passwordRequirnments[6].met=!0):(u.passwordRequirnments[6].style={color:"red"},u.passwordRequirnments[6].met=!1),u.passwordRequirnments[0].met&&u.passwordRequirnments[1].met&&u.passwordRequirnments[2].met&&u.passwordRequirnments[3].met&&u.passwordRequirnments[4].met&&u.passwordRequirnments[5].met&&u.passwordRequirnments[6].met?u.securePassword.secure=!0:u.securePassword.secure=!1,u.securePassword.secure?u.securePassword.style={color:"green"}:u.securePassword.style={color:"red"}}u.openCreateUserButton()},u.checkUserPasswords=function(){u.userPassword&&(u.userPassword.length>15?(u.validUserPassword.style={color:"green"},u.validUserPassword.valid=!0):(u.validUserPassword.style={color:"red"},u.validUserPassword.valid=!1)),u.openUserLoginBtn()},u.openCreateUserButton=function(){u.validNewName.valid&&u.validNewEmail.valid&&u.securePassword.secure?(u.unlockCreateUserBtn["class"]="btn btn-success",u.unlockCreateUserBtn.usable=!0):(u.unlockCreateUserBtn["class"]="btn btn-warning",u.unlockCreateUserBtn.usable=!1)},u.openUserLoginBtn=function(){u.validUserEmail.valid&&u.validUserPassword.valid?(u.unclockUserLoginBtn["class"]="btn btn-success",u.unclockUserLoginBtn.usable=!0):(u.unclockUserLoginBtn["class"]="btn btn-warning",u.unclockUserLoginBtn.usable=!1)},u.update=function(){u.newName=a.find("#newName")[0].value,u.newEmail=a.find("#newEmail")[0].value,u.userEmail=a.find("#userEmail")[0].value,u.checkNewName(),u.checkNewEmail(),u.checkUserEmail()},u.createNewUser=function(){if(n.info("Creating a new user account now!"),u.unlockCreateUserBtn.usable){var e=new Firebase(d);e.createUser({email:u.newEmail,password:u.newPassword},function(t,i){if(t)n.info("Error creating user: "+t);else{n.info(i),c=i;var a=e.child("Users/"+i.uid),r=new Date;a.set({bio:{name:u.newName,email:u.newEmail},events:{pending:{updated:s(r)},hosting:{updated:s(r)},attending:{updated:s(r)},completed:{updated:s(r)}}},function(e){e?n.info("Data could not be saved: "+e):n.info("Data saved successfully.")}),e.child("Uids").child(o(u.newEmail)).set(c.uid,function(e){e?n.info("Data could not be saved. "+e):n.info("uid created sucessfully.")}),l("/userInformation",c)}})}},u.loginRegisteredUser=function(){if(u.unclockUserLoginBtn.usable){var t=new Firebase(d);t.authWithPassword({email:u.userEmail,password:u.userPassword},function(t,i){t?n.info("Error Logging In: "+t):(n.info("Logged In successfully: "+i.uid),n.info(i),c=i,l("/userInformation",c),e.$apply())})}},u.alertMe=function(){alert("this is working! an alert!")},u.onResizeFunction=function(){var e=angular.element(".inputText");r.outerWidth>r.outerHeight?(e.css("font-size","2em"),n.info("making bigger")):e.css("font-size","1.2em")},"addEventListener"in a&&a.addEventListener("DOMContentLoaded",function(){n.info("adding FastClick"),FastClick.attach(a.body)},!1),angular.element(r).bind("resize",function(){u.onResizeFunction()}),angular.element(a).ready(function(){r.outerWidth<600&&u.onResizeFunction()}),u.master={},u.update=function(e){u.master=angular.copy(e)},u.reset=function(e){e&&(e.$setPristine(),e.$setUntouched()),u.user=angular.copy(u.master)},u.reset()}function MainController(e,n,t){var i=this,a="https://meetupplanner.firebaseio.com/",r=new Firebase(a);i.logout=function(){alert("logging you out!"),r.unauth(),n.path("/")},"addEventListener"in t&&t.addEventListener("DOMContentLoaded",function(){e.info("adding FastClick"),FastClick.attach(t.body)},!1)}function NewUserSignUpController(e,n,t,a,r,o){function s(){""!=l.errors.name||""!=l.errors.email||l.errors.password?l.errors.passesAllTests=!1:l.errors.passesAllTests=!0,angular.isDefined(l.inputs.newName)&&""!==l.inputs.newName&&angular.isDefined(l.inputs.newEmail)&&""!==l.inputs.newEmail&&angular.isDefined(l.inputs.newPassword)&&""!==l.inputs.newPassword?l.inputs.requiredFieldsDefined=!0:l.inputs.requiredFieldsDefined=!1}var l=this;l.inputs={newName:"",newEmail:"",newPassword:"",requiredFieldsDefined:!1},l.errors={name:"",email:"",password:!1,passesAllTests:!1},l.passReqs={0:{id:"",req:"Is at least 16 characters long",fulfilled:!1,style:{color:"red"}},1:{id:"",req:"Is no longer than 100 characters",fulfilled:!1,style:{color:"red"}},2:{id:"",req:"Contains at least one lowercase letter",fulfilled:!1,style:{color:"red"}},3:{id:"",req:"Contains at least one uppercase letter",fulfilled:!1,style:{color:"red"}},4:{id:"",req:"Contains at least one number",fulfilled:!1,style:{color:"red"}},5:{id:"",req:"Contains at least one required symbol (!@#$%^&*)",fulfilled:!1,style:{color:"red"}},6:{id:"",req:"Doesn't have any illegal characters",fulfilled:!0,style:{color:"red"}}},l.showReqsBox=!1;var u=t;l.checkNewName=function(){var e=[],n=u.required(l.inputs.newName),t=u.minNameLength(l.inputs.newName);angular.isDefined(n)&&e.push(n),angular.isDefined(t)&&e.push(t),e.length>0?l.errors.name=e.join(", "):l.errors.name="",s()},l.checkNewEmail=function(){var e=[],n=u.required(l.inputs.newEmail),t=u.email(l.inputs.newEmail);angular.isDefined(n)&&e.push(n),angular.isDefined(t)&&e.push(t),e.length>0?l.errors.email=e.join(", "):l.errors.email="",s()},l.checkNewPassword=function(){l.showReqsBox=!0;var e=[],n=u.required(l.inputs.newPassword),t=[u.minPassLength(l.inputs.newPassword),u.maxPassLength(l.inputs.newPassword),u.atLeastOneLowercase(l.inputs.newPassword),u.atLeastOneUppercase(l.inputs.newPassword),u.atLeastOneNumber(l.inputs.newPassword),u.atLeastOneSymbol(l.inputs.newPassword),u.illegalCharacter(l.inputs.newPassword)];angular.isDefined(n)&&e.push(n),e.length>0?l.errors.password=e.join(", "):l.errors.email="";var a=!1;for(i=0;i<7;i++)t[i]?(l.passReqs[i].fulfilled=!0,l.passReqs[i].style={color:"green"}):(l.passReqs[i].fulfilled=!1,l.passReqs[i].style={color:"red"},a=!0);l.errors.password=a,s()},l.exitPassword=function(){l.checkNewPassword(),l.showReqsBox=!1},l.createNewUser=function(){var e=r;if(l.errors.passesAllTests&&l.inputs.requiredFieldsDefined){var t=a,i=o;i.loadPrimaries(l.inputs.newName,l.inputs.newEmail),t.createNewUser(l.inputs.newEmail,l.inputs.newPassword).then(function(e){t.addNewUserToDatabase(e.uid,l.inputs.newName,l.inputs.newEmail).then(function(i){n.info(i),t.addNewUserToRegUsersList(e.uid,l.inputs.newEmail).then(function(e){n.info(e)})["catch"](function(e){n.info(e)})})["catch"](function(e){n.info(e)})})["catch"](function(e){n.info(e)}),e.redirectTo("/userInformation")}}}function topMenuController(e,n,t,i,a){function r(e){e?(n.info("User "+e.uid+" is logged in with "+e.provider),s.loggedIn=!0):(n.info("User is logged out"),s.loggedIn=!1)}function o(e,i){var a=e+"/"+i.uid+"/"+i.token;n.info("redirecting to: "+a),t.path(a)}var s=this,l="https://meetupplanner.firebaseio.com/",u=new Firebase(l);s.loggedIn=!1,"addEventListener"in i&&i.addEventListener("DOMContentLoaded",function(){n.info("adding FastClick"),FastClick.attach(i.body)},!1),angular.element(a).bind("resize",function(){s.onResizeFunction(),e.$apply()}),angular.element(i).ready(function(){a.outerWidth<600&&(s.onResizeFunction(),e.$apply())}),s.logout=function(){n.info("logging out!"),s.loggedIn=!1,u.unauth(),o("/",{uid:"",token:""})},s.navBarLoginRegisteredUser=function(){n.info("launching login");var t=new Firebase(l);t.authWithPassword({email:s.navbarUserEmail,password:s.navbarUserPass},function(t,i){t?n.info("Error Logging In: "+t):(n.info("Logged In successfully: "+i.uid),n.info(i),o("/userInformation",i),e.$apply(),angular.element(".navbar-toggle").click())})},s.onResizeFunction=function(){var e=angular.element(".navbarInputs");e.css("width",a.outerWidth-26+"px")},u.onAuth(r)}function UserEventsController(e,n,t,i,a){function r(e){return Date.parse(e)}function o(e,n){return 10*e+n}function s(e,a,r){var o=e+"/"+a+"/"+r+"/"+i.uid+"/"+i.token;n.info("redirecting to: "+o),t.path(o)}var l=this,u="https://meetupplanner.firebaseio.com/",d=new Firebase(u),c=d.child("Users").child(i.uid).child("events"),f=d.child("Users").child(i.uid).child("bio");l.events=a(c),l.showDecline=!1,f.child("name").on("value",function(t){l.currentUserName=t.val(),n.info("got the user name"),e.$apply()},function(e){n.info("The read failed: "+e.code)}),l.eventsAreBeingHosted=function(){var e=!1;for(element in l.events.hosting)"updated"!=element&&(e=!0);return e},l.eventInvitationsPending=function(){var e=!1;for(element in l.events.pending)"updated"!=element&&(e=!0);return e},l.attendingEvents=function(e){var n=!1;for(element in l.events.attending)"updated"!=element&&(n=!0);return n},l.percentRSVPed=function(e){return e?l.totalAttending(e)/l.totalInvited(e)*100:0},l.totalAttending=function(e){if(e){var n=0;return angular.forEach(e,function(e,t){1==e.attending&&n++}),n}return 0},l.totalInvited=function(e){if(e){var n=0;return angular.forEach(e,function(e,t){n++}),n}return 0},l.acceptEventInvitation=function(e){},l.redirectToHostedEvent=function(e){n.info("you're accessing event "+e),s("/event",e,i.uid)},l.redirectTo3rdPartyEvent=function(e,t){n.info(e),"pending"==t?(n.info("accessing from a pending invitation"),n.info(e),s("/event",e.id,e.host)):"attending"==t&&(n.info("accessing from an rsvped invitation"),s("/event",e.id,e.host))},l.createNewEvent=function(){n.info("you're creating a new event!");var e=new Date;l.events.hosting?noOfEventsAlready=Object.keys(l.events.hosting).length:noOfEventsAlready=0;var t=o(r(e),noOfEventsAlready);l.events.hosting[t]={id:t,eventTimes:{start:r(e),end:r(e)},host:{id:i.uid,name:l.currentUserName}},(""==l.events.hosting.updated||l.events.hosting.updated)&&(n.info("deleting the updated field"),delete l.events.hosting.updated),s("/event",t,i.uid)},n.info("into the user Events controller"),n.info(l.events)}function UserInformationController(e,n,t,i){function a(e){return new Date(parseInt(e))}function r(e){return Date.parse(e)}function o(){e.info("initializing the user information page"),l.loadBio().then(function(e){s.user=e,angular.isDefined(e.dob)&&""!==e.dob&&(s.tempBirthday=a(e.dob))})}var s=this,l=t;s.user={},s.tempBirthday,s.view={dataToSave:!1,isData:!1,btnMssg:"Move On...",proceedBtn:"btn btn-primary"},s.checkValues=function(){!angular.isUndefined(s.user.company)&&""!==s.user.company||!angular.isUndefined(s.user.title)&&""!==s.user.title||!angular.isUndefined(s.user.dob)&&""!==s.user.dob?(s.view.dataToSave=!0,s.view.proceedBtn="btn btn-success",s.view.btnMssg="Save & Continue"):(s.view.dataToSave=!1,s.view.proceedBtn="btn btn-primary",s.view.btnMssg="Move On...")},s.updateDOB=function(){s.user.dob=r(s.tempBirthday)},s.saveAndMoveOn=function(){var e=i;s.updateDOB(),s.view.isData&&l.updateBio(s.user),e.redirectTo("/userEvents",s.user.uid)},o()}function authService(e,n,t){function i(){return e.info("logging from the isLoggedIn Method"),!0}var a="https://meetupplanner.firebaseio.com/",r=(new Firebase(a),{isLoggedIn:i});return r}function backendServices(e,n,t){function i(e){return btoa(e)}function a(e){return atob(e)}function r(e){return new Date(parseInt(e))}function o(e){return Date.parse(e)}function s(e,i){new Firebase(v);return n(function(e,n){t.setTimeout(function(){e({uid:1234567})},2e3)})}function l(e,i,a){var r=new Firebase(v);r.child("Users/"+e),new Date;return n(function(e,n){t.setTimeout(function(){e("Data saved successfully.")},2e3)})}function u(e,a){var r=new Firebase(v);r.child("Uids").child(i(a));return n(function(e,n){t.setTimeout(function(){e("uid created sucessfully.")},2e3)})}function d(e,n){}function c(e){var i=new Firebase(v);i.child("Users/"+e.uid);return n(function(e,n){t.setTimeout(function(){e("all user data uploaded successfully")},2e3)})}function f(){}function m(){new Firebase(v);return n(function(e,n){t.setTimeout(function(){e({uid:"soaiu0-9283m-msoSA-2m3-srew",name:"Ian McAllister",email:"iemcallister@gmail.com",company:"",title:""})},2e3)})}var v="https://meetupplanner.firebaseio.com/",g={utf8_to_b64:i,b64_to_utf8:a,unixTimeToDateTime:r,dateTimeToUnixTime:o,createNewUser:s,LoginRegisteredUser:d,addNewUserToDatabase:l,addNewUserToRegUsersList:u,uploadUserData:c,downloadUserData:f,getUserBio:m};return g}function trafficValet(e,n){function t(t,i,a){angular.isDefined(i)?(t=t+"/"+i,angular.isDefined(a)&&(t=t+"/"+a,e.info("redirecting now to "+t),n.path(t)),e.info("redirecting now to "+t),n.path(t)):(e.info("redirecting now to "+t),n.path(t))}var i={redirectTo:t};return i}function userData(e,n,t){function i(){return D.uid}function a(){return D.name}function r(){return D.email}function o(){return D.company}function s(){return D.title}function l(){return D.dob}function u(e){return D[e]}function d(e){D.uid=uid}function c(e){D.name=e}function f(e){D.email=e}function m(e){D.company=e}function v(e){D.title=e}function g(e){D.dob=e}function p(e,n){D[e][n.id]=n}function h(e){c(e.name),f(e.email),m(e.company),v(e.title),g(e.dob),b()}function w(e,n){D[e][n.id].remove()}function U(e,n){c(e),f(n)}function b(){var e=t;e.uploadUserData(D)}function y(){var e=t;e.downloadUserData().then(function(e){D=e})}function E(){return""!==D.uid&&""!==D.name&&""!==D.email}function T(){var e=t;return n(function(n,t){E()?n({name:D.name,email:D.email,company:D.company,title:D.title,dob:D.dob}):e.getUserBio().then(function(e){n(e)})})}var D={uid:"",name:"",email:"",company:"",title:"",dob:0,hosting:{},pending:{},attending:{},completed:{}},$={getUID:i,getName:a,getEmail:r,getCompany:o,getTitle:s,getDOB:l,getUserEvents:u,setUID:d,setName:c,setEmail:f,setCompany:m,setTitle:v,setDOB:g,updateUserEvents:p,updateBio:h,removeUserEvents:w,loadPrimaries:U,writeAllToDatabase:b,readAllFromDatabase:y,isABio:E,loadBio:T};return $}function validation(e){function n(e){return angular.isUndefined(e)?"This is a required field":void 0}function t(e){return angular.isDefined(e)&&e.length<f?"Name should be at least "+f+" characters":void 0}function i(e){return angular.isDefined(e)&&!(e.length<m)}function a(e){return angular.isDefined(e)&&!(e.length>v)}function r(e){if(angular.isDefined(e)){var n=new RegExp("[!@#$%^&*]");return!!n.test(e)}return!1}function o(e){if(angular.isDefined(e)){var n=new RegExp("[0-9]","");return!!n.test(e)}return!1}function s(e){if(angular.isDefined(e)){var n=new RegExp("[a-z]","");return!!n.test(e)}return!1}function l(e){if(angular.isDefined(e)){var n=new RegExp("[A-Z]","");return!!n.test(e)}return!1}function u(e){if(angular.isDefined(e)){var n=new RegExp("[^A-z0-9!@#$%^&*]","");return!n.test(e)}return!1}function d(e){var n=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","");return n.test(e)?void 0:"Not a valid e-mail address"}function c(e){}var f=3,m=16,v=100,g={required:n,minNameLength:t,minPassLength:i,maxPassLength:a,atLeastOneSymbol:r,atLeastOneNumber:o,atLeastOneLowercase:s,atLeastOneUppercase:l,illegalCharacter:u,email:d,dateOfBirth:c};return g}function config(e){e.when("/",{templateUrl:"views/landingPage.htm",controller:"LandingPageController",controllerAs:"vm"}).when("/signup",{templateUrl:"views/newUserSignup.htm",controller:"NewUserSignUpController",controllerAs:"vm"}).when("/login",{templateUrl:"views/registeredUserLogin",controller:"RegUserLoginController",controllerAs:"vm"}).when("/userInformation/:uid?/:token?",{templateUrl:"views/userInformation.htm",controller:"UserInformationController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).when("/userEvents/:uid?/:token?",{templateUrl:"views/userEvents.htm",controller:"UserEventsController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).when("/event/:eventId?/:hostId?/:uid?/:token?",{templateUrl:"views/anEvent.htm",controller:"AnEventController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).otherwise({redirectTo:"/"})}function userAuthenticationService(e){e.isLoggedIn()}function toolBar(){function e(e,n,t,i){}function n(e){e.info("directive loading")}e.$inject=["scope","el","attr","ctrl"];var t={restrict:"AECM",templateUrl:"../views/directives/toolBar.directive.htm",replace:!0,scope:{},link:e,controller:n,controllerAs:"vm",bindToController:!0};return n.$inject=["$log"],t}config.$inject=["$routeProvider"],userAuthenticationService.$inject=["authService"],angular.module("meetUpEventApp",["ngRoute","ngTouch","firebase"]),angular.module("meetUpEventApp").controller("AnEventController",AnEventController),AnEventController.$inject=["$scope","$log","$location","$routeParams","$firebaseObject"],angular.module("meetUpEventApp").controller("LandingPageController",LandingPageController),LandingPageController.$inject=["$scope","$log","$location","$document","$window"],angular.module("meetUpEventApp").controller("MainController",MainController),MainController.$inject=["$log","$location","$document"],angular.module("meetUpEventApp").controller("NewUserSignUpController",NewUserSignUpController),NewUserSignUpController.$inject=["$scope","$log","validation","backendServices","trafficValet","userData"],angular.module("meetUpEventApp").controller("topMenuController",topMenuController),topMenuController.$inject=["$scope","$log","$location","$document","$window"],angular.module("meetUpEventApp").controller("UserEventsController",UserEventsController),UserEventsController.$inject=["$scope","$log","$location","$routeParams","$firebaseObject"],angular.module("meetUpEventApp").controller("UserInformationController",UserInformationController),UserInformationController.$inject=["$log","$document","userData","trafficValet"],angular.module("meetUpEventApp").factory("authService",authService),authService.$inject=["$log","$q","$location"],angular.module("meetUpEventApp").factory("backendServices",backendServices),backendServices.$inject=["$log","$q","$window"],angular.module("meetUpEventApp").factory("trafficValet",trafficValet),trafficValet.$inject=["$log","$location"],angular.module("meetUpEventApp").factory("userData",userData),userData.$inject=["$log","$q","backendServices"],angular.module("meetUpEventApp").factory("validation",validation),validation.$inject=["$log"],angular.module("meetUpEventApp").config(config),angular.module("meetUpEventApp").directive("toolBar",toolBar);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFuRXZlbnQuY29udHJvbGxlci5qcyIsIkxhbmRpbmdQYWdlLmNvbnRyb2xsZXIuanMiLCJNYWluLmNvbnRyb2xsZXIuanMiLCJOZXdVc2VyU2lnblVwLmNvbnRyb2xsZXIuanMiLCJUb3BNZW51LmNvbnRyb2xsZXIuanMiLCJVc2VyRXZlbnRzLmNvbnRyb2xsZXIuanMiLCJVc2VySW5mb3JtYXRpb24uY29udHJvbGxlci5qcyIsIkF1dGhTZXJ2aWNlLmZhY3RvcnkuanMiLCJCYWNrZW5kU2VydmljZXMuZmFjdG9yeS5qcyIsIlRyYWZmaWNWYWxldC5mYWN0b3J5LmpzIiwiVXNlckRhdGEuZmFjdG9yeS5qcyIsIlZhbGlkYXRpb24uZmFjdG9yeS5qcyIsInJvdXRlLWNvbmZpZy5qcyIsImFwcC5qcyIsIlRvb2xCYXIuZGlyZWN0aXZlLmpzIiwiYXBwLm1vZHVsZS5qcyJdLCJuYW1lcyI6WyJBbkV2ZW50Q29udHJvbGxlciIsIiRzY29wZSIsIiRsb2ciLCIkbG9jYXRpb24iLCIkcm91dGVQYXJhbXMiLCIkZmlyZWJhc2VPYmplY3QiLCJpbml0Iiwidm0iLCJ0ZW1wRGF0ZVRpbWUiLCJzdGFydCIsImVuZCIsIm5ld0d1ZXN0IiwibmFtZSIsImVtYWlsIiwiYWRkcmVzcyIsInZhbGlkIiwic3R5bGUiLCJjb2xvciIsInNob3dJZkhvc3QiLCJoaWRlSWZBdHRlbmRpbmciLCJtYW5hZ2VTZWN0aW9ucyIsMSwiYWN0aXZlIiwiY29tcGxldGUiLCJiYWNrZ3JvdW5kLWNvbG9yIiwyLDMsImNoZWNrRm9ySG9zdCIsImNoZWNrSWZHdWVzdElzQXR0ZW5kaW5nIiwib3BlbkFsbFNlY3Rpb25zIiwidXRmOF90b19iNjQiLCJzdHIiLCJidG9hIiwiYjY0X3RvX3V0ZjgiLCJhdG9iIiwiZGF0ZVRpbWVUb1VuaXhUaW1lIiwiZGF0ZVRpbWUiLCJEYXRlIiwicGFyc2UiLCJjbGVhbk5ld0d1ZXN0VmFyaWFibGUiLCJpbnZpdGVBUmVnaXN0ZXJlZFVzZXIiLCJ1aWQiLCJpbmZvIiwicmVmIiwiY2hpbGQiLCJldmVudElkIiwic2V0IiwiaWQiLCJldmVudFRpbWVzIiwiZXZlbnQiLCJob3N0IiwiZXJyb3IiLCJvbmNlIiwic25hcHNob3QiLCJjaGVja0ZvclBsYWNlaG9sZGVyIiwidmFsIiwidXBkYXRlZCIsInJlbW92ZSIsImVycm9yT2JqZWN0IiwiY29kZSIsImludml0ZUFuVW5yZWdpc3RlcmVkVXNlciIsInVzZXJLZXkiLCJhdXRoRGF0YSIsImdldEF1dGgiLCJob3N0SWQiLCJ1c2VyRXZlbnRzIiwib24iLCJhbGxHdWVzdHMiLCJhdHRlbmRpbmciLCJ0aGlzIiwiZmJVUkwiLCJGaXJlYmFzZSIsInJlZ2lzdGVyZWRVc2VycyIsInJlcXVpcmVkSW5wdXRzIiwic2V0VGVtcFRpbWUiLCJlbmRwb2ludCIsInVuaXhUaW1lVG9EYXRlVGltZSIsInVuaXhUaW1lIiwicGFyc2VJbnQiLCJzdWJtaXQiLCJiYWNrVG9Vc2VyRXZlbnRzIiwicGF0aCIsInRva2VuIiwiZXZlbnRSZWRpcmVjdCIsImV2ZW50SUQiLCJmdWxsUGF0aCIsImNoYW5nZVNlY3Rpb24iLCJ0YXJnZXRTZWN0aW9uIiwiaSIsInNhdmVFdmVudFRpbWUiLCJ0YXJnZXQiLCJndWVzdHNBcmVJbnZpdGVkIiwiZ3Vlc3RMaXN0IiwidmFsaWRhdGVHdWVzdEVtYWlsIiwiY29uc3RyYWludCIsIlJlZ0V4cCIsInRlc3QiLCJpc1NlY3Rpb25Db21wbGV0ZSIsInNhdmVBbmRBZHZhbmNlIiwiJHNhdmUiLCJ0aGVuIiwiYWRkR3Vlc3RUb0hvc3RzTGlzdCIsInN0YXR1cyIsInNhdmVFdmVudCIsImd1ZXN0V2lsbEF0dGVuZCIsInJlc3BvbnNlIiwiY3VycmVudFVzZXIiLCJ0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucyIsInJlbW92ZUF0dGVuZGluZ1VwZGF0ZWQiLCJpbnZpdGF0aW9ucyIsInRoaXNJbnZpdGF0aW9uIiwiaW52aXRhdGlvbiIsImF0dGVuZGluZ0xpc3QiLCJjdXJyZW50RGF0ZSIsInVwZGF0ZSIsInVwZGF0ZVVwZGF0ZWRQYXJhbSIsImFkZEludml0YXRpb25Ub0F0dGVuZGluZyIsIkxhbmRpbmdQYWdlQ29udHJvbGxlciIsIiRkb2N1bWVudCIsIiR3aW5kb3ciLCJyZWRpcmVjdCIsInVzZXJEYXRhIiwiY3VycmVudFVzZXJEYXRhIiwiJGFwcGx5Iiwic2hvd1JlcXVpcm5tZW50cyIsInZhbGlkTmV3TmFtZSIsInZhbGlkTmV3RW1haWwiLCJzZWN1cmVQYXNzd29yZCIsInNlY3VyZSIsInVubG9ja0NyZWF0ZVVzZXJCdG4iLCJ1c2FibGUiLCJjbGFzcyIsIm1lc3NhZ2UiLCJ2YWxpZFVzZXJFbWFpbCIsInZhbGlkVXNlclBhc3N3b3JkIiwidW5jbG9ja1VzZXJMb2dpbkJ0biIsInBhc3N3b3JkUmVxdWlybm1lbnRzIiwwLCJtZXQiLDQsNSw2LCJkaXNwbGF5UGFzc1JlcXMiLCJuZXdOYW1lIiwibmV3RW1haWwiLCJjaGVja05ld05hbWUiLCJsZW5ndGgiLCJvcGVuQ3JlYXRlVXNlckJ1dHRvbiIsImNoZWNrTmV3RW1haWwiLCJjaGVja1VzZXJFbWFpbCIsInVzZXJFbWFpbCIsIm9wZW5Vc2VyTG9naW5CdG4iLCJjaGVja05ld1Bhc3N3b3JkcyIsImNvbnN0cmFpbnRzIiwibmV3UGFzc3dvcmQiLCJjaGVja1VzZXJQYXNzd29yZHMiLCJ1c2VyUGFzc3dvcmQiLCJmaW5kIiwidmFsdWUiLCJjcmVhdGVOZXdVc2VyIiwiY3JlYXRlVXNlciIsInBhc3N3b3JkIiwidXNlcnNSZWYiLCJiaW8iLCJldmVudHMiLCJwZW5kaW5nIiwiaG9zdGluZyIsImNvbXBsZXRlZCIsImxvZ2luUmVnaXN0ZXJlZFVzZXIiLCJhdXRoV2l0aFBhc3N3b3JkIiwiYWxlcnRNZSIsImFsZXJ0Iiwib25SZXNpemVGdW5jdGlvbiIsImlucHV0VGV4dCIsImFuZ3VsYXIiLCJlbGVtZW50Iiwib3V0ZXJXaWR0aCIsIm91dGVySGVpZ2h0IiwiY3NzIiwiYWRkRXZlbnRMaXN0ZW5lciIsIkZhc3RDbGljayIsImF0dGFjaCIsImJvZHkiLCJiaW5kIiwicmVhZHkiLCJtYXN0ZXIiLCJ1c2VyIiwiY29weSIsInJlc2V0IiwiZm9ybSIsIiRzZXRQcmlzdGluZSIsIiRzZXRVbnRvdWNoZWQiLCJNYWluQ29udHJvbGxlciIsImxvZ291dCIsInVuYXV0aCIsIk5ld1VzZXJTaWduVXBDb250cm9sbGVyIiwidmFsaWRhdGlvbiIsImJhY2tlbmRTZXJ2aWNlcyIsInRyYWZmaWNWYWxldCIsInZlcmlmeVJlcXVpcm5tZW50cyIsImVycm9ycyIsInBhc3Nlc0FsbFRlc3RzIiwiaXNEZWZpbmVkIiwiaW5wdXRzIiwicmVxdWlyZWRGaWVsZHNEZWZpbmVkIiwicGFzc1JlcXMiLCJyZXEiLCJmdWxmaWxsZWQiLCJzaG93UmVxc0JveCIsInNpZ251cFZhbGlkYXRpb24iLCJoYXNOYW1lIiwicmVxdWlyZWQiLCJsb25nRW5vdWdoIiwibWluTmFtZUxlbmd0aCIsInB1c2giLCJqb2luIiwiaGFzRW1haWwiLCJpc0FuRW1haWwiLCJjaGVja05ld1Bhc3N3b3JkIiwiaGFzUGFzc3dvcmQiLCJzcGVjaWZpY1JlcXMiLCJtaW5QYXNzTGVuZ3RoIiwibWF4UGFzc0xlbmd0aCIsImF0TGVhc3RPbmVMb3dlcmNhc2UiLCJhdExlYXN0T25lVXBwZXJjYXNlIiwiYXRMZWFzdE9uZU51bWJlciIsImF0TGVhc3RPbmVTeW1ib2wiLCJpbGxlZ2FsQ2hhcmFjdGVyIiwiYW55RXJyb3JzIiwiZXhpdFBhc3N3b3JkIiwibmV3VXNlclNoZXJwYSIsIm5ld1VzZXJEYXRhIiwibG9hZFByaW1hcmllcyIsImFkZE5ld1VzZXJUb0RhdGFiYXNlIiwiYWRkTmV3VXNlclRvUmVnVXNlcnNMaXN0IiwicmVkaXJlY3RUbyIsInRvcE1lbnVDb250cm9sbGVyIiwiYXV0aERhdGFDYWxsYmFjayIsInByb3ZpZGVyIiwibG9nZ2VkSW4iLCJuYXZCYXJMb2dpblJlZ2lzdGVyZWRVc2VyIiwibmF2YmFyVXNlckVtYWlsIiwibmF2YmFyVXNlclBhc3MiLCJjbGljayIsIm5hdmJhcklucHV0cyIsIm9uQXV0aCIsIlVzZXJFdmVudHNDb250cm9sbGVyIiwiZ2VuZXJhdGVFdmVudElEIiwiZGF0ZSIsIm5vT2ZFdmVudHNBbHJlYWR5IiwiY3VycmVudFVzZXJCaW8iLCJzaG93RGVjbGluZSIsImN1cnJlbnRVc2VyTmFtZSIsImV2ZW50c0FyZUJlaW5nSG9zdGVkIiwiZXZlbnRGb3VuZCIsImV2ZW50SW52aXRhdGlvbnNQZW5kaW5nIiwiYXR0ZW5kaW5nRXZlbnRzIiwicGVyY2VudFJTVlBlZCIsInRvdGFsQXR0ZW5kaW5nIiwidG90YWxJbnZpdGVkIiwiZm9yRWFjaCIsImd1ZXN0IiwiaW52aXRlZCIsImFjY2VwdEV2ZW50SW52aXRhdGlvbiIsInJlZGlyZWN0VG9Ib3N0ZWRFdmVudCIsInJlZGlyZWN0VG8zcmRQYXJ0eUV2ZW50IiwiaW52aXRlU3RhdHVzIiwiY3JlYXRlTmV3RXZlbnQiLCJPYmplY3QiLCJrZXlzIiwiVXNlckluZm9ybWF0aW9uQ29udHJvbGxlciIsImluaXRpYWxpemUiLCJsb2FkQmlvIiwiZG9iIiwidGVtcEJpcnRoZGF5IiwidmlldyIsImRhdGFUb1NhdmUiLCJpc0RhdGEiLCJidG5Nc3NnIiwicHJvY2VlZEJ0biIsImNoZWNrVmFsdWVzIiwiaXNVbmRlZmluZWQiLCJjb21wYW55IiwidGl0bGUiLCJ1cGRhdGVET0IiLCJzYXZlQW5kTW92ZU9uIiwidXNlckluZm9TaGVycGEiLCJ1cGRhdGVCaW8iLCJhdXRoU2VydmljZSIsIiRxIiwiaXNMb2dnZWRJbiIsImFsbEF1dGhTZXJ2aWNlcyIsInJlc29sdmUiLCJyZWplY3QiLCJzZXRUaW1lb3V0IiwiYXBwIiwiTG9naW5SZWdpc3RlcmVkVXNlciIsInVwbG9hZFVzZXJEYXRhIiwiYWxsVXNlckRhdGEiLCJkb3dubG9hZFVzZXJEYXRhIiwiZ2V0VXNlckJpbyIsImFsbEJhY2tlbmRTZXJ2aWNlcyIsInBhcmFtMSIsInBhcmFtMiIsImFsbFRyYWZmaWNDb250cm9scyIsImdldFVJRCIsImdldE5hbWUiLCJnZXRFbWFpbCIsImdldENvbXBhbnkiLCJnZXRUaXRsZSIsImdldERPQiIsImdldFVzZXJFdmVudHMiLCJ0eXBlIiwic2V0VUlEIiwic2V0TmFtZSIsInNldEVtYWlsIiwic2V0Q29tcGFueSIsInNldFRpdGxlIiwic2V0RE9CIiwidXBkYXRlVXNlckV2ZW50cyIsInVzZXJCaW8iLCJ3cml0ZUFsbFRvRGF0YWJhc2UiLCJyZW1vdmVVc2VyRXZlbnRzIiwiZGIiLCJyZWFkQWxsRnJvbURhdGFiYXNlIiwiaXNBQmlvIiwibWluaW11bU5hbWVMZW5ndGgiLCJtaW5pbXVtUGFzc0xlbmd0aCIsIm1heGltdW1QYXNzTGVuZ3RoIiwiZGF0ZU9mQmlydGgiLCJhbGxWYWxpZGF0aW9ucyIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwid2hlbiIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsImNvbnRyb2xsZXJBcyIsInVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2UiLCJvdGhlcndpc2UiLCJ0b29sQmFyIiwibGlua0Z1bmMiLCJzY29wZSIsImVsIiwiYXR0ciIsImN0cmwiLCJUb29sQmFyQ29udHJvbGxlciIsIiRpbmplY3QiLCJkaXJlY3RpdmUiLCJyZXN0cmljdCIsInJlcGxhY2UiLCJsaW5rIiwiYmluZFRvQ29udHJvbGxlciIsIm1vZHVsZSIsImZhY3RvcnkiXSwibWFwcGluZ3MiOiJBQU9BLFFBQUFBLG1CQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQWNBLFFBQUFDLEtBRUFDLEVBQUFDLGNBQUFDLE1BQUEsR0FBQUMsSUFBQSxJQUNBSCxFQUFBSSxVQUFBQyxLQUFBLEdBQUFDLE9BQUFDLFFBQUEsR0FBQUMsT0FBQSxFQUFBQyxPQUFBQyxNQUFBLE1BQ0FWLEVBQUFXLFlBQUEsRUFDQVgsRUFBQVksaUJBQUEsRUFFQVosRUFBQWEsZ0JBQ0FDLEdBQUFDLFFBQUEsRUFBQUMsVUFBQSxFQUFBUCxPQUFBQyxNQUFBLFFBQUFPLG1CQUFBLFdBQ0FDLEdBQUFILFFBQUEsRUFBQUMsVUFBQSxFQUFBUCxPQUFBQyxNQUFBLFFBQUFPLG1CQUFBLFNB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Tix1QkFFQUEsc0JBQUFxTyxTQUFBLFNBQUEsT0FBQSxZQUFBLFlBQUEsV0NKQTVLLFFBQ0FrTCxPQUFBLGtCQUNBakIsV0FBQSxpQkFBQS9JLGdCQUVBQSxlQUFBMEosU0FBQSxPQUFBLFlBQUEsYUNKQTVLLFFBQ0FrTCxPQUFBLGtCQUNBakIsV0FBQSwwQkFBQTVJLHlCQUVBQSx3QkFBQXVKLFNBQUEsU0FBQSxPQUFBLGFBQUEsa0JBQUEsZUFBQSxZQ0pBNUssUUFDQWtMLE9BQUEsa0JBQ0FqQixXQUFBLG9CQUFBbkcsbUJBRUFBLGtCQUFBOEcsU0FBQSxTQUFBLE9BQUEsWUFBQSxZQUFBLFdDSkE1SyxRQUNBa0wsT0FBQSxrQkFDQWpCLFdBQUEsdUJBQUF6RixzQkFFQUEscUJBQUFvRyxTQUFBLFNBQUEsT0FBQSxZQUFBLGVBQUEsbUJDSkE1SyxRQUNBa0wsT0FBQSxrQkFDQWpCLFdBQUEsNEJBQUFqRSwyQkFFQUEsMEJBQUE0RSxTQUFBLE9BQUEsWUFBQSxXQUFBLGdCQ0pBNUssUUFDQWtMLE9BQUEsa0JBQ0FDLFFBQUEsY0FBQWpFLGFBRUFBLFlBQUEwRCxTQUFBLE9BQUEsS0FBQSxhQ0pBNUssUUFDQWtMLE9BQUEsa0JBQ0FDLFFBQUEsa0JBQUE1SixpQkFFQUEsZ0JBQUFxSixTQUFBLE9BQUEsS0FBQSxXQ0pBNUssUUFDQWtMLE9BQUEsa0JBQ0FDLFFBQUEsZUFBQTNKLGNBRUFBLGFBQUFvSixTQUFBLE9BQUEsYUNKQTVLLFFBQ0FrTCxPQUFBLGtCQUNBQyxRQUFBLFdBQUF4TyxVQUVBQSxTQUFBaU8sU0FBQSxPQUFBLEtBQUEsbUJDSkE1SyxRQUNBa0wsT0FBQSxrQkFDQUMsUUFBQSxhQUFBN0osWUFFQUEsV0FBQXNKLFNBQUEsUUNKQTVLLFFBQ0FrTCxPQUFBLGtCQUNBckIsT0FBQUEsUUVLQTdKLFFBQ0FrTCxPQUFBLGtCQUNBTCxVQUFBLFVBQUFSIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ0FuRXZlbnRDb250cm9sbGVyJywgQW5FdmVudENvbnRyb2xsZXIpO1xuXG5BbkV2ZW50Q29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZycsICckbG9jYXRpb24nLCAnJHJvdXRlUGFyYW1zJywgJyRmaXJlYmFzZU9iamVjdCddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIEFuRXZlbnRDb250cm9sbGVyKCRzY29wZSwgJGxvZywgJGxvY2F0aW9uLCAkcm91dGVQYXJhbXMsICRmaXJlYmFzZU9iamVjdCkge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHR2YXIgZmJVUkwgPSAnaHR0cHM6Ly9tZWV0dXBwbGFubmVyLmZpcmViYXNlaW8uY29tLyc7XG5cdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHR2YXIgdXNlckV2ZW50cyA9IHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCgkcm91dGVQYXJhbXMuaG9zdElkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ2hvc3RpbmcnKS5jaGlsZCgkcm91dGVQYXJhbXMuZXZlbnRJZClcblxuXHQvL2JpbmRpbmcgdG8gdGhlIGV2ZW50XG5cdHZtLmV2ZW50ID0gJGZpcmViYXNlT2JqZWN0KHVzZXJFdmVudHMpXG5cdHZhciByZWdpc3RlcmVkVXNlcnMgPSAkZmlyZWJhc2VPYmplY3QocmVmLmNoaWxkKCdVaWRzJykpO1xuXG5cdC8vcmVxdWlyZWQgZmllbGRzXG5cdHZtLnJlcXVpcmVkSW5wdXRzID0gWycnLCAnJywgJycsICcnLCAnJywgJycsICcnLCAnJywgJyddO1xuXG5cdC8vTG9jYWwgTWV0aG9kc1xuXHRmdW5jdGlvbiBpbml0KCkge1xuXHRcdC8vZGVjbGFyZSBhbmQgaW5pdGlhbGl6ZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2bS50ZW1wRGF0ZVRpbWUgPSB7c3RhcnQ6ICcnLCBlbmQ6ICcnfTtcblx0XHR2bS5uZXdHdWVzdCA9IHtuYW1lOiAnJywgZW1haWw6e2FkZHJlc3M6JycsIHZhbGlkOmZhbHNlLCBzdHlsZTp7Y29sb3I6Jyd9fX07XG5cdFx0dm0uc2hvd0lmSG9zdCA9IGZhbHNlO1xuXHRcdHZtLmhpZGVJZkF0dGVuZGluZyA9IHRydWU7XG5cdFx0Ly9zZWN0aW9uc1xuXHRcdHZtLm1hbmFnZVNlY3Rpb25zID0ge1xuXHRcdFx0MToge2FjdGl2ZTogdHJ1ZSwgY29tcGxldGU6IGZhbHNlLCBzdHlsZTp7Y29sb3I6J2JsYWNrJywgJ2JhY2tncm91bmQtY29sb3InOid5ZWxsb3cnfX0sXG5cdFx0XHQyOiB7YWN0aXZlOiBmYWxzZSwgY29tcGxldGU6IGZhbHNlLCBzdHlsZTp7Y29sb3I6J3doaXRlJywgJ2JhY2tncm91bmQtY29sb3InOidncmF5J319LFxuXHRcdFx0Mzoge2FjdGl2ZTogZmFsc2UsIGNvbXBsZXRlOiBmYWxzZSwgc3R5bGU6e2NvbG9yOid3aGl0ZScsICdiYWNrZ3JvdW5kLWNvbG9yJzonZ3JheSd9fVxuXHRcdH07XG5cblx0XHQvL2NoZWNrIHVzZXIgdG8gZGV0ZXJtaW5lIHN0YXRlXG5cdFx0Y2hlY2tGb3JIb3N0KCk7XG5cdFx0Y2hlY2tJZkd1ZXN0SXNBdHRlbmRpbmcoKTtcblxuXHRcdC8vb3BlbiB1cCBzZWN0aW9uc1xuXHRcdGlmKCF2bS5zaG93SWZIb3N0KSBvcGVuQWxsU2VjdGlvbnMoKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHV0ZjhfdG9fYjY0KHN0cikge1xuXHRcdHJldHVybiBidG9hKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiBiNjRfdG9fdXRmOChzdHIpIHtcbiAgICBcdHJldHVybiBhdG9iKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH1cblxuXHRmdW5jdGlvbiBjbGVhbk5ld0d1ZXN0VmFyaWFibGUoKSB7XG5cdFx0dm0ubmV3R3Vlc3QgPSB7bmFtZTogJycsIGVtYWlsOnthZGRyZXNzOicnLCB2YWxpZDpmYWxzZSwgc3R5bGU6e2NvbG9yOicnfX19O1xuXHR9XG5cblx0ZnVuY3Rpb24gaW52aXRlQVJlZ2lzdGVyZWRVc2VyKHVpZCkge1xuXHRcdCRsb2cuaW5mbygnYWRkaW5nIHRoZW0gdG8gdGhlIHJlZ2lzdGVyZWQgdXNlcnMgbGlzdCAnICsgdWlkKTtcblx0XHQvL3NldCB0aGUgbmV3IGV2ZW50XG5cdFx0cmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdwZW5kaW5nJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJHJvdXRlUGFyYW1zLmV2ZW50SWQpLnNldCh7XG5cdFx0XHRpZDogJHJvdXRlUGFyYW1zLmV2ZW50SWQsXG5cdFx0XHRldmVudFRpbWVzOiB7XG5cdFx0XHRcdHN0YXJ0OiB2bS5ldmVudC5ldmVudFRpbWVzLnN0YXJ0LFxuXHRcdFx0XHRlbmQ6IHZtLmV2ZW50LmV2ZW50VGltZXMuZW5kXG5cdFx0XHR9LFxuXHRcdFx0bmFtZTogdm0uZXZlbnQubmFtZSxcblx0XHRcdGhvc3Q6ICRyb3V0ZVBhcmFtcy51aWRcblx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbygndGhlcmUgd2FzIGFuIGVycm9yJyArIGVycm9yKTtcblx0XHR9KTtcblx0XHQvL2lmIHRoZXJlIHdhcyBhbiB1cGRhdGVkIHBsYWNlIGhvbGRlciwgcmVtb3ZlIGl0XG5cdFx0cmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdwZW5kaW5nJykub25jZSgndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0dmFyIGNoZWNrRm9yUGxhY2Vob2xkZXIgPSBzbmFwc2hvdC52YWwoKVxuXHRcdFx0JGxvZy5pbmZvKHNuYXBzaG90LnZhbCgpKTtcblxuXHRcdFx0aWYoY2hlY2tGb3JQbGFjZWhvbGRlci51cGRhdGVkKSB7XG5cdFx0XHRcdCRsb2cuaW5mbygnZGVsZXRpbmcgdXBkYXRlZCcpO1xuXHRcdFx0XHRyZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ3BlbmRpbmcnKS5jaGlsZCgndXBkYXRlZCcpLnJlbW92ZShmdW5jdGlvbihlcnJvck9iamVjdCkge1xuXHRcdFx0XHRcdGlmKGVycm9yT2JqZWN0KSAkbG9nLmluZm8oXCJEZWxldGluZyBmYWlsZWQ6IFwiICsgZXJyb3JPYmplY3QuY29kZSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlICRsb2cuaW5mbygnbm90aGluZyB0byBkbycpO1xuXG5cdFx0fSwgZnVuY3Rpb24oZXJyb3JPYmplY3QpIHtcblx0XHRcdGlmKGVycm9yT2JqZWN0KSAkbG9nLmluZm8oXCJUaGUgcmVhZCBmYWlsZWQ6IFwiICsgZXJyb3JPYmplY3QuY29kZSk7XG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBpbnZpdGVBblVucmVnaXN0ZXJlZFVzZXIodXNlcktleSkge1xuXHRcdCRsb2cuaW5mbygnYWRkaW5nIHRoZW0gdG8gdGhlIFVOUkVHSVNURVJFRCB1c2VycyBsaXN0ICcgKyB1c2VyS2V5KTtcblx0XHRyZWYuY2hpbGQoJ1VucmVnaXN0ZXJlZFVzZXJzJykuY2hpbGQodXNlcktleSkuY2hpbGQoJ3BlbmRpbmcnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS5jaGlsZCgkcm91dGVQYXJhbXMuZXZlbnRJZCkuc2V0KHtcblx0XHRcdGlkOiAkcm91dGVQYXJhbXMuZXZlbnRJZCxcblx0XHRcdGhvc3Q6ICRyb3V0ZVBhcmFtcy51aWQsXG5cdFx0XHRldmVudFRpbWVzOiB7XG5cdFx0XHRcdHN0YXJ0OiB2bS5ldmVudC5ldmVudFRpbWVzLnN0YXJ0LFxuXHRcdFx0XHRlbmQ6IHZtLmV2ZW50LmV2ZW50VGltZXMuZW5kXG5cdFx0XHR9LFxuXHRcdFx0bmFtZTogdm0uZXZlbnQubmFtZVxuXHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKCd0aGVyZSB3YXMgYW4gZXJyb3InICsgZXJyb3IpO1xuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gY2hlY2tGb3JIb3N0KCkge1xuXHRcdC8vY2hlY2sgZXZlbnQgaG9zdFxuXHRcdHZhciBhdXRoRGF0YSA9IHJlZi5nZXRBdXRoKCk7XG5cblx0XHRpZihhdXRoRGF0YS51aWQgPT0gJHJvdXRlUGFyYW1zLmhvc3RJZCkge1xuXHRcdFx0JGxvZy5pbmZvKCdpcyB0aGUgaG9zdCcpO1xuXHRcdFx0dm0uc2hvd0lmSG9zdCA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCRsb2cuaW5mbygnbm90IHRoZSBob3N0Jyk7XG5cdFx0XHR2bS5zaG93SWZIb3N0ID0gZmFsc2U7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gY2hlY2tJZkd1ZXN0SXNBdHRlbmRpbmcoKSB7XG5cdFx0aWYoIXZtLnNob3dJZkhvc3QpIHtcblx0XHRcdCRsb2cuaW5mbygnY2hlY2sgZ3Vlc3QgYXR0ZW5kYW5jZScpO1xuXHRcdFx0dXNlckV2ZW50cy5jaGlsZCgnZ3Vlc3RMaXN0Jykub24oJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdFx0dmFyIGFsbEd1ZXN0cyA9IHNuYXBzaG90LnZhbCgpO1xuXHRcdFx0XHR2bS5oaWRlSWZBdHRlbmRpbmcgPSAhYWxsR3Vlc3RzWyRyb3V0ZVBhcmFtcy51aWRdLmF0dGVuZGluZztcblx0XHRcdFx0XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBvcGVuQWxsU2VjdGlvbnMoKSB7XG5cdFx0dm0ubWFuYWdlU2VjdGlvbnNbMV0uYWN0aXZlID0gdHJ1ZTtcblx0XHR2bS5tYW5hZ2VTZWN0aW9uc1syXS5hY3RpdmUgPSB0cnVlO1xuXHRcdHZtLm1hbmFnZVNlY3Rpb25zWzNdLmFjdGl2ZSA9IHRydWU7XG5cdH1cblxuXHRmdW5jdGlvbiBzYXZlRXZlbnQoKSB7XG5cdFx0dm0uZXZlbnQuJHNhdmUoKS50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdFx0JGxvZy5pbmZvKCdldmVudCBzYXZlZCcpO1xuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2Vycm9yISAnICsgZXJyb3IpO1xuXHRcdH0pO1xuXHR9XG5cblx0Ly92aWV3IE1ldGhvZFxuXHR2bS5zZXRUZW1wVGltZSA9IGZ1bmN0aW9uKGVuZHBvaW50KSB7XG5cdFx0aWYoZW5kcG9pbnQgPT0gJ3N0YXJ0Jykgdm0udGVtcERhdGVUaW1lLnN0YXJ0ID0gbmV3IERhdGUoKTtcblx0XHRpZihlbmRwb2ludCA9PSAnZW5kJykgdm0udGVtcERhdGVUaW1lLmVuZCA9IG5ldyBEYXRlKCk7XG5cdH1cblxuXHR2bS51bml4VGltZVRvRGF0ZVRpbWUgPSBmdW5jdGlvbiAodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fTtcblxuXHR2bS5kYXRlVGltZVRvVW5peFRpbWUgPSBmdW5jdGlvbiAoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH07XG5cblx0dm0uc3VibWl0ID0gZnVuY3Rpb24oKSB7XG5cdFx0JGxvZy5pbmZvKCdzdWJtaXR0aW5nIHRoZSBmb3JtIG5vdyEnKTtcblx0fVxuXG5cdHZtLmJhY2tUb1VzZXJFdmVudHMgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9jYXRpb24ucGF0aCgnL3VzZXJFdmVudHMvJyArICRyb3V0ZVBhcmFtcy51aWQgKyAnLycgKyAkcm91dGVQYXJhbXMudG9rZW4pO1xuXHR9XG5cblx0dm0uZXZlbnRSZWRpcmVjdCA9IGZ1bmN0aW9uKHBhdGgsIGV2ZW50SUQpIHtcblx0XHR2YXIgZnVsbFBhdGggPSBwYXRoICsgJy8nICsgJHJvdXRlUGFyYW1zLnVpZCArICcvJyArICRyb3V0ZVBhcmFtcy50b2tlbjtcblx0XHQvL3JlZGlyZWN0XG5cdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyB0bzogJyArIGZ1bGxQYXRoKTtcblx0XHQkbG9jYXRpb24ucGF0aChmdWxsUGF0aCk7XG5cdH1cblxuXHR2bS5jaGFuZ2VTZWN0aW9uID0gZnVuY3Rpb24odGFyZ2V0U2VjdGlvbikge1xuXHRcdCRsb2cuaW5mbygnYXJlIHdlIGhlcmUnKTtcblx0XHRmb3IoaSA9IDE7IGkgPD0zOyBpKyspIHtcblx0XHRcdGlmKGk9PXRhcmdldFNlY3Rpb24pIHtcblx0XHRcdFx0dm0ubWFuYWdlU2VjdGlvbnNbaV0uYWN0aXZlID0gdHJ1ZTtcblx0XHRcdFx0dm0ubWFuYWdlU2VjdGlvbnNbaV0uc3R5bGVbJ2JhY2tncm91bmQtY29sb3InXSA9J3llbGxvdyc7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLnN0eWxlWydjb2xvciddID0nYmxhY2snO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0ubWFuYWdlU2VjdGlvbnNbaV0uYWN0aXZlID0gZmFsc2U7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLnN0eWxlWydiYWNrZ3JvdW5kLWNvbG9yJ10gPSdncmF5Jztcblx0XHRcdFx0dm0ubWFuYWdlU2VjdGlvbnNbaV0uc3R5bGVbJ2NvbG9yJ10gPSd3aGl0ZSc7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0dm0uc2F2ZUV2ZW50VGltZSA9IGZ1bmN0aW9uKGRhdGVUaW1lLCB0YXJnZXQpIHtcblx0XHQvL2lmIHRoaXMgZXZlbnQgZGlkbid0IGhhdmUgYSBzdGFydCB0aW1lLCBjcmVhdGUgaXRcblx0XHRpZighdm0uZXZlbnQuZXZlbnRUaW1lcykgeyBcblx0XHRcdHZtLmV2ZW50LmV2ZW50VGltZXMgPSB7c3RhcnQ6ICcnLCBlbmQ6ICcnfTtcblx0XHRcdHZtLmV2ZW50LmV2ZW50VGltZXMuc3RhcnQgPSB2bS5kYXRlVGltZVRvVW5peFRpbWUodm0udGVtcERhdGVUaW1lLnN0YXJ0KTsgXG5cdFx0XHR2bS5ldmVudC5ldmVudFRpbWVzLmVuZCA9IHZtLmRhdGVUaW1lVG9Vbml4VGltZSh2bS50ZW1wRGF0ZVRpbWUuZW5kKTtcblx0XHR9XG5cblx0XHRpZigodm0udGVtcERhdGVUaW1lLmVuZCA8IHZtLnRlbXBEYXRlVGltZS5zdGFydCkgJiYgdGFyZ2V0ID09ICdzdGFydCcpIHZtLnRlbXBEYXRlVGltZS5lbmQgPSB2bS50ZW1wRGF0ZVRpbWUuc3RhcnQ7XG5cdFx0aWYodGFyZ2V0ID09ICdzdGFydCcpIHZtLmV2ZW50LmV2ZW50VGltZXMuc3RhcnQgPSB2bS5kYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpO1xuXHRcdGlmKHRhcmdldCA9PSAnZW5kJykgdm0uZXZlbnQuZXZlbnRUaW1lcy5lbmQgPSB2bS5kYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpO1xuXHR9XG5cblx0dm0uZ3Vlc3RzQXJlSW52aXRlZCA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHZtLmV2ZW50Lmd1ZXN0TGlzdCkgcmV0dXJuIHRydWU7XG5cdFx0ZWxzZSByZXR1cm4gZmFsc2U7XG5cdH1cblxuXHR2bS52YWxpZGF0ZUd1ZXN0RW1haWwgPSBmdW5jdGlvbigpIHtcblx0XHQvL2lmIHRoZXJlIGlzIGFuIGVtYWlsIGFkZHJlc3Ncblx0XHRpZih2bS5uZXdHdWVzdC5lbWFpbC5hZGRyZXNzKSB7XG5cdFx0XHQvL2NoZWNrIHZhbGlkaXR5XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKD86XFwuW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKykqQCg/OlthLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cXC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cIiwgXCJcIik7XG5cblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2bS5uZXdHdWVzdC5lbWFpbC5hZGRyZXNzKSkge1xuXHRcdFx0XHR2bS5uZXdHdWVzdC5lbWFpbC52YWxpZCA9IHRydWU7XG5cdFx0XHRcdHZtLm5ld0d1ZXN0LmVtYWlsLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0ubmV3R3Vlc3QuZW1haWwudmFsaWQgPSBmYWxzZTtcblx0XHRcdFx0dm0ubmV3R3Vlc3QuZW1haWwuc3R5bGUgPSB7Y29sb3I6Jyd9O1xuXHRcdFx0fVx0XHRcdFxuXHRcdH1cblx0fVxuXG5cdHZtLmlzU2VjdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24oKSB7XG5cdFx0Zm9yKGk9MDtpPDg7aSsrKSB7XG5cdFx0XHQkbG9nLmluZm8odm0ucmVxdWlyZWRJbnB1dHNbaV0pO1xuXHRcdH1cblx0fVxuXG5cdHZtLnNhdmVBbmRBZHZhbmNlID0gZnVuY3Rpb24oKSB7XG5cdFx0dm0uZXZlbnQuJHNhdmUoKS50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdFx0JGxvZy5pbmZvKCdldmVudCBzYXZlZCcpO1xuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2Vycm9yISAnICsgZXJyb3IpO1xuXHRcdH0pO1xuXG5cdFx0Ly9jaGVjayBmb3IgY29tcGxldGVuZXNcblx0XHR2bS5pc1NlY3Rpb25Db21wbGV0ZSgpO1xuXG5cdFx0aWYodm0ubWFuYWdlU2VjdGlvbnNbMV0uY29tcGxldGUgPT0gdHJ1ZSAmJiB2bS5tYW5hZ2VTZWN0aW9uc1syXS5jb21wbGV0ZSA9PSB0cnVlICYmIHZtLm1hbmFnZVNlY3Rpb25zWzNdLmNvbXBsZXRlID09IHRydWUpIHtcblx0XHRcdHZtLmV2ZW50UmVkaXJlY3QoJy91c2VyRXZlbnRzJywgJHJvdXRlUGFyYW1zLnVpZCk7XG5cdFx0fSBlbHNlIGlmICh2bS5tYW5hZ2VTZWN0aW9uc1sxXS5hY3RpdmUpIHZtLmNoYW5nZVNlY3Rpb24oMik7XG5cdFx0ZWxzZSBpZiAodm0ubWFuYWdlU2VjdGlvbnNbMl0uYWN0aXZlKSB2bS5jaGFuZ2VTZWN0aW9uKDMpO1xuXHRcdGVsc2UgaWYgKHZtLm1hbmFnZVNlY3Rpb25zWzNdLmFjdGl2ZSkgdm0uY2hhbmdlU2VjdGlvbigxKTtcblx0fVxuXG5cdHZtLmFkZEd1ZXN0VG9Ib3N0c0xpc3QgPSBmdW5jdGlvbigpIHtcblx0XHQvL2RlY2xhcmUgYW5kIGluaXRpYWxpemUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIHVzZXJLZXkgPSB1dGY4X3RvX2I2NCh2bS5uZXdHdWVzdC5lbWFpbC5hZGRyZXNzKTtcblxuXHRcdC8vaWYgZW1haWwgaXMgdmFsaWQgYW5kIG5hbWUgZXhpc3RzXG5cdFx0aWYgKHZtLm5ld0d1ZXN0Lm5hbWUgJiYgdm0ubmV3R3Vlc3QuZW1haWwudmFsaWQpIHtcblx0XHRcdC8vaXMgdGhlcmUgYSBndWVzdCBsaXN0IGFscmVhZHk/IElmIG5vdCBjcmVhdGUgb25lXG5cdFx0XHRpZighdm0uZXZlbnQuZ3Vlc3RMaXN0KSB7XG5cdFx0XHRcdHZtLmV2ZW50Lmd1ZXN0TGlzdCA9IHt9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9pZiBzbyBpcyB0aGlzIHBlcnNvbiBhbHJlYWR5IG9uIHRoZSBsaXN0P1xuXHRcdFx0XHR2YXIgaSA9MDtcblx0XHRcdFx0d2hpbGUodm0uZXZlbnQuZ3Vlc3RMaXN0W2ldKSB7XG5cdFx0XHRcdFx0aWYodm0uZXZlbnQuZ3Vlc3RMaXN0W2ldLmVtYWlsID09IGI2NF90b191dGY4KHVzZXJLZXkpKSB7XG5cdFx0XHRcdFx0XHQkbG9nLmluZm8oJ1RoaXMgZ3Vlc3QgaXMgYWxyZWFkeSBvbiB0aGUgbGlzdCcpO1xuXHRcdFx0XHRcdFx0Y2xlYW5OZXdHdWVzdFZhcmlhYmxlKCk7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGkrKztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvL2lzIHRoaXMgZ3Vlc3QgYSByZWdpc3RlcmVkIHVzZXI/XG5cdFx0XHRpZihyZWdpc3RlcmVkVXNlcnNbdXNlcktleV0pIHtcblx0XHRcdFx0Ly9pcyB0aGUgcmVnaXN0ZXJlZCB1c2VyIHRoZSBob3N0P1xuXHRcdFx0XHRpZihyZWdpc3RlcmVkVXNlcnNbdXNlcktleV0gPT0gJHJvdXRlUGFyYW1zLnVpZCkge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygndHJpZWQgdG8gcmVnaXN0ZXIgdGhlIGhvc3QnKTtcblx0XHRcdFx0XHRjbGVhbk5ld0d1ZXN0VmFyaWFibGUoKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0Ly9hZGQgdGhlbSB0byB0aGUgYXBwcm9wcmlhdGUgcmVnaXN0ZXJlZCB1c2VycycgbGlzdCBvZiBldmVudCBpbnZpdGVzXG5cdFx0XHRcdFx0aW52aXRlQVJlZ2lzdGVyZWRVc2VyKHJlZ2lzdGVyZWRVc2Vyc1t1c2VyS2V5XSk7XG5cblx0XHRcdFx0XHQvL2FkZCB0aGUgZ3Vlc3QgdG8gdGhlIGxpc3Rcblx0XHRcdFx0XHR2bS5ldmVudC5ndWVzdExpc3RbcmVnaXN0ZXJlZFVzZXJzW3VzZXJLZXldXSA9IHtcblx0XHRcdFx0XHRcdGF0dGVuZGluZzogZmFsc2UsIFxuXHRcdFx0XHRcdFx0c3RhdHVzOidwZW5kaW5nJywgXG5cdFx0XHRcdFx0XHRuYW1lOiB2bS5uZXdHdWVzdC5uYW1lLCBcblx0XHRcdFx0XHRcdGVtYWlsOnZtLm5ld0d1ZXN0LmVtYWlsLmFkZHJlc3MsXG5cdFx0XHRcdFx0fTtcdFx0XHRcdFx0XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vYWRkIHRoZSBpbnZpdGUgdG8gdGhlIG5vbi1yZWdpc3RlcmVkIHVzZXJzIGxpc3Qgb2YgZXZlbnQgaW52aXRlc1xuXHRcdFx0XHRpbnZpdGVBblVucmVnaXN0ZXJlZFVzZXIodXNlcktleSk7XG5cblx0XHRcdFx0Ly9hZGQgdGhlIGd1ZXN0IHRvIHRoZSBsaXN0XG5cdFx0XHRcdHZtLmV2ZW50Lmd1ZXN0TGlzdFt1c2VyS2V5XSA9IHtcblx0XHRcdFx0XHRcdGF0dGVuZGluZzogZmFsc2UsIFxuXHRcdFx0XHRcdFx0c3RhdHVzOidwZW5kaW5nJywgXG5cdFx0XHRcdFx0XHRuYW1lOiB2bS5uZXdHdWVzdC5uYW1lLCBcblx0XHRcdFx0XHRcdGVtYWlsOnZtLm5ld0d1ZXN0LmVtYWlsLmFkZHJlc3MsXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cblxuXHRcdFx0Ly9zYXZlIHRoZSBldmVudFxuXHRcdFx0dm0uc2F2ZUV2ZW50KCk7XG5cdFx0XHQvL2NsZWFyIHRoZSB0ZW1wIHZhbHVlc1xuXHRcdFx0Y2xlYW5OZXdHdWVzdFZhcmlhYmxlKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCRsb2cuaW5mbygneW91IGRpZG5cXCd0IGVudGVyIGEgbmFtZSBhbmQgb3IgZW1haWwnKTtcblx0XHR9XG5cdH1cblxuXHR2bS5ndWVzdFdpbGxBdHRlbmQgPSBmdW5jdGlvbihyZXNwb25zZSkge1xuXHRcdHZhciBjdXJyZW50VXNlciA9IHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS5jaGlsZCgnZXZlbnRzJyk7XG5cdFx0dmFyIHRvdGFsUGVuZGluZ0ludml0YXRpb25zID0gMDtcblx0XHR2YXIgcmVtb3ZlQXR0ZW5kaW5nVXBkYXRlZCA9IGZhbHNlO1xuXHRcdFxuXHRcdC8vY2hhbmdlIGF0dGVuZGluZyB0byB0cnVlIGluIGhvc3QncyBndWVzdExpc3Rcblx0XHR2bS5ldmVudC5ndWVzdExpc3RbJHJvdXRlUGFyYW1zLnVpZF0uYXR0ZW5kaW5nID0gcmVzcG9uc2U7XG5cdFx0Ly9jaGFuZ2Ugc3RhdHVzIHRvICdhdHRlbmRpbmcnIGluIGhvc3QncyBndWVzdExpc3Rcblx0XHR2bS5ldmVudC5ndWVzdExpc3RbJHJvdXRlUGFyYW1zLnVpZF0uc3RhdHVzID0gJ2F0dGVuZGluZyc7XG5cdFx0XG5cdFx0Ly9nZXQgdGhlIGludml0YXRpb24gZGV0YWlsc1xuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdwZW5kaW5nJykub24oJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhbGJlXG5cdFx0XHR2YXIgaW52aXRhdGlvbnMgPSBzbmFwc2hvdC52YWwoKTtcblx0XHRcdC8vbG9nIHN0YXJ0aW5nIHZhbHVlc1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zKTtcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9uc1skcm91dGVQYXJhbXMuaG9zdElkXSk7XG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnNbJHJvdXRlUGFyYW1zLmhvc3RJZF1bJHJvdXRlUGFyYW1zLmV2ZW50SWRdKTtcblxuXHRcdFx0dmFyIHRoaXNJbnZpdGF0aW9uID0gaW52aXRhdGlvbnNbJHJvdXRlUGFyYW1zLmhvc3RJZF1bJHJvdXRlUGFyYW1zLmV2ZW50SWRdO1xuXHRcdFx0XG5cdFx0XHQkbG9nLmluZm8odGhpc0ludml0YXRpb24pO1xuXHRcdFx0XG5cdFx0XHQvL2NoZWNrICMgb2YgaW5pdmlhdGlvbnNcblx0XHRcdGZvcihpbnZpdGF0aW9uIGluIGludml0YXRpb25zKSB7XG5cdFx0XHRcdHRvdGFsUGVuZGluZ0ludml0YXRpb25zKys7XG5cdFx0XHR9XG5cblx0XHRcdC8vcmVwb3J0ICMgb2YgaW52aXRhdGlvbnNcblx0XHRcdCRsb2cuaW5mbyhcInRvdGFsIGF0dGVuZGluZzogXCIgKyB0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucyk7XG5cdFx0XHRcblx0XHRcdC8vYWRkIHRoZSBldmVudCB0byB0aGUgZ3Vlc3QncyBhdHRlbmRpbmcgbGlzdFxuXHRcdFx0aWYocmVzcG9uc2UpIGN1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5jaGlsZCgkcm91dGVQYXJhbXMuaG9zdElkKS5jaGlsZCgkcm91dGVQYXJhbXMuZXZlbnRJZCkuc2V0KHRoaXNJbnZpdGF0aW9uLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKGVycm9yKTtcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cblx0XHQvL2lmIHRoZSB1cGRhdGVkIHBsYWNlaG9sZGVyIHdhcyBvbiB0aGUgYXR0ZW5kaW5nIGxpc3QgcmVtb3ZlIGl0XG5cdFx0Y3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLm9uKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdFx0dmFyIGF0dGVuZGluZ0xpc3QgPSBzbmFwc2hvdC52YWwoKTtcblx0XHRcdFxuXHRcdFx0Ly9yZXBvcnQgYWN0aW9uc1xuXHRcdFx0JGxvZy5pbmZvKCd0aGlzIGlzIHRoZSBhdHRlbmRpbmcgbGlzdCcpO1xuXHRcdFx0JGxvZy5pbmZvKGF0dGVuZGluZ0xpc3QpO1xuXHRcdFx0XG5cdFx0XHQvL3Rocm93IGZsYWcgZm9yIGxhdGVyXG5cdFx0XHRpZihhdHRlbmRpbmdMaXN0LnVwZGF0ZWQpIHJlbW92ZUF0dGVuZGluZ1VwZGF0ZWQgPSB0cnVlO1xuXG5cdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdC8vaWYgdGhlciB3YXMgYW4gZXJyb3IgcmVwb3J0IGl0XG5cdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKGVycm9yKTtcblx0XHR9KTtcblxuXHRcdC8vaWYgdGhpcyBpcyB0aGUgbGFzdCBwZW5kaW5nIGV2ZW50IG9uIHRoZSBndWVzdCdzIHBlbmRpbmcgbGlzdCwgYWRkIHRoZSB1cGRhdGVkIHBsYWNlaG9sZGVyXG5cdFx0aWYodG90YWxQZW5kaW5nSW52aXRhdGlvbnMgPCAyKSB7XG5cdFx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdFx0dmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcblxuXHRcdFx0Ly9yZXBsYWNlIHdpdGggdXBkYXRlZCBmaWVsZFxuXHRcdFx0Y3VycmVudFVzZXIuY2hpbGQoJ3BlbmRpbmcnKS51cGRhdGUoe1xuXHRcdFx0XHR1cGRhdGVkOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKGVycm9yKTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdC8vcmVtb3ZlIHRoZSBldmVudCBmcm9tIHRoZSBndWVzdCdzIHBlbmRpbmcgbGlzdFxuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdwZW5kaW5nJykuY2hpbGQoJHJvdXRlUGFyYW1zLmhvc3RJZCkucmVtb3ZlKCk7XG5cblx0XHQvL2lmIHRoZXJlIHdhcyBhbiB1cGRhdGVkIGZpZWxkIGluIGF0dGVuZGluZywgcmVtb3ZlIGl0XG5cdFx0aWYocmVtb3ZlQXR0ZW5kaW5nVXBkYXRlZCkge1xuXHRcdFx0JGxvZy5pbmZvKCdyZW1vdmluZyB0aGUgdXBkYXRlZCBwbGFjZWhvbGRlcicpO1xuXHRcdFx0Ly9jdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykuY2hpbGQoJ3VwZGF0ZWQnKS5yZW1vdmUoKTtcblx0XHR9XG5cblx0XHQvL3NhdmUgY2hhbmdlc1xuXHRcdHZtLmV2ZW50LiRzYXZlKCk7XG5cdH1cblxuXHR2bS51cGRhdGVVcGRhdGVkUGFyYW0gPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgY3VycmVudFVzZXIgPSByZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJ2V2ZW50cycpO1xuXHRcdFxuXHRcdCRsb2cuaW5mbygndXBkYXRpbmcgdGhlIHBhcmFtJyk7XG5cdFx0Y3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLm9uKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHQkbG9nLmluZm8oc25hcHNob3QudmFsKCkpO1xuXHRcdH0pO1xuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5jaGlsZCgndXBkYXRlZCcpLnJlbW92ZSgpO1xuXHR9XG5cblx0dm0uYWRkSW52aXRhdGlvblRvQXR0ZW5kaW5nID0gZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHR2YXIgY3VycmVudFVzZXIgPSByZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJ2V2ZW50cycpO1xuXHRcdHZhciB0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucyA9IDA7XG5cblx0XHQvL2dldCB0aGUgaW52aXRhdGlvbiBkZXRhaWxzXG5cdFx0Y3VycmVudFVzZXIuY2hpbGQoJ3BlbmRpbmcnKS5vbigndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFsYmVcblx0XHRcdHZhciBpbnZpdGF0aW9ucyA9IHNuYXBzaG90LnZhbCgpO1xuXHRcdFx0dmFyIHRoaXNJbnZpdGF0aW9uID0gaW52aXRhdGlvbnNbJHJvdXRlUGFyYW1zLmhvc3RJZF1bJHJvdXRlUGFyYW1zLmV2ZW50SWRdO1xuXHRcdFx0XG5cdFx0XHQvL2xvZyBzdGFydGluZyB2YWx1ZXNcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9ucyk7XG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnNbJHJvdXRlUGFyYW1zLmhvc3RJZF0pO1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdWyRyb3V0ZVBhcmFtcy5ldmVudElkXSk7XG5cdFx0XHRcblx0XHRcdC8vY2hlY2sgIyBvZiBpbml2aWF0aW9uc1xuXHRcdFx0Zm9yKGludml0YXRpb24gaW4gaW52aXRhdGlvbnMpIHtcblx0XHRcdFx0dG90YWxQZW5kaW5nSW52aXRhdGlvbnMrKztcblx0XHRcdH1cblxuXHRcdFx0Ly9yZXBvcnQgIyBvZiBpbnZpdGF0aW9uc1xuXHRcdFx0JGxvZy5pbmZvKFwidG90YWwgcGVuZGluZyBpbnZpdGF0aW9uczogXCIgKyB0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucyk7XG5cdFx0XHRcblx0XHRcdCRsb2cuaW5mbyhyZXNwb25zZSk7XG5cdFx0XHQvL2FkZCB0aGUgZXZlbnQgdG8gdGhlIGd1ZXN0J3MgYXR0ZW5kaW5nIGxpc3Rcblx0XHRcdGlmKHJlc3BvbnNlKSBjdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykuY2hpbGQoJHJvdXRlUGFyYW1zLmhvc3RJZCkuY2hpbGQoJHJvdXRlUGFyYW1zLmV2ZW50SWQpLnNldCh0aGlzSW52aXRhdGlvbiwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbyhlcnJvcik7XG5cdFx0XHR9KTtcblxuXG5cblx0XHR9KTtcblx0fVxuXG5cdC8vc3RhcnQgcnVuXG5cdGluaXQoKTtcbn1cbiIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ0xhbmRpbmdQYWdlQ29udHJvbGxlcicsIExhbmRpbmdQYWdlQ29udHJvbGxlcik7XG5cbkxhbmRpbmdQYWdlQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZycsICckbG9jYXRpb24nLCAnJGRvY3VtZW50JywgJyR3aW5kb3cnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBMYW5kaW5nUGFnZUNvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCAkbG9jYXRpb24sICRkb2N1bWVudCwgJHdpbmRvdykge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHR2YXIgZmJVUkwgPSAnaHR0cHM6Ly9tZWV0dXBwbGFubmVyLmZpcmViYXNlaW8uY29tLyc7XG5cdHZhciBhdXRoRGF0YSA9IHt9O1xuXHR2YXIgY3VycmVudFVzZXJEYXRhID0ge307XG5cblx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdHZtLnNob3dSZXF1aXJubWVudHMgPSBmYWxzZTtcblx0dm0udmFsaWROZXdOYW1lID0geyd2YWxpZCc6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOicnfX07XG5cdHZtLnZhbGlkTmV3RW1haWwgPSB7J3ZhbGlkJzpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6Jyd9fTtcblx0dm0uc2VjdXJlUGFzc3dvcmQgPSB7J3NlY3VyZSc6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOicnfX07XG5cdHZtLnVubG9ja0NyZWF0ZVVzZXJCdG4gPSB7J3VzYWJsZSc6ZmFsc2UsICdjbGFzcyc6J2J0biBidG4td2FybmluZyd9O1xuXHR2bS5tZXNzYWdlID0gJ3Rlc3RpbmcnO1xuXG5cdFxuXHR2bS52YWxpZFVzZXJFbWFpbCA9IHsndmFsaWQnOmZhbHNlLCAnc3R5bGUnOntjb2xvcjonJ319O1xuXHR2bS52YWxpZFVzZXJQYXNzd29yZCA9IHsndmFsaWQnOmZhbHNlLCAnc3R5bGUnOntjb2xvcjonJ319O1xuXHR2bS51bmNsb2NrVXNlckxvZ2luQnRuID0geyd1c2FibGUnOmZhbHNlLCAnY2xhc3MnOididG4gYnRuLXdhcm5pbmcnfTtcblx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHMgPSB7XG5cdFx0MDp7J2NvbnN0cmFpbnQnOidJcyBhdCBsZWFzdCAxNiBjaGFyYWN0ZXJzIGxvbmcnLCAnc3R5bGUnOntjb2xvcjoncmVkJ30sICdtZXQnOmZhbHNlfSxcblx0XHQxOnsnY29uc3RyYWludCc6J0lzIG5vIGxvbmdlciB0aGFuIDEwMCBjaGFyYWN0ZXJzJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX0sXG5cdFx0Mjp7J2NvbnN0cmFpbnQnOidDb250YWlucyBhdCBsZWFzdCBvbmUgcmVxdWlyZWQgc3ltYm9sIChcXCFcXEBcXCNcXCRcXCVcXF5cXCZcXCopJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX0sXG5cdFx0Mzp7J2NvbnN0cmFpbnQnOidDb250YWlucyBhdCBsZWFzdCBvbmUgbnVtYmVyJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX0sXG5cdFx0NDp7J2NvbnN0cmFpbnQnOidDb250YWlucyBhdCBsZWFzdCBvbmUgbG93ZXJjYXNlIGxldHRlcicsICdzdHlsZSc6e2NvbG9yOidyZWQnfSwgJ21ldCc6ZmFsc2V9LFxuXHRcdDU6eydjb25zdHJhaW50JzonQ29udGFpbnMgYXQgbGVhc3Qgb25lIHVwcGVyY2FzZSBsZXR0ZXInLCAnc3R5bGUnOntjb2xvcjoncmVkJ30sICdtZXQnOmZhbHNlfSxcblx0XHQ2OnsnY29uc3RyYWludCc6XCJEb2Vzbid0IGhhdmUgYW55IGlsbGVnYWwgY2hhcmFjdGVyc1wiLCAnc3R5bGUnOntjb2xvcjoncmVkJ30sICdtZXQnOmZhbHNlfVxuXHR9O1xuXG5cdC8vdmFyIHRoZVRlc3RCb3ggPSBhbmd1bGFyLmVsZW1lbnQoJGRvY3VtZW50KS5maW5kKCcjdGVzdEJveCcpO1xuXG5cdC8vdGhlVGVzdEJveC5jaGVja1ZhbGlkaXR5KCk7XG5cdC8vc2V0Q3VzdG9tVmFsaWRpdHkoJ3lvdSBuZWVkIHNvbWV0aGluZyBlbHNlJyk7XG5cblx0Ly9sb2NhbCBtZXRob2RzXG5cdGZ1bmN0aW9uIHV0ZjhfdG9fYjY0KHN0cikge1xuXHRcdHJldHVybiBidG9hKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiBiNjRfdG9fdXRmOChzdHIpIHtcbiAgICBcdHJldHVybiBhdG9iKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fVxuXG5cdC8vZGVmaW5lIGNvbnRyb2xsZXIgbWV0aG9kc1xuXHR2bS5kaXNwbGF5UGFzc1JlcXMgPSBmdW5jdGlvbigpIHtcblx0XHRpZih2bS5uZXdOYW1lICYmIHZtLm5ld0VtYWlsKSB7XG5cdFx0XHR2bS5zaG93UmVxdWlybm1lbnRzID0gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dm0uc2hvd1JlcXVpcm5tZW50cyA9IGZhbHNlO1xuXHRcdH1cblx0fVxuXG5cdHZtLmNoZWNrTmV3TmFtZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFxuXHRcdGlmKHZtLm5ld05hbWUpIHtcblx0XHRcdGlmKHZtLm5ld05hbWUubGVuZ3RoID4gMCkge1xuXHRcdFx0XHR2bS52YWxpZE5ld05hbWUudmFsaWQgPSB0cnVlO1xuXHRcdFx0XHR2bS52YWxpZE5ld05hbWUuc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS52YWxpZE5ld05hbWUudmFsaWQgPSBmYWxzZTtcblx0XHRcdFx0dm0udmFsaWROZXdOYW1lLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR2bS5vcGVuQ3JlYXRlVXNlckJ1dHRvbigpO1xuXHR9XG5cblx0dm0uY2hlY2tOZXdFbWFpbCA9IGZ1bmN0aW9uICgpIHtcblx0XHRpZih2bS5uZXdFbWFpbCkge1xuXHRcdFx0Ly9jaGVjayB2YWxpZGl0eVxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XCIsIFwiXCIpO1xuXG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3Qodm0ubmV3RW1haWwpKSB7XG5cdFx0XHRcdHZtLnZhbGlkTmV3RW1haWwudmFsaWQgPSB0cnVlO1xuXHRcdFx0XHR2bS52YWxpZE5ld0VtYWlsLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0udmFsaWROZXdFbWFpbC52YWxpZCA9IGZhbHNlO1xuXHRcdFx0XHR2bS52YWxpZE5ld0VtYWlsLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0XHRcdH1cdFx0XHRcblx0XHR9XG5cdFx0XG5cdFx0dm0ub3BlbkNyZWF0ZVVzZXJCdXR0b24oKTtcblx0fVxuXG5cdHZtLmNoZWNrVXNlckVtYWlsID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodm0udXNlckVtYWlsKSB7XG5cdFx0XHQvL2NoZWNrIHZhbGlkaXR5XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKD86XFwuW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKykqQCg/OlthLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cXC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cIiwgXCJcIik7XG5cblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2bS51c2VyRW1haWwpKSB7XG5cdFx0XHRcdHZtLnZhbGlkVXNlckVtYWlsLnZhbGlkID0gdHJ1ZTtcblx0XHRcdFx0dm0udmFsaWRVc2VyRW1haWwuc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS52YWxpZFVzZXJFbWFpbC52YWxpZCA9IGZhbHNlO1xuXHRcdFx0XHR2bS52YWxpZFVzZXJFbWFpbC5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dm0ub3BlblVzZXJMb2dpbkJ0bigpO1xuXHR9XG5cblx0dm0uY2hlY2tOZXdQYXNzd29yZHMgPSBmdW5jdGlvbigpIHtcblx0XHQvL2ZvciBlYWNoIHBhc3N3b3JkIGRlZmluZSB0aGUgcGF0dGVybiB0aGF0IHRoZSBwYXNzd29yZCBtdXN0IG1hdGNoXG5cdFx0dmFyIGNvbnN0cmFpbnRzID0ge1xuXHQgXHRcdDA6IFsnJywgJyB5b3VyIHBhc3N3b3JkIG5lZWRzIHRvIGJlIDE2IGNoYXJhY3RlcnMgb3IgbG9uZ2VyJ10sXG5cdCBcdFx0MTogWycnLCAnIHlvdXIgcGFzc3dvcmQgbmVlZHMgdG8gYmUgbGVzcyB0aGFuIDEwMCBjaGFyYWN0ZXJzJ10sXG5cdCBcdFx0MjogWydbXFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqXScsIFwiIG5vIHJlcXVpcmVkIHN5bWJvbHMgZm91bmRcIl0sXG5cdCBcdFx0MzogWydbMC05XScsIFwiIG5vIG51bWJlcnMgZm91bmRcIl0sXG5cdCBcdFx0NDogWydbYS16XScsIFwiIG5vIGxvd2VyY2FzZSBsZXR0ZXJzIGZvdW5kXCJdLFxuXHQgXHRcdDU6IFsnW0EtWl0nLCBcIiBubyB1cHBlcmNhc2UgbGV0dGVycyBmb3VuZFwiXSxcblx0IFx0XHQ2OiBbJ1teQS16MC05XFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqXScsIFwiIGlsbGVnYWwgY2hhcmFjdGVycyBmb3VuZFwiXSxcbiBcdFx0fTtcbiBcdFx0XG4gXHRcdC8vY2hlY2sgZm9yIGxlbmd0aFxuIFx0XHRpZih2bS5uZXdQYXNzd29yZCkge1xuIFx0XHRcdGlmKHZtLm5ld1Bhc3N3b3JkLmxlbmd0aCA+IDE1KSB7IFxuIFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMF0uc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307IFxuIFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMF0ubWV0ID0gdHJ1ZTsgXG4gXHRcdFx0fSBlbHNlIHtcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzBdLnN0eWxlID0ge2NvbG9yOidyZWQnfTsgXG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1swXS5tZXQgPSBmYWxzZTtcbiBcdFx0XHR9XG4gXHRcdFx0aWYodm0ubmV3UGFzc3dvcmQubGVuZ3RoIDw9IDEwMCkgeyBcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzFdLnN0eWxlID0ge2NvbG9yOidncmVlbid9OyBcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzFdLm1ldCA9IHRydWU7XG4gXHRcdFx0fSBlbHNlIHtcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzFdLnN0eWxlID0ge2NvbG9yOidyZWQnfTsgXG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1sxXS5tZXQgPSBmYWxzZTtcbiBcdFx0XHR9XG5cbiBcdFx0XHQvL2NoZWNrIGNvbnN0cmFpbnRzIDItNVxuIFx0XHRcdGZvcihpID0gMjsgaSA8IDY7IGkrKykge1xuXHQgXHRcdFx0Ly9jaGVjayBmb3IgcmVxdWlyZWQgc3ltYm9scywgdXBwZXJjYXNlLCBsb3NlcmNhc2UsIGFuZCBjaGFyYWN0ZXJzXG5cdCBcdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoY29uc3RyYWludHNbaV1bMF0sIFwiXCIpO1x0XG5cblx0IFx0XHRcdC8vdGVzdCBlYWNoIGNvbnN0cmF0aW50XG5cdCBcdFx0XHRpZihjb25zdHJhaW50LnRlc3Qodm0ubmV3UGFzc3dvcmQpKSB7XG5cdCBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzW2ldLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHQgXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1tpXS5tZXQgPSB0cnVlO1xuXHQgXHRcdFx0fSBlbHNlIHtcblx0IFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbaV0uc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHQgXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1tpXS5tZXQgPSBmYWxzZTtcblx0IFx0XHRcdH1cblx0IFx0XHR9XG5cblx0IFx0XHQvL2NoZWNrIGlsbGVnYWwgY2hhcmFjdGVyc1xuXHQgXHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChjb25zdHJhaW50c1s2XVswXSwgXCJcIik7XG5cblx0IFx0XHQvL3J1biB0aGUgY2hlY2tcblx0IFx0XHRpZighY29uc3RyYWludC50ZXN0KHZtLm5ld1Bhc3N3b3JkKSkge1xuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNl0uc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNl0ubWV0ID0gZmFsc2U7XG5cdCBcdFx0fSBlbHNlIHtcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzZdLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNl0ubWV0ID0gdHJ1ZTtcblx0IFx0XHR9XG5cblx0IFx0XHQvL2lmIGFsbCBjb25zdHJhaW5zIG1ldCwgdGhyb3cgdmFsaWQgcGFzcyBmbGFnXG5cdCBcdFx0aWYoIHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzBdLm1ldCAmJlxuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMV0ubWV0ICYmXG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1syXS5tZXQgJiZcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzNdLm1ldCAmJlxuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNF0ubWV0ICYmXG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1s1XS5tZXQgJiZcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzZdLm1ldCkge1xuXHQgXHRcdFx0dm0uc2VjdXJlUGFzc3dvcmQuc2VjdXJlID0gdHJ1ZVxuXHQgXHRcdH0gZWxzZSB7XG5cdCBcdFx0XHR2bS5zZWN1cmVQYXNzd29yZC5zZWN1cmUgPSBmYWxzZTtcblx0IFx0XHR9XG5cblx0IFx0XHRpZih2bS5zZWN1cmVQYXNzd29yZC5zZWN1cmUpIHtcblx0IFx0XHRcdHZtLnNlY3VyZVBhc3N3b3JkLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHQgXHRcdH0gZWxzZSB7XG5cdCBcdFx0XHR2bS5zZWN1cmVQYXNzd29yZC5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdCBcdFx0fVxuIFx0XHR9XG4gXHRcdFxuIFx0XHR2bS5vcGVuQ3JlYXRlVXNlckJ1dHRvbigpO1xuXHR9XG5cblx0dm0uY2hlY2tVc2VyUGFzc3dvcmRzID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodm0udXNlclBhc3N3b3JkKSB7XG5cdFx0XHRpZih2bS51c2VyUGFzc3dvcmQubGVuZ3RoID4gMTUpIHtcblx0XHRcdFx0dm0udmFsaWRVc2VyUGFzc3dvcmQuc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdFx0XHRcdHZtLnZhbGlkVXNlclBhc3N3b3JkLnZhbGlkID0gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLnZhbGlkVXNlclBhc3N3b3JkLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0XHRcdFx0dm0udmFsaWRVc2VyUGFzc3dvcmQudmFsaWQgPSBmYWxzZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRcblx0XHR2bS5vcGVuVXNlckxvZ2luQnRuKCk7XG5cdH1cblxuXHR2bS5vcGVuQ3JlYXRlVXNlckJ1dHRvbiA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHZtLnZhbGlkTmV3TmFtZS52YWxpZCAmJiB2bS52YWxpZE5ld0VtYWlsLnZhbGlkICYmIHZtLnNlY3VyZVBhc3N3b3JkLnNlY3VyZSkge1xuXHRcdFx0dm0udW5sb2NrQ3JlYXRlVXNlckJ0bi5jbGFzcyA9ICdidG4gYnRuLXN1Y2Nlc3MnO1xuXHRcdFx0dm0udW5sb2NrQ3JlYXRlVXNlckJ0bi51c2FibGUgPSB0cnVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2bS51bmxvY2tDcmVhdGVVc2VyQnRuLmNsYXNzID0gJ2J0biBidG4td2FybmluZyc7XG5cdFx0XHR2bS51bmxvY2tDcmVhdGVVc2VyQnRuLnVzYWJsZSA9IGZhbHNlO1x0XG5cdFx0fVxuXG5cdH1cblxuXHR2bS5vcGVuVXNlckxvZ2luQnRuID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodm0udmFsaWRVc2VyRW1haWwudmFsaWQgJiYgdm0udmFsaWRVc2VyUGFzc3dvcmQudmFsaWQpIHtcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4uY2xhc3MgPSAnYnRuIGJ0bi1zdWNjZXNzJztcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlID0gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi5jbGFzcyA9ICdidG4gYnRuLXdhcm5pbmcnO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi51c2FibGUgPSBmYWxzZTtcdFxuXHRcdH1cblx0fVxuXG5cdHZtLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vc2V0IHZhbHVlc1xuXHRcdHZtLm5ld05hbWUgPSAkZG9jdW1lbnQuZmluZCgnI25ld05hbWUnKVswXS52YWx1ZTtcblx0XHR2bS5uZXdFbWFpbCA9ICRkb2N1bWVudC5maW5kKCcjbmV3RW1haWwnKVswXS52YWx1ZTtcblx0XHR2bS51c2VyRW1haWwgPSAkZG9jdW1lbnQuZmluZCgnI3VzZXJFbWFpbCcpWzBdLnZhbHVlO1xuXHRcdFxuXHRcdHZtLmNoZWNrTmV3TmFtZSgpO1xuXHRcdHZtLmNoZWNrTmV3RW1haWwoKTtcblx0XHR2bS5jaGVja1VzZXJFbWFpbCgpO1xuXHR9XG5cblx0ZnVuY3Rpb24gcmVkaXJlY3QocGF0aCwgdXNlckRhdGEpIHtcblx0XHR2YXIgZnVsbFBhdGggPSBwYXRoICsgJy8nICsgY3VycmVudFVzZXJEYXRhLnVpZCArICcvJyArIGN1cnJlbnRVc2VyRGF0YS50b2tlbjtcblx0XHQvL3JlZGlyZWN0XG5cdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyB0bzogJyArIGZ1bGxQYXRoKTtcblx0XHQkbG9jYXRpb24ucGF0aChmdWxsUGF0aCk7XG5cdFx0JHNjb3BlLiRhcHBseSgpO1xuXHR9XG5cblx0dm0uY3JlYXRlTmV3VXNlciA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2cuaW5mbygnQ3JlYXRpbmcgYSBuZXcgdXNlciBhY2NvdW50IG5vdyEnKTtcblxuXHRcdGlmKHZtLnVubG9ja0NyZWF0ZVVzZXJCdG4udXNhYmxlKSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZVxuXHRcdFx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cblx0XHRcdHJlZi5jcmVhdGVVc2VyKHtcblx0XHRcdFx0ZW1haWw6dm0ubmV3RW1haWwsXG5cdFx0XHRcdHBhc3N3b3JkOnZtLm5ld1Bhc3N3b3JkXG5cdFx0XHR9LGZ1bmN0aW9uKGVycm9yLCB1c2VyRGF0YSkge1xuXHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnRXJyb3IgY3JlYXRpbmcgdXNlcjogJyArIGVycm9yKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvL2xvZyByZXN1bHRzXG5cdFx0XHRcdFx0JGxvZy5pbmZvKHVzZXJEYXRhKTtcblxuXHRcdFx0XHRcdC8vc2F2ZSBhbGwgdGhlIGRhdGFcblx0XHRcdFx0XHRjdXJyZW50VXNlckRhdGEgPSB1c2VyRGF0YTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvL2dlbmVyYXRlIHRoZSB1c2VyIHJlY29yZFxuXHRcdFx0XHRcdHZhciB1c2Vyc1JlZiA9IHJlZi5jaGlsZCgnVXNlcnMvJyArIHVzZXJEYXRhLnVpZCk7XG5cdFx0XHRcdFx0dmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcblxuXHRcdFx0XHRcdC8vd3JpdGUgbmV3IHVzZXIgdG8gdGhlIGRhdGFiYXNlIHdpdGggYmlvIGluZm9cblx0XHRcdFx0XHR1c2Vyc1JlZi5zZXQoeyBcblx0XHRcdFx0XHRcdCdiaW8nOiB7XG5cdFx0XHRcdFx0XHRcdCduYW1lJzogdm0ubmV3TmFtZSxcblx0XHRcdFx0XHRcdFx0J2VtYWlsJzogdm0ubmV3RW1haWxcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHQnZXZlbnRzJzoge1xuXHRcdFx0XHRcdFx0XHQncGVuZGluZyc6IHtcblx0XHRcdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0J2hvc3RpbmcnOiB7XG5cdFx0XHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdCdhdHRlbmRpbmcnOiB7XG5cdFx0XHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdCdjb21wbGV0ZWQnOiB7XG5cdFx0XHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHRcdFx0JGxvZy5pbmZvKCdEYXRhIGNvdWxkIG5vdCBiZSBzYXZlZDogJyArIGVycm9yKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdCRsb2cuaW5mbygnRGF0YSBzYXZlZCBzdWNjZXNzZnVsbHkuJyk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Ly9hZGQgdGhpcyB1c2VyIHRvIHRoZSBsaXN0IG9mIHJlZ2lzdGVyZWQgdXNlcnNcblx0XHRcdFx0XHRyZWYuY2hpbGQoJ1VpZHMnKS5jaGlsZCh1dGY4X3RvX2I2NCh2bS5uZXdFbWFpbCkpLnNldChjdXJyZW50VXNlckRhdGEudWlkLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbyhcIkRhdGEgY291bGQgbm90IGJlIHNhdmVkLiBcIiArIGVycm9yKTtcblx0XHRcdFx0XHRcdGVsc2UgJGxvZy5pbmZvKFwidWlkIGNyZWF0ZWQgc3VjZXNzZnVsbHkuXCIpO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0Ly9yZWRpcmVjdCB0byBVc2VySW5mb3JtYXRpb25cblx0XHRcdFx0XHRyZWRpcmVjdCgnL3VzZXJJbmZvcm1hdGlvbicsIGN1cnJlbnRVc2VyRGF0YSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0fVxuXHR9XG5cblx0dm0ubG9naW5SZWdpc3RlcmVkVXNlciA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0aWYodm0udW5jbG9ja1VzZXJMb2dpbkJ0bi51c2FibGUpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlXG5cdFx0XHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHRcdFx0Ly9hdXRoZW50aWNhdGUgdGhlIHVzZXJcblx0XHRcdHJlZi5hdXRoV2l0aFBhc3N3b3JkKHtcblx0XHRcdFx0ZW1haWw6IHZtLnVzZXJFbWFpbCxcblx0XHRcdFx0cGFzc3dvcmQ6IHZtLnVzZXJQYXNzd29yZFxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IsIGF1dGhEYXRhKSB7XG5cdFx0XHRcdGlmKGVycm9yKSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdFcnJvciBMb2dnaW5nIEluOiAnICsgZXJyb3IpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnTG9nZ2VkIEluIHN1Y2Nlc3NmdWxseTogJyArIGF1dGhEYXRhLnVpZCk7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKGF1dGhEYXRhKTtcblx0XHRcdFx0XHQvL3NhdmUgYWxsIHRoZSBkYXRhXG5cdFx0XHRcdFx0Y3VycmVudFVzZXJEYXRhID0gYXV0aERhdGE7XG5cblx0XHRcdFx0XHQvL2xvYWQgdXNlciBiaW9cblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvL2xvYWQgdXNlciBldmVudHNcblxuXHRcdFx0XHRcdC8vcmVkaXJlY3Rcblx0XHRcdFx0XHRyZWRpcmVjdCgnL3VzZXJJbmZvcm1hdGlvbicsIGN1cnJlbnRVc2VyRGF0YSk7XG5cdFx0XHRcdFx0JHNjb3BlLiRhcHBseSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdH1cblxuXHR9XG5cblx0dm0uYWxlcnRNZSA9IGZ1bmN0aW9uKCkge1xuXHRcdGFsZXJ0KCd0aGlzIGlzIHdvcmtpbmchIGFuIGFsZXJ0IScpO1xuXHR9XG5cblx0dm0ub25SZXNpemVGdW5jdGlvbiA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBpbnB1dFRleHQgPSBhbmd1bGFyLmVsZW1lbnQoJy5pbnB1dFRleHQnKTtcblx0XHRpZigkd2luZG93Lm91dGVyV2lkdGggPiAkd2luZG93Lm91dGVySGVpZ2h0KSB7XG5cdFx0XHRpbnB1dFRleHQuY3NzKCdmb250LXNpemUnLCAnMmVtJyk7XG5cdFx0XHQkbG9nLmluZm8oJ21ha2luZyBiaWdnZXInKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aW5wdXRUZXh0LmNzcygnZm9udC1zaXplJywgJzEuMmVtJyk7XG5cdFx0fVxuXHR9XG5cblx0Ly9ldmVudCBsaXN0ZW5lcnNcblx0aWYgKCdhZGRFdmVudExpc3RlbmVyJyBpbiAkZG9jdW1lbnQpIHtcblx0ICAgICRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XG5cdCAgICBcdCRsb2cuaW5mbygnYWRkaW5nIEZhc3RDbGljaycpO1xuXHQgICAgICAgIEZhc3RDbGljay5hdHRhY2goJGRvY3VtZW50LmJvZHkpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHR9XG5cblx0YW5ndWxhci5lbGVtZW50KCR3aW5kb3cpLmJpbmQoJ3Jlc2l6ZScsIGZ1bmN0aW9uKCkge1xuXHRcdHZtLm9uUmVzaXplRnVuY3Rpb24oKTtcblx0XHQvLyRzY29wZS4kYXBwbHkoKTtcblx0fSk7XG5cblx0YW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cdFx0aWYoJHdpbmRvdy5vdXRlcldpZHRoIDwgNjAwKSB7XG5cdFx0XHR2bS5vblJlc2l6ZUZ1bmN0aW9uKCk7XG5cdFx0XHQvLyRzY29wZS4kYXBwbHkoKTtcblx0XHR9XG5cdH0pXG5cblxuXHQgdm0ubWFzdGVyID0ge307XG5cblx0ICB2bS51cGRhdGUgPSBmdW5jdGlvbih1c2VyKSB7XG5cdCAgICB2bS5tYXN0ZXIgPSBhbmd1bGFyLmNvcHkodXNlcik7XG5cdCAgfTtcblxuXHQgIHZtLnJlc2V0ID0gZnVuY3Rpb24oZm9ybSkge1xuXHQgICAgaWYgKGZvcm0pIHtcblx0ICAgICAgZm9ybS4kc2V0UHJpc3RpbmUoKTtcblx0ICAgICAgZm9ybS4kc2V0VW50b3VjaGVkKCk7XG5cdCAgICB9XG5cdCAgICB2bS51c2VyID0gYW5ndWxhci5jb3B5KHZtLm1hc3Rlcik7XG5cdCAgfTtcblxuXHQgIHZtLnJlc2V0KCk7XG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignTWFpbkNvbnRyb2xsZXInLCBNYWluQ29udHJvbGxlcik7XG5cbk1haW5Db250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJGxvY2F0aW9uJywgJyRkb2N1bWVudCddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIE1haW5Db250cm9sbGVyKCRsb2csICRsb2NhdGlvbiwgJGRvY3VtZW50KSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdHZhciBmYlVSTCA9ICdodHRwczovL21lZXR1cHBsYW5uZXIuZmlyZWJhc2Vpby5jb20vJztcblx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7IFxuXG5cdHZtLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xuXHRcdGFsZXJ0KCdsb2dnaW5nIHlvdSBvdXQhJyk7XG5cdFx0cmVmLnVuYXV0aCgpO1xuXHRcdCRsb2NhdGlvbi5wYXRoKCcvJyk7XG5cdH07XG5cblx0aWYgKCdhZGRFdmVudExpc3RlbmVyJyBpbiAkZG9jdW1lbnQpIHtcblx0ICAgICRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XG5cdCAgICBcdCRsb2cuaW5mbygnYWRkaW5nIEZhc3RDbGljaycpO1xuXHQgICAgICAgIEZhc3RDbGljay5hdHRhY2goJGRvY3VtZW50LmJvZHkpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHR9XG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignTmV3VXNlclNpZ25VcENvbnRyb2xsZXInLCBOZXdVc2VyU2lnblVwQ29udHJvbGxlcik7XG5cbk5ld1VzZXJTaWduVXBDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJywgJ3ZhbGlkYXRpb24nLCAnYmFja2VuZFNlcnZpY2VzJywgJ3RyYWZmaWNWYWxldCcsICd1c2VyRGF0YSddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIE5ld1VzZXJTaWduVXBDb250cm9sbGVyKCRzY29wZSwgJGxvZywgdmFsaWRhdGlvbiwgYmFja2VuZFNlcnZpY2VzLCB0cmFmZmljVmFsZXQsIHVzZXJEYXRhKSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cblx0Ly9kZWZpbmUgdm0gaW5wdXQgdmFyaWFibGVzXG5cdHZtLmlucHV0cyA9IHtcblx0XHRuZXdOYW1lOiAnJyxcblx0XHRuZXdFbWFpbDogJycsXG5cdFx0bmV3UGFzc3dvcmQ6ICcnLFxuXHRcdHJlcXVpcmVkRmllbGRzRGVmaW5lZDogZmFsc2Vcblx0fVxuXHR2bS5lcnJvcnMgPSB7XG5cdFx0bmFtZTogJycsXG5cdFx0ZW1haWw6ICcnLFxuXHRcdHBhc3N3b3JkOiBmYWxzZSxcblx0XHRwYXNzZXNBbGxUZXN0czogZmFsc2Vcblx0fVxuXHR2bS5wYXNzUmVxcyA9IHtcblx0XHQwOiB7IGlkOicnLCByZXE6J0lzIGF0IGxlYXN0IDE2IGNoYXJhY3RlcnMgbG9uZycsIGZ1bGZpbGxlZDpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9fSxcblx0XHQxOiB7IGlkOicnLCByZXE6J0lzIG5vIGxvbmdlciB0aGFuIDEwMCBjaGFyYWN0ZXJzJywgZnVsZmlsbGVkOmZhbHNlLCAnc3R5bGUnOntjb2xvcjoncmVkJ30gfSxcblx0XHQyOiB7IGlkOicnLCByZXE6J0NvbnRhaW5zIGF0IGxlYXN0IG9uZSBsb3dlcmNhc2UgbGV0dGVyJywgZnVsZmlsbGVkOmZhbHNlLCAnc3R5bGUnOntjb2xvcjoncmVkJ30gfSxcblx0XHQzOiB7IGlkOicnLCByZXE6J0NvbnRhaW5zIGF0IGxlYXN0IG9uZSB1cHBlcmNhc2UgbGV0dGVyJywgZnVsZmlsbGVkOmZhbHNlLCAnc3R5bGUnOntjb2xvcjoncmVkJ30gfSxcblx0XHQ0OiB7IGlkOicnLCByZXE6J0NvbnRhaW5zIGF0IGxlYXN0IG9uZSBudW1iZXInLCBmdWxmaWxsZWQ6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOidyZWQnfSB9LFxuXHRcdDU6IHsgaWQ6JycsIHJlcTonQ29udGFpbnMgYXQgbGVhc3Qgb25lIHJlcXVpcmVkIHN5bWJvbCAoXFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqKScsIGZ1bGZpbGxlZDpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9IH0sXG5cdFx0NjogeyBpZDonJywgcmVxOlwiRG9lc24ndCBoYXZlIGFueSBpbGxlZ2FsIGNoYXJhY3RlcnNcIiwgZnVsZmlsbGVkOnRydWUsICdzdHlsZSc6e2NvbG9yOidyZWQnfSB9XG5cdH1cblx0dm0uc2hvd1JlcXNCb3ggPSBmYWxzZTtcblxuXHQvL2RlZmluZSByZXF1aXJlZCBmaWVsZCBjb25zdHJhaW50c1xuXHR2YXIgc2lnbnVwVmFsaWRhdGlvbiA9IHZhbGlkYXRpb247XG5cblx0Ly9kZWZpbmUgY29udHJvbGxlciBtZXRob2RzXG5cdGZ1bmN0aW9uIHZlcmlmeVJlcXVpcm5tZW50cygpIHtcblx0XHRpZih2bS5lcnJvcnMubmFtZSA9PSAnJyAmJiB2bS5lcnJvcnMuZW1haWwgPT0gJycgJiYgIXZtLmVycm9ycy5wYXNzd29yZCkgdm0uZXJyb3JzLnBhc3Nlc0FsbFRlc3RzID0gdHJ1ZTtcblx0XHRlbHNlIHZtLmVycm9ycy5wYXNzZXNBbGxUZXN0cyA9IGZhbHNlO1xuXG5cdFx0aWYoIGFuZ3VsYXIuaXNEZWZpbmVkKHZtLmlucHV0cy5uZXdOYW1lKSAmJiB2bS5pbnB1dHMubmV3TmFtZSAhPT0gJycgJiZcblx0XHRcdGFuZ3VsYXIuaXNEZWZpbmVkKHZtLmlucHV0cy5uZXdFbWFpbCkgJiYgdm0uaW5wdXRzLm5ld0VtYWlsICE9PSAnJyAmJlxuXHRcdFx0YW5ndWxhci5pc0RlZmluZWQodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKSAmJiB2bS5pbnB1dHMubmV3UGFzc3dvcmQgIT09ICcnKSBcblx0XHRcdFx0dm0uaW5wdXRzLnJlcXVpcmVkRmllbGRzRGVmaW5lZCA9IHRydWU7XG5cdFx0ZWxzZSB2bS5pbnB1dHMucmVxdWlyZWRGaWVsZHNEZWZpbmVkID0gZmFsc2U7XG5cdH1cblxuXHQvL2RlZmluZSB2bSBhY2Nlc3NpYmxlIG1ldGhvZHNcblx0dm0uY2hlY2tOZXdOYW1lID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZVxuXHRcdHZhciBlcnJvcnMgPSBbXTtcblx0XHR2YXIgaGFzTmFtZSA9IHNpZ251cFZhbGlkYXRpb24ucmVxdWlyZWQodm0uaW5wdXRzLm5ld05hbWUpO1xuXHRcdHZhciBsb25nRW5vdWdoID0gc2lnbnVwVmFsaWRhdGlvbi5taW5OYW1lTGVuZ3RoKHZtLmlucHV0cy5uZXdOYW1lKVxuXHRcdFxuXHRcdC8vbG9nIGVycm9yc1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGhhc05hbWUpKSBlcnJvcnMucHVzaChoYXNOYW1lKTtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChsb25nRW5vdWdoKSkgZXJyb3JzLnB1c2gobG9uZ0Vub3VnaCk7XG5cblx0XHQvL3VwZGF0ZSB0aGUgZXJyb3JzIG1vZGVsXG5cdFx0aWYoZXJyb3JzLmxlbmd0aCA+IDApIHZtLmVycm9ycy5uYW1lID0gZXJyb3JzLmpvaW4oJywgJyk7XG5cdFx0ZWxzZSB2bS5lcnJvcnMubmFtZSA9ICcnO1xuXG5cdFx0dmVyaWZ5UmVxdWlybm1lbnRzKCk7XG5cdH1cblxuXHR2bS5jaGVja05ld0VtYWlsID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZVxuXHRcdHZhciBlcnJvcnMgPSBbXTtcblx0XHR2YXIgaGFzRW1haWwgPSBzaWdudXBWYWxpZGF0aW9uLnJlcXVpcmVkKHZtLmlucHV0cy5uZXdFbWFpbCk7XG5cdFx0dmFyIGlzQW5FbWFpbCA9IHNpZ251cFZhbGlkYXRpb24uZW1haWwodm0uaW5wdXRzLm5ld0VtYWlsKTtcblx0XHRcblx0XHQvL2xvZyBlcnJvcnNcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChoYXNFbWFpbCkpIGVycm9ycy5wdXNoKGhhc0VtYWlsKTtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChpc0FuRW1haWwpKSBlcnJvcnMucHVzaChpc0FuRW1haWwpO1xuXG5cdFx0Ly91cGRhdGUgdGhlIGVycm9ycyBtb2RlbFxuXHRcdGlmKGVycm9ycy5sZW5ndGggPiAwKSB2bS5lcnJvcnMuZW1haWwgPSBlcnJvcnMuam9pbignLCAnKTtcblx0XHRlbHNlIHZtLmVycm9ycy5lbWFpbCA9ICcnO1xuXG5cdFx0dmVyaWZ5UmVxdWlybm1lbnRzKCk7XG5cdH1cblxuXHR2bS5jaGVja05ld1Bhc3N3b3JkID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9mbGlwIG9uIHJlcXMgYm94XG5cdFx0dm0uc2hvd1JlcXNCb3ggPSB0cnVlO1xuXG5cdFx0Ly9sb2NhbCB2YXJpYWJsZVxuXHRcdHZhciBlcnJvcnMgPSBbXTtcblx0XHR2YXIgaGFzUGFzc3dvcmQgPSBzaWdudXBWYWxpZGF0aW9uLnJlcXVpcmVkKHZtLmlucHV0cy5uZXdQYXNzd29yZCk7XG5cdFx0dmFyIHNwZWNpZmljUmVxcyA9IFtcblx0XHRcdHNpZ251cFZhbGlkYXRpb24ubWluUGFzc0xlbmd0aCh2bS5pbnB1dHMubmV3UGFzc3dvcmQpLFxuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5tYXhQYXNzTGVuZ3RoKHZtLmlucHV0cy5uZXdQYXNzd29yZCksXG5cdFx0XHRzaWdudXBWYWxpZGF0aW9uLmF0TGVhc3RPbmVMb3dlcmNhc2Uodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKSxcblx0XHRcdHNpZ251cFZhbGlkYXRpb24uYXRMZWFzdE9uZVVwcGVyY2FzZSh2bS5pbnB1dHMubmV3UGFzc3dvcmQpLFxuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5hdExlYXN0T25lTnVtYmVyKHZtLmlucHV0cy5uZXdQYXNzd29yZCksXG5cdFx0XHRzaWdudXBWYWxpZGF0aW9uLmF0TGVhc3RPbmVTeW1ib2wodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKSxcblx0XHRcdHNpZ251cFZhbGlkYXRpb24uaWxsZWdhbENoYXJhY3Rlcih2bS5pbnB1dHMubmV3UGFzc3dvcmQpXG5cdFx0XTtcblxuXHRcdC8vbG9nIGVycm9yc1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGhhc1Bhc3N3b3JkKSkgZXJyb3JzLnB1c2goaGFzUGFzc3dvcmQpO1xuXG5cdFx0Ly91cGRhdGUgdGhlIGVycm9ycyBtb2RlbFxuXHRcdGlmKGVycm9ycy5sZW5ndGggPiAwKSB2bS5lcnJvcnMucGFzc3dvcmQgPSBlcnJvcnMuam9pbignLCAnKTtcblx0XHRlbHNlIHZtLmVycm9ycy5lbWFpbCA9ICcnO1xuXG5cdFx0Ly91cGRhdGUgcmVxcyBtb2RlbFxuXHRcdHZhciBhbnlFcnJvcnMgPSBmYWxzZTtcblx0XHRmb3IoaT0wOyBpPDc7IGkrKykge1xuXHRcdFx0aWYoc3BlY2lmaWNSZXFzW2ldKSB7XG5cdFx0XHRcdHZtLnBhc3NSZXFzW2ldLmZ1bGZpbGxlZCA9IHRydWU7XG5cdFx0XHRcdHZtLnBhc3NSZXFzW2ldLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0ucGFzc1JlcXNbaV0uZnVsZmlsbGVkID0gZmFsc2U7XG5cdFx0XHRcdHZtLnBhc3NSZXFzW2ldLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0XHRcdFx0YW55RXJyb3JzID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR2bS5lcnJvcnMucGFzc3dvcmQgPSBhbnlFcnJvcnM7XG5cdFx0dmVyaWZ5UmVxdWlybm1lbnRzKCk7XG5cdH1cblxuXHR2bS5leGl0UGFzc3dvcmQgPSBmdW5jdGlvbigpIHtcblx0XHR2bS5jaGVja05ld1Bhc3N3b3JkKCk7XG5cdFx0dm0uc2hvd1JlcXNCb3ggPSBmYWxzZTtcblx0fVxuXG5cdHZtLmNyZWF0ZU5ld1VzZXIgPSBmdW5jdGlvbiAoKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBuZXdVc2VyU2hlcnBhID0gdHJhZmZpY1ZhbGV0O1xuXG5cdFx0Ly9jb25maXJtIGFsbCBmaWVsZHMgYXJlIHZhbGlkXG5cdFx0aWYodm0uZXJyb3JzLnBhc3Nlc0FsbFRlc3RzICYmIHZtLmlucHV0cy5yZXF1aXJlZEZpZWxkc0RlZmluZWQpIHtcblx0XHRcdFxuXHRcdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdFx0dmFyIGNyZWF0ZU5ld1VzZXIgPSBiYWNrZW5kU2VydmljZXM7XG5cdFx0XHR2YXIgbmV3VXNlckRhdGEgPSB1c2VyRGF0YTtcblxuXHRcdFx0Ly9tYWludGFpbiBsb2NhbCB2YWx1ZXMgdG8gc3BlZWQgdXAgdXNlciBleHBlcmllbmNlXG5cdFx0XHRuZXdVc2VyRGF0YS5sb2FkUHJpbWFyaWVzKHZtLmlucHV0cy5uZXdOYW1lLCB2bS5pbnB1dHMubmV3RW1haWwpO1xuXG5cdFx0XHQvL2NyZWF0ZSB0aGUgbmV3IHVzZXIgaW4gdGhlIGRhdGFiYXNlXG5cdFx0XHRjcmVhdGVOZXdVc2VyLmNyZWF0ZU5ld1VzZXIodm0uaW5wdXRzLm5ld0VtYWlsLCB2bS5pbnB1dHMubmV3UGFzc3dvcmQpXG5cdFx0XHQudGhlbihmdW5jdGlvbih1c2VyRGF0YSkge1xuXHRcdFx0XHQvL2FkZCB0aGlzIHVzZXIgdG8gdGhlIGxpc3Qgb2YgcmVnaXN0ZXJlZCB1c2Vyc1xuXHRcdFx0XHRjcmVhdGVOZXdVc2VyLmFkZE5ld1VzZXJUb0RhdGFiYXNlKHVzZXJEYXRhLnVpZCwgdm0uaW5wdXRzLm5ld05hbWUsIHZtLmlucHV0cy5uZXdFbWFpbClcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24obWVzc2FnZSkge1xuXHRcdFx0XHRcdCRsb2cuaW5mbyhtZXNzYWdlKTtcblx0XHRcdFx0XHQvL2FkZCB0aGlzIHVzZXIgdG8gdGhlIGxpc3Qgb2YgcmVnaXN0ZXJlZCB1c2Vyc1xuXHRcdFx0XHRcdGNyZWF0ZU5ld1VzZXIuYWRkTmV3VXNlclRvUmVnVXNlcnNMaXN0KHVzZXJEYXRhLnVpZCwgdm0uaW5wdXRzLm5ld0VtYWlsKVxuXHRcdFx0XHRcdC50aGVuKGZ1bmN0aW9uKG1lc3NhZ2UpIHsgJGxvZy5pbmZvKG1lc3NhZ2UpOyB9KVxuXHRcdFx0XHRcdC5jYXRjaChmdW5jdGlvbihtZXNzYWdlKSB7ICRsb2cuaW5mbyhtZXNzYWdlKTsgfSlcblx0XHRcdFx0fSlcblx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKG1lc3NhZ2UpIHsgJGxvZy5pbmZvKG1lc3NhZ2UpOyB9KVxuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihtZXNzYWdlKSB7ICRsb2cuaW5mbyhtZXNzYWdlKTsgfSlcblx0XHRcdFxuXHRcdFx0Ly9yZWRpcmVjdCB0byB0aGUgbmV4dCBwYWdlIFxuXHRcdFx0bmV3VXNlclNoZXJwYS5yZWRpcmVjdFRvKCcvdXNlckluZm9ybWF0aW9uJyk7XG5cdFx0fVxuXG5cdH1cblx0XG5cdC8vcnVuIHRpbWUgYWN0aW9uc1xuXG59XG4iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCd0b3BNZW51Q29udHJvbGxlcicsIHRvcE1lbnVDb250cm9sbGVyKTtcblxudG9wTWVudUNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnLCAnJGxvY2F0aW9uJywgJyRkb2N1bWVudCcsICckd2luZG93J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gdG9wTWVudUNvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCAkbG9jYXRpb24sICRkb2N1bWVudCwgJHdpbmRvdykge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHR2YXIgZmJVUkwgPSAnaHR0cHM6Ly9tZWV0dXBwbGFubmVyLmZpcmViYXNlaW8uY29tLyc7XG5cdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXG5cdC8vbG9jYWwgdmFyaWFibGVzXG5cdHZtLmxvZ2dlZEluID0gZmFsc2VcblxuXHQvL3N0eWxlcyB2YXJpYWJsZXNcblx0XG5cdC8vZXZlbnQgbGlzdGVuZXJzXG5cdGlmICgnYWRkRXZlbnRMaXN0ZW5lcicgaW4gJGRvY3VtZW50KSB7XG5cdCAgICAkZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkge1xuXHQgICAgXHQkbG9nLmluZm8oJ2FkZGluZyBGYXN0Q2xpY2snKTtcblx0ICAgICAgICBGYXN0Q2xpY2suYXR0YWNoKCRkb2N1bWVudC5ib2R5KTtcblx0ICAgIH0sIGZhbHNlKTtcblx0fVxuXG5cdGFuZ3VsYXIuZWxlbWVudCgkd2luZG93KS5iaW5kKCdyZXNpemUnLCBmdW5jdGlvbigpIHtcblx0XHR2bS5vblJlc2l6ZUZ1bmN0aW9uKCk7XG5cdFx0JHNjb3BlLiRhcHBseSgpO1xuXHR9KTtcblxuXHRhbmd1bGFyLmVsZW1lbnQoJGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcblx0XHRpZigkd2luZG93Lm91dGVyV2lkdGggPCA2MDApIHtcblx0XHRcdHZtLm9uUmVzaXplRnVuY3Rpb24oKTtcblx0XHRcdCRzY29wZS4kYXBwbHkoKTtcblx0XHR9XG5cdH0pXG5cdC8vZHluYW1pY2FsbHkgc2V0IGlucHV0IHdpZHRoXG5cblxuXHQvLyBDcmVhdGUgYSBjYWxsYmFjayB3aGljaCBsb2dzIHRoZSBjdXJyZW50IGF1dGggc3RhdGVcblx0ZnVuY3Rpb24gaW5pdCgpIHtcblx0XHR2bS5vblJlc2l6ZUZ1bmN0aW9uKCk7XG5cdFx0JHNjb3BlLiRhcHBseSgpO1xuXHR9XG5cblx0ZnVuY3Rpb24gYXV0aERhdGFDYWxsYmFjayhhdXRoRGF0YSkge1xuXHQgIGlmIChhdXRoRGF0YSkge1xuXHQgICAgJGxvZy5pbmZvKFwiVXNlciBcIiArIGF1dGhEYXRhLnVpZCArIFwiIGlzIGxvZ2dlZCBpbiB3aXRoIFwiICsgYXV0aERhdGEucHJvdmlkZXIpO1xuXHQgICAgdm0ubG9nZ2VkSW4gPSB0cnVlO1xuXHQgIH0gZWxzZSB7XG5cdCAgICAkbG9nLmluZm8oXCJVc2VyIGlzIGxvZ2dlZCBvdXRcIik7XG5cdCAgICB2bS5sb2dnZWRJbiA9IGZhbHNlO1xuXHQgIH1cblx0fVxuXG5cdGZ1bmN0aW9uIHJlZGlyZWN0KHBhdGgsIHVzZXJEYXRhKSB7XG5cdFx0dmFyIGZ1bGxQYXRoID0gcGF0aCArICcvJyArIHVzZXJEYXRhLnVpZCArICcvJyArIHVzZXJEYXRhLnRva2VuO1xuXHRcdC8vcmVkaXJlY3Rcblx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIHRvOiAnICsgZnVsbFBhdGgpO1xuXHRcdCRsb2NhdGlvbi5wYXRoKGZ1bGxQYXRoKTtcblx0XHQvLyRzY29wZS4kYXBwbHkoKTtcblx0fVxuXG5cdC8vdm0gYWNjZXNzaWJsZSBtZXRob2RzXG5cdHZtLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2cuaW5mbygnbG9nZ2luZyBvdXQhJyk7XG5cdFx0dm0ubG9nZ2VkSW4gPSBmYWxzZTtcblx0XHRyZWYudW5hdXRoKCk7XG5cdFx0cmVkaXJlY3QoJy8nLCB7dWlkOicnLCB0b2tlbjonJ30pO1xuXHR9XG5cblx0dm0ubmF2QmFyTG9naW5SZWdpc3RlcmVkVXNlciA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2cuaW5mbygnbGF1bmNoaW5nIGxvZ2luJyk7XG5cdFx0aWYodHJ1ZSkge1xuXHRcdC8vaWYodm0udW5jbG9ja1VzZXJMb2dpbkJ0bi51c2FibGUpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlXG5cdFx0XHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHRcdFx0Ly9hdXRoZW50aWNhdGUgdGhlIHVzZXJcblx0XHRcdHJlZi5hdXRoV2l0aFBhc3N3b3JkKHtcblx0XHRcdFx0ZW1haWw6IHZtLm5hdmJhclVzZXJFbWFpbCxcblx0XHRcdFx0cGFzc3dvcmQ6IHZtLm5hdmJhclVzZXJQYXNzXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvciwgYXV0aERhdGEpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ0Vycm9yIExvZ2dpbmcgSW46ICcgKyBlcnJvcik7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdMb2dnZWQgSW4gc3VjY2Vzc2Z1bGx5OiAnICsgYXV0aERhdGEudWlkKTtcblx0XHRcdFx0XHQkbG9nLmluZm8oYXV0aERhdGEpO1xuXHRcdFx0XHRcdC8vc2F2ZSBhbGwgdGhlIGRhdGFcblxuXHRcdFx0XHRcdC8vbG9hZCB1c2VyIGJpb1xuXHRcdFx0XHRcdC8vbG9hZCB1c2VyIGV2ZW50c1xuXG5cdFx0XHRcdFx0Ly9yZWRpcmVjdFxuXHRcdFx0XHRcdHJlZGlyZWN0KCcvdXNlckluZm9ybWF0aW9uJywgYXV0aERhdGEpO1xuXHRcdFx0XHRcdCRzY29wZS4kYXBwbHkoKTtcblxuXHRcdFx0XHRcdC8vY2xpY2sgY2xvc2VkIHRoZSBuYXZiYXJcblx0XHRcdFx0XHRhbmd1bGFyLmVsZW1lbnQoJy5uYXZiYXItdG9nZ2xlJykuY2xpY2soKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblxuXG5cdFx0fVxuXG5cdH1cblxuXHR2bS5vblJlc2l6ZUZ1bmN0aW9uID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG5hdmJhcklucHV0cyA9IGFuZ3VsYXIuZWxlbWVudCgnLm5hdmJhcklucHV0cycpO1xuXHRcdG5hdmJhcklucHV0cy5jc3MoJ3dpZHRoJywgKCR3aW5kb3cub3V0ZXJXaWR0aCAtIDI2KSArICdweCcpO1xuXHR9XG5cblx0Ly8gUmVnaXN0ZXIgdGhlIGNhbGxiYWNrIHRvIGJlIGZpcmVkIGV2ZXJ5IHRpbWUgYXV0aCBzdGF0ZSBjaGFuZ2VzXG5cdHJlZi5vbkF1dGgoYXV0aERhdGFDYWxsYmFjayk7XG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignVXNlckV2ZW50c0NvbnRyb2xsZXInLCBVc2VyRXZlbnRzQ29udHJvbGxlcik7XG5cblVzZXJFdmVudHNDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJywgJyRsb2NhdGlvbicsICckcm91dGVQYXJhbXMnLCAnJGZpcmViYXNlT2JqZWN0J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gVXNlckV2ZW50c0NvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCAkbG9jYXRpb24sICRyb3V0ZVBhcmFtcywgJGZpcmViYXNlT2JqZWN0KSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdHZhciBmYlVSTCA9ICdodHRwczovL21lZXR1cHBsYW5uZXIuZmlyZWJhc2Vpby5jb20vJztcblx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdHZhciB1c2VyRXZlbnRzID0gcmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCdldmVudHMnKTtcblx0dmFyIGN1cnJlbnRVc2VyQmlvID0gcmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCdiaW8nKTtcblx0dmFyIHVzZXJFdmVudHNTbmFwc2hvdDtcblxuXHQvL2JpbmRpbmcgaW1wb3J0YW50IHZhcmlhYmxlc1xuXHR2bS5ldmVudHMgPSAkZmlyZWJhc2VPYmplY3QodXNlckV2ZW50cyk7XG5cblx0dm0uc2hvd0RlY2xpbmUgPSBmYWxzZTtcblx0XG5cdGN1cnJlbnRVc2VyQmlvLmNoaWxkKCduYW1lJykub24oJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHR2bS5jdXJyZW50VXNlck5hbWUgPSBzbmFwc2hvdC52YWwoKTtcblx0XHQkbG9nLmluZm8oJ2dvdCB0aGUgdXNlciBuYW1lJyk7XG5cdFx0JHNjb3BlLiRhcHBseSgpO1xuXHR9LCBmdW5jdGlvbihlcnJvck9iamVjdCkge1xuXHRcdCRsb2cuaW5mbyhcIlRoZSByZWFkIGZhaWxlZDogXCIgKyBlcnJvck9iamVjdC5jb2RlKTtcblx0fSk7XG5cblx0Ly9kZWNsYXJlIGxvY2FsIG1ldGhvZHNcblx0ZnVuY3Rpb24gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKSB7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KHVuaXhUaW1lKSk7XG5cdH07XG5cblx0ZnVuY3Rpb24gZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKSB7XG5cdFx0cmV0dXJuIERhdGUucGFyc2UoZGF0ZVRpbWUpO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIGdlbmVyYXRlRXZlbnRJRChkYXRlLCBub09mRXZlbnRzQWxyZWFkeSkge1xuXHRcdHJldHVybiAoZGF0ZSAqIDEwKSArIG5vT2ZFdmVudHNBbHJlYWR5O1xuXHR9XG5cblx0Ly9kZWNsYXJlIHZpZXcgbWV0aG9kc1xuXHRmdW5jdGlvbiBldmVudFJlZGlyZWN0KHBhdGgsIGV2ZW50SUQsIGhvc3RJZCkge1xuXHRcdHZhciBmdWxsUGF0aCA9IHBhdGggKyAnLycgKyBldmVudElEICsgJy8nICsgaG9zdElkICsgJy8nKyAkcm91dGVQYXJhbXMudWlkICsgJy8nICsgJHJvdXRlUGFyYW1zLnRva2VuO1xuXHRcdC8vcmVkaXJlY3Rcblx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIHRvOiAnICsgZnVsbFBhdGgpO1xuXHRcdCRsb2NhdGlvbi5wYXRoKGZ1bGxQYXRoKTtcblx0fVxuXG5cdHZtLmV2ZW50c0FyZUJlaW5nSG9zdGVkID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGV2ZW50Rm91bmQgPSBmYWxzZTtcblx0XHRmb3IoZWxlbWVudCBpbiB2bS5ldmVudHMuaG9zdGluZykge1xuXHRcdFx0aWYoZWxlbWVudCAhPSAndXBkYXRlZCcpe1xuXHRcdFx0XHRldmVudEZvdW5kID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGV2ZW50Rm91bmQ7XG5cdH1cblxuXHR2bS5ldmVudEludml0YXRpb25zUGVuZGluZyA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBldmVudEZvdW5kID0gZmFsc2U7XG5cdFx0Zm9yKGVsZW1lbnQgaW4gdm0uZXZlbnRzLnBlbmRpbmcpIHtcblx0XHRcdGlmKGVsZW1lbnQgIT0gJ3VwZGF0ZWQnKXtcblx0XHRcdFx0ZXZlbnRGb3VuZCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBldmVudEZvdW5kO1xuXHR9XG5cblx0dm0uYXR0ZW5kaW5nRXZlbnRzID0gZnVuY3Rpb24oZ3Vlc3RMaXN0KSB7XG5cdFx0dmFyIGV2ZW50Rm91bmQgPSBmYWxzZTtcblx0XHRmb3IoZWxlbWVudCBpbiB2bS5ldmVudHMuYXR0ZW5kaW5nKSB7XG5cdFx0XHRpZihlbGVtZW50ICE9ICd1cGRhdGVkJyl7XG5cdFx0XHRcdGV2ZW50Rm91bmQgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gZXZlbnRGb3VuZDtcblx0fVxuXG5cdHZtLnBlcmNlbnRSU1ZQZWQgPSBmdW5jdGlvbihndWVzdExpc3QpIHtcdFx0XG5cdFx0aWYoZ3Vlc3RMaXN0KSB7XG5cdFx0XHRyZXR1cm4gKHZtLnRvdGFsQXR0ZW5kaW5nKGd1ZXN0TGlzdCkgLyB2bS50b3RhbEludml0ZWQoZ3Vlc3RMaXN0KSkgKiAxMDA7XG5cdFx0fVxuXHRcdGVsc2UgcmV0dXJuIDA7XG5cdH1cblxuXHR2bS50b3RhbEF0dGVuZGluZyA9IGZ1bmN0aW9uKGd1ZXN0TGlzdCkge1xuXHRcdGlmKGd1ZXN0TGlzdCkge1xuXHRcdFx0dmFyIGF0dGVuZGluZyA9IDA7XG5cdFx0XHRhbmd1bGFyLmZvckVhY2goZ3Vlc3RMaXN0LCBmdW5jdGlvbihndWVzdCwgaWQpIHtcblx0XHRcdFx0aWYoZ3Vlc3QuYXR0ZW5kaW5nID09IHRydWUpIGF0dGVuZGluZysrO1xuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gYXR0ZW5kaW5nO1xuXHRcdH1cblx0XHRlbHNlIHJldHVybiAwO1xuXHR9XG5cblx0dm0udG90YWxJbnZpdGVkID0gZnVuY3Rpb24oZ3Vlc3RMaXN0KSB7XG5cdFx0aWYoZ3Vlc3RMaXN0KSB7XG5cdFx0XHR2YXIgaW52aXRlZCA9IDA7XG5cdFx0XHRhbmd1bGFyLmZvckVhY2goZ3Vlc3RMaXN0LCBmdW5jdGlvbihndWVzdCwgaWQpIHtcblx0XHRcdFx0aW52aXRlZCsrO1xuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gaW52aXRlZDtcblx0XHR9XG5cdFx0ZWxzZSByZXR1cm4gMDtcblx0fVxuXG5cdHZtLmFjY2VwdEV2ZW50SW52aXRhdGlvbiA9IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0Lypcblx0XHQkbG9nLmluZm8oZXZlbnQuaG9zdCk7XG5cdFx0JGxvZy5pbmZvKGV2ZW50LmlkKTtcblx0XHQvL3VwZGF0ZSBob3N0cycgbGlzdHNcblx0XHRyZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQoZXZlbnQuaG9zdCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdob3N0aW5nJykuY2hpbGQoZXZlbnQuaWQpLmNoaWxkKCdndWVzdExpc3QnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS51cGRhdGUoe1xuXHRcdFx0YXR0ZW5kaW5nOiB0cnVlLFxuXHRcdFx0c3RhdHVzOiAnYXR0bmRuZydcblx0XHR9KTtcblxuXHRcdC8vdXBkYXRlIGd1ZXN0J3MgbGlzdHNcblx0XHQvL2FkZCB0byB0aGUgYXR0ZW5kaW5nIGxpc3QgLSBvbiB0aGUgc2VydmVyXG5cdFx0dXNlckV2ZW50cy5jaGlsZCgnYXR0ZW5kaW5nJykuY2hpbGQoZXZlbnQuaG9zdCkuY2hpbGQoZXZlbnQuaWQpLnNldCh7XG5cdFx0XHRpZDogZXZlbnQuaWQsXG5cdFx0XHRob3N0OiBldmVudC5ob3N0LFxuXHRcdFx0ZXZlbnRUaW1lczoge1xuXHRcdFx0XHRzdGFydDogdm0uZXZlbnRzLnBlbmRpbmdbZXZlbnQuaG9zdF1bZXZlbnQuaWRdLmV2ZW50VGltZXMuc3RhcnQsXG5cdFx0XHRcdGVuZDogdm0uZXZlbnRzLnBlbmRpbmdbZXZlbnQuaG9zdF1bZXZlbnQuaWRdLmV2ZW50VGltZXMuZW5kXG5cdFx0XHR9LFxuXHRcdFx0bmFtZTogdm0uZXZlbnRzLnBlbmRpbmdbZXZlbnQuaG9zdF1bZXZlbnQuaWRdLm5hbWVcblx0XHR9KTtcblx0XHQvL2FkZCB0byB0aGUgYXR0ZW5kaW5nIGxpc3QgLSBpbiB0aGUgYnJvd3NlclxuXHRcdHZtLmV2ZW50cy5hdHRlbmRpbmdbZXZlbnQuaG9zdF1bZXZlbnQuaWRdID0ge1xuXHRcdFx0aWQ6IGV2ZW50LmlkLFxuXHRcdFx0aG9zdDogZXZlbnQuaG9zdCxcblx0XHRcdGV2ZW50VGltZXM6IHtcblx0XHRcdFx0c3RhcnQ6IHZtLmV2ZW50cy5wZW5kaW5nW2V2ZW50Lmhvc3RdW2V2ZW50LmlkXS5ldmVudFRpbWVzLnN0YXJ0LFxuXHRcdFx0XHRlbmQ6IHZtLmV2ZW50cy5wZW5kaW5nW2V2ZW50Lmhvc3RdW2V2ZW50LmlkXS5ldmVudFRpbWVzLmVuZFxuXHRcdFx0fSxcblx0XHRcdG5hbWU6IHZtLmV2ZW50cy5wZW5kaW5nW2V2ZW50Lmhvc3RdW2V2ZW50LmlkXS5uYW1lXG5cdFx0fTtcblxuXHRcdC8vcmVtb3ZlIGZyb20gdGhlIHBlbmRpbmcgbGlzdCAtIG9uIHRoZSBzZXJ2ZXJcblx0XHR1c2VyRXZlbnRzLmNoaWxkKCdwZW5kaW5nJykuY2hpbGQoZXZlbnQuaG9zdCkuY2hpbGQoZXZlbnQuaWQpLnJlbW92ZSgpO1xuXHRcdC8vcmVtb3ZlIGZyb20gdGhlIHBlbmRpbmcgbGlzdCAtIGluIHRoZSBicm93c2VyXG5cdFx0dm0uZXZlbnRzLnBlbmRpbmdbZXZlbnQuaG9zdF1bZXZlbnQuaWRdID0ge307XG5cdFx0Ki9cblx0fVxuXG5cdHZtLnJlZGlyZWN0VG9Ib3N0ZWRFdmVudCA9IGZ1bmN0aW9uKGV2ZW50SUQpIHtcblx0XHQkbG9nLmluZm8oJ3lvdVxcJ3JlIGFjY2Vzc2luZyBldmVudCAnICsgZXZlbnRJRCk7XG5cblx0XHQvL3JlZGlyZWN0IHRvIHRoZSBldmVudFxuXHRcdGV2ZW50UmVkaXJlY3QoJy9ldmVudCcsIGV2ZW50SUQsICRyb3V0ZVBhcmFtcy51aWQpO1xuXHR9XG5cblx0dm0ucmVkaXJlY3RUbzNyZFBhcnR5RXZlbnQgPSBmdW5jdGlvbihldmVudCwgaW52aXRlU3RhdHVzKSB7XG5cdFx0JGxvZy5pbmZvKGV2ZW50KTtcblxuXHRcdC8vZ2V0dGluZyB0aGUgaG9zdCdzIElkXG5cdFx0aWYoaW52aXRlU3RhdHVzID09ICdwZW5kaW5nJykge1xuXHRcdFx0JGxvZy5pbmZvKCdhY2Nlc3NpbmcgZnJvbSBhIHBlbmRpbmcgaW52aXRhdGlvbicpO1xuXHRcdFx0JGxvZy5pbmZvKGV2ZW50KTtcblx0XHRcdGV2ZW50UmVkaXJlY3QoJy9ldmVudCcsIGV2ZW50LmlkLCBldmVudC5ob3N0KTtcblxuXHRcdH0gZWxzZSBpZihpbnZpdGVTdGF0dXMgPT0gJ2F0dGVuZGluZycpIHtcblx0XHRcdCRsb2cuaW5mbygnYWNjZXNzaW5nIGZyb20gYW4gcnN2cGVkIGludml0YXRpb24nKTtcblx0XHRcdGV2ZW50UmVkaXJlY3QoJy9ldmVudCcsIGV2ZW50LmlkLCBldmVudC5ob3N0KTtcblx0XHR9XG5cblx0XHQvL3JlZGlyZWN0aW5nIHRvIHRoZSBldmVudFxuXG5cdH1cblxuXHR2bS5jcmVhdGVOZXdFdmVudCA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2cuaW5mbygneW91XFwncmUgY3JlYXRpbmcgYSBuZXcgZXZlbnQhJyk7XG5cblx0XHQvL2RlZmluZSB0aGUgZXZlbnRJRFxuXHRcdHZhciBkYXRlID0gbmV3IERhdGUoKTsgXG5cdFx0XHRpZih2bS5ldmVudHMuaG9zdGluZykgbm9PZkV2ZW50c0FscmVhZHkgPSBPYmplY3Qua2V5cyh2bS5ldmVudHMuaG9zdGluZykubGVuZ3RoO1xuXHRcdFx0ZWxzZSBub09mRXZlbnRzQWxyZWFkeSA9IDA7XG5cdFx0dmFyIGV2ZW50SUQgPSBnZW5lcmF0ZUV2ZW50SUQoZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGUpLCBub09mRXZlbnRzQWxyZWFkeSk7XG5cblx0XHQvL2NyZWF0ZSBldmVudCBtb2RlbCB0byBzdGFydCB3aXRoXG5cdFx0Ly8kbG9nLmluZm8odm0uZXZlbnRzWydob3N0aW5nJ10pO1xuXHRcdHZtLmV2ZW50cy5ob3N0aW5nW2V2ZW50SURdID0ge1xuXHRcdFx0aWQ6IGV2ZW50SUQsXG5cdFx0XHRldmVudFRpbWVzOiB7XG5cdFx0XHRcdHN0YXJ0OiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZSksXG5cdFx0XHRcdGVuZDogZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGUpXG5cdFx0XHR9LFxuXHRcdFx0aG9zdDogeyBcblx0XHRcdFx0aWQ6ICRyb3V0ZVBhcmFtcy51aWQsXG5cdFx0XHRcdG5hbWU6IHZtLmN1cnJlbnRVc2VyTmFtZVxuXHRcdFx0fVxuXHRcdH07XG5cblx0XHQvL2RlbGV0ZSB0aGUgJ3VwZGF0ZWQnIGZpZWxkXG5cdFx0aWYodm0uZXZlbnRzLmhvc3RpbmcudXBkYXRlZCA9PSAnJyB8fCB2bS5ldmVudHMuaG9zdGluZy51cGRhdGVkKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2RlbGV0aW5nIHRoZSB1cGRhdGVkIGZpZWxkJyk7XG5cdFx0XHRkZWxldGUgdm0uZXZlbnRzLmhvc3RpbmcudXBkYXRlZDtcblx0XHR9XG5cdFx0Ly9zYXZlIHRoZSBuZXcgZXZlbnRcblx0XHQvKlxuXHRcdHZtLmV2ZW50cy4kc2F2ZSgpLnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHQkbG9nLmluZm8oJ1Byb2ZpbGUgc2F2ZWQhJyk7XG5cdFx0XHQkbG9nLmluZm8odm0uZXZlbnRzLmhvc3RpbmdbZXZlbnRJRF0pO1xuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHQkbG9nLmluZm8oJ0Vycm9yIScpO1xuXHRcdH0pOyovXG5cblx0XHQvL3JlZGlyZWN0IHRvIHRoZSBuZXcgRXZlbnQgUGFnZVxuXHRcdGV2ZW50UmVkaXJlY3QoJy9ldmVudCcsIGV2ZW50SUQsICRyb3V0ZVBhcmFtcy51aWQpO1xuXHR9XG5cblx0Ly9leGVjdXRlIHNjcmlwdHNcblx0JGxvZy5pbmZvKCdpbnRvIHRoZSB1c2VyIEV2ZW50cyBjb250cm9sbGVyJyk7XG5cdCRsb2cuaW5mbyh2bS5ldmVudHMpO1xuXG59XG4iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdVc2VySW5mb3JtYXRpb25Db250cm9sbGVyJywgVXNlckluZm9ybWF0aW9uQ29udHJvbGxlcik7XG5cblVzZXJJbmZvcm1hdGlvbkNvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICckZG9jdW1lbnQnLCAndXNlckRhdGEnLCAndHJhZmZpY1ZhbGV0J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gVXNlckluZm9ybWF0aW9uQ29udHJvbGxlcigkbG9nLCAkZG9jdW1lbnQsIHVzZXJEYXRhLCB0cmFmZmljVmFsZXQpIHtcblx0dmFyIHZtID0gdGhpcztcblx0XG5cdC8vbG9jYWwgdmFyaWFibGVzXG5cdHZhciBjdXJyZW50VXNlciA9IHVzZXJEYXRhO1xuXG5cdC8vdmlldyBtb2RlbCB2YXJpYWJsZXNcblx0dm0udXNlciA9IHt9O1xuXHR2bS50ZW1wQmlydGhkYXk7XG5cdHZtLnZpZXcgPSB7XG5cdFx0ZGF0YVRvU2F2ZTogZmFsc2UsXG5cdFx0aXNEYXRhOiBmYWxzZSxcblx0XHRidG5Nc3NnOiAnTW92ZSBPbi4uLicsXG5cdFx0cHJvY2VlZEJ0bjogJ2J0biBidG4tcHJpbWFyeSdcblx0fTtcblxuXHQvL2xvY2FsIG1ldGhvZHNcblx0ZnVuY3Rpb24gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKSB7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KHVuaXhUaW1lKSk7XG5cdH07XG5cblx0ZnVuY3Rpb24gZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKSB7XG5cdFx0cmV0dXJuIERhdGUucGFyc2UoZGF0ZVRpbWUpO1xuXHR9O1xuXG5cdC8vdmlldyBhY2Nlc3NpYmxlIG1ldGhvZHNcblx0dm0uY2hlY2tWYWx1ZXMgPSBmdW5jdGlvbigpIHtcblx0XHRpZiggIShhbmd1bGFyLmlzVW5kZWZpbmVkKHZtLnVzZXIuY29tcGFueSkgfHwgdm0udXNlci5jb21wYW55ID09PSAnJykgfHwgXG5cdFx0XHQhKGFuZ3VsYXIuaXNVbmRlZmluZWQodm0udXNlci50aXRsZSkgfHwgdm0udXNlci50aXRsZSA9PT0gJycpIHx8IFxuXHRcdFx0IShhbmd1bGFyLmlzVW5kZWZpbmVkKHZtLnVzZXIuZG9iKSB8fCB2bS51c2VyLmRvYiA9PT0gJycpKSBcblx0XHR7XG5cdFx0XHR2bS52aWV3LmRhdGFUb1NhdmUgPSB0cnVlO1xuXHRcdFx0dm0udmlldy5wcm9jZWVkQnRuID0gJ2J0biBidG4tc3VjY2Vzcyc7XG5cdFx0XHR2bS52aWV3LmJ0bk1zc2cgPSAnU2F2ZSAmIENvbnRpbnVlJztcblx0XHR9IGVsc2Uge1xuXHRcdFx0dm0udmlldy5kYXRhVG9TYXZlID0gZmFsc2U7XG5cdFx0XHR2bS52aWV3LnByb2NlZWRCdG4gPSAnYnRuIGJ0bi1wcmltYXJ5Jztcblx0XHRcdHZtLnZpZXcuYnRuTXNzZyA9ICdNb3ZlIE9uLi4uJztcdFxuXHRcdH1cblxuXHR9XG5cblx0dm0udXBkYXRlRE9CID0gZnVuY3Rpb24oKSB7XG5cdFx0dm0udXNlci5kb2IgPSBkYXRlVGltZVRvVW5peFRpbWUodm0udGVtcEJpcnRoZGF5KTtcblx0fVxuXG5cdHZtLnNhdmVBbmRNb3ZlT24gPSBmdW5jdGlvbigpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciB1c2VySW5mb1NoZXJwYSA9IHRyYWZmaWNWYWxldDtcblxuXHRcdC8vY29udmVydCBET0IgdG8gYmUgc2F2ZVxuXHRcdHZtLnVwZGF0ZURPQigpO1xuXHRcdFxuXHRcdC8vaWYgdGhlcmUgaXMgbmV3IGRhdGEsIHNhdmUgaXRcblx0XHRpZih2bS52aWV3LmlzRGF0YSkge1xuXHRcdFx0Y3VycmVudFVzZXIudXBkYXRlQmlvKHZtLnVzZXIpO1xuXHRcdH1cblx0XHRcblx0XHQvL21vdmUgb25cblx0XHR1c2VySW5mb1NoZXJwYS5yZWRpcmVjdFRvKCcvdXNlckV2ZW50cycsIHZtLnVzZXIudWlkKVxuXHR9XG5cblx0ZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHtcblx0XHQkbG9nLmluZm8oJ2luaXRpYWxpemluZyB0aGUgdXNlciBpbmZvcm1hdGlvbiBwYWdlJyk7XG5cdFx0Ly9sb2FkIEZhc3RDbGlja1xuXHRcdC8vRmFzdENsaWNrLmF0dGFjaCgkZG9jdW1lbnQuYm9keSk7XG5cblx0XHQvL2xvYWQgdXNlckRhdGFcblx0XHRjdXJyZW50VXNlci5sb2FkQmlvKClcblx0XHQudGhlbihmdW5jdGlvbih1c2VyRGF0YSkge1xuXHRcdFx0Ly9hc3NpZ24gdXNlciB2YWx1ZXNcblx0XHRcdHZtLnVzZXIgPSB1c2VyRGF0YTtcblxuXHRcdFx0Ly9idWlsZCB0ZW1wQmlydGhkYXlcblx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHVzZXJEYXRhLmRvYikgJiYgdXNlckRhdGEuZG9iICE9PSAnJykge1xuXHRcdFx0XHR2bS50ZW1wQmlydGhkYXkgPSB1bml4VGltZVRvRGF0ZVRpbWUodXNlckRhdGEuZG9iKVxuXHRcdFx0fVxuXG5cdFx0fSk7XG5cdFx0XG5cdFxuXHR9XG5cblx0Ly9ldmVudCBMaXN0ZW5lcnNcblx0LyppZiAoJ2FkZEV2ZW50TGlzdGVuZXInIGluICRkb2N1bWVudCkge1xuXHQgICAgJGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHtcblx0ICAgIFx0Ly9vbiBwYWdlIGxvYWRcblx0ICAgIFx0aW5pdGlhbGl6ZSgpO1xuXHQgICAgICAgIFxuXHQgICAgfSwgZmFsc2UpO1xuXHR9Ki9cblx0Ly9ydW4gcHJvY2Vzc2VzXG5cdGluaXRpYWxpemUoKTsgLy93aXRoIGludGVybmV0IHVzZSB0aGUgZXZlbnQgbGlzdGVuZXIgaW5zdGVhZFxufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmZhY3RvcnkoJ2F1dGhTZXJ2aWNlJywgYXV0aFNlcnZpY2UpO1xuXG5hdXRoU2VydmljZS4kaW5qZWN0ID0gWyckbG9nJywgJyRxJywgJyRsb2NhdGlvbiddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGF1dGhTZXJ2aWNlKCRsb2csICRxLCAkbG9jYXRpb24pIHtcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHR2YXIgYWxsQXV0aFNlcnZpY2VzID0ge1xuXHRcdGlzTG9nZ2VkSW46IGlzTG9nZ2VkSW5cblx0fTtcblxuXHRmdW5jdGlvbiBhdXRoRGF0YUNhbGxiYWNrKGF1dGhEYXRhKSB7XG5cdCAgXG5cdCAgaWYgKGF1dGhEYXRhKSB7XG5cdCAgICAkbG9nLmluZm8oXCJVc2VyIFwiICsgYXV0aERhdGEudWlkICsgXCIgaXMgbG9nZ2VkIGluIHdpdGggXCIgKyBhdXRoRGF0YS5wcm92aWRlcik7XG5cdCAgfSBlbHNlIHtcblx0ICAgICRsb2cuaW5mbyhcIlVzZXIgaXMgbG9nZ2VkIG91dC4uLmR1bXBpbmcgdGhlbSBiYWNrIHRvIGxhbmRpbmcgcGFnZVwiKTtcblx0ICAgIC8vZHVtcCB0aGUgdXNlciBiYWNrIG91dFxuXHQgICAgJGxvY2F0aW9uLnBhdGgoJy8nKTtcblx0ICB9XG5cdH1cblxuXHRmdW5jdGlvbiBpc0xvZ2dlZEluKCkge1xuXHRcdC8vY2hlY2sgdGhlIHVzZXIgYXV0aGVudGljYWlvbiBzdGF0ZVxuXHRcdCRsb2cuaW5mbygnbG9nZ2luZyBmcm9tIHRoZSBpc0xvZ2dlZEluIE1ldGhvZCcpO1xuXHRcdC8vcmVmLm9uQXV0aChhdXRoRGF0YUNhbGxiYWNrKTtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXHRcblx0cmV0dXJuIGFsbEF1dGhTZXJ2aWNlcztcblxufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmZhY3RvcnkoJ2JhY2tlbmRTZXJ2aWNlcycsIGJhY2tlbmRTZXJ2aWNlcyk7XG5cbmJhY2tlbmRTZXJ2aWNlcy4kaW5qZWN0ID0gWyckbG9nJywgJyRxJywgJyR3aW5kb3cnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBiYWNrZW5kU2VydmljZXMoJGxvZywgJHEsICR3aW5kb3cpIHtcblx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHR2YXIgZmJVUkwgPSAnaHR0cHM6Ly9tZWV0dXBwbGFubmVyLmZpcmViYXNlaW8uY29tLyc7XG5cdHZhciBhbGxCYWNrZW5kU2VydmljZXMgPSB7XG5cdFx0dXRmOF90b19iNjQ6IHV0ZjhfdG9fYjY0LFxuXHRcdGI2NF90b191dGY4OiBiNjRfdG9fdXRmOCxcblx0XHR1bml4VGltZVRvRGF0ZVRpbWU6IHVuaXhUaW1lVG9EYXRlVGltZSxcblx0XHRkYXRlVGltZVRvVW5peFRpbWU6IGRhdGVUaW1lVG9Vbml4VGltZSxcdFx0XG5cdFx0Y3JlYXRlTmV3VXNlcjogY3JlYXRlTmV3VXNlcixcblx0XHRMb2dpblJlZ2lzdGVyZWRVc2VyOiBMb2dpblJlZ2lzdGVyZWRVc2VyLFxuXHRcdGFkZE5ld1VzZXJUb0RhdGFiYXNlOiBhZGROZXdVc2VyVG9EYXRhYmFzZSxcblx0XHRhZGROZXdVc2VyVG9SZWdVc2Vyc0xpc3Q6IGFkZE5ld1VzZXJUb1JlZ1VzZXJzTGlzdCxcblx0XHR1cGxvYWRVc2VyRGF0YTogdXBsb2FkVXNlckRhdGEsXG5cdFx0ZG93bmxvYWRVc2VyRGF0YTogZG93bmxvYWRVc2VyRGF0YSxcblx0XHRnZXRVc2VyQmlvOiBnZXRVc2VyQmlvXG5cdH07XG5cblx0ZnVuY3Rpb24gdXRmOF90b19iNjQoc3RyKSB7XG5cdFx0cmV0dXJuIGJ0b2Eoc3RyKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGI2NF90b191dGY4KHN0cikge1xuICAgIFx0cmV0dXJuIGF0b2Ioc3RyKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHVuaXhUaW1lVG9EYXRlVGltZSh1bml4VGltZSkge1xuXHRcdHJldHVybiBuZXcgRGF0ZShwYXJzZUludCh1bml4VGltZSkpO1xuXHR9XG5cblx0ZnVuY3Rpb24gZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKSB7XG5cdFx0cmV0dXJuIERhdGUucGFyc2UoZGF0ZVRpbWUpO1xuXHR9XG5cblx0ZnVuY3Rpb24gY3JlYXRlTmV3VXNlcihlbWFpbCwgcGFzc3dvcmQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGZpcmVCYXNlQWNjb3VudHMgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdFxuXHRcdC8vcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFxuXHRcdFx0LypmaXJlQmFzZUFjY291bnRzLmNyZWF0ZVVzZXIoe1xuXHRcdFx0XHRcblx0XHRcdFx0ZW1haWw6IGVtYWlsLFxuXHRcdFx0XHRwYXNzd29yZDogcGFzc3dvcmRcblx0XHRcdFxuXHRcdFx0fSxmdW5jdGlvbihlcnJvciwgdXNlckRhdGEpIHtcblx0XHRcdFx0XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoJ0Vycm9yIGNyZWF0aW5nIHVzZXI6ICcgKyBlcnJvcik7XG5cblx0XHRcdFx0ZWxzZSByZXNvbHZlKHVzZXJEYXRhKTtcblx0XHRcdH0qL1xuXHRcdFx0JHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXNvbHZlKHt1aWQ6MTIzNDU2NyB9KTtcblx0XHRcdH0sIDIwMDApO1xuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gYWRkTmV3VXNlclRvRGF0YWJhc2UodWlkLCBuYW1lLCBlbWFpbCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgYXBwVXNlcnMgPSBhcHAuY2hpbGQoJ1VzZXJzLycgKyB1aWQpO1xuXHRcdHZhciBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XG5cblx0XHQvL3JldHVybiBhIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcblx0XHRcdC8qYXBwVXNlcnMuc2V0KHsgXG5cdFx0XHRcdCdiaW8nOiB7XG5cdFx0XHRcdFx0J25hbWUnOiBuYW1lLFxuXHRcdFx0XHRcdCdlbWFpbCc6IGVtYWlsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdCdldmVudHMnOiB7XG5cdFx0XHRcdFx0J3BlbmRpbmcnOiB7XG5cdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdCdob3N0aW5nJzoge1xuXHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQnYXR0ZW5kaW5nJzoge1xuXHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQnY29tcGxldGVkJzoge1xuXHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblxuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KCdEYXRhIGNvdWxkIG5vdCBiZSBzYXZlZDogJyArIGVycm9yKTtcblx0XHRcdFx0XG5cdFx0XHRcdGVsc2UgcmVzb2x2ZSgnRGF0YSBzYXZlZCBzdWNjZXNzZnVsbHkuJyk7XG5cblx0XHRcdH0pOyovXG5cblx0XHRcdCR3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0cmVzb2x2ZSgnRGF0YSBzYXZlZCBzdWNjZXNzZnVsbHkuJyk7XG5cdFx0XHR9LCAyMDAwKTtcblxuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBhZGROZXdVc2VyVG9SZWdVc2Vyc0xpc3QodWlkLCBlbWFpbCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgUmVnaXN0ZXJlZFVzZXJzTGlzdCA9IGFwcC5jaGlsZCgnVWlkcycpLmNoaWxkKHV0ZjhfdG9fYjY0KGVtYWlsKSk7XG5cblx0XHQvL3JldHVybiBhIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcblx0XHRcdC8qUmVnaXN0ZXJlZFVzZXJzTGlzdC5zZXQodWlkLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KFwiRGF0YSBjb3VsZCBub3QgYmUgc2F2ZWQuIFwiICsgZXJyb3IpO1xuXHRcdFx0XHRlbHNlIHJlc29sdmUoXCJ1aWQgY3JlYXRlZCBzdWNlc3NmdWxseS5cIik7XG5cdFx0XHR9KTsqL1xuXG5cdFx0XHQkd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJlc29sdmUoXCJ1aWQgY3JlYXRlZCBzdWNlc3NmdWxseS5cIik7XG5cdFx0XHR9LCAyMDAwKTtcblxuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBMb2dpblJlZ2lzdGVyZWRVc2VyKGVtYWlsLCBwYXNzd29yZCkge31cblxuXHRmdW5jdGlvbiB1cGxvYWRVc2VyRGF0YShhbGxVc2VyRGF0YSkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgY3VycmVudFVzZXIgPSBhcHAuY2hpbGQoJ1VzZXJzLycgKyBhbGxVc2VyRGF0YS51aWQpO1xuXG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL3RoZSBhY3R1YWwgY2FsbFxuXHRcdFx0LypjdXJyZW50VXNlci51cGRhdGUoYWxsVXNlckRhdGEsIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoJ1RoZXJlIHdhcyBhIHByb2JsZW0gdXBkYXRpbmcgdGhhdCByZWNvcmQ6ICcgKyBlcnJvcik7XG5cdFx0XHRcdGVsc2UgcmVzb2x2ZSgnYWxsIHVzZXIgZGF0YSB1cGxvYWRlZCBzdWNjZXNzZnVsbHknKTtcblx0XHRcdH0pOyovXG5cdFx0XHQkd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJlc29sdmUoJ2FsbCB1c2VyIGRhdGEgdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5Jyk7XG5cdFx0XHR9LCAyMDAwKTtcblxuXHRcdH0pO1xuXHRcdFxuXHR9XG5cblx0ZnVuY3Rpb24gZG93bmxvYWRVc2VyRGF0YSgpIHtcblxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0VXNlckJpbygpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0Ly92YXIgdXNlckJpbyA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZChhbGxVc2VyRGF0YS51aWQpLmNoaWxkKGJpbyk7XG5cblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vdGhlIGFjdHVhbCBjYWxsXG5cdFx0XHQvKmNhbGwgZ29lcyBoZXJlKi9cblx0XHRcdCR3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0cmVzb2x2ZSh7XG5cdFx0XHRcdFx0dWlkOiAnc29haXUwLTkyODNtLW1zb1NBLTJtMy1zcmV3Jyxcblx0XHRcdFx0XHRuYW1lOiAnSWFuIE1jQWxsaXN0ZXInLFxuXHRcdFx0XHRcdGVtYWlsOiAnaWVtY2FsbGlzdGVyQGdtYWlsLmNvbScsXG5cdFx0XHRcdFx0Y29tcGFueTogJycsXG5cdFx0XHRcdFx0dGl0bGU6ICcnXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSwgMjAwMCk7XG5cblx0XHR9KTtcblx0fVxuXHQvL3JldHVybiB0aGUgb2JqZWN0XG5cdHJldHVybiBhbGxCYWNrZW5kU2VydmljZXM7XG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuZmFjdG9yeSgndHJhZmZpY1ZhbGV0JywgdHJhZmZpY1ZhbGV0KTtcblxudHJhZmZpY1ZhbGV0LiRpbmplY3QgPSBbJyRsb2cnLCAnJGxvY2F0aW9uJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gdHJhZmZpY1ZhbGV0KCRsb2csICRsb2NhdGlvbikge1xuXHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdHZhciBhbGxUcmFmZmljQ29udHJvbHMgPSB7XG5cdFx0cmVkaXJlY3RUbzogcmVkaXJlY3RUb1xuXHR9O1xuXG5cdGZ1bmN0aW9uIHJlZGlyZWN0VG8ocGF0aCwgcGFyYW0xLCBwYXJhbTIpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChwYXJhbTEpKSB7XG5cdFx0XHRwYXRoID0gcGF0aCArICcvJyArIHBhcmFtMTtcblxuXHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQocGFyYW0yKSkge1xuXHRcdFx0XHQvL2dvIHRvIHBhdGggd2l0aCAyIHBhcmFtc1xuXHRcdFx0XHRwYXRoID0gcGF0aCArICcvJyArIHBhcmFtMjtcblx0XHRcdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyBub3cgdG8gJyArIHBhdGgpO1xuXHRcdFx0XHQkbG9jYXRpb24ucGF0aChwYXRoKTtcblx0XHRcdH1cblx0XHRcdC8vZ28gd2l0aCAxIHBhcmFtXG5cdFx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIG5vdyB0byAnICsgcGF0aCk7XG5cdFx0XHQkbG9jYXRpb24ucGF0aChwYXRoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly9qdXN0IGdvIHRvIHBhdGhcblx0XHRcdCRsb2cuaW5mbygncmVkaXJlY3Rpbmcgbm93IHRvICcgKyBwYXRoKTtcblx0XHRcdCRsb2NhdGlvbi5wYXRoKHBhdGgpO1xuXHRcdH1cblxuXHR9XG5cblx0cmV0dXJuIGFsbFRyYWZmaWNDb250cm9scztcbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5mYWN0b3J5KCd1c2VyRGF0YScsIHVzZXJEYXRhKTtcblxudXNlckRhdGEuJGluamVjdCA9IFsnJGxvZycsICckcScsICdiYWNrZW5kU2VydmljZXMnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiB1c2VyRGF0YSgkbG9nLCAkcSwgYmFja2VuZFNlcnZpY2VzKSB7XG5cdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0dmFyIGN1cnJlbnRVc2VyID0ge1xuXHRcdHVpZDogJycsXG5cdFx0bmFtZTogJycsXG5cdFx0ZW1haWw6ICcnLFxuXHRcdGNvbXBhbnk6ICcnLFxuXHRcdHRpdGxlOiAnJyxcblx0XHRkb2I6IDAsXG5cdFx0aG9zdGluZzoge30sXG5cdFx0cGVuZGluZzoge30sXG5cdFx0YXR0ZW5kaW5nOiB7fSxcblx0XHRjb21wbGV0ZWQ6IHt9XG5cdH07XG5cblx0dmFyIGFsbFVzZXJEYXRhID0ge1xuXHRcdGdldFVJRDogZ2V0VUlELFxuXHRcdGdldE5hbWU6IGdldE5hbWUsXG5cdFx0Z2V0RW1haWw6IGdldEVtYWlsLFxuXHRcdGdldENvbXBhbnk6IGdldENvbXBhbnksXG5cdFx0Z2V0VGl0bGU6IGdldFRpdGxlLFxuXHRcdGdldERPQjogZ2V0RE9CLFxuXHRcdGdldFVzZXJFdmVudHM6IGdldFVzZXJFdmVudHMsXG5cdFx0XG5cdFx0c2V0VUlEOiBzZXRVSUQsXG5cdFx0c2V0TmFtZTogc2V0TmFtZSxcblx0XHRzZXRFbWFpbDogc2V0RW1haWwsXG5cdFx0c2V0Q29tcGFueTogc2V0Q29tcGFueSxcblx0XHRzZXRUaXRsZTogc2V0VGl0bGUsXG5cdFx0c2V0RE9COiBzZXRET0IsXG5cdFx0dXBkYXRlVXNlckV2ZW50czogdXBkYXRlVXNlckV2ZW50cyxcblx0XHR1cGRhdGVCaW86IHVwZGF0ZUJpbyxcblxuXHRcdHJlbW92ZVVzZXJFdmVudHM6IHJlbW92ZVVzZXJFdmVudHMsXG5cblx0XHRsb2FkUHJpbWFyaWVzOiBsb2FkUHJpbWFyaWVzLFxuXHRcdHdyaXRlQWxsVG9EYXRhYmFzZTogd3JpdGVBbGxUb0RhdGFiYXNlLFxuXHRcdHJlYWRBbGxGcm9tRGF0YWJhc2U6IHJlYWRBbGxGcm9tRGF0YWJhc2UsXG5cdFx0aXNBQmlvOiBpc0FCaW8sXG5cdFx0bG9hZEJpbzogbG9hZEJpb1xuXHR9XG5cblx0Ly9yZWFkIG1ldGhvZHNcblx0ZnVuY3Rpb24gZ2V0VUlEKCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci51aWQ7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXROYW1lKCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5uYW1lO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0RW1haWwoKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmVtYWlsO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0Q29tcGFueSgpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuY29tcGFueTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldFRpdGxlKCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci50aXRsZTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0RE9CKCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5kb2I7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRVc2VyRXZlbnRzKHR5cGUpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXJbdHlwZV07XG5cdH1cblxuXHQvL3VwZGF0ZSBtZXRob2RzXG5cdGZ1bmN0aW9uIHNldFVJRChuYW1lKSB7XG5cdFx0Y3VycmVudFVzZXIudWlkID0gdWlkO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0TmFtZShuYW1lKSB7XG5cdFx0Y3VycmVudFVzZXIubmFtZSA9IG5hbWU7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXRFbWFpbChlbWFpbCkge1xuXHRcdGN1cnJlbnRVc2VyLmVtYWlsID0gZW1haWw7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXRDb21wYW55KGNvbXBhbnkpIHtcblx0XHRjdXJyZW50VXNlci5jb21wYW55ID0gY29tcGFueTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2V0VGl0bGUodGl0bGUpIHtcblx0XHRjdXJyZW50VXNlci50aXRsZSA9IHRpdGxlO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0RE9CKGRvYikge1xuXHRcdGN1cnJlbnRVc2VyLmRvYiA9IGRvYjtcblx0fVxuXG5cdGZ1bmN0aW9uIHVwZGF0ZVVzZXJFdmVudHModHlwZSwgZXZlbnQpIHtcblx0XHRjdXJyZW50VXNlclt0eXBlXVtldmVudC5pZF0gPSBldmVudDtcblx0fVxuXG5cdGZ1bmN0aW9uIHVwZGF0ZUJpbyh1c2VyQmlvKSB7XG5cdFx0Ly91cGRhdGUgbG9jYWwgdmFsdWVzXG5cdFx0c2V0TmFtZSh1c2VyQmlvLm5hbWUpO1xuXHRcdHNldEVtYWlsKHVzZXJCaW8uZW1haWwpO1xuXHRcdHNldENvbXBhbnkodXNlckJpby5jb21wYW55KTtcblx0XHRzZXRUaXRsZSh1c2VyQmlvLnRpdGxlKTtcblx0XHRzZXRET0IodXNlckJpby5kb2IpO1xuXHRcdC8vc2F2ZSB0byBkYlxuXHRcdHdyaXRlQWxsVG9EYXRhYmFzZSgpO1xuXHR9XG5cblx0Ly9kZWxldGUgTWV0aG9kc1xuXHRmdW5jdGlvbiByZW1vdmVVc2VyRXZlbnRzKHR5cGUsIGV2ZW50KSB7XG5cdFx0Ly9kb2VzIHRoaXMgd29yaz9cblx0XHRjdXJyZW50VXNlclt0eXBlXVtldmVudC5pZF0ucmVtb3ZlKCk7XG5cdH1cblxuXHQvL290aGVyIE1ldGhvZHNcblx0ZnVuY3Rpb24gbG9hZFByaW1hcmllcyhuYW1lLCBlbWFpbCkge1xuXHRcdHNldE5hbWUobmFtZSk7XG5cdFx0c2V0RW1haWwoZW1haWwpO1xuXHR9XG5cblx0ZnVuY3Rpb24gd3JpdGVBbGxUb0RhdGFiYXNlKCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0ZGIudXBsb2FkVXNlckRhdGEoY3VycmVudFVzZXIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gcmVhZEFsbEZyb21EYXRhYmFzZSgpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdGRiLmRvd25sb2FkVXNlckRhdGEoKVxuXHRcdC50aGVuKGZ1bmN0aW9uKHVzZXJEYXRhKSB7XG5cdFx0XHRjdXJyZW50VXNlciA9IHVzZXJEYXRhO1xuXHRcdH0pXG5cdH1cblxuXHRmdW5jdGlvbiBpc0FCaW8oKSB7XG5cdFx0aWYoIGN1cnJlbnRVc2VyLnVpZCAhPT0gJycgJiZcblx0XHRcdGN1cnJlbnRVc2VyLm5hbWUgIT09ICcnICYmXG5cdFx0XHRjdXJyZW50VXNlci5lbWFpbCAhPT0gJydcblx0XHRcdClcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdGVsc2UgcmV0dXJuIGZhbHNlO1xuXHR9XG5cdGZ1bmN0aW9uIGxvYWRCaW8oKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0XHQvL21pZ2h0IG5lZWQgdG8gZ28gb3V0IHRvIHRoZSBkYiBzbyByZXR1cm4gYSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly9jaGVjayBmb3IgYmlvXG5cdFx0XHRpZihpc0FCaW8oKSkge1xuXHRcdFx0XHRyZXNvbHZlKCB7XG5cdFx0XHRcdFx0bmFtZTogY3VycmVudFVzZXIubmFtZSxcblx0XHRcdFx0XHRlbWFpbDogY3VycmVudFVzZXIuZW1haWwsXG5cdFx0XHRcdFx0Y29tcGFueTogY3VycmVudFVzZXIuY29tcGFueSxcblx0XHRcdFx0XHR0aXRsZTogY3VycmVudFVzZXIudGl0bGUsXG5cdFx0XHRcdFx0ZG9iOiBjdXJyZW50VXNlci5kb2Jcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2dvIG91dCB0byB0aGUgZGIgYmVmb3JlIHJlc29sdmluZ1xuXHRcdFx0XHRkYi5nZXRVc2VyQmlvKClcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24odXNlckJpbykge1xuXHRcdFx0XHRcdHJlc29sdmUodXNlckJpbyk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXG5cdFx0fSk7XG5cblx0fVxuXHRcblx0cmV0dXJuIGFsbFVzZXJEYXRhO1xufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmZhY3RvcnkoJ3ZhbGlkYXRpb24nLCB2YWxpZGF0aW9uKTtcblxudmFsaWRhdGlvbi4kaW5qZWN0ID0gWyckbG9nJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gdmFsaWRhdGlvbigkbG9nKSB7XG5cdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0dmFyIG1pbmltdW1OYW1lTGVuZ3RoID0gMztcblx0dmFyIG1pbmltdW1QYXNzTGVuZ3RoID0gMTY7XG5cdHZhciBtYXhpbXVtUGFzc0xlbmd0aCA9IDEwMDtcblxuXHR2YXIgYWxsVmFsaWRhdGlvbnMgPSB7XG5cdFx0cmVxdWlyZWQ6IHJlcXVpcmVkLFxuXHRcdG1pbk5hbWVMZW5ndGg6IG1pbk5hbWVMZW5ndGgsXG5cdFx0bWluUGFzc0xlbmd0aDogbWluUGFzc0xlbmd0aCxcblx0XHRtYXhQYXNzTGVuZ3RoOiBtYXhQYXNzTGVuZ3RoLFxuXHRcdGF0TGVhc3RPbmVTeW1ib2w6IGF0TGVhc3RPbmVTeW1ib2wsXG5cdFx0YXRMZWFzdE9uZU51bWJlcjogYXRMZWFzdE9uZU51bWJlcixcblx0XHRhdExlYXN0T25lTG93ZXJjYXNlOiBhdExlYXN0T25lTG93ZXJjYXNlLFxuXHRcdGF0TGVhc3RPbmVVcHBlcmNhc2U6IGF0TGVhc3RPbmVVcHBlcmNhc2UsXG5cdFx0aWxsZWdhbENoYXJhY3RlcjogaWxsZWdhbENoYXJhY3Rlcixcblx0XHRlbWFpbDogZW1haWwsXG5cdFx0ZGF0ZU9mQmlydGg6IGRhdGVPZkJpcnRoXG5cdH07XG5cblx0ZnVuY3Rpb24gcmVxdWlyZWQodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzVW5kZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0cmV0dXJuICdUaGlzIGlzIGEgcmVxdWlyZWQgZmllbGQnO1xuXHRcdH0gXG5cdH1cblxuXHRmdW5jdGlvbiBtaW5OYW1lTGVuZ3RoKHZhbHVlKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHRpZih2YWx1ZS5sZW5ndGggPCBtaW5pbXVtTmFtZUxlbmd0aCkgcmV0dXJuICgnTmFtZSBzaG91bGQgYmUgYXQgbGVhc3QgJyArIG1pbmltdW1OYW1lTGVuZ3RoICsgJyBjaGFyYWN0ZXJzJyk7XG5cdFx0fSBcblx0fVxuXG5cdGZ1bmN0aW9uIG1pblBhc3NMZW5ndGgodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdGlmKCEodmFsdWUubGVuZ3RoIDwgbWluaW11bVBhc3NMZW5ndGgpKSByZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0ZnVuY3Rpb24gbWF4UGFzc0xlbmd0aCh2YWx1ZSkge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0aWYoISh2YWx1ZS5sZW5ndGggPiBtYXhpbXVtUGFzc0xlbmd0aCkpIHJldHVybiB0cnVlO1xuXHRcdH0gXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0ZnVuY3Rpb24gYXRMZWFzdE9uZVN5bWJvbCh2YWx1ZSkge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0Ly8gYnVpbGQgcmVnZXhcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIltcXCFcXEBcXCNcXCRcXCVcXF5cXCZcXCpdXCIpO1xuXG5cdFx0XHQvL2NoZWNrIGNvbnN0cmF0aW50XG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3QodmFsdWUpKSB7XG5cdFx0XHRcdC8vc3VjY2VzczogYXQgbGVhc3Qgb25lIHNwZWNpYWwgY2hhcmFjdGVyIGZvdW5kXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9mYWlsdXJlOiBkaWRuJ3QgZmluZCBhbnkgc3BjaWFsIGNoYXJhY3RlcnNcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGZ1bmN0aW9uIGF0TGVhc3RPbmVOdW1iZXIodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdC8vIGJ1aWxkIHJlZ2V4XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbMC05XVwiLCBcIlwiKTtcblxuXHRcdFx0Ly9jaGVjayBjb25zdHJhdGludFxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZhbHVlKSkge1xuXHRcdFx0XHQvL3N1Y2Nlc3M6IGF0IGxlYXN0IG9uZSBzcGVjaWFsIGNoYXJhY3RlciBmb3VuZFxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vZmFpbHVyZTogZGlkbid0IGZpbmQgYW55IHNwY2lhbCBjaGFyYWN0ZXJzXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuICAgIGZ1bmN0aW9uIGF0TGVhc3RPbmVMb3dlcmNhc2UodmFsdWUpIHtcbiAgICBcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0Ly8gYnVpbGQgcmVnZXhcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIlthLXpdXCIsIFwiXCIpO1xuXG5cdFx0XHQvL2NoZWNrIGNvbnN0cmF0aW50XG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3QodmFsdWUpKSB7XG5cdFx0XHRcdC8vc3VjY2VzczogYXQgbGVhc3Qgb25lIHNwZWNpYWwgY2hhcmFjdGVyIGZvdW5kXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9mYWlsdXJlOiBkaWRuJ3QgZmluZCBhbnkgc3BjaWFsIGNoYXJhY3RlcnNcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhdExlYXN0T25lVXBwZXJjYXNlKHZhbHVlKSB7XG4gICAgXHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdC8vIGJ1aWxkIHJlZ2V4XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbQS1aXVwiLCBcIlwiKTtcblxuXHRcdFx0Ly9jaGVjayBjb25zdHJhdGludFxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZhbHVlKSkge1xuXHRcdFx0XHQvL3N1Y2Nlc3M6IGF0IGxlYXN0IG9uZSBzcGVjaWFsIGNoYXJhY3RlciBmb3VuZFxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vZmFpbHVyZTogZGlkbid0IGZpbmQgYW55IHNwY2lhbCBjaGFyYWN0ZXJzXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaWxsZWdhbENoYXJhY3Rlcih2YWx1ZSkge1xuICAgIFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHQvLyBidWlsZCByZWdleFxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW15BLXowLTlcXCFcXEBcXCNcXCRcXCVcXF5cXCZcXCpdXCIsIFwiXCIpO1xuXG5cdFx0XHQvL2NoZWNrIGNvbnN0cmF0aW50XG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3QodmFsdWUpKSB7XG5cdFx0XHRcdC8vc3VjY2VzczogYXQgbGVhc3Qgb25lIHNwZWNpYWwgY2hhcmFjdGVyIGZvdW5kXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vZmFpbHVyZTogZGlkbid0IGZpbmQgYW55IHNwY2lhbCBjaGFyYWN0ZXJzXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gZW1haWwodmFsdWUpIHtcbiAgICBcdC8vZGVmaW5lIGNvbnN0cmFpbnRzXG4gICAgXHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKD86XFwuW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKykqQCg/OlthLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cXC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cIiwgXCJcIik7XG5cbiAgICBcdGlmKCFjb25zdHJhaW50LnRlc3QodmFsdWUpKSByZXR1cm4gJ05vdCBhIHZhbGlkIGUtbWFpbCBhZGRyZXNzJ1xuICAgIFx0XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGF0ZU9mQmlydGgodmFsdWUpIHt9XG5cblx0cmV0dXJuIGFsbFZhbGlkYXRpb25zO1xufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbmZpZyhjb25maWcpO1xuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBjb25maWcoJHJvdXRlUHJvdmlkZXIpIHsgICBcbiAgICAkcm91dGVQcm92aWRlclxuICAgIC53aGVuKCcvJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2xhbmRpbmdQYWdlLmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdMYW5kaW5nUGFnZUNvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICB9KVxuICAgIC53aGVuKCcvc2lnbnVwJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL25ld1VzZXJTaWdudXAuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ05ld1VzZXJTaWduVXBDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgfSlcbiAgICAud2hlbignL2xvZ2luJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3JlZ2lzdGVyZWRVc2VyTG9naW4nLFxuICAgICAgICBjb250cm9sbGVyOiAnUmVnVXNlckxvZ2luQ29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xuICAgIH0pXG4gICAgLndoZW4oJy91c2VySW5mb3JtYXRpb24vOnVpZD8vOnRva2VuPycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy91c2VySW5mb3JtYXRpb24uaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1VzZXJJbmZvcm1hdGlvbkNvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgIHJlc29sdmU6IHsgLyogQG5nSW5qZWN0ICovXG4gICAgICAgICAgICB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlOiB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlXG4gICAgICAgIH1cbiAgICB9KVxuICAgIC53aGVuKCcvdXNlckV2ZW50cy86dWlkPy86dG9rZW4/Jywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3VzZXJFdmVudHMuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1VzZXJFdmVudHNDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICByZXNvbHZlOiB7IC8qIEBuZ0luamVjdCAqL1xuICAgICAgICAgICAgdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZTogdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZVxuICAgICAgICB9XG4gICAgfSlcbiAgICAud2hlbignL2V2ZW50LzpldmVudElkPy86aG9zdElkPy86dWlkPy86dG9rZW4/Jywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2FuRXZlbnQuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ0FuRXZlbnRDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICByZXNvbHZlOiB7IC8qIEBuZ0luamVjdCAqL1xuICAgICAgICAgICAgdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZTogdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZVxuICAgICAgICB9XG4gICAgfSlcbiAgICAub3RoZXJ3aXNlKHtcbiAgICAgICAgcmVkaXJlY3RUbzogJy8nXG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2UoYXV0aFNlcnZpY2UpIHtcbiAgICBhdXRoU2VydmljZS5pc0xvZ2dlZEluKCk7XG59IiwiXG5jb25maWcuJGluamVjdCA9IFtcIiRyb3V0ZVByb3ZpZGVyXCJdO1xudXNlckF1dGhlbnRpY2F0aW9uU2VydmljZS4kaW5qZWN0ID0gW1wiYXV0aFNlcnZpY2VcIl07YW5ndWxhclxuXHQubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcsIFtcblx0XHQnbmdSb3V0ZScsXG5cdFx0J25nVG91Y2gnLFxuXHRcdCdmaXJlYmFzZSdcblx0XSk7XG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdBbkV2ZW50Q29udHJvbGxlcicsIEFuRXZlbnRDb250cm9sbGVyKTtcblxuQW5FdmVudENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnLCAnJGxvY2F0aW9uJywgJyRyb3V0ZVBhcmFtcycsICckZmlyZWJhc2VPYmplY3QnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBBbkV2ZW50Q29udHJvbGxlcigkc2NvcGUsICRsb2csICRsb2NhdGlvbiwgJHJvdXRlUGFyYW1zLCAkZmlyZWJhc2VPYmplY3QpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0dmFyIHVzZXJFdmVudHMgPSByZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQoJHJvdXRlUGFyYW1zLmhvc3RJZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdob3N0aW5nJykuY2hpbGQoJHJvdXRlUGFyYW1zLmV2ZW50SWQpXG5cblx0Ly9iaW5kaW5nIHRvIHRoZSBldmVudFxuXHR2bS5ldmVudCA9ICRmaXJlYmFzZU9iamVjdCh1c2VyRXZlbnRzKVxuXHR2YXIgcmVnaXN0ZXJlZFVzZXJzID0gJGZpcmViYXNlT2JqZWN0KHJlZi5jaGlsZCgnVWlkcycpKTtcblxuXHQvL3JlcXVpcmVkIGZpZWxkc1xuXHR2bS5yZXF1aXJlZElucHV0cyA9IFsnJywgJycsICcnLCAnJywgJycsICcnLCAnJywgJycsICcnXTtcblxuXHQvL0xvY2FsIE1ldGhvZHNcblx0ZnVuY3Rpb24gaW5pdCgpIHtcblx0XHQvL2RlY2xhcmUgYW5kIGluaXRpYWxpemUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dm0udGVtcERhdGVUaW1lID0ge3N0YXJ0OiAnJywgZW5kOiAnJ307XG5cdFx0dm0ubmV3R3Vlc3QgPSB7bmFtZTogJycsIGVtYWlsOnthZGRyZXNzOicnLCB2YWxpZDpmYWxzZSwgc3R5bGU6e2NvbG9yOicnfX19O1xuXHRcdHZtLnNob3dJZkhvc3QgPSBmYWxzZTtcblx0XHR2bS5oaWRlSWZBdHRlbmRpbmcgPSB0cnVlO1xuXHRcdC8vc2VjdGlvbnNcblx0XHR2bS5tYW5hZ2VTZWN0aW9ucyA9IHtcblx0XHRcdDE6IHthY3RpdmU6IHRydWUsIGNvbXBsZXRlOiBmYWxzZSwgc3R5bGU6e2NvbG9yOidibGFjaycsICdiYWNrZ3JvdW5kLWNvbG9yJzoneWVsbG93J319LFxuXHRcdFx0Mjoge2FjdGl2ZTogZmFsc2UsIGNvbXBsZXRlOiBmYWxzZSwgc3R5bGU6e2NvbG9yOid3aGl0ZScsICdiYWNrZ3JvdW5kLWNvbG9yJzonZ3JheSd9fSxcblx0XHRcdDM6IHthY3RpdmU6IGZhbHNlLCBjb21wbGV0ZTogZmFsc2UsIHN0eWxlOntjb2xvcjond2hpdGUnLCAnYmFja2dyb3VuZC1jb2xvcic6J2dyYXknfX1cblx0XHR9O1xuXG5cdFx0Ly9jaGVjayB1c2VyIHRvIGRldGVybWluZSBzdGF0ZVxuXHRcdGNoZWNrRm9ySG9zdCgpO1xuXHRcdGNoZWNrSWZHdWVzdElzQXR0ZW5kaW5nKCk7XG5cblx0XHQvL29wZW4gdXAgc2VjdGlvbnNcblx0XHRpZighdm0uc2hvd0lmSG9zdCkgb3BlbkFsbFNlY3Rpb25zKCk7XG5cdH1cblxuXHRmdW5jdGlvbiB1dGY4X3RvX2I2NChzdHIpIHtcblx0XHRyZXR1cm4gYnRvYShzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gYjY0X3RvX3V0Zjgoc3RyKSB7XG4gICAgXHRyZXR1cm4gYXRvYihzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKSB7XG5cdFx0cmV0dXJuIERhdGUucGFyc2UoZGF0ZVRpbWUpO1xuXHR9XG5cblx0ZnVuY3Rpb24gY2xlYW5OZXdHdWVzdFZhcmlhYmxlKCkge1xuXHRcdHZtLm5ld0d1ZXN0ID0ge25hbWU6ICcnLCBlbWFpbDp7YWRkcmVzczonJywgdmFsaWQ6ZmFsc2UsIHN0eWxlOntjb2xvcjonJ319fTtcblx0fVxuXG5cdGZ1bmN0aW9uIGludml0ZUFSZWdpc3RlcmVkVXNlcih1aWQpIHtcblx0XHQkbG9nLmluZm8oJ2FkZGluZyB0aGVtIHRvIHRoZSByZWdpc3RlcmVkIHVzZXJzIGxpc3QgJyArIHVpZCk7XG5cdFx0Ly9zZXQgdGhlIG5ldyBldmVudFxuXHRcdHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgncGVuZGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ldmVudElkKS5zZXQoe1xuXHRcdFx0aWQ6ICRyb3V0ZVBhcmFtcy5ldmVudElkLFxuXHRcdFx0ZXZlbnRUaW1lczoge1xuXHRcdFx0XHRzdGFydDogdm0uZXZlbnQuZXZlbnRUaW1lcy5zdGFydCxcblx0XHRcdFx0ZW5kOiB2bS5ldmVudC5ldmVudFRpbWVzLmVuZFxuXHRcdFx0fSxcblx0XHRcdG5hbWU6IHZtLmV2ZW50Lm5hbWUsXG5cdFx0XHRob3N0OiAkcm91dGVQYXJhbXMudWlkXG5cdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oJ3RoZXJlIHdhcyBhbiBlcnJvcicgKyBlcnJvcik7XG5cdFx0fSk7XG5cdFx0Ly9pZiB0aGVyZSB3YXMgYW4gdXBkYXRlZCBwbGFjZSBob2xkZXIsIHJlbW92ZSBpdFxuXHRcdHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgncGVuZGluZycpLm9uY2UoJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdHZhciBjaGVja0ZvclBsYWNlaG9sZGVyID0gc25hcHNob3QudmFsKClcblx0XHRcdCRsb2cuaW5mbyhzbmFwc2hvdC52YWwoKSk7XG5cblx0XHRcdGlmKGNoZWNrRm9yUGxhY2Vob2xkZXIudXBkYXRlZCkge1xuXHRcdFx0XHQkbG9nLmluZm8oJ2RlbGV0aW5nIHVwZGF0ZWQnKTtcblx0XHRcdFx0cmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdwZW5kaW5nJykuY2hpbGQoJ3VwZGF0ZWQnKS5yZW1vdmUoZnVuY3Rpb24oZXJyb3JPYmplY3QpIHtcblx0XHRcdFx0XHRpZihlcnJvck9iamVjdCkgJGxvZy5pbmZvKFwiRGVsZXRpbmcgZmFpbGVkOiBcIiArIGVycm9yT2JqZWN0LmNvZGUpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSAkbG9nLmluZm8oJ25vdGhpbmcgdG8gZG8nKTtcblxuXHRcdH0sIGZ1bmN0aW9uKGVycm9yT2JqZWN0KSB7XG5cdFx0XHRpZihlcnJvck9iamVjdCkgJGxvZy5pbmZvKFwiVGhlIHJlYWQgZmFpbGVkOiBcIiArIGVycm9yT2JqZWN0LmNvZGUpO1xuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gaW52aXRlQW5VbnJlZ2lzdGVyZWRVc2VyKHVzZXJLZXkpIHtcblx0XHQkbG9nLmluZm8oJ2FkZGluZyB0aGVtIHRvIHRoZSBVTlJFR0lTVEVSRUQgdXNlcnMgbGlzdCAnICsgdXNlcktleSk7XG5cdFx0cmVmLmNoaWxkKCdVbnJlZ2lzdGVyZWRVc2VycycpLmNoaWxkKHVzZXJLZXkpLmNoaWxkKCdwZW5kaW5nJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJHJvdXRlUGFyYW1zLmV2ZW50SWQpLnNldCh7XG5cdFx0XHRpZDogJHJvdXRlUGFyYW1zLmV2ZW50SWQsXG5cdFx0XHRob3N0OiAkcm91dGVQYXJhbXMudWlkLFxuXHRcdFx0ZXZlbnRUaW1lczoge1xuXHRcdFx0XHRzdGFydDogdm0uZXZlbnQuZXZlbnRUaW1lcy5zdGFydCxcblx0XHRcdFx0ZW5kOiB2bS5ldmVudC5ldmVudFRpbWVzLmVuZFxuXHRcdFx0fSxcblx0XHRcdG5hbWU6IHZtLmV2ZW50Lm5hbWVcblx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbygndGhlcmUgd2FzIGFuIGVycm9yJyArIGVycm9yKTtcblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNoZWNrRm9ySG9zdCgpIHtcblx0XHQvL2NoZWNrIGV2ZW50IGhvc3Rcblx0XHR2YXIgYXV0aERhdGEgPSByZWYuZ2V0QXV0aCgpO1xuXG5cdFx0aWYoYXV0aERhdGEudWlkID09ICRyb3V0ZVBhcmFtcy5ob3N0SWQpIHtcblx0XHRcdCRsb2cuaW5mbygnaXMgdGhlIGhvc3QnKTtcblx0XHRcdHZtLnNob3dJZkhvc3QgPSB0cnVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkbG9nLmluZm8oJ25vdCB0aGUgaG9zdCcpO1xuXHRcdFx0dm0uc2hvd0lmSG9zdCA9IGZhbHNlO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIGNoZWNrSWZHdWVzdElzQXR0ZW5kaW5nKCkge1xuXHRcdGlmKCF2bS5zaG93SWZIb3N0KSB7XG5cdFx0XHQkbG9nLmluZm8oJ2NoZWNrIGd1ZXN0IGF0dGVuZGFuY2UnKTtcblx0XHRcdHVzZXJFdmVudHMuY2hpbGQoJ2d1ZXN0TGlzdCcpLm9uKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHRcdHZhciBhbGxHdWVzdHMgPSBzbmFwc2hvdC52YWwoKTtcblx0XHRcdFx0dm0uaGlkZUlmQXR0ZW5kaW5nID0gIWFsbEd1ZXN0c1skcm91dGVQYXJhbXMudWlkXS5hdHRlbmRpbmc7XG5cdFx0XHRcdFxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gb3BlbkFsbFNlY3Rpb25zKCkge1xuXHRcdHZtLm1hbmFnZVNlY3Rpb25zWzFdLmFjdGl2ZSA9IHRydWU7XG5cdFx0dm0ubWFuYWdlU2VjdGlvbnNbMl0uYWN0aXZlID0gdHJ1ZTtcblx0XHR2bS5tYW5hZ2VTZWN0aW9uc1szXS5hY3RpdmUgPSB0cnVlO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2F2ZUV2ZW50KCkge1xuXHRcdHZtLmV2ZW50LiRzYXZlKCkudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdCRsb2cuaW5mbygnZXZlbnQgc2F2ZWQnKTtcblx0XHR9KS5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0JGxvZy5pbmZvKCdlcnJvciEgJyArIGVycm9yKTtcblx0XHR9KTtcblx0fVxuXG5cdC8vdmlldyBNZXRob2Rcblx0dm0uc2V0VGVtcFRpbWUgPSBmdW5jdGlvbihlbmRwb2ludCkge1xuXHRcdGlmKGVuZHBvaW50ID09ICdzdGFydCcpIHZtLnRlbXBEYXRlVGltZS5zdGFydCA9IG5ldyBEYXRlKCk7XG5cdFx0aWYoZW5kcG9pbnQgPT0gJ2VuZCcpIHZtLnRlbXBEYXRlVGltZS5lbmQgPSBuZXcgRGF0ZSgpO1xuXHR9XG5cblx0dm0udW5peFRpbWVUb0RhdGVUaW1lID0gZnVuY3Rpb24gKHVuaXhUaW1lKSB7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KHVuaXhUaW1lKSk7XG5cdH07XG5cblx0dm0uZGF0ZVRpbWVUb1VuaXhUaW1lID0gZnVuY3Rpb24gKGRhdGVUaW1lKSB7XG5cdFx0cmV0dXJuIERhdGUucGFyc2UoZGF0ZVRpbWUpO1xuXHR9O1xuXG5cdHZtLnN1Ym1pdCA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2cuaW5mbygnc3VibWl0dGluZyB0aGUgZm9ybSBub3chJyk7XG5cdH1cblxuXHR2bS5iYWNrVG9Vc2VyRXZlbnRzID0gZnVuY3Rpb24oKSB7XG5cdFx0JGxvY2F0aW9uLnBhdGgoJy91c2VyRXZlbnRzLycgKyAkcm91dGVQYXJhbXMudWlkICsgJy8nICsgJHJvdXRlUGFyYW1zLnRva2VuKTtcblx0fVxuXG5cdHZtLmV2ZW50UmVkaXJlY3QgPSBmdW5jdGlvbihwYXRoLCBldmVudElEKSB7XG5cdFx0dmFyIGZ1bGxQYXRoID0gcGF0aCArICcvJyArICRyb3V0ZVBhcmFtcy51aWQgKyAnLycgKyAkcm91dGVQYXJhbXMudG9rZW47XG5cdFx0Ly9yZWRpcmVjdFxuXHRcdCRsb2cuaW5mbygncmVkaXJlY3RpbmcgdG86ICcgKyBmdWxsUGF0aCk7XG5cdFx0JGxvY2F0aW9uLnBhdGgoZnVsbFBhdGgpO1xuXHR9XG5cblx0dm0uY2hhbmdlU2VjdGlvbiA9IGZ1bmN0aW9uKHRhcmdldFNlY3Rpb24pIHtcblx0XHQkbG9nLmluZm8oJ2FyZSB3ZSBoZXJlJyk7XG5cdFx0Zm9yKGkgPSAxOyBpIDw9MzsgaSsrKSB7XG5cdFx0XHRpZihpPT10YXJnZXRTZWN0aW9uKSB7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLmFjdGl2ZSA9IHRydWU7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLnN0eWxlWydiYWNrZ3JvdW5kLWNvbG9yJ10gPSd5ZWxsb3cnO1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5zdHlsZVsnY29sb3InXSA9J2JsYWNrJztcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLmFjdGl2ZSA9IGZhbHNlO1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5zdHlsZVsnYmFja2dyb3VuZC1jb2xvciddID0nZ3JheSc7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLnN0eWxlWydjb2xvciddID0nd2hpdGUnO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHZtLnNhdmVFdmVudFRpbWUgPSBmdW5jdGlvbihkYXRlVGltZSwgdGFyZ2V0KSB7XG5cdFx0Ly9pZiB0aGlzIGV2ZW50IGRpZG4ndCBoYXZlIGEgc3RhcnQgdGltZSwgY3JlYXRlIGl0XG5cdFx0aWYoIXZtLmV2ZW50LmV2ZW50VGltZXMpIHsgXG5cdFx0XHR2bS5ldmVudC5ldmVudFRpbWVzID0ge3N0YXJ0OiAnJywgZW5kOiAnJ307XG5cdFx0XHR2bS5ldmVudC5ldmVudFRpbWVzLnN0YXJ0ID0gdm0uZGF0ZVRpbWVUb1VuaXhUaW1lKHZtLnRlbXBEYXRlVGltZS5zdGFydCk7IFxuXHRcdFx0dm0uZXZlbnQuZXZlbnRUaW1lcy5lbmQgPSB2bS5kYXRlVGltZVRvVW5peFRpbWUodm0udGVtcERhdGVUaW1lLmVuZCk7XG5cdFx0fVxuXG5cdFx0aWYoKHZtLnRlbXBEYXRlVGltZS5lbmQgPCB2bS50ZW1wRGF0ZVRpbWUuc3RhcnQpICYmIHRhcmdldCA9PSAnc3RhcnQnKSB2bS50ZW1wRGF0ZVRpbWUuZW5kID0gdm0udGVtcERhdGVUaW1lLnN0YXJ0O1xuXHRcdGlmKHRhcmdldCA9PSAnc3RhcnQnKSB2bS5ldmVudC5ldmVudFRpbWVzLnN0YXJ0ID0gdm0uZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKTtcblx0XHRpZih0YXJnZXQgPT0gJ2VuZCcpIHZtLmV2ZW50LmV2ZW50VGltZXMuZW5kID0gdm0uZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKTtcblx0fVxuXG5cdHZtLmd1ZXN0c0FyZUludml0ZWQgPSBmdW5jdGlvbigpIHtcblx0XHRpZih2bS5ldmVudC5ndWVzdExpc3QpIHJldHVybiB0cnVlO1xuXHRcdGVsc2UgcmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0dm0udmFsaWRhdGVHdWVzdEVtYWlsID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9pZiB0aGVyZSBpcyBhbiBlbWFpbCBhZGRyZXNzXG5cdFx0aWYodm0ubmV3R3Vlc3QuZW1haWwuYWRkcmVzcykge1xuXHRcdFx0Ly9jaGVjayB2YWxpZGl0eVxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XCIsIFwiXCIpO1xuXG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3Qodm0ubmV3R3Vlc3QuZW1haWwuYWRkcmVzcykpIHtcblx0XHRcdFx0dm0ubmV3R3Vlc3QuZW1haWwudmFsaWQgPSB0cnVlO1xuXHRcdFx0XHR2bS5uZXdHdWVzdC5lbWFpbC5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLm5ld0d1ZXN0LmVtYWlsLnZhbGlkID0gZmFsc2U7XG5cdFx0XHRcdHZtLm5ld0d1ZXN0LmVtYWlsLnN0eWxlID0ge2NvbG9yOicnfTtcblx0XHRcdH1cdFx0XHRcblx0XHR9XG5cdH1cblxuXHR2bS5pc1NlY3Rpb25Db21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdGZvcihpPTA7aTw4O2krKykge1xuXHRcdFx0JGxvZy5pbmZvKHZtLnJlcXVpcmVkSW5wdXRzW2ldKTtcblx0XHR9XG5cdH1cblxuXHR2bS5zYXZlQW5kQWR2YW5jZSA9IGZ1bmN0aW9uKCkge1xuXHRcdHZtLmV2ZW50LiRzYXZlKCkudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdCRsb2cuaW5mbygnZXZlbnQgc2F2ZWQnKTtcblx0XHR9KS5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0JGxvZy5pbmZvKCdlcnJvciEgJyArIGVycm9yKTtcblx0XHR9KTtcblxuXHRcdC8vY2hlY2sgZm9yIGNvbXBsZXRlbmVzXG5cdFx0dm0uaXNTZWN0aW9uQ29tcGxldGUoKTtcblxuXHRcdGlmKHZtLm1hbmFnZVNlY3Rpb25zWzFdLmNvbXBsZXRlID09IHRydWUgJiYgdm0ubWFuYWdlU2VjdGlvbnNbMl0uY29tcGxldGUgPT0gdHJ1ZSAmJiB2bS5tYW5hZ2VTZWN0aW9uc1szXS5jb21wbGV0ZSA9PSB0cnVlKSB7XG5cdFx0XHR2bS5ldmVudFJlZGlyZWN0KCcvdXNlckV2ZW50cycsICRyb3V0ZVBhcmFtcy51aWQpO1xuXHRcdH0gZWxzZSBpZiAodm0ubWFuYWdlU2VjdGlvbnNbMV0uYWN0aXZlKSB2bS5jaGFuZ2VTZWN0aW9uKDIpO1xuXHRcdGVsc2UgaWYgKHZtLm1hbmFnZVNlY3Rpb25zWzJdLmFjdGl2ZSkgdm0uY2hhbmdlU2VjdGlvbigzKTtcblx0XHRlbHNlIGlmICh2bS5tYW5hZ2VTZWN0aW9uc1szXS5hY3RpdmUpIHZtLmNoYW5nZVNlY3Rpb24oMSk7XG5cdH1cblxuXHR2bS5hZGRHdWVzdFRvSG9zdHNMaXN0ID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9kZWNsYXJlIGFuZCBpbml0aWFsaXplIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciB1c2VyS2V5ID0gdXRmOF90b19iNjQodm0ubmV3R3Vlc3QuZW1haWwuYWRkcmVzcyk7XG5cblx0XHQvL2lmIGVtYWlsIGlzIHZhbGlkIGFuZCBuYW1lIGV4aXN0c1xuXHRcdGlmICh2bS5uZXdHdWVzdC5uYW1lICYmIHZtLm5ld0d1ZXN0LmVtYWlsLnZhbGlkKSB7XG5cdFx0XHQvL2lzIHRoZXJlIGEgZ3Vlc3QgbGlzdCBhbHJlYWR5PyBJZiBub3QgY3JlYXRlIG9uZVxuXHRcdFx0aWYoIXZtLmV2ZW50Lmd1ZXN0TGlzdCkge1xuXHRcdFx0XHR2bS5ldmVudC5ndWVzdExpc3QgPSB7fTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vaWYgc28gaXMgdGhpcyBwZXJzb24gYWxyZWFkeSBvbiB0aGUgbGlzdD9cblx0XHRcdFx0dmFyIGkgPTA7XG5cdFx0XHRcdHdoaWxlKHZtLmV2ZW50Lmd1ZXN0TGlzdFtpXSkge1xuXHRcdFx0XHRcdGlmKHZtLmV2ZW50Lmd1ZXN0TGlzdFtpXS5lbWFpbCA9PSBiNjRfdG9fdXRmOCh1c2VyS2V5KSkge1xuXHRcdFx0XHRcdFx0JGxvZy5pbmZvKCdUaGlzIGd1ZXN0IGlzIGFscmVhZHkgb24gdGhlIGxpc3QnKTtcblx0XHRcdFx0XHRcdGNsZWFuTmV3R3Vlc3RWYXJpYWJsZSgpO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpKys7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly9pcyB0aGlzIGd1ZXN0IGEgcmVnaXN0ZXJlZCB1c2VyP1xuXHRcdFx0aWYocmVnaXN0ZXJlZFVzZXJzW3VzZXJLZXldKSB7XG5cdFx0XHRcdC8vaXMgdGhlIHJlZ2lzdGVyZWQgdXNlciB0aGUgaG9zdD9cblx0XHRcdFx0aWYocmVnaXN0ZXJlZFVzZXJzW3VzZXJLZXldID09ICRyb3V0ZVBhcmFtcy51aWQpIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ3RyaWVkIHRvIHJlZ2lzdGVyIHRoZSBob3N0Jyk7XG5cdFx0XHRcdFx0Y2xlYW5OZXdHdWVzdFZhcmlhYmxlKCk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdC8vYWRkIHRoZW0gdG8gdGhlIGFwcHJvcHJpYXRlIHJlZ2lzdGVyZWQgdXNlcnMnIGxpc3Qgb2YgZXZlbnQgaW52aXRlc1xuXHRcdFx0XHRcdGludml0ZUFSZWdpc3RlcmVkVXNlcihyZWdpc3RlcmVkVXNlcnNbdXNlcktleV0pO1xuXG5cdFx0XHRcdFx0Ly9hZGQgdGhlIGd1ZXN0IHRvIHRoZSBsaXN0XG5cdFx0XHRcdFx0dm0uZXZlbnQuZ3Vlc3RMaXN0W3JlZ2lzdGVyZWRVc2Vyc1t1c2VyS2V5XV0gPSB7XG5cdFx0XHRcdFx0XHRhdHRlbmRpbmc6IGZhbHNlLCBcblx0XHRcdFx0XHRcdHN0YXR1czoncGVuZGluZycsIFxuXHRcdFx0XHRcdFx0bmFtZTogdm0ubmV3R3Vlc3QubmFtZSwgXG5cdFx0XHRcdFx0XHRlbWFpbDp2bS5uZXdHdWVzdC5lbWFpbC5hZGRyZXNzLFxuXHRcdFx0XHRcdH07XHRcdFx0XHRcdFxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2FkZCB0aGUgaW52aXRlIHRvIHRoZSBub24tcmVnaXN0ZXJlZCB1c2VycyBsaXN0IG9mIGV2ZW50IGludml0ZXNcblx0XHRcdFx0aW52aXRlQW5VbnJlZ2lzdGVyZWRVc2VyKHVzZXJLZXkpO1xuXG5cdFx0XHRcdC8vYWRkIHRoZSBndWVzdCB0byB0aGUgbGlzdFxuXHRcdFx0XHR2bS5ldmVudC5ndWVzdExpc3RbdXNlcktleV0gPSB7XG5cdFx0XHRcdFx0XHRhdHRlbmRpbmc6IGZhbHNlLCBcblx0XHRcdFx0XHRcdHN0YXR1czoncGVuZGluZycsIFxuXHRcdFx0XHRcdFx0bmFtZTogdm0ubmV3R3Vlc3QubmFtZSwgXG5cdFx0XHRcdFx0XHRlbWFpbDp2bS5uZXdHdWVzdC5lbWFpbC5hZGRyZXNzLFxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXG5cblx0XHRcdC8vc2F2ZSB0aGUgZXZlbnRcblx0XHRcdHZtLnNhdmVFdmVudCgpO1xuXHRcdFx0Ly9jbGVhciB0aGUgdGVtcCB2YWx1ZXNcblx0XHRcdGNsZWFuTmV3R3Vlc3RWYXJpYWJsZSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkbG9nLmluZm8oJ3lvdSBkaWRuXFwndCBlbnRlciBhIG5hbWUgYW5kIG9yIGVtYWlsJyk7XG5cdFx0fVxuXHR9XG5cblx0dm0uZ3Vlc3RXaWxsQXR0ZW5kID0gZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHR2YXIgY3VycmVudFVzZXIgPSByZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJ2V2ZW50cycpO1xuXHRcdHZhciB0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucyA9IDA7XG5cdFx0dmFyIHJlbW92ZUF0dGVuZGluZ1VwZGF0ZWQgPSBmYWxzZTtcblx0XHRcblx0XHQvL2NoYW5nZSBhdHRlbmRpbmcgdG8gdHJ1ZSBpbiBob3N0J3MgZ3Vlc3RMaXN0XG5cdFx0dm0uZXZlbnQuZ3Vlc3RMaXN0WyRyb3V0ZVBhcmFtcy51aWRdLmF0dGVuZGluZyA9IHJlc3BvbnNlO1xuXHRcdC8vY2hhbmdlIHN0YXR1cyB0byAnYXR0ZW5kaW5nJyBpbiBob3N0J3MgZ3Vlc3RMaXN0XG5cdFx0dm0uZXZlbnQuZ3Vlc3RMaXN0WyRyb3V0ZVBhcmFtcy51aWRdLnN0YXR1cyA9ICdhdHRlbmRpbmcnO1xuXHRcdFxuXHRcdC8vZ2V0IHRoZSBpbnZpdGF0aW9uIGRldGFpbHNcblx0XHRjdXJyZW50VXNlci5jaGlsZCgncGVuZGluZycpLm9uKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWxiZVxuXHRcdFx0dmFyIGludml0YXRpb25zID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHQvL2xvZyBzdGFydGluZyB2YWx1ZXNcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9ucyk7XG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnNbJHJvdXRlUGFyYW1zLmhvc3RJZF0pO1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdWyRyb3V0ZVBhcmFtcy5ldmVudElkXSk7XG5cblx0XHRcdHZhciB0aGlzSW52aXRhdGlvbiA9IGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdWyRyb3V0ZVBhcmFtcy5ldmVudElkXTtcblx0XHRcdFxuXHRcdFx0JGxvZy5pbmZvKHRoaXNJbnZpdGF0aW9uKTtcblx0XHRcdFxuXHRcdFx0Ly9jaGVjayAjIG9mIGluaXZpYXRpb25zXG5cdFx0XHRmb3IoaW52aXRhdGlvbiBpbiBpbnZpdGF0aW9ucykge1xuXHRcdFx0XHR0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucysrO1xuXHRcdFx0fVxuXG5cdFx0XHQvL3JlcG9ydCAjIG9mIGludml0YXRpb25zXG5cdFx0XHQkbG9nLmluZm8oXCJ0b3RhbCBhdHRlbmRpbmc6IFwiICsgdG90YWxQZW5kaW5nSW52aXRhdGlvbnMpO1xuXHRcdFx0XG5cdFx0XHQvL2FkZCB0aGUgZXZlbnQgdG8gdGhlIGd1ZXN0J3MgYXR0ZW5kaW5nIGxpc3Rcblx0XHRcdGlmKHJlc3BvbnNlKSBjdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykuY2hpbGQoJHJvdXRlUGFyYW1zLmhvc3RJZCkuY2hpbGQoJHJvdXRlUGFyYW1zLmV2ZW50SWQpLnNldCh0aGlzSW52aXRhdGlvbiwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbyhlcnJvcik7XG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXG5cdFx0Ly9pZiB0aGUgdXBkYXRlZCBwbGFjZWhvbGRlciB3YXMgb24gdGhlIGF0dGVuZGluZyBsaXN0IHJlbW92ZSBpdFxuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5vbigndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHRcdHZhciBhdHRlbmRpbmdMaXN0ID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHRcblx0XHRcdC8vcmVwb3J0IGFjdGlvbnNcblx0XHRcdCRsb2cuaW5mbygndGhpcyBpcyB0aGUgYXR0ZW5kaW5nIGxpc3QnKTtcblx0XHRcdCRsb2cuaW5mbyhhdHRlbmRpbmdMaXN0KTtcblx0XHRcdFxuXHRcdFx0Ly90aHJvdyBmbGFnIGZvciBsYXRlclxuXHRcdFx0aWYoYXR0ZW5kaW5nTGlzdC51cGRhdGVkKSByZW1vdmVBdHRlbmRpbmdVcGRhdGVkID0gdHJ1ZTtcblxuXHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHQvL2lmIHRoZXIgd2FzIGFuIGVycm9yIHJlcG9ydCBpdFxuXHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbyhlcnJvcik7XG5cdFx0fSk7XG5cblx0XHQvL2lmIHRoaXMgaXMgdGhlIGxhc3QgcGVuZGluZyBldmVudCBvbiB0aGUgZ3Vlc3QncyBwZW5kaW5nIGxpc3QsIGFkZCB0aGUgdXBkYXRlZCBwbGFjZWhvbGRlclxuXHRcdGlmKHRvdGFsUGVuZGluZ0ludml0YXRpb25zIDwgMikge1xuXHRcdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHRcdHZhciBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XG5cblx0XHRcdC8vcmVwbGFjZSB3aXRoIHVwZGF0ZWQgZmllbGRcblx0XHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdwZW5kaW5nJykudXBkYXRlKHtcblx0XHRcdFx0dXBkYXRlZDogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbyhlcnJvcik7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHQvL3JlbW92ZSB0aGUgZXZlbnQgZnJvbSB0aGUgZ3Vlc3QncyBwZW5kaW5nIGxpc3Rcblx0XHRjdXJyZW50VXNlci5jaGlsZCgncGVuZGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ob3N0SWQpLnJlbW92ZSgpO1xuXG5cdFx0Ly9pZiB0aGVyZSB3YXMgYW4gdXBkYXRlZCBmaWVsZCBpbiBhdHRlbmRpbmcsIHJlbW92ZSBpdFxuXHRcdGlmKHJlbW92ZUF0dGVuZGluZ1VwZGF0ZWQpIHtcblx0XHRcdCRsb2cuaW5mbygncmVtb3ZpbmcgdGhlIHVwZGF0ZWQgcGxhY2Vob2xkZXInKTtcblx0XHRcdC8vY3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLmNoaWxkKCd1cGRhdGVkJykucmVtb3ZlKCk7XG5cdFx0fVxuXG5cdFx0Ly9zYXZlIGNoYW5nZXNcblx0XHR2bS5ldmVudC4kc2F2ZSgpO1xuXHR9XG5cblx0dm0udXBkYXRlVXBkYXRlZFBhcmFtID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGN1cnJlbnRVc2VyID0gcmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCdldmVudHMnKTtcblx0XHRcblx0XHQkbG9nLmluZm8oJ3VwZGF0aW5nIHRoZSBwYXJhbScpO1xuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5vbigndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0JGxvZy5pbmZvKHNuYXBzaG90LnZhbCgpKTtcblx0XHR9KTtcblx0XHRjdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykuY2hpbGQoJ3VwZGF0ZWQnKS5yZW1vdmUoKTtcblx0fVxuXG5cdHZtLmFkZEludml0YXRpb25Ub0F0dGVuZGluZyA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdFx0dmFyIGN1cnJlbnRVc2VyID0gcmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCdldmVudHMnKTtcblx0XHR2YXIgdG90YWxQZW5kaW5nSW52aXRhdGlvbnMgPSAwO1xuXG5cdFx0Ly9nZXQgdGhlIGludml0YXRpb24gZGV0YWlsc1xuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdwZW5kaW5nJykub24oJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhbGJlXG5cdFx0XHR2YXIgaW52aXRhdGlvbnMgPSBzbmFwc2hvdC52YWwoKTtcblx0XHRcdHZhciB0aGlzSW52aXRhdGlvbiA9IGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdWyRyb3V0ZVBhcmFtcy5ldmVudElkXTtcblx0XHRcdFxuXHRcdFx0Ly9sb2cgc3RhcnRpbmcgdmFsdWVzXG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnMpO1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdKTtcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9uc1skcm91dGVQYXJhbXMuaG9zdElkXVskcm91dGVQYXJhbXMuZXZlbnRJZF0pO1xuXHRcdFx0XG5cdFx0XHQvL2NoZWNrICMgb2YgaW5pdmlhdGlvbnNcblx0XHRcdGZvcihpbnZpdGF0aW9uIGluIGludml0YXRpb25zKSB7XG5cdFx0XHRcdHRvdGFsUGVuZGluZ0ludml0YXRpb25zKys7XG5cdFx0XHR9XG5cblx0XHRcdC8vcmVwb3J0ICMgb2YgaW52aXRhdGlvbnNcblx0XHRcdCRsb2cuaW5mbyhcInRvdGFsIHBlbmRpbmcgaW52aXRhdGlvbnM6IFwiICsgdG90YWxQZW5kaW5nSW52aXRhdGlvbnMpO1xuXHRcdFx0XG5cdFx0XHQkbG9nLmluZm8ocmVzcG9uc2UpO1xuXHRcdFx0Ly9hZGQgdGhlIGV2ZW50IHRvIHRoZSBndWVzdCdzIGF0dGVuZGluZyBsaXN0XG5cdFx0XHRpZihyZXNwb25zZSkgY3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ob3N0SWQpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ldmVudElkKS5zZXQodGhpc0ludml0YXRpb24sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oZXJyb3IpO1xuXHRcdFx0fSk7XG5cblxuXG5cdFx0fSk7XG5cdH1cblxuXHQvL3N0YXJ0IHJ1blxuXHRpbml0KCk7XG59XG5cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ0xhbmRpbmdQYWdlQ29udHJvbGxlcicsIExhbmRpbmdQYWdlQ29udHJvbGxlcik7XG5cbkxhbmRpbmdQYWdlQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZycsICckbG9jYXRpb24nLCAnJGRvY3VtZW50JywgJyR3aW5kb3cnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBMYW5kaW5nUGFnZUNvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCAkbG9jYXRpb24sICRkb2N1bWVudCwgJHdpbmRvdykge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHR2YXIgZmJVUkwgPSAnaHR0cHM6Ly9tZWV0dXBwbGFubmVyLmZpcmViYXNlaW8uY29tLyc7XG5cdHZhciBhdXRoRGF0YSA9IHt9O1xuXHR2YXIgY3VycmVudFVzZXJEYXRhID0ge307XG5cblx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdHZtLnNob3dSZXF1aXJubWVudHMgPSBmYWxzZTtcblx0dm0udmFsaWROZXdOYW1lID0geyd2YWxpZCc6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOicnfX07XG5cdHZtLnZhbGlkTmV3RW1haWwgPSB7J3ZhbGlkJzpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6Jyd9fTtcblx0dm0uc2VjdXJlUGFzc3dvcmQgPSB7J3NlY3VyZSc6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOicnfX07XG5cdHZtLnVubG9ja0NyZWF0ZVVzZXJCdG4gPSB7J3VzYWJsZSc6ZmFsc2UsICdjbGFzcyc6J2J0biBidG4td2FybmluZyd9O1xuXHR2bS5tZXNzYWdlID0gJ3Rlc3RpbmcnO1xuXG5cdFxuXHR2bS52YWxpZFVzZXJFbWFpbCA9IHsndmFsaWQnOmZhbHNlLCAnc3R5bGUnOntjb2xvcjonJ319O1xuXHR2bS52YWxpZFVzZXJQYXNzd29yZCA9IHsndmFsaWQnOmZhbHNlLCAnc3R5bGUnOntjb2xvcjonJ319O1xuXHR2bS51bmNsb2NrVXNlckxvZ2luQnRuID0geyd1c2FibGUnOmZhbHNlLCAnY2xhc3MnOididG4gYnRuLXdhcm5pbmcnfTtcblx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHMgPSB7XG5cdFx0MDp7J2NvbnN0cmFpbnQnOidJcyBhdCBsZWFzdCAxNiBjaGFyYWN0ZXJzIGxvbmcnLCAnc3R5bGUnOntjb2xvcjoncmVkJ30sICdtZXQnOmZhbHNlfSxcblx0XHQxOnsnY29uc3RyYWludCc6J0lzIG5vIGxvbmdlciB0aGFuIDEwMCBjaGFyYWN0ZXJzJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX0sXG5cdFx0Mjp7J2NvbnN0cmFpbnQnOidDb250YWlucyBhdCBsZWFzdCBvbmUgcmVxdWlyZWQgc3ltYm9sIChcXCFcXEBcXCNcXCRcXCVcXF5cXCZcXCopJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX0sXG5cdFx0Mzp7J2NvbnN0cmFpbnQnOidDb250YWlucyBhdCBsZWFzdCBvbmUgbnVtYmVyJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX0sXG5cdFx0NDp7J2NvbnN0cmFpbnQnOidDb250YWlucyBhdCBsZWFzdCBvbmUgbG93ZXJjYXNlIGxldHRlcicsICdzdHlsZSc6e2NvbG9yOidyZWQnfSwgJ21ldCc6ZmFsc2V9LFxuXHRcdDU6eydjb25zdHJhaW50JzonQ29udGFpbnMgYXQgbGVhc3Qgb25lIHVwcGVyY2FzZSBsZXR0ZXInLCAnc3R5bGUnOntjb2xvcjoncmVkJ30sICdtZXQnOmZhbHNlfSxcblx0XHQ2OnsnY29uc3RyYWludCc6XCJEb2Vzbid0IGhhdmUgYW55IGlsbGVnYWwgY2hhcmFjdGVyc1wiLCAnc3R5bGUnOntjb2xvcjoncmVkJ30sICdtZXQnOmZhbHNlfVxuXHR9O1xuXG5cdC8vdmFyIHRoZVRlc3RCb3ggPSBhbmd1bGFyLmVsZW1lbnQoJGRvY3VtZW50KS5maW5kKCcjdGVzdEJveCcpO1xuXG5cdC8vdGhlVGVzdEJveC5jaGVja1ZhbGlkaXR5KCk7XG5cdC8vc2V0Q3VzdG9tVmFsaWRpdHkoJ3lvdSBuZWVkIHNvbWV0aGluZyBlbHNlJyk7XG5cblx0Ly9sb2NhbCBtZXRob2RzXG5cdGZ1bmN0aW9uIHV0ZjhfdG9fYjY0KHN0cikge1xuXHRcdHJldHVybiBidG9hKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiBiNjRfdG9fdXRmOChzdHIpIHtcbiAgICBcdHJldHVybiBhdG9iKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fVxuXG5cdC8vZGVmaW5lIGNvbnRyb2xsZXIgbWV0aG9kc1xuXHR2bS5kaXNwbGF5UGFzc1JlcXMgPSBmdW5jdGlvbigpIHtcblx0XHRpZih2bS5uZXdOYW1lICYmIHZtLm5ld0VtYWlsKSB7XG5cdFx0XHR2bS5zaG93UmVxdWlybm1lbnRzID0gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dm0uc2hvd1JlcXVpcm5tZW50cyA9IGZhbHNlO1xuXHRcdH1cblx0fVxuXG5cdHZtLmNoZWNrTmV3TmFtZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFxuXHRcdGlmKHZtLm5ld05hbWUpIHtcblx0XHRcdGlmKHZtLm5ld05hbWUubGVuZ3RoID4gMCkge1xuXHRcdFx0XHR2bS52YWxpZE5ld05hbWUudmFsaWQgPSB0cnVlO1xuXHRcdFx0XHR2bS52YWxpZE5ld05hbWUuc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS52YWxpZE5ld05hbWUudmFsaWQgPSBmYWxzZTtcblx0XHRcdFx0dm0udmFsaWROZXdOYW1lLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR2bS5vcGVuQ3JlYXRlVXNlckJ1dHRvbigpO1xuXHR9XG5cblx0dm0uY2hlY2tOZXdFbWFpbCA9IGZ1bmN0aW9uICgpIHtcblx0XHRpZih2bS5uZXdFbWFpbCkge1xuXHRcdFx0Ly9jaGVjayB2YWxpZGl0eVxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XCIsIFwiXCIpO1xuXG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3Qodm0ubmV3RW1haWwpKSB7XG5cdFx0XHRcdHZtLnZhbGlkTmV3RW1haWwudmFsaWQgPSB0cnVlO1xuXHRcdFx0XHR2bS52YWxpZE5ld0VtYWlsLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0udmFsaWROZXdFbWFpbC52YWxpZCA9IGZhbHNlO1xuXHRcdFx0XHR2bS52YWxpZE5ld0VtYWlsLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0XHRcdH1cdFx0XHRcblx0XHR9XG5cdFx0XG5cdFx0dm0ub3BlbkNyZWF0ZVVzZXJCdXR0b24oKTtcblx0fVxuXG5cdHZtLmNoZWNrVXNlckVtYWlsID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodm0udXNlckVtYWlsKSB7XG5cdFx0XHQvL2NoZWNrIHZhbGlkaXR5XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKD86XFwuW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKykqQCg/OlthLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cXC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cIiwgXCJcIik7XG5cblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2bS51c2VyRW1haWwpKSB7XG5cdFx0XHRcdHZtLnZhbGlkVXNlckVtYWlsLnZhbGlkID0gdHJ1ZTtcblx0XHRcdFx0dm0udmFsaWRVc2VyRW1haWwuc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS52YWxpZFVzZXJFbWFpbC52YWxpZCA9IGZhbHNlO1xuXHRcdFx0XHR2bS52YWxpZFVzZXJFbWFpbC5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dm0ub3BlblVzZXJMb2dpbkJ0bigpO1xuXHR9XG5cblx0dm0uY2hlY2tOZXdQYXNzd29yZHMgPSBmdW5jdGlvbigpIHtcblx0XHQvL2ZvciBlYWNoIHBhc3N3b3JkIGRlZmluZSB0aGUgcGF0dGVybiB0aGF0IHRoZSBwYXNzd29yZCBtdXN0IG1hdGNoXG5cdFx0dmFyIGNvbnN0cmFpbnRzID0ge1xuXHQgXHRcdDA6IFsnJywgJyB5b3VyIHBhc3N3b3JkIG5lZWRzIHRvIGJlIDE2IGNoYXJhY3RlcnMgb3IgbG9uZ2VyJ10sXG5cdCBcdFx0MTogWycnLCAnIHlvdXIgcGFzc3dvcmQgbmVlZHMgdG8gYmUgbGVzcyB0aGFuIDEwMCBjaGFyYWN0ZXJzJ10sXG5cdCBcdFx0MjogWydbXFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqXScsIFwiIG5vIHJlcXVpcmVkIHN5bWJvbHMgZm91bmRcIl0sXG5cdCBcdFx0MzogWydbMC05XScsIFwiIG5vIG51bWJlcnMgZm91bmRcIl0sXG5cdCBcdFx0NDogWydbYS16XScsIFwiIG5vIGxvd2VyY2FzZSBsZXR0ZXJzIGZvdW5kXCJdLFxuXHQgXHRcdDU6IFsnW0EtWl0nLCBcIiBubyB1cHBlcmNhc2UgbGV0dGVycyBmb3VuZFwiXSxcblx0IFx0XHQ2OiBbJ1teQS16MC05XFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqXScsIFwiIGlsbGVnYWwgY2hhcmFjdGVycyBmb3VuZFwiXSxcbiBcdFx0fTtcbiBcdFx0XG4gXHRcdC8vY2hlY2sgZm9yIGxlbmd0aFxuIFx0XHRpZih2bS5uZXdQYXNzd29yZCkge1xuIFx0XHRcdGlmKHZtLm5ld1Bhc3N3b3JkLmxlbmd0aCA+IDE1KSB7IFxuIFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMF0uc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307IFxuIFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMF0ubWV0ID0gdHJ1ZTsgXG4gXHRcdFx0fSBlbHNlIHtcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzBdLnN0eWxlID0ge2NvbG9yOidyZWQnfTsgXG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1swXS5tZXQgPSBmYWxzZTtcbiBcdFx0XHR9XG4gXHRcdFx0aWYodm0ubmV3UGFzc3dvcmQubGVuZ3RoIDw9IDEwMCkgeyBcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzFdLnN0eWxlID0ge2NvbG9yOidncmVlbid9OyBcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzFdLm1ldCA9IHRydWU7XG4gXHRcdFx0fSBlbHNlIHtcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzFdLnN0eWxlID0ge2NvbG9yOidyZWQnfTsgXG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1sxXS5tZXQgPSBmYWxzZTtcbiBcdFx0XHR9XG5cbiBcdFx0XHQvL2NoZWNrIGNvbnN0cmFpbnRzIDItNVxuIFx0XHRcdGZvcihpID0gMjsgaSA8IDY7IGkrKykge1xuXHQgXHRcdFx0Ly9jaGVjayBmb3IgcmVxdWlyZWQgc3ltYm9scywgdXBwZXJjYXNlLCBsb3NlcmNhc2UsIGFuZCBjaGFyYWN0ZXJzXG5cdCBcdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoY29uc3RyYWludHNbaV1bMF0sIFwiXCIpO1x0XG5cblx0IFx0XHRcdC8vdGVzdCBlYWNoIGNvbnN0cmF0aW50XG5cdCBcdFx0XHRpZihjb25zdHJhaW50LnRlc3Qodm0ubmV3UGFzc3dvcmQpKSB7XG5cdCBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzW2ldLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHQgXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1tpXS5tZXQgPSB0cnVlO1xuXHQgXHRcdFx0fSBlbHNlIHtcblx0IFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbaV0uc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHQgXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1tpXS5tZXQgPSBmYWxzZTtcblx0IFx0XHRcdH1cblx0IFx0XHR9XG5cblx0IFx0XHQvL2NoZWNrIGlsbGVnYWwgY2hhcmFjdGVyc1xuXHQgXHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChjb25zdHJhaW50c1s2XVswXSwgXCJcIik7XG5cblx0IFx0XHQvL3J1biB0aGUgY2hlY2tcblx0IFx0XHRpZighY29uc3RyYWludC50ZXN0KHZtLm5ld1Bhc3N3b3JkKSkge1xuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNl0uc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNl0ubWV0ID0gZmFsc2U7XG5cdCBcdFx0fSBlbHNlIHtcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzZdLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNl0ubWV0ID0gdHJ1ZTtcblx0IFx0XHR9XG5cblx0IFx0XHQvL2lmIGFsbCBjb25zdHJhaW5zIG1ldCwgdGhyb3cgdmFsaWQgcGFzcyBmbGFnXG5cdCBcdFx0aWYoIHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzBdLm1ldCAmJlxuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMV0ubWV0ICYmXG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1syXS5tZXQgJiZcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzNdLm1ldCAmJlxuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNF0ubWV0ICYmXG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1s1XS5tZXQgJiZcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzZdLm1ldCkge1xuXHQgXHRcdFx0dm0uc2VjdXJlUGFzc3dvcmQuc2VjdXJlID0gdHJ1ZVxuXHQgXHRcdH0gZWxzZSB7XG5cdCBcdFx0XHR2bS5zZWN1cmVQYXNzd29yZC5zZWN1cmUgPSBmYWxzZTtcblx0IFx0XHR9XG5cblx0IFx0XHRpZih2bS5zZWN1cmVQYXNzd29yZC5zZWN1cmUpIHtcblx0IFx0XHRcdHZtLnNlY3VyZVBhc3N3b3JkLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHQgXHRcdH0gZWxzZSB7XG5cdCBcdFx0XHR2bS5zZWN1cmVQYXNzd29yZC5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdCBcdFx0fVxuIFx0XHR9XG4gXHRcdFxuIFx0XHR2bS5vcGVuQ3JlYXRlVXNlckJ1dHRvbigpO1xuXHR9XG5cblx0dm0uY2hlY2tVc2VyUGFzc3dvcmRzID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodm0udXNlclBhc3N3b3JkKSB7XG5cdFx0XHRpZih2bS51c2VyUGFzc3dvcmQubGVuZ3RoID4gMTUpIHtcblx0XHRcdFx0dm0udmFsaWRVc2VyUGFzc3dvcmQuc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdFx0XHRcdHZtLnZhbGlkVXNlclBhc3N3b3JkLnZhbGlkID0gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLnZhbGlkVXNlclBhc3N3b3JkLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0XHRcdFx0dm0udmFsaWRVc2VyUGFzc3dvcmQudmFsaWQgPSBmYWxzZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRcblx0XHR2bS5vcGVuVXNlckxvZ2luQnRuKCk7XG5cdH1cblxuXHR2bS5vcGVuQ3JlYXRlVXNlckJ1dHRvbiA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHZtLnZhbGlkTmV3TmFtZS52YWxpZCAmJiB2bS52YWxpZE5ld0VtYWlsLnZhbGlkICYmIHZtLnNlY3VyZVBhc3N3b3JkLnNlY3VyZSkge1xuXHRcdFx0dm0udW5sb2NrQ3JlYXRlVXNlckJ0bi5jbGFzcyA9ICdidG4gYnRuLXN1Y2Nlc3MnO1xuXHRcdFx0dm0udW5sb2NrQ3JlYXRlVXNlckJ0bi51c2FibGUgPSB0cnVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2bS51bmxvY2tDcmVhdGVVc2VyQnRuLmNsYXNzID0gJ2J0biBidG4td2FybmluZyc7XG5cdFx0XHR2bS51bmxvY2tDcmVhdGVVc2VyQnRuLnVzYWJsZSA9IGZhbHNlO1x0XG5cdFx0fVxuXG5cdH1cblxuXHR2bS5vcGVuVXNlckxvZ2luQnRuID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodm0udmFsaWRVc2VyRW1haWwudmFsaWQgJiYgdm0udmFsaWRVc2VyUGFzc3dvcmQudmFsaWQpIHtcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4uY2xhc3MgPSAnYnRuIGJ0bi1zdWNjZXNzJztcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlID0gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi5jbGFzcyA9ICdidG4gYnRuLXdhcm5pbmcnO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi51c2FibGUgPSBmYWxzZTtcdFxuXHRcdH1cblx0fVxuXG5cdHZtLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vc2V0IHZhbHVlc1xuXHRcdHZtLm5ld05hbWUgPSAkZG9jdW1lbnQuZmluZCgnI25ld05hbWUnKVswXS52YWx1ZTtcblx0XHR2bS5uZXdFbWFpbCA9ICRkb2N1bWVudC5maW5kKCcjbmV3RW1haWwnKVswXS52YWx1ZTtcblx0XHR2bS51c2VyRW1haWwgPSAkZG9jdW1lbnQuZmluZCgnI3VzZXJFbWFpbCcpWzBdLnZhbHVlO1xuXHRcdFxuXHRcdHZtLmNoZWNrTmV3TmFtZSgpO1xuXHRcdHZtLmNoZWNrTmV3RW1haWwoKTtcblx0XHR2bS5jaGVja1VzZXJFbWFpbCgpO1xuXHR9XG5cblx0ZnVuY3Rpb24gcmVkaXJlY3QocGF0aCwgdXNlckRhdGEpIHtcblx0XHR2YXIgZnVsbFBhdGggPSBwYXRoICsgJy8nICsgY3VycmVudFVzZXJEYXRhLnVpZCArICcvJyArIGN1cnJlbnRVc2VyRGF0YS50b2tlbjtcblx0XHQvL3JlZGlyZWN0XG5cdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyB0bzogJyArIGZ1bGxQYXRoKTtcblx0XHQkbG9jYXRpb24ucGF0aChmdWxsUGF0aCk7XG5cdFx0JHNjb3BlLiRhcHBseSgpO1xuXHR9XG5cblx0dm0uY3JlYXRlTmV3VXNlciA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2cuaW5mbygnQ3JlYXRpbmcgYSBuZXcgdXNlciBhY2NvdW50IG5vdyEnKTtcblxuXHRcdGlmKHZtLnVubG9ja0NyZWF0ZVVzZXJCdG4udXNhYmxlKSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZVxuXHRcdFx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cblx0XHRcdHJlZi5jcmVhdGVVc2VyKHtcblx0XHRcdFx0ZW1haWw6dm0ubmV3RW1haWwsXG5cdFx0XHRcdHBhc3N3b3JkOnZtLm5ld1Bhc3N3b3JkXG5cdFx0XHR9LGZ1bmN0aW9uKGVycm9yLCB1c2VyRGF0YSkge1xuXHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnRXJyb3IgY3JlYXRpbmcgdXNlcjogJyArIGVycm9yKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvL2xvZyByZXN1bHRzXG5cdFx0XHRcdFx0JGxvZy5pbmZvKHVzZXJEYXRhKTtcblxuXHRcdFx0XHRcdC8vc2F2ZSBhbGwgdGhlIGRhdGFcblx0XHRcdFx0XHRjdXJyZW50VXNlckRhdGEgPSB1c2VyRGF0YTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvL2dlbmVyYXRlIHRoZSB1c2VyIHJlY29yZFxuXHRcdFx0XHRcdHZhciB1c2Vyc1JlZiA9IHJlZi5jaGlsZCgnVXNlcnMvJyArIHVzZXJEYXRhLnVpZCk7XG5cdFx0XHRcdFx0dmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcblxuXHRcdFx0XHRcdC8vd3JpdGUgbmV3IHVzZXIgdG8gdGhlIGRhdGFiYXNlIHdpdGggYmlvIGluZm9cblx0XHRcdFx0XHR1c2Vyc1JlZi5zZXQoeyBcblx0XHRcdFx0XHRcdCdiaW8nOiB7XG5cdFx0XHRcdFx0XHRcdCduYW1lJzogdm0ubmV3TmFtZSxcblx0XHRcdFx0XHRcdFx0J2VtYWlsJzogdm0ubmV3RW1haWxcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHQnZXZlbnRzJzoge1xuXHRcdFx0XHRcdFx0XHQncGVuZGluZyc6IHtcblx0XHRcdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0J2hvc3RpbmcnOiB7XG5cdFx0XHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdCdhdHRlbmRpbmcnOiB7XG5cdFx0XHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdCdjb21wbGV0ZWQnOiB7XG5cdFx0XHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHRcdFx0JGxvZy5pbmZvKCdEYXRhIGNvdWxkIG5vdCBiZSBzYXZlZDogJyArIGVycm9yKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdCRsb2cuaW5mbygnRGF0YSBzYXZlZCBzdWNjZXNzZnVsbHkuJyk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Ly9hZGQgdGhpcyB1c2VyIHRvIHRoZSBsaXN0IG9mIHJlZ2lzdGVyZWQgdXNlcnNcblx0XHRcdFx0XHRyZWYuY2hpbGQoJ1VpZHMnKS5jaGlsZCh1dGY4X3RvX2I2NCh2bS5uZXdFbWFpbCkpLnNldChjdXJyZW50VXNlckRhdGEudWlkLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbyhcIkRhdGEgY291bGQgbm90IGJlIHNhdmVkLiBcIiArIGVycm9yKTtcblx0XHRcdFx0XHRcdGVsc2UgJGxvZy5pbmZvKFwidWlkIGNyZWF0ZWQgc3VjZXNzZnVsbHkuXCIpO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0Ly9yZWRpcmVjdCB0byBVc2VySW5mb3JtYXRpb25cblx0XHRcdFx0XHRyZWRpcmVjdCgnL3VzZXJJbmZvcm1hdGlvbicsIGN1cnJlbnRVc2VyRGF0YSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0fVxuXHR9XG5cblx0dm0ubG9naW5SZWdpc3RlcmVkVXNlciA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0aWYodm0udW5jbG9ja1VzZXJMb2dpbkJ0bi51c2FibGUpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlXG5cdFx0XHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHRcdFx0Ly9hdXRoZW50aWNhdGUgdGhlIHVzZXJcblx0XHRcdHJlZi5hdXRoV2l0aFBhc3N3b3JkKHtcblx0XHRcdFx0ZW1haWw6IHZtLnVzZXJFbWFpbCxcblx0XHRcdFx0cGFzc3dvcmQ6IHZtLnVzZXJQYXNzd29yZFxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IsIGF1dGhEYXRhKSB7XG5cdFx0XHRcdGlmKGVycm9yKSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdFcnJvciBMb2dnaW5nIEluOiAnICsgZXJyb3IpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnTG9nZ2VkIEluIHN1Y2Nlc3NmdWxseTogJyArIGF1dGhEYXRhLnVpZCk7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKGF1dGhEYXRhKTtcblx0XHRcdFx0XHQvL3NhdmUgYWxsIHRoZSBkYXRhXG5cdFx0XHRcdFx0Y3VycmVudFVzZXJEYXRhID0gYXV0aERhdGE7XG5cblx0XHRcdFx0XHQvL2xvYWQgdXNlciBiaW9cblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvL2xvYWQgdXNlciBldmVudHNcblxuXHRcdFx0XHRcdC8vcmVkaXJlY3Rcblx0XHRcdFx0XHRyZWRpcmVjdCgnL3VzZXJJbmZvcm1hdGlvbicsIGN1cnJlbnRVc2VyRGF0YSk7XG5cdFx0XHRcdFx0JHNjb3BlLiRhcHBseSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdH1cblxuXHR9XG5cblx0dm0uYWxlcnRNZSA9IGZ1bmN0aW9uKCkge1xuXHRcdGFsZXJ0KCd0aGlzIGlzIHdvcmtpbmchIGFuIGFsZXJ0IScpO1xuXHR9XG5cblx0dm0ub25SZXNpemVGdW5jdGlvbiA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBpbnB1dFRleHQgPSBhbmd1bGFyLmVsZW1lbnQoJy5pbnB1dFRleHQnKTtcblx0XHRpZigkd2luZG93Lm91dGVyV2lkdGggPiAkd2luZG93Lm91dGVySGVpZ2h0KSB7XG5cdFx0XHRpbnB1dFRleHQuY3NzKCdmb250LXNpemUnLCAnMmVtJyk7XG5cdFx0XHQkbG9nLmluZm8oJ21ha2luZyBiaWdnZXInKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aW5wdXRUZXh0LmNzcygnZm9udC1zaXplJywgJzEuMmVtJyk7XG5cdFx0fVxuXHR9XG5cblx0Ly9ldmVudCBsaXN0ZW5lcnNcblx0aWYgKCdhZGRFdmVudExpc3RlbmVyJyBpbiAkZG9jdW1lbnQpIHtcblx0ICAgICRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XG5cdCAgICBcdCRsb2cuaW5mbygnYWRkaW5nIEZhc3RDbGljaycpO1xuXHQgICAgICAgIEZhc3RDbGljay5hdHRhY2goJGRvY3VtZW50LmJvZHkpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHR9XG5cblx0YW5ndWxhci5lbGVtZW50KCR3aW5kb3cpLmJpbmQoJ3Jlc2l6ZScsIGZ1bmN0aW9uKCkge1xuXHRcdHZtLm9uUmVzaXplRnVuY3Rpb24oKTtcblx0XHQvLyRzY29wZS4kYXBwbHkoKTtcblx0fSk7XG5cblx0YW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cdFx0aWYoJHdpbmRvdy5vdXRlcldpZHRoIDwgNjAwKSB7XG5cdFx0XHR2bS5vblJlc2l6ZUZ1bmN0aW9uKCk7XG5cdFx0XHQvLyRzY29wZS4kYXBwbHkoKTtcblx0XHR9XG5cdH0pXG5cblxuXHQgdm0ubWFzdGVyID0ge307XG5cblx0ICB2bS51cGRhdGUgPSBmdW5jdGlvbih1c2VyKSB7XG5cdCAgICB2bS5tYXN0ZXIgPSBhbmd1bGFyLmNvcHkodXNlcik7XG5cdCAgfTtcblxuXHQgIHZtLnJlc2V0ID0gZnVuY3Rpb24oZm9ybSkge1xuXHQgICAgaWYgKGZvcm0pIHtcblx0ICAgICAgZm9ybS4kc2V0UHJpc3RpbmUoKTtcblx0ICAgICAgZm9ybS4kc2V0VW50b3VjaGVkKCk7XG5cdCAgICB9XG5cdCAgICB2bS51c2VyID0gYW5ndWxhci5jb3B5KHZtLm1hc3Rlcik7XG5cdCAgfTtcblxuXHQgIHZtLnJlc2V0KCk7XG59XG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdNYWluQ29udHJvbGxlcicsIE1haW5Db250cm9sbGVyKTtcblxuTWFpbkNvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICckbG9jYXRpb24nLCAnJGRvY3VtZW50J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gTWFpbkNvbnRyb2xsZXIoJGxvZywgJGxvY2F0aW9uLCAkZG9jdW1lbnQpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTsgXG5cblx0dm0ubG9nb3V0ID0gZnVuY3Rpb24oKSB7XG5cdFx0YWxlcnQoJ2xvZ2dpbmcgeW91IG91dCEnKTtcblx0XHRyZWYudW5hdXRoKCk7XG5cdFx0JGxvY2F0aW9uLnBhdGgoJy8nKTtcblx0fTtcblxuXHRpZiAoJ2FkZEV2ZW50TGlzdGVuZXInIGluICRkb2N1bWVudCkge1xuXHQgICAgJGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHtcblx0ICAgIFx0JGxvZy5pbmZvKCdhZGRpbmcgRmFzdENsaWNrJyk7XG5cdCAgICAgICAgRmFzdENsaWNrLmF0dGFjaCgkZG9jdW1lbnQuYm9keSk7XG5cdCAgICB9LCBmYWxzZSk7XG5cdH1cbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ05ld1VzZXJTaWduVXBDb250cm9sbGVyJywgTmV3VXNlclNpZ25VcENvbnRyb2xsZXIpO1xuXG5OZXdVc2VyU2lnblVwQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZycsICd2YWxpZGF0aW9uJywgJ2JhY2tlbmRTZXJ2aWNlcycsICd0cmFmZmljVmFsZXQnLCAndXNlckRhdGEnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBOZXdVc2VyU2lnblVwQ29udHJvbGxlcigkc2NvcGUsICRsb2csIHZhbGlkYXRpb24sIGJhY2tlbmRTZXJ2aWNlcywgdHJhZmZpY1ZhbGV0LCB1c2VyRGF0YSkge1xuXHR2YXIgdm0gPSB0aGlzO1xuXG5cdC8vZGVmaW5lIHZtIGlucHV0IHZhcmlhYmxlc1xuXHR2bS5pbnB1dHMgPSB7XG5cdFx0bmV3TmFtZTogJycsXG5cdFx0bmV3RW1haWw6ICcnLFxuXHRcdG5ld1Bhc3N3b3JkOiAnJyxcblx0XHRyZXF1aXJlZEZpZWxkc0RlZmluZWQ6IGZhbHNlXG5cdH1cblx0dm0uZXJyb3JzID0ge1xuXHRcdG5hbWU6ICcnLFxuXHRcdGVtYWlsOiAnJyxcblx0XHRwYXNzd29yZDogZmFsc2UsXG5cdFx0cGFzc2VzQWxsVGVzdHM6IGZhbHNlXG5cdH1cblx0dm0ucGFzc1JlcXMgPSB7XG5cdFx0MDogeyBpZDonJywgcmVxOidJcyBhdCBsZWFzdCAxNiBjaGFyYWN0ZXJzIGxvbmcnLCBmdWxmaWxsZWQ6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOidyZWQnfX0sXG5cdFx0MTogeyBpZDonJywgcmVxOidJcyBubyBsb25nZXIgdGhhbiAxMDAgY2hhcmFjdGVycycsIGZ1bGZpbGxlZDpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9IH0sXG5cdFx0MjogeyBpZDonJywgcmVxOidDb250YWlucyBhdCBsZWFzdCBvbmUgbG93ZXJjYXNlIGxldHRlcicsIGZ1bGZpbGxlZDpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9IH0sXG5cdFx0MzogeyBpZDonJywgcmVxOidDb250YWlucyBhdCBsZWFzdCBvbmUgdXBwZXJjYXNlIGxldHRlcicsIGZ1bGZpbGxlZDpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9IH0sXG5cdFx0NDogeyBpZDonJywgcmVxOidDb250YWlucyBhdCBsZWFzdCBvbmUgbnVtYmVyJywgZnVsZmlsbGVkOmZhbHNlLCAnc3R5bGUnOntjb2xvcjoncmVkJ30gfSxcblx0XHQ1OiB7IGlkOicnLCByZXE6J0NvbnRhaW5zIGF0IGxlYXN0IG9uZSByZXF1aXJlZCBzeW1ib2wgKFxcIVxcQFxcI1xcJFxcJVxcXlxcJlxcKiknLCBmdWxmaWxsZWQ6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOidyZWQnfSB9LFxuXHRcdDY6IHsgaWQ6JycsIHJlcTpcIkRvZXNuJ3QgaGF2ZSBhbnkgaWxsZWdhbCBjaGFyYWN0ZXJzXCIsIGZ1bGZpbGxlZDp0cnVlLCAnc3R5bGUnOntjb2xvcjoncmVkJ30gfVxuXHR9XG5cdHZtLnNob3dSZXFzQm94ID0gZmFsc2U7XG5cblx0Ly9kZWZpbmUgcmVxdWlyZWQgZmllbGQgY29uc3RyYWludHNcblx0dmFyIHNpZ251cFZhbGlkYXRpb24gPSB2YWxpZGF0aW9uO1xuXG5cdC8vZGVmaW5lIGNvbnRyb2xsZXIgbWV0aG9kc1xuXHRmdW5jdGlvbiB2ZXJpZnlSZXF1aXJubWVudHMoKSB7XG5cdFx0aWYodm0uZXJyb3JzLm5hbWUgPT0gJycgJiYgdm0uZXJyb3JzLmVtYWlsID09ICcnICYmICF2bS5lcnJvcnMucGFzc3dvcmQpIHZtLmVycm9ycy5wYXNzZXNBbGxUZXN0cyA9IHRydWU7XG5cdFx0ZWxzZSB2bS5lcnJvcnMucGFzc2VzQWxsVGVzdHMgPSBmYWxzZTtcblxuXHRcdGlmKCBhbmd1bGFyLmlzRGVmaW5lZCh2bS5pbnB1dHMubmV3TmFtZSkgJiYgdm0uaW5wdXRzLm5ld05hbWUgIT09ICcnICYmXG5cdFx0XHRhbmd1bGFyLmlzRGVmaW5lZCh2bS5pbnB1dHMubmV3RW1haWwpICYmIHZtLmlucHV0cy5uZXdFbWFpbCAhPT0gJycgJiZcblx0XHRcdGFuZ3VsYXIuaXNEZWZpbmVkKHZtLmlucHV0cy5uZXdQYXNzd29yZCkgJiYgdm0uaW5wdXRzLm5ld1Bhc3N3b3JkICE9PSAnJykgXG5cdFx0XHRcdHZtLmlucHV0cy5yZXF1aXJlZEZpZWxkc0RlZmluZWQgPSB0cnVlO1xuXHRcdGVsc2Ugdm0uaW5wdXRzLnJlcXVpcmVkRmllbGRzRGVmaW5lZCA9IGZhbHNlO1xuXHR9XG5cblx0Ly9kZWZpbmUgdm0gYWNjZXNzaWJsZSBtZXRob2RzXG5cdHZtLmNoZWNrTmV3TmFtZSA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVcblx0XHR2YXIgZXJyb3JzID0gW107XG5cdFx0dmFyIGhhc05hbWUgPSBzaWdudXBWYWxpZGF0aW9uLnJlcXVpcmVkKHZtLmlucHV0cy5uZXdOYW1lKTtcblx0XHR2YXIgbG9uZ0Vub3VnaCA9IHNpZ251cFZhbGlkYXRpb24ubWluTmFtZUxlbmd0aCh2bS5pbnB1dHMubmV3TmFtZSlcblx0XHRcblx0XHQvL2xvZyBlcnJvcnNcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChoYXNOYW1lKSkgZXJyb3JzLnB1c2goaGFzTmFtZSk7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQobG9uZ0Vub3VnaCkpIGVycm9ycy5wdXNoKGxvbmdFbm91Z2gpO1xuXG5cdFx0Ly91cGRhdGUgdGhlIGVycm9ycyBtb2RlbFxuXHRcdGlmKGVycm9ycy5sZW5ndGggPiAwKSB2bS5lcnJvcnMubmFtZSA9IGVycm9ycy5qb2luKCcsICcpO1xuXHRcdGVsc2Ugdm0uZXJyb3JzLm5hbWUgPSAnJztcblxuXHRcdHZlcmlmeVJlcXVpcm5tZW50cygpO1xuXHR9XG5cblx0dm0uY2hlY2tOZXdFbWFpbCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVcblx0XHR2YXIgZXJyb3JzID0gW107XG5cdFx0dmFyIGhhc0VtYWlsID0gc2lnbnVwVmFsaWRhdGlvbi5yZXF1aXJlZCh2bS5pbnB1dHMubmV3RW1haWwpO1xuXHRcdHZhciBpc0FuRW1haWwgPSBzaWdudXBWYWxpZGF0aW9uLmVtYWlsKHZtLmlucHV0cy5uZXdFbWFpbCk7XG5cdFx0XG5cdFx0Ly9sb2cgZXJyb3JzXG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoaGFzRW1haWwpKSBlcnJvcnMucHVzaChoYXNFbWFpbCk7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoaXNBbkVtYWlsKSkgZXJyb3JzLnB1c2goaXNBbkVtYWlsKTtcblxuXHRcdC8vdXBkYXRlIHRoZSBlcnJvcnMgbW9kZWxcblx0XHRpZihlcnJvcnMubGVuZ3RoID4gMCkgdm0uZXJyb3JzLmVtYWlsID0gZXJyb3JzLmpvaW4oJywgJyk7XG5cdFx0ZWxzZSB2bS5lcnJvcnMuZW1haWwgPSAnJztcblxuXHRcdHZlcmlmeVJlcXVpcm5tZW50cygpO1xuXHR9XG5cblx0dm0uY2hlY2tOZXdQYXNzd29yZCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vZmxpcCBvbiByZXFzIGJveFxuXHRcdHZtLnNob3dSZXFzQm94ID0gdHJ1ZTtcblxuXHRcdC8vbG9jYWwgdmFyaWFibGVcblx0XHR2YXIgZXJyb3JzID0gW107XG5cdFx0dmFyIGhhc1Bhc3N3b3JkID0gc2lnbnVwVmFsaWRhdGlvbi5yZXF1aXJlZCh2bS5pbnB1dHMubmV3UGFzc3dvcmQpO1xuXHRcdHZhciBzcGVjaWZpY1JlcXMgPSBbXG5cdFx0XHRzaWdudXBWYWxpZGF0aW9uLm1pblBhc3NMZW5ndGgodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKSxcblx0XHRcdHNpZ251cFZhbGlkYXRpb24ubWF4UGFzc0xlbmd0aCh2bS5pbnB1dHMubmV3UGFzc3dvcmQpLFxuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5hdExlYXN0T25lTG93ZXJjYXNlKHZtLmlucHV0cy5uZXdQYXNzd29yZCksXG5cdFx0XHRzaWdudXBWYWxpZGF0aW9uLmF0TGVhc3RPbmVVcHBlcmNhc2Uodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKSxcblx0XHRcdHNpZ251cFZhbGlkYXRpb24uYXRMZWFzdE9uZU51bWJlcih2bS5pbnB1dHMubmV3UGFzc3dvcmQpLFxuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5hdExlYXN0T25lU3ltYm9sKHZtLmlucHV0cy5uZXdQYXNzd29yZCksXG5cdFx0XHRzaWdudXBWYWxpZGF0aW9uLmlsbGVnYWxDaGFyYWN0ZXIodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKVxuXHRcdF07XG5cblx0XHQvL2xvZyBlcnJvcnNcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChoYXNQYXNzd29yZCkpIGVycm9ycy5wdXNoKGhhc1Bhc3N3b3JkKTtcblxuXHRcdC8vdXBkYXRlIHRoZSBlcnJvcnMgbW9kZWxcblx0XHRpZihlcnJvcnMubGVuZ3RoID4gMCkgdm0uZXJyb3JzLnBhc3N3b3JkID0gZXJyb3JzLmpvaW4oJywgJyk7XG5cdFx0ZWxzZSB2bS5lcnJvcnMuZW1haWwgPSAnJztcblxuXHRcdC8vdXBkYXRlIHJlcXMgbW9kZWxcblx0XHR2YXIgYW55RXJyb3JzID0gZmFsc2U7XG5cdFx0Zm9yKGk9MDsgaTw3OyBpKyspIHtcblx0XHRcdGlmKHNwZWNpZmljUmVxc1tpXSkge1xuXHRcdFx0XHR2bS5wYXNzUmVxc1tpXS5mdWxmaWxsZWQgPSB0cnVlO1xuXHRcdFx0XHR2bS5wYXNzUmVxc1tpXS5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLnBhc3NSZXFzW2ldLmZ1bGZpbGxlZCA9IGZhbHNlO1xuXHRcdFx0XHR2bS5wYXNzUmVxc1tpXS5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdFx0XHRcdGFueUVycm9ycyA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dm0uZXJyb3JzLnBhc3N3b3JkID0gYW55RXJyb3JzO1xuXHRcdHZlcmlmeVJlcXVpcm5tZW50cygpO1xuXHR9XG5cblx0dm0uZXhpdFBhc3N3b3JkID0gZnVuY3Rpb24oKSB7XG5cdFx0dm0uY2hlY2tOZXdQYXNzd29yZCgpO1xuXHRcdHZtLnNob3dSZXFzQm94ID0gZmFsc2U7XG5cdH1cblxuXHR2bS5jcmVhdGVOZXdVc2VyID0gZnVuY3Rpb24gKCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgbmV3VXNlclNoZXJwYSA9IHRyYWZmaWNWYWxldDtcblxuXHRcdC8vY29uZmlybSBhbGwgZmllbGRzIGFyZSB2YWxpZFxuXHRcdGlmKHZtLmVycm9ycy5wYXNzZXNBbGxUZXN0cyAmJiB2bS5pbnB1dHMucmVxdWlyZWRGaWVsZHNEZWZpbmVkKSB7XG5cdFx0XHRcblx0XHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRcdHZhciBjcmVhdGVOZXdVc2VyID0gYmFja2VuZFNlcnZpY2VzO1xuXHRcdFx0dmFyIG5ld1VzZXJEYXRhID0gdXNlckRhdGE7XG5cblx0XHRcdC8vbWFpbnRhaW4gbG9jYWwgdmFsdWVzIHRvIHNwZWVkIHVwIHVzZXIgZXhwZXJpZW5jZVxuXHRcdFx0bmV3VXNlckRhdGEubG9hZFByaW1hcmllcyh2bS5pbnB1dHMubmV3TmFtZSwgdm0uaW5wdXRzLm5ld0VtYWlsKTtcblxuXHRcdFx0Ly9jcmVhdGUgdGhlIG5ldyB1c2VyIGluIHRoZSBkYXRhYmFzZVxuXHRcdFx0Y3JlYXRlTmV3VXNlci5jcmVhdGVOZXdVc2VyKHZtLmlucHV0cy5uZXdFbWFpbCwgdm0uaW5wdXRzLm5ld1Bhc3N3b3JkKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24odXNlckRhdGEpIHtcblx0XHRcdFx0Ly9hZGQgdGhpcyB1c2VyIHRvIHRoZSBsaXN0IG9mIHJlZ2lzdGVyZWQgdXNlcnNcblx0XHRcdFx0Y3JlYXRlTmV3VXNlci5hZGROZXdVc2VyVG9EYXRhYmFzZSh1c2VyRGF0YS51aWQsIHZtLmlucHV0cy5uZXdOYW1lLCB2bS5pbnB1dHMubmV3RW1haWwpXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKG1lc3NhZ2UpIHtcblx0XHRcdFx0XHQkbG9nLmluZm8obWVzc2FnZSk7XG5cdFx0XHRcdFx0Ly9hZGQgdGhpcyB1c2VyIHRvIHRoZSBsaXN0IG9mIHJlZ2lzdGVyZWQgdXNlcnNcblx0XHRcdFx0XHRjcmVhdGVOZXdVc2VyLmFkZE5ld1VzZXJUb1JlZ1VzZXJzTGlzdCh1c2VyRGF0YS51aWQsIHZtLmlucHV0cy5uZXdFbWFpbClcblx0XHRcdFx0XHQudGhlbihmdW5jdGlvbihtZXNzYWdlKSB7ICRsb2cuaW5mbyhtZXNzYWdlKTsgfSlcblx0XHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyAkbG9nLmluZm8obWVzc2FnZSk7IH0pXG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5jYXRjaChmdW5jdGlvbihtZXNzYWdlKSB7ICRsb2cuaW5mbyhtZXNzYWdlKTsgfSlcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyAkbG9nLmluZm8obWVzc2FnZSk7IH0pXG5cdFx0XHRcblx0XHRcdC8vcmVkaXJlY3QgdG8gdGhlIG5leHQgcGFnZSBcblx0XHRcdG5ld1VzZXJTaGVycGEucmVkaXJlY3RUbygnL3VzZXJJbmZvcm1hdGlvbicpO1xuXHRcdH1cblxuXHR9XG5cdFxuXHQvL3J1biB0aW1lIGFjdGlvbnNcblxufVxuXG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCd0b3BNZW51Q29udHJvbGxlcicsIHRvcE1lbnVDb250cm9sbGVyKTtcblxudG9wTWVudUNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnLCAnJGxvY2F0aW9uJywgJyRkb2N1bWVudCcsICckd2luZG93J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gdG9wTWVudUNvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCAkbG9jYXRpb24sICRkb2N1bWVudCwgJHdpbmRvdykge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHR2YXIgZmJVUkwgPSAnaHR0cHM6Ly9tZWV0dXBwbGFubmVyLmZpcmViYXNlaW8uY29tLyc7XG5cdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXG5cdC8vbG9jYWwgdmFyaWFibGVzXG5cdHZtLmxvZ2dlZEluID0gZmFsc2VcblxuXHQvL3N0eWxlcyB2YXJpYWJsZXNcblx0XG5cdC8vZXZlbnQgbGlzdGVuZXJzXG5cdGlmICgnYWRkRXZlbnRMaXN0ZW5lcicgaW4gJGRvY3VtZW50KSB7XG5cdCAgICAkZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkge1xuXHQgICAgXHQkbG9nLmluZm8oJ2FkZGluZyBGYXN0Q2xpY2snKTtcblx0ICAgICAgICBGYXN0Q2xpY2suYXR0YWNoKCRkb2N1bWVudC5ib2R5KTtcblx0ICAgIH0sIGZhbHNlKTtcblx0fVxuXG5cdGFuZ3VsYXIuZWxlbWVudCgkd2luZG93KS5iaW5kKCdyZXNpemUnLCBmdW5jdGlvbigpIHtcblx0XHR2bS5vblJlc2l6ZUZ1bmN0aW9uKCk7XG5cdFx0JHNjb3BlLiRhcHBseSgpO1xuXHR9KTtcblxuXHRhbmd1bGFyLmVsZW1lbnQoJGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcblx0XHRpZigkd2luZG93Lm91dGVyV2lkdGggPCA2MDApIHtcblx0XHRcdHZtLm9uUmVzaXplRnVuY3Rpb24oKTtcblx0XHRcdCRzY29wZS4kYXBwbHkoKTtcblx0XHR9XG5cdH0pXG5cdC8vZHluYW1pY2FsbHkgc2V0IGlucHV0IHdpZHRoXG5cblxuXHQvLyBDcmVhdGUgYSBjYWxsYmFjayB3aGljaCBsb2dzIHRoZSBjdXJyZW50IGF1dGggc3RhdGVcblx0ZnVuY3Rpb24gaW5pdCgpIHtcblx0XHR2bS5vblJlc2l6ZUZ1bmN0aW9uKCk7XG5cdFx0JHNjb3BlLiRhcHBseSgpO1xuXHR9XG5cblx0ZnVuY3Rpb24gYXV0aERhdGFDYWxsYmFjayhhdXRoRGF0YSkge1xuXHQgIGlmIChhdXRoRGF0YSkge1xuXHQgICAgJGxvZy5pbmZvKFwiVXNlciBcIiArIGF1dGhEYXRhLnVpZCArIFwiIGlzIGxvZ2dlZCBpbiB3aXRoIFwiICsgYXV0aERhdGEucHJvdmlkZXIpO1xuXHQgICAgdm0ubG9nZ2VkSW4gPSB0cnVlO1xuXHQgIH0gZWxzZSB7XG5cdCAgICAkbG9nLmluZm8oXCJVc2VyIGlzIGxvZ2dlZCBvdXRcIik7XG5cdCAgICB2bS5sb2dnZWRJbiA9IGZhbHNlO1xuXHQgIH1cblx0fVxuXG5cdGZ1bmN0aW9uIHJlZGlyZWN0KHBhdGgsIHVzZXJEYXRhKSB7XG5cdFx0dmFyIGZ1bGxQYXRoID0gcGF0aCArICcvJyArIHVzZXJEYXRhLnVpZCArICcvJyArIHVzZXJEYXRhLnRva2VuO1xuXHRcdC8vcmVkaXJlY3Rcblx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIHRvOiAnICsgZnVsbFBhdGgpO1xuXHRcdCRsb2NhdGlvbi5wYXRoKGZ1bGxQYXRoKTtcblx0XHQvLyRzY29wZS4kYXBwbHkoKTtcblx0fVxuXG5cdC8vdm0gYWNjZXNzaWJsZSBtZXRob2RzXG5cdHZtLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2cuaW5mbygnbG9nZ2luZyBvdXQhJyk7XG5cdFx0dm0ubG9nZ2VkSW4gPSBmYWxzZTtcblx0XHRyZWYudW5hdXRoKCk7XG5cdFx0cmVkaXJlY3QoJy8nLCB7dWlkOicnLCB0b2tlbjonJ30pO1xuXHR9XG5cblx0dm0ubmF2QmFyTG9naW5SZWdpc3RlcmVkVXNlciA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2cuaW5mbygnbGF1bmNoaW5nIGxvZ2luJyk7XG5cdFx0aWYodHJ1ZSkge1xuXHRcdC8vaWYodm0udW5jbG9ja1VzZXJMb2dpbkJ0bi51c2FibGUpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlXG5cdFx0XHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHRcdFx0Ly9hdXRoZW50aWNhdGUgdGhlIHVzZXJcblx0XHRcdHJlZi5hdXRoV2l0aFBhc3N3b3JkKHtcblx0XHRcdFx0ZW1haWw6IHZtLm5hdmJhclVzZXJFbWFpbCxcblx0XHRcdFx0cGFzc3dvcmQ6IHZtLm5hdmJhclVzZXJQYXNzXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvciwgYXV0aERhdGEpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ0Vycm9yIExvZ2dpbmcgSW46ICcgKyBlcnJvcik7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdMb2dnZWQgSW4gc3VjY2Vzc2Z1bGx5OiAnICsgYXV0aERhdGEudWlkKTtcblx0XHRcdFx0XHQkbG9nLmluZm8oYXV0aERhdGEpO1xuXHRcdFx0XHRcdC8vc2F2ZSBhbGwgdGhlIGRhdGFcblxuXHRcdFx0XHRcdC8vbG9hZCB1c2VyIGJpb1xuXHRcdFx0XHRcdC8vbG9hZCB1c2VyIGV2ZW50c1xuXG5cdFx0XHRcdFx0Ly9yZWRpcmVjdFxuXHRcdFx0XHRcdHJlZGlyZWN0KCcvdXNlckluZm9ybWF0aW9uJywgYXV0aERhdGEpO1xuXHRcdFx0XHRcdCRzY29wZS4kYXBwbHkoKTtcblxuXHRcdFx0XHRcdC8vY2xpY2sgY2xvc2VkIHRoZSBuYXZiYXJcblx0XHRcdFx0XHRhbmd1bGFyLmVsZW1lbnQoJy5uYXZiYXItdG9nZ2xlJykuY2xpY2soKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblxuXG5cdFx0fVxuXG5cdH1cblxuXHR2bS5vblJlc2l6ZUZ1bmN0aW9uID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG5hdmJhcklucHV0cyA9IGFuZ3VsYXIuZWxlbWVudCgnLm5hdmJhcklucHV0cycpO1xuXHRcdG5hdmJhcklucHV0cy5jc3MoJ3dpZHRoJywgKCR3aW5kb3cub3V0ZXJXaWR0aCAtIDI2KSArICdweCcpO1xuXHR9XG5cblx0Ly8gUmVnaXN0ZXIgdGhlIGNhbGxiYWNrIHRvIGJlIGZpcmVkIGV2ZXJ5IHRpbWUgYXV0aCBzdGF0ZSBjaGFuZ2VzXG5cdHJlZi5vbkF1dGgoYXV0aERhdGFDYWxsYmFjayk7XG59XG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdVc2VyRXZlbnRzQ29udHJvbGxlcicsIFVzZXJFdmVudHNDb250cm9sbGVyKTtcblxuVXNlckV2ZW50c0NvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnLCAnJGxvY2F0aW9uJywgJyRyb3V0ZVBhcmFtcycsICckZmlyZWJhc2VPYmplY3QnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBVc2VyRXZlbnRzQ29udHJvbGxlcigkc2NvcGUsICRsb2csICRsb2NhdGlvbiwgJHJvdXRlUGFyYW1zLCAkZmlyZWJhc2VPYmplY3QpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0dmFyIHVzZXJFdmVudHMgPSByZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJ2V2ZW50cycpO1xuXHR2YXIgY3VycmVudFVzZXJCaW8gPSByZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJ2JpbycpO1xuXHR2YXIgdXNlckV2ZW50c1NuYXBzaG90O1xuXG5cdC8vYmluZGluZyBpbXBvcnRhbnQgdmFyaWFibGVzXG5cdHZtLmV2ZW50cyA9ICRmaXJlYmFzZU9iamVjdCh1c2VyRXZlbnRzKTtcblxuXHR2bS5zaG93RGVjbGluZSA9IGZhbHNlO1xuXHRcblx0Y3VycmVudFVzZXJCaW8uY2hpbGQoJ25hbWUnKS5vbigndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdHZtLmN1cnJlbnRVc2VyTmFtZSA9IHNuYXBzaG90LnZhbCgpO1xuXHRcdCRsb2cuaW5mbygnZ290IHRoZSB1c2VyIG5hbWUnKTtcblx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cdH0sIGZ1bmN0aW9uKGVycm9yT2JqZWN0KSB7XG5cdFx0JGxvZy5pbmZvKFwiVGhlIHJlYWQgZmFpbGVkOiBcIiArIGVycm9yT2JqZWN0LmNvZGUpO1xuXHR9KTtcblxuXHQvL2RlY2xhcmUgbG9jYWwgbWV0aG9kc1xuXHRmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fTtcblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH07XG5cblx0ZnVuY3Rpb24gZ2VuZXJhdGVFdmVudElEKGRhdGUsIG5vT2ZFdmVudHNBbHJlYWR5KSB7XG5cdFx0cmV0dXJuIChkYXRlICogMTApICsgbm9PZkV2ZW50c0FscmVhZHk7XG5cdH1cblxuXHQvL2RlY2xhcmUgdmlldyBtZXRob2RzXG5cdGZ1bmN0aW9uIGV2ZW50UmVkaXJlY3QocGF0aCwgZXZlbnRJRCwgaG9zdElkKSB7XG5cdFx0dmFyIGZ1bGxQYXRoID0gcGF0aCArICcvJyArIGV2ZW50SUQgKyAnLycgKyBob3N0SWQgKyAnLycrICRyb3V0ZVBhcmFtcy51aWQgKyAnLycgKyAkcm91dGVQYXJhbXMudG9rZW47XG5cdFx0Ly9yZWRpcmVjdFxuXHRcdCRsb2cuaW5mbygncmVkaXJlY3RpbmcgdG86ICcgKyBmdWxsUGF0aCk7XG5cdFx0JGxvY2F0aW9uLnBhdGgoZnVsbFBhdGgpO1xuXHR9XG5cblx0dm0uZXZlbnRzQXJlQmVpbmdIb3N0ZWQgPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgZXZlbnRGb3VuZCA9IGZhbHNlO1xuXHRcdGZvcihlbGVtZW50IGluIHZtLmV2ZW50cy5ob3N0aW5nKSB7XG5cdFx0XHRpZihlbGVtZW50ICE9ICd1cGRhdGVkJyl7XG5cdFx0XHRcdGV2ZW50Rm91bmQgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gZXZlbnRGb3VuZDtcblx0fVxuXG5cdHZtLmV2ZW50SW52aXRhdGlvbnNQZW5kaW5nID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGV2ZW50Rm91bmQgPSBmYWxzZTtcblx0XHRmb3IoZWxlbWVudCBpbiB2bS5ldmVudHMucGVuZGluZykge1xuXHRcdFx0aWYoZWxlbWVudCAhPSAndXBkYXRlZCcpe1xuXHRcdFx0XHRldmVudEZvdW5kID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGV2ZW50Rm91bmQ7XG5cdH1cblxuXHR2bS5hdHRlbmRpbmdFdmVudHMgPSBmdW5jdGlvbihndWVzdExpc3QpIHtcblx0XHR2YXIgZXZlbnRGb3VuZCA9IGZhbHNlO1xuXHRcdGZvcihlbGVtZW50IGluIHZtLmV2ZW50cy5hdHRlbmRpbmcpIHtcblx0XHRcdGlmKGVsZW1lbnQgIT0gJ3VwZGF0ZWQnKXtcblx0XHRcdFx0ZXZlbnRGb3VuZCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBldmVudEZvdW5kO1xuXHR9XG5cblx0dm0ucGVyY2VudFJTVlBlZCA9IGZ1bmN0aW9uKGd1ZXN0TGlzdCkge1x0XHRcblx0XHRpZihndWVzdExpc3QpIHtcblx0XHRcdHJldHVybiAodm0udG90YWxBdHRlbmRpbmcoZ3Vlc3RMaXN0KSAvIHZtLnRvdGFsSW52aXRlZChndWVzdExpc3QpKSAqIDEwMDtcblx0XHR9XG5cdFx0ZWxzZSByZXR1cm4gMDtcblx0fVxuXG5cdHZtLnRvdGFsQXR0ZW5kaW5nID0gZnVuY3Rpb24oZ3Vlc3RMaXN0KSB7XG5cdFx0aWYoZ3Vlc3RMaXN0KSB7XG5cdFx0XHR2YXIgYXR0ZW5kaW5nID0gMDtcblx0XHRcdGFuZ3VsYXIuZm9yRWFjaChndWVzdExpc3QsIGZ1bmN0aW9uKGd1ZXN0LCBpZCkge1xuXHRcdFx0XHRpZihndWVzdC5hdHRlbmRpbmcgPT0gdHJ1ZSkgYXR0ZW5kaW5nKys7XG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiBhdHRlbmRpbmc7XG5cdFx0fVxuXHRcdGVsc2UgcmV0dXJuIDA7XG5cdH1cblxuXHR2bS50b3RhbEludml0ZWQgPSBmdW5jdGlvbihndWVzdExpc3QpIHtcblx0XHRpZihndWVzdExpc3QpIHtcblx0XHRcdHZhciBpbnZpdGVkID0gMDtcblx0XHRcdGFuZ3VsYXIuZm9yRWFjaChndWVzdExpc3QsIGZ1bmN0aW9uKGd1ZXN0LCBpZCkge1xuXHRcdFx0XHRpbnZpdGVkKys7XG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiBpbnZpdGVkO1xuXHRcdH1cblx0XHRlbHNlIHJldHVybiAwO1xuXHR9XG5cblx0dm0uYWNjZXB0RXZlbnRJbnZpdGF0aW9uID0gZnVuY3Rpb24oZXZlbnQpIHtcblx0XHQvKlxuXHRcdCRsb2cuaW5mbyhldmVudC5ob3N0KTtcblx0XHQkbG9nLmluZm8oZXZlbnQuaWQpO1xuXHRcdC8vdXBkYXRlIGhvc3RzJyBsaXN0c1xuXHRcdHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZChldmVudC5ob3N0KS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ2hvc3RpbmcnKS5jaGlsZChldmVudC5pZCkuY2hpbGQoJ2d1ZXN0TGlzdCcpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLnVwZGF0ZSh7XG5cdFx0XHRhdHRlbmRpbmc6IHRydWUsXG5cdFx0XHRzdGF0dXM6ICdhdHRuZG5nJ1xuXHRcdH0pO1xuXG5cdFx0Ly91cGRhdGUgZ3Vlc3QncyBsaXN0c1xuXHRcdC8vYWRkIHRvIHRoZSBhdHRlbmRpbmcgbGlzdCAtIG9uIHRoZSBzZXJ2ZXJcblx0XHR1c2VyRXZlbnRzLmNoaWxkKCdhdHRlbmRpbmcnKS5jaGlsZChldmVudC5ob3N0KS5jaGlsZChldmVudC5pZCkuc2V0KHtcblx0XHRcdGlkOiBldmVudC5pZCxcblx0XHRcdGhvc3Q6IGV2ZW50Lmhvc3QsXG5cdFx0XHRldmVudFRpbWVzOiB7XG5cdFx0XHRcdHN0YXJ0OiB2bS5ldmVudHMucGVuZGluZ1tldmVudC5ob3N0XVtldmVudC5pZF0uZXZlbnRUaW1lcy5zdGFydCxcblx0XHRcdFx0ZW5kOiB2bS5ldmVudHMucGVuZGluZ1tldmVudC5ob3N0XVtldmVudC5pZF0uZXZlbnRUaW1lcy5lbmRcblx0XHRcdH0sXG5cdFx0XHRuYW1lOiB2bS5ldmVudHMucGVuZGluZ1tldmVudC5ob3N0XVtldmVudC5pZF0ubmFtZVxuXHRcdH0pO1xuXHRcdC8vYWRkIHRvIHRoZSBhdHRlbmRpbmcgbGlzdCAtIGluIHRoZSBicm93c2VyXG5cdFx0dm0uZXZlbnRzLmF0dGVuZGluZ1tldmVudC5ob3N0XVtldmVudC5pZF0gPSB7XG5cdFx0XHRpZDogZXZlbnQuaWQsXG5cdFx0XHRob3N0OiBldmVudC5ob3N0LFxuXHRcdFx0ZXZlbnRUaW1lczoge1xuXHRcdFx0XHRzdGFydDogdm0uZXZlbnRzLnBlbmRpbmdbZXZlbnQuaG9zdF1bZXZlbnQuaWRdLmV2ZW50VGltZXMuc3RhcnQsXG5cdFx0XHRcdGVuZDogdm0uZXZlbnRzLnBlbmRpbmdbZXZlbnQuaG9zdF1bZXZlbnQuaWRdLmV2ZW50VGltZXMuZW5kXG5cdFx0XHR9LFxuXHRcdFx0bmFtZTogdm0uZXZlbnRzLnBlbmRpbmdbZXZlbnQuaG9zdF1bZXZlbnQuaWRdLm5hbWVcblx0XHR9O1xuXG5cdFx0Ly9yZW1vdmUgZnJvbSB0aGUgcGVuZGluZyBsaXN0IC0gb24gdGhlIHNlcnZlclxuXHRcdHVzZXJFdmVudHMuY2hpbGQoJ3BlbmRpbmcnKS5jaGlsZChldmVudC5ob3N0KS5jaGlsZChldmVudC5pZCkucmVtb3ZlKCk7XG5cdFx0Ly9yZW1vdmUgZnJvbSB0aGUgcGVuZGluZyBsaXN0IC0gaW4gdGhlIGJyb3dzZXJcblx0XHR2bS5ldmVudHMucGVuZGluZ1tldmVudC5ob3N0XVtldmVudC5pZF0gPSB7fTtcblx0XHQqL1xuXHR9XG5cblx0dm0ucmVkaXJlY3RUb0hvc3RlZEV2ZW50ID0gZnVuY3Rpb24oZXZlbnRJRCkge1xuXHRcdCRsb2cuaW5mbygneW91XFwncmUgYWNjZXNzaW5nIGV2ZW50ICcgKyBldmVudElEKTtcblxuXHRcdC8vcmVkaXJlY3QgdG8gdGhlIGV2ZW50XG5cdFx0ZXZlbnRSZWRpcmVjdCgnL2V2ZW50JywgZXZlbnRJRCwgJHJvdXRlUGFyYW1zLnVpZCk7XG5cdH1cblxuXHR2bS5yZWRpcmVjdFRvM3JkUGFydHlFdmVudCA9IGZ1bmN0aW9uKGV2ZW50LCBpbnZpdGVTdGF0dXMpIHtcblx0XHQkbG9nLmluZm8oZXZlbnQpO1xuXG5cdFx0Ly9nZXR0aW5nIHRoZSBob3N0J3MgSWRcblx0XHRpZihpbnZpdGVTdGF0dXMgPT0gJ3BlbmRpbmcnKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2FjY2Vzc2luZyBmcm9tIGEgcGVuZGluZyBpbnZpdGF0aW9uJyk7XG5cdFx0XHQkbG9nLmluZm8oZXZlbnQpO1xuXHRcdFx0ZXZlbnRSZWRpcmVjdCgnL2V2ZW50JywgZXZlbnQuaWQsIGV2ZW50Lmhvc3QpO1xuXG5cdFx0fSBlbHNlIGlmKGludml0ZVN0YXR1cyA9PSAnYXR0ZW5kaW5nJykge1xuXHRcdFx0JGxvZy5pbmZvKCdhY2Nlc3NpbmcgZnJvbSBhbiByc3ZwZWQgaW52aXRhdGlvbicpO1xuXHRcdFx0ZXZlbnRSZWRpcmVjdCgnL2V2ZW50JywgZXZlbnQuaWQsIGV2ZW50Lmhvc3QpO1xuXHRcdH1cblxuXHRcdC8vcmVkaXJlY3RpbmcgdG8gdGhlIGV2ZW50XG5cblx0fVxuXG5cdHZtLmNyZWF0ZU5ld0V2ZW50ID0gZnVuY3Rpb24oKSB7XG5cdFx0JGxvZy5pbmZvKCd5b3VcXCdyZSBjcmVhdGluZyBhIG5ldyBldmVudCEnKTtcblxuXHRcdC8vZGVmaW5lIHRoZSBldmVudElEXG5cdFx0dmFyIGRhdGUgPSBuZXcgRGF0ZSgpOyBcblx0XHRcdGlmKHZtLmV2ZW50cy5ob3N0aW5nKSBub09mRXZlbnRzQWxyZWFkeSA9IE9iamVjdC5rZXlzKHZtLmV2ZW50cy5ob3N0aW5nKS5sZW5ndGg7XG5cdFx0XHRlbHNlIG5vT2ZFdmVudHNBbHJlYWR5ID0gMDtcblx0XHR2YXIgZXZlbnRJRCA9IGdlbmVyYXRlRXZlbnRJRChkYXRlVGltZVRvVW5peFRpbWUoZGF0ZSksIG5vT2ZFdmVudHNBbHJlYWR5KTtcblxuXHRcdC8vY3JlYXRlIGV2ZW50IG1vZGVsIHRvIHN0YXJ0IHdpdGhcblx0XHQvLyRsb2cuaW5mbyh2bS5ldmVudHNbJ2hvc3RpbmcnXSk7XG5cdFx0dm0uZXZlbnRzLmhvc3RpbmdbZXZlbnRJRF0gPSB7XG5cdFx0XHRpZDogZXZlbnRJRCxcblx0XHRcdGV2ZW50VGltZXM6IHtcblx0XHRcdFx0c3RhcnQ6IGRhdGVUaW1lVG9Vbml4VGltZShkYXRlKSxcblx0XHRcdFx0ZW5kOiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZSlcblx0XHRcdH0sXG5cdFx0XHRob3N0OiB7IFxuXHRcdFx0XHRpZDogJHJvdXRlUGFyYW1zLnVpZCxcblx0XHRcdFx0bmFtZTogdm0uY3VycmVudFVzZXJOYW1lXG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdC8vZGVsZXRlIHRoZSAndXBkYXRlZCcgZmllbGRcblx0XHRpZih2bS5ldmVudHMuaG9zdGluZy51cGRhdGVkID09ICcnIHx8IHZtLmV2ZW50cy5ob3N0aW5nLnVwZGF0ZWQpIHtcblx0XHRcdCRsb2cuaW5mbygnZGVsZXRpbmcgdGhlIHVwZGF0ZWQgZmllbGQnKTtcblx0XHRcdGRlbGV0ZSB2bS5ldmVudHMuaG9zdGluZy51cGRhdGVkO1xuXHRcdH1cblx0XHQvL3NhdmUgdGhlIG5ldyBldmVudFxuXHRcdC8qXG5cdFx0dm0uZXZlbnRzLiRzYXZlKCkudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdCRsb2cuaW5mbygnUHJvZmlsZSBzYXZlZCEnKTtcblx0XHRcdCRsb2cuaW5mbyh2bS5ldmVudHMuaG9zdGluZ1tldmVudElEXSk7XG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdCRsb2cuaW5mbygnRXJyb3IhJyk7XG5cdFx0fSk7Ki9cblxuXHRcdC8vcmVkaXJlY3QgdG8gdGhlIG5ldyBFdmVudCBQYWdlXG5cdFx0ZXZlbnRSZWRpcmVjdCgnL2V2ZW50JywgZXZlbnRJRCwgJHJvdXRlUGFyYW1zLnVpZCk7XG5cdH1cblxuXHQvL2V4ZWN1dGUgc2NyaXB0c1xuXHQkbG9nLmluZm8oJ2ludG8gdGhlIHVzZXIgRXZlbnRzIGNvbnRyb2xsZXInKTtcblx0JGxvZy5pbmZvKHZtLmV2ZW50cyk7XG5cbn1cblxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignVXNlckluZm9ybWF0aW9uQ29udHJvbGxlcicsIFVzZXJJbmZvcm1hdGlvbkNvbnRyb2xsZXIpO1xuXG5Vc2VySW5mb3JtYXRpb25Db250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJGRvY3VtZW50JywgJ3VzZXJEYXRhJywgJ3RyYWZmaWNWYWxldCddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIFVzZXJJbmZvcm1hdGlvbkNvbnRyb2xsZXIoJGxvZywgJGRvY3VtZW50LCB1c2VyRGF0YSwgdHJhZmZpY1ZhbGV0KSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdFxuXHQvL2xvY2FsIHZhcmlhYmxlc1xuXHR2YXIgY3VycmVudFVzZXIgPSB1c2VyRGF0YTtcblxuXHQvL3ZpZXcgbW9kZWwgdmFyaWFibGVzXG5cdHZtLnVzZXIgPSB7fTtcblx0dm0udGVtcEJpcnRoZGF5O1xuXHR2bS52aWV3ID0ge1xuXHRcdGRhdGFUb1NhdmU6IGZhbHNlLFxuXHRcdGlzRGF0YTogZmFsc2UsXG5cdFx0YnRuTXNzZzogJ01vdmUgT24uLi4nLFxuXHRcdHByb2NlZWRCdG46ICdidG4gYnRuLXByaW1hcnknXG5cdH07XG5cblx0Ly9sb2NhbCBtZXRob2RzXG5cdGZ1bmN0aW9uIHVuaXhUaW1lVG9EYXRlVGltZSh1bml4VGltZSkge1xuXHRcdHJldHVybiBuZXcgRGF0ZShwYXJzZUludCh1bml4VGltZSkpO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIGRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fTtcblxuXHQvL3ZpZXcgYWNjZXNzaWJsZSBtZXRob2RzXG5cdHZtLmNoZWNrVmFsdWVzID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYoICEoYW5ndWxhci5pc1VuZGVmaW5lZCh2bS51c2VyLmNvbXBhbnkpIHx8IHZtLnVzZXIuY29tcGFueSA9PT0gJycpIHx8IFxuXHRcdFx0IShhbmd1bGFyLmlzVW5kZWZpbmVkKHZtLnVzZXIudGl0bGUpIHx8IHZtLnVzZXIudGl0bGUgPT09ICcnKSB8fCBcblx0XHRcdCEoYW5ndWxhci5pc1VuZGVmaW5lZCh2bS51c2VyLmRvYikgfHwgdm0udXNlci5kb2IgPT09ICcnKSkgXG5cdFx0e1xuXHRcdFx0dm0udmlldy5kYXRhVG9TYXZlID0gdHJ1ZTtcblx0XHRcdHZtLnZpZXcucHJvY2VlZEJ0biA9ICdidG4gYnRuLXN1Y2Nlc3MnO1xuXHRcdFx0dm0udmlldy5idG5Nc3NnID0gJ1NhdmUgJiBDb250aW51ZSc7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZtLnZpZXcuZGF0YVRvU2F2ZSA9IGZhbHNlO1xuXHRcdFx0dm0udmlldy5wcm9jZWVkQnRuID0gJ2J0biBidG4tcHJpbWFyeSc7XG5cdFx0XHR2bS52aWV3LmJ0bk1zc2cgPSAnTW92ZSBPbi4uLic7XHRcblx0XHR9XG5cblx0fVxuXG5cdHZtLnVwZGF0ZURPQiA9IGZ1bmN0aW9uKCkge1xuXHRcdHZtLnVzZXIuZG9iID0gZGF0ZVRpbWVUb1VuaXhUaW1lKHZtLnRlbXBCaXJ0aGRheSk7XG5cdH1cblxuXHR2bS5zYXZlQW5kTW92ZU9uID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgdXNlckluZm9TaGVycGEgPSB0cmFmZmljVmFsZXQ7XG5cblx0XHQvL2NvbnZlcnQgRE9CIHRvIGJlIHNhdmVcblx0XHR2bS51cGRhdGVET0IoKTtcblx0XHRcblx0XHQvL2lmIHRoZXJlIGlzIG5ldyBkYXRhLCBzYXZlIGl0XG5cdFx0aWYodm0udmlldy5pc0RhdGEpIHtcblx0XHRcdGN1cnJlbnRVc2VyLnVwZGF0ZUJpbyh2bS51c2VyKTtcblx0XHR9XG5cdFx0XG5cdFx0Ly9tb3ZlIG9uXG5cdFx0dXNlckluZm9TaGVycGEucmVkaXJlY3RUbygnL3VzZXJFdmVudHMnLCB2bS51c2VyLnVpZClcblx0fVxuXG5cdGZ1bmN0aW9uIGluaXRpYWxpemUoKSB7XG5cdFx0JGxvZy5pbmZvKCdpbml0aWFsaXppbmcgdGhlIHVzZXIgaW5mb3JtYXRpb24gcGFnZScpO1xuXHRcdC8vbG9hZCBGYXN0Q2xpY2tcblx0XHQvL0Zhc3RDbGljay5hdHRhY2goJGRvY3VtZW50LmJvZHkpO1xuXG5cdFx0Ly9sb2FkIHVzZXJEYXRhXG5cdFx0Y3VycmVudFVzZXIubG9hZEJpbygpXG5cdFx0LnRoZW4oZnVuY3Rpb24odXNlckRhdGEpIHtcblx0XHRcdC8vYXNzaWduIHVzZXIgdmFsdWVzXG5cdFx0XHR2bS51c2VyID0gdXNlckRhdGE7XG5cblx0XHRcdC8vYnVpbGQgdGVtcEJpcnRoZGF5XG5cdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh1c2VyRGF0YS5kb2IpICYmIHVzZXJEYXRhLmRvYiAhPT0gJycpIHtcblx0XHRcdFx0dm0udGVtcEJpcnRoZGF5ID0gdW5peFRpbWVUb0RhdGVUaW1lKHVzZXJEYXRhLmRvYilcblx0XHRcdH1cblxuXHRcdH0pO1xuXHRcdFxuXHRcblx0fVxuXG5cdC8vZXZlbnQgTGlzdGVuZXJzXG5cdC8qaWYgKCdhZGRFdmVudExpc3RlbmVyJyBpbiAkZG9jdW1lbnQpIHtcblx0ICAgICRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XG5cdCAgICBcdC8vb24gcGFnZSBsb2FkXG5cdCAgICBcdGluaXRpYWxpemUoKTtcblx0ICAgICAgICBcblx0ICAgIH0sIGZhbHNlKTtcblx0fSovXG5cdC8vcnVuIHByb2Nlc3Nlc1xuXHRpbml0aWFsaXplKCk7IC8vd2l0aCBpbnRlcm5ldCB1c2UgdGhlIGV2ZW50IGxpc3RlbmVyIGluc3RlYWRcbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmZhY3RvcnkoJ2F1dGhTZXJ2aWNlJywgYXV0aFNlcnZpY2UpO1xuXG5hdXRoU2VydmljZS4kaW5qZWN0ID0gWyckbG9nJywgJyRxJywgJyRsb2NhdGlvbiddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGF1dGhTZXJ2aWNlKCRsb2csICRxLCAkbG9jYXRpb24pIHtcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHR2YXIgYWxsQXV0aFNlcnZpY2VzID0ge1xuXHRcdGlzTG9nZ2VkSW46IGlzTG9nZ2VkSW5cblx0fTtcblxuXHRmdW5jdGlvbiBhdXRoRGF0YUNhbGxiYWNrKGF1dGhEYXRhKSB7XG5cdCAgXG5cdCAgaWYgKGF1dGhEYXRhKSB7XG5cdCAgICAkbG9nLmluZm8oXCJVc2VyIFwiICsgYXV0aERhdGEudWlkICsgXCIgaXMgbG9nZ2VkIGluIHdpdGggXCIgKyBhdXRoRGF0YS5wcm92aWRlcik7XG5cdCAgfSBlbHNlIHtcblx0ICAgICRsb2cuaW5mbyhcIlVzZXIgaXMgbG9nZ2VkIG91dC4uLmR1bXBpbmcgdGhlbSBiYWNrIHRvIGxhbmRpbmcgcGFnZVwiKTtcblx0ICAgIC8vZHVtcCB0aGUgdXNlciBiYWNrIG91dFxuXHQgICAgJGxvY2F0aW9uLnBhdGgoJy8nKTtcblx0ICB9XG5cdH1cblxuXHRmdW5jdGlvbiBpc0xvZ2dlZEluKCkge1xuXHRcdC8vY2hlY2sgdGhlIHVzZXIgYXV0aGVudGljYWlvbiBzdGF0ZVxuXHRcdCRsb2cuaW5mbygnbG9nZ2luZyBmcm9tIHRoZSBpc0xvZ2dlZEluIE1ldGhvZCcpO1xuXHRcdC8vcmVmLm9uQXV0aChhdXRoRGF0YUNhbGxiYWNrKTtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXHRcblx0cmV0dXJuIGFsbEF1dGhTZXJ2aWNlcztcblxufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuZmFjdG9yeSgnYmFja2VuZFNlcnZpY2VzJywgYmFja2VuZFNlcnZpY2VzKTtcblxuYmFja2VuZFNlcnZpY2VzLiRpbmplY3QgPSBbJyRsb2cnLCAnJHEnLCAnJHdpbmRvdyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGJhY2tlbmRTZXJ2aWNlcygkbG9nLCAkcSwgJHdpbmRvdykge1xuXHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdHZhciBmYlVSTCA9ICdodHRwczovL21lZXR1cHBsYW5uZXIuZmlyZWJhc2Vpby5jb20vJztcblx0dmFyIGFsbEJhY2tlbmRTZXJ2aWNlcyA9IHtcblx0XHR1dGY4X3RvX2I2NDogdXRmOF90b19iNjQsXG5cdFx0YjY0X3RvX3V0Zjg6IGI2NF90b191dGY4LFxuXHRcdHVuaXhUaW1lVG9EYXRlVGltZTogdW5peFRpbWVUb0RhdGVUaW1lLFxuXHRcdGRhdGVUaW1lVG9Vbml4VGltZTogZGF0ZVRpbWVUb1VuaXhUaW1lLFx0XHRcblx0XHRjcmVhdGVOZXdVc2VyOiBjcmVhdGVOZXdVc2VyLFxuXHRcdExvZ2luUmVnaXN0ZXJlZFVzZXI6IExvZ2luUmVnaXN0ZXJlZFVzZXIsXG5cdFx0YWRkTmV3VXNlclRvRGF0YWJhc2U6IGFkZE5ld1VzZXJUb0RhdGFiYXNlLFxuXHRcdGFkZE5ld1VzZXJUb1JlZ1VzZXJzTGlzdDogYWRkTmV3VXNlclRvUmVnVXNlcnNMaXN0LFxuXHRcdHVwbG9hZFVzZXJEYXRhOiB1cGxvYWRVc2VyRGF0YSxcblx0XHRkb3dubG9hZFVzZXJEYXRhOiBkb3dubG9hZFVzZXJEYXRhLFxuXHRcdGdldFVzZXJCaW86IGdldFVzZXJCaW9cblx0fTtcblxuXHRmdW5jdGlvbiB1dGY4X3RvX2I2NChzdHIpIHtcblx0XHRyZXR1cm4gYnRvYShzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gYjY0X3RvX3V0Zjgoc3RyKSB7XG4gICAgXHRyZXR1cm4gYXRvYihzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKSB7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KHVuaXhUaW1lKSk7XG5cdH1cblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH1cblxuXHRmdW5jdGlvbiBjcmVhdGVOZXdVc2VyKGVtYWlsLCBwYXNzd29yZCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZmlyZUJhc2VBY2NvdW50cyA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0XG5cdFx0Ly9yZXR1cm4gYSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XG5cdFx0XHQvKmZpcmVCYXNlQWNjb3VudHMuY3JlYXRlVXNlcih7XG5cdFx0XHRcdFxuXHRcdFx0XHRlbWFpbDogZW1haWwsXG5cdFx0XHRcdHBhc3N3b3JkOiBwYXNzd29yZFxuXHRcdFx0XG5cdFx0XHR9LGZ1bmN0aW9uKGVycm9yLCB1c2VyRGF0YSkge1xuXHRcdFx0XHRcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdCgnRXJyb3IgY3JlYXRpbmcgdXNlcjogJyArIGVycm9yKTtcblxuXHRcdFx0XHRlbHNlIHJlc29sdmUodXNlckRhdGEpO1xuXHRcdFx0fSovXG5cdFx0XHQkd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJlc29sdmUoe3VpZDoxMjM0NTY3IH0pO1xuXHRcdFx0fSwgMjAwMCk7XG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBhZGROZXdVc2VyVG9EYXRhYmFzZSh1aWQsIG5hbWUsIGVtYWlsKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciBhcHBVc2VycyA9IGFwcC5jaGlsZCgnVXNlcnMvJyArIHVpZCk7XG5cdFx0dmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcblxuXHRcdC8vcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFxuXHRcdFx0LyphcHBVc2Vycy5zZXQoeyBcblx0XHRcdFx0J2Jpbyc6IHtcblx0XHRcdFx0XHQnbmFtZSc6IG5hbWUsXG5cdFx0XHRcdFx0J2VtYWlsJzogZW1haWxcblx0XHRcdFx0fSxcblx0XHRcdFx0J2V2ZW50cyc6IHtcblx0XHRcdFx0XHQncGVuZGluZyc6IHtcblx0XHRcdFx0XHRcdCd1cGRhdGVkJzogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0J2hvc3RpbmcnOiB7XG5cdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdCdhdHRlbmRpbmcnOiB7XG5cdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdCdjb21wbGV0ZWQnOiB7XG5cdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoJ0RhdGEgY291bGQgbm90IGJlIHNhdmVkOiAnICsgZXJyb3IpO1xuXHRcdFx0XHRcblx0XHRcdFx0ZWxzZSByZXNvbHZlKCdEYXRhIHNhdmVkIHN1Y2Nlc3NmdWxseS4nKTtcblxuXHRcdFx0fSk7Ki9cblxuXHRcdFx0JHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXNvbHZlKCdEYXRhIHNhdmVkIHN1Y2Nlc3NmdWxseS4nKTtcblx0XHRcdH0sIDIwMDApO1xuXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGFkZE5ld1VzZXJUb1JlZ1VzZXJzTGlzdCh1aWQsIGVtYWlsKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciBSZWdpc3RlcmVkVXNlcnNMaXN0ID0gYXBwLmNoaWxkKCdVaWRzJykuY2hpbGQodXRmOF90b19iNjQoZW1haWwpKTtcblxuXHRcdC8vcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFxuXHRcdFx0LypSZWdpc3RlcmVkVXNlcnNMaXN0LnNldCh1aWQsIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoXCJEYXRhIGNvdWxkIG5vdCBiZSBzYXZlZC4gXCIgKyBlcnJvcik7XG5cdFx0XHRcdGVsc2UgcmVzb2x2ZShcInVpZCBjcmVhdGVkIHN1Y2Vzc2Z1bGx5LlwiKTtcblx0XHRcdH0pOyovXG5cblx0XHRcdCR3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0cmVzb2x2ZShcInVpZCBjcmVhdGVkIHN1Y2Vzc2Z1bGx5LlwiKTtcblx0XHRcdH0sIDIwMDApO1xuXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIExvZ2luUmVnaXN0ZXJlZFVzZXIoZW1haWwsIHBhc3N3b3JkKSB7fVxuXG5cdGZ1bmN0aW9uIHVwbG9hZFVzZXJEYXRhKGFsbFVzZXJEYXRhKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciBjdXJyZW50VXNlciA9IGFwcC5jaGlsZCgnVXNlcnMvJyArIGFsbFVzZXJEYXRhLnVpZCk7XG5cblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vdGhlIGFjdHVhbCBjYWxsXG5cdFx0XHQvKmN1cnJlbnRVc2VyLnVwZGF0ZShhbGxVc2VyRGF0YSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdCgnVGhlcmUgd2FzIGEgcHJvYmxlbSB1cGRhdGluZyB0aGF0IHJlY29yZDogJyArIGVycm9yKTtcblx0XHRcdFx0ZWxzZSByZXNvbHZlKCdhbGwgdXNlciBkYXRhIHVwbG9hZGVkIHN1Y2Nlc3NmdWxseScpO1xuXHRcdFx0fSk7Ki9cblx0XHRcdCR3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0cmVzb2x2ZSgnYWxsIHVzZXIgZGF0YSB1cGxvYWRlZCBzdWNjZXNzZnVsbHknKTtcblx0XHRcdH0sIDIwMDApO1xuXG5cdFx0fSk7XG5cdFx0XG5cdH1cblxuXHRmdW5jdGlvbiBkb3dubG9hZFVzZXJEYXRhKCkge1xuXG5cdH1cblxuXHRmdW5jdGlvbiBnZXRVc2VyQmlvKCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHQvL3ZhciB1c2VyQmlvID0gYXBwLmNoaWxkKCdVc2VycycpLmNoaWxkKGFsbFVzZXJEYXRhLnVpZCkuY2hpbGQoYmlvKTtcblxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly90aGUgYWN0dWFsIGNhbGxcblx0XHRcdC8qY2FsbCBnb2VzIGhlcmUqL1xuXHRcdFx0JHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXNvbHZlKHtcblx0XHRcdFx0XHR1aWQ6ICdzb2FpdTAtOTI4M20tbXNvU0EtMm0zLXNyZXcnLFxuXHRcdFx0XHRcdG5hbWU6ICdJYW4gTWNBbGxpc3RlcicsXG5cdFx0XHRcdFx0ZW1haWw6ICdpZW1jYWxsaXN0ZXJAZ21haWwuY29tJyxcblx0XHRcdFx0XHRjb21wYW55OiAnJyxcblx0XHRcdFx0XHR0aXRsZTogJydcblx0XHRcdFx0fSk7XG5cdFx0XHR9LCAyMDAwKTtcblxuXHRcdH0pO1xuXHR9XG5cdC8vcmV0dXJuIHRoZSBvYmplY3Rcblx0cmV0dXJuIGFsbEJhY2tlbmRTZXJ2aWNlcztcbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmZhY3RvcnkoJ3RyYWZmaWNWYWxldCcsIHRyYWZmaWNWYWxldCk7XG5cbnRyYWZmaWNWYWxldC4kaW5qZWN0ID0gWyckbG9nJywgJyRsb2NhdGlvbiddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHRyYWZmaWNWYWxldCgkbG9nLCAkbG9jYXRpb24pIHtcblx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHR2YXIgYWxsVHJhZmZpY0NvbnRyb2xzID0ge1xuXHRcdHJlZGlyZWN0VG86IHJlZGlyZWN0VG9cblx0fTtcblxuXHRmdW5jdGlvbiByZWRpcmVjdFRvKHBhdGgsIHBhcmFtMSwgcGFyYW0yKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQocGFyYW0xKSkge1xuXHRcdFx0cGF0aCA9IHBhdGggKyAnLycgKyBwYXJhbTE7XG5cblx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHBhcmFtMikpIHtcblx0XHRcdFx0Ly9nbyB0byBwYXRoIHdpdGggMiBwYXJhbXNcblx0XHRcdFx0cGF0aCA9IHBhdGggKyAnLycgKyBwYXJhbTI7XG5cdFx0XHRcdCRsb2cuaW5mbygncmVkaXJlY3Rpbmcgbm93IHRvICcgKyBwYXRoKTtcblx0XHRcdFx0JGxvY2F0aW9uLnBhdGgocGF0aCk7XG5cdFx0XHR9XG5cdFx0XHQvL2dvIHdpdGggMSBwYXJhbVxuXHRcdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyBub3cgdG8gJyArIHBhdGgpO1xuXHRcdFx0JGxvY2F0aW9uLnBhdGgocGF0aCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vanVzdCBnbyB0byBwYXRoXG5cdFx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIG5vdyB0byAnICsgcGF0aCk7XG5cdFx0XHQkbG9jYXRpb24ucGF0aChwYXRoKTtcblx0XHR9XG5cblx0fVxuXG5cdHJldHVybiBhbGxUcmFmZmljQ29udHJvbHM7XG59XG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5mYWN0b3J5KCd1c2VyRGF0YScsIHVzZXJEYXRhKTtcblxudXNlckRhdGEuJGluamVjdCA9IFsnJGxvZycsICckcScsICdiYWNrZW5kU2VydmljZXMnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiB1c2VyRGF0YSgkbG9nLCAkcSwgYmFja2VuZFNlcnZpY2VzKSB7XG5cdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0dmFyIGN1cnJlbnRVc2VyID0ge1xuXHRcdHVpZDogJycsXG5cdFx0bmFtZTogJycsXG5cdFx0ZW1haWw6ICcnLFxuXHRcdGNvbXBhbnk6ICcnLFxuXHRcdHRpdGxlOiAnJyxcblx0XHRkb2I6IDAsXG5cdFx0aG9zdGluZzoge30sXG5cdFx0cGVuZGluZzoge30sXG5cdFx0YXR0ZW5kaW5nOiB7fSxcblx0XHRjb21wbGV0ZWQ6IHt9XG5cdH07XG5cblx0dmFyIGFsbFVzZXJEYXRhID0ge1xuXHRcdGdldFVJRDogZ2V0VUlELFxuXHRcdGdldE5hbWU6IGdldE5hbWUsXG5cdFx0Z2V0RW1haWw6IGdldEVtYWlsLFxuXHRcdGdldENvbXBhbnk6IGdldENvbXBhbnksXG5cdFx0Z2V0VGl0bGU6IGdldFRpdGxlLFxuXHRcdGdldERPQjogZ2V0RE9CLFxuXHRcdGdldFVzZXJFdmVudHM6IGdldFVzZXJFdmVudHMsXG5cdFx0XG5cdFx0c2V0VUlEOiBzZXRVSUQsXG5cdFx0c2V0TmFtZTogc2V0TmFtZSxcblx0XHRzZXRFbWFpbDogc2V0RW1haWwsXG5cdFx0c2V0Q29tcGFueTogc2V0Q29tcGFueSxcblx0XHRzZXRUaXRsZTogc2V0VGl0bGUsXG5cdFx0c2V0RE9COiBzZXRET0IsXG5cdFx0dXBkYXRlVXNlckV2ZW50czogdXBkYXRlVXNlckV2ZW50cyxcblx0XHR1cGRhdGVCaW86IHVwZGF0ZUJpbyxcblxuXHRcdHJlbW92ZVVzZXJFdmVudHM6IHJlbW92ZVVzZXJFdmVudHMsXG5cblx0XHRsb2FkUHJpbWFyaWVzOiBsb2FkUHJpbWFyaWVzLFxuXHRcdHdyaXRlQWxsVG9EYXRhYmFzZTogd3JpdGVBbGxUb0RhdGFiYXNlLFxuXHRcdHJlYWRBbGxGcm9tRGF0YWJhc2U6IHJlYWRBbGxGcm9tRGF0YWJhc2UsXG5cdFx0aXNBQmlvOiBpc0FCaW8sXG5cdFx0bG9hZEJpbzogbG9hZEJpb1xuXHR9XG5cblx0Ly9yZWFkIG1ldGhvZHNcblx0ZnVuY3Rpb24gZ2V0VUlEKCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci51aWQ7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXROYW1lKCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5uYW1lO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0RW1haWwoKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmVtYWlsO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0Q29tcGFueSgpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuY29tcGFueTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldFRpdGxlKCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci50aXRsZTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0RE9CKCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5kb2I7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRVc2VyRXZlbnRzKHR5cGUpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXJbdHlwZV07XG5cdH1cblxuXHQvL3VwZGF0ZSBtZXRob2RzXG5cdGZ1bmN0aW9uIHNldFVJRChuYW1lKSB7XG5cdFx0Y3VycmVudFVzZXIudWlkID0gdWlkO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0TmFtZShuYW1lKSB7XG5cdFx0Y3VycmVudFVzZXIubmFtZSA9IG5hbWU7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXRFbWFpbChlbWFpbCkge1xuXHRcdGN1cnJlbnRVc2VyLmVtYWlsID0gZW1haWw7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXRDb21wYW55KGNvbXBhbnkpIHtcblx0XHRjdXJyZW50VXNlci5jb21wYW55ID0gY29tcGFueTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2V0VGl0bGUodGl0bGUpIHtcblx0XHRjdXJyZW50VXNlci50aXRsZSA9IHRpdGxlO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0RE9CKGRvYikge1xuXHRcdGN1cnJlbnRVc2VyLmRvYiA9IGRvYjtcblx0fVxuXG5cdGZ1bmN0aW9uIHVwZGF0ZVVzZXJFdmVudHModHlwZSwgZXZlbnQpIHtcblx0XHRjdXJyZW50VXNlclt0eXBlXVtldmVudC5pZF0gPSBldmVudDtcblx0fVxuXG5cdGZ1bmN0aW9uIHVwZGF0ZUJpbyh1c2VyQmlvKSB7XG5cdFx0Ly91cGRhdGUgbG9jYWwgdmFsdWVzXG5cdFx0c2V0TmFtZSh1c2VyQmlvLm5hbWUpO1xuXHRcdHNldEVtYWlsKHVzZXJCaW8uZW1haWwpO1xuXHRcdHNldENvbXBhbnkodXNlckJpby5jb21wYW55KTtcblx0XHRzZXRUaXRsZSh1c2VyQmlvLnRpdGxlKTtcblx0XHRzZXRET0IodXNlckJpby5kb2IpO1xuXHRcdC8vc2F2ZSB0byBkYlxuXHRcdHdyaXRlQWxsVG9EYXRhYmFzZSgpO1xuXHR9XG5cblx0Ly9kZWxldGUgTWV0aG9kc1xuXHRmdW5jdGlvbiByZW1vdmVVc2VyRXZlbnRzKHR5cGUsIGV2ZW50KSB7XG5cdFx0Ly9kb2VzIHRoaXMgd29yaz9cblx0XHRjdXJyZW50VXNlclt0eXBlXVtldmVudC5pZF0ucmVtb3ZlKCk7XG5cdH1cblxuXHQvL290aGVyIE1ldGhvZHNcblx0ZnVuY3Rpb24gbG9hZFByaW1hcmllcyhuYW1lLCBlbWFpbCkge1xuXHRcdHNldE5hbWUobmFtZSk7XG5cdFx0c2V0RW1haWwoZW1haWwpO1xuXHR9XG5cblx0ZnVuY3Rpb24gd3JpdGVBbGxUb0RhdGFiYXNlKCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0ZGIudXBsb2FkVXNlckRhdGEoY3VycmVudFVzZXIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gcmVhZEFsbEZyb21EYXRhYmFzZSgpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdGRiLmRvd25sb2FkVXNlckRhdGEoKVxuXHRcdC50aGVuKGZ1bmN0aW9uKHVzZXJEYXRhKSB7XG5cdFx0XHRjdXJyZW50VXNlciA9IHVzZXJEYXRhO1xuXHRcdH0pXG5cdH1cblxuXHRmdW5jdGlvbiBpc0FCaW8oKSB7XG5cdFx0aWYoIGN1cnJlbnRVc2VyLnVpZCAhPT0gJycgJiZcblx0XHRcdGN1cnJlbnRVc2VyLm5hbWUgIT09ICcnICYmXG5cdFx0XHRjdXJyZW50VXNlci5lbWFpbCAhPT0gJydcblx0XHRcdClcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdGVsc2UgcmV0dXJuIGZhbHNlO1xuXHR9XG5cdGZ1bmN0aW9uIGxvYWRCaW8oKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0XHQvL21pZ2h0IG5lZWQgdG8gZ28gb3V0IHRvIHRoZSBkYiBzbyByZXR1cm4gYSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly9jaGVjayBmb3IgYmlvXG5cdFx0XHRpZihpc0FCaW8oKSkge1xuXHRcdFx0XHRyZXNvbHZlKCB7XG5cdFx0XHRcdFx0bmFtZTogY3VycmVudFVzZXIubmFtZSxcblx0XHRcdFx0XHRlbWFpbDogY3VycmVudFVzZXIuZW1haWwsXG5cdFx0XHRcdFx0Y29tcGFueTogY3VycmVudFVzZXIuY29tcGFueSxcblx0XHRcdFx0XHR0aXRsZTogY3VycmVudFVzZXIudGl0bGUsXG5cdFx0XHRcdFx0ZG9iOiBjdXJyZW50VXNlci5kb2Jcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2dvIG91dCB0byB0aGUgZGIgYmVmb3JlIHJlc29sdmluZ1xuXHRcdFx0XHRkYi5nZXRVc2VyQmlvKClcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24odXNlckJpbykge1xuXHRcdFx0XHRcdHJlc29sdmUodXNlckJpbyk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXG5cdFx0fSk7XG5cblx0fVxuXHRcblx0cmV0dXJuIGFsbFVzZXJEYXRhO1xufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuZmFjdG9yeSgndmFsaWRhdGlvbicsIHZhbGlkYXRpb24pO1xuXG52YWxpZGF0aW9uLiRpbmplY3QgPSBbJyRsb2cnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiB2YWxpZGF0aW9uKCRsb2cpIHtcblx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHR2YXIgbWluaW11bU5hbWVMZW5ndGggPSAzO1xuXHR2YXIgbWluaW11bVBhc3NMZW5ndGggPSAxNjtcblx0dmFyIG1heGltdW1QYXNzTGVuZ3RoID0gMTAwO1xuXG5cdHZhciBhbGxWYWxpZGF0aW9ucyA9IHtcblx0XHRyZXF1aXJlZDogcmVxdWlyZWQsXG5cdFx0bWluTmFtZUxlbmd0aDogbWluTmFtZUxlbmd0aCxcblx0XHRtaW5QYXNzTGVuZ3RoOiBtaW5QYXNzTGVuZ3RoLFxuXHRcdG1heFBhc3NMZW5ndGg6IG1heFBhc3NMZW5ndGgsXG5cdFx0YXRMZWFzdE9uZVN5bWJvbDogYXRMZWFzdE9uZVN5bWJvbCxcblx0XHRhdExlYXN0T25lTnVtYmVyOiBhdExlYXN0T25lTnVtYmVyLFxuXHRcdGF0TGVhc3RPbmVMb3dlcmNhc2U6IGF0TGVhc3RPbmVMb3dlcmNhc2UsXG5cdFx0YXRMZWFzdE9uZVVwcGVyY2FzZTogYXRMZWFzdE9uZVVwcGVyY2FzZSxcblx0XHRpbGxlZ2FsQ2hhcmFjdGVyOiBpbGxlZ2FsQ2hhcmFjdGVyLFxuXHRcdGVtYWlsOiBlbWFpbCxcblx0XHRkYXRlT2ZCaXJ0aDogZGF0ZU9mQmlydGhcblx0fTtcblxuXHRmdW5jdGlvbiByZXF1aXJlZCh2YWx1ZSkge1xuXHRcdGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQodmFsdWUpKSB7XG5cdFx0XHRyZXR1cm4gJ1RoaXMgaXMgYSByZXF1aXJlZCBmaWVsZCc7XG5cdFx0fSBcblx0fVxuXG5cdGZ1bmN0aW9uIG1pbk5hbWVMZW5ndGgodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdGlmKHZhbHVlLmxlbmd0aCA8IG1pbmltdW1OYW1lTGVuZ3RoKSByZXR1cm4gKCdOYW1lIHNob3VsZCBiZSBhdCBsZWFzdCAnICsgbWluaW11bU5hbWVMZW5ndGggKyAnIGNoYXJhY3RlcnMnKTtcblx0XHR9IFxuXHR9XG5cblx0ZnVuY3Rpb24gbWluUGFzc0xlbmd0aCh2YWx1ZSkge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0aWYoISh2YWx1ZS5sZW5ndGggPCBtaW5pbXVtUGFzc0xlbmd0aCkpIHJldHVybiB0cnVlO1xuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRmdW5jdGlvbiBtYXhQYXNzTGVuZ3RoKHZhbHVlKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHRpZighKHZhbHVlLmxlbmd0aCA+IG1heGltdW1QYXNzTGVuZ3RoKSkgcmV0dXJuIHRydWU7XG5cdFx0fSBcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRmdW5jdGlvbiBhdExlYXN0T25lU3ltYm9sKHZhbHVlKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHQvLyBidWlsZCByZWdleFxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW1xcIVxcQFxcI1xcJFxcJVxcXlxcJlxcKl1cIik7XG5cblx0XHRcdC8vY2hlY2sgY29uc3RyYXRpbnRcblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2YWx1ZSkpIHtcblx0XHRcdFx0Ly9zdWNjZXNzOiBhdCBsZWFzdCBvbmUgc3BlY2lhbCBjaGFyYWN0ZXIgZm91bmRcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2ZhaWx1cmU6IGRpZG4ndCBmaW5kIGFueSBzcGNpYWwgY2hhcmFjdGVyc1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0ZnVuY3Rpb24gYXRMZWFzdE9uZU51bWJlcih2YWx1ZSkge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0Ly8gYnVpbGQgcmVnZXhcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIlswLTldXCIsIFwiXCIpO1xuXG5cdFx0XHQvL2NoZWNrIGNvbnN0cmF0aW50XG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3QodmFsdWUpKSB7XG5cdFx0XHRcdC8vc3VjY2VzczogYXQgbGVhc3Qgb25lIHNwZWNpYWwgY2hhcmFjdGVyIGZvdW5kXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9mYWlsdXJlOiBkaWRuJ3QgZmluZCBhbnkgc3BjaWFsIGNoYXJhY3RlcnNcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG4gICAgZnVuY3Rpb24gYXRMZWFzdE9uZUxvd2VyY2FzZSh2YWx1ZSkge1xuICAgIFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHQvLyBidWlsZCByZWdleFxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW2Etel1cIiwgXCJcIik7XG5cblx0XHRcdC8vY2hlY2sgY29uc3RyYXRpbnRcblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2YWx1ZSkpIHtcblx0XHRcdFx0Ly9zdWNjZXNzOiBhdCBsZWFzdCBvbmUgc3BlY2lhbCBjaGFyYWN0ZXIgZm91bmRcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2ZhaWx1cmU6IGRpZG4ndCBmaW5kIGFueSBzcGNpYWwgY2hhcmFjdGVyc1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGF0TGVhc3RPbmVVcHBlcmNhc2UodmFsdWUpIHtcbiAgICBcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0Ly8gYnVpbGQgcmVnZXhcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIltBLVpdXCIsIFwiXCIpO1xuXG5cdFx0XHQvL2NoZWNrIGNvbnN0cmF0aW50XG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3QodmFsdWUpKSB7XG5cdFx0XHRcdC8vc3VjY2VzczogYXQgbGVhc3Qgb25lIHNwZWNpYWwgY2hhcmFjdGVyIGZvdW5kXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9mYWlsdXJlOiBkaWRuJ3QgZmluZCBhbnkgc3BjaWFsIGNoYXJhY3RlcnNcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbGxlZ2FsQ2hhcmFjdGVyKHZhbHVlKSB7XG4gICAgXHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdC8vIGJ1aWxkIHJlZ2V4XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbXkEtejAtOVxcIVxcQFxcI1xcJFxcJVxcXlxcJlxcKl1cIiwgXCJcIik7XG5cblx0XHRcdC8vY2hlY2sgY29uc3RyYXRpbnRcblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2YWx1ZSkpIHtcblx0XHRcdFx0Ly9zdWNjZXNzOiBhdCBsZWFzdCBvbmUgc3BlY2lhbCBjaGFyYWN0ZXIgZm91bmRcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9mYWlsdXJlOiBkaWRuJ3QgZmluZCBhbnkgc3BjaWFsIGNoYXJhY3RlcnNcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiBlbWFpbCh2YWx1ZSkge1xuICAgIFx0Ly9kZWZpbmUgY29uc3RyYWludHNcbiAgICBcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSsoPzpcXC5bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKSpAKD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1xcLikrW2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1wiLCBcIlwiKTtcblxuICAgIFx0aWYoIWNvbnN0cmFpbnQudGVzdCh2YWx1ZSkpIHJldHVybiAnTm90IGEgdmFsaWQgZS1tYWlsIGFkZHJlc3MnXG4gICAgXHRcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkYXRlT2ZCaXJ0aCh2YWx1ZSkge31cblxuXHRyZXR1cm4gYWxsVmFsaWRhdGlvbnM7XG59XG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb25maWcoY29uZmlnKTtcbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gY29uZmlnKCRyb3V0ZVByb3ZpZGVyKSB7ICAgXG4gICAgJHJvdXRlUHJvdmlkZXJcbiAgICAud2hlbignLycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9sYW5kaW5nUGFnZS5odG0nLFxuICAgICAgICBjb250cm9sbGVyOiAnTGFuZGluZ1BhZ2VDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgfSlcbiAgICAud2hlbignL3NpZ251cCcsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9uZXdVc2VyU2lnbnVwLmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdOZXdVc2VyU2lnblVwQ29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xuICAgIH0pXG4gICAgLndoZW4oJy9sb2dpbicsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9yZWdpc3RlcmVkVXNlckxvZ2luJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1JlZ1VzZXJMb2dpbkNvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICB9KVxuICAgIC53aGVuKCcvdXNlckluZm9ybWF0aW9uLzp1aWQ/Lzp0b2tlbj8nLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvdXNlckluZm9ybWF0aW9uLmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdVc2VySW5mb3JtYXRpb25Db250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICByZXNvbHZlOiB7IC8qIEBuZ0luamVjdCAqL1xuICAgICAgICAgICAgdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZTogdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZVxuICAgICAgICB9XG4gICAgfSlcbiAgICAud2hlbignL3VzZXJFdmVudHMvOnVpZD8vOnRva2VuPycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy91c2VyRXZlbnRzLmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdVc2VyRXZlbnRzQ29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgcmVzb2x2ZTogeyAvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgICAgIHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2U6IHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2VcbiAgICAgICAgfVxuICAgIH0pXG4gICAgLndoZW4oJy9ldmVudC86ZXZlbnRJZD8vOmhvc3RJZD8vOnVpZD8vOnRva2VuPycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9hbkV2ZW50Lmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdBbkV2ZW50Q29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgcmVzb2x2ZTogeyAvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgICAgIHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2U6IHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2VcbiAgICAgICAgfVxuICAgIH0pXG4gICAgLm90aGVyd2lzZSh7XG4gICAgICAgIHJlZGlyZWN0VG86ICcvJ1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlKGF1dGhTZXJ2aWNlKSB7XG4gICAgYXV0aFNlcnZpY2UuaXNMb2dnZWRJbigpO1xufVxuLyogVG9vbEJhci5kaXJlY3RpdmUuanMgKi9cblxuLyoqXG4qIEBkZXNjIHRvb2xiYXIgZGlyZWN0aXZlIHRoYXQgaXMgdXNlZCBvbiB0aGUgbWFpbiBwYWdlIGFjcm9zcyB0aGUgZW50aXJlIGFwcC5cbiogQGV4YW1wbGUgPGRpdiB0b29sLWJhcj48L2Rpdj5cbiovXG5cbmFuZ3VsYXJcblx0Lm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuXHQuZGlyZWN0aXZlKCd0b29sQmFyJywgdG9vbEJhcik7XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gdG9vbEJhcigpIHtcbiAgICBsaW5rRnVuYy4kaW5qZWN0ID0gW1wic2NvcGVcIiwgXCJlbFwiLCBcImF0dHJcIiwgXCJjdHJsXCJdO1xuXHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdHJlc3RyaWN0OiAnQUVDTScsXG5cdFx0dGVtcGxhdGVVcmw6ICcuLi92aWV3cy9kaXJlY3RpdmVzL3Rvb2xCYXIuZGlyZWN0aXZlLmh0bScsXG5cdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRzY29wZToge30sXG5cdFx0bGluazogbGlua0Z1bmMsXG5cdFx0Y29udHJvbGxlcjogVG9vbEJhckNvbnRyb2xsZXIsXG5cdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0fVxuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHtcbiAgICB9XG5cbiAgICBUb29sQmFyQ29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJ107XG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gVG9vbEJhckNvbnRyb2xsZXIoJGxvZykge1xuXHQgICAgdmFyIHZtID0gdGhpcztcblxuXHQgICAgJGxvZy5pbmZvKCdkaXJlY3RpdmUgbG9hZGluZycpO1xuXHR9XG5cblx0cmV0dXJuICBkaXJlY3RpdmU7XG5cdFx0XG59OyIsIi8qIFRvb2xCYXIuZGlyZWN0aXZlLmpzICovXG5cbi8qKlxuKiBAZGVzYyB0b29sYmFyIGRpcmVjdGl2ZSB0aGF0IGlzIHVzZWQgb24gdGhlIG1haW4gcGFnZSBhY3Jvc3MgdGhlIGVudGlyZSBhcHAuXG4qIEBleGFtcGxlIDxkaXYgdG9vbC1iYXI+PC9kaXY+XG4qL1xuXG5hbmd1bGFyXG5cdC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcblx0LmRpcmVjdGl2ZSgndG9vbEJhcicsIHRvb2xCYXIpO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHRvb2xCYXIoKSB7XG5cdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0cmVzdHJpY3Q6ICdBRUNNJyxcblx0XHR0ZW1wbGF0ZVVybDogJy4uL3ZpZXdzL2RpcmVjdGl2ZXMvdG9vbEJhci5kaXJlY3RpdmUuaHRtJyxcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdHNjb3BlOiB7fSxcblx0XHRsaW5rOiBsaW5rRnVuYyxcblx0XHRjb250cm9sbGVyOiBUb29sQmFyQ29udHJvbGxlcixcblx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHR9XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCwgYXR0ciwgY3RybCkge1xuICAgIH1cblxuICAgIFRvb2xCYXJDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnXTtcbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBUb29sQmFyQ29udHJvbGxlcigkbG9nKSB7XG5cdCAgICB2YXIgdm0gPSB0aGlzO1xuXG5cdCAgICAkbG9nLmluZm8oJ2RpcmVjdGl2ZSBsb2FkaW5nJyk7XG5cdH1cblxuXHRyZXR1cm4gIGRpcmVjdGl2ZTtcblx0XHRcbn07IiwiYW5ndWxhclxuXHQubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcsIFtcblx0XHQnbmdSb3V0ZScsXG5cdFx0J25nVG91Y2gnLFxuXHRcdCdmaXJlYmFzZSdcblx0XSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
