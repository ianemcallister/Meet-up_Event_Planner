function AnEventController(e,n){function t(){v.tempDateTime={start:"",end:""},v.newGuest={name:"",email:{address:"",valid:!1,style:{color:""}}},v.showIfHost=!1,v.hideIfAttending=!0,v.manageSections={1:{active:!0,complete:!1,style:{color:"black","background-color":"yellow"}},2:{active:!1,complete:!1,style:{color:"white","background-color":"gray"}},3:{active:!1,complete:!1,style:{color:"white","background-color":"gray"}}},u(),d(),v.showIfHost||f()}function r(e){return btoa(e)}function o(e){return atob(e)}function a(e){return Date.parse(e)}function s(){v.newGuest={name:"",email:{address:"",valid:!1,style:{color:""}}}}function l(t){e.info("adding them to the registered users list "+t),ref.child("Users").child(t).child("events").child("pending").child(n.uid).child(n.eventId).set({id:n.eventId,eventTimes:{start:v.event.eventTimes.start,end:v.event.eventTimes.end},name:v.event.name,host:n.uid},function(n){n&&e.info("there was an error"+n)}),ref.child("Users").child(t).child("events").child("pending").once("value",function(n){var i=n.val();e.info(n.val()),i.updated?(e.info("deleting updated"),ref.child("Users").child(t).child("events").child("pending").child("updated").remove(function(n){n&&e.info("Deleting failed: "+n.code)})):e.info("nothing to do")},function(n){n&&e.info("The read failed: "+n.code)})}function c(t){e.info("adding them to the UNREGISTERED users list "+t),ref.child("UnregisteredUsers").child(t).child("pending").child(n.uid).child(n.eventId).set({id:n.eventId,host:n.uid,eventTimes:{start:v.event.eventTimes.start,end:v.event.eventTimes.end},name:v.event.name},function(n){n&&e.info("there was an error"+n)})}function u(){var t=ref.getAuth();t.uid==n.hostId?(e.info("is the host"),v.showIfHost=!0):(e.info("not the host"),v.showIfHost=!1)}function d(){v.showIfHost||(e.info("check guest attendance"),userEvents.child("guestList").on("value",function(e){var t=e.val();v.hideIfAttending=!t[n.uid].attending}))}function f(){v.manageSections[1].active=!0,v.manageSections[2].active=!0,v.manageSections[3].active=!0}var v=this;v.tempTime={start:"",end:""},v.userIsHost=!1,v.setTempTime=function(e){"start"==e&&(v.tempDateTime.start=new Date),"end"==e&&(v.tempDateTime.end=new Date)},v.unixTimeToDateTime=function(e){return new Date(parseInt(e))},v.dateTimeToUnixTime=function(e){return Date.parse(e)},v.submit=function(){e.info("submitting the form now!")},v.backToUserEvents=function(){$location.path("/userEvents/"+n.uid+"/"+n.token)},v.eventRedirect=function(t,i){var r=t+"/"+n.uid+"/"+n.token;e.info("redirecting to: "+r),$location.path(r)},v.changeSection=function(n){for(e.info("are we here"),i=1;i<=3;i++)i==n?(v.manageSections[i].active=!0,v.manageSections[i].style["background-color"]="yellow",v.manageSections[i].style.color="black"):(v.manageSections[i].active=!1,v.manageSections[i].style["background-color"]="gray",v.manageSections[i].style.color="white")},v.saveEventTime=function(e,n){v.event.eventTimes||(v.event.eventTimes={start:"",end:""},v.event.eventTimes.start=v.dateTimeToUnixTime(v.tempDateTime.start),v.event.eventTimes.end=v.dateTimeToUnixTime(v.tempDateTime.end)),v.tempDateTime.end<v.tempDateTime.start&&"start"==n&&(v.tempDateTime.end=v.tempDateTime.start),"start"==n&&(v.event.eventTimes.start=v.dateTimeToUnixTime(e)),"end"==n&&(v.event.eventTimes.end=v.dateTimeToUnixTime(e))},v.guestsAreInvited=function(){return!!v.event.guestList},v.validateGuestEmail=function(){if(v.newGuest.email.address){var e=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","");e.test(v.newGuest.email.address)?(v.newGuest.email.valid=!0,v.newGuest.email.style={color:"green"}):(v.newGuest.email.valid=!1,v.newGuest.email.style={color:""})}},v.isSectionComplete=function(){for(i=0;i<8;i++)e.info(v.requiredInputs[i])},v.saveAndAdvance=function(){v.event.$save().then(function(){e.info("event saved")})["catch"](function(n){e.info("error! "+n)}),v.isSectionComplete(),1==v.manageSections[1].complete&&1==v.manageSections[2].complete&&1==v.manageSections[3].complete?v.eventRedirect("/userEvents",n.uid):v.manageSections[1].active?v.changeSection(2):v.manageSections[2].active?v.changeSection(3):v.manageSections[3].active&&v.changeSection(1)},v.addGuestToHostsList=function(){var t=r(v.newGuest.email.address);if(v.newGuest.name&&v.newGuest.email.valid){if(v.event.guestList)for(var i=0;v.event.guestList[i];){if(v.event.guestList[i].email==o(t))return e.info("This guest is already on the list"),void s();i++}else v.event.guestList={};if(registeredUsers[t]){if(registeredUsers[t]==n.uid)return e.info("tried to register the host"),void s();l(registeredUsers[t]),v.event.guestList[registeredUsers[t]]={attending:!1,status:"pending",name:v.newGuest.name,email:v.newGuest.email.address}}else c(t),v.event.guestList[t]={attending:!1,status:"pending",name:v.newGuest.name,email:v.newGuest.email.address};v.saveEvent(),s()}else e.info("you didn't enter a name and or email")},v.guestWillAttend=function(t){var i=ref.child("Users").child(n.uid).child("events"),r=0,o=!1;if(v.event.guestList[n.uid].attending=t,v.event.guestList[n.uid].status="attending",i.child("pending").on("value",function(o){var a=o.val();e.info(a),e.info(a[n.hostId]),e.info(a[n.hostId][n.eventId]);var s=a[n.hostId][n.eventId];e.info(s);for(invitation in a)r++;e.info("total attending: "+r),t&&i.child("attending").child(n.hostId).child(n.eventId).set(s,function(n){n&&e.info(n)})}),i.child("attending").on("value",function(n){var t=n.val();e.info("this is the attending list"),e.info(t),t.updated&&(o=!0)},function(n){n&&e.info(n)}),2>r){var s=new Date;i.child("pending").update({updated:a(s)},function(n){n&&e.info(n)})}i.child("pending").child(n.hostId).remove(),o&&e.info("removing the updated placeholder"),v.event.$save()},v.updateUpdatedParam=function(){var t=ref.child("Users").child(n.uid).child("events");e.info("updating the param"),t.child("attending").on("value",function(n){e.info(n.val())}),t.child("attending").child("updated").remove()},v.addInvitationToAttending=function(t){var i=ref.child("Users").child(n.uid).child("events"),r=0;i.child("pending").on("value",function(o){var a=o.val(),s=a[n.hostId][n.eventId];e.info(a),e.info(a[n.hostId]),e.info(a[n.hostId][n.eventId]);for(invitation in a)r++;e.info("total pending invitations: "+r),e.info(t),t&&i.child("attending").child(n.hostId).child(n.eventId).set(s,function(n){n&&e.info(n)})})},t()}function GuestEventController(e){e.info("into the GuestEventController")}function HostEventController(e,n,t,i){function r(e){return new Date(parseInt(e))}function o(e){return Date.parse(e)}function a(e,n){return(o(n)-o(e))/6e4}function s(){var e=new Date;e.setHours(e.getHours()+Math.round(e.getMinutes()/60)),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),u.tempTime.start=e,u.tempTime.end=e,u.tempTime.duration=a(u.tempTime.start,u.tempTime.end)}function l(){angular.isDefined(u.tempEvent.eventTimes.start)&&(u.tempTime.start=r(u.tempEvent.eventTimes.start),u.tempTime.end=r(u.tempEvent.eventTimes.end))}function c(){f.loadAnEventProgressively(n.uid,n.eventId).then(function(e){u.tempEvent=e,l()})["catch"](function(n){e("the error is: "+n)}),u.activeSection=parseInt(n.section),s()}var u=this,d=i,f=t;u.activeSection=1,u.tempTime={start:"",end:"",duration:""},u.progressBar=39,u.tempEvent={},u.formatDuration=function(){u.tempTime.duration=a(u.tempTime.start,u.tempTime.end),e.info(u.tempTime.duration);var n=Math.floor(u.tempTime.duration/60),t=u.tempTime.duration%60,i=Math.round(t/15)/4;return e.info(n+" "+t+" "+i),n+i+" h"},u.settingTempStart=function(){u.tempTime.end=u.tempTime.start},u.settingTempEnd=function(){u.tempTime.start>u.tempTime.end&&(u.tempTime.start=u.tempTime.end),u.tempTime.duration=a(u.tempTime.start,u.tempTime.end)},u.backToUserEvents=function(){d.redirectTo("/userEvents",n.uid)},u.sectionBack=function(){targetSection=u.activeSection-1,d.redirectTo("/event/host",n.eventId,n.uid,targetSection)},u.sectionForward=function(){targetSection=u.activeSection+1,d.redirectTo("/event/host",n.eventId,n.uid,targetSection)},c()}function LandingPageController(e,n,t,r,o){function a(e){return btoa(e)}function s(e){return Date.parse(e)}function l(i,r){var o=i+"/"+d.uid+"/"+d.token;n.info("redirecting to: "+o),t.path(o),e.$apply()}var c=this,u="https://meetupplanner.firebaseio.com/",d={};c.showRequirnments=!1,c.validNewName={valid:!1,style:{color:""}},c.validNewEmail={valid:!1,style:{color:""}},c.securePassword={secure:!1,style:{color:""}},c.unlockCreateUserBtn={usable:!1,"class":"btn btn-warning"},c.message="testing",c.validUserEmail={valid:!1,style:{color:""}},c.validUserPassword={valid:!1,style:{color:""}},c.unclockUserLoginBtn={usable:!1,"class":"btn btn-warning"},c.passwordRequirnments={0:{constraint:"Is at least 16 characters long",style:{color:"red"},met:!1},1:{constraint:"Is no longer than 100 characters",style:{color:"red"},met:!1},2:{constraint:"Contains at least one required symbol (!@#$%^&*)",style:{color:"red"},met:!1},3:{constraint:"Contains at least one number",style:{color:"red"},met:!1},4:{constraint:"Contains at least one lowercase letter",style:{color:"red"},met:!1},5:{constraint:"Contains at least one uppercase letter",style:{color:"red"},met:!1},6:{constraint:"Doesn't have any illegal characters",style:{color:"red"},met:!1}},c.displayPassReqs=function(){c.newName&&c.newEmail?c.showRequirnments=!0:c.showRequirnments=!1},c.checkNewName=function(){c.newName&&(c.newName.length>0?(c.validNewName.valid=!0,c.validNewName.style={color:"green"}):(c.validNewName.valid=!1,c.validNewName.style={color:"red"})),c.openCreateUserButton()},c.checkNewEmail=function(){if(c.newEmail){var e=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","");e.test(c.newEmail)?(c.validNewEmail.valid=!0,c.validNewEmail.style={color:"green"}):(c.validNewEmail.valid=!1,c.validNewEmail.style={color:"red"})}c.openCreateUserButton()},c.checkUserEmail=function(){if(c.userEmail){var e=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","");e.test(c.userEmail)?(c.validUserEmail.valid=!0,c.validUserEmail.style={color:"green"}):(c.validUserEmail.valid=!1,c.validUserEmail.style={color:"red"})}c.openUserLoginBtn()},c.checkNewPasswords=function(){var e={0:[""," your password needs to be 16 characters or longer"],1:[""," your password needs to be less than 100 characters"],2:["[!@#$%^&*]"," no required symbols found"],3:["[0-9]"," no numbers found"],4:["[a-z]"," no lowercase letters found"],5:["[A-Z]"," no uppercase letters found"],6:["[^A-z0-9!@#$%^&*]"," illegal characters found"]};if(c.newPassword){for(c.newPassword.length>15?(c.passwordRequirnments[0].style={color:"green"},c.passwordRequirnments[0].met=!0):(c.passwordRequirnments[0].style={color:"red"},c.passwordRequirnments[0].met=!1),c.newPassword.length<=100?(c.passwordRequirnments[1].style={color:"green"},c.passwordRequirnments[1].met=!0):(c.passwordRequirnments[1].style={color:"red"},c.passwordRequirnments[1].met=!1),i=2;i<6;i++){var n=new RegExp(e[i][0],"");n.test(c.newPassword)?(c.passwordRequirnments[i].style={color:"green"},c.passwordRequirnments[i].met=!0):(c.passwordRequirnments[i].style={color:"red"},c.passwordRequirnments[i].met=!1)}var n=new RegExp(e[6][0],"");n.test(c.newPassword)?(c.passwordRequirnments[6].style={color:"green"},c.passwordRequirnments[6].met=!0):(c.passwordRequirnments[6].style={color:"red"},c.passwordRequirnments[6].met=!1),c.passwordRequirnments[0].met&&c.passwordRequirnments[1].met&&c.passwordRequirnments[2].met&&c.passwordRequirnments[3].met&&c.passwordRequirnments[4].met&&c.passwordRequirnments[5].met&&c.passwordRequirnments[6].met?c.securePassword.secure=!0:c.securePassword.secure=!1,c.securePassword.secure?c.securePassword.style={color:"green"}:c.securePassword.style={color:"red"}}c.openCreateUserButton()},c.checkUserPasswords=function(){c.userPassword&&(c.userPassword.length>15?(c.validUserPassword.style={color:"green"},c.validUserPassword.valid=!0):(c.validUserPassword.style={color:"red"},c.validUserPassword.valid=!1)),c.openUserLoginBtn()},c.openCreateUserButton=function(){c.validNewName.valid&&c.validNewEmail.valid&&c.securePassword.secure?(c.unlockCreateUserBtn["class"]="btn btn-success",c.unlockCreateUserBtn.usable=!0):(c.unlockCreateUserBtn["class"]="btn btn-warning",c.unlockCreateUserBtn.usable=!1)},c.openUserLoginBtn=function(){c.validUserEmail.valid&&c.validUserPassword.valid?(c.unclockUserLoginBtn["class"]="btn btn-success",c.unclockUserLoginBtn.usable=!0):(c.unclockUserLoginBtn["class"]="btn btn-warning",c.unclockUserLoginBtn.usable=!1)},c.update=function(){c.newName=r.find("#newName")[0].value,c.newEmail=r.find("#newEmail")[0].value,c.userEmail=r.find("#userEmail")[0].value,c.checkNewName(),c.checkNewEmail(),c.checkUserEmail()},c.createNewUser=function(){if(n.info("Creating a new user account now!"),c.unlockCreateUserBtn.usable){var e=new Firebase(u);e.createUser({email:c.newEmail,password:c.newPassword},function(t,i){if(t)n.info("Error creating user: "+t);else{n.info(i),d=i;var r=e.child("Users/"+i.uid),o=new Date;r.set({bio:{name:c.newName,email:c.newEmail},events:{pending:{updated:s(o)},hosting:{updated:s(o)},attending:{updated:s(o)},completed:{updated:s(o)}}},function(e){e?n.info("Data could not be saved: "+e):n.info("Data saved successfully.")}),e.child("Uids").child(a(c.newEmail)).set(d.uid,function(e){e?n.info("Data could not be saved. "+e):n.info("uid created sucessfully.")}),l("/userInformation",d)}})}},c.loginRegisteredUser=function(){if(c.unclockUserLoginBtn.usable){var t=new Firebase(u);t.authWithPassword({email:c.userEmail,password:c.userPassword},function(t,i){t?n.info("Error Logging In: "+t):(n.info("Logged In successfully: "+i.uid),n.info(i),d=i,l("/userInformation",d),e.$apply())})}},c.alertMe=function(){alert("this is working! an alert!")},c.onResizeFunction=function(){var e=angular.element(".inputText");o.outerWidth>o.outerHeight?(e.css("font-size","2em"),n.info("making bigger")):e.css("font-size","1.2em")},"addEventListener"in r&&r.addEventListener("DOMContentLoaded",function(){n.info("adding FastClick"),FastClick.attach(r.body)},!1),angular.element(o).bind("resize",function(){c.onResizeFunction()}),angular.element(r).ready(function(){o.outerWidth<600&&c.onResizeFunction()}),c.master={},c.update=function(e){c.master=angular.copy(e)},c.reset=function(e){e&&(e.$setPristine(),e.$setUntouched()),c.user=angular.copy(c.master)},c.reset()}function MainController(e,n,t,i){function r(){angular.element(t);t.css("hight",i.outerHeight)}var o=this,a="https://meetupplanner.firebaseio.com/",s=new Firebase(a);o.logout=function(){alert("logging you out!"),s.unauth(),n.path("/")},angular.element(t).ready(function(){r()})}function NewUserSignUpController(e,n,t,r,o,a){function s(){""!=l.errors.name||""!=l.errors.email||l.errors.password?l.errors.passesAllTests=!1:l.errors.passesAllTests=!0,angular.isDefined(l.inputs.newName)&&""!==l.inputs.newName&&angular.isDefined(l.inputs.newEmail)&&""!==l.inputs.newEmail&&angular.isDefined(l.inputs.newPassword)&&""!==l.inputs.newPassword?l.inputs.requiredFieldsDefined=!0:l.inputs.requiredFieldsDefined=!1}var l=this;l.inputs={newName:"",newEmail:"",newPassword:"",requiredFieldsDefined:!1},l.errors={name:"",email:"",password:!1,passesAllTests:!1},l.passReqs={0:{id:"",req:"Is at least 16 characters long",fulfilled:!1,style:{color:"red"}},1:{id:"",req:"Is no longer than 100 characters",fulfilled:!1,style:{color:"red"}},2:{id:"",req:"Contains at least one lowercase letter",fulfilled:!1,style:{color:"red"}},3:{id:"",req:"Contains at least one uppercase letter",fulfilled:!1,style:{color:"red"}},4:{id:"",req:"Contains at least one number",fulfilled:!1,style:{color:"red"}},5:{id:"",req:"Contains at least one required symbol (!@#$%^&*)",fulfilled:!1,style:{color:"red"}},6:{id:"",req:"Doesn't have any illegal characters",fulfilled:!0,style:{color:"red"}}},l.showReqsBox=!1;var c=t;l.checkNewName=function(){var e=[],n=c.required(l.inputs.newName),t=c.minNameLength(l.inputs.newName);angular.isDefined(n)&&e.push(n),angular.isDefined(t)&&e.push(t),e.length>0?l.errors.name=e.join(", "):l.errors.name="",s()},l.checkNewEmail=function(){var e=[],n=c.required(l.inputs.newEmail),t=c.email(l.inputs.newEmail);angular.isDefined(n)&&e.push(n),angular.isDefined(t)&&e.push(t),e.length>0?l.errors.email=e.join(", "):l.errors.email="",s()},l.checkNewPassword=function(){l.showReqsBox=!0;var e=[],n=c.required(l.inputs.newPassword),t=[c.minPassLength(l.inputs.newPassword),c.maxPassLength(l.inputs.newPassword),c.atLeastOneLowercase(l.inputs.newPassword),c.atLeastOneUppercase(l.inputs.newPassword),c.atLeastOneNumber(l.inputs.newPassword),c.atLeastOneSymbol(l.inputs.newPassword),c.illegalCharacter(l.inputs.newPassword)];angular.isDefined(n)&&e.push(n),e.length>0?l.errors.password=e.join(", "):l.errors.email="";var r=!1;for(i=0;i<7;i++)t[i]?(l.passReqs[i].fulfilled=!0,l.passReqs[i].style={color:"green"}):(l.passReqs[i].fulfilled=!1,l.passReqs[i].style={color:"red"},r=!0);l.errors.password=r,s()},l.exitPassword=function(){l.checkNewPassword(),l.showReqsBox=!1},l.createNewUser=function(){var e=o;if(l.errors.passesAllTests&&l.inputs.requiredFieldsDefined){var t=r,i=a;t.createNewUser(l.inputs.newEmail,l.inputs.newPassword).then(function(r){i.loadPrimaries(l.inputs.newEmail,l.inputs.newName,r.uid),t.addNewUserToDatabase(r.uid,l.inputs.newName,l.inputs.newEmail).then(function(i){n.info(i),t.addNewUserToRegUsersList(r.uid,l.inputs.newEmail).then(function(t){e.redirectTo("/userInformation",r.uid),n.info(t)})["catch"](function(e){n.info(e)})})["catch"](function(e){n.info(e)})})["catch"](function(e){n.info(e)})}}}function RegUserLoginController(e,n,t,i,r){function o(){angular.isDefined(a.inputs.email)&&""!==a.inputs.email&&angular.isDefined(a.inputs.password)&&""!==a.inputs.password?(a.inputs.requiredFieldsDefined=!0,a.unclockUserLoginBtn["class"]="btn btn-success",a.unclockUserLoginBtn.message="Login",a.unclockUserLoginBtn.usable=!0):(a.inputs.requiredFieldsDefined=!1,a.unclockUserLoginBtn["class"]="btn btn-warning",a.unclockUserLoginBtn.message="Need Email & Pass",a.unclockUserLoginBtn.usable=!1)}var a=this;a.inputs={email:"",password:"",requiredFieldsDefined:!1},a.errors={message:"",passesAllTests:!0},a.unclockUserLoginBtn={usable:!1,"class":"btn btn-warning",message:"Need Email & Pass"},a.update=function(){a.inputs.email=n.find("#userEmail")[0].value,a.inputs.password=n.find("#userPassword")[0].value,o()},a.loginRegisteredUser=function(){var n=i,o=t,s=r;o.LoginRegisteredUser(a.inputs.email,a.inputs.password).then(function(e){a.errors.passesAllTests=!0,s.setPrimariesLocally(a.inputs.email,a.inputs.name,e.uid)}).then(function(){e.info("uid is "+s.getUIDLocally()),o.getUserBio(s.getUIDLocally()).then(function(n){s.updateBioLocally(n),o.getUserEvents(s.getUIDLocally()).then(function(e){s.updateAllUserEventsLocally(e)})["catch"](function(n){e.info(n)})})["catch"](function(n){e.info(n)}),n.redirectTo("/userInformation",s.getUIDLocally())})["catch"](function(e){a.errors.message=e,a.errors.passesAllTests=!1})},a.clicked=function(){var e=t;e.logUserOut()}}function topMenuController(e,n,t,i,r){function o(e){e?(n.info("User "+e.uid+" is logged in with "+e.provider),s.loggedIn=!0):(n.info("User is logged out"),s.loggedIn=!1)}function a(e,i){var r=e+"/"+i.uid+"/"+i.token;n.info("redirecting to: "+r),t.path(r)}var s=this,l="https://meetupplanner.firebaseio.com/",c=new Firebase(l);s.loggedIn=!1,"addEventListener"in i&&i.addEventListener("DOMContentLoaded",function(){n.info("adding FastClick"),FastClick.attach(i.body)},!1),angular.element(r).bind("resize",function(){s.onResizeFunction(),e.$apply()}),angular.element(i).ready(function(){r.outerWidth<600&&(s.onResizeFunction(),e.$apply())}),s.logout=function(){n.info("logging out!"),s.loggedIn=!1,c.unauth(),a("/",{uid:"",token:""})},s.navBarLoginRegisteredUser=function(){n.info("launching login");var t=new Firebase(l);t.authWithPassword({email:s.navbarUserEmail,password:s.navbarUserPass},function(t,i){t?n.info("Error Logging In: "+t):(n.info("Logged In successfully: "+i.uid),n.info(i),a("/userInformation",i),e.$apply(),angular.element(".navbar-toggle").click())})},s.onResizeFunction=function(){var e=angular.element(".navbarInputs");e.css("width",r.outerWidth-26+"px")},c.onAuth(o)}function UserEventsController(e,n,t,i){function r(e){return Date.parse(e)}function o(){var e=0;for(event in c.events.hosting)e++;return e}function a(){var e=new Date,n=10*r(e)+o();return n}function s(){Object.keys(c.events).forEach(function(e){Object.keys(c.events[e]).forEach(function(n){var t=0;angular.isObject(c.events[e][n])&&t++,t>0?c.sectionAvailable[e]=!0:c.sectionAvailable[e]=!1})})}function l(){u.setUIDLocally(n.uid),u.loadBio(n.uid).then(function(e){c.userBio=e})["catch"](),c.events=u.getAllUserEventsLocally(),u.getRemoteEventsForLocal().then(function(e){c.events=u.getAllUserEventsLocally()}).then(function(){s()})}var c=this,u=t;c.showDecline=!1,c.userBio={},c.events={},c.sectionAvailable={pending:!1,attending:!1,hosting:!1,completed:!1},c.errors={},c.createNewEvent=function(){var n=a(),t=i;u.createNewEvent(n).then(function(n){e.info(n)}).then(function(){u.cleanDBEventsCategory("hosting")})["catch"](function(n){e.info(n)}),t.redirectTo("/event",n,u.getUIDLocally(),u.getUIDLocally())},l()}function UserInformationController(e,n,t,i,r){function o(e){return new Date(parseInt(e))}function a(e){return Date.parse(e)}function s(){c.loadBio(t.uid).then(function(e){l.user=e,angular.isDefined(e.dob)&&""!==e.dob&&(l.tempBirthday=o(e.dob))})}var l=this,c=i;l.user={},l.tempBirthday,l.view={dataToSave:!1,isData:!1,btnMssg:"Move On...",proceedBtn:"btn btn-primary"},l.checkValues=function(){l.view.isData=!0,!angular.isUndefined(l.user.company)&&""!==l.user.company||!angular.isUndefined(l.user.title)&&""!==l.user.title||!angular.isUndefined(l.user.dob)&&""!==l.user.dob?(l.view.dataToSave=!0,l.view.proceedBtn="btn btn-success",l.view.btnMssg="Save & Continue"):(l.view.dataToSave=!1,l.view.proceedBtn="btn btn-primary",l.view.btnMssg="Move On...")},l.updateDOB=function(){l.user.dob=a(l.tempBirthday),l.checkValues()},l.saveAndMoveOn=function(){var n=r,i=c.getUIDLocally();0!==l.tempBirthday&&l.updateDOB(),(""==i||angular.isUndefined(i))&&c.setUIDLocally(t.uid),l.view.isData&&(e.info("saving the new data"),c.updateBioLocally(l.user)),n.redirectTo("/userEvents",l.user.uid)},s()}function authService(e,n){function t(){var e=n;e.checkLoginStatus().then(function(e){return e})["catch"](function(e){return e})}var i={isLoggedIn:t};return i}function backendServices(e,n,t){function i(e){return btoa(e)}function r(e){return atob(e)}function o(e){return new Date(parseInt(e))}function a(e){return Date.parse(e)}function s(e,t){var i=new Firebase(L);return n(function(n,r){i.createUser({email:e,password:t},function(e,t){e?r("Error creating user: "+e):n(t)})})}function l(e,t,i){var r=new Firebase(L),o=r.child("Users").child(e),s=new Date;return n(function(n,r){o.set({bio:{uid:e,name:t,email:i},events:{pending:{updated:a(s)},hosting:{updated:a(s)},attending:{updated:a(s)},completed:{updated:a(s)}}},function(e){e?r("Data could not be saved: "+e):n("Data saved successfully.")})})}function c(e,t){var r=new Firebase(L),o=i(t),a=r.child("Uids").child(o);return n(function(n,t){a.set(e,function(e){e?t("Data could not be saved. "+e):n("uid created sucessfully.")})})}function u(t,i){var r=new Firebase(L);return n(function(n,o){r.authWithPassword({email:t,password:i},function(t,i){t?o("Error Logging In: "+t):(e.info("Logged In successfully: "+i.uid),n(i))})})}function d(){var n=new Firebase(L);return new Promise(function(t,i){n.onAuth(function(n){n?(e.info("User "+n.uid+" is logged in with "+n.provider),t(!0)):(e.info("User is logged out"),t(!1))})})}function f(){var n=new Firebase(L);e.info("logging user out"),n.unauth()}function v(e){var t=new Firebase(L),i=e.uid,r=t.child("Users").child(i);return n(function(n,t){r.update(e,function(e){e?t("There was a problem updating that record: "+e):n("all user data uploaded successfully")})})}function m(e){var t=new Firebase(L),i=e.uid.toString(),r=t.child("Users").child(i).child("bio");return n(function(n,t){r.update(e,function(e){e?t("There was a problem updating that record: "+e):n("all user bio data uploaded successfully")})})}function g(){}function p(e){var t=new Firebase(L),i=t.child("Users").child(e).child("bio");return n(function(e,n){i.once("value",function(n){e(n.val())},function(e){e&&n(e)})})}function h(e,t){var i=new Firebase(L),r=t.id,o=i.child("Users").child(e).child("events").child("hosting").child(r);return n(function(e,n){o.set(t,function(t){t?n("There was an error: "+t):e("New event saved to DB successfully")})})}function w(e){var t=new Firebase(L),i=t.child("Users").child(e).child("events");return n(function(e,n){i.orderByKey().once("value",function(n){var t=n.val(),i={hosting:t.hosting,attending:t.attending,pending:t.pending,completed:t.completed};e(i)},function(e){e&&n(e)})})}function U(e,t){var i=new Firebase(L),r=i.child("Users").child(e).child("events").child("hosting").child(t);return n(function(e,n){r.once("value",function(n){var t=n.val();e(t)},function(e){e&&n(e)})})}function b(e,n,t){}function E(e,t){var i=new Firebase(L),r=i.child("Users").child(t).child("events").child(e).child("updated");return n(function(e,n){r.set(null,function(t){t?n("There was an error deleting update field: "+t):e("Deleted update successfully")})})}function y(e,t){var i=new Firebase(L),r=i.child("Users").child(t).child("events").child(e);return n(function(e,n){r.once("value",function(t){var i=t.val();angular.isDefined(i.updated)?e(!0):n(!1)},function(e){e&&n(e)})})}var L="https://meetupplanner.firebaseio.com/",D={utf8_to_b64:i,b64_to_utf8:r,unixTimeToDateTime:o,dateTimeToUnixTime:a,LoginRegisteredUser:u,checkLoginStatus:d,logUserOut:f,downloadUserData:g,getUserBio:p,getUserEvents:w,getAHostedEvent:U,getAnInvitedEvent:b,createNewUser:s,addNewUserToDatabase:l,addNewUserToRegUsersList:c,uploadUserData:v,uploadUserBio:m,createHostedEvent:h,deleteUpdateField:E,thereWasAnUpdateField:y};return D}function trafficValet(e,n){function t(t,i,r,o){angular.isDefined(i)?(t=t+"/"+i,angular.isDefined(r)&&(t=t+"/"+r,angular.isDefined(o)&&(t=t+"/"+o,e.info("redirecting now to "+t),n.path(t)),e.info("redirecting now to "+t),n.path(t)),e.info("redirecting now to "+t),n.path(t)):(e.info("redirecting now to "+t),n.path(t))}function i(t,i,r,o){if(e.info("Traffic valet accessed"),e.info("eventId: "+t),e.info("hostId: "+i),e.info("userId: "+r),angular.isUndefined(o)&&(o=1),i===r){var a="/event/host/"+t+"/"+r+"/"+o;e.info(a),n.path(a)}else{var a="/event/guest/"+t+"/"+r+"/"+i;e.info(a),n.path(a)}}var r={redirectTo:t,eventRoute:i};return r}function userData(e,n,t){function i(){return""!==j.bio.uid&&""!==j.bio.name&&""!==j.bio.email}function r(n,t){return e.info("checking if the event exits"),!!angular.isDefined(j.events[n][t])}function o(e){Object.keys(j.events[e]).forEach(function(n){angular.isObject(j.events[e][n])||delete j.events[e][n]})}function a(){return j.bio.uid}function s(){return j.bio.name}function l(){return j.bio.email}function c(){return j.bio.company}function u(){return j.bio.title}function d(){return j.bio.dob}function f(){return{uid:j.bio.uid,name:j.bio.name,email:j.bio.email,company:j.bio.company,title:j.bio.title,dob:j.bio.dob}}function v(e,n){return j.events[e][eventID]}function m(e){return j.events[e]}function g(){return j.events}function p(e){j.bio.uid=e}function h(e){j.bio.name=e}function w(e){j.bio.email=e}function U(e){j.bio.company=e}function b(e){j.bio.title=e}function E(e){j.bio.dob=e}function y(e,n,t){angular.isDefined(e)&&w(e),angular.isDefined(n)&&s(n),angular.isDefined(t)&&p(t)}function L(e,n){var t=n.id;o(e),j.events[e][t]=n}function D(e){j.events=e}function T(e){h(e.name),w(e.email),U(e.company),b(e.title),E(e.dob),S()}function A(e,n){delete j.events[e][n.id]}function I(){var e=t;e.downloadUserData().then(function(e){j=e})}function C(e){var i=t;return n(function(n,t){i.getUserBio(e).then(function(e){n(e)})["catch"](function(e){t("There was an error reading the user bio: "+e)})})}function $(){var e=t;return n(function(n,t){e.getUserEvents(a()).then(function(e){Object.keys(e).forEach(function(n){Object.keys(e[n]).forEach(function(t){L(n,e[n][t])})}),n(e)})["catch"](function(e){t("There was an error reading the user events: "+e)})})}function k(i){var r=t;return n(function(n,t){r.getAHostedEvent(a(),i).then(function(t){e.info(t),n(t)})["catch"](function(e){t("There was an error reading the user event: "+e)})})}function R(){var e=t;e.uploadUserData(j)}function S(){var e=t;e.uploadUserBio(j.bio)}function B(){}function P(i){var r=t;return n(function(n,t){r.thereWasAnUpdateField(i,a()).then(function(n){r.deleteUpdateField(i,a()).then(function(n){e.info(n)})["catch"](function(n){e.info(n)})})["catch"](function(n){e.info(n)})})}function N(e){return n(function(n,t){i()?n(f()):C(e).then(function(e){n(e)})["catch"](function(e){t(e)})})}function q(e,t){return p(e),n(function(e,n){k(t).then(function(n){e(n)})["catch"](),r("hosting",t)&&e(v("hosting",t))})}function F(e){var t={};return n(function(e,n){$().then(function(n){e(n)}),t=m(type),e(t)})}function z(e){var i=t,r={};return r={id:e,name:"",type:"",host:{name:j.bio.name,uid:j.bio.uid},message:"",eventTimes:{start:0,end:0},address:{street01:"",street02:"",street03:"",city:"",state:"",zip:0},guestList:{}},L("hosting",r),n(function(e,n){i.createHostedEvent(a(),r).then(function(n){e(n)})["catch"](function(e){n(e)})})}var j={bio:{uid:"",name:"",email:"",company:"",title:"",dob:0},events:{hosting:{},pending:{},attending:{},completed:{}}},G={bioPrimariesAreCompleteLocally:i,eventExistsLocally:r,cleanEvents:o,getUIDLocally:a,getNameLocally:s,getEmailLocally:l,getCompanyLocally:c,getTitleLocally:u,getDOBLocally:d,getFullBioLocally:f,getOneUserEventLocally:v,getUserEventsLocally:m,getAllUserEventsLocally:g,setUIDLocally:p,setNameLocally:h,setEmailLocally:w,setCompanyLocally:U,setTitleLocally:b,setDOBLocally:E,setPrimariesLocally:y,updateUserEventsLocally:L,updateAllUserEventsLocally:D,updateBioLocally:T,removeUserEventsLocally:A,getFullRemoteDBforLocal:I,getRemoteBioForLocal:C,getRemoteEventsForLocal:$,getOneRemoteEventForLocal:k,setFullRemoteDBfromLocal:R,setRemoteBioFromLocal:S,setRemoteEventsFromLocal:B,cleanDBEventsCategory:P,loadBio:N,loadEventsProgressively:F,loadAnEventProgressively:q,createNewEvent:z};return G}function validation(e){function n(e){return angular.isUndefined(e)?"This is a required field":void 0}function t(e){return angular.isDefined(e)&&e.length<f?"Name should be at least "+f+" characters":void 0}function i(e){return angular.isDefined(e)&&!(e.length<v)}function r(e){return angular.isDefined(e)&&!(e.length>m)}function o(e){if(angular.isDefined(e)){var n=new RegExp("[!@#$%^&*]");return!!n.test(e)}return!1}function a(e){if(angular.isDefined(e)){var n=new RegExp("[0-9]","");return!!n.test(e)}return!1}function s(e){if(angular.isDefined(e)){var n=new RegExp("[a-z]","");return!!n.test(e)}return!1}function l(e){if(angular.isDefined(e)){var n=new RegExp("[A-Z]","");return!!n.test(e)}return!1}function c(e){if(angular.isDefined(e)){var n=new RegExp("[^A-z0-9!@#$%^&*]","");return!n.test(e)}return!1}function u(e){var n=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","");return n.test(e)?void 0:"Not a valid e-mail address"}function d(e){}var f=3,v=16,m=100,g={required:n,minNameLength:t,minPassLength:i,maxPassLength:r,atLeastOneSymbol:o,atLeastOneNumber:a,atLeastOneLowercase:s,atLeastOneUppercase:l,illegalCharacter:c,email:u,dateOfBirth:d};return g}function config(e){e.when("/",{templateUrl:"views/landingPage.htm",controller:"LandingPageController",controllerAs:"vm"
}).when("/signup",{templateUrl:"views/newUserSignup.htm",controller:"NewUserSignUpController",controllerAs:"vm"}).when("/login",{templateUrl:"views/registeredUserLogin.htm",controller:"RegUserLoginController",controllerAs:"vm"}).when("/userInformation/:uid?",{templateUrl:"views/userInformation.htm",controller:"UserInformationController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).when("/userEvents/:uid?",{templateUrl:"views/userEvents.htm",controller:"UserEventsController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).when("/event/host/:eventId/:uid/:section",{templateUrl:"views/hostEvent.htm",controller:"HostEventController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).when("/event/guest/:eventId/:uid/:hostId",{templateUrl:"views/guestEvent.htm",controller:"GuestEventController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).when("/event/:eventId?/:hostId?/:uid?/:section?",{templateUrl:"views/anEvent.htm",controller:"AnEventController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService,eventViewChanger:eventViewChanger}}).otherwise({redirectTo:"/"})}function userAuthenticationService(e){e.isLoggedIn()}function eventViewChanger(e,n){e.eventRoute(n.current.params.eventId,n.current.params.hostId,n.current.params.uid,n.current.params.section)}function addAGuest(){function e(e,n,t,i){}function n(e){function n(){}n()}e.$inject=["scope","el","attr","ctrl"];var t={restrict:"AECM",templateUrl:"../views/directives/addAGuest.directive.htm",replace:!0,scope:{guestList:"="},link:e,controller:n,controllerAs:"vm",bindToController:!0};return n.$inject=["$log"],t}function hostedEventsList(){function e(e,n,t,i){}function n(e,n){function t(e){return new Date(parseInt(e))}function i(e){var n=0;return r.guestsAreInvited=!0,Object.keys[e].forEach(function(e){n++}),n}var r=this,o=n;r.guestsAreInvited=!1,r.formatDate=function(n){return e.info("got thist time: "+n),t(n)},r.guestsAttending=function(e){return angular.isDefined(e)&&angular.isDefined(e.attending)?i(e.attending):0},r.guestsInvited=function(e){function n(){return t.attending+t.pending+t.declined}if(angular.isDefined(e)){var t={attending:0,pending:0,declined:0};return angular.isDefined(e.attending)&&(t.attending=i(e.attending)),angular.isDefined(e.pending)&&(t.pending=i(e.pending)),angular.isDefined(e.declined)&&(t.declined=i(e.declined)),n()}return 0},r.percentageAttending=function(e){return angular.isDefined(e)?guestsAttending(guestlist)/guestsInvited(e):0},r.eventClicked=function(n){e.info("redirecting to: /event/"+n+"/"+r.hostedEvents[n].host.uid+"/"+r.userId),o.redirectTo("/event",n,r.hostedEvents[n].host.uid,r.userId)}}e.$inject=["scope","el","attr","ctrl"];var t={restrict:"AECM",templateUrl:"../views/directives/hostedEventsList.directive.htm",replace:!0,scope:{hostedEvents:"=",userId:"="},link:e,controller:n,controllerAs:"vm",bindToController:!0};return n.$inject=["$log","trafficValet"],t}function progressBar(){return{restrict:"E",scope:{curVal:"@",maxVal:"@"},template:"<div class='progress-bar'><div class='progress-bar-bar'>testing</div></div>",link:function(e,n,t){function i(){var t=0;e.maxVal&&(t=Math.min(e.curVal,e.maxVal)/e.maxVal*n.find(".progress-bar").width()),n.find(".progress-bar-bar").css("width",t)}e.$watch("curVal",i),e.$watch("maxVal",i)}}}function hostedGuestList(){function e(e,n,t,i){}function n(e){function n(){return angular.isDefined(i.guestList)?(i.isAGuestList=!0,!0):(i.isAGuestList=!1,!1)}function t(){n()&&(i.guestList={})}var i=this;i.isAGuestList=!1,t()}e.$inject=["scope","el","attr","ctrl"];var t={restrict:"AECM",templateUrl:"../views/directives/hostedGuestList.directive.htm",replace:!0,scope:{guestList:"="},link:e,controller:n,controllerAs:"vm",bindToController:!0};return n.$inject=["$log"],t}function toolBar(){function e(e,n,t,i){}function n(e,n){var t=this,i=n;i.checkLoginStatus().then(function(e){t.loggedIn=e})["catch"](),t.clicked=function(){e.info("button clicked")}}e.$inject=["scope","el","attr","ctrl"];var t={restrict:"AECM",templateUrl:"../views/directives/toolBar.directive.htm",replace:!0,scope:{},link:e,controller:n,controllerAs:"vm",bindToController:!0};return n.$inject=["$log","backendServices"],t}config.$inject=["$routeProvider"],userAuthenticationService.$inject=["authService"],eventViewChanger.$inject=["trafficValet","$route"],angular.module("meetUpEventApp",["ngRoute","ngTouch","firebase"]),angular.module("meetUpEventApp").controller("AnEventController",AnEventController),AnEventController.$inject=["$log","$routeParams"],angular.module("meetUpEventApp").controller("GuestEventController",GuestEventController),GuestEventController.$inject=["$log"],angular.module("meetUpEventApp").controller("HostEventController",HostEventController),HostEventController.$inject=["$log","$routeParams","userData","trafficValet"],angular.module("meetUpEventApp").controller("LandingPageController",LandingPageController),LandingPageController.$inject=["$scope","$log","$location","$document","$window"],angular.module("meetUpEventApp").controller("MainController",MainController),MainController.$inject=["$log","$location","$document","$window"],angular.module("meetUpEventApp").controller("NewUserSignUpController",NewUserSignUpController),NewUserSignUpController.$inject=["$scope","$log","validation","backendServices","trafficValet","userData"],angular.module("meetUpEventApp").controller("RegUserLoginController",RegUserLoginController),RegUserLoginController.$inject=["$log","$document","backendServices","trafficValet","userData"],angular.module("meetUpEventApp").controller("topMenuController",topMenuController),topMenuController.$inject=["$scope","$log","$location","$document","$window"],angular.module("meetUpEventApp").controller("UserEventsController",UserEventsController),UserEventsController.$inject=["$log","$routeParams","userData","trafficValet"],angular.module("meetUpEventApp").controller("UserInformationController",UserInformationController),UserInformationController.$inject=["$log","$document","$routeParams","userData","trafficValet"],angular.module("meetUpEventApp").factory("authService",authService),authService.$inject=["$log","backendServices"],angular.module("meetUpEventApp").factory("backendServices",backendServices),backendServices.$inject=["$log","$q","$window"],angular.module("meetUpEventApp").factory("trafficValet",trafficValet),trafficValet.$inject=["$log","$location"],angular.module("meetUpEventApp").factory("userData",userData),userData.$inject=["$log","$q","backendServices"],angular.module("meetUpEventApp").factory("validation",validation),validation.$inject=["$log"],angular.module("meetUpEventApp").config(config),angular.module("meetUpEventApp").directive("addAGuest",addAGuest),angular.module("meetUpEventApp").directive("hostedEventsList",hostedEventsList),angular.module("meetUpEventApp").directive("progressBar",progressBar),angular.module("meetUpEventApp").directive("hostedGuestList",hostedGuestList),angular.module("meetUpEventApp").directive("toolBar",toolBar);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFuRXZlbnQuY29udHJvbGxlci5qcyIsIkd1ZXN0RXZlbnQuY29udHJvbGxlci5qcyIsIkhvc3RFdmVudC5jb250cm9sbGVyLmpzIiwiTGFuZGluZ1BhZ2UuY29udHJvbGxlci5qcyIsIk1haW4uY29udHJvbGxlci5qcyIsIk5ld1VzZXJTaWduVXAuY29udHJvbGxlci5qcyIsIlJlZ1VzZXJMb2dpbi5jb250cm9sbGVyLmpzIiwiVG9wTWVudS5jb250cm9sbGVyLmpzIiwiVXNlckV2ZW50cy5jb250cm9sbGVyLmpzIiwiVXNlckluZm9ybWF0aW9uLmNvbnRyb2xsZXIuanMiLCJBdXRoU2VydmljZS5mYWN0b3J5LmpzIiwiQmFja2VuZFNlcnZpY2VzLmZhY3RvcnkuanMiLCJUcmFmZmljVmFsZXQuZmFjdG9yeS5qcyIsIlVzZXJEYXRhLmZhY3RvcnkuanMiLCJWYWxpZGF0aW9uLmZhY3RvcnkuanMiLCJyb3V0ZS1jb25maWcuanMiLCJhcHAuanMiLCJBZGRBR3Vlc3QuZGlyZWN0aXZlLmpzIiwiSG9zdGVkRXZlbnRzTGlzdC5kaXJlY3RpdmUuanMiLCJIb3N0ZWRFdmVudHNQcm9ncmVzc0Jhci5kaXJlY3RpdmUuanMiLCJIb3N0ZWRHdWVzdExpc3QuZGlyZWN0aXZlLmpzIiwiVG9vbEJhci5kaXJlY3RpdmUuanMiLCJhcHAubW9kdWxlLmpzIl0sIm5hbWVzIjpbIkFuRXZlbnRDb250cm9sbGVyIiwiJGxvZyIsIiRyb3V0ZVBhcmFtcyIsImluaXQiLCJ2bSIsInRlbXBEYXRlVGltZSIsInN0YXJ0IiwiZW5kIiwibmV3R3Vlc3QiLCJuYW1lIiwiZW1haWwiLCJhZGRyZXNzIiwidmFsaWQiLCJzdHlsZSIsImNvbG9yIiwic2hvd0lmSG9zdCIsImhpZGVJZkF0dGVuZGluZyIsIm1hbmFnZVNlY3Rpb25zIiwxLCJhY3RpdmUiLCJjb21wbGV0ZSIsImJhY2tncm91bmQtY29sb3IiLDIsMywiY2hlY2tGb3JIb3N0IiwiY2hlY2tJZkd1ZXN0SXNBdHRlbmRpbmciLCJvcGVuQWxsU2VjdGlvbnMiLCJ1dGY4X3RvX2I2NCIsInN0ciIsImJ0b2EiLCJiNjRfdG9fdXRmOCIsImF0b2IiLCJkYXRlVGltZVRvVW5peFRpbWUiLCJkYXRlVGltZSIsIkRhdGUiLCJwYXJzZSIsImNsZWFuTmV3R3Vlc3RWYXJpYWJsZSIsImludml0ZUFSZWdpc3RlcmVkVXNlciIsInVpZCIsImluZm8iLCJyZWYiLCJjaGlsZCIsImV2ZW50SWQiLCJzZXQiLCJpZCIsImV2ZW50VGltZXMiLCJldmVudCIsImhvc3QiLCJlcnJvciIsIm9uY2UiLCJzbmFwc2hvdCIsImNoZWNrRm9yUGxhY2Vob2xkZXIiLCJ2YWwiLCJ1cGRhdGVkIiwicmVtb3ZlIiwiZXJyb3JPYmplY3QiLCJjb2RlIiwiaW52aXRlQW5VbnJlZ2lzdGVyZWRVc2VyIiwidXNlcktleSIsImF1dGhEYXRhIiwiZ2V0QXV0aCIsImhvc3RJZCIsInVzZXJFdmVudHMiLCJvbiIsImFsbEd1ZXN0cyIsImF0dGVuZGluZyIsInRoaXMiLCJ0ZW1wVGltZSIsInVzZXJJc0hvc3QiLCJzZXRUZW1wVGltZSIsImVuZHBvaW50IiwidW5peFRpbWVUb0RhdGVUaW1lIiwidW5peFRpbWUiLCJwYXJzZUludCIsInN1Ym1pdCIsImJhY2tUb1VzZXJFdmVudHMiLCIkbG9jYXRpb24iLCJwYXRoIiwidG9rZW4iLCJldmVudFJlZGlyZWN0IiwiZXZlbnRJRCIsImZ1bGxQYXRoIiwiY2hhbmdlU2VjdGlvbiIsInRhcmdldFNlY3Rpb24iLCJpIiwic2F2ZUV2ZW50VGltZSIsInRhcmdldCIsImd1ZXN0c0FyZUludml0ZWQiLCJndWVzdExpc3QiLCJ2YWxpZGF0ZUd1ZXN0RW1haWwiLCJjb25zdHJhaW50IiwiUmVnRXhwIiwidGVzdCIsImlzU2VjdGlvbkNvbXBsZXRlIiwicmVxdWlyZWRJbnB1dHMiLCJzYXZlQW5kQWR2YW5jZSIsIiRzYXZlIiwidGhlbiIsImFkZEd1ZXN0VG9Ib3N0c0xpc3QiLCJyZWdpc3RlcmVkVXNlcnMiLCJzdGF0dXMiLCJzYXZlRXZlbnQiLCJndWVzdFdpbGxBdHRlbmQiLCJyZXNwb25zZSIsImN1cnJlbnRVc2VyIiwidG90YWxQZW5kaW5nSW52aXRhdGlvbnMiLCJyZW1vdmVBdHRlbmRpbmdVcGRhdGVkIiwiaW52aXRhdGlvbnMiLCJ0aGlzSW52aXRhdGlvbiIsImludml0YXRpb24iLCJhdHRlbmRpbmdMaXN0IiwiY3VycmVudERhdGUiLCJ1cGRhdGUiLCJ1cGRhdGVVcGRhdGVkUGFyYW0iLCJhZGRJbnZpdGF0aW9uVG9BdHRlbmRpbmciLCJHdWVzdEV2ZW50Q29udHJvbGxlciIsIkhvc3RFdmVudENvbnRyb2xsZXIiLCJ1c2VyRGF0YSIsInRyYWZmaWNWYWxldCIsImNhbGN1bGF0ZUR1cmF0aW9uIiwiaW5pdEV2ZW50VGltZXMiLCJub3ciLCJzZXRIb3VycyIsImdldEhvdXJzIiwiTWF0aCIsInJvdW5kIiwiZ2V0TWludXRlcyIsInNldE1pbnV0ZXMiLCJzZXRTZWNvbmRzIiwic2V0TWlsbGlzZWNvbmRzIiwiZHVyYXRpb24iLCJ1cGRhdGVUZW1wVGltZUZyb21Nb2RlbCIsImFuZ3VsYXIiLCJpc0RlZmluZWQiLCJ0ZW1wRXZlbnQiLCJ0aGlzRXZlbnRNYW5hZ2VyIiwibG9hZEFuRXZlbnRQcm9ncmVzc2l2ZWx5IiwidGhlRXZlbnQiLCJhY3RpdmVTZWN0aW9uIiwic2VjdGlvbiIsImhvc3RlZEV2ZW50U2hlcnBhIiwicHJvZ3Jlc3NCYXIiLCJmb3JtYXREdXJhdGlvbiIsImhvdXJzIiwiZmxvb3IiLCJtaW4iLCJmcmFjdGlvbiIsInNldHRpbmdUZW1wU3RhcnQiLCJzZXR0aW5nVGVtcEVuZCIsInJlZGlyZWN0VG8iLCJzZWN0aW9uQmFjayIsInNlY3Rpb25Gb3J3YXJkIiwiTGFuZGluZ1BhZ2VDb250cm9sbGVyIiwiJHNjb3BlIiwiJGRvY3VtZW50IiwiJHdpbmRvdyIsInJlZGlyZWN0IiwiY3VycmVudFVzZXJEYXRhIiwiJGFwcGx5IiwiZmJVUkwiLCJzaG93UmVxdWlybm1lbnRzIiwidmFsaWROZXdOYW1lIiwidmFsaWROZXdFbWFpbCIsInNlY3VyZVBhc3N3b3JkIiwic2VjdXJlIiwidW5sb2NrQ3JlYXRlVXNlckJ0biIsInVzYWJsZSIsImNsYXNzIiwibWVzc2FnZSIsInZhbGlkVXNlckVtYWlsIiwidmFsaWRVc2VyUGFzc3dvcmQiLCJ1bmNsb2NrVXNlckxvZ2luQnRuIiwicGFzc3dvcmRSZXF1aXJubWVudHMiLDAsIm1ldCIsNCw1LDYsImRpc3BsYXlQYXNzUmVxcyIsIm5ld05hbWUiLCJuZXdFbWFpbCIsImNoZWNrTmV3TmFtZSIsImxlbmd0aCIsIm9wZW5DcmVhdGVVc2VyQnV0dG9uIiwiY2hlY2tOZXdFbWFpbCIsImNoZWNrVXNlckVtYWlsIiwidXNlckVtYWlsIiwib3BlblVzZXJMb2dpbkJ0biIsImNoZWNrTmV3UGFzc3dvcmRzIiwiY29uc3RyYWludHMiLCJuZXdQYXNzd29yZCIsImNoZWNrVXNlclBhc3N3b3JkcyIsInVzZXJQYXNzd29yZCIsImZpbmQiLCJ2YWx1ZSIsImNyZWF0ZU5ld1VzZXIiLCJGaXJlYmFzZSIsImNyZWF0ZVVzZXIiLCJwYXNzd29yZCIsInVzZXJzUmVmIiwiYmlvIiwiZXZlbnRzIiwicGVuZGluZyIsImhvc3RpbmciLCJjb21wbGV0ZWQiLCJsb2dpblJlZ2lzdGVyZWRVc2VyIiwiYXV0aFdpdGhQYXNzd29yZCIsImFsZXJ0TWUiLCJhbGVydCIsIm9uUmVzaXplRnVuY3Rpb24iLCJpbnB1dFRleHQiLCJlbGVtZW50Iiwib3V0ZXJXaWR0aCIsIm91dGVySGVpZ2h0IiwiY3NzIiwiYWRkRXZlbnRMaXN0ZW5lciIsIkZhc3RDbGljayIsImF0dGFjaCIsImJvZHkiLCJiaW5kIiwicmVhZHkiLCJtYXN0ZXIiLCJ1c2VyIiwiY29weSIsInJlc2V0IiwiZm9ybSIsIiRzZXRQcmlzdGluZSIsIiRzZXRVbnRvdWNoZWQiLCJNYWluQ29udHJvbGxlciIsInJlc2l6ZUJHSW1hZ2UiLCJsb2dvdXQiLCJ1bmF1dGgiLCJOZXdVc2VyU2lnblVwQ29udHJvbGxlciIsInZhbGlkYXRpb24iLCJiYWNrZW5kU2VydmljZXMiLCJ2ZXJpZnlSZXF1aXJubWVudHMiLCJlcnJvcnMiLCJwYXNzZXNBbGxUZXN0cyIsImlucHV0cyIsInJlcXVpcmVkRmllbGRzRGVmaW5lZCIsInBhc3NSZXFzIiwicmVxIiwiZnVsZmlsbGVkIiwic2hvd1JlcXNCb3giLCJzaWdudXBWYWxpZGF0aW9uIiwiaGFzTmFtZSIsInJlcXVpcmVkIiwibG9uZ0Vub3VnaCIsIm1pbk5hbWVMZW5ndGgiLCJwdXNoIiwiam9pbiIsImhhc0VtYWlsIiwiaXNBbkVtYWlsIiwiY2hlY2tOZXdQYXNzd29yZCIsImhhc1Bhc3N3b3JkIiwic3BlY2lmaWNSZXFzIiwibWluUGFzc0xlbmd0aCIsIm1heFBhc3NMZW5ndGgiLCJhdExlYXN0T25lTG93ZXJjYXNlIiwiYXRMZWFzdE9uZVVwcGVyY2FzZSIsImF0TGVhc3RPbmVOdW1iZXIiLCJhdExlYXN0T25lU3ltYm9sIiwiaWxsZWdhbENoYXJhY3RlciIsImFueUVycm9ycyIsImV4aXRQYXNzd29yZCIsIm5ld1VzZXJTaGVycGEiLCJuZXdVc2VyRGF0YSIsImRiVXNlckRhdGEiLCJsb2FkUHJpbWFyaWVzIiwiYWRkTmV3VXNlclRvRGF0YWJhc2UiLCJhZGROZXdVc2VyVG9SZWdVc2Vyc0xpc3QiLCJSZWdVc2VyTG9naW5Db250cm9sbGVyIiwicmVnaXN0ZXJlZFVzZXJTaGVycGEiLCJkYXRhYmFzZSIsInJlZ2lzdGVyZWRVc2VyRGF0YSIsIkxvZ2luUmVnaXN0ZXJlZFVzZXIiLCJ1c2VyQ3JlZGVudGlhbHMiLCJzZXRQcmltYXJpZXNMb2NhbGx5IiwiZ2V0VUlETG9jYWxseSIsImdldFVzZXJCaW8iLCJ1c2VyQmlvIiwidXBkYXRlQmlvTG9jYWxseSIsImdldFVzZXJFdmVudHMiLCJhbGxFdmVudHNGb3JUaGlzVXNlciIsInVwZGF0ZUFsbFVzZXJFdmVudHNMb2NhbGx5IiwiY2xpY2tlZCIsInVzZXJBdXRoZW50aWNhdGlvbiIsImxvZ1VzZXJPdXQiLCJ0b3BNZW51Q29udHJvbGxlciIsImF1dGhEYXRhQ2FsbGJhY2siLCJwcm92aWRlciIsImxvZ2dlZEluIiwibmF2QmFyTG9naW5SZWdpc3RlcmVkVXNlciIsIm5hdmJhclVzZXJFbWFpbCIsIm5hdmJhclVzZXJQYXNzIiwiY2xpY2siLCJuYXZiYXJJbnB1dHMiLCJvbkF1dGgiLCJVc2VyRXZlbnRzQ29udHJvbGxlciIsIm5vT2ZIb3N0ZUV2ZW50cyIsImNvdW50ZXIiLCJnZW5lcmF0ZUV2ZW50SUQiLCJkYXRlIiwiY2hlY2tGb3JFdmVudHMiLCJPYmplY3QiLCJrZXlzIiwiZm9yRWFjaCIsImNhdGVnb3J5IiwiaXNPYmplY3QiLCJzZWN0aW9uQXZhaWxhYmxlIiwiaW5pdGlhbGl6ZSIsInNldFVJRExvY2FsbHkiLCJsb2FkQmlvIiwicmV0cmlldmVkQmlvIiwiZ2V0QWxsVXNlckV2ZW50c0xvY2FsbHkiLCJnZXRSZW1vdGVFdmVudHNGb3JMb2NhbCIsIm9idGFpbmVkVXNlckV2ZW50cyIsInNob3dEZWNsaW5lIiwiY3JlYXRlTmV3RXZlbnQiLCJuZXdFdmVudFNoZXJwYSIsImFmZmlybWF0aXZlUmVzcG9uc2UiLCJjbGVhbkRCRXZlbnRzQ2F0ZWdvcnkiLCJlcnJvclJlc3BvbnNlIiwiVXNlckluZm9ybWF0aW9uQ29udHJvbGxlciIsIm9idGFpbmVkVXNlckRhdGEiLCJkb2IiLCJ0ZW1wQmlydGhkYXkiLCJ2aWV3IiwiZGF0YVRvU2F2ZSIsImlzRGF0YSIsImJ0bk1zc2ciLCJwcm9jZWVkQnRuIiwiY2hlY2tWYWx1ZXMiLCJpc1VuZGVmaW5lZCIsImNvbXBhbnkiLCJ0aXRsZSIsInVwZGF0ZURPQiIsInNhdmVBbmRNb3ZlT24iLCJ1c2VySW5mb1NoZXJwYSIsImN1cnJlbnRVaWQiLCJhdXRoU2VydmljZSIsImlzTG9nZ2VkSW4iLCJkYkF1dGhlbnRpY2F0aW9uIiwiY2hlY2tMb2dpblN0YXR1cyIsImFsbEF1dGhTZXJ2aWNlcyIsIiRxIiwiZmlyZUJhc2VBY2NvdW50cyIsInJlc29sdmUiLCJyZWplY3QiLCJhcHAiLCJhcHBVc2VycyIsImI2NEVtYWlsIiwiUmVnaXN0ZXJlZFVzZXJzTGlzdCIsIlByb21pc2UiLCJ1cGxvYWRVc2VyRGF0YSIsImFsbFVzZXJEYXRhIiwicmVtb3RlVXNlciIsInVwbG9hZFVzZXJCaW8iLCJjdXJyZW50VXNlckJpbyIsInRvU3RyaW5nIiwicmVtb3RlVXNlckJpbyIsImRvd25sb2FkVXNlckRhdGEiLCJjcmVhdGVIb3N0ZWRFdmVudCIsIm5ld0V2ZW50IiwibmV3SG9zdGVkRXZlbnQiLCJvcmRlckJ5S2V5IiwidXNlclByb2ZpbGUiLCJldmVudHNQYWNrYWdlIiwiZ2V0QUhvc3RlZEV2ZW50IiwiaG9zdGVkRXZlbnQiLCJzZWxlY3RFdmVudCIsImdldEFuSW52aXRlZEV2ZW50IiwiZGVsZXRlVXBkYXRlRmllbGQiLCJjYXRSZW1vdmluZ0Zyb20iLCJ0aGVyZVdhc0FuVXBkYXRlRmllbGQiLCJjYXRUb0NoZWNrIiwiY3VycmVudENhdE1vZGVsIiwiYWxsQmFja2VuZFNlcnZpY2VzIiwicGFyYW0xIiwicGFyYW0yIiwicGFyYW0zIiwiZXZlbnRSb3V0ZSIsInVzZXJJZCIsImFsbFRyYWZmaWNDb250cm9scyIsImJpb1ByaW1hcmllc0FyZUNvbXBsZXRlTG9jYWxseSIsImV2ZW50RXhpc3RzTG9jYWxseSIsInR5cGUiLCJjbGVhbkV2ZW50cyIsImtleSIsImdldE5hbWVMb2NhbGx5IiwiZ2V0RW1haWxMb2NhbGx5IiwiZ2V0Q29tcGFueUxvY2FsbHkiLCJnZXRUaXRsZUxvY2FsbHkiLCJnZXRET0JMb2NhbGx5IiwiZ2V0RnVsbEJpb0xvY2FsbHkiLCJnZXRPbmVVc2VyRXZlbnRMb2NhbGx5IiwiZ2V0VXNlckV2ZW50c0xvY2FsbHkiLCJzZXROYW1lTG9jYWxseSIsInNldEVtYWlsTG9jYWxseSIsInNldENvbXBhbnlMb2NhbGx5Iiwic2V0VGl0bGVMb2NhbGx5Iiwic2V0RE9CTG9jYWxseSIsInVwZGF0ZVVzZXJFdmVudHNMb2NhbGx5IiwiYWxsVXNlckV2ZW50cyIsInNldFJlbW90ZUJpb0Zyb21Mb2NhbCIsInJlbW92ZVVzZXJFdmVudHNMb2NhbGx5IiwiZ2V0RnVsbFJlbW90ZURCZm9yTG9jYWwiLCJkYiIsInJlbW90ZVVzZXJEYXRhIiwiZ2V0UmVtb3RlQmlvRm9yTG9jYWwiLCJldmVudFR5cGUiLCJnZXRPbmVSZW1vdGVFdmVudEZvckxvY2FsIiwib2J0YWluZWRFdmVudCIsInNldEZ1bGxSZW1vdGVEQmZyb21Mb2NhbCIsInNldFJlbW90ZUV2ZW50c0Zyb21Mb2NhbCIsImJpb0Zyb21SZW1vdGVEQiIsIm9idGFpbmVkVXNlckV2ZW50IiwibG9hZEV2ZW50c1Byb2dyZXNzaXZlbHkiLCJhbGxFdmVudHMiLCJzdHJlZXQwMSIsInN0cmVldDAyIiwic3RyZWV0MDMiLCJjaXR5Iiwic3RhdGUiLCJ6aXAiLCJtaW5pbXVtTmFtZUxlbmd0aCIsIm1pbmltdW1QYXNzTGVuZ3RoIiwibWF4aW11bVBhc3NMZW5ndGgiLCJkYXRlT2ZCaXJ0aCIsImFsbFZhbGlkYXRpb25zIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwiY29udHJvbGxlckFzIiwidXNlckF1dGhlbnRpY2F0aW9uU2VydmljZSIsImV2ZW50Vmlld0NoYW5nZXIiLCJvdGhlcndpc2UiLCIkcm91dGUiLCJjdXJyZW50IiwicGFyYW1zIiwiYWRkQUd1ZXN0IiwibGlua0Z1bmMiLCJzY29wZSIsImVsIiwiYXR0ciIsImN0cmwiLCJhZGRBR3Vlc3RDb250cm9sbGVyIiwiJGluamVjdCIsImRpcmVjdGl2ZSIsInJlc3RyaWN0IiwicmVwbGFjZSIsImxpbmsiLCJiaW5kVG9Db250cm9sbGVyIiwiaG9zdGVkRXZlbnRzTGlzdCIsImhvc3RlZEV2ZW50c0xpc3RDb250cm9sbGVyIiwiY291bnRHdWVzdHMiLCJsaXN0IiwiZ3Vlc3QiLCJob3N0ZWRFdmVudHNTaGVycGEiLCJmb3JtYXREYXRlIiwiZ3Vlc3RzQXR0ZW5kaW5nIiwiZ3Vlc3RzSW52aXRlZCIsInRvdGFsR3Vlc3RDb3VudCIsImd1ZXN0Q291bnQiLCJkZWNsaW5lZCIsInBlcmNlbnRhZ2VBdHRlbmRpbmciLCJndWVzdGxpc3QiLCJldmVudENsaWNrZWQiLCJob3N0ZWRFdmVudHMiLCJjdXJWYWwiLCJtYXhWYWwiLCJ0ZW1wbGF0ZSIsImF0dHJzIiwidXBkYXRlUHJvZ3Jlc3MiLCJwcm9ncmVzcyIsIndpZHRoIiwiJHdhdGNoIiwiaG9zdGVkR3Vlc3RMaXN0IiwiaG9zdGVkR3Vlc3RMaXN0Q29udHJvbGxlciIsInRoZXJlSXNBR3Vlc3RMaXN0IiwiaXNBR3Vlc3RMaXN0IiwidG9vbEJhciIsIlRvb2xCYXJDb250cm9sbGVyIiwiZmJDb25uZWN0IiwibW9kdWxlIiwiZmFjdG9yeSJdLCJtYXBwaW5ncyI6IkFBT0EsUUFBQUEsbUJBQUFDLEVBQUFDLEdBU0EsUUFBQUMsS0FFQUMsRUFBQUMsY0FBQUMsTUFBQSxHQUFBQyxJQUFBLElBQ0FILEVBQUFJLFVBQUFDLEtBQUEsR0FBQUMsT0FBQUMsUUFBQSxHQUFBQyxPQUFBLEVBQUFDLE9BQUFDLE1BQUEsTUFDQVYsRUFBQVcsWUFBQSxFQUNBWCxFQUFBWSxpQkFBQSxFQUVBWixFQUFBYSxnQkFDQUMsR0FBQUMsUUFBQSxFQUFBQyxVQUFBLEVBQUFQLE9BQUFDLE1BQUEsUUFBQU8sbUJBQUEsV0FDQUMsR0FBQUgsUUFBQSxFQUFBQyxVQUFBLEVBQUFQLE9BQUFDLE1BQUEsUUFBQU8sbUJBQUEsU0FDQUUsR0FBQUosUUFBQSxFQUFBQyxVQUFBLEVBQUFQLE9BQUFDLE1BQUEsUUFBQU8sbUJBQUEsVUFJQUcsSUFDQUMsSUFHQXJCLEVBQUFXLFlBQUFXLElBR0EsUUFBQUMsR0FBQUMsR0FDQSxNQUFBQyxNQUFBRCxHQUdBLFFBQUFFLEdBQUFGLEdBQ0EsTUFBQUcsTUFBQUgsR0FHQSxRQUFBSSxHQUFBQyxHQUNBLE1BQUFDLE1BQUFDLE1BQUFGLEdBR0EsUUFBQUcsS0FDQWhDLEVBQUFJLFVBQUFDLEtBQUEsR0FBQUMsT0FBQUMsUUFBQSxHQUFBQyxPQUFBLEVBQUFDLE9BQUFDLE1BQUEsTUFHQSxRQUFBdUIsR0FBQUMsR0FDQXJD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QUF1SixTQUFBLE9BQUEsZUFBQSxXQUFBLGdCQ0pBN1QsUUFDQWtXLE9BQUEsa0JBQ0FwRCxXQUFBLDRCQUFBL0csMkJBRUFBLDBCQUFBOEgsU0FBQSxPQUFBLFlBQUEsZUFBQSxXQUFBLGdCQ0pBN1QsUUFDQWtXLE9BQUEsa0JBQ0FDLFFBQUEsY0FBQW5KLGFBRUFBLFlBQUE2RyxTQUFBLE9BQUEsbUJDSkE3VCxRQUNBa1csT0FBQSxrQkFDQUMsUUFBQSxrQkFBQTdQLGlCQUVBQSxnQkFBQXVOLFNBQUEsT0FBQSxLQUFBLFdDSkE3VCxRQUNBa1csT0FBQSxrQkFDQUMsUUFBQSxlQUFBalgsY0FFQUEsYUFBQTJVLFNBQUEsT0FBQSxhQ0pBN1QsUUFDQWtXLE9BQUEsa0JBQ0FDLFFBQUEsV0FBQWxYLFVBRUFBLFNBQUE0VSxTQUFBLE9BQUEsS0FBQSxtQkNKQTdULFFBQ0FrVyxPQUFBLGtCQUNBQyxRQUFBLGFBQUE5UCxZQUVBQSxXQUFBd04sU0FBQSxRQ0pBN1QsUUFDQWtXLE9BQUEsa0JBQ0F4RCxPQUFBQSxRRUtBMVMsUUFDQWtXLE9BQUEsa0JBQ0FwQyxVQUFBLFlBQUFSLFdDRkF0VCxRQUNBa1csT0FBQSxrQkFDQXBDLFVBQUEsbUJBQUFLLGtCQ0ZBblUsUUFDQWtXLE9BQUEsa0JBQ0FwQyxVQUFBLGNBQUFyVCxhQ0ZBVCxRQUNBa1csT0FBQSxrQkFDQXBDLFVBQUEsa0JBQUE2QixpQkNGQTNWLFFBQ0FrVyxPQUFBLGtCQUNBcEMsVUFBQSxVQUFBaUMiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignQW5FdmVudENvbnRyb2xsZXInLCBBbkV2ZW50Q29udHJvbGxlcik7XG5cbkFuRXZlbnRDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJHJvdXRlUGFyYW1zJywgXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBBbkV2ZW50Q29udHJvbGxlcigkbG9nLCAkcm91dGVQYXJhbXMpIHtcblx0dmFyIHZtID0gdGhpcztcblx0XG5cdC8vbG9jYWwgdmFyaWFibGVzXG5cdHZtLnRlbXBUaW1lID0ge3N0YXJ0OiAnJywgZW5kOiAnJ307XG5cdHZtLnVzZXJJc0hvc3QgPSBmYWxzZTtcblxuXG5cdC8vTG9jYWwgTWV0aG9kc1xuXHRmdW5jdGlvbiBpbml0KCkge1xuXHRcdC8vZGVjbGFyZSBhbmQgaW5pdGlhbGl6ZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2bS50ZW1wRGF0ZVRpbWUgPSB7c3RhcnQ6ICcnLCBlbmQ6ICcnfTtcblx0XHR2bS5uZXdHdWVzdCA9IHtuYW1lOiAnJywgZW1haWw6e2FkZHJlc3M6JycsIHZhbGlkOmZhbHNlLCBzdHlsZTp7Y29sb3I6Jyd9fX07XG5cdFx0dm0uc2hvd0lmSG9zdCA9IGZhbHNlO1xuXHRcdHZtLmhpZGVJZkF0dGVuZGluZyA9IHRydWU7XG5cdFx0Ly9zZWN0aW9uc1xuXHRcdHZtLm1hbmFnZVNlY3Rpb25zID0ge1xuXHRcdFx0MToge2FjdGl2ZTogdHJ1ZSwgY29tcGxldGU6IGZhbHNlLCBzdHlsZTp7Y29sb3I6J2JsYWNrJywgJ2JhY2tncm91bmQtY29sb3InOid5ZWxsb3cnfX0sXG5cdFx0XHQyOiB7YWN0aXZlOiBmYWxzZSwgY29tcGxldGU6IGZhbHNlLCBzdHlsZTp7Y29sb3I6J3doaXRlJywgJ2JhY2tncm91bmQtY29sb3InOidncmF5J319LFxuXHRcdFx0Mzoge2FjdGl2ZTogZmFsc2UsIGNvbXBsZXRlOiBmYWxzZSwgc3R5bGU6e2NvbG9yOid3aGl0ZScsICdiYWNrZ3JvdW5kLWNvbG9yJzonZ3JheSd9fVxuXHRcdH07XG5cblx0XHQvL2NoZWNrIHVzZXIgdG8gZGV0ZXJtaW5lIHN0YXRlXG5cdFx0Y2hlY2tGb3JIb3N0KCk7XG5cdFx0Y2hlY2tJZkd1ZXN0SXNBdHRlbmRpbmcoKTtcblxuXHRcdC8vb3BlbiB1cCBzZWN0aW9uc1xuXHRcdGlmKCF2bS5zaG93SWZIb3N0KSBvcGVuQWxsU2VjdGlvbnMoKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHV0ZjhfdG9fYjY0KHN0cikge1xuXHRcdHJldHVybiBidG9hKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiBiNjRfdG9fdXRmOChzdHIpIHtcbiAgICBcdHJldHVybiBhdG9iKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH1cblxuXHRmdW5jdGlvbiBjbGVhbk5ld0d1ZXN0VmFyaWFibGUoKSB7XG5cdFx0dm0ubmV3R3Vlc3QgPSB7bmFtZTogJycsIGVtYWlsOnthZGRyZXNzOicnLCB2YWxpZDpmYWxzZSwgc3R5bGU6e2NvbG9yOicnfX19O1xuXHR9XG5cblx0ZnVuY3Rpb24gaW52aXRlQVJlZ2lzdGVyZWRVc2VyKHVpZCkge1xuXHRcdCRsb2cuaW5mbygnYWRkaW5nIHRoZW0gdG8gdGhlIHJlZ2lzdGVyZWQgdXNlcnMgbGlzdCAnICsgdWlkKTtcblx0XHQvL3NldCB0aGUgbmV3IGV2ZW50XG5cdFx0cmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdwZW5kaW5nJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJHJvdXRlUGFyYW1zLmV2ZW50SWQpLnNldCh7XG5cdFx0XHRpZDogJHJvdXRlUGFyYW1zLmV2ZW50SWQsXG5cdFx0XHRldmVudFRpbWVzOiB7XG5cdFx0XHRcdHN0YXJ0OiB2bS5ldmVudC5ldmVudFRpbWVzLnN0YXJ0LFxuXHRcdFx0XHRlbmQ6IHZtLmV2ZW50LmV2ZW50VGltZXMuZW5kXG5cdFx0XHR9LFxuXHRcdFx0bmFtZTogdm0uZXZlbnQubmFtZSxcblx0XHRcdGhvc3Q6ICRyb3V0ZVBhcmFtcy51aWRcblx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbygndGhlcmUgd2FzIGFuIGVycm9yJyArIGVycm9yKTtcblx0XHR9KTtcblx0XHQvL2lmIHRoZXJlIHdhcyBhbiB1cGRhdGVkIHBsYWNlIGhvbGRlciwgcmVtb3ZlIGl0XG5cdFx0cmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdwZW5kaW5nJykub25jZSgndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0dmFyIGNoZWNrRm9yUGxhY2Vob2xkZXIgPSBzbmFwc2hvdC52YWwoKVxuXHRcdFx0JGxvZy5pbmZvKHNuYXBzaG90LnZhbCgpKTtcblxuXHRcdFx0aWYoY2hlY2tGb3JQbGFjZWhvbGRlci51cGRhdGVkKSB7XG5cdFx0XHRcdCRsb2cuaW5mbygnZGVsZXRpbmcgdXBkYXRlZCcpO1xuXHRcdFx0XHRyZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ3BlbmRpbmcnKS5jaGlsZCgndXBkYXRlZCcpLnJlbW92ZShmdW5jdGlvbihlcnJvck9iamVjdCkge1xuXHRcdFx0XHRcdGlmKGVycm9yT2JqZWN0KSAkbG9nLmluZm8oXCJEZWxldGluZyBmYWlsZWQ6IFwiICsgZXJyb3JPYmplY3QuY29kZSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlICRsb2cuaW5mbygnbm90aGluZyB0byBkbycpO1xuXG5cdFx0fSwgZnVuY3Rpb24oZXJyb3JPYmplY3QpIHtcblx0XHRcdGlmKGVycm9yT2JqZWN0KSAkbG9nLmluZm8oXCJUaGUgcmVhZCBmYWlsZWQ6IFwiICsgZXJyb3JPYmplY3QuY29kZSk7XG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBpbnZpdGVBblVucmVnaXN0ZXJlZFVzZXIodXNlcktleSkge1xuXHRcdCRsb2cuaW5mbygnYWRkaW5nIHRoZW0gdG8gdGhlIFVOUkVHSVNURVJFRCB1c2VycyBsaXN0ICcgKyB1c2VyS2V5KTtcblx0XHRyZWYuY2hpbGQoJ1VucmVnaXN0ZXJlZFVzZXJzJykuY2hpbGQodXNlcktleSkuY2hpbGQoJ3BlbmRpbmcnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS5jaGlsZCgkcm91dGVQYXJhbXMuZXZlbnRJZCkuc2V0KHtcblx0XHRcdGlkOiAkcm91dGVQYXJhbXMuZXZlbnRJZCxcblx0XHRcdGhvc3Q6ICRyb3V0ZVBhcmFtcy51aWQsXG5cdFx0XHRldmVudFRpbWVzOiB7XG5cdFx0XHRcdHN0YXJ0OiB2bS5ldmVudC5ldmVudFRpbWVzLnN0YXJ0LFxuXHRcdFx0XHRlbmQ6IHZtLmV2ZW50LmV2ZW50VGltZXMuZW5kXG5cdFx0XHR9LFxuXHRcdFx0bmFtZTogdm0uZXZlbnQubmFtZVxuXHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKCd0aGVyZSB3YXMgYW4gZXJyb3InICsgZXJyb3IpO1xuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gY2hlY2tGb3JIb3N0KCkge1xuXHRcdC8vY2hlY2sgZXZlbnQgaG9zdFxuXHRcdHZhciBhdXRoRGF0YSA9IHJlZi5nZXRBdXRoKCk7XG5cblx0XHRpZihhdXRoRGF0YS51aWQgPT0gJHJvdXRlUGFyYW1zLmhvc3RJZCkge1xuXHRcdFx0JGxvZy5pbmZvKCdpcyB0aGUgaG9zdCcpO1xuXHRcdFx0dm0uc2hvd0lmSG9zdCA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCRsb2cuaW5mbygnbm90IHRoZSBob3N0Jyk7XG5cdFx0XHR2bS5zaG93SWZIb3N0ID0gZmFsc2U7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gY2hlY2tJZkd1ZXN0SXNBdHRlbmRpbmcoKSB7XG5cdFx0aWYoIXZtLnNob3dJZkhvc3QpIHtcblx0XHRcdCRsb2cuaW5mbygnY2hlY2sgZ3Vlc3QgYXR0ZW5kYW5jZScpO1xuXHRcdFx0dXNlckV2ZW50cy5jaGlsZCgnZ3Vlc3RMaXN0Jykub24oJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdFx0dmFyIGFsbEd1ZXN0cyA9IHNuYXBzaG90LnZhbCgpO1xuXHRcdFx0XHR2bS5oaWRlSWZBdHRlbmRpbmcgPSAhYWxsR3Vlc3RzWyRyb3V0ZVBhcmFtcy51aWRdLmF0dGVuZGluZztcblx0XHRcdFx0XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBvcGVuQWxsU2VjdGlvbnMoKSB7XG5cdFx0dm0ubWFuYWdlU2VjdGlvbnNbMV0uYWN0aXZlID0gdHJ1ZTtcblx0XHR2bS5tYW5hZ2VTZWN0aW9uc1syXS5hY3RpdmUgPSB0cnVlO1xuXHRcdHZtLm1hbmFnZVNlY3Rpb25zWzNdLmFjdGl2ZSA9IHRydWU7XG5cdH1cblxuXHRmdW5jdGlvbiBzYXZlRXZlbnQoKSB7XG5cdFx0dm0uZXZlbnQuJHNhdmUoKS50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdFx0JGxvZy5pbmZvKCdldmVudCBzYXZlZCcpO1xuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2Vycm9yISAnICsgZXJyb3IpO1xuXHRcdH0pO1xuXHR9XG5cblx0Ly92aWV3IE1ldGhvZFxuXHR2bS5zZXRUZW1wVGltZSA9IGZ1bmN0aW9uKGVuZHBvaW50KSB7XG5cdFx0aWYoZW5kcG9pbnQgPT0gJ3N0YXJ0Jykgdm0udGVtcERhdGVUaW1lLnN0YXJ0ID0gbmV3IERhdGUoKTtcblx0XHRpZihlbmRwb2ludCA9PSAnZW5kJykgdm0udGVtcERhdGVUaW1lLmVuZCA9IG5ldyBEYXRlKCk7XG5cdH1cblxuXHR2bS51bml4VGltZVRvRGF0ZVRpbWUgPSBmdW5jdGlvbiAodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fTtcblxuXHR2bS5kYXRlVGltZVRvVW5peFRpbWUgPSBmdW5jdGlvbiAoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH07XG5cblx0dm0uc3VibWl0ID0gZnVuY3Rpb24oKSB7XG5cdFx0JGxvZy5pbmZvKCdzdWJtaXR0aW5nIHRoZSBmb3JtIG5vdyEnKTtcblx0fVxuXG5cdHZtLmJhY2tUb1VzZXJFdmVudHMgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9jYXRpb24ucGF0aCgnL3VzZXJFdmVudHMvJyArICRyb3V0ZVBhcmFtcy51aWQgKyAnLycgKyAkcm91dGVQYXJhbXMudG9rZW4pO1xuXHR9XG5cblx0dm0uZXZlbnRSZWRpcmVjdCA9IGZ1bmN0aW9uKHBhdGgsIGV2ZW50SUQpIHtcblx0XHR2YXIgZnVsbFBhdGggPSBwYXRoICsgJy8nICsgJHJvdXRlUGFyYW1zLnVpZCArICcvJyArICRyb3V0ZVBhcmFtcy50b2tlbjtcblx0XHQvL3JlZGlyZWN0XG5cdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyB0bzogJyArIGZ1bGxQYXRoKTtcblx0XHQkbG9jYXRpb24ucGF0aChmdWxsUGF0aCk7XG5cdH1cblxuXHR2bS5jaGFuZ2VTZWN0aW9uID0gZnVuY3Rpb24odGFyZ2V0U2VjdGlvbikge1xuXHRcdCRsb2cuaW5mbygnYXJlIHdlIGhlcmUnKTtcblx0XHRmb3IoaSA9IDE7IGkgPD0zOyBpKyspIHtcblx0XHRcdGlmKGk9PXRhcmdldFNlY3Rpb24pIHtcblx0XHRcdFx0dm0ubWFuYWdlU2VjdGlvbnNbaV0uYWN0aXZlID0gdHJ1ZTtcblx0XHRcdFx0dm0ubWFuYWdlU2VjdGlvbnNbaV0uc3R5bGVbJ2JhY2tncm91bmQtY29sb3InXSA9J3llbGxvdyc7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLnN0eWxlWydjb2xvciddID0nYmxhY2snO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0ubWFuYWdlU2VjdGlvbnNbaV0uYWN0aXZlID0gZmFsc2U7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLnN0eWxlWydiYWNrZ3JvdW5kLWNvbG9yJ10gPSdncmF5Jztcblx0XHRcdFx0dm0ubWFuYWdlU2VjdGlvbnNbaV0uc3R5bGVbJ2NvbG9yJ10gPSd3aGl0ZSc7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0dm0uc2F2ZUV2ZW50VGltZSA9IGZ1bmN0aW9uKGRhdGVUaW1lLCB0YXJnZXQpIHtcblx0XHQvL2lmIHRoaXMgZXZlbnQgZGlkbid0IGhhdmUgYSBzdGFydCB0aW1lLCBjcmVhdGUgaXRcblx0XHRpZighdm0uZXZlbnQuZXZlbnRUaW1lcykgeyBcblx0XHRcdHZtLmV2ZW50LmV2ZW50VGltZXMgPSB7c3RhcnQ6ICcnLCBlbmQ6ICcnfTtcblx0XHRcdHZtLmV2ZW50LmV2ZW50VGltZXMuc3RhcnQgPSB2bS5kYXRlVGltZVRvVW5peFRpbWUodm0udGVtcERhdGVUaW1lLnN0YXJ0KTsgXG5cdFx0XHR2bS5ldmVudC5ldmVudFRpbWVzLmVuZCA9IHZtLmRhdGVUaW1lVG9Vbml4VGltZSh2bS50ZW1wRGF0ZVRpbWUuZW5kKTtcblx0XHR9XG5cblx0XHRpZigodm0udGVtcERhdGVUaW1lLmVuZCA8IHZtLnRlbXBEYXRlVGltZS5zdGFydCkgJiYgdGFyZ2V0ID09ICdzdGFydCcpIHZtLnRlbXBEYXRlVGltZS5lbmQgPSB2bS50ZW1wRGF0ZVRpbWUuc3RhcnQ7XG5cdFx0aWYodGFyZ2V0ID09ICdzdGFydCcpIHZtLmV2ZW50LmV2ZW50VGltZXMuc3RhcnQgPSB2bS5kYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpO1xuXHRcdGlmKHRhcmdldCA9PSAnZW5kJykgdm0uZXZlbnQuZXZlbnRUaW1lcy5lbmQgPSB2bS5kYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpO1xuXHR9XG5cblx0dm0uZ3Vlc3RzQXJlSW52aXRlZCA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHZtLmV2ZW50Lmd1ZXN0TGlzdCkgcmV0dXJuIHRydWU7XG5cdFx0ZWxzZSByZXR1cm4gZmFsc2U7XG5cdH1cblxuXHR2bS52YWxpZGF0ZUd1ZXN0RW1haWwgPSBmdW5jdGlvbigpIHtcblx0XHQvL2lmIHRoZXJlIGlzIGFuIGVtYWlsIGFkZHJlc3Ncblx0XHRpZih2bS5uZXdHdWVzdC5lbWFpbC5hZGRyZXNzKSB7XG5cdFx0XHQvL2NoZWNrIHZhbGlkaXR5XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKD86XFwuW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKykqQCg/OlthLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cXC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cIiwgXCJcIik7XG5cblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2bS5uZXdHdWVzdC5lbWFpbC5hZGRyZXNzKSkge1xuXHRcdFx0XHR2bS5uZXdHdWVzdC5lbWFpbC52YWxpZCA9IHRydWU7XG5cdFx0XHRcdHZtLm5ld0d1ZXN0LmVtYWlsLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0ubmV3R3Vlc3QuZW1haWwudmFsaWQgPSBmYWxzZTtcblx0XHRcdFx0dm0ubmV3R3Vlc3QuZW1haWwuc3R5bGUgPSB7Y29sb3I6Jyd9O1xuXHRcdFx0fVx0XHRcdFxuXHRcdH1cblx0fVxuXG5cdHZtLmlzU2VjdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24oKSB7XG5cdFx0Zm9yKGk9MDtpPDg7aSsrKSB7XG5cdFx0XHQkbG9nLmluZm8odm0ucmVxdWlyZWRJbnB1dHNbaV0pO1xuXHRcdH1cblx0fVxuXG5cdHZtLnNhdmVBbmRBZHZhbmNlID0gZnVuY3Rpb24oKSB7XG5cdFx0dm0uZXZlbnQuJHNhdmUoKS50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdFx0JGxvZy5pbmZvKCdldmVudCBzYXZlZCcpO1xuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2Vycm9yISAnICsgZXJyb3IpO1xuXHRcdH0pO1xuXG5cdFx0Ly9jaGVjayBmb3IgY29tcGxldGVuZXNcblx0XHR2bS5pc1NlY3Rpb25Db21wbGV0ZSgpO1xuXG5cdFx0aWYodm0ubWFuYWdlU2VjdGlvbnNbMV0uY29tcGxldGUgPT0gdHJ1ZSAmJiB2bS5tYW5hZ2VTZWN0aW9uc1syXS5jb21wbGV0ZSA9PSB0cnVlICYmIHZtLm1hbmFnZVNlY3Rpb25zWzNdLmNvbXBsZXRlID09IHRydWUpIHtcblx0XHRcdHZtLmV2ZW50UmVkaXJlY3QoJy91c2VyRXZlbnRzJywgJHJvdXRlUGFyYW1zLnVpZCk7XG5cdFx0fSBlbHNlIGlmICh2bS5tYW5hZ2VTZWN0aW9uc1sxXS5hY3RpdmUpIHZtLmNoYW5nZVNlY3Rpb24oMik7XG5cdFx0ZWxzZSBpZiAodm0ubWFuYWdlU2VjdGlvbnNbMl0uYWN0aXZlKSB2bS5jaGFuZ2VTZWN0aW9uKDMpO1xuXHRcdGVsc2UgaWYgKHZtLm1hbmFnZVNlY3Rpb25zWzNdLmFjdGl2ZSkgdm0uY2hhbmdlU2VjdGlvbigxKTtcblx0fVxuXG5cdHZtLmFkZEd1ZXN0VG9Ib3N0c0xpc3QgPSBmdW5jdGlvbigpIHtcblx0XHQvL2RlY2xhcmUgYW5kIGluaXRpYWxpemUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIHVzZXJLZXkgPSB1dGY4X3RvX2I2NCh2bS5uZXdHdWVzdC5lbWFpbC5hZGRyZXNzKTtcblxuXHRcdC8vaWYgZW1haWwgaXMgdmFsaWQgYW5kIG5hbWUgZXhpc3RzXG5cdFx0aWYgKHZtLm5ld0d1ZXN0Lm5hbWUgJiYgdm0ubmV3R3Vlc3QuZW1haWwudmFsaWQpIHtcblx0XHRcdC8vaXMgdGhlcmUgYSBndWVzdCBsaXN0IGFscmVhZHk/IElmIG5vdCBjcmVhdGUgb25lXG5cdFx0XHRpZighdm0uZXZlbnQuZ3Vlc3RMaXN0KSB7XG5cdFx0XHRcdHZtLmV2ZW50Lmd1ZXN0TGlzdCA9IHt9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9pZiBzbyBpcyB0aGlzIHBlcnNvbiBhbHJlYWR5IG9uIHRoZSBsaXN0P1xuXHRcdFx0XHR2YXIgaSA9MDtcblx0XHRcdFx0d2hpbGUodm0uZXZlbnQuZ3Vlc3RMaXN0W2ldKSB7XG5cdFx0XHRcdFx0aWYodm0uZXZlbnQuZ3Vlc3RMaXN0W2ldLmVtYWlsID09IGI2NF90b191dGY4KHVzZXJLZXkpKSB7XG5cdFx0XHRcdFx0XHQkbG9nLmluZm8oJ1RoaXMgZ3Vlc3QgaXMgYWxyZWFkeSBvbiB0aGUgbGlzdCcpO1xuXHRcdFx0XHRcdFx0Y2xlYW5OZXdHdWVzdFZhcmlhYmxlKCk7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGkrKztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvL2lzIHRoaXMgZ3Vlc3QgYSByZWdpc3RlcmVkIHVzZXI/XG5cdFx0XHRpZihyZWdpc3RlcmVkVXNlcnNbdXNlcktleV0pIHtcblx0XHRcdFx0Ly9pcyB0aGUgcmVnaXN0ZXJlZCB1c2VyIHRoZSBob3N0P1xuXHRcdFx0XHRpZihyZWdpc3RlcmVkVXNlcnNbdXNlcktleV0gPT0gJHJvdXRlUGFyYW1zLnVpZCkge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygndHJpZWQgdG8gcmVnaXN0ZXIgdGhlIGhvc3QnKTtcblx0XHRcdFx0XHRjbGVhbk5ld0d1ZXN0VmFyaWFibGUoKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0Ly9hZGQgdGhlbSB0byB0aGUgYXBwcm9wcmlhdGUgcmVnaXN0ZXJlZCB1c2VycycgbGlzdCBvZiBldmVudCBpbnZpdGVzXG5cdFx0XHRcdFx0aW52aXRlQVJlZ2lzdGVyZWRVc2VyKHJlZ2lzdGVyZWRVc2Vyc1t1c2VyS2V5XSk7XG5cblx0XHRcdFx0XHQvL2FkZCB0aGUgZ3Vlc3QgdG8gdGhlIGxpc3Rcblx0XHRcdFx0XHR2bS5ldmVudC5ndWVzdExpc3RbcmVnaXN0ZXJlZFVzZXJzW3VzZXJLZXldXSA9IHtcblx0XHRcdFx0XHRcdGF0dGVuZGluZzogZmFsc2UsIFxuXHRcdFx0XHRcdFx0c3RhdHVzOidwZW5kaW5nJywgXG5cdFx0XHRcdFx0XHRuYW1lOiB2bS5uZXdHdWVzdC5uYW1lLCBcblx0XHRcdFx0XHRcdGVtYWlsOnZtLm5ld0d1ZXN0LmVtYWlsLmFkZHJlc3MsXG5cdFx0XHRcdFx0fTtcdFx0XHRcdFx0XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vYWRkIHRoZSBpbnZpdGUgdG8gdGhlIG5vbi1yZWdpc3RlcmVkIHVzZXJzIGxpc3Qgb2YgZXZlbnQgaW52aXRlc1xuXHRcdFx0XHRpbnZpdGVBblVucmVnaXN0ZXJlZFVzZXIodXNlcktleSk7XG5cblx0XHRcdFx0Ly9hZGQgdGhlIGd1ZXN0IHRvIHRoZSBsaXN0XG5cdFx0XHRcdHZtLmV2ZW50Lmd1ZXN0TGlzdFt1c2VyS2V5XSA9IHtcblx0XHRcdFx0XHRcdGF0dGVuZGluZzogZmFsc2UsIFxuXHRcdFx0XHRcdFx0c3RhdHVzOidwZW5kaW5nJywgXG5cdFx0XHRcdFx0XHRuYW1lOiB2bS5uZXdHdWVzdC5uYW1lLCBcblx0XHRcdFx0XHRcdGVtYWlsOnZtLm5ld0d1ZXN0LmVtYWlsLmFkZHJlc3MsXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cblxuXHRcdFx0Ly9zYXZlIHRoZSBldmVudFxuXHRcdFx0dm0uc2F2ZUV2ZW50KCk7XG5cdFx0XHQvL2NsZWFyIHRoZSB0ZW1wIHZhbHVlc1xuXHRcdFx0Y2xlYW5OZXdHdWVzdFZhcmlhYmxlKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCRsb2cuaW5mbygneW91IGRpZG5cXCd0IGVudGVyIGEgbmFtZSBhbmQgb3IgZW1haWwnKTtcblx0XHR9XG5cdH1cblxuXHR2bS5ndWVzdFdpbGxBdHRlbmQgPSBmdW5jdGlvbihyZXNwb25zZSkge1xuXHRcdHZhciBjdXJyZW50VXNlciA9IHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS5jaGlsZCgnZXZlbnRzJyk7XG5cdFx0dmFyIHRvdGFsUGVuZGluZ0ludml0YXRpb25zID0gMDtcblx0XHR2YXIgcmVtb3ZlQXR0ZW5kaW5nVXBkYXRlZCA9IGZhbHNlO1xuXHRcdFxuXHRcdC8vY2hhbmdlIGF0dGVuZGluZyB0byB0cnVlIGluIGhvc3QncyBndWVzdExpc3Rcblx0XHR2bS5ldmVudC5ndWVzdExpc3RbJHJvdXRlUGFyYW1zLnVpZF0uYXR0ZW5kaW5nID0gcmVzcG9uc2U7XG5cdFx0Ly9jaGFuZ2Ugc3RhdHVzIHRvICdhdHRlbmRpbmcnIGluIGhvc3QncyBndWVzdExpc3Rcblx0XHR2bS5ldmVudC5ndWVzdExpc3RbJHJvdXRlUGFyYW1zLnVpZF0uc3RhdHVzID0gJ2F0dGVuZGluZyc7XG5cdFx0XG5cdFx0Ly9nZXQgdGhlIGludml0YXRpb24gZGV0YWlsc1xuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdwZW5kaW5nJykub24oJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhbGJlXG5cdFx0XHR2YXIgaW52aXRhdGlvbnMgPSBzbmFwc2hvdC52YWwoKTtcblx0XHRcdC8vbG9nIHN0YXJ0aW5nIHZhbHVlc1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zKTtcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9uc1skcm91dGVQYXJhbXMuaG9zdElkXSk7XG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnNbJHJvdXRlUGFyYW1zLmhvc3RJZF1bJHJvdXRlUGFyYW1zLmV2ZW50SWRdKTtcblxuXHRcdFx0dmFyIHRoaXNJbnZpdGF0aW9uID0gaW52aXRhdGlvbnNbJHJvdXRlUGFyYW1zLmhvc3RJZF1bJHJvdXRlUGFyYW1zLmV2ZW50SWRdO1xuXHRcdFx0XG5cdFx0XHQkbG9nLmluZm8odGhpc0ludml0YXRpb24pO1xuXHRcdFx0XG5cdFx0XHQvL2NoZWNrICMgb2YgaW5pdmlhdGlvbnNcblx0XHRcdGZvcihpbnZpdGF0aW9uIGluIGludml0YXRpb25zKSB7XG5cdFx0XHRcdHRvdGFsUGVuZGluZ0ludml0YXRpb25zKys7XG5cdFx0XHR9XG5cblx0XHRcdC8vcmVwb3J0ICMgb2YgaW52aXRhdGlvbnNcblx0XHRcdCRsb2cuaW5mbyhcInRvdGFsIGF0dGVuZGluZzogXCIgKyB0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucyk7XG5cdFx0XHRcblx0XHRcdC8vYWRkIHRoZSBldmVudCB0byB0aGUgZ3Vlc3QncyBhdHRlbmRpbmcgbGlzdFxuXHRcdFx0aWYocmVzcG9uc2UpIGN1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5jaGlsZCgkcm91dGVQYXJhbXMuaG9zdElkKS5jaGlsZCgkcm91dGVQYXJhbXMuZXZlbnRJZCkuc2V0KHRoaXNJbnZpdGF0aW9uLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKGVycm9yKTtcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cblx0XHQvL2lmIHRoZSB1cGRhdGVkIHBsYWNlaG9sZGVyIHdhcyBvbiB0aGUgYXR0ZW5kaW5nIGxpc3QgcmVtb3ZlIGl0XG5cdFx0Y3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLm9uKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdFx0dmFyIGF0dGVuZGluZ0xpc3QgPSBzbmFwc2hvdC52YWwoKTtcblx0XHRcdFxuXHRcdFx0Ly9yZXBvcnQgYWN0aW9uc1xuXHRcdFx0JGxvZy5pbmZvKCd0aGlzIGlzIHRoZSBhdHRlbmRpbmcgbGlzdCcpO1xuXHRcdFx0JGxvZy5pbmZvKGF0dGVuZGluZ0xpc3QpO1xuXHRcdFx0XG5cdFx0XHQvL3Rocm93IGZsYWcgZm9yIGxhdGVyXG5cdFx0XHRpZihhdHRlbmRpbmdMaXN0LnVwZGF0ZWQpIHJlbW92ZUF0dGVuZGluZ1VwZGF0ZWQgPSB0cnVlO1xuXG5cdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdC8vaWYgdGhlciB3YXMgYW4gZXJyb3IgcmVwb3J0IGl0XG5cdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKGVycm9yKTtcblx0XHR9KTtcblxuXHRcdC8vaWYgdGhpcyBpcyB0aGUgbGFzdCBwZW5kaW5nIGV2ZW50IG9uIHRoZSBndWVzdCdzIHBlbmRpbmcgbGlzdCwgYWRkIHRoZSB1cGRhdGVkIHBsYWNlaG9sZGVyXG5cdFx0aWYodG90YWxQZW5kaW5nSW52aXRhdGlvbnMgPCAyKSB7XG5cdFx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdFx0dmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcblxuXHRcdFx0Ly9yZXBsYWNlIHdpdGggdXBkYXRlZCBmaWVsZFxuXHRcdFx0Y3VycmVudFVzZXIuY2hpbGQoJ3BlbmRpbmcnKS51cGRhdGUoe1xuXHRcdFx0XHR1cGRhdGVkOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKGVycm9yKTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdC8vcmVtb3ZlIHRoZSBldmVudCBmcm9tIHRoZSBndWVzdCdzIHBlbmRpbmcgbGlzdFxuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdwZW5kaW5nJykuY2hpbGQoJHJvdXRlUGFyYW1zLmhvc3RJZCkucmVtb3ZlKCk7XG5cblx0XHQvL2lmIHRoZXJlIHdhcyBhbiB1cGRhdGVkIGZpZWxkIGluIGF0dGVuZGluZywgcmVtb3ZlIGl0XG5cdFx0aWYocmVtb3ZlQXR0ZW5kaW5nVXBkYXRlZCkge1xuXHRcdFx0JGxvZy5pbmZvKCdyZW1vdmluZyB0aGUgdXBkYXRlZCBwbGFjZWhvbGRlcicpO1xuXHRcdFx0Ly9jdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykuY2hpbGQoJ3VwZGF0ZWQnKS5yZW1vdmUoKTtcblx0XHR9XG5cblx0XHQvL3NhdmUgY2hhbmdlc1xuXHRcdHZtLmV2ZW50LiRzYXZlKCk7XG5cdH1cblxuXHR2bS51cGRhdGVVcGRhdGVkUGFyYW0gPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgY3VycmVudFVzZXIgPSByZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJ2V2ZW50cycpO1xuXHRcdFxuXHRcdCRsb2cuaW5mbygndXBkYXRpbmcgdGhlIHBhcmFtJyk7XG5cdFx0Y3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLm9uKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHQkbG9nLmluZm8oc25hcHNob3QudmFsKCkpO1xuXHRcdH0pO1xuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5jaGlsZCgndXBkYXRlZCcpLnJlbW92ZSgpO1xuXHR9XG5cblx0dm0uYWRkSW52aXRhdGlvblRvQXR0ZW5kaW5nID0gZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHR2YXIgY3VycmVudFVzZXIgPSByZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJ2V2ZW50cycpO1xuXHRcdHZhciB0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucyA9IDA7XG5cblx0XHQvL2dldCB0aGUgaW52aXRhdGlvbiBkZXRhaWxzXG5cdFx0Y3VycmVudFVzZXIuY2hpbGQoJ3BlbmRpbmcnKS5vbigndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFsYmVcblx0XHRcdHZhciBpbnZpdGF0aW9ucyA9IHNuYXBzaG90LnZhbCgpO1xuXHRcdFx0dmFyIHRoaXNJbnZpdGF0aW9uID0gaW52aXRhdGlvbnNbJHJvdXRlUGFyYW1zLmhvc3RJZF1bJHJvdXRlUGFyYW1zLmV2ZW50SWRdO1xuXHRcdFx0XG5cdFx0XHQvL2xvZyBzdGFydGluZyB2YWx1ZXNcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9ucyk7XG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnNbJHJvdXRlUGFyYW1zLmhvc3RJZF0pO1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdWyRyb3V0ZVBhcmFtcy5ldmVudElkXSk7XG5cdFx0XHRcblx0XHRcdC8vY2hlY2sgIyBvZiBpbml2aWF0aW9uc1xuXHRcdFx0Zm9yKGludml0YXRpb24gaW4gaW52aXRhdGlvbnMpIHtcblx0XHRcdFx0dG90YWxQZW5kaW5nSW52aXRhdGlvbnMrKztcblx0XHRcdH1cblxuXHRcdFx0Ly9yZXBvcnQgIyBvZiBpbnZpdGF0aW9uc1xuXHRcdFx0JGxvZy5pbmZvKFwidG90YWwgcGVuZGluZyBpbnZpdGF0aW9uczogXCIgKyB0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucyk7XG5cdFx0XHRcblx0XHRcdCRsb2cuaW5mbyhyZXNwb25zZSk7XG5cdFx0XHQvL2FkZCB0aGUgZXZlbnQgdG8gdGhlIGd1ZXN0J3MgYXR0ZW5kaW5nIGxpc3Rcblx0XHRcdGlmKHJlc3BvbnNlKSBjdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykuY2hpbGQoJHJvdXRlUGFyYW1zLmhvc3RJZCkuY2hpbGQoJHJvdXRlUGFyYW1zLmV2ZW50SWQpLnNldCh0aGlzSW52aXRhdGlvbiwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbyhlcnJvcik7XG5cdFx0XHR9KTtcblxuXG5cblx0XHR9KTtcblx0fVxuXG5cdC8vc3RhcnQgcnVuXG5cdGluaXQoKTtcbn1cbiIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ0d1ZXN0RXZlbnRDb250cm9sbGVyJywgR3Vlc3RFdmVudENvbnRyb2xsZXIpO1xuXG5HdWVzdEV2ZW50Q29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gR3Vlc3RFdmVudENvbnRyb2xsZXIoJGxvZykge1xuXHQkbG9nLmluZm8oJ2ludG8gdGhlIEd1ZXN0RXZlbnRDb250cm9sbGVyJyk7XG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignSG9zdEV2ZW50Q29udHJvbGxlcicsIEhvc3RFdmVudENvbnRyb2xsZXIpO1xuXG5Ib3N0RXZlbnRDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJHJvdXRlUGFyYW1zJywgJ3VzZXJEYXRhJywgJ3RyYWZmaWNWYWxldCddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIEhvc3RFdmVudENvbnRyb2xsZXIoJGxvZywgJHJvdXRlUGFyYW1zLCB1c2VyRGF0YSwgdHJhZmZpY1ZhbGV0KSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdFxuXHQvL2xvY2FsIHZhcmlhYmxlc1xuXHR2YXIgaG9zdGVkRXZlbnRTaGVycGEgPSB0cmFmZmljVmFsZXQ7XG5cdHZhciB0aGlzRXZlbnRNYW5hZ2VyID0gdXNlckRhdGE7XG5cblx0Ly92aWV3IG1vZGVsIHZhcmlhYmxlc1xuXHR2bS5hY3RpdmVTZWN0aW9uID0gMTtcblx0dm0udGVtcFRpbWUgPSB7c3RhcnQ6ICcnLCBlbmQ6ICcnLCBkdXJhdGlvbjonJ307XG5cdHZtLnByb2dyZXNzQmFyID0gMzk7XG5cdHZtLnRlbXBFdmVudCA9IHt9O1xuXG5cdC8vbG9jYWwgbWV0aG9kc1xuXHRmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fTtcblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH07XG5cblx0ZnVuY3Rpb24gY2FsY3VsYXRlRHVyYXRpb24oc3RhcnQsIGVuZCkge1xuXHRcdHJldHVybiAoZGF0ZVRpbWVUb1VuaXhUaW1lKGVuZCkgLSBkYXRlVGltZVRvVW5peFRpbWUoc3RhcnQpKSAvICg2MCoxMDAwKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGluaXRFdmVudFRpbWVzKCkge1xuXHRcdC8vYnVpbGQgbmV3IHRlbXAgdGltZXNcblx0XHR2YXIgbm93ID0gbmV3IERhdGUoKTtcblxuXHRcdC8vcm91bmQgdG8gdGhlIG5lYXJlc3QgaG91ciwgY3V0IG9mZiBhbnl0aGluZyBzbWFsbGVyXG5cdFx0bm93LnNldEhvdXJzKG5vdy5nZXRIb3VycygpICsgTWF0aC5yb3VuZChub3cuZ2V0TWludXRlcygpLzYwKSk7XG5cdFx0bm93LnNldE1pbnV0ZXMoMCk7XG5cdFx0bm93LnNldFNlY29uZHMoMCk7XG5cdFx0bm93LnNldE1pbGxpc2Vjb25kcygwKTtcblxuXHRcdHZtLnRlbXBUaW1lLnN0YXJ0ID0gbm93O1xuXHRcdHZtLnRlbXBUaW1lLmVuZCA9IG5vdztcblxuXHRcdHZtLnRlbXBUaW1lLmR1cmF0aW9uID0gY2FsY3VsYXRlRHVyYXRpb24odm0udGVtcFRpbWUuc3RhcnQsIHZtLnRlbXBUaW1lLmVuZCk7XG5cdFx0XG5cdH1cblxuXHRmdW5jdGlvbiB1cGRhdGVUZW1wVGltZUZyb21Nb2RlbCgpIHtcblx0XHQvL2lmIHN0YXJ0IHRpbWVzIGFyZSBhdmFpbGFibGVcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2bS50ZW1wRXZlbnQuZXZlbnRUaW1lcy5zdGFydCkpIHtcblx0XHRcdC8vc2V0IHRoZSB0ZW1wVGltZSBtb2RlbFxuXHRcdFx0dm0udGVtcFRpbWUuc3RhcnQgPSB1bml4VGltZVRvRGF0ZVRpbWUodm0udGVtcEV2ZW50LmV2ZW50VGltZXMuc3RhcnQpO1xuXHRcdFx0dm0udGVtcFRpbWUuZW5kID0gdW5peFRpbWVUb0RhdGVUaW1lKHZtLnRlbXBFdmVudC5ldmVudFRpbWVzLmVuZCk7XG5cdFx0fVxuXG5cdH1cblxuXHRmdW5jdGlvbiBpbml0KCkge1xuXHRcdFxuXHRcdC8vbG9hZCBldmVudCBkZXRhaWxzXG5cdFx0dGhpc0V2ZW50TWFuYWdlci5sb2FkQW5FdmVudFByb2dyZXNzaXZlbHkoJHJvdXRlUGFyYW1zLnVpZCwgJHJvdXRlUGFyYW1zLmV2ZW50SWQpXG5cdFx0LnRoZW4oZnVuY3Rpb24odGhlRXZlbnQpIHtcblx0XHRcdC8vYWRkIHRoaXMgZXZlbnQgbW9kZWwgdG8gdGhlIHZpZXcgbW9kZWwgZXZlbnRcblx0XHRcdHZtLnRlbXBFdmVudCA9IHRoZUV2ZW50O1xuXG5cdFx0XHQvL3VwZGF0ZSB0ZW1wVGltZVxuXHRcdFx0dXBkYXRlVGVtcFRpbWVGcm9tTW9kZWwoKTtcblx0XHR9KVxuXHRcdC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0JGxvZygndGhlIGVycm9yIGlzOiAnICsgZXJyb3IpO1xuXHRcdH0pXG5cblx0XHQvL2xvYWQgc3BlY2lmaWVkIHNlY3Rpb25cblx0XHR2bS5hY3RpdmVTZWN0aW9uID0gcGFyc2VJbnQoJHJvdXRlUGFyYW1zLnNlY3Rpb24pO1xuXHRcdC8vc2V0IHRlbXBUaW1lc1xuXHRcdGluaXRFdmVudFRpbWVzKCk7XG5cdH1cblxuXHQvL3ZpZXcgbW9kZWwgbWV0aG9kc1xuXHR2bS5mb3JtYXREdXJhdGlvbiA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vY2FsYyBkdXJhdGlvblxuXHRcdHZtLnRlbXBUaW1lLmR1cmF0aW9uID0gY2FsY3VsYXRlRHVyYXRpb24odm0udGVtcFRpbWUuc3RhcnQsIHZtLnRlbXBUaW1lLmVuZCk7XG5cdFx0JGxvZy5pbmZvKHZtLnRlbXBUaW1lLmR1cmF0aW9uKTtcblx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBob3VycyA9IE1hdGguZmxvb3Iodm0udGVtcFRpbWUuZHVyYXRpb24vKDYwKSk7XG5cdFx0dmFyIG1pbiA9IHZtLnRlbXBUaW1lLmR1cmF0aW9uICUgNjA7XG5cdFx0dmFyIGZyYWN0aW9uID0gKE1hdGgucm91bmQobWluLzE1KS80KTtcblxuXHRcdCRsb2cuaW5mbyhob3VycyArICcgJyArIG1pbiArICcgJyArIGZyYWN0aW9uKTtcblx0XHRyZXR1cm4gKGhvdXJzK2ZyYWN0aW9uKSArICcgaCc7XG5cdH1cblxuXHR2bS5zZXR0aW5nVGVtcFN0YXJ0ID0gZnVuY3Rpb24oKSB7XG5cdFx0dm0udGVtcFRpbWUuZW5kID0gdm0udGVtcFRpbWUuc3RhcnQ7XG5cdH1cblxuXHR2bS5zZXR0aW5nVGVtcEVuZCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vc2V0IHZhbGlkIGVuZCB3aXRoIHN0YXJ0XG5cdFx0aWYodm0udGVtcFRpbWUuc3RhcnQgPiB2bS50ZW1wVGltZS5lbmQpIHZtLnRlbXBUaW1lLnN0YXJ0ID0gdm0udGVtcFRpbWUuZW5kO1xuXHRcdC8vY2FsYyBkdXJhdGlvblxuXHRcdHZtLnRlbXBUaW1lLmR1cmF0aW9uID0gY2FsY3VsYXRlRHVyYXRpb24odm0udGVtcFRpbWUuc3RhcnQsIHZtLnRlbXBUaW1lLmVuZCk7XG5cdH1cblxuXHR2bS5iYWNrVG9Vc2VyRXZlbnRzID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9zZW5kIHRoZSB1c2VyIGJhY2sgdG8gdGhlIHBhZ2UgdGhleSBjYW1lIGZyb21cblx0XHRob3N0ZWRFdmVudFNoZXJwYS5yZWRpcmVjdFRvKCcvdXNlckV2ZW50cycsICRyb3V0ZVBhcmFtcy51aWQpO1xuXHR9XG5cblx0dm0uc2VjdGlvbkJhY2sgPSBmdW5jdGlvbigpIHtcblx0XHQvL21vdmUgYmFja1xuXHRcdHRhcmdldFNlY3Rpb24gPSB2bS5hY3RpdmVTZWN0aW9uIC0gMTtcblx0XHRob3N0ZWRFdmVudFNoZXJwYS5yZWRpcmVjdFRvKCcvZXZlbnQvaG9zdCcsICRyb3V0ZVBhcmFtcy5ldmVudElkLCAkcm91dGVQYXJhbXMudWlkLCB0YXJnZXRTZWN0aW9uKTtcblx0fVx0XG5cblx0dm0uc2VjdGlvbkZvcndhcmQgPSBmdW5jdGlvbigpIHtcblx0XHQvL21vdmUgZm9yd2FyZFxuXHRcdHRhcmdldFNlY3Rpb24gPSB2bS5hY3RpdmVTZWN0aW9uICsgMTtcblx0XHRob3N0ZWRFdmVudFNoZXJwYS5yZWRpcmVjdFRvKCcvZXZlbnQvaG9zdCcsICRyb3V0ZVBhcmFtcy5ldmVudElkLCAkcm91dGVQYXJhbXMudWlkLCB0YXJnZXRTZWN0aW9uKTtcblx0fVxuXG5cdC8vdGFrZSBhY3Rpb25cblx0aW5pdCgpO1xufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ0xhbmRpbmdQYWdlQ29udHJvbGxlcicsIExhbmRpbmdQYWdlQ29udHJvbGxlcik7XG5cbkxhbmRpbmdQYWdlQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZycsICckbG9jYXRpb24nLCAnJGRvY3VtZW50JywgJyR3aW5kb3cnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBMYW5kaW5nUGFnZUNvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCAkbG9jYXRpb24sICRkb2N1bWVudCwgJHdpbmRvdykge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHR2YXIgZmJVUkwgPSAnaHR0cHM6Ly9tZWV0dXBwbGFubmVyLmZpcmViYXNlaW8uY29tLyc7XG5cdHZhciBhdXRoRGF0YSA9IHt9O1xuXHR2YXIgY3VycmVudFVzZXJEYXRhID0ge307XG5cblx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdHZtLnNob3dSZXF1aXJubWVudHMgPSBmYWxzZTtcblx0dm0udmFsaWROZXdOYW1lID0geyd2YWxpZCc6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOicnfX07XG5cdHZtLnZhbGlkTmV3RW1haWwgPSB7J3ZhbGlkJzpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6Jyd9fTtcblx0dm0uc2VjdXJlUGFzc3dvcmQgPSB7J3NlY3VyZSc6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOicnfX07XG5cdHZtLnVubG9ja0NyZWF0ZVVzZXJCdG4gPSB7J3VzYWJsZSc6ZmFsc2UsICdjbGFzcyc6J2J0biBidG4td2FybmluZyd9O1xuXHR2bS5tZXNzYWdlID0gJ3Rlc3RpbmcnO1xuXG5cdFxuXHR2bS52YWxpZFVzZXJFbWFpbCA9IHsndmFsaWQnOmZhbHNlLCAnc3R5bGUnOntjb2xvcjonJ319O1xuXHR2bS52YWxpZFVzZXJQYXNzd29yZCA9IHsndmFsaWQnOmZhbHNlLCAnc3R5bGUnOntjb2xvcjonJ319O1xuXHR2bS51bmNsb2NrVXNlckxvZ2luQnRuID0geyd1c2FibGUnOmZhbHNlLCAnY2xhc3MnOididG4gYnRuLXdhcm5pbmcnfTtcblx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHMgPSB7XG5cdFx0MDp7J2NvbnN0cmFpbnQnOidJcyBhdCBsZWFzdCAxNiBjaGFyYWN0ZXJzIGxvbmcnLCAnc3R5bGUnOntjb2xvcjoncmVkJ30sICdtZXQnOmZhbHNlfSxcblx0XHQxOnsnY29uc3RyYWludCc6J0lzIG5vIGxvbmdlciB0aGFuIDEwMCBjaGFyYWN0ZXJzJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX0sXG5cdFx0Mjp7J2NvbnN0cmFpbnQnOidDb250YWlucyBhdCBsZWFzdCBvbmUgcmVxdWlyZWQgc3ltYm9sIChcXCFcXEBcXCNcXCRcXCVcXF5cXCZcXCopJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX0sXG5cdFx0Mzp7J2NvbnN0cmFpbnQnOidDb250YWlucyBhdCBsZWFzdCBvbmUgbnVtYmVyJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX0sXG5cdFx0NDp7J2NvbnN0cmFpbnQnOidDb250YWlucyBhdCBsZWFzdCBvbmUgbG93ZXJjYXNlIGxldHRlcicsICdzdHlsZSc6e2NvbG9yOidyZWQnfSwgJ21ldCc6ZmFsc2V9LFxuXHRcdDU6eydjb25zdHJhaW50JzonQ29udGFpbnMgYXQgbGVhc3Qgb25lIHVwcGVyY2FzZSBsZXR0ZXInLCAnc3R5bGUnOntjb2xvcjoncmVkJ30sICdtZXQnOmZhbHNlfSxcblx0XHQ2OnsnY29uc3RyYWludCc6XCJEb2Vzbid0IGhhdmUgYW55IGlsbGVnYWwgY2hhcmFjdGVyc1wiLCAnc3R5bGUnOntjb2xvcjoncmVkJ30sICdtZXQnOmZhbHNlfVxuXHR9O1xuXG5cdC8vdmFyIHRoZVRlc3RCb3ggPSBhbmd1bGFyLmVsZW1lbnQoJGRvY3VtZW50KS5maW5kKCcjdGVzdEJveCcpO1xuXG5cdC8vdGhlVGVzdEJveC5jaGVja1ZhbGlkaXR5KCk7XG5cdC8vc2V0Q3VzdG9tVmFsaWRpdHkoJ3lvdSBuZWVkIHNvbWV0aGluZyBlbHNlJyk7XG5cblx0Ly9sb2NhbCBtZXRob2RzXG5cdGZ1bmN0aW9uIHV0ZjhfdG9fYjY0KHN0cikge1xuXHRcdHJldHVybiBidG9hKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiBiNjRfdG9fdXRmOChzdHIpIHtcbiAgICBcdHJldHVybiBhdG9iKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fVxuXG5cdC8vZGVmaW5lIGNvbnRyb2xsZXIgbWV0aG9kc1xuXHR2bS5kaXNwbGF5UGFzc1JlcXMgPSBmdW5jdGlvbigpIHtcblx0XHRpZih2bS5uZXdOYW1lICYmIHZtLm5ld0VtYWlsKSB7XG5cdFx0XHR2bS5zaG93UmVxdWlybm1lbnRzID0gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dm0uc2hvd1JlcXVpcm5tZW50cyA9IGZhbHNlO1xuXHRcdH1cblx0fVxuXG5cdHZtLmNoZWNrTmV3TmFtZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFxuXHRcdGlmKHZtLm5ld05hbWUpIHtcblx0XHRcdGlmKHZtLm5ld05hbWUubGVuZ3RoID4gMCkge1xuXHRcdFx0XHR2bS52YWxpZE5ld05hbWUudmFsaWQgPSB0cnVlO1xuXHRcdFx0XHR2bS52YWxpZE5ld05hbWUuc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS52YWxpZE5ld05hbWUudmFsaWQgPSBmYWxzZTtcblx0XHRcdFx0dm0udmFsaWROZXdOYW1lLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR2bS5vcGVuQ3JlYXRlVXNlckJ1dHRvbigpO1xuXHR9XG5cblx0dm0uY2hlY2tOZXdFbWFpbCA9IGZ1bmN0aW9uICgpIHtcblx0XHRpZih2bS5uZXdFbWFpbCkge1xuXHRcdFx0Ly9jaGVjayB2YWxpZGl0eVxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XCIsIFwiXCIpO1xuXG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3Qodm0ubmV3RW1haWwpKSB7XG5cdFx0XHRcdHZtLnZhbGlkTmV3RW1haWwudmFsaWQgPSB0cnVlO1xuXHRcdFx0XHR2bS52YWxpZE5ld0VtYWlsLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0udmFsaWROZXdFbWFpbC52YWxpZCA9IGZhbHNlO1xuXHRcdFx0XHR2bS52YWxpZE5ld0VtYWlsLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0XHRcdH1cdFx0XHRcblx0XHR9XG5cdFx0XG5cdFx0dm0ub3BlbkNyZWF0ZVVzZXJCdXR0b24oKTtcblx0fVxuXG5cdHZtLmNoZWNrVXNlckVtYWlsID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodm0udXNlckVtYWlsKSB7XG5cdFx0XHQvL2NoZWNrIHZhbGlkaXR5XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKD86XFwuW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKykqQCg/OlthLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cXC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cIiwgXCJcIik7XG5cblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2bS51c2VyRW1haWwpKSB7XG5cdFx0XHRcdHZtLnZhbGlkVXNlckVtYWlsLnZhbGlkID0gdHJ1ZTtcblx0XHRcdFx0dm0udmFsaWRVc2VyRW1haWwuc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS52YWxpZFVzZXJFbWFpbC52YWxpZCA9IGZhbHNlO1xuXHRcdFx0XHR2bS52YWxpZFVzZXJFbWFpbC5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dm0ub3BlblVzZXJMb2dpbkJ0bigpO1xuXHR9XG5cblx0dm0uY2hlY2tOZXdQYXNzd29yZHMgPSBmdW5jdGlvbigpIHtcblx0XHQvL2ZvciBlYWNoIHBhc3N3b3JkIGRlZmluZSB0aGUgcGF0dGVybiB0aGF0IHRoZSBwYXNzd29yZCBtdXN0IG1hdGNoXG5cdFx0dmFyIGNvbnN0cmFpbnRzID0ge1xuXHQgXHRcdDA6IFsnJywgJyB5b3VyIHBhc3N3b3JkIG5lZWRzIHRvIGJlIDE2IGNoYXJhY3RlcnMgb3IgbG9uZ2VyJ10sXG5cdCBcdFx0MTogWycnLCAnIHlvdXIgcGFzc3dvcmQgbmVlZHMgdG8gYmUgbGVzcyB0aGFuIDEwMCBjaGFyYWN0ZXJzJ10sXG5cdCBcdFx0MjogWydbXFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqXScsIFwiIG5vIHJlcXVpcmVkIHN5bWJvbHMgZm91bmRcIl0sXG5cdCBcdFx0MzogWydbMC05XScsIFwiIG5vIG51bWJlcnMgZm91bmRcIl0sXG5cdCBcdFx0NDogWydbYS16XScsIFwiIG5vIGxvd2VyY2FzZSBsZXR0ZXJzIGZvdW5kXCJdLFxuXHQgXHRcdDU6IFsnW0EtWl0nLCBcIiBubyB1cHBlcmNhc2UgbGV0dGVycyBmb3VuZFwiXSxcblx0IFx0XHQ2OiBbJ1teQS16MC05XFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqXScsIFwiIGlsbGVnYWwgY2hhcmFjdGVycyBmb3VuZFwiXSxcbiBcdFx0fTtcbiBcdFx0XG4gXHRcdC8vY2hlY2sgZm9yIGxlbmd0aFxuIFx0XHRpZih2bS5uZXdQYXNzd29yZCkge1xuIFx0XHRcdGlmKHZtLm5ld1Bhc3N3b3JkLmxlbmd0aCA+IDE1KSB7IFxuIFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMF0uc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307IFxuIFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMF0ubWV0ID0gdHJ1ZTsgXG4gXHRcdFx0fSBlbHNlIHtcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzBdLnN0eWxlID0ge2NvbG9yOidyZWQnfTsgXG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1swXS5tZXQgPSBmYWxzZTtcbiBcdFx0XHR9XG4gXHRcdFx0aWYodm0ubmV3UGFzc3dvcmQubGVuZ3RoIDw9IDEwMCkgeyBcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzFdLnN0eWxlID0ge2NvbG9yOidncmVlbid9OyBcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzFdLm1ldCA9IHRydWU7XG4gXHRcdFx0fSBlbHNlIHtcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzFdLnN0eWxlID0ge2NvbG9yOidyZWQnfTsgXG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1sxXS5tZXQgPSBmYWxzZTtcbiBcdFx0XHR9XG5cbiBcdFx0XHQvL2NoZWNrIGNvbnN0cmFpbnRzIDItNVxuIFx0XHRcdGZvcihpID0gMjsgaSA8IDY7IGkrKykge1xuXHQgXHRcdFx0Ly9jaGVjayBmb3IgcmVxdWlyZWQgc3ltYm9scywgdXBwZXJjYXNlLCBsb3NlcmNhc2UsIGFuZCBjaGFyYWN0ZXJzXG5cdCBcdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoY29uc3RyYWludHNbaV1bMF0sIFwiXCIpO1x0XG5cblx0IFx0XHRcdC8vdGVzdCBlYWNoIGNvbnN0cmF0aW50XG5cdCBcdFx0XHRpZihjb25zdHJhaW50LnRlc3Qodm0ubmV3UGFzc3dvcmQpKSB7XG5cdCBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzW2ldLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHQgXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1tpXS5tZXQgPSB0cnVlO1xuXHQgXHRcdFx0fSBlbHNlIHtcblx0IFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbaV0uc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHQgXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1tpXS5tZXQgPSBmYWxzZTtcblx0IFx0XHRcdH1cblx0IFx0XHR9XG5cblx0IFx0XHQvL2NoZWNrIGlsbGVnYWwgY2hhcmFjdGVyc1xuXHQgXHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChjb25zdHJhaW50c1s2XVswXSwgXCJcIik7XG5cblx0IFx0XHQvL3J1biB0aGUgY2hlY2tcblx0IFx0XHRpZighY29uc3RyYWludC50ZXN0KHZtLm5ld1Bhc3N3b3JkKSkge1xuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNl0uc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNl0ubWV0ID0gZmFsc2U7XG5cdCBcdFx0fSBlbHNlIHtcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzZdLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNl0ubWV0ID0gdHJ1ZTtcblx0IFx0XHR9XG5cblx0IFx0XHQvL2lmIGFsbCBjb25zdHJhaW5zIG1ldCwgdGhyb3cgdmFsaWQgcGFzcyBmbGFnXG5cdCBcdFx0aWYoIHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzBdLm1ldCAmJlxuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMV0ubWV0ICYmXG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1syXS5tZXQgJiZcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzNdLm1ldCAmJlxuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNF0ubWV0ICYmXG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1s1XS5tZXQgJiZcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzZdLm1ldCkge1xuXHQgXHRcdFx0dm0uc2VjdXJlUGFzc3dvcmQuc2VjdXJlID0gdHJ1ZVxuXHQgXHRcdH0gZWxzZSB7XG5cdCBcdFx0XHR2bS5zZWN1cmVQYXNzd29yZC5zZWN1cmUgPSBmYWxzZTtcblx0IFx0XHR9XG5cblx0IFx0XHRpZih2bS5zZWN1cmVQYXNzd29yZC5zZWN1cmUpIHtcblx0IFx0XHRcdHZtLnNlY3VyZVBhc3N3b3JkLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHQgXHRcdH0gZWxzZSB7XG5cdCBcdFx0XHR2bS5zZWN1cmVQYXNzd29yZC5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdCBcdFx0fVxuIFx0XHR9XG4gXHRcdFxuIFx0XHR2bS5vcGVuQ3JlYXRlVXNlckJ1dHRvbigpO1xuXHR9XG5cblx0dm0uY2hlY2tVc2VyUGFzc3dvcmRzID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodm0udXNlclBhc3N3b3JkKSB7XG5cdFx0XHRpZih2bS51c2VyUGFzc3dvcmQubGVuZ3RoID4gMTUpIHtcblx0XHRcdFx0dm0udmFsaWRVc2VyUGFzc3dvcmQuc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdFx0XHRcdHZtLnZhbGlkVXNlclBhc3N3b3JkLnZhbGlkID0gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLnZhbGlkVXNlclBhc3N3b3JkLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0XHRcdFx0dm0udmFsaWRVc2VyUGFzc3dvcmQudmFsaWQgPSBmYWxzZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRcblx0XHR2bS5vcGVuVXNlckxvZ2luQnRuKCk7XG5cdH1cblxuXHR2bS5vcGVuQ3JlYXRlVXNlckJ1dHRvbiA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHZtLnZhbGlkTmV3TmFtZS52YWxpZCAmJiB2bS52YWxpZE5ld0VtYWlsLnZhbGlkICYmIHZtLnNlY3VyZVBhc3N3b3JkLnNlY3VyZSkge1xuXHRcdFx0dm0udW5sb2NrQ3JlYXRlVXNlckJ0bi5jbGFzcyA9ICdidG4gYnRuLXN1Y2Nlc3MnO1xuXHRcdFx0dm0udW5sb2NrQ3JlYXRlVXNlckJ0bi51c2FibGUgPSB0cnVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2bS51bmxvY2tDcmVhdGVVc2VyQnRuLmNsYXNzID0gJ2J0biBidG4td2FybmluZyc7XG5cdFx0XHR2bS51bmxvY2tDcmVhdGVVc2VyQnRuLnVzYWJsZSA9IGZhbHNlO1x0XG5cdFx0fVxuXG5cdH1cblxuXHR2bS5vcGVuVXNlckxvZ2luQnRuID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodm0udmFsaWRVc2VyRW1haWwudmFsaWQgJiYgdm0udmFsaWRVc2VyUGFzc3dvcmQudmFsaWQpIHtcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4uY2xhc3MgPSAnYnRuIGJ0bi1zdWNjZXNzJztcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlID0gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi5jbGFzcyA9ICdidG4gYnRuLXdhcm5pbmcnO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi51c2FibGUgPSBmYWxzZTtcdFxuXHRcdH1cblx0fVxuXG5cdHZtLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vc2V0IHZhbHVlc1xuXHRcdHZtLm5ld05hbWUgPSAkZG9jdW1lbnQuZmluZCgnI25ld05hbWUnKVswXS52YWx1ZTtcblx0XHR2bS5uZXdFbWFpbCA9ICRkb2N1bWVudC5maW5kKCcjbmV3RW1haWwnKVswXS52YWx1ZTtcblx0XHR2bS51c2VyRW1haWwgPSAkZG9jdW1lbnQuZmluZCgnI3VzZXJFbWFpbCcpWzBdLnZhbHVlO1xuXHRcdFxuXHRcdHZtLmNoZWNrTmV3TmFtZSgpO1xuXHRcdHZtLmNoZWNrTmV3RW1haWwoKTtcblx0XHR2bS5jaGVja1VzZXJFbWFpbCgpO1xuXHR9XG5cblx0ZnVuY3Rpb24gcmVkaXJlY3QocGF0aCwgdXNlckRhdGEpIHtcblx0XHR2YXIgZnVsbFBhdGggPSBwYXRoICsgJy8nICsgY3VycmVudFVzZXJEYXRhLnVpZCArICcvJyArIGN1cnJlbnRVc2VyRGF0YS50b2tlbjtcblx0XHQvL3JlZGlyZWN0XG5cdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyB0bzogJyArIGZ1bGxQYXRoKTtcblx0XHQkbG9jYXRpb24ucGF0aChmdWxsUGF0aCk7XG5cdFx0JHNjb3BlLiRhcHBseSgpO1xuXHR9XG5cblx0dm0uY3JlYXRlTmV3VXNlciA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2cuaW5mbygnQ3JlYXRpbmcgYSBuZXcgdXNlciBhY2NvdW50IG5vdyEnKTtcblxuXHRcdGlmKHZtLnVubG9ja0NyZWF0ZVVzZXJCdG4udXNhYmxlKSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZVxuXHRcdFx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cblx0XHRcdHJlZi5jcmVhdGVVc2VyKHtcblx0XHRcdFx0ZW1haWw6dm0ubmV3RW1haWwsXG5cdFx0XHRcdHBhc3N3b3JkOnZtLm5ld1Bhc3N3b3JkXG5cdFx0XHR9LGZ1bmN0aW9uKGVycm9yLCB1c2VyRGF0YSkge1xuXHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnRXJyb3IgY3JlYXRpbmcgdXNlcjogJyArIGVycm9yKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvL2xvZyByZXN1bHRzXG5cdFx0XHRcdFx0JGxvZy5pbmZvKHVzZXJEYXRhKTtcblxuXHRcdFx0XHRcdC8vc2F2ZSBhbGwgdGhlIGRhdGFcblx0XHRcdFx0XHRjdXJyZW50VXNlckRhdGEgPSB1c2VyRGF0YTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvL2dlbmVyYXRlIHRoZSB1c2VyIHJlY29yZFxuXHRcdFx0XHRcdHZhciB1c2Vyc1JlZiA9IHJlZi5jaGlsZCgnVXNlcnMvJyArIHVzZXJEYXRhLnVpZCk7XG5cdFx0XHRcdFx0dmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcblxuXHRcdFx0XHRcdC8vd3JpdGUgbmV3IHVzZXIgdG8gdGhlIGRhdGFiYXNlIHdpdGggYmlvIGluZm9cblx0XHRcdFx0XHR1c2Vyc1JlZi5zZXQoeyBcblx0XHRcdFx0XHRcdCdiaW8nOiB7XG5cdFx0XHRcdFx0XHRcdCduYW1lJzogdm0ubmV3TmFtZSxcblx0XHRcdFx0XHRcdFx0J2VtYWlsJzogdm0ubmV3RW1haWxcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHQnZXZlbnRzJzoge1xuXHRcdFx0XHRcdFx0XHQncGVuZGluZyc6IHtcblx0XHRcdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0J2hvc3RpbmcnOiB7XG5cdFx0XHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdCdhdHRlbmRpbmcnOiB7XG5cdFx0XHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdCdjb21wbGV0ZWQnOiB7XG5cdFx0XHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHRcdFx0JGxvZy5pbmZvKCdEYXRhIGNvdWxkIG5vdCBiZSBzYXZlZDogJyArIGVycm9yKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdCRsb2cuaW5mbygnRGF0YSBzYXZlZCBzdWNjZXNzZnVsbHkuJyk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Ly9hZGQgdGhpcyB1c2VyIHRvIHRoZSBsaXN0IG9mIHJlZ2lzdGVyZWQgdXNlcnNcblx0XHRcdFx0XHRyZWYuY2hpbGQoJ1VpZHMnKS5jaGlsZCh1dGY4X3RvX2I2NCh2bS5uZXdFbWFpbCkpLnNldChjdXJyZW50VXNlckRhdGEudWlkLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbyhcIkRhdGEgY291bGQgbm90IGJlIHNhdmVkLiBcIiArIGVycm9yKTtcblx0XHRcdFx0XHRcdGVsc2UgJGxvZy5pbmZvKFwidWlkIGNyZWF0ZWQgc3VjZXNzZnVsbHkuXCIpO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0Ly9yZWRpcmVjdCB0byBVc2VySW5mb3JtYXRpb25cblx0XHRcdFx0XHRyZWRpcmVjdCgnL3VzZXJJbmZvcm1hdGlvbicsIGN1cnJlbnRVc2VyRGF0YSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0fVxuXHR9XG5cblx0dm0ubG9naW5SZWdpc3RlcmVkVXNlciA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0aWYodm0udW5jbG9ja1VzZXJMb2dpbkJ0bi51c2FibGUpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlXG5cdFx0XHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHRcdFx0Ly9hdXRoZW50aWNhdGUgdGhlIHVzZXJcblx0XHRcdHJlZi5hdXRoV2l0aFBhc3N3b3JkKHtcblx0XHRcdFx0ZW1haWw6IHZtLnVzZXJFbWFpbCxcblx0XHRcdFx0cGFzc3dvcmQ6IHZtLnVzZXJQYXNzd29yZFxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IsIGF1dGhEYXRhKSB7XG5cdFx0XHRcdGlmKGVycm9yKSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdFcnJvciBMb2dnaW5nIEluOiAnICsgZXJyb3IpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnTG9nZ2VkIEluIHN1Y2Nlc3NmdWxseTogJyArIGF1dGhEYXRhLnVpZCk7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKGF1dGhEYXRhKTtcblx0XHRcdFx0XHQvL3NhdmUgYWxsIHRoZSBkYXRhXG5cdFx0XHRcdFx0Y3VycmVudFVzZXJEYXRhID0gYXV0aERhdGE7XG5cblx0XHRcdFx0XHQvL2xvYWQgdXNlciBiaW9cblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvL2xvYWQgdXNlciBldmVudHNcblxuXHRcdFx0XHRcdC8vcmVkaXJlY3Rcblx0XHRcdFx0XHRyZWRpcmVjdCgnL3VzZXJJbmZvcm1hdGlvbicsIGN1cnJlbnRVc2VyRGF0YSk7XG5cdFx0XHRcdFx0JHNjb3BlLiRhcHBseSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdH1cblxuXHR9XG5cblx0dm0uYWxlcnRNZSA9IGZ1bmN0aW9uKCkge1xuXHRcdGFsZXJ0KCd0aGlzIGlzIHdvcmtpbmchIGFuIGFsZXJ0IScpO1xuXHR9XG5cblx0dm0ub25SZXNpemVGdW5jdGlvbiA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBpbnB1dFRleHQgPSBhbmd1bGFyLmVsZW1lbnQoJy5pbnB1dFRleHQnKTtcblx0XHRpZigkd2luZG93Lm91dGVyV2lkdGggPiAkd2luZG93Lm91dGVySGVpZ2h0KSB7XG5cdFx0XHRpbnB1dFRleHQuY3NzKCdmb250LXNpemUnLCAnMmVtJyk7XG5cdFx0XHQkbG9nLmluZm8oJ21ha2luZyBiaWdnZXInKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aW5wdXRUZXh0LmNzcygnZm9udC1zaXplJywgJzEuMmVtJyk7XG5cdFx0fVxuXHR9XG5cblx0Ly9ldmVudCBsaXN0ZW5lcnNcblx0aWYgKCdhZGRFdmVudExpc3RlbmVyJyBpbiAkZG9jdW1lbnQpIHtcblx0ICAgICRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XG5cdCAgICBcdCRsb2cuaW5mbygnYWRkaW5nIEZhc3RDbGljaycpO1xuXHQgICAgICAgIEZhc3RDbGljay5hdHRhY2goJGRvY3VtZW50LmJvZHkpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHR9XG5cblx0YW5ndWxhci5lbGVtZW50KCR3aW5kb3cpLmJpbmQoJ3Jlc2l6ZScsIGZ1bmN0aW9uKCkge1xuXHRcdHZtLm9uUmVzaXplRnVuY3Rpb24oKTtcblx0XHQvLyRzY29wZS4kYXBwbHkoKTtcblx0fSk7XG5cblx0YW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cdFx0aWYoJHdpbmRvdy5vdXRlcldpZHRoIDwgNjAwKSB7XG5cdFx0XHR2bS5vblJlc2l6ZUZ1bmN0aW9uKCk7XG5cdFx0XHQvLyRzY29wZS4kYXBwbHkoKTtcblx0XHR9XG5cdH0pXG5cblxuXHQgdm0ubWFzdGVyID0ge307XG5cblx0ICB2bS51cGRhdGUgPSBmdW5jdGlvbih1c2VyKSB7XG5cdCAgICB2bS5tYXN0ZXIgPSBhbmd1bGFyLmNvcHkodXNlcik7XG5cdCAgfTtcblxuXHQgIHZtLnJlc2V0ID0gZnVuY3Rpb24oZm9ybSkge1xuXHQgICAgaWYgKGZvcm0pIHtcblx0ICAgICAgZm9ybS4kc2V0UHJpc3RpbmUoKTtcblx0ICAgICAgZm9ybS4kc2V0VW50b3VjaGVkKCk7XG5cdCAgICB9XG5cdCAgICB2bS51c2VyID0gYW5ndWxhci5jb3B5KHZtLm1hc3Rlcik7XG5cdCAgfTtcblxuXHQgIHZtLnJlc2V0KCk7XG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignTWFpbkNvbnRyb2xsZXInLCBNYWluQ29udHJvbGxlcik7XG5cbk1haW5Db250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJGxvY2F0aW9uJywgJyRkb2N1bWVudCcsICckd2luZG93J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gTWFpbkNvbnRyb2xsZXIoJGxvZywgJGxvY2F0aW9uLCAkZG9jdW1lbnQsICR3aW5kb3cpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTsgXG5cblx0ZnVuY3Rpb24gcmVzaXplQkdJbWFnZSgpIHtcblx0XHR2YXIgYm9keSA9IGFuZ3VsYXIuZWxlbWVudCgkZG9jdW1lbnQpO1xuXHRcdCRkb2N1bWVudC5jc3MoJ2hpZ2h0JywgJHdpbmRvdy5vdXRlckhlaWdodClcblx0fVxuXG5cdHZtLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xuXHRcdGFsZXJ0KCdsb2dnaW5nIHlvdSBvdXQhJyk7XG5cdFx0cmVmLnVuYXV0aCgpO1xuXHRcdCRsb2NhdGlvbi5wYXRoKCcvJyk7XG5cdH07XG5cblx0YW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cdFx0Ly9GYXN0Q2xpY2suYXR0YWNoKCRkb2N1bWVudC5ib2R5KTtcblx0XHRyZXNpemVCR0ltYWdlKCk7XG5cdH0pXG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignTmV3VXNlclNpZ25VcENvbnRyb2xsZXInLCBOZXdVc2VyU2lnblVwQ29udHJvbGxlcik7XG5cbk5ld1VzZXJTaWduVXBDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJywgJ3ZhbGlkYXRpb24nLCAnYmFja2VuZFNlcnZpY2VzJywgJ3RyYWZmaWNWYWxldCcsICd1c2VyRGF0YSddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIE5ld1VzZXJTaWduVXBDb250cm9sbGVyKCRzY29wZSwgJGxvZywgdmFsaWRhdGlvbiwgYmFja2VuZFNlcnZpY2VzLCB0cmFmZmljVmFsZXQsIHVzZXJEYXRhKSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cblx0Ly9kZWZpbmUgdm0gaW5wdXQgdmFyaWFibGVzXG5cdHZtLmlucHV0cyA9IHtcblx0XHRuZXdOYW1lOiAnJyxcblx0XHRuZXdFbWFpbDogJycsXG5cdFx0bmV3UGFzc3dvcmQ6ICcnLFxuXHRcdHJlcXVpcmVkRmllbGRzRGVmaW5lZDogZmFsc2Vcblx0fVxuXHR2bS5lcnJvcnMgPSB7XG5cdFx0bmFtZTogJycsXG5cdFx0ZW1haWw6ICcnLFxuXHRcdHBhc3N3b3JkOiBmYWxzZSxcblx0XHRwYXNzZXNBbGxUZXN0czogZmFsc2Vcblx0fVxuXHR2bS5wYXNzUmVxcyA9IHtcblx0XHQwOiB7IGlkOicnLCByZXE6J0lzIGF0IGxlYXN0IDE2IGNoYXJhY3RlcnMgbG9uZycsIGZ1bGZpbGxlZDpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9fSxcblx0XHQxOiB7IGlkOicnLCByZXE6J0lzIG5vIGxvbmdlciB0aGFuIDEwMCBjaGFyYWN0ZXJzJywgZnVsZmlsbGVkOmZhbHNlLCAnc3R5bGUnOntjb2xvcjoncmVkJ30gfSxcblx0XHQyOiB7IGlkOicnLCByZXE6J0NvbnRhaW5zIGF0IGxlYXN0IG9uZSBsb3dlcmNhc2UgbGV0dGVyJywgZnVsZmlsbGVkOmZhbHNlLCAnc3R5bGUnOntjb2xvcjoncmVkJ30gfSxcblx0XHQzOiB7IGlkOicnLCByZXE6J0NvbnRhaW5zIGF0IGxlYXN0IG9uZSB1cHBlcmNhc2UgbGV0dGVyJywgZnVsZmlsbGVkOmZhbHNlLCAnc3R5bGUnOntjb2xvcjoncmVkJ30gfSxcblx0XHQ0OiB7IGlkOicnLCByZXE6J0NvbnRhaW5zIGF0IGxlYXN0IG9uZSBudW1iZXInLCBmdWxmaWxsZWQ6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOidyZWQnfSB9LFxuXHRcdDU6IHsgaWQ6JycsIHJlcTonQ29udGFpbnMgYXQgbGVhc3Qgb25lIHJlcXVpcmVkIHN5bWJvbCAoXFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqKScsIGZ1bGZpbGxlZDpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9IH0sXG5cdFx0NjogeyBpZDonJywgcmVxOlwiRG9lc24ndCBoYXZlIGFueSBpbGxlZ2FsIGNoYXJhY3RlcnNcIiwgZnVsZmlsbGVkOnRydWUsICdzdHlsZSc6e2NvbG9yOidyZWQnfSB9XG5cdH1cblx0dm0uc2hvd1JlcXNCb3ggPSBmYWxzZTtcblxuXHQvL2RlZmluZSByZXF1aXJlZCBmaWVsZCBjb25zdHJhaW50c1xuXHR2YXIgc2lnbnVwVmFsaWRhdGlvbiA9IHZhbGlkYXRpb247XG5cblx0Ly9kZWZpbmUgY29udHJvbGxlciBtZXRob2RzXG5cdGZ1bmN0aW9uIHZlcmlmeVJlcXVpcm5tZW50cygpIHtcblx0XHRpZih2bS5lcnJvcnMubmFtZSA9PSAnJyAmJiB2bS5lcnJvcnMuZW1haWwgPT0gJycgJiYgIXZtLmVycm9ycy5wYXNzd29yZCkgdm0uZXJyb3JzLnBhc3Nlc0FsbFRlc3RzID0gdHJ1ZTtcblx0XHRlbHNlIHZtLmVycm9ycy5wYXNzZXNBbGxUZXN0cyA9IGZhbHNlO1xuXG5cdFx0aWYoIGFuZ3VsYXIuaXNEZWZpbmVkKHZtLmlucHV0cy5uZXdOYW1lKSAmJiB2bS5pbnB1dHMubmV3TmFtZSAhPT0gJycgJiZcblx0XHRcdGFuZ3VsYXIuaXNEZWZpbmVkKHZtLmlucHV0cy5uZXdFbWFpbCkgJiYgdm0uaW5wdXRzLm5ld0VtYWlsICE9PSAnJyAmJlxuXHRcdFx0YW5ndWxhci5pc0RlZmluZWQodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKSAmJiB2bS5pbnB1dHMubmV3UGFzc3dvcmQgIT09ICcnKSBcblx0XHRcdFx0dm0uaW5wdXRzLnJlcXVpcmVkRmllbGRzRGVmaW5lZCA9IHRydWU7XG5cdFx0ZWxzZSB2bS5pbnB1dHMucmVxdWlyZWRGaWVsZHNEZWZpbmVkID0gZmFsc2U7XG5cdH1cblxuXHQvL2RlZmluZSB2bSBhY2Nlc3NpYmxlIG1ldGhvZHNcblx0dm0uY2hlY2tOZXdOYW1lID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZVxuXHRcdHZhciBlcnJvcnMgPSBbXTtcblx0XHR2YXIgaGFzTmFtZSA9IHNpZ251cFZhbGlkYXRpb24ucmVxdWlyZWQodm0uaW5wdXRzLm5ld05hbWUpO1xuXHRcdHZhciBsb25nRW5vdWdoID0gc2lnbnVwVmFsaWRhdGlvbi5taW5OYW1lTGVuZ3RoKHZtLmlucHV0cy5uZXdOYW1lKVxuXHRcdFxuXHRcdC8vbG9nIGVycm9yc1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGhhc05hbWUpKSBlcnJvcnMucHVzaChoYXNOYW1lKTtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChsb25nRW5vdWdoKSkgZXJyb3JzLnB1c2gobG9uZ0Vub3VnaCk7XG5cblx0XHQvL3VwZGF0ZSB0aGUgZXJyb3JzIG1vZGVsXG5cdFx0aWYoZXJyb3JzLmxlbmd0aCA+IDApIHZtLmVycm9ycy5uYW1lID0gZXJyb3JzLmpvaW4oJywgJyk7XG5cdFx0ZWxzZSB2bS5lcnJvcnMubmFtZSA9ICcnO1xuXG5cdFx0dmVyaWZ5UmVxdWlybm1lbnRzKCk7XG5cdH1cblxuXHR2bS5jaGVja05ld0VtYWlsID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZVxuXHRcdHZhciBlcnJvcnMgPSBbXTtcblx0XHR2YXIgaGFzRW1haWwgPSBzaWdudXBWYWxpZGF0aW9uLnJlcXVpcmVkKHZtLmlucHV0cy5uZXdFbWFpbCk7XG5cdFx0dmFyIGlzQW5FbWFpbCA9IHNpZ251cFZhbGlkYXRpb24uZW1haWwodm0uaW5wdXRzLm5ld0VtYWlsKTtcblx0XHRcblx0XHQvL2xvZyBlcnJvcnNcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChoYXNFbWFpbCkpIGVycm9ycy5wdXNoKGhhc0VtYWlsKTtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChpc0FuRW1haWwpKSBlcnJvcnMucHVzaChpc0FuRW1haWwpO1xuXG5cdFx0Ly91cGRhdGUgdGhlIGVycm9ycyBtb2RlbFxuXHRcdGlmKGVycm9ycy5sZW5ndGggPiAwKSB2bS5lcnJvcnMuZW1haWwgPSBlcnJvcnMuam9pbignLCAnKTtcblx0XHRlbHNlIHZtLmVycm9ycy5lbWFpbCA9ICcnO1xuXG5cdFx0dmVyaWZ5UmVxdWlybm1lbnRzKCk7XG5cdH1cblxuXHR2bS5jaGVja05ld1Bhc3N3b3JkID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9mbGlwIG9uIHJlcXMgYm94XG5cdFx0dm0uc2hvd1JlcXNCb3ggPSB0cnVlO1xuXG5cdFx0Ly9sb2NhbCB2YXJpYWJsZVxuXHRcdHZhciBlcnJvcnMgPSBbXTtcblx0XHR2YXIgaGFzUGFzc3dvcmQgPSBzaWdudXBWYWxpZGF0aW9uLnJlcXVpcmVkKHZtLmlucHV0cy5uZXdQYXNzd29yZCk7XG5cdFx0dmFyIHNwZWNpZmljUmVxcyA9IFtcblx0XHRcdHNpZ251cFZhbGlkYXRpb24ubWluUGFzc0xlbmd0aCh2bS5pbnB1dHMubmV3UGFzc3dvcmQpLFxuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5tYXhQYXNzTGVuZ3RoKHZtLmlucHV0cy5uZXdQYXNzd29yZCksXG5cdFx0XHRzaWdudXBWYWxpZGF0aW9uLmF0TGVhc3RPbmVMb3dlcmNhc2Uodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKSxcblx0XHRcdHNpZ251cFZhbGlkYXRpb24uYXRMZWFzdE9uZVVwcGVyY2FzZSh2bS5pbnB1dHMubmV3UGFzc3dvcmQpLFxuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5hdExlYXN0T25lTnVtYmVyKHZtLmlucHV0cy5uZXdQYXNzd29yZCksXG5cdFx0XHRzaWdudXBWYWxpZGF0aW9uLmF0TGVhc3RPbmVTeW1ib2wodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKSxcblx0XHRcdHNpZ251cFZhbGlkYXRpb24uaWxsZWdhbENoYXJhY3Rlcih2bS5pbnB1dHMubmV3UGFzc3dvcmQpXG5cdFx0XTtcblxuXHRcdC8vbG9nIGVycm9yc1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGhhc1Bhc3N3b3JkKSkgZXJyb3JzLnB1c2goaGFzUGFzc3dvcmQpO1xuXG5cdFx0Ly91cGRhdGUgdGhlIGVycm9ycyBtb2RlbFxuXHRcdGlmKGVycm9ycy5sZW5ndGggPiAwKSB2bS5lcnJvcnMucGFzc3dvcmQgPSBlcnJvcnMuam9pbignLCAnKTtcblx0XHRlbHNlIHZtLmVycm9ycy5lbWFpbCA9ICcnO1xuXG5cdFx0Ly91cGRhdGUgcmVxcyBtb2RlbFxuXHRcdHZhciBhbnlFcnJvcnMgPSBmYWxzZTtcblx0XHRmb3IoaT0wOyBpPDc7IGkrKykge1xuXHRcdFx0aWYoc3BlY2lmaWNSZXFzW2ldKSB7XG5cdFx0XHRcdHZtLnBhc3NSZXFzW2ldLmZ1bGZpbGxlZCA9IHRydWU7XG5cdFx0XHRcdHZtLnBhc3NSZXFzW2ldLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0ucGFzc1JlcXNbaV0uZnVsZmlsbGVkID0gZmFsc2U7XG5cdFx0XHRcdHZtLnBhc3NSZXFzW2ldLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0XHRcdFx0YW55RXJyb3JzID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR2bS5lcnJvcnMucGFzc3dvcmQgPSBhbnlFcnJvcnM7XG5cdFx0dmVyaWZ5UmVxdWlybm1lbnRzKCk7XG5cdH1cblxuXHR2bS5leGl0UGFzc3dvcmQgPSBmdW5jdGlvbigpIHtcblx0XHR2bS5jaGVja05ld1Bhc3N3b3JkKCk7XG5cdFx0dm0uc2hvd1JlcXNCb3ggPSBmYWxzZTtcblx0fVxuXG5cdHZtLmNyZWF0ZU5ld1VzZXIgPSBmdW5jdGlvbiAoKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBuZXdVc2VyU2hlcnBhID0gdHJhZmZpY1ZhbGV0O1xuXG5cdFx0Ly9jb25maXJtIGFsbCBmaWVsZHMgYXJlIHZhbGlkXG5cdFx0aWYodm0uZXJyb3JzLnBhc3Nlc0FsbFRlc3RzICYmIHZtLmlucHV0cy5yZXF1aXJlZEZpZWxkc0RlZmluZWQpIHtcblx0XHRcdFxuXHRcdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdFx0dmFyIGNyZWF0ZU5ld1VzZXIgPSBiYWNrZW5kU2VydmljZXM7XG5cdFx0XHR2YXIgbmV3VXNlckRhdGEgPSB1c2VyRGF0YTtcblx0XHRcdHZhciB0aGlzVUlEO1xuXG5cdFx0XHQvL2NyZWF0ZSB0aGUgbmV3IHVzZXIgaW4gdGhlIGRhdGFiYXNlXG5cdFx0XHRjcmVhdGVOZXdVc2VyLmNyZWF0ZU5ld1VzZXIodm0uaW5wdXRzLm5ld0VtYWlsLCB2bS5pbnB1dHMubmV3UGFzc3dvcmQpXG5cdFx0XHQudGhlbihmdW5jdGlvbihkYlVzZXJEYXRhKSB7XG5cdFx0XHRcdFxuXHRcdFx0XHQvL21haW50YWluIGxvY2FsIHZhbHVlcyB0byBzcGVlZCB1cCB1c2VyIGV4cGVyaWVuY2Vcblx0XHRcdFx0bmV3VXNlckRhdGEubG9hZFByaW1hcmllcyh2bS5pbnB1dHMubmV3RW1haWwsIHZtLmlucHV0cy5uZXdOYW1lLCBkYlVzZXJEYXRhLnVpZCk7XG5cblx0XHRcdFx0Ly9jcmVhdGUgYSB1c2VyIHByb2ZpbGUgaW4gdGhlIGRhdGFiYXNlXG5cdFx0XHRcdGNyZWF0ZU5ld1VzZXIuYWRkTmV3VXNlclRvRGF0YWJhc2UoZGJVc2VyRGF0YS51aWQsIHZtLmlucHV0cy5uZXdOYW1lLCB2bS5pbnB1dHMubmV3RW1haWwpXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKG1lc3NhZ2UpIHtcblxuXHRcdFx0XHRcdCRsb2cuaW5mbyhtZXNzYWdlKTtcblxuXHRcdFx0XHRcdC8vYWRkIHRoaXMgdXNlciB0byB0aGUgbGlzdCBvZiByZWdpc3RlcmVkIHVzZXJzXG5cdFx0XHRcdFx0Y3JlYXRlTmV3VXNlci5hZGROZXdVc2VyVG9SZWdVc2Vyc0xpc3QoZGJVc2VyRGF0YS51aWQsIHZtLmlucHV0cy5uZXdFbWFpbClcblx0XHRcdFx0XHQudGhlbihmdW5jdGlvbihtZXNzYWdlKSB7XG5cblx0XHRcdFx0XHRcdC8vcmVkaXJlY3QgdXNpbmcgdGhlIHVpZFxuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHQvL3JlZGlyZWN0IHRvIHRoZSBuZXh0IHBhZ2UgXG5cdFx0XHRcdFx0XHRuZXdVc2VyU2hlcnBhLnJlZGlyZWN0VG8oJy91c2VySW5mb3JtYXRpb24nLCBkYlVzZXJEYXRhLnVpZCk7XG5cdFx0XHRcdFx0XHQgXG5cdFx0XHRcdFx0XHQkbG9nLmluZm8obWVzc2FnZSk7IFxuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKG1lc3NhZ2UpIHsgJGxvZy5pbmZvKG1lc3NhZ2UpOyB9KVxuXHRcdFx0XHR9KVxuXHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyAkbG9nLmluZm8obWVzc2FnZSk7IH0pXG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKG1lc3NhZ2UpIHsgJGxvZy5pbmZvKG1lc3NhZ2UpOyB9KVxuXHRcdFx0XG5cdFx0fVxuXG5cdH1cblx0XG5cdC8vcnVuIHRpbWUgYWN0aW9uc1xuXG59XG4iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdSZWdVc2VyTG9naW5Db250cm9sbGVyJywgUmVnVXNlckxvZ2luQ29udHJvbGxlcik7XG5cblJlZ1VzZXJMb2dpbkNvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICckZG9jdW1lbnQnLCAnYmFja2VuZFNlcnZpY2VzJywgJ3RyYWZmaWNWYWxldCcsICd1c2VyRGF0YSddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIFJlZ1VzZXJMb2dpbkNvbnRyb2xsZXIoJGxvZywgJGRvY3VtZW50LCBiYWNrZW5kU2VydmljZXMsIHRyYWZmaWNWYWxldCwgdXNlckRhdGEpIHtcblx0dmFyIHZtID0gdGhpcztcblxuXHQvL2RlZmluZSB2bSBpbnB1dCB2YXJpYWJsZXNcblx0dm0uaW5wdXRzID0ge1xuXHRcdGVtYWlsOiAnJyxcblx0XHRwYXNzd29yZDogJycsXG5cdFx0cmVxdWlyZWRGaWVsZHNEZWZpbmVkOiBmYWxzZVxuXHR9XG5cdHZtLmVycm9ycyA9IHtcblx0XHRtZXNzYWdlOiAnJyxcblx0XHRwYXNzZXNBbGxUZXN0czogdHJ1ZVxuXHR9XG5cdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4gPSB7XG5cdFx0J3VzYWJsZSc6ZmFsc2UsIFxuXHRcdCdjbGFzcyc6J2J0biBidG4td2FybmluZycsXG5cdFx0bWVzc2FnZTogJ05lZWQgRW1haWwgJiBQYXNzJ1xuXHR9XG5cblx0Ly9tZXRob2RzXG5cdGZ1bmN0aW9uIG9wZW5Vc2VyTG9naW5CdG4oKSB7XG5cdFx0Ly9jaGVjayB0aGF0IHRoZXJlIGlzIGFuIGVtYWlsIGFuZCB0aGVyZSBpcyBhIHBhc3N3b3JkXG5cdFx0aWYoXHRhbmd1bGFyLmlzRGVmaW5lZCh2bS5pbnB1dHMuZW1haWwpICYmIHZtLmlucHV0cy5lbWFpbCAhPT0gJycgJiZcblx0XHRcdGFuZ3VsYXIuaXNEZWZpbmVkKHZtLmlucHV0cy5wYXNzd29yZCkgJiYgdm0uaW5wdXRzLnBhc3N3b3JkICE9PSAnJykgXG5cdFx0e1xuXHRcdFx0dm0uaW5wdXRzLnJlcXVpcmVkRmllbGRzRGVmaW5lZCA9IHRydWU7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLmNsYXNzID0gJ2J0biBidG4tc3VjY2Vzcyc7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLm1lc3NhZ2UgPSAnTG9naW4nO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi51c2FibGUgPSB0cnVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2bS5pbnB1dHMucmVxdWlyZWRGaWVsZHNEZWZpbmVkID0gZmFsc2U7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLmNsYXNzID0gJ2J0biBidG4td2FybmluZyc7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLm1lc3NhZ2UgPSAnTmVlZCBFbWFpbCAmIFBhc3MnO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi51c2FibGUgPSBmYWxzZTtcblx0XHR9XG5cblx0fVxuXG5cdC8vdmlldyBtb2RlbCBtZXRob2RzXG5cdHZtLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vc2V0IHZhbHVlc1xuXHRcdHZtLmlucHV0cy5lbWFpbCA9ICRkb2N1bWVudC5maW5kKCcjdXNlckVtYWlsJylbMF0udmFsdWU7XG5cdFx0dm0uaW5wdXRzLnBhc3N3b3JkID0gJGRvY3VtZW50LmZpbmQoJyN1c2VyUGFzc3dvcmQnKVswXS52YWx1ZTtcblx0XHRcblx0XHRvcGVuVXNlckxvZ2luQnRuKCk7XG5cdH1cblxuXHR2bS5sb2dpblJlZ2lzdGVyZWRVc2VyID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciByZWdpc3RlcmVkVXNlclNoZXJwYSA9IHRyYWZmaWNWYWxldDtcblxuXHRcdC8vY29uZmlybSBhbGwgZmllbGRzIGFyZSB2YWxpZFxuXHRcdGlmKHRydWUpIHtcblx0XHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRcdHZhciBkYXRhYmFzZSA9IGJhY2tlbmRTZXJ2aWNlcztcblx0XHRcdHZhciByZWdpc3RlcmVkVXNlckRhdGEgPSB1c2VyRGF0YTtcblxuXHRcdFx0Ly92ZXJpZnkgdXNlcnMgY3JlZGVudGlhbHNcblx0XHRcdGRhdGFiYXNlLkxvZ2luUmVnaXN0ZXJlZFVzZXIodm0uaW5wdXRzLmVtYWlsLCB2bS5pbnB1dHMucGFzc3dvcmQpXG5cdFx0XHQudGhlbihmdW5jdGlvbih1c2VyQ3JlZGVudGlhbHMpIHtcblx0XHRcdFx0Ly9pZiBubyB0cm91YmxlIGxvZ2dpbmcgaW4gdXBkYXRlIGVycm9yIG9iamVjdFxuXHRcdFx0XHR2bS5lcnJvcnMucGFzc2VzQWxsVGVzdHMgPSB0cnVlO1xuXG5cdFx0XHRcdC8vYWRkIHByaW1hcnkgaW5mb3JtYXRpb24gdG8gbG9jYWwgbW9kZWxcblx0XHRcdFx0cmVnaXN0ZXJlZFVzZXJEYXRhLnNldFByaW1hcmllc0xvY2FsbHkodm0uaW5wdXRzLmVtYWlsLCB2bS5pbnB1dHMubmFtZSwgdXNlckNyZWRlbnRpYWxzLnVpZCk7XG5cblx0XHRcdH0pXG5cdFx0XHQudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdFx0JGxvZy5pbmZvKFwidWlkIGlzIFwiICsgcmVnaXN0ZXJlZFVzZXJEYXRhLmdldFVJRExvY2FsbHkoKSk7XG5cblx0XHRcdFx0ZGF0YWJhc2UuZ2V0VXNlckJpbyhyZWdpc3RlcmVkVXNlckRhdGEuZ2V0VUlETG9jYWxseSgpKVxuXHRcdFx0XHQudGhlbihmdW5jdGlvbih1c2VyQmlvKSB7XG5cdFx0XHRcdFx0Ly91cGRhdGUgdXNlckRhdGEgbW9kZWwgd2l0aCB1c2VyQmlvXG5cdFx0XHRcdFx0cmVnaXN0ZXJlZFVzZXJEYXRhLnVwZGF0ZUJpb0xvY2FsbHkodXNlckJpbyk7XG5cblx0XHRcdFx0XHQvL2xvYWQgdXNlciBldmVudHNcblx0XHRcdFx0XHRkYXRhYmFzZS5nZXRVc2VyRXZlbnRzKHJlZ2lzdGVyZWRVc2VyRGF0YS5nZXRVSURMb2NhbGx5KCkpXG5cdFx0XHRcdFx0LnRoZW4oZnVuY3Rpb24oYWxsRXZlbnRzRm9yVGhpc1VzZXIpIHtcblx0XHRcdFx0XHRcdC8vdXBkYXRlIHVzZXJEYXRhIG1vZGVsIHdpdGggdXNlckV2ZW50c1xuXHRcdFx0XHRcdFx0cmVnaXN0ZXJlZFVzZXJEYXRhLnVwZGF0ZUFsbFVzZXJFdmVudHNMb2NhbGx5KGFsbEV2ZW50c0ZvclRoaXNVc2VyKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdC5jYXRjaChmdW5jdGlvbihtZXNzYWdlKSB7ICRsb2cuaW5mbyhtZXNzYWdlKTsgfSlcblxuXHRcdFx0XHR9KVxuXHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyAkbG9nLmluZm8obWVzc2FnZSk7IH0pXG5cblx0XHRcdFx0Ly9yZWRpcmVjdCB0byB0aGUgbmV4dCBwYWdlIFxuXHRcdFx0XHRyZWdpc3RlcmVkVXNlclNoZXJwYS5yZWRpcmVjdFRvKCcvdXNlckluZm9ybWF0aW9uJywgcmVnaXN0ZXJlZFVzZXJEYXRhLmdldFVJRExvY2FsbHkoKSk7XG5cblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyBcblx0XHRcdFx0Ly9pZiB0aGVyZSB3YXMgYW4gZXJyb3IgbG9nZ2luZyBpbiwgbGV0IHRoZSB1c2VyIGtub3dcblx0XHRcdFx0dm0uZXJyb3JzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuXHRcdFx0XHR2bS5lcnJvcnMucGFzc2VzQWxsVGVzdHMgPSBmYWxzZTtcblx0XHRcdH0pXG5cblx0XHRcdC8vdXNlIHVpZCB0byBjb2xsZWN0IHVzZXIgYmlvXG5cdFx0XHRcblx0XHR9XG5cblx0fVxuXG5cdHZtLmNsaWNrZWQgPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgdXNlckF1dGhlbnRpY2F0aW9uID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0dXNlckF1dGhlbnRpY2F0aW9uLmxvZ1VzZXJPdXQoKTtcblx0fVxuXG5cdC8vcnVuIGNvbW1hbmRzXG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcigndG9wTWVudUNvbnRyb2xsZXInLCB0b3BNZW51Q29udHJvbGxlcik7XG5cbnRvcE1lbnVDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJywgJyRsb2NhdGlvbicsICckZG9jdW1lbnQnLCAnJHdpbmRvdyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHRvcE1lbnVDb250cm9sbGVyKCRzY29wZSwgJGxvZywgJGxvY2F0aW9uLCAkZG9jdW1lbnQsICR3aW5kb3cpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHQvL2xvY2FsIHZhcmlhYmxlc1xuXHR2bS5sb2dnZWRJbiA9IGZhbHNlXG5cblx0Ly9zdHlsZXMgdmFyaWFibGVzXG5cdFxuXHQvL2V2ZW50IGxpc3RlbmVyc1xuXHRpZiAoJ2FkZEV2ZW50TGlzdGVuZXInIGluICRkb2N1bWVudCkge1xuXHQgICAgJGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHtcblx0ICAgIFx0JGxvZy5pbmZvKCdhZGRpbmcgRmFzdENsaWNrJyk7XG5cdCAgICAgICAgRmFzdENsaWNrLmF0dGFjaCgkZG9jdW1lbnQuYm9keSk7XG5cdCAgICB9LCBmYWxzZSk7XG5cdH1cblxuXHRhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdykuYmluZCgncmVzaXplJywgZnVuY3Rpb24oKSB7XG5cdFx0dm0ub25SZXNpemVGdW5jdGlvbigpO1xuXHRcdCRzY29wZS4kYXBwbHkoKTtcblx0fSk7XG5cblx0YW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cdFx0aWYoJHdpbmRvdy5vdXRlcldpZHRoIDwgNjAwKSB7XG5cdFx0XHR2bS5vblJlc2l6ZUZ1bmN0aW9uKCk7XG5cdFx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cdFx0fVxuXHR9KVxuXHQvL2R5bmFtaWNhbGx5IHNldCBpbnB1dCB3aWR0aFxuXG5cblx0Ly8gQ3JlYXRlIGEgY2FsbGJhY2sgd2hpY2ggbG9ncyB0aGUgY3VycmVudCBhdXRoIHN0YXRlXG5cdGZ1bmN0aW9uIGluaXQoKSB7XG5cdFx0dm0ub25SZXNpemVGdW5jdGlvbigpO1xuXHRcdCRzY29wZS4kYXBwbHkoKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGF1dGhEYXRhQ2FsbGJhY2soYXV0aERhdGEpIHtcblx0ICBpZiAoYXV0aERhdGEpIHtcblx0ICAgICRsb2cuaW5mbyhcIlVzZXIgXCIgKyBhdXRoRGF0YS51aWQgKyBcIiBpcyBsb2dnZWQgaW4gd2l0aCBcIiArIGF1dGhEYXRhLnByb3ZpZGVyKTtcblx0ICAgIHZtLmxvZ2dlZEluID0gdHJ1ZTtcblx0ICB9IGVsc2Uge1xuXHQgICAgJGxvZy5pbmZvKFwiVXNlciBpcyBsb2dnZWQgb3V0XCIpO1xuXHQgICAgdm0ubG9nZ2VkSW4gPSBmYWxzZTtcblx0ICB9XG5cdH1cblxuXHRmdW5jdGlvbiByZWRpcmVjdChwYXRoLCB1c2VyRGF0YSkge1xuXHRcdHZhciBmdWxsUGF0aCA9IHBhdGggKyAnLycgKyB1c2VyRGF0YS51aWQgKyAnLycgKyB1c2VyRGF0YS50b2tlbjtcblx0XHQvL3JlZGlyZWN0XG5cdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyB0bzogJyArIGZ1bGxQYXRoKTtcblx0XHQkbG9jYXRpb24ucGF0aChmdWxsUGF0aCk7XG5cdFx0Ly8kc2NvcGUuJGFwcGx5KCk7XG5cdH1cblxuXHQvL3ZtIGFjY2Vzc2libGUgbWV0aG9kc1xuXHR2bS5sb2dvdXQgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9nLmluZm8oJ2xvZ2dpbmcgb3V0IScpO1xuXHRcdHZtLmxvZ2dlZEluID0gZmFsc2U7XG5cdFx0cmVmLnVuYXV0aCgpO1xuXHRcdHJlZGlyZWN0KCcvJywge3VpZDonJywgdG9rZW46Jyd9KTtcblx0fVxuXG5cdHZtLm5hdkJhckxvZ2luUmVnaXN0ZXJlZFVzZXIgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9nLmluZm8oJ2xhdW5jaGluZyBsb2dpbicpO1xuXHRcdGlmKHRydWUpIHtcblx0XHQvL2lmKHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlKSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZVxuXHRcdFx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cblx0XHRcdC8vYXV0aGVudGljYXRlIHRoZSB1c2VyXG5cdFx0XHRyZWYuYXV0aFdpdGhQYXNzd29yZCh7XG5cdFx0XHRcdGVtYWlsOiB2bS5uYXZiYXJVc2VyRW1haWwsXG5cdFx0XHRcdHBhc3N3b3JkOiB2bS5uYXZiYXJVc2VyUGFzc1xuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IsIGF1dGhEYXRhKSB7XG5cdFx0XHRcdGlmKGVycm9yKSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdFcnJvciBMb2dnaW5nIEluOiAnICsgZXJyb3IpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnTG9nZ2VkIEluIHN1Y2Nlc3NmdWxseTogJyArIGF1dGhEYXRhLnVpZCk7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKGF1dGhEYXRhKTtcblx0XHRcdFx0XHQvL3NhdmUgYWxsIHRoZSBkYXRhXG5cblx0XHRcdFx0XHQvL2xvYWQgdXNlciBiaW9cblx0XHRcdFx0XHQvL2xvYWQgdXNlciBldmVudHNcblxuXHRcdFx0XHRcdC8vcmVkaXJlY3Rcblx0XHRcdFx0XHRyZWRpcmVjdCgnL3VzZXJJbmZvcm1hdGlvbicsIGF1dGhEYXRhKTtcblx0XHRcdFx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cblx0XHRcdFx0XHQvL2NsaWNrIGNsb3NlZCB0aGUgbmF2YmFyXG5cdFx0XHRcdFx0YW5ndWxhci5lbGVtZW50KCcubmF2YmFyLXRvZ2dsZScpLmNsaWNrKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cblxuXHRcdH1cblxuXHR9XG5cblx0dm0ub25SZXNpemVGdW5jdGlvbiA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBuYXZiYXJJbnB1dHMgPSBhbmd1bGFyLmVsZW1lbnQoJy5uYXZiYXJJbnB1dHMnKTtcblx0XHRuYXZiYXJJbnB1dHMuY3NzKCd3aWR0aCcsICgkd2luZG93Lm91dGVyV2lkdGggLSAyNikgKyAncHgnKTtcblx0fVxuXG5cdC8vIFJlZ2lzdGVyIHRoZSBjYWxsYmFjayB0byBiZSBmaXJlZCBldmVyeSB0aW1lIGF1dGggc3RhdGUgY2hhbmdlc1xuXHRyZWYub25BdXRoKGF1dGhEYXRhQ2FsbGJhY2spO1xufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ1VzZXJFdmVudHNDb250cm9sbGVyJywgVXNlckV2ZW50c0NvbnRyb2xsZXIpO1xuXG5Vc2VyRXZlbnRzQ29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJywgJyRyb3V0ZVBhcmFtcycsICd1c2VyRGF0YScsICd0cmFmZmljVmFsZXQnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBVc2VyRXZlbnRzQ29udHJvbGxlcigkbG9nLCAkcm91dGVQYXJhbXMsIHVzZXJEYXRhLCB0cmFmZmljVmFsZXQpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGN1cnJlbnRVc2VyID0gdXNlckRhdGE7XG5cblx0Ly9sb2NhbCB2aWV3IHZhcmlhYmxlc1xuXHR2bS5zaG93RGVjbGluZSA9IGZhbHNlO1x0Ly93aGF0IGlzIHRoaXMgYmVpbmcgdXNlZCBmb3I/XG5cdHZtLnVzZXJCaW8gPSB7fVxuXHR2bS5ldmVudHMgPSB7fTtcblx0dm0uc2VjdGlvbkF2YWlsYWJsZSA9IHtcblx0XHRwZW5kaW5nOiBmYWxzZSxcblx0XHRhdHRlbmRpbmc6IGZhbHNlLFxuXHRcdGhvc3Rpbmc6IGZhbHNlLFxuXHRcdGNvbXBsZXRlZDogZmFsc2Vcblx0fTtcblx0dm0uZXJyb3JzID0ge307XG5cblx0Ly9kZWNsYXJlIGxvY2FsIG1ldGhvZHNcblx0ZnVuY3Rpb24gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKSB7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KHVuaXhUaW1lKSk7XG5cdH07XG5cblx0ZnVuY3Rpb24gZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKSB7XG5cdFx0cmV0dXJuIERhdGUucGFyc2UoZGF0ZVRpbWUpO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIG5vT2ZIb3N0ZUV2ZW50cygpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVcblx0XHR2YXIgY291bnRlciA9IDA7XG5cblx0XHRmb3IoZXZlbnQgaW4gdm0uZXZlbnRzLmhvc3RpbmcpIGNvdW50ZXIrKztcblxuXHRcdHJldHVybiBjb3VudGVyO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2VuZXJhdGVFdmVudElEKCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XG5cdFx0dmFyIGV2ZW50SUQgPSAoZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGUpICogMTApICsgKG5vT2ZIb3N0ZUV2ZW50cygpKTtcblxuXHRcdHJldHVybiBldmVudElEO1xuXHR9XG5cblx0ZnVuY3Rpb24gY2hlY2tGb3JFdmVudHMoKSB7XG5cdFx0XG5cdFx0Ly9sb29wIHRocm91Z2ggYWxsIHRoZSBldmVudCBjYXRlZ29yaWVzXG5cdFx0T2JqZWN0LmtleXModm0uZXZlbnRzKS5mb3JFYWNoKGZ1bmN0aW9uKGNhdGVnb3J5KSB7XG5cdFx0XHRcblx0XHRcdC8vaW5zaWRlIGVhY2ggY2F0ZWdvcnkgY291bnQgdGhlIG51bWJlciBvZiBldmVudCBvYmplY3RzLi4uTk9UIHVwZGF0ZWQgcGxhY2Vob2xkZXIgdGhvdWdoXG5cdFx0XHRPYmplY3Qua2V5cyh2bS5ldmVudHNbY2F0ZWdvcnldKS5mb3JFYWNoKGZ1bmN0aW9uKGV2ZW50SUQpIHtcblx0XHRcdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlXG5cdFx0XHRcdHZhciBjb3VudGVyID0gMDtcblx0XHRcdFx0Ly9jb3VudCBldmVudHMgd2l0aCBpZCdzIC8gTk9UICd1cGRhdGVkJyBwbGFjZWhvbGRlcnNcblx0XHRcdFx0aWYoYW5ndWxhci5pc09iamVjdCh2bS5ldmVudHNbY2F0ZWdvcnldW2V2ZW50SURdKSkgY291bnRlcisrO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly9pZiBhdCBsZWFzdCBvbmUgZXZlbnQgaWQgKG9iamVjdCkgd2FzIGNvdW50ZWQsIHRoZW4gc2hvdyB0aGUgc2VjdGlvblxuXHRcdFx0XHRpZihjb3VudGVyID4gMCkgdm0uc2VjdGlvbkF2YWlsYWJsZVtjYXRlZ29yeV0gPSB0cnVlO1xuXHRcdFx0XHRlbHNlIHZtLnNlY3Rpb25BdmFpbGFibGVbY2F0ZWdvcnldID0gZmFsc2U7XG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBpbml0aWFsaXplKCkge1xuXHRcdC8vbWFrZSBzdXJlIHRoZSB1aWQgaXMgc2V0XG5cdFx0Y3VycmVudFVzZXIuc2V0VUlETG9jYWxseSgkcm91dGVQYXJhbXMudWlkKTtcblxuXHRcdC8vbG9hZCB0aGUgdXNlciBiaW9cblx0XHRjdXJyZW50VXNlci5sb2FkQmlvKCRyb3V0ZVBhcmFtcy51aWQpXG5cdFx0LnRoZW4oZnVuY3Rpb24ocmV0cmlldmVkQmlvKSB7XG5cdFx0XHR2bS51c2VyQmlvID0gcmV0cmlldmVkQmlvO1xuXHRcdH0pXG5cdFx0LmNhdGNoKClcblxuXHRcdC8vbG9hZCB1c2VyIGV2ZW50cyBwcm9ncmVzc2l2bGV5XG5cdFx0Ly9maXN0IHdoYXRldmVyIGlzIGluIHRoZSBtb2RlbCBhbHJlYWR5XG5cdFx0dm0uZXZlbnRzID0gY3VycmVudFVzZXIuZ2V0QWxsVXNlckV2ZW50c0xvY2FsbHkoKTtcblxuXHRcdC8vdGhlbiBjYWxsIHRvIHRoZSBkYiBhbmQgZ2V0IHRoZSBtb3N0IHVwIHRvIGRhdGUgaW5mb1xuXHRcdGN1cnJlbnRVc2VyLmdldFJlbW90ZUV2ZW50c0ZvckxvY2FsKClcblx0XHQudGhlbihmdW5jdGlvbihvYnRhaW5lZFVzZXJFdmVudHMpIHtcblxuXHRcdFx0Ly91cGRhdGUgdGhlIHZpZXcgbW9kZWwgd2l0aCB0aGUgdXBkYXRlZCBEQiByZXN1bHRzXG5cdFx0XHR2bS5ldmVudHMgPSBjdXJyZW50VXNlci5nZXRBbGxVc2VyRXZlbnRzTG9jYWxseSgpO1xuXHRcdH0pXG5cdFx0LnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHQvL25vdyB0aGF0IGV2ZW50cyBhcmUgbG9hZGVkLCByZWZsZWN0IGl0IGluIHRoZSB2aWV3IG1vZGVsXG5cdFx0XHRjaGVja0ZvckV2ZW50cygpO1xuXHRcdH0pXG5cblx0fVxuXG5cdC8vZGVjbGFyZSB2aWV3IG1ldGhvZHNcblx0dm0uY3JlYXRlTmV3RXZlbnQgPSBmdW5jdGlvbigpIHtcblx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZXZlbnRJRCA9IGdlbmVyYXRlRXZlbnRJRCgpO1xuXHRcdHZhciBuZXdFdmVudFNoZXJwYSA9IHRyYWZmaWNWYWxldDtcblxuXHRcdC8vYWRkIHRoZSBldmVudCB0byB0aGUgbW9kYWwgKGxvY2FsbHkgdGhlbiBvbiB0aGUgZGIpXG5cdFx0Y3VycmVudFVzZXIuY3JlYXRlTmV3RXZlbnQoZXZlbnRJRClcblx0XHQudGhlbihmdW5jdGlvbihhZmZpcm1hdGl2ZVJlc3BvbnNlKSB7XG5cdFx0XHQvL3JlcG9ydCB0aGUgc3VjY2Vzc1xuXHRcdFx0JGxvZy5pbmZvKGFmZmlybWF0aXZlUmVzcG9uc2UpO1xuXHRcdH0pXG5cdFx0LnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHQvL2lmIHRoZXJlIHdhcyBhbiB1cGRhdGVkIGZpZWxkLCByZW1vdmUgaXQgbm93XG5cdFx0XHRjdXJyZW50VXNlci5jbGVhbkRCRXZlbnRzQ2F0ZWdvcnkoJ2hvc3RpbmcnKTtcblxuXHRcdH0pXG5cdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yUmVzcG9uc2UpIHtcblx0XHRcdC8vcmVwb3J0IHRoZSBlcnJvclxuXHRcdFx0JGxvZy5pbmZvKGVycm9yUmVzcG9uc2UpO1xuXHRcdH0pXG5cdFx0XG5cblx0XHQvL3JlZGlyZWN0IHRvIHRoZSBuZXcgZXZlbnQgcGFnZVx0XHRcblx0XHRuZXdFdmVudFNoZXJwYS5yZWRpcmVjdFRvKCcvZXZlbnQnLCBldmVudElELCBjdXJyZW50VXNlci5nZXRVSURMb2NhbGx5KCksIGN1cnJlbnRVc2VyLmdldFVJRExvY2FsbHkoKSk7XG5cdH1cblxuXHQvL2V4ZWN1dGUgc2NyaXB0c1xuXHRpbml0aWFsaXplKCk7XG5cbn1cbiIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ1VzZXJJbmZvcm1hdGlvbkNvbnRyb2xsZXInLCBVc2VySW5mb3JtYXRpb25Db250cm9sbGVyKTtcblxuVXNlckluZm9ybWF0aW9uQ29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJywgJyRkb2N1bWVudCcsICckcm91dGVQYXJhbXMnLCd1c2VyRGF0YScsICd0cmFmZmljVmFsZXQnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBVc2VySW5mb3JtYXRpb25Db250cm9sbGVyKCRsb2csICRkb2N1bWVudCwgJHJvdXRlUGFyYW1zLCB1c2VyRGF0YSwgdHJhZmZpY1ZhbGV0KSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdFxuXHQvL2xvY2FsIHZhcmlhYmxlc1xuXHR2YXIgY3VycmVudFVzZXIgPSB1c2VyRGF0YTtcblxuXHQvL3ZpZXcgbW9kZWwgdmFyaWFibGVzXG5cdHZtLnVzZXIgPSB7fTtcblx0dm0udGVtcEJpcnRoZGF5O1xuXHR2bS52aWV3ID0ge1xuXHRcdGRhdGFUb1NhdmU6IGZhbHNlLFxuXHRcdGlzRGF0YTogZmFsc2UsXG5cdFx0YnRuTXNzZzogJ01vdmUgT24uLi4nLFxuXHRcdHByb2NlZWRCdG46ICdidG4gYnRuLXByaW1hcnknXG5cdH07XG5cblx0Ly9sb2NhbCBtZXRob2RzXG5cdGZ1bmN0aW9uIHVuaXhUaW1lVG9EYXRlVGltZSh1bml4VGltZSkge1xuXHRcdHJldHVybiBuZXcgRGF0ZShwYXJzZUludCh1bml4VGltZSkpO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIGRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fTtcblxuXHQvL3ZpZXcgYWNjZXNzaWJsZSBtZXRob2RzXG5cdHZtLmNoZWNrVmFsdWVzID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly90aHJvdyB0aGUgaXNEYXRhIGZsYWcgaWYgc29tZXRoaW5nIGlzIHVwZGF0ZWRcblx0XHR2bS52aWV3LmlzRGF0YSA9IHRydWU7XG5cblx0XHRpZiggIShhbmd1bGFyLmlzVW5kZWZpbmVkKHZtLnVzZXIuY29tcGFueSkgfHwgdm0udXNlci5jb21wYW55ID09PSAnJykgfHwgXG5cdFx0XHQhKGFuZ3VsYXIuaXNVbmRlZmluZWQodm0udXNlci50aXRsZSkgfHwgdm0udXNlci50aXRsZSA9PT0gJycpIHx8IFxuXHRcdFx0IShhbmd1bGFyLmlzVW5kZWZpbmVkKHZtLnVzZXIuZG9iKSB8fCB2bS51c2VyLmRvYiA9PT0gJycpKSBcblx0XHR7XG5cdFx0XHR2bS52aWV3LmRhdGFUb1NhdmUgPSB0cnVlO1xuXHRcdFx0dm0udmlldy5wcm9jZWVkQnRuID0gJ2J0biBidG4tc3VjY2Vzcyc7XG5cdFx0XHR2bS52aWV3LmJ0bk1zc2cgPSAnU2F2ZSAmIENvbnRpbnVlJztcblx0XHR9IGVsc2Uge1xuXHRcdFx0dm0udmlldy5kYXRhVG9TYXZlID0gZmFsc2U7XG5cdFx0XHR2bS52aWV3LnByb2NlZWRCdG4gPSAnYnRuIGJ0bi1wcmltYXJ5Jztcblx0XHRcdHZtLnZpZXcuYnRuTXNzZyA9ICdNb3ZlIE9uLi4uJztcdFxuXHRcdH1cblxuXHR9XG5cblx0dm0udXBkYXRlRE9CID0gZnVuY3Rpb24oKSB7XG5cdFx0dm0udXNlci5kb2IgPSBkYXRlVGltZVRvVW5peFRpbWUodm0udGVtcEJpcnRoZGF5KTtcblx0XHR2bS5jaGVja1ZhbHVlcygpO1xuXHR9XG5cblx0dm0uc2F2ZUFuZE1vdmVPbiA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIHVzZXJJbmZvU2hlcnBhID0gdHJhZmZpY1ZhbGV0O1xuXHRcdHZhciBjdXJyZW50VWlkID0gY3VycmVudFVzZXIuZ2V0VUlETG9jYWxseSgpO1xuXG5cdFx0Ly9jb252ZXJ0IERPQiB0byB1bml4VGltZSBhbmQgc2F2ZVxuXHRcdGlmKHZtLnRlbXBCaXJ0aGRheSAhPT0gMCkgdm0udXBkYXRlRE9CKCk7XG5cdFx0XG5cdFx0Ly9pZiB0aGVyZSBpc24ndCBjdXJyZW50bHkgYSBkb2IsIGdyYWIgZnJvbSB0aGUgcm91dGUgcGFyYW1zXG5cdFx0aWYoY3VycmVudFVpZCA9PSAnJyB8fCBhbmd1bGFyLmlzVW5kZWZpbmVkKGN1cnJlbnRVaWQpKSB7XG5cdFx0XHRjdXJyZW50VXNlci5zZXRVSURMb2NhbGx5KCRyb3V0ZVBhcmFtcy51aWQpO1xuXHRcdH1cblxuXHRcdC8vaWYgdGhlcmUgaXMgbmV3IGRhdGEsIHNhdmUgaXRcblx0XHRpZih2bS52aWV3LmlzRGF0YSkge1xuXHRcdFx0JGxvZy5pbmZvKCdzYXZpbmcgdGhlIG5ldyBkYXRhJyk7XG5cdFx0XHRjdXJyZW50VXNlci51cGRhdGVCaW9Mb2NhbGx5KHZtLnVzZXIpO1xuXHRcdH1cblx0XHRcblx0XHQvL21vdmUgb25cblx0XHR1c2VySW5mb1NoZXJwYS5yZWRpcmVjdFRvKCcvdXNlckV2ZW50cycsIHZtLnVzZXIudWlkKVxuXHR9XG5cblx0ZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHtcblx0XHQvL2xvYWQgRmFzdENsaWNrXG5cdFx0Ly9GYXN0Q2xpY2suYXR0YWNoKCRkb2N1bWVudC5ib2R5KTtcblx0XHRcblx0XHQvL2xvYWQgdXNlckRhdGEgbG9jYWxseSBvciBmcm9tIGRiXG5cdFx0Y3VycmVudFVzZXIubG9hZEJpbygkcm91dGVQYXJhbXMudWlkKVxuXHRcdC50aGVuKGZ1bmN0aW9uKG9idGFpbmVkVXNlckRhdGEpIHtcblx0XHRcdC8vYXNzaWduIHVzZXIgdmFsdWVzXG5cdFx0XHR2bS51c2VyID0gb2J0YWluZWRVc2VyRGF0YTtcblxuXHRcdFx0Ly9idWlsZCB0ZW1wQmlydGhkYXlcblx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKG9idGFpbmVkVXNlckRhdGEuZG9iKSAmJiBvYnRhaW5lZFVzZXJEYXRhLmRvYiAhPT0gJycpIHtcblx0XHRcdFx0dm0udGVtcEJpcnRoZGF5ID0gdW5peFRpbWVUb0RhdGVUaW1lKG9idGFpbmVkVXNlckRhdGEuZG9iKVxuXHRcdFx0fVxuXG5cdFx0fSk7XG5cdFxuXHR9XG5cblx0Ly9ydW4gcHJvY2Vzc2VzXG5cdGluaXRpYWxpemUoKTsgLy93aXRoIGludGVybmV0IHVzZSB0aGUgZXZlbnQgbGlzdGVuZXIgaW5zdGVhZFxufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmZhY3RvcnkoJ2F1dGhTZXJ2aWNlJywgYXV0aFNlcnZpY2UpO1xuXG5hdXRoU2VydmljZS4kaW5qZWN0ID0gWyckbG9nJywgJ2JhY2tlbmRTZXJ2aWNlcyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGF1dGhTZXJ2aWNlKCRsb2csIGJhY2tlbmRTZXJ2aWNlcykge1xuXG5cdHZhciBhbGxBdXRoU2VydmljZXMgPSB7XG5cdFx0aXNMb2dnZWRJbjogaXNMb2dnZWRJblxuXHR9O1xuXG5cdGZ1bmN0aW9uIGlzTG9nZ2VkSW4oKSB7XG5cdFx0Ly9jaGVjayB0aGUgdXNlciBhdXRoZW50aWNhaW9uIHN0YXRlXG5cdFx0dmFyIGRiQXV0aGVudGljYXRpb24gPSBiYWNrZW5kU2VydmljZXM7XG5cdFx0XG5cdFx0ZGJBdXRoZW50aWNhdGlvbi5jaGVja0xvZ2luU3RhdHVzKClcblx0XHQudGhlbihmdW5jdGlvbihzdGF0dXMpIHtcblx0XHRcdHJldHVybiBzdGF0dXM7XG5cdFx0fSlcblx0XHQuY2F0Y2goZnVuY3Rpb24oc3RhdHVzKSB7XG5cdFx0XHRyZXR1cm4gc3RhdHVzO1xuXHRcdH0pXG5cdH1cblx0XG5cdHJldHVybiBhbGxBdXRoU2VydmljZXM7XG5cbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5mYWN0b3J5KCdiYWNrZW5kU2VydmljZXMnLCBiYWNrZW5kU2VydmljZXMpO1xuXG5iYWNrZW5kU2VydmljZXMuJGluamVjdCA9IFsnJGxvZycsICckcScsICckd2luZG93J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gYmFja2VuZFNlcnZpY2VzKCRsb2csICRxLCAkd2luZG93KSB7XG5cdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgYWxsQmFja2VuZFNlcnZpY2VzID0ge1xuXHRcdHV0ZjhfdG9fYjY0OiB1dGY4X3RvX2I2NCwgXHRcdFx0XHRcdFx0Ly9sb2NhbCBmdW5jdGlvbnMgdG8gY29udmVydCBkYXRlc1xuXHRcdGI2NF90b191dGY4OiBiNjRfdG9fdXRmOCxcblx0XHR1bml4VGltZVRvRGF0ZVRpbWU6IHVuaXhUaW1lVG9EYXRlVGltZSxcblx0XHRkYXRlVGltZVRvVW5peFRpbWU6IGRhdGVUaW1lVG9Vbml4VGltZSxcblxuXHRcdExvZ2luUmVnaXN0ZXJlZFVzZXI6IExvZ2luUmVnaXN0ZXJlZFVzZXIsXHRcdC8vYXV0aGVudGljYWlvblxuXHRcdGNoZWNrTG9naW5TdGF0dXM6IGNoZWNrTG9naW5TdGF0dXMsXG5cdFx0bG9nVXNlck91dDogbG9nVXNlck91dCxcblxuXHRcdGRvd25sb2FkVXNlckRhdGE6IGRvd25sb2FkVXNlckRhdGEsXHRcdFx0XHQvL2dldHRlciBtZXRob2RzXG5cdFx0Z2V0VXNlckJpbzogZ2V0VXNlckJpbyxcblx0XHRnZXRVc2VyRXZlbnRzOiBnZXRVc2VyRXZlbnRzLFxuXHRcdGdldEFIb3N0ZWRFdmVudDogZ2V0QUhvc3RlZEV2ZW50LFxuXHRcdGdldEFuSW52aXRlZEV2ZW50OiBnZXRBbkludml0ZWRFdmVudCxcblxuXHRcdGNyZWF0ZU5ld1VzZXI6IGNyZWF0ZU5ld1VzZXIsXHRcdFx0XHRcdC8vc2V0dGVyIE1ldGhvZHNcblx0XHRhZGROZXdVc2VyVG9EYXRhYmFzZTogYWRkTmV3VXNlclRvRGF0YWJhc2UsXG5cdFx0YWRkTmV3VXNlclRvUmVnVXNlcnNMaXN0OiBhZGROZXdVc2VyVG9SZWdVc2Vyc0xpc3QsXG5cdFx0dXBsb2FkVXNlckRhdGE6IHVwbG9hZFVzZXJEYXRhLFxuXHRcdHVwbG9hZFVzZXJCaW86IHVwbG9hZFVzZXJCaW8sXG5cdFx0Y3JlYXRlSG9zdGVkRXZlbnQ6IGNyZWF0ZUhvc3RlZEV2ZW50LFxuXHRcdGRlbGV0ZVVwZGF0ZUZpZWxkOiBkZWxldGVVcGRhdGVGaWVsZCxcblxuXHRcdHRoZXJlV2FzQW5VcGRhdGVGaWVsZDogdGhlcmVXYXNBblVwZGF0ZUZpZWxkXHQvL21vZGVsIG1haW50YWluYW5jZVxuXHR9O1xuXG5cdGZ1bmN0aW9uIHV0ZjhfdG9fYjY0KHN0cikge1xuXHRcdHJldHVybiBidG9hKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiBiNjRfdG9fdXRmOChzdHIpIHtcbiAgICBcdHJldHVybiBhdG9iKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNyZWF0ZU5ld1VzZXIoZW1haWwsIHBhc3N3b3JkKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBmaXJlQmFzZUFjY291bnRzID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHRcblx0XHQvL3JldHVybiBhIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcblx0XHRcdGZpcmVCYXNlQWNjb3VudHMuY3JlYXRlVXNlcih7XG5cdFx0XHRcdFxuXHRcdFx0XHRlbWFpbDogZW1haWwsXG5cdFx0XHRcdHBhc3N3b3JkOiBwYXNzd29yZFxuXHRcdFx0XG5cdFx0XHR9LGZ1bmN0aW9uKGVycm9yLCB1c2VyRGF0YSkge1xuXHRcdFx0XHRcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdCgnRXJyb3IgY3JlYXRpbmcgdXNlcjogJyArIGVycm9yKTtcblxuXHRcdFx0XHRlbHNlIHJlc29sdmUodXNlckRhdGEpO1xuXHRcdFx0fSk7XG5cblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGFkZE5ld1VzZXJUb0RhdGFiYXNlKHVpZCwgbmFtZSwgZW1haWwpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIGFwcFVzZXJzID0gYXBwLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCk7XG5cdFx0dmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcblxuXHRcdC8vcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFxuXHRcdFx0YXBwVXNlcnMuc2V0KHsgXG5cdFx0XHRcdCdiaW8nOiB7XG5cdFx0XHRcdFx0J3VpZCc6IHVpZCxcblx0XHRcdFx0XHQnbmFtZSc6IG5hbWUsXG5cdFx0XHRcdFx0J2VtYWlsJzogZW1haWxcblx0XHRcdFx0fSxcblx0XHRcdFx0J2V2ZW50cyc6IHtcblx0XHRcdFx0XHQncGVuZGluZyc6IHtcblx0XHRcdFx0XHRcdCd1cGRhdGVkJzogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0J2hvc3RpbmcnOiB7XG5cdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdCdhdHRlbmRpbmcnOiB7XG5cdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdCdjb21wbGV0ZWQnOiB7XG5cdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoJ0RhdGEgY291bGQgbm90IGJlIHNhdmVkOiAnICsgZXJyb3IpO1xuXHRcdFx0XHRcblx0XHRcdFx0ZWxzZSByZXNvbHZlKCdEYXRhIHNhdmVkIHN1Y2Nlc3NmdWxseS4nKTtcblxuXHRcdFx0fSk7XG5cblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gYWRkTmV3VXNlclRvUmVnVXNlcnNMaXN0KHVpZCwgZW1haWwpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIGI2NEVtYWlsID0gdXRmOF90b19iNjQoZW1haWwpO1xuXHRcdHZhciBSZWdpc3RlcmVkVXNlcnNMaXN0ID0gYXBwLmNoaWxkKCdVaWRzJykuY2hpbGQoYjY0RW1haWwpO1xuXG5cdFx0Ly9yZXR1cm4gYSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XG5cdFx0XHRSZWdpc3RlcmVkVXNlcnNMaXN0LnNldCh1aWQsIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoXCJEYXRhIGNvdWxkIG5vdCBiZSBzYXZlZC4gXCIgKyBlcnJvcik7XG5cdFx0XHRcdGVsc2UgcmVzb2x2ZShcInVpZCBjcmVhdGVkIHN1Y2Vzc2Z1bGx5LlwiKTtcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIExvZ2luUmVnaXN0ZXJlZFVzZXIoZW1haWwsIHBhc3N3b3JkKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdFxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9hdXRoZW50aWNhdGUgdGhlIHVzZXJcblx0XHRcdGFwcC5hdXRoV2l0aFBhc3N3b3JkKHtcblxuXHRcdFx0XHRlbWFpbDogZW1haWwsXG5cdFx0XHRcdHBhc3N3b3JkOiBwYXNzd29yZFxuXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvciwgYXV0aERhdGEpIHtcblx0XHRcdFx0XG5cdFx0XHRcdGlmKGVycm9yKSB7XG5cdFx0XHRcdFx0cmVqZWN0KCdFcnJvciBMb2dnaW5nIEluOiAnICsgZXJyb3IpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnTG9nZ2VkIEluIHN1Y2Nlc3NmdWxseTogJyArIGF1dGhEYXRhLnVpZCk7XG5cdFx0XHRcdFx0cmVzb2x2ZShhdXRoRGF0YSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0fSk7XG5cblx0XHR9KTtcblx0XHRcblx0fVxuXG5cdGZ1bmN0aW9uIGNoZWNrTG9naW5TdGF0dXMoKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XG5cdFx0XHRhcHAub25BdXRoKGZ1bmN0aW9uKGF1dGhEYXRhKSB7XG5cdFx0XHRcdGlmIChhdXRoRGF0YSkge1xuXHRcdFx0XHQgICAgJGxvZy5pbmZvKFwiVXNlciBcIiArIGF1dGhEYXRhLnVpZCArIFwiIGlzIGxvZ2dlZCBpbiB3aXRoIFwiICsgYXV0aERhdGEucHJvdmlkZXIpO1xuXHRcdFx0XHQgICAgcmVzb2x2ZSh0cnVlKTtcblx0XHRcdFx0ICB9IGVsc2Uge1xuXHRcdFx0XHQgICAgJGxvZy5pbmZvKFwiVXNlciBpcyBsb2dnZWQgb3V0XCIpO1xuXHRcdFx0XHQgICAgcmVzb2x2ZShmYWxzZSk7XG5cdFx0XHRcdCAgfVxuXHRcdFx0fSk7XG5cblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGxvZ1VzZXJPdXQoKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXG5cdFx0JGxvZy5pbmZvKCdsb2dnaW5nIHVzZXIgb3V0Jyk7XG5cdFx0YXBwLnVuYXV0aCgpO1xuXHR9XG5cblx0ZnVuY3Rpb24gdXBsb2FkVXNlckRhdGEoYWxsVXNlckRhdGEpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIHVpZCA9IGFsbFVzZXJEYXRhLnVpZDtcblx0XHR2YXIgcmVtb3RlVXNlciA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpO1xuXG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL3RoZSBhY3R1YWwgY2FsbFxuXHRcdFx0cmVtb3RlVXNlci51cGRhdGUoYWxsVXNlckRhdGEsIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoJ1RoZXJlIHdhcyBhIHByb2JsZW0gdXBkYXRpbmcgdGhhdCByZWNvcmQ6ICcgKyBlcnJvcik7XG5cdFx0XHRcdGVsc2UgcmVzb2x2ZSgnYWxsIHVzZXIgZGF0YSB1cGxvYWRlZCBzdWNjZXNzZnVsbHknKTtcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cdFx0XG5cdH1cblxuXHRmdW5jdGlvbiB1cGxvYWRVc2VyQmlvKGN1cnJlbnRVc2VyQmlvKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciB1aWQgPSAoY3VycmVudFVzZXJCaW8udWlkKS50b1N0cmluZygpO1xuXHRcdHZhciByZW1vdGVVc2VyQmlvID0gYXBwLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2JpbycpO1xuXG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHRcdC8vY2FsbCB0byB0aGUgZGJcblx0XHRcdHJlbW90ZVVzZXJCaW8udXBkYXRlKGN1cnJlbnRVc2VyQmlvLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KCdUaGVyZSB3YXMgYSBwcm9ibGVtIHVwZGF0aW5nIHRoYXQgcmVjb3JkOiAnICsgZXJyb3IpO1xuXHRcdFx0XHRlbHNlIHJlc29sdmUoJ2FsbCB1c2VyIGJpbyBkYXRhIHVwbG9hZGVkIHN1Y2Nlc3NmdWxseScpO1xuXHRcdFx0fSlcblxuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gZG93bmxvYWRVc2VyRGF0YSgpIHtcblxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0VXNlckJpbyh1aWQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIHVzZXJCaW8gPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnYmlvJyk7XG5cblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vdGhlIGFjdHVhbCBjYWxsXG5cdFx0XHR1c2VyQmlvLm9uY2UoJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdFx0Ly93aGVuIHRoZSBjYWxsIGlzIHN1Y2Nlc3NmdWwgcmV0dXJuIHRoZSBkYXRhXG5cdFx0XHRcdHJlc29sdmUoc25hcHNob3QudmFsKCkpO1xuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0XHR9IFxuXHRcdFx0fSk7XG5cblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNyZWF0ZUhvc3RlZEV2ZW50KHVpZCwgbmV3RXZlbnQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIGV2ZW50SUQgPSBuZXdFdmVudC5pZDtcblx0XHR2YXIgbmV3SG9zdGVkRXZlbnQgPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ2hvc3RpbmcnKS5jaGlsZChldmVudElEKTtcblxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XG5cdFx0XHQvL2NhbGwgdG8gZmlyZWJhc2Vcblx0XHRcdG5ld0hvc3RlZEV2ZW50LnNldChuZXdFdmVudCwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdCgnVGhlcmUgd2FzIGFuIGVycm9yOiAnICsgZXJyb3IpO1xuXHRcdFx0XHRlbHNlIHJlc29sdmUoJ05ldyBldmVudCBzYXZlZCB0byBEQiBzdWNjZXNzZnVsbHknKTtcblx0XHRcdH0pXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGdldFVzZXJFdmVudHModWlkKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciB1c2VyRXZlbnRzID0gYXBwLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpO1xuXHRcdFxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly90aGUgYWN0dWFsIGNhbGxcblx0XHRcdHVzZXJFdmVudHMub3JkZXJCeUtleSgpLm9uY2UoJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdFx0dmFyIHVzZXJQcm9maWxlID0gc25hcHNob3QudmFsKCk7XG5cblx0XHRcdFx0Ly93aGVuIHRoZSBjYWxsIGlzIHN1Y2Nlc3NmdWwgcmV0dXJuIHRoZSBkYXRhXG5cdFx0XHRcdHZhciBldmVudHNQYWNrYWdlID0ge1xuXHRcdFx0XHRcdGhvc3Rpbmc6IHVzZXJQcm9maWxlLmhvc3RpbmcsXG5cdFx0XHRcdFx0YXR0ZW5kaW5nOiB1c2VyUHJvZmlsZS5hdHRlbmRpbmcsXG5cdFx0XHRcdFx0cGVuZGluZzogdXNlclByb2ZpbGUucGVuZGluZyxcblx0XHRcdFx0XHRjb21wbGV0ZWQ6IHVzZXJQcm9maWxlLmNvbXBsZXRlZFxuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdHJlc29sdmUoZXZlbnRzUGFja2FnZSk7XG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHRcdH0gXG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0QUhvc3RlZEV2ZW50KHVpZCwgZXZlbnRJZCkge1xuXG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciBob3N0ZWRFdmVudCA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgnaG9zdGluZycpLmNoaWxkKGV2ZW50SWQpO1xuXG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL3RoZSBhY3R1YWwgY2FsbFxuXHRcdFx0aG9zdGVkRXZlbnQub25jZSgndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0XHR2YXIgc2VsZWN0RXZlbnQgPSBzbmFwc2hvdC52YWwoKTtcblxuXHRcdFx0XHRyZXNvbHZlKHNlbGVjdEV2ZW50KTtcblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoZXJyb3IpO1xuXHRcdFx0fSlcblx0XHR9KVxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0QW5JbnZpdGVkRXZlbnQoaG9zdElkLCB1aWQsIGV2ZW50SWQpIHt9XG5cblx0ZnVuY3Rpb24gZGVsZXRlVXBkYXRlRmllbGQoY2F0ZWdvcnksIHVpZCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgY2F0UmVtb3ZpbmdGcm9tID0gYXBwLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKGNhdGVnb3J5KS5jaGlsZCgndXBkYXRlZCcpO1xuXG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRjYXRSZW1vdmluZ0Zyb20uc2V0KG51bGwsIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoJ1RoZXJlIHdhcyBhbiBlcnJvciBkZWxldGluZyB1cGRhdGUgZmllbGQ6ICcgKyBlcnJvcik7XG5cdFx0XHRcdGVsc2UgcmVzb2x2ZSgnRGVsZXRlZCB1cGRhdGUgc3VjY2Vzc2Z1bGx5Jyk7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiB0aGVyZVdhc0FuVXBkYXRlRmllbGQoY2F0ZWdvcnksIHVpZCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgY2F0VG9DaGVjayA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZChjYXRlZ29yeSk7XG5cblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vY2FsbCB0aGUgZGJcblx0XHRcdGNhdFRvQ2hlY2sub25jZSgndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0XHQvL3NhdmUgdGhlIHJlc3BvbnNlXG5cdFx0XHRcdHZhciBjdXJyZW50Q2F0TW9kZWwgPSBzbmFwc2hvdC52YWwoKTtcblx0XHRcdFx0Ly9zaG93IHdoYXQgd2FzIGZvdW5kXG5cdFx0XHRcdC8vbG9vayBmb3IgdGhlIHVwZGF0ZSBmaWVsZFxuXHRcdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChjdXJyZW50Q2F0TW9kZWxbJ3VwZGF0ZWQnXSkpIHJlc29sdmUodHJ1ZSk7XG5cdFx0XHRcdGVsc2UgcmVqZWN0KGZhbHNlKTtcblxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdChlcnJvcik7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXHR9XG5cblx0Ly9yZXR1cm4gdGhlIG9iamVjdFxuXHRyZXR1cm4gYWxsQmFja2VuZFNlcnZpY2VzO1xufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmZhY3RvcnkoJ3RyYWZmaWNWYWxldCcsIHRyYWZmaWNWYWxldCk7XG5cbnRyYWZmaWNWYWxldC4kaW5qZWN0ID0gWyckbG9nJywgJyRsb2NhdGlvbiddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHRyYWZmaWNWYWxldCgkbG9nLCAkbG9jYXRpb24pIHtcblx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHR2YXIgYWxsVHJhZmZpY0NvbnRyb2xzID0ge1xuXHRcdHJlZGlyZWN0VG86IHJlZGlyZWN0VG8sXG5cdFx0ZXZlbnRSb3V0ZTogZXZlbnRSb3V0ZVxuXHR9O1xuXG5cdGZ1bmN0aW9uIHJlZGlyZWN0VG8ocGF0aCwgcGFyYW0xLCBwYXJhbTIsIHBhcmFtMykge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHBhcmFtMSkpIHtcblx0XHRcdHBhdGggPSBwYXRoICsgJy8nICsgcGFyYW0xO1xuXG5cdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChwYXJhbTIpKSB7XG5cdFx0XHRcdC8vZ28gdG8gcGF0aCB3aXRoIDIgcGFyYW1zXG5cdFx0XHRcdHBhdGggPSBwYXRoICsgJy8nICsgcGFyYW0yO1xuXG5cdFx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHBhcmFtMykpIHtcblx0XHRcdFx0XHRwYXRoID0gcGF0aCArICcvJyArIHBhcmFtMztcblxuXHRcdFx0XHRcdCRsb2cuaW5mbygncmVkaXJlY3Rpbmcgbm93IHRvICcgKyBwYXRoKTtcblx0XHRcdFx0XHQkbG9jYXRpb24ucGF0aChwYXRoKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdCRsb2cuaW5mbygncmVkaXJlY3Rpbmcgbm93IHRvICcgKyBwYXRoKTtcblx0XHRcdFx0JGxvY2F0aW9uLnBhdGgocGF0aCk7XG5cdFx0XHR9XG5cdFx0XHQvL2dvIHdpdGggMSBwYXJhbVxuXHRcdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyBub3cgdG8gJyArIHBhdGgpO1xuXHRcdFx0JGxvY2F0aW9uLnBhdGgocGF0aCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vanVzdCBnbyB0byBwYXRoXG5cdFx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIG5vdyB0byAnICsgcGF0aCk7XG5cdFx0XHQkbG9jYXRpb24ucGF0aChwYXRoKTtcblx0XHR9XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGV2ZW50Um91dGUoZXZlbnRJZCwgaG9zdElkLCB1c2VySWQsIHNlY3Rpb24pIHtcblx0XHQkbG9nLmluZm8oJ1RyYWZmaWMgdmFsZXQgYWNjZXNzZWQnKTtcblx0XHQkbG9nLmluZm8oJ2V2ZW50SWQ6ICcgKyBldmVudElkKTtcblx0XHQkbG9nLmluZm8oJ2hvc3RJZDogJyArIGhvc3RJZCk7XG5cdFx0JGxvZy5pbmZvKCd1c2VySWQ6ICcgKyB1c2VySWQpO1xuXG5cdFx0Ly9pZiB0aGVyZSBpc24ndCBhIHNlY3Rpb24gc2V0IHRvIGRlZmF1bHRcblx0XHRpZihhbmd1bGFyLmlzVW5kZWZpbmVkKHNlY3Rpb24pKSBzZWN0aW9uID0gMTtcblxuXHRcdC8vaWYgdGhlIGhvc3RJZCBhbmQgdXNlcklkIG1hdGNoLCBsYXVuY2ggaG9zdCB2aWV3XG5cdFx0aWYoaG9zdElkID09PSB1c2VySWQpIHsgXG5cdFx0XHR2YXIgcGF0aCA9ICcvZXZlbnQvaG9zdC8nICsgZXZlbnRJZCArICcvJyArIHVzZXJJZCArICcvJysgc2VjdGlvbjtcblx0XHRcdCRsb2cuaW5mbyhwYXRoKTtcblx0XHRcdC8vcmVkaXJlY3Rcblx0XHRcdCRsb2NhdGlvbi5wYXRoKHBhdGgpO1xuXHRcdH1cblx0XHQvL2lmIHRoZSBob3N0SWQgYW5kIHVzZXJJZCBET04nVCBtYXRjaCwgbGF1bmNoIGd1ZXN0IHZpZXdcblx0XHRlbHNlIHtcblx0XHRcdHZhciBwYXRoID0gJy9ldmVudC9ndWVzdC8nICsgZXZlbnRJZCArICcvJyArIHVzZXJJZCArICcvJyArIGhvc3RJZDtcblx0XHRcdCRsb2cuaW5mbyhwYXRoKTtcblx0XHRcdC8vcmVkaXJlY3Rcblx0XHRcdCRsb2NhdGlvbi5wYXRoKHBhdGgpO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBhbGxUcmFmZmljQ29udHJvbHM7XG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuZmFjdG9yeSgndXNlckRhdGEnLCB1c2VyRGF0YSk7XG5cbnVzZXJEYXRhLiRpbmplY3QgPSBbJyRsb2cnLCAnJHEnLCAnYmFja2VuZFNlcnZpY2VzJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gdXNlckRhdGEoJGxvZywgJHEsIGJhY2tlbmRTZXJ2aWNlcykge1xuXHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdHZhciBjdXJyZW50VXNlciA9IHtcblx0XHRiaW86IHsgXG5cdFx0XHR1aWQ6ICcnLFxuXHRcdFx0bmFtZTogJycsXG5cdFx0XHRlbWFpbDogJycsXG5cdFx0XHRjb21wYW55OiAnJyxcblx0XHRcdHRpdGxlOiAnJyxcblx0XHRcdGRvYjogMFxuXHRcdH0sXG5cdFx0ZXZlbnRzOiB7XG5cdFx0XHRob3N0aW5nOiB7fSxcblx0XHRcdHBlbmRpbmc6IHt9LFxuXHRcdFx0YXR0ZW5kaW5nOiB7fSxcblx0XHRcdGNvbXBsZXRlZDoge31cblx0XHR9XG5cdH07XG5cblx0dmFyIGFsbFVzZXJEYXRhID0ge1xuXHRcdGJpb1ByaW1hcmllc0FyZUNvbXBsZXRlTG9jYWxseTogYmlvUHJpbWFyaWVzQXJlQ29tcGxldGVMb2NhbGx5LFx0XHQvL21vZGFsIGFuYWx5c2lzXG5cdFx0ZXZlbnRFeGlzdHNMb2NhbGx5OiBldmVudEV4aXN0c0xvY2FsbHksXG5cblx0XHRjbGVhbkV2ZW50czogY2xlYW5FdmVudHMsXHRcdC8vbW9kZWwgbWFpbnRhaW5hbmNlXG5cblx0XHRnZXRVSURMb2NhbGx5OiBnZXRVSURMb2NhbGx5LFx0Ly9nZXR0ZXIgTWV0aG9kc1xuXHRcdGdldE5hbWVMb2NhbGx5OiBnZXROYW1lTG9jYWxseSxcblx0XHRnZXRFbWFpbExvY2FsbHk6IGdldEVtYWlsTG9jYWxseSxcblx0XHRnZXRDb21wYW55TG9jYWxseTogZ2V0Q29tcGFueUxvY2FsbHksXG5cdFx0Z2V0VGl0bGVMb2NhbGx5OiBnZXRUaXRsZUxvY2FsbHksXG5cdFx0Z2V0RE9CTG9jYWxseTogZ2V0RE9CTG9jYWxseSxcblx0XHRnZXRGdWxsQmlvTG9jYWxseTogZ2V0RnVsbEJpb0xvY2FsbHksXG5cdFx0Z2V0T25lVXNlckV2ZW50TG9jYWxseTogZ2V0T25lVXNlckV2ZW50TG9jYWxseSxcblx0XHRnZXRVc2VyRXZlbnRzTG9jYWxseTogZ2V0VXNlckV2ZW50c0xvY2FsbHksXG5cdFx0Z2V0QWxsVXNlckV2ZW50c0xvY2FsbHk6IGdldEFsbFVzZXJFdmVudHNMb2NhbGx5LFxuXG5cdFx0c2V0VUlETG9jYWxseTogc2V0VUlETG9jYWxseSxcdC8vc2V0dGVyIE1ldGhvZHNcblx0XHRzZXROYW1lTG9jYWxseTogc2V0TmFtZUxvY2FsbHksXG5cdFx0c2V0RW1haWxMb2NhbGx5OiBzZXRFbWFpbExvY2FsbHksXG5cdFx0c2V0Q29tcGFueUxvY2FsbHk6IHNldENvbXBhbnlMb2NhbGx5LFxuXHRcdHNldFRpdGxlTG9jYWxseTogc2V0VGl0bGVMb2NhbGx5LFxuXHRcdHNldERPQkxvY2FsbHk6IHNldERPQkxvY2FsbHksXG5cdFx0c2V0UHJpbWFyaWVzTG9jYWxseTogc2V0UHJpbWFyaWVzTG9jYWxseSxcblx0XHR1cGRhdGVVc2VyRXZlbnRzTG9jYWxseTogdXBkYXRlVXNlckV2ZW50c0xvY2FsbHksXG5cdFx0dXBkYXRlQWxsVXNlckV2ZW50c0xvY2FsbHk6IHVwZGF0ZUFsbFVzZXJFdmVudHNMb2NhbGx5LFxuXHRcdHVwZGF0ZUJpb0xvY2FsbHk6IHVwZGF0ZUJpb0xvY2FsbHksXG5cblx0XHRyZW1vdmVVc2VyRXZlbnRzTG9jYWxseTogcmVtb3ZlVXNlckV2ZW50c0xvY2FsbHksIC8vcmVtb3ZlIGRhdGFcblx0XHRcblx0XHRnZXRGdWxsUmVtb3RlREJmb3JMb2NhbDogZ2V0RnVsbFJlbW90ZURCZm9yTG9jYWwsXHQvL2xvY2FsLXJlbW90ZSBpbnRlcmFjaW9uc1xuXHRcdGdldFJlbW90ZUJpb0ZvckxvY2FsOiBnZXRSZW1vdGVCaW9Gb3JMb2NhbCxcdFx0XHRcblx0XHRnZXRSZW1vdGVFdmVudHNGb3JMb2NhbDogZ2V0UmVtb3RlRXZlbnRzRm9yTG9jYWwsXG5cdFx0Z2V0T25lUmVtb3RlRXZlbnRGb3JMb2NhbDogZ2V0T25lUmVtb3RlRXZlbnRGb3JMb2NhbCxcblx0XHRzZXRGdWxsUmVtb3RlREJmcm9tTG9jYWw6IHNldEZ1bGxSZW1vdGVEQmZyb21Mb2NhbCxcblx0XHRzZXRSZW1vdGVCaW9Gcm9tTG9jYWw6IHNldFJlbW90ZUJpb0Zyb21Mb2NhbCxcblx0XHRzZXRSZW1vdGVFdmVudHNGcm9tTG9jYWw6IHNldFJlbW90ZUV2ZW50c0Zyb21Mb2NhbCxcblx0XHRjbGVhbkRCRXZlbnRzQ2F0ZWdvcnk6IGNsZWFuREJFdmVudHNDYXRlZ29yeSxcblxuXHRcdGxvYWRCaW86IGxvYWRCaW8sXHQvL2V4dGVybmFsIG1ldGhvZHNcblx0XHRsb2FkRXZlbnRzUHJvZ3Jlc3NpdmVseTogbG9hZEV2ZW50c1Byb2dyZXNzaXZlbHksXG5cdFx0bG9hZEFuRXZlbnRQcm9ncmVzc2l2ZWx5OiBsb2FkQW5FdmVudFByb2dyZXNzaXZlbHksXG5cdFx0Y3JlYXRlTmV3RXZlbnQ6IGNyZWF0ZU5ld0V2ZW50XG5cdH1cblxuXHQvL2FuYWx5c2lzIG1ldGhvZHNcblx0ZnVuY3Rpb24gYmlvUHJpbWFyaWVzQXJlQ29tcGxldGVMb2NhbGx5KCkge1xuXHRcdGlmKCBjdXJyZW50VXNlci5iaW8udWlkICE9PSAnJyAmJlxuXHRcdFx0Y3VycmVudFVzZXIuYmlvLm5hbWUgIT09ICcnICYmXG5cdFx0XHRjdXJyZW50VXNlci5iaW8uZW1haWwgIT09ICcnXG5cdFx0XHQpXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRlbHNlIHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGZ1bmN0aW9uIGV2ZW50RXhpc3RzTG9jYWxseSh0eXBlLCBldmVudElkKSB7XG5cdFx0JGxvZy5pbmZvKCdjaGVja2luZyBpZiB0aGUgZXZlbnQgZXhpdHMnKTtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChjdXJyZW50VXNlci5ldmVudHNbdHlwZV1bZXZlbnRJZF0pKSByZXR1cm4gdHJ1ZTtcblx0XHRlbHNlIHJldHVybiBmYWxzZTtcblx0fVxuXG5cdC8vbW9kZWwgbWFpbnRhaW5hbmNlXG5cdGZ1bmN0aW9uIGNsZWFuRXZlbnRzKHR5cGUpIHtcblx0XHQvL2l0ZXJhdGUgdGhyb3VnaCBvYmplY3RzIGluIG9iamVjdFxuXHRcdE9iamVjdC5rZXlzKGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXSkuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcblx0XHRcdC8vaWYgYW55IGFyZSBub24tb2JqZWN0cywgZGVsZXRlIHRoZW1cblx0XHRcdGlmKCFhbmd1bGFyLmlzT2JqZWN0KGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXVtrZXldKSkge1xuXHRcdFx0XHRkZWxldGUgY3VycmVudFVzZXIuZXZlbnRzW3R5cGVdW2tleV07XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHQvL2dldHRlciBtZXRob2RzXG5cdGZ1bmN0aW9uIGdldFVJRExvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmJpby51aWQ7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXROYW1lTG9jYWxseSgpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuYmlvLm5hbWU7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRFbWFpbExvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmJpby5lbWFpbDtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldENvbXBhbnlMb2NhbGx5KCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5iaW8uY29tcGFueTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldFRpdGxlTG9jYWxseSgpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuYmlvLnRpdGxlO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXRET0JMb2NhbGx5KCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5iaW8uZG9iO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0RnVsbEJpb0xvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHVpZDogY3VycmVudFVzZXIuYmlvLnVpZCxcblx0XHRcdG5hbWU6IGN1cnJlbnRVc2VyLmJpby5uYW1lLFxuXHRcdFx0ZW1haWw6IGN1cnJlbnRVc2VyLmJpby5lbWFpbCxcblx0XHRcdGNvbXBhbnk6IGN1cnJlbnRVc2VyLmJpby5jb21wYW55LFxuXHRcdFx0dGl0bGU6IGN1cnJlbnRVc2VyLmJpby50aXRsZSxcblx0XHRcdGRvYjogY3VycmVudFVzZXIuYmlvLmRvYlxuXHRcdH07XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRPbmVVc2VyRXZlbnRMb2NhbGx5KHR5cGUsIGV2ZW50SWQpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuZXZlbnRzW3R5cGVdW2V2ZW50SURdO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0VXNlckV2ZW50c0xvY2FsbHkodHlwZSkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5ldmVudHNbdHlwZV07XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRBbGxVc2VyRXZlbnRzTG9jYWxseSgpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuZXZlbnRzO1xuXHR9XG5cblx0Ly9zZXR0ZXIgbWV0aG9kc1xuXHRmdW5jdGlvbiBzZXRVSURMb2NhbGx5KHVpZCkge1xuXHRcdGN1cnJlbnRVc2VyLmJpby51aWQgPSB1aWQ7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXROYW1lTG9jYWxseShuYW1lKSB7XG5cdFx0Y3VycmVudFVzZXIuYmlvLm5hbWUgPSBuYW1lO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0RW1haWxMb2NhbGx5KGVtYWlsKSB7XG5cdFx0Y3VycmVudFVzZXIuYmlvLmVtYWlsID0gZW1haWw7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXRDb21wYW55TG9jYWxseShjb21wYW55KSB7XG5cdFx0Y3VycmVudFVzZXIuYmlvLmNvbXBhbnkgPSBjb21wYW55O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzZXRUaXRsZUxvY2FsbHkodGl0bGUpIHtcblx0XHRjdXJyZW50VXNlci5iaW8udGl0bGUgPSB0aXRsZTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldERPQkxvY2FsbHkoZG9iKSB7XG5cdFx0Y3VycmVudFVzZXIuYmlvLmRvYiA9IGRvYjtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldFByaW1hcmllc0xvY2FsbHkoZW1haWwsIG5hbWUsIHVpZCkge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGVtYWlsKSkgc2V0RW1haWxMb2NhbGx5KGVtYWlsKTtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChuYW1lKSkgZ2V0TmFtZUxvY2FsbHkobmFtZSk7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodWlkKSkgc2V0VUlETG9jYWxseSh1aWQpO1xuXHR9XG5cblx0ZnVuY3Rpb24gdXBkYXRlVXNlckV2ZW50c0xvY2FsbHkodHlwZSwgZXZlbnQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGV2ZW50SUQgPSBldmVudC5pZDtcblxuXHRcdC8vY2hlY2sgaWYgdGhlIG1vZGVsIG5lZWRzIHRvIGJlIGNsZWFuZWRcblx0XHRjbGVhbkV2ZW50cyh0eXBlKTtcblx0XHQvL3RoZW4gbG9hZCB0aGUgbmV3IGV2ZW50XG5cdFx0Y3VycmVudFVzZXIuZXZlbnRzW3R5cGVdW2V2ZW50SURdID0gZXZlbnQ7XG5cdH1cblxuXHRmdW5jdGlvbiB1cGRhdGVBbGxVc2VyRXZlbnRzTG9jYWxseShhbGxVc2VyRXZlbnRzKSB7XG5cdFx0Y3VycmVudFVzZXIuZXZlbnRzID0gYWxsVXNlckV2ZW50cztcblx0fVxuXG5cdGZ1bmN0aW9uIHVwZGF0ZUJpb0xvY2FsbHkodXNlckJpbykge1xuXHRcdC8vdXBkYXRlIGxvY2FsIHZhbHVlc1xuXHRcdHNldE5hbWVMb2NhbGx5KHVzZXJCaW8ubmFtZSk7XG5cdFx0c2V0RW1haWxMb2NhbGx5KHVzZXJCaW8uZW1haWwpO1xuXHRcdHNldENvbXBhbnlMb2NhbGx5KHVzZXJCaW8uY29tcGFueSk7XG5cdFx0c2V0VGl0bGVMb2NhbGx5KHVzZXJCaW8udGl0bGUpO1xuXHRcdHNldERPQkxvY2FsbHkodXNlckJpby5kb2IpO1xuXHRcdC8vc2F2ZSB0byBkYlxuXHRcdHNldFJlbW90ZUJpb0Zyb21Mb2NhbCgpO1xuXHR9XG5cblx0Ly9kZWxldGUgTWV0aG9kc1xuXHRmdW5jdGlvbiByZW1vdmVVc2VyRXZlbnRzTG9jYWxseSh0eXBlLCBldmVudCkge1xuXHRcdC8vZG9lcyB0aGlzIHdvcms/XG5cdFx0ZGVsZXRlIGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXVtldmVudC5pZF07XG5cdH1cblxuXHQvL3JlbW90ZS1sb2NhbCBpbnRlcmFjdGlvbiBNZXRob2RzXG5cdGZ1bmN0aW9uIGdldEZ1bGxSZW1vdGVEQmZvckxvY2FsKCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0ZGIuZG93bmxvYWRVc2VyRGF0YSgpXG5cdFx0LnRoZW4oZnVuY3Rpb24ocmVtb3RlVXNlckRhdGEpIHtcblx0XHRcdGN1cnJlbnRVc2VyID0gcmVtb3RlVXNlckRhdGE7XG5cdFx0fSlcblx0fVxuXG5cdGZ1bmN0aW9uIGdldFJlbW90ZUJpb0ZvckxvY2FsKHVpZCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXHRcdFx0XHRcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL2dvIG91dCB0byB0aGUgZGIgYmVmb3JlIHJlc29sdmluZ1xuXHRcdFx0ZGIuZ2V0VXNlckJpbyh1aWQpXG5cdFx0XHQudGhlbihmdW5jdGlvbih1c2VyQmlvKSB7XG5cblx0XHRcdFx0cmVzb2x2ZSh1c2VyQmlvKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0cmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3IgcmVhZGluZyB0aGUgdXNlciBiaW86ICcgKyBlcnJvcik7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXHRcdFxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0UmVtb3RlRXZlbnRzRm9yTG9jYWwoKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cdFx0XHRcdFxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9nbyBvdXQgdG8gdGhlIGRiIGJlZm9yZSByZXNvbHZpbmdcblx0XHRcdGRiLmdldFVzZXJFdmVudHMoZ2V0VUlETG9jYWxseSgpKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24ob2J0YWluZWRVc2VyRXZlbnRzKSB7XG5cblx0XHRcdFx0Ly9zYXZlIHRoZSByZXN1bHRzIHRvIHRoZSBsb2NhbCBkYXRhYnNlXG5cdFx0XHRcdE9iamVjdC5rZXlzKG9idGFpbmVkVXNlckV2ZW50cykuZm9yRWFjaChmdW5jdGlvbihldmVudFR5cGUpIHtcblx0XHRcdFx0XHQvL3dpdGhpbiBlYWNoIGV2ZW50IHR5cGUgaXRlcmF0ZSB0aHJvdWdoIHRoZSBhY3R1YWwgZXZlbnRzXG5cdFx0XHRcdFx0T2JqZWN0LmtleXMob2J0YWluZWRVc2VyRXZlbnRzW2V2ZW50VHlwZV0pLmZvckVhY2goZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRcdFx0XHRcdC8vb25jZSB3ZSBzZWUgdGhlIGV2ZW50cywgc2F2ZSB0aGVtIHRvIHRoZSBsb2NhbCBtb2RlbFxuXG5cdFx0XHRcdFx0XHR1cGRhdGVVc2VyRXZlbnRzTG9jYWxseShldmVudFR5cGUsIG9idGFpbmVkVXNlckV2ZW50c1tldmVudFR5cGVdW2V2ZW50XSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly9yZXR1cm4gdGhlIHJlc3VsdHMgdG8gdGhlIHJlcXVlc3Rpbmcgb2JqZWN0XG5cdFx0XHRcdHJlc29sdmUob2J0YWluZWRVc2VyRXZlbnRzKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0cmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3IgcmVhZGluZyB0aGUgdXNlciBldmVudHM6ICcgKyBlcnJvcik7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0T25lUmVtb3RlRXZlbnRGb3JMb2NhbChldmVudElkKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcblx0XHRcdC8vZ29pbmcgdG8gYmFja2VuZCBzZXJ2aWNlc1xuXHRcdFx0ZGIuZ2V0QUhvc3RlZEV2ZW50KGdldFVJRExvY2FsbHkoKSwgZXZlbnRJZClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKG9idGFpbmVkRXZlbnQpIHtcblxuXHRcdFx0XHQvL3NhdmUgdGhlIHJlc3VsdCB0byB0aGUgbG9jYWwgbW9kZWxcblx0XHRcdFx0JGxvZy5pbmZvKG9idGFpbmVkRXZlbnQpO1xuXHRcdFx0XHQvL3JldHVybiB0aGUgcmVzdWx0IHRvIHRoZSByZXF1ZXN0aW5nIG9iamVjdFxuXHRcdFx0XHRyZXNvbHZlKG9idGFpbmVkRXZlbnQpO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRyZWplY3QoJ1RoZXJlIHdhcyBhbiBlcnJvciByZWFkaW5nIHRoZSB1c2VyIGV2ZW50OiAnICsgZXJyb3IpO1xuXHRcdFx0fSlcblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldEZ1bGxSZW1vdGVEQmZyb21Mb2NhbCgpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdGRiLnVwbG9hZFVzZXJEYXRhKGN1cnJlbnRVc2VyKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldFJlbW90ZUJpb0Zyb21Mb2NhbCgpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdGRiLnVwbG9hZFVzZXJCaW8oY3VycmVudFVzZXIuYmlvKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldFJlbW90ZUV2ZW50c0Zyb21Mb2NhbCgpIHt9XG5cblx0ZnVuY3Rpb24gY2xlYW5EQkV2ZW50c0NhdGVnb3J5KGNhdGVnb3J5KSB7XG5cdFx0Ly9kZWNsYXIgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0Ly9yZW1vdmUgJ3VwZGF0ZWQnIG9iamVjdCBpZiBuZWVkIGJlXG5cdFx0Ly9kYiBjYWxsIHNvIHJldHVybiBhIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL2NoZWNrIGZvciBvYmplY3Rcblx0XHRcdGRiLnRoZXJlV2FzQW5VcGRhdGVGaWVsZChjYXRlZ29yeSwgZ2V0VUlETG9jYWxseSgpKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24oYWZmaXJtYXRpdmVSZXNwb25zZSkge1xuXHRcdFx0XHQvL2lmIHRoZXJlIHdhcyBhbiB1cGRhdGUgZmllbGQsIGRlbGV0ZSBpdFxuXHRcdFx0XHRkYi5kZWxldGVVcGRhdGVGaWVsZChjYXRlZ29yeSwgZ2V0VUlETG9jYWxseSgpKVxuXHRcdFx0XHQudGhlbihmdW5jdGlvbihhZmZpcm1hdGl2ZVJlc3BvbnNlKSB7ICRsb2cuaW5mbyhhZmZpcm1hdGl2ZVJlc3BvbnNlKTsgfSApXG5cdFx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvclJlc3BvbnNlKSB7ICRsb2cuaW5mbyhlcnJvclJlc3BvbnNlKTsgfSApXG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yUmVzcG9uc2UpIHtcblx0XHRcdFx0JGxvZy5pbmZvKGVycm9yUmVzcG9uc2UpXG5cdFx0XHR9KVxuXG5cdFx0fSk7XG5cdFx0Ly9pZiBpdCBpcyB0aGVyZSwgcmVtb3ZlIGl0XG5cdH1cblxuXHRmdW5jdGlvbiBsb2FkQmlvKHVpZCkge1xuXG5cdFx0Ly9taWdodCBuZWVkIHRvIGdvIG91dCB0byB0aGUgZGIgc28gcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9jaGVjayBmb3IgYmlvIGxvY2FsbHkgZmlyc3Rcblx0XHRcdGlmKGJpb1ByaW1hcmllc0FyZUNvbXBsZXRlTG9jYWxseSgpKSB7XG5cdFx0XHRcdFxuXHRcdFx0XHQvL3Bhc3MgaXQgYmFjayBhcyBzdWNjZXNzXG5cdFx0XHRcdHJlc29sdmUoZ2V0RnVsbEJpb0xvY2FsbHkoKSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2lmIHRoZXkncmUgbm90IGNvbXBsZXRlIGxvY2FsbHksIGNoZWNrIHRoZSBzZXJ2ZXJcblx0XHRcdFx0Z2V0UmVtb3RlQmlvRm9yTG9jYWwodWlkKVxuXHRcdFx0XHQudGhlbihmdW5jdGlvbihiaW9Gcm9tUmVtb3RlREIpIHtcblx0XHRcdFx0XHRyZXNvbHZlKGJpb0Zyb21SZW1vdGVEQik7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHRcdH0pXG5cdFx0XHR9XG5cblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gbG9hZEFuRXZlbnRQcm9ncmVzc2l2ZWx5KHVpZCwgZXZlbnRJZCkge1xuXHRcdC8vdXBkYXRlIHVpZCBpZiBuZWVkIGJlXG5cdFx0c2V0VUlETG9jYWxseSh1aWQpO1xuXG5cdFx0Ly9nb2luZyBvdXQgdGhlIHRoZSBkYiBzbyByZXR1cm4gYSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHQvL3JlYWNoIG91dCB0byBkYlxuXHRcdFx0Z2V0T25lUmVtb3RlRXZlbnRGb3JMb2NhbChldmVudElkKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24ob2J0YWluZWRVc2VyRXZlbnQpIHtcblx0XHRcdFx0Ly93aGVuIHRoZSBkYiByZXN1bHRzIGNvbWUgYmFjaywgcmV0dXJuIGl0XG5cdFx0XHRcdHJlc29sdmUob2J0YWluZWRVc2VyRXZlbnQpXG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKClcblxuXHRcdFx0Ly9maXJzdCByZXR1cm4gd2hhdGV2ZXIgZXZlbnQgaW5mbyBpcyBzdG9yZWQgbG9jYWxseVxuXHRcdFx0Ly9jaGVjayBpZiB0aGUgZXZlbnQgaXMgYXZhaWxhYmxlIGxvY2FsbHlcblx0XHRcdGlmKGV2ZW50RXhpc3RzTG9jYWxseSgnaG9zdGluZycsIGV2ZW50SWQpKSByZXNvbHZlKGdldE9uZVVzZXJFdmVudExvY2FsbHkoJ2hvc3RpbmcnLCBldmVudElkKSk7XG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGxvYWRFdmVudHNQcm9ncmVzc2l2ZWx5KHVpZCkge1xuXHRcdHZhciBldmVudFR5cGVzID0gWydhdHRlbmRpbmcnLCAncGVuZGluZycsICdob3N0aW5nJywgJ2NvbXBsZXRlZCddO1xuXHRcdHZhciBhbGxFdmVudHMgPSB7fTtcblxuXHRcdC8vd2lsbCBnbyBvdXQgdG8gdGhlIGRiIHNvIHJldHVybiBhIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHRcdGdldFJlbW90ZUV2ZW50c0ZvckxvY2FsKClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKG9idGFpbmVkVXNlckV2ZW50cykge1xuXHRcdFx0XHQvL3doZW4gdGhlIGRiIHJlc3VsdHMgY29tZSBiYWNrLCByZXR1cm4gdGhvc2Vcblx0XHRcdFx0cmVzb2x2ZShvYnRhaW5lZFVzZXJFdmVudHMpO1xuXHRcdFx0fSlcblxuXHRcdFx0Ly9idWlsZCB0aGUgbG9jYWwgbW9kZWxcblx0XHRcdGFsbEV2ZW50cyA9IGdldFVzZXJFdmVudHNMb2NhbGx5KHR5cGUpO1xuXG5cdFx0XHQvL2ZpcnN0IHJldHVybiB3aGF0ZXZlciBldmVudCBpbmZvIGlzIHN0b3JlZCBsb2NhbGx5XG5cdFx0XHRyZXNvbHZlKGFsbEV2ZW50cyk7XG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGNyZWF0ZU5ld0V2ZW50KGV2ZW50SUQpIHtcblx0XHQvL2RlY2xhciBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cdFx0dmFyIG5ld0V2ZW50ID0ge307XG5cblx0XHQvL2ZpcnN0IGNyZWF0ZSB0aGUgb2JqZWN0XG5cdFx0bmV3RXZlbnQgPSB7XG5cdFx0XHRpZDogZXZlbnRJRCxcblx0XHRcdG5hbWU6ICcnLFxuXHRcdFx0dHlwZTogJycsXG5cdFx0XHRob3N0OiB7XG5cdFx0XHRcdG5hbWU6IGN1cnJlbnRVc2VyLmJpby5uYW1lLFxuXHRcdFx0XHR1aWQ6IGN1cnJlbnRVc2VyLmJpby51aWRcblx0XHRcdH0sXG5cdFx0XHRtZXNzYWdlOiAnJyxcblx0XHRcdGV2ZW50VGltZXM6IHtcblx0XHRcdFx0c3RhcnQ6IDAsXG5cdFx0XHRcdGVuZDogMFxuXHRcdFx0fSxcblx0XHRcdGFkZHJlc3M6IHtcblx0XHRcdFx0c3RyZWV0MDE6ICcnLFxuXHRcdFx0XHRzdHJlZXQwMjogJycsXG5cdFx0XHRcdHN0cmVldDAzOiAnJyxcblx0XHRcdFx0Y2l0eTogJycsXG5cdFx0XHRcdHN0YXRlOiAnJyxcblx0XHRcdFx0emlwOiAwXG5cdFx0XHR9LFxuXHRcdFx0Z3Vlc3RMaXN0OiB7fVxuXHRcdH07XG5cblx0XHQvL3NhdmUgaXQgbG9jYWxseVxuXHRcdHVwZGF0ZVVzZXJFdmVudHNMb2NhbGx5KCdob3N0aW5nJywgbmV3RXZlbnQpO1xuXG5cdFx0Ly90aGVuIGNyZWF0ZSBpdCBvbiB0aGUgc2VydmVyXG5cdFx0Ly93aWxsIGdvIG91dCB0byB0aGUgZGIgc28gcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFxuXHRcdFx0Ly9tYW5hZ2UgdGhlIHByb21pc2UgcmVzcG9uc2VzXG5cdFx0XHRkYi5jcmVhdGVIb3N0ZWRFdmVudChnZXRVSURMb2NhbGx5KCksIG5ld0V2ZW50KVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24obWVzc2FnZSkge1xuXHRcdFx0XHRyZXNvbHZlKG1lc3NhZ2UpO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0fSlcblxuXHRcdH0pO1xuXG5cdH1cblx0XG5cdHJldHVybiBhbGxVc2VyRGF0YTtcbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5mYWN0b3J5KCd2YWxpZGF0aW9uJywgdmFsaWRhdGlvbik7XG5cbnZhbGlkYXRpb24uJGluamVjdCA9IFsnJGxvZyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHZhbGlkYXRpb24oJGxvZykge1xuXHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdHZhciBtaW5pbXVtTmFtZUxlbmd0aCA9IDM7XG5cdHZhciBtaW5pbXVtUGFzc0xlbmd0aCA9IDE2O1xuXHR2YXIgbWF4aW11bVBhc3NMZW5ndGggPSAxMDA7XG5cblx0dmFyIGFsbFZhbGlkYXRpb25zID0ge1xuXHRcdHJlcXVpcmVkOiByZXF1aXJlZCxcblx0XHRtaW5OYW1lTGVuZ3RoOiBtaW5OYW1lTGVuZ3RoLFxuXHRcdG1pblBhc3NMZW5ndGg6IG1pblBhc3NMZW5ndGgsXG5cdFx0bWF4UGFzc0xlbmd0aDogbWF4UGFzc0xlbmd0aCxcblx0XHRhdExlYXN0T25lU3ltYm9sOiBhdExlYXN0T25lU3ltYm9sLFxuXHRcdGF0TGVhc3RPbmVOdW1iZXI6IGF0TGVhc3RPbmVOdW1iZXIsXG5cdFx0YXRMZWFzdE9uZUxvd2VyY2FzZTogYXRMZWFzdE9uZUxvd2VyY2FzZSxcblx0XHRhdExlYXN0T25lVXBwZXJjYXNlOiBhdExlYXN0T25lVXBwZXJjYXNlLFxuXHRcdGlsbGVnYWxDaGFyYWN0ZXI6IGlsbGVnYWxDaGFyYWN0ZXIsXG5cdFx0ZW1haWw6IGVtYWlsLFxuXHRcdGRhdGVPZkJpcnRoOiBkYXRlT2ZCaXJ0aFxuXHR9O1xuXG5cdGZ1bmN0aW9uIHJlcXVpcmVkKHZhbHVlKSB7XG5cdFx0aWYoYW5ndWxhci5pc1VuZGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdHJldHVybiAnVGhpcyBpcyBhIHJlcXVpcmVkIGZpZWxkJztcblx0XHR9IFxuXHR9XG5cblx0ZnVuY3Rpb24gbWluTmFtZUxlbmd0aCh2YWx1ZSkge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0aWYodmFsdWUubGVuZ3RoIDwgbWluaW11bU5hbWVMZW5ndGgpIHJldHVybiAoJ05hbWUgc2hvdWxkIGJlIGF0IGxlYXN0ICcgKyBtaW5pbXVtTmFtZUxlbmd0aCArICcgY2hhcmFjdGVycycpO1xuXHRcdH0gXG5cdH1cblxuXHRmdW5jdGlvbiBtaW5QYXNzTGVuZ3RoKHZhbHVlKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHRpZighKHZhbHVlLmxlbmd0aCA8IG1pbmltdW1QYXNzTGVuZ3RoKSkgcmV0dXJuIHRydWU7XG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGZ1bmN0aW9uIG1heFBhc3NMZW5ndGgodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdGlmKCEodmFsdWUubGVuZ3RoID4gbWF4aW11bVBhc3NMZW5ndGgpKSByZXR1cm4gdHJ1ZTtcblx0XHR9IFxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGZ1bmN0aW9uIGF0TGVhc3RPbmVTeW1ib2wodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdC8vIGJ1aWxkIHJlZ2V4XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbXFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqXVwiKTtcblxuXHRcdFx0Ly9jaGVjayBjb25zdHJhdGludFxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZhbHVlKSkge1xuXHRcdFx0XHQvL3N1Y2Nlc3M6IGF0IGxlYXN0IG9uZSBzcGVjaWFsIGNoYXJhY3RlciBmb3VuZFxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vZmFpbHVyZTogZGlkbid0IGZpbmQgYW55IHNwY2lhbCBjaGFyYWN0ZXJzXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRmdW5jdGlvbiBhdExlYXN0T25lTnVtYmVyKHZhbHVlKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHQvLyBidWlsZCByZWdleFxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiWzAtOV1cIiwgXCJcIik7XG5cblx0XHRcdC8vY2hlY2sgY29uc3RyYXRpbnRcblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2YWx1ZSkpIHtcblx0XHRcdFx0Ly9zdWNjZXNzOiBhdCBsZWFzdCBvbmUgc3BlY2lhbCBjaGFyYWN0ZXIgZm91bmRcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2ZhaWx1cmU6IGRpZG4ndCBmaW5kIGFueSBzcGNpYWwgY2hhcmFjdGVyc1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cbiAgICBmdW5jdGlvbiBhdExlYXN0T25lTG93ZXJjYXNlKHZhbHVlKSB7XG4gICAgXHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdC8vIGJ1aWxkIHJlZ2V4XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbYS16XVwiLCBcIlwiKTtcblxuXHRcdFx0Ly9jaGVjayBjb25zdHJhdGludFxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZhbHVlKSkge1xuXHRcdFx0XHQvL3N1Y2Nlc3M6IGF0IGxlYXN0IG9uZSBzcGVjaWFsIGNoYXJhY3RlciBmb3VuZFxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vZmFpbHVyZTogZGlkbid0IGZpbmQgYW55IHNwY2lhbCBjaGFyYWN0ZXJzXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYXRMZWFzdE9uZVVwcGVyY2FzZSh2YWx1ZSkge1xuICAgIFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHQvLyBidWlsZCByZWdleFxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW0EtWl1cIiwgXCJcIik7XG5cblx0XHRcdC8vY2hlY2sgY29uc3RyYXRpbnRcblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2YWx1ZSkpIHtcblx0XHRcdFx0Ly9zdWNjZXNzOiBhdCBsZWFzdCBvbmUgc3BlY2lhbCBjaGFyYWN0ZXIgZm91bmRcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2ZhaWx1cmU6IGRpZG4ndCBmaW5kIGFueSBzcGNpYWwgY2hhcmFjdGVyc1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlsbGVnYWxDaGFyYWN0ZXIodmFsdWUpIHtcbiAgICBcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0Ly8gYnVpbGQgcmVnZXhcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIlteQS16MC05XFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqXVwiLCBcIlwiKTtcblxuXHRcdFx0Ly9jaGVjayBjb25zdHJhdGludFxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZhbHVlKSkge1xuXHRcdFx0XHQvL3N1Y2Nlc3M6IGF0IGxlYXN0IG9uZSBzcGVjaWFsIGNoYXJhY3RlciBmb3VuZFxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2ZhaWx1cmU6IGRpZG4ndCBmaW5kIGFueSBzcGNpYWwgY2hhcmFjdGVyc1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIGVtYWlsKHZhbHVlKSB7XG4gICAgXHQvL2RlZmluZSBjb25zdHJhaW50c1xuICAgIFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XCIsIFwiXCIpO1xuXG4gICAgXHRpZighY29uc3RyYWludC50ZXN0KHZhbHVlKSkgcmV0dXJuICdOb3QgYSB2YWxpZCBlLW1haWwgYWRkcmVzcydcbiAgICBcdFxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRhdGVPZkJpcnRoKHZhbHVlKSB7fVxuXG5cdHJldHVybiBhbGxWYWxpZGF0aW9ucztcbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb25maWcoY29uZmlnKTtcbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gY29uZmlnKCRyb3V0ZVByb3ZpZGVyKSB7ICAgXG4gICAgJHJvdXRlUHJvdmlkZXJcbiAgICAud2hlbignLycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9sYW5kaW5nUGFnZS5odG0nLFxuICAgICAgICBjb250cm9sbGVyOiAnTGFuZGluZ1BhZ2VDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgfSlcbiAgICAud2hlbignL3NpZ251cCcsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9uZXdVc2VyU2lnbnVwLmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdOZXdVc2VyU2lnblVwQ29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xuICAgIH0pXG4gICAgLndoZW4oJy9sb2dpbicsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9yZWdpc3RlcmVkVXNlckxvZ2luLmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdSZWdVc2VyTG9naW5Db250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgfSlcbiAgICAud2hlbignL3VzZXJJbmZvcm1hdGlvbi86dWlkPycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy91c2VySW5mb3JtYXRpb24uaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1VzZXJJbmZvcm1hdGlvbkNvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgIHJlc29sdmU6IHsgLyogQG5nSW5qZWN0ICovXG4gICAgICAgICAgICB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlOiB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlXG4gICAgICAgIH1cbiAgICB9KVxuICAgIC53aGVuKCcvdXNlckV2ZW50cy86dWlkPycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy91c2VyRXZlbnRzLmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdVc2VyRXZlbnRzQ29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgcmVzb2x2ZTogeyAvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgICAgIHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2U6IHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2VcbiAgICAgICAgfVxuICAgIH0pXG4gICAgLndoZW4oJy9ldmVudC9ob3N0LzpldmVudElkLzp1aWQvOnNlY3Rpb24nLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvaG9zdEV2ZW50Lmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdIb3N0RXZlbnRDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICByZXNvbHZlOiB7IC8qIEBuZ0luamVjdCAqL1xuICAgICAgICAgICAgdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZTogdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZSxcbiAgICAgICAgfVxuICAgIH0pXG4gICAgLndoZW4oJy9ldmVudC9ndWVzdC86ZXZlbnRJZC86dWlkLzpob3N0SWQnLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvZ3Vlc3RFdmVudC5odG0nLFxuICAgICAgICBjb250cm9sbGVyOiAnR3Vlc3RFdmVudENvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgIHJlc29sdmU6IHsgLyogQG5nSW5qZWN0ICovXG4gICAgICAgICAgICB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlOiB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlLFxuICAgICAgICB9XG4gICAgfSlcbiAgICAud2hlbignL2V2ZW50LzpldmVudElkPy86aG9zdElkPy86dWlkPy86c2VjdGlvbj8nLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvYW5FdmVudC5odG0nLFxuICAgICAgICBjb250cm9sbGVyOiAnQW5FdmVudENvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgIHJlc29sdmU6IHsgLyogQG5nSW5qZWN0ICovXG4gICAgICAgICAgICB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlOiB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlLFxuICAgICAgICAgICAgZXZlbnRWaWV3Q2hhbmdlcjogZXZlbnRWaWV3Q2hhbmdlclxuICAgICAgICB9XG4gICAgfSlcbiAgICAub3RoZXJ3aXNlKHtcbiAgICAgICAgcmVkaXJlY3RUbzogJy8nXG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2UoYXV0aFNlcnZpY2UpIHtcbiAgICBhdXRoU2VydmljZS5pc0xvZ2dlZEluKCk7XG59O1xuXG5mdW5jdGlvbiBldmVudFZpZXdDaGFuZ2VyKHRyYWZmaWNWYWxldCwgJHJvdXRlKSB7XG4gICAgdHJhZmZpY1ZhbGV0LmV2ZW50Um91dGUoJHJvdXRlLmN1cnJlbnQucGFyYW1zLmV2ZW50SWQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyb3V0ZS5jdXJyZW50LnBhcmFtcy5ob3N0SWQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyb3V0ZS5jdXJyZW50LnBhcmFtcy51aWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvdXRlLmN1cnJlbnQucGFyYW1zLnNlY3Rpb24pO1xufTsiLCJcbmNvbmZpZy4kaW5qZWN0ID0gW1wiJHJvdXRlUHJvdmlkZXJcIl07XG51c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlLiRpbmplY3QgPSBbXCJhdXRoU2VydmljZVwiXTtcbmV2ZW50Vmlld0NoYW5nZXIuJGluamVjdCA9IFtcInRyYWZmaWNWYWxldFwiLCBcIiRyb3V0ZVwiXTthbmd1bGFyXG5cdC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJywgW1xuXHRcdCduZ1JvdXRlJyxcblx0XHQnbmdUb3VjaCcsXG5cdFx0J2ZpcmViYXNlJ1xuXHRdKTtcbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ0FuRXZlbnRDb250cm9sbGVyJywgQW5FdmVudENvbnRyb2xsZXIpO1xuXG5BbkV2ZW50Q29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJywgJyRyb3V0ZVBhcmFtcycsIF07XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gQW5FdmVudENvbnRyb2xsZXIoJGxvZywgJHJvdXRlUGFyYW1zKSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdFxuXHQvL2xvY2FsIHZhcmlhYmxlc1xuXHR2bS50ZW1wVGltZSA9IHtzdGFydDogJycsIGVuZDogJyd9O1xuXHR2bS51c2VySXNIb3N0ID0gZmFsc2U7XG5cblxuXHQvL0xvY2FsIE1ldGhvZHNcblx0ZnVuY3Rpb24gaW5pdCgpIHtcblx0XHQvL2RlY2xhcmUgYW5kIGluaXRpYWxpemUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dm0udGVtcERhdGVUaW1lID0ge3N0YXJ0OiAnJywgZW5kOiAnJ307XG5cdFx0dm0ubmV3R3Vlc3QgPSB7bmFtZTogJycsIGVtYWlsOnthZGRyZXNzOicnLCB2YWxpZDpmYWxzZSwgc3R5bGU6e2NvbG9yOicnfX19O1xuXHRcdHZtLnNob3dJZkhvc3QgPSBmYWxzZTtcblx0XHR2bS5oaWRlSWZBdHRlbmRpbmcgPSB0cnVlO1xuXHRcdC8vc2VjdGlvbnNcblx0XHR2bS5tYW5hZ2VTZWN0aW9ucyA9IHtcblx0XHRcdDE6IHthY3RpdmU6IHRydWUsIGNvbXBsZXRlOiBmYWxzZSwgc3R5bGU6e2NvbG9yOidibGFjaycsICdiYWNrZ3JvdW5kLWNvbG9yJzoneWVsbG93J319LFxuXHRcdFx0Mjoge2FjdGl2ZTogZmFsc2UsIGNvbXBsZXRlOiBmYWxzZSwgc3R5bGU6e2NvbG9yOid3aGl0ZScsICdiYWNrZ3JvdW5kLWNvbG9yJzonZ3JheSd9fSxcblx0XHRcdDM6IHthY3RpdmU6IGZhbHNlLCBjb21wbGV0ZTogZmFsc2UsIHN0eWxlOntjb2xvcjond2hpdGUnLCAnYmFja2dyb3VuZC1jb2xvcic6J2dyYXknfX1cblx0XHR9O1xuXG5cdFx0Ly9jaGVjayB1c2VyIHRvIGRldGVybWluZSBzdGF0ZVxuXHRcdGNoZWNrRm9ySG9zdCgpO1xuXHRcdGNoZWNrSWZHdWVzdElzQXR0ZW5kaW5nKCk7XG5cblx0XHQvL29wZW4gdXAgc2VjdGlvbnNcblx0XHRpZighdm0uc2hvd0lmSG9zdCkgb3BlbkFsbFNlY3Rpb25zKCk7XG5cdH1cblxuXHRmdW5jdGlvbiB1dGY4X3RvX2I2NChzdHIpIHtcblx0XHRyZXR1cm4gYnRvYShzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gYjY0X3RvX3V0Zjgoc3RyKSB7XG4gICAgXHRyZXR1cm4gYXRvYihzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKSB7XG5cdFx0cmV0dXJuIERhdGUucGFyc2UoZGF0ZVRpbWUpO1xuXHR9XG5cblx0ZnVuY3Rpb24gY2xlYW5OZXdHdWVzdFZhcmlhYmxlKCkge1xuXHRcdHZtLm5ld0d1ZXN0ID0ge25hbWU6ICcnLCBlbWFpbDp7YWRkcmVzczonJywgdmFsaWQ6ZmFsc2UsIHN0eWxlOntjb2xvcjonJ319fTtcblx0fVxuXG5cdGZ1bmN0aW9uIGludml0ZUFSZWdpc3RlcmVkVXNlcih1aWQpIHtcblx0XHQkbG9nLmluZm8oJ2FkZGluZyB0aGVtIHRvIHRoZSByZWdpc3RlcmVkIHVzZXJzIGxpc3QgJyArIHVpZCk7XG5cdFx0Ly9zZXQgdGhlIG5ldyBldmVudFxuXHRcdHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgncGVuZGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ldmVudElkKS5zZXQoe1xuXHRcdFx0aWQ6ICRyb3V0ZVBhcmFtcy5ldmVudElkLFxuXHRcdFx0ZXZlbnRUaW1lczoge1xuXHRcdFx0XHRzdGFydDogdm0uZXZlbnQuZXZlbnRUaW1lcy5zdGFydCxcblx0XHRcdFx0ZW5kOiB2bS5ldmVudC5ldmVudFRpbWVzLmVuZFxuXHRcdFx0fSxcblx0XHRcdG5hbWU6IHZtLmV2ZW50Lm5hbWUsXG5cdFx0XHRob3N0OiAkcm91dGVQYXJhbXMudWlkXG5cdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oJ3RoZXJlIHdhcyBhbiBlcnJvcicgKyBlcnJvcik7XG5cdFx0fSk7XG5cdFx0Ly9pZiB0aGVyZSB3YXMgYW4gdXBkYXRlZCBwbGFjZSBob2xkZXIsIHJlbW92ZSBpdFxuXHRcdHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgncGVuZGluZycpLm9uY2UoJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdHZhciBjaGVja0ZvclBsYWNlaG9sZGVyID0gc25hcHNob3QudmFsKClcblx0XHRcdCRsb2cuaW5mbyhzbmFwc2hvdC52YWwoKSk7XG5cblx0XHRcdGlmKGNoZWNrRm9yUGxhY2Vob2xkZXIudXBkYXRlZCkge1xuXHRcdFx0XHQkbG9nLmluZm8oJ2RlbGV0aW5nIHVwZGF0ZWQnKTtcblx0XHRcdFx0cmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdwZW5kaW5nJykuY2hpbGQoJ3VwZGF0ZWQnKS5yZW1vdmUoZnVuY3Rpb24oZXJyb3JPYmplY3QpIHtcblx0XHRcdFx0XHRpZihlcnJvck9iamVjdCkgJGxvZy5pbmZvKFwiRGVsZXRpbmcgZmFpbGVkOiBcIiArIGVycm9yT2JqZWN0LmNvZGUpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSAkbG9nLmluZm8oJ25vdGhpbmcgdG8gZG8nKTtcblxuXHRcdH0sIGZ1bmN0aW9uKGVycm9yT2JqZWN0KSB7XG5cdFx0XHRpZihlcnJvck9iamVjdCkgJGxvZy5pbmZvKFwiVGhlIHJlYWQgZmFpbGVkOiBcIiArIGVycm9yT2JqZWN0LmNvZGUpO1xuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gaW52aXRlQW5VbnJlZ2lzdGVyZWRVc2VyKHVzZXJLZXkpIHtcblx0XHQkbG9nLmluZm8oJ2FkZGluZyB0aGVtIHRvIHRoZSBVTlJFR0lTVEVSRUQgdXNlcnMgbGlzdCAnICsgdXNlcktleSk7XG5cdFx0cmVmLmNoaWxkKCdVbnJlZ2lzdGVyZWRVc2VycycpLmNoaWxkKHVzZXJLZXkpLmNoaWxkKCdwZW5kaW5nJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJHJvdXRlUGFyYW1zLmV2ZW50SWQpLnNldCh7XG5cdFx0XHRpZDogJHJvdXRlUGFyYW1zLmV2ZW50SWQsXG5cdFx0XHRob3N0OiAkcm91dGVQYXJhbXMudWlkLFxuXHRcdFx0ZXZlbnRUaW1lczoge1xuXHRcdFx0XHRzdGFydDogdm0uZXZlbnQuZXZlbnRUaW1lcy5zdGFydCxcblx0XHRcdFx0ZW5kOiB2bS5ldmVudC5ldmVudFRpbWVzLmVuZFxuXHRcdFx0fSxcblx0XHRcdG5hbWU6IHZtLmV2ZW50Lm5hbWVcblx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbygndGhlcmUgd2FzIGFuIGVycm9yJyArIGVycm9yKTtcblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNoZWNrRm9ySG9zdCgpIHtcblx0XHQvL2NoZWNrIGV2ZW50IGhvc3Rcblx0XHR2YXIgYXV0aERhdGEgPSByZWYuZ2V0QXV0aCgpO1xuXG5cdFx0aWYoYXV0aERhdGEudWlkID09ICRyb3V0ZVBhcmFtcy5ob3N0SWQpIHtcblx0XHRcdCRsb2cuaW5mbygnaXMgdGhlIGhvc3QnKTtcblx0XHRcdHZtLnNob3dJZkhvc3QgPSB0cnVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkbG9nLmluZm8oJ25vdCB0aGUgaG9zdCcpO1xuXHRcdFx0dm0uc2hvd0lmSG9zdCA9IGZhbHNlO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIGNoZWNrSWZHdWVzdElzQXR0ZW5kaW5nKCkge1xuXHRcdGlmKCF2bS5zaG93SWZIb3N0KSB7XG5cdFx0XHQkbG9nLmluZm8oJ2NoZWNrIGd1ZXN0IGF0dGVuZGFuY2UnKTtcblx0XHRcdHVzZXJFdmVudHMuY2hpbGQoJ2d1ZXN0TGlzdCcpLm9uKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHRcdHZhciBhbGxHdWVzdHMgPSBzbmFwc2hvdC52YWwoKTtcblx0XHRcdFx0dm0uaGlkZUlmQXR0ZW5kaW5nID0gIWFsbEd1ZXN0c1skcm91dGVQYXJhbXMudWlkXS5hdHRlbmRpbmc7XG5cdFx0XHRcdFxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gb3BlbkFsbFNlY3Rpb25zKCkge1xuXHRcdHZtLm1hbmFnZVNlY3Rpb25zWzFdLmFjdGl2ZSA9IHRydWU7XG5cdFx0dm0ubWFuYWdlU2VjdGlvbnNbMl0uYWN0aXZlID0gdHJ1ZTtcblx0XHR2bS5tYW5hZ2VTZWN0aW9uc1szXS5hY3RpdmUgPSB0cnVlO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2F2ZUV2ZW50KCkge1xuXHRcdHZtLmV2ZW50LiRzYXZlKCkudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdCRsb2cuaW5mbygnZXZlbnQgc2F2ZWQnKTtcblx0XHR9KS5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0JGxvZy5pbmZvKCdlcnJvciEgJyArIGVycm9yKTtcblx0XHR9KTtcblx0fVxuXG5cdC8vdmlldyBNZXRob2Rcblx0dm0uc2V0VGVtcFRpbWUgPSBmdW5jdGlvbihlbmRwb2ludCkge1xuXHRcdGlmKGVuZHBvaW50ID09ICdzdGFydCcpIHZtLnRlbXBEYXRlVGltZS5zdGFydCA9IG5ldyBEYXRlKCk7XG5cdFx0aWYoZW5kcG9pbnQgPT0gJ2VuZCcpIHZtLnRlbXBEYXRlVGltZS5lbmQgPSBuZXcgRGF0ZSgpO1xuXHR9XG5cblx0dm0udW5peFRpbWVUb0RhdGVUaW1lID0gZnVuY3Rpb24gKHVuaXhUaW1lKSB7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KHVuaXhUaW1lKSk7XG5cdH07XG5cblx0dm0uZGF0ZVRpbWVUb1VuaXhUaW1lID0gZnVuY3Rpb24gKGRhdGVUaW1lKSB7XG5cdFx0cmV0dXJuIERhdGUucGFyc2UoZGF0ZVRpbWUpO1xuXHR9O1xuXG5cdHZtLnN1Ym1pdCA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2cuaW5mbygnc3VibWl0dGluZyB0aGUgZm9ybSBub3chJyk7XG5cdH1cblxuXHR2bS5iYWNrVG9Vc2VyRXZlbnRzID0gZnVuY3Rpb24oKSB7XG5cdFx0JGxvY2F0aW9uLnBhdGgoJy91c2VyRXZlbnRzLycgKyAkcm91dGVQYXJhbXMudWlkICsgJy8nICsgJHJvdXRlUGFyYW1zLnRva2VuKTtcblx0fVxuXG5cdHZtLmV2ZW50UmVkaXJlY3QgPSBmdW5jdGlvbihwYXRoLCBldmVudElEKSB7XG5cdFx0dmFyIGZ1bGxQYXRoID0gcGF0aCArICcvJyArICRyb3V0ZVBhcmFtcy51aWQgKyAnLycgKyAkcm91dGVQYXJhbXMudG9rZW47XG5cdFx0Ly9yZWRpcmVjdFxuXHRcdCRsb2cuaW5mbygncmVkaXJlY3RpbmcgdG86ICcgKyBmdWxsUGF0aCk7XG5cdFx0JGxvY2F0aW9uLnBhdGgoZnVsbFBhdGgpO1xuXHR9XG5cblx0dm0uY2hhbmdlU2VjdGlvbiA9IGZ1bmN0aW9uKHRhcmdldFNlY3Rpb24pIHtcblx0XHQkbG9nLmluZm8oJ2FyZSB3ZSBoZXJlJyk7XG5cdFx0Zm9yKGkgPSAxOyBpIDw9MzsgaSsrKSB7XG5cdFx0XHRpZihpPT10YXJnZXRTZWN0aW9uKSB7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLmFjdGl2ZSA9IHRydWU7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLnN0eWxlWydiYWNrZ3JvdW5kLWNvbG9yJ10gPSd5ZWxsb3cnO1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5zdHlsZVsnY29sb3InXSA9J2JsYWNrJztcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLmFjdGl2ZSA9IGZhbHNlO1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5zdHlsZVsnYmFja2dyb3VuZC1jb2xvciddID0nZ3JheSc7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLnN0eWxlWydjb2xvciddID0nd2hpdGUnO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHZtLnNhdmVFdmVudFRpbWUgPSBmdW5jdGlvbihkYXRlVGltZSwgdGFyZ2V0KSB7XG5cdFx0Ly9pZiB0aGlzIGV2ZW50IGRpZG4ndCBoYXZlIGEgc3RhcnQgdGltZSwgY3JlYXRlIGl0XG5cdFx0aWYoIXZtLmV2ZW50LmV2ZW50VGltZXMpIHsgXG5cdFx0XHR2bS5ldmVudC5ldmVudFRpbWVzID0ge3N0YXJ0OiAnJywgZW5kOiAnJ307XG5cdFx0XHR2bS5ldmVudC5ldmVudFRpbWVzLnN0YXJ0ID0gdm0uZGF0ZVRpbWVUb1VuaXhUaW1lKHZtLnRlbXBEYXRlVGltZS5zdGFydCk7IFxuXHRcdFx0dm0uZXZlbnQuZXZlbnRUaW1lcy5lbmQgPSB2bS5kYXRlVGltZVRvVW5peFRpbWUodm0udGVtcERhdGVUaW1lLmVuZCk7XG5cdFx0fVxuXG5cdFx0aWYoKHZtLnRlbXBEYXRlVGltZS5lbmQgPCB2bS50ZW1wRGF0ZVRpbWUuc3RhcnQpICYmIHRhcmdldCA9PSAnc3RhcnQnKSB2bS50ZW1wRGF0ZVRpbWUuZW5kID0gdm0udGVtcERhdGVUaW1lLnN0YXJ0O1xuXHRcdGlmKHRhcmdldCA9PSAnc3RhcnQnKSB2bS5ldmVudC5ldmVudFRpbWVzLnN0YXJ0ID0gdm0uZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKTtcblx0XHRpZih0YXJnZXQgPT0gJ2VuZCcpIHZtLmV2ZW50LmV2ZW50VGltZXMuZW5kID0gdm0uZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKTtcblx0fVxuXG5cdHZtLmd1ZXN0c0FyZUludml0ZWQgPSBmdW5jdGlvbigpIHtcblx0XHRpZih2bS5ldmVudC5ndWVzdExpc3QpIHJldHVybiB0cnVlO1xuXHRcdGVsc2UgcmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0dm0udmFsaWRhdGVHdWVzdEVtYWlsID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9pZiB0aGVyZSBpcyBhbiBlbWFpbCBhZGRyZXNzXG5cdFx0aWYodm0ubmV3R3Vlc3QuZW1haWwuYWRkcmVzcykge1xuXHRcdFx0Ly9jaGVjayB2YWxpZGl0eVxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XCIsIFwiXCIpO1xuXG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3Qodm0ubmV3R3Vlc3QuZW1haWwuYWRkcmVzcykpIHtcblx0XHRcdFx0dm0ubmV3R3Vlc3QuZW1haWwudmFsaWQgPSB0cnVlO1xuXHRcdFx0XHR2bS5uZXdHdWVzdC5lbWFpbC5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLm5ld0d1ZXN0LmVtYWlsLnZhbGlkID0gZmFsc2U7XG5cdFx0XHRcdHZtLm5ld0d1ZXN0LmVtYWlsLnN0eWxlID0ge2NvbG9yOicnfTtcblx0XHRcdH1cdFx0XHRcblx0XHR9XG5cdH1cblxuXHR2bS5pc1NlY3Rpb25Db21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdGZvcihpPTA7aTw4O2krKykge1xuXHRcdFx0JGxvZy5pbmZvKHZtLnJlcXVpcmVkSW5wdXRzW2ldKTtcblx0XHR9XG5cdH1cblxuXHR2bS5zYXZlQW5kQWR2YW5jZSA9IGZ1bmN0aW9uKCkge1xuXHRcdHZtLmV2ZW50LiRzYXZlKCkudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdCRsb2cuaW5mbygnZXZlbnQgc2F2ZWQnKTtcblx0XHR9KS5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0JGxvZy5pbmZvKCdlcnJvciEgJyArIGVycm9yKTtcblx0XHR9KTtcblxuXHRcdC8vY2hlY2sgZm9yIGNvbXBsZXRlbmVzXG5cdFx0dm0uaXNTZWN0aW9uQ29tcGxldGUoKTtcblxuXHRcdGlmKHZtLm1hbmFnZVNlY3Rpb25zWzFdLmNvbXBsZXRlID09IHRydWUgJiYgdm0ubWFuYWdlU2VjdGlvbnNbMl0uY29tcGxldGUgPT0gdHJ1ZSAmJiB2bS5tYW5hZ2VTZWN0aW9uc1szXS5jb21wbGV0ZSA9PSB0cnVlKSB7XG5cdFx0XHR2bS5ldmVudFJlZGlyZWN0KCcvdXNlckV2ZW50cycsICRyb3V0ZVBhcmFtcy51aWQpO1xuXHRcdH0gZWxzZSBpZiAodm0ubWFuYWdlU2VjdGlvbnNbMV0uYWN0aXZlKSB2bS5jaGFuZ2VTZWN0aW9uKDIpO1xuXHRcdGVsc2UgaWYgKHZtLm1hbmFnZVNlY3Rpb25zWzJdLmFjdGl2ZSkgdm0uY2hhbmdlU2VjdGlvbigzKTtcblx0XHRlbHNlIGlmICh2bS5tYW5hZ2VTZWN0aW9uc1szXS5hY3RpdmUpIHZtLmNoYW5nZVNlY3Rpb24oMSk7XG5cdH1cblxuXHR2bS5hZGRHdWVzdFRvSG9zdHNMaXN0ID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9kZWNsYXJlIGFuZCBpbml0aWFsaXplIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciB1c2VyS2V5ID0gdXRmOF90b19iNjQodm0ubmV3R3Vlc3QuZW1haWwuYWRkcmVzcyk7XG5cblx0XHQvL2lmIGVtYWlsIGlzIHZhbGlkIGFuZCBuYW1lIGV4aXN0c1xuXHRcdGlmICh2bS5uZXdHdWVzdC5uYW1lICYmIHZtLm5ld0d1ZXN0LmVtYWlsLnZhbGlkKSB7XG5cdFx0XHQvL2lzIHRoZXJlIGEgZ3Vlc3QgbGlzdCBhbHJlYWR5PyBJZiBub3QgY3JlYXRlIG9uZVxuXHRcdFx0aWYoIXZtLmV2ZW50Lmd1ZXN0TGlzdCkge1xuXHRcdFx0XHR2bS5ldmVudC5ndWVzdExpc3QgPSB7fTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vaWYgc28gaXMgdGhpcyBwZXJzb24gYWxyZWFkeSBvbiB0aGUgbGlzdD9cblx0XHRcdFx0dmFyIGkgPTA7XG5cdFx0XHRcdHdoaWxlKHZtLmV2ZW50Lmd1ZXN0TGlzdFtpXSkge1xuXHRcdFx0XHRcdGlmKHZtLmV2ZW50Lmd1ZXN0TGlzdFtpXS5lbWFpbCA9PSBiNjRfdG9fdXRmOCh1c2VyS2V5KSkge1xuXHRcdFx0XHRcdFx0JGxvZy5pbmZvKCdUaGlzIGd1ZXN0IGlzIGFscmVhZHkgb24gdGhlIGxpc3QnKTtcblx0XHRcdFx0XHRcdGNsZWFuTmV3R3Vlc3RWYXJpYWJsZSgpO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpKys7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly9pcyB0aGlzIGd1ZXN0IGEgcmVnaXN0ZXJlZCB1c2VyP1xuXHRcdFx0aWYocmVnaXN0ZXJlZFVzZXJzW3VzZXJLZXldKSB7XG5cdFx0XHRcdC8vaXMgdGhlIHJlZ2lzdGVyZWQgdXNlciB0aGUgaG9zdD9cblx0XHRcdFx0aWYocmVnaXN0ZXJlZFVzZXJzW3VzZXJLZXldID09ICRyb3V0ZVBhcmFtcy51aWQpIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ3RyaWVkIHRvIHJlZ2lzdGVyIHRoZSBob3N0Jyk7XG5cdFx0XHRcdFx0Y2xlYW5OZXdHdWVzdFZhcmlhYmxlKCk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdC8vYWRkIHRoZW0gdG8gdGhlIGFwcHJvcHJpYXRlIHJlZ2lzdGVyZWQgdXNlcnMnIGxpc3Qgb2YgZXZlbnQgaW52aXRlc1xuXHRcdFx0XHRcdGludml0ZUFSZWdpc3RlcmVkVXNlcihyZWdpc3RlcmVkVXNlcnNbdXNlcktleV0pO1xuXG5cdFx0XHRcdFx0Ly9hZGQgdGhlIGd1ZXN0IHRvIHRoZSBsaXN0XG5cdFx0XHRcdFx0dm0uZXZlbnQuZ3Vlc3RMaXN0W3JlZ2lzdGVyZWRVc2Vyc1t1c2VyS2V5XV0gPSB7XG5cdFx0XHRcdFx0XHRhdHRlbmRpbmc6IGZhbHNlLCBcblx0XHRcdFx0XHRcdHN0YXR1czoncGVuZGluZycsIFxuXHRcdFx0XHRcdFx0bmFtZTogdm0ubmV3R3Vlc3QubmFtZSwgXG5cdFx0XHRcdFx0XHRlbWFpbDp2bS5uZXdHdWVzdC5lbWFpbC5hZGRyZXNzLFxuXHRcdFx0XHRcdH07XHRcdFx0XHRcdFxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2FkZCB0aGUgaW52aXRlIHRvIHRoZSBub24tcmVnaXN0ZXJlZCB1c2VycyBsaXN0IG9mIGV2ZW50IGludml0ZXNcblx0XHRcdFx0aW52aXRlQW5VbnJlZ2lzdGVyZWRVc2VyKHVzZXJLZXkpO1xuXG5cdFx0XHRcdC8vYWRkIHRoZSBndWVzdCB0byB0aGUgbGlzdFxuXHRcdFx0XHR2bS5ldmVudC5ndWVzdExpc3RbdXNlcktleV0gPSB7XG5cdFx0XHRcdFx0XHRhdHRlbmRpbmc6IGZhbHNlLCBcblx0XHRcdFx0XHRcdHN0YXR1czoncGVuZGluZycsIFxuXHRcdFx0XHRcdFx0bmFtZTogdm0ubmV3R3Vlc3QubmFtZSwgXG5cdFx0XHRcdFx0XHRlbWFpbDp2bS5uZXdHdWVzdC5lbWFpbC5hZGRyZXNzLFxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXG5cblx0XHRcdC8vc2F2ZSB0aGUgZXZlbnRcblx0XHRcdHZtLnNhdmVFdmVudCgpO1xuXHRcdFx0Ly9jbGVhciB0aGUgdGVtcCB2YWx1ZXNcblx0XHRcdGNsZWFuTmV3R3Vlc3RWYXJpYWJsZSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkbG9nLmluZm8oJ3lvdSBkaWRuXFwndCBlbnRlciBhIG5hbWUgYW5kIG9yIGVtYWlsJyk7XG5cdFx0fVxuXHR9XG5cblx0dm0uZ3Vlc3RXaWxsQXR0ZW5kID0gZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHR2YXIgY3VycmVudFVzZXIgPSByZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJ2V2ZW50cycpO1xuXHRcdHZhciB0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucyA9IDA7XG5cdFx0dmFyIHJlbW92ZUF0dGVuZGluZ1VwZGF0ZWQgPSBmYWxzZTtcblx0XHRcblx0XHQvL2NoYW5nZSBhdHRlbmRpbmcgdG8gdHJ1ZSBpbiBob3N0J3MgZ3Vlc3RMaXN0XG5cdFx0dm0uZXZlbnQuZ3Vlc3RMaXN0WyRyb3V0ZVBhcmFtcy51aWRdLmF0dGVuZGluZyA9IHJlc3BvbnNlO1xuXHRcdC8vY2hhbmdlIHN0YXR1cyB0byAnYXR0ZW5kaW5nJyBpbiBob3N0J3MgZ3Vlc3RMaXN0XG5cdFx0dm0uZXZlbnQuZ3Vlc3RMaXN0WyRyb3V0ZVBhcmFtcy51aWRdLnN0YXR1cyA9ICdhdHRlbmRpbmcnO1xuXHRcdFxuXHRcdC8vZ2V0IHRoZSBpbnZpdGF0aW9uIGRldGFpbHNcblx0XHRjdXJyZW50VXNlci5jaGlsZCgncGVuZGluZycpLm9uKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWxiZVxuXHRcdFx0dmFyIGludml0YXRpb25zID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHQvL2xvZyBzdGFydGluZyB2YWx1ZXNcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9ucyk7XG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnNbJHJvdXRlUGFyYW1zLmhvc3RJZF0pO1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdWyRyb3V0ZVBhcmFtcy5ldmVudElkXSk7XG5cblx0XHRcdHZhciB0aGlzSW52aXRhdGlvbiA9IGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdWyRyb3V0ZVBhcmFtcy5ldmVudElkXTtcblx0XHRcdFxuXHRcdFx0JGxvZy5pbmZvKHRoaXNJbnZpdGF0aW9uKTtcblx0XHRcdFxuXHRcdFx0Ly9jaGVjayAjIG9mIGluaXZpYXRpb25zXG5cdFx0XHRmb3IoaW52aXRhdGlvbiBpbiBpbnZpdGF0aW9ucykge1xuXHRcdFx0XHR0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucysrO1xuXHRcdFx0fVxuXG5cdFx0XHQvL3JlcG9ydCAjIG9mIGludml0YXRpb25zXG5cdFx0XHQkbG9nLmluZm8oXCJ0b3RhbCBhdHRlbmRpbmc6IFwiICsgdG90YWxQZW5kaW5nSW52aXRhdGlvbnMpO1xuXHRcdFx0XG5cdFx0XHQvL2FkZCB0aGUgZXZlbnQgdG8gdGhlIGd1ZXN0J3MgYXR0ZW5kaW5nIGxpc3Rcblx0XHRcdGlmKHJlc3BvbnNlKSBjdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykuY2hpbGQoJHJvdXRlUGFyYW1zLmhvc3RJZCkuY2hpbGQoJHJvdXRlUGFyYW1zLmV2ZW50SWQpLnNldCh0aGlzSW52aXRhdGlvbiwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbyhlcnJvcik7XG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXG5cdFx0Ly9pZiB0aGUgdXBkYXRlZCBwbGFjZWhvbGRlciB3YXMgb24gdGhlIGF0dGVuZGluZyBsaXN0IHJlbW92ZSBpdFxuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5vbigndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHRcdHZhciBhdHRlbmRpbmdMaXN0ID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHRcblx0XHRcdC8vcmVwb3J0IGFjdGlvbnNcblx0XHRcdCRsb2cuaW5mbygndGhpcyBpcyB0aGUgYXR0ZW5kaW5nIGxpc3QnKTtcblx0XHRcdCRsb2cuaW5mbyhhdHRlbmRpbmdMaXN0KTtcblx0XHRcdFxuXHRcdFx0Ly90aHJvdyBmbGFnIGZvciBsYXRlclxuXHRcdFx0aWYoYXR0ZW5kaW5nTGlzdC51cGRhdGVkKSByZW1vdmVBdHRlbmRpbmdVcGRhdGVkID0gdHJ1ZTtcblxuXHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHQvL2lmIHRoZXIgd2FzIGFuIGVycm9yIHJlcG9ydCBpdFxuXHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbyhlcnJvcik7XG5cdFx0fSk7XG5cblx0XHQvL2lmIHRoaXMgaXMgdGhlIGxhc3QgcGVuZGluZyBldmVudCBvbiB0aGUgZ3Vlc3QncyBwZW5kaW5nIGxpc3QsIGFkZCB0aGUgdXBkYXRlZCBwbGFjZWhvbGRlclxuXHRcdGlmKHRvdGFsUGVuZGluZ0ludml0YXRpb25zIDwgMikge1xuXHRcdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHRcdHZhciBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XG5cblx0XHRcdC8vcmVwbGFjZSB3aXRoIHVwZGF0ZWQgZmllbGRcblx0XHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdwZW5kaW5nJykudXBkYXRlKHtcblx0XHRcdFx0dXBkYXRlZDogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbyhlcnJvcik7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHQvL3JlbW92ZSB0aGUgZXZlbnQgZnJvbSB0aGUgZ3Vlc3QncyBwZW5kaW5nIGxpc3Rcblx0XHRjdXJyZW50VXNlci5jaGlsZCgncGVuZGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ob3N0SWQpLnJlbW92ZSgpO1xuXG5cdFx0Ly9pZiB0aGVyZSB3YXMgYW4gdXBkYXRlZCBmaWVsZCBpbiBhdHRlbmRpbmcsIHJlbW92ZSBpdFxuXHRcdGlmKHJlbW92ZUF0dGVuZGluZ1VwZGF0ZWQpIHtcblx0XHRcdCRsb2cuaW5mbygncmVtb3ZpbmcgdGhlIHVwZGF0ZWQgcGxhY2Vob2xkZXInKTtcblx0XHRcdC8vY3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLmNoaWxkKCd1cGRhdGVkJykucmVtb3ZlKCk7XG5cdFx0fVxuXG5cdFx0Ly9zYXZlIGNoYW5nZXNcblx0XHR2bS5ldmVudC4kc2F2ZSgpO1xuXHR9XG5cblx0dm0udXBkYXRlVXBkYXRlZFBhcmFtID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGN1cnJlbnRVc2VyID0gcmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCdldmVudHMnKTtcblx0XHRcblx0XHQkbG9nLmluZm8oJ3VwZGF0aW5nIHRoZSBwYXJhbScpO1xuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5vbigndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0JGxvZy5pbmZvKHNuYXBzaG90LnZhbCgpKTtcblx0XHR9KTtcblx0XHRjdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykuY2hpbGQoJ3VwZGF0ZWQnKS5yZW1vdmUoKTtcblx0fVxuXG5cdHZtLmFkZEludml0YXRpb25Ub0F0dGVuZGluZyA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdFx0dmFyIGN1cnJlbnRVc2VyID0gcmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCdldmVudHMnKTtcblx0XHR2YXIgdG90YWxQZW5kaW5nSW52aXRhdGlvbnMgPSAwO1xuXG5cdFx0Ly9nZXQgdGhlIGludml0YXRpb24gZGV0YWlsc1xuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdwZW5kaW5nJykub24oJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhbGJlXG5cdFx0XHR2YXIgaW52aXRhdGlvbnMgPSBzbmFwc2hvdC52YWwoKTtcblx0XHRcdHZhciB0aGlzSW52aXRhdGlvbiA9IGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdWyRyb3V0ZVBhcmFtcy5ldmVudElkXTtcblx0XHRcdFxuXHRcdFx0Ly9sb2cgc3RhcnRpbmcgdmFsdWVzXG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnMpO1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdKTtcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9uc1skcm91dGVQYXJhbXMuaG9zdElkXVskcm91dGVQYXJhbXMuZXZlbnRJZF0pO1xuXHRcdFx0XG5cdFx0XHQvL2NoZWNrICMgb2YgaW5pdmlhdGlvbnNcblx0XHRcdGZvcihpbnZpdGF0aW9uIGluIGludml0YXRpb25zKSB7XG5cdFx0XHRcdHRvdGFsUGVuZGluZ0ludml0YXRpb25zKys7XG5cdFx0XHR9XG5cblx0XHRcdC8vcmVwb3J0ICMgb2YgaW52aXRhdGlvbnNcblx0XHRcdCRsb2cuaW5mbyhcInRvdGFsIHBlbmRpbmcgaW52aXRhdGlvbnM6IFwiICsgdG90YWxQZW5kaW5nSW52aXRhdGlvbnMpO1xuXHRcdFx0XG5cdFx0XHQkbG9nLmluZm8ocmVzcG9uc2UpO1xuXHRcdFx0Ly9hZGQgdGhlIGV2ZW50IHRvIHRoZSBndWVzdCdzIGF0dGVuZGluZyBsaXN0XG5cdFx0XHRpZihyZXNwb25zZSkgY3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ob3N0SWQpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ldmVudElkKS5zZXQodGhpc0ludml0YXRpb24sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oZXJyb3IpO1xuXHRcdFx0fSk7XG5cblxuXG5cdFx0fSk7XG5cdH1cblxuXHQvL3N0YXJ0IHJ1blxuXHRpbml0KCk7XG59XG5cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ0d1ZXN0RXZlbnRDb250cm9sbGVyJywgR3Vlc3RFdmVudENvbnRyb2xsZXIpO1xuXG5HdWVzdEV2ZW50Q29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gR3Vlc3RFdmVudENvbnRyb2xsZXIoJGxvZykge1xuXHQkbG9nLmluZm8oJ2ludG8gdGhlIEd1ZXN0RXZlbnRDb250cm9sbGVyJyk7XG59XG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdIb3N0RXZlbnRDb250cm9sbGVyJywgSG9zdEV2ZW50Q29udHJvbGxlcik7XG5cbkhvc3RFdmVudENvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICckcm91dGVQYXJhbXMnLCAndXNlckRhdGEnLCAndHJhZmZpY1ZhbGV0J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gSG9zdEV2ZW50Q29udHJvbGxlcigkbG9nLCAkcm91dGVQYXJhbXMsIHVzZXJEYXRhLCB0cmFmZmljVmFsZXQpIHtcblx0dmFyIHZtID0gdGhpcztcblx0XG5cdC8vbG9jYWwgdmFyaWFibGVzXG5cdHZhciBob3N0ZWRFdmVudFNoZXJwYSA9IHRyYWZmaWNWYWxldDtcblx0dmFyIHRoaXNFdmVudE1hbmFnZXIgPSB1c2VyRGF0YTtcblxuXHQvL3ZpZXcgbW9kZWwgdmFyaWFibGVzXG5cdHZtLmFjdGl2ZVNlY3Rpb24gPSAxO1xuXHR2bS50ZW1wVGltZSA9IHtzdGFydDogJycsIGVuZDogJycsIGR1cmF0aW9uOicnfTtcblx0dm0ucHJvZ3Jlc3NCYXIgPSAzOTtcblx0dm0udGVtcEV2ZW50ID0ge307XG5cblx0Ly9sb2NhbCBtZXRob2RzXG5cdGZ1bmN0aW9uIHVuaXhUaW1lVG9EYXRlVGltZSh1bml4VGltZSkge1xuXHRcdHJldHVybiBuZXcgRGF0ZShwYXJzZUludCh1bml4VGltZSkpO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIGRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fTtcblxuXHRmdW5jdGlvbiBjYWxjdWxhdGVEdXJhdGlvbihzdGFydCwgZW5kKSB7XG5cdFx0cmV0dXJuIChkYXRlVGltZVRvVW5peFRpbWUoZW5kKSAtIGRhdGVUaW1lVG9Vbml4VGltZShzdGFydCkpIC8gKDYwKjEwMDApO1xuXHR9XG5cblx0ZnVuY3Rpb24gaW5pdEV2ZW50VGltZXMoKSB7XG5cdFx0Ly9idWlsZCBuZXcgdGVtcCB0aW1lc1xuXHRcdHZhciBub3cgPSBuZXcgRGF0ZSgpO1xuXG5cdFx0Ly9yb3VuZCB0byB0aGUgbmVhcmVzdCBob3VyLCBjdXQgb2ZmIGFueXRoaW5nIHNtYWxsZXJcblx0XHRub3cuc2V0SG91cnMobm93LmdldEhvdXJzKCkgKyBNYXRoLnJvdW5kKG5vdy5nZXRNaW51dGVzKCkvNjApKTtcblx0XHRub3cuc2V0TWludXRlcygwKTtcblx0XHRub3cuc2V0U2Vjb25kcygwKTtcblx0XHRub3cuc2V0TWlsbGlzZWNvbmRzKDApO1xuXG5cdFx0dm0udGVtcFRpbWUuc3RhcnQgPSBub3c7XG5cdFx0dm0udGVtcFRpbWUuZW5kID0gbm93O1xuXG5cdFx0dm0udGVtcFRpbWUuZHVyYXRpb24gPSBjYWxjdWxhdGVEdXJhdGlvbih2bS50ZW1wVGltZS5zdGFydCwgdm0udGVtcFRpbWUuZW5kKTtcblx0XHRcblx0fVxuXG5cdGZ1bmN0aW9uIHVwZGF0ZVRlbXBUaW1lRnJvbU1vZGVsKCkge1xuXHRcdC8vaWYgc3RhcnQgdGltZXMgYXJlIGF2YWlsYWJsZVxuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZtLnRlbXBFdmVudC5ldmVudFRpbWVzLnN0YXJ0KSkge1xuXHRcdFx0Ly9zZXQgdGhlIHRlbXBUaW1lIG1vZGVsXG5cdFx0XHR2bS50ZW1wVGltZS5zdGFydCA9IHVuaXhUaW1lVG9EYXRlVGltZSh2bS50ZW1wRXZlbnQuZXZlbnRUaW1lcy5zdGFydCk7XG5cdFx0XHR2bS50ZW1wVGltZS5lbmQgPSB1bml4VGltZVRvRGF0ZVRpbWUodm0udGVtcEV2ZW50LmV2ZW50VGltZXMuZW5kKTtcblx0XHR9XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGluaXQoKSB7XG5cdFx0XG5cdFx0Ly9sb2FkIGV2ZW50IGRldGFpbHNcblx0XHR0aGlzRXZlbnRNYW5hZ2VyLmxvYWRBbkV2ZW50UHJvZ3Jlc3NpdmVseSgkcm91dGVQYXJhbXMudWlkLCAkcm91dGVQYXJhbXMuZXZlbnRJZClcblx0XHQudGhlbihmdW5jdGlvbih0aGVFdmVudCkge1xuXHRcdFx0Ly9hZGQgdGhpcyBldmVudCBtb2RlbCB0byB0aGUgdmlldyBtb2RlbCBldmVudFxuXHRcdFx0dm0udGVtcEV2ZW50ID0gdGhlRXZlbnQ7XG5cblx0XHRcdC8vdXBkYXRlIHRlbXBUaW1lXG5cdFx0XHR1cGRhdGVUZW1wVGltZUZyb21Nb2RlbCgpO1xuXHRcdH0pXG5cdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHQkbG9nKCd0aGUgZXJyb3IgaXM6ICcgKyBlcnJvcik7XG5cdFx0fSlcblxuXHRcdC8vbG9hZCBzcGVjaWZpZWQgc2VjdGlvblxuXHRcdHZtLmFjdGl2ZVNlY3Rpb24gPSBwYXJzZUludCgkcm91dGVQYXJhbXMuc2VjdGlvbik7XG5cdFx0Ly9zZXQgdGVtcFRpbWVzXG5cdFx0aW5pdEV2ZW50VGltZXMoKTtcblx0fVxuXG5cdC8vdmlldyBtb2RlbCBtZXRob2RzXG5cdHZtLmZvcm1hdER1cmF0aW9uID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9jYWxjIGR1cmF0aW9uXG5cdFx0dm0udGVtcFRpbWUuZHVyYXRpb24gPSBjYWxjdWxhdGVEdXJhdGlvbih2bS50ZW1wVGltZS5zdGFydCwgdm0udGVtcFRpbWUuZW5kKTtcblx0XHQkbG9nLmluZm8odm0udGVtcFRpbWUuZHVyYXRpb24pO1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGhvdXJzID0gTWF0aC5mbG9vcih2bS50ZW1wVGltZS5kdXJhdGlvbi8oNjApKTtcblx0XHR2YXIgbWluID0gdm0udGVtcFRpbWUuZHVyYXRpb24gJSA2MDtcblx0XHR2YXIgZnJhY3Rpb24gPSAoTWF0aC5yb3VuZChtaW4vMTUpLzQpO1xuXG5cdFx0JGxvZy5pbmZvKGhvdXJzICsgJyAnICsgbWluICsgJyAnICsgZnJhY3Rpb24pO1xuXHRcdHJldHVybiAoaG91cnMrZnJhY3Rpb24pICsgJyBoJztcblx0fVxuXG5cdHZtLnNldHRpbmdUZW1wU3RhcnQgPSBmdW5jdGlvbigpIHtcblx0XHR2bS50ZW1wVGltZS5lbmQgPSB2bS50ZW1wVGltZS5zdGFydDtcblx0fVxuXG5cdHZtLnNldHRpbmdUZW1wRW5kID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9zZXQgdmFsaWQgZW5kIHdpdGggc3RhcnRcblx0XHRpZih2bS50ZW1wVGltZS5zdGFydCA+IHZtLnRlbXBUaW1lLmVuZCkgdm0udGVtcFRpbWUuc3RhcnQgPSB2bS50ZW1wVGltZS5lbmQ7XG5cdFx0Ly9jYWxjIGR1cmF0aW9uXG5cdFx0dm0udGVtcFRpbWUuZHVyYXRpb24gPSBjYWxjdWxhdGVEdXJhdGlvbih2bS50ZW1wVGltZS5zdGFydCwgdm0udGVtcFRpbWUuZW5kKTtcblx0fVxuXG5cdHZtLmJhY2tUb1VzZXJFdmVudHMgPSBmdW5jdGlvbigpIHtcblx0XHQvL3NlbmQgdGhlIHVzZXIgYmFjayB0byB0aGUgcGFnZSB0aGV5IGNhbWUgZnJvbVxuXHRcdGhvc3RlZEV2ZW50U2hlcnBhLnJlZGlyZWN0VG8oJy91c2VyRXZlbnRzJywgJHJvdXRlUGFyYW1zLnVpZCk7XG5cdH1cblxuXHR2bS5zZWN0aW9uQmFjayA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vbW92ZSBiYWNrXG5cdFx0dGFyZ2V0U2VjdGlvbiA9IHZtLmFjdGl2ZVNlY3Rpb24gLSAxO1xuXHRcdGhvc3RlZEV2ZW50U2hlcnBhLnJlZGlyZWN0VG8oJy9ldmVudC9ob3N0JywgJHJvdXRlUGFyYW1zLmV2ZW50SWQsICRyb3V0ZVBhcmFtcy51aWQsIHRhcmdldFNlY3Rpb24pO1xuXHR9XHRcblxuXHR2bS5zZWN0aW9uRm9yd2FyZCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vbW92ZSBmb3J3YXJkXG5cdFx0dGFyZ2V0U2VjdGlvbiA9IHZtLmFjdGl2ZVNlY3Rpb24gKyAxO1xuXHRcdGhvc3RlZEV2ZW50U2hlcnBhLnJlZGlyZWN0VG8oJy9ldmVudC9ob3N0JywgJHJvdXRlUGFyYW1zLmV2ZW50SWQsICRyb3V0ZVBhcmFtcy51aWQsIHRhcmdldFNlY3Rpb24pO1xuXHR9XG5cblx0Ly90YWtlIGFjdGlvblxuXHRpbml0KCk7XG59XG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdMYW5kaW5nUGFnZUNvbnRyb2xsZXInLCBMYW5kaW5nUGFnZUNvbnRyb2xsZXIpO1xuXG5MYW5kaW5nUGFnZUNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnLCAnJGxvY2F0aW9uJywgJyRkb2N1bWVudCcsICckd2luZG93J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gTGFuZGluZ1BhZ2VDb250cm9sbGVyKCRzY29wZSwgJGxvZywgJGxvY2F0aW9uLCAkZG9jdW1lbnQsICR3aW5kb3cpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgYXV0aERhdGEgPSB7fTtcblx0dmFyIGN1cnJlbnRVc2VyRGF0YSA9IHt9O1xuXG5cdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHR2bS5zaG93UmVxdWlybm1lbnRzID0gZmFsc2U7XG5cdHZtLnZhbGlkTmV3TmFtZSA9IHsndmFsaWQnOmZhbHNlLCAnc3R5bGUnOntjb2xvcjonJ319O1xuXHR2bS52YWxpZE5ld0VtYWlsID0geyd2YWxpZCc6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOicnfX07XG5cdHZtLnNlY3VyZVBhc3N3b3JkID0geydzZWN1cmUnOmZhbHNlLCAnc3R5bGUnOntjb2xvcjonJ319O1xuXHR2bS51bmxvY2tDcmVhdGVVc2VyQnRuID0geyd1c2FibGUnOmZhbHNlLCAnY2xhc3MnOididG4gYnRuLXdhcm5pbmcnfTtcblx0dm0ubWVzc2FnZSA9ICd0ZXN0aW5nJztcblxuXHRcblx0dm0udmFsaWRVc2VyRW1haWwgPSB7J3ZhbGlkJzpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6Jyd9fTtcblx0dm0udmFsaWRVc2VyUGFzc3dvcmQgPSB7J3ZhbGlkJzpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6Jyd9fTtcblx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0biA9IHsndXNhYmxlJzpmYWxzZSwgJ2NsYXNzJzonYnRuIGJ0bi13YXJuaW5nJ307XG5cdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzID0ge1xuXHRcdDA6eydjb25zdHJhaW50JzonSXMgYXQgbGVhc3QgMTYgY2hhcmFjdGVycyBsb25nJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX0sXG5cdFx0MTp7J2NvbnN0cmFpbnQnOidJcyBubyBsb25nZXIgdGhhbiAxMDAgY2hhcmFjdGVycycsICdzdHlsZSc6e2NvbG9yOidyZWQnfSwgJ21ldCc6ZmFsc2V9LFxuXHRcdDI6eydjb25zdHJhaW50JzonQ29udGFpbnMgYXQgbGVhc3Qgb25lIHJlcXVpcmVkIHN5bWJvbCAoXFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqKScsICdzdHlsZSc6e2NvbG9yOidyZWQnfSwgJ21ldCc6ZmFsc2V9LFxuXHRcdDM6eydjb25zdHJhaW50JzonQ29udGFpbnMgYXQgbGVhc3Qgb25lIG51bWJlcicsICdzdHlsZSc6e2NvbG9yOidyZWQnfSwgJ21ldCc6ZmFsc2V9LFxuXHRcdDQ6eydjb25zdHJhaW50JzonQ29udGFpbnMgYXQgbGVhc3Qgb25lIGxvd2VyY2FzZSBsZXR0ZXInLCAnc3R5bGUnOntjb2xvcjoncmVkJ30sICdtZXQnOmZhbHNlfSxcblx0XHQ1OnsnY29uc3RyYWludCc6J0NvbnRhaW5zIGF0IGxlYXN0IG9uZSB1cHBlcmNhc2UgbGV0dGVyJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX0sXG5cdFx0Njp7J2NvbnN0cmFpbnQnOlwiRG9lc24ndCBoYXZlIGFueSBpbGxlZ2FsIGNoYXJhY3RlcnNcIiwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX1cblx0fTtcblxuXHQvL3ZhciB0aGVUZXN0Qm94ID0gYW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCkuZmluZCgnI3Rlc3RCb3gnKTtcblxuXHQvL3RoZVRlc3RCb3guY2hlY2tWYWxpZGl0eSgpO1xuXHQvL3NldEN1c3RvbVZhbGlkaXR5KCd5b3UgbmVlZCBzb21ldGhpbmcgZWxzZScpO1xuXG5cdC8vbG9jYWwgbWV0aG9kc1xuXHRmdW5jdGlvbiB1dGY4X3RvX2I2NChzdHIpIHtcblx0XHRyZXR1cm4gYnRvYShzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gYjY0X3RvX3V0Zjgoc3RyKSB7XG4gICAgXHRyZXR1cm4gYXRvYihzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKSB7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KHVuaXhUaW1lKSk7XG5cdH1cblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH1cblxuXHQvL2RlZmluZSBjb250cm9sbGVyIG1ldGhvZHNcblx0dm0uZGlzcGxheVBhc3NSZXFzID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodm0ubmV3TmFtZSAmJiB2bS5uZXdFbWFpbCkge1xuXHRcdFx0dm0uc2hvd1JlcXVpcm5tZW50cyA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZtLnNob3dSZXF1aXJubWVudHMgPSBmYWxzZTtcblx0XHR9XG5cdH1cblxuXHR2bS5jaGVja05ld05hbWUgPSBmdW5jdGlvbigpIHtcblx0XHRcblx0XHRpZih2bS5uZXdOYW1lKSB7XG5cdFx0XHRpZih2bS5uZXdOYW1lLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0dm0udmFsaWROZXdOYW1lLnZhbGlkID0gdHJ1ZTtcblx0XHRcdFx0dm0udmFsaWROZXdOYW1lLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0udmFsaWROZXdOYW1lLnZhbGlkID0gZmFsc2U7XG5cdFx0XHRcdHZtLnZhbGlkTmV3TmFtZS5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dm0ub3BlbkNyZWF0ZVVzZXJCdXR0b24oKTtcblx0fVxuXG5cdHZtLmNoZWNrTmV3RW1haWwgPSBmdW5jdGlvbiAoKSB7XG5cdFx0aWYodm0ubmV3RW1haWwpIHtcblx0XHRcdC8vY2hlY2sgdmFsaWRpdHlcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSsoPzpcXC5bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKSpAKD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1xcLikrW2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1wiLCBcIlwiKTtcblxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZtLm5ld0VtYWlsKSkge1xuXHRcdFx0XHR2bS52YWxpZE5ld0VtYWlsLnZhbGlkID0gdHJ1ZTtcblx0XHRcdFx0dm0udmFsaWROZXdFbWFpbC5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLnZhbGlkTmV3RW1haWwudmFsaWQgPSBmYWxzZTtcblx0XHRcdFx0dm0udmFsaWROZXdFbWFpbC5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdFx0XHR9XHRcdFx0XG5cdFx0fVxuXHRcdFxuXHRcdHZtLm9wZW5DcmVhdGVVc2VyQnV0dG9uKCk7XG5cdH1cblxuXHR2bS5jaGVja1VzZXJFbWFpbCA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHZtLnVzZXJFbWFpbCkge1xuXHRcdFx0Ly9jaGVjayB2YWxpZGl0eVxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XCIsIFwiXCIpO1xuXG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3Qodm0udXNlckVtYWlsKSkge1xuXHRcdFx0XHR2bS52YWxpZFVzZXJFbWFpbC52YWxpZCA9IHRydWU7XG5cdFx0XHRcdHZtLnZhbGlkVXNlckVtYWlsLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0udmFsaWRVc2VyRW1haWwudmFsaWQgPSBmYWxzZTtcblx0XHRcdFx0dm0udmFsaWRVc2VyRW1haWwuc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHZtLm9wZW5Vc2VyTG9naW5CdG4oKTtcblx0fVxuXG5cdHZtLmNoZWNrTmV3UGFzc3dvcmRzID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9mb3IgZWFjaCBwYXNzd29yZCBkZWZpbmUgdGhlIHBhdHRlcm4gdGhhdCB0aGUgcGFzc3dvcmQgbXVzdCBtYXRjaFxuXHRcdHZhciBjb25zdHJhaW50cyA9IHtcblx0IFx0XHQwOiBbJycsICcgeW91ciBwYXNzd29yZCBuZWVkcyB0byBiZSAxNiBjaGFyYWN0ZXJzIG9yIGxvbmdlciddLFxuXHQgXHRcdDE6IFsnJywgJyB5b3VyIHBhc3N3b3JkIG5lZWRzIHRvIGJlIGxlc3MgdGhhbiAxMDAgY2hhcmFjdGVycyddLFxuXHQgXHRcdDI6IFsnW1xcIVxcQFxcI1xcJFxcJVxcXlxcJlxcKl0nLCBcIiBubyByZXF1aXJlZCBzeW1ib2xzIGZvdW5kXCJdLFxuXHQgXHRcdDM6IFsnWzAtOV0nLCBcIiBubyBudW1iZXJzIGZvdW5kXCJdLFxuXHQgXHRcdDQ6IFsnW2Etel0nLCBcIiBubyBsb3dlcmNhc2UgbGV0dGVycyBmb3VuZFwiXSxcblx0IFx0XHQ1OiBbJ1tBLVpdJywgXCIgbm8gdXBwZXJjYXNlIGxldHRlcnMgZm91bmRcIl0sXG5cdCBcdFx0NjogWydbXkEtejAtOVxcIVxcQFxcI1xcJFxcJVxcXlxcJlxcKl0nLCBcIiBpbGxlZ2FsIGNoYXJhY3RlcnMgZm91bmRcIl0sXG4gXHRcdH07XG4gXHRcdFxuIFx0XHQvL2NoZWNrIGZvciBsZW5ndGhcbiBcdFx0aWYodm0ubmV3UGFzc3dvcmQpIHtcbiBcdFx0XHRpZih2bS5uZXdQYXNzd29yZC5sZW5ndGggPiAxNSkgeyBcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzBdLnN0eWxlID0ge2NvbG9yOidncmVlbid9OyBcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzBdLm1ldCA9IHRydWU7IFxuIFx0XHRcdH0gZWxzZSB7XG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1swXS5zdHlsZSA9IHtjb2xvcjoncmVkJ307IFxuIFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMF0ubWV0ID0gZmFsc2U7XG4gXHRcdFx0fVxuIFx0XHRcdGlmKHZtLm5ld1Bhc3N3b3JkLmxlbmd0aCA8PSAxMDApIHsgXG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1sxXS5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTsgXG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1sxXS5tZXQgPSB0cnVlO1xuIFx0XHRcdH0gZWxzZSB7XG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1sxXS5zdHlsZSA9IHtjb2xvcjoncmVkJ307IFxuIFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMV0ubWV0ID0gZmFsc2U7XG4gXHRcdFx0fVxuXG4gXHRcdFx0Ly9jaGVjayBjb25zdHJhaW50cyAyLTVcbiBcdFx0XHRmb3IoaSA9IDI7IGkgPCA2OyBpKyspIHtcblx0IFx0XHRcdC8vY2hlY2sgZm9yIHJlcXVpcmVkIHN5bWJvbHMsIHVwcGVyY2FzZSwgbG9zZXJjYXNlLCBhbmQgY2hhcmFjdGVyc1xuXHQgXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKGNvbnN0cmFpbnRzW2ldWzBdLCBcIlwiKTtcdFxuXG5cdCBcdFx0XHQvL3Rlc3QgZWFjaCBjb25zdHJhdGludFxuXHQgXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZtLm5ld1Bhc3N3b3JkKSkge1xuXHQgXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1tpXS5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0IFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbaV0ubWV0ID0gdHJ1ZTtcblx0IFx0XHRcdH0gZWxzZSB7XG5cdCBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzW2ldLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0IFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbaV0ubWV0ID0gZmFsc2U7XG5cdCBcdFx0XHR9XG5cdCBcdFx0fVxuXG5cdCBcdFx0Ly9jaGVjayBpbGxlZ2FsIGNoYXJhY3RlcnNcblx0IFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoY29uc3RyYWludHNbNl1bMF0sIFwiXCIpO1xuXG5cdCBcdFx0Ly9ydW4gdGhlIGNoZWNrXG5cdCBcdFx0aWYoIWNvbnN0cmFpbnQudGVzdCh2bS5uZXdQYXNzd29yZCkpIHtcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzZdLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzZdLm1ldCA9IGZhbHNlO1xuXHQgXHRcdH0gZWxzZSB7XG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1s2XS5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzZdLm1ldCA9IHRydWU7XG5cdCBcdFx0fVxuXG5cdCBcdFx0Ly9pZiBhbGwgY29uc3RyYWlucyBtZXQsIHRocm93IHZhbGlkIHBhc3MgZmxhZ1xuXHQgXHRcdGlmKCB2bS5wYXNzd29yZFJlcXVpcm5tZW50c1swXS5tZXQgJiZcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzFdLm1ldCAmJlxuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMl0ubWV0ICYmXG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1szXS5tZXQgJiZcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzRdLm1ldCAmJlxuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNV0ubWV0ICYmXG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1s2XS5tZXQpIHtcblx0IFx0XHRcdHZtLnNlY3VyZVBhc3N3b3JkLnNlY3VyZSA9IHRydWVcblx0IFx0XHR9IGVsc2Uge1xuXHQgXHRcdFx0dm0uc2VjdXJlUGFzc3dvcmQuc2VjdXJlID0gZmFsc2U7XG5cdCBcdFx0fVxuXG5cdCBcdFx0aWYodm0uc2VjdXJlUGFzc3dvcmQuc2VjdXJlKSB7XG5cdCBcdFx0XHR2bS5zZWN1cmVQYXNzd29yZC5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0IFx0XHR9IGVsc2Uge1xuXHQgXHRcdFx0dm0uc2VjdXJlUGFzc3dvcmQuc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHQgXHRcdH1cbiBcdFx0fVxuIFx0XHRcbiBcdFx0dm0ub3BlbkNyZWF0ZVVzZXJCdXR0b24oKTtcblx0fVxuXG5cdHZtLmNoZWNrVXNlclBhc3N3b3JkcyA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHZtLnVzZXJQYXNzd29yZCkge1xuXHRcdFx0aWYodm0udXNlclBhc3N3b3JkLmxlbmd0aCA+IDE1KSB7XG5cdFx0XHRcdHZtLnZhbGlkVXNlclBhc3N3b3JkLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHRcdFx0XHR2bS52YWxpZFVzZXJQYXNzd29yZC52YWxpZCA9IHRydWU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS52YWxpZFVzZXJQYXNzd29yZC5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdFx0XHRcdHZtLnZhbGlkVXNlclBhc3N3b3JkLnZhbGlkID0gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHR9XG5cdFx0XG5cdFx0dm0ub3BlblVzZXJMb2dpbkJ0bigpO1xuXHR9XG5cblx0dm0ub3BlbkNyZWF0ZVVzZXJCdXR0b24gPSBmdW5jdGlvbigpIHtcblx0XHRpZih2bS52YWxpZE5ld05hbWUudmFsaWQgJiYgdm0udmFsaWROZXdFbWFpbC52YWxpZCAmJiB2bS5zZWN1cmVQYXNzd29yZC5zZWN1cmUpIHtcblx0XHRcdHZtLnVubG9ja0NyZWF0ZVVzZXJCdG4uY2xhc3MgPSAnYnRuIGJ0bi1zdWNjZXNzJztcblx0XHRcdHZtLnVubG9ja0NyZWF0ZVVzZXJCdG4udXNhYmxlID0gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dm0udW5sb2NrQ3JlYXRlVXNlckJ0bi5jbGFzcyA9ICdidG4gYnRuLXdhcm5pbmcnO1xuXHRcdFx0dm0udW5sb2NrQ3JlYXRlVXNlckJ0bi51c2FibGUgPSBmYWxzZTtcdFxuXHRcdH1cblxuXHR9XG5cblx0dm0ub3BlblVzZXJMb2dpbkJ0biA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHZtLnZhbGlkVXNlckVtYWlsLnZhbGlkICYmIHZtLnZhbGlkVXNlclBhc3N3b3JkLnZhbGlkKSB7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLmNsYXNzID0gJ2J0biBidG4tc3VjY2Vzcyc7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLnVzYWJsZSA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4uY2xhc3MgPSAnYnRuIGJ0bi13YXJuaW5nJztcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlID0gZmFsc2U7XHRcblx0XHR9XG5cdH1cblxuXHR2bS51cGRhdGUgPSBmdW5jdGlvbigpIHtcblx0XHQvL3NldCB2YWx1ZXNcblx0XHR2bS5uZXdOYW1lID0gJGRvY3VtZW50LmZpbmQoJyNuZXdOYW1lJylbMF0udmFsdWU7XG5cdFx0dm0ubmV3RW1haWwgPSAkZG9jdW1lbnQuZmluZCgnI25ld0VtYWlsJylbMF0udmFsdWU7XG5cdFx0dm0udXNlckVtYWlsID0gJGRvY3VtZW50LmZpbmQoJyN1c2VyRW1haWwnKVswXS52YWx1ZTtcblx0XHRcblx0XHR2bS5jaGVja05ld05hbWUoKTtcblx0XHR2bS5jaGVja05ld0VtYWlsKCk7XG5cdFx0dm0uY2hlY2tVc2VyRW1haWwoKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHJlZGlyZWN0KHBhdGgsIHVzZXJEYXRhKSB7XG5cdFx0dmFyIGZ1bGxQYXRoID0gcGF0aCArICcvJyArIGN1cnJlbnRVc2VyRGF0YS51aWQgKyAnLycgKyBjdXJyZW50VXNlckRhdGEudG9rZW47XG5cdFx0Ly9yZWRpcmVjdFxuXHRcdCRsb2cuaW5mbygncmVkaXJlY3RpbmcgdG86ICcgKyBmdWxsUGF0aCk7XG5cdFx0JGxvY2F0aW9uLnBhdGgoZnVsbFBhdGgpO1xuXHRcdCRzY29wZS4kYXBwbHkoKTtcblx0fVxuXG5cdHZtLmNyZWF0ZU5ld1VzZXIgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9nLmluZm8oJ0NyZWF0aW5nIGEgbmV3IHVzZXIgYWNjb3VudCBub3chJyk7XG5cblx0XHRpZih2bS51bmxvY2tDcmVhdGVVc2VyQnRuLnVzYWJsZSkge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVcblx0XHRcdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXG5cdFx0XHRyZWYuY3JlYXRlVXNlcih7XG5cdFx0XHRcdGVtYWlsOnZtLm5ld0VtYWlsLFxuXHRcdFx0XHRwYXNzd29yZDp2bS5uZXdQYXNzd29yZFxuXHRcdFx0fSxmdW5jdGlvbihlcnJvciwgdXNlckRhdGEpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ0Vycm9yIGNyZWF0aW5nIHVzZXI6ICcgKyBlcnJvcik7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly9sb2cgcmVzdWx0c1xuXHRcdFx0XHRcdCRsb2cuaW5mbyh1c2VyRGF0YSk7XG5cblx0XHRcdFx0XHQvL3NhdmUgYWxsIHRoZSBkYXRhXG5cdFx0XHRcdFx0Y3VycmVudFVzZXJEYXRhID0gdXNlckRhdGE7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly9nZW5lcmF0ZSB0aGUgdXNlciByZWNvcmRcblx0XHRcdFx0XHR2YXIgdXNlcnNSZWYgPSByZWYuY2hpbGQoJ1VzZXJzLycgKyB1c2VyRGF0YS51aWQpO1xuXHRcdFx0XHRcdHZhciBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XG5cblx0XHRcdFx0XHQvL3dyaXRlIG5ldyB1c2VyIHRvIHRoZSBkYXRhYmFzZSB3aXRoIGJpbyBpbmZvXG5cdFx0XHRcdFx0dXNlcnNSZWYuc2V0KHsgXG5cdFx0XHRcdFx0XHQnYmlvJzoge1xuXHRcdFx0XHRcdFx0XHQnbmFtZSc6IHZtLm5ld05hbWUsXG5cdFx0XHRcdFx0XHRcdCdlbWFpbCc6IHZtLm5ld0VtYWlsXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0J2V2ZW50cyc6IHtcblx0XHRcdFx0XHRcdFx0J3BlbmRpbmcnOiB7XG5cdFx0XHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdCdob3N0aW5nJzoge1xuXHRcdFx0XHRcdFx0XHRcdCd1cGRhdGVkJzogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHQnYXR0ZW5kaW5nJzoge1xuXHRcdFx0XHRcdFx0XHRcdCd1cGRhdGVkJzogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHQnY29tcGxldGVkJzoge1xuXHRcdFx0XHRcdFx0XHRcdCd1cGRhdGVkJzogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0XHRcdGlmKGVycm9yKSB7XG5cdFx0XHRcdFx0XHRcdCRsb2cuaW5mbygnRGF0YSBjb3VsZCBub3QgYmUgc2F2ZWQ6ICcgKyBlcnJvcik7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQkbG9nLmluZm8oJ0RhdGEgc2F2ZWQgc3VjY2Vzc2Z1bGx5LicpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdC8vYWRkIHRoaXMgdXNlciB0byB0aGUgbGlzdCBvZiByZWdpc3RlcmVkIHVzZXJzXG5cdFx0XHRcdFx0cmVmLmNoaWxkKCdVaWRzJykuY2hpbGQodXRmOF90b19iNjQodm0ubmV3RW1haWwpKS5zZXQoY3VycmVudFVzZXJEYXRhLnVpZCwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oXCJEYXRhIGNvdWxkIG5vdCBiZSBzYXZlZC4gXCIgKyBlcnJvcik7XG5cdFx0XHRcdFx0XHRlbHNlICRsb2cuaW5mbyhcInVpZCBjcmVhdGVkIHN1Y2Vzc2Z1bGx5LlwiKTtcblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdC8vcmVkaXJlY3QgdG8gVXNlckluZm9ybWF0aW9uXG5cdFx0XHRcdFx0cmVkaXJlY3QoJy91c2VySW5mb3JtYXRpb24nLCBjdXJyZW50VXNlckRhdGEpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdH1cblx0fVxuXG5cdHZtLmxvZ2luUmVnaXN0ZXJlZFVzZXIgPSBmdW5jdGlvbigpIHtcblxuXHRcdGlmKHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlKSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZVxuXHRcdFx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cblx0XHRcdC8vYXV0aGVudGljYXRlIHRoZSB1c2VyXG5cdFx0XHRyZWYuYXV0aFdpdGhQYXNzd29yZCh7XG5cdFx0XHRcdGVtYWlsOiB2bS51c2VyRW1haWwsXG5cdFx0XHRcdHBhc3N3b3JkOiB2bS51c2VyUGFzc3dvcmRcblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yLCBhdXRoRGF0YSkge1xuXHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnRXJyb3IgTG9nZ2luZyBJbjogJyArIGVycm9yKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ0xvZ2dlZCBJbiBzdWNjZXNzZnVsbHk6ICcgKyBhdXRoRGF0YS51aWQpO1xuXHRcdFx0XHRcdCRsb2cuaW5mbyhhdXRoRGF0YSk7XG5cdFx0XHRcdFx0Ly9zYXZlIGFsbCB0aGUgZGF0YVxuXHRcdFx0XHRcdGN1cnJlbnRVc2VyRGF0YSA9IGF1dGhEYXRhO1xuXG5cdFx0XHRcdFx0Ly9sb2FkIHVzZXIgYmlvXG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly9sb2FkIHVzZXIgZXZlbnRzXG5cblx0XHRcdFx0XHQvL3JlZGlyZWN0XG5cdFx0XHRcdFx0cmVkaXJlY3QoJy91c2VySW5mb3JtYXRpb24nLCBjdXJyZW50VXNlckRhdGEpO1xuXHRcdFx0XHRcdCRzY29wZS4kYXBwbHkoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHR9XG5cblx0fVxuXG5cdHZtLmFsZXJ0TWUgPSBmdW5jdGlvbigpIHtcblx0XHRhbGVydCgndGhpcyBpcyB3b3JraW5nISBhbiBhbGVydCEnKTtcblx0fVxuXG5cdHZtLm9uUmVzaXplRnVuY3Rpb24gPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgaW5wdXRUZXh0ID0gYW5ndWxhci5lbGVtZW50KCcuaW5wdXRUZXh0Jyk7XG5cdFx0aWYoJHdpbmRvdy5vdXRlcldpZHRoID4gJHdpbmRvdy5vdXRlckhlaWdodCkge1xuXHRcdFx0aW5wdXRUZXh0LmNzcygnZm9udC1zaXplJywgJzJlbScpO1xuXHRcdFx0JGxvZy5pbmZvKCdtYWtpbmcgYmlnZ2VyJyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlucHV0VGV4dC5jc3MoJ2ZvbnQtc2l6ZScsICcxLjJlbScpO1xuXHRcdH1cblx0fVxuXG5cdC8vZXZlbnQgbGlzdGVuZXJzXG5cdGlmICgnYWRkRXZlbnRMaXN0ZW5lcicgaW4gJGRvY3VtZW50KSB7XG5cdCAgICAkZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkge1xuXHQgICAgXHQkbG9nLmluZm8oJ2FkZGluZyBGYXN0Q2xpY2snKTtcblx0ICAgICAgICBGYXN0Q2xpY2suYXR0YWNoKCRkb2N1bWVudC5ib2R5KTtcblx0ICAgIH0sIGZhbHNlKTtcblx0fVxuXG5cdGFuZ3VsYXIuZWxlbWVudCgkd2luZG93KS5iaW5kKCdyZXNpemUnLCBmdW5jdGlvbigpIHtcblx0XHR2bS5vblJlc2l6ZUZ1bmN0aW9uKCk7XG5cdFx0Ly8kc2NvcGUuJGFwcGx5KCk7XG5cdH0pO1xuXG5cdGFuZ3VsYXIuZWxlbWVudCgkZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXHRcdGlmKCR3aW5kb3cub3V0ZXJXaWR0aCA8IDYwMCkge1xuXHRcdFx0dm0ub25SZXNpemVGdW5jdGlvbigpO1xuXHRcdFx0Ly8kc2NvcGUuJGFwcGx5KCk7XG5cdFx0fVxuXHR9KVxuXG5cblx0IHZtLm1hc3RlciA9IHt9O1xuXG5cdCAgdm0udXBkYXRlID0gZnVuY3Rpb24odXNlcikge1xuXHQgICAgdm0ubWFzdGVyID0gYW5ndWxhci5jb3B5KHVzZXIpO1xuXHQgIH07XG5cblx0ICB2bS5yZXNldCA9IGZ1bmN0aW9uKGZvcm0pIHtcblx0ICAgIGlmIChmb3JtKSB7XG5cdCAgICAgIGZvcm0uJHNldFByaXN0aW5lKCk7XG5cdCAgICAgIGZvcm0uJHNldFVudG91Y2hlZCgpO1xuXHQgICAgfVxuXHQgICAgdm0udXNlciA9IGFuZ3VsYXIuY29weSh2bS5tYXN0ZXIpO1xuXHQgIH07XG5cblx0ICB2bS5yZXNldCgpO1xufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignTWFpbkNvbnRyb2xsZXInLCBNYWluQ29udHJvbGxlcik7XG5cbk1haW5Db250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJGxvY2F0aW9uJywgJyRkb2N1bWVudCcsICckd2luZG93J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gTWFpbkNvbnRyb2xsZXIoJGxvZywgJGxvY2F0aW9uLCAkZG9jdW1lbnQsICR3aW5kb3cpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTsgXG5cblx0ZnVuY3Rpb24gcmVzaXplQkdJbWFnZSgpIHtcblx0XHR2YXIgYm9keSA9IGFuZ3VsYXIuZWxlbWVudCgkZG9jdW1lbnQpO1xuXHRcdCRkb2N1bWVudC5jc3MoJ2hpZ2h0JywgJHdpbmRvdy5vdXRlckhlaWdodClcblx0fVxuXG5cdHZtLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xuXHRcdGFsZXJ0KCdsb2dnaW5nIHlvdSBvdXQhJyk7XG5cdFx0cmVmLnVuYXV0aCgpO1xuXHRcdCRsb2NhdGlvbi5wYXRoKCcvJyk7XG5cdH07XG5cblx0YW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cdFx0Ly9GYXN0Q2xpY2suYXR0YWNoKCRkb2N1bWVudC5ib2R5KTtcblx0XHRyZXNpemVCR0ltYWdlKCk7XG5cdH0pXG59XG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdOZXdVc2VyU2lnblVwQ29udHJvbGxlcicsIE5ld1VzZXJTaWduVXBDb250cm9sbGVyKTtcblxuTmV3VXNlclNpZ25VcENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnLCAndmFsaWRhdGlvbicsICdiYWNrZW5kU2VydmljZXMnLCAndHJhZmZpY1ZhbGV0JywgJ3VzZXJEYXRhJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gTmV3VXNlclNpZ25VcENvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCB2YWxpZGF0aW9uLCBiYWNrZW5kU2VydmljZXMsIHRyYWZmaWNWYWxldCwgdXNlckRhdGEpIHtcblx0dmFyIHZtID0gdGhpcztcblxuXHQvL2RlZmluZSB2bSBpbnB1dCB2YXJpYWJsZXNcblx0dm0uaW5wdXRzID0ge1xuXHRcdG5ld05hbWU6ICcnLFxuXHRcdG5ld0VtYWlsOiAnJyxcblx0XHRuZXdQYXNzd29yZDogJycsXG5cdFx0cmVxdWlyZWRGaWVsZHNEZWZpbmVkOiBmYWxzZVxuXHR9XG5cdHZtLmVycm9ycyA9IHtcblx0XHRuYW1lOiAnJyxcblx0XHRlbWFpbDogJycsXG5cdFx0cGFzc3dvcmQ6IGZhbHNlLFxuXHRcdHBhc3Nlc0FsbFRlc3RzOiBmYWxzZVxuXHR9XG5cdHZtLnBhc3NSZXFzID0ge1xuXHRcdDA6IHsgaWQ6JycsIHJlcTonSXMgYXQgbGVhc3QgMTYgY2hhcmFjdGVycyBsb25nJywgZnVsZmlsbGVkOmZhbHNlLCAnc3R5bGUnOntjb2xvcjoncmVkJ319LFxuXHRcdDE6IHsgaWQ6JycsIHJlcTonSXMgbm8gbG9uZ2VyIHRoYW4gMTAwIGNoYXJhY3RlcnMnLCBmdWxmaWxsZWQ6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOidyZWQnfSB9LFxuXHRcdDI6IHsgaWQ6JycsIHJlcTonQ29udGFpbnMgYXQgbGVhc3Qgb25lIGxvd2VyY2FzZSBsZXR0ZXInLCBmdWxmaWxsZWQ6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOidyZWQnfSB9LFxuXHRcdDM6IHsgaWQ6JycsIHJlcTonQ29udGFpbnMgYXQgbGVhc3Qgb25lIHVwcGVyY2FzZSBsZXR0ZXInLCBmdWxmaWxsZWQ6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOidyZWQnfSB9LFxuXHRcdDQ6IHsgaWQ6JycsIHJlcTonQ29udGFpbnMgYXQgbGVhc3Qgb25lIG51bWJlcicsIGZ1bGZpbGxlZDpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9IH0sXG5cdFx0NTogeyBpZDonJywgcmVxOidDb250YWlucyBhdCBsZWFzdCBvbmUgcmVxdWlyZWQgc3ltYm9sIChcXCFcXEBcXCNcXCRcXCVcXF5cXCZcXCopJywgZnVsZmlsbGVkOmZhbHNlLCAnc3R5bGUnOntjb2xvcjoncmVkJ30gfSxcblx0XHQ2OiB7IGlkOicnLCByZXE6XCJEb2Vzbid0IGhhdmUgYW55IGlsbGVnYWwgY2hhcmFjdGVyc1wiLCBmdWxmaWxsZWQ6dHJ1ZSwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9IH1cblx0fVxuXHR2bS5zaG93UmVxc0JveCA9IGZhbHNlO1xuXG5cdC8vZGVmaW5lIHJlcXVpcmVkIGZpZWxkIGNvbnN0cmFpbnRzXG5cdHZhciBzaWdudXBWYWxpZGF0aW9uID0gdmFsaWRhdGlvbjtcblxuXHQvL2RlZmluZSBjb250cm9sbGVyIG1ldGhvZHNcblx0ZnVuY3Rpb24gdmVyaWZ5UmVxdWlybm1lbnRzKCkge1xuXHRcdGlmKHZtLmVycm9ycy5uYW1lID09ICcnICYmIHZtLmVycm9ycy5lbWFpbCA9PSAnJyAmJiAhdm0uZXJyb3JzLnBhc3N3b3JkKSB2bS5lcnJvcnMucGFzc2VzQWxsVGVzdHMgPSB0cnVlO1xuXHRcdGVsc2Ugdm0uZXJyb3JzLnBhc3Nlc0FsbFRlc3RzID0gZmFsc2U7XG5cblx0XHRpZiggYW5ndWxhci5pc0RlZmluZWQodm0uaW5wdXRzLm5ld05hbWUpICYmIHZtLmlucHV0cy5uZXdOYW1lICE9PSAnJyAmJlxuXHRcdFx0YW5ndWxhci5pc0RlZmluZWQodm0uaW5wdXRzLm5ld0VtYWlsKSAmJiB2bS5pbnB1dHMubmV3RW1haWwgIT09ICcnICYmXG5cdFx0XHRhbmd1bGFyLmlzRGVmaW5lZCh2bS5pbnB1dHMubmV3UGFzc3dvcmQpICYmIHZtLmlucHV0cy5uZXdQYXNzd29yZCAhPT0gJycpIFxuXHRcdFx0XHR2bS5pbnB1dHMucmVxdWlyZWRGaWVsZHNEZWZpbmVkID0gdHJ1ZTtcblx0XHRlbHNlIHZtLmlucHV0cy5yZXF1aXJlZEZpZWxkc0RlZmluZWQgPSBmYWxzZTtcblx0fVxuXG5cdC8vZGVmaW5lIHZtIGFjY2Vzc2libGUgbWV0aG9kc1xuXHR2bS5jaGVja05ld05hbWUgPSBmdW5jdGlvbigpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlXG5cdFx0dmFyIGVycm9ycyA9IFtdO1xuXHRcdHZhciBoYXNOYW1lID0gc2lnbnVwVmFsaWRhdGlvbi5yZXF1aXJlZCh2bS5pbnB1dHMubmV3TmFtZSk7XG5cdFx0dmFyIGxvbmdFbm91Z2ggPSBzaWdudXBWYWxpZGF0aW9uLm1pbk5hbWVMZW5ndGgodm0uaW5wdXRzLm5ld05hbWUpXG5cdFx0XG5cdFx0Ly9sb2cgZXJyb3JzXG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoaGFzTmFtZSkpIGVycm9ycy5wdXNoKGhhc05hbWUpO1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGxvbmdFbm91Z2gpKSBlcnJvcnMucHVzaChsb25nRW5vdWdoKTtcblxuXHRcdC8vdXBkYXRlIHRoZSBlcnJvcnMgbW9kZWxcblx0XHRpZihlcnJvcnMubGVuZ3RoID4gMCkgdm0uZXJyb3JzLm5hbWUgPSBlcnJvcnMuam9pbignLCAnKTtcblx0XHRlbHNlIHZtLmVycm9ycy5uYW1lID0gJyc7XG5cblx0XHR2ZXJpZnlSZXF1aXJubWVudHMoKTtcblx0fVxuXG5cdHZtLmNoZWNrTmV3RW1haWwgPSBmdW5jdGlvbigpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlXG5cdFx0dmFyIGVycm9ycyA9IFtdO1xuXHRcdHZhciBoYXNFbWFpbCA9IHNpZ251cFZhbGlkYXRpb24ucmVxdWlyZWQodm0uaW5wdXRzLm5ld0VtYWlsKTtcblx0XHR2YXIgaXNBbkVtYWlsID0gc2lnbnVwVmFsaWRhdGlvbi5lbWFpbCh2bS5pbnB1dHMubmV3RW1haWwpO1xuXHRcdFxuXHRcdC8vbG9nIGVycm9yc1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGhhc0VtYWlsKSkgZXJyb3JzLnB1c2goaGFzRW1haWwpO1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGlzQW5FbWFpbCkpIGVycm9ycy5wdXNoKGlzQW5FbWFpbCk7XG5cblx0XHQvL3VwZGF0ZSB0aGUgZXJyb3JzIG1vZGVsXG5cdFx0aWYoZXJyb3JzLmxlbmd0aCA+IDApIHZtLmVycm9ycy5lbWFpbCA9IGVycm9ycy5qb2luKCcsICcpO1xuXHRcdGVsc2Ugdm0uZXJyb3JzLmVtYWlsID0gJyc7XG5cblx0XHR2ZXJpZnlSZXF1aXJubWVudHMoKTtcblx0fVxuXG5cdHZtLmNoZWNrTmV3UGFzc3dvcmQgPSBmdW5jdGlvbigpIHtcblx0XHQvL2ZsaXAgb24gcmVxcyBib3hcblx0XHR2bS5zaG93UmVxc0JveCA9IHRydWU7XG5cblx0XHQvL2xvY2FsIHZhcmlhYmxlXG5cdFx0dmFyIGVycm9ycyA9IFtdO1xuXHRcdHZhciBoYXNQYXNzd29yZCA9IHNpZ251cFZhbGlkYXRpb24ucmVxdWlyZWQodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKTtcblx0XHR2YXIgc3BlY2lmaWNSZXFzID0gW1xuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5taW5QYXNzTGVuZ3RoKHZtLmlucHV0cy5uZXdQYXNzd29yZCksXG5cdFx0XHRzaWdudXBWYWxpZGF0aW9uLm1heFBhc3NMZW5ndGgodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKSxcblx0XHRcdHNpZ251cFZhbGlkYXRpb24uYXRMZWFzdE9uZUxvd2VyY2FzZSh2bS5pbnB1dHMubmV3UGFzc3dvcmQpLFxuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5hdExlYXN0T25lVXBwZXJjYXNlKHZtLmlucHV0cy5uZXdQYXNzd29yZCksXG5cdFx0XHRzaWdudXBWYWxpZGF0aW9uLmF0TGVhc3RPbmVOdW1iZXIodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKSxcblx0XHRcdHNpZ251cFZhbGlkYXRpb24uYXRMZWFzdE9uZVN5bWJvbCh2bS5pbnB1dHMubmV3UGFzc3dvcmQpLFxuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5pbGxlZ2FsQ2hhcmFjdGVyKHZtLmlucHV0cy5uZXdQYXNzd29yZClcblx0XHRdO1xuXG5cdFx0Ly9sb2cgZXJyb3JzXG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoaGFzUGFzc3dvcmQpKSBlcnJvcnMucHVzaChoYXNQYXNzd29yZCk7XG5cblx0XHQvL3VwZGF0ZSB0aGUgZXJyb3JzIG1vZGVsXG5cdFx0aWYoZXJyb3JzLmxlbmd0aCA+IDApIHZtLmVycm9ycy5wYXNzd29yZCA9IGVycm9ycy5qb2luKCcsICcpO1xuXHRcdGVsc2Ugdm0uZXJyb3JzLmVtYWlsID0gJyc7XG5cblx0XHQvL3VwZGF0ZSByZXFzIG1vZGVsXG5cdFx0dmFyIGFueUVycm9ycyA9IGZhbHNlO1xuXHRcdGZvcihpPTA7IGk8NzsgaSsrKSB7XG5cdFx0XHRpZihzcGVjaWZpY1JlcXNbaV0pIHtcblx0XHRcdFx0dm0ucGFzc1JlcXNbaV0uZnVsZmlsbGVkID0gdHJ1ZTtcblx0XHRcdFx0dm0ucGFzc1JlcXNbaV0uc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS5wYXNzUmVxc1tpXS5mdWxmaWxsZWQgPSBmYWxzZTtcblx0XHRcdFx0dm0ucGFzc1JlcXNbaV0uc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHRcdFx0XHRhbnlFcnJvcnMgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHZtLmVycm9ycy5wYXNzd29yZCA9IGFueUVycm9ycztcblx0XHR2ZXJpZnlSZXF1aXJubWVudHMoKTtcblx0fVxuXG5cdHZtLmV4aXRQYXNzd29yZCA9IGZ1bmN0aW9uKCkge1xuXHRcdHZtLmNoZWNrTmV3UGFzc3dvcmQoKTtcblx0XHR2bS5zaG93UmVxc0JveCA9IGZhbHNlO1xuXHR9XG5cblx0dm0uY3JlYXRlTmV3VXNlciA9IGZ1bmN0aW9uICgpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIG5ld1VzZXJTaGVycGEgPSB0cmFmZmljVmFsZXQ7XG5cblx0XHQvL2NvbmZpcm0gYWxsIGZpZWxkcyBhcmUgdmFsaWRcblx0XHRpZih2bS5lcnJvcnMucGFzc2VzQWxsVGVzdHMgJiYgdm0uaW5wdXRzLnJlcXVpcmVkRmllbGRzRGVmaW5lZCkge1xuXHRcdFx0XG5cdFx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgY3JlYXRlTmV3VXNlciA9IGJhY2tlbmRTZXJ2aWNlcztcblx0XHRcdHZhciBuZXdVc2VyRGF0YSA9IHVzZXJEYXRhO1xuXHRcdFx0dmFyIHRoaXNVSUQ7XG5cblx0XHRcdC8vY3JlYXRlIHRoZSBuZXcgdXNlciBpbiB0aGUgZGF0YWJhc2Vcblx0XHRcdGNyZWF0ZU5ld1VzZXIuY3JlYXRlTmV3VXNlcih2bS5pbnB1dHMubmV3RW1haWwsIHZtLmlucHV0cy5uZXdQYXNzd29yZClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKGRiVXNlckRhdGEpIHtcblx0XHRcdFx0XG5cdFx0XHRcdC8vbWFpbnRhaW4gbG9jYWwgdmFsdWVzIHRvIHNwZWVkIHVwIHVzZXIgZXhwZXJpZW5jZVxuXHRcdFx0XHRuZXdVc2VyRGF0YS5sb2FkUHJpbWFyaWVzKHZtLmlucHV0cy5uZXdFbWFpbCwgdm0uaW5wdXRzLm5ld05hbWUsIGRiVXNlckRhdGEudWlkKTtcblxuXHRcdFx0XHQvL2NyZWF0ZSBhIHVzZXIgcHJvZmlsZSBpbiB0aGUgZGF0YWJhc2Vcblx0XHRcdFx0Y3JlYXRlTmV3VXNlci5hZGROZXdVc2VyVG9EYXRhYmFzZShkYlVzZXJEYXRhLnVpZCwgdm0uaW5wdXRzLm5ld05hbWUsIHZtLmlucHV0cy5uZXdFbWFpbClcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24obWVzc2FnZSkge1xuXG5cdFx0XHRcdFx0JGxvZy5pbmZvKG1lc3NhZ2UpO1xuXG5cdFx0XHRcdFx0Ly9hZGQgdGhpcyB1c2VyIHRvIHRoZSBsaXN0IG9mIHJlZ2lzdGVyZWQgdXNlcnNcblx0XHRcdFx0XHRjcmVhdGVOZXdVc2VyLmFkZE5ld1VzZXJUb1JlZ1VzZXJzTGlzdChkYlVzZXJEYXRhLnVpZCwgdm0uaW5wdXRzLm5ld0VtYWlsKVxuXHRcdFx0XHRcdC50aGVuKGZ1bmN0aW9uKG1lc3NhZ2UpIHtcblxuXHRcdFx0XHRcdFx0Ly9yZWRpcmVjdCB1c2luZyB0aGUgdWlkXG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdC8vcmVkaXJlY3QgdG8gdGhlIG5leHQgcGFnZSBcblx0XHRcdFx0XHRcdG5ld1VzZXJTaGVycGEucmVkaXJlY3RUbygnL3VzZXJJbmZvcm1hdGlvbicsIGRiVXNlckRhdGEudWlkKTtcblx0XHRcdFx0XHRcdCBcblx0XHRcdFx0XHRcdCRsb2cuaW5mbyhtZXNzYWdlKTsgXG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyAkbG9nLmluZm8obWVzc2FnZSk7IH0pXG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5jYXRjaChmdW5jdGlvbihtZXNzYWdlKSB7ICRsb2cuaW5mbyhtZXNzYWdlKTsgfSlcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyAkbG9nLmluZm8obWVzc2FnZSk7IH0pXG5cdFx0XHRcblx0XHR9XG5cblx0fVxuXHRcblx0Ly9ydW4gdGltZSBhY3Rpb25zXG5cbn1cblxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignUmVnVXNlckxvZ2luQ29udHJvbGxlcicsIFJlZ1VzZXJMb2dpbkNvbnRyb2xsZXIpO1xuXG5SZWdVc2VyTG9naW5Db250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJGRvY3VtZW50JywgJ2JhY2tlbmRTZXJ2aWNlcycsICd0cmFmZmljVmFsZXQnLCAndXNlckRhdGEnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBSZWdVc2VyTG9naW5Db250cm9sbGVyKCRsb2csICRkb2N1bWVudCwgYmFja2VuZFNlcnZpY2VzLCB0cmFmZmljVmFsZXQsIHVzZXJEYXRhKSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cblx0Ly9kZWZpbmUgdm0gaW5wdXQgdmFyaWFibGVzXG5cdHZtLmlucHV0cyA9IHtcblx0XHRlbWFpbDogJycsXG5cdFx0cGFzc3dvcmQ6ICcnLFxuXHRcdHJlcXVpcmVkRmllbGRzRGVmaW5lZDogZmFsc2Vcblx0fVxuXHR2bS5lcnJvcnMgPSB7XG5cdFx0bWVzc2FnZTogJycsXG5cdFx0cGFzc2VzQWxsVGVzdHM6IHRydWVcblx0fVxuXHR2bS51bmNsb2NrVXNlckxvZ2luQnRuID0ge1xuXHRcdCd1c2FibGUnOmZhbHNlLCBcblx0XHQnY2xhc3MnOididG4gYnRuLXdhcm5pbmcnLFxuXHRcdG1lc3NhZ2U6ICdOZWVkIEVtYWlsICYgUGFzcydcblx0fVxuXG5cdC8vbWV0aG9kc1xuXHRmdW5jdGlvbiBvcGVuVXNlckxvZ2luQnRuKCkge1xuXHRcdC8vY2hlY2sgdGhhdCB0aGVyZSBpcyBhbiBlbWFpbCBhbmQgdGhlcmUgaXMgYSBwYXNzd29yZFxuXHRcdGlmKFx0YW5ndWxhci5pc0RlZmluZWQodm0uaW5wdXRzLmVtYWlsKSAmJiB2bS5pbnB1dHMuZW1haWwgIT09ICcnICYmXG5cdFx0XHRhbmd1bGFyLmlzRGVmaW5lZCh2bS5pbnB1dHMucGFzc3dvcmQpICYmIHZtLmlucHV0cy5wYXNzd29yZCAhPT0gJycpIFxuXHRcdHtcblx0XHRcdHZtLmlucHV0cy5yZXF1aXJlZEZpZWxkc0RlZmluZWQgPSB0cnVlO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi5jbGFzcyA9ICdidG4gYnRuLXN1Y2Nlc3MnO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi5tZXNzYWdlID0gJ0xvZ2luJztcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlID0gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dm0uaW5wdXRzLnJlcXVpcmVkRmllbGRzRGVmaW5lZCA9IGZhbHNlO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi5jbGFzcyA9ICdidG4gYnRuLXdhcm5pbmcnO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi5tZXNzYWdlID0gJ05lZWQgRW1haWwgJiBQYXNzJztcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlID0gZmFsc2U7XG5cdFx0fVxuXG5cdH1cblxuXHQvL3ZpZXcgbW9kZWwgbWV0aG9kc1xuXHR2bS51cGRhdGUgPSBmdW5jdGlvbigpIHtcblx0XHQvL3NldCB2YWx1ZXNcblx0XHR2bS5pbnB1dHMuZW1haWwgPSAkZG9jdW1lbnQuZmluZCgnI3VzZXJFbWFpbCcpWzBdLnZhbHVlO1xuXHRcdHZtLmlucHV0cy5wYXNzd29yZCA9ICRkb2N1bWVudC5maW5kKCcjdXNlclBhc3N3b3JkJylbMF0udmFsdWU7XG5cdFx0XG5cdFx0b3BlblVzZXJMb2dpbkJ0bigpO1xuXHR9XG5cblx0dm0ubG9naW5SZWdpc3RlcmVkVXNlciA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgcmVnaXN0ZXJlZFVzZXJTaGVycGEgPSB0cmFmZmljVmFsZXQ7XG5cblx0XHQvL2NvbmZpcm0gYWxsIGZpZWxkcyBhcmUgdmFsaWRcblx0XHRpZih0cnVlKSB7XG5cdFx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgZGF0YWJhc2UgPSBiYWNrZW5kU2VydmljZXM7XG5cdFx0XHR2YXIgcmVnaXN0ZXJlZFVzZXJEYXRhID0gdXNlckRhdGE7XG5cblx0XHRcdC8vdmVyaWZ5IHVzZXJzIGNyZWRlbnRpYWxzXG5cdFx0XHRkYXRhYmFzZS5Mb2dpblJlZ2lzdGVyZWRVc2VyKHZtLmlucHV0cy5lbWFpbCwgdm0uaW5wdXRzLnBhc3N3b3JkKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24odXNlckNyZWRlbnRpYWxzKSB7XG5cdFx0XHRcdC8vaWYgbm8gdHJvdWJsZSBsb2dnaW5nIGluIHVwZGF0ZSBlcnJvciBvYmplY3Rcblx0XHRcdFx0dm0uZXJyb3JzLnBhc3Nlc0FsbFRlc3RzID0gdHJ1ZTtcblxuXHRcdFx0XHQvL2FkZCBwcmltYXJ5IGluZm9ybWF0aW9uIHRvIGxvY2FsIG1vZGVsXG5cdFx0XHRcdHJlZ2lzdGVyZWRVc2VyRGF0YS5zZXRQcmltYXJpZXNMb2NhbGx5KHZtLmlucHV0cy5lbWFpbCwgdm0uaW5wdXRzLm5hbWUsIHVzZXJDcmVkZW50aWFscy51aWQpO1xuXG5cdFx0XHR9KVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCRsb2cuaW5mbyhcInVpZCBpcyBcIiArIHJlZ2lzdGVyZWRVc2VyRGF0YS5nZXRVSURMb2NhbGx5KCkpO1xuXG5cdFx0XHRcdGRhdGFiYXNlLmdldFVzZXJCaW8ocmVnaXN0ZXJlZFVzZXJEYXRhLmdldFVJRExvY2FsbHkoKSlcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24odXNlckJpbykge1xuXHRcdFx0XHRcdC8vdXBkYXRlIHVzZXJEYXRhIG1vZGVsIHdpdGggdXNlckJpb1xuXHRcdFx0XHRcdHJlZ2lzdGVyZWRVc2VyRGF0YS51cGRhdGVCaW9Mb2NhbGx5KHVzZXJCaW8pO1xuXG5cdFx0XHRcdFx0Ly9sb2FkIHVzZXIgZXZlbnRzXG5cdFx0XHRcdFx0ZGF0YWJhc2UuZ2V0VXNlckV2ZW50cyhyZWdpc3RlcmVkVXNlckRhdGEuZ2V0VUlETG9jYWxseSgpKVxuXHRcdFx0XHRcdC50aGVuKGZ1bmN0aW9uKGFsbEV2ZW50c0ZvclRoaXNVc2VyKSB7XG5cdFx0XHRcdFx0XHQvL3VwZGF0ZSB1c2VyRGF0YSBtb2RlbCB3aXRoIHVzZXJFdmVudHNcblx0XHRcdFx0XHRcdHJlZ2lzdGVyZWRVc2VyRGF0YS51cGRhdGVBbGxVc2VyRXZlbnRzTG9jYWxseShhbGxFdmVudHNGb3JUaGlzVXNlcik7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyAkbG9nLmluZm8obWVzc2FnZSk7IH0pXG5cblx0XHRcdFx0fSlcblx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKG1lc3NhZ2UpIHsgJGxvZy5pbmZvKG1lc3NhZ2UpOyB9KVxuXG5cdFx0XHRcdC8vcmVkaXJlY3QgdG8gdGhlIG5leHQgcGFnZSBcblx0XHRcdFx0cmVnaXN0ZXJlZFVzZXJTaGVycGEucmVkaXJlY3RUbygnL3VzZXJJbmZvcm1hdGlvbicsIHJlZ2lzdGVyZWRVc2VyRGF0YS5nZXRVSURMb2NhbGx5KCkpO1xuXG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKG1lc3NhZ2UpIHsgXG5cdFx0XHRcdC8vaWYgdGhlcmUgd2FzIGFuIGVycm9yIGxvZ2dpbmcgaW4sIGxldCB0aGUgdXNlciBrbm93XG5cdFx0XHRcdHZtLmVycm9ycy5tZXNzYWdlID0gbWVzc2FnZTtcblx0XHRcdFx0dm0uZXJyb3JzLnBhc3Nlc0FsbFRlc3RzID0gZmFsc2U7XG5cdFx0XHR9KVxuXG5cdFx0XHQvL3VzZSB1aWQgdG8gY29sbGVjdCB1c2VyIGJpb1xuXHRcdFx0XG5cdFx0fVxuXG5cdH1cblxuXHR2bS5jbGlja2VkID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHVzZXJBdXRoZW50aWNhdGlvbiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdHVzZXJBdXRoZW50aWNhdGlvbi5sb2dVc2VyT3V0KCk7XG5cdH1cblxuXHQvL3J1biBjb21tYW5kc1xufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcigndG9wTWVudUNvbnRyb2xsZXInLCB0b3BNZW51Q29udHJvbGxlcik7XG5cbnRvcE1lbnVDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJywgJyRsb2NhdGlvbicsICckZG9jdW1lbnQnLCAnJHdpbmRvdyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHRvcE1lbnVDb250cm9sbGVyKCRzY29wZSwgJGxvZywgJGxvY2F0aW9uLCAkZG9jdW1lbnQsICR3aW5kb3cpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHQvL2xvY2FsIHZhcmlhYmxlc1xuXHR2bS5sb2dnZWRJbiA9IGZhbHNlXG5cblx0Ly9zdHlsZXMgdmFyaWFibGVzXG5cdFxuXHQvL2V2ZW50IGxpc3RlbmVyc1xuXHRpZiAoJ2FkZEV2ZW50TGlzdGVuZXInIGluICRkb2N1bWVudCkge1xuXHQgICAgJGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHtcblx0ICAgIFx0JGxvZy5pbmZvKCdhZGRpbmcgRmFzdENsaWNrJyk7XG5cdCAgICAgICAgRmFzdENsaWNrLmF0dGFjaCgkZG9jdW1lbnQuYm9keSk7XG5cdCAgICB9LCBmYWxzZSk7XG5cdH1cblxuXHRhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdykuYmluZCgncmVzaXplJywgZnVuY3Rpb24oKSB7XG5cdFx0dm0ub25SZXNpemVGdW5jdGlvbigpO1xuXHRcdCRzY29wZS4kYXBwbHkoKTtcblx0fSk7XG5cblx0YW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cdFx0aWYoJHdpbmRvdy5vdXRlcldpZHRoIDwgNjAwKSB7XG5cdFx0XHR2bS5vblJlc2l6ZUZ1bmN0aW9uKCk7XG5cdFx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cdFx0fVxuXHR9KVxuXHQvL2R5bmFtaWNhbGx5IHNldCBpbnB1dCB3aWR0aFxuXG5cblx0Ly8gQ3JlYXRlIGEgY2FsbGJhY2sgd2hpY2ggbG9ncyB0aGUgY3VycmVudCBhdXRoIHN0YXRlXG5cdGZ1bmN0aW9uIGluaXQoKSB7XG5cdFx0dm0ub25SZXNpemVGdW5jdGlvbigpO1xuXHRcdCRzY29wZS4kYXBwbHkoKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGF1dGhEYXRhQ2FsbGJhY2soYXV0aERhdGEpIHtcblx0ICBpZiAoYXV0aERhdGEpIHtcblx0ICAgICRsb2cuaW5mbyhcIlVzZXIgXCIgKyBhdXRoRGF0YS51aWQgKyBcIiBpcyBsb2dnZWQgaW4gd2l0aCBcIiArIGF1dGhEYXRhLnByb3ZpZGVyKTtcblx0ICAgIHZtLmxvZ2dlZEluID0gdHJ1ZTtcblx0ICB9IGVsc2Uge1xuXHQgICAgJGxvZy5pbmZvKFwiVXNlciBpcyBsb2dnZWQgb3V0XCIpO1xuXHQgICAgdm0ubG9nZ2VkSW4gPSBmYWxzZTtcblx0ICB9XG5cdH1cblxuXHRmdW5jdGlvbiByZWRpcmVjdChwYXRoLCB1c2VyRGF0YSkge1xuXHRcdHZhciBmdWxsUGF0aCA9IHBhdGggKyAnLycgKyB1c2VyRGF0YS51aWQgKyAnLycgKyB1c2VyRGF0YS50b2tlbjtcblx0XHQvL3JlZGlyZWN0XG5cdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyB0bzogJyArIGZ1bGxQYXRoKTtcblx0XHQkbG9jYXRpb24ucGF0aChmdWxsUGF0aCk7XG5cdFx0Ly8kc2NvcGUuJGFwcGx5KCk7XG5cdH1cblxuXHQvL3ZtIGFjY2Vzc2libGUgbWV0aG9kc1xuXHR2bS5sb2dvdXQgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9nLmluZm8oJ2xvZ2dpbmcgb3V0IScpO1xuXHRcdHZtLmxvZ2dlZEluID0gZmFsc2U7XG5cdFx0cmVmLnVuYXV0aCgpO1xuXHRcdHJlZGlyZWN0KCcvJywge3VpZDonJywgdG9rZW46Jyd9KTtcblx0fVxuXG5cdHZtLm5hdkJhckxvZ2luUmVnaXN0ZXJlZFVzZXIgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9nLmluZm8oJ2xhdW5jaGluZyBsb2dpbicpO1xuXHRcdGlmKHRydWUpIHtcblx0XHQvL2lmKHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlKSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZVxuXHRcdFx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cblx0XHRcdC8vYXV0aGVudGljYXRlIHRoZSB1c2VyXG5cdFx0XHRyZWYuYXV0aFdpdGhQYXNzd29yZCh7XG5cdFx0XHRcdGVtYWlsOiB2bS5uYXZiYXJVc2VyRW1haWwsXG5cdFx0XHRcdHBhc3N3b3JkOiB2bS5uYXZiYXJVc2VyUGFzc1xuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IsIGF1dGhEYXRhKSB7XG5cdFx0XHRcdGlmKGVycm9yKSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdFcnJvciBMb2dnaW5nIEluOiAnICsgZXJyb3IpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnTG9nZ2VkIEluIHN1Y2Nlc3NmdWxseTogJyArIGF1dGhEYXRhLnVpZCk7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKGF1dGhEYXRhKTtcblx0XHRcdFx0XHQvL3NhdmUgYWxsIHRoZSBkYXRhXG5cblx0XHRcdFx0XHQvL2xvYWQgdXNlciBiaW9cblx0XHRcdFx0XHQvL2xvYWQgdXNlciBldmVudHNcblxuXHRcdFx0XHRcdC8vcmVkaXJlY3Rcblx0XHRcdFx0XHRyZWRpcmVjdCgnL3VzZXJJbmZvcm1hdGlvbicsIGF1dGhEYXRhKTtcblx0XHRcdFx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cblx0XHRcdFx0XHQvL2NsaWNrIGNsb3NlZCB0aGUgbmF2YmFyXG5cdFx0XHRcdFx0YW5ndWxhci5lbGVtZW50KCcubmF2YmFyLXRvZ2dsZScpLmNsaWNrKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cblxuXHRcdH1cblxuXHR9XG5cblx0dm0ub25SZXNpemVGdW5jdGlvbiA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBuYXZiYXJJbnB1dHMgPSBhbmd1bGFyLmVsZW1lbnQoJy5uYXZiYXJJbnB1dHMnKTtcblx0XHRuYXZiYXJJbnB1dHMuY3NzKCd3aWR0aCcsICgkd2luZG93Lm91dGVyV2lkdGggLSAyNikgKyAncHgnKTtcblx0fVxuXG5cdC8vIFJlZ2lzdGVyIHRoZSBjYWxsYmFjayB0byBiZSBmaXJlZCBldmVyeSB0aW1lIGF1dGggc3RhdGUgY2hhbmdlc1xuXHRyZWYub25BdXRoKGF1dGhEYXRhQ2FsbGJhY2spO1xufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignVXNlckV2ZW50c0NvbnRyb2xsZXInLCBVc2VyRXZlbnRzQ29udHJvbGxlcik7XG5cblVzZXJFdmVudHNDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJHJvdXRlUGFyYW1zJywgJ3VzZXJEYXRhJywgJ3RyYWZmaWNWYWxldCddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIFVzZXJFdmVudHNDb250cm9sbGVyKCRsb2csICRyb3V0ZVBhcmFtcywgdXNlckRhdGEsIHRyYWZmaWNWYWxldCkge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHR2YXIgY3VycmVudFVzZXIgPSB1c2VyRGF0YTtcblxuXHQvL2xvY2FsIHZpZXcgdmFyaWFibGVzXG5cdHZtLnNob3dEZWNsaW5lID0gZmFsc2U7XHQvL3doYXQgaXMgdGhpcyBiZWluZyB1c2VkIGZvcj9cblx0dm0udXNlckJpbyA9IHt9XG5cdHZtLmV2ZW50cyA9IHt9O1xuXHR2bS5zZWN0aW9uQXZhaWxhYmxlID0ge1xuXHRcdHBlbmRpbmc6IGZhbHNlLFxuXHRcdGF0dGVuZGluZzogZmFsc2UsXG5cdFx0aG9zdGluZzogZmFsc2UsXG5cdFx0Y29tcGxldGVkOiBmYWxzZVxuXHR9O1xuXHR2bS5lcnJvcnMgPSB7fTtcblxuXHQvL2RlY2xhcmUgbG9jYWwgbWV0aG9kc1xuXHRmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fTtcblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH07XG5cblx0ZnVuY3Rpb24gbm9PZkhvc3RlRXZlbnRzKCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZVxuXHRcdHZhciBjb3VudGVyID0gMDtcblxuXHRcdGZvcihldmVudCBpbiB2bS5ldmVudHMuaG9zdGluZykgY291bnRlcisrO1xuXG5cdFx0cmV0dXJuIGNvdW50ZXI7XG5cdH1cblxuXHRmdW5jdGlvbiBnZW5lcmF0ZUV2ZW50SUQoKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYXRlID0gbmV3IERhdGUoKTtcblx0XHR2YXIgZXZlbnRJRCA9IChkYXRlVGltZVRvVW5peFRpbWUoZGF0ZSkgKiAxMCkgKyAobm9PZkhvc3RlRXZlbnRzKCkpO1xuXG5cdFx0cmV0dXJuIGV2ZW50SUQ7XG5cdH1cblxuXHRmdW5jdGlvbiBjaGVja0ZvckV2ZW50cygpIHtcblx0XHRcblx0XHQvL2xvb3AgdGhyb3VnaCBhbGwgdGhlIGV2ZW50IGNhdGVnb3JpZXNcblx0XHRPYmplY3Qua2V5cyh2bS5ldmVudHMpLmZvckVhY2goZnVuY3Rpb24oY2F0ZWdvcnkpIHtcblx0XHRcdFxuXHRcdFx0Ly9pbnNpZGUgZWFjaCBjYXRlZ29yeSBjb3VudCB0aGUgbnVtYmVyIG9mIGV2ZW50IG9iamVjdHMuLi5OT1QgdXBkYXRlZCBwbGFjZWhvbGRlciB0aG91Z2hcblx0XHRcdE9iamVjdC5rZXlzKHZtLmV2ZW50c1tjYXRlZ29yeV0pLmZvckVhY2goZnVuY3Rpb24oZXZlbnRJRCkge1xuXHRcdFx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVcblx0XHRcdFx0dmFyIGNvdW50ZXIgPSAwO1xuXHRcdFx0XHQvL2NvdW50IGV2ZW50cyB3aXRoIGlkJ3MgLyBOT1QgJ3VwZGF0ZWQnIHBsYWNlaG9sZGVyc1xuXHRcdFx0XHRpZihhbmd1bGFyLmlzT2JqZWN0KHZtLmV2ZW50c1tjYXRlZ29yeV1bZXZlbnRJRF0pKSBjb3VudGVyKys7XG5cdFx0XHRcdFxuXHRcdFx0XHQvL2lmIGF0IGxlYXN0IG9uZSBldmVudCBpZCAob2JqZWN0KSB3YXMgY291bnRlZCwgdGhlbiBzaG93IHRoZSBzZWN0aW9uXG5cdFx0XHRcdGlmKGNvdW50ZXIgPiAwKSB2bS5zZWN0aW9uQXZhaWxhYmxlW2NhdGVnb3J5XSA9IHRydWU7XG5cdFx0XHRcdGVsc2Ugdm0uc2VjdGlvbkF2YWlsYWJsZVtjYXRlZ29yeV0gPSBmYWxzZTtcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGluaXRpYWxpemUoKSB7XG5cdFx0Ly9tYWtlIHN1cmUgdGhlIHVpZCBpcyBzZXRcblx0XHRjdXJyZW50VXNlci5zZXRVSURMb2NhbGx5KCRyb3V0ZVBhcmFtcy51aWQpO1xuXG5cdFx0Ly9sb2FkIHRoZSB1c2VyIGJpb1xuXHRcdGN1cnJlbnRVc2VyLmxvYWRCaW8oJHJvdXRlUGFyYW1zLnVpZClcblx0XHQudGhlbihmdW5jdGlvbihyZXRyaWV2ZWRCaW8pIHtcblx0XHRcdHZtLnVzZXJCaW8gPSByZXRyaWV2ZWRCaW87XG5cdFx0fSlcblx0XHQuY2F0Y2goKVxuXG5cdFx0Ly9sb2FkIHVzZXIgZXZlbnRzIHByb2dyZXNzaXZsZXlcblx0XHQvL2Zpc3Qgd2hhdGV2ZXIgaXMgaW4gdGhlIG1vZGVsIGFscmVhZHlcblx0XHR2bS5ldmVudHMgPSBjdXJyZW50VXNlci5nZXRBbGxVc2VyRXZlbnRzTG9jYWxseSgpO1xuXG5cdFx0Ly90aGVuIGNhbGwgdG8gdGhlIGRiIGFuZCBnZXQgdGhlIG1vc3QgdXAgdG8gZGF0ZSBpbmZvXG5cdFx0Y3VycmVudFVzZXIuZ2V0UmVtb3RlRXZlbnRzRm9yTG9jYWwoKVxuXHRcdC50aGVuKGZ1bmN0aW9uKG9idGFpbmVkVXNlckV2ZW50cykge1xuXG5cdFx0XHQvL3VwZGF0ZSB0aGUgdmlldyBtb2RlbCB3aXRoIHRoZSB1cGRhdGVkIERCIHJlc3VsdHNcblx0XHRcdHZtLmV2ZW50cyA9IGN1cnJlbnRVc2VyLmdldEFsbFVzZXJFdmVudHNMb2NhbGx5KCk7XG5cdFx0fSlcblx0XHQudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdC8vbm93IHRoYXQgZXZlbnRzIGFyZSBsb2FkZWQsIHJlZmxlY3QgaXQgaW4gdGhlIHZpZXcgbW9kZWxcblx0XHRcdGNoZWNrRm9yRXZlbnRzKCk7XG5cdFx0fSlcblxuXHR9XG5cblx0Ly9kZWNsYXJlIHZpZXcgbWV0aG9kc1xuXHR2bS5jcmVhdGVOZXdFdmVudCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBldmVudElEID0gZ2VuZXJhdGVFdmVudElEKCk7XG5cdFx0dmFyIG5ld0V2ZW50U2hlcnBhID0gdHJhZmZpY1ZhbGV0O1xuXG5cdFx0Ly9hZGQgdGhlIGV2ZW50IHRvIHRoZSBtb2RhbCAobG9jYWxseSB0aGVuIG9uIHRoZSBkYilcblx0XHRjdXJyZW50VXNlci5jcmVhdGVOZXdFdmVudChldmVudElEKVxuXHRcdC50aGVuKGZ1bmN0aW9uKGFmZmlybWF0aXZlUmVzcG9uc2UpIHtcblx0XHRcdC8vcmVwb3J0IHRoZSBzdWNjZXNzXG5cdFx0XHQkbG9nLmluZm8oYWZmaXJtYXRpdmVSZXNwb25zZSk7XG5cdFx0fSlcblx0XHQudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdC8vaWYgdGhlcmUgd2FzIGFuIHVwZGF0ZWQgZmllbGQsIHJlbW92ZSBpdCBub3dcblx0XHRcdGN1cnJlbnRVc2VyLmNsZWFuREJFdmVudHNDYXRlZ29yeSgnaG9zdGluZycpO1xuXG5cdFx0fSlcblx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3JSZXNwb25zZSkge1xuXHRcdFx0Ly9yZXBvcnQgdGhlIGVycm9yXG5cdFx0XHQkbG9nLmluZm8oZXJyb3JSZXNwb25zZSk7XG5cdFx0fSlcblx0XHRcblxuXHRcdC8vcmVkaXJlY3QgdG8gdGhlIG5ldyBldmVudCBwYWdlXHRcdFxuXHRcdG5ld0V2ZW50U2hlcnBhLnJlZGlyZWN0VG8oJy9ldmVudCcsIGV2ZW50SUQsIGN1cnJlbnRVc2VyLmdldFVJRExvY2FsbHkoKSwgY3VycmVudFVzZXIuZ2V0VUlETG9jYWxseSgpKTtcblx0fVxuXG5cdC8vZXhlY3V0ZSBzY3JpcHRzXG5cdGluaXRpYWxpemUoKTtcblxufVxuXG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdVc2VySW5mb3JtYXRpb25Db250cm9sbGVyJywgVXNlckluZm9ybWF0aW9uQ29udHJvbGxlcik7XG5cblVzZXJJbmZvcm1hdGlvbkNvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICckZG9jdW1lbnQnLCAnJHJvdXRlUGFyYW1zJywndXNlckRhdGEnLCAndHJhZmZpY1ZhbGV0J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gVXNlckluZm9ybWF0aW9uQ29udHJvbGxlcigkbG9nLCAkZG9jdW1lbnQsICRyb3V0ZVBhcmFtcywgdXNlckRhdGEsIHRyYWZmaWNWYWxldCkge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHRcblx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0dmFyIGN1cnJlbnRVc2VyID0gdXNlckRhdGE7XG5cblx0Ly92aWV3IG1vZGVsIHZhcmlhYmxlc1xuXHR2bS51c2VyID0ge307XG5cdHZtLnRlbXBCaXJ0aGRheTtcblx0dm0udmlldyA9IHtcblx0XHRkYXRhVG9TYXZlOiBmYWxzZSxcblx0XHRpc0RhdGE6IGZhbHNlLFxuXHRcdGJ0bk1zc2c6ICdNb3ZlIE9uLi4uJyxcblx0XHRwcm9jZWVkQnRuOiAnYnRuIGJ0bi1wcmltYXJ5J1xuXHR9O1xuXG5cdC8vbG9jYWwgbWV0aG9kc1xuXHRmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fTtcblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH07XG5cblx0Ly92aWV3IGFjY2Vzc2libGUgbWV0aG9kc1xuXHR2bS5jaGVja1ZhbHVlcyA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vdGhyb3cgdGhlIGlzRGF0YSBmbGFnIGlmIHNvbWV0aGluZyBpcyB1cGRhdGVkXG5cdFx0dm0udmlldy5pc0RhdGEgPSB0cnVlO1xuXG5cdFx0aWYoICEoYW5ndWxhci5pc1VuZGVmaW5lZCh2bS51c2VyLmNvbXBhbnkpIHx8IHZtLnVzZXIuY29tcGFueSA9PT0gJycpIHx8IFxuXHRcdFx0IShhbmd1bGFyLmlzVW5kZWZpbmVkKHZtLnVzZXIudGl0bGUpIHx8IHZtLnVzZXIudGl0bGUgPT09ICcnKSB8fCBcblx0XHRcdCEoYW5ndWxhci5pc1VuZGVmaW5lZCh2bS51c2VyLmRvYikgfHwgdm0udXNlci5kb2IgPT09ICcnKSkgXG5cdFx0e1xuXHRcdFx0dm0udmlldy5kYXRhVG9TYXZlID0gdHJ1ZTtcblx0XHRcdHZtLnZpZXcucHJvY2VlZEJ0biA9ICdidG4gYnRuLXN1Y2Nlc3MnO1xuXHRcdFx0dm0udmlldy5idG5Nc3NnID0gJ1NhdmUgJiBDb250aW51ZSc7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZtLnZpZXcuZGF0YVRvU2F2ZSA9IGZhbHNlO1xuXHRcdFx0dm0udmlldy5wcm9jZWVkQnRuID0gJ2J0biBidG4tcHJpbWFyeSc7XG5cdFx0XHR2bS52aWV3LmJ0bk1zc2cgPSAnTW92ZSBPbi4uLic7XHRcblx0XHR9XG5cblx0fVxuXG5cdHZtLnVwZGF0ZURPQiA9IGZ1bmN0aW9uKCkge1xuXHRcdHZtLnVzZXIuZG9iID0gZGF0ZVRpbWVUb1VuaXhUaW1lKHZtLnRlbXBCaXJ0aGRheSk7XG5cdFx0dm0uY2hlY2tWYWx1ZXMoKTtcblx0fVxuXG5cdHZtLnNhdmVBbmRNb3ZlT24gPSBmdW5jdGlvbigpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciB1c2VySW5mb1NoZXJwYSA9IHRyYWZmaWNWYWxldDtcblx0XHR2YXIgY3VycmVudFVpZCA9IGN1cnJlbnRVc2VyLmdldFVJRExvY2FsbHkoKTtcblxuXHRcdC8vY29udmVydCBET0IgdG8gdW5peFRpbWUgYW5kIHNhdmVcblx0XHRpZih2bS50ZW1wQmlydGhkYXkgIT09IDApIHZtLnVwZGF0ZURPQigpO1xuXHRcdFxuXHRcdC8vaWYgdGhlcmUgaXNuJ3QgY3VycmVudGx5IGEgZG9iLCBncmFiIGZyb20gdGhlIHJvdXRlIHBhcmFtc1xuXHRcdGlmKGN1cnJlbnRVaWQgPT0gJycgfHwgYW5ndWxhci5pc1VuZGVmaW5lZChjdXJyZW50VWlkKSkge1xuXHRcdFx0Y3VycmVudFVzZXIuc2V0VUlETG9jYWxseSgkcm91dGVQYXJhbXMudWlkKTtcblx0XHR9XG5cblx0XHQvL2lmIHRoZXJlIGlzIG5ldyBkYXRhLCBzYXZlIGl0XG5cdFx0aWYodm0udmlldy5pc0RhdGEpIHtcblx0XHRcdCRsb2cuaW5mbygnc2F2aW5nIHRoZSBuZXcgZGF0YScpO1xuXHRcdFx0Y3VycmVudFVzZXIudXBkYXRlQmlvTG9jYWxseSh2bS51c2VyKTtcblx0XHR9XG5cdFx0XG5cdFx0Ly9tb3ZlIG9uXG5cdFx0dXNlckluZm9TaGVycGEucmVkaXJlY3RUbygnL3VzZXJFdmVudHMnLCB2bS51c2VyLnVpZClcblx0fVxuXG5cdGZ1bmN0aW9uIGluaXRpYWxpemUoKSB7XG5cdFx0Ly9sb2FkIEZhc3RDbGlja1xuXHRcdC8vRmFzdENsaWNrLmF0dGFjaCgkZG9jdW1lbnQuYm9keSk7XG5cdFx0XG5cdFx0Ly9sb2FkIHVzZXJEYXRhIGxvY2FsbHkgb3IgZnJvbSBkYlxuXHRcdGN1cnJlbnRVc2VyLmxvYWRCaW8oJHJvdXRlUGFyYW1zLnVpZClcblx0XHQudGhlbihmdW5jdGlvbihvYnRhaW5lZFVzZXJEYXRhKSB7XG5cdFx0XHQvL2Fzc2lnbiB1c2VyIHZhbHVlc1xuXHRcdFx0dm0udXNlciA9IG9idGFpbmVkVXNlckRhdGE7XG5cblx0XHRcdC8vYnVpbGQgdGVtcEJpcnRoZGF5XG5cdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChvYnRhaW5lZFVzZXJEYXRhLmRvYikgJiYgb2J0YWluZWRVc2VyRGF0YS5kb2IgIT09ICcnKSB7XG5cdFx0XHRcdHZtLnRlbXBCaXJ0aGRheSA9IHVuaXhUaW1lVG9EYXRlVGltZShvYnRhaW5lZFVzZXJEYXRhLmRvYilcblx0XHRcdH1cblxuXHRcdH0pO1xuXHRcblx0fVxuXG5cdC8vcnVuIHByb2Nlc3Nlc1xuXHRpbml0aWFsaXplKCk7IC8vd2l0aCBpbnRlcm5ldCB1c2UgdGhlIGV2ZW50IGxpc3RlbmVyIGluc3RlYWRcbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmZhY3RvcnkoJ2F1dGhTZXJ2aWNlJywgYXV0aFNlcnZpY2UpO1xuXG5hdXRoU2VydmljZS4kaW5qZWN0ID0gWyckbG9nJywgJ2JhY2tlbmRTZXJ2aWNlcyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGF1dGhTZXJ2aWNlKCRsb2csIGJhY2tlbmRTZXJ2aWNlcykge1xuXG5cdHZhciBhbGxBdXRoU2VydmljZXMgPSB7XG5cdFx0aXNMb2dnZWRJbjogaXNMb2dnZWRJblxuXHR9O1xuXG5cdGZ1bmN0aW9uIGlzTG9nZ2VkSW4oKSB7XG5cdFx0Ly9jaGVjayB0aGUgdXNlciBhdXRoZW50aWNhaW9uIHN0YXRlXG5cdFx0dmFyIGRiQXV0aGVudGljYXRpb24gPSBiYWNrZW5kU2VydmljZXM7XG5cdFx0XG5cdFx0ZGJBdXRoZW50aWNhdGlvbi5jaGVja0xvZ2luU3RhdHVzKClcblx0XHQudGhlbihmdW5jdGlvbihzdGF0dXMpIHtcblx0XHRcdHJldHVybiBzdGF0dXM7XG5cdFx0fSlcblx0XHQuY2F0Y2goZnVuY3Rpb24oc3RhdHVzKSB7XG5cdFx0XHRyZXR1cm4gc3RhdHVzO1xuXHRcdH0pXG5cdH1cblx0XG5cdHJldHVybiBhbGxBdXRoU2VydmljZXM7XG5cbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmZhY3RvcnkoJ2JhY2tlbmRTZXJ2aWNlcycsIGJhY2tlbmRTZXJ2aWNlcyk7XG5cbmJhY2tlbmRTZXJ2aWNlcy4kaW5qZWN0ID0gWyckbG9nJywgJyRxJywgJyR3aW5kb3cnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBiYWNrZW5kU2VydmljZXMoJGxvZywgJHEsICR3aW5kb3cpIHtcblx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHR2YXIgZmJVUkwgPSAnaHR0cHM6Ly9tZWV0dXBwbGFubmVyLmZpcmViYXNlaW8uY29tLyc7XG5cdHZhciBhbGxCYWNrZW5kU2VydmljZXMgPSB7XG5cdFx0dXRmOF90b19iNjQ6IHV0ZjhfdG9fYjY0LCBcdFx0XHRcdFx0XHQvL2xvY2FsIGZ1bmN0aW9ucyB0byBjb252ZXJ0IGRhdGVzXG5cdFx0YjY0X3RvX3V0Zjg6IGI2NF90b191dGY4LFxuXHRcdHVuaXhUaW1lVG9EYXRlVGltZTogdW5peFRpbWVUb0RhdGVUaW1lLFxuXHRcdGRhdGVUaW1lVG9Vbml4VGltZTogZGF0ZVRpbWVUb1VuaXhUaW1lLFxuXG5cdFx0TG9naW5SZWdpc3RlcmVkVXNlcjogTG9naW5SZWdpc3RlcmVkVXNlcixcdFx0Ly9hdXRoZW50aWNhaW9uXG5cdFx0Y2hlY2tMb2dpblN0YXR1czogY2hlY2tMb2dpblN0YXR1cyxcblx0XHRsb2dVc2VyT3V0OiBsb2dVc2VyT3V0LFxuXG5cdFx0ZG93bmxvYWRVc2VyRGF0YTogZG93bmxvYWRVc2VyRGF0YSxcdFx0XHRcdC8vZ2V0dGVyIG1ldGhvZHNcblx0XHRnZXRVc2VyQmlvOiBnZXRVc2VyQmlvLFxuXHRcdGdldFVzZXJFdmVudHM6IGdldFVzZXJFdmVudHMsXG5cdFx0Z2V0QUhvc3RlZEV2ZW50OiBnZXRBSG9zdGVkRXZlbnQsXG5cdFx0Z2V0QW5JbnZpdGVkRXZlbnQ6IGdldEFuSW52aXRlZEV2ZW50LFxuXG5cdFx0Y3JlYXRlTmV3VXNlcjogY3JlYXRlTmV3VXNlcixcdFx0XHRcdFx0Ly9zZXR0ZXIgTWV0aG9kc1xuXHRcdGFkZE5ld1VzZXJUb0RhdGFiYXNlOiBhZGROZXdVc2VyVG9EYXRhYmFzZSxcblx0XHRhZGROZXdVc2VyVG9SZWdVc2Vyc0xpc3Q6IGFkZE5ld1VzZXJUb1JlZ1VzZXJzTGlzdCxcblx0XHR1cGxvYWRVc2VyRGF0YTogdXBsb2FkVXNlckRhdGEsXG5cdFx0dXBsb2FkVXNlckJpbzogdXBsb2FkVXNlckJpbyxcblx0XHRjcmVhdGVIb3N0ZWRFdmVudDogY3JlYXRlSG9zdGVkRXZlbnQsXG5cdFx0ZGVsZXRlVXBkYXRlRmllbGQ6IGRlbGV0ZVVwZGF0ZUZpZWxkLFxuXG5cdFx0dGhlcmVXYXNBblVwZGF0ZUZpZWxkOiB0aGVyZVdhc0FuVXBkYXRlRmllbGRcdC8vbW9kZWwgbWFpbnRhaW5hbmNlXG5cdH07XG5cblx0ZnVuY3Rpb24gdXRmOF90b19iNjQoc3RyKSB7XG5cdFx0cmV0dXJuIGJ0b2Eoc3RyKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGI2NF90b191dGY4KHN0cikge1xuICAgIFx0cmV0dXJuIGF0b2Ioc3RyKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHVuaXhUaW1lVG9EYXRlVGltZSh1bml4VGltZSkge1xuXHRcdHJldHVybiBuZXcgRGF0ZShwYXJzZUludCh1bml4VGltZSkpO1xuXHR9XG5cblx0ZnVuY3Rpb24gZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKSB7XG5cdFx0cmV0dXJuIERhdGUucGFyc2UoZGF0ZVRpbWUpO1xuXHR9XG5cblx0ZnVuY3Rpb24gY3JlYXRlTmV3VXNlcihlbWFpbCwgcGFzc3dvcmQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGZpcmVCYXNlQWNjb3VudHMgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdFxuXHRcdC8vcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFxuXHRcdFx0ZmlyZUJhc2VBY2NvdW50cy5jcmVhdGVVc2VyKHtcblx0XHRcdFx0XG5cdFx0XHRcdGVtYWlsOiBlbWFpbCxcblx0XHRcdFx0cGFzc3dvcmQ6IHBhc3N3b3JkXG5cdFx0XHRcblx0XHRcdH0sZnVuY3Rpb24oZXJyb3IsIHVzZXJEYXRhKSB7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KCdFcnJvciBjcmVhdGluZyB1c2VyOiAnICsgZXJyb3IpO1xuXG5cdFx0XHRcdGVsc2UgcmVzb2x2ZSh1c2VyRGF0YSk7XG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gYWRkTmV3VXNlclRvRGF0YWJhc2UodWlkLCBuYW1lLCBlbWFpbCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgYXBwVXNlcnMgPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKTtcblx0XHR2YXIgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xuXG5cdFx0Ly9yZXR1cm4gYSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XG5cdFx0XHRhcHBVc2Vycy5zZXQoeyBcblx0XHRcdFx0J2Jpbyc6IHtcblx0XHRcdFx0XHQndWlkJzogdWlkLFxuXHRcdFx0XHRcdCduYW1lJzogbmFtZSxcblx0XHRcdFx0XHQnZW1haWwnOiBlbWFpbFxuXHRcdFx0XHR9LFxuXHRcdFx0XHQnZXZlbnRzJzoge1xuXHRcdFx0XHRcdCdwZW5kaW5nJzoge1xuXHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQnaG9zdGluZyc6IHtcblx0XHRcdFx0XHRcdCd1cGRhdGVkJzogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0J2F0dGVuZGluZyc6IHtcblx0XHRcdFx0XHRcdCd1cGRhdGVkJzogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0J2NvbXBsZXRlZCc6IHtcblx0XHRcdFx0XHRcdCd1cGRhdGVkJzogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdCgnRGF0YSBjb3VsZCBub3QgYmUgc2F2ZWQ6ICcgKyBlcnJvcik7XG5cdFx0XHRcdFxuXHRcdFx0XHRlbHNlIHJlc29sdmUoJ0RhdGEgc2F2ZWQgc3VjY2Vzc2Z1bGx5LicpO1xuXG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBhZGROZXdVc2VyVG9SZWdVc2Vyc0xpc3QodWlkLCBlbWFpbCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgYjY0RW1haWwgPSB1dGY4X3RvX2I2NChlbWFpbCk7XG5cdFx0dmFyIFJlZ2lzdGVyZWRVc2Vyc0xpc3QgPSBhcHAuY2hpbGQoJ1VpZHMnKS5jaGlsZChiNjRFbWFpbCk7XG5cblx0XHQvL3JldHVybiBhIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcblx0XHRcdFJlZ2lzdGVyZWRVc2Vyc0xpc3Quc2V0KHVpZCwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdChcIkRhdGEgY291bGQgbm90IGJlIHNhdmVkLiBcIiArIGVycm9yKTtcblx0XHRcdFx0ZWxzZSByZXNvbHZlKFwidWlkIGNyZWF0ZWQgc3VjZXNzZnVsbHkuXCIpO1xuXHRcdFx0fSk7XG5cblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gTG9naW5SZWdpc3RlcmVkVXNlcihlbWFpbCwgcGFzc3dvcmQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0XG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHQvL2F1dGhlbnRpY2F0ZSB0aGUgdXNlclxuXHRcdFx0YXBwLmF1dGhXaXRoUGFzc3dvcmQoe1xuXG5cdFx0XHRcdGVtYWlsOiBlbWFpbCxcblx0XHRcdFx0cGFzc3dvcmQ6IHBhc3N3b3JkXG5cblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yLCBhdXRoRGF0YSkge1xuXHRcdFx0XHRcblx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHRyZWplY3QoJ0Vycm9yIExvZ2dpbmcgSW46ICcgKyBlcnJvcik7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdMb2dnZWQgSW4gc3VjY2Vzc2Z1bGx5OiAnICsgYXV0aERhdGEudWlkKTtcblx0XHRcdFx0XHRyZXNvbHZlKGF1dGhEYXRhKTtcblx0XHRcdFx0fVxuXG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXHRcdFxuXHR9XG5cblx0ZnVuY3Rpb24gY2hlY2tMb2dpblN0YXR1cygpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cblx0XHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcblx0XHRcdGFwcC5vbkF1dGgoZnVuY3Rpb24oYXV0aERhdGEpIHtcblx0XHRcdFx0aWYgKGF1dGhEYXRhKSB7XG5cdFx0XHRcdCAgICAkbG9nLmluZm8oXCJVc2VyIFwiICsgYXV0aERhdGEudWlkICsgXCIgaXMgbG9nZ2VkIGluIHdpdGggXCIgKyBhdXRoRGF0YS5wcm92aWRlcik7XG5cdFx0XHRcdCAgICByZXNvbHZlKHRydWUpO1xuXHRcdFx0XHQgIH0gZWxzZSB7XG5cdFx0XHRcdCAgICAkbG9nLmluZm8oXCJVc2VyIGlzIGxvZ2dlZCBvdXRcIik7XG5cdFx0XHRcdCAgICByZXNvbHZlKGZhbHNlKTtcblx0XHRcdFx0ICB9XG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gbG9nVXNlck91dCgpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cblx0XHQkbG9nLmluZm8oJ2xvZ2dpbmcgdXNlciBvdXQnKTtcblx0XHRhcHAudW5hdXRoKCk7XG5cdH1cblxuXHRmdW5jdGlvbiB1cGxvYWRVc2VyRGF0YShhbGxVc2VyRGF0YSkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgdWlkID0gYWxsVXNlckRhdGEudWlkO1xuXHRcdHZhciByZW1vdGVVc2VyID0gYXBwLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCk7XG5cblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vdGhlIGFjdHVhbCBjYWxsXG5cdFx0XHRyZW1vdGVVc2VyLnVwZGF0ZShhbGxVc2VyRGF0YSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdCgnVGhlcmUgd2FzIGEgcHJvYmxlbSB1cGRhdGluZyB0aGF0IHJlY29yZDogJyArIGVycm9yKTtcblx0XHRcdFx0ZWxzZSByZXNvbHZlKCdhbGwgdXNlciBkYXRhIHVwbG9hZGVkIHN1Y2Nlc3NmdWxseScpO1xuXHRcdFx0fSk7XG5cblx0XHR9KTtcblx0XHRcblx0fVxuXG5cdGZ1bmN0aW9uIHVwbG9hZFVzZXJCaW8oY3VycmVudFVzZXJCaW8pIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIHVpZCA9IChjdXJyZW50VXNlckJpby51aWQpLnRvU3RyaW5nKCk7XG5cdFx0dmFyIHJlbW90ZVVzZXJCaW8gPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnYmlvJyk7XG5cblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9jYWxsIHRvIHRoZSBkYlxuXHRcdFx0cmVtb3RlVXNlckJpby51cGRhdGUoY3VycmVudFVzZXJCaW8sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoJ1RoZXJlIHdhcyBhIHByb2JsZW0gdXBkYXRpbmcgdGhhdCByZWNvcmQ6ICcgKyBlcnJvcik7XG5cdFx0XHRcdGVsc2UgcmVzb2x2ZSgnYWxsIHVzZXIgYmlvIGRhdGEgdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5Jyk7XG5cdFx0XHR9KVxuXG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBkb3dubG9hZFVzZXJEYXRhKCkge1xuXG5cdH1cblxuXHRmdW5jdGlvbiBnZXRVc2VyQmlvKHVpZCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgdXNlckJpbyA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdiaW8nKTtcblxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly90aGUgYWN0dWFsIGNhbGxcblx0XHRcdHVzZXJCaW8ub25jZSgndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0XHQvL3doZW4gdGhlIGNhbGwgaXMgc3VjY2Vzc2Z1bCByZXR1cm4gdGhlIGRhdGFcblx0XHRcdFx0cmVzb2x2ZShzbmFwc2hvdC52YWwoKSk7XG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHRcdH0gXG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gY3JlYXRlSG9zdGVkRXZlbnQodWlkLCBuZXdFdmVudCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgZXZlbnRJRCA9IG5ld0V2ZW50LmlkO1xuXHRcdHZhciBuZXdIb3N0ZWRFdmVudCA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgnaG9zdGluZycpLmNoaWxkKGV2ZW50SUQpO1xuXG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcblx0XHRcdC8vY2FsbCB0byBmaXJlYmFzZVxuXHRcdFx0bmV3SG9zdGVkRXZlbnQuc2V0KG5ld0V2ZW50LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3I6ICcgKyBlcnJvcik7XG5cdFx0XHRcdGVsc2UgcmVzb2x2ZSgnTmV3IGV2ZW50IHNhdmVkIHRvIERCIHN1Y2Nlc3NmdWxseScpO1xuXHRcdFx0fSlcblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0VXNlckV2ZW50cyh1aWQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIHVzZXJFdmVudHMgPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJyk7XG5cdFx0XG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL3RoZSBhY3R1YWwgY2FsbFxuXHRcdFx0dXNlckV2ZW50cy5vcmRlckJ5S2V5KCkub25jZSgndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0XHR2YXIgdXNlclByb2ZpbGUgPSBzbmFwc2hvdC52YWwoKTtcblxuXHRcdFx0XHQvL3doZW4gdGhlIGNhbGwgaXMgc3VjY2Vzc2Z1bCByZXR1cm4gdGhlIGRhdGFcblx0XHRcdFx0dmFyIGV2ZW50c1BhY2thZ2UgPSB7XG5cdFx0XHRcdFx0aG9zdGluZzogdXNlclByb2ZpbGUuaG9zdGluZyxcblx0XHRcdFx0XHRhdHRlbmRpbmc6IHVzZXJQcm9maWxlLmF0dGVuZGluZyxcblx0XHRcdFx0XHRwZW5kaW5nOiB1c2VyUHJvZmlsZS5wZW5kaW5nLFxuXHRcdFx0XHRcdGNvbXBsZXRlZDogdXNlclByb2ZpbGUuY29tcGxldGVkXG5cdFx0XHRcdH07XG5cblx0XHRcdFx0cmVzb2x2ZShldmVudHNQYWNrYWdlKTtcblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSB7XG5cdFx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHRcdFx0fSBcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRBSG9zdGVkRXZlbnQodWlkLCBldmVudElkKSB7XG5cblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIGhvc3RlZEV2ZW50ID0gYXBwLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdob3N0aW5nJykuY2hpbGQoZXZlbnRJZCk7XG5cblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vdGhlIGFjdHVhbCBjYWxsXG5cdFx0XHRob3N0ZWRFdmVudC5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHRcdHZhciBzZWxlY3RFdmVudCA9IHNuYXBzaG90LnZhbCgpO1xuXG5cdFx0XHRcdHJlc29sdmUoc2VsZWN0RXZlbnQpO1xuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdChlcnJvcik7XG5cdFx0XHR9KVxuXHRcdH0pXG5cdH1cblxuXHRmdW5jdGlvbiBnZXRBbkludml0ZWRFdmVudChob3N0SWQsIHVpZCwgZXZlbnRJZCkge31cblxuXHRmdW5jdGlvbiBkZWxldGVVcGRhdGVGaWVsZChjYXRlZ29yeSwgdWlkKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciBjYXRSZW1vdmluZ0Zyb20gPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoY2F0ZWdvcnkpLmNoaWxkKCd1cGRhdGVkJyk7XG5cblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdGNhdFJlbW92aW5nRnJvbS5zZXQobnVsbCwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdCgnVGhlcmUgd2FzIGFuIGVycm9yIGRlbGV0aW5nIHVwZGF0ZSBmaWVsZDogJyArIGVycm9yKTtcblx0XHRcdFx0ZWxzZSByZXNvbHZlKCdEZWxldGVkIHVwZGF0ZSBzdWNjZXNzZnVsbHknKTtcblx0XHRcdH0pXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIHRoZXJlV2FzQW5VcGRhdGVGaWVsZChjYXRlZ29yeSwgdWlkKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciBjYXRUb0NoZWNrID0gYXBwLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKGNhdGVnb3J5KTtcblxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly9jYWxsIHRoZSBkYlxuXHRcdFx0Y2F0VG9DaGVjay5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHRcdC8vc2F2ZSB0aGUgcmVzcG9uc2Vcblx0XHRcdFx0dmFyIGN1cnJlbnRDYXRNb2RlbCA9IHNuYXBzaG90LnZhbCgpO1xuXHRcdFx0XHQvL3Nob3cgd2hhdCB3YXMgZm91bmRcblx0XHRcdFx0Ly9sb29rIGZvciB0aGUgdXBkYXRlIGZpZWxkXG5cdFx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGN1cnJlbnRDYXRNb2RlbFsndXBkYXRlZCddKSkgcmVzb2x2ZSh0cnVlKTtcblx0XHRcdFx0ZWxzZSByZWplY3QoZmFsc2UpO1xuXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KGVycm9yKTtcblx0XHRcdH0pXG5cdFx0fSk7XG5cdH1cblxuXHQvL3JldHVybiB0aGUgb2JqZWN0XG5cdHJldHVybiBhbGxCYWNrZW5kU2VydmljZXM7XG59XG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5mYWN0b3J5KCd0cmFmZmljVmFsZXQnLCB0cmFmZmljVmFsZXQpO1xuXG50cmFmZmljVmFsZXQuJGluamVjdCA9IFsnJGxvZycsICckbG9jYXRpb24nXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiB0cmFmZmljVmFsZXQoJGxvZywgJGxvY2F0aW9uKSB7XG5cdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0dmFyIGFsbFRyYWZmaWNDb250cm9scyA9IHtcblx0XHRyZWRpcmVjdFRvOiByZWRpcmVjdFRvLFxuXHRcdGV2ZW50Um91dGU6IGV2ZW50Um91dGVcblx0fTtcblxuXHRmdW5jdGlvbiByZWRpcmVjdFRvKHBhdGgsIHBhcmFtMSwgcGFyYW0yLCBwYXJhbTMpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChwYXJhbTEpKSB7XG5cdFx0XHRwYXRoID0gcGF0aCArICcvJyArIHBhcmFtMTtcblxuXHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQocGFyYW0yKSkge1xuXHRcdFx0XHQvL2dvIHRvIHBhdGggd2l0aCAyIHBhcmFtc1xuXHRcdFx0XHRwYXRoID0gcGF0aCArICcvJyArIHBhcmFtMjtcblxuXHRcdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChwYXJhbTMpKSB7XG5cdFx0XHRcdFx0cGF0aCA9IHBhdGggKyAnLycgKyBwYXJhbTM7XG5cblx0XHRcdFx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIG5vdyB0byAnICsgcGF0aCk7XG5cdFx0XHRcdFx0JGxvY2F0aW9uLnBhdGgocGF0aCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIG5vdyB0byAnICsgcGF0aCk7XG5cdFx0XHRcdCRsb2NhdGlvbi5wYXRoKHBhdGgpO1xuXHRcdFx0fVxuXHRcdFx0Ly9nbyB3aXRoIDEgcGFyYW1cblx0XHRcdCRsb2cuaW5mbygncmVkaXJlY3Rpbmcgbm93IHRvICcgKyBwYXRoKTtcblx0XHRcdCRsb2NhdGlvbi5wYXRoKHBhdGgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvL2p1c3QgZ28gdG8gcGF0aFxuXHRcdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyBub3cgdG8gJyArIHBhdGgpO1xuXHRcdFx0JGxvY2F0aW9uLnBhdGgocGF0aCk7XG5cdFx0fVxuXG5cdH1cblxuXHRmdW5jdGlvbiBldmVudFJvdXRlKGV2ZW50SWQsIGhvc3RJZCwgdXNlcklkLCBzZWN0aW9uKSB7XG5cdFx0JGxvZy5pbmZvKCdUcmFmZmljIHZhbGV0IGFjY2Vzc2VkJyk7XG5cdFx0JGxvZy5pbmZvKCdldmVudElkOiAnICsgZXZlbnRJZCk7XG5cdFx0JGxvZy5pbmZvKCdob3N0SWQ6ICcgKyBob3N0SWQpO1xuXHRcdCRsb2cuaW5mbygndXNlcklkOiAnICsgdXNlcklkKTtcblxuXHRcdC8vaWYgdGhlcmUgaXNuJ3QgYSBzZWN0aW9uIHNldCB0byBkZWZhdWx0XG5cdFx0aWYoYW5ndWxhci5pc1VuZGVmaW5lZChzZWN0aW9uKSkgc2VjdGlvbiA9IDE7XG5cblx0XHQvL2lmIHRoZSBob3N0SWQgYW5kIHVzZXJJZCBtYXRjaCwgbGF1bmNoIGhvc3Qgdmlld1xuXHRcdGlmKGhvc3RJZCA9PT0gdXNlcklkKSB7IFxuXHRcdFx0dmFyIHBhdGggPSAnL2V2ZW50L2hvc3QvJyArIGV2ZW50SWQgKyAnLycgKyB1c2VySWQgKyAnLycrIHNlY3Rpb247XG5cdFx0XHQkbG9nLmluZm8ocGF0aCk7XG5cdFx0XHQvL3JlZGlyZWN0XG5cdFx0XHQkbG9jYXRpb24ucGF0aChwYXRoKTtcblx0XHR9XG5cdFx0Ly9pZiB0aGUgaG9zdElkIGFuZCB1c2VySWQgRE9OJ1QgbWF0Y2gsIGxhdW5jaCBndWVzdCB2aWV3XG5cdFx0ZWxzZSB7XG5cdFx0XHR2YXIgcGF0aCA9ICcvZXZlbnQvZ3Vlc3QvJyArIGV2ZW50SWQgKyAnLycgKyB1c2VySWQgKyAnLycgKyBob3N0SWQ7XG5cdFx0XHQkbG9nLmluZm8ocGF0aCk7XG5cdFx0XHQvL3JlZGlyZWN0XG5cdFx0XHQkbG9jYXRpb24ucGF0aChwYXRoKTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gYWxsVHJhZmZpY0NvbnRyb2xzO1xufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuZmFjdG9yeSgndXNlckRhdGEnLCB1c2VyRGF0YSk7XG5cbnVzZXJEYXRhLiRpbmplY3QgPSBbJyRsb2cnLCAnJHEnLCAnYmFja2VuZFNlcnZpY2VzJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gdXNlckRhdGEoJGxvZywgJHEsIGJhY2tlbmRTZXJ2aWNlcykge1xuXHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdHZhciBjdXJyZW50VXNlciA9IHtcblx0XHRiaW86IHsgXG5cdFx0XHR1aWQ6ICcnLFxuXHRcdFx0bmFtZTogJycsXG5cdFx0XHRlbWFpbDogJycsXG5cdFx0XHRjb21wYW55OiAnJyxcblx0XHRcdHRpdGxlOiAnJyxcblx0XHRcdGRvYjogMFxuXHRcdH0sXG5cdFx0ZXZlbnRzOiB7XG5cdFx0XHRob3N0aW5nOiB7fSxcblx0XHRcdHBlbmRpbmc6IHt9LFxuXHRcdFx0YXR0ZW5kaW5nOiB7fSxcblx0XHRcdGNvbXBsZXRlZDoge31cblx0XHR9XG5cdH07XG5cblx0dmFyIGFsbFVzZXJEYXRhID0ge1xuXHRcdGJpb1ByaW1hcmllc0FyZUNvbXBsZXRlTG9jYWxseTogYmlvUHJpbWFyaWVzQXJlQ29tcGxldGVMb2NhbGx5LFx0XHQvL21vZGFsIGFuYWx5c2lzXG5cdFx0ZXZlbnRFeGlzdHNMb2NhbGx5OiBldmVudEV4aXN0c0xvY2FsbHksXG5cblx0XHRjbGVhbkV2ZW50czogY2xlYW5FdmVudHMsXHRcdC8vbW9kZWwgbWFpbnRhaW5hbmNlXG5cblx0XHRnZXRVSURMb2NhbGx5OiBnZXRVSURMb2NhbGx5LFx0Ly9nZXR0ZXIgTWV0aG9kc1xuXHRcdGdldE5hbWVMb2NhbGx5OiBnZXROYW1lTG9jYWxseSxcblx0XHRnZXRFbWFpbExvY2FsbHk6IGdldEVtYWlsTG9jYWxseSxcblx0XHRnZXRDb21wYW55TG9jYWxseTogZ2V0Q29tcGFueUxvY2FsbHksXG5cdFx0Z2V0VGl0bGVMb2NhbGx5OiBnZXRUaXRsZUxvY2FsbHksXG5cdFx0Z2V0RE9CTG9jYWxseTogZ2V0RE9CTG9jYWxseSxcblx0XHRnZXRGdWxsQmlvTG9jYWxseTogZ2V0RnVsbEJpb0xvY2FsbHksXG5cdFx0Z2V0T25lVXNlckV2ZW50TG9jYWxseTogZ2V0T25lVXNlckV2ZW50TG9jYWxseSxcblx0XHRnZXRVc2VyRXZlbnRzTG9jYWxseTogZ2V0VXNlckV2ZW50c0xvY2FsbHksXG5cdFx0Z2V0QWxsVXNlckV2ZW50c0xvY2FsbHk6IGdldEFsbFVzZXJFdmVudHNMb2NhbGx5LFxuXG5cdFx0c2V0VUlETG9jYWxseTogc2V0VUlETG9jYWxseSxcdC8vc2V0dGVyIE1ldGhvZHNcblx0XHRzZXROYW1lTG9jYWxseTogc2V0TmFtZUxvY2FsbHksXG5cdFx0c2V0RW1haWxMb2NhbGx5OiBzZXRFbWFpbExvY2FsbHksXG5cdFx0c2V0Q29tcGFueUxvY2FsbHk6IHNldENvbXBhbnlMb2NhbGx5LFxuXHRcdHNldFRpdGxlTG9jYWxseTogc2V0VGl0bGVMb2NhbGx5LFxuXHRcdHNldERPQkxvY2FsbHk6IHNldERPQkxvY2FsbHksXG5cdFx0c2V0UHJpbWFyaWVzTG9jYWxseTogc2V0UHJpbWFyaWVzTG9jYWxseSxcblx0XHR1cGRhdGVVc2VyRXZlbnRzTG9jYWxseTogdXBkYXRlVXNlckV2ZW50c0xvY2FsbHksXG5cdFx0dXBkYXRlQWxsVXNlckV2ZW50c0xvY2FsbHk6IHVwZGF0ZUFsbFVzZXJFdmVudHNMb2NhbGx5LFxuXHRcdHVwZGF0ZUJpb0xvY2FsbHk6IHVwZGF0ZUJpb0xvY2FsbHksXG5cblx0XHRyZW1vdmVVc2VyRXZlbnRzTG9jYWxseTogcmVtb3ZlVXNlckV2ZW50c0xvY2FsbHksIC8vcmVtb3ZlIGRhdGFcblx0XHRcblx0XHRnZXRGdWxsUmVtb3RlREJmb3JMb2NhbDogZ2V0RnVsbFJlbW90ZURCZm9yTG9jYWwsXHQvL2xvY2FsLXJlbW90ZSBpbnRlcmFjaW9uc1xuXHRcdGdldFJlbW90ZUJpb0ZvckxvY2FsOiBnZXRSZW1vdGVCaW9Gb3JMb2NhbCxcdFx0XHRcblx0XHRnZXRSZW1vdGVFdmVudHNGb3JMb2NhbDogZ2V0UmVtb3RlRXZlbnRzRm9yTG9jYWwsXG5cdFx0Z2V0T25lUmVtb3RlRXZlbnRGb3JMb2NhbDogZ2V0T25lUmVtb3RlRXZlbnRGb3JMb2NhbCxcblx0XHRzZXRGdWxsUmVtb3RlREJmcm9tTG9jYWw6IHNldEZ1bGxSZW1vdGVEQmZyb21Mb2NhbCxcblx0XHRzZXRSZW1vdGVCaW9Gcm9tTG9jYWw6IHNldFJlbW90ZUJpb0Zyb21Mb2NhbCxcblx0XHRzZXRSZW1vdGVFdmVudHNGcm9tTG9jYWw6IHNldFJlbW90ZUV2ZW50c0Zyb21Mb2NhbCxcblx0XHRjbGVhbkRCRXZlbnRzQ2F0ZWdvcnk6IGNsZWFuREJFdmVudHNDYXRlZ29yeSxcblxuXHRcdGxvYWRCaW86IGxvYWRCaW8sXHQvL2V4dGVybmFsIG1ldGhvZHNcblx0XHRsb2FkRXZlbnRzUHJvZ3Jlc3NpdmVseTogbG9hZEV2ZW50c1Byb2dyZXNzaXZlbHksXG5cdFx0bG9hZEFuRXZlbnRQcm9ncmVzc2l2ZWx5OiBsb2FkQW5FdmVudFByb2dyZXNzaXZlbHksXG5cdFx0Y3JlYXRlTmV3RXZlbnQ6IGNyZWF0ZU5ld0V2ZW50XG5cdH1cblxuXHQvL2FuYWx5c2lzIG1ldGhvZHNcblx0ZnVuY3Rpb24gYmlvUHJpbWFyaWVzQXJlQ29tcGxldGVMb2NhbGx5KCkge1xuXHRcdGlmKCBjdXJyZW50VXNlci5iaW8udWlkICE9PSAnJyAmJlxuXHRcdFx0Y3VycmVudFVzZXIuYmlvLm5hbWUgIT09ICcnICYmXG5cdFx0XHRjdXJyZW50VXNlci5iaW8uZW1haWwgIT09ICcnXG5cdFx0XHQpXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRlbHNlIHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGZ1bmN0aW9uIGV2ZW50RXhpc3RzTG9jYWxseSh0eXBlLCBldmVudElkKSB7XG5cdFx0JGxvZy5pbmZvKCdjaGVja2luZyBpZiB0aGUgZXZlbnQgZXhpdHMnKTtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChjdXJyZW50VXNlci5ldmVudHNbdHlwZV1bZXZlbnRJZF0pKSByZXR1cm4gdHJ1ZTtcblx0XHRlbHNlIHJldHVybiBmYWxzZTtcblx0fVxuXG5cdC8vbW9kZWwgbWFpbnRhaW5hbmNlXG5cdGZ1bmN0aW9uIGNsZWFuRXZlbnRzKHR5cGUpIHtcblx0XHQvL2l0ZXJhdGUgdGhyb3VnaCBvYmplY3RzIGluIG9iamVjdFxuXHRcdE9iamVjdC5rZXlzKGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXSkuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcblx0XHRcdC8vaWYgYW55IGFyZSBub24tb2JqZWN0cywgZGVsZXRlIHRoZW1cblx0XHRcdGlmKCFhbmd1bGFyLmlzT2JqZWN0KGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXVtrZXldKSkge1xuXHRcdFx0XHRkZWxldGUgY3VycmVudFVzZXIuZXZlbnRzW3R5cGVdW2tleV07XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHQvL2dldHRlciBtZXRob2RzXG5cdGZ1bmN0aW9uIGdldFVJRExvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmJpby51aWQ7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXROYW1lTG9jYWxseSgpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuYmlvLm5hbWU7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRFbWFpbExvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmJpby5lbWFpbDtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldENvbXBhbnlMb2NhbGx5KCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5iaW8uY29tcGFueTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldFRpdGxlTG9jYWxseSgpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuYmlvLnRpdGxlO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXRET0JMb2NhbGx5KCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5iaW8uZG9iO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0RnVsbEJpb0xvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHVpZDogY3VycmVudFVzZXIuYmlvLnVpZCxcblx0XHRcdG5hbWU6IGN1cnJlbnRVc2VyLmJpby5uYW1lLFxuXHRcdFx0ZW1haWw6IGN1cnJlbnRVc2VyLmJpby5lbWFpbCxcblx0XHRcdGNvbXBhbnk6IGN1cnJlbnRVc2VyLmJpby5jb21wYW55LFxuXHRcdFx0dGl0bGU6IGN1cnJlbnRVc2VyLmJpby50aXRsZSxcblx0XHRcdGRvYjogY3VycmVudFVzZXIuYmlvLmRvYlxuXHRcdH07XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRPbmVVc2VyRXZlbnRMb2NhbGx5KHR5cGUsIGV2ZW50SWQpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuZXZlbnRzW3R5cGVdW2V2ZW50SURdO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0VXNlckV2ZW50c0xvY2FsbHkodHlwZSkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5ldmVudHNbdHlwZV07XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRBbGxVc2VyRXZlbnRzTG9jYWxseSgpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuZXZlbnRzO1xuXHR9XG5cblx0Ly9zZXR0ZXIgbWV0aG9kc1xuXHRmdW5jdGlvbiBzZXRVSURMb2NhbGx5KHVpZCkge1xuXHRcdGN1cnJlbnRVc2VyLmJpby51aWQgPSB1aWQ7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXROYW1lTG9jYWxseShuYW1lKSB7XG5cdFx0Y3VycmVudFVzZXIuYmlvLm5hbWUgPSBuYW1lO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0RW1haWxMb2NhbGx5KGVtYWlsKSB7XG5cdFx0Y3VycmVudFVzZXIuYmlvLmVtYWlsID0gZW1haWw7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXRDb21wYW55TG9jYWxseShjb21wYW55KSB7XG5cdFx0Y3VycmVudFVzZXIuYmlvLmNvbXBhbnkgPSBjb21wYW55O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzZXRUaXRsZUxvY2FsbHkodGl0bGUpIHtcblx0XHRjdXJyZW50VXNlci5iaW8udGl0bGUgPSB0aXRsZTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldERPQkxvY2FsbHkoZG9iKSB7XG5cdFx0Y3VycmVudFVzZXIuYmlvLmRvYiA9IGRvYjtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldFByaW1hcmllc0xvY2FsbHkoZW1haWwsIG5hbWUsIHVpZCkge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGVtYWlsKSkgc2V0RW1haWxMb2NhbGx5KGVtYWlsKTtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChuYW1lKSkgZ2V0TmFtZUxvY2FsbHkobmFtZSk7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodWlkKSkgc2V0VUlETG9jYWxseSh1aWQpO1xuXHR9XG5cblx0ZnVuY3Rpb24gdXBkYXRlVXNlckV2ZW50c0xvY2FsbHkodHlwZSwgZXZlbnQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGV2ZW50SUQgPSBldmVudC5pZDtcblxuXHRcdC8vY2hlY2sgaWYgdGhlIG1vZGVsIG5lZWRzIHRvIGJlIGNsZWFuZWRcblx0XHRjbGVhbkV2ZW50cyh0eXBlKTtcblx0XHQvL3RoZW4gbG9hZCB0aGUgbmV3IGV2ZW50XG5cdFx0Y3VycmVudFVzZXIuZXZlbnRzW3R5cGVdW2V2ZW50SURdID0gZXZlbnQ7XG5cdH1cblxuXHRmdW5jdGlvbiB1cGRhdGVBbGxVc2VyRXZlbnRzTG9jYWxseShhbGxVc2VyRXZlbnRzKSB7XG5cdFx0Y3VycmVudFVzZXIuZXZlbnRzID0gYWxsVXNlckV2ZW50cztcblx0fVxuXG5cdGZ1bmN0aW9uIHVwZGF0ZUJpb0xvY2FsbHkodXNlckJpbykge1xuXHRcdC8vdXBkYXRlIGxvY2FsIHZhbHVlc1xuXHRcdHNldE5hbWVMb2NhbGx5KHVzZXJCaW8ubmFtZSk7XG5cdFx0c2V0RW1haWxMb2NhbGx5KHVzZXJCaW8uZW1haWwpO1xuXHRcdHNldENvbXBhbnlMb2NhbGx5KHVzZXJCaW8uY29tcGFueSk7XG5cdFx0c2V0VGl0bGVMb2NhbGx5KHVzZXJCaW8udGl0bGUpO1xuXHRcdHNldERPQkxvY2FsbHkodXNlckJpby5kb2IpO1xuXHRcdC8vc2F2ZSB0byBkYlxuXHRcdHNldFJlbW90ZUJpb0Zyb21Mb2NhbCgpO1xuXHR9XG5cblx0Ly9kZWxldGUgTWV0aG9kc1xuXHRmdW5jdGlvbiByZW1vdmVVc2VyRXZlbnRzTG9jYWxseSh0eXBlLCBldmVudCkge1xuXHRcdC8vZG9lcyB0aGlzIHdvcms/XG5cdFx0ZGVsZXRlIGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXVtldmVudC5pZF07XG5cdH1cblxuXHQvL3JlbW90ZS1sb2NhbCBpbnRlcmFjdGlvbiBNZXRob2RzXG5cdGZ1bmN0aW9uIGdldEZ1bGxSZW1vdGVEQmZvckxvY2FsKCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0ZGIuZG93bmxvYWRVc2VyRGF0YSgpXG5cdFx0LnRoZW4oZnVuY3Rpb24ocmVtb3RlVXNlckRhdGEpIHtcblx0XHRcdGN1cnJlbnRVc2VyID0gcmVtb3RlVXNlckRhdGE7XG5cdFx0fSlcblx0fVxuXG5cdGZ1bmN0aW9uIGdldFJlbW90ZUJpb0ZvckxvY2FsKHVpZCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXHRcdFx0XHRcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL2dvIG91dCB0byB0aGUgZGIgYmVmb3JlIHJlc29sdmluZ1xuXHRcdFx0ZGIuZ2V0VXNlckJpbyh1aWQpXG5cdFx0XHQudGhlbihmdW5jdGlvbih1c2VyQmlvKSB7XG5cblx0XHRcdFx0cmVzb2x2ZSh1c2VyQmlvKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0cmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3IgcmVhZGluZyB0aGUgdXNlciBiaW86ICcgKyBlcnJvcik7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXHRcdFxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0UmVtb3RlRXZlbnRzRm9yTG9jYWwoKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cdFx0XHRcdFxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9nbyBvdXQgdG8gdGhlIGRiIGJlZm9yZSByZXNvbHZpbmdcblx0XHRcdGRiLmdldFVzZXJFdmVudHMoZ2V0VUlETG9jYWxseSgpKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24ob2J0YWluZWRVc2VyRXZlbnRzKSB7XG5cblx0XHRcdFx0Ly9zYXZlIHRoZSByZXN1bHRzIHRvIHRoZSBsb2NhbCBkYXRhYnNlXG5cdFx0XHRcdE9iamVjdC5rZXlzKG9idGFpbmVkVXNlckV2ZW50cykuZm9yRWFjaChmdW5jdGlvbihldmVudFR5cGUpIHtcblx0XHRcdFx0XHQvL3dpdGhpbiBlYWNoIGV2ZW50IHR5cGUgaXRlcmF0ZSB0aHJvdWdoIHRoZSBhY3R1YWwgZXZlbnRzXG5cdFx0XHRcdFx0T2JqZWN0LmtleXMob2J0YWluZWRVc2VyRXZlbnRzW2V2ZW50VHlwZV0pLmZvckVhY2goZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRcdFx0XHRcdC8vb25jZSB3ZSBzZWUgdGhlIGV2ZW50cywgc2F2ZSB0aGVtIHRvIHRoZSBsb2NhbCBtb2RlbFxuXG5cdFx0XHRcdFx0XHR1cGRhdGVVc2VyRXZlbnRzTG9jYWxseShldmVudFR5cGUsIG9idGFpbmVkVXNlckV2ZW50c1tldmVudFR5cGVdW2V2ZW50XSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly9yZXR1cm4gdGhlIHJlc3VsdHMgdG8gdGhlIHJlcXVlc3Rpbmcgb2JqZWN0XG5cdFx0XHRcdHJlc29sdmUob2J0YWluZWRVc2VyRXZlbnRzKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0cmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3IgcmVhZGluZyB0aGUgdXNlciBldmVudHM6ICcgKyBlcnJvcik7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0T25lUmVtb3RlRXZlbnRGb3JMb2NhbChldmVudElkKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcblx0XHRcdC8vZ29pbmcgdG8gYmFja2VuZCBzZXJ2aWNlc1xuXHRcdFx0ZGIuZ2V0QUhvc3RlZEV2ZW50KGdldFVJRExvY2FsbHkoKSwgZXZlbnRJZClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKG9idGFpbmVkRXZlbnQpIHtcblxuXHRcdFx0XHQvL3NhdmUgdGhlIHJlc3VsdCB0byB0aGUgbG9jYWwgbW9kZWxcblx0XHRcdFx0JGxvZy5pbmZvKG9idGFpbmVkRXZlbnQpO1xuXHRcdFx0XHQvL3JldHVybiB0aGUgcmVzdWx0IHRvIHRoZSByZXF1ZXN0aW5nIG9iamVjdFxuXHRcdFx0XHRyZXNvbHZlKG9idGFpbmVkRXZlbnQpO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRyZWplY3QoJ1RoZXJlIHdhcyBhbiBlcnJvciByZWFkaW5nIHRoZSB1c2VyIGV2ZW50OiAnICsgZXJyb3IpO1xuXHRcdFx0fSlcblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldEZ1bGxSZW1vdGVEQmZyb21Mb2NhbCgpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdGRiLnVwbG9hZFVzZXJEYXRhKGN1cnJlbnRVc2VyKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldFJlbW90ZUJpb0Zyb21Mb2NhbCgpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdGRiLnVwbG9hZFVzZXJCaW8oY3VycmVudFVzZXIuYmlvKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldFJlbW90ZUV2ZW50c0Zyb21Mb2NhbCgpIHt9XG5cblx0ZnVuY3Rpb24gY2xlYW5EQkV2ZW50c0NhdGVnb3J5KGNhdGVnb3J5KSB7XG5cdFx0Ly9kZWNsYXIgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0Ly9yZW1vdmUgJ3VwZGF0ZWQnIG9iamVjdCBpZiBuZWVkIGJlXG5cdFx0Ly9kYiBjYWxsIHNvIHJldHVybiBhIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL2NoZWNrIGZvciBvYmplY3Rcblx0XHRcdGRiLnRoZXJlV2FzQW5VcGRhdGVGaWVsZChjYXRlZ29yeSwgZ2V0VUlETG9jYWxseSgpKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24oYWZmaXJtYXRpdmVSZXNwb25zZSkge1xuXHRcdFx0XHQvL2lmIHRoZXJlIHdhcyBhbiB1cGRhdGUgZmllbGQsIGRlbGV0ZSBpdFxuXHRcdFx0XHRkYi5kZWxldGVVcGRhdGVGaWVsZChjYXRlZ29yeSwgZ2V0VUlETG9jYWxseSgpKVxuXHRcdFx0XHQudGhlbihmdW5jdGlvbihhZmZpcm1hdGl2ZVJlc3BvbnNlKSB7ICRsb2cuaW5mbyhhZmZpcm1hdGl2ZVJlc3BvbnNlKTsgfSApXG5cdFx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvclJlc3BvbnNlKSB7ICRsb2cuaW5mbyhlcnJvclJlc3BvbnNlKTsgfSApXG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yUmVzcG9uc2UpIHtcblx0XHRcdFx0JGxvZy5pbmZvKGVycm9yUmVzcG9uc2UpXG5cdFx0XHR9KVxuXG5cdFx0fSk7XG5cdFx0Ly9pZiBpdCBpcyB0aGVyZSwgcmVtb3ZlIGl0XG5cdH1cblxuXHRmdW5jdGlvbiBsb2FkQmlvKHVpZCkge1xuXG5cdFx0Ly9taWdodCBuZWVkIHRvIGdvIG91dCB0byB0aGUgZGIgc28gcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9jaGVjayBmb3IgYmlvIGxvY2FsbHkgZmlyc3Rcblx0XHRcdGlmKGJpb1ByaW1hcmllc0FyZUNvbXBsZXRlTG9jYWxseSgpKSB7XG5cdFx0XHRcdFxuXHRcdFx0XHQvL3Bhc3MgaXQgYmFjayBhcyBzdWNjZXNzXG5cdFx0XHRcdHJlc29sdmUoZ2V0RnVsbEJpb0xvY2FsbHkoKSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2lmIHRoZXkncmUgbm90IGNvbXBsZXRlIGxvY2FsbHksIGNoZWNrIHRoZSBzZXJ2ZXJcblx0XHRcdFx0Z2V0UmVtb3RlQmlvRm9yTG9jYWwodWlkKVxuXHRcdFx0XHQudGhlbihmdW5jdGlvbihiaW9Gcm9tUmVtb3RlREIpIHtcblx0XHRcdFx0XHRyZXNvbHZlKGJpb0Zyb21SZW1vdGVEQik7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHRcdH0pXG5cdFx0XHR9XG5cblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gbG9hZEFuRXZlbnRQcm9ncmVzc2l2ZWx5KHVpZCwgZXZlbnRJZCkge1xuXHRcdC8vdXBkYXRlIHVpZCBpZiBuZWVkIGJlXG5cdFx0c2V0VUlETG9jYWxseSh1aWQpO1xuXG5cdFx0Ly9nb2luZyBvdXQgdGhlIHRoZSBkYiBzbyByZXR1cm4gYSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHQvL3JlYWNoIG91dCB0byBkYlxuXHRcdFx0Z2V0T25lUmVtb3RlRXZlbnRGb3JMb2NhbChldmVudElkKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24ob2J0YWluZWRVc2VyRXZlbnQpIHtcblx0XHRcdFx0Ly93aGVuIHRoZSBkYiByZXN1bHRzIGNvbWUgYmFjaywgcmV0dXJuIGl0XG5cdFx0XHRcdHJlc29sdmUob2J0YWluZWRVc2VyRXZlbnQpXG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKClcblxuXHRcdFx0Ly9maXJzdCByZXR1cm4gd2hhdGV2ZXIgZXZlbnQgaW5mbyBpcyBzdG9yZWQgbG9jYWxseVxuXHRcdFx0Ly9jaGVjayBpZiB0aGUgZXZlbnQgaXMgYXZhaWxhYmxlIGxvY2FsbHlcblx0XHRcdGlmKGV2ZW50RXhpc3RzTG9jYWxseSgnaG9zdGluZycsIGV2ZW50SWQpKSByZXNvbHZlKGdldE9uZVVzZXJFdmVudExvY2FsbHkoJ2hvc3RpbmcnLCBldmVudElkKSk7XG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGxvYWRFdmVudHNQcm9ncmVzc2l2ZWx5KHVpZCkge1xuXHRcdHZhciBldmVudFR5cGVzID0gWydhdHRlbmRpbmcnLCAncGVuZGluZycsICdob3N0aW5nJywgJ2NvbXBsZXRlZCddO1xuXHRcdHZhciBhbGxFdmVudHMgPSB7fTtcblxuXHRcdC8vd2lsbCBnbyBvdXQgdG8gdGhlIGRiIHNvIHJldHVybiBhIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHRcdGdldFJlbW90ZUV2ZW50c0ZvckxvY2FsKClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKG9idGFpbmVkVXNlckV2ZW50cykge1xuXHRcdFx0XHQvL3doZW4gdGhlIGRiIHJlc3VsdHMgY29tZSBiYWNrLCByZXR1cm4gdGhvc2Vcblx0XHRcdFx0cmVzb2x2ZShvYnRhaW5lZFVzZXJFdmVudHMpO1xuXHRcdFx0fSlcblxuXHRcdFx0Ly9idWlsZCB0aGUgbG9jYWwgbW9kZWxcblx0XHRcdGFsbEV2ZW50cyA9IGdldFVzZXJFdmVudHNMb2NhbGx5KHR5cGUpO1xuXG5cdFx0XHQvL2ZpcnN0IHJldHVybiB3aGF0ZXZlciBldmVudCBpbmZvIGlzIHN0b3JlZCBsb2NhbGx5XG5cdFx0XHRyZXNvbHZlKGFsbEV2ZW50cyk7XG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGNyZWF0ZU5ld0V2ZW50KGV2ZW50SUQpIHtcblx0XHQvL2RlY2xhciBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cdFx0dmFyIG5ld0V2ZW50ID0ge307XG5cblx0XHQvL2ZpcnN0IGNyZWF0ZSB0aGUgb2JqZWN0XG5cdFx0bmV3RXZlbnQgPSB7XG5cdFx0XHRpZDogZXZlbnRJRCxcblx0XHRcdG5hbWU6ICcnLFxuXHRcdFx0dHlwZTogJycsXG5cdFx0XHRob3N0OiB7XG5cdFx0XHRcdG5hbWU6IGN1cnJlbnRVc2VyLmJpby5uYW1lLFxuXHRcdFx0XHR1aWQ6IGN1cnJlbnRVc2VyLmJpby51aWRcblx0XHRcdH0sXG5cdFx0XHRtZXNzYWdlOiAnJyxcblx0XHRcdGV2ZW50VGltZXM6IHtcblx0XHRcdFx0c3RhcnQ6IDAsXG5cdFx0XHRcdGVuZDogMFxuXHRcdFx0fSxcblx0XHRcdGFkZHJlc3M6IHtcblx0XHRcdFx0c3RyZWV0MDE6ICcnLFxuXHRcdFx0XHRzdHJlZXQwMjogJycsXG5cdFx0XHRcdHN0cmVldDAzOiAnJyxcblx0XHRcdFx0Y2l0eTogJycsXG5cdFx0XHRcdHN0YXRlOiAnJyxcblx0XHRcdFx0emlwOiAwXG5cdFx0XHR9LFxuXHRcdFx0Z3Vlc3RMaXN0OiB7fVxuXHRcdH07XG5cblx0XHQvL3NhdmUgaXQgbG9jYWxseVxuXHRcdHVwZGF0ZVVzZXJFdmVudHNMb2NhbGx5KCdob3N0aW5nJywgbmV3RXZlbnQpO1xuXG5cdFx0Ly90aGVuIGNyZWF0ZSBpdCBvbiB0aGUgc2VydmVyXG5cdFx0Ly93aWxsIGdvIG91dCB0byB0aGUgZGIgc28gcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFxuXHRcdFx0Ly9tYW5hZ2UgdGhlIHByb21pc2UgcmVzcG9uc2VzXG5cdFx0XHRkYi5jcmVhdGVIb3N0ZWRFdmVudChnZXRVSURMb2NhbGx5KCksIG5ld0V2ZW50KVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24obWVzc2FnZSkge1xuXHRcdFx0XHRyZXNvbHZlKG1lc3NhZ2UpO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0fSlcblxuXHRcdH0pO1xuXG5cdH1cblx0XG5cdHJldHVybiBhbGxVc2VyRGF0YTtcbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmZhY3RvcnkoJ3ZhbGlkYXRpb24nLCB2YWxpZGF0aW9uKTtcblxudmFsaWRhdGlvbi4kaW5qZWN0ID0gWyckbG9nJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gdmFsaWRhdGlvbigkbG9nKSB7XG5cdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0dmFyIG1pbmltdW1OYW1lTGVuZ3RoID0gMztcblx0dmFyIG1pbmltdW1QYXNzTGVuZ3RoID0gMTY7XG5cdHZhciBtYXhpbXVtUGFzc0xlbmd0aCA9IDEwMDtcblxuXHR2YXIgYWxsVmFsaWRhdGlvbnMgPSB7XG5cdFx0cmVxdWlyZWQ6IHJlcXVpcmVkLFxuXHRcdG1pbk5hbWVMZW5ndGg6IG1pbk5hbWVMZW5ndGgsXG5cdFx0bWluUGFzc0xlbmd0aDogbWluUGFzc0xlbmd0aCxcblx0XHRtYXhQYXNzTGVuZ3RoOiBtYXhQYXNzTGVuZ3RoLFxuXHRcdGF0TGVhc3RPbmVTeW1ib2w6IGF0TGVhc3RPbmVTeW1ib2wsXG5cdFx0YXRMZWFzdE9uZU51bWJlcjogYXRMZWFzdE9uZU51bWJlcixcblx0XHRhdExlYXN0T25lTG93ZXJjYXNlOiBhdExlYXN0T25lTG93ZXJjYXNlLFxuXHRcdGF0TGVhc3RPbmVVcHBlcmNhc2U6IGF0TGVhc3RPbmVVcHBlcmNhc2UsXG5cdFx0aWxsZWdhbENoYXJhY3RlcjogaWxsZWdhbENoYXJhY3Rlcixcblx0XHRlbWFpbDogZW1haWwsXG5cdFx0ZGF0ZU9mQmlydGg6IGRhdGVPZkJpcnRoXG5cdH07XG5cblx0ZnVuY3Rpb24gcmVxdWlyZWQodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzVW5kZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0cmV0dXJuICdUaGlzIGlzIGEgcmVxdWlyZWQgZmllbGQnO1xuXHRcdH0gXG5cdH1cblxuXHRmdW5jdGlvbiBtaW5OYW1lTGVuZ3RoKHZhbHVlKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHRpZih2YWx1ZS5sZW5ndGggPCBtaW5pbXVtTmFtZUxlbmd0aCkgcmV0dXJuICgnTmFtZSBzaG91bGQgYmUgYXQgbGVhc3QgJyArIG1pbmltdW1OYW1lTGVuZ3RoICsgJyBjaGFyYWN0ZXJzJyk7XG5cdFx0fSBcblx0fVxuXG5cdGZ1bmN0aW9uIG1pblBhc3NMZW5ndGgodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdGlmKCEodmFsdWUubGVuZ3RoIDwgbWluaW11bVBhc3NMZW5ndGgpKSByZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0ZnVuY3Rpb24gbWF4UGFzc0xlbmd0aCh2YWx1ZSkge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0aWYoISh2YWx1ZS5sZW5ndGggPiBtYXhpbXVtUGFzc0xlbmd0aCkpIHJldHVybiB0cnVlO1xuXHRcdH0gXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0ZnVuY3Rpb24gYXRMZWFzdE9uZVN5bWJvbCh2YWx1ZSkge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0Ly8gYnVpbGQgcmVnZXhcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIltcXCFcXEBcXCNcXCRcXCVcXF5cXCZcXCpdXCIpO1xuXG5cdFx0XHQvL2NoZWNrIGNvbnN0cmF0aW50XG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3QodmFsdWUpKSB7XG5cdFx0XHRcdC8vc3VjY2VzczogYXQgbGVhc3Qgb25lIHNwZWNpYWwgY2hhcmFjdGVyIGZvdW5kXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9mYWlsdXJlOiBkaWRuJ3QgZmluZCBhbnkgc3BjaWFsIGNoYXJhY3RlcnNcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGZ1bmN0aW9uIGF0TGVhc3RPbmVOdW1iZXIodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdC8vIGJ1aWxkIHJlZ2V4XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbMC05XVwiLCBcIlwiKTtcblxuXHRcdFx0Ly9jaGVjayBjb25zdHJhdGludFxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZhbHVlKSkge1xuXHRcdFx0XHQvL3N1Y2Nlc3M6IGF0IGxlYXN0IG9uZSBzcGVjaWFsIGNoYXJhY3RlciBmb3VuZFxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vZmFpbHVyZTogZGlkbid0IGZpbmQgYW55IHNwY2lhbCBjaGFyYWN0ZXJzXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuICAgIGZ1bmN0aW9uIGF0TGVhc3RPbmVMb3dlcmNhc2UodmFsdWUpIHtcbiAgICBcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0Ly8gYnVpbGQgcmVnZXhcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIlthLXpdXCIsIFwiXCIpO1xuXG5cdFx0XHQvL2NoZWNrIGNvbnN0cmF0aW50XG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3QodmFsdWUpKSB7XG5cdFx0XHRcdC8vc3VjY2VzczogYXQgbGVhc3Qgb25lIHNwZWNpYWwgY2hhcmFjdGVyIGZvdW5kXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9mYWlsdXJlOiBkaWRuJ3QgZmluZCBhbnkgc3BjaWFsIGNoYXJhY3RlcnNcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhdExlYXN0T25lVXBwZXJjYXNlKHZhbHVlKSB7XG4gICAgXHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdC8vIGJ1aWxkIHJlZ2V4XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbQS1aXVwiLCBcIlwiKTtcblxuXHRcdFx0Ly9jaGVjayBjb25zdHJhdGludFxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZhbHVlKSkge1xuXHRcdFx0XHQvL3N1Y2Nlc3M6IGF0IGxlYXN0IG9uZSBzcGVjaWFsIGNoYXJhY3RlciBmb3VuZFxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vZmFpbHVyZTogZGlkbid0IGZpbmQgYW55IHNwY2lhbCBjaGFyYWN0ZXJzXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaWxsZWdhbENoYXJhY3Rlcih2YWx1ZSkge1xuICAgIFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHQvLyBidWlsZCByZWdleFxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW15BLXowLTlcXCFcXEBcXCNcXCRcXCVcXF5cXCZcXCpdXCIsIFwiXCIpO1xuXG5cdFx0XHQvL2NoZWNrIGNvbnN0cmF0aW50XG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3QodmFsdWUpKSB7XG5cdFx0XHRcdC8vc3VjY2VzczogYXQgbGVhc3Qgb25lIHNwZWNpYWwgY2hhcmFjdGVyIGZvdW5kXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vZmFpbHVyZTogZGlkbid0IGZpbmQgYW55IHNwY2lhbCBjaGFyYWN0ZXJzXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gZW1haWwodmFsdWUpIHtcbiAgICBcdC8vZGVmaW5lIGNvbnN0cmFpbnRzXG4gICAgXHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKD86XFwuW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKykqQCg/OlthLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cXC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cIiwgXCJcIik7XG5cbiAgICBcdGlmKCFjb25zdHJhaW50LnRlc3QodmFsdWUpKSByZXR1cm4gJ05vdCBhIHZhbGlkIGUtbWFpbCBhZGRyZXNzJ1xuICAgIFx0XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGF0ZU9mQmlydGgodmFsdWUpIHt9XG5cblx0cmV0dXJuIGFsbFZhbGlkYXRpb25zO1xufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29uZmlnKGNvbmZpZyk7XG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGNvbmZpZygkcm91dGVQcm92aWRlcikgeyAgIFxuICAgICRyb3V0ZVByb3ZpZGVyXG4gICAgLndoZW4oJy8nLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvbGFuZGluZ1BhZ2UuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ0xhbmRpbmdQYWdlQ29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xuICAgIH0pXG4gICAgLndoZW4oJy9zaWdudXAnLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvbmV3VXNlclNpZ251cC5odG0nLFxuICAgICAgICBjb250cm9sbGVyOiAnTmV3VXNlclNpZ25VcENvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICB9KVxuICAgIC53aGVuKCcvbG9naW4nLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcmVnaXN0ZXJlZFVzZXJMb2dpbi5odG0nLFxuICAgICAgICBjb250cm9sbGVyOiAnUmVnVXNlckxvZ2luQ29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xuICAgIH0pXG4gICAgLndoZW4oJy91c2VySW5mb3JtYXRpb24vOnVpZD8nLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvdXNlckluZm9ybWF0aW9uLmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdVc2VySW5mb3JtYXRpb25Db250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICByZXNvbHZlOiB7IC8qIEBuZ0luamVjdCAqL1xuICAgICAgICAgICAgdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZTogdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZVxuICAgICAgICB9XG4gICAgfSlcbiAgICAud2hlbignL3VzZXJFdmVudHMvOnVpZD8nLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvdXNlckV2ZW50cy5odG0nLFxuICAgICAgICBjb250cm9sbGVyOiAnVXNlckV2ZW50c0NvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgIHJlc29sdmU6IHsgLyogQG5nSW5qZWN0ICovXG4gICAgICAgICAgICB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlOiB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlXG4gICAgICAgIH1cbiAgICB9KVxuICAgIC53aGVuKCcvZXZlbnQvaG9zdC86ZXZlbnRJZC86dWlkLzpzZWN0aW9uJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2hvc3RFdmVudC5odG0nLFxuICAgICAgICBjb250cm9sbGVyOiAnSG9zdEV2ZW50Q29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgcmVzb2x2ZTogeyAvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgICAgIHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2U6IHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2UsXG4gICAgICAgIH1cbiAgICB9KVxuICAgIC53aGVuKCcvZXZlbnQvZ3Vlc3QvOmV2ZW50SWQvOnVpZC86aG9zdElkJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2d1ZXN0RXZlbnQuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ0d1ZXN0RXZlbnRDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICByZXNvbHZlOiB7IC8qIEBuZ0luamVjdCAqL1xuICAgICAgICAgICAgdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZTogdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZSxcbiAgICAgICAgfVxuICAgIH0pXG4gICAgLndoZW4oJy9ldmVudC86ZXZlbnRJZD8vOmhvc3RJZD8vOnVpZD8vOnNlY3Rpb24/Jywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2FuRXZlbnQuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ0FuRXZlbnRDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICByZXNvbHZlOiB7IC8qIEBuZ0luamVjdCAqL1xuICAgICAgICAgICAgdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZTogdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZSxcbiAgICAgICAgICAgIGV2ZW50Vmlld0NoYW5nZXI6IGV2ZW50Vmlld0NoYW5nZXJcbiAgICAgICAgfVxuICAgIH0pXG4gICAgLm90aGVyd2lzZSh7XG4gICAgICAgIHJlZGlyZWN0VG86ICcvJ1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlKGF1dGhTZXJ2aWNlKSB7XG4gICAgYXV0aFNlcnZpY2UuaXNMb2dnZWRJbigpO1xufTtcblxuZnVuY3Rpb24gZXZlbnRWaWV3Q2hhbmdlcih0cmFmZmljVmFsZXQsICRyb3V0ZSkge1xuICAgIHRyYWZmaWNWYWxldC5ldmVudFJvdXRlKCRyb3V0ZS5jdXJyZW50LnBhcmFtcy5ldmVudElkLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm91dGUuY3VycmVudC5wYXJhbXMuaG9zdElkLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm91dGUuY3VycmVudC5wYXJhbXMudWlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyb3V0ZS5jdXJyZW50LnBhcmFtcy5zZWN0aW9uKTtcbn07XG4vKiBBZGRBR3Vlc3QuZGlyZWN0aXZlLmpzICovXG5cbi8qKlxuKiBAZGVzYyBkaXNwbGF5cyBhIGxpc3Qgb2YgYWxsIGd1ZXN0cyBpbnZpdGVkIHRvIGFuIGV2ZW50IHRoaXMgdXNlciBpcyBob3N0aW5nLlxuKiBAZXhhbXBsZSA8YWRkLWEtZ3Vlc3Q+PC9hZGQtYS1ndWVzdD5cbiovXG5cbmFuZ3VsYXJcblx0Lm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuXHQuZGlyZWN0aXZlKCdhZGRBR3Vlc3QnLCBhZGRBR3Vlc3QpO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGFkZEFHdWVzdCgpIHtcbiAgICBsaW5rRnVuYy4kaW5qZWN0ID0gW1wic2NvcGVcIiwgXCJlbFwiLCBcImF0dHJcIiwgXCJjdHJsXCJdO1xuXHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdHJlc3RyaWN0OiAnQUVDTScsXG5cdFx0dGVtcGxhdGVVcmw6ICcuLi92aWV3cy9kaXJlY3RpdmVzL2FkZEFHdWVzdC5kaXJlY3RpdmUuaHRtJyxcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdHNjb3BlOiB7XG5cdFx0XHRndWVzdExpc3Q6ICc9Jyxcblx0XHR9LFxuXHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdGNvbnRyb2xsZXI6IGFkZEFHdWVzdENvbnRyb2xsZXIsXG5cdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0fVxuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHtcbiAgICB9XG5cbiAgICBhZGRBR3Vlc3RDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnXTtcbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBhZGRBR3Vlc3RDb250cm9sbGVyKCRsb2cpIHtcblx0ICAgIHZhciB2bSA9IHRoaXM7XG5cblx0ICAgIC8vbG9jYWwgdmFyaWFibGVzXG5cblxuXHQgICAgLy9sb2NhbCBtZXRob2RzXG5cblxuXHQgICAgZnVuY3Rpb24gaW5pdCgpIHtcblx0ICAgIFx0XG5cdCAgICB9XG5cdCAgICAvL3ZtIG1ldGhvZHNcblxuXHRcdC8vYWN0aW9uc1xuXHRcdGluaXQoKTtcblxuXHR9XG5cblx0cmV0dXJuICBkaXJlY3RpdmU7XG5cdFx0XG59O1xuLyogSG9zdGVkRXZlbnRzTGlzdC5kaXJlY3RpdmUuanMgKi9cblxuLyoqXG4qIEBkZXNjIGRpc3BsYXlzIGEgbGlzdCBvZiBhbGwgdGhlIGV2ZW50cyB0aGUgY3VycmVudCB1c2VyIGlzIGhvc3RpbmcuXG4qIEBleGFtcGxlIDxob3N0ZWQtZXZlbnRzLWxpc3Q+PC9ob3N0ZWQtZXZlbnRzLWxpc3Q+XG4qL1xuXG5hbmd1bGFyXG5cdC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcblx0LmRpcmVjdGl2ZSgnaG9zdGVkRXZlbnRzTGlzdCcsIGhvc3RlZEV2ZW50c0xpc3QpO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGhvc3RlZEV2ZW50c0xpc3QoKSB7XG4gICAgbGlua0Z1bmMuJGluamVjdCA9IFtcInNjb3BlXCIsIFwiZWxcIiwgXCJhdHRyXCIsIFwiY3RybFwiXTtcblx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRyZXN0cmljdDogJ0FFQ00nLFxuXHRcdHRlbXBsYXRlVXJsOiAnLi4vdmlld3MvZGlyZWN0aXZlcy9ob3N0ZWRFdmVudHNMaXN0LmRpcmVjdGl2ZS5odG0nLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0c2NvcGU6IHtcblx0XHRcdGhvc3RlZEV2ZW50czogJz0nLFxuXHRcdFx0dXNlcklkOiAnPSdcblx0XHR9LFxuXHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdGNvbnRyb2xsZXI6IGhvc3RlZEV2ZW50c0xpc3RDb250cm9sbGVyLFxuXHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdH1cblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7XG4gICAgfVxuXG4gICAgaG9zdGVkRXZlbnRzTGlzdENvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICd0cmFmZmljVmFsZXQnXTtcbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBob3N0ZWRFdmVudHNMaXN0Q29udHJvbGxlcigkbG9nLCB0cmFmZmljVmFsZXQpIHtcblx0ICAgIHZhciB2bSA9IHRoaXM7XG5cblx0ICAgIC8vbG9jYWwgdmFyaWFibGVzXG5cdCAgICB2YXIgaG9zdGVkRXZlbnRzU2hlcnBhID0gdHJhZmZpY1ZhbGV0O1xuXG5cdCAgICAvL3ZpZXcgbW9kZWwgdmFyaWFibGVzXG5cdCAgICB2bS5ndWVzdHNBcmVJbnZpdGVkID0gZmFsc2U7XG5cblx0ICAgIC8vbG9jYWwgbWV0aG9kc1xuXHQgICAgZnVuY3Rpb24gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKSB7XG5cdFx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gY291bnRHdWVzdHMobGlzdCkge1xuXHRcdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlXG5cdFx0XHR2YXIgY291bnRlciA9IDA7XG5cblx0XHRcdC8vaWYgd2UncmUgY291bnRpbmcsIHRoZW4gdGhlcmUncyBhIGxpc3QsIHNvIHRocm93IHRoZSBmbGFnXG5cdFx0XHR2bS5ndWVzdHNBcmVJbnZpdGVkID0gdHJ1ZTtcblxuXHRcdFx0T2JqZWN0LmtleXNbbGlzdF0uZm9yRWFjaChmdW5jdGlvbihndWVzdCkge1xuXHRcdFx0XHRjb3VudGVyKys7XG5cdFx0XHR9KVxuXG5cdFx0XHRyZXR1cm4gY291bnRlcjtcblx0XHR9XG5cblx0XHQvL3ZpZXcgbW9kZWwgbWV0aG9kc1xuXHRcdHZtLmZvcm1hdERhdGUgPSBmdW5jdGlvbih1bml4VGltZSkge1xuXHRcdFx0Ly9yZWZvcm1hdCB0aGUgdGltZVxuXHRcdFx0JGxvZy5pbmZvKCdnb3QgdGhpc3QgdGltZTogJyArIHVuaXhUaW1lKTtcblx0XHRcdHJldHVybiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpO1xuXHRcdH1cblxuXHRcdHZtLmd1ZXN0c0F0dGVuZGluZyA9IGZ1bmN0aW9uKGd1ZXN0TGlzdCkge1xuXHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoZ3Vlc3RMaXN0KSkge1xuXHRcdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChndWVzdExpc3RbJ2F0dGVuZGluZyddKSkgcmV0dXJuIGNvdW50R3Vlc3RzKGd1ZXN0TGlzdFsnYXR0ZW5kaW5nJ10pO1xuXHRcdFx0XHRlbHNlIHJldHVybiAwO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSByZXR1cm4gMDtcblx0XHR9XG5cblx0XHR2bS5ndWVzdHNJbnZpdGVkID0gZnVuY3Rpb24oZ3Vlc3RMaXN0KSB7XG5cdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChndWVzdExpc3QpKSB7XG5cdFx0XHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRcdFx0dmFyIGd1ZXN0Q291bnQgPSB7IGF0dGVuZGluZzogMCwgcGVuZGluZzogMCwgZGVjbGluZWQ6IDAgfTtcblxuXHRcdFx0XHQvL2xvY2FsIG1ldGhvZHNcblx0XHRcdFx0ZnVuY3Rpb24gdG90YWxHdWVzdENvdW50KCkge1xuXHRcdFx0XHRcdHJldHVybiBndWVzdENvdW50LmF0dGVuZGluZyArIGd1ZXN0Q291bnQucGVuZGluZyArIGd1ZXN0Q291bnQuZGVjbGluZWQ7XG5cdFx0XHRcdH0gXG5cblx0XHRcdFx0Ly9jaGVjayB2YWx1ZXNcblx0XHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoZ3Vlc3RMaXN0WydhdHRlbmRpbmcnXSkpIGd1ZXN0Q291bnQuYXR0ZW5kaW5nID0gY291bnRHdWVzdHMoZ3Vlc3RMaXN0WydhdHRlbmRpbmcnXSk7XG5cdFx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGd1ZXN0TGlzdFsncGVuZGluZyddKSkgZ3Vlc3RDb3VudC5wZW5kaW5nID0gY291bnRHdWVzdHMoZ3Vlc3RMaXN0WydwZW5kaW5nJ10pO1xuXHRcdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChndWVzdExpc3RbJ2RlY2xpbmVkJ10pKSBndWVzdENvdW50LmRlY2xpbmVkID0gY291bnRHdWVzdHMoZ3Vlc3RMaXN0WydkZWNsaW5lZCddKTtcblxuXHRcdFx0XHRyZXR1cm4gdG90YWxHdWVzdENvdW50KCk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHJldHVybiAwO1xuXHRcdH1cblxuXHRcdHZtLnBlcmNlbnRhZ2VBdHRlbmRpbmcgPSBmdW5jdGlvbihndWVzdExpc3QpIHtcblx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGd1ZXN0TGlzdCkpIHtcblx0XHRcdFx0cmV0dXJuIChndWVzdHNBdHRlbmRpbmcoZ3Vlc3RsaXN0KSAvIGd1ZXN0c0ludml0ZWQoZ3Vlc3RMaXN0KSk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHJldHVybiAwO1xuXHRcdH1cblxuXHRcdHZtLmV2ZW50Q2xpY2tlZCA9IGZ1bmN0aW9uKGV2ZW50SUQpIHtcblx0XHRcdC8vcmVkaXJlY3QgdG8gdGhlIGV2ZW50IHBhZ2Vcblx0XHRcdCRsb2cuaW5mbygncmVkaXJlY3RpbmcgdG86IC9ldmVudC8nICsgZXZlbnRJRCArICcvJyArIHZtLmhvc3RlZEV2ZW50c1tldmVudElEXS5ob3N0LnVpZCArICcvJyArIHZtLnVzZXJJZCk7XG5cdFx0XHRob3N0ZWRFdmVudHNTaGVycGEucmVkaXJlY3RUbygnL2V2ZW50JywgZXZlbnRJRCwgdm0uaG9zdGVkRXZlbnRzW2V2ZW50SURdLmhvc3QudWlkLCB2bS51c2VySWQpO1xuXHRcdH1cblxuXHRcdC8vYWN0aW9uc1xuXG5cdH1cblxuXHRyZXR1cm4gIGRpcmVjdGl2ZTtcblx0XHRcbn07XG4vKiBIb3N0ZWRFdmVudHNQcm9ncmVzc0Jhci5kaXJlY3RpdmUuanMgKi9cblxuLyoqXG4qIEBkZXNjIGRpc3BsYXlzIGEgdXNlcnMgcHJvZ3Jlc3MgdGhyb3VnaCB0aGUgZXZlbnRzIHBhZ2UuXG4qIEBleGFtcGxlIDxob3N0ZWQtZXZlbnRzLXByb2dyZXNzLWJhcj48L2hvc3RlZC1ldmVudHMtcHJvZ3Jlc3MtYmFyPlxuKi9cblxuYW5ndWxhclxuXHQubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG5cdC5kaXJlY3RpdmUoJ3Byb2dyZXNzQmFyJywgcHJvZ3Jlc3NCYXIpO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHByb2dyZXNzQmFyKCkge1xucmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICBzY29wZToge1xuICAgICAgICBjdXJWYWw6ICdAJyxcbiAgICAgICAgbWF4VmFsOiAnQCdcbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZTogXCI8ZGl2IGNsYXNzPSdwcm9ncmVzcy1iYXInPlwiK1xuICAgICAgICAgICAgICAgICAgXCI8ZGl2IGNsYXNzPSdwcm9ncmVzcy1iYXItYmFyJz50ZXN0aW5nPC9kaXY+XCIrXG4gICAgICAgICAgICAgICAgXCI8L2Rpdj5cIiwgICAgXG5cbiAgICAgIGxpbms6IGZ1bmN0aW9uICgkc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVQcm9ncmVzcygpIHtcbiAgICAgICAgICB2YXIgcHJvZ3Jlc3MgPSAwO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmICgkc2NvcGUubWF4VmFsKSB7XG4gICAgICAgICAgICBwcm9ncmVzcyA9IE1hdGgubWluKCRzY29wZS5jdXJWYWwsICRzY29wZS5tYXhWYWwpIC8gJHNjb3BlLm1heFZhbCAqIGVsZW1lbnQuZmluZCgnLnByb2dyZXNzLWJhcicpLndpZHRoKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGVsZW1lbnQuZmluZCgnLnByb2dyZXNzLWJhci1iYXInKS5jc3MoJ3dpZHRoJywgcHJvZ3Jlc3MpOyAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgJHNjb3BlLiR3YXRjaCgnY3VyVmFsJywgdXBkYXRlUHJvZ3Jlc3MpO1xuICAgICAgICAkc2NvcGUuJHdhdGNoKCdtYXhWYWwnLCB1cGRhdGVQcm9ncmVzcyk7ICAgICAgICBcbiAgICAgIH1cbiAgICB9OyAgXG4gfTtcbi8qIEhvc3RlZEd1ZXN0TGlzdC5kaXJlY3RpdmUuanMgKi9cblxuLyoqXG4qIEBkZXNjIGRpc3BsYXlzIGEgbGlzdCBvZiBhbGwgZ3Vlc3RzIGludml0ZWQgdG8gYW4gZXZlbnQgdGhpcyB1c2VyIGlzIGhvc3RpbmcuXG4qIEBleGFtcGxlIDxob3N0ZWQtZ3Vlc3QtbGlzdD48L2hvc3RlZC1ndWVzdC1saXN0PlxuKi9cblxuYW5ndWxhclxuXHQubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG5cdC5kaXJlY3RpdmUoJ2hvc3RlZEd1ZXN0TGlzdCcsIGhvc3RlZEd1ZXN0TGlzdCk7XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gaG9zdGVkR3Vlc3RMaXN0KCkge1xuICAgIGxpbmtGdW5jLiRpbmplY3QgPSBbXCJzY29wZVwiLCBcImVsXCIsIFwiYXR0clwiLCBcImN0cmxcIl07XG5cdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0cmVzdHJpY3Q6ICdBRUNNJyxcblx0XHR0ZW1wbGF0ZVVybDogJy4uL3ZpZXdzL2RpcmVjdGl2ZXMvaG9zdGVkR3Vlc3RMaXN0LmRpcmVjdGl2ZS5odG0nLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0c2NvcGU6IHtcblx0XHRcdGd1ZXN0TGlzdDogJz0nLFxuXHRcdH0sXG5cdFx0bGluazogbGlua0Z1bmMsXG5cdFx0Y29udHJvbGxlcjogaG9zdGVkR3Vlc3RMaXN0Q29udHJvbGxlcixcblx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHR9XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCwgYXR0ciwgY3RybCkge1xuICAgIH1cblxuICAgIGhvc3RlZEd1ZXN0TGlzdENvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZyddO1xuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIGhvc3RlZEd1ZXN0TGlzdENvbnRyb2xsZXIoJGxvZykge1xuXHQgICAgdmFyIHZtID0gdGhpcztcblxuXHQgICAgLy9sb2NhbCB2YXJpYWJsZXNcblx0ICAgIHZtLmlzQUd1ZXN0TGlzdCA9IGZhbHNlO1xuXG5cdCAgICAvL2xvY2FsIG1ldGhvZHNcblx0ICAgIGZ1bmN0aW9uIHRoZXJlSXNBR3Vlc3RMaXN0KCkge1xuXHQgICAgXHQvL2NoZWNrIGZvciBhIGd1ZXN0TGlzdCBvYmplY3Rcblx0ICAgIFx0aWYoYW5ndWxhci5pc0RlZmluZWQodm0uZ3Vlc3RMaXN0KSkge1xuXHQgICAgXHRcdHZtLmlzQUd1ZXN0TGlzdCA9IHRydWU7XG5cdCAgICBcdFx0cmV0dXJuIHRydWU7XG5cdCAgICBcdH0gZWxzZSB7XG5cdCAgICBcdFx0dm0uaXNBR3Vlc3RMaXN0ID0gZmFsc2U7XG5cdCAgICBcdFx0cmV0dXJuIGZhbHNlO1xuXHQgICAgXHR9XG5cdCAgICB9XG5cblx0ICAgIGZ1bmN0aW9uIGluaXQoKSB7XG5cdCAgICBcdC8vaWYgdGhlcmUgaXNuJ3QgYSBndWVzdCBsaXN0LCBjcmVhdGUgYSB0ZW1wXG5cdFx0XHRpZih0aGVyZUlzQUd1ZXN0TGlzdCgpKSB7XG5cdFx0XHRcdHZtLmd1ZXN0TGlzdCA9IHt9XG5cdFx0XHR9XG5cdCAgICB9XG5cdCAgICAvL3ZtIG1ldGhvZHNcblxuXHRcdC8vYWN0aW9uc1xuXHRcdGluaXQoKTtcblxuXHR9XG5cblx0cmV0dXJuICBkaXJlY3RpdmU7XG5cdFx0XG59O1xuLyogVG9vbEJhci5kaXJlY3RpdmUuanMgKi9cblxuLyoqXG4qIEBkZXNjIHRvb2xiYXIgZGlyZWN0aXZlIHRoYXQgaXMgdXNlZCBvbiB0aGUgbWFpbiBwYWdlIGFjcm9zcyB0aGUgZW50aXJlIGFwcC5cbiogQGV4YW1wbGUgPGRpdiB0b29sLWJhcj48L2Rpdj5cbiovXG5cbmFuZ3VsYXJcblx0Lm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuXHQuZGlyZWN0aXZlKCd0b29sQmFyJywgdG9vbEJhcik7XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gdG9vbEJhcigpIHtcbiAgICBsaW5rRnVuYy4kaW5qZWN0ID0gW1wic2NvcGVcIiwgXCJlbFwiLCBcImF0dHJcIiwgXCJjdHJsXCJdO1xuXHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdHJlc3RyaWN0OiAnQUVDTScsXG5cdFx0dGVtcGxhdGVVcmw6ICcuLi92aWV3cy9kaXJlY3RpdmVzL3Rvb2xCYXIuZGlyZWN0aXZlLmh0bScsXG5cdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRzY29wZToge30sXG5cdFx0bGluazogbGlua0Z1bmMsXG5cdFx0Y29udHJvbGxlcjogVG9vbEJhckNvbnRyb2xsZXIsXG5cdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0fVxuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHtcbiAgICB9XG5cbiAgICBUb29sQmFyQ29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJywgJ2JhY2tlbmRTZXJ2aWNlcyddO1xuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIFRvb2xCYXJDb250cm9sbGVyKCRsb2csIGJhY2tlbmRTZXJ2aWNlcykge1xuXHQgICAgdmFyIHZtID0gdGhpcztcblxuXHQgICAgLy9sb2NhbCBjb250cm9sZXIgdmFyaWFibGVzXG5cdCAgICB2YXIgZmJDb25uZWN0ID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdCAgICAvL2xvY2FsIHZpZXcgdmFyaWFibGVzXG5cdFx0ZmJDb25uZWN0LmNoZWNrTG9naW5TdGF0dXMoKVxuXHRcdC50aGVuKGZ1bmN0aW9uKHN0YXR1cykge1xuXHRcdFx0dm0ubG9nZ2VkSW4gPSBzdGF0dXM7XG5cdFx0fSlcblx0XHQuY2F0Y2goKVxuXG5cdFx0dm0uY2xpY2tlZCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0JGxvZy5pbmZvKCdidXR0b24gY2xpY2tlZCcpO1xuXHRcdH1cblxuXHRcdC8vYWN0aW9uc1xuXHRcdFxuXHR9XG5cblx0cmV0dXJuICBkaXJlY3RpdmU7XG5cdFx0XG59OyIsIi8qIEFkZEFHdWVzdC5kaXJlY3RpdmUuanMgKi9cblxuLyoqXG4qIEBkZXNjIGRpc3BsYXlzIGEgbGlzdCBvZiBhbGwgZ3Vlc3RzIGludml0ZWQgdG8gYW4gZXZlbnQgdGhpcyB1c2VyIGlzIGhvc3RpbmcuXG4qIEBleGFtcGxlIDxhZGQtYS1ndWVzdD48L2FkZC1hLWd1ZXN0PlxuKi9cblxuYW5ndWxhclxuXHQubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG5cdC5kaXJlY3RpdmUoJ2FkZEFHdWVzdCcsIGFkZEFHdWVzdCk7XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gYWRkQUd1ZXN0KCkge1xuXHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdHJlc3RyaWN0OiAnQUVDTScsXG5cdFx0dGVtcGxhdGVVcmw6ICcuLi92aWV3cy9kaXJlY3RpdmVzL2FkZEFHdWVzdC5kaXJlY3RpdmUuaHRtJyxcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdHNjb3BlOiB7XG5cdFx0XHRndWVzdExpc3Q6ICc9Jyxcblx0XHR9LFxuXHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdGNvbnRyb2xsZXI6IGFkZEFHdWVzdENvbnRyb2xsZXIsXG5cdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0fVxuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHtcbiAgICB9XG5cbiAgICBhZGRBR3Vlc3RDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnXTtcbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBhZGRBR3Vlc3RDb250cm9sbGVyKCRsb2cpIHtcblx0ICAgIHZhciB2bSA9IHRoaXM7XG5cblx0ICAgIC8vbG9jYWwgdmFyaWFibGVzXG5cblxuXHQgICAgLy9sb2NhbCBtZXRob2RzXG5cblxuXHQgICAgZnVuY3Rpb24gaW5pdCgpIHtcblx0ICAgIFx0XG5cdCAgICB9XG5cdCAgICAvL3ZtIG1ldGhvZHNcblxuXHRcdC8vYWN0aW9uc1xuXHRcdGluaXQoKTtcblxuXHR9XG5cblx0cmV0dXJuICBkaXJlY3RpdmU7XG5cdFx0XG59OyIsIi8qIEhvc3RlZEV2ZW50c0xpc3QuZGlyZWN0aXZlLmpzICovXG5cbi8qKlxuKiBAZGVzYyBkaXNwbGF5cyBhIGxpc3Qgb2YgYWxsIHRoZSBldmVudHMgdGhlIGN1cnJlbnQgdXNlciBpcyBob3N0aW5nLlxuKiBAZXhhbXBsZSA8aG9zdGVkLWV2ZW50cy1saXN0PjwvaG9zdGVkLWV2ZW50cy1saXN0PlxuKi9cblxuYW5ndWxhclxuXHQubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG5cdC5kaXJlY3RpdmUoJ2hvc3RlZEV2ZW50c0xpc3QnLCBob3N0ZWRFdmVudHNMaXN0KTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBob3N0ZWRFdmVudHNMaXN0KCkge1xuXHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdHJlc3RyaWN0OiAnQUVDTScsXG5cdFx0dGVtcGxhdGVVcmw6ICcuLi92aWV3cy9kaXJlY3RpdmVzL2hvc3RlZEV2ZW50c0xpc3QuZGlyZWN0aXZlLmh0bScsXG5cdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRzY29wZToge1xuXHRcdFx0aG9zdGVkRXZlbnRzOiAnPScsXG5cdFx0XHR1c2VySWQ6ICc9J1xuXHRcdH0sXG5cdFx0bGluazogbGlua0Z1bmMsXG5cdFx0Y29udHJvbGxlcjogaG9zdGVkRXZlbnRzTGlzdENvbnRyb2xsZXIsXG5cdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0fVxuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHtcbiAgICB9XG5cbiAgICBob3N0ZWRFdmVudHNMaXN0Q29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJywgJ3RyYWZmaWNWYWxldCddO1xuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIGhvc3RlZEV2ZW50c0xpc3RDb250cm9sbGVyKCRsb2csIHRyYWZmaWNWYWxldCkge1xuXHQgICAgdmFyIHZtID0gdGhpcztcblxuXHQgICAgLy9sb2NhbCB2YXJpYWJsZXNcblx0ICAgIHZhciBob3N0ZWRFdmVudHNTaGVycGEgPSB0cmFmZmljVmFsZXQ7XG5cblx0ICAgIC8vdmlldyBtb2RlbCB2YXJpYWJsZXNcblx0ICAgIHZtLmd1ZXN0c0FyZUludml0ZWQgPSBmYWxzZTtcblxuXHQgICAgLy9sb2NhbCBtZXRob2RzXG5cdCAgICBmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRcdHJldHVybiBuZXcgRGF0ZShwYXJzZUludCh1bml4VGltZSkpO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBjb3VudEd1ZXN0cyhsaXN0KSB7XG5cdFx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVcblx0XHRcdHZhciBjb3VudGVyID0gMDtcblxuXHRcdFx0Ly9pZiB3ZSdyZSBjb3VudGluZywgdGhlbiB0aGVyZSdzIGEgbGlzdCwgc28gdGhyb3cgdGhlIGZsYWdcblx0XHRcdHZtLmd1ZXN0c0FyZUludml0ZWQgPSB0cnVlO1xuXG5cdFx0XHRPYmplY3Qua2V5c1tsaXN0XS5mb3JFYWNoKGZ1bmN0aW9uKGd1ZXN0KSB7XG5cdFx0XHRcdGNvdW50ZXIrKztcblx0XHRcdH0pXG5cblx0XHRcdHJldHVybiBjb3VudGVyO1xuXHRcdH1cblxuXHRcdC8vdmlldyBtb2RlbCBtZXRob2RzXG5cdFx0dm0uZm9ybWF0RGF0ZSA9IGZ1bmN0aW9uKHVuaXhUaW1lKSB7XG5cdFx0XHQvL3JlZm9ybWF0IHRoZSB0aW1lXG5cdFx0XHQkbG9nLmluZm8oJ2dvdCB0aGlzdCB0aW1lOiAnICsgdW5peFRpbWUpO1xuXHRcdFx0cmV0dXJuIHVuaXhUaW1lVG9EYXRlVGltZSh1bml4VGltZSk7XG5cdFx0fVxuXG5cdFx0dm0uZ3Vlc3RzQXR0ZW5kaW5nID0gZnVuY3Rpb24oZ3Vlc3RMaXN0KSB7XG5cdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChndWVzdExpc3QpKSB7XG5cdFx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGd1ZXN0TGlzdFsnYXR0ZW5kaW5nJ10pKSByZXR1cm4gY291bnRHdWVzdHMoZ3Vlc3RMaXN0WydhdHRlbmRpbmcnXSk7XG5cdFx0XHRcdGVsc2UgcmV0dXJuIDA7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHJldHVybiAwO1xuXHRcdH1cblxuXHRcdHZtLmd1ZXN0c0ludml0ZWQgPSBmdW5jdGlvbihndWVzdExpc3QpIHtcblx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGd1ZXN0TGlzdCkpIHtcblx0XHRcdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdFx0XHR2YXIgZ3Vlc3RDb3VudCA9IHsgYXR0ZW5kaW5nOiAwLCBwZW5kaW5nOiAwLCBkZWNsaW5lZDogMCB9O1xuXG5cdFx0XHRcdC8vbG9jYWwgbWV0aG9kc1xuXHRcdFx0XHRmdW5jdGlvbiB0b3RhbEd1ZXN0Q291bnQoKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGd1ZXN0Q291bnQuYXR0ZW5kaW5nICsgZ3Vlc3RDb3VudC5wZW5kaW5nICsgZ3Vlc3RDb3VudC5kZWNsaW5lZDtcblx0XHRcdFx0fSBcblxuXHRcdFx0XHQvL2NoZWNrIHZhbHVlc1xuXHRcdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChndWVzdExpc3RbJ2F0dGVuZGluZyddKSkgZ3Vlc3RDb3VudC5hdHRlbmRpbmcgPSBjb3VudEd1ZXN0cyhndWVzdExpc3RbJ2F0dGVuZGluZyddKTtcblx0XHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoZ3Vlc3RMaXN0WydwZW5kaW5nJ10pKSBndWVzdENvdW50LnBlbmRpbmcgPSBjb3VudEd1ZXN0cyhndWVzdExpc3RbJ3BlbmRpbmcnXSk7XG5cdFx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGd1ZXN0TGlzdFsnZGVjbGluZWQnXSkpIGd1ZXN0Q291bnQuZGVjbGluZWQgPSBjb3VudEd1ZXN0cyhndWVzdExpc3RbJ2RlY2xpbmVkJ10pO1xuXG5cdFx0XHRcdHJldHVybiB0b3RhbEd1ZXN0Q291bnQoKTtcblx0XHRcdH1cblx0XHRcdGVsc2UgcmV0dXJuIDA7XG5cdFx0fVxuXG5cdFx0dm0ucGVyY2VudGFnZUF0dGVuZGluZyA9IGZ1bmN0aW9uKGd1ZXN0TGlzdCkge1xuXHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoZ3Vlc3RMaXN0KSkge1xuXHRcdFx0XHRyZXR1cm4gKGd1ZXN0c0F0dGVuZGluZyhndWVzdGxpc3QpIC8gZ3Vlc3RzSW52aXRlZChndWVzdExpc3QpKTtcblx0XHRcdH1cblx0XHRcdGVsc2UgcmV0dXJuIDA7XG5cdFx0fVxuXG5cdFx0dm0uZXZlbnRDbGlja2VkID0gZnVuY3Rpb24oZXZlbnRJRCkge1xuXHRcdFx0Ly9yZWRpcmVjdCB0byB0aGUgZXZlbnQgcGFnZVxuXHRcdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyB0bzogL2V2ZW50LycgKyBldmVudElEICsgJy8nICsgdm0uaG9zdGVkRXZlbnRzW2V2ZW50SURdLmhvc3QudWlkICsgJy8nICsgdm0udXNlcklkKTtcblx0XHRcdGhvc3RlZEV2ZW50c1NoZXJwYS5yZWRpcmVjdFRvKCcvZXZlbnQnLCBldmVudElELCB2bS5ob3N0ZWRFdmVudHNbZXZlbnRJRF0uaG9zdC51aWQsIHZtLnVzZXJJZCk7XG5cdFx0fVxuXG5cdFx0Ly9hY3Rpb25zXG5cblx0fVxuXG5cdHJldHVybiAgZGlyZWN0aXZlO1xuXHRcdFxufTsiLCIvKiBIb3N0ZWRFdmVudHNQcm9ncmVzc0Jhci5kaXJlY3RpdmUuanMgKi9cblxuLyoqXG4qIEBkZXNjIGRpc3BsYXlzIGEgdXNlcnMgcHJvZ3Jlc3MgdGhyb3VnaCB0aGUgZXZlbnRzIHBhZ2UuXG4qIEBleGFtcGxlIDxob3N0ZWQtZXZlbnRzLXByb2dyZXNzLWJhcj48L2hvc3RlZC1ldmVudHMtcHJvZ3Jlc3MtYmFyPlxuKi9cblxuYW5ndWxhclxuXHQubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG5cdC5kaXJlY3RpdmUoJ3Byb2dyZXNzQmFyJywgcHJvZ3Jlc3NCYXIpO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHByb2dyZXNzQmFyKCkge1xucmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICBzY29wZToge1xuICAgICAgICBjdXJWYWw6ICdAJyxcbiAgICAgICAgbWF4VmFsOiAnQCdcbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZTogXCI8ZGl2IGNsYXNzPSdwcm9ncmVzcy1iYXInPlwiK1xuICAgICAgICAgICAgICAgICAgXCI8ZGl2IGNsYXNzPSdwcm9ncmVzcy1iYXItYmFyJz50ZXN0aW5nPC9kaXY+XCIrXG4gICAgICAgICAgICAgICAgXCI8L2Rpdj5cIiwgICAgXG5cbiAgICAgIGxpbms6IGZ1bmN0aW9uICgkc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVQcm9ncmVzcygpIHtcbiAgICAgICAgICB2YXIgcHJvZ3Jlc3MgPSAwO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmICgkc2NvcGUubWF4VmFsKSB7XG4gICAgICAgICAgICBwcm9ncmVzcyA9IE1hdGgubWluKCRzY29wZS5jdXJWYWwsICRzY29wZS5tYXhWYWwpIC8gJHNjb3BlLm1heFZhbCAqIGVsZW1lbnQuZmluZCgnLnByb2dyZXNzLWJhcicpLndpZHRoKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGVsZW1lbnQuZmluZCgnLnByb2dyZXNzLWJhci1iYXInKS5jc3MoJ3dpZHRoJywgcHJvZ3Jlc3MpOyAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgJHNjb3BlLiR3YXRjaCgnY3VyVmFsJywgdXBkYXRlUHJvZ3Jlc3MpO1xuICAgICAgICAkc2NvcGUuJHdhdGNoKCdtYXhWYWwnLCB1cGRhdGVQcm9ncmVzcyk7ICAgICAgICBcbiAgICAgIH1cbiAgICB9OyAgXG4gfTsiLCIvKiBIb3N0ZWRHdWVzdExpc3QuZGlyZWN0aXZlLmpzICovXG5cbi8qKlxuKiBAZGVzYyBkaXNwbGF5cyBhIGxpc3Qgb2YgYWxsIGd1ZXN0cyBpbnZpdGVkIHRvIGFuIGV2ZW50IHRoaXMgdXNlciBpcyBob3N0aW5nLlxuKiBAZXhhbXBsZSA8aG9zdGVkLWd1ZXN0LWxpc3Q+PC9ob3N0ZWQtZ3Vlc3QtbGlzdD5cbiovXG5cbmFuZ3VsYXJcblx0Lm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuXHQuZGlyZWN0aXZlKCdob3N0ZWRHdWVzdExpc3QnLCBob3N0ZWRHdWVzdExpc3QpO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGhvc3RlZEd1ZXN0TGlzdCgpIHtcblx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRyZXN0cmljdDogJ0FFQ00nLFxuXHRcdHRlbXBsYXRlVXJsOiAnLi4vdmlld3MvZGlyZWN0aXZlcy9ob3N0ZWRHdWVzdExpc3QuZGlyZWN0aXZlLmh0bScsXG5cdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRzY29wZToge1xuXHRcdFx0Z3Vlc3RMaXN0OiAnPScsXG5cdFx0fSxcblx0XHRsaW5rOiBsaW5rRnVuYyxcblx0XHRjb250cm9sbGVyOiBob3N0ZWRHdWVzdExpc3RDb250cm9sbGVyLFxuXHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdH1cblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7XG4gICAgfVxuXG4gICAgaG9zdGVkR3Vlc3RMaXN0Q29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJ107XG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gaG9zdGVkR3Vlc3RMaXN0Q29udHJvbGxlcigkbG9nKSB7XG5cdCAgICB2YXIgdm0gPSB0aGlzO1xuXG5cdCAgICAvL2xvY2FsIHZhcmlhYmxlc1xuXHQgICAgdm0uaXNBR3Vlc3RMaXN0ID0gZmFsc2U7XG5cblx0ICAgIC8vbG9jYWwgbWV0aG9kc1xuXHQgICAgZnVuY3Rpb24gdGhlcmVJc0FHdWVzdExpc3QoKSB7XG5cdCAgICBcdC8vY2hlY2sgZm9yIGEgZ3Vlc3RMaXN0IG9iamVjdFxuXHQgICAgXHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2bS5ndWVzdExpc3QpKSB7XG5cdCAgICBcdFx0dm0uaXNBR3Vlc3RMaXN0ID0gdHJ1ZTtcblx0ICAgIFx0XHRyZXR1cm4gdHJ1ZTtcblx0ICAgIFx0fSBlbHNlIHtcblx0ICAgIFx0XHR2bS5pc0FHdWVzdExpc3QgPSBmYWxzZTtcblx0ICAgIFx0XHRyZXR1cm4gZmFsc2U7XG5cdCAgICBcdH1cblx0ICAgIH1cblxuXHQgICAgZnVuY3Rpb24gaW5pdCgpIHtcblx0ICAgIFx0Ly9pZiB0aGVyZSBpc24ndCBhIGd1ZXN0IGxpc3QsIGNyZWF0ZSBhIHRlbXBcblx0XHRcdGlmKHRoZXJlSXNBR3Vlc3RMaXN0KCkpIHtcblx0XHRcdFx0dm0uZ3Vlc3RMaXN0ID0ge31cblx0XHRcdH1cblx0ICAgIH1cblx0ICAgIC8vdm0gbWV0aG9kc1xuXG5cdFx0Ly9hY3Rpb25zXG5cdFx0aW5pdCgpO1xuXG5cdH1cblxuXHRyZXR1cm4gIGRpcmVjdGl2ZTtcblx0XHRcbn07IiwiLyogVG9vbEJhci5kaXJlY3RpdmUuanMgKi9cblxuLyoqXG4qIEBkZXNjIHRvb2xiYXIgZGlyZWN0aXZlIHRoYXQgaXMgdXNlZCBvbiB0aGUgbWFpbiBwYWdlIGFjcm9zcyB0aGUgZW50aXJlIGFwcC5cbiogQGV4YW1wbGUgPGRpdiB0b29sLWJhcj48L2Rpdj5cbiovXG5cbmFuZ3VsYXJcblx0Lm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuXHQuZGlyZWN0aXZlKCd0b29sQmFyJywgdG9vbEJhcik7XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gdG9vbEJhcigpIHtcblx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRyZXN0cmljdDogJ0FFQ00nLFxuXHRcdHRlbXBsYXRlVXJsOiAnLi4vdmlld3MvZGlyZWN0aXZlcy90b29sQmFyLmRpcmVjdGl2ZS5odG0nLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0c2NvcGU6IHt9LFxuXHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdGNvbnRyb2xsZXI6IFRvb2xCYXJDb250cm9sbGVyLFxuXHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdH1cblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7XG4gICAgfVxuXG4gICAgVG9vbEJhckNvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICdiYWNrZW5kU2VydmljZXMnXTtcbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBUb29sQmFyQ29udHJvbGxlcigkbG9nLCBiYWNrZW5kU2VydmljZXMpIHtcblx0ICAgIHZhciB2bSA9IHRoaXM7XG5cblx0ICAgIC8vbG9jYWwgY29udHJvbGVyIHZhcmlhYmxlc1xuXHQgICAgdmFyIGZiQ29ubmVjdCA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHQgICAgLy9sb2NhbCB2aWV3IHZhcmlhYmxlc1xuXHRcdGZiQ29ubmVjdC5jaGVja0xvZ2luU3RhdHVzKClcblx0XHQudGhlbihmdW5jdGlvbihzdGF0dXMpIHtcblx0XHRcdHZtLmxvZ2dlZEluID0gc3RhdHVzO1xuXHRcdH0pXG5cdFx0LmNhdGNoKClcblxuXHRcdHZtLmNsaWNrZWQgPSBmdW5jdGlvbigpIHtcblx0XHRcdCRsb2cuaW5mbygnYnV0dG9uIGNsaWNrZWQnKTtcblx0XHR9XG5cblx0XHQvL2FjdGlvbnNcblx0XHRcblx0fVxuXG5cdHJldHVybiAgZGlyZWN0aXZlO1xuXHRcdFxufTsiLCJhbmd1bGFyXG5cdC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJywgW1xuXHRcdCduZ1JvdXRlJyxcblx0XHQnbmdUb3VjaCcsXG5cdFx0J2ZpcmViYXNlJ1xuXHRdKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
