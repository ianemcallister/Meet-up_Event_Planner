function AnEventController(e,t){function n(){f.tempDateTime={start:"",end:""},f.newGuest={name:"",email:{address:"",valid:!1,style:{color:""}}},f.showIfHost=!1,f.hideIfAttending=!0,f.manageSections={1:{active:!0,complete:!1,style:{color:"black","background-color":"yellow"}},2:{active:!1,complete:!1,style:{color:"white","background-color":"gray"}},3:{active:!1,complete:!1,style:{color:"white","background-color":"gray"}}},u(),d(),f.showIfHost||v()}function s(e){return btoa(e)}function o(e){return atob(e)}function r(e){return Date.parse(e)}function a(){f.newGuest={name:"",email:{address:"",valid:!1,style:{color:""}}}}function l(n){e.info("adding them to the registered users list "+n),ref.child("Users").child(n).child("events").child("pending").child(t.uid).child(t.eventId).set({id:t.eventId,eventTimes:{start:f.event.eventTimes.start,end:f.event.eventTimes.end},name:f.event.name,host:t.uid},function(t){t&&e.info("there was an error"+t)}),ref.child("Users").child(n).child("events").child("pending").once("value",function(t){var i=t.val();e.info(t.val()),i.updated?(e.info("deleting updated"),ref.child("Users").child(n).child("events").child("pending").child("updated").remove(function(t){t&&e.info("Deleting failed: "+t.code)})):e.info("nothing to do")},function(t){t&&e.info("The read failed: "+t.code)})}function c(n){e.info("adding them to the UNREGISTERED users list "+n),ref.child("UnregisteredUsers").child(n).child("pending").child(t.uid).child(t.eventId).set({id:t.eventId,host:t.uid,eventTimes:{start:f.event.eventTimes.start,end:f.event.eventTimes.end},name:f.event.name},function(t){t&&e.info("there was an error"+t)})}function u(){var n=ref.getAuth();n.uid==t.hostId?(e.info("is the host"),f.showIfHost=!0):(e.info("not the host"),f.showIfHost=!1)}function d(){f.showIfHost||(e.info("check guest attendance"),userEvents.child("guestList").on("value",function(e){var n=e.val();f.hideIfAttending=!n[t.uid].attending}))}function v(){f.manageSections[1].active=!0,f.manageSections[2].active=!0,f.manageSections[3].active=!0}var f=this;f.tempTime={start:"",end:""},f.userIsHost=!1,f.setTempTime=function(e){"start"==e&&(f.tempDateTime.start=new Date),"end"==e&&(f.tempDateTime.end=new Date)},f.unixTimeToDateTime=function(e){return new Date(parseInt(e))},f.dateTimeToUnixTime=function(e){return Date.parse(e)},f.submit=function(){e.info("submitting the form now!")},f.backToUserEvents=function(){$location.path("/userEvents/"+t.uid+"/"+t.token)},f.eventRedirect=function(n,i){var s=n+"/"+t.uid+"/"+t.token;e.info("redirecting to: "+s),$location.path(s)},f.changeSection=function(t){for(e.info("are we here"),i=1;i<=3;i++)i==t?(f.manageSections[i].active=!0,f.manageSections[i].style["background-color"]="yellow",f.manageSections[i].style.color="black"):(f.manageSections[i].active=!1,f.manageSections[i].style["background-color"]="gray",f.manageSections[i].style.color="white")},f.saveEventTime=function(e,t){f.event.eventTimes||(f.event.eventTimes={start:"",end:""},f.event.eventTimes.start=f.dateTimeToUnixTime(f.tempDateTime.start),f.event.eventTimes.end=f.dateTimeToUnixTime(f.tempDateTime.end)),f.tempDateTime.end<f.tempDateTime.start&&"start"==t&&(f.tempDateTime.end=f.tempDateTime.start),"start"==t&&(f.event.eventTimes.start=f.dateTimeToUnixTime(e)),"end"==t&&(f.event.eventTimes.end=f.dateTimeToUnixTime(e))},f.guestsAreInvited=function(){return!!f.event.guestList},f.validateGuestEmail=function(){if(f.newGuest.email.address){var e=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","");e.test(f.newGuest.email.address)?(f.newGuest.email.valid=!0,f.newGuest.email.style={color:"green"}):(f.newGuest.email.valid=!1,f.newGuest.email.style={color:""})}},f.isSectionComplete=function(){for(i=0;i<8;i++)e.info(f.requiredInputs[i])},f.saveAndAdvance=function(){f.event.$save().then(function(){e.info("event saved")})["catch"](function(t){e.info("error! "+t)}),f.isSectionComplete(),1==f.manageSections[1].complete&&1==f.manageSections[2].complete&&1==f.manageSections[3].complete?f.eventRedirect("/userEvents",t.uid):f.manageSections[1].active?f.changeSection(2):f.manageSections[2].active?f.changeSection(3):f.manageSections[3].active&&f.changeSection(1)},f.addGuestToHostsList=function(){var n=s(f.newGuest.email.address);if(f.newGuest.name&&f.newGuest.email.valid){if(f.event.guestList)for(var i=0;f.event.guestList[i];){if(f.event.guestList[i].email==o(n))return e.info("This guest is already on the list"),void a();i++}else f.event.guestList={};if(registeredUsers[n]){if(registeredUsers[n]==t.uid)return e.info("tried to register the host"),void a();l(registeredUsers[n]),f.event.guestList[registeredUsers[n]]={attending:!1,status:"pending",name:f.newGuest.name,email:f.newGuest.email.address}}else c(n),f.event.guestList[n]={attending:!1,status:"pending",name:f.newGuest.name,email:f.newGuest.email.address};f.saveEvent(),a()}else e.info("you didn't enter a name and or email")},f.guestWillAttend=function(n){var i=ref.child("Users").child(t.uid).child("events"),s=0,o=!1;if(f.event.guestList[t.uid].attending=n,f.event.guestList[t.uid].status="attending",i.child("pending").on("value",function(o){var r=o.val();e.info(r),e.info(r[t.hostId]),e.info(r[t.hostId][t.eventId]);var a=r[t.hostId][t.eventId];e.info(a);for(invitation in r)s++;e.info("total attending: "+s),n&&i.child("attending").child(t.hostId).child(t.eventId).set(a,function(t){t&&e.info(t)})}),i.child("attending").on("value",function(t){var n=t.val();e.info("this is the attending list"),e.info(n),n.updated&&(o=!0)},function(t){t&&e.info(t)}),2>s){var a=new Date;i.child("pending").update({updated:r(a)},function(t){t&&e.info(t)})}i.child("pending").child(t.hostId).remove(),o&&e.info("removing the updated placeholder"),f.event.$save()},f.updateUpdatedParam=function(){var n=ref.child("Users").child(t.uid).child("events");e.info("updating the param"),n.child("attending").on("value",function(t){e.info(t.val())}),n.child("attending").child("updated").remove()},f.addInvitationToAttending=function(n){var i=ref.child("Users").child(t.uid).child("events"),s=0;i.child("pending").on("value",function(o){var r=o.val(),a=r[t.hostId][t.eventId];e.info(r),e.info(r[t.hostId]),e.info(r[t.hostId][t.eventId]);for(invitation in r)s++;e.info("total pending invitations: "+s),e.info(n),n&&i.child("attending").child(t.hostId).child(t.eventId).set(a,function(t){t&&e.info(t)})})},n()}function GuestEventController(e){e.info("into the GuestEventController")}function HostEventController(e,t,n,i,s,o,r){function a(e){return new Date(parseInt(e))}function l(e){return Date.parse(e)}function c(e,t){return(l(t)-l(e))/6e4}function u(e){"open"==e?(h.actionBtn.btn["class"]["btn-success"]=!0,h.actionBtn.btn["class"]["btn-warning"]=!1,h.actionBtn.btn.message="Save Event"):"close"==e&&(h.actionBtn.btn["class"]["btn-success"]=!1,h.actionBtn.btn["class"]["btn-warning"]=!0,h.actionBtn.btn.message="Add Info")}function d(e){w+=e,h.progressBar.complete=w,h.progressBar.style.width=w+"%",h.progressBar.message=w+"%",w>99&&u("open"),99>w&&u("close")}function v(){var e=new Date;e.setHours(e.getHours()+Math.round(e.getMinutes()/60)),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),h.tempTime.start=e,h.tempTime.end=e,h.tempTime.duration=c(h.tempTime.start,h.tempTime.end)}function f(){angular.isDefined(h.tempEvent.eventTimes.start)&&(h.tempTime.start=a(h.tempEvent.eventTimes.start),h.tempTime.end=a(h.tempEvent.eventTimes.end))}function m(){Object.keys(h.tempEvent).forEach(function(e){t.info(h.tempEvent[e])})}function g(){if(b.thereIsAnActiveEvent()){var e=b.getActiveEvent();h.progressBar=e.progressBar,w=e.percentComplete,h.tempEvent=e.event,h.requiredFieldComplete=e.requiredFields}else b.loadAnEventProgressively(n.uid,n.eventId).then(function(e){h.tempEvent=e,f()})["catch"](function(e){t("the error is: "+e)});h.activeSection=parseInt(n.section),v(),m()}var h=this,p=o,b=s,E=r,w=0;h.activeSection=1,h.tempTime={start:"",end:"",duration:""},h.progressBar={complete:h.percentComplete,style:{width:h.percentComplete+"%"},message:h.percentComplete+"%"},h.actionBtn={div:{"class":{"col-xs-6":!0,"col-sm-6":!0}},btn:{"class":{btn:!0,"btn-success":!1,"btn-warning":!0,"pull-right":!0},message:"Add Info"}},h.tempEvent={},h.requiredFieldComplete=E.generateEventRequirnments(),h.formatDuration=function(){h.tempTime.duration=c(h.tempTime.start,h.tempTime.end);var e=Math.floor(h.tempTime.duration/60),t=h.tempTime.duration%60,n=Math.round(t/15)/4;return e+n+" h"},h.validateTime=function(e){h.tempTime.duration>24&&h.settingTempStart();var t={eventStart:h.tempTime.start,eventEnd:h.tempTime.end};angular.isDefined(t[e])&&""!=t[e]&&h.tempTime.duration>0?(0==h.requiredFieldComplete[e].completed&&d(10),h.tempEvent.eventTimes.start=l(h.tempTime.start),h.tempEvent.eventTimes.end=l(h.tempTime.end),h.requiredFieldComplete[e].completed=!0,h.requiredFieldComplete[e].row["class"]["has-success"]=!0,h.requiredFieldComplete[e].row["class"]["has-feedback"]=!0,h.requiredFieldComplete[e].row["class"]["has-error"]=!1):(1==h.requiredFieldComplete[e].completed&&d(-10),h.requiredFieldComplete[e].completed=!1,h.requiredFieldComplete[e].row["class"]["has-success"]=!1,h.requiredFieldComplete[e].row["class"]["has-feedback"]=!1,h.requiredFieldComplete[e].row["class"]["has-error"]=!0)},h.settingTempStart=function(){(l(h.tempTime.end)<=l(h.tempTime.start)||l(h.tempTime.end)-l(h.tempTime.start)>864e5)&&(oldStart=l(h.tempTime.start),oldEnd=l(h.tempTime.end),newEnd=oldStart+36e5,h.tempTime.end=a(newEnd))},h.settingTempEnd=function(){h.tempTime.start>h.tempTime.end&&(h.tempTime.start=h.tempTime.end),h.validateTime("eventEnd"),h.tempTime.duration=c(h.tempTime.start,h.tempTime.end)},h.backToUserEvents=function(){w>99&&(b.saveNewHostingEvent("hosting",h.tempEvent),b.setRemoteEventsFromLocal("hosting",h.tempEvent).then(function(e){t.info(e)})["catch"](function(e){t.info(e)})),p.redirectTo("/userEvents",n.uid)},h.sectionBack=function(){var e={event:h.tempEvent,progressBar:h.progressBar,percentComplete:w,requiredFields:h.requiredFieldComplete};t.info(e),b.setActiveEvent(e),targetSection=h.activeSection-1,p.redirectTo("/event/host",n.eventId,n.uid,targetSection)},h.sectionForward=function(){var e={event:h.tempEvent,progressBar:h.progressBar,percentComplete:w,requiredFields:h.requiredFieldComplete};t.info(e),b.setActiveEvent(e),targetSection=h.activeSection+1,p.redirectTo("/event/host",n.eventId,n.uid,targetSection)},h.verifyRequired=function(e,t){angular.isDefined(t)&&""!=t?(0==h.requiredFieldComplete[e].completed&&d(10),h.requiredFieldComplete[e].completed=!0,h.requiredFieldComplete[e].row["class"]["has-success"]=!0,h.requiredFieldComplete[e].row["class"]["has-feedback"]=!0,h.requiredFieldComplete[e].row["class"]["has-error"]=!1):(1==h.requiredFieldComplete[e].completed&&d(-10),h.requiredFieldComplete[e].completed=!1,h.requiredFieldComplete[e].row["class"]["has-success"]=!1,h.requiredFieldComplete[e].row["class"]["has-feedback"]=!1,h.requiredFieldComplete[e].row["class"]["has-error"]=!0)},h.saveEventToDB=function(){t.info(h.tempEvent),w>99&&(b.saveNewHostingEvent("hosting",h.tempEvent),b.setRemoteEventsFromLocal(n.uid,h.tempEvent).then(function(e){t.info(e),b.cleanDBEventsCategory("hosting").then(function(e){t.info(e)})["catch"](function(e){t.info(e)})})["catch"](function(e){t.info(e)}),p.redirectTo("/userEvents",n.uid))},e.$watch("vm.tempEvent.guestList",function(e,t){angular.isObject(h.tempEvent.guestList)&&d(10)}),angular.element(i).ready(function(){1==parseInt(n.section),2==parseInt(n.section),3==parseInt(n.section)}),g()}function LandingPageController(e){var t=this,n=e;t.createAnAccount=function(){n.redirectTo("/signup")},t.loginUser=function(){n.redirectTo("/login")}}function MainController(e,t,n,i){function s(){angular.element(n);n.css("hight",i.outerHeight)}var o=this,r="https://meetupplanner.firebaseio.com/",a=new Firebase(r);o.logout=function(){alert("logging you out!"),a.unauth(),t.path("/")},angular.element(n).ready(function(){s()})}function NewUserSignUpController(e,t,n,i,s,o){var r=this,a=n;r.name=a.generateTestableObject("name"),r.email=a.generateTestableObject("email"),r.pass=a.generateTestableObject("pass"),r.createNewUser=function(){var e=s;if(r.name.passesAllReqs&&r.email.passesAllReqs&&r.pass.passesAllReqs){var n=i,a=o;n.createNewUser(r.email.value,r.pass.value).then(function(i){a.setPrimariesLocally(r.email.value,r.name.value,i.uid),n.addNewUserToDatabase(i.uid,r.name.value,r.email.value).then(function(s){t.info(s),n.addNewUserToRegUsersList(i.uid,r.email.value).then(function(n){e.redirectTo("/userInformation",i.uid),t.info(n)})["catch"](function(e){t.info(e)})})["catch"](function(e){t.info(e)})})["catch"](function(e){t.info(e)})}}}function RegUserLoginController(e,t,n,i,s){function o(){angular.isDefined(r.inputs.email)&&""!==r.inputs.email&&angular.isDefined(r.inputs.password)&&""!==r.inputs.password?(r.inputs.requiredFieldsDefined=!0,r.unclockUserLoginBtn["class"]["btn-success"]=!0,r.unclockUserLoginBtn["class"]["btn-warning"]=!1,r.unclockUserLoginBtn.message="Login",r.unclockUserLoginBtn.usable=!0):(r.inputs.requiredFieldsDefined=!1,r.unclockUserLoginBtn["class"]["btn-success"]=!1,r.unclockUserLoginBtn["class"]["btn-warning"]=!0,r.unclockUserLoginBtn.message="Need Email & Pass",r.unclockUserLoginBtn.usable=!1)}var r=this;r.inputs={email:"",password:"",requiredFieldsDefined:!1},r.errors={message:"",passesAllTests:!0},r.unclockUserLoginBtn={usable:!1,"class":{btn:!0,"btn-warning":!0,"btn-success":!1,"col-xs-12":!0,"col-sm-12":!0},message:"Need Email & Pass"},r.update=function(){r.inputs.email=t.find("#userEmail")[0].value,r.inputs.password=t.find("#userPassword")[0].value,o()},r.loginRegisteredUser=function(){var t=i,o=n,a=s;o.LoginRegisteredUser(r.inputs.email,r.inputs.password).then(function(e){r.errors.passesAllTests=!0,a.setPrimariesLocally(r.inputs.email,r.inputs.name,e.uid)}).then(function(){e.info("uid is "+a.getUIDLocally()),o.getUserBio(a.getUIDLocally()).then(function(t){a.updateBioLocally(t),o.getUserEvents(a.getUIDLocally()).then(function(e){a.updateAllUserEventsLocally(e)})["catch"](function(t){e.info(t)})})["catch"](function(t){e.info(t)}),t.redirectTo("/userInformation",a.getUIDLocally())})["catch"](function(e){r.errors.message=e,r.errors.passesAllTests=!1})},r.clicked=function(){var e=n;e.logUserOut()}}function topMenuController(e,t,n,i,s){function o(e){e?(t.info("User "+e.uid+" is logged in with "+e.provider),a.loggedIn=!0):(t.info("User is logged out"),a.loggedIn=!1)}function r(e,i){var s=e+"/"+i.uid+"/"+i.token;t.info("redirecting to: "+s),n.path(s)}var a=this,l="https://meetupplanner.firebaseio.com/",c=new Firebase(l);a.loggedIn=!1,"addEventListener"in i&&i.addEventListener("DOMContentLoaded",function(){t.info("adding FastClick"),FastClick.attach(i.body)},!1),angular.element(s).bind("resize",function(){a.onResizeFunction(),e.$apply()}),angular.element(i).ready(function(){s.outerWidth<600&&(a.onResizeFunction(),e.$apply())}),a.logout=function(){t.info("logging out!"),a.loggedIn=!1,c.unauth(),r("/",{uid:"",token:""})},a.navBarLoginRegisteredUser=function(){t.info("launching login");var n=new Firebase(l);n.authWithPassword({email:a.navbarUserEmail,password:a.navbarUserPass},function(n,i){n?t.info("Error Logging In: "+n):(t.info("Logged In successfully: "+i.uid),t.info(i),r("/userInformation",i),e.$apply(),angular.element(".navbar-toggle").click())})},a.onResizeFunction=function(){var e=angular.element(".navbarInputs");e.css("width",s.outerWidth-26+"px")},c.onAuth(o)}function UserEventsController(e,t,n,i){function s(e){return Date.parse(e)}function o(){var e=0;for(event in c.events.hosting)e++;return e}function r(){var e=new Date,t=10*s(e)+o();return t}function a(){Object.keys(c.events).forEach(function(e){Object.keys(c.events[e]).forEach(function(t){var n=0;angular.isObject(c.events[e][t])&&n++,n>0?c.sectionAvailable[e]=!0:c.sectionAvailable[e]=!1})})}function l(){u.setUIDLocally(t.uid),u.loadBio(t.uid).then(function(e){c.userBio=e})["catch"](),c.events=u.getAllUserEventsLocally(),e.info(c.events),u.getRemoteEventsForLocal().then(function(t){e.info(t),c.events=u.getAllUserEventsLocally(),delete c.events.pending.updated,delete c.events.pending[void 0];var n=0;Object.keys(c.events.hosting).forEach(function(e){n++}),n>1&&(delete c.events.hosting.updated,delete c.events.hosting[void 0])}).then(function(){a()})}var c=this,u=n;c.showDecline=!1,c.userBio={},c.events={},c.sectionAvailable={pending:!1,attending:!1,hosting:!1,completed:!1},c.errors={},c.createNewEvent=function(){var e=r(),t=i;u.createNewEvent(e),t.redirectTo("/event",e,u.getUIDLocally(),u.getUIDLocally())},l()}function UserInformationController(e,t,n,i,s){function o(e){return new Date(parseInt(e))}function r(e){return Date.parse(e)}function a(){var e=new Date;e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),c.tempBirthday=e}function l(){a(),u.loadBio(n.uid).then(function(e){c.user=e,angular.isDefined(e.dob)&&""!==e.dob&&(c.tempBirthday=o(e.dob))})}var c=this,u=i;c.user={},c.tempBirthday,c.view={dataToSave:!1,isData:!1,btnMssg:"Move On...",proceedBtn:"btn btn-primary"},c.checkValues=function(){c.view.isData=!0,!angular.isUndefined(c.user.company)&&""!==c.user.company||!angular.isUndefined(c.user.title)&&""!==c.user.title||!angular.isUndefined(c.user.dob)&&""!==c.user.dob?(c.view.dataToSave=!0,c.view.proceedBtn="btn btn-success",c.view.btnMssg="Save & Continue"):(c.view.dataToSave=!1,c.view.proceedBtn="btn btn-primary",c.view.btnMssg="Move On...")},c.updateDOB=function(){c.user.dob=r(c.tempBirthday),c.checkValues()},c.saveAndMoveOn=function(){var t=s,i=u.getUIDLocally();0!==c.tempBirthday&&c.updateDOB(),(""==i||angular.isUndefined(i))&&u.setUIDLocally(n.uid),c.view.isData&&(e.info("saving the new data"),u.updateBioLocally(c.user)),t.redirectTo("/userEvents",c.user.uid)},l()}function authService(e,t){function n(){var e=t;e.checkLoginStatus().then(function(e){return e})["catch"](function(e){return e})}var i={isLoggedIn:n};return i}function backendServices(e,t,n){function i(e){return btoa(e)}function s(e){return atob(e)}function o(e){return new Date(parseInt(e))}function r(e){return Date.parse(e)}function a(e,n){var i=new Firebase(I);return t(function(t,s){i.createUser({email:e,password:n},function(e,n){e?s("Error creating user: "+e):t(n)})})}function l(e,n,i){var s=new Firebase(I),o=s.child("Users").child(e),a=new Date;return t(function(t,s){o.set({bio:{uid:e,name:n,email:i},events:{pending:{updated:r(a)},hosting:{updated:r(a)},attending:{updated:r(a)},completed:{updated:r(a)}}},function(e){e?s("Data could not be saved: "+e):t("Data saved successfully.")})})}function c(e,n){var s=new Firebase(I),o=i(n),r=s.child("Uids").child(o);return t(function(t,n){r.set(e,function(e){e?n("Data could not be saved. "+e):t("uid created sucessfully.")})})}function u(e,n){var i=new Firebase(I);return t(function(t,s){i.authWithPassword({email:e,password:n},function(e,n){e?s("Error Logging In: "+e):t(n)})})}function d(){var e=new Firebase(I);return t(function(t,n){e.onAuth(function(e){t(e?!0:!1)})})}function v(){var t=new Firebase(I);e.info("logging user out"),t.unauth()}function f(e){var n=new Firebase(I),i=e.uid,s=n.child("Users").child(i);return t(function(t,n){s.update(e,function(e){e?n("There was a problem updating that record: "+e):t("all user data uploaded successfully")})})}function m(e){var n=new Firebase(I),i=e.uid.toString(),s=n.child("Users").child(i).child("bio");return t(function(t,n){s.update(e,function(e){e?n("There was a problem updating that record: "+e):t("all user bio data uploaded successfully")})})}function g(){}function h(e){var n=new Firebase(I),i=n.child("Users").child(e).child("bio");return t(function(e,t){i.once("value",function(t){e(t.val())},function(e){e&&t(e)})})}function p(e,n){var i=new Firebase(I),s=n.id,o=i.child("Users").child(e).child("events").child("hosting").child(s);return t(function(e,t){o.set(n,function(n){n?t("There was an error: "+n):e("New event saved to DB successfully")})})}function b(e,n,i,s){var o=new Firebase(I),r=o.child("Users").child(s).child("events").child("hosting").child(i).child("guestList").child(n);return t(function(t,n){r.set({rsvpd:!1,status:"pending",name:e},function(e){e?n("There was an error: "+e):t("New event saved to DB successfully")})})}function E(e){var n=new Firebase(I),i=n.child("Users").child(e).child("events");return t(function(e,t){i.orderByKey().once("value",function(t){var n=t.val(),i={hosting:n.hosting,attending:n.attending,pending:n.pending,completed:n.completed};e(i)},function(e){e&&t(e)})})}function w(e,n){var i=new Firebase(I),s=i.child("Users").child(e).child("events").child("hosting").child(n);return t(function(e,t){s.once("value",function(t){var n=t.val();e(n)},function(e){e&&t(e)})})}function U(e){var n=new Firebase(I),i=n.child("Uids");return t(function(t,n){i.once("value",function(i){var s=i.val();Object.keys(s).forEach(function(i){i==e?t(s[i]):n("No user by that email")})})})}function T(e,n){var i=new Firebase(I),s=i.child("Users").child(e).child("events").child("hosting").child(n).child("guestList");return t(function(e,t){s.once("value",function(t){var n=t.val();e(n)},function(e){e&&t("There was an error getting the guest list: "+e)})})}function y(e,t,n){}function L(e,n){var i=new Firebase(I),s=i.child("Users").child(n).child("events").child(e).child("updated");return t(function(e,t){s.set(null,function(n){n?t("There was an error deleting update field: "+n):e("Deleted update successfully")})})}function A(e,n){var i=new Firebase(I),s=i.child("Users").child(e).child("events").child("hosting").child(n);return t(function(e,t){var n=function(n){n?t("Synchronization failed"):e("Synchronization succeeded")};s.remove(n)})}function D(e,n){var i=new Firebase(I),s=i.child("Users").child(n).child("events").child(e);return t(function(e,t){s.once("value",function(n){var i=n.val();angular.isDefined(i.updated)?e(!0):t(!1)},function(e){e&&t(e)})})}var I="https://meetupplanner.firebaseio.com/",C={utf8_to_b64:i,b64_to_utf8:s,unixTimeToDateTime:o,dateTimeToUnixTime:r,LoginRegisteredUser:u,checkLoginStatus:d,logUserOut:v,downloadUserData:g,getUserBio:h,getUserEvents:E,getAHostedEvent:w,getAnInvitedEvent:y,findGuestUID:U,getGuestListForEvent:T,createNewUser:a,addNewUserToDatabase:l,addNewUserToRegUsersList:c,uploadUserData:f,uploadUserBio:m,createHostedEvent:p,addGuestToHostGuestListonDB:b,deleteUpdateField:L,removeIncompleteEvent:A,thereWasAnUpdateField:D};return C}function trafficValet(e,t){function n(e,n,i,s){angular.isDefined(n)?(e=e+"/"+n,angular.isDefined(i)&&(e=e+"/"+i,angular.isDefined(s)&&(e=e+"/"+s,t.path(e)),t.path(e)),t.path(e)):t.path(e)}function i(e,n,i,s){if(angular.isUndefined(s)&&(s=1),n===i){var o="/event/host/"+e+"/"+i+"/"+s;t.path(o)}else{var o="/event/guest/"+e+"/"+i+"/"+n;t.path(o)}}var s={redirectTo:n,eventRoute:i};return s}function userData(e,t,n){function i(e){return btoa(e)}function s(e){return Date.parse(e)}function o(){return""!==ee.bio.uid&&""!==ee.bio.name&&""!==ee.bio.email}function r(e,t){return!!angular.isDefined(ee.events[e][t])}function a(e,t){return angular.isDefined(ee.bio.email)&&""!=ee.bio.email?e==ee.bio.email:ee.events.hosting[t].host.email==e}function l(t,n){return angular.isDefined(ee.events.hosting[n].guestList)?(refEmail=i(t),void Object.keys(ee.events.hosting[n].guestList).forEach(function(t){return refEmail==t?(e.info("an email match was found, this guest has been invited already"),!0):(e.info("no email match found, ok to invite guest"),!1)})):(e.info("no guestlist"),!1)}function c(){return!!angular.isDefined(te.event)}function u(e){Object.keys(ee.events[e]).forEach(function(t){angular.isObject(ee.events[e][t])||delete ee.events[e][t]})}function d(){return ee.bio.uid}function v(){return ee.bio.name}function f(){return ee.bio.email}function m(){return ee.bio.company}function g(){return ee.bio.title}function h(){return ee.bio.dob}function p(){return{uid:ee.bio.uid,name:ee.bio.name,email:ee.bio.email,company:ee.bio.company,title:ee.bio.title,dob:ee.bio.dob}}function b(e,t){return ee.events[e][t]}function E(e){return ee.events[e]}function w(){return ee.events}function U(){return te}function T(e){ee.bio.uid=e}function y(e){ee.bio.name=e}function L(e){ee.bio.email=e}function A(e){ee.bio.company=e}function D(e){ee.bio.title=e}function I(e){ee.bio.dob=e}function C(e,t,n){angular.isDefined(e)&&L(e),angular.isDefined(t)&&y(t),angular.isDefined(n)&&T(n)}function S(e,t){var n=t.id;u(e),ee.events[e][n]=t}function $(e){ee.events=e}function F(e){y(e.name),L(e.email),A(e.company),D(e.title),I(e.dob),z()}function q(e,s,o,r,a){var l=n;return t(function(t,n){angular.isDefined(s)&&(o=i(s)),l.addGuestToHostGuestListonDB(e,o,r,a).then(function(e){t(e)})["catch"](function(e){n(e)})})}function k(e){te=e}function B(e){var t=e.uid;angular.isObject(te.event.guestList)||(te.event.guestList={}),te.event.guestList[t]=e.guest}function R(e){var s=n;return t(function(t,n){guestEmail=i(e),s.findGuestUID(guestEmail).then(function(e){t(e)})["catch"](function(e){n(e)})})}function M(e,t){delete ee.events[e][t.id]}function G(){var e=n;e.downloadUserData().then(function(e){ee=e})}function j(e){var i=n;return t(function(t,n){i.getUserBio(e).then(function(e){t(e)})["catch"](function(e){n("There was an error reading the user bio: "+e)})})}function O(){var e=n;return t(function(t,n){e.getUserEvents(d()).then(function(e){Object.keys(e).forEach(function(t){Object.keys(e[t]).forEach(function(n){S(t,e[t][n])})}),t(e)})["catch"](function(e){n("There was an error reading the user events: "+e)})})}function x(e){var i=n;return t(function(t,n){i.getAHostedEvent(d(),e).then(function(e){t(e)})["catch"](function(e){n("There was an error reading the user event: "+e)})})}function N(){var e=n;e.uploadUserData(ee)}function z(){var e=n;e.uploadUserBio(ee.bio)}function H(){}function P(i,s){var o=n;return e.info("sending this to the server"),e.info(s),t(function(e,t){o.createHostedEvent(i,s).then(function(t){e(t)})["catch"](function(e){t(e)})})}function V(i){var s=n;return t(function(t,n){s.thereWasAnUpdateField(i,d()).then(function(t){s.deleteUpdateField(i,d()).then(function(t){e.info(t)})["catch"](function(t){e.info(t)})})["catch"](function(t){e.info(t)})})}function _(e,i){var s=n;return t(function(t,n){s.getGuestListForEvent(e,i).then(function(e){t(e)})["catch"](function(e){n(e)})})}function W(e){var i=n;return t(function(t,n){i.removeIncompleteEvent(ee.getUIDLocally,e).then(function(e){t(e)})["catch"](function(e){n(e)})})}function Z(e){return t(function(t,n){o()?t(p()):j(e).then(function(e){C(e.email,e.name,e.uid),t(e)})["catch"](function(e){n(e)})})}function K(e,n){return T(e),t(function(e,t){x(n).then(function(t){e(t)})["catch"](),r("hosting",n)&&e(b("hosting",n))})}function J(e){var n={};return t(function(e,t){O().then(function(t){e(t)}),n=E(type),e(n)})}function Q(e){var t={},n=new Date;n.setMinutes(0,0,0);var i=s(n);t={id:e,name:"",type:"",host:{name:ee.bio.name,uid:ee.bio.uid,email:ee.bio.email},message:"",eventTimes:{start:i,end:i+36e5},address:{street01:"",street02:"",street03:"",city:"",state:"",zip:0}},S("hosting",t),k(t)}function X(e){return t(function(e,t){})}function Y(t,n){e.info("saving this event locally"),e.info(n),S(t,n)}var ee={bio:{uid:"",name:"",email:"",company:"",title:"",dob:0},events:{hosting:{},pending:{},attending:{},completed:{}}},te={},ne={bioPrimariesAreCompleteLocally:o,eventExistsLocally:r,thisIsTheHostEmail:a,guestInvitedAlready:l,thereIsAnActiveEvent:c,cleanEvents:u,getUIDLocally:d,getNameLocally:v,getEmailLocally:f,getCompanyLocally:m,getTitleLocally:g,getDOBLocally:h,getFullBioLocally:p,getOneUserEventLocally:b,getUserEventsLocally:E,getAllUserEventsLocally:w,getActiveEvent:U,setUIDLocally:T,setNameLocally:y,setEmailLocally:L,setCompanyLocally:A,setTitleLocally:D,setDOBLocally:I,setPrimariesLocally:C,updateUserEventsLocally:S,updateAllUserEventsLocally:$,updateBioLocally:F,addGuestToHostGuestList:q,setActiveEvent:k,addGuestToActiveEvent:B,saveNewHostingEvent:Y,removeUserEventsLocally:M,getFullRemoteDBforLocal:G,getRemoteBioForLocal:j,getRemoteEventsForLocal:O,getOneRemoteEventForLocal:x,setFullRemoteDBfromLocal:N,setRemoteBioFromLocal:z,setARemoteEventFromLocal:H,setRemoteEventsFromLocal:P,cleanDBEventsCategory:V,getUserIdForGuest:R,getEventGuestList:_,removeIncompleteEventFromDB:W,loadBio:Z,loadEventsProgressively:J,loadAnEventProgressively:K,createNewEvent:Q,updatePendingEventsListForGuest:X};return ne}function validation(e){function t(e){return angular.isUndefined(e)?"This is a required field":void 0}function n(e){return angular.isDefined(e)&&e.length<I?"Name should be at least "+I+" characters":void 0}function i(e){return angular.isDefined(e)&&!(e.length<C)}function s(e){return angular.isDefined(e)&&!(e.length>S)}function o(e){if(angular.isDefined(e)){var t=new RegExp("[!@#$%^&*]");return!!t.test(e)}return!1}function r(e){if(angular.isDefined(e)){var t=new RegExp("[0-9]","");return!!t.test(e)}return!1}function a(e){if(angular.isDefined(e)){var t=new RegExp("[a-z]","");return!!t.test(e)}return!1}function l(e){if(angular.isDefined(e)){var t=new RegExp("[A-Z]","");return!!t.test(e)}return!1}function c(e){if(angular.isDefined(e)){var t=new RegExp("[^A-z0-9!@#$%^&*]","");return!t.test(e)}return!1}function u(e){var t=/[a-z0-9!#$%&'*+=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/g,n=new RegExp(t);return angular.isDefined(e)&&!n.test(e)?"Not a valid email":void 0}function d(e){}function v(){var e={name:{name:{status:!1,message:"A name is required"},validLength:{status:!1,message:"Name must be at least 3 characters long"}},email:{email:{status:!1,message:"An email is required"},validEmail:{status:!1,message:"This is not a valid email"}},pass:{pass:{status:!1,message:"A password is required"},tooShort:{status:!1,message:"There should be at least 6 characters"},tooLong:{status:!1,message:"There should be no more than 100 characters"},noLowercase:{status:!1,message:"There should be at least one lowercase letter"},noUppercase:{status:!1,message:"There should be at least one uppercase letter"},noNumber:{status:!1,message:"There should be at least one number"},noSymbol:{status:!1,message:"There should be at least one symbol"},hasInvalidChar:{status:!1,message:"There shouldn't be any invalid characters"}},changeStatus:function(e,t,n){this[e][t].status=n},getErrorMessage:function(e,t){return this[e][t].message},allReqsFulfilled:function(e){Object.keys(e).forEach(function(t){return e[t].status?void 0:!1})},allInputsPass:function(){Object.keys(this).forEach(function(e){return this.allReqsFulfilled(e)?void 0:!1})},getAllErrors:function(){var e={};return Object.keys(this).forEach(function(t){angular.isObject(this[t])&&Object.keys(t).forEach(function(n){this[t][n].status&&(e[t]={},e[t][n]={message:this[t][n].message})})}),e}};return e}function f(){var e={eventName:{completed:!1,addressed:!1,row:{"class":{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{"class":{"control-label":!0}},input:{"class":{"form-control":!0,"col-xs-12":!0,"col-sm-12":!0,"col-md-12":!0}}},eventHost:{completed:!1,addressed:!1,row:{"class":{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{"class":{"control-label":!0}},input:{"class":{"form-control":!0}}},eventType:{completed:!1,addressed:!1,row:{"class":{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{"class":{"control-label":!0}},input:{"class":{"form-control":!0}}},eventStart:{completed:!1,addressed:!1,row:{"class":{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{"class":{"control-label":!0}},input:{"class":{"form-control":!0}}},eventEnd:{completed:!1,addressed:!1,row:{"class":{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{"class":{"control-label":!0}},input:{"class":{
"form-control":!0}}},eventStreet01:{completed:!1,addressed:!1,row:{"class":{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{"class":{"control-label":!0}},input:{"class":{"form-control":!0}}},eventCity:{completed:!1,addressed:!1,row:{"class":{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{"class":{"control-label":!0}},input:{"class":{"form-control":!0}}},eventState:{completed:!1,addressed:!1,row:{"class":{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{"class":{"control-label":!0}},input:{"class":{"form-control":!0}}},eventZip:{completed:!1,addressed:!1,row:{"class":{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{"class":{"control-label":!0}},input:{"class":{"form-control":!0}}},eventGuest:{completed:!1,addressed:!1,row:{"class":{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{"class":{"control-label":!0}},input:{"class":{"form-control":!0}}}};return e}function m(){this.passesAllReqs?(this["class"].row["has-success"]=!0,this["class"].row["has-error"]=!1,this.style["background-color"]="#78FA89",this.style.color="black"):(this["class"].row["has-success"]=!1,this["class"].row["has-error"]=!0,this.style["background-color"]="#FA787E",this.style.color="white")}function g(){var e=this.reqs,t=this.reqBox;Object.keys(e).forEach(function(n){e[n].met?t[n].style.color="green":t[n].style.color="red"})}function h(){var e=this.reqs,t=[];Object.keys(e).forEach(function(n){e[n].met||t.push(e[n].errorMessage)}),this.errorMessage=t.join(", ")}function p(){angular.isDefined(this.value)&&""!=this.value?this.hasValue=!0:this.hasValue=!1}function b(){this.allReqsTested&&(angular.isDefined(this.errorMessage)&&""!=this.errorMessage?this.hasAnErrorMessage=!0:this.hasAnErrorMessage=!1)}function E(){var e=this.reqs,t=this.value,n=!0;Object.keys(e).forEach(function(i){e[i].test(t)?e[i].met=!0:(e[i].met=!1,n=!1)}),this.passesAllReqs=n,n?this.hasAnErrorMessage=!1:(this.buildErrorMessage(),this.hasAnErrorMessage=!0),this.updateClasses(),angular.isDefined(this.updateReqStyles)&&this.updateReqStyles(),this.allReqsTested=!0}function w(){this.allReqsTested&&this.checkAllRequirnments()}function U(){this.showReqsBox=!0}function T(){this.showReqsBox=!1}function y(e){var n={name:{value:"",reqs:{hasOne:t,longEnough:$},errorMessage:"",hasValue:!1,passesAllReqs:!1,allReqsTested:!1,hasAnErrorMessage:!1,buildErrorMessage:h,checkForValue:p,checkForErrorMessage:b,checkAllRequirnments:E,postFailReqsTest:w,updateClasses:m,"class":{row:{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1},label:{"control-label":!0},input:{"col-xs-12":!0,"col-sm-12":!0,"col-md-12":!0,"form-control":!0}},style:{color:"black"}},email:{value:"",reqs:{hasOne:t,isAnEmail:F},errorMessage:"",hasValue:!1,passesAllReqs:!1,allReqsTested:!1,hasAnErrorMessage:!1,buildErrorMessage:h,checkForValue:p,checkForErrorMessage:b,checkAllRequirnments:E,postFailReqsTest:w,updateClasses:m,"class":{row:{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1},label:{"control-label":!0},input:{"col-xs-12":!0,"col-sm-12":!0,"col-md-12":!0,"form-control":!0}},style:{color:"black"}},pass:{value:"",reqs:{hasOne:t,longEnough:q,shortEnough:k,hasLowercase:B,hasUppercase:R,hasANumber:M,hasASymbol:G,noIllegalChars:j},errorMessage:"",hasValue:!1,passesAllReqs:!1,allReqsTested:!1,hasAnErrorMessage:!1,showReqsBox:!1,buildErrorMessage:h,checkForValue:p,checkForErrorMessage:b,checkAllRequirnments:E,postFailReqsTest:w,updateClasses:m,updateReqStyles:g,openReqBox:U,closeReqBox:T,"class":{row:{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1},label:{"control-label":!0},input:{"col-xs-12":!0,"col-sm-12":!0,"col-md-12":!0,"form-control":!0}},style:{color:"black"},reqBox:{hasOne:{req:"Need to set a password",style:{color:"red"}},longEnough:{req:"Is at least 6 characters long",style:{color:"red"}},shortEnough:{req:"Is no longer than 100 characters",style:{color:"red"}},hasLowercase:{req:"Contains at least one lowercase letter",style:{color:"red"}},hasUppercase:{req:"Contains at least one uppercase letter",style:{color:"red"}},hasANumber:{req:"Contains at least one number",style:{color:"red"}},hasASymbol:{req:"Contains at least one required symbol (!@#$%^&*)",style:{color:"red"}},noIllegalChars:{req:"Doesn't have any illegal characters",style:{color:"red"}}}}};return n[e]}function L(){}function A(){}function D(){}var I=3,C=6,S=100,t={met:!1,errorMessage:"This field is required",test:function(e){return this.tested=!0,angular.isUndefined(e)?!1:""!=e}},$={met:!1,errorMessage:"Too short (3 chars minimum)",test:function(e){return this.tested=!0,angular.isDefined(e)?e.length>=3:void 0}},F={met:!1,errorMessage:"This is not a valid email",test:function(e){var t=/[a-z0-9!#$%&'*+=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/g,n=new RegExp(t);return angular.isDefined(e)?!!n.test(e):!1}},q={met:!1,errorMessage:"Should be at least 6 characters long",test:function(e){return this.tested=!0,angular.isDefined(e)?e.length>=6:!1}},k={met:!1,errorMessage:"Should be no more than 100 characters",test:function(e){return this.tested=!0,angular.isDefined(e)?e.length<=100:!1}},B={met:!1,errorMessage:"Should have at least one lowercase letter",test:function(e){var t=new RegExp("[a-z]");return angular.isDefined(e)?!!t.test(e):!1}},R={met:!1,errorMessage:"Should have at least one uppercase letter",test:function(e){var t=new RegExp("[A-Z]");return angular.isDefined(e)?!!t.test(e):!1}},M={met:!1,errorMessage:"Should have at least one number letter",test:function(e){var t=new RegExp("[0-9]");return angular.isDefined(e)?!!t.test(e):!1}},G={met:!1,errorMessage:"Should have at least one symbol letter",test:function(e){var t=new RegExp("[!@#$%^&*]");return angular.isDefined(e)?!!t.test(e):!1}},j={met:!1,errorMessage:"Should be at least 6 characters long",test:function(e){var t=new RegExp("[^A-z0-9!@#$%^&*]");return angular.isDefined(e)?!t.test(e):!0}},O={required:t,minNameLength:n,minPassLength:i,maxPassLength:s,atLeastOneSymbol:o,atLeastOneNumber:r,atLeastOneLowercase:a,atLeastOneUppercase:l,illegalCharacter:c,email:u,dateOfBirth:d,generateEventRequirnments:f,generateNewUserRequirnemnts:v,updateEventReqStatus:L,updateEventReqAddressed:A,updateEventReqClass:D,generateTestableObject:y};return O}function config(e){e.when("/",{templateUrl:"views/landingPage.htm",controller:"LandingPageController",controllerAs:"vm"}).when("/signup",{templateUrl:"views/newUserSignup.htm",controller:"NewUserSignUpController",controllerAs:"vm"}).when("/login",{templateUrl:"views/registeredUserLogin.htm",controller:"RegUserLoginController",controllerAs:"vm"}).when("/userInformation/:uid?",{templateUrl:"views/userInformation.htm",controller:"UserInformationController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).when("/userEvents/:uid?",{templateUrl:"views/userEvents.htm",controller:"UserEventsController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).when("/event/host/:eventId/:uid/:section",{templateUrl:"views/hostEvent.htm",controller:"HostEventController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).when("/event/guest/:eventId/:uid/:hostId",{templateUrl:"views/guestEvent.htm",controller:"GuestEventController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).when("/event/:eventId?/:hostId?/:uid?/:section?",{templateUrl:"views/anEvent.htm",controller:"AnEventController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService,eventViewChanger:eventViewChanger}}).otherwise({redirectTo:"/"})}function userAuthenticationService(e){e.isLoggedIn()}function eventViewChanger(e,t){e.eventRoute(t.current.params.eventId,t.current.params.hostId,t.current.params.uid,t.current.params.section)}function addAGuest(){function e(e,t,n,i){}function t(e,t,n,i){function s(e){return btoa(e)}function o(){a.validations.name.valid&&a.validations.email.valid?(a.invitationValidForSubmission=!0,a.submissionButton["class"]["btn-warning"]=!1,a.submissionButton["class"]["btn-success"]=!0,a.submissionButton.message="Invite Guest"):(a.invitationValidForSubmission=!1,a.submissionButton["class"]["btn-warning"]=!0,a.submissionButton["class"]["btn-success"]=!1,a.submissionButton.message="Address Invitation...")}function r(){angular.isUndefined(c.getOneUserEventLocally("hosting",t.eventId))?c.getRemoteEventsForLocal().then(function(){u=c.getOneUserEventLocally("hosting",t.eventId)}):u=c.getOneUserEventLocally("hosting",t.eventId)}var a=this,l=n,c=i,u={};a.tempGuest={name:"",email:"",status:"pending"},a.validations={name:{addressed:!1,valid:!1,errorMessage:""},email:{addressed:!1,valid:!1,errorMessage:""},invitation:{isTheHost:!1,alreadyInvited:!1,errorMessage:""}},a.invitationValidForSubmission=!1,a.submissionButton={style:{color:"red"},"class":{"col-xs-12":!0,"col-sm-12":!0,btn:!0,"btn-warning":!0,"btn-success":!1},message:"Address Invitation..."},a.validateName=function(){a.validations.name.addressed=!0,angular.isDefined(a.tempGuest.name)&&""!=a.tempGuest.name?(a.validations.name.valid=!0,a.validations.name.errorMessage=""):(a.validations.name.valid=!1,a.validations.name.errorMessage="This guest needs a name"),o()},a.validateEmail=function(){a.validations.email.addressed=!0,angular.isDefined(a.tempGuest.email)&&""!=a.tempGuest.email?angular.isUndefined(l.email(a.tempGuest.email))?(a.validations.email.valid=!0,a.validations.email.errorMessage=""):(a.validations.email.valid=!1,a.validations.email.errorMessage=l.email(a.tempGuest.email),e.info(a.validations.email.errorMessage)):(a.validations.email.valid=!1,a.validations.email.errorMessage="Not a valid email"),o()},a.showNameError=function(){return!(a.validations.name.valid||!a.validations.name.addressed)},a.showEmailError=function(){return!(a.validations.email.valid||!a.validations.email.addressed)},a.showInvitationError=function(){return!(!a.validations.invitation.isTheHost&&!a.validations.invitation.alreadyInvited)},a.submitGuestInvitation=function(){if(a.invitationValidForSubmission){if(c.thisIsTheHostEmail(a.tempGuest.email,t.eventId))return a.validations.invitation.isTheHost=!0,a.validations.invitation.errorMessage="No need to invite the host",0;a.validations.invitation.isTheHost=!1,c.getUserIdForGuest(a.tempGuest.email).then(function(e){return e}).then(function(e){angular.isObject(a.guestList)||(a.guestList={});var t=a.tempGuest;a.guestList[e]=t,a.tempGuest={name:"",email:"",status:"pending"}}).then(function(){}).then(function(){})["catch"](function(t){e.info(t),idByEmail=s(a.tempGuest.email),angular.isObject(a.guestList)||(a.guestList={});var n=a.tempGuest;a.guestList[idByEmail]=n,a.tempGuest={name:"",email:"",status:"pending"}})}},r()}e.$inject=["scope","el","attr","ctrl"];var n={restrict:"AECM",templateUrl:"views/directives/addAGuest.directive.htm",replace:!0,scope:{guestList:"="},link:e,controller:t,controllerAs:"vm",bindToController:!0};return t.$inject=["$log","$routeParams","validation","userData"],n}function hostedEventsList(){function e(e,t,n,i){e.$watch("hostedEvents",function(e,t){})}function t(e,t){function n(e){return new Date(parseInt(e))}function i(e){var t=0;return s.guestsAreInvited=!0,Object.keys[e].forEach(function(e){t++}),t}var s=this,o=t;s.guestsAreInvited=!1,s.formatDate=function(e){return n(e)},s.guestsAttending=function(e){return angular.isDefined(e)&&angular.isDefined(e.attending)?i(e.attending):0},s.guestsInvited=function(e){function t(){return n.attending+n.pending+n.declined}if(angular.isDefined(e)){var n={attending:0,pending:0,declined:0};return angular.isDefined(e.attending)&&(n.attending=i(e.attending)),angular.isDefined(e.pending)&&(n.pending=i(e.pending)),angular.isDefined(e.declined)&&(n.declined=i(e.declined)),t()}return 0},s.percentageAttending=function(e){return angular.isDefined(e)?guestsAttending(guestlist)/guestsInvited(e):0},s.eventClicked=function(t){e.info("redirecting to: /event/"+t+"/"+s.hostedEvents[t].host.uid+"/"+s.userId),o.redirectTo("/event",t,s.hostedEvents[t].host.uid,s.userId)},s.inviteGuests=function(e){o.redirectTo("/event/host",e,s.hostedEvents[e].host.uid,"3")}}e.$inject=["scope","el","attr","ctrl"];var n={restrict:"AECM",templateUrl:"views/directives/hostedEventsList.directive.htm",replace:!0,scope:{hostedEvents:"=",userId:"="},link:e,controller:t,controllerAs:"vm",bindToController:!0};return t.$inject=["$log","trafficValet"],n}function hostedGuestList(){function e(e,t,n,i){e.$watch("guestList",function(){e.$apply})}function t(e,t,n){function i(){return angular.isDefined(o.guestList)&&""!=o.guestList?(o.isAGuestList=!0,!0):(o.isAGuestList=!1,!1)}function s(){var s=n;i()||(e.info("going after the list"),s.getEventGuestList(t.uid,t.eventId).then(function(t){e.info("got the list"),e.info(t),o.guestList=t,angular.isObject(t)&&(o.isAGuestList=!0)})["catch"](function(t){e.info("There was an error: "+t)}))}var o=this;o.isAGuestList=!1,s()}e.$inject=["scope","el","attr","ctrl"];var n={restrict:"AECM",templateUrl:"views/directives/hostedGuestList.directive.htm",replace:!0,scope:{guestList:"="},link:e,controller:t,controllerAs:"vm",bindToController:!0};return t.$inject=["$log","$routeParams","userData"],n}function pendingEventsList(){function e(e,t,n,i){e.$watch("hostedEvents",function(e,t){})}function t(e,t){function n(e){return new Date(parseInt(e))}function i(e){return Date.parse(e)}function s(){var e=new Date;e.setHours(e.getHours()+Math.round(e.getMinutes()/60)),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e=i(e);var t=e+864e5;return t}function o(){r.pendingEvents={welcome:{name:"Meet-up Event Planner Welcome Event",message:"Thanks for trying out Meet-up Event Planner!  Click here to learn more.",eventTimes:{end:s()+108e5,start:s()},rsvped:!1,accepted:!1,accept:function(){this.rsvped=!0,this.accepted=!0},decline:function(){this.rsvped=!0,this.accepted=!1}}}}var r=this;r.pendingEvents={},r.eventClicked=function(){},r.formatDate=function(e){return n(e)},o()}e.$inject=["scope","el","attr","ctrl"];var n={restrict:"AECM",templateUrl:"views/directives/pendingEventsList.directive.htm",replace:!0,scope:{pendingEvents:"=",userId:"="},link:e,controller:t,controllerAs:"vm",bindToController:!0};return t.$inject=["$log","trafficValet"],n}function toolBar(){function e(e,t,n,i){}function t(e,t,n,i){function s(){r.checkLoginStatus().then(function(e){o.loggedIn=e})["catch"]()}var o=this,r=n,a=i;o.login=function(){},o.logout=function(){t.info("logging out"),r.logUserOut(),a.redirectTo("/login")},o.loginRegisteredUser=function(){var e=i,s=n,r=userData;s.LoginRegisteredUser(o.email,o.password).then(function(e){return e.uid}).then(function(n){s.getUserBio(n).then(function(e){r.updateBioLocally(e),s.getUserEvents(n).then(function(e){r.updateAllUserEventsLocally(e)})["catch"](function(e){t.info(e)})})["catch"](function(e){t.info(e)}),e.redirectTo("/userInformation",n)})["catch"](function(e){})},s(),e.$on("$routeChangeStart",function(e,t){s()})}e.$inject=["scope","el","attr","ctrl"];var n={restrict:"AECM",templateUrl:"views/directives/toolBar.directive.htm",replace:!0,scope:{},link:e,controller:t,controllerAs:"vm",bindToController:!0};return t.$inject=["$scope","$log","backendServices","trafficValet"],n}function focusMe(e,t,n){var i={link:function(i,s,o){var r=t(o.focusMe);i.$watch(r,function(t){n.info("value=",t),t===!0&&e(function(){s[0].focus()})}),s.bind("blur",function(){n.info("blur"),i.$apply(r.assign(i,!1))})}};return i}config.$inject=["$routeProvider"],userAuthenticationService.$inject=["authService"],eventViewChanger.$inject=["trafficValet","$route"],angular.module("meetUpEventApp",["ngRoute","ngTouch","firebase"]),angular.module("meetUpEventApp").controller("AnEventController",AnEventController),AnEventController.$inject=["$log","$routeParams"],angular.module("meetUpEventApp").controller("GuestEventController",GuestEventController),GuestEventController.$inject=["$log"],angular.module("meetUpEventApp").controller("HostEventController",HostEventController),HostEventController.$inject=["$scope","$log","$routeParams","$document","userData","trafficValet","validation"],angular.module("meetUpEventApp").controller("LandingPageController",LandingPageController),LandingPageController.$inject=["trafficValet"],angular.module("meetUpEventApp").controller("MainController",MainController),MainController.$inject=["$log","$location","$document","$window"],angular.module("meetUpEventApp").controller("NewUserSignUpController",NewUserSignUpController),NewUserSignUpController.$inject=["$scope","$log","validation","backendServices","trafficValet","userData"],angular.module("meetUpEventApp").controller("RegUserLoginController",RegUserLoginController),RegUserLoginController.$inject=["$log","$document","backendServices","trafficValet","userData"],angular.module("meetUpEventApp").controller("topMenuController",topMenuController),topMenuController.$inject=["$scope","$log","$location","$document","$window"],angular.module("meetUpEventApp").controller("UserEventsController",UserEventsController),UserEventsController.$inject=["$log","$routeParams","userData","trafficValet"],angular.module("meetUpEventApp").controller("UserInformationController",UserInformationController),UserInformationController.$inject=["$log","$document","$routeParams","userData","trafficValet"],angular.module("meetUpEventApp").factory("authService",authService),authService.$inject=["$log","backendServices"],angular.module("meetUpEventApp").factory("backendServices",backendServices),backendServices.$inject=["$log","$q","$window"],angular.module("meetUpEventApp").factory("trafficValet",trafficValet),trafficValet.$inject=["$log","$location"],angular.module("meetUpEventApp").factory("userData",userData),userData.$inject=["$log","$q","backendServices"],angular.module("meetUpEventApp").factory("validation",validation),validation.$inject=["$log"],angular.module("meetUpEventApp").config(config),angular.module("meetUpEventApp").directive("addAGuest",addAGuest),angular.module("meetUpEventApp").directive("hostedEventsList",hostedEventsList),angular.module("meetUpEventApp").directive("hostedGuestList",hostedGuestList),angular.module("meetUpEventApp").directive("pendingEventsList",pendingEventsList),angular.module("meetUpEventApp").directive("toolBar",toolBar),angular.module("meetUpEventApp").directive("focusMe",focusMe),focusMe.$inject=["$timeout","$parse","$log"];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFuRXZlbnQuY29udHJvbGxlci5qcyIsIkd1ZXN0RXZlbnQuY29udHJvbGxlci5qcyIsIkhvc3RFdmVudC5jb250cm9sbGVyLmpzIiwiTGFuZGluZ1BhZ2UuY29udHJvbGxlci5qcyIsIk1haW4uY29udHJvbGxlci5qcyIsIk5ld1VzZXJTaWduVXAuY29udHJvbGxlci5qcyIsIlJlZ1VzZXJMb2dpbi5jb250cm9sbGVyLmpzIiwiVG9wTWVudS5jb250cm9sbGVyLmpzIiwiVXNlckV2ZW50cy5jb250cm9sbGVyLmpzIiwiVXNlckluZm9ybWF0aW9uLmNvbnRyb2xsZXIuanMiLCJBdXRoU2VydmljZS5mYWN0b3J5LmpzIiwiQmFja2VuZFNlcnZpY2VzLmZhY3RvcnkuanMiLCJUcmFmZmljVmFsZXQuZmFjdG9yeS5qcyIsIlVzZXJEYXRhLmZhY3RvcnkuanMiLCJWYWxpZGF0aW9uLmZhY3RvcnkuanMiLCJyb3V0ZS1jb25maWcuanMiLCJhcHAuanMiLCJBZGRBR3Vlc3QuZGlyZWN0aXZlLmpzIiwiSG9zdGVkRXZlbnRzTGlzdC5kaXJlY3RpdmUuanMiLCJIb3N0ZWRHdWVzdExpc3QuZGlyZWN0aXZlLmpzIiwiUGVuZGluZ0V2ZW50c0xpc3QuZGlyZWN0aXZlLmpzIiwiVG9vbEJhci5kaXJlY3RpdmUuanMiLCJmb2N1c01lLmRpcmVjdGl2ZS5qcyIsImFwcC5tb2R1bGUuanMiXSwibmFtZXMiOlsiQW5FdmVudENvbnRyb2xsZXIiLCIkbG9nIiwiJHJvdXRlUGFyYW1zIiwiaW5pdCIsInZtIiwidGVtcERhdGVUaW1lIiwic3RhcnQiLCJlbmQiLCJuZXdHdWVzdCIsIm5hbWUiLCJlbWFpbCIsImFkZHJlc3MiLCJ2YWxpZCIsInN0eWxlIiwiY29sb3IiLCJzaG93SWZIb3N0IiwiaGlkZUlmQXR0ZW5kaW5nIiwibWFuYWdlU2VjdGlvbnMiLDEsImFjdGl2ZSIsImNvbXBsZXRlIiwiYmFja2dyb3VuZC1jb2xvciIsMiwzLCJjaGVja0Zvckhvc3QiLCJjaGVja0lmR3Vlc3RJc0F0dGVuZGluZyIsIm9wZW5BbGxTZWN0aW9ucyIsInV0ZjhfdG9fYjY0Iiwic3RyIiwiYnRvYSIsImI2NF90b191dGY4IiwiYXRvYiIsImRhdGVUaW1lVG9Vbml4VGltZSIsImRhdGVUaW1lIiwiRGF0ZSIsInBhcnNlIiwiY2xlYW5OZXdHdWVzdFZhcmlhYmxlIiwiaW52aXRlQVJlZ2lzdGVyZWRVc2VyIiwidWlkIiwiaW5mbyIsInJlZiIsImNoaWxkIiwiZXZlbnRJZCIsInNldCIsImlkIiwiZXZlbnRUaW1lcyIsImV2ZW50IiwiaG9zdCIsImVycm9yIiwib25jZSIsInNuYXBzaG90IiwiY2hlY2tGb3JQbGFjZWhvbGRlciIsInZhbCIsInVwZGF0ZWQiLCJyZW1vdmUiLCJlcnJvck9iamVjdCIsImNvZGUiLCJpbnZpdGVBblVucmVnaXN0ZXJlZFVzZXIiLCJ1c2VyS2V5IiwiYXV0aERhdGEiLCJnZXRBdXRoIiwiaG9zdElkIiwidXNlckV2ZW50cyIsIm9uIiwiYWxsR3Vlc3RzIiwiYXR0ZW5kaW5nIiwidGhpcyIsInRlbXBUaW1lIiwidXNlcklzSG9zdCIsInNldFRlbXBUaW1lIiwiZW5kcG9pbnQiLCJ1bml4VGltZVRvRGF0ZVRpbWUiLCJ1bml4VGltZSIsInBhcnNlSW50Iiwic3VibWl0IiwiYmFja1RvVXNlckV2ZW50cyIsIiRsb2NhdGlvbiIsInBhdGgiLCJ0b2tlbiIsImV2ZW50UmVkaXJlY3QiLCJldmVudElEIiwiZnVsbFBhdGgiLCJjaGFuZ2VTZWN0aW9uIiwidGFyZ2V0U2VjdGlvbiIsImkiLCJzYXZlRXZlbnRUaW1lIiwidGFyZ2V0IiwiZ3Vlc3RzQXJlSW52aXRlZCIsImd1ZXN0TGlzdCIsInZhbGlkYXRlR3Vlc3RFbWFpbCIsImNvbnN0cmFpbnQiLCJSZWdFeHAiLCJ0ZXN0IiwiaXNTZWN0aW9uQ29tcGxldGUiLCJyZXF1aXJlZElucHV0cyIsInNhdmVBbmRBZHZhbmNlIiwiJHNhdmUiLCJ0aGVuIiwiYWRkR3Vlc3RUb0hvc3RzTGlzdCIsInJlZ2lzdGVyZWRVc2VycyIsInN0YXR1cyIsInNhdmVFdmVudCIsImd1ZXN0V2lsbEF0dGVuZCIsInJlc3BvbnNlIiwiY3VycmVudFVzZXIiLCJ0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucyIsInJlbW92ZUF0dGVuZGluZ1VwZGF0ZWQiLCJpbnZpdGF0aW9ucyIsInRoaXNJbnZpdGF0aW9uIiwiaW52aXRhdGlvbiIsImF0dGVuZGluZ0xpc3QiLCJjdXJyZW50RGF0ZSIsInVwZGF0ZSIsInVwZGF0ZVVwZGF0ZWRQYXJhbSIsImFkZEludml0YXRpb25Ub0F0dGVuZGluZyIsIkd1ZXN0RXZlbnRDb250cm9sbGVyIiwiSG9zdEV2ZW50Q29udHJvbGxlciIsIiRzY29wZSIsIiRkb2N1bWVudCIsInVzZXJEYXRhIiwidHJhZmZpY1ZhbGV0IiwidmFsaWRhdGlvbiIsImNhbGN1bGF0ZUR1cmF0aW9uIiwiY2hhbmdlU2F2ZUJ0biIsImRpcmVjdGlvbiIsImFjdGlvbkJ0biIsImJ0biIsIm1lc3NhZ2UiLCJ1cGRhdGVQcm9ncmVzc0JhciIsInVuaXRzIiwicGVyY2VudENvbXBsZXRlIiwicHJvZ3Jlc3NCYXIiLCJ3aWR0aCIsImluaXRFdmVudFRpbWVzIiwibm93Iiwic2V0SG91cnMiLCJnZXRIb3VycyIsIk1hdGgiLCJyb3VuZCIsImdldE1pbnV0ZXMiLCJzZXRNaW51dGVzIiwic2V0U2Vjb25kcyIsInNldE1pbGxpc2Vjb25kcyIsImR1cmF0aW9uIiwidXBkYXRlVGVtcFRpbWVGcm9tTW9kZWwiLCJhbmd1bGFyIiwiaXNEZWZpbmVkIiwidGVtcEV2ZW50IiwibG9hZEV4aXN0aW5nVmFsdWVzIiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJrZXkiLCJ0aGlzRXZlbnRNYW5hZ2VyIiwidGhlcmVJc0FuQWN0aXZlRXZlbnQiLCJhY3RpdmVQYWNrYWdlIiwiZ2V0QWN0aXZlRXZlbnQiLCJyZXF1aXJlZEZpZWxkQ29tcGxldGUiLCJyZXF1aXJlZEZpZWxkcyIsImxvYWRBbkV2ZW50UHJvZ3Jlc3NpdmVseSIsInRoZUV2ZW50IiwiYWN0aXZlU2VjdGlvbiIsInNlY3Rpb24iLCJob3N0ZWRFdmVudFNoZXJwYSIsInJlcXVpcm5tZW50c0ZhY3RvcnkiLCJkaXYiLCJjbGFzcyIsImNvbC14cy02IiwiY29sLXNtLTYiLCJidG4tc3VjY2VzcyIsImJ0bi13YXJuaW5nIiwicHVsbC1yaWdodCIsImdlbmVyYXRlRXZlbnRSZXF1aXJubWVudHMiLCJmb3JtYXREdXJhdGlvbiIsImhvdXJzIiwiZmxvb3IiLCJtaW4iLCJmcmFjdGlvbiIsInZhbGlkYXRlVGltZSIsInN0YXJ0T3JFbmQiLCJzZXR0aW5nVGVtcFN0YXJ0IiwidGltZXMiLCJldmVudFN0YXJ0IiwiZXZlbnRFbmQiLCJjb21wbGV0ZWQiLCJyb3ciLCJvbGRTdGFydCIsIm9sZEVuZCIsIm5ld0VuZCIsInNldHRpbmdUZW1wRW5kIiwic2F2ZU5ld0hvc3RpbmdFdmVudCIsInNldFJlbW90ZUV2ZW50c0Zyb21Mb2NhbCIsInN1Y2Nlc01lc3NhZ2UiLCJlcnJvTWVzc2FnZSIsInJlZGlyZWN0VG8iLCJzZWN0aW9uQmFjayIsImV2ZW50UGFja2FnZSIsInNldEFjdGl2ZUV2ZW50Iiwic2VjdGlvbkZvcndhcmQiLCJ2ZXJpZnlSZXF1aXJlZCIsImZpZWxkIiwidmFsdWUiLCJzYXZlRXZlbnRUb0RCIiwiY2xlYW5EQkV2ZW50c0NhdGVnb3J5IiwiJHdhdGNoIiwiY3VycmVudCIsIm9yaWdpbmFsIiwiaXNPYmplY3QiLCJlbGVtZW50IiwicmVhZHkiLCJMYW5kaW5nUGFnZUNvbnRyb2xsZXIiLCJsYW5kaW5nU2hlcnBhIiwiY3JlYXRlQW5BY2NvdW50IiwibG9naW5Vc2VyIiwiTWFpbkNvbnRyb2xsZXIiLCIkd2luZG93IiwicmVzaXplQkdJbWFnZSIsImNzcyIsIm91dGVySGVpZ2h0IiwiZmJVUkwiLCJGaXJlYmFzZSIsImxvZ291dCIsImFsZXJ0IiwidW5hdXRoIiwiTmV3VXNlclNpZ25VcENvbnRyb2xsZXIiLCJiYWNrZW5kU2VydmljZXMiLCJzaWdudXBWYWxpZGF0aW9uIiwiZ2VuZXJhdGVUZXN0YWJsZU9iamVjdCIsInBhc3MiLCJjcmVhdGVOZXdVc2VyIiwibmV3VXNlclNoZXJwYSIsInBhc3Nlc0FsbFJlcXMiLCJuZXdVc2VyRGF0YSIsImRiVXNlckRhdGEiLCJzZXRQcmltYXJpZXNMb2NhbGx5IiwiYWRkTmV3VXNlclRvRGF0YWJhc2UiLCJhZGROZXdVc2VyVG9SZWdVc2Vyc0xpc3QiLCJSZWdVc2VyTG9naW5Db250cm9sbGVyIiwib3BlblVzZXJMb2dpbkJ0biIsImlucHV0cyIsInBhc3N3b3JkIiwicmVxdWlyZWRGaWVsZHNEZWZpbmVkIiwidW5jbG9ja1VzZXJMb2dpbkJ0biIsInVzYWJsZSIsImVycm9ycyIsInBhc3Nlc0FsbFRlc3RzIiwiY29sLXhzLTEyIiwiY29sLXNtLTEyIiwiZmluZCIsImxvZ2luUmVnaXN0ZXJlZFVzZXIiLCJyZWdpc3RlcmVkVXNlclNoZXJwYSIsImRhdGFiYXNlIiwicmVnaXN0ZXJlZFVzZXJEYXRhIiwiTG9naW5SZWdpc3RlcmVkVXNlciIsInVzZXJDcmVkZW50aWFscyIsImdldFVJRExvY2FsbHkiLCJnZXRVc2VyQmlvIiwidXNlckJpbyIsInVwZGF0ZUJpb0xvY2FsbHkiLCJnZXRVc2VyRXZlbnRzIiwiYWxsRXZlbnRzRm9yVGhpc1VzZXIiLCJ1cGRhdGVBbGxVc2VyRXZlbnRzTG9jYWxseSIsImNsaWNrZWQiLCJ1c2VyQXV0aGVudGljYXRpb24iLCJsb2dVc2VyT3V0IiwidG9wTWVudUNvbnRyb2xsZXIiLCJhdXRoRGF0YUNhbGxiYWNrIiwicHJvdmlkZXIiLCJsb2dnZWRJbiIsInJlZGlyZWN0IiwiYWRkRXZlbnRMaXN0ZW5lciIsIkZhc3RDbGljayIsImF0dGFjaCIsImJvZHkiLCJiaW5kIiwib25SZXNpemVGdW5jdGlvbiIsIiRhcHBseSIsIm91dGVyV2lkdGgiLCJuYXZCYXJMb2dpblJlZ2lzdGVyZWRVc2VyIiwiYXV0aFdpdGhQYXNzd29yZCIsIm5hdmJhclVzZXJFbWFpbCIsIm5hdmJhclVzZXJQYXNzIiwiY2xpY2siLCJuYXZiYXJJbnB1dHMiLCJvbkF1dGgiLCJVc2VyRXZlbnRzQ29udHJvbGxlciIsIm5vT2ZIb3N0ZUV2ZW50cyIsImNvdW50ZXIiLCJldmVudHMiLCJob3N0aW5nIiwiZ2VuZXJhdGVFdmVudElEIiwiZGF0ZSIsImNoZWNrRm9yRXZlbnRzIiwiY2F0ZWdvcnkiLCJzZWN0aW9uQXZhaWxhYmxlIiwiaW5pdGlhbGl6ZSIsInNldFVJRExvY2FsbHkiLCJsb2FkQmlvIiwicmV0cmlldmVkQmlvIiwiZ2V0QWxsVXNlckV2ZW50c0xvY2FsbHkiLCJnZXRSZW1vdGVFdmVudHNGb3JMb2NhbCIsIm9idGFpbmVkVXNlckV2ZW50cyIsInBlbmRpbmciLCJ1bmRlZmluZWQiLCJjb3VudCIsInNob3dEZWNsaW5lIiwiY3JlYXRlTmV3RXZlbnQiLCJuZXdFdmVudFNoZXJwYSIsIlVzZXJJbmZvcm1hdGlvbkNvbnRyb2xsZXIiLCJidWlsZFRlbXBCaXJ0aGRheSIsIm5ld0JpcnRoZGF5IiwidGVtcEJpcnRoZGF5Iiwib2J0YWluZWRVc2VyRGF0YSIsInVzZXIiLCJkb2IiLCJ2aWV3IiwiZGF0YVRvU2F2ZSIsImlzRGF0YSIsImJ0bk1zc2ciLCJwcm9jZWVkQnRuIiwiY2hlY2tWYWx1ZXMiLCJpc1VuZGVmaW5lZCIsImNvbXBhbnkiLCJ0aXRsZSIsInVwZGF0ZURPQiIsInNhdmVBbmRNb3ZlT24iLCJ1c2VySW5mb1NoZXJwYSIsImN1cnJlbnRVaWQiLCJhdXRoU2VydmljZSIsImlzTG9nZ2VkSW4iLCJkYkF1dGhlbnRpY2F0aW9uIiwiY2hlY2tMb2dpblN0YXR1cyIsImFsbEF1dGhTZXJ2aWNlcyIsIiRxIiwiZmlyZUJhc2VBY2NvdW50cyIsInJlc29sdmUiLCJyZWplY3QiLCJjcmVhdGVVc2VyIiwiYXBwIiwiYXBwVXNlcnMiLCJiaW8iLCJiNjRFbWFpbCIsIlJlZ2lzdGVyZWRVc2Vyc0xpc3QiLCJ1cGxvYWRVc2VyRGF0YSIsImFsbFVzZXJEYXRhIiwicmVtb3RlVXNlciIsInVwbG9hZFVzZXJCaW8iLCJjdXJyZW50VXNlckJpbyIsInRvU3RyaW5nIiwicmVtb3RlVXNlckJpbyIsImRvd25sb2FkVXNlckRhdGEiLCJjcmVhdGVIb3N0ZWRFdmVudCIsIm5ld0V2ZW50IiwibmV3SG9zdGVkRXZlbnQiLCJhZGRHdWVzdFRvSG9zdEd1ZXN0TGlzdG9uREIiLCJndWllc3RJZCIsInJzdnBkIiwib3JkZXJCeUtleSIsInVzZXJQcm9maWxlIiwiZXZlbnRzUGFja2FnZSIsImdldEFIb3N0ZWRFdmVudCIsImhvc3RlZEV2ZW50Iiwic2VsZWN0RXZlbnQiLCJmaW5kR3Vlc3RVSUQiLCJndWVzdGI2NEVtYWlsIiwidWlkcyIsImFsbFVzZXJzIiwiZ2V0R3Vlc3RMaXN0Rm9yRXZlbnQiLCJ0aGVMaXN0IiwiZ2V0QW5JbnZpdGVkRXZlbnQiLCJkZWxldGVVcGRhdGVGaWVsZCIsImNhdFJlbW92aW5nRnJvbSIsInJlbW92ZUluY29tcGxldGVFdmVudCIsImV2ZW50VG9SZW1vdmUiLCJvbkNvbXBsZXRlIiwidGhlcmVXYXNBblVwZGF0ZUZpZWxkIiwiY2F0VG9DaGVjayIsImN1cnJlbnRDYXRNb2RlbCIsImFsbEJhY2tlbmRTZXJ2aWNlcyIsInBhcmFtMSIsInBhcmFtMiIsInBhcmFtMyIsImV2ZW50Um91dGUiLCJ1c2VySWQiLCJhbGxUcmFmZmljQ29udHJvbHMiLCJiaW9QcmltYXJpZXNBcmVDb21wbGV0ZUxvY2FsbHkiLCJldmVudEV4aXN0c0xvY2FsbHkiLCJ0eXBlIiwidGhpc0lzVGhlSG9zdEVtYWlsIiwiZ3Vlc3RJbnZpdGVkQWxyZWFkeSIsInJlZkVtYWlsIiwiYWN0aXZlRXZlbnQiLCJjbGVhbkV2ZW50cyIsImdldE5hbWVMb2NhbGx5IiwiZ2V0RW1haWxMb2NhbGx5IiwiZ2V0Q29tcGFueUxvY2FsbHkiLCJnZXRUaXRsZUxvY2FsbHkiLCJnZXRET0JMb2NhbGx5IiwiZ2V0RnVsbEJpb0xvY2FsbHkiLCJnZXRPbmVVc2VyRXZlbnRMb2NhbGx5IiwiZ2V0VXNlckV2ZW50c0xvY2FsbHkiLCJzZXROYW1lTG9jYWxseSIsInNldEVtYWlsTG9jYWxseSIsInNldENvbXBhbnlMb2NhbGx5Iiwic2V0VGl0bGVMb2NhbGx5Iiwic2V0RE9CTG9jYWxseSIsInVwZGF0ZVVzZXJFdmVudHNMb2NhbGx5IiwiYWxsVXNlckV2ZW50cyIsInNldFJlbW90ZUJpb0Zyb21Mb2NhbCIsImFkZEd1ZXN0VG9Ib3N0R3Vlc3RMaXN0IiwiZ3Vlc3RJZCIsImRiIiwicG9zaXRpdmVSZXN1bHQiLCJuZWdhdGl2ZVJlc3VsdCIsImFkZEd1ZXN0VG9BY3RpdmVFdmVudCIsImd1ZXN0IiwiZ2V0VXNlcklkRm9yR3Vlc3QiLCJndWVzdEVtYWlsIiwiZXJyb3JSZXNwb25zZSIsInJlbW92ZVVzZXJFdmVudHNMb2NhbGx5IiwiZ2V0RnVsbFJlbW90ZURCZm9yTG9jYWwiLCJyZW1vdGVVc2VyRGF0YSIsImdldFJlbW90ZUJpb0ZvckxvY2FsIiwiZXZlbnRUeXBlIiwiZ2V0T25lUmVtb3RlRXZlbnRGb3JMb2NhbCIsIm9idGFpbmVkRXZlbnQiLCJzZXRGdWxsUmVtb3RlREJmcm9tTG9jYWwiLCJzZXRBUmVtb3RlRXZlbnRGcm9tTG9jYWwiLCJzdWNjZXNzTWVzc2FnZSIsImVycm9yTWVzc2FnZSIsImFmZmlybWF0aXZlUmVzcG9uc2UiLCJnZXRFdmVudEd1ZXN0TGlzdCIsIm9idGFpbmVkTGlzdCIsInJlbW92ZUluY29tcGxldGVFdmVudEZyb21EQiIsImJpb0Zyb21SZW1vdGVEQiIsIm9idGFpbmVkVXNlckV2ZW50IiwibG9hZEV2ZW50c1Byb2dyZXNzaXZlbHkiLCJhbGxFdmVudHMiLCJzdHJlZXQwMSIsInN0cmVldDAyIiwic3RyZWV0MDMiLCJjaXR5Iiwic3RhdGUiLCJ6aXAiLCJ1cGRhdGVQZW5kaW5nRXZlbnRzTGlzdEZvckd1ZXN0IiwicmVxdWlyZWQiLCJtaW5OYW1lTGVuZ3RoIiwibGVuZ3RoIiwibWluaW11bU5hbWVMZW5ndGgiLCJtaW5QYXNzTGVuZ3RoIiwibWluaW11bVBhc3NMZW5ndGgiLCJtYXhQYXNzTGVuZ3RoIiwibWF4aW11bVBhc3NMZW5ndGgiLCJhdExlYXN0T25lU3ltYm9sIiwiYXRMZWFzdE9uZU51bWJlciIsImF0TGVhc3RPbmVMb3dlcmNhc2UiLCJhdExlYXN0T25lVXBwZXJjYXNlIiwiaWxsZWdhbENoYXJhY3RlciIsIkVNQUlMX1JFR0VYUCIsImRhdGVPZkJpcnRoIiwiZ2VuZXJhdGVOZXdVc2VyUmVxdWlybmVtbnRzIiwiZXJyb3JzT2JqZWN0IiwidmFsaWRMZW5ndGgiLCJ2YWxpZEVtYWlsIiwidG9vU2hvcnQiLCJ0b29Mb25nIiwibm9Mb3dlcmNhc2UiLCJub1VwcGVyY2FzZSIsIm5vTnVtYmVyIiwibm9TeW1ib2wiLCJoYXNJbnZhbGlkQ2hhciIsImNoYW5nZVN0YXR1cyIsImlucHV0IiwicmVxIiwiZ2V0RXJyb3JNZXNzYWdlIiwiYWxsUmVxc0Z1bGZpbGxlZCIsImFsbElucHV0c1Bhc3MiLCJnZXRBbGxFcnJvcnMiLCJhbGxFcnJvcnMiLCJldmVudFZhbGlkYXRpb25zIiwiZXZlbnROYW1lIiwiYWRkcmVzc2VkIiwiZm9ybS1ncm91cCIsImhhcy1zdWNjZXNzIiwiaGFzLWVycm9yIiwibGFiZWwiLCJjb250cm9sLWxhYmVsIiwiZm9ybS1jb250cm9sIiwiY29sLW1kLTEyIiwiZXZlbnRIb3N0IiwiZXZlbnRTdHJlZXQwMSIsImV2ZW50Q2l0eSIsImV2ZW50U3RhdGUiLCJldmVudFppcCIsImV2ZW50R3Vlc3QiLCJ1cGRhdGVDbGFzc2VzIiwidXBkYXRlUmVxU3R5bGVzIiwicmVxdWlybm1lbnRzIiwicmVxcyIsInJlcUJveCIsIm1ldCIsImJ1aWxkRXJyb3JNZXNzYWdlIiwib2JqZWN0RXJyb3JzIiwicHVzaCIsImpvaW4iLCJjaGVja0ZvclZhbHVlIiwiaGFzVmFsdWUiLCJjaGVja0ZvckVycm9yTWVzc2FnZSIsImFsbFJlcXNUZXN0ZWQiLCJoYXNBbkVycm9yTWVzc2FnZSIsImNoZWNrQWxsUmVxdWlybm1lbnRzIiwiYWxsVGVzdHNQYXNzIiwicG9zdEZhaWxSZXFzVGVzdCIsIm9wZW5SZXFCb3giLCJzaG93UmVxc0JveCIsImNsb3NlUmVxQm94IiwidGVzdGFibGVPYmplY3RzIiwiaGFzT25lIiwibG9uZ0Vub3VnaCIsIm5hbWVNaW5MZW5ndGgiLCJpc0FuRW1haWwiLCJwYXNzTWluTGVuZ3RoIiwic2hvcnRFbm91Z2giLCJwYXNzTWF4TGVuZ3RoIiwiaGFzTG93ZXJjYXNlIiwiaGFzVXBwZXJjYXNlIiwiaGFzQU51bWJlciIsImhhc0FTeW1ib2wiLCJub0lsbGVnYWxDaGFycyIsInVwZGF0ZUV2ZW50UmVxU3RhdHVzIiwidXBkYXRlRXZlbnRSZXFBZGRyZXNzZWQiLCJ1cGRhdGVFdmVudFJlcUNsYXNzIiwidGVzdGVkIiwiYWxsVmFsaWRhdGlvbnMiLCJjb25maWciLCIkcm91dGVQcm92aWRlciIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJjb250cm9sbGVyQXMiLCJ1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlIiwiZXZlbnRWaWV3Q2hhbmdlciIsIm90aGVyd2lzZSIsIiRyb3V0ZSIsInBhcmFtcyIsImFkZEFHdWVzdCIsImxpbmtGdW5jIiwic2NvcGUiLCJlbCIsImF0dHIiLCJjdHJsIiwiYWRkQUd1ZXN0Q29udHJvbGxlciIsInZhbGlkYXRlSW52aXRhdGlvbiIsInZhbGlkYXRpb25zIiwiaW52aXRhdGlvblZhbGlkRm9yU3VibWlzc2lvbiIsInN1Ym1pc3Npb25CdXR0b24iLCJpbnZpdGF0aW9uTWFuYWdlciIsImV2ZW50RGV0YWlscyIsImVtYWlsQ2hlY2tlciIsInRlbXBHdWVzdCIsImlzVGhlSG9zdCIsImFscmVhZHlJbnZpdGVkIiwidmFsaWRhdGVOYW1lIiwidmFsaWRhdGVFbWFpbCIsInNob3dOYW1lRXJyb3IiLCJzaG93RW1haWxFcnJvciIsInNob3dJbnZpdGF0aW9uRXJyb3IiLCJzdWJtaXRHdWVzdEludml0YXRpb24iLCJndWVzdEJlaW5nQWRkZWQiLCJpZEJ5RW1haWwiLCIkaW5qZWN0IiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJyZXBsYWNlIiwibGluayIsImJpbmRUb0NvbnRyb2xsZXIiLCJob3N0ZWRFdmVudHNMaXN0IiwibmV4dCIsImhvc3RlZEV2ZW50c0xpc3RDb250cm9sbGVyIiwiY291bnRHdWVzdHMiLCJsaXN0IiwiaG9zdGVkRXZlbnRzU2hlcnBhIiwiZm9ybWF0RGF0ZSIsImd1ZXN0c0F0dGVuZGluZyIsImd1ZXN0c0ludml0ZWQiLCJ0b3RhbEd1ZXN0Q291bnQiLCJndWVzdENvdW50IiwiZGVjbGluZWQiLCJwZXJjZW50YWdlQXR0ZW5kaW5nIiwiZ3Vlc3RsaXN0IiwiZXZlbnRDbGlja2VkIiwiaG9zdGVkRXZlbnRzIiwiaW52aXRlR3Vlc3RzIiwiaG9zdGVkR3Vlc3RMaXN0IiwiaG9zdGVkR3Vlc3RMaXN0Q29udHJvbGxlciIsInRoZXJlSXNBR3Vlc3RMaXN0IiwiaXNBR3Vlc3RMaXN0IiwibGlzdENvbGxlY3RvciIsInJldHVybmVkTGlzdCIsInBlbmRpbmdFdmVudHNMaXN0IiwicGVuZGluZ0V2ZW50c0xpc3RDb250cm9sbGVyIiwiYnVpbGRUb21vcnJvd0RhdGUiLCJ0b2RheSIsInRvbW9ycm93IiwiYWRkV2VsY29tZUV2ZW50IiwicGVuZGluZ0V2ZW50cyIsIndlbGNvbWUiLCJyc3ZwZWQiLCJhY2NlcHRlZCIsImFjY2VwdCIsImRlY2xpbmUiLCJ0b29sQmFyIiwiVG9vbEJhckNvbnRyb2xsZXIiLCJmYkNvbm5lY3QiLCJ0b29sYmFyU2hlcnBhIiwibG9naW4iLCIkb24iLCJmb2N1c01lIiwiJHRpbWVvdXQiLCIkcGFyc2UiLCJmb2N1c01lRGlyZWN0aXZlIiwiYXR0cnMiLCJtb2RlbCIsImZvY3VzIiwiYXNzaWduIiwibW9kdWxlIiwiZmFjdG9yeSJdLCJtYXBwaW5ncyI6IkFBT0EsUUFBQUEsbUJBQUFDLEVBQUFDLEdBU0EsUUFBQUMsS0FFQUMsRUFBQUMsY0FBQUMsTUFBQSxHQUFBQyxJQUFBLElBQ0FILEVBQUFJLFVBQUFDLEtBQUEsR0FBQUMsT0FBQUMsUUFBQSxHQUFBQyxPQUFBLEVBQUFDLE9BQUFDLE1BQUEsTUFDQVYsRUFBQVcsWUFBQSxFQUNBWCxFQUFBWSxpQkFBQSxFQUVB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LHVCQUFBN1Asc0JBRUFBLHFCQUFBNlIsU0FBQSxPQUFBLGVBQUEsV0FBQSxnQkNKQXphLFFBQ0FnZSxPQUFBLGtCQUNBdkYsV0FBQSw0QkFBQXRPLDJCQUVBQSwwQkFBQXNRLFNBQUEsT0FBQSxZQUFBLGVBQUEsV0FBQSxnQkNKQXphLFFBQ0FnZSxPQUFBLGtCQUNBQyxRQUFBLGNBQUExUyxhQUVBQSxZQUFBa1AsU0FBQSxPQUFBLG1CQ0pBemEsUUFDQWdlLE9BQUEsa0JBQ0FDLFFBQUEsa0JBQUFqWixpQkFFQUEsZ0JBQUF5VixTQUFBLE9BQUEsS0FBQSxXQ0pBemEsUUFDQWdlLE9BQUEsa0JBQ0FDLFFBQUEsZUFBQTFmLGNBRUFBLGFBQUFrYyxTQUFBLE9BQUEsYUNKQXphLFFBQ0FnZSxPQUFBLGtCQUNBQyxRQUFBLFdBQUEzZixVQUVBQSxTQUFBbWMsU0FBQSxPQUFBLEtBQUEsbUJDSkF6YSxRQUNBZ2UsT0FBQSxrQkFDQUMsUUFBQSxhQUFBemYsWUFFQUEsV0FBQWljLFNBQUEsUUNKQXphLFFBQ0FnZSxPQUFBLGtCQUNBM0YsT0FBQUEsUUVLQXJZLFFBQ0FnZSxPQUFBLGtCQUNBdEQsVUFBQSxZQUFBMUIsV0NGQWhaLFFBQ0FnZSxPQUFBLGtCQUNBdEQsVUFBQSxtQkFBQUssa0JDRkEvYSxRQUNBZ2UsT0FBQSxrQkFDQXRELFVBQUEsa0JBQUFzQixpQkNGQWhjLFFBQ0FnZSxPQUFBLGtCQUNBdEQsVUFBQSxvQkFBQTRCLG1CQ0ZBdGMsUUFDQWdlLE9BQUEsa0JBQ0F0RCxVQUFBLFVBQUF3QyxTQ0ZBbGQsUUFDQWdlLE9BQUEsa0JBQ0F0RCxVQUFBLFVBQUE4QyxTQUVBQSxRQUFBL0MsU0FBQSxXQUFBLFNBQUEiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignQW5FdmVudENvbnRyb2xsZXInLCBBbkV2ZW50Q29udHJvbGxlcik7XG5cbkFuRXZlbnRDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJHJvdXRlUGFyYW1zJywgXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBBbkV2ZW50Q29udHJvbGxlcigkbG9nLCAkcm91dGVQYXJhbXMpIHtcblx0dmFyIHZtID0gdGhpcztcblx0XG5cdC8vbG9jYWwgdmFyaWFibGVzXG5cdHZtLnRlbXBUaW1lID0ge3N0YXJ0OiAnJywgZW5kOiAnJ307XG5cdHZtLnVzZXJJc0hvc3QgPSBmYWxzZTtcblxuXG5cdC8vTG9jYWwgTWV0aG9kc1xuXHRmdW5jdGlvbiBpbml0KCkge1xuXHRcdC8vZGVjbGFyZSBhbmQgaW5pdGlhbGl6ZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2bS50ZW1wRGF0ZVRpbWUgPSB7c3RhcnQ6ICcnLCBlbmQ6ICcnfTtcblx0XHR2bS5uZXdHdWVzdCA9IHtuYW1lOiAnJywgZW1haWw6e2FkZHJlc3M6JycsIHZhbGlkOmZhbHNlLCBzdHlsZTp7Y29sb3I6Jyd9fX07XG5cdFx0dm0uc2hvd0lmSG9zdCA9IGZhbHNlO1xuXHRcdHZtLmhpZGVJZkF0dGVuZGluZyA9IHRydWU7XG5cdFx0Ly9zZWN0aW9uc1xuXHRcdHZtLm1hbmFnZVNlY3Rpb25zID0ge1xuXHRcdFx0MToge2FjdGl2ZTogdHJ1ZSwgY29tcGxldGU6IGZhbHNlLCBzdHlsZTp7Y29sb3I6J2JsYWNrJywgJ2JhY2tncm91bmQtY29sb3InOid5ZWxsb3cnfX0sXG5cdFx0XHQyOiB7YWN0aXZlOiBmYWxzZSwgY29tcGxldGU6IGZhbHNlLCBzdHlsZTp7Y29sb3I6J3doaXRlJywgJ2JhY2tncm91bmQtY29sb3InOidncmF5J319LFxuXHRcdFx0Mzoge2FjdGl2ZTogZmFsc2UsIGNvbXBsZXRlOiBmYWxzZSwgc3R5bGU6e2NvbG9yOid3aGl0ZScsICdiYWNrZ3JvdW5kLWNvbG9yJzonZ3JheSd9fVxuXHRcdH07XG5cblx0XHQvL2NoZWNrIHVzZXIgdG8gZGV0ZXJtaW5lIHN0YXRlXG5cdFx0Y2hlY2tGb3JIb3N0KCk7XG5cdFx0Y2hlY2tJZkd1ZXN0SXNBdHRlbmRpbmcoKTtcblxuXHRcdC8vb3BlbiB1cCBzZWN0aW9uc1xuXHRcdGlmKCF2bS5zaG93SWZIb3N0KSBvcGVuQWxsU2VjdGlvbnMoKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHV0ZjhfdG9fYjY0KHN0cikge1xuXHRcdHJldHVybiBidG9hKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiBiNjRfdG9fdXRmOChzdHIpIHtcbiAgICBcdHJldHVybiBhdG9iKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH1cblxuXHRmdW5jdGlvbiBjbGVhbk5ld0d1ZXN0VmFyaWFibGUoKSB7XG5cdFx0dm0ubmV3R3Vlc3QgPSB7bmFtZTogJycsIGVtYWlsOnthZGRyZXNzOicnLCB2YWxpZDpmYWxzZSwgc3R5bGU6e2NvbG9yOicnfX19O1xuXHR9XG5cblx0ZnVuY3Rpb24gaW52aXRlQVJlZ2lzdGVyZWRVc2VyKHVpZCkge1xuXHRcdCRsb2cuaW5mbygnYWRkaW5nIHRoZW0gdG8gdGhlIHJlZ2lzdGVyZWQgdXNlcnMgbGlzdCAnICsgdWlkKTtcblx0XHQvL3NldCB0aGUgbmV3IGV2ZW50XG5cdFx0cmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdwZW5kaW5nJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJHJvdXRlUGFyYW1zLmV2ZW50SWQpLnNldCh7XG5cdFx0XHRpZDogJHJvdXRlUGFyYW1zLmV2ZW50SWQsXG5cdFx0XHRldmVudFRpbWVzOiB7XG5cdFx0XHRcdHN0YXJ0OiB2bS5ldmVudC5ldmVudFRpbWVzLnN0YXJ0LFxuXHRcdFx0XHRlbmQ6IHZtLmV2ZW50LmV2ZW50VGltZXMuZW5kXG5cdFx0XHR9LFxuXHRcdFx0bmFtZTogdm0uZXZlbnQubmFtZSxcblx0XHRcdGhvc3Q6ICRyb3V0ZVBhcmFtcy51aWRcblx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbygndGhlcmUgd2FzIGFuIGVycm9yJyArIGVycm9yKTtcblx0XHR9KTtcblx0XHQvL2lmIHRoZXJlIHdhcyBhbiB1cGRhdGVkIHBsYWNlIGhvbGRlciwgcmVtb3ZlIGl0XG5cdFx0cmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdwZW5kaW5nJykub25jZSgndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0dmFyIGNoZWNrRm9yUGxhY2Vob2xkZXIgPSBzbmFwc2hvdC52YWwoKVxuXHRcdFx0JGxvZy5pbmZvKHNuYXBzaG90LnZhbCgpKTtcblxuXHRcdFx0aWYoY2hlY2tGb3JQbGFjZWhvbGRlci51cGRhdGVkKSB7XG5cdFx0XHRcdCRsb2cuaW5mbygnZGVsZXRpbmcgdXBkYXRlZCcpO1xuXHRcdFx0XHRyZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ3BlbmRpbmcnKS5jaGlsZCgndXBkYXRlZCcpLnJlbW92ZShmdW5jdGlvbihlcnJvck9iamVjdCkge1xuXHRcdFx0XHRcdGlmKGVycm9yT2JqZWN0KSAkbG9nLmluZm8oXCJEZWxldGluZyBmYWlsZWQ6IFwiICsgZXJyb3JPYmplY3QuY29kZSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlICRsb2cuaW5mbygnbm90aGluZyB0byBkbycpO1xuXG5cdFx0fSwgZnVuY3Rpb24oZXJyb3JPYmplY3QpIHtcblx0XHRcdGlmKGVycm9yT2JqZWN0KSAkbG9nLmluZm8oXCJUaGUgcmVhZCBmYWlsZWQ6IFwiICsgZXJyb3JPYmplY3QuY29kZSk7XG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBpbnZpdGVBblVucmVnaXN0ZXJlZFVzZXIodXNlcktleSkge1xuXHRcdCRsb2cuaW5mbygnYWRkaW5nIHRoZW0gdG8gdGhlIFVOUkVHSVNURVJFRCB1c2VycyBsaXN0ICcgKyB1c2VyS2V5KTtcblx0XHRyZWYuY2hpbGQoJ1VucmVnaXN0ZXJlZFVzZXJzJykuY2hpbGQodXNlcktleSkuY2hpbGQoJ3BlbmRpbmcnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS5jaGlsZCgkcm91dGVQYXJhbXMuZXZlbnRJZCkuc2V0KHtcblx0XHRcdGlkOiAkcm91dGVQYXJhbXMuZXZlbnRJZCxcblx0XHRcdGhvc3Q6ICRyb3V0ZVBhcmFtcy51aWQsXG5cdFx0XHRldmVudFRpbWVzOiB7XG5cdFx0XHRcdHN0YXJ0OiB2bS5ldmVudC5ldmVudFRpbWVzLnN0YXJ0LFxuXHRcdFx0XHRlbmQ6IHZtLmV2ZW50LmV2ZW50VGltZXMuZW5kXG5cdFx0XHR9LFxuXHRcdFx0bmFtZTogdm0uZXZlbnQubmFtZVxuXHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKCd0aGVyZSB3YXMgYW4gZXJyb3InICsgZXJyb3IpO1xuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gY2hlY2tGb3JIb3N0KCkge1xuXHRcdC8vY2hlY2sgZXZlbnQgaG9zdFxuXHRcdHZhciBhdXRoRGF0YSA9IHJlZi5nZXRBdXRoKCk7XG5cblx0XHRpZihhdXRoRGF0YS51aWQgPT0gJHJvdXRlUGFyYW1zLmhvc3RJZCkge1xuXHRcdFx0JGxvZy5pbmZvKCdpcyB0aGUgaG9zdCcpO1xuXHRcdFx0dm0uc2hvd0lmSG9zdCA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCRsb2cuaW5mbygnbm90IHRoZSBob3N0Jyk7XG5cdFx0XHR2bS5zaG93SWZIb3N0ID0gZmFsc2U7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gY2hlY2tJZkd1ZXN0SXNBdHRlbmRpbmcoKSB7XG5cdFx0aWYoIXZtLnNob3dJZkhvc3QpIHtcblx0XHRcdCRsb2cuaW5mbygnY2hlY2sgZ3Vlc3QgYXR0ZW5kYW5jZScpO1xuXHRcdFx0dXNlckV2ZW50cy5jaGlsZCgnZ3Vlc3RMaXN0Jykub24oJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdFx0dmFyIGFsbEd1ZXN0cyA9IHNuYXBzaG90LnZhbCgpO1xuXHRcdFx0XHR2bS5oaWRlSWZBdHRlbmRpbmcgPSAhYWxsR3Vlc3RzWyRyb3V0ZVBhcmFtcy51aWRdLmF0dGVuZGluZztcblx0XHRcdFx0XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBvcGVuQWxsU2VjdGlvbnMoKSB7XG5cdFx0dm0ubWFuYWdlU2VjdGlvbnNbMV0uYWN0aXZlID0gdHJ1ZTtcblx0XHR2bS5tYW5hZ2VTZWN0aW9uc1syXS5hY3RpdmUgPSB0cnVlO1xuXHRcdHZtLm1hbmFnZVNlY3Rpb25zWzNdLmFjdGl2ZSA9IHRydWU7XG5cdH1cblxuXHRmdW5jdGlvbiBzYXZlRXZlbnQoKSB7XG5cdFx0dm0uZXZlbnQuJHNhdmUoKS50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdFx0JGxvZy5pbmZvKCdldmVudCBzYXZlZCcpO1xuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2Vycm9yISAnICsgZXJyb3IpO1xuXHRcdH0pO1xuXHR9XG5cblx0Ly92aWV3IE1ldGhvZFxuXHR2bS5zZXRUZW1wVGltZSA9IGZ1bmN0aW9uKGVuZHBvaW50KSB7XG5cdFx0aWYoZW5kcG9pbnQgPT0gJ3N0YXJ0Jykgdm0udGVtcERhdGVUaW1lLnN0YXJ0ID0gbmV3IERhdGUoKTtcblx0XHRpZihlbmRwb2ludCA9PSAnZW5kJykgdm0udGVtcERhdGVUaW1lLmVuZCA9IG5ldyBEYXRlKCk7XG5cdH1cblxuXHR2bS51bml4VGltZVRvRGF0ZVRpbWUgPSBmdW5jdGlvbiAodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fTtcblxuXHR2bS5kYXRlVGltZVRvVW5peFRpbWUgPSBmdW5jdGlvbiAoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH07XG5cblx0dm0uc3VibWl0ID0gZnVuY3Rpb24oKSB7XG5cdFx0JGxvZy5pbmZvKCdzdWJtaXR0aW5nIHRoZSBmb3JtIG5vdyEnKTtcblx0fVxuXG5cdHZtLmJhY2tUb1VzZXJFdmVudHMgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9jYXRpb24ucGF0aCgnL3VzZXJFdmVudHMvJyArICRyb3V0ZVBhcmFtcy51aWQgKyAnLycgKyAkcm91dGVQYXJhbXMudG9rZW4pO1xuXHR9XG5cblx0dm0uZXZlbnRSZWRpcmVjdCA9IGZ1bmN0aW9uKHBhdGgsIGV2ZW50SUQpIHtcblx0XHR2YXIgZnVsbFBhdGggPSBwYXRoICsgJy8nICsgJHJvdXRlUGFyYW1zLnVpZCArICcvJyArICRyb3V0ZVBhcmFtcy50b2tlbjtcblx0XHQvL3JlZGlyZWN0XG5cdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyB0bzogJyArIGZ1bGxQYXRoKTtcblx0XHQkbG9jYXRpb24ucGF0aChmdWxsUGF0aCk7XG5cdH1cblxuXHR2bS5jaGFuZ2VTZWN0aW9uID0gZnVuY3Rpb24odGFyZ2V0U2VjdGlvbikge1xuXHRcdCRsb2cuaW5mbygnYXJlIHdlIGhlcmUnKTtcblx0XHRmb3IoaSA9IDE7IGkgPD0zOyBpKyspIHtcblx0XHRcdGlmKGk9PXRhcmdldFNlY3Rpb24pIHtcblx0XHRcdFx0dm0ubWFuYWdlU2VjdGlvbnNbaV0uYWN0aXZlID0gdHJ1ZTtcblx0XHRcdFx0dm0ubWFuYWdlU2VjdGlvbnNbaV0uc3R5bGVbJ2JhY2tncm91bmQtY29sb3InXSA9J3llbGxvdyc7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLnN0eWxlWydjb2xvciddID0nYmxhY2snO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0ubWFuYWdlU2VjdGlvbnNbaV0uYWN0aXZlID0gZmFsc2U7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLnN0eWxlWydiYWNrZ3JvdW5kLWNvbG9yJ10gPSdncmF5Jztcblx0XHRcdFx0dm0ubWFuYWdlU2VjdGlvbnNbaV0uc3R5bGVbJ2NvbG9yJ10gPSd3aGl0ZSc7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0dm0uc2F2ZUV2ZW50VGltZSA9IGZ1bmN0aW9uKGRhdGVUaW1lLCB0YXJnZXQpIHtcblx0XHQvL2lmIHRoaXMgZXZlbnQgZGlkbid0IGhhdmUgYSBzdGFydCB0aW1lLCBjcmVhdGUgaXRcblx0XHRpZighdm0uZXZlbnQuZXZlbnRUaW1lcykgeyBcblx0XHRcdHZtLmV2ZW50LmV2ZW50VGltZXMgPSB7c3RhcnQ6ICcnLCBlbmQ6ICcnfTtcblx0XHRcdHZtLmV2ZW50LmV2ZW50VGltZXMuc3RhcnQgPSB2bS5kYXRlVGltZVRvVW5peFRpbWUodm0udGVtcERhdGVUaW1lLnN0YXJ0KTsgXG5cdFx0XHR2bS5ldmVudC5ldmVudFRpbWVzLmVuZCA9IHZtLmRhdGVUaW1lVG9Vbml4VGltZSh2bS50ZW1wRGF0ZVRpbWUuZW5kKTtcblx0XHR9XG5cblx0XHRpZigodm0udGVtcERhdGVUaW1lLmVuZCA8IHZtLnRlbXBEYXRlVGltZS5zdGFydCkgJiYgdGFyZ2V0ID09ICdzdGFydCcpIHZtLnRlbXBEYXRlVGltZS5lbmQgPSB2bS50ZW1wRGF0ZVRpbWUuc3RhcnQ7XG5cdFx0aWYodGFyZ2V0ID09ICdzdGFydCcpIHZtLmV2ZW50LmV2ZW50VGltZXMuc3RhcnQgPSB2bS5kYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpO1xuXHRcdGlmKHRhcmdldCA9PSAnZW5kJykgdm0uZXZlbnQuZXZlbnRUaW1lcy5lbmQgPSB2bS5kYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpO1xuXHR9XG5cblx0dm0uZ3Vlc3RzQXJlSW52aXRlZCA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHZtLmV2ZW50Lmd1ZXN0TGlzdCkgcmV0dXJuIHRydWU7XG5cdFx0ZWxzZSByZXR1cm4gZmFsc2U7XG5cdH1cblxuXHR2bS52YWxpZGF0ZUd1ZXN0RW1haWwgPSBmdW5jdGlvbigpIHtcblx0XHQvL2lmIHRoZXJlIGlzIGFuIGVtYWlsIGFkZHJlc3Ncblx0XHRpZih2bS5uZXdHdWVzdC5lbWFpbC5hZGRyZXNzKSB7XG5cdFx0XHQvL2NoZWNrIHZhbGlkaXR5XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKD86XFwuW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKykqQCg/OlthLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cXC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cIiwgXCJcIik7XG5cblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2bS5uZXdHdWVzdC5lbWFpbC5hZGRyZXNzKSkge1xuXHRcdFx0XHR2bS5uZXdHdWVzdC5lbWFpbC52YWxpZCA9IHRydWU7XG5cdFx0XHRcdHZtLm5ld0d1ZXN0LmVtYWlsLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0ubmV3R3Vlc3QuZW1haWwudmFsaWQgPSBmYWxzZTtcblx0XHRcdFx0dm0ubmV3R3Vlc3QuZW1haWwuc3R5bGUgPSB7Y29sb3I6Jyd9O1xuXHRcdFx0fVx0XHRcdFxuXHRcdH1cblx0fVxuXG5cdHZtLmlzU2VjdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24oKSB7XG5cdFx0Zm9yKGk9MDtpPDg7aSsrKSB7XG5cdFx0XHQkbG9nLmluZm8odm0ucmVxdWlyZWRJbnB1dHNbaV0pO1xuXHRcdH1cblx0fVxuXG5cdHZtLnNhdmVBbmRBZHZhbmNlID0gZnVuY3Rpb24oKSB7XG5cdFx0dm0uZXZlbnQuJHNhdmUoKS50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdFx0JGxvZy5pbmZvKCdldmVudCBzYXZlZCcpO1xuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2Vycm9yISAnICsgZXJyb3IpO1xuXHRcdH0pO1xuXG5cdFx0Ly9jaGVjayBmb3IgY29tcGxldGVuZXNcblx0XHR2bS5pc1NlY3Rpb25Db21wbGV0ZSgpO1xuXG5cdFx0aWYodm0ubWFuYWdlU2VjdGlvbnNbMV0uY29tcGxldGUgPT0gdHJ1ZSAmJiB2bS5tYW5hZ2VTZWN0aW9uc1syXS5jb21wbGV0ZSA9PSB0cnVlICYmIHZtLm1hbmFnZVNlY3Rpb25zWzNdLmNvbXBsZXRlID09IHRydWUpIHtcblx0XHRcdHZtLmV2ZW50UmVkaXJlY3QoJy91c2VyRXZlbnRzJywgJHJvdXRlUGFyYW1zLnVpZCk7XG5cdFx0fSBlbHNlIGlmICh2bS5tYW5hZ2VTZWN0aW9uc1sxXS5hY3RpdmUpIHZtLmNoYW5nZVNlY3Rpb24oMik7XG5cdFx0ZWxzZSBpZiAodm0ubWFuYWdlU2VjdGlvbnNbMl0uYWN0aXZlKSB2bS5jaGFuZ2VTZWN0aW9uKDMpO1xuXHRcdGVsc2UgaWYgKHZtLm1hbmFnZVNlY3Rpb25zWzNdLmFjdGl2ZSkgdm0uY2hhbmdlU2VjdGlvbigxKTtcblx0fVxuXG5cdHZtLmFkZEd1ZXN0VG9Ib3N0c0xpc3QgPSBmdW5jdGlvbigpIHtcblx0XHQvL2RlY2xhcmUgYW5kIGluaXRpYWxpemUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIHVzZXJLZXkgPSB1dGY4X3RvX2I2NCh2bS5uZXdHdWVzdC5lbWFpbC5hZGRyZXNzKTtcblxuXHRcdC8vaWYgZW1haWwgaXMgdmFsaWQgYW5kIG5hbWUgZXhpc3RzXG5cdFx0aWYgKHZtLm5ld0d1ZXN0Lm5hbWUgJiYgdm0ubmV3R3Vlc3QuZW1haWwudmFsaWQpIHtcblx0XHRcdC8vaXMgdGhlcmUgYSBndWVzdCBsaXN0IGFscmVhZHk/IElmIG5vdCBjcmVhdGUgb25lXG5cdFx0XHRpZighdm0uZXZlbnQuZ3Vlc3RMaXN0KSB7XG5cdFx0XHRcdHZtLmV2ZW50Lmd1ZXN0TGlzdCA9IHt9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9pZiBzbyBpcyB0aGlzIHBlcnNvbiBhbHJlYWR5IG9uIHRoZSBsaXN0P1xuXHRcdFx0XHR2YXIgaSA9MDtcblx0XHRcdFx0d2hpbGUodm0uZXZlbnQuZ3Vlc3RMaXN0W2ldKSB7XG5cdFx0XHRcdFx0aWYodm0uZXZlbnQuZ3Vlc3RMaXN0W2ldLmVtYWlsID09IGI2NF90b191dGY4KHVzZXJLZXkpKSB7XG5cdFx0XHRcdFx0XHQkbG9nLmluZm8oJ1RoaXMgZ3Vlc3QgaXMgYWxyZWFkeSBvbiB0aGUgbGlzdCcpO1xuXHRcdFx0XHRcdFx0Y2xlYW5OZXdHdWVzdFZhcmlhYmxlKCk7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGkrKztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvL2lzIHRoaXMgZ3Vlc3QgYSByZWdpc3RlcmVkIHVzZXI/XG5cdFx0XHRpZihyZWdpc3RlcmVkVXNlcnNbdXNlcktleV0pIHtcblx0XHRcdFx0Ly9pcyB0aGUgcmVnaXN0ZXJlZCB1c2VyIHRoZSBob3N0P1xuXHRcdFx0XHRpZihyZWdpc3RlcmVkVXNlcnNbdXNlcktleV0gPT0gJHJvdXRlUGFyYW1zLnVpZCkge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygndHJpZWQgdG8gcmVnaXN0ZXIgdGhlIGhvc3QnKTtcblx0XHRcdFx0XHRjbGVhbk5ld0d1ZXN0VmFyaWFibGUoKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0Ly9hZGQgdGhlbSB0byB0aGUgYXBwcm9wcmlhdGUgcmVnaXN0ZXJlZCB1c2VycycgbGlzdCBvZiBldmVudCBpbnZpdGVzXG5cdFx0XHRcdFx0aW52aXRlQVJlZ2lzdGVyZWRVc2VyKHJlZ2lzdGVyZWRVc2Vyc1t1c2VyS2V5XSk7XG5cblx0XHRcdFx0XHQvL2FkZCB0aGUgZ3Vlc3QgdG8gdGhlIGxpc3Rcblx0XHRcdFx0XHR2bS5ldmVudC5ndWVzdExpc3RbcmVnaXN0ZXJlZFVzZXJzW3VzZXJLZXldXSA9IHtcblx0XHRcdFx0XHRcdGF0dGVuZGluZzogZmFsc2UsIFxuXHRcdFx0XHRcdFx0c3RhdHVzOidwZW5kaW5nJywgXG5cdFx0XHRcdFx0XHRuYW1lOiB2bS5uZXdHdWVzdC5uYW1lLCBcblx0XHRcdFx0XHRcdGVtYWlsOnZtLm5ld0d1ZXN0LmVtYWlsLmFkZHJlc3MsXG5cdFx0XHRcdFx0fTtcdFx0XHRcdFx0XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vYWRkIHRoZSBpbnZpdGUgdG8gdGhlIG5vbi1yZWdpc3RlcmVkIHVzZXJzIGxpc3Qgb2YgZXZlbnQgaW52aXRlc1xuXHRcdFx0XHRpbnZpdGVBblVucmVnaXN0ZXJlZFVzZXIodXNlcktleSk7XG5cblx0XHRcdFx0Ly9hZGQgdGhlIGd1ZXN0IHRvIHRoZSBsaXN0XG5cdFx0XHRcdHZtLmV2ZW50Lmd1ZXN0TGlzdFt1c2VyS2V5XSA9IHtcblx0XHRcdFx0XHRcdGF0dGVuZGluZzogZmFsc2UsIFxuXHRcdFx0XHRcdFx0c3RhdHVzOidwZW5kaW5nJywgXG5cdFx0XHRcdFx0XHRuYW1lOiB2bS5uZXdHdWVzdC5uYW1lLCBcblx0XHRcdFx0XHRcdGVtYWlsOnZtLm5ld0d1ZXN0LmVtYWlsLmFkZHJlc3MsXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cblxuXHRcdFx0Ly9zYXZlIHRoZSBldmVudFxuXHRcdFx0dm0uc2F2ZUV2ZW50KCk7XG5cdFx0XHQvL2NsZWFyIHRoZSB0ZW1wIHZhbHVlc1xuXHRcdFx0Y2xlYW5OZXdHdWVzdFZhcmlhYmxlKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCRsb2cuaW5mbygneW91IGRpZG5cXCd0IGVudGVyIGEgbmFtZSBhbmQgb3IgZW1haWwnKTtcblx0XHR9XG5cdH1cblxuXHR2bS5ndWVzdFdpbGxBdHRlbmQgPSBmdW5jdGlvbihyZXNwb25zZSkge1xuXHRcdHZhciBjdXJyZW50VXNlciA9IHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS5jaGlsZCgnZXZlbnRzJyk7XG5cdFx0dmFyIHRvdGFsUGVuZGluZ0ludml0YXRpb25zID0gMDtcblx0XHR2YXIgcmVtb3ZlQXR0ZW5kaW5nVXBkYXRlZCA9IGZhbHNlO1xuXHRcdFxuXHRcdC8vY2hhbmdlIGF0dGVuZGluZyB0byB0cnVlIGluIGhvc3QncyBndWVzdExpc3Rcblx0XHR2bS5ldmVudC5ndWVzdExpc3RbJHJvdXRlUGFyYW1zLnVpZF0uYXR0ZW5kaW5nID0gcmVzcG9uc2U7XG5cdFx0Ly9jaGFuZ2Ugc3RhdHVzIHRvICdhdHRlbmRpbmcnIGluIGhvc3QncyBndWVzdExpc3Rcblx0XHR2bS5ldmVudC5ndWVzdExpc3RbJHJvdXRlUGFyYW1zLnVpZF0uc3RhdHVzID0gJ2F0dGVuZGluZyc7XG5cdFx0XG5cdFx0Ly9nZXQgdGhlIGludml0YXRpb24gZGV0YWlsc1xuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdwZW5kaW5nJykub24oJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhbGJlXG5cdFx0XHR2YXIgaW52aXRhdGlvbnMgPSBzbmFwc2hvdC52YWwoKTtcblx0XHRcdC8vbG9nIHN0YXJ0aW5nIHZhbHVlc1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zKTtcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9uc1skcm91dGVQYXJhbXMuaG9zdElkXSk7XG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnNbJHJvdXRlUGFyYW1zLmhvc3RJZF1bJHJvdXRlUGFyYW1zLmV2ZW50SWRdKTtcblxuXHRcdFx0dmFyIHRoaXNJbnZpdGF0aW9uID0gaW52aXRhdGlvbnNbJHJvdXRlUGFyYW1zLmhvc3RJZF1bJHJvdXRlUGFyYW1zLmV2ZW50SWRdO1xuXHRcdFx0XG5cdFx0XHQkbG9nLmluZm8odGhpc0ludml0YXRpb24pO1xuXHRcdFx0XG5cdFx0XHQvL2NoZWNrICMgb2YgaW5pdmlhdGlvbnNcblx0XHRcdGZvcihpbnZpdGF0aW9uIGluIGludml0YXRpb25zKSB7XG5cdFx0XHRcdHRvdGFsUGVuZGluZ0ludml0YXRpb25zKys7XG5cdFx0XHR9XG5cblx0XHRcdC8vcmVwb3J0ICMgb2YgaW52aXRhdGlvbnNcblx0XHRcdCRsb2cuaW5mbyhcInRvdGFsIGF0dGVuZGluZzogXCIgKyB0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucyk7XG5cdFx0XHRcblx0XHRcdC8vYWRkIHRoZSBldmVudCB0byB0aGUgZ3Vlc3QncyBhdHRlbmRpbmcgbGlzdFxuXHRcdFx0aWYocmVzcG9uc2UpIGN1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5jaGlsZCgkcm91dGVQYXJhbXMuaG9zdElkKS5jaGlsZCgkcm91dGVQYXJhbXMuZXZlbnRJZCkuc2V0KHRoaXNJbnZpdGF0aW9uLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKGVycm9yKTtcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cblx0XHQvL2lmIHRoZSB1cGRhdGVkIHBsYWNlaG9sZGVyIHdhcyBvbiB0aGUgYXR0ZW5kaW5nIGxpc3QgcmVtb3ZlIGl0XG5cdFx0Y3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLm9uKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdFx0dmFyIGF0dGVuZGluZ0xpc3QgPSBzbmFwc2hvdC52YWwoKTtcblx0XHRcdFxuXHRcdFx0Ly9yZXBvcnQgYWN0aW9uc1xuXHRcdFx0JGxvZy5pbmZvKCd0aGlzIGlzIHRoZSBhdHRlbmRpbmcgbGlzdCcpO1xuXHRcdFx0JGxvZy5pbmZvKGF0dGVuZGluZ0xpc3QpO1xuXHRcdFx0XG5cdFx0XHQvL3Rocm93IGZsYWcgZm9yIGxhdGVyXG5cdFx0XHRpZihhdHRlbmRpbmdMaXN0LnVwZGF0ZWQpIHJlbW92ZUF0dGVuZGluZ1VwZGF0ZWQgPSB0cnVlO1xuXG5cdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdC8vaWYgdGhlciB3YXMgYW4gZXJyb3IgcmVwb3J0IGl0XG5cdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKGVycm9yKTtcblx0XHR9KTtcblxuXHRcdC8vaWYgdGhpcyBpcyB0aGUgbGFzdCBwZW5kaW5nIGV2ZW50IG9uIHRoZSBndWVzdCdzIHBlbmRpbmcgbGlzdCwgYWRkIHRoZSB1cGRhdGVkIHBsYWNlaG9sZGVyXG5cdFx0aWYodG90YWxQZW5kaW5nSW52aXRhdGlvbnMgPCAyKSB7XG5cdFx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdFx0dmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcblxuXHRcdFx0Ly9yZXBsYWNlIHdpdGggdXBkYXRlZCBmaWVsZFxuXHRcdFx0Y3VycmVudFVzZXIuY2hpbGQoJ3BlbmRpbmcnKS51cGRhdGUoe1xuXHRcdFx0XHR1cGRhdGVkOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKGVycm9yKTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdC8vcmVtb3ZlIHRoZSBldmVudCBmcm9tIHRoZSBndWVzdCdzIHBlbmRpbmcgbGlzdFxuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdwZW5kaW5nJykuY2hpbGQoJHJvdXRlUGFyYW1zLmhvc3RJZCkucmVtb3ZlKCk7XG5cblx0XHQvL2lmIHRoZXJlIHdhcyBhbiB1cGRhdGVkIGZpZWxkIGluIGF0dGVuZGluZywgcmVtb3ZlIGl0XG5cdFx0aWYocmVtb3ZlQXR0ZW5kaW5nVXBkYXRlZCkge1xuXHRcdFx0JGxvZy5pbmZvKCdyZW1vdmluZyB0aGUgdXBkYXRlZCBwbGFjZWhvbGRlcicpO1xuXHRcdFx0Ly9jdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykuY2hpbGQoJ3VwZGF0ZWQnKS5yZW1vdmUoKTtcblx0XHR9XG5cblx0XHQvL3NhdmUgY2hhbmdlc1xuXHRcdHZtLmV2ZW50LiRzYXZlKCk7XG5cdH1cblxuXHR2bS51cGRhdGVVcGRhdGVkUGFyYW0gPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgY3VycmVudFVzZXIgPSByZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJ2V2ZW50cycpO1xuXHRcdFxuXHRcdCRsb2cuaW5mbygndXBkYXRpbmcgdGhlIHBhcmFtJyk7XG5cdFx0Y3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLm9uKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHQkbG9nLmluZm8oc25hcHNob3QudmFsKCkpO1xuXHRcdH0pO1xuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5jaGlsZCgndXBkYXRlZCcpLnJlbW92ZSgpO1xuXHR9XG5cblx0dm0uYWRkSW52aXRhdGlvblRvQXR0ZW5kaW5nID0gZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHR2YXIgY3VycmVudFVzZXIgPSByZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJ2V2ZW50cycpO1xuXHRcdHZhciB0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucyA9IDA7XG5cblx0XHQvL2dldCB0aGUgaW52aXRhdGlvbiBkZXRhaWxzXG5cdFx0Y3VycmVudFVzZXIuY2hpbGQoJ3BlbmRpbmcnKS5vbigndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFsYmVcblx0XHRcdHZhciBpbnZpdGF0aW9ucyA9IHNuYXBzaG90LnZhbCgpO1xuXHRcdFx0dmFyIHRoaXNJbnZpdGF0aW9uID0gaW52aXRhdGlvbnNbJHJvdXRlUGFyYW1zLmhvc3RJZF1bJHJvdXRlUGFyYW1zLmV2ZW50SWRdO1xuXHRcdFx0XG5cdFx0XHQvL2xvZyBzdGFydGluZyB2YWx1ZXNcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9ucyk7XG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnNbJHJvdXRlUGFyYW1zLmhvc3RJZF0pO1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdWyRyb3V0ZVBhcmFtcy5ldmVudElkXSk7XG5cdFx0XHRcblx0XHRcdC8vY2hlY2sgIyBvZiBpbml2aWF0aW9uc1xuXHRcdFx0Zm9yKGludml0YXRpb24gaW4gaW52aXRhdGlvbnMpIHtcblx0XHRcdFx0dG90YWxQZW5kaW5nSW52aXRhdGlvbnMrKztcblx0XHRcdH1cblxuXHRcdFx0Ly9yZXBvcnQgIyBvZiBpbnZpdGF0aW9uc1xuXHRcdFx0JGxvZy5pbmZvKFwidG90YWwgcGVuZGluZyBpbnZpdGF0aW9uczogXCIgKyB0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucyk7XG5cdFx0XHRcblx0XHRcdCRsb2cuaW5mbyhyZXNwb25zZSk7XG5cdFx0XHQvL2FkZCB0aGUgZXZlbnQgdG8gdGhlIGd1ZXN0J3MgYXR0ZW5kaW5nIGxpc3Rcblx0XHRcdGlmKHJlc3BvbnNlKSBjdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykuY2hpbGQoJHJvdXRlUGFyYW1zLmhvc3RJZCkuY2hpbGQoJHJvdXRlUGFyYW1zLmV2ZW50SWQpLnNldCh0aGlzSW52aXRhdGlvbiwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbyhlcnJvcik7XG5cdFx0XHR9KTtcblxuXG5cblx0XHR9KTtcblx0fVxuXG5cdC8vc3RhcnQgcnVuXG5cdGluaXQoKTtcbn1cbiIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ0d1ZXN0RXZlbnRDb250cm9sbGVyJywgR3Vlc3RFdmVudENvbnRyb2xsZXIpO1xuXG5HdWVzdEV2ZW50Q29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gR3Vlc3RFdmVudENvbnRyb2xsZXIoJGxvZykge1xuXHQkbG9nLmluZm8oJ2ludG8gdGhlIEd1ZXN0RXZlbnRDb250cm9sbGVyJyk7XG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignSG9zdEV2ZW50Q29udHJvbGxlcicsIEhvc3RFdmVudENvbnRyb2xsZXIpO1xuXG5Ib3N0RXZlbnRDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJywgJyRyb3V0ZVBhcmFtcycsICckZG9jdW1lbnQnLCAndXNlckRhdGEnLCAndHJhZmZpY1ZhbGV0JywgJ3ZhbGlkYXRpb24nXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBIb3N0RXZlbnRDb250cm9sbGVyKCRzY29wZSwgJGxvZywgJHJvdXRlUGFyYW1zLCAkZG9jdW1lbnQsIHVzZXJEYXRhLCB0cmFmZmljVmFsZXQsIHZhbGlkYXRpb24pIHtcblx0dmFyIHZtID0gdGhpcztcblx0XG5cdC8vbG9jYWwgdmFyaWFibGVzXG5cdHZhciBob3N0ZWRFdmVudFNoZXJwYSA9IHRyYWZmaWNWYWxldDtcblx0dmFyIHRoaXNFdmVudE1hbmFnZXIgPSB1c2VyRGF0YTtcblx0dmFyIHJlcXVpcm5tZW50c0ZhY3RvcnkgPSB2YWxpZGF0aW9uO1xuXG5cdC8vbG9jYWwgdmFyaWFibGVzXG5cdHZhciBwZXJjZW50Q29tcGxldGUgPSAwO1xuXG5cdC8vdmlldyBtb2RlbCB2YXJpYWJsZXNcblx0dm0uYWN0aXZlU2VjdGlvbiA9IDE7XG5cdHZtLnRlbXBUaW1lID0ge3N0YXJ0OiAnJywgZW5kOiAnJywgZHVyYXRpb246Jyd9O1xuXHR2bS5wcm9ncmVzc0JhciA9IHtcblx0XHRjb21wbGV0ZTogdm0ucGVyY2VudENvbXBsZXRlLFxuXHRcdHN0eWxlOiB7XG5cdFx0XHR3aWR0aDogKHZtLnBlcmNlbnRDb21wbGV0ZSArICclJylcblx0XHR9LFxuXHRcdG1lc3NhZ2U6ICh2bS5wZXJjZW50Q29tcGxldGUgKyAnJScpXG5cdH1cblx0dm0uYWN0aW9uQnRuID0ge1xuXHRcdGRpdjoge1xuXHRcdFx0Y2xhc3M6IHtcblx0XHRcdFx0J2NvbC14cy02JzogdHJ1ZSxcblx0XHRcdFx0J2NvbC1zbS02JzogdHJ1ZSxcblx0XHRcdH1cblx0XHR9LFxuXHRcdGJ0bjoge1xuXHRcdFx0Y2xhc3M6IHtcblx0XHRcdFx0J2J0bic6IHRydWUsXG5cdFx0XHRcdCdidG4tc3VjY2Vzcyc6IGZhbHNlLFxuXHRcdFx0XHQnYnRuLXdhcm5pbmcnOiB0cnVlLFxuXHRcdFx0XHQncHVsbC1yaWdodCc6IHRydWUsXG5cdFx0XHR9LFxuXHRcdFx0bWVzc2FnZTogJ0FkZCBJbmZvJ1xuXHRcdH1cblx0fVxuXHR2bS50ZW1wRXZlbnQgPSB7fTtcblx0dm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlID0gcmVxdWlybm1lbnRzRmFjdG9yeS5nZW5lcmF0ZUV2ZW50UmVxdWlybm1lbnRzKCk7XG5cblx0Ly9sb2NhbCBtZXRob2RzXG5cdGZ1bmN0aW9uIHVuaXhUaW1lVG9EYXRlVGltZSh1bml4VGltZSkge1xuXHRcdHJldHVybiBuZXcgRGF0ZShwYXJzZUludCh1bml4VGltZSkpO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIGRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fTtcblxuXHRmdW5jdGlvbiBjYWxjdWxhdGVEdXJhdGlvbihzdGFydCwgZW5kKSB7XG5cdFx0cmV0dXJuIChkYXRlVGltZVRvVW5peFRpbWUoZW5kKSAtIGRhdGVUaW1lVG9Vbml4VGltZShzdGFydCkpIC8gKDYwKjEwMDApO1xuXHR9XG5cblx0ZnVuY3Rpb24gY2hhbmdlU2F2ZUJ0bihkaXJlY3Rpb24pIHtcblx0XHRpZihkaXJlY3Rpb24gPT0gJ29wZW4nKSB7XG5cdFx0XHR2bS5hY3Rpb25CdG4uYnRuLmNsYXNzWydidG4tc3VjY2VzcyddID0gdHJ1ZTtcblx0XHRcdHZtLmFjdGlvbkJ0bi5idG4uY2xhc3NbJ2J0bi13YXJuaW5nJ10gPSBmYWxzZTtcblx0XHRcdHZtLmFjdGlvbkJ0bi5idG4ubWVzc2FnZSA9ICdTYXZlIEV2ZW50Jztcblx0XHR9IGVsc2UgaWYoZGlyZWN0aW9uID09ICdjbG9zZScpIHtcblx0XHRcdHZtLmFjdGlvbkJ0bi5idG4uY2xhc3NbJ2J0bi1zdWNjZXNzJ10gPSBmYWxzZTtcblx0XHRcdHZtLmFjdGlvbkJ0bi5idG4uY2xhc3NbJ2J0bi13YXJuaW5nJ10gPSB0cnVlO1xuXHRcdFx0dm0uYWN0aW9uQnRuLmJ0bi5tZXNzYWdlID0gJ0FkZCBJbmZvJztcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiB1cGRhdGVQcm9ncmVzc0Jhcih1bml0cykge1xuXHRcdHBlcmNlbnRDb21wbGV0ZSArPSB1bml0cztcblx0XHR2bS5wcm9ncmVzc0Jhci5jb21wbGV0ZSA9IHBlcmNlbnRDb21wbGV0ZTtcblx0XHR2bS5wcm9ncmVzc0Jhci5zdHlsZS53aWR0aCA9IChwZXJjZW50Q29tcGxldGUgKyAnJScpO1xuXHRcdHZtLnByb2dyZXNzQmFyLm1lc3NhZ2UgPSAocGVyY2VudENvbXBsZXRlICsgJyUnKTtcblx0XHRpZihwZXJjZW50Q29tcGxldGUgPiA5OSkgY2hhbmdlU2F2ZUJ0bignb3BlbicpO1x0XG5cdFx0aWYocGVyY2VudENvbXBsZXRlIDwgOTkpIGNoYW5nZVNhdmVCdG4oJ2Nsb3NlJyk7XHRcdFxuXHR9XG5cblx0ZnVuY3Rpb24gaW5pdEV2ZW50VGltZXMoKSB7XG5cdFx0Ly9idWlsZCBuZXcgdGVtcCB0aW1lc1xuXHRcdHZhciBub3cgPSBuZXcgRGF0ZSgpO1xuXG5cdFx0Ly9yb3VuZCB0byB0aGUgbmVhcmVzdCBob3VyLCBjdXQgb2ZmIGFueXRoaW5nIHNtYWxsZXJcblx0XHRub3cuc2V0SG91cnMobm93LmdldEhvdXJzKCkgKyBNYXRoLnJvdW5kKG5vdy5nZXRNaW51dGVzKCkvNjApKTtcblx0XHRub3cuc2V0TWludXRlcygwKTtcblx0XHRub3cuc2V0U2Vjb25kcygwKTtcblx0XHRub3cuc2V0TWlsbGlzZWNvbmRzKDApO1xuXG5cdFx0dm0udGVtcFRpbWUuc3RhcnQgPSBub3c7XG5cdFx0dm0udGVtcFRpbWUuZW5kID0gbm93O1xuXG5cdFx0dm0udGVtcFRpbWUuZHVyYXRpb24gPSBjYWxjdWxhdGVEdXJhdGlvbih2bS50ZW1wVGltZS5zdGFydCwgdm0udGVtcFRpbWUuZW5kKTtcblx0XHRcblx0fVxuXG5cdGZ1bmN0aW9uIHVwZGF0ZVRlbXBUaW1lRnJvbU1vZGVsKCkge1xuXHRcdC8vaWYgc3RhcnQgdGltZXMgYXJlIGF2YWlsYWJsZVxuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZtLnRlbXBFdmVudC5ldmVudFRpbWVzLnN0YXJ0KSkge1xuXHRcdFx0Ly9zZXQgdGhlIHRlbXBUaW1lIG1vZGVsXG5cdFx0XHR2bS50ZW1wVGltZS5zdGFydCA9IHVuaXhUaW1lVG9EYXRlVGltZSh2bS50ZW1wRXZlbnQuZXZlbnRUaW1lcy5zdGFydCk7XG5cdFx0XHR2bS50ZW1wVGltZS5lbmQgPSB1bml4VGltZVRvRGF0ZVRpbWUodm0udGVtcEV2ZW50LmV2ZW50VGltZXMuZW5kKTtcblx0XHR9XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGxvYWRFeGlzdGluZ1ZhbHVlcygpIHtcblxuXHRcdC8vbG9vcCB0aHJvdWdoIGVhY2ggZXZlbnQgb2JqZWN0LCBpZiBpdCBleGlzdHMgY3JlZGl0IHRoZSBwcm9ncmVzcyBiYXJcblx0XHRPYmplY3Qua2V5cyh2bS50ZW1wRXZlbnQpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG5cdFx0XHQkbG9nLmluZm8odm0udGVtcEV2ZW50W2tleV0pO1xuXHRcdFx0Ly9cblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gaW5pdCgpIHtcblx0XHQvL2lmIHRoZXJlIGlzIGFuIGFjdGl2ZSBldmVudCwgbG9hZCBpdFxuXHRcdGlmKHRoaXNFdmVudE1hbmFnZXIudGhlcmVJc0FuQWN0aXZlRXZlbnQoKSkge1xuXHRcdFx0XG5cdFx0XHR2YXIgYWN0aXZlUGFja2FnZSA9IHRoaXNFdmVudE1hbmFnZXIuZ2V0QWN0aXZlRXZlbnQoKTtcblxuXHRcdFx0dm0ucHJvZ3Jlc3NCYXIgPSBhY3RpdmVQYWNrYWdlLnByb2dyZXNzQmFyO1xuXHRcdFx0cGVyY2VudENvbXBsZXRlID0gYWN0aXZlUGFja2FnZS5wZXJjZW50Q29tcGxldGVcblx0XHRcdHZtLnRlbXBFdmVudCA9IGFjdGl2ZVBhY2thZ2UuZXZlbnQ7XG5cdFx0XHR2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGUgPSBhY3RpdmVQYWNrYWdlLnJlcXVpcmVkRmllbGRzO1xuXG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vbG9hZCBldmVudCBkZXRhaWxzXG5cdFx0XHR0aGlzRXZlbnRNYW5hZ2VyLmxvYWRBbkV2ZW50UHJvZ3Jlc3NpdmVseSgkcm91dGVQYXJhbXMudWlkLCAkcm91dGVQYXJhbXMuZXZlbnRJZClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKHRoZUV2ZW50KSB7XG5cdFx0XHRcdC8vYWRkIHRoaXMgZXZlbnQgbW9kZWwgdG8gdGhlIHZpZXcgbW9kZWwgZXZlbnRcblx0XHRcdFx0dm0udGVtcEV2ZW50ID0gdGhlRXZlbnQ7XG5cblx0XHRcdFx0Ly91cGRhdGUgdGVtcFRpbWVcblx0XHRcdFx0dXBkYXRlVGVtcFRpbWVGcm9tTW9kZWwoKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0JGxvZygndGhlIGVycm9yIGlzOiAnICsgZXJyb3IpO1xuXHRcdFx0fSlcblx0XHR9XG5cblx0XHQvL2xvYWQgc3BlY2lmaWVkIHNlY3Rpb25cblx0XHR2bS5hY3RpdmVTZWN0aW9uID0gcGFyc2VJbnQoJHJvdXRlUGFyYW1zLnNlY3Rpb24pO1xuXHRcdFxuXHRcdC8vc2V0IHRlbXBUaW1lc1xuXHRcdGluaXRFdmVudFRpbWVzKCk7XG5cblx0XHQvL3NldCB0aGUgcHJvZ3Jlc3MgYmFyIGZvciBleGlzdGluZyB2YWx1ZXNcblx0XHRsb2FkRXhpc3RpbmdWYWx1ZXMoKTtcblx0fVxuXG5cdC8vdmlldyBtb2RlbCBtZXRob2RzXG5cdHZtLmZvcm1hdER1cmF0aW9uID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9jYWxjIGR1cmF0aW9uXG5cdFx0dm0udGVtcFRpbWUuZHVyYXRpb24gPSBjYWxjdWxhdGVEdXJhdGlvbih2bS50ZW1wVGltZS5zdGFydCwgdm0udGVtcFRpbWUuZW5kKTtcblx0XHRcblx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBob3VycyA9IE1hdGguZmxvb3Iodm0udGVtcFRpbWUuZHVyYXRpb24vKDYwKSk7XG5cdFx0dmFyIG1pbiA9IHZtLnRlbXBUaW1lLmR1cmF0aW9uICUgNjA7XG5cdFx0dmFyIGZyYWN0aW9uID0gKE1hdGgucm91bmQobWluLzE1KS80KTtcblxuXHRcdHJldHVybiAoaG91cnMrZnJhY3Rpb24pICsgJyBoJztcblx0fVxuXG5cdHZtLnZhbGlkYXRlVGltZSA9IGZ1bmN0aW9uKHN0YXJ0T3JFbmQpIHtcdFxuXG5cdFx0aWYodm0udGVtcFRpbWUuZHVyYXRpb24gPiAyNCkgdm0uc2V0dGluZ1RlbXBTdGFydCgpO1xuXG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgdGltZXMgPSB7XG5cdFx0XHQnZXZlbnRTdGFydCc6IHZtLnRlbXBUaW1lLnN0YXJ0LFxuXHRcdFx0J2V2ZW50RW5kJzogdm0udGVtcFRpbWUuZW5kXG5cdFx0fTtcblxuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHRpbWVzW3N0YXJ0T3JFbmRdKSAmJiB0aW1lc1tzdGFydE9yRW5kXSAhPSAnJyAmJiB2bS50ZW1wVGltZS5kdXJhdGlvbiA+IDApIHtcblx0XHRcdGlmKHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtzdGFydE9yRW5kXS5jb21wbGV0ZWQgPT0gZmFsc2UpIHVwZGF0ZVByb2dyZXNzQmFyKDEwKTtcblx0XHRcdHZtLnRlbXBFdmVudC5ldmVudFRpbWVzLnN0YXJ0ID0gZGF0ZVRpbWVUb1VuaXhUaW1lKHZtLnRlbXBUaW1lLnN0YXJ0KTtcblx0XHRcdHZtLnRlbXBFdmVudC5ldmVudFRpbWVzLmVuZCA9IGRhdGVUaW1lVG9Vbml4VGltZSh2bS50ZW1wVGltZS5lbmQpO1xuXHRcdFx0dm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlW3N0YXJ0T3JFbmRdLmNvbXBsZXRlZCA9IHRydWU7XG5cdFx0XHR2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbc3RhcnRPckVuZF0ucm93LmNsYXNzWydoYXMtc3VjY2VzcyddID0gdHJ1ZTtcblx0XHRcdHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtzdGFydE9yRW5kXS5yb3cuY2xhc3NbJ2hhcy1mZWVkYmFjayddID0gdHJ1ZTtcblx0XHRcdHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtzdGFydE9yRW5kXS5yb3cuY2xhc3NbJ2hhcy1lcnJvciddID0gZmFsc2U7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmKHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtzdGFydE9yRW5kXS5jb21wbGV0ZWQgPT0gdHJ1ZSkgdXBkYXRlUHJvZ3Jlc3NCYXIoLTEwKTtcblx0XHRcdHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtzdGFydE9yRW5kXS5jb21wbGV0ZWQgPSBmYWxzZTtcblx0XHRcdHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtzdGFydE9yRW5kXS5yb3cuY2xhc3NbJ2hhcy1zdWNjZXNzJ10gPSBmYWxzZTtcblx0XHRcdHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtzdGFydE9yRW5kXS5yb3cuY2xhc3NbJ2hhcy1mZWVkYmFjayddID0gZmFsc2U7XG5cdFx0XHR2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbc3RhcnRPckVuZF0ucm93LmNsYXNzWydoYXMtZXJyb3InXSA9IHRydWU7XG5cdFx0fVxuXHR9XG5cblx0dm0uc2V0dGluZ1RlbXBTdGFydCA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0aWYoKGRhdGVUaW1lVG9Vbml4VGltZSh2bS50ZW1wVGltZS5lbmQpIDw9IGRhdGVUaW1lVG9Vbml4VGltZSh2bS50ZW1wVGltZS5zdGFydCkpIHx8IFxuXHRcdFx0KGRhdGVUaW1lVG9Vbml4VGltZSh2bS50ZW1wVGltZS5lbmQpIC0gZGF0ZVRpbWVUb1VuaXhUaW1lKHZtLnRlbXBUaW1lLnN0YXJ0KSA+ICgxMDAwKjYwKjYwKjI0KSkpIHtcblx0XHRcdG9sZFN0YXJ0ID0gZGF0ZVRpbWVUb1VuaXhUaW1lKHZtLnRlbXBUaW1lLnN0YXJ0KTtcblx0XHRcdG9sZEVuZCA9IGRhdGVUaW1lVG9Vbml4VGltZSh2bS50ZW1wVGltZS5lbmQpO1xuXG5cdFx0XHRuZXdFbmQgPSBvbGRTdGFydCArICg2MCo2MCoxMDAwKTtcblxuXHRcdFx0dm0udGVtcFRpbWUuZW5kID0gdW5peFRpbWVUb0RhdGVUaW1lKG5ld0VuZCk7XG5cdFx0fVxuXHRcdFxuIFx0fVxuXG5cdHZtLnNldHRpbmdUZW1wRW5kID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9zZXQgdmFsaWQgZW5kIHdpdGggc3RhcnRcblx0XHRpZih2bS50ZW1wVGltZS5zdGFydCA+IHZtLnRlbXBUaW1lLmVuZCkgdm0udGVtcFRpbWUuc3RhcnQgPSB2bS50ZW1wVGltZS5lbmQ7XG5cblx0XHQvL3ZhbGlkYXRlXG5cdFx0dm0udmFsaWRhdGVUaW1lKCdldmVudEVuZCcpO1xuXG5cdFx0Ly9jYWxjIGR1cmF0aW9uXG5cdFx0dm0udGVtcFRpbWUuZHVyYXRpb24gPSBjYWxjdWxhdGVEdXJhdGlvbih2bS50ZW1wVGltZS5zdGFydCwgdm0udGVtcFRpbWUuZW5kKTtcblxuXHRcdFxuXHR9XG5cblx0dm0uYmFja1RvVXNlckV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vaWYgdGhlIGV2ZW50IGlzIGNvbXBsZXRlZCwgc2F2ZSB0byB0aGUgZGJcblx0XHQvL2NoZWNrIHRoYXQgdGhlIGV2ZW50IGlzIGNvbXBsZXRlXG5cdFx0aWYocGVyY2VudENvbXBsZXRlID4gOTkpIHtcblx0XHRcdC8vaWYgc28gc2F2ZSB0aGUgZXZlbnQgbG9jYWxseVxuXHRcdFx0dGhpc0V2ZW50TWFuYWdlci5zYXZlTmV3SG9zdGluZ0V2ZW50KCdob3N0aW5nJywgdm0udGVtcEV2ZW50KTtcblx0XHRcdC8vdGhlbiBzeW5jIHRoZSBsb2NhbCB3aXRoIHRoZSBkYlxuXHRcdFx0dGhpc0V2ZW50TWFuYWdlci5zZXRSZW1vdGVFdmVudHNGcm9tTG9jYWwoJ2hvc3RpbmcnLCB2bS50ZW1wRXZlbnQpXG5cdFx0XHQudGhlbihmdW5jdGlvbihzdWNjZXNNZXNzYWdlKSB7XG5cdFx0XHRcdCRsb2cuaW5mbyhzdWNjZXNNZXNzYWdlKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb01lc3NhZ2UpIHtcblx0XHRcdFx0JGxvZy5pbmZvKGVycm9NZXNzYWdlKTtcblx0XHRcdH0pXG5cdFx0fVxuXG5cdFx0Ly9pZiBub3QgY29tcGxldGVkLCBkZWxldGUgdGhlIGV2ZW50IGVudGlyZWx5XG5cdFx0Ly90aGlzRXZlbnRNYW5hZ2VyLnJlbW92ZUluY29tcGxldGVFdmVudEZyb21EQih2bS50ZW1wRXZlbnQuaWQpO1xuXG5cdFx0Ly9zZW5kIHRoZSB1c2VyIGJhY2sgdG8gdGhlIHBhZ2UgdGhleSBjYW1lIGZyb21cblx0XHRob3N0ZWRFdmVudFNoZXJwYS5yZWRpcmVjdFRvKCcvdXNlckV2ZW50cycsICRyb3V0ZVBhcmFtcy51aWQpO1xuXHR9XG5cblx0dm0uc2VjdGlvbkJhY2sgPSBmdW5jdGlvbigpIHtcblx0XHQvL3NhdmUgdGVtcCBldmVudCBwYWNrYWdlXG5cdFx0dmFyIGV2ZW50UGFja2FnZSA9IHtcblx0XHRcdGV2ZW50OiB2bS50ZW1wRXZlbnQsXG5cdFx0XHRwcm9ncmVzc0Jhcjogdm0ucHJvZ3Jlc3NCYXIsXG5cdFx0XHRwZXJjZW50Q29tcGxldGU6IHBlcmNlbnRDb21wbGV0ZSxcblx0XHRcdHJlcXVpcmVkRmllbGRzOiB2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVcblx0XHR9O1xuXG5cdFx0JGxvZy5pbmZvKGV2ZW50UGFja2FnZSk7XG5cblx0XHR0aGlzRXZlbnRNYW5hZ2VyLnNldEFjdGl2ZUV2ZW50KGV2ZW50UGFja2FnZSlcblxuXHRcdC8vbW92ZSBiYWNrXG5cdFx0dGFyZ2V0U2VjdGlvbiA9IHZtLmFjdGl2ZVNlY3Rpb24gLSAxO1xuXHRcdGhvc3RlZEV2ZW50U2hlcnBhLnJlZGlyZWN0VG8oJy9ldmVudC9ob3N0JywgJHJvdXRlUGFyYW1zLmV2ZW50SWQsICRyb3V0ZVBhcmFtcy51aWQsIHRhcmdldFNlY3Rpb24pO1xuXHR9XHRcblxuXHR2bS5zZWN0aW9uRm9yd2FyZCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vaWYgYWxsIHJlcXVpcmVkIGZpZWxkcyBoYXZlIGJlZW4gZW50ZXJlZFxuXHRcdC8vc2F2ZSB0ZW1wIGV2ZW50IHBhY2thZ2Vcblx0XHR2YXIgZXZlbnRQYWNrYWdlID0ge1xuXHRcdFx0ZXZlbnQ6IHZtLnRlbXBFdmVudCxcblx0XHRcdHByb2dyZXNzQmFyOiB2bS5wcm9ncmVzc0Jhcixcblx0XHRcdHBlcmNlbnRDb21wbGV0ZTogcGVyY2VudENvbXBsZXRlLFxuXHRcdFx0cmVxdWlyZWRGaWVsZHM6IHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVxuXHRcdH07XG5cblx0XHQkbG9nLmluZm8oZXZlbnRQYWNrYWdlKTtcblxuXHRcdHRoaXNFdmVudE1hbmFnZXIuc2V0QWN0aXZlRXZlbnQoZXZlbnRQYWNrYWdlKVxuXG5cdFx0Ly9tb3ZlIGZvcndhcmRcblx0XHR0YXJnZXRTZWN0aW9uID0gdm0uYWN0aXZlU2VjdGlvbiArIDE7XG5cdFx0aG9zdGVkRXZlbnRTaGVycGEucmVkaXJlY3RUbygnL2V2ZW50L2hvc3QnLCAkcm91dGVQYXJhbXMuZXZlbnRJZCwgJHJvdXRlUGFyYW1zLnVpZCwgdGFyZ2V0U2VjdGlvbik7XG5cdH1cblxuXHR2bS52ZXJpZnlSZXF1aXJlZCA9IGZ1bmN0aW9uKGZpZWxkLCB2YWx1ZSkge1xuXHRcblx0XHQvL2NoZWNrIHZhbGlkaXR5XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpICYmIHZhbHVlICE9ICcnKSB7XG5cdFx0XHRpZih2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbZmllbGRdLmNvbXBsZXRlZCA9PSBmYWxzZSkge1xuXHRcdFx0XHR1cGRhdGVQcm9ncmVzc0JhcigxMCk7XG5cdFx0XHR9XG5cdFx0XHR2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbZmllbGRdLmNvbXBsZXRlZCA9IHRydWU7XG5cdFx0XHR2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbZmllbGRdLnJvdy5jbGFzc1snaGFzLXN1Y2Nlc3MnXSA9IHRydWU7XG5cdFx0XHR2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbZmllbGRdLnJvdy5jbGFzc1snaGFzLWZlZWRiYWNrJ10gPSB0cnVlO1xuXHRcdFx0dm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlW2ZpZWxkXS5yb3cuY2xhc3NbJ2hhcy1lcnJvciddID0gZmFsc2U7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmKHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtmaWVsZF0uY29tcGxldGVkID09IHRydWUpIHtcblx0XHRcdFx0dXBkYXRlUHJvZ3Jlc3NCYXIoLTEwKTtcblx0XHRcdH1cblx0XHRcdHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtmaWVsZF0uY29tcGxldGVkID0gZmFsc2U7XG5cdFx0XHR2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbZmllbGRdLnJvdy5jbGFzc1snaGFzLXN1Y2Nlc3MnXSA9IGZhbHNlO1xuXHRcdFx0dm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlW2ZpZWxkXS5yb3cuY2xhc3NbJ2hhcy1mZWVkYmFjayddID0gZmFsc2U7XG5cdFx0XHR2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbZmllbGRdLnJvdy5jbGFzc1snaGFzLWVycm9yJ10gPSB0cnVlO1xuXHRcdH1cblx0XHQvL2ZpZWxkIHVwZGF0ZWRcblx0XHRcblx0fVxuXG5cdHZtLnNhdmVFdmVudFRvREIgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9nLmluZm8odm0udGVtcEV2ZW50KTtcblx0XHQvL2NoZWNrIHRoYXQgdGhlIGV2ZW50IGlzIGNvbXBsZXRlXG5cdFx0aWYocGVyY2VudENvbXBsZXRlID4gOTkpIHtcblx0XHRcdC8vaWYgc28gc2F2ZSB0aGUgZXZlbnQgbG9jYWxseVxuXHRcdFx0dGhpc0V2ZW50TWFuYWdlci5zYXZlTmV3SG9zdGluZ0V2ZW50KCdob3N0aW5nJywgdm0udGVtcEV2ZW50KTtcblx0XHRcdC8vdGhlbiBzeW5jIHRoZSBsb2NhbCB3aXRoIHRoZSBkYlxuXHRcdFx0dGhpc0V2ZW50TWFuYWdlci5zZXRSZW1vdGVFdmVudHNGcm9tTG9jYWwoJHJvdXRlUGFyYW1zLnVpZCwgdm0udGVtcEV2ZW50KVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24oc3VjY2VzTWVzc2FnZSkge1xuXHRcdFx0XHQkbG9nLmluZm8oc3VjY2VzTWVzc2FnZSk7XG5cblx0XHRcdFx0Ly9pbiBzdWNjZXMgbWFrZSBzdXJlIHRvIHJlbW92ZSB0aGUgdXBkYXRlZCBmaWVsZFxuXHRcdFx0XHR0aGlzRXZlbnRNYW5hZ2VyLmNsZWFuREJFdmVudHNDYXRlZ29yeSgnaG9zdGluZycpXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKHN1Y2Nlc01lc3NhZ2UpIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oc3VjY2VzTWVzc2FnZSk7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvTWVzc2FnZSkge1xuXHRcdFx0XHRcdCRsb2cuaW5mbyhlcnJvTWVzc2FnZSk7XG5cdFx0XHRcdH0pXG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9NZXNzYWdlKSB7XG5cdFx0XHRcdCRsb2cuaW5mbyhlcnJvTWVzc2FnZSk7XG5cdFx0XHR9KVxuXG5cdFx0XHQvL3JlZGlyZWN0IGJhY2sgdG8gZXZlbnRzXG5cdFx0XHRob3N0ZWRFdmVudFNoZXJwYS5yZWRpcmVjdFRvKCcvdXNlckV2ZW50cycsICRyb3V0ZVBhcmFtcy51aWQpO1xuXHRcdH1cblx0XHRcblx0fVxuXG5cdC8vd2F0Y2hlcnNcblx0JHNjb3BlLiR3YXRjaCgndm0udGVtcEV2ZW50Lmd1ZXN0TGlzdCcsIGZ1bmN0aW9uKGN1cnJlbnQsIG9yaWdpbmFsKSB7XG5cdFx0Ly9pZiBhIGd1ZXN0IGlzIGFkZGVkIHRvIHRoZSBsaXN0IHVwZGF0ZSB0aGUgcHJvZ3Jlc3MgYmFyXG4gICAgICAgIGlmKGFuZ3VsYXIuaXNPYmplY3Qodm0udGVtcEV2ZW50Lmd1ZXN0TGlzdCkpIHtcbiAgICAgICAgXHR1cGRhdGVQcm9ncmVzc0JhcigxMCk7XG4gICAgICAgIH1cblx0fSk7XG5cblx0YW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cdFx0aWYocGFyc2VJbnQoJHJvdXRlUGFyYW1zLnNlY3Rpb24pID09IDEpIHsgXG5cdFx0XHRcblx0XHRcdC8vYW5ndWxhci5lbGVtZW50KCRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZXZlbnROYW1lJykpLmZvY3VzKClcblx0XHRcdC8vYW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCkuZmluZCgnI2V2ZW50TmFtZScpLmZvY3VzKCk7XG5cdFx0XHQvLyRsb2cuaW5mbygnc2VjdGlvbiAxJyk7XG5cblx0XHR9XG5cblx0XHRpZihwYXJzZUludCgkcm91dGVQYXJhbXMuc2VjdGlvbikgPT0gMikge1xuXHRcdFx0Ly9hbmd1bGFyLmVsZW1lbnQoJGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNldmVudFN0cmVldDAxJykpLmZvY3VzKClcblx0XHRcdC8vYW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCkuZmluZCgnI2V2ZW50U3RyZWV0MDEnKS5mb2N1cygpO1xuXHRcdFx0Ly8kbG9nLmluZm8oJ3NlY3Rpb24gMicpO1xuXHRcdH1cblxuXHRcdGlmKHBhcnNlSW50KCRyb3V0ZVBhcmFtcy5zZWN0aW9uKSA9PSAzKSB7XG5cdFx0XHQvL2FuZ3VsYXIuZWxlbWVudCgkZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ludml0ZWVOYW1lJykpLmZvY3VzKClcblx0XHRcdC8vZXZlbnRTdHJlZXQwMWFuZ3VsYXIuZWxlbWVudCgkZG9jdW1lbnQpLmZpbmQoJyNpbnZpdGVlTmFtZScpLmZvY3VzKCk7XG5cdFx0XHQvLyRsb2cuaW5mbygnc2VjdGlvbiAzJyk7XG5cdFx0fVxuXHR9KTtcblxuXHQvL3Rha2UgYWN0aW9uXG5cdGluaXQoKTtcblxufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ0xhbmRpbmdQYWdlQ29udHJvbGxlcicsIExhbmRpbmdQYWdlQ29udHJvbGxlcik7XG5cbkxhbmRpbmdQYWdlQ29udHJvbGxlci4kaW5qZWN0ID0gWyd0cmFmZmljVmFsZXQnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBMYW5kaW5nUGFnZUNvbnRyb2xsZXIodHJhZmZpY1ZhbGV0KSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdHZhciBsYW5kaW5nU2hlcnBhID0gdHJhZmZpY1ZhbGV0O1xuXG5cdC8vbG9jYWwgbWV0aG9kc1xuXHQvL3ZtIG1ldGhvZHNcblx0dm0uY3JlYXRlQW5BY2NvdW50ID0gZnVuY3Rpb24oKSB7XG5cdFx0bGFuZGluZ1NoZXJwYS5yZWRpcmVjdFRvKCcvc2lnbnVwJyk7XG5cdH1cblxuXHR2bS5sb2dpblVzZXIgPSBmdW5jdGlvbigpIHtcblx0XHRsYW5kaW5nU2hlcnBhLnJlZGlyZWN0VG8oJy9sb2dpbicpO1xuXHR9XG5cblx0Ly93YXRjaGVyc1xuXHQvL2FjdGlvblxufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ01haW5Db250cm9sbGVyJywgTWFpbkNvbnRyb2xsZXIpO1xuXG5NYWluQ29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJywgJyRsb2NhdGlvbicsICckZG9jdW1lbnQnLCAnJHdpbmRvdyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIE1haW5Db250cm9sbGVyKCRsb2csICRsb2NhdGlvbiwgJGRvY3VtZW50LCAkd2luZG93KSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdHZhciBmYlVSTCA9ICdodHRwczovL21lZXR1cHBsYW5uZXIuZmlyZWJhc2Vpby5jb20vJztcblx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7IFxuXG5cdGZ1bmN0aW9uIHJlc2l6ZUJHSW1hZ2UoKSB7XG5cdFx0dmFyIGJvZHkgPSBhbmd1bGFyLmVsZW1lbnQoJGRvY3VtZW50KTtcblx0XHQkZG9jdW1lbnQuY3NzKCdoaWdodCcsICR3aW5kb3cub3V0ZXJIZWlnaHQpXG5cdH1cblxuXHR2bS5sb2dvdXQgPSBmdW5jdGlvbigpIHtcblx0XHRhbGVydCgnbG9nZ2luZyB5b3Ugb3V0IScpO1xuXHRcdHJlZi51bmF1dGgoKTtcblx0XHQkbG9jYXRpb24ucGF0aCgnLycpO1xuXHR9O1xuXG5cdGFuZ3VsYXIuZWxlbWVudCgkZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXHRcdC8vRmFzdENsaWNrLmF0dGFjaCgkZG9jdW1lbnQuYm9keSk7XG5cdFx0cmVzaXplQkdJbWFnZSgpO1xuXHR9KVxufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ05ld1VzZXJTaWduVXBDb250cm9sbGVyJywgTmV3VXNlclNpZ25VcENvbnRyb2xsZXIpO1xuXG5OZXdVc2VyU2lnblVwQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZycsICd2YWxpZGF0aW9uJywgJ2JhY2tlbmRTZXJ2aWNlcycsICd0cmFmZmljVmFsZXQnLCAndXNlckRhdGEnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBOZXdVc2VyU2lnblVwQ29udHJvbGxlcigkc2NvcGUsICRsb2csIHZhbGlkYXRpb24sIGJhY2tlbmRTZXJ2aWNlcywgdHJhZmZpY1ZhbGV0LCB1c2VyRGF0YSkge1xuXHR2YXIgdm0gPSB0aGlzO1x0XG5cdHZhciBzaWdudXBWYWxpZGF0aW9uID0gdmFsaWRhdGlvbjtcblxuXHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblxuXHQvL2RlZmluZSB2bSBpbnB1dCB2YXJpYWJsZXNcblx0dm0ubmFtZSA9IHNpZ251cFZhbGlkYXRpb24uZ2VuZXJhdGVUZXN0YWJsZU9iamVjdCgnbmFtZScpO1xuXHR2bS5lbWFpbCA9IHNpZ251cFZhbGlkYXRpb24uZ2VuZXJhdGVUZXN0YWJsZU9iamVjdCgnZW1haWwnKTtcblx0dm0ucGFzcyA9IHNpZ251cFZhbGlkYXRpb24uZ2VuZXJhdGVUZXN0YWJsZU9iamVjdCgncGFzcycpO1xuXG5cdHZtLmNyZWF0ZU5ld1VzZXIgPSBmdW5jdGlvbiAoKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBuZXdVc2VyU2hlcnBhID0gdHJhZmZpY1ZhbGV0O1xuXG5cdFx0Ly9jb25maXJtIGFsbCBmaWVsZHMgYXJlIHZhbGlkXG5cdFx0aWYodm0ubmFtZS5wYXNzZXNBbGxSZXFzICYmIHZtLmVtYWlsLnBhc3Nlc0FsbFJlcXMgJiYgdm0ucGFzcy5wYXNzZXNBbGxSZXFzKSB7XG5cdFx0XHRcblx0XHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRcdHZhciBjcmVhdGVOZXdVc2VyID0gYmFja2VuZFNlcnZpY2VzO1xuXHRcdFx0dmFyIG5ld1VzZXJEYXRhID0gdXNlckRhdGE7XG5cdFx0XHR2YXIgdGhpc1VJRDtcblxuXHRcdFx0Ly9jcmVhdGUgdGhlIG5ldyB1c2VyIGluIHRoZSBkYXRhYmFzZVxuXHRcdFx0Y3JlYXRlTmV3VXNlci5jcmVhdGVOZXdVc2VyKHZtLmVtYWlsLnZhbHVlLCB2bS5wYXNzLnZhbHVlKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24oZGJVc2VyRGF0YSkge1xuXHRcdFx0XHRcblx0XHRcdFx0Ly9tYWludGFpbiBsb2NhbCB2YWx1ZXMgdG8gc3BlZWQgdXAgdXNlciBleHBlcmllbmNlXG5cdFx0XHRcdG5ld1VzZXJEYXRhLnNldFByaW1hcmllc0xvY2FsbHkodm0uZW1haWwudmFsdWUsIHZtLm5hbWUudmFsdWUsIGRiVXNlckRhdGEudWlkKTtcblxuXHRcdFx0XHQvL2NyZWF0ZSBhIHVzZXIgcHJvZmlsZSBpbiB0aGUgZGF0YWJhc2Vcblx0XHRcdFx0Y3JlYXRlTmV3VXNlci5hZGROZXdVc2VyVG9EYXRhYmFzZShkYlVzZXJEYXRhLnVpZCwgdm0ubmFtZS52YWx1ZSwgdm0uZW1haWwudmFsdWUpXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKG1lc3NhZ2UpIHtcblxuXHRcdFx0XHRcdCRsb2cuaW5mbyhtZXNzYWdlKTtcblxuXHRcdFx0XHRcdC8vYWRkIHRoaXMgdXNlciB0byB0aGUgbGlzdCBvZiByZWdpc3RlcmVkIHVzZXJzXG5cdFx0XHRcdFx0Y3JlYXRlTmV3VXNlci5hZGROZXdVc2VyVG9SZWdVc2Vyc0xpc3QoZGJVc2VyRGF0YS51aWQsIHZtLmVtYWlsLnZhbHVlKVxuXHRcdFx0XHRcdC50aGVuKGZ1bmN0aW9uKG1lc3NhZ2UpIHtcblxuXHRcdFx0XHRcdFx0Ly9yZWRpcmVjdCB1c2luZyB0aGUgdWlkXG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdC8vcmVkaXJlY3QgdG8gdGhlIG5leHQgcGFnZSBcblx0XHRcdFx0XHRcdG5ld1VzZXJTaGVycGEucmVkaXJlY3RUbygnL3VzZXJJbmZvcm1hdGlvbicsIGRiVXNlckRhdGEudWlkKTtcblx0XHRcdFx0XHRcdCBcblx0XHRcdFx0XHRcdCRsb2cuaW5mbyhtZXNzYWdlKTsgXG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyAkbG9nLmluZm8obWVzc2FnZSk7IH0pXG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5jYXRjaChmdW5jdGlvbihtZXNzYWdlKSB7ICRsb2cuaW5mbyhtZXNzYWdlKTsgfSlcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyAkbG9nLmluZm8obWVzc2FnZSk7IH0pXG5cdFx0XHRcblx0XHR9XG5cblx0fVxuXHRcblx0Ly9ydW4gdGltZSBhY3Rpb25zXG5cbn1cbiIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ1JlZ1VzZXJMb2dpbkNvbnRyb2xsZXInLCBSZWdVc2VyTG9naW5Db250cm9sbGVyKTtcblxuUmVnVXNlckxvZ2luQ29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJywgJyRkb2N1bWVudCcsICdiYWNrZW5kU2VydmljZXMnLCAndHJhZmZpY1ZhbGV0JywgJ3VzZXJEYXRhJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gUmVnVXNlckxvZ2luQ29udHJvbGxlcigkbG9nLCAkZG9jdW1lbnQsIGJhY2tlbmRTZXJ2aWNlcywgdHJhZmZpY1ZhbGV0LCB1c2VyRGF0YSkge1xuXHR2YXIgdm0gPSB0aGlzO1xuXG5cdC8vZGVmaW5lIHZtIGlucHV0IHZhcmlhYmxlc1xuXHR2bS5pbnB1dHMgPSB7XG5cdFx0ZW1haWw6ICcnLFxuXHRcdHBhc3N3b3JkOiAnJyxcblx0XHRyZXF1aXJlZEZpZWxkc0RlZmluZWQ6IGZhbHNlXG5cdH1cblx0dm0uZXJyb3JzID0ge1xuXHRcdG1lc3NhZ2U6ICcnLFxuXHRcdHBhc3Nlc0FsbFRlc3RzOiB0cnVlXG5cdH1cblx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0biA9IHtcblx0XHQndXNhYmxlJzpmYWxzZSwgXG5cdFx0J2NsYXNzJzoge1xuXHRcdFx0J2J0bic6IHRydWUsXG5cdFx0XHQnYnRuLXdhcm5pbmcnOiB0cnVlLFxuXHRcdFx0J2J0bi1zdWNjZXNzJzogZmFsc2UsXG5cdFx0XHQnY29sLXhzLTEyJzogdHJ1ZSxcblx0XHRcdCdjb2wtc20tMTInOiB0cnVlLFxuXHRcdH0sXG5cdFx0bWVzc2FnZTogJ05lZWQgRW1haWwgJiBQYXNzJ1xuXHR9XG5cblx0Ly9tZXRob2RzXG5cdGZ1bmN0aW9uIG9wZW5Vc2VyTG9naW5CdG4oKSB7XG5cdFx0Ly9jaGVjayB0aGF0IHRoZXJlIGlzIGFuIGVtYWlsIGFuZCB0aGVyZSBpcyBhIHBhc3N3b3JkXG5cdFx0aWYoXHRhbmd1bGFyLmlzRGVmaW5lZCh2bS5pbnB1dHMuZW1haWwpICYmIHZtLmlucHV0cy5lbWFpbCAhPT0gJycgJiZcblx0XHRcdGFuZ3VsYXIuaXNEZWZpbmVkKHZtLmlucHV0cy5wYXNzd29yZCkgJiYgdm0uaW5wdXRzLnBhc3N3b3JkICE9PSAnJykgXG5cdFx0e1xuXHRcdFx0dm0uaW5wdXRzLnJlcXVpcmVkRmllbGRzRGVmaW5lZCA9IHRydWU7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLmNsYXNzWydidG4tc3VjY2VzcyddID0gdHJ1ZTtcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4uY2xhc3NbJ2J0bi13YXJuaW5nJ10gPSBmYWxzZTtcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4ubWVzc2FnZSA9ICdMb2dpbic7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLnVzYWJsZSA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZtLmlucHV0cy5yZXF1aXJlZEZpZWxkc0RlZmluZWQgPSBmYWxzZTtcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4uY2xhc3NbJ2J0bi1zdWNjZXNzJ10gPSBmYWxzZTtcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4uY2xhc3NbJ2J0bi13YXJuaW5nJ10gPSB0cnVlO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi5tZXNzYWdlID0gJ05lZWQgRW1haWwgJiBQYXNzJztcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlID0gZmFsc2U7XG5cdFx0fVxuXG5cdH1cblxuXHQvL3ZpZXcgbW9kZWwgbWV0aG9kc1xuXHR2bS51cGRhdGUgPSBmdW5jdGlvbigpIHtcblx0XHQvL3NldCB2YWx1ZXNcblx0XHR2bS5pbnB1dHMuZW1haWwgPSAkZG9jdW1lbnQuZmluZCgnI3VzZXJFbWFpbCcpWzBdLnZhbHVlO1xuXHRcdHZtLmlucHV0cy5wYXNzd29yZCA9ICRkb2N1bWVudC5maW5kKCcjdXNlclBhc3N3b3JkJylbMF0udmFsdWU7XG5cdFx0XG5cdFx0b3BlblVzZXJMb2dpbkJ0bigpO1xuXHR9XG5cblx0dm0ubG9naW5SZWdpc3RlcmVkVXNlciA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgcmVnaXN0ZXJlZFVzZXJTaGVycGEgPSB0cmFmZmljVmFsZXQ7XG5cblx0XHQvL2NvbmZpcm0gYWxsIGZpZWxkcyBhcmUgdmFsaWRcblx0XHRpZih0cnVlKSB7XG5cdFx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgZGF0YWJhc2UgPSBiYWNrZW5kU2VydmljZXM7XG5cdFx0XHR2YXIgcmVnaXN0ZXJlZFVzZXJEYXRhID0gdXNlckRhdGE7XG5cblx0XHRcdC8vdmVyaWZ5IHVzZXJzIGNyZWRlbnRpYWxzXG5cdFx0XHRkYXRhYmFzZS5Mb2dpblJlZ2lzdGVyZWRVc2VyKHZtLmlucHV0cy5lbWFpbCwgdm0uaW5wdXRzLnBhc3N3b3JkKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24odXNlckNyZWRlbnRpYWxzKSB7XG5cdFx0XHRcdC8vaWYgbm8gdHJvdWJsZSBsb2dnaW5nIGluIHVwZGF0ZSBlcnJvciBvYmplY3Rcblx0XHRcdFx0dm0uZXJyb3JzLnBhc3Nlc0FsbFRlc3RzID0gdHJ1ZTtcblxuXHRcdFx0XHQvL2FkZCBwcmltYXJ5IGluZm9ybWF0aW9uIHRvIGxvY2FsIG1vZGVsXG5cdFx0XHRcdHJlZ2lzdGVyZWRVc2VyRGF0YS5zZXRQcmltYXJpZXNMb2NhbGx5KHZtLmlucHV0cy5lbWFpbCwgdm0uaW5wdXRzLm5hbWUsIHVzZXJDcmVkZW50aWFscy51aWQpO1xuXG5cdFx0XHR9KVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCRsb2cuaW5mbyhcInVpZCBpcyBcIiArIHJlZ2lzdGVyZWRVc2VyRGF0YS5nZXRVSURMb2NhbGx5KCkpO1xuXG5cdFx0XHRcdGRhdGFiYXNlLmdldFVzZXJCaW8ocmVnaXN0ZXJlZFVzZXJEYXRhLmdldFVJRExvY2FsbHkoKSlcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24odXNlckJpbykge1xuXHRcdFx0XHRcdC8vdXBkYXRlIHVzZXJEYXRhIG1vZGVsIHdpdGggdXNlckJpb1xuXHRcdFx0XHRcdHJlZ2lzdGVyZWRVc2VyRGF0YS51cGRhdGVCaW9Mb2NhbGx5KHVzZXJCaW8pO1xuXG5cdFx0XHRcdFx0Ly9sb2FkIHVzZXIgZXZlbnRzXG5cdFx0XHRcdFx0ZGF0YWJhc2UuZ2V0VXNlckV2ZW50cyhyZWdpc3RlcmVkVXNlckRhdGEuZ2V0VUlETG9jYWxseSgpKVxuXHRcdFx0XHRcdC50aGVuKGZ1bmN0aW9uKGFsbEV2ZW50c0ZvclRoaXNVc2VyKSB7XG5cdFx0XHRcdFx0XHQvL3VwZGF0ZSB1c2VyRGF0YSBtb2RlbCB3aXRoIHVzZXJFdmVudHNcblx0XHRcdFx0XHRcdHJlZ2lzdGVyZWRVc2VyRGF0YS51cGRhdGVBbGxVc2VyRXZlbnRzTG9jYWxseShhbGxFdmVudHNGb3JUaGlzVXNlcik7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyAkbG9nLmluZm8obWVzc2FnZSk7IH0pXG5cblx0XHRcdFx0fSlcblx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKG1lc3NhZ2UpIHsgJGxvZy5pbmZvKG1lc3NhZ2UpOyB9KVxuXG5cdFx0XHRcdC8vcmVkaXJlY3QgdG8gdGhlIG5leHQgcGFnZSBcblx0XHRcdFx0cmVnaXN0ZXJlZFVzZXJTaGVycGEucmVkaXJlY3RUbygnL3VzZXJJbmZvcm1hdGlvbicsIHJlZ2lzdGVyZWRVc2VyRGF0YS5nZXRVSURMb2NhbGx5KCkpO1xuXG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKG1lc3NhZ2UpIHsgXG5cdFx0XHRcdC8vaWYgdGhlcmUgd2FzIGFuIGVycm9yIGxvZ2dpbmcgaW4sIGxldCB0aGUgdXNlciBrbm93XG5cdFx0XHRcdHZtLmVycm9ycy5tZXNzYWdlID0gbWVzc2FnZTtcblx0XHRcdFx0dm0uZXJyb3JzLnBhc3Nlc0FsbFRlc3RzID0gZmFsc2U7XG5cdFx0XHR9KVxuXG5cdFx0XHQvL3VzZSB1aWQgdG8gY29sbGVjdCB1c2VyIGJpb1xuXHRcdFx0XG5cdFx0fVxuXG5cdH1cblxuXHR2bS5jbGlja2VkID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHVzZXJBdXRoZW50aWNhdGlvbiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdHVzZXJBdXRoZW50aWNhdGlvbi5sb2dVc2VyT3V0KCk7XG5cdH1cblxuXHQvL3J1biBjb21tYW5kc1xufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ3RvcE1lbnVDb250cm9sbGVyJywgdG9wTWVudUNvbnRyb2xsZXIpO1xuXG50b3BNZW51Q29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZycsICckbG9jYXRpb24nLCAnJGRvY3VtZW50JywgJyR3aW5kb3cnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiB0b3BNZW51Q29udHJvbGxlcigkc2NvcGUsICRsb2csICRsb2NhdGlvbiwgJGRvY3VtZW50LCAkd2luZG93KSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdHZhciBmYlVSTCA9ICdodHRwczovL21lZXR1cHBsYW5uZXIuZmlyZWJhc2Vpby5jb20vJztcblx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cblx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0dm0ubG9nZ2VkSW4gPSBmYWxzZVxuXG5cdC8vc3R5bGVzIHZhcmlhYmxlc1xuXHRcblx0Ly9ldmVudCBsaXN0ZW5lcnNcblx0aWYgKCdhZGRFdmVudExpc3RlbmVyJyBpbiAkZG9jdW1lbnQpIHtcblx0ICAgICRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XG5cdCAgICBcdCRsb2cuaW5mbygnYWRkaW5nIEZhc3RDbGljaycpO1xuXHQgICAgICAgIEZhc3RDbGljay5hdHRhY2goJGRvY3VtZW50LmJvZHkpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHR9XG5cblx0YW5ndWxhci5lbGVtZW50KCR3aW5kb3cpLmJpbmQoJ3Jlc2l6ZScsIGZ1bmN0aW9uKCkge1xuXHRcdHZtLm9uUmVzaXplRnVuY3Rpb24oKTtcblx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cdH0pO1xuXG5cdGFuZ3VsYXIuZWxlbWVudCgkZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXHRcdGlmKCR3aW5kb3cub3V0ZXJXaWR0aCA8IDYwMCkge1xuXHRcdFx0dm0ub25SZXNpemVGdW5jdGlvbigpO1xuXHRcdFx0JHNjb3BlLiRhcHBseSgpO1xuXHRcdH1cblx0fSlcblx0Ly9keW5hbWljYWxseSBzZXQgaW5wdXQgd2lkdGhcblxuXG5cdC8vIENyZWF0ZSBhIGNhbGxiYWNrIHdoaWNoIGxvZ3MgdGhlIGN1cnJlbnQgYXV0aCBzdGF0ZVxuXHRmdW5jdGlvbiBpbml0KCkge1xuXHRcdHZtLm9uUmVzaXplRnVuY3Rpb24oKTtcblx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cdH1cblxuXHRmdW5jdGlvbiBhdXRoRGF0YUNhbGxiYWNrKGF1dGhEYXRhKSB7XG5cdCAgaWYgKGF1dGhEYXRhKSB7XG5cdCAgICAkbG9nLmluZm8oXCJVc2VyIFwiICsgYXV0aERhdGEudWlkICsgXCIgaXMgbG9nZ2VkIGluIHdpdGggXCIgKyBhdXRoRGF0YS5wcm92aWRlcik7XG5cdCAgICB2bS5sb2dnZWRJbiA9IHRydWU7XG5cdCAgfSBlbHNlIHtcblx0ICAgICRsb2cuaW5mbyhcIlVzZXIgaXMgbG9nZ2VkIG91dFwiKTtcblx0ICAgIHZtLmxvZ2dlZEluID0gZmFsc2U7XG5cdCAgfVxuXHR9XG5cblx0ZnVuY3Rpb24gcmVkaXJlY3QocGF0aCwgdXNlckRhdGEpIHtcblx0XHR2YXIgZnVsbFBhdGggPSBwYXRoICsgJy8nICsgdXNlckRhdGEudWlkICsgJy8nICsgdXNlckRhdGEudG9rZW47XG5cdFx0Ly9yZWRpcmVjdFxuXHRcdCRsb2cuaW5mbygncmVkaXJlY3RpbmcgdG86ICcgKyBmdWxsUGF0aCk7XG5cdFx0JGxvY2F0aW9uLnBhdGgoZnVsbFBhdGgpO1xuXHRcdC8vJHNjb3BlLiRhcHBseSgpO1xuXHR9XG5cblx0Ly92bSBhY2Nlc3NpYmxlIG1ldGhvZHNcblx0dm0ubG9nb3V0ID0gZnVuY3Rpb24oKSB7XG5cdFx0JGxvZy5pbmZvKCdsb2dnaW5nIG91dCEnKTtcblx0XHR2bS5sb2dnZWRJbiA9IGZhbHNlO1xuXHRcdHJlZi51bmF1dGgoKTtcblx0XHRyZWRpcmVjdCgnLycsIHt1aWQ6JycsIHRva2VuOicnfSk7XG5cdH1cblxuXHR2bS5uYXZCYXJMb2dpblJlZ2lzdGVyZWRVc2VyID0gZnVuY3Rpb24oKSB7XG5cdFx0JGxvZy5pbmZvKCdsYXVuY2hpbmcgbG9naW4nKTtcblx0XHRpZih0cnVlKSB7XG5cdFx0Ly9pZih2bS51bmNsb2NrVXNlckxvZ2luQnRuLnVzYWJsZSkge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVcblx0XHRcdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXG5cdFx0XHQvL2F1dGhlbnRpY2F0ZSB0aGUgdXNlclxuXHRcdFx0cmVmLmF1dGhXaXRoUGFzc3dvcmQoe1xuXHRcdFx0XHRlbWFpbDogdm0ubmF2YmFyVXNlckVtYWlsLFxuXHRcdFx0XHRwYXNzd29yZDogdm0ubmF2YmFyVXNlclBhc3Ncblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yLCBhdXRoRGF0YSkge1xuXHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnRXJyb3IgTG9nZ2luZyBJbjogJyArIGVycm9yKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ0xvZ2dlZCBJbiBzdWNjZXNzZnVsbHk6ICcgKyBhdXRoRGF0YS51aWQpO1xuXHRcdFx0XHRcdCRsb2cuaW5mbyhhdXRoRGF0YSk7XG5cdFx0XHRcdFx0Ly9zYXZlIGFsbCB0aGUgZGF0YVxuXG5cdFx0XHRcdFx0Ly9sb2FkIHVzZXIgYmlvXG5cdFx0XHRcdFx0Ly9sb2FkIHVzZXIgZXZlbnRzXG5cblx0XHRcdFx0XHQvL3JlZGlyZWN0XG5cdFx0XHRcdFx0cmVkaXJlY3QoJy91c2VySW5mb3JtYXRpb24nLCBhdXRoRGF0YSk7XG5cdFx0XHRcdFx0JHNjb3BlLiRhcHBseSgpO1xuXG5cdFx0XHRcdFx0Ly9jbGljayBjbG9zZWQgdGhlIG5hdmJhclxuXHRcdFx0XHRcdGFuZ3VsYXIuZWxlbWVudCgnLm5hdmJhci10b2dnbGUnKS5jbGljaygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXG5cblx0XHR9XG5cblx0fVxuXG5cdHZtLm9uUmVzaXplRnVuY3Rpb24gPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgbmF2YmFySW5wdXRzID0gYW5ndWxhci5lbGVtZW50KCcubmF2YmFySW5wdXRzJyk7XG5cdFx0bmF2YmFySW5wdXRzLmNzcygnd2lkdGgnLCAoJHdpbmRvdy5vdXRlcldpZHRoIC0gMjYpICsgJ3B4Jyk7XG5cdH1cblxuXHQvLyBSZWdpc3RlciB0aGUgY2FsbGJhY2sgdG8gYmUgZmlyZWQgZXZlcnkgdGltZSBhdXRoIHN0YXRlIGNoYW5nZXNcblx0cmVmLm9uQXV0aChhdXRoRGF0YUNhbGxiYWNrKTtcbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdVc2VyRXZlbnRzQ29udHJvbGxlcicsIFVzZXJFdmVudHNDb250cm9sbGVyKTtcblxuVXNlckV2ZW50c0NvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICckcm91dGVQYXJhbXMnLCAndXNlckRhdGEnLCAndHJhZmZpY1ZhbGV0J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gVXNlckV2ZW50c0NvbnRyb2xsZXIoJGxvZywgJHJvdXRlUGFyYW1zLCB1c2VyRGF0YSwgdHJhZmZpY1ZhbGV0KSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdHZhciBjdXJyZW50VXNlciA9IHVzZXJEYXRhO1xuXG5cdC8vbG9jYWwgdmlldyB2YXJpYWJsZXNcblx0dm0uc2hvd0RlY2xpbmUgPSBmYWxzZTtcdC8vd2hhdCBpcyB0aGlzIGJlaW5nIHVzZWQgZm9yP1xuXHR2bS51c2VyQmlvID0ge31cblx0dm0uZXZlbnRzID0ge307XG5cdHZtLnNlY3Rpb25BdmFpbGFibGUgPSB7XG5cdFx0cGVuZGluZzogZmFsc2UsXG5cdFx0YXR0ZW5kaW5nOiBmYWxzZSxcblx0XHRob3N0aW5nOiBmYWxzZSxcblx0XHRjb21wbGV0ZWQ6IGZhbHNlXG5cdH07XG5cdHZtLmVycm9ycyA9IHt9O1xuXG5cdC8vZGVjbGFyZSBsb2NhbCBtZXRob2RzXG5cdGZ1bmN0aW9uIHVuaXhUaW1lVG9EYXRlVGltZSh1bml4VGltZSkge1xuXHRcdHJldHVybiBuZXcgRGF0ZShwYXJzZUludCh1bml4VGltZSkpO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIGRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fTtcblxuXHRmdW5jdGlvbiBub09mSG9zdGVFdmVudHMoKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlXG5cdFx0dmFyIGNvdW50ZXIgPSAwO1xuXG5cdFx0Zm9yKGV2ZW50IGluIHZtLmV2ZW50cy5ob3N0aW5nKSBjb3VudGVyKys7XG5cblx0XHRyZXR1cm4gY291bnRlcjtcblx0fVxuXG5cdGZ1bmN0aW9uIGdlbmVyYXRlRXZlbnRJRCgpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xuXHRcdHZhciBldmVudElEID0gKGRhdGVUaW1lVG9Vbml4VGltZShkYXRlKSAqIDEwKSArIChub09mSG9zdGVFdmVudHMoKSk7XG5cblx0XHRyZXR1cm4gZXZlbnRJRDtcblx0fVxuXG5cdGZ1bmN0aW9uIGNoZWNrRm9yRXZlbnRzKCkge1xuXHRcdFxuXHRcdC8vbG9vcCB0aHJvdWdoIGFsbCB0aGUgZXZlbnQgY2F0ZWdvcmllc1xuXHRcdE9iamVjdC5rZXlzKHZtLmV2ZW50cykuZm9yRWFjaChmdW5jdGlvbihjYXRlZ29yeSkge1xuXHRcdFx0XG5cdFx0XHQvL2luc2lkZSBlYWNoIGNhdGVnb3J5IGNvdW50IHRoZSBudW1iZXIgb2YgZXZlbnQgb2JqZWN0cy4uLk5PVCB1cGRhdGVkIHBsYWNlaG9sZGVyIHRob3VnaFxuXHRcdFx0T2JqZWN0LmtleXModm0uZXZlbnRzW2NhdGVnb3J5XSkuZm9yRWFjaChmdW5jdGlvbihldmVudElEKSB7XG5cdFx0XHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZVxuXHRcdFx0XHR2YXIgY291bnRlciA9IDA7XG5cdFx0XHRcdC8vY291bnQgZXZlbnRzIHdpdGggaWQncyAvIE5PVCAndXBkYXRlZCcgcGxhY2Vob2xkZXJzXG5cdFx0XHRcdGlmKGFuZ3VsYXIuaXNPYmplY3Qodm0uZXZlbnRzW2NhdGVnb3J5XVtldmVudElEXSkpIGNvdW50ZXIrKztcblx0XHRcdFx0XG5cdFx0XHRcdC8vaWYgYXQgbGVhc3Qgb25lIGV2ZW50IGlkIChvYmplY3QpIHdhcyBjb3VudGVkLCB0aGVuIHNob3cgdGhlIHNlY3Rpb25cblx0XHRcdFx0aWYoY291bnRlciA+IDApIHZtLnNlY3Rpb25BdmFpbGFibGVbY2F0ZWdvcnldID0gdHJ1ZTtcblx0XHRcdFx0ZWxzZSB2bS5zZWN0aW9uQXZhaWxhYmxlW2NhdGVnb3J5XSA9IGZhbHNlO1xuXHRcdFx0fSk7XG5cblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHtcblx0XHQvL21ha2Ugc3VyZSB0aGUgdWlkIGlzIHNldFxuXHRcdGN1cnJlbnRVc2VyLnNldFVJRExvY2FsbHkoJHJvdXRlUGFyYW1zLnVpZCk7XG5cblx0XHQvL2xvYWQgdGhlIHVzZXIgYmlvXG5cdFx0Y3VycmVudFVzZXIubG9hZEJpbygkcm91dGVQYXJhbXMudWlkKVxuXHRcdC50aGVuKGZ1bmN0aW9uKHJldHJpZXZlZEJpbykge1xuXHRcdFx0dm0udXNlckJpbyA9IHJldHJpZXZlZEJpbztcblx0XHR9KVxuXHRcdC5jYXRjaCgpXG5cblx0XHQvL2xvYWQgdXNlciBldmVudHMgcHJvZ3Jlc3NpdmxleVxuXHRcdC8vZmlyc3Qgd2hhdGV2ZXIgaXMgaW4gdGhlIG1vZGVsIGFscmVhZHlcblx0XHR2bS5ldmVudHMgPSBjdXJyZW50VXNlci5nZXRBbGxVc2VyRXZlbnRzTG9jYWxseSgpO1xuXG5cdFx0JGxvZy5pbmZvKHZtLmV2ZW50cyk7XG5cdFx0Ly90aGVuIGNhbGwgdG8gdGhlIGRiIGFuZCBnZXQgdGhlIG1vc3QgdXAgdG8gZGF0ZSBpbmZvXG5cdFx0Y3VycmVudFVzZXIuZ2V0UmVtb3RlRXZlbnRzRm9yTG9jYWwoKVxuXHRcdC50aGVuKGZ1bmN0aW9uKG9idGFpbmVkVXNlckV2ZW50cykge1xuXHRcdFx0JGxvZy5pbmZvKG9idGFpbmVkVXNlckV2ZW50cyk7XG5cdFx0XHQvL3VwZGF0ZSB0aGUgdmlldyBtb2RlbCB3aXRoIHRoZSB1cGRhdGVkIERCIHJlc3VsdHNcblx0XHRcdHZtLmV2ZW50cyA9IGN1cnJlbnRVc2VyLmdldEFsbFVzZXJFdmVudHNMb2NhbGx5KCk7XG5cblx0XHRcdC8vdGFrZSBvdXQgdGhlIHVwZGF0ZWQgb2JqZWN0IHRvIGNsZWFuIHVwIGZvciBuZXcgdXNlcnNcblx0XHRcdGRlbGV0ZSB2bS5ldmVudHMucGVuZGluZy51cGRhdGVkO1xuXHRcdFx0ZGVsZXRlIHZtLmV2ZW50cy5wZW5kaW5nW3VuZGVmaW5lZF07XG5cdFx0XHRcblx0XHRcdHZhciBjb3VudCA9IDA7XG5cdFx0XHRPYmplY3Qua2V5cyh2bS5ldmVudHMuaG9zdGluZykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcblx0XHRcdFx0Y291bnQrKztcblx0XHRcdH0pO1xuXHRcdFx0Ly90YWtlIGF3YXkgZm9yIGhvc3RpbmcgYWxzb1xuXHRcdFx0aWYoY291bnQgPiAxKSB7XG5cdFx0XHRcdGRlbGV0ZSB2bS5ldmVudHMuaG9zdGluZy51cGRhdGVkO1xuXHRcdFx0XHRkZWxldGUgdm0uZXZlbnRzLmhvc3RpbmdbdW5kZWZpbmVkXTtcblx0XHRcdH1cblx0XHR9KVxuXHRcdC50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdFx0Ly9ub3cgdGhhdCBldmVudHMgYXJlIGxvYWRlZCwgcmVmbGVjdCBpdCBpbiB0aGUgdmlldyBtb2RlbFxuXHRcdFx0Y2hlY2tGb3JFdmVudHMoKTtcblx0XHR9KVxuXG5cdH1cblxuXHQvL2RlY2xhcmUgdmlldyBtZXRob2RzXG5cdHZtLmNyZWF0ZU5ld0V2ZW50ID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGV2ZW50SUQgPSBnZW5lcmF0ZUV2ZW50SUQoKTtcblx0XHR2YXIgbmV3RXZlbnRTaGVycGEgPSB0cmFmZmljVmFsZXQ7XG5cblx0XHQvL2FkZCB0aGUgZXZlbnQgdG8gdGhlIG1vZGFsIChsb2NhbGx5IE9OTFkpXG5cdFx0Y3VycmVudFVzZXIuY3JlYXRlTmV3RXZlbnQoZXZlbnRJRClcblx0XHQvKi50aGVuKGZ1bmN0aW9uKGFmZmlybWF0aXZlUmVzcG9uc2UpIHtcblx0XHRcdC8vcmVwb3J0IHRoZSBzdWNjZXNzXG5cdFx0XHQkbG9nLmluZm8oYWZmaXJtYXRpdmVSZXNwb25zZSk7XG5cdFx0fSlcblx0XHQudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdC8vaWYgdGhlcmUgd2FzIGFuIHVwZGF0ZWQgZmllbGQsIHJlbW92ZSBpdCBub3dcblx0XHRcdGN1cnJlbnRVc2VyLmNsZWFuREJFdmVudHNDYXRlZ29yeSgnaG9zdGluZycpO1xuXG5cdFx0fSlcblx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3JSZXNwb25zZSkge1xuXHRcdFx0Ly9yZXBvcnQgdGhlIGVycm9yXG5cdFx0XHQkbG9nLmluZm8oZXJyb3JSZXNwb25zZSk7XG5cdFx0fSkqL1xuXHRcdFxuXG5cdFx0Ly9yZWRpcmVjdCB0byB0aGUgbmV3IGV2ZW50IHBhZ2VcdFx0XG5cdFx0bmV3RXZlbnRTaGVycGEucmVkaXJlY3RUbygnL2V2ZW50JywgZXZlbnRJRCwgY3VycmVudFVzZXIuZ2V0VUlETG9jYWxseSgpLCBjdXJyZW50VXNlci5nZXRVSURMb2NhbGx5KCkpO1xuXHR9XG5cblx0Ly9leGVjdXRlIHNjcmlwdHNcblx0aW5pdGlhbGl6ZSgpO1xuXG59XG4iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdVc2VySW5mb3JtYXRpb25Db250cm9sbGVyJywgVXNlckluZm9ybWF0aW9uQ29udHJvbGxlcik7XG5cblVzZXJJbmZvcm1hdGlvbkNvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICckZG9jdW1lbnQnLCAnJHJvdXRlUGFyYW1zJywndXNlckRhdGEnLCAndHJhZmZpY1ZhbGV0J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gVXNlckluZm9ybWF0aW9uQ29udHJvbGxlcigkbG9nLCAkZG9jdW1lbnQsICRyb3V0ZVBhcmFtcywgdXNlckRhdGEsIHRyYWZmaWNWYWxldCkge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHRcblx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0dmFyIGN1cnJlbnRVc2VyID0gdXNlckRhdGE7XG5cblx0Ly92aWV3IG1vZGVsIHZhcmlhYmxlc1xuXHR2bS51c2VyID0ge307XG5cdHZtLnRlbXBCaXJ0aGRheTtcblx0dm0udmlldyA9IHtcblx0XHRkYXRhVG9TYXZlOiBmYWxzZSxcblx0XHRpc0RhdGE6IGZhbHNlLFxuXHRcdGJ0bk1zc2c6ICdNb3ZlIE9uLi4uJyxcblx0XHRwcm9jZWVkQnRuOiAnYnRuIGJ0bi1wcmltYXJ5J1xuXHR9O1xuXG5cdC8vbG9jYWwgbWV0aG9kc1xuXHRmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fTtcblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH07XG5cblx0ZnVuY3Rpb24gYnVpbGRUZW1wQmlydGhkYXkoKXtcblx0XHR2YXIgbmV3QmlydGhkYXkgPSBuZXcgRGF0ZSgpO1xuXG5cdFx0Ly9yb3VuZCB0byB0aGUgbmVhcmVzdCBob3VyLCBjdXQgb2ZmIGFueXRoaW5nIHNtYWxsZXJcblx0XHRuZXdCaXJ0aGRheS5zZXRIb3VycygwKTtcblx0XHRuZXdCaXJ0aGRheS5zZXRNaW51dGVzKDApO1xuXHRcdG5ld0JpcnRoZGF5LnNldFNlY29uZHMoMCk7XG5cdFx0bmV3QmlydGhkYXkuc2V0TWlsbGlzZWNvbmRzKDApO1xuXG5cdFx0dm0udGVtcEJpcnRoZGF5ID0gbmV3QmlydGhkYXk7XG5cdH1cblxuXHQvL3ZpZXcgYWNjZXNzaWJsZSBtZXRob2RzXG5cdHZtLmNoZWNrVmFsdWVzID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly90aHJvdyB0aGUgaXNEYXRhIGZsYWcgaWYgc29tZXRoaW5nIGlzIHVwZGF0ZWRcblx0XHR2bS52aWV3LmlzRGF0YSA9IHRydWU7XG5cblx0XHRpZiggIShhbmd1bGFyLmlzVW5kZWZpbmVkKHZtLnVzZXIuY29tcGFueSkgfHwgdm0udXNlci5jb21wYW55ID09PSAnJykgfHwgXG5cdFx0XHQhKGFuZ3VsYXIuaXNVbmRlZmluZWQodm0udXNlci50aXRsZSkgfHwgdm0udXNlci50aXRsZSA9PT0gJycpIHx8IFxuXHRcdFx0IShhbmd1bGFyLmlzVW5kZWZpbmVkKHZtLnVzZXIuZG9iKSB8fCB2bS51c2VyLmRvYiA9PT0gJycpKSBcblx0XHR7XG5cdFx0XHR2bS52aWV3LmRhdGFUb1NhdmUgPSB0cnVlO1xuXHRcdFx0dm0udmlldy5wcm9jZWVkQnRuID0gJ2J0biBidG4tc3VjY2Vzcyc7XG5cdFx0XHR2bS52aWV3LmJ0bk1zc2cgPSAnU2F2ZSAmIENvbnRpbnVlJztcblx0XHR9IGVsc2Uge1xuXHRcdFx0dm0udmlldy5kYXRhVG9TYXZlID0gZmFsc2U7XG5cdFx0XHR2bS52aWV3LnByb2NlZWRCdG4gPSAnYnRuIGJ0bi1wcmltYXJ5Jztcblx0XHRcdHZtLnZpZXcuYnRuTXNzZyA9ICdNb3ZlIE9uLi4uJztcdFxuXHRcdH1cblxuXHR9XG5cblx0dm0udXBkYXRlRE9CID0gZnVuY3Rpb24oKSB7XG5cdFx0dm0udXNlci5kb2IgPSBkYXRlVGltZVRvVW5peFRpbWUodm0udGVtcEJpcnRoZGF5KTtcblx0XHR2bS5jaGVja1ZhbHVlcygpO1xuXHR9XG5cblx0dm0uc2F2ZUFuZE1vdmVPbiA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIHVzZXJJbmZvU2hlcnBhID0gdHJhZmZpY1ZhbGV0O1xuXHRcdHZhciBjdXJyZW50VWlkID0gY3VycmVudFVzZXIuZ2V0VUlETG9jYWxseSgpO1xuXG5cdFx0Ly9jb252ZXJ0IERPQiB0byB1bml4VGltZSBhbmQgc2F2ZVxuXHRcdGlmKHZtLnRlbXBCaXJ0aGRheSAhPT0gMCkgdm0udXBkYXRlRE9CKCk7XG5cdFx0XG5cdFx0Ly9pZiB0aGVyZSBpc24ndCBjdXJyZW50bHkgYSBkb2IsIGdyYWIgZnJvbSB0aGUgcm91dGUgcGFyYW1zXG5cdFx0aWYoY3VycmVudFVpZCA9PSAnJyB8fCBhbmd1bGFyLmlzVW5kZWZpbmVkKGN1cnJlbnRVaWQpKSB7XG5cdFx0XHRjdXJyZW50VXNlci5zZXRVSURMb2NhbGx5KCRyb3V0ZVBhcmFtcy51aWQpO1xuXHRcdH1cblxuXHRcdC8vaWYgdGhlcmUgaXMgbmV3IGRhdGEsIHNhdmUgaXRcblx0XHRpZih2bS52aWV3LmlzRGF0YSkge1xuXHRcdFx0JGxvZy5pbmZvKCdzYXZpbmcgdGhlIG5ldyBkYXRhJyk7XG5cdFx0XHRjdXJyZW50VXNlci51cGRhdGVCaW9Mb2NhbGx5KHZtLnVzZXIpO1xuXHRcdH1cblx0XHRcblx0XHQvL21vdmUgb25cblx0XHR1c2VySW5mb1NoZXJwYS5yZWRpcmVjdFRvKCcvdXNlckV2ZW50cycsIHZtLnVzZXIudWlkKVxuXHR9XG5cblx0ZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHtcblx0XHQvL2xvYWQgRmFzdENsaWNrXG5cdFx0Ly9GYXN0Q2xpY2suYXR0YWNoKCRkb2N1bWVudC5ib2R5KTtcblx0XHRidWlsZFRlbXBCaXJ0aGRheSgpO1xuXG5cdFx0Ly9sb2FkIHVzZXJEYXRhIGxvY2FsbHkgb3IgZnJvbSBkYlxuXHRcdGN1cnJlbnRVc2VyLmxvYWRCaW8oJHJvdXRlUGFyYW1zLnVpZClcblx0XHQudGhlbihmdW5jdGlvbihvYnRhaW5lZFVzZXJEYXRhKSB7XG5cdFx0XHQvL2Fzc2lnbiB1c2VyIHZhbHVlc1xuXHRcdFx0dm0udXNlciA9IG9idGFpbmVkVXNlckRhdGE7XG5cblx0XHRcdC8vYnVpbGQgdGVtcEJpcnRoZGF5XG5cdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChvYnRhaW5lZFVzZXJEYXRhLmRvYikgJiYgb2J0YWluZWRVc2VyRGF0YS5kb2IgIT09ICcnKSB7XG5cdFx0XHRcdHZtLnRlbXBCaXJ0aGRheSA9IHVuaXhUaW1lVG9EYXRlVGltZShvYnRhaW5lZFVzZXJEYXRhLmRvYilcblx0XHRcdH1cblxuXHRcdH0pO1xuXHRcblx0fVxuXG5cdC8vcnVuIHByb2Nlc3Nlc1xuXHRpbml0aWFsaXplKCk7IC8vd2l0aCBpbnRlcm5ldCB1c2UgdGhlIGV2ZW50IGxpc3RlbmVyIGluc3RlYWRcbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5mYWN0b3J5KCdhdXRoU2VydmljZScsIGF1dGhTZXJ2aWNlKTtcblxuYXV0aFNlcnZpY2UuJGluamVjdCA9IFsnJGxvZycsICdiYWNrZW5kU2VydmljZXMnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBhdXRoU2VydmljZSgkbG9nLCBiYWNrZW5kU2VydmljZXMpIHtcblxuXHR2YXIgYWxsQXV0aFNlcnZpY2VzID0ge1xuXHRcdGlzTG9nZ2VkSW46IGlzTG9nZ2VkSW5cblx0fTtcblxuXHRmdW5jdGlvbiBpc0xvZ2dlZEluKCkge1xuXHRcdC8vY2hlY2sgdGhlIHVzZXIgYXV0aGVudGljYWlvbiBzdGF0ZVxuXHRcdHZhciBkYkF1dGhlbnRpY2F0aW9uID0gYmFja2VuZFNlcnZpY2VzO1xuXHRcdFxuXHRcdGRiQXV0aGVudGljYXRpb24uY2hlY2tMb2dpblN0YXR1cygpXG5cdFx0LnRoZW4oZnVuY3Rpb24oc3RhdHVzKSB7XG5cdFx0XHRyZXR1cm4gc3RhdHVzO1xuXHRcdH0pXG5cdFx0LmNhdGNoKGZ1bmN0aW9uKHN0YXR1cykge1xuXHRcdFx0cmV0dXJuIHN0YXR1cztcblx0XHR9KVxuXHR9XG5cdFxuXHRyZXR1cm4gYWxsQXV0aFNlcnZpY2VzO1xuXG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuZmFjdG9yeSgnYmFja2VuZFNlcnZpY2VzJywgYmFja2VuZFNlcnZpY2VzKTtcblxuYmFja2VuZFNlcnZpY2VzLiRpbmplY3QgPSBbJyRsb2cnLCAnJHEnLCAnJHdpbmRvdyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGJhY2tlbmRTZXJ2aWNlcygkbG9nLCAkcSwgJHdpbmRvdykge1xuXHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdHZhciBmYlVSTCA9ICdodHRwczovL21lZXR1cHBsYW5uZXIuZmlyZWJhc2Vpby5jb20vJztcblx0dmFyIGFsbEJhY2tlbmRTZXJ2aWNlcyA9IHtcblx0XHR1dGY4X3RvX2I2NDogdXRmOF90b19iNjQsIFx0XHRcdFx0XHRcdC8vbG9jYWwgZnVuY3Rpb25zIHRvIGNvbnZlcnQgZGF0ZXNcblx0XHRiNjRfdG9fdXRmODogYjY0X3RvX3V0ZjgsXG5cdFx0dW5peFRpbWVUb0RhdGVUaW1lOiB1bml4VGltZVRvRGF0ZVRpbWUsXG5cdFx0ZGF0ZVRpbWVUb1VuaXhUaW1lOiBkYXRlVGltZVRvVW5peFRpbWUsXG5cblx0XHRMb2dpblJlZ2lzdGVyZWRVc2VyOiBMb2dpblJlZ2lzdGVyZWRVc2VyLFx0XHQvL2F1dGhlbnRpY2Fpb25cblx0XHRjaGVja0xvZ2luU3RhdHVzOiBjaGVja0xvZ2luU3RhdHVzLFxuXHRcdGxvZ1VzZXJPdXQ6IGxvZ1VzZXJPdXQsXG5cblx0XHRkb3dubG9hZFVzZXJEYXRhOiBkb3dubG9hZFVzZXJEYXRhLFx0XHRcdFx0Ly9nZXR0ZXIgbWV0aG9kc1xuXHRcdGdldFVzZXJCaW86IGdldFVzZXJCaW8sXG5cdFx0Z2V0VXNlckV2ZW50czogZ2V0VXNlckV2ZW50cyxcblx0XHRnZXRBSG9zdGVkRXZlbnQ6IGdldEFIb3N0ZWRFdmVudCxcblx0XHRnZXRBbkludml0ZWRFdmVudDogZ2V0QW5JbnZpdGVkRXZlbnQsXG5cdFx0ZmluZEd1ZXN0VUlEOiBmaW5kR3Vlc3RVSUQsXG5cdFx0Z2V0R3Vlc3RMaXN0Rm9yRXZlbnQ6IGdldEd1ZXN0TGlzdEZvckV2ZW50LFxuXG5cdFx0Y3JlYXRlTmV3VXNlcjogY3JlYXRlTmV3VXNlcixcdFx0XHRcdFx0Ly9zZXR0ZXIgTWV0aG9kc1xuXHRcdGFkZE5ld1VzZXJUb0RhdGFiYXNlOiBhZGROZXdVc2VyVG9EYXRhYmFzZSxcblx0XHRhZGROZXdVc2VyVG9SZWdVc2Vyc0xpc3Q6IGFkZE5ld1VzZXJUb1JlZ1VzZXJzTGlzdCxcblx0XHR1cGxvYWRVc2VyRGF0YTogdXBsb2FkVXNlckRhdGEsXG5cdFx0dXBsb2FkVXNlckJpbzogdXBsb2FkVXNlckJpbyxcblx0XHRjcmVhdGVIb3N0ZWRFdmVudDogY3JlYXRlSG9zdGVkRXZlbnQsXG5cdFx0YWRkR3Vlc3RUb0hvc3RHdWVzdExpc3RvbkRCOiBhZGRHdWVzdFRvSG9zdEd1ZXN0TGlzdG9uREIsXG5cdFx0Ly9hZGRQZW5kaW5nRXZlbnRGb3JVc2VyOiBhZGRQZW5kaW5nRXZlbnRGb3JVc2VyLFxuXHRcdC8vYWRkUGVuZGluZ0V2ZW50Rm9yR3Vlc3Q6IGFkZFBlbmRpbmdFdmVudEZvckd1ZXN0LFxuXG5cdFx0ZGVsZXRlVXBkYXRlRmllbGQ6IGRlbGV0ZVVwZGF0ZUZpZWxkLFx0XHRcdC8vZGVsZXRlIG1ldGhvZHNcblx0XHRyZW1vdmVJbmNvbXBsZXRlRXZlbnQ6IHJlbW92ZUluY29tcGxldGVFdmVudCxcblxuXHRcdHRoZXJlV2FzQW5VcGRhdGVGaWVsZDogdGhlcmVXYXNBblVwZGF0ZUZpZWxkXHQvL21vZGVsIG1haW50YWluYW5jZVxuXHR9O1xuXG5cdGZ1bmN0aW9uIHV0ZjhfdG9fYjY0KHN0cikge1xuXHRcdHJldHVybiBidG9hKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiBiNjRfdG9fdXRmOChzdHIpIHtcbiAgICBcdHJldHVybiBhdG9iKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNyZWF0ZU5ld1VzZXIoZW1haWwsIHBhc3N3b3JkKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBmaXJlQmFzZUFjY291bnRzID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHRcblx0XHQvL3JldHVybiBhIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcblx0XHRcdGZpcmVCYXNlQWNjb3VudHMuY3JlYXRlVXNlcih7XG5cdFx0XHRcdFxuXHRcdFx0XHRlbWFpbDogZW1haWwsXG5cdFx0XHRcdHBhc3N3b3JkOiBwYXNzd29yZFxuXHRcdFx0XG5cdFx0XHR9LGZ1bmN0aW9uKGVycm9yLCB1c2VyRGF0YSkge1xuXHRcdFx0XHRcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdCgnRXJyb3IgY3JlYXRpbmcgdXNlcjogJyArIGVycm9yKTtcblxuXHRcdFx0XHRlbHNlIHJlc29sdmUodXNlckRhdGEpO1xuXHRcdFx0fSk7XG5cblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGFkZE5ld1VzZXJUb0RhdGFiYXNlKHVpZCwgbmFtZSwgZW1haWwpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIGFwcFVzZXJzID0gYXBwLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCk7XG5cdFx0dmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcblxuXHRcdC8vcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFxuXHRcdFx0YXBwVXNlcnMuc2V0KHsgXG5cdFx0XHRcdCdiaW8nOiB7XG5cdFx0XHRcdFx0J3VpZCc6IHVpZCxcblx0XHRcdFx0XHQnbmFtZSc6IG5hbWUsXG5cdFx0XHRcdFx0J2VtYWlsJzogZW1haWxcblx0XHRcdFx0fSxcblx0XHRcdFx0J2V2ZW50cyc6IHtcblx0XHRcdFx0XHQncGVuZGluZyc6IHtcblx0XHRcdFx0XHRcdCd1cGRhdGVkJzogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0J2hvc3RpbmcnOiB7XG5cdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdCdhdHRlbmRpbmcnOiB7XG5cdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdCdjb21wbGV0ZWQnOiB7XG5cdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoJ0RhdGEgY291bGQgbm90IGJlIHNhdmVkOiAnICsgZXJyb3IpO1xuXHRcdFx0XHRcblx0XHRcdFx0ZWxzZSByZXNvbHZlKCdEYXRhIHNhdmVkIHN1Y2Nlc3NmdWxseS4nKTtcblxuXHRcdFx0fSk7XG5cblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gYWRkTmV3VXNlclRvUmVnVXNlcnNMaXN0KHVpZCwgZW1haWwpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIGI2NEVtYWlsID0gdXRmOF90b19iNjQoZW1haWwpO1xuXHRcdHZhciBSZWdpc3RlcmVkVXNlcnNMaXN0ID0gYXBwLmNoaWxkKCdVaWRzJykuY2hpbGQoYjY0RW1haWwpO1xuXG5cdFx0Ly9yZXR1cm4gYSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XG5cdFx0XHRSZWdpc3RlcmVkVXNlcnNMaXN0LnNldCh1aWQsIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoXCJEYXRhIGNvdWxkIG5vdCBiZSBzYXZlZC4gXCIgKyBlcnJvcik7XG5cdFx0XHRcdGVsc2UgcmVzb2x2ZShcInVpZCBjcmVhdGVkIHN1Y2Vzc2Z1bGx5LlwiKTtcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIExvZ2luUmVnaXN0ZXJlZFVzZXIoZW1haWwsIHBhc3N3b3JkKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdFxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9hdXRoZW50aWNhdGUgdGhlIHVzZXJcblx0XHRcdGFwcC5hdXRoV2l0aFBhc3N3b3JkKHtcblxuXHRcdFx0XHRlbWFpbDogZW1haWwsXG5cdFx0XHRcdHBhc3N3b3JkOiBwYXNzd29yZFxuXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvciwgYXV0aERhdGEpIHtcblx0XHRcdFx0XG5cdFx0XHRcdGlmKGVycm9yKSB7XG5cdFx0XHRcdFx0cmVqZWN0KCdFcnJvciBMb2dnaW5nIEluOiAnICsgZXJyb3IpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vJGxvZy5pbmZvKCdMb2dnZWQgSW4gc3VjY2Vzc2Z1bGx5OiAnICsgYXV0aERhdGEudWlkKTtcblx0XHRcdFx0XHRyZXNvbHZlKGF1dGhEYXRhKTtcblx0XHRcdFx0fVxuXG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXHRcdFxuXHR9XG5cblx0ZnVuY3Rpb24gY2hlY2tMb2dpblN0YXR1cygpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcblx0XHRcdGFwcC5vbkF1dGgoZnVuY3Rpb24oYXV0aERhdGEpIHtcblx0XHRcdFx0aWYgKGF1dGhEYXRhKSB7XG5cdFx0XHRcdCAgICAvLyRsb2cuaW5mbyhcIlVzZXIgXCIgKyBhdXRoRGF0YS51aWQgKyBcIiBpcyBsb2dnZWQgaW4gd2l0aCBcIiArIGF1dGhEYXRhLnByb3ZpZGVyKTtcblx0XHRcdFx0ICAgIHJlc29sdmUodHJ1ZSk7XG5cdFx0XHRcdCAgfSBlbHNlIHtcblx0XHRcdFx0ICAgIC8vJGxvZy5pbmZvKFwiVXNlciBpcyBsb2dnZWQgb3V0XCIpO1xuXHRcdFx0XHQgICAgcmVzb2x2ZShmYWxzZSk7XG5cdFx0XHRcdCAgfVxuXHRcdFx0fSk7XG5cblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGxvZ1VzZXJPdXQoKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXG5cdFx0JGxvZy5pbmZvKCdsb2dnaW5nIHVzZXIgb3V0Jyk7XG5cdFx0YXBwLnVuYXV0aCgpO1xuXHR9XG5cblx0ZnVuY3Rpb24gdXBsb2FkVXNlckRhdGEoYWxsVXNlckRhdGEpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIHVpZCA9IGFsbFVzZXJEYXRhLnVpZDtcblx0XHR2YXIgcmVtb3RlVXNlciA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpO1xuXG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL3RoZSBhY3R1YWwgY2FsbFxuXHRcdFx0cmVtb3RlVXNlci51cGRhdGUoYWxsVXNlckRhdGEsIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoJ1RoZXJlIHdhcyBhIHByb2JsZW0gdXBkYXRpbmcgdGhhdCByZWNvcmQ6ICcgKyBlcnJvcik7XG5cdFx0XHRcdGVsc2UgcmVzb2x2ZSgnYWxsIHVzZXIgZGF0YSB1cGxvYWRlZCBzdWNjZXNzZnVsbHknKTtcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cdFx0XG5cdH1cblxuXHRmdW5jdGlvbiB1cGxvYWRVc2VyQmlvKGN1cnJlbnRVc2VyQmlvKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciB1aWQgPSAoY3VycmVudFVzZXJCaW8udWlkKS50b1N0cmluZygpO1xuXHRcdHZhciByZW1vdGVVc2VyQmlvID0gYXBwLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2JpbycpO1xuXG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHRcdC8vY2FsbCB0byB0aGUgZGJcblx0XHRcdHJlbW90ZVVzZXJCaW8udXBkYXRlKGN1cnJlbnRVc2VyQmlvLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KCdUaGVyZSB3YXMgYSBwcm9ibGVtIHVwZGF0aW5nIHRoYXQgcmVjb3JkOiAnICsgZXJyb3IpO1xuXHRcdFx0XHRlbHNlIHJlc29sdmUoJ2FsbCB1c2VyIGJpbyBkYXRhIHVwbG9hZGVkIHN1Y2Nlc3NmdWxseScpO1xuXHRcdFx0fSlcblxuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gZG93bmxvYWRVc2VyRGF0YSgpIHtcblxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0VXNlckJpbyh1aWQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIHVzZXJCaW8gPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnYmlvJyk7XG5cblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vdGhlIGFjdHVhbCBjYWxsXG5cdFx0XHR1c2VyQmlvLm9uY2UoJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdFx0Ly93aGVuIHRoZSBjYWxsIGlzIHN1Y2Nlc3NmdWwgcmV0dXJuIHRoZSBkYXRhXG5cdFx0XHRcdHJlc29sdmUoc25hcHNob3QudmFsKCkpO1xuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0XHR9IFxuXHRcdFx0fSk7XG5cblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNyZWF0ZUhvc3RlZEV2ZW50KHVpZCwgbmV3RXZlbnQpIHtcblxuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgZXZlbnRJRCA9IG5ld0V2ZW50LmlkO1xuXHRcdHZhciBuZXdIb3N0ZWRFdmVudCA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgnaG9zdGluZycpLmNoaWxkKGV2ZW50SUQpO1xuXG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcblx0XHRcdC8vY2FsbCB0byBmaXJlYmFzZVxuXHRcdFx0bmV3SG9zdGVkRXZlbnQuc2V0KG5ld0V2ZW50LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3I6ICcgKyBlcnJvcik7XG5cdFx0XHRcdGVsc2UgcmVzb2x2ZSgnTmV3IGV2ZW50IHNhdmVkIHRvIERCIHN1Y2Nlc3NmdWxseScpO1xuXHRcdFx0fSlcblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gYWRkR3Vlc3RUb0hvc3RHdWVzdExpc3RvbkRCKG5hbWUsIGd1aWVzdElkLCBldmVudElkLCB1aWQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIGd1ZXN0TGlzdCA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgnaG9zdGluZycpLmNoaWxkKGV2ZW50SWQpLmNoaWxkKCdndWVzdExpc3QnKS5jaGlsZChndWllc3RJZCk7XG5cblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9jYWxsIHRvIHRoZSBkYlxuXHRcdFx0Z3Vlc3RMaXN0LnNldCh7XG5cdFx0XHRcdHJzdnBkOiBmYWxzZSxcblx0XHRcdFx0c3RhdHVzOiAncGVuZGluZycsXG5cdFx0XHRcdG5hbWU6IG5hbWVcblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoJ1RoZXJlIHdhcyBhbiBlcnJvcjogJyArIGVycm9yKTtcblx0XHRcdFx0ZWxzZSByZXNvbHZlKCdOZXcgZXZlbnQgc2F2ZWQgdG8gREIgc3VjY2Vzc2Z1bGx5Jyk7XG5cdFx0XHR9KVxuXG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRVc2VyRXZlbnRzKHVpZCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgdXNlckV2ZW50cyA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKTtcblx0XHRcblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vdGhlIGFjdHVhbCBjYWxsXG5cdFx0XHR1c2VyRXZlbnRzLm9yZGVyQnlLZXkoKS5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHRcdHZhciB1c2VyUHJvZmlsZSA9IHNuYXBzaG90LnZhbCgpO1xuXG5cdFx0XHRcdC8vd2hlbiB0aGUgY2FsbCBpcyBzdWNjZXNzZnVsIHJldHVybiB0aGUgZGF0YVxuXHRcdFx0XHR2YXIgZXZlbnRzUGFja2FnZSA9IHtcblx0XHRcdFx0XHRob3N0aW5nOiB1c2VyUHJvZmlsZS5ob3N0aW5nLFxuXHRcdFx0XHRcdGF0dGVuZGluZzogdXNlclByb2ZpbGUuYXR0ZW5kaW5nLFxuXHRcdFx0XHRcdHBlbmRpbmc6IHVzZXJQcm9maWxlLnBlbmRpbmcsXG5cdFx0XHRcdFx0Y29tcGxldGVkOiB1c2VyUHJvZmlsZS5jb21wbGV0ZWRcblx0XHRcdFx0fTtcblxuXHRcdFx0XHRyZXNvbHZlKGV2ZW50c1BhY2thZ2UpO1xuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0XHR9IFxuXHRcdFx0fSk7XG5cblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldEFIb3N0ZWRFdmVudCh1aWQsIGV2ZW50SWQpIHtcblxuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgaG9zdGVkRXZlbnQgPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ2hvc3RpbmcnKS5jaGlsZChldmVudElkKTtcblxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly90aGUgYWN0dWFsIGNhbGxcblx0XHRcdGhvc3RlZEV2ZW50Lm9uY2UoJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdFx0dmFyIHNlbGVjdEV2ZW50ID0gc25hcHNob3QudmFsKCk7XG5cblx0XHRcdFx0cmVzb2x2ZShzZWxlY3RFdmVudCk7XG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KGVycm9yKTtcblx0XHRcdH0pXG5cdFx0fSlcblx0fVxuXG5cdGZ1bmN0aW9uIGZpbmRHdWVzdFVJRChndWVzdGI2NEVtYWlsKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciB1aWRzID0gYXBwLmNoaWxkKCdVaWRzJyk7XG5cblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vY2FsbCB0byBkYlxuXHRcdFx0dWlkcy5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHRcdC8vZGlzdGlsbCByZXN1bHRzXG5cdFx0XHRcdHZhciBhbGxVc2VycyA9IHNuYXBzaG90LnZhbCgpO1xuXG5cdFx0XHRcdE9iamVjdC5rZXlzKGFsbFVzZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuXHRcdFx0XHRcdC8vY2hlY2sgZWFjaCB1c2VyXG5cdFx0XHRcdFx0aWYoa2V5ID09IGd1ZXN0YjY0RW1haWwpIHtcblx0XHRcdFx0XHRcdHJlc29sdmUoYWxsVXNlcnNba2V5XSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJlamVjdCgnTm8gdXNlciBieSB0aGF0IGVtYWlsJyk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH0pO1xuXG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBnZXRHdWVzdExpc3RGb3JFdmVudChob3N0SWQsIGV2ZW50SWQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIGd1ZXN0TGlzdCA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZChob3N0SWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgnaG9zdGluZycpLmNoaWxkKGV2ZW50SWQpLmNoaWxkKCdndWVzdExpc3QnKTtcblxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9jYWxsIHRoZSBkYlxuXHRcdFx0Z3Vlc3RMaXN0Lm9uY2UoJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdFx0Ly9sb2NhbCB2YXJpYWJsZVxuXHRcdFx0XHR2YXIgdGhlTGlzdCA9IHNuYXBzaG90LnZhbCgpO1xuXG5cdFx0XHRcdHJlc29sdmUodGhlTGlzdCk7XG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3IgZ2V0dGluZyB0aGUgZ3Vlc3QgbGlzdDogJyArICBlcnJvcik7XG5cdFx0XHR9KVxuXHRcdH0pXG5cdH1cblxuXHRmdW5jdGlvbiBnZXRBbkludml0ZWRFdmVudChob3N0SWQsIHVpZCwgZXZlbnRJZCkge31cblxuXHQvKlxuXHRmdW5jdGlvbiBhZGRQZW5kaW5nRXZlbnRGb3JVc2VyKHVpZCwgaG9zdElkLCBldmVudElkLCBldmVudCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgdXNlclBlbmRpbmdMaXN0ID0gYXBwLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdwZW5kaW5nJyk7XG5cblx0XHQvL21hbmdlIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHQvL2NhbGwgdGhlIGRiXG5cdFx0XHR1c2VyUGVuZGluZ0xpc3Quc2V0KHtcblx0XHRcdFx0aG9zdElkOiB7XG5cdFx0XHRcdFx0ZXZlbnRJZDoge1xuXHRcdFx0XHRcdFx0ZXZlbnRcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoXCJFcnJvciBhZGRpbmcgdG8gdXNlciBwZW5kaW5nIGxpc3Q6IFwiICsgZXJyb3IpO1xuXHRcdFx0XHRlbHNlIHJldHVybiByZXNvbHZlKCdBZGRlZCB0byB1c2VyIHBlbmRpbmcgbGlzdCBzdWNjZXNzZnVsbHknKTtcblx0XHRcdH0pXG5cblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gYWRkUGVuZGluZ0V2ZW50Rm9yR3Vlc3QodWlkLCBob3N0SWQsIGV2ZW50SWQsIGV2ZW50KSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciBndWVzdHNQZW5kaW5nTGlzdCA9IGFwcC5jaGlsZCgnVW5yZWdpc3RlcmVkJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ3BlbmRpbmcnKTtcblxuXHRcdC8vbWFuZ2UgdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHRcdC8vY2FsbCB0aGUgZGJcblx0XHRcdHVzZXJQZW5kaW5nTGlzdC5zZXQoe1xuXHRcdFx0XHRob3N0SWQ6IHtcblx0XHRcdFx0XHRldmVudElkOiB7XG5cdFx0XHRcdFx0XHRldmVudFxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdChcIkVycm9yIGFkZGluZyB0byB1c2VyIHBlbmRpbmcgbGlzdDogXCIgKyBlcnJvcik7XG5cdFx0XHRcdGVsc2UgcmV0dXJuIHJlc29sdmUoJ0FkZGVkIHRvIHVzZXIgcGVuZGluZyBsaXN0IHN1Y2Nlc3NmdWxseScpO1xuXHRcdFx0fSlcblxuXHRcdH0pO1xuXG5cdH0qL1xuXG5cdGZ1bmN0aW9uIGRlbGV0ZVVwZGF0ZUZpZWxkKGNhdGVnb3J5LCB1aWQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIGNhdFJlbW92aW5nRnJvbSA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZChjYXRlZ29yeSkuY2hpbGQoJ3VwZGF0ZWQnKTtcblxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Y2F0UmVtb3ZpbmdGcm9tLnNldChudWxsLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3IgZGVsZXRpbmcgdXBkYXRlIGZpZWxkOiAnICsgZXJyb3IpO1xuXHRcdFx0XHRlbHNlIHJlc29sdmUoJ0RlbGV0ZWQgdXBkYXRlIHN1Y2Nlc3NmdWxseScpO1xuXHRcdFx0fSlcblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gcmVtb3ZlSW5jb21wbGV0ZUV2ZW50KHVpZCwgZXZlbnRJZCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgZXZlbnRUb1JlbW92ZSA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgnaG9zdGluZycpLmNoaWxkKGV2ZW50SWQpO1xuXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0dmFyIG9uQ29tcGxldGUgPSBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdHJlamVjdCgnU3luY2hyb25pemF0aW9uIGZhaWxlZCcpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJlc29sdmUoJ1N5bmNocm9uaXphdGlvbiBzdWNjZWVkZWQnKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvL2NhbGwgZG8gZGJcblx0XHRcdGV2ZW50VG9SZW1vdmUucmVtb3ZlKG9uQ29tcGxldGUpO1xuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiB0aGVyZVdhc0FuVXBkYXRlRmllbGQoY2F0ZWdvcnksIHVpZCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgY2F0VG9DaGVjayA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZChjYXRlZ29yeSk7XG5cblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vY2FsbCB0aGUgZGJcblx0XHRcdGNhdFRvQ2hlY2sub25jZSgndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0XHQvL3NhdmUgdGhlIHJlc3BvbnNlXG5cdFx0XHRcdHZhciBjdXJyZW50Q2F0TW9kZWwgPSBzbmFwc2hvdC52YWwoKTtcblx0XHRcdFx0Ly9zaG93IHdoYXQgd2FzIGZvdW5kXG5cdFx0XHRcdC8vbG9vayBmb3IgdGhlIHVwZGF0ZSBmaWVsZFxuXHRcdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChjdXJyZW50Q2F0TW9kZWxbJ3VwZGF0ZWQnXSkpIHJlc29sdmUodHJ1ZSk7XG5cdFx0XHRcdGVsc2UgcmVqZWN0KGZhbHNlKTtcblxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdChlcnJvcik7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXHR9XG5cblx0Ly9yZXR1cm4gdGhlIG9iamVjdFxuXHRyZXR1cm4gYWxsQmFja2VuZFNlcnZpY2VzO1xufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmZhY3RvcnkoJ3RyYWZmaWNWYWxldCcsIHRyYWZmaWNWYWxldCk7XG5cbnRyYWZmaWNWYWxldC4kaW5qZWN0ID0gWyckbG9nJywgJyRsb2NhdGlvbiddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHRyYWZmaWNWYWxldCgkbG9nLCAkbG9jYXRpb24pIHtcblx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHR2YXIgYWxsVHJhZmZpY0NvbnRyb2xzID0ge1xuXHRcdHJlZGlyZWN0VG86IHJlZGlyZWN0VG8sXG5cdFx0ZXZlbnRSb3V0ZTogZXZlbnRSb3V0ZVxuXHR9O1xuXG5cdGZ1bmN0aW9uIHJlZGlyZWN0VG8ocGF0aCwgcGFyYW0xLCBwYXJhbTIsIHBhcmFtMykge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHBhcmFtMSkpIHtcblx0XHRcdHBhdGggPSBwYXRoICsgJy8nICsgcGFyYW0xO1xuXG5cdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChwYXJhbTIpKSB7XG5cdFx0XHRcdC8vZ28gdG8gcGF0aCB3aXRoIDIgcGFyYW1zXG5cdFx0XHRcdHBhdGggPSBwYXRoICsgJy8nICsgcGFyYW0yO1xuXG5cdFx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHBhcmFtMykpIHtcblx0XHRcdFx0XHRwYXRoID0gcGF0aCArICcvJyArIHBhcmFtMztcblxuXHRcdFx0XHRcdCRsb2NhdGlvbi5wYXRoKHBhdGgpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0JGxvY2F0aW9uLnBhdGgocGF0aCk7XG5cdFx0XHR9XG5cdFx0XHQvL2dvIHdpdGggMSBwYXJhbVxuXHRcdFx0JGxvY2F0aW9uLnBhdGgocGF0aCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vanVzdCBnbyB0byBwYXRoXG5cdFx0XHQkbG9jYXRpb24ucGF0aChwYXRoKTtcblx0XHR9XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGV2ZW50Um91dGUoZXZlbnRJZCwgaG9zdElkLCB1c2VySWQsIHNlY3Rpb24pIHtcblxuXHRcdC8vaWYgdGhlcmUgaXNuJ3QgYSBzZWN0aW9uIHNldCB0byBkZWZhdWx0XG5cdFx0aWYoYW5ndWxhci5pc1VuZGVmaW5lZChzZWN0aW9uKSkgc2VjdGlvbiA9IDE7XG5cblx0XHQvL2lmIHRoZSBob3N0SWQgYW5kIHVzZXJJZCBtYXRjaCwgbGF1bmNoIGhvc3Qgdmlld1xuXHRcdGlmKGhvc3RJZCA9PT0gdXNlcklkKSB7IFxuXHRcdFx0dmFyIHBhdGggPSAnL2V2ZW50L2hvc3QvJyArIGV2ZW50SWQgKyAnLycgKyB1c2VySWQgKyAnLycrIHNlY3Rpb247XG5cdFx0XHQvL3JlZGlyZWN0XG5cdFx0XHQkbG9jYXRpb24ucGF0aChwYXRoKTtcblx0XHR9XG5cdFx0Ly9pZiB0aGUgaG9zdElkIGFuZCB1c2VySWQgRE9OJ1QgbWF0Y2gsIGxhdW5jaCBndWVzdCB2aWV3XG5cdFx0ZWxzZSB7XG5cdFx0XHR2YXIgcGF0aCA9ICcvZXZlbnQvZ3Vlc3QvJyArIGV2ZW50SWQgKyAnLycgKyB1c2VySWQgKyAnLycgKyBob3N0SWQ7XG5cdFx0XHQvL3JlZGlyZWN0XG5cdFx0XHQkbG9jYXRpb24ucGF0aChwYXRoKTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gYWxsVHJhZmZpY0NvbnRyb2xzO1xufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmZhY3RvcnkoJ3VzZXJEYXRhJywgdXNlckRhdGEpO1xuXG51c2VyRGF0YS4kaW5qZWN0ID0gWyckbG9nJywgJyRxJywgJ2JhY2tlbmRTZXJ2aWNlcyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHVzZXJEYXRhKCRsb2csICRxLCBiYWNrZW5kU2VydmljZXMpIHtcblx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHR2YXIgY3VycmVudFVzZXIgPSB7XG5cdFx0YmlvOiB7IFxuXHRcdFx0dWlkOiAnJyxcblx0XHRcdG5hbWU6ICcnLFxuXHRcdFx0ZW1haWw6ICcnLFxuXHRcdFx0Y29tcGFueTogJycsXG5cdFx0XHR0aXRsZTogJycsXG5cdFx0XHRkb2I6IDBcblx0XHR9LFxuXHRcdGV2ZW50czoge1xuXHRcdFx0aG9zdGluZzoge30sXG5cdFx0XHRwZW5kaW5nOiB7fSxcblx0XHRcdGF0dGVuZGluZzoge30sXG5cdFx0XHRjb21wbGV0ZWQ6IHt9XG5cdFx0fVxuXHR9O1xuXG5cdHZhciBhY3RpdmVFdmVudCA9IHt9O1xuXG5cdC8vbG9jYWwgZnVuY3Rpb25zXG5cdGZ1bmN0aW9uIHV0ZjhfdG9fYjY0KHN0cikge1xuXHRcdHJldHVybiBidG9hKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiBiNjRfdG9fdXRmOChzdHIpIHtcbiAgICBcdHJldHVybiBhdG9iKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fTtcblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH07XG5cblx0dmFyIGFsbFVzZXJEYXRhID0ge1xuXHRcdGJpb1ByaW1hcmllc0FyZUNvbXBsZXRlTG9jYWxseTogYmlvUHJpbWFyaWVzQXJlQ29tcGxldGVMb2NhbGx5LFx0XHQvL21vZGFsIGFuYWx5c2lzXG5cdFx0ZXZlbnRFeGlzdHNMb2NhbGx5OiBldmVudEV4aXN0c0xvY2FsbHksXG5cdFx0dGhpc0lzVGhlSG9zdEVtYWlsOiB0aGlzSXNUaGVIb3N0RW1haWwsXG5cdFx0Z3Vlc3RJbnZpdGVkQWxyZWFkeTogZ3Vlc3RJbnZpdGVkQWxyZWFkeSxcblx0XHR0aGVyZUlzQW5BY3RpdmVFdmVudDogdGhlcmVJc0FuQWN0aXZlRXZlbnQsXG5cblx0XHRjbGVhbkV2ZW50czogY2xlYW5FdmVudHMsXHRcdFx0XHRcdFx0XHQvL21vZGVsIG1haW50YWluYW5jZVxuXG5cdFx0Z2V0VUlETG9jYWxseTogZ2V0VUlETG9jYWxseSxcdFx0XHRcdFx0XHQvL2dldHRlciBNZXRob2RzXG5cdFx0Z2V0TmFtZUxvY2FsbHk6IGdldE5hbWVMb2NhbGx5LFxuXHRcdGdldEVtYWlsTG9jYWxseTogZ2V0RW1haWxMb2NhbGx5LFxuXHRcdGdldENvbXBhbnlMb2NhbGx5OiBnZXRDb21wYW55TG9jYWxseSxcblx0XHRnZXRUaXRsZUxvY2FsbHk6IGdldFRpdGxlTG9jYWxseSxcblx0XHRnZXRET0JMb2NhbGx5OiBnZXRET0JMb2NhbGx5LFxuXHRcdGdldEZ1bGxCaW9Mb2NhbGx5OiBnZXRGdWxsQmlvTG9jYWxseSxcblx0XHRnZXRPbmVVc2VyRXZlbnRMb2NhbGx5OiBnZXRPbmVVc2VyRXZlbnRMb2NhbGx5LFxuXHRcdGdldFVzZXJFdmVudHNMb2NhbGx5OiBnZXRVc2VyRXZlbnRzTG9jYWxseSxcblx0XHRnZXRBbGxVc2VyRXZlbnRzTG9jYWxseTogZ2V0QWxsVXNlckV2ZW50c0xvY2FsbHksXG5cdFx0Z2V0QWN0aXZlRXZlbnQ6IGdldEFjdGl2ZUV2ZW50LFxuXG5cdFx0c2V0VUlETG9jYWxseTogc2V0VUlETG9jYWxseSxcdFx0XHRcdFx0XHQvL3NldHRlciBNZXRob2RzXG5cdFx0c2V0TmFtZUxvY2FsbHk6IHNldE5hbWVMb2NhbGx5LFxuXHRcdHNldEVtYWlsTG9jYWxseTogc2V0RW1haWxMb2NhbGx5LFxuXHRcdHNldENvbXBhbnlMb2NhbGx5OiBzZXRDb21wYW55TG9jYWxseSxcblx0XHRzZXRUaXRsZUxvY2FsbHk6IHNldFRpdGxlTG9jYWxseSxcblx0XHRzZXRET0JMb2NhbGx5OiBzZXRET0JMb2NhbGx5LFxuXHRcdHNldFByaW1hcmllc0xvY2FsbHk6IHNldFByaW1hcmllc0xvY2FsbHksXG5cdFx0dXBkYXRlVXNlckV2ZW50c0xvY2FsbHk6IHVwZGF0ZVVzZXJFdmVudHNMb2NhbGx5LFxuXHRcdHVwZGF0ZUFsbFVzZXJFdmVudHNMb2NhbGx5OiB1cGRhdGVBbGxVc2VyRXZlbnRzTG9jYWxseSxcblx0XHR1cGRhdGVCaW9Mb2NhbGx5OiB1cGRhdGVCaW9Mb2NhbGx5LFxuXHRcdGFkZEd1ZXN0VG9Ib3N0R3Vlc3RMaXN0OiBhZGRHdWVzdFRvSG9zdEd1ZXN0TGlzdCxcblx0XHRzZXRBY3RpdmVFdmVudDogc2V0QWN0aXZlRXZlbnQsXG5cdFx0YWRkR3Vlc3RUb0FjdGl2ZUV2ZW50OiBhZGRHdWVzdFRvQWN0aXZlRXZlbnQsXG5cdFx0c2F2ZU5ld0hvc3RpbmdFdmVudDogc2F2ZU5ld0hvc3RpbmdFdmVudCxcblxuXHRcdHJlbW92ZVVzZXJFdmVudHNMb2NhbGx5OiByZW1vdmVVc2VyRXZlbnRzTG9jYWxseSwgXHQvL3JlbW92ZSBkYXRhXG5cdFx0XG5cdFx0Z2V0RnVsbFJlbW90ZURCZm9yTG9jYWw6IGdldEZ1bGxSZW1vdGVEQmZvckxvY2FsLFx0Ly9sb2NhbC1yZW1vdGUgaW50ZXJhY2lvbnNcblx0XHRnZXRSZW1vdGVCaW9Gb3JMb2NhbDogZ2V0UmVtb3RlQmlvRm9yTG9jYWwsXHRcdFx0XG5cdFx0Z2V0UmVtb3RlRXZlbnRzRm9yTG9jYWw6IGdldFJlbW90ZUV2ZW50c0ZvckxvY2FsLFxuXHRcdGdldE9uZVJlbW90ZUV2ZW50Rm9yTG9jYWw6IGdldE9uZVJlbW90ZUV2ZW50Rm9yTG9jYWwsXG5cdFx0c2V0RnVsbFJlbW90ZURCZnJvbUxvY2FsOiBzZXRGdWxsUmVtb3RlREJmcm9tTG9jYWwsXG5cdFx0c2V0UmVtb3RlQmlvRnJvbUxvY2FsOiBzZXRSZW1vdGVCaW9Gcm9tTG9jYWwsXG5cdFx0c2V0QVJlbW90ZUV2ZW50RnJvbUxvY2FsOiBzZXRBUmVtb3RlRXZlbnRGcm9tTG9jYWwsXG5cdFx0c2V0UmVtb3RlRXZlbnRzRnJvbUxvY2FsOiBzZXRSZW1vdGVFdmVudHNGcm9tTG9jYWwsXG5cdFx0Y2xlYW5EQkV2ZW50c0NhdGVnb3J5OiBjbGVhbkRCRXZlbnRzQ2F0ZWdvcnksXG5cdFx0Z2V0VXNlcklkRm9yR3Vlc3Q6IGdldFVzZXJJZEZvckd1ZXN0LFxuXHRcdGdldEV2ZW50R3Vlc3RMaXN0OiBnZXRFdmVudEd1ZXN0TGlzdCxcblx0XHRyZW1vdmVJbmNvbXBsZXRlRXZlbnRGcm9tREI6IHJlbW92ZUluY29tcGxldGVFdmVudEZyb21EQixcblxuXHRcdGxvYWRCaW86IGxvYWRCaW8sXHRcdFx0XHRcdFx0XHRcdFx0Ly9leHRlcm5hbCBtZXRob2RzXG5cdFx0bG9hZEV2ZW50c1Byb2dyZXNzaXZlbHk6IGxvYWRFdmVudHNQcm9ncmVzc2l2ZWx5LFxuXHRcdGxvYWRBbkV2ZW50UHJvZ3Jlc3NpdmVseTogbG9hZEFuRXZlbnRQcm9ncmVzc2l2ZWx5LFxuXHRcdGNyZWF0ZU5ld0V2ZW50OiBjcmVhdGVOZXdFdmVudCxcblx0XHR1cGRhdGVQZW5kaW5nRXZlbnRzTGlzdEZvckd1ZXN0OiB1cGRhdGVQZW5kaW5nRXZlbnRzTGlzdEZvckd1ZXN0XG5cdH1cblxuXHQvL2FuYWx5c2lzIG1ldGhvZHNcblx0ZnVuY3Rpb24gYmlvUHJpbWFyaWVzQXJlQ29tcGxldGVMb2NhbGx5KCkge1xuXHRcdGlmKCBjdXJyZW50VXNlci5iaW8udWlkICE9PSAnJyAmJlxuXHRcdFx0Y3VycmVudFVzZXIuYmlvLm5hbWUgIT09ICcnICYmXG5cdFx0XHRjdXJyZW50VXNlci5iaW8uZW1haWwgIT09ICcnXG5cdFx0XHQpXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRlbHNlIHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGZ1bmN0aW9uIGV2ZW50RXhpc3RzTG9jYWxseSh0eXBlLCBldmVudElkKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoY3VycmVudFVzZXIuZXZlbnRzW3R5cGVdW2V2ZW50SWRdKSkgcmV0dXJuIHRydWU7XG5cdFx0ZWxzZSByZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRmdW5jdGlvbiB0aGlzSXNUaGVIb3N0RW1haWwoZW1haWwsIGV2ZW50SWQpIHtcblx0XHRcblx0XHQvL2NoZWNrIGlmIGEgYmlvIGlzIGxvYWRlZFxuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGN1cnJlbnRVc2VyLmJpby5lbWFpbCkpIHtcblx0XHRcdFxuXHRcdFx0aWYoY3VycmVudFVzZXIuYmlvLmVtYWlsICE9ICcnKSB7XG5cdFx0XHRcdC8vY2hlY2sgZm9yIGEgbWF0Y2hcblx0XHRcdFx0aWYoZW1haWwgPT0gY3VycmVudFVzZXIuYmlvLmVtYWlsKSB7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cblx0XHRcdH0gXG5cdFx0XHRcblx0XHR9IFxuXHRcdFxuXHRcdC8vaWYgdGhhdCBkaWRuJ3Qgd29yayBjaGVjayB0aGUgY3VycmVudCBldmVudFxuXHRcdFxuXHRcdGlmKGN1cnJlbnRVc2VyLmV2ZW50cy5ob3N0aW5nW2V2ZW50SWRdLmhvc3QuZW1haWwgPT0gZW1haWwpIHtcblx0XHRcdFxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdFxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRcblx0fVxuXG5cdGZ1bmN0aW9uIGd1ZXN0SW52aXRlZEFscmVhZHkoZW1haWwsIGV2ZW50SWQpIHtcblx0XHQvL2ZpcnN0IGNoZWNrIGlmIHRoZXJlIGlzIGEgZ3Vlc3QgbGlzdFxuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGN1cnJlbnRVc2VyLmV2ZW50cy5ob3N0aW5nW2V2ZW50SWRdLmd1ZXN0TGlzdCkpIHtcblx0XHRcdC8vaWYgdGhlcmUgaXMgYSBsaXN0LCBjaGVjayBmb3IgdGhlIGVtYWlsXG5cblx0XHRcdC8vY29udmVydCBlbWFpbCBmb3IgZXZhbHVhdGlvblxuXHRcdFx0cmVmRW1haWwgPSB1dGY4X3RvX2I2NChlbWFpbCk7XG5cblx0XHRcdC8vcnVuIHRocm91Z2ggZWFjaCBndWVzdCBhbmQgY29tcGFyZVxuXHRcdFx0T2JqZWN0LmtleXMoY3VycmVudFVzZXIuZXZlbnRzLmhvc3RpbmdbZXZlbnRJZF0uZ3Vlc3RMaXN0KS5mb3JFYWNoKGZ1bmN0aW9uKGI2NEVtYWlsKSB7XG5cdFx0XHRcdGlmKHJlZkVtYWlsID09IGI2NEVtYWlsKSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdhbiBlbWFpbCBtYXRjaCB3YXMgZm91bmQsIHRoaXMgZ3Vlc3QgaGFzIGJlZW4gaW52aXRlZCBhbHJlYWR5Jyk7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdubyBlbWFpbCBtYXRjaCBmb3VuZCwgb2sgdG8gaW52aXRlIGd1ZXN0Jyk7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vaWYgbm8gZ3Vlc3QgbGlzdCB0aGFuIGNhbid0IGFscmVhZHkgYmUgb24gaXRcblx0XHRcdCRsb2cuaW5mbygnbm8gZ3Vlc3RsaXN0Jyk7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdH1cblxuXHRmdW5jdGlvbiB0aGVyZUlzQW5BY3RpdmVFdmVudCgpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChhY3RpdmVFdmVudC5ldmVudCkpIHtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0XHRlbHNlIHJldHVybiBmYWxzZTtcblx0fVxuXG5cdC8vbW9kZWwgbWFpbnRhaW5hbmNlXG5cdGZ1bmN0aW9uIGNsZWFuRXZlbnRzKHR5cGUpIHtcblx0XHQvL2l0ZXJhdGUgdGhyb3VnaCBvYmplY3RzIGluIG9iamVjdFxuXHRcdE9iamVjdC5rZXlzKGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXSkuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcblx0XHRcdC8vaWYgYW55IGFyZSBub24tb2JqZWN0cywgZGVsZXRlIHRoZW1cblx0XHRcdGlmKCFhbmd1bGFyLmlzT2JqZWN0KGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXVtrZXldKSkge1xuXHRcdFx0XHRkZWxldGUgY3VycmVudFVzZXIuZXZlbnRzW3R5cGVdW2tleV07XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHQvL2dldHRlciBtZXRob2RzXG5cdGZ1bmN0aW9uIGdldFVJRExvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmJpby51aWQ7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXROYW1lTG9jYWxseSgpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuYmlvLm5hbWU7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRFbWFpbExvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmJpby5lbWFpbDtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldENvbXBhbnlMb2NhbGx5KCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5iaW8uY29tcGFueTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldFRpdGxlTG9jYWxseSgpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuYmlvLnRpdGxlO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXRET0JMb2NhbGx5KCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5iaW8uZG9iO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0RnVsbEJpb0xvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHVpZDogY3VycmVudFVzZXIuYmlvLnVpZCxcblx0XHRcdG5hbWU6IGN1cnJlbnRVc2VyLmJpby5uYW1lLFxuXHRcdFx0ZW1haWw6IGN1cnJlbnRVc2VyLmJpby5lbWFpbCxcblx0XHRcdGNvbXBhbnk6IGN1cnJlbnRVc2VyLmJpby5jb21wYW55LFxuXHRcdFx0dGl0bGU6IGN1cnJlbnRVc2VyLmJpby50aXRsZSxcblx0XHRcdGRvYjogY3VycmVudFVzZXIuYmlvLmRvYlxuXHRcdH07XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRPbmVVc2VyRXZlbnRMb2NhbGx5KHR5cGUsIGV2ZW50SWQpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuZXZlbnRzW3R5cGVdW2V2ZW50SWRdO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0VXNlckV2ZW50c0xvY2FsbHkodHlwZSkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5ldmVudHNbdHlwZV07XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRBbGxVc2VyRXZlbnRzTG9jYWxseSgpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuZXZlbnRzO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0QWN0aXZlRXZlbnQoKSB7XG5cdFx0cmV0dXJuIGFjdGl2ZUV2ZW50O1xuXHR9XG5cblx0Ly9zZXR0ZXIgbWV0aG9kc1xuXHRmdW5jdGlvbiBzZXRVSURMb2NhbGx5KHVpZCkge1xuXHRcdGN1cnJlbnRVc2VyLmJpby51aWQgPSB1aWQ7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXROYW1lTG9jYWxseShuYW1lKSB7XG5cdFx0Y3VycmVudFVzZXIuYmlvLm5hbWUgPSBuYW1lO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0RW1haWxMb2NhbGx5KGVtYWlsKSB7XG5cdFx0Y3VycmVudFVzZXIuYmlvLmVtYWlsID0gZW1haWw7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXRDb21wYW55TG9jYWxseShjb21wYW55KSB7XG5cdFx0Y3VycmVudFVzZXIuYmlvLmNvbXBhbnkgPSBjb21wYW55O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzZXRUaXRsZUxvY2FsbHkodGl0bGUpIHtcblx0XHRjdXJyZW50VXNlci5iaW8udGl0bGUgPSB0aXRsZTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldERPQkxvY2FsbHkoZG9iKSB7XG5cdFx0Y3VycmVudFVzZXIuYmlvLmRvYiA9IGRvYjtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldFByaW1hcmllc0xvY2FsbHkoZW1haWwsIG5hbWUsIHVpZCkge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGVtYWlsKSkgc2V0RW1haWxMb2NhbGx5KGVtYWlsKTtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChuYW1lKSkgc2V0TmFtZUxvY2FsbHkobmFtZSk7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodWlkKSkgc2V0VUlETG9jYWxseSh1aWQpO1xuXHR9XG5cblx0ZnVuY3Rpb24gdXBkYXRlVXNlckV2ZW50c0xvY2FsbHkodHlwZSwgZXZlbnQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGV2ZW50SUQgPSBldmVudC5pZDtcblxuXHRcdC8vY2hlY2sgaWYgdGhlIG1vZGVsIG5lZWRzIHRvIGJlIGNsZWFuZWRcblx0XHRjbGVhbkV2ZW50cyh0eXBlKTtcblx0XHQvL3RoZW4gbG9hZCB0aGUgbmV3IGV2ZW50XG5cdFx0Y3VycmVudFVzZXIuZXZlbnRzW3R5cGVdW2V2ZW50SURdID0gZXZlbnQ7XG5cdH1cblxuXHRmdW5jdGlvbiB1cGRhdGVBbGxVc2VyRXZlbnRzTG9jYWxseShhbGxVc2VyRXZlbnRzKSB7XG5cdFx0Y3VycmVudFVzZXIuZXZlbnRzID0gYWxsVXNlckV2ZW50cztcblx0fVxuXG5cdGZ1bmN0aW9uIHVwZGF0ZUJpb0xvY2FsbHkodXNlckJpbykge1xuXHRcdC8vdXBkYXRlIGxvY2FsIHZhbHVlc1xuXHRcdHNldE5hbWVMb2NhbGx5KHVzZXJCaW8ubmFtZSk7XG5cdFx0c2V0RW1haWxMb2NhbGx5KHVzZXJCaW8uZW1haWwpO1xuXHRcdHNldENvbXBhbnlMb2NhbGx5KHVzZXJCaW8uY29tcGFueSk7XG5cdFx0c2V0VGl0bGVMb2NhbGx5KHVzZXJCaW8udGl0bGUpO1xuXHRcdHNldERPQkxvY2FsbHkodXNlckJpby5kb2IpO1xuXHRcdC8vc2F2ZSB0byBkYlxuXHRcdHNldFJlbW90ZUJpb0Zyb21Mb2NhbCgpO1xuXHR9XG5cblx0ZnVuY3Rpb24gYWRkR3Vlc3RUb0hvc3RHdWVzdExpc3QobmFtZSwgZW1haWwsIGd1ZXN0SWQsIGV2ZW50SWQsIHVpZCkge1xuXHRcdC8vY2FsbCB0byB0aGUgZGIgc28gcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vY29udmVydCB0aGUgZW1haWwgaWYgb25lIHdhcyBwYXNzZWRcblx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGVtYWlsKSkge1xuXHRcdFx0XHRndWVzdElkID0gdXRmOF90b19iNjQoZW1haWwpO1xuXHRcdFx0fVxuXG5cdFx0XHRkYi5hZGRHdWVzdFRvSG9zdEd1ZXN0TGlzdG9uREIobmFtZSwgZ3Vlc3RJZCwgZXZlbnRJZCwgdWlkKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24ocG9zaXRpdmVSZXN1bHQpIHtcblx0XHRcdFx0cmVzb2x2ZShwb3NpdGl2ZVJlc3VsdCk7XG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKG5lZ2F0aXZlUmVzdWx0KSB7XG5cdFx0XHRcdHJlamVjdChuZWdhdGl2ZVJlc3VsdCk7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBzZXRBY3RpdmVFdmVudChldmVudCkge1xuXHRcdC8vXG5cdFx0YWN0aXZlRXZlbnQgPSBldmVudDtcblx0fVxuXG5cdGZ1bmN0aW9uIGFkZEd1ZXN0VG9BY3RpdmVFdmVudChuZXdHdWVzdCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIHVpZCA9IG5ld0d1ZXN0LnVpZDtcblxuXHRcdC8vaWYgdGhpcyBpcyB0aGUgZmlyc3QgZ3Vlc3QsIGNyZWF0ZSB0aGUgbGlzdCBvYmplY3Rcblx0XHRpZighYW5ndWxhci5pc09iamVjdChhY3RpdmVFdmVudC5ldmVudC5ndWVzdExpc3QpKSB7XG5cdFx0XHRhY3RpdmVFdmVudC5ldmVudC5ndWVzdExpc3QgPSB7fTtcblx0XHR9XG5cblx0XHQvL2FkZCB0aGUgZ3Vlc3QgdG8gdGhlIGxpc3Rcblx0XHRhY3RpdmVFdmVudC5ldmVudC5ndWVzdExpc3RbdWlkXSA9IG5ld0d1ZXN0Lmd1ZXN0O1xuXG5cdH1cblxuXHRmdW5jdGlvbiBnZXRVc2VySWRGb3JHdWVzdChlbWFpbCkge1xuXHRcdC8vY2FsbCB0byB0aGUgZGIgc28gcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vY29udmVydCB0aGUgZW1haWxcblx0XHRcdGd1ZXN0RW1haWwgPSB1dGY4X3RvX2I2NChlbWFpbCk7XG5cblx0XHRcdGRiLmZpbmRHdWVzdFVJRChndWVzdEVtYWlsKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24odWlkKSB7XG5cdFx0XHRcdHJlc29sdmUodWlkKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3JSZXNwb25zZSkge1xuXHRcdFx0XHRyZWplY3QoZXJyb3JSZXNwb25zZSk7XG5cdFx0XHR9KVxuXG5cdFx0fSk7XG5cdH1cblxuXHQvL2RlbGV0ZSBNZXRob2RzXG5cdGZ1bmN0aW9uIHJlbW92ZVVzZXJFdmVudHNMb2NhbGx5KHR5cGUsIGV2ZW50KSB7XG5cdFx0Ly9kb2VzIHRoaXMgd29yaz9cblx0XHRkZWxldGUgY3VycmVudFVzZXIuZXZlbnRzW3R5cGVdW2V2ZW50LmlkXTtcblx0fVxuXG5cdC8vcmVtb3RlLWxvY2FsIGludGVyYWN0aW9uIE1ldGhvZHNcblx0ZnVuY3Rpb24gZ2V0RnVsbFJlbW90ZURCZm9yTG9jYWwoKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0XHRkYi5kb3dubG9hZFVzZXJEYXRhKClcblx0XHQudGhlbihmdW5jdGlvbihyZW1vdGVVc2VyRGF0YSkge1xuXHRcdFx0Y3VycmVudFVzZXIgPSByZW1vdGVVc2VyRGF0YTtcblx0XHR9KVxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0UmVtb3RlQmlvRm9yTG9jYWwodWlkKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cdFx0XHRcdFxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vZ28gb3V0IHRvIHRoZSBkYiBiZWZvcmUgcmVzb2x2aW5nXG5cdFx0XHRkYi5nZXRVc2VyQmlvKHVpZClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKHVzZXJCaW8pIHtcblxuXHRcdFx0XHRyZXNvbHZlKHVzZXJCaW8pO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRyZWplY3QoJ1RoZXJlIHdhcyBhbiBlcnJvciByZWFkaW5nIHRoZSB1c2VyIGJpbzogJyArIGVycm9yKTtcblx0XHRcdH0pXG5cdFx0fSk7XG5cdFx0XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRSZW1vdGVFdmVudHNGb3JMb2NhbCgpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblx0XHRcdFx0XG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHQvL2dvIG91dCB0byB0aGUgZGIgYmVmb3JlIHJlc29sdmluZ1xuXHRcdFx0ZGIuZ2V0VXNlckV2ZW50cyhnZXRVSURMb2NhbGx5KCkpXG5cdFx0XHQudGhlbihmdW5jdGlvbihvYnRhaW5lZFVzZXJFdmVudHMpIHtcblxuXHRcdFx0XHQvL3NhdmUgdGhlIHJlc3VsdHMgdG8gdGhlIGxvY2FsIGRhdGFic2Vcblx0XHRcdFx0T2JqZWN0LmtleXMob2J0YWluZWRVc2VyRXZlbnRzKS5mb3JFYWNoKGZ1bmN0aW9uKGV2ZW50VHlwZSkge1xuXHRcdFx0XHRcdC8vd2l0aGluIGVhY2ggZXZlbnQgdHlwZSBpdGVyYXRlIHRocm91Z2ggdGhlIGFjdHVhbCBldmVudHNcblx0XHRcdFx0XHRPYmplY3Qua2V5cyhvYnRhaW5lZFVzZXJFdmVudHNbZXZlbnRUeXBlXSkuZm9yRWFjaChmdW5jdGlvbihldmVudCkge1xuXHRcdFx0XHRcdFx0Ly9vbmNlIHdlIHNlZSB0aGUgZXZlbnRzLCBzYXZlIHRoZW0gdG8gdGhlIGxvY2FsIG1vZGVsXG5cblx0XHRcdFx0XHRcdHVwZGF0ZVVzZXJFdmVudHNMb2NhbGx5KGV2ZW50VHlwZSwgb2J0YWluZWRVc2VyRXZlbnRzW2V2ZW50VHlwZV1bZXZlbnRdKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdFxuXHRcdFx0XHQvL3JldHVybiB0aGUgcmVzdWx0cyB0byB0aGUgcmVxdWVzdGluZyBvYmplY3Rcblx0XHRcdFx0cmVzb2x2ZShvYnRhaW5lZFVzZXJFdmVudHMpO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRyZWplY3QoJ1RoZXJlIHdhcyBhbiBlcnJvciByZWFkaW5nIHRoZSB1c2VyIGV2ZW50czogJyArIGVycm9yKTtcblx0XHRcdH0pXG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRPbmVSZW1vdGVFdmVudEZvckxvY2FsKGV2ZW50SWQpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFxuXHRcdFx0Ly9nb2luZyB0byBiYWNrZW5kIHNlcnZpY2VzXG5cdFx0XHRkYi5nZXRBSG9zdGVkRXZlbnQoZ2V0VUlETG9jYWxseSgpLCBldmVudElkKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24ob2J0YWluZWRFdmVudCkge1xuXG5cdFx0XHRcdC8vc2F2ZSB0aGUgcmVzdWx0IHRvIHRoZSBsb2NhbCBtb2RlbFxuXHRcdFx0XHRcblx0XHRcdFx0Ly9yZXR1cm4gdGhlIHJlc3VsdCB0byB0aGUgcmVxdWVzdGluZyBvYmplY3Rcblx0XHRcdFx0cmVzb2x2ZShvYnRhaW5lZEV2ZW50KTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0cmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3IgcmVhZGluZyB0aGUgdXNlciBldmVudDogJyArIGVycm9yKTtcblx0XHRcdH0pXG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXRGdWxsUmVtb3RlREJmcm9tTG9jYWwoKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0XHRkYi51cGxvYWRVc2VyRGF0YShjdXJyZW50VXNlcik7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXRSZW1vdGVCaW9Gcm9tTG9jYWwoKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0XHRkYi51cGxvYWRVc2VyQmlvKGN1cnJlbnRVc2VyLmJpbyk7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXRBUmVtb3RlRXZlbnRGcm9tTG9jYWwoKSB7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIHNldFJlbW90ZUV2ZW50c0Zyb21Mb2NhbCh1aWQsIGV2ZW50KSB7XG5cdFx0Ly9kZWNsYXIgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0JGxvZy5pbmZvKCdzZW5kaW5nIHRoaXMgdG8gdGhlIHNlcnZlcicpO1xuXHRcdCRsb2cuaW5mbyhldmVudCk7XG5cdFx0XG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly9zZW5kIHRoZSBldmVudCB0byB0aGUgZGJcblx0XHRcdGRiLmNyZWF0ZUhvc3RlZEV2ZW50KHVpZCwgZXZlbnQpXG5cdFx0XHQudGhlbihmdW5jdGlvbihzdWNjZXNzTWVzc2FnZSkge1xuXHRcdFx0XHRyZXNvbHZlKHN1Y2Nlc3NNZXNzYWdlKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3JNZXNzYWdlKSB7XG5cdFx0XHRcdHJlamVjdChlcnJvck1lc3NhZ2UpO1xuXHRcdFx0fSlcblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gY2xlYW5EQkV2ZW50c0NhdGVnb3J5KGNhdGVnb3J5KSB7XG5cdFx0Ly9kZWNsYXIgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0Ly9yZW1vdmUgJ3VwZGF0ZWQnIG9iamVjdCBpZiBuZWVkIGJlXG5cdFx0Ly9kYiBjYWxsIHNvIHJldHVybiBhIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL2NoZWNrIGZvciBvYmplY3Rcblx0XHRcdGRiLnRoZXJlV2FzQW5VcGRhdGVGaWVsZChjYXRlZ29yeSwgZ2V0VUlETG9jYWxseSgpKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24oYWZmaXJtYXRpdmVSZXNwb25zZSkge1xuXHRcdFx0XHQvL2lmIHRoZXJlIHdhcyBhbiB1cGRhdGUgZmllbGQsIGRlbGV0ZSBpdFxuXHRcdFx0XHRkYi5kZWxldGVVcGRhdGVGaWVsZChjYXRlZ29yeSwgZ2V0VUlETG9jYWxseSgpKVxuXHRcdFx0XHQudGhlbihmdW5jdGlvbihhZmZpcm1hdGl2ZVJlc3BvbnNlKSB7ICRsb2cuaW5mbyhhZmZpcm1hdGl2ZVJlc3BvbnNlKTsgfSApXG5cdFx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvclJlc3BvbnNlKSB7ICRsb2cuaW5mbyhlcnJvclJlc3BvbnNlKTsgfSApXG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yUmVzcG9uc2UpIHtcblx0XHRcdFx0JGxvZy5pbmZvKGVycm9yUmVzcG9uc2UpXG5cdFx0XHR9KVxuXG5cdFx0fSk7XG5cdFx0Ly9pZiBpdCBpcyB0aGVyZSwgcmVtb3ZlIGl0XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRFdmVudEd1ZXN0TGlzdChob3N0SWQsIGV2ZW50SWQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly9nZXQgdGhlIG9iamVjdFxuXHRcdFx0ZGIuZ2V0R3Vlc3RMaXN0Rm9yRXZlbnQoaG9zdElkLCBldmVudElkKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24ob2J0YWluZWRMaXN0KSB7XG5cdFx0XHRcdHJlc29sdmUob2J0YWluZWRMaXN0KTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3JSZXNwb25zZSkge1xuXHRcdFx0XHRyZWplY3QoZXJyb3JSZXNwb25zZSk7XG5cdFx0XHR9KVxuXHRcdH0pXG5cdH1cblxuXHRmdW5jdGlvbiByZW1vdmVJbmNvbXBsZXRlRXZlbnRGcm9tREIoZXZlbnRJZCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRkYi5yZW1vdmVJbmNvbXBsZXRlRXZlbnQoY3VycmVudFVzZXIuZ2V0VUlETG9jYWxseSwgZXZlbnRJZClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKHN1Y2Nlc3NNZXNzYWdlKXtcblx0XHRcdFx0cmVzb2x2ZShzdWNjZXNzTWVzc2FnZSk7XG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yTWVzc2FnZSkge1xuXHRcdFx0XHRyZWplY3QoZXJyb3JNZXNzYWdlKTtcblx0XHRcdH0pXG5cdFx0fSlcblx0fVxuXG5cdGZ1bmN0aW9uIGxvYWRCaW8odWlkKSB7XG5cblx0XHQvL21pZ2h0IG5lZWQgdG8gZ28gb3V0IHRvIHRoZSBkYiBzbyByZXR1cm4gYSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHQvL2NoZWNrIGZvciBiaW8gbG9jYWxseSBmaXJzdFxuXHRcdFx0aWYoYmlvUHJpbWFyaWVzQXJlQ29tcGxldGVMb2NhbGx5KCkpIHtcblxuXHRcdFx0XHQvL3Bhc3MgaXQgYmFjayBhcyBzdWNjZXNzXG5cdFx0XHRcdHJlc29sdmUoZ2V0RnVsbEJpb0xvY2FsbHkoKSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2lmIHRoZXkncmUgbm90IGNvbXBsZXRlIGxvY2FsbHksIGNoZWNrIHRoZSBzZXJ2ZXJcblx0XHRcdFx0Z2V0UmVtb3RlQmlvRm9yTG9jYWwodWlkKVxuXHRcdFx0XHQudGhlbihmdW5jdGlvbihiaW9Gcm9tUmVtb3RlREIpIHtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvL3NhdmUgdGhlbSBsb2NhbGx5IGZpcnN0XG5cdFx0XHRcdFx0c2V0UHJpbWFyaWVzTG9jYWxseShiaW9Gcm9tUmVtb3RlREIuZW1haWwsIGJpb0Zyb21SZW1vdGVEQi5uYW1lLCBiaW9Gcm9tUmVtb3RlREIudWlkKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvL3JldHVybiB0aGUgZmluZGluZ3Ncblx0XHRcdFx0XHRyZXNvbHZlKGJpb0Zyb21SZW1vdGVEQik7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHRcdH0pXG5cdFx0XHR9XG5cblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gbG9hZEFuRXZlbnRQcm9ncmVzc2l2ZWx5KHVpZCwgZXZlbnRJZCkge1xuXHRcdC8vdXBkYXRlIHVpZCBpZiBuZWVkIGJlXG5cdFx0c2V0VUlETG9jYWxseSh1aWQpO1xuXG5cdFx0Ly9nb2luZyBvdXQgdGhlIHRoZSBkYiBzbyByZXR1cm4gYSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHQvL3JlYWNoIG91dCB0byBkYlxuXHRcdFx0Z2V0T25lUmVtb3RlRXZlbnRGb3JMb2NhbChldmVudElkKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24ob2J0YWluZWRVc2VyRXZlbnQpIHtcblx0XHRcdFx0Ly93aGVuIHRoZSBkYiByZXN1bHRzIGNvbWUgYmFjaywgcmV0dXJuIGl0XG5cdFx0XHRcdHJlc29sdmUob2J0YWluZWRVc2VyRXZlbnQpXG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKClcblxuXHRcdFx0Ly9maXJzdCByZXR1cm4gd2hhdGV2ZXIgZXZlbnQgaW5mbyBpcyBzdG9yZWQgbG9jYWxseVxuXHRcdFx0Ly9jaGVjayBpZiB0aGUgZXZlbnQgaXMgYXZhaWxhYmxlIGxvY2FsbHlcblx0XHRcdGlmKGV2ZW50RXhpc3RzTG9jYWxseSgnaG9zdGluZycsIGV2ZW50SWQpKSByZXNvbHZlKGdldE9uZVVzZXJFdmVudExvY2FsbHkoJ2hvc3RpbmcnLCBldmVudElkKSk7XG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGxvYWRFdmVudHNQcm9ncmVzc2l2ZWx5KHVpZCkge1xuXHRcdHZhciBldmVudFR5cGVzID0gWydhdHRlbmRpbmcnLCAncGVuZGluZycsICdob3N0aW5nJywgJ2NvbXBsZXRlZCddO1xuXHRcdHZhciBhbGxFdmVudHMgPSB7fTtcblxuXHRcdC8vd2lsbCBnbyBvdXQgdG8gdGhlIGRiIHNvIHJldHVybiBhIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHRcdGdldFJlbW90ZUV2ZW50c0ZvckxvY2FsKClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKG9idGFpbmVkVXNlckV2ZW50cykge1xuXHRcdFx0XHQvL3doZW4gdGhlIGRiIHJlc3VsdHMgY29tZSBiYWNrLCByZXR1cm4gdGhvc2Vcblx0XHRcdFx0cmVzb2x2ZShvYnRhaW5lZFVzZXJFdmVudHMpO1xuXHRcdFx0fSlcblxuXHRcdFx0Ly9idWlsZCB0aGUgbG9jYWwgbW9kZWxcblx0XHRcdGFsbEV2ZW50cyA9IGdldFVzZXJFdmVudHNMb2NhbGx5KHR5cGUpO1xuXG5cdFx0XHQvL2ZpcnN0IHJldHVybiB3aGF0ZXZlciBldmVudCBpbmZvIGlzIHN0b3JlZCBsb2NhbGx5XG5cdFx0XHRyZXNvbHZlKGFsbEV2ZW50cyk7XG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGNyZWF0ZU5ld0V2ZW50KGV2ZW50SUQpIHtcblx0XHQvL2RlY2xhciBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cdFx0dmFyIG5ld0V2ZW50ID0ge307XG5cdFx0dmFyIGRhdGVUaW1lID0gbmV3IERhdGUoKTtcblx0XHRkYXRlVGltZS5zZXRNaW51dGVzKDAsIDAsIDApO1xuXHRcdHZhciB0ZW1wVGltZSA9IGRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSk7XG5cblx0XHQvL2ZpcnN0IGNyZWF0ZSB0aGUgb2JqZWN0XG5cdFx0bmV3RXZlbnQgPSB7XG5cdFx0XHRpZDogZXZlbnRJRCxcblx0XHRcdG5hbWU6ICcnLFxuXHRcdFx0dHlwZTogJycsXG5cdFx0XHRob3N0OiB7XG5cdFx0XHRcdG5hbWU6IGN1cnJlbnRVc2VyLmJpby5uYW1lLFxuXHRcdFx0XHR1aWQ6IGN1cnJlbnRVc2VyLmJpby51aWQsXG5cdFx0XHRcdGVtYWlsOiBjdXJyZW50VXNlci5iaW8uZW1haWxcblx0XHRcdH0sXG5cdFx0XHRtZXNzYWdlOiAnJyxcblx0XHRcdGV2ZW50VGltZXM6IHtcblx0XHRcdFx0c3RhcnQ6IHRlbXBUaW1lLFxuXHRcdFx0XHRlbmQ6ICh0ZW1wVGltZSArICg2MCo2MCoxMDAwKSlcblx0XHRcdH0sXG5cdFx0XHRhZGRyZXNzOiB7XG5cdFx0XHRcdHN0cmVldDAxOiAnJyxcblx0XHRcdFx0c3RyZWV0MDI6ICcnLFxuXHRcdFx0XHRzdHJlZXQwMzogJycsXG5cdFx0XHRcdGNpdHk6ICcnLFxuXHRcdFx0XHRzdGF0ZTogJycsXG5cdFx0XHRcdHppcDogMFxuXHRcdFx0fVxuXHRcdH07XG5cblx0XHQvL3NhdmUgaXQgbG9jYWxseVxuXHRcdHVwZGF0ZVVzZXJFdmVudHNMb2NhbGx5KCdob3N0aW5nJywgbmV3RXZlbnQpO1xuXG5cdFx0Ly9zYXZlIGl0IGFzIHRoZSBhY3RpdmUgZXZlbnRcblx0XHRzZXRBY3RpdmVFdmVudChuZXdFdmVudCk7XG5cblx0XHQvL3RoZW4gY3JlYXRlIGl0IG9uIHRoZSBzZXJ2ZXJcblx0XHQvL3dpbGwgZ28gb3V0IHRvIHRoZSBkYiBzbyByZXR1cm4gYSBwcm9taXNlXG5cdFx0XG5cdFx0LypyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcblx0XHRcdCRsb2cuaW5mbygnc2F2ZWQgbG9jYWxseSwgbm90IG9uIHRoZSBkYicpO1xuXHRcdFx0Ly9tYW5hZ2UgdGhlIHByb21pc2UgcmVzcG9uc2VzXG5cdFx0XHQvKmRiLmNyZWF0ZUhvc3RlZEV2ZW50KGdldFVJRExvY2FsbHkoKSwgbmV3RXZlbnQpXG5cdFx0XHQudGhlbihmdW5jdGlvbihtZXNzYWdlKSB7XG5cdFx0XHRcdHJlc29sdmUobWVzc2FnZSk7XG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHR9KVxuXG5cdFx0fSk7Ki9cblxuXHR9XG5cblx0ZnVuY3Rpb24gdXBkYXRlUGVuZGluZ0V2ZW50c0xpc3RGb3JHdWVzdChldmVudElkKSB7XG5cdFx0Ly9kZWNsYXIgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHQvL21hbmFnZSB0aGUgZGIgcHJvbWlzZVxuXHRcdFx0Ly9kYi5hZGRQZW5kaW5nRXZlbnRGb3JHdWVzdChjdXJyZW50VXNlci5nZXRVSURMb2NhbGx5KCksIGhvc3RJZCwgZXZlbnRJZCwgY3VycmVudFVzZXIuZ2V0VXNlckV2ZW50c0xvY2FsbHkoJycsIGV2ZW50SWQpKVxuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBzYXZlTmV3SG9zdGluZ0V2ZW50KGNhdGVnb3J5LCBldmVudCkge1xuXHRcdCRsb2cuaW5mbygnc2F2aW5nIHRoaXMgZXZlbnQgbG9jYWxseScpO1xuXHRcdCRsb2cuaW5mbyhldmVudCk7XG5cdFx0dXBkYXRlVXNlckV2ZW50c0xvY2FsbHkoY2F0ZWdvcnksIGV2ZW50KTtcblx0fVxuXHRcblx0cmV0dXJuIGFsbFVzZXJEYXRhO1xufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmZhY3RvcnkoJ3ZhbGlkYXRpb24nLCB2YWxpZGF0aW9uKTtcblxudmFsaWRhdGlvbi4kaW5qZWN0ID0gWyckbG9nJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gdmFsaWRhdGlvbigkbG9nKSB7XG5cdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0dmFyIG1pbmltdW1OYW1lTGVuZ3RoID0gMztcblx0dmFyIG1pbmltdW1QYXNzTGVuZ3RoID0gNjtcblx0dmFyIG1heGltdW1QYXNzTGVuZ3RoID0gMTAwO1xuXG5cdC8vdmFsaWRhdGlvbiBvYmplY3RzXG5cdHZhciByZXF1aXJlZCA9IHtcblx0XHRtZXQ6IGZhbHNlLFxuXHRcdGVycm9yTWVzc2FnZTogJ1RoaXMgZmllbGQgaXMgcmVxdWlyZWQnLFxuXHRcdHRlc3Q6IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0XHQvL3Rocm93IHRoZSB0ZXN0ZWQgZmxhZ1xuXHRcdFx0dGhpcy50ZXN0ZWQgPSB0cnVlO1xuXHRcdFx0aWYoYW5ndWxhci5pc1VuZGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAodmFsdWUgPT0gJycpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlXG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHZhciBuYW1lTWluTGVuZ3RoID0ge1xuXHRcdG1ldDogZmFsc2UsXG5cdFx0ZXJyb3JNZXNzYWdlOiAnVG9vIHNob3J0ICgzIGNoYXJzIG1pbmltdW0pJyxcblx0XHR0ZXN0OiBmdW5jdGlvbih2YWx1ZSkge1xuXHRcdFx0Ly90aHJvdyB0aGUgdGVzdGVkIGZsYWdcblx0XHRcdHRoaXMudGVzdGVkID0gdHJ1ZTtcblx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0XHRpZih2YWx1ZS5sZW5ndGggPj0gMykge1xuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9IGVsc2UgcmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHZhciBpc0FuRW1haWwgPSB7XG4gICAgXHRtZXQ6IGZhbHNlLFxuICAgIFx0ZXJyb3JNZXNzYWdlOiAnVGhpcyBpcyBub3QgYSB2YWxpZCBlbWFpbCcsXG4gICAgXHR0ZXN0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIFx0XHQvL2RlZmluZSByZWdleFxuICAgIFx0XHR2YXIgRU1BSUxfUkVHRVhQID0gL1thLXowLTkhIyQlJicqKz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKz0/Xl9ge3x9fi1dKykqQCg/OlthLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cXC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT8vZztcblx0ICAgIFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKEVNQUlMX1JFR0VYUCk7XG5cblx0ICAgIFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdCAgICBcdFx0Ly9pZiBlbWFpbCBpcyBkZWZpbmVkXG5cdCAgICBcdFx0aWYoY29uc3RyYWludC50ZXN0KHZhbHVlKSkge1xuXHQgICAgXHRcdFx0Ly9pZiBpdCBwYXNzZXMgcmVnZXhcblx0ICAgIFx0XHRcdHJldHVybiB0cnVlO1xuXHQgICAgXHRcdH0gZWxzZSByZXR1cm4gZmFsc2U7XG5cdCAgICBcdH0gZWxzZSByZXR1cm4gZmFsc2U7XG4gICAgXHR9XG4gICAgfVxuXG4gICAgdmFyIHBhc3NNaW5MZW5ndGggPSB7XG4gICAgXHRtZXQ6IGZhbHNlLFxuICAgIFx0ZXJyb3JNZXNzYWdlOiAnU2hvdWxkIGJlIGF0IGxlYXN0IDYgY2hhcmFjdGVycyBsb25nJyxcbiAgICBcdHRlc3Q6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgXHRcdC8vdGhyb3cgdGhlIHRlc3RlZCBmbGFnXG5cdFx0XHR0aGlzLnRlc3RlZCA9IHRydWU7XG5cdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdFx0aWYodmFsdWUubGVuZ3RoID49IDYpIHtcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fSBlbHNlIHJldHVybiBmYWxzZTtcblx0XHRcdH0gZWxzZSByZXR1cm4gZmFsc2VcbiAgICBcdH1cbiAgICB9XG5cdHZhciBwYXNzTWF4TGVuZ3RoID0ge1xuICAgIFx0bWV0OiBmYWxzZSxcbiAgICBcdGVycm9yTWVzc2FnZTogJ1Nob3VsZCBiZSBubyBtb3JlIHRoYW4gMTAwIGNoYXJhY3RlcnMnLFxuICAgIFx0dGVzdDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICBcdFx0Ly90aHJvdyB0aGUgdGVzdGVkIGZsYWdcblx0XHRcdHRoaXMudGVzdGVkID0gdHJ1ZTtcblx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0XHRpZih2YWx1ZS5sZW5ndGggPD0gMTAwKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH0gZWxzZSByZXR1cm4gZmFsc2U7XG5cdFx0XHR9IGVsc2UgcmV0dXJuIGZhbHNlO1xuICAgIFx0fVxuICAgIH1cblxuXHR2YXIgaGFzTG93ZXJjYXNlID0ge1xuICAgIFx0bWV0OiBmYWxzZSxcbiAgICBcdGVycm9yTWVzc2FnZTogJ1Nob3VsZCBoYXZlIGF0IGxlYXN0IG9uZSBsb3dlcmNhc2UgbGV0dGVyJyxcbiAgICBcdHRlc3Q6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgXHRcdC8vZGVmaW5lIHJlZ2V4XG4gICAgXHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIlthLXpdXCIpO1xuXG4gICAgXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuICAgIFx0XHRcdC8vaWYgcGFzcyBpcyBkZWZpbmVkXG4gICAgXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZhbHVlKSkge1xuICAgIFx0XHRcdFx0Ly9zdWNjZXNcbiAgICBcdFx0XHRcdHJldHVybiB0cnVlO1xuICAgIFx0XHRcdH0gZWxzZSByZXR1cm4gZmFsc2U7XG4gICAgXHRcdH0gZWxzZSByZXR1cm4gZmFsc2U7XG5cbiAgICBcdH1cbiAgICB9XG5cblx0dmFyIGhhc1VwcGVyY2FzZSA9IHtcbiAgICBcdG1ldDogZmFsc2UsXG4gICAgXHRlcnJvck1lc3NhZ2U6ICdTaG91bGQgaGF2ZSBhdCBsZWFzdCBvbmUgdXBwZXJjYXNlIGxldHRlcicsXG4gICAgXHR0ZXN0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIFx0XHQvL2RlZmluZSByZWdleFxuICAgIFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbQS1aXVwiKTtcblxuICAgIFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICBcdFx0XHQvL2lmIHBhc3MgaXMgZGVmaW5lZFxuICAgIFx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2YWx1ZSkpIHtcbiAgICBcdFx0XHRcdC8vc3VjY2VzXG4gICAgXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcbiAgICBcdFx0XHR9IGVsc2UgcmV0dXJuIGZhbHNlO1xuICAgIFx0XHR9IGVsc2UgcmV0dXJuIGZhbHNlO1xuICAgIFx0fVxuICAgIH1cblxuXHR2YXIgaGFzQU51bWJlciA9IHtcbiAgICBcdG1ldDogZmFsc2UsXG4gICAgXHRlcnJvck1lc3NhZ2U6ICdTaG91bGQgaGF2ZSBhdCBsZWFzdCBvbmUgbnVtYmVyIGxldHRlcicsXG4gICAgXHR0ZXN0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIFx0XHQvL2RlZmluZSByZWdleFxuICAgIFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbMC05XVwiKTtcblxuICAgIFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICBcdFx0XHQvL2lmIHBhc3MgaXMgZGVmaW5lZFxuICAgIFx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2YWx1ZSkpIHtcbiAgICBcdFx0XHRcdC8vc3VjY2VzXG4gICAgXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcbiAgICBcdFx0XHR9IGVsc2UgcmV0dXJuIGZhbHNlO1xuICAgIFx0XHR9IGVsc2UgcmV0dXJuIGZhbHNlO1xuICAgIFx0fVxuICAgIH1cblxuXHR2YXIgaGFzQVN5bWJvbCA9IHtcbiAgICBcdG1ldDogZmFsc2UsXG4gICAgXHRlcnJvck1lc3NhZ2U6ICdTaG91bGQgaGF2ZSBhdCBsZWFzdCBvbmUgc3ltYm9sIGxldHRlcicsXG4gICAgXHR0ZXN0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIFx0XHQvL2RlZmluZSByZWdleFxuICAgIFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbXFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqXVwiKTtcblxuICAgIFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICBcdFx0XHQvL2lmIHBhc3MgaXMgZGVmaW5lZFxuICAgIFx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2YWx1ZSkpIHtcbiAgICBcdFx0XHRcdC8vc3VjY2VzXG4gICAgXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcbiAgICBcdFx0XHR9IGVsc2UgcmV0dXJuIGZhbHNlO1xuICAgIFx0XHR9IGVsc2UgcmV0dXJuIGZhbHNlO1xuICAgIFx0fVxuICAgIH1cblxuXHR2YXIgbm9JbGxlZ2FsQ2hhcnMgPSB7XG4gICAgXHRtZXQ6IGZhbHNlLFxuICAgIFx0ZXJyb3JNZXNzYWdlOiAnU2hvdWxkIGJlIGF0IGxlYXN0IDYgY2hhcmFjdGVycyBsb25nJyxcbiAgICBcdHRlc3Q6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgXHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIlteQS16MC05XFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqXVwiKTtcblxuICAgIFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICBcdFx0XHQvL2lmIHBhc3MgaXMgZGVmaW5lZFxuICAgIFx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2YWx1ZSkpIHtcbiAgICBcdFx0XHRcdC8vc3VjY2VzXG4gICAgXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG4gICAgXHRcdFx0fSBlbHNlIHJldHVybiB0cnVlO1xuICAgIFx0XHR9IGVsc2UgcmV0dXJuIHRydWU7XG4gICAgXHR9XG4gICAgfVxuXG5cblx0dmFyIGFsbFZhbGlkYXRpb25zID0ge1xuXHRcdHJlcXVpcmVkOiByZXF1aXJlZCxcdFx0XHRcdFx0XHQvL25ldyBVc2VyIHZhbGlkYXRpb25zXG5cdFx0bWluTmFtZUxlbmd0aDogbWluTmFtZUxlbmd0aCxcblx0XHRtaW5QYXNzTGVuZ3RoOiBtaW5QYXNzTGVuZ3RoLFxuXHRcdG1heFBhc3NMZW5ndGg6IG1heFBhc3NMZW5ndGgsXG5cdFx0YXRMZWFzdE9uZVN5bWJvbDogYXRMZWFzdE9uZVN5bWJvbCxcblx0XHRhdExlYXN0T25lTnVtYmVyOiBhdExlYXN0T25lTnVtYmVyLFxuXHRcdGF0TGVhc3RPbmVMb3dlcmNhc2U6IGF0TGVhc3RPbmVMb3dlcmNhc2UsXG5cdFx0YXRMZWFzdE9uZVVwcGVyY2FzZTogYXRMZWFzdE9uZVVwcGVyY2FzZSxcblx0XHRpbGxlZ2FsQ2hhcmFjdGVyOiBpbGxlZ2FsQ2hhcmFjdGVyLFxuXHRcdGVtYWlsOiBlbWFpbCxcblx0XHRkYXRlT2ZCaXJ0aDogZGF0ZU9mQmlydGgsXG5cblx0XHRnZW5lcmF0ZUV2ZW50UmVxdWlybm1lbnRzOiBnZW5lcmF0ZUV2ZW50UmVxdWlybm1lbnRzLFx0XHQvL2V2ZW50IHJlcXVpcm5tZW50c1xuXHRcdGdlbmVyYXRlTmV3VXNlclJlcXVpcm5lbW50czogZ2VuZXJhdGVOZXdVc2VyUmVxdWlybmVtbnRzLCBcblx0XHR1cGRhdGVFdmVudFJlcVN0YXR1czogdXBkYXRlRXZlbnRSZXFTdGF0dXMsXG5cdFx0dXBkYXRlRXZlbnRSZXFBZGRyZXNzZWQ6IHVwZGF0ZUV2ZW50UmVxQWRkcmVzc2VkLFxuXHRcdHVwZGF0ZUV2ZW50UmVxQ2xhc3M6IHVwZGF0ZUV2ZW50UmVxQ2xhc3MsXG5cdFx0Z2VuZXJhdGVUZXN0YWJsZU9iamVjdDogZ2VuZXJhdGVUZXN0YWJsZU9iamVjdFxuXHR9O1xuXG5cdGZ1bmN0aW9uIHJlcXVpcmVkKHZhbHVlKSB7XG5cdFx0aWYoYW5ndWxhci5pc1VuZGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdHJldHVybiAnVGhpcyBpcyBhIHJlcXVpcmVkIGZpZWxkJztcblx0XHR9IFxuXHR9XG5cblx0ZnVuY3Rpb24gbWluTmFtZUxlbmd0aCh2YWx1ZSkge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0aWYodmFsdWUubGVuZ3RoIDwgbWluaW11bU5hbWVMZW5ndGgpIHJldHVybiAoJ05hbWUgc2hvdWxkIGJlIGF0IGxlYXN0ICcgKyBtaW5pbXVtTmFtZUxlbmd0aCArICcgY2hhcmFjdGVycycpO1xuXHRcdH0gXG5cdH1cblxuXHRmdW5jdGlvbiBtaW5QYXNzTGVuZ3RoKHZhbHVlKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHRpZighKHZhbHVlLmxlbmd0aCA8IG1pbmltdW1QYXNzTGVuZ3RoKSkgcmV0dXJuIHRydWU7XG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGZ1bmN0aW9uIG1heFBhc3NMZW5ndGgodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdGlmKCEodmFsdWUubGVuZ3RoID4gbWF4aW11bVBhc3NMZW5ndGgpKSByZXR1cm4gdHJ1ZTtcblx0XHR9IFxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGZ1bmN0aW9uIGF0TGVhc3RPbmVTeW1ib2wodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdC8vIGJ1aWxkIHJlZ2V4XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbXFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqXVwiKTtcblxuXHRcdFx0Ly9jaGVjayBjb25zdHJhdGludFxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZhbHVlKSkge1xuXHRcdFx0XHQvL3N1Y2Nlc3M6IGF0IGxlYXN0IG9uZSBzcGVjaWFsIGNoYXJhY3RlciBmb3VuZFxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vZmFpbHVyZTogZGlkbid0IGZpbmQgYW55IHNwY2lhbCBjaGFyYWN0ZXJzXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRmdW5jdGlvbiBhdExlYXN0T25lTnVtYmVyKHZhbHVlKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHQvLyBidWlsZCByZWdleFxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiWzAtOV1cIiwgXCJcIik7XG5cblx0XHRcdC8vY2hlY2sgY29uc3RyYXRpbnRcblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2YWx1ZSkpIHtcblx0XHRcdFx0Ly9zdWNjZXNzOiBhdCBsZWFzdCBvbmUgc3BlY2lhbCBjaGFyYWN0ZXIgZm91bmRcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2ZhaWx1cmU6IGRpZG4ndCBmaW5kIGFueSBzcGNpYWwgY2hhcmFjdGVyc1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cbiAgICBmdW5jdGlvbiBhdExlYXN0T25lTG93ZXJjYXNlKHZhbHVlKSB7XG4gICAgXHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdC8vIGJ1aWxkIHJlZ2V4XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbYS16XVwiLCBcIlwiKTtcblxuXHRcdFx0Ly9jaGVjayBjb25zdHJhdGludFxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZhbHVlKSkge1xuXHRcdFx0XHQvL3N1Y2Nlc3M6IGF0IGxlYXN0IG9uZSBzcGVjaWFsIGNoYXJhY3RlciBmb3VuZFxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vZmFpbHVyZTogZGlkbid0IGZpbmQgYW55IHNwY2lhbCBjaGFyYWN0ZXJzXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYXRMZWFzdE9uZVVwcGVyY2FzZSh2YWx1ZSkge1xuICAgIFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHQvLyBidWlsZCByZWdleFxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW0EtWl1cIiwgXCJcIik7XG5cblx0XHRcdC8vY2hlY2sgY29uc3RyYXRpbnRcblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2YWx1ZSkpIHtcblx0XHRcdFx0Ly9zdWNjZXNzOiBhdCBsZWFzdCBvbmUgc3BlY2lhbCBjaGFyYWN0ZXIgZm91bmRcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2ZhaWx1cmU6IGRpZG4ndCBmaW5kIGFueSBzcGNpYWwgY2hhcmFjdGVyc1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlsbGVnYWxDaGFyYWN0ZXIodmFsdWUpIHtcbiAgICBcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0Ly8gYnVpbGQgcmVnZXhcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIlteQS16MC05XFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqXVwiLCBcIlwiKTtcblxuXHRcdFx0Ly9jaGVjayBjb25zdHJhdGludFxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZhbHVlKSkge1xuXHRcdFx0XHQvL3N1Y2Nlc3M6IGF0IGxlYXN0IG9uZSBzcGVjaWFsIGNoYXJhY3RlciBmb3VuZFxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2ZhaWx1cmU6IGRpZG4ndCBmaW5kIGFueSBzcGNpYWwgY2hhcmFjdGVyc1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIGVtYWlsKHZhbHVlKSB7XG4gICAgXHQvL2RlZmluZSBjb25zdHJhaW50c1xuICAgIFx0dmFyIEVNQUlMX1JFR0VYUCA9IC9bYS16MC05ISMkJSYnKis9P15fYHt8fX4tXSsoPzpcXC5bYS16MC05ISMkJSYnKis9P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/L2c7XG4gICAgXHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoRU1BSUxfUkVHRVhQKTtcblxuICAgIFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpICYmICFjb25zdHJhaW50LnRlc3QodmFsdWUpKSByZXR1cm4gJ05vdCBhIHZhbGlkIGVtYWlsJztcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRhdGVPZkJpcnRoKHZhbHVlKSB7fVxuXG4gICAgZnVuY3Rpb24gZ2VuZXJhdGVOZXdVc2VyUmVxdWlybmVtbnRzKCkge1xuICAgIFx0Ly9kZWNsYXJlIHRoZSBvYmplY3RcbiAgICBcdHZhciBlcnJvcnNPYmplY3QgPSB7XG5cdFx0XHRuYW1lOiB7XG5cdFx0XHRcdG5hbWU6IHtcblx0XHRcdFx0XHRzdGF0dXM6IGZhbHNlLFxuXHRcdFx0XHRcdG1lc3NhZ2U6ICdBIG5hbWUgaXMgcmVxdWlyZWQnXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHZhbGlkTGVuZ3RoOiB7XG5cdFx0XHRcdFx0c3RhdHVzOmZhbHNlLFxuXHRcdFx0XHRcdG1lc3NhZ2U6ICdOYW1lIG11c3QgYmUgYXQgbGVhc3QgMyBjaGFyYWN0ZXJzIGxvbmcnXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRlbWFpbDoge1xuXHRcdFx0XHRlbWFpbDoge1xuXHRcdFx0XHRcdHN0YXR1czogZmFsc2UsXG5cdFx0XHRcdFx0bWVzc2FnZTogJ0FuIGVtYWlsIGlzIHJlcXVpcmVkJ1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR2YWxpZEVtYWlsOiB7XG5cdFx0XHRcdFx0c3RhdHVzOiBmYWxzZSxcblx0XHRcdFx0XHRtZXNzYWdlOiAnVGhpcyBpcyBub3QgYSB2YWxpZCBlbWFpbCdcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdHBhc3M6IHtcblx0XHRcdFx0cGFzczoge1xuXHRcdFx0XHRcdHN0YXR1czogZmFsc2UsXG5cdFx0XHRcdFx0bWVzc2FnZTogJ0EgcGFzc3dvcmQgaXMgcmVxdWlyZWQnXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHRvb1Nob3J0OiB7XG5cdFx0XHRcdFx0c3RhdHVzOiBmYWxzZSxcblx0XHRcdFx0XHRtZXNzYWdlOiAnVGhlcmUgc2hvdWxkIGJlIGF0IGxlYXN0IDYgY2hhcmFjdGVycydcblx0XHRcdFx0fSxcblx0XHRcdFx0dG9vTG9uZzoge1xuXHRcdFx0XHRcdHN0YXR1czogZmFsc2UsXG5cdFx0XHRcdFx0bWVzc2FnZTogJ1RoZXJlIHNob3VsZCBiZSBubyBtb3JlIHRoYW4gMTAwIGNoYXJhY3RlcnMnXG5cdFx0XHRcdH0sXG5cdFx0XHRcdG5vTG93ZXJjYXNlOiB7XG5cdFx0XHRcdFx0c3RhdHVzOiBmYWxzZSxcblx0XHRcdFx0XHRtZXNzYWdlOiAnVGhlcmUgc2hvdWxkIGJlIGF0IGxlYXN0IG9uZSBsb3dlcmNhc2UgbGV0dGVyJ1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRub1VwcGVyY2FzZToge1xuXHRcdFx0XHRcdHN0YXR1czogZmFsc2UsXG5cdFx0XHRcdFx0bWVzc2FnZTogJ1RoZXJlIHNob3VsZCBiZSBhdCBsZWFzdCBvbmUgdXBwZXJjYXNlIGxldHRlcidcblx0XHRcdFx0fSxcblx0XHRcdFx0bm9OdW1iZXI6IHtcblx0XHRcdFx0XHRzdGF0dXM6IGZhbHNlLFxuXHRcdFx0XHRcdG1lc3NhZ2U6ICdUaGVyZSBzaG91bGQgYmUgYXQgbGVhc3Qgb25lIG51bWJlcidcblx0XHRcdFx0fSxcblx0XHRcdFx0bm9TeW1ib2w6IHtcblx0XHRcdFx0XHRzdGF0dXM6IGZhbHNlLFxuXHRcdFx0XHRcdG1lc3NhZ2U6ICdUaGVyZSBzaG91bGQgYmUgYXQgbGVhc3Qgb25lIHN5bWJvbCdcblx0XHRcdFx0fSxcblx0XHRcdFx0aGFzSW52YWxpZENoYXI6IHtcblx0XHRcdFx0XHRzdGF0dXM6IGZhbHNlLFxuXHRcdFx0XHRcdG1lc3NhZ2U6ICdUaGVyZSBzaG91bGRuXFwndCBiZSBhbnkgaW52YWxpZCBjaGFyYWN0ZXJzJ1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0Y2hhbmdlU3RhdHVzOiBmdW5jdGlvbihpbnB1dCwgcmVxLCBzdGF0dXMpIHtcblx0XHRcdFx0dGhpc1tpbnB1dF1bcmVxXS5zdGF0dXMgPSBzdGF0dXM7XG5cdFx0XHR9LFxuXHRcdFx0Z2V0RXJyb3JNZXNzYWdlOiBmdW5jdGlvbihpbnB1dCwgcmVxKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzW2lucHV0XVtyZXFdLm1lc3NhZ2U7XG5cdFx0XHR9LFxuXHRcdFx0YWxsUmVxc0Z1bGZpbGxlZDogZnVuY3Rpb24oaW5wdXQpIHtcblx0XHRcdFx0T2JqZWN0LmtleXMoaW5wdXQpLmZvckVhY2goZnVuY3Rpb24ocmVxKSB7XG5cdFx0XHRcdFx0aWYoIWlucHV0W3JlcV0uc3RhdHVzKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSxcblx0XHRcdGFsbElucHV0c1Bhc3M6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRPYmplY3Qua2V5cyh0aGlzKS5mb3JFYWNoKGZ1bmN0aW9uKGlucHV0KSB7XG5cdFx0XHRcdFx0aWYoIXRoaXMuYWxsUmVxc0Z1bGZpbGxlZChpbnB1dCkpIHJldHVybiBmYWxzZVxuXHRcdFx0XHR9KTtcblx0XHRcdH0sXG5cdFx0XHRnZXRBbGxFcnJvcnM6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgYWxsRXJyb3JzID0ge307XG5cdFx0XHRcdE9iamVjdC5rZXlzKHRoaXMpLmZvckVhY2goZnVuY3Rpb24oaW5wdXQpIHtcblx0XHRcdFx0XHQvL2lmIHRoZSB2YWx1ZSBpcyBhbiBvYmplY3Rcblx0XHRcdFx0XHRpZihhbmd1bGFyLmlzT2JqZWN0KHRoaXNbaW5wdXRdKSkge1xuXG5cdFx0XHRcdFx0XHRPYmplY3Qua2V5cyhpbnB1dCkuZm9yRWFjaChmdW5jdGlvbihyZXEpIHtcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdGlmKHRoaXNbaW5wdXRdW3JlcV0uc3RhdHVzKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRhbGxFcnJvcnNbaW5wdXRdID0ge307XG5cdFx0XHRcdFx0XHRcdFx0YWxsRXJyb3JzW2lucHV0XVtyZXFdID0geyBtZXNzYWdlOiB0aGlzW2lucHV0XVtyZXFdLm1lc3NhZ2UgfVxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0cmV0dXJuIGFsbEVycm9ycztcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZXJyb3JzT2JqZWN0O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdlbmVyYXRlRXZlbnRSZXF1aXJubWVudHMoKSB7XG4gICAgXHQvL2J1aWxkIHRoZSBvYmplY3QgYW5kIHJldHVybiBpdFxuICAgIFx0dmFyIGV2ZW50VmFsaWRhdGlvbnMgPSB7XG4gICAgXHRcdGV2ZW50TmFtZTogeyBcbiAgICBcdFx0XHRjb21wbGV0ZWQgOmZhbHNlLCBcbiAgICBcdFx0XHRhZGRyZXNzZWQ6ZmFsc2UsIFxuICAgIFx0XHRcdHJvdzoge1xuICAgIFx0XHRcdFx0Y2xhc3M6IHtcbiAgICBcdFx0XHRcdFx0J2NvbC14cy0xMic6IHRydWUsXG4gICAgXHRcdFx0XHRcdCdjb2wtc20tMTInOiB0cnVlLFxuICAgIFx0XHRcdFx0XHQnZm9ybS1ncm91cCc6IHRydWUsXG4gICAgXHRcdFx0XHRcdCdoYXMtc3VjY2Vzcyc6IGZhbHNlLFxuICAgIFx0XHRcdFx0XHQnaGFzLWVycm9yJzogZmFsc2VcbiAgICBcdFx0XHRcdH1cbiAgICBcdFx0XHR9LFxuICAgIFx0XHRcdGxhYmVsOiB7XG4gICAgXHRcdFx0XHRjbGFzczoge1xuICAgIFx0XHRcdFx0XHQnY29udHJvbC1sYWJlbCc6IHRydWVcbiAgICBcdFx0XHRcdH1cbiAgICBcdFx0XHR9LFxuICAgIFx0XHRcdGlucHV0OiB7XG4gICAgXHRcdFx0XHRjbGFzczoge1xuICAgIFx0XHRcdFx0XHQnZm9ybS1jb250cm9sJzogdHJ1ZSxcbiAgICBcdFx0XHRcdFx0J2NvbC14cy0xMic6IHRydWUsXG4gICAgXHRcdFx0XHRcdCdjb2wtc20tMTInOnRydWUsXG4gICAgXHRcdFx0XHRcdCdjb2wtbWQtMTInOiB0cnVlXG4gICAgXHRcdFx0XHR9XG4gICAgXHRcdFx0fVxuICAgIFx0XHR9LFxuXHRcdFx0ZXZlbnRIb3N0OiB7IGNvbXBsZXRlZCA6ZmFsc2UsIGFkZHJlc3NlZDpmYWxzZSwgcm93OiB7IGNsYXNzOiB7J2NvbC14cy0xMic6IHRydWUsICdjb2wtc20tMTInOiB0cnVlLCAnZm9ybS1ncm91cCc6IHRydWUsICdoYXMtc3VjY2Vzcyc6IGZhbHNlLCAnaGFzLWVycm9yJzogZmFsc2UgfSB9LCBsYWJlbDogeyBjbGFzczogeyAnY29udHJvbC1sYWJlbCc6IHRydWUgfSB9LCBpbnB1dDogeyBjbGFzczogeyAnZm9ybS1jb250cm9sJzogdHJ1ZSB9IH0gfSxcblx0XHRcdGV2ZW50VHlwZTogeyBjb21wbGV0ZWQgOmZhbHNlLCBhZGRyZXNzZWQ6ZmFsc2UsIHJvdzogeyBjbGFzczogeydjb2wteHMtMTInOiB0cnVlLCAnY29sLXNtLTEyJzogdHJ1ZSwgJ2Zvcm0tZ3JvdXAnOiB0cnVlLCAnaGFzLXN1Y2Nlc3MnOiBmYWxzZSwgJ2hhcy1lcnJvcic6IGZhbHNlIH0gfSwgbGFiZWw6IHsgY2xhc3M6IHsgJ2NvbnRyb2wtbGFiZWwnOiB0cnVlIH0gfSwgaW5wdXQ6IHsgY2xhc3M6IHsgJ2Zvcm0tY29udHJvbCc6IHRydWUgfSB9IH0sXG5cdFx0XHRldmVudFN0YXJ0OiB7IGNvbXBsZXRlZCA6ZmFsc2UsIGFkZHJlc3NlZDpmYWxzZSwgcm93OiB7IGNsYXNzOiB7J2NvbC14cy0xMic6IHRydWUsICdjb2wtc20tMTInOiB0cnVlLCAnZm9ybS1ncm91cCc6IHRydWUsICdoYXMtc3VjY2Vzcyc6IGZhbHNlLCAnaGFzLWVycm9yJzogZmFsc2UgfSB9LCBsYWJlbDogeyBjbGFzczogeyAnY29udHJvbC1sYWJlbCc6IHRydWUgfSB9LCBpbnB1dDogeyBjbGFzczogeyAnZm9ybS1jb250cm9sJzogdHJ1ZSB9IH0gfSxcblx0XHRcdGV2ZW50RW5kOiB7IGNvbXBsZXRlZCA6ZmFsc2UsIGFkZHJlc3NlZDpmYWxzZSwgcm93OiB7IGNsYXNzOiB7J2NvbC14cy0xMic6IHRydWUsICdjb2wtc20tMTInOiB0cnVlLCAnZm9ybS1ncm91cCc6IHRydWUsICdoYXMtc3VjY2Vzcyc6IGZhbHNlLCAnaGFzLWVycm9yJzogZmFsc2UgfSB9LCBsYWJlbDogeyBjbGFzczogeyAnY29udHJvbC1sYWJlbCc6IHRydWUgfSB9LCBpbnB1dDogeyBjbGFzczogeyAnZm9ybS1jb250cm9sJzogdHJ1ZSB9IH0gfSxcblx0XHRcdGV2ZW50U3RyZWV0MDE6IHsgY29tcGxldGVkIDpmYWxzZSwgYWRkcmVzc2VkOmZhbHNlLCByb3c6IHsgY2xhc3M6IHsnY29sLXhzLTEyJzogdHJ1ZSwgJ2NvbC1zbS0xMic6IHRydWUsICdmb3JtLWdyb3VwJzogdHJ1ZSwgJ2hhcy1zdWNjZXNzJzogZmFsc2UsICdoYXMtZXJyb3InOiBmYWxzZSB9IH0sIGxhYmVsOiB7IGNsYXNzOiB7ICdjb250cm9sLWxhYmVsJzogdHJ1ZSB9IH0sIGlucHV0OiB7IGNsYXNzOiB7ICdmb3JtLWNvbnRyb2wnOiB0cnVlIH0gfSB9LFxuXHRcdFx0ZXZlbnRDaXR5OiB7IGNvbXBsZXRlZCA6ZmFsc2UsIGFkZHJlc3NlZDpmYWxzZSwgcm93OiB7IGNsYXNzOiB7J2NvbC14cy0xMic6IHRydWUsICdjb2wtc20tMTInOiB0cnVlLCAnZm9ybS1ncm91cCc6IHRydWUsICdoYXMtc3VjY2Vzcyc6IGZhbHNlLCAnaGFzLWVycm9yJzogZmFsc2UgfSB9LCBsYWJlbDogeyBjbGFzczogeyAnY29udHJvbC1sYWJlbCc6IHRydWUgfSB9LCBpbnB1dDogeyBjbGFzczogeyAnZm9ybS1jb250cm9sJzogdHJ1ZSB9IH0gfSxcblx0XHRcdGV2ZW50U3RhdGU6IHsgY29tcGxldGVkIDpmYWxzZSwgYWRkcmVzc2VkOmZhbHNlLCByb3c6IHsgY2xhc3M6IHsnY29sLXhzLTEyJzogdHJ1ZSwgJ2NvbC1zbS0xMic6IHRydWUsICdmb3JtLWdyb3VwJzogdHJ1ZSwgJ2hhcy1zdWNjZXNzJzogZmFsc2UsICdoYXMtZXJyb3InOiBmYWxzZSB9IH0sIGxhYmVsOiB7IGNsYXNzOiB7ICdjb250cm9sLWxhYmVsJzogdHJ1ZSB9IH0sIGlucHV0OiB7IGNsYXNzOiB7ICdmb3JtLWNvbnRyb2wnOiB0cnVlIH0gfSB9LFxuXHRcdFx0ZXZlbnRaaXA6IHsgY29tcGxldGVkIDpmYWxzZSwgYWRkcmVzc2VkOmZhbHNlLCByb3c6IHsgY2xhc3M6IHsnY29sLXhzLTEyJzogdHJ1ZSwgJ2NvbC1zbS0xMic6IHRydWUsICdmb3JtLWdyb3VwJzogdHJ1ZSwgJ2hhcy1zdWNjZXNzJzogZmFsc2UsICdoYXMtZXJyb3InOiBmYWxzZSB9IH0sIGxhYmVsOiB7IGNsYXNzOiB7ICdjb250cm9sLWxhYmVsJzogdHJ1ZSB9IH0sIGlucHV0OiB7IGNsYXNzOiB7ICdmb3JtLWNvbnRyb2wnOiB0cnVlIH0gfSB9LFxuXHRcdFx0ZXZlbnRHdWVzdDogeyBjb21wbGV0ZWQgOmZhbHNlLCBhZGRyZXNzZWQ6ZmFsc2UsIHJvdzogeyBjbGFzczogeydjb2wteHMtMTInOiB0cnVlLCAnY29sLXNtLTEyJzogdHJ1ZSwgJ2Zvcm0tZ3JvdXAnOiB0cnVlLCAnaGFzLXN1Y2Nlc3MnOiBmYWxzZSwgJ2hhcy1lcnJvcic6IGZhbHNlIH0gfSwgbGFiZWw6IHsgY2xhc3M6IHsgJ2NvbnRyb2wtbGFiZWwnOiB0cnVlIH0gfSwgaW5wdXQ6IHsgY2xhc3M6IHsgJ2Zvcm0tY29udHJvbCc6IHRydWUgfSB9IH1cbiAgICBcdH1cblxuICAgIFx0cmV0dXJuIGV2ZW50VmFsaWRhdGlvbnM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdXBkYXRlQ2xhc3NlcygpIHtcbiAgICBcdC8vY2hlY2sgdGhlIHZhbGlkaXR5IHN0YXRlXG4gICAgXHRpZih0aGlzLnBhc3Nlc0FsbFJlcXMpIHtcbiAgICBcdFx0dGhpcy5jbGFzcy5yb3dbJ2hhcy1zdWNjZXNzJ10gPSB0cnVlO1xuICAgIFx0XHR0aGlzLmNsYXNzLnJvd1snaGFzLWVycm9yJ10gPSBmYWxzZTtcbiAgICBcdFx0dGhpcy5zdHlsZVsnYmFja2dyb3VuZC1jb2xvciddID0gJyM3OEZBODknO1xuICAgIFx0XHR0aGlzLnN0eWxlWydjb2xvciddID0gJ2JsYWNrJztcbiAgICBcdH0gZWxzZSB7XG4gICAgXHRcdHRoaXMuY2xhc3Mucm93WydoYXMtc3VjY2VzcyddID0gZmFsc2U7XG4gICAgXHRcdHRoaXMuY2xhc3Mucm93WydoYXMtZXJyb3InXSA9IHRydWU7XG4gICAgXHRcdHRoaXMuc3R5bGVbJ2JhY2tncm91bmQtY29sb3InXSA9ICcjRkE3ODdFJztcbiAgICBcdFx0dGhpcy5zdHlsZVsnY29sb3InXSA9ICd3aGl0ZSc7XG4gICAgXHR9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdXBkYXRlUmVxU3R5bGVzKCkge1xuICAgIFx0Ly9sb2NhbCB2YXJpYWJsZXNcbiAgICBcdHZhciByZXF1aXJubWVudHMgPSB0aGlzLnJlcXM7XG4gICAgXHR2YXIgcmVxQm94ID0gdGhpcy5yZXFCb3g7XG4gICAgXHQvL2l0ZXJhdGUgdGhyb3VnaCBlYWNoIHJlcVxuICAgIFx0T2JqZWN0LmtleXMocmVxdWlybm1lbnRzKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuXG4gICAgXHRcdGlmKHJlcXVpcm5tZW50c1trZXldLm1ldCkge1xuICAgIFx0XHRcdHJlcUJveFtrZXldLnN0eWxlLmNvbG9yID0gJ2dyZWVuJztcbiAgICBcdFx0fSBlbHNlIHtcbiAgICBcdFx0XHRyZXFCb3hba2V5XS5zdHlsZS5jb2xvciA9ICdyZWQnO1xuICAgIFx0XHR9XG4gICAgXHR9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBidWlsZEVycm9yTWVzc2FnZSgpIHtcbiAgICBcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcbiAgICBcdHZhciByZXF1aXJubWVudHMgPSB0aGlzLnJlcXM7XG4gICAgXHR2YXIgb2JqZWN0RXJyb3JzID0gW107XG5cbiAgICBcdC8vY2hlY2sgZm9yIGZhaWxlZCB0ZXN0c1xuICAgIFx0T2JqZWN0LmtleXMocmVxdWlybm1lbnRzKS5mb3JFYWNoKGZ1bmN0aW9uKHRlc3QpIHtcbiAgICBcdFx0Ly9pZiB0aGUgdGVzdCBpc24ndCBtZXQgYWRkIHRoZSBlcnJvciBtZXNzYWdlIHRvIHRoZSBhcnJheSBvZiBtZXNzYWdlc1xuICAgIFx0XHRpZighcmVxdWlybm1lbnRzW3Rlc3RdLm1ldCkgb2JqZWN0RXJyb3JzLnB1c2gocmVxdWlybm1lbnRzW3Rlc3RdLmVycm9yTWVzc2FnZSk7XG4gICAgXHR9KTtcbiAgICBcdC8vYXNzZW1ibGUgbWVzc2FnZVxuICAgIFx0dGhpcy5lcnJvck1lc3NhZ2UgPSBvYmplY3RFcnJvcnMuam9pbignLCAnKTtcbiAgICBcdFxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNoZWNrRm9yVmFsdWUoKSB7XG4gICAgXHRpZihhbmd1bGFyLmlzRGVmaW5lZCh0aGlzLnZhbHVlKSAmJiB0aGlzLnZhbHVlICE9ICcnKSB0aGlzLmhhc1ZhbHVlID0gdHJ1ZTtcbiAgICBcdGVsc2UgdGhpcy5oYXNWYWx1ZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNoZWNrRm9yRXJyb3JNZXNzYWdlKCkge1xuXHRcdC8vb25seSB1bmxvY2sgZXJyb3IgbWVzc2FnZSBpZiB0ZXN0cyBoYXZlIGJlZW4gcnVuIGF0IGxlYXN0IG9uY2Vcblx0XHRpZih0aGlzLmFsbFJlcXNUZXN0ZWQpIHtcblx0XHRcdC8vY2hlY2tcblx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHRoaXMuZXJyb3JNZXNzYWdlKSAmJiB0aGlzLmVycm9yTWVzc2FnZSAhPSAnJykgdGhpcy5oYXNBbkVycm9yTWVzc2FnZSA9IHRydWU7XG5cdFx0XHRlbHNlIHRoaXMuaGFzQW5FcnJvck1lc3NhZ2UgPSBmYWxzZTtcblx0XHR9IFxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNoZWNrQWxsUmVxdWlybm1lbnRzKCkge1xuICAgIFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciByZXF1aXJubWVudHMgPSB0aGlzLnJlcXM7XG5cdFx0dmFyIHZhbHVlID0gdGhpcy52YWx1ZTtcbiAgICBcdHZhciBhbGxUZXN0c1Bhc3MgPSB0cnVlO1xuICAgIFx0XG5cdFx0Ly9ydW4gdGhyb3VnaCByZXF1aXJubWVudHNcblx0XHRPYmplY3Qua2V5cyhyZXF1aXJubWVudHMpLmZvckVhY2goZnVuY3Rpb24odGVzdCkge1xuXHRcdFx0XG5cdFx0XHQvL3Bhc3MgdGhlIHZhbHVlIGFuZCB0ZXN0IHRoZSBjb25zdHJhaW50XG5cdFx0XHRpZihyZXF1aXJubWVudHNbdGVzdF0udGVzdCh2YWx1ZSkpIHtcblx0XHRcdFx0Ly9pZiBpdCBwYXNzZXMgdGhlIHRlc3QgdXBkYXRlIHRoZSBzdGF0dXNcblx0XHRcdFx0cmVxdWlybm1lbnRzW3Rlc3RdLm1ldCA9IHRydWU7IFxuXHRcdFx0XHQvL2dldCB0aGUgZXJyb3IgbWVzc2FnZVxuXHRcdFx0XHQvL2FsbFRlc3RzUGFzcyA9IHRydWVcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJlcXVpcm5tZW50c1t0ZXN0XS5tZXQgPSBmYWxzZTtcblx0XHRcdFx0YWxsVGVzdHNQYXNzID0gZmFsc2U7IFxuXHRcdFx0fVxuXHRcdH0pXG5cdFx0Ly91cGRhdGUgdGhlIGZsYWdcblx0XHR0aGlzLnBhc3Nlc0FsbFJlcXMgPSBhbGxUZXN0c1Bhc3M7XG5cblx0XHRpZighYWxsVGVzdHNQYXNzKSB7XG5cdFx0XHQvL2J1aWxkIHRoZSBlcnJvciBtZXNzYWdlXG5cdFx0XHR0aGlzLmJ1aWxkRXJyb3JNZXNzYWdlKCk7XG5cdFx0XHQvL3Rocm93IGl0J3MgZmxhZ1xuXHRcdFx0dGhpcy5oYXNBbkVycm9yTWVzc2FnZSA9IHRydWU7XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5oYXNBbkVycm9yTWVzc2FnZSA9IGZhbHNlO1xuXHRcdH1cblx0XHQvL3VwZGF0ZSBlbGVtZW50IGNsYXNzZXNcblx0XHR0aGlzLnVwZGF0ZUNsYXNzZXMoKTtcblx0XHQvL3VwZGF0ZSBzdHlsZXMgaWYgbmVlZCBiZVxuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHRoaXMudXBkYXRlUmVxU3R5bGVzKSkgdGhpcy51cGRhdGVSZXFTdHlsZXMoKTtcblx0XHQvL3Rocm93IGFsbFJlcXNUZXN0ZWQgZmxhZ1xuXHRcdHRoaXMuYWxsUmVxc1Rlc3RlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcG9zdEZhaWxSZXFzVGVzdCgpIHtcbiAgICBcdC8vaWYgYSBjb21wbGV0ZSBhdHRlbXB0IGhhcyBvY2N1cmVkIHRoZW4gY2hlY2sgb24ga2V5c3Ryb2tlXG4gICAgXHRpZih0aGlzLmFsbFJlcXNUZXN0ZWQpIHtcbiAgICBcdFx0dGhpcy5jaGVja0FsbFJlcXVpcm5tZW50cygpO1xuICAgIFx0fVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9wZW5SZXFCb3goKSB7XG4gICAgXHR0aGlzLnNob3dSZXFzQm94ID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbG9zZVJlcUJveCgpIHtcbiAgICBcdHRoaXMuc2hvd1JlcXNCb3ggPSBmYWxzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZW5lcmF0ZVRlc3RhYmxlT2JqZWN0KHR5cGUpIHtcbiAgICBcdC8vYnVpbGQgb2JqZWN0c1xuICAgIFx0dmFyIHRlc3RhYmxlT2JqZWN0cyA9IHtcbiAgICBcdFx0bmFtZToge1xuICAgIFx0XHRcdHZhbHVlOiAnJyxcbiAgICBcdFx0XHRyZXFzOiB7XG4gICAgXHRcdFx0XHRoYXNPbmU6IHJlcXVpcmVkLFxuICAgIFx0XHRcdFx0bG9uZ0Vub3VnaDogbmFtZU1pbkxlbmd0aFxuICAgIFx0XHRcdH0sXG4gICAgXHRcdFx0ZXJyb3JNZXNzYWdlOiAnJyxcbiAgICBcdFx0XHRoYXNWYWx1ZTogZmFsc2UsXG4gICAgXHRcdFx0cGFzc2VzQWxsUmVxczogZmFsc2UsXG4gICAgXHRcdFx0YWxsUmVxc1Rlc3RlZDogZmFsc2UsXG4gICAgXHRcdFx0aGFzQW5FcnJvck1lc3NhZ2U6IGZhbHNlLFxuICAgIFx0XHRcdGJ1aWxkRXJyb3JNZXNzYWdlOiBidWlsZEVycm9yTWVzc2FnZSxcbiAgICBcdFx0XHRjaGVja0ZvclZhbHVlOiBjaGVja0ZvclZhbHVlLFxuICAgIFx0XHRcdGNoZWNrRm9yRXJyb3JNZXNzYWdlOiBjaGVja0ZvckVycm9yTWVzc2FnZSxcbiAgICBcdFx0XHRjaGVja0FsbFJlcXVpcm5tZW50czogY2hlY2tBbGxSZXF1aXJubWVudHMsXG4gICAgXHRcdFx0cG9zdEZhaWxSZXFzVGVzdDogcG9zdEZhaWxSZXFzVGVzdCxcbiAgICBcdFx0XHR1cGRhdGVDbGFzc2VzOiB1cGRhdGVDbGFzc2VzLFxuICAgIFx0XHRcdGNsYXNzOiB7XG4gICAgXHRcdFx0XHRyb3c6IHtcbiAgICBcdFx0XHRcdFx0J2NvbC14cy0xMic6IHRydWUsXG4gICAgXHRcdFx0XHRcdCdjb2wtc20tMTInOiB0cnVlLFxuICAgIFx0XHRcdFx0XHQnZm9ybS1ncm91cCc6IHRydWUsXG4gICAgXHRcdFx0XHRcdCdoYXMtc3VjY2Vzcyc6IGZhbHNlLFxuICAgIFx0XHRcdFx0XHQnaGFzLWVycm9yJzogZmFsc2VcbiAgICBcdFx0XHRcdH0sXG4gICAgXHRcdFx0XHRsYWJlbDoge1xuICAgIFx0XHRcdFx0XHQnY29udHJvbC1sYWJlbCc6IHRydWVcbiAgICBcdFx0XHRcdH0sXG4gICAgXHRcdFx0XHRpbnB1dDoge1xuICAgIFx0XHRcdFx0XHQnY29sLXhzLTEyJzogdHJ1ZSxcblx0ICAgIFx0XHRcdFx0J2NvbC1zbS0xMic6IHRydWUsXG5cdCAgICBcdFx0XHRcdCdjb2wtbWQtMTInOiB0cnVlLFxuXHQgICAgXHRcdFx0XHQnZm9ybS1jb250cm9sJzogdHJ1ZVxuICAgIFx0XHRcdFx0fVxuICAgIFx0XHRcdH0sXG4gICAgXHRcdFx0c3R5bGU6IHtcbiAgICBcdFx0XHRcdCdjb2xvcic6ICdibGFjaydcbiAgICBcdFx0XHR9XG4gICAgXHRcdH0sXG4gICAgXHRcdGVtYWlsOiB7XG4gICAgXHRcdFx0dmFsdWU6ICcnLFxuICAgIFx0XHRcdHJlcXM6IHtcbiAgICBcdFx0XHRcdGhhc09uZTogcmVxdWlyZWQsXG4gICAgXHRcdFx0XHRpc0FuRW1haWw6IGlzQW5FbWFpbFxuICAgIFx0XHRcdH0sXG4gICAgXHRcdFx0ZXJyb3JNZXNzYWdlOiAnJyxcbiAgICBcdFx0XHRoYXNWYWx1ZTogZmFsc2UsXG4gICAgXHRcdFx0cGFzc2VzQWxsUmVxczogZmFsc2UsXG4gICAgXHRcdFx0YWxsUmVxc1Rlc3RlZDogZmFsc2UsXG4gICAgXHRcdFx0aGFzQW5FcnJvck1lc3NhZ2U6IGZhbHNlLFxuICAgIFx0XHRcdGJ1aWxkRXJyb3JNZXNzYWdlOiBidWlsZEVycm9yTWVzc2FnZSxcbiAgICBcdFx0XHRjaGVja0ZvclZhbHVlOiBjaGVja0ZvclZhbHVlLFxuICAgIFx0XHRcdGNoZWNrRm9yRXJyb3JNZXNzYWdlOiBjaGVja0ZvckVycm9yTWVzc2FnZSxcbiAgICBcdFx0XHRjaGVja0FsbFJlcXVpcm5tZW50czogY2hlY2tBbGxSZXF1aXJubWVudHMsXG4gICAgXHRcdFx0cG9zdEZhaWxSZXFzVGVzdDogcG9zdEZhaWxSZXFzVGVzdCxcbiAgICBcdFx0XHR1cGRhdGVDbGFzc2VzOiB1cGRhdGVDbGFzc2VzLFxuICAgIFx0XHRcdGNsYXNzOiB7XG4gICAgXHRcdFx0XHRyb3c6IHtcbiAgICBcdFx0XHRcdFx0J2NvbC14cy0xMic6IHRydWUsXG4gICAgXHRcdFx0XHRcdCdjb2wtc20tMTInOiB0cnVlLFxuICAgIFx0XHRcdFx0XHQnZm9ybS1ncm91cCc6IHRydWUsXG4gICAgXHRcdFx0XHRcdCdoYXMtc3VjY2Vzcyc6IGZhbHNlLFxuICAgIFx0XHRcdFx0XHQnaGFzLWVycm9yJzogZmFsc2VcbiAgICBcdFx0XHRcdH0sXG4gICAgXHRcdFx0XHRsYWJlbDoge1xuICAgIFx0XHRcdFx0XHQnY29udHJvbC1sYWJlbCc6IHRydWVcbiAgICBcdFx0XHRcdH0sXG4gICAgXHRcdFx0XHRpbnB1dDoge1xuICAgIFx0XHRcdFx0XHQnY29sLXhzLTEyJzogdHJ1ZSxcblx0ICAgIFx0XHRcdFx0J2NvbC1zbS0xMic6IHRydWUsXG5cdCAgICBcdFx0XHRcdCdjb2wtbWQtMTInOiB0cnVlLFxuXHQgICAgXHRcdFx0XHQnZm9ybS1jb250cm9sJzogdHJ1ZVxuICAgIFx0XHRcdFx0fVxuICAgIFx0XHRcdH0sXG4gICAgXHRcdFx0c3R5bGU6IHtcbiAgICBcdFx0XHRcdCdjb2xvcic6ICdibGFjaydcbiAgICBcdFx0XHR9XG4gICAgXHRcdH0sXG4gICAgXHRcdHBhc3M6IHtcbiAgICBcdFx0XHR2YWx1ZTogJycsXG4gICAgXHRcdFx0cmVxczoge1xuICAgIFx0XHRcdFx0aGFzT25lOiByZXF1aXJlZCxcbiAgICBcdFx0XHRcdGxvbmdFbm91Z2g6IHBhc3NNaW5MZW5ndGgsXG4gICAgXHRcdFx0XHRzaG9ydEVub3VnaDogcGFzc01heExlbmd0aCxcbiAgICBcdFx0XHRcdGhhc0xvd2VyY2FzZTogaGFzTG93ZXJjYXNlLFxuICAgIFx0XHRcdFx0aGFzVXBwZXJjYXNlOiBoYXNVcHBlcmNhc2UsXG4gICAgXHRcdFx0XHRoYXNBTnVtYmVyOiBoYXNBTnVtYmVyLFxuICAgIFx0XHRcdFx0aGFzQVN5bWJvbDogaGFzQVN5bWJvbCxcbiAgICBcdFx0XHRcdG5vSWxsZWdhbENoYXJzOiBub0lsbGVnYWxDaGFyc1xuICAgIFx0XHRcdH0sXG4gICAgXHRcdFx0ZXJyb3JNZXNzYWdlOiAnJyxcbiAgICBcdFx0XHRoYXNWYWx1ZTogZmFsc2UsXG4gICAgXHRcdFx0cGFzc2VzQWxsUmVxczogZmFsc2UsXG4gICAgXHRcdFx0YWxsUmVxc1Rlc3RlZDogZmFsc2UsXG4gICAgXHRcdFx0aGFzQW5FcnJvck1lc3NhZ2U6IGZhbHNlLFxuICAgIFx0XHRcdHNob3dSZXFzQm94OiBmYWxzZSxcbiAgICBcdFx0XHRidWlsZEVycm9yTWVzc2FnZTogYnVpbGRFcnJvck1lc3NhZ2UsXG4gICAgXHRcdFx0Y2hlY2tGb3JWYWx1ZTogY2hlY2tGb3JWYWx1ZSxcbiAgICBcdFx0XHRjaGVja0ZvckVycm9yTWVzc2FnZTogY2hlY2tGb3JFcnJvck1lc3NhZ2UsXG4gICAgXHRcdFx0Y2hlY2tBbGxSZXF1aXJubWVudHM6IGNoZWNrQWxsUmVxdWlybm1lbnRzLFxuICAgIFx0XHRcdHBvc3RGYWlsUmVxc1Rlc3Q6IHBvc3RGYWlsUmVxc1Rlc3QsXG4gICAgXHRcdFx0dXBkYXRlQ2xhc3NlczogdXBkYXRlQ2xhc3NlcyxcbiAgICBcdFx0XHR1cGRhdGVSZXFTdHlsZXM6IHVwZGF0ZVJlcVN0eWxlcyxcbiAgICBcdFx0XHRvcGVuUmVxQm94OiBvcGVuUmVxQm94LFxuICAgIFx0XHRcdGNsb3NlUmVxQm94OiBjbG9zZVJlcUJveCxcbiAgICBcdFx0XHRjbGFzczoge1xuICAgIFx0XHRcdFx0cm93OiB7XG4gICAgXHRcdFx0XHRcdCdjb2wteHMtMTInOiB0cnVlLFxuICAgIFx0XHRcdFx0XHQnY29sLXNtLTEyJzogdHJ1ZSxcbiAgICBcdFx0XHRcdFx0J2Zvcm0tZ3JvdXAnOiB0cnVlLFxuICAgIFx0XHRcdFx0XHQnaGFzLXN1Y2Nlc3MnOiBmYWxzZSxcbiAgICBcdFx0XHRcdFx0J2hhcy1lcnJvcic6IGZhbHNlXG4gICAgXHRcdFx0XHR9LFxuICAgIFx0XHRcdFx0bGFiZWw6IHtcbiAgICBcdFx0XHRcdFx0J2NvbnRyb2wtbGFiZWwnOiB0cnVlXG4gICAgXHRcdFx0XHR9LFxuICAgIFx0XHRcdFx0aW5wdXQ6IHtcbiAgICBcdFx0XHRcdFx0J2NvbC14cy0xMic6IHRydWUsXG5cdCAgICBcdFx0XHRcdCdjb2wtc20tMTInOiB0cnVlLFxuXHQgICAgXHRcdFx0XHQnY29sLW1kLTEyJzogdHJ1ZSxcblx0ICAgIFx0XHRcdFx0J2Zvcm0tY29udHJvbCc6IHRydWVcbiAgICBcdFx0XHRcdH1cbiAgICBcdFx0XHR9LFxuICAgIFx0XHRcdHN0eWxlOiB7XG4gICAgXHRcdFx0XHQnY29sb3InOiAnYmxhY2snXG4gICAgXHRcdFx0fSxcbiAgICBcdFx0XHRyZXFCb3g6IHtcbiAgICBcdFx0XHRcdGhhc09uZTogeyByZXE6ICdOZWVkIHRvIHNldCBhIHBhc3N3b3JkJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9fSxcbiAgICBcdFx0XHRcdGxvbmdFbm91Z2g6IHsgcmVxOiAnSXMgYXQgbGVhc3QgNiBjaGFyYWN0ZXJzIGxvbmcnLCAnc3R5bGUnOntjb2xvcjoncmVkJ319LFxuICAgIFx0XHRcdFx0c2hvcnRFbm91Z2g6IHsgcmVxOiAnSXMgbm8gbG9uZ2VyIHRoYW4gMTAwIGNoYXJhY3RlcnMnLCAnc3R5bGUnOntjb2xvcjoncmVkJ319LFxuICAgIFx0XHRcdFx0aGFzTG93ZXJjYXNlOiB7IHJlcTogJ0NvbnRhaW5zIGF0IGxlYXN0IG9uZSBsb3dlcmNhc2UgbGV0dGVyJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9fSxcbiAgICBcdFx0XHRcdGhhc1VwcGVyY2FzZTogeyByZXE6ICdDb250YWlucyBhdCBsZWFzdCBvbmUgdXBwZXJjYXNlIGxldHRlcicsICdzdHlsZSc6e2NvbG9yOidyZWQnfX0sXG4gICAgXHRcdFx0XHRoYXNBTnVtYmVyOiB7IHJlcTogJ0NvbnRhaW5zIGF0IGxlYXN0IG9uZSBudW1iZXInLCAnc3R5bGUnOntjb2xvcjoncmVkJ319LFxuICAgIFx0XHRcdFx0aGFzQVN5bWJvbDogeyByZXE6ICdDb250YWlucyBhdCBsZWFzdCBvbmUgcmVxdWlyZWQgc3ltYm9sIChcXCFcXEBcXCNcXCRcXCVcXF5cXCZcXCopJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9fSxcbiAgICBcdFx0XHRcdG5vSWxsZWdhbENoYXJzOiB7IHJlcTogJ0RvZXNuXFwndCBoYXZlIGFueSBpbGxlZ2FsIGNoYXJhY3RlcnMnLCAnc3R5bGUnOntjb2xvcjoncmVkJ319LFxuICAgIFx0XHRcdH1cbiAgICBcdFx0fVxuICAgIFx0fVxuXG4gICAgXHRyZXR1cm4gdGVzdGFibGVPYmplY3RzW3R5cGVdO1xuXG4gICAgfVxuXG5cdGZ1bmN0aW9uIHVwZGF0ZUV2ZW50UmVxU3RhdHVzKCkge31cblx0ZnVuY3Rpb24gdXBkYXRlRXZlbnRSZXFBZGRyZXNzZWQoKSB7fSBcblx0ZnVuY3Rpb24gdXBkYXRlRXZlbnRSZXFDbGFzcygpIHt9XG5cblx0cmV0dXJuIGFsbFZhbGlkYXRpb25zO1xufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbmZpZyhjb25maWcpO1xuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBjb25maWcoJHJvdXRlUHJvdmlkZXIpIHsgICBcbiAgICAkcm91dGVQcm92aWRlclxuICAgIC53aGVuKCcvJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2xhbmRpbmdQYWdlLmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdMYW5kaW5nUGFnZUNvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICB9KVxuICAgIC53aGVuKCcvc2lnbnVwJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL25ld1VzZXJTaWdudXAuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ05ld1VzZXJTaWduVXBDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgfSlcbiAgICAud2hlbignL2xvZ2luJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3JlZ2lzdGVyZWRVc2VyTG9naW4uaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1JlZ1VzZXJMb2dpbkNvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICB9KVxuICAgIC53aGVuKCcvdXNlckluZm9ybWF0aW9uLzp1aWQ/Jywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3VzZXJJbmZvcm1hdGlvbi5odG0nLFxuICAgICAgICBjb250cm9sbGVyOiAnVXNlckluZm9ybWF0aW9uQ29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgcmVzb2x2ZTogeyAvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgICAgIHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2U6IHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2VcbiAgICAgICAgfVxuICAgIH0pXG4gICAgLndoZW4oJy91c2VyRXZlbnRzLzp1aWQ/Jywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3VzZXJFdmVudHMuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1VzZXJFdmVudHNDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICByZXNvbHZlOiB7IC8qIEBuZ0luamVjdCAqL1xuICAgICAgICAgICAgdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZTogdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZVxuICAgICAgICB9XG4gICAgfSlcbiAgICAud2hlbignL2V2ZW50L2hvc3QvOmV2ZW50SWQvOnVpZC86c2VjdGlvbicsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9ob3N0RXZlbnQuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ0hvc3RFdmVudENvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgIHJlc29sdmU6IHsgLyogQG5nSW5qZWN0ICovXG4gICAgICAgICAgICB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlOiB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlLFxuICAgICAgICB9XG4gICAgfSlcbiAgICAud2hlbignL2V2ZW50L2d1ZXN0LzpldmVudElkLzp1aWQvOmhvc3RJZCcsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9ndWVzdEV2ZW50Lmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdHdWVzdEV2ZW50Q29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgcmVzb2x2ZTogeyAvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgICAgIHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2U6IHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2UsXG4gICAgICAgIH1cbiAgICB9KVxuICAgIC53aGVuKCcvZXZlbnQvOmV2ZW50SWQ/Lzpob3N0SWQ/Lzp1aWQ/LzpzZWN0aW9uPycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9hbkV2ZW50Lmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdBbkV2ZW50Q29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgcmVzb2x2ZTogeyAvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgICAgIHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2U6IHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2UsXG4gICAgICAgICAgICBldmVudFZpZXdDaGFuZ2VyOiBldmVudFZpZXdDaGFuZ2VyXG4gICAgICAgIH1cbiAgICB9KVxuICAgIC5vdGhlcndpc2Uoe1xuICAgICAgICByZWRpcmVjdFRvOiAnLydcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZShhdXRoU2VydmljZSkge1xuICAgIGF1dGhTZXJ2aWNlLmlzTG9nZ2VkSW4oKTtcbn07XG5cbmZ1bmN0aW9uIGV2ZW50Vmlld0NoYW5nZXIodHJhZmZpY1ZhbGV0LCAkcm91dGUpIHtcbiAgICB0cmFmZmljVmFsZXQuZXZlbnRSb3V0ZSgkcm91dGUuY3VycmVudC5wYXJhbXMuZXZlbnRJZCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvdXRlLmN1cnJlbnQucGFyYW1zLmhvc3RJZCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvdXRlLmN1cnJlbnQucGFyYW1zLnVpZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm91dGUuY3VycmVudC5wYXJhbXMuc2VjdGlvbik7XG59OyIsIlxuY29uZmlnLiRpbmplY3QgPSBbXCIkcm91dGVQcm92aWRlclwiXTtcbnVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2UuJGluamVjdCA9IFtcImF1dGhTZXJ2aWNlXCJdO1xuZXZlbnRWaWV3Q2hhbmdlci4kaW5qZWN0ID0gW1widHJhZmZpY1ZhbGV0XCIsIFwiJHJvdXRlXCJdO2FuZ3VsYXJcblx0Lm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnLCBbXG5cdFx0J25nUm91dGUnLFxuXHRcdCduZ1RvdWNoJyxcblx0XHQnZmlyZWJhc2UnXG5cdF0pO1xuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignQW5FdmVudENvbnRyb2xsZXInLCBBbkV2ZW50Q29udHJvbGxlcik7XG5cbkFuRXZlbnRDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJHJvdXRlUGFyYW1zJywgXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBBbkV2ZW50Q29udHJvbGxlcigkbG9nLCAkcm91dGVQYXJhbXMpIHtcblx0dmFyIHZtID0gdGhpcztcblx0XG5cdC8vbG9jYWwgdmFyaWFibGVzXG5cdHZtLnRlbXBUaW1lID0ge3N0YXJ0OiAnJywgZW5kOiAnJ307XG5cdHZtLnVzZXJJc0hvc3QgPSBmYWxzZTtcblxuXG5cdC8vTG9jYWwgTWV0aG9kc1xuXHRmdW5jdGlvbiBpbml0KCkge1xuXHRcdC8vZGVjbGFyZSBhbmQgaW5pdGlhbGl6ZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2bS50ZW1wRGF0ZVRpbWUgPSB7c3RhcnQ6ICcnLCBlbmQ6ICcnfTtcblx0XHR2bS5uZXdHdWVzdCA9IHtuYW1lOiAnJywgZW1haWw6e2FkZHJlc3M6JycsIHZhbGlkOmZhbHNlLCBzdHlsZTp7Y29sb3I6Jyd9fX07XG5cdFx0dm0uc2hvd0lmSG9zdCA9IGZhbHNlO1xuXHRcdHZtLmhpZGVJZkF0dGVuZGluZyA9IHRydWU7XG5cdFx0Ly9zZWN0aW9uc1xuXHRcdHZtLm1hbmFnZVNlY3Rpb25zID0ge1xuXHRcdFx0MToge2FjdGl2ZTogdHJ1ZSwgY29tcGxldGU6IGZhbHNlLCBzdHlsZTp7Y29sb3I6J2JsYWNrJywgJ2JhY2tncm91bmQtY29sb3InOid5ZWxsb3cnfX0sXG5cdFx0XHQyOiB7YWN0aXZlOiBmYWxzZSwgY29tcGxldGU6IGZhbHNlLCBzdHlsZTp7Y29sb3I6J3doaXRlJywgJ2JhY2tncm91bmQtY29sb3InOidncmF5J319LFxuXHRcdFx0Mzoge2FjdGl2ZTogZmFsc2UsIGNvbXBsZXRlOiBmYWxzZSwgc3R5bGU6e2NvbG9yOid3aGl0ZScsICdiYWNrZ3JvdW5kLWNvbG9yJzonZ3JheSd9fVxuXHRcdH07XG5cblx0XHQvL2NoZWNrIHVzZXIgdG8gZGV0ZXJtaW5lIHN0YXRlXG5cdFx0Y2hlY2tGb3JIb3N0KCk7XG5cdFx0Y2hlY2tJZkd1ZXN0SXNBdHRlbmRpbmcoKTtcblxuXHRcdC8vb3BlbiB1cCBzZWN0aW9uc1xuXHRcdGlmKCF2bS5zaG93SWZIb3N0KSBvcGVuQWxsU2VjdGlvbnMoKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHV0ZjhfdG9fYjY0KHN0cikge1xuXHRcdHJldHVybiBidG9hKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiBiNjRfdG9fdXRmOChzdHIpIHtcbiAgICBcdHJldHVybiBhdG9iKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH1cblxuXHRmdW5jdGlvbiBjbGVhbk5ld0d1ZXN0VmFyaWFibGUoKSB7XG5cdFx0dm0ubmV3R3Vlc3QgPSB7bmFtZTogJycsIGVtYWlsOnthZGRyZXNzOicnLCB2YWxpZDpmYWxzZSwgc3R5bGU6e2NvbG9yOicnfX19O1xuXHR9XG5cblx0ZnVuY3Rpb24gaW52aXRlQVJlZ2lzdGVyZWRVc2VyKHVpZCkge1xuXHRcdCRsb2cuaW5mbygnYWRkaW5nIHRoZW0gdG8gdGhlIHJlZ2lzdGVyZWQgdXNlcnMgbGlzdCAnICsgdWlkKTtcblx0XHQvL3NldCB0aGUgbmV3IGV2ZW50XG5cdFx0cmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdwZW5kaW5nJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJHJvdXRlUGFyYW1zLmV2ZW50SWQpLnNldCh7XG5cdFx0XHRpZDogJHJvdXRlUGFyYW1zLmV2ZW50SWQsXG5cdFx0XHRldmVudFRpbWVzOiB7XG5cdFx0XHRcdHN0YXJ0OiB2bS5ldmVudC5ldmVudFRpbWVzLnN0YXJ0LFxuXHRcdFx0XHRlbmQ6IHZtLmV2ZW50LmV2ZW50VGltZXMuZW5kXG5cdFx0XHR9LFxuXHRcdFx0bmFtZTogdm0uZXZlbnQubmFtZSxcblx0XHRcdGhvc3Q6ICRyb3V0ZVBhcmFtcy51aWRcblx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbygndGhlcmUgd2FzIGFuIGVycm9yJyArIGVycm9yKTtcblx0XHR9KTtcblx0XHQvL2lmIHRoZXJlIHdhcyBhbiB1cGRhdGVkIHBsYWNlIGhvbGRlciwgcmVtb3ZlIGl0XG5cdFx0cmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdwZW5kaW5nJykub25jZSgndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0dmFyIGNoZWNrRm9yUGxhY2Vob2xkZXIgPSBzbmFwc2hvdC52YWwoKVxuXHRcdFx0JGxvZy5pbmZvKHNuYXBzaG90LnZhbCgpKTtcblxuXHRcdFx0aWYoY2hlY2tGb3JQbGFjZWhvbGRlci51cGRhdGVkKSB7XG5cdFx0XHRcdCRsb2cuaW5mbygnZGVsZXRpbmcgdXBkYXRlZCcpO1xuXHRcdFx0XHRyZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ3BlbmRpbmcnKS5jaGlsZCgndXBkYXRlZCcpLnJlbW92ZShmdW5jdGlvbihlcnJvck9iamVjdCkge1xuXHRcdFx0XHRcdGlmKGVycm9yT2JqZWN0KSAkbG9nLmluZm8oXCJEZWxldGluZyBmYWlsZWQ6IFwiICsgZXJyb3JPYmplY3QuY29kZSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlICRsb2cuaW5mbygnbm90aGluZyB0byBkbycpO1xuXG5cdFx0fSwgZnVuY3Rpb24oZXJyb3JPYmplY3QpIHtcblx0XHRcdGlmKGVycm9yT2JqZWN0KSAkbG9nLmluZm8oXCJUaGUgcmVhZCBmYWlsZWQ6IFwiICsgZXJyb3JPYmplY3QuY29kZSk7XG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBpbnZpdGVBblVucmVnaXN0ZXJlZFVzZXIodXNlcktleSkge1xuXHRcdCRsb2cuaW5mbygnYWRkaW5nIHRoZW0gdG8gdGhlIFVOUkVHSVNURVJFRCB1c2VycyBsaXN0ICcgKyB1c2VyS2V5KTtcblx0XHRyZWYuY2hpbGQoJ1VucmVnaXN0ZXJlZFVzZXJzJykuY2hpbGQodXNlcktleSkuY2hpbGQoJ3BlbmRpbmcnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS5jaGlsZCgkcm91dGVQYXJhbXMuZXZlbnRJZCkuc2V0KHtcblx0XHRcdGlkOiAkcm91dGVQYXJhbXMuZXZlbnRJZCxcblx0XHRcdGhvc3Q6ICRyb3V0ZVBhcmFtcy51aWQsXG5cdFx0XHRldmVudFRpbWVzOiB7XG5cdFx0XHRcdHN0YXJ0OiB2bS5ldmVudC5ldmVudFRpbWVzLnN0YXJ0LFxuXHRcdFx0XHRlbmQ6IHZtLmV2ZW50LmV2ZW50VGltZXMuZW5kXG5cdFx0XHR9LFxuXHRcdFx0bmFtZTogdm0uZXZlbnQubmFtZVxuXHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKCd0aGVyZSB3YXMgYW4gZXJyb3InICsgZXJyb3IpO1xuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gY2hlY2tGb3JIb3N0KCkge1xuXHRcdC8vY2hlY2sgZXZlbnQgaG9zdFxuXHRcdHZhciBhdXRoRGF0YSA9IHJlZi5nZXRBdXRoKCk7XG5cblx0XHRpZihhdXRoRGF0YS51aWQgPT0gJHJvdXRlUGFyYW1zLmhvc3RJZCkge1xuXHRcdFx0JGxvZy5pbmZvKCdpcyB0aGUgaG9zdCcpO1xuXHRcdFx0dm0uc2hvd0lmSG9zdCA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCRsb2cuaW5mbygnbm90IHRoZSBob3N0Jyk7XG5cdFx0XHR2bS5zaG93SWZIb3N0ID0gZmFsc2U7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gY2hlY2tJZkd1ZXN0SXNBdHRlbmRpbmcoKSB7XG5cdFx0aWYoIXZtLnNob3dJZkhvc3QpIHtcblx0XHRcdCRsb2cuaW5mbygnY2hlY2sgZ3Vlc3QgYXR0ZW5kYW5jZScpO1xuXHRcdFx0dXNlckV2ZW50cy5jaGlsZCgnZ3Vlc3RMaXN0Jykub24oJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdFx0dmFyIGFsbEd1ZXN0cyA9IHNuYXBzaG90LnZhbCgpO1xuXHRcdFx0XHR2bS5oaWRlSWZBdHRlbmRpbmcgPSAhYWxsR3Vlc3RzWyRyb3V0ZVBhcmFtcy51aWRdLmF0dGVuZGluZztcblx0XHRcdFx0XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBvcGVuQWxsU2VjdGlvbnMoKSB7XG5cdFx0dm0ubWFuYWdlU2VjdGlvbnNbMV0uYWN0aXZlID0gdHJ1ZTtcblx0XHR2bS5tYW5hZ2VTZWN0aW9uc1syXS5hY3RpdmUgPSB0cnVlO1xuXHRcdHZtLm1hbmFnZVNlY3Rpb25zWzNdLmFjdGl2ZSA9IHRydWU7XG5cdH1cblxuXHRmdW5jdGlvbiBzYXZlRXZlbnQoKSB7XG5cdFx0dm0uZXZlbnQuJHNhdmUoKS50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdFx0JGxvZy5pbmZvKCdldmVudCBzYXZlZCcpO1xuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2Vycm9yISAnICsgZXJyb3IpO1xuXHRcdH0pO1xuXHR9XG5cblx0Ly92aWV3IE1ldGhvZFxuXHR2bS5zZXRUZW1wVGltZSA9IGZ1bmN0aW9uKGVuZHBvaW50KSB7XG5cdFx0aWYoZW5kcG9pbnQgPT0gJ3N0YXJ0Jykgdm0udGVtcERhdGVUaW1lLnN0YXJ0ID0gbmV3IERhdGUoKTtcblx0XHRpZihlbmRwb2ludCA9PSAnZW5kJykgdm0udGVtcERhdGVUaW1lLmVuZCA9IG5ldyBEYXRlKCk7XG5cdH1cblxuXHR2bS51bml4VGltZVRvRGF0ZVRpbWUgPSBmdW5jdGlvbiAodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fTtcblxuXHR2bS5kYXRlVGltZVRvVW5peFRpbWUgPSBmdW5jdGlvbiAoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH07XG5cblx0dm0uc3VibWl0ID0gZnVuY3Rpb24oKSB7XG5cdFx0JGxvZy5pbmZvKCdzdWJtaXR0aW5nIHRoZSBmb3JtIG5vdyEnKTtcblx0fVxuXG5cdHZtLmJhY2tUb1VzZXJFdmVudHMgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9jYXRpb24ucGF0aCgnL3VzZXJFdmVudHMvJyArICRyb3V0ZVBhcmFtcy51aWQgKyAnLycgKyAkcm91dGVQYXJhbXMudG9rZW4pO1xuXHR9XG5cblx0dm0uZXZlbnRSZWRpcmVjdCA9IGZ1bmN0aW9uKHBhdGgsIGV2ZW50SUQpIHtcblx0XHR2YXIgZnVsbFBhdGggPSBwYXRoICsgJy8nICsgJHJvdXRlUGFyYW1zLnVpZCArICcvJyArICRyb3V0ZVBhcmFtcy50b2tlbjtcblx0XHQvL3JlZGlyZWN0XG5cdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyB0bzogJyArIGZ1bGxQYXRoKTtcblx0XHQkbG9jYXRpb24ucGF0aChmdWxsUGF0aCk7XG5cdH1cblxuXHR2bS5jaGFuZ2VTZWN0aW9uID0gZnVuY3Rpb24odGFyZ2V0U2VjdGlvbikge1xuXHRcdCRsb2cuaW5mbygnYXJlIHdlIGhlcmUnKTtcblx0XHRmb3IoaSA9IDE7IGkgPD0zOyBpKyspIHtcblx0XHRcdGlmKGk9PXRhcmdldFNlY3Rpb24pIHtcblx0XHRcdFx0dm0ubWFuYWdlU2VjdGlvbnNbaV0uYWN0aXZlID0gdHJ1ZTtcblx0XHRcdFx0dm0ubWFuYWdlU2VjdGlvbnNbaV0uc3R5bGVbJ2JhY2tncm91bmQtY29sb3InXSA9J3llbGxvdyc7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLnN0eWxlWydjb2xvciddID0nYmxhY2snO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0ubWFuYWdlU2VjdGlvbnNbaV0uYWN0aXZlID0gZmFsc2U7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLnN0eWxlWydiYWNrZ3JvdW5kLWNvbG9yJ10gPSdncmF5Jztcblx0XHRcdFx0dm0ubWFuYWdlU2VjdGlvbnNbaV0uc3R5bGVbJ2NvbG9yJ10gPSd3aGl0ZSc7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0dm0uc2F2ZUV2ZW50VGltZSA9IGZ1bmN0aW9uKGRhdGVUaW1lLCB0YXJnZXQpIHtcblx0XHQvL2lmIHRoaXMgZXZlbnQgZGlkbid0IGhhdmUgYSBzdGFydCB0aW1lLCBjcmVhdGUgaXRcblx0XHRpZighdm0uZXZlbnQuZXZlbnRUaW1lcykgeyBcblx0XHRcdHZtLmV2ZW50LmV2ZW50VGltZXMgPSB7c3RhcnQ6ICcnLCBlbmQ6ICcnfTtcblx0XHRcdHZtLmV2ZW50LmV2ZW50VGltZXMuc3RhcnQgPSB2bS5kYXRlVGltZVRvVW5peFRpbWUodm0udGVtcERhdGVUaW1lLnN0YXJ0KTsgXG5cdFx0XHR2bS5ldmVudC5ldmVudFRpbWVzLmVuZCA9IHZtLmRhdGVUaW1lVG9Vbml4VGltZSh2bS50ZW1wRGF0ZVRpbWUuZW5kKTtcblx0XHR9XG5cblx0XHRpZigodm0udGVtcERhdGVUaW1lLmVuZCA8IHZtLnRlbXBEYXRlVGltZS5zdGFydCkgJiYgdGFyZ2V0ID09ICdzdGFydCcpIHZtLnRlbXBEYXRlVGltZS5lbmQgPSB2bS50ZW1wRGF0ZVRpbWUuc3RhcnQ7XG5cdFx0aWYodGFyZ2V0ID09ICdzdGFydCcpIHZtLmV2ZW50LmV2ZW50VGltZXMuc3RhcnQgPSB2bS5kYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpO1xuXHRcdGlmKHRhcmdldCA9PSAnZW5kJykgdm0uZXZlbnQuZXZlbnRUaW1lcy5lbmQgPSB2bS5kYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpO1xuXHR9XG5cblx0dm0uZ3Vlc3RzQXJlSW52aXRlZCA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHZtLmV2ZW50Lmd1ZXN0TGlzdCkgcmV0dXJuIHRydWU7XG5cdFx0ZWxzZSByZXR1cm4gZmFsc2U7XG5cdH1cblxuXHR2bS52YWxpZGF0ZUd1ZXN0RW1haWwgPSBmdW5jdGlvbigpIHtcblx0XHQvL2lmIHRoZXJlIGlzIGFuIGVtYWlsIGFkZHJlc3Ncblx0XHRpZih2bS5uZXdHdWVzdC5lbWFpbC5hZGRyZXNzKSB7XG5cdFx0XHQvL2NoZWNrIHZhbGlkaXR5XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKD86XFwuW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKykqQCg/OlthLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cXC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cIiwgXCJcIik7XG5cblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2bS5uZXdHdWVzdC5lbWFpbC5hZGRyZXNzKSkge1xuXHRcdFx0XHR2bS5uZXdHdWVzdC5lbWFpbC52YWxpZCA9IHRydWU7XG5cdFx0XHRcdHZtLm5ld0d1ZXN0LmVtYWlsLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0ubmV3R3Vlc3QuZW1haWwudmFsaWQgPSBmYWxzZTtcblx0XHRcdFx0dm0ubmV3R3Vlc3QuZW1haWwuc3R5bGUgPSB7Y29sb3I6Jyd9O1xuXHRcdFx0fVx0XHRcdFxuXHRcdH1cblx0fVxuXG5cdHZtLmlzU2VjdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24oKSB7XG5cdFx0Zm9yKGk9MDtpPDg7aSsrKSB7XG5cdFx0XHQkbG9nLmluZm8odm0ucmVxdWlyZWRJbnB1dHNbaV0pO1xuXHRcdH1cblx0fVxuXG5cdHZtLnNhdmVBbmRBZHZhbmNlID0gZnVuY3Rpb24oKSB7XG5cdFx0dm0uZXZlbnQuJHNhdmUoKS50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdFx0JGxvZy5pbmZvKCdldmVudCBzYXZlZCcpO1xuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2Vycm9yISAnICsgZXJyb3IpO1xuXHRcdH0pO1xuXG5cdFx0Ly9jaGVjayBmb3IgY29tcGxldGVuZXNcblx0XHR2bS5pc1NlY3Rpb25Db21wbGV0ZSgpO1xuXG5cdFx0aWYodm0ubWFuYWdlU2VjdGlvbnNbMV0uY29tcGxldGUgPT0gdHJ1ZSAmJiB2bS5tYW5hZ2VTZWN0aW9uc1syXS5jb21wbGV0ZSA9PSB0cnVlICYmIHZtLm1hbmFnZVNlY3Rpb25zWzNdLmNvbXBsZXRlID09IHRydWUpIHtcblx0XHRcdHZtLmV2ZW50UmVkaXJlY3QoJy91c2VyRXZlbnRzJywgJHJvdXRlUGFyYW1zLnVpZCk7XG5cdFx0fSBlbHNlIGlmICh2bS5tYW5hZ2VTZWN0aW9uc1sxXS5hY3RpdmUpIHZtLmNoYW5nZVNlY3Rpb24oMik7XG5cdFx0ZWxzZSBpZiAodm0ubWFuYWdlU2VjdGlvbnNbMl0uYWN0aXZlKSB2bS5jaGFuZ2VTZWN0aW9uKDMpO1xuXHRcdGVsc2UgaWYgKHZtLm1hbmFnZVNlY3Rpb25zWzNdLmFjdGl2ZSkgdm0uY2hhbmdlU2VjdGlvbigxKTtcblx0fVxuXG5cdHZtLmFkZEd1ZXN0VG9Ib3N0c0xpc3QgPSBmdW5jdGlvbigpIHtcblx0XHQvL2RlY2xhcmUgYW5kIGluaXRpYWxpemUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIHVzZXJLZXkgPSB1dGY4X3RvX2I2NCh2bS5uZXdHdWVzdC5lbWFpbC5hZGRyZXNzKTtcblxuXHRcdC8vaWYgZW1haWwgaXMgdmFsaWQgYW5kIG5hbWUgZXhpc3RzXG5cdFx0aWYgKHZtLm5ld0d1ZXN0Lm5hbWUgJiYgdm0ubmV3R3Vlc3QuZW1haWwudmFsaWQpIHtcblx0XHRcdC8vaXMgdGhlcmUgYSBndWVzdCBsaXN0IGFscmVhZHk/IElmIG5vdCBjcmVhdGUgb25lXG5cdFx0XHRpZighdm0uZXZlbnQuZ3Vlc3RMaXN0KSB7XG5cdFx0XHRcdHZtLmV2ZW50Lmd1ZXN0TGlzdCA9IHt9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9pZiBzbyBpcyB0aGlzIHBlcnNvbiBhbHJlYWR5IG9uIHRoZSBsaXN0P1xuXHRcdFx0XHR2YXIgaSA9MDtcblx0XHRcdFx0d2hpbGUodm0uZXZlbnQuZ3Vlc3RMaXN0W2ldKSB7XG5cdFx0XHRcdFx0aWYodm0uZXZlbnQuZ3Vlc3RMaXN0W2ldLmVtYWlsID09IGI2NF90b191dGY4KHVzZXJLZXkpKSB7XG5cdFx0XHRcdFx0XHQkbG9nLmluZm8oJ1RoaXMgZ3Vlc3QgaXMgYWxyZWFkeSBvbiB0aGUgbGlzdCcpO1xuXHRcdFx0XHRcdFx0Y2xlYW5OZXdHdWVzdFZhcmlhYmxlKCk7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGkrKztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvL2lzIHRoaXMgZ3Vlc3QgYSByZWdpc3RlcmVkIHVzZXI/XG5cdFx0XHRpZihyZWdpc3RlcmVkVXNlcnNbdXNlcktleV0pIHtcblx0XHRcdFx0Ly9pcyB0aGUgcmVnaXN0ZXJlZCB1c2VyIHRoZSBob3N0P1xuXHRcdFx0XHRpZihyZWdpc3RlcmVkVXNlcnNbdXNlcktleV0gPT0gJHJvdXRlUGFyYW1zLnVpZCkge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygndHJpZWQgdG8gcmVnaXN0ZXIgdGhlIGhvc3QnKTtcblx0XHRcdFx0XHRjbGVhbk5ld0d1ZXN0VmFyaWFibGUoKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0Ly9hZGQgdGhlbSB0byB0aGUgYXBwcm9wcmlhdGUgcmVnaXN0ZXJlZCB1c2VycycgbGlzdCBvZiBldmVudCBpbnZpdGVzXG5cdFx0XHRcdFx0aW52aXRlQVJlZ2lzdGVyZWRVc2VyKHJlZ2lzdGVyZWRVc2Vyc1t1c2VyS2V5XSk7XG5cblx0XHRcdFx0XHQvL2FkZCB0aGUgZ3Vlc3QgdG8gdGhlIGxpc3Rcblx0XHRcdFx0XHR2bS5ldmVudC5ndWVzdExpc3RbcmVnaXN0ZXJlZFVzZXJzW3VzZXJLZXldXSA9IHtcblx0XHRcdFx0XHRcdGF0dGVuZGluZzogZmFsc2UsIFxuXHRcdFx0XHRcdFx0c3RhdHVzOidwZW5kaW5nJywgXG5cdFx0XHRcdFx0XHRuYW1lOiB2bS5uZXdHdWVzdC5uYW1lLCBcblx0XHRcdFx0XHRcdGVtYWlsOnZtLm5ld0d1ZXN0LmVtYWlsLmFkZHJlc3MsXG5cdFx0XHRcdFx0fTtcdFx0XHRcdFx0XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vYWRkIHRoZSBpbnZpdGUgdG8gdGhlIG5vbi1yZWdpc3RlcmVkIHVzZXJzIGxpc3Qgb2YgZXZlbnQgaW52aXRlc1xuXHRcdFx0XHRpbnZpdGVBblVucmVnaXN0ZXJlZFVzZXIodXNlcktleSk7XG5cblx0XHRcdFx0Ly9hZGQgdGhlIGd1ZXN0IHRvIHRoZSBsaXN0XG5cdFx0XHRcdHZtLmV2ZW50Lmd1ZXN0TGlzdFt1c2VyS2V5XSA9IHtcblx0XHRcdFx0XHRcdGF0dGVuZGluZzogZmFsc2UsIFxuXHRcdFx0XHRcdFx0c3RhdHVzOidwZW5kaW5nJywgXG5cdFx0XHRcdFx0XHRuYW1lOiB2bS5uZXdHdWVzdC5uYW1lLCBcblx0XHRcdFx0XHRcdGVtYWlsOnZtLm5ld0d1ZXN0LmVtYWlsLmFkZHJlc3MsXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cblxuXHRcdFx0Ly9zYXZlIHRoZSBldmVudFxuXHRcdFx0dm0uc2F2ZUV2ZW50KCk7XG5cdFx0XHQvL2NsZWFyIHRoZSB0ZW1wIHZhbHVlc1xuXHRcdFx0Y2xlYW5OZXdHdWVzdFZhcmlhYmxlKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCRsb2cuaW5mbygneW91IGRpZG5cXCd0IGVudGVyIGEgbmFtZSBhbmQgb3IgZW1haWwnKTtcblx0XHR9XG5cdH1cblxuXHR2bS5ndWVzdFdpbGxBdHRlbmQgPSBmdW5jdGlvbihyZXNwb25zZSkge1xuXHRcdHZhciBjdXJyZW50VXNlciA9IHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS5jaGlsZCgnZXZlbnRzJyk7XG5cdFx0dmFyIHRvdGFsUGVuZGluZ0ludml0YXRpb25zID0gMDtcblx0XHR2YXIgcmVtb3ZlQXR0ZW5kaW5nVXBkYXRlZCA9IGZhbHNlO1xuXHRcdFxuXHRcdC8vY2hhbmdlIGF0dGVuZGluZyB0byB0cnVlIGluIGhvc3QncyBndWVzdExpc3Rcblx0XHR2bS5ldmVudC5ndWVzdExpc3RbJHJvdXRlUGFyYW1zLnVpZF0uYXR0ZW5kaW5nID0gcmVzcG9uc2U7XG5cdFx0Ly9jaGFuZ2Ugc3RhdHVzIHRvICdhdHRlbmRpbmcnIGluIGhvc3QncyBndWVzdExpc3Rcblx0XHR2bS5ldmVudC5ndWVzdExpc3RbJHJvdXRlUGFyYW1zLnVpZF0uc3RhdHVzID0gJ2F0dGVuZGluZyc7XG5cdFx0XG5cdFx0Ly9nZXQgdGhlIGludml0YXRpb24gZGV0YWlsc1xuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdwZW5kaW5nJykub24oJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhbGJlXG5cdFx0XHR2YXIgaW52aXRhdGlvbnMgPSBzbmFwc2hvdC52YWwoKTtcblx0XHRcdC8vbG9nIHN0YXJ0aW5nIHZhbHVlc1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zKTtcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9uc1skcm91dGVQYXJhbXMuaG9zdElkXSk7XG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnNbJHJvdXRlUGFyYW1zLmhvc3RJZF1bJHJvdXRlUGFyYW1zLmV2ZW50SWRdKTtcblxuXHRcdFx0dmFyIHRoaXNJbnZpdGF0aW9uID0gaW52aXRhdGlvbnNbJHJvdXRlUGFyYW1zLmhvc3RJZF1bJHJvdXRlUGFyYW1zLmV2ZW50SWRdO1xuXHRcdFx0XG5cdFx0XHQkbG9nLmluZm8odGhpc0ludml0YXRpb24pO1xuXHRcdFx0XG5cdFx0XHQvL2NoZWNrICMgb2YgaW5pdmlhdGlvbnNcblx0XHRcdGZvcihpbnZpdGF0aW9uIGluIGludml0YXRpb25zKSB7XG5cdFx0XHRcdHRvdGFsUGVuZGluZ0ludml0YXRpb25zKys7XG5cdFx0XHR9XG5cblx0XHRcdC8vcmVwb3J0ICMgb2YgaW52aXRhdGlvbnNcblx0XHRcdCRsb2cuaW5mbyhcInRvdGFsIGF0dGVuZGluZzogXCIgKyB0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucyk7XG5cdFx0XHRcblx0XHRcdC8vYWRkIHRoZSBldmVudCB0byB0aGUgZ3Vlc3QncyBhdHRlbmRpbmcgbGlzdFxuXHRcdFx0aWYocmVzcG9uc2UpIGN1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5jaGlsZCgkcm91dGVQYXJhbXMuaG9zdElkKS5jaGlsZCgkcm91dGVQYXJhbXMuZXZlbnRJZCkuc2V0KHRoaXNJbnZpdGF0aW9uLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKGVycm9yKTtcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cblx0XHQvL2lmIHRoZSB1cGRhdGVkIHBsYWNlaG9sZGVyIHdhcyBvbiB0aGUgYXR0ZW5kaW5nIGxpc3QgcmVtb3ZlIGl0XG5cdFx0Y3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLm9uKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdFx0dmFyIGF0dGVuZGluZ0xpc3QgPSBzbmFwc2hvdC52YWwoKTtcblx0XHRcdFxuXHRcdFx0Ly9yZXBvcnQgYWN0aW9uc1xuXHRcdFx0JGxvZy5pbmZvKCd0aGlzIGlzIHRoZSBhdHRlbmRpbmcgbGlzdCcpO1xuXHRcdFx0JGxvZy5pbmZvKGF0dGVuZGluZ0xpc3QpO1xuXHRcdFx0XG5cdFx0XHQvL3Rocm93IGZsYWcgZm9yIGxhdGVyXG5cdFx0XHRpZihhdHRlbmRpbmdMaXN0LnVwZGF0ZWQpIHJlbW92ZUF0dGVuZGluZ1VwZGF0ZWQgPSB0cnVlO1xuXG5cdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdC8vaWYgdGhlciB3YXMgYW4gZXJyb3IgcmVwb3J0IGl0XG5cdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKGVycm9yKTtcblx0XHR9KTtcblxuXHRcdC8vaWYgdGhpcyBpcyB0aGUgbGFzdCBwZW5kaW5nIGV2ZW50IG9uIHRoZSBndWVzdCdzIHBlbmRpbmcgbGlzdCwgYWRkIHRoZSB1cGRhdGVkIHBsYWNlaG9sZGVyXG5cdFx0aWYodG90YWxQZW5kaW5nSW52aXRhdGlvbnMgPCAyKSB7XG5cdFx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdFx0dmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcblxuXHRcdFx0Ly9yZXBsYWNlIHdpdGggdXBkYXRlZCBmaWVsZFxuXHRcdFx0Y3VycmVudFVzZXIuY2hpbGQoJ3BlbmRpbmcnKS51cGRhdGUoe1xuXHRcdFx0XHR1cGRhdGVkOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKGVycm9yKTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdC8vcmVtb3ZlIHRoZSBldmVudCBmcm9tIHRoZSBndWVzdCdzIHBlbmRpbmcgbGlzdFxuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdwZW5kaW5nJykuY2hpbGQoJHJvdXRlUGFyYW1zLmhvc3RJZCkucmVtb3ZlKCk7XG5cblx0XHQvL2lmIHRoZXJlIHdhcyBhbiB1cGRhdGVkIGZpZWxkIGluIGF0dGVuZGluZywgcmVtb3ZlIGl0XG5cdFx0aWYocmVtb3ZlQXR0ZW5kaW5nVXBkYXRlZCkge1xuXHRcdFx0JGxvZy5pbmZvKCdyZW1vdmluZyB0aGUgdXBkYXRlZCBwbGFjZWhvbGRlcicpO1xuXHRcdFx0Ly9jdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykuY2hpbGQoJ3VwZGF0ZWQnKS5yZW1vdmUoKTtcblx0XHR9XG5cblx0XHQvL3NhdmUgY2hhbmdlc1xuXHRcdHZtLmV2ZW50LiRzYXZlKCk7XG5cdH1cblxuXHR2bS51cGRhdGVVcGRhdGVkUGFyYW0gPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgY3VycmVudFVzZXIgPSByZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJ2V2ZW50cycpO1xuXHRcdFxuXHRcdCRsb2cuaW5mbygndXBkYXRpbmcgdGhlIHBhcmFtJyk7XG5cdFx0Y3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLm9uKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHQkbG9nLmluZm8oc25hcHNob3QudmFsKCkpO1xuXHRcdH0pO1xuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5jaGlsZCgndXBkYXRlZCcpLnJlbW92ZSgpO1xuXHR9XG5cblx0dm0uYWRkSW52aXRhdGlvblRvQXR0ZW5kaW5nID0gZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHR2YXIgY3VycmVudFVzZXIgPSByZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJ2V2ZW50cycpO1xuXHRcdHZhciB0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucyA9IDA7XG5cblx0XHQvL2dldCB0aGUgaW52aXRhdGlvbiBkZXRhaWxzXG5cdFx0Y3VycmVudFVzZXIuY2hpbGQoJ3BlbmRpbmcnKS5vbigndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFsYmVcblx0XHRcdHZhciBpbnZpdGF0aW9ucyA9IHNuYXBzaG90LnZhbCgpO1xuXHRcdFx0dmFyIHRoaXNJbnZpdGF0aW9uID0gaW52aXRhdGlvbnNbJHJvdXRlUGFyYW1zLmhvc3RJZF1bJHJvdXRlUGFyYW1zLmV2ZW50SWRdO1xuXHRcdFx0XG5cdFx0XHQvL2xvZyBzdGFydGluZyB2YWx1ZXNcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9ucyk7XG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnNbJHJvdXRlUGFyYW1zLmhvc3RJZF0pO1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdWyRyb3V0ZVBhcmFtcy5ldmVudElkXSk7XG5cdFx0XHRcblx0XHRcdC8vY2hlY2sgIyBvZiBpbml2aWF0aW9uc1xuXHRcdFx0Zm9yKGludml0YXRpb24gaW4gaW52aXRhdGlvbnMpIHtcblx0XHRcdFx0dG90YWxQZW5kaW5nSW52aXRhdGlvbnMrKztcblx0XHRcdH1cblxuXHRcdFx0Ly9yZXBvcnQgIyBvZiBpbnZpdGF0aW9uc1xuXHRcdFx0JGxvZy5pbmZvKFwidG90YWwgcGVuZGluZyBpbnZpdGF0aW9uczogXCIgKyB0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucyk7XG5cdFx0XHRcblx0XHRcdCRsb2cuaW5mbyhyZXNwb25zZSk7XG5cdFx0XHQvL2FkZCB0aGUgZXZlbnQgdG8gdGhlIGd1ZXN0J3MgYXR0ZW5kaW5nIGxpc3Rcblx0XHRcdGlmKHJlc3BvbnNlKSBjdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykuY2hpbGQoJHJvdXRlUGFyYW1zLmhvc3RJZCkuY2hpbGQoJHJvdXRlUGFyYW1zLmV2ZW50SWQpLnNldCh0aGlzSW52aXRhdGlvbiwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbyhlcnJvcik7XG5cdFx0XHR9KTtcblxuXG5cblx0XHR9KTtcblx0fVxuXG5cdC8vc3RhcnQgcnVuXG5cdGluaXQoKTtcbn1cblxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignR3Vlc3RFdmVudENvbnRyb2xsZXInLCBHdWVzdEV2ZW50Q29udHJvbGxlcik7XG5cbkd1ZXN0RXZlbnRDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBHdWVzdEV2ZW50Q29udHJvbGxlcigkbG9nKSB7XG5cdCRsb2cuaW5mbygnaW50byB0aGUgR3Vlc3RFdmVudENvbnRyb2xsZXInKTtcbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ0hvc3RFdmVudENvbnRyb2xsZXInLCBIb3N0RXZlbnRDb250cm9sbGVyKTtcblxuSG9zdEV2ZW50Q29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZycsICckcm91dGVQYXJhbXMnLCAnJGRvY3VtZW50JywgJ3VzZXJEYXRhJywgJ3RyYWZmaWNWYWxldCcsICd2YWxpZGF0aW9uJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gSG9zdEV2ZW50Q29udHJvbGxlcigkc2NvcGUsICRsb2csICRyb3V0ZVBhcmFtcywgJGRvY3VtZW50LCB1c2VyRGF0YSwgdHJhZmZpY1ZhbGV0LCB2YWxpZGF0aW9uKSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdFxuXHQvL2xvY2FsIHZhcmlhYmxlc1xuXHR2YXIgaG9zdGVkRXZlbnRTaGVycGEgPSB0cmFmZmljVmFsZXQ7XG5cdHZhciB0aGlzRXZlbnRNYW5hZ2VyID0gdXNlckRhdGE7XG5cdHZhciByZXF1aXJubWVudHNGYWN0b3J5ID0gdmFsaWRhdGlvbjtcblxuXHQvL2xvY2FsIHZhcmlhYmxlc1xuXHR2YXIgcGVyY2VudENvbXBsZXRlID0gMDtcblxuXHQvL3ZpZXcgbW9kZWwgdmFyaWFibGVzXG5cdHZtLmFjdGl2ZVNlY3Rpb24gPSAxO1xuXHR2bS50ZW1wVGltZSA9IHtzdGFydDogJycsIGVuZDogJycsIGR1cmF0aW9uOicnfTtcblx0dm0ucHJvZ3Jlc3NCYXIgPSB7XG5cdFx0Y29tcGxldGU6IHZtLnBlcmNlbnRDb21wbGV0ZSxcblx0XHRzdHlsZToge1xuXHRcdFx0d2lkdGg6ICh2bS5wZXJjZW50Q29tcGxldGUgKyAnJScpXG5cdFx0fSxcblx0XHRtZXNzYWdlOiAodm0ucGVyY2VudENvbXBsZXRlICsgJyUnKVxuXHR9XG5cdHZtLmFjdGlvbkJ0biA9IHtcblx0XHRkaXY6IHtcblx0XHRcdGNsYXNzOiB7XG5cdFx0XHRcdCdjb2wteHMtNic6IHRydWUsXG5cdFx0XHRcdCdjb2wtc20tNic6IHRydWUsXG5cdFx0XHR9XG5cdFx0fSxcblx0XHRidG46IHtcblx0XHRcdGNsYXNzOiB7XG5cdFx0XHRcdCdidG4nOiB0cnVlLFxuXHRcdFx0XHQnYnRuLXN1Y2Nlc3MnOiBmYWxzZSxcblx0XHRcdFx0J2J0bi13YXJuaW5nJzogdHJ1ZSxcblx0XHRcdFx0J3B1bGwtcmlnaHQnOiB0cnVlLFxuXHRcdFx0fSxcblx0XHRcdG1lc3NhZ2U6ICdBZGQgSW5mbydcblx0XHR9XG5cdH1cblx0dm0udGVtcEV2ZW50ID0ge307XG5cdHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZSA9IHJlcXVpcm5tZW50c0ZhY3RvcnkuZ2VuZXJhdGVFdmVudFJlcXVpcm5tZW50cygpO1xuXG5cdC8vbG9jYWwgbWV0aG9kc1xuXHRmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fTtcblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH07XG5cblx0ZnVuY3Rpb24gY2FsY3VsYXRlRHVyYXRpb24oc3RhcnQsIGVuZCkge1xuXHRcdHJldHVybiAoZGF0ZVRpbWVUb1VuaXhUaW1lKGVuZCkgLSBkYXRlVGltZVRvVW5peFRpbWUoc3RhcnQpKSAvICg2MCoxMDAwKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNoYW5nZVNhdmVCdG4oZGlyZWN0aW9uKSB7XG5cdFx0aWYoZGlyZWN0aW9uID09ICdvcGVuJykge1xuXHRcdFx0dm0uYWN0aW9uQnRuLmJ0bi5jbGFzc1snYnRuLXN1Y2Nlc3MnXSA9IHRydWU7XG5cdFx0XHR2bS5hY3Rpb25CdG4uYnRuLmNsYXNzWydidG4td2FybmluZyddID0gZmFsc2U7XG5cdFx0XHR2bS5hY3Rpb25CdG4uYnRuLm1lc3NhZ2UgPSAnU2F2ZSBFdmVudCc7XG5cdFx0fSBlbHNlIGlmKGRpcmVjdGlvbiA9PSAnY2xvc2UnKSB7XG5cdFx0XHR2bS5hY3Rpb25CdG4uYnRuLmNsYXNzWydidG4tc3VjY2VzcyddID0gZmFsc2U7XG5cdFx0XHR2bS5hY3Rpb25CdG4uYnRuLmNsYXNzWydidG4td2FybmluZyddID0gdHJ1ZTtcblx0XHRcdHZtLmFjdGlvbkJ0bi5idG4ubWVzc2FnZSA9ICdBZGQgSW5mbyc7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gdXBkYXRlUHJvZ3Jlc3NCYXIodW5pdHMpIHtcblx0XHRwZXJjZW50Q29tcGxldGUgKz0gdW5pdHM7XG5cdFx0dm0ucHJvZ3Jlc3NCYXIuY29tcGxldGUgPSBwZXJjZW50Q29tcGxldGU7XG5cdFx0dm0ucHJvZ3Jlc3NCYXIuc3R5bGUud2lkdGggPSAocGVyY2VudENvbXBsZXRlICsgJyUnKTtcblx0XHR2bS5wcm9ncmVzc0Jhci5tZXNzYWdlID0gKHBlcmNlbnRDb21wbGV0ZSArICclJyk7XG5cdFx0aWYocGVyY2VudENvbXBsZXRlID4gOTkpIGNoYW5nZVNhdmVCdG4oJ29wZW4nKTtcdFxuXHRcdGlmKHBlcmNlbnRDb21wbGV0ZSA8IDk5KSBjaGFuZ2VTYXZlQnRuKCdjbG9zZScpO1x0XHRcblx0fVxuXG5cdGZ1bmN0aW9uIGluaXRFdmVudFRpbWVzKCkge1xuXHRcdC8vYnVpbGQgbmV3IHRlbXAgdGltZXNcblx0XHR2YXIgbm93ID0gbmV3IERhdGUoKTtcblxuXHRcdC8vcm91bmQgdG8gdGhlIG5lYXJlc3QgaG91ciwgY3V0IG9mZiBhbnl0aGluZyBzbWFsbGVyXG5cdFx0bm93LnNldEhvdXJzKG5vdy5nZXRIb3VycygpICsgTWF0aC5yb3VuZChub3cuZ2V0TWludXRlcygpLzYwKSk7XG5cdFx0bm93LnNldE1pbnV0ZXMoMCk7XG5cdFx0bm93LnNldFNlY29uZHMoMCk7XG5cdFx0bm93LnNldE1pbGxpc2Vjb25kcygwKTtcblxuXHRcdHZtLnRlbXBUaW1lLnN0YXJ0ID0gbm93O1xuXHRcdHZtLnRlbXBUaW1lLmVuZCA9IG5vdztcblxuXHRcdHZtLnRlbXBUaW1lLmR1cmF0aW9uID0gY2FsY3VsYXRlRHVyYXRpb24odm0udGVtcFRpbWUuc3RhcnQsIHZtLnRlbXBUaW1lLmVuZCk7XG5cdFx0XG5cdH1cblxuXHRmdW5jdGlvbiB1cGRhdGVUZW1wVGltZUZyb21Nb2RlbCgpIHtcblx0XHQvL2lmIHN0YXJ0IHRpbWVzIGFyZSBhdmFpbGFibGVcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2bS50ZW1wRXZlbnQuZXZlbnRUaW1lcy5zdGFydCkpIHtcblx0XHRcdC8vc2V0IHRoZSB0ZW1wVGltZSBtb2RlbFxuXHRcdFx0dm0udGVtcFRpbWUuc3RhcnQgPSB1bml4VGltZVRvRGF0ZVRpbWUodm0udGVtcEV2ZW50LmV2ZW50VGltZXMuc3RhcnQpO1xuXHRcdFx0dm0udGVtcFRpbWUuZW5kID0gdW5peFRpbWVUb0RhdGVUaW1lKHZtLnRlbXBFdmVudC5ldmVudFRpbWVzLmVuZCk7XG5cdFx0fVxuXG5cdH1cblxuXHRmdW5jdGlvbiBsb2FkRXhpc3RpbmdWYWx1ZXMoKSB7XG5cblx0XHQvL2xvb3AgdGhyb3VnaCBlYWNoIGV2ZW50IG9iamVjdCwgaWYgaXQgZXhpc3RzIGNyZWRpdCB0aGUgcHJvZ3Jlc3MgYmFyXG5cdFx0T2JqZWN0LmtleXModm0udGVtcEV2ZW50KS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuXHRcdFx0JGxvZy5pbmZvKHZtLnRlbXBFdmVudFtrZXldKTtcblx0XHRcdC8vXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGluaXQoKSB7XG5cdFx0Ly9pZiB0aGVyZSBpcyBhbiBhY3RpdmUgZXZlbnQsIGxvYWQgaXRcblx0XHRpZih0aGlzRXZlbnRNYW5hZ2VyLnRoZXJlSXNBbkFjdGl2ZUV2ZW50KCkpIHtcblx0XHRcdFxuXHRcdFx0dmFyIGFjdGl2ZVBhY2thZ2UgPSB0aGlzRXZlbnRNYW5hZ2VyLmdldEFjdGl2ZUV2ZW50KCk7XG5cblx0XHRcdHZtLnByb2dyZXNzQmFyID0gYWN0aXZlUGFja2FnZS5wcm9ncmVzc0Jhcjtcblx0XHRcdHBlcmNlbnRDb21wbGV0ZSA9IGFjdGl2ZVBhY2thZ2UucGVyY2VudENvbXBsZXRlXG5cdFx0XHR2bS50ZW1wRXZlbnQgPSBhY3RpdmVQYWNrYWdlLmV2ZW50O1xuXHRcdFx0dm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlID0gYWN0aXZlUGFja2FnZS5yZXF1aXJlZEZpZWxkcztcblxuXHRcdH0gZWxzZSB7XG5cdFx0XHQvL2xvYWQgZXZlbnQgZGV0YWlsc1xuXHRcdFx0dGhpc0V2ZW50TWFuYWdlci5sb2FkQW5FdmVudFByb2dyZXNzaXZlbHkoJHJvdXRlUGFyYW1zLnVpZCwgJHJvdXRlUGFyYW1zLmV2ZW50SWQpXG5cdFx0XHQudGhlbihmdW5jdGlvbih0aGVFdmVudCkge1xuXHRcdFx0XHQvL2FkZCB0aGlzIGV2ZW50IG1vZGVsIHRvIHRoZSB2aWV3IG1vZGVsIGV2ZW50XG5cdFx0XHRcdHZtLnRlbXBFdmVudCA9IHRoZUV2ZW50O1xuXG5cdFx0XHRcdC8vdXBkYXRlIHRlbXBUaW1lXG5cdFx0XHRcdHVwZGF0ZVRlbXBUaW1lRnJvbU1vZGVsKCk7XG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdCRsb2coJ3RoZSBlcnJvciBpczogJyArIGVycm9yKTtcblx0XHRcdH0pXG5cdFx0fVxuXG5cdFx0Ly9sb2FkIHNwZWNpZmllZCBzZWN0aW9uXG5cdFx0dm0uYWN0aXZlU2VjdGlvbiA9IHBhcnNlSW50KCRyb3V0ZVBhcmFtcy5zZWN0aW9uKTtcblx0XHRcblx0XHQvL3NldCB0ZW1wVGltZXNcblx0XHRpbml0RXZlbnRUaW1lcygpO1xuXG5cdFx0Ly9zZXQgdGhlIHByb2dyZXNzIGJhciBmb3IgZXhpc3RpbmcgdmFsdWVzXG5cdFx0bG9hZEV4aXN0aW5nVmFsdWVzKCk7XG5cdH1cblxuXHQvL3ZpZXcgbW9kZWwgbWV0aG9kc1xuXHR2bS5mb3JtYXREdXJhdGlvbiA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vY2FsYyBkdXJhdGlvblxuXHRcdHZtLnRlbXBUaW1lLmR1cmF0aW9uID0gY2FsY3VsYXRlRHVyYXRpb24odm0udGVtcFRpbWUuc3RhcnQsIHZtLnRlbXBUaW1lLmVuZCk7XG5cdFx0XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgaG91cnMgPSBNYXRoLmZsb29yKHZtLnRlbXBUaW1lLmR1cmF0aW9uLyg2MCkpO1xuXHRcdHZhciBtaW4gPSB2bS50ZW1wVGltZS5kdXJhdGlvbiAlIDYwO1xuXHRcdHZhciBmcmFjdGlvbiA9IChNYXRoLnJvdW5kKG1pbi8xNSkvNCk7XG5cblx0XHRyZXR1cm4gKGhvdXJzK2ZyYWN0aW9uKSArICcgaCc7XG5cdH1cblxuXHR2bS52YWxpZGF0ZVRpbWUgPSBmdW5jdGlvbihzdGFydE9yRW5kKSB7XHRcblxuXHRcdGlmKHZtLnRlbXBUaW1lLmR1cmF0aW9uID4gMjQpIHZtLnNldHRpbmdUZW1wU3RhcnQoKTtcblxuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIHRpbWVzID0ge1xuXHRcdFx0J2V2ZW50U3RhcnQnOiB2bS50ZW1wVGltZS5zdGFydCxcblx0XHRcdCdldmVudEVuZCc6IHZtLnRlbXBUaW1lLmVuZFxuXHRcdH07XG5cblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh0aW1lc1tzdGFydE9yRW5kXSkgJiYgdGltZXNbc3RhcnRPckVuZF0gIT0gJycgJiYgdm0udGVtcFRpbWUuZHVyYXRpb24gPiAwKSB7XG5cdFx0XHRpZih2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbc3RhcnRPckVuZF0uY29tcGxldGVkID09IGZhbHNlKSB1cGRhdGVQcm9ncmVzc0JhcigxMCk7XG5cdFx0XHR2bS50ZW1wRXZlbnQuZXZlbnRUaW1lcy5zdGFydCA9IGRhdGVUaW1lVG9Vbml4VGltZSh2bS50ZW1wVGltZS5zdGFydCk7XG5cdFx0XHR2bS50ZW1wRXZlbnQuZXZlbnRUaW1lcy5lbmQgPSBkYXRlVGltZVRvVW5peFRpbWUodm0udGVtcFRpbWUuZW5kKTtcblx0XHRcdHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtzdGFydE9yRW5kXS5jb21wbGV0ZWQgPSB0cnVlO1xuXHRcdFx0dm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlW3N0YXJ0T3JFbmRdLnJvdy5jbGFzc1snaGFzLXN1Y2Nlc3MnXSA9IHRydWU7XG5cdFx0XHR2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbc3RhcnRPckVuZF0ucm93LmNsYXNzWydoYXMtZmVlZGJhY2snXSA9IHRydWU7XG5cdFx0XHR2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbc3RhcnRPckVuZF0ucm93LmNsYXNzWydoYXMtZXJyb3InXSA9IGZhbHNlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpZih2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbc3RhcnRPckVuZF0uY29tcGxldGVkID09IHRydWUpIHVwZGF0ZVByb2dyZXNzQmFyKC0xMCk7XG5cdFx0XHR2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbc3RhcnRPckVuZF0uY29tcGxldGVkID0gZmFsc2U7XG5cdFx0XHR2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbc3RhcnRPckVuZF0ucm93LmNsYXNzWydoYXMtc3VjY2VzcyddID0gZmFsc2U7XG5cdFx0XHR2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbc3RhcnRPckVuZF0ucm93LmNsYXNzWydoYXMtZmVlZGJhY2snXSA9IGZhbHNlO1xuXHRcdFx0dm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlW3N0YXJ0T3JFbmRdLnJvdy5jbGFzc1snaGFzLWVycm9yJ10gPSB0cnVlO1xuXHRcdH1cblx0fVxuXG5cdHZtLnNldHRpbmdUZW1wU3RhcnQgPSBmdW5jdGlvbigpIHtcblxuXHRcdGlmKChkYXRlVGltZVRvVW5peFRpbWUodm0udGVtcFRpbWUuZW5kKSA8PSBkYXRlVGltZVRvVW5peFRpbWUodm0udGVtcFRpbWUuc3RhcnQpKSB8fCBcblx0XHRcdChkYXRlVGltZVRvVW5peFRpbWUodm0udGVtcFRpbWUuZW5kKSAtIGRhdGVUaW1lVG9Vbml4VGltZSh2bS50ZW1wVGltZS5zdGFydCkgPiAoMTAwMCo2MCo2MCoyNCkpKSB7XG5cdFx0XHRvbGRTdGFydCA9IGRhdGVUaW1lVG9Vbml4VGltZSh2bS50ZW1wVGltZS5zdGFydCk7XG5cdFx0XHRvbGRFbmQgPSBkYXRlVGltZVRvVW5peFRpbWUodm0udGVtcFRpbWUuZW5kKTtcblxuXHRcdFx0bmV3RW5kID0gb2xkU3RhcnQgKyAoNjAqNjAqMTAwMCk7XG5cblx0XHRcdHZtLnRlbXBUaW1lLmVuZCA9IHVuaXhUaW1lVG9EYXRlVGltZShuZXdFbmQpO1xuXHRcdH1cblx0XHRcbiBcdH1cblxuXHR2bS5zZXR0aW5nVGVtcEVuZCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vc2V0IHZhbGlkIGVuZCB3aXRoIHN0YXJ0XG5cdFx0aWYodm0udGVtcFRpbWUuc3RhcnQgPiB2bS50ZW1wVGltZS5lbmQpIHZtLnRlbXBUaW1lLnN0YXJ0ID0gdm0udGVtcFRpbWUuZW5kO1xuXG5cdFx0Ly92YWxpZGF0ZVxuXHRcdHZtLnZhbGlkYXRlVGltZSgnZXZlbnRFbmQnKTtcblxuXHRcdC8vY2FsYyBkdXJhdGlvblxuXHRcdHZtLnRlbXBUaW1lLmR1cmF0aW9uID0gY2FsY3VsYXRlRHVyYXRpb24odm0udGVtcFRpbWUuc3RhcnQsIHZtLnRlbXBUaW1lLmVuZCk7XG5cblx0XHRcblx0fVxuXG5cdHZtLmJhY2tUb1VzZXJFdmVudHMgPSBmdW5jdGlvbigpIHtcblx0XHQvL2lmIHRoZSBldmVudCBpcyBjb21wbGV0ZWQsIHNhdmUgdG8gdGhlIGRiXG5cdFx0Ly9jaGVjayB0aGF0IHRoZSBldmVudCBpcyBjb21wbGV0ZVxuXHRcdGlmKHBlcmNlbnRDb21wbGV0ZSA+IDk5KSB7XG5cdFx0XHQvL2lmIHNvIHNhdmUgdGhlIGV2ZW50IGxvY2FsbHlcblx0XHRcdHRoaXNFdmVudE1hbmFnZXIuc2F2ZU5ld0hvc3RpbmdFdmVudCgnaG9zdGluZycsIHZtLnRlbXBFdmVudCk7XG5cdFx0XHQvL3RoZW4gc3luYyB0aGUgbG9jYWwgd2l0aCB0aGUgZGJcblx0XHRcdHRoaXNFdmVudE1hbmFnZXIuc2V0UmVtb3RlRXZlbnRzRnJvbUxvY2FsKCdob3N0aW5nJywgdm0udGVtcEV2ZW50KVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24oc3VjY2VzTWVzc2FnZSkge1xuXHRcdFx0XHQkbG9nLmluZm8oc3VjY2VzTWVzc2FnZSk7XG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9NZXNzYWdlKSB7XG5cdFx0XHRcdCRsb2cuaW5mbyhlcnJvTWVzc2FnZSk7XG5cdFx0XHR9KVxuXHRcdH1cblxuXHRcdC8vaWYgbm90IGNvbXBsZXRlZCwgZGVsZXRlIHRoZSBldmVudCBlbnRpcmVseVxuXHRcdC8vdGhpc0V2ZW50TWFuYWdlci5yZW1vdmVJbmNvbXBsZXRlRXZlbnRGcm9tREIodm0udGVtcEV2ZW50LmlkKTtcblxuXHRcdC8vc2VuZCB0aGUgdXNlciBiYWNrIHRvIHRoZSBwYWdlIHRoZXkgY2FtZSBmcm9tXG5cdFx0aG9zdGVkRXZlbnRTaGVycGEucmVkaXJlY3RUbygnL3VzZXJFdmVudHMnLCAkcm91dGVQYXJhbXMudWlkKTtcblx0fVxuXG5cdHZtLnNlY3Rpb25CYWNrID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9zYXZlIHRlbXAgZXZlbnQgcGFja2FnZVxuXHRcdHZhciBldmVudFBhY2thZ2UgPSB7XG5cdFx0XHRldmVudDogdm0udGVtcEV2ZW50LFxuXHRcdFx0cHJvZ3Jlc3NCYXI6IHZtLnByb2dyZXNzQmFyLFxuXHRcdFx0cGVyY2VudENvbXBsZXRlOiBwZXJjZW50Q29tcGxldGUsXG5cdFx0XHRyZXF1aXJlZEZpZWxkczogdm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlXG5cdFx0fTtcblxuXHRcdCRsb2cuaW5mbyhldmVudFBhY2thZ2UpO1xuXG5cdFx0dGhpc0V2ZW50TWFuYWdlci5zZXRBY3RpdmVFdmVudChldmVudFBhY2thZ2UpXG5cblx0XHQvL21vdmUgYmFja1xuXHRcdHRhcmdldFNlY3Rpb24gPSB2bS5hY3RpdmVTZWN0aW9uIC0gMTtcblx0XHRob3N0ZWRFdmVudFNoZXJwYS5yZWRpcmVjdFRvKCcvZXZlbnQvaG9zdCcsICRyb3V0ZVBhcmFtcy5ldmVudElkLCAkcm91dGVQYXJhbXMudWlkLCB0YXJnZXRTZWN0aW9uKTtcblx0fVx0XG5cblx0dm0uc2VjdGlvbkZvcndhcmQgPSBmdW5jdGlvbigpIHtcblx0XHQvL2lmIGFsbCByZXF1aXJlZCBmaWVsZHMgaGF2ZSBiZWVuIGVudGVyZWRcblx0XHQvL3NhdmUgdGVtcCBldmVudCBwYWNrYWdlXG5cdFx0dmFyIGV2ZW50UGFja2FnZSA9IHtcblx0XHRcdGV2ZW50OiB2bS50ZW1wRXZlbnQsXG5cdFx0XHRwcm9ncmVzc0Jhcjogdm0ucHJvZ3Jlc3NCYXIsXG5cdFx0XHRwZXJjZW50Q29tcGxldGU6IHBlcmNlbnRDb21wbGV0ZSxcblx0XHRcdHJlcXVpcmVkRmllbGRzOiB2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVcblx0XHR9O1xuXG5cdFx0JGxvZy5pbmZvKGV2ZW50UGFja2FnZSk7XG5cblx0XHR0aGlzRXZlbnRNYW5hZ2VyLnNldEFjdGl2ZUV2ZW50KGV2ZW50UGFja2FnZSlcblxuXHRcdC8vbW92ZSBmb3J3YXJkXG5cdFx0dGFyZ2V0U2VjdGlvbiA9IHZtLmFjdGl2ZVNlY3Rpb24gKyAxO1xuXHRcdGhvc3RlZEV2ZW50U2hlcnBhLnJlZGlyZWN0VG8oJy9ldmVudC9ob3N0JywgJHJvdXRlUGFyYW1zLmV2ZW50SWQsICRyb3V0ZVBhcmFtcy51aWQsIHRhcmdldFNlY3Rpb24pO1xuXHR9XG5cblx0dm0udmVyaWZ5UmVxdWlyZWQgPSBmdW5jdGlvbihmaWVsZCwgdmFsdWUpIHtcblx0XG5cdFx0Ly9jaGVjayB2YWxpZGl0eVxuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSAmJiB2YWx1ZSAhPSAnJykge1xuXHRcdFx0aWYodm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlW2ZpZWxkXS5jb21wbGV0ZWQgPT0gZmFsc2UpIHtcblx0XHRcdFx0dXBkYXRlUHJvZ3Jlc3NCYXIoMTApO1xuXHRcdFx0fVxuXHRcdFx0dm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlW2ZpZWxkXS5jb21wbGV0ZWQgPSB0cnVlO1xuXHRcdFx0dm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlW2ZpZWxkXS5yb3cuY2xhc3NbJ2hhcy1zdWNjZXNzJ10gPSB0cnVlO1xuXHRcdFx0dm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlW2ZpZWxkXS5yb3cuY2xhc3NbJ2hhcy1mZWVkYmFjayddID0gdHJ1ZTtcblx0XHRcdHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtmaWVsZF0ucm93LmNsYXNzWydoYXMtZXJyb3InXSA9IGZhbHNlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpZih2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbZmllbGRdLmNvbXBsZXRlZCA9PSB0cnVlKSB7XG5cdFx0XHRcdHVwZGF0ZVByb2dyZXNzQmFyKC0xMCk7XG5cdFx0XHR9XG5cdFx0XHR2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbZmllbGRdLmNvbXBsZXRlZCA9IGZhbHNlO1xuXHRcdFx0dm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlW2ZpZWxkXS5yb3cuY2xhc3NbJ2hhcy1zdWNjZXNzJ10gPSBmYWxzZTtcblx0XHRcdHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtmaWVsZF0ucm93LmNsYXNzWydoYXMtZmVlZGJhY2snXSA9IGZhbHNlO1xuXHRcdFx0dm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlW2ZpZWxkXS5yb3cuY2xhc3NbJ2hhcy1lcnJvciddID0gdHJ1ZTtcblx0XHR9XG5cdFx0Ly9maWVsZCB1cGRhdGVkXG5cdFx0XG5cdH1cblxuXHR2bS5zYXZlRXZlbnRUb0RCID0gZnVuY3Rpb24oKSB7XG5cdFx0JGxvZy5pbmZvKHZtLnRlbXBFdmVudCk7XG5cdFx0Ly9jaGVjayB0aGF0IHRoZSBldmVudCBpcyBjb21wbGV0ZVxuXHRcdGlmKHBlcmNlbnRDb21wbGV0ZSA+IDk5KSB7XG5cdFx0XHQvL2lmIHNvIHNhdmUgdGhlIGV2ZW50IGxvY2FsbHlcblx0XHRcdHRoaXNFdmVudE1hbmFnZXIuc2F2ZU5ld0hvc3RpbmdFdmVudCgnaG9zdGluZycsIHZtLnRlbXBFdmVudCk7XG5cdFx0XHQvL3RoZW4gc3luYyB0aGUgbG9jYWwgd2l0aCB0aGUgZGJcblx0XHRcdHRoaXNFdmVudE1hbmFnZXIuc2V0UmVtb3RlRXZlbnRzRnJvbUxvY2FsKCRyb3V0ZVBhcmFtcy51aWQsIHZtLnRlbXBFdmVudClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKHN1Y2Nlc01lc3NhZ2UpIHtcblx0XHRcdFx0JGxvZy5pbmZvKHN1Y2Nlc01lc3NhZ2UpO1xuXG5cdFx0XHRcdC8vaW4gc3VjY2VzIG1ha2Ugc3VyZSB0byByZW1vdmUgdGhlIHVwZGF0ZWQgZmllbGRcblx0XHRcdFx0dGhpc0V2ZW50TWFuYWdlci5jbGVhbkRCRXZlbnRzQ2F0ZWdvcnkoJ2hvc3RpbmcnKVxuXHRcdFx0XHQudGhlbihmdW5jdGlvbihzdWNjZXNNZXNzYWdlKSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKHN1Y2Nlc01lc3NhZ2UpO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb01lc3NhZ2UpIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oZXJyb01lc3NhZ2UpO1xuXHRcdFx0XHR9KVxuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvTWVzc2FnZSkge1xuXHRcdFx0XHQkbG9nLmluZm8oZXJyb01lc3NhZ2UpO1xuXHRcdFx0fSlcblxuXHRcdFx0Ly9yZWRpcmVjdCBiYWNrIHRvIGV2ZW50c1xuXHRcdFx0aG9zdGVkRXZlbnRTaGVycGEucmVkaXJlY3RUbygnL3VzZXJFdmVudHMnLCAkcm91dGVQYXJhbXMudWlkKTtcblx0XHR9XG5cdFx0XG5cdH1cblxuXHQvL3dhdGNoZXJzXG5cdCRzY29wZS4kd2F0Y2goJ3ZtLnRlbXBFdmVudC5ndWVzdExpc3QnLCBmdW5jdGlvbihjdXJyZW50LCBvcmlnaW5hbCkge1xuXHRcdC8vaWYgYSBndWVzdCBpcyBhZGRlZCB0byB0aGUgbGlzdCB1cGRhdGUgdGhlIHByb2dyZXNzIGJhclxuICAgICAgICBpZihhbmd1bGFyLmlzT2JqZWN0KHZtLnRlbXBFdmVudC5ndWVzdExpc3QpKSB7XG4gICAgICAgIFx0dXBkYXRlUHJvZ3Jlc3NCYXIoMTApO1xuICAgICAgICB9XG5cdH0pO1xuXG5cdGFuZ3VsYXIuZWxlbWVudCgkZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXHRcdGlmKHBhcnNlSW50KCRyb3V0ZVBhcmFtcy5zZWN0aW9uKSA9PSAxKSB7IFxuXHRcdFx0XG5cdFx0XHQvL2FuZ3VsYXIuZWxlbWVudCgkZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2V2ZW50TmFtZScpKS5mb2N1cygpXG5cdFx0XHQvL2FuZ3VsYXIuZWxlbWVudCgkZG9jdW1lbnQpLmZpbmQoJyNldmVudE5hbWUnKS5mb2N1cygpO1xuXHRcdFx0Ly8kbG9nLmluZm8oJ3NlY3Rpb24gMScpO1xuXG5cdFx0fVxuXG5cdFx0aWYocGFyc2VJbnQoJHJvdXRlUGFyYW1zLnNlY3Rpb24pID09IDIpIHtcblx0XHRcdC8vYW5ndWxhci5lbGVtZW50KCRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZXZlbnRTdHJlZXQwMScpKS5mb2N1cygpXG5cdFx0XHQvL2FuZ3VsYXIuZWxlbWVudCgkZG9jdW1lbnQpLmZpbmQoJyNldmVudFN0cmVldDAxJykuZm9jdXMoKTtcblx0XHRcdC8vJGxvZy5pbmZvKCdzZWN0aW9uIDInKTtcblx0XHR9XG5cblx0XHRpZihwYXJzZUludCgkcm91dGVQYXJhbXMuc2VjdGlvbikgPT0gMykge1xuXHRcdFx0Ly9hbmd1bGFyLmVsZW1lbnQoJGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNpbnZpdGVlTmFtZScpKS5mb2N1cygpXG5cdFx0XHQvL2V2ZW50U3RyZWV0MDFhbmd1bGFyLmVsZW1lbnQoJGRvY3VtZW50KS5maW5kKCcjaW52aXRlZU5hbWUnKS5mb2N1cygpO1xuXHRcdFx0Ly8kbG9nLmluZm8oJ3NlY3Rpb24gMycpO1xuXHRcdH1cblx0fSk7XG5cblx0Ly90YWtlIGFjdGlvblxuXHRpbml0KCk7XG5cbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ0xhbmRpbmdQYWdlQ29udHJvbGxlcicsIExhbmRpbmdQYWdlQ29udHJvbGxlcik7XG5cbkxhbmRpbmdQYWdlQ29udHJvbGxlci4kaW5qZWN0ID0gWyd0cmFmZmljVmFsZXQnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBMYW5kaW5nUGFnZUNvbnRyb2xsZXIodHJhZmZpY1ZhbGV0KSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdHZhciBsYW5kaW5nU2hlcnBhID0gdHJhZmZpY1ZhbGV0O1xuXG5cdC8vbG9jYWwgbWV0aG9kc1xuXHQvL3ZtIG1ldGhvZHNcblx0dm0uY3JlYXRlQW5BY2NvdW50ID0gZnVuY3Rpb24oKSB7XG5cdFx0bGFuZGluZ1NoZXJwYS5yZWRpcmVjdFRvKCcvc2lnbnVwJyk7XG5cdH1cblxuXHR2bS5sb2dpblVzZXIgPSBmdW5jdGlvbigpIHtcblx0XHRsYW5kaW5nU2hlcnBhLnJlZGlyZWN0VG8oJy9sb2dpbicpO1xuXHR9XG5cblx0Ly93YXRjaGVyc1xuXHQvL2FjdGlvblxufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignTWFpbkNvbnRyb2xsZXInLCBNYWluQ29udHJvbGxlcik7XG5cbk1haW5Db250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJGxvY2F0aW9uJywgJyRkb2N1bWVudCcsICckd2luZG93J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gTWFpbkNvbnRyb2xsZXIoJGxvZywgJGxvY2F0aW9uLCAkZG9jdW1lbnQsICR3aW5kb3cpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTsgXG5cblx0ZnVuY3Rpb24gcmVzaXplQkdJbWFnZSgpIHtcblx0XHR2YXIgYm9keSA9IGFuZ3VsYXIuZWxlbWVudCgkZG9jdW1lbnQpO1xuXHRcdCRkb2N1bWVudC5jc3MoJ2hpZ2h0JywgJHdpbmRvdy5vdXRlckhlaWdodClcblx0fVxuXG5cdHZtLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xuXHRcdGFsZXJ0KCdsb2dnaW5nIHlvdSBvdXQhJyk7XG5cdFx0cmVmLnVuYXV0aCgpO1xuXHRcdCRsb2NhdGlvbi5wYXRoKCcvJyk7XG5cdH07XG5cblx0YW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cdFx0Ly9GYXN0Q2xpY2suYXR0YWNoKCRkb2N1bWVudC5ib2R5KTtcblx0XHRyZXNpemVCR0ltYWdlKCk7XG5cdH0pXG59XG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdOZXdVc2VyU2lnblVwQ29udHJvbGxlcicsIE5ld1VzZXJTaWduVXBDb250cm9sbGVyKTtcblxuTmV3VXNlclNpZ25VcENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnLCAndmFsaWRhdGlvbicsICdiYWNrZW5kU2VydmljZXMnLCAndHJhZmZpY1ZhbGV0JywgJ3VzZXJEYXRhJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gTmV3VXNlclNpZ25VcENvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCB2YWxpZGF0aW9uLCBiYWNrZW5kU2VydmljZXMsIHRyYWZmaWNWYWxldCwgdXNlckRhdGEpIHtcblx0dmFyIHZtID0gdGhpcztcdFxuXHR2YXIgc2lnbnVwVmFsaWRhdGlvbiA9IHZhbGlkYXRpb247XG5cblx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cblx0Ly9kZWZpbmUgdm0gaW5wdXQgdmFyaWFibGVzXG5cdHZtLm5hbWUgPSBzaWdudXBWYWxpZGF0aW9uLmdlbmVyYXRlVGVzdGFibGVPYmplY3QoJ25hbWUnKTtcblx0dm0uZW1haWwgPSBzaWdudXBWYWxpZGF0aW9uLmdlbmVyYXRlVGVzdGFibGVPYmplY3QoJ2VtYWlsJyk7XG5cdHZtLnBhc3MgPSBzaWdudXBWYWxpZGF0aW9uLmdlbmVyYXRlVGVzdGFibGVPYmplY3QoJ3Bhc3MnKTtcblxuXHR2bS5jcmVhdGVOZXdVc2VyID0gZnVuY3Rpb24gKCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgbmV3VXNlclNoZXJwYSA9IHRyYWZmaWNWYWxldDtcblxuXHRcdC8vY29uZmlybSBhbGwgZmllbGRzIGFyZSB2YWxpZFxuXHRcdGlmKHZtLm5hbWUucGFzc2VzQWxsUmVxcyAmJiB2bS5lbWFpbC5wYXNzZXNBbGxSZXFzICYmIHZtLnBhc3MucGFzc2VzQWxsUmVxcykge1xuXHRcdFx0XG5cdFx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgY3JlYXRlTmV3VXNlciA9IGJhY2tlbmRTZXJ2aWNlcztcblx0XHRcdHZhciBuZXdVc2VyRGF0YSA9IHVzZXJEYXRhO1xuXHRcdFx0dmFyIHRoaXNVSUQ7XG5cblx0XHRcdC8vY3JlYXRlIHRoZSBuZXcgdXNlciBpbiB0aGUgZGF0YWJhc2Vcblx0XHRcdGNyZWF0ZU5ld1VzZXIuY3JlYXRlTmV3VXNlcih2bS5lbWFpbC52YWx1ZSwgdm0ucGFzcy52YWx1ZSlcblx0XHRcdC50aGVuKGZ1bmN0aW9uKGRiVXNlckRhdGEpIHtcblx0XHRcdFx0XG5cdFx0XHRcdC8vbWFpbnRhaW4gbG9jYWwgdmFsdWVzIHRvIHNwZWVkIHVwIHVzZXIgZXhwZXJpZW5jZVxuXHRcdFx0XHRuZXdVc2VyRGF0YS5zZXRQcmltYXJpZXNMb2NhbGx5KHZtLmVtYWlsLnZhbHVlLCB2bS5uYW1lLnZhbHVlLCBkYlVzZXJEYXRhLnVpZCk7XG5cblx0XHRcdFx0Ly9jcmVhdGUgYSB1c2VyIHByb2ZpbGUgaW4gdGhlIGRhdGFiYXNlXG5cdFx0XHRcdGNyZWF0ZU5ld1VzZXIuYWRkTmV3VXNlclRvRGF0YWJhc2UoZGJVc2VyRGF0YS51aWQsIHZtLm5hbWUudmFsdWUsIHZtLmVtYWlsLnZhbHVlKVxuXHRcdFx0XHQudGhlbihmdW5jdGlvbihtZXNzYWdlKSB7XG5cblx0XHRcdFx0XHQkbG9nLmluZm8obWVzc2FnZSk7XG5cblx0XHRcdFx0XHQvL2FkZCB0aGlzIHVzZXIgdG8gdGhlIGxpc3Qgb2YgcmVnaXN0ZXJlZCB1c2Vyc1xuXHRcdFx0XHRcdGNyZWF0ZU5ld1VzZXIuYWRkTmV3VXNlclRvUmVnVXNlcnNMaXN0KGRiVXNlckRhdGEudWlkLCB2bS5lbWFpbC52YWx1ZSlcblx0XHRcdFx0XHQudGhlbihmdW5jdGlvbihtZXNzYWdlKSB7XG5cblx0XHRcdFx0XHRcdC8vcmVkaXJlY3QgdXNpbmcgdGhlIHVpZFxuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHQvL3JlZGlyZWN0IHRvIHRoZSBuZXh0IHBhZ2UgXG5cdFx0XHRcdFx0XHRuZXdVc2VyU2hlcnBhLnJlZGlyZWN0VG8oJy91c2VySW5mb3JtYXRpb24nLCBkYlVzZXJEYXRhLnVpZCk7XG5cdFx0XHRcdFx0XHQgXG5cdFx0XHRcdFx0XHQkbG9nLmluZm8obWVzc2FnZSk7IFxuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKG1lc3NhZ2UpIHsgJGxvZy5pbmZvKG1lc3NhZ2UpOyB9KVxuXHRcdFx0XHR9KVxuXHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyAkbG9nLmluZm8obWVzc2FnZSk7IH0pXG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKG1lc3NhZ2UpIHsgJGxvZy5pbmZvKG1lc3NhZ2UpOyB9KVxuXHRcdFx0XG5cdFx0fVxuXG5cdH1cblx0XG5cdC8vcnVuIHRpbWUgYWN0aW9uc1xuXG59XG5cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ1JlZ1VzZXJMb2dpbkNvbnRyb2xsZXInLCBSZWdVc2VyTG9naW5Db250cm9sbGVyKTtcblxuUmVnVXNlckxvZ2luQ29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJywgJyRkb2N1bWVudCcsICdiYWNrZW5kU2VydmljZXMnLCAndHJhZmZpY1ZhbGV0JywgJ3VzZXJEYXRhJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gUmVnVXNlckxvZ2luQ29udHJvbGxlcigkbG9nLCAkZG9jdW1lbnQsIGJhY2tlbmRTZXJ2aWNlcywgdHJhZmZpY1ZhbGV0LCB1c2VyRGF0YSkge1xuXHR2YXIgdm0gPSB0aGlzO1xuXG5cdC8vZGVmaW5lIHZtIGlucHV0IHZhcmlhYmxlc1xuXHR2bS5pbnB1dHMgPSB7XG5cdFx0ZW1haWw6ICcnLFxuXHRcdHBhc3N3b3JkOiAnJyxcblx0XHRyZXF1aXJlZEZpZWxkc0RlZmluZWQ6IGZhbHNlXG5cdH1cblx0dm0uZXJyb3JzID0ge1xuXHRcdG1lc3NhZ2U6ICcnLFxuXHRcdHBhc3Nlc0FsbFRlc3RzOiB0cnVlXG5cdH1cblx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0biA9IHtcblx0XHQndXNhYmxlJzpmYWxzZSwgXG5cdFx0J2NsYXNzJzoge1xuXHRcdFx0J2J0bic6IHRydWUsXG5cdFx0XHQnYnRuLXdhcm5pbmcnOiB0cnVlLFxuXHRcdFx0J2J0bi1zdWNjZXNzJzogZmFsc2UsXG5cdFx0XHQnY29sLXhzLTEyJzogdHJ1ZSxcblx0XHRcdCdjb2wtc20tMTInOiB0cnVlLFxuXHRcdH0sXG5cdFx0bWVzc2FnZTogJ05lZWQgRW1haWwgJiBQYXNzJ1xuXHR9XG5cblx0Ly9tZXRob2RzXG5cdGZ1bmN0aW9uIG9wZW5Vc2VyTG9naW5CdG4oKSB7XG5cdFx0Ly9jaGVjayB0aGF0IHRoZXJlIGlzIGFuIGVtYWlsIGFuZCB0aGVyZSBpcyBhIHBhc3N3b3JkXG5cdFx0aWYoXHRhbmd1bGFyLmlzRGVmaW5lZCh2bS5pbnB1dHMuZW1haWwpICYmIHZtLmlucHV0cy5lbWFpbCAhPT0gJycgJiZcblx0XHRcdGFuZ3VsYXIuaXNEZWZpbmVkKHZtLmlucHV0cy5wYXNzd29yZCkgJiYgdm0uaW5wdXRzLnBhc3N3b3JkICE9PSAnJykgXG5cdFx0e1xuXHRcdFx0dm0uaW5wdXRzLnJlcXVpcmVkRmllbGRzRGVmaW5lZCA9IHRydWU7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLmNsYXNzWydidG4tc3VjY2VzcyddID0gdHJ1ZTtcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4uY2xhc3NbJ2J0bi13YXJuaW5nJ10gPSBmYWxzZTtcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4ubWVzc2FnZSA9ICdMb2dpbic7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLnVzYWJsZSA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZtLmlucHV0cy5yZXF1aXJlZEZpZWxkc0RlZmluZWQgPSBmYWxzZTtcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4uY2xhc3NbJ2J0bi1zdWNjZXNzJ10gPSBmYWxzZTtcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4uY2xhc3NbJ2J0bi13YXJuaW5nJ10gPSB0cnVlO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi5tZXNzYWdlID0gJ05lZWQgRW1haWwgJiBQYXNzJztcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlID0gZmFsc2U7XG5cdFx0fVxuXG5cdH1cblxuXHQvL3ZpZXcgbW9kZWwgbWV0aG9kc1xuXHR2bS51cGRhdGUgPSBmdW5jdGlvbigpIHtcblx0XHQvL3NldCB2YWx1ZXNcblx0XHR2bS5pbnB1dHMuZW1haWwgPSAkZG9jdW1lbnQuZmluZCgnI3VzZXJFbWFpbCcpWzBdLnZhbHVlO1xuXHRcdHZtLmlucHV0cy5wYXNzd29yZCA9ICRkb2N1bWVudC5maW5kKCcjdXNlclBhc3N3b3JkJylbMF0udmFsdWU7XG5cdFx0XG5cdFx0b3BlblVzZXJMb2dpbkJ0bigpO1xuXHR9XG5cblx0dm0ubG9naW5SZWdpc3RlcmVkVXNlciA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgcmVnaXN0ZXJlZFVzZXJTaGVycGEgPSB0cmFmZmljVmFsZXQ7XG5cblx0XHQvL2NvbmZpcm0gYWxsIGZpZWxkcyBhcmUgdmFsaWRcblx0XHRpZih0cnVlKSB7XG5cdFx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgZGF0YWJhc2UgPSBiYWNrZW5kU2VydmljZXM7XG5cdFx0XHR2YXIgcmVnaXN0ZXJlZFVzZXJEYXRhID0gdXNlckRhdGE7XG5cblx0XHRcdC8vdmVyaWZ5IHVzZXJzIGNyZWRlbnRpYWxzXG5cdFx0XHRkYXRhYmFzZS5Mb2dpblJlZ2lzdGVyZWRVc2VyKHZtLmlucHV0cy5lbWFpbCwgdm0uaW5wdXRzLnBhc3N3b3JkKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24odXNlckNyZWRlbnRpYWxzKSB7XG5cdFx0XHRcdC8vaWYgbm8gdHJvdWJsZSBsb2dnaW5nIGluIHVwZGF0ZSBlcnJvciBvYmplY3Rcblx0XHRcdFx0dm0uZXJyb3JzLnBhc3Nlc0FsbFRlc3RzID0gdHJ1ZTtcblxuXHRcdFx0XHQvL2FkZCBwcmltYXJ5IGluZm9ybWF0aW9uIHRvIGxvY2FsIG1vZGVsXG5cdFx0XHRcdHJlZ2lzdGVyZWRVc2VyRGF0YS5zZXRQcmltYXJpZXNMb2NhbGx5KHZtLmlucHV0cy5lbWFpbCwgdm0uaW5wdXRzLm5hbWUsIHVzZXJDcmVkZW50aWFscy51aWQpO1xuXG5cdFx0XHR9KVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCRsb2cuaW5mbyhcInVpZCBpcyBcIiArIHJlZ2lzdGVyZWRVc2VyRGF0YS5nZXRVSURMb2NhbGx5KCkpO1xuXG5cdFx0XHRcdGRhdGFiYXNlLmdldFVzZXJCaW8ocmVnaXN0ZXJlZFVzZXJEYXRhLmdldFVJRExvY2FsbHkoKSlcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24odXNlckJpbykge1xuXHRcdFx0XHRcdC8vdXBkYXRlIHVzZXJEYXRhIG1vZGVsIHdpdGggdXNlckJpb1xuXHRcdFx0XHRcdHJlZ2lzdGVyZWRVc2VyRGF0YS51cGRhdGVCaW9Mb2NhbGx5KHVzZXJCaW8pO1xuXG5cdFx0XHRcdFx0Ly9sb2FkIHVzZXIgZXZlbnRzXG5cdFx0XHRcdFx0ZGF0YWJhc2UuZ2V0VXNlckV2ZW50cyhyZWdpc3RlcmVkVXNlckRhdGEuZ2V0VUlETG9jYWxseSgpKVxuXHRcdFx0XHRcdC50aGVuKGZ1bmN0aW9uKGFsbEV2ZW50c0ZvclRoaXNVc2VyKSB7XG5cdFx0XHRcdFx0XHQvL3VwZGF0ZSB1c2VyRGF0YSBtb2RlbCB3aXRoIHVzZXJFdmVudHNcblx0XHRcdFx0XHRcdHJlZ2lzdGVyZWRVc2VyRGF0YS51cGRhdGVBbGxVc2VyRXZlbnRzTG9jYWxseShhbGxFdmVudHNGb3JUaGlzVXNlcik7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyAkbG9nLmluZm8obWVzc2FnZSk7IH0pXG5cblx0XHRcdFx0fSlcblx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKG1lc3NhZ2UpIHsgJGxvZy5pbmZvKG1lc3NhZ2UpOyB9KVxuXG5cdFx0XHRcdC8vcmVkaXJlY3QgdG8gdGhlIG5leHQgcGFnZSBcblx0XHRcdFx0cmVnaXN0ZXJlZFVzZXJTaGVycGEucmVkaXJlY3RUbygnL3VzZXJJbmZvcm1hdGlvbicsIHJlZ2lzdGVyZWRVc2VyRGF0YS5nZXRVSURMb2NhbGx5KCkpO1xuXG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKG1lc3NhZ2UpIHsgXG5cdFx0XHRcdC8vaWYgdGhlcmUgd2FzIGFuIGVycm9yIGxvZ2dpbmcgaW4sIGxldCB0aGUgdXNlciBrbm93XG5cdFx0XHRcdHZtLmVycm9ycy5tZXNzYWdlID0gbWVzc2FnZTtcblx0XHRcdFx0dm0uZXJyb3JzLnBhc3Nlc0FsbFRlc3RzID0gZmFsc2U7XG5cdFx0XHR9KVxuXG5cdFx0XHQvL3VzZSB1aWQgdG8gY29sbGVjdCB1c2VyIGJpb1xuXHRcdFx0XG5cdFx0fVxuXG5cdH1cblxuXHR2bS5jbGlja2VkID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHVzZXJBdXRoZW50aWNhdGlvbiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdHVzZXJBdXRoZW50aWNhdGlvbi5sb2dVc2VyT3V0KCk7XG5cdH1cblxuXHQvL3J1biBjb21tYW5kc1xufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcigndG9wTWVudUNvbnRyb2xsZXInLCB0b3BNZW51Q29udHJvbGxlcik7XG5cbnRvcE1lbnVDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJywgJyRsb2NhdGlvbicsICckZG9jdW1lbnQnLCAnJHdpbmRvdyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHRvcE1lbnVDb250cm9sbGVyKCRzY29wZSwgJGxvZywgJGxvY2F0aW9uLCAkZG9jdW1lbnQsICR3aW5kb3cpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHQvL2xvY2FsIHZhcmlhYmxlc1xuXHR2bS5sb2dnZWRJbiA9IGZhbHNlXG5cblx0Ly9zdHlsZXMgdmFyaWFibGVzXG5cdFxuXHQvL2V2ZW50IGxpc3RlbmVyc1xuXHRpZiAoJ2FkZEV2ZW50TGlzdGVuZXInIGluICRkb2N1bWVudCkge1xuXHQgICAgJGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHtcblx0ICAgIFx0JGxvZy5pbmZvKCdhZGRpbmcgRmFzdENsaWNrJyk7XG5cdCAgICAgICAgRmFzdENsaWNrLmF0dGFjaCgkZG9jdW1lbnQuYm9keSk7XG5cdCAgICB9LCBmYWxzZSk7XG5cdH1cblxuXHRhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdykuYmluZCgncmVzaXplJywgZnVuY3Rpb24oKSB7XG5cdFx0dm0ub25SZXNpemVGdW5jdGlvbigpO1xuXHRcdCRzY29wZS4kYXBwbHkoKTtcblx0fSk7XG5cblx0YW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cdFx0aWYoJHdpbmRvdy5vdXRlcldpZHRoIDwgNjAwKSB7XG5cdFx0XHR2bS5vblJlc2l6ZUZ1bmN0aW9uKCk7XG5cdFx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cdFx0fVxuXHR9KVxuXHQvL2R5bmFtaWNhbGx5IHNldCBpbnB1dCB3aWR0aFxuXG5cblx0Ly8gQ3JlYXRlIGEgY2FsbGJhY2sgd2hpY2ggbG9ncyB0aGUgY3VycmVudCBhdXRoIHN0YXRlXG5cdGZ1bmN0aW9uIGluaXQoKSB7XG5cdFx0dm0ub25SZXNpemVGdW5jdGlvbigpO1xuXHRcdCRzY29wZS4kYXBwbHkoKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGF1dGhEYXRhQ2FsbGJhY2soYXV0aERhdGEpIHtcblx0ICBpZiAoYXV0aERhdGEpIHtcblx0ICAgICRsb2cuaW5mbyhcIlVzZXIgXCIgKyBhdXRoRGF0YS51aWQgKyBcIiBpcyBsb2dnZWQgaW4gd2l0aCBcIiArIGF1dGhEYXRhLnByb3ZpZGVyKTtcblx0ICAgIHZtLmxvZ2dlZEluID0gdHJ1ZTtcblx0ICB9IGVsc2Uge1xuXHQgICAgJGxvZy5pbmZvKFwiVXNlciBpcyBsb2dnZWQgb3V0XCIpO1xuXHQgICAgdm0ubG9nZ2VkSW4gPSBmYWxzZTtcblx0ICB9XG5cdH1cblxuXHRmdW5jdGlvbiByZWRpcmVjdChwYXRoLCB1c2VyRGF0YSkge1xuXHRcdHZhciBmdWxsUGF0aCA9IHBhdGggKyAnLycgKyB1c2VyRGF0YS51aWQgKyAnLycgKyB1c2VyRGF0YS50b2tlbjtcblx0XHQvL3JlZGlyZWN0XG5cdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyB0bzogJyArIGZ1bGxQYXRoKTtcblx0XHQkbG9jYXRpb24ucGF0aChmdWxsUGF0aCk7XG5cdFx0Ly8kc2NvcGUuJGFwcGx5KCk7XG5cdH1cblxuXHQvL3ZtIGFjY2Vzc2libGUgbWV0aG9kc1xuXHR2bS5sb2dvdXQgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9nLmluZm8oJ2xvZ2dpbmcgb3V0IScpO1xuXHRcdHZtLmxvZ2dlZEluID0gZmFsc2U7XG5cdFx0cmVmLnVuYXV0aCgpO1xuXHRcdHJlZGlyZWN0KCcvJywge3VpZDonJywgdG9rZW46Jyd9KTtcblx0fVxuXG5cdHZtLm5hdkJhckxvZ2luUmVnaXN0ZXJlZFVzZXIgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9nLmluZm8oJ2xhdW5jaGluZyBsb2dpbicpO1xuXHRcdGlmKHRydWUpIHtcblx0XHQvL2lmKHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlKSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZVxuXHRcdFx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cblx0XHRcdC8vYXV0aGVudGljYXRlIHRoZSB1c2VyXG5cdFx0XHRyZWYuYXV0aFdpdGhQYXNzd29yZCh7XG5cdFx0XHRcdGVtYWlsOiB2bS5uYXZiYXJVc2VyRW1haWwsXG5cdFx0XHRcdHBhc3N3b3JkOiB2bS5uYXZiYXJVc2VyUGFzc1xuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IsIGF1dGhEYXRhKSB7XG5cdFx0XHRcdGlmKGVycm9yKSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdFcnJvciBMb2dnaW5nIEluOiAnICsgZXJyb3IpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnTG9nZ2VkIEluIHN1Y2Nlc3NmdWxseTogJyArIGF1dGhEYXRhLnVpZCk7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKGF1dGhEYXRhKTtcblx0XHRcdFx0XHQvL3NhdmUgYWxsIHRoZSBkYXRhXG5cblx0XHRcdFx0XHQvL2xvYWQgdXNlciBiaW9cblx0XHRcdFx0XHQvL2xvYWQgdXNlciBldmVudHNcblxuXHRcdFx0XHRcdC8vcmVkaXJlY3Rcblx0XHRcdFx0XHRyZWRpcmVjdCgnL3VzZXJJbmZvcm1hdGlvbicsIGF1dGhEYXRhKTtcblx0XHRcdFx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cblx0XHRcdFx0XHQvL2NsaWNrIGNsb3NlZCB0aGUgbmF2YmFyXG5cdFx0XHRcdFx0YW5ndWxhci5lbGVtZW50KCcubmF2YmFyLXRvZ2dsZScpLmNsaWNrKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cblxuXHRcdH1cblxuXHR9XG5cblx0dm0ub25SZXNpemVGdW5jdGlvbiA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBuYXZiYXJJbnB1dHMgPSBhbmd1bGFyLmVsZW1lbnQoJy5uYXZiYXJJbnB1dHMnKTtcblx0XHRuYXZiYXJJbnB1dHMuY3NzKCd3aWR0aCcsICgkd2luZG93Lm91dGVyV2lkdGggLSAyNikgKyAncHgnKTtcblx0fVxuXG5cdC8vIFJlZ2lzdGVyIHRoZSBjYWxsYmFjayB0byBiZSBmaXJlZCBldmVyeSB0aW1lIGF1dGggc3RhdGUgY2hhbmdlc1xuXHRyZWYub25BdXRoKGF1dGhEYXRhQ2FsbGJhY2spO1xufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignVXNlckV2ZW50c0NvbnRyb2xsZXInLCBVc2VyRXZlbnRzQ29udHJvbGxlcik7XG5cblVzZXJFdmVudHNDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJHJvdXRlUGFyYW1zJywgJ3VzZXJEYXRhJywgJ3RyYWZmaWNWYWxldCddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIFVzZXJFdmVudHNDb250cm9sbGVyKCRsb2csICRyb3V0ZVBhcmFtcywgdXNlckRhdGEsIHRyYWZmaWNWYWxldCkge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHR2YXIgY3VycmVudFVzZXIgPSB1c2VyRGF0YTtcblxuXHQvL2xvY2FsIHZpZXcgdmFyaWFibGVzXG5cdHZtLnNob3dEZWNsaW5lID0gZmFsc2U7XHQvL3doYXQgaXMgdGhpcyBiZWluZyB1c2VkIGZvcj9cblx0dm0udXNlckJpbyA9IHt9XG5cdHZtLmV2ZW50cyA9IHt9O1xuXHR2bS5zZWN0aW9uQXZhaWxhYmxlID0ge1xuXHRcdHBlbmRpbmc6IGZhbHNlLFxuXHRcdGF0dGVuZGluZzogZmFsc2UsXG5cdFx0aG9zdGluZzogZmFsc2UsXG5cdFx0Y29tcGxldGVkOiBmYWxzZVxuXHR9O1xuXHR2bS5lcnJvcnMgPSB7fTtcblxuXHQvL2RlY2xhcmUgbG9jYWwgbWV0aG9kc1xuXHRmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fTtcblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH07XG5cblx0ZnVuY3Rpb24gbm9PZkhvc3RlRXZlbnRzKCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZVxuXHRcdHZhciBjb3VudGVyID0gMDtcblxuXHRcdGZvcihldmVudCBpbiB2bS5ldmVudHMuaG9zdGluZykgY291bnRlcisrO1xuXG5cdFx0cmV0dXJuIGNvdW50ZXI7XG5cdH1cblxuXHRmdW5jdGlvbiBnZW5lcmF0ZUV2ZW50SUQoKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYXRlID0gbmV3IERhdGUoKTtcblx0XHR2YXIgZXZlbnRJRCA9IChkYXRlVGltZVRvVW5peFRpbWUoZGF0ZSkgKiAxMCkgKyAobm9PZkhvc3RlRXZlbnRzKCkpO1xuXG5cdFx0cmV0dXJuIGV2ZW50SUQ7XG5cdH1cblxuXHRmdW5jdGlvbiBjaGVja0ZvckV2ZW50cygpIHtcblx0XHRcblx0XHQvL2xvb3AgdGhyb3VnaCBhbGwgdGhlIGV2ZW50IGNhdGVnb3JpZXNcblx0XHRPYmplY3Qua2V5cyh2bS5ldmVudHMpLmZvckVhY2goZnVuY3Rpb24oY2F0ZWdvcnkpIHtcblx0XHRcdFxuXHRcdFx0Ly9pbnNpZGUgZWFjaCBjYXRlZ29yeSBjb3VudCB0aGUgbnVtYmVyIG9mIGV2ZW50IG9iamVjdHMuLi5OT1QgdXBkYXRlZCBwbGFjZWhvbGRlciB0aG91Z2hcblx0XHRcdE9iamVjdC5rZXlzKHZtLmV2ZW50c1tjYXRlZ29yeV0pLmZvckVhY2goZnVuY3Rpb24oZXZlbnRJRCkge1xuXHRcdFx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVcblx0XHRcdFx0dmFyIGNvdW50ZXIgPSAwO1xuXHRcdFx0XHQvL2NvdW50IGV2ZW50cyB3aXRoIGlkJ3MgLyBOT1QgJ3VwZGF0ZWQnIHBsYWNlaG9sZGVyc1xuXHRcdFx0XHRpZihhbmd1bGFyLmlzT2JqZWN0KHZtLmV2ZW50c1tjYXRlZ29yeV1bZXZlbnRJRF0pKSBjb3VudGVyKys7XG5cdFx0XHRcdFxuXHRcdFx0XHQvL2lmIGF0IGxlYXN0IG9uZSBldmVudCBpZCAob2JqZWN0KSB3YXMgY291bnRlZCwgdGhlbiBzaG93IHRoZSBzZWN0aW9uXG5cdFx0XHRcdGlmKGNvdW50ZXIgPiAwKSB2bS5zZWN0aW9uQXZhaWxhYmxlW2NhdGVnb3J5XSA9IHRydWU7XG5cdFx0XHRcdGVsc2Ugdm0uc2VjdGlvbkF2YWlsYWJsZVtjYXRlZ29yeV0gPSBmYWxzZTtcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGluaXRpYWxpemUoKSB7XG5cdFx0Ly9tYWtlIHN1cmUgdGhlIHVpZCBpcyBzZXRcblx0XHRjdXJyZW50VXNlci5zZXRVSURMb2NhbGx5KCRyb3V0ZVBhcmFtcy51aWQpO1xuXG5cdFx0Ly9sb2FkIHRoZSB1c2VyIGJpb1xuXHRcdGN1cnJlbnRVc2VyLmxvYWRCaW8oJHJvdXRlUGFyYW1zLnVpZClcblx0XHQudGhlbihmdW5jdGlvbihyZXRyaWV2ZWRCaW8pIHtcblx0XHRcdHZtLnVzZXJCaW8gPSByZXRyaWV2ZWRCaW87XG5cdFx0fSlcblx0XHQuY2F0Y2goKVxuXG5cdFx0Ly9sb2FkIHVzZXIgZXZlbnRzIHByb2dyZXNzaXZsZXlcblx0XHQvL2ZpcnN0IHdoYXRldmVyIGlzIGluIHRoZSBtb2RlbCBhbHJlYWR5XG5cdFx0dm0uZXZlbnRzID0gY3VycmVudFVzZXIuZ2V0QWxsVXNlckV2ZW50c0xvY2FsbHkoKTtcblxuXHRcdCRsb2cuaW5mbyh2bS5ldmVudHMpO1xuXHRcdC8vdGhlbiBjYWxsIHRvIHRoZSBkYiBhbmQgZ2V0IHRoZSBtb3N0IHVwIHRvIGRhdGUgaW5mb1xuXHRcdGN1cnJlbnRVc2VyLmdldFJlbW90ZUV2ZW50c0ZvckxvY2FsKClcblx0XHQudGhlbihmdW5jdGlvbihvYnRhaW5lZFVzZXJFdmVudHMpIHtcblx0XHRcdCRsb2cuaW5mbyhvYnRhaW5lZFVzZXJFdmVudHMpO1xuXHRcdFx0Ly91cGRhdGUgdGhlIHZpZXcgbW9kZWwgd2l0aCB0aGUgdXBkYXRlZCBEQiByZXN1bHRzXG5cdFx0XHR2bS5ldmVudHMgPSBjdXJyZW50VXNlci5nZXRBbGxVc2VyRXZlbnRzTG9jYWxseSgpO1xuXG5cdFx0XHQvL3Rha2Ugb3V0IHRoZSB1cGRhdGVkIG9iamVjdCB0byBjbGVhbiB1cCBmb3IgbmV3IHVzZXJzXG5cdFx0XHRkZWxldGUgdm0uZXZlbnRzLnBlbmRpbmcudXBkYXRlZDtcblx0XHRcdGRlbGV0ZSB2bS5ldmVudHMucGVuZGluZ1t1bmRlZmluZWRdO1xuXHRcdFx0XG5cdFx0XHR2YXIgY291bnQgPSAwO1xuXHRcdFx0T2JqZWN0LmtleXModm0uZXZlbnRzLmhvc3RpbmcpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG5cdFx0XHRcdGNvdW50Kys7XG5cdFx0XHR9KTtcblx0XHRcdC8vdGFrZSBhd2F5IGZvciBob3N0aW5nIGFsc29cblx0XHRcdGlmKGNvdW50ID4gMSkge1xuXHRcdFx0XHRkZWxldGUgdm0uZXZlbnRzLmhvc3RpbmcudXBkYXRlZDtcblx0XHRcdFx0ZGVsZXRlIHZtLmV2ZW50cy5ob3N0aW5nW3VuZGVmaW5lZF07XG5cdFx0XHR9XG5cdFx0fSlcblx0XHQudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdC8vbm93IHRoYXQgZXZlbnRzIGFyZSBsb2FkZWQsIHJlZmxlY3QgaXQgaW4gdGhlIHZpZXcgbW9kZWxcblx0XHRcdGNoZWNrRm9yRXZlbnRzKCk7XG5cdFx0fSlcblxuXHR9XG5cblx0Ly9kZWNsYXJlIHZpZXcgbWV0aG9kc1xuXHR2bS5jcmVhdGVOZXdFdmVudCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBldmVudElEID0gZ2VuZXJhdGVFdmVudElEKCk7XG5cdFx0dmFyIG5ld0V2ZW50U2hlcnBhID0gdHJhZmZpY1ZhbGV0O1xuXG5cdFx0Ly9hZGQgdGhlIGV2ZW50IHRvIHRoZSBtb2RhbCAobG9jYWxseSBPTkxZKVxuXHRcdGN1cnJlbnRVc2VyLmNyZWF0ZU5ld0V2ZW50KGV2ZW50SUQpXG5cdFx0LyoudGhlbihmdW5jdGlvbihhZmZpcm1hdGl2ZVJlc3BvbnNlKSB7XG5cdFx0XHQvL3JlcG9ydCB0aGUgc3VjY2Vzc1xuXHRcdFx0JGxvZy5pbmZvKGFmZmlybWF0aXZlUmVzcG9uc2UpO1xuXHRcdH0pXG5cdFx0LnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHQvL2lmIHRoZXJlIHdhcyBhbiB1cGRhdGVkIGZpZWxkLCByZW1vdmUgaXQgbm93XG5cdFx0XHRjdXJyZW50VXNlci5jbGVhbkRCRXZlbnRzQ2F0ZWdvcnkoJ2hvc3RpbmcnKTtcblxuXHRcdH0pXG5cdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yUmVzcG9uc2UpIHtcblx0XHRcdC8vcmVwb3J0IHRoZSBlcnJvclxuXHRcdFx0JGxvZy5pbmZvKGVycm9yUmVzcG9uc2UpO1xuXHRcdH0pKi9cblx0XHRcblxuXHRcdC8vcmVkaXJlY3QgdG8gdGhlIG5ldyBldmVudCBwYWdlXHRcdFxuXHRcdG5ld0V2ZW50U2hlcnBhLnJlZGlyZWN0VG8oJy9ldmVudCcsIGV2ZW50SUQsIGN1cnJlbnRVc2VyLmdldFVJRExvY2FsbHkoKSwgY3VycmVudFVzZXIuZ2V0VUlETG9jYWxseSgpKTtcblx0fVxuXG5cdC8vZXhlY3V0ZSBzY3JpcHRzXG5cdGluaXRpYWxpemUoKTtcblxufVxuXG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdVc2VySW5mb3JtYXRpb25Db250cm9sbGVyJywgVXNlckluZm9ybWF0aW9uQ29udHJvbGxlcik7XG5cblVzZXJJbmZvcm1hdGlvbkNvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICckZG9jdW1lbnQnLCAnJHJvdXRlUGFyYW1zJywndXNlckRhdGEnLCAndHJhZmZpY1ZhbGV0J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gVXNlckluZm9ybWF0aW9uQ29udHJvbGxlcigkbG9nLCAkZG9jdW1lbnQsICRyb3V0ZVBhcmFtcywgdXNlckRhdGEsIHRyYWZmaWNWYWxldCkge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHRcblx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0dmFyIGN1cnJlbnRVc2VyID0gdXNlckRhdGE7XG5cblx0Ly92aWV3IG1vZGVsIHZhcmlhYmxlc1xuXHR2bS51c2VyID0ge307XG5cdHZtLnRlbXBCaXJ0aGRheTtcblx0dm0udmlldyA9IHtcblx0XHRkYXRhVG9TYXZlOiBmYWxzZSxcblx0XHRpc0RhdGE6IGZhbHNlLFxuXHRcdGJ0bk1zc2c6ICdNb3ZlIE9uLi4uJyxcblx0XHRwcm9jZWVkQnRuOiAnYnRuIGJ0bi1wcmltYXJ5J1xuXHR9O1xuXG5cdC8vbG9jYWwgbWV0aG9kc1xuXHRmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fTtcblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH07XG5cblx0ZnVuY3Rpb24gYnVpbGRUZW1wQmlydGhkYXkoKXtcblx0XHR2YXIgbmV3QmlydGhkYXkgPSBuZXcgRGF0ZSgpO1xuXG5cdFx0Ly9yb3VuZCB0byB0aGUgbmVhcmVzdCBob3VyLCBjdXQgb2ZmIGFueXRoaW5nIHNtYWxsZXJcblx0XHRuZXdCaXJ0aGRheS5zZXRIb3VycygwKTtcblx0XHRuZXdCaXJ0aGRheS5zZXRNaW51dGVzKDApO1xuXHRcdG5ld0JpcnRoZGF5LnNldFNlY29uZHMoMCk7XG5cdFx0bmV3QmlydGhkYXkuc2V0TWlsbGlzZWNvbmRzKDApO1xuXG5cdFx0dm0udGVtcEJpcnRoZGF5ID0gbmV3QmlydGhkYXk7XG5cdH1cblxuXHQvL3ZpZXcgYWNjZXNzaWJsZSBtZXRob2RzXG5cdHZtLmNoZWNrVmFsdWVzID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly90aHJvdyB0aGUgaXNEYXRhIGZsYWcgaWYgc29tZXRoaW5nIGlzIHVwZGF0ZWRcblx0XHR2bS52aWV3LmlzRGF0YSA9IHRydWU7XG5cblx0XHRpZiggIShhbmd1bGFyLmlzVW5kZWZpbmVkKHZtLnVzZXIuY29tcGFueSkgfHwgdm0udXNlci5jb21wYW55ID09PSAnJykgfHwgXG5cdFx0XHQhKGFuZ3VsYXIuaXNVbmRlZmluZWQodm0udXNlci50aXRsZSkgfHwgdm0udXNlci50aXRsZSA9PT0gJycpIHx8IFxuXHRcdFx0IShhbmd1bGFyLmlzVW5kZWZpbmVkKHZtLnVzZXIuZG9iKSB8fCB2bS51c2VyLmRvYiA9PT0gJycpKSBcblx0XHR7XG5cdFx0XHR2bS52aWV3LmRhdGFUb1NhdmUgPSB0cnVlO1xuXHRcdFx0dm0udmlldy5wcm9jZWVkQnRuID0gJ2J0biBidG4tc3VjY2Vzcyc7XG5cdFx0XHR2bS52aWV3LmJ0bk1zc2cgPSAnU2F2ZSAmIENvbnRpbnVlJztcblx0XHR9IGVsc2Uge1xuXHRcdFx0dm0udmlldy5kYXRhVG9TYXZlID0gZmFsc2U7XG5cdFx0XHR2bS52aWV3LnByb2NlZWRCdG4gPSAnYnRuIGJ0bi1wcmltYXJ5Jztcblx0XHRcdHZtLnZpZXcuYnRuTXNzZyA9ICdNb3ZlIE9uLi4uJztcdFxuXHRcdH1cblxuXHR9XG5cblx0dm0udXBkYXRlRE9CID0gZnVuY3Rpb24oKSB7XG5cdFx0dm0udXNlci5kb2IgPSBkYXRlVGltZVRvVW5peFRpbWUodm0udGVtcEJpcnRoZGF5KTtcblx0XHR2bS5jaGVja1ZhbHVlcygpO1xuXHR9XG5cblx0dm0uc2F2ZUFuZE1vdmVPbiA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIHVzZXJJbmZvU2hlcnBhID0gdHJhZmZpY1ZhbGV0O1xuXHRcdHZhciBjdXJyZW50VWlkID0gY3VycmVudFVzZXIuZ2V0VUlETG9jYWxseSgpO1xuXG5cdFx0Ly9jb252ZXJ0IERPQiB0byB1bml4VGltZSBhbmQgc2F2ZVxuXHRcdGlmKHZtLnRlbXBCaXJ0aGRheSAhPT0gMCkgdm0udXBkYXRlRE9CKCk7XG5cdFx0XG5cdFx0Ly9pZiB0aGVyZSBpc24ndCBjdXJyZW50bHkgYSBkb2IsIGdyYWIgZnJvbSB0aGUgcm91dGUgcGFyYW1zXG5cdFx0aWYoY3VycmVudFVpZCA9PSAnJyB8fCBhbmd1bGFyLmlzVW5kZWZpbmVkKGN1cnJlbnRVaWQpKSB7XG5cdFx0XHRjdXJyZW50VXNlci5zZXRVSURMb2NhbGx5KCRyb3V0ZVBhcmFtcy51aWQpO1xuXHRcdH1cblxuXHRcdC8vaWYgdGhlcmUgaXMgbmV3IGRhdGEsIHNhdmUgaXRcblx0XHRpZih2bS52aWV3LmlzRGF0YSkge1xuXHRcdFx0JGxvZy5pbmZvKCdzYXZpbmcgdGhlIG5ldyBkYXRhJyk7XG5cdFx0XHRjdXJyZW50VXNlci51cGRhdGVCaW9Mb2NhbGx5KHZtLnVzZXIpO1xuXHRcdH1cblx0XHRcblx0XHQvL21vdmUgb25cblx0XHR1c2VySW5mb1NoZXJwYS5yZWRpcmVjdFRvKCcvdXNlckV2ZW50cycsIHZtLnVzZXIudWlkKVxuXHR9XG5cblx0ZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHtcblx0XHQvL2xvYWQgRmFzdENsaWNrXG5cdFx0Ly9GYXN0Q2xpY2suYXR0YWNoKCRkb2N1bWVudC5ib2R5KTtcblx0XHRidWlsZFRlbXBCaXJ0aGRheSgpO1xuXG5cdFx0Ly9sb2FkIHVzZXJEYXRhIGxvY2FsbHkgb3IgZnJvbSBkYlxuXHRcdGN1cnJlbnRVc2VyLmxvYWRCaW8oJHJvdXRlUGFyYW1zLnVpZClcblx0XHQudGhlbihmdW5jdGlvbihvYnRhaW5lZFVzZXJEYXRhKSB7XG5cdFx0XHQvL2Fzc2lnbiB1c2VyIHZhbHVlc1xuXHRcdFx0dm0udXNlciA9IG9idGFpbmVkVXNlckRhdGE7XG5cblx0XHRcdC8vYnVpbGQgdGVtcEJpcnRoZGF5XG5cdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChvYnRhaW5lZFVzZXJEYXRhLmRvYikgJiYgb2J0YWluZWRVc2VyRGF0YS5kb2IgIT09ICcnKSB7XG5cdFx0XHRcdHZtLnRlbXBCaXJ0aGRheSA9IHVuaXhUaW1lVG9EYXRlVGltZShvYnRhaW5lZFVzZXJEYXRhLmRvYilcblx0XHRcdH1cblxuXHRcdH0pO1xuXHRcblx0fVxuXG5cdC8vcnVuIHByb2Nlc3Nlc1xuXHRpbml0aWFsaXplKCk7IC8vd2l0aCBpbnRlcm5ldCB1c2UgdGhlIGV2ZW50IGxpc3RlbmVyIGluc3RlYWRcbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmZhY3RvcnkoJ2F1dGhTZXJ2aWNlJywgYXV0aFNlcnZpY2UpO1xuXG5hdXRoU2VydmljZS4kaW5qZWN0ID0gWyckbG9nJywgJ2JhY2tlbmRTZXJ2aWNlcyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGF1dGhTZXJ2aWNlKCRsb2csIGJhY2tlbmRTZXJ2aWNlcykge1xuXG5cdHZhciBhbGxBdXRoU2VydmljZXMgPSB7XG5cdFx0aXNMb2dnZWRJbjogaXNMb2dnZWRJblxuXHR9O1xuXG5cdGZ1bmN0aW9uIGlzTG9nZ2VkSW4oKSB7XG5cdFx0Ly9jaGVjayB0aGUgdXNlciBhdXRoZW50aWNhaW9uIHN0YXRlXG5cdFx0dmFyIGRiQXV0aGVudGljYXRpb24gPSBiYWNrZW5kU2VydmljZXM7XG5cdFx0XG5cdFx0ZGJBdXRoZW50aWNhdGlvbi5jaGVja0xvZ2luU3RhdHVzKClcblx0XHQudGhlbihmdW5jdGlvbihzdGF0dXMpIHtcblx0XHRcdHJldHVybiBzdGF0dXM7XG5cdFx0fSlcblx0XHQuY2F0Y2goZnVuY3Rpb24oc3RhdHVzKSB7XG5cdFx0XHRyZXR1cm4gc3RhdHVzO1xuXHRcdH0pXG5cdH1cblx0XG5cdHJldHVybiBhbGxBdXRoU2VydmljZXM7XG5cbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmZhY3RvcnkoJ2JhY2tlbmRTZXJ2aWNlcycsIGJhY2tlbmRTZXJ2aWNlcyk7XG5cbmJhY2tlbmRTZXJ2aWNlcy4kaW5qZWN0ID0gWyckbG9nJywgJyRxJywgJyR3aW5kb3cnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBiYWNrZW5kU2VydmljZXMoJGxvZywgJHEsICR3aW5kb3cpIHtcblx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHR2YXIgZmJVUkwgPSAnaHR0cHM6Ly9tZWV0dXBwbGFubmVyLmZpcmViYXNlaW8uY29tLyc7XG5cdHZhciBhbGxCYWNrZW5kU2VydmljZXMgPSB7XG5cdFx0dXRmOF90b19iNjQ6IHV0ZjhfdG9fYjY0LCBcdFx0XHRcdFx0XHQvL2xvY2FsIGZ1bmN0aW9ucyB0byBjb252ZXJ0IGRhdGVzXG5cdFx0YjY0X3RvX3V0Zjg6IGI2NF90b191dGY4LFxuXHRcdHVuaXhUaW1lVG9EYXRlVGltZTogdW5peFRpbWVUb0RhdGVUaW1lLFxuXHRcdGRhdGVUaW1lVG9Vbml4VGltZTogZGF0ZVRpbWVUb1VuaXhUaW1lLFxuXG5cdFx0TG9naW5SZWdpc3RlcmVkVXNlcjogTG9naW5SZWdpc3RlcmVkVXNlcixcdFx0Ly9hdXRoZW50aWNhaW9uXG5cdFx0Y2hlY2tMb2dpblN0YXR1czogY2hlY2tMb2dpblN0YXR1cyxcblx0XHRsb2dVc2VyT3V0OiBsb2dVc2VyT3V0LFxuXG5cdFx0ZG93bmxvYWRVc2VyRGF0YTogZG93bmxvYWRVc2VyRGF0YSxcdFx0XHRcdC8vZ2V0dGVyIG1ldGhvZHNcblx0XHRnZXRVc2VyQmlvOiBnZXRVc2VyQmlvLFxuXHRcdGdldFVzZXJFdmVudHM6IGdldFVzZXJFdmVudHMsXG5cdFx0Z2V0QUhvc3RlZEV2ZW50OiBnZXRBSG9zdGVkRXZlbnQsXG5cdFx0Z2V0QW5JbnZpdGVkRXZlbnQ6IGdldEFuSW52aXRlZEV2ZW50LFxuXHRcdGZpbmRHdWVzdFVJRDogZmluZEd1ZXN0VUlELFxuXHRcdGdldEd1ZXN0TGlzdEZvckV2ZW50OiBnZXRHdWVzdExpc3RGb3JFdmVudCxcblxuXHRcdGNyZWF0ZU5ld1VzZXI6IGNyZWF0ZU5ld1VzZXIsXHRcdFx0XHRcdC8vc2V0dGVyIE1ldGhvZHNcblx0XHRhZGROZXdVc2VyVG9EYXRhYmFzZTogYWRkTmV3VXNlclRvRGF0YWJhc2UsXG5cdFx0YWRkTmV3VXNlclRvUmVnVXNlcnNMaXN0OiBhZGROZXdVc2VyVG9SZWdVc2Vyc0xpc3QsXG5cdFx0dXBsb2FkVXNlckRhdGE6IHVwbG9hZFVzZXJEYXRhLFxuXHRcdHVwbG9hZFVzZXJCaW86IHVwbG9hZFVzZXJCaW8sXG5cdFx0Y3JlYXRlSG9zdGVkRXZlbnQ6IGNyZWF0ZUhvc3RlZEV2ZW50LFxuXHRcdGFkZEd1ZXN0VG9Ib3N0R3Vlc3RMaXN0b25EQjogYWRkR3Vlc3RUb0hvc3RHdWVzdExpc3RvbkRCLFxuXHRcdC8vYWRkUGVuZGluZ0V2ZW50Rm9yVXNlcjogYWRkUGVuZGluZ0V2ZW50Rm9yVXNlcixcblx0XHQvL2FkZFBlbmRpbmdFdmVudEZvckd1ZXN0OiBhZGRQZW5kaW5nRXZlbnRGb3JHdWVzdCxcblxuXHRcdGRlbGV0ZVVwZGF0ZUZpZWxkOiBkZWxldGVVcGRhdGVGaWVsZCxcdFx0XHQvL2RlbGV0ZSBtZXRob2RzXG5cdFx0cmVtb3ZlSW5jb21wbGV0ZUV2ZW50OiByZW1vdmVJbmNvbXBsZXRlRXZlbnQsXG5cblx0XHR0aGVyZVdhc0FuVXBkYXRlRmllbGQ6IHRoZXJlV2FzQW5VcGRhdGVGaWVsZFx0Ly9tb2RlbCBtYWludGFpbmFuY2Vcblx0fTtcblxuXHRmdW5jdGlvbiB1dGY4X3RvX2I2NChzdHIpIHtcblx0XHRyZXR1cm4gYnRvYShzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gYjY0X3RvX3V0Zjgoc3RyKSB7XG4gICAgXHRyZXR1cm4gYXRvYihzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKSB7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KHVuaXhUaW1lKSk7XG5cdH1cblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH1cblxuXHRmdW5jdGlvbiBjcmVhdGVOZXdVc2VyKGVtYWlsLCBwYXNzd29yZCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZmlyZUJhc2VBY2NvdW50cyA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0XG5cdFx0Ly9yZXR1cm4gYSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XG5cdFx0XHRmaXJlQmFzZUFjY291bnRzLmNyZWF0ZVVzZXIoe1xuXHRcdFx0XHRcblx0XHRcdFx0ZW1haWw6IGVtYWlsLFxuXHRcdFx0XHRwYXNzd29yZDogcGFzc3dvcmRcblx0XHRcdFxuXHRcdFx0fSxmdW5jdGlvbihlcnJvciwgdXNlckRhdGEpIHtcblx0XHRcdFx0XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoJ0Vycm9yIGNyZWF0aW5nIHVzZXI6ICcgKyBlcnJvcik7XG5cblx0XHRcdFx0ZWxzZSByZXNvbHZlKHVzZXJEYXRhKTtcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBhZGROZXdVc2VyVG9EYXRhYmFzZSh1aWQsIG5hbWUsIGVtYWlsKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciBhcHBVc2VycyA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpO1xuXHRcdHZhciBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XG5cblx0XHQvL3JldHVybiBhIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcblx0XHRcdGFwcFVzZXJzLnNldCh7IFxuXHRcdFx0XHQnYmlvJzoge1xuXHRcdFx0XHRcdCd1aWQnOiB1aWQsXG5cdFx0XHRcdFx0J25hbWUnOiBuYW1lLFxuXHRcdFx0XHRcdCdlbWFpbCc6IGVtYWlsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdCdldmVudHMnOiB7XG5cdFx0XHRcdFx0J3BlbmRpbmcnOiB7XG5cdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdCdob3N0aW5nJzoge1xuXHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQnYXR0ZW5kaW5nJzoge1xuXHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQnY29tcGxldGVkJzoge1xuXHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblxuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KCdEYXRhIGNvdWxkIG5vdCBiZSBzYXZlZDogJyArIGVycm9yKTtcblx0XHRcdFx0XG5cdFx0XHRcdGVsc2UgcmVzb2x2ZSgnRGF0YSBzYXZlZCBzdWNjZXNzZnVsbHkuJyk7XG5cblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGFkZE5ld1VzZXJUb1JlZ1VzZXJzTGlzdCh1aWQsIGVtYWlsKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciBiNjRFbWFpbCA9IHV0ZjhfdG9fYjY0KGVtYWlsKTtcblx0XHR2YXIgUmVnaXN0ZXJlZFVzZXJzTGlzdCA9IGFwcC5jaGlsZCgnVWlkcycpLmNoaWxkKGI2NEVtYWlsKTtcblxuXHRcdC8vcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFxuXHRcdFx0UmVnaXN0ZXJlZFVzZXJzTGlzdC5zZXQodWlkLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KFwiRGF0YSBjb3VsZCBub3QgYmUgc2F2ZWQuIFwiICsgZXJyb3IpO1xuXHRcdFx0XHRlbHNlIHJlc29sdmUoXCJ1aWQgY3JlYXRlZCBzdWNlc3NmdWxseS5cIik7XG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBMb2dpblJlZ2lzdGVyZWRVc2VyKGVtYWlsLCBwYXNzd29yZCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHRcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHRcdC8vYXV0aGVudGljYXRlIHRoZSB1c2VyXG5cdFx0XHRhcHAuYXV0aFdpdGhQYXNzd29yZCh7XG5cblx0XHRcdFx0ZW1haWw6IGVtYWlsLFxuXHRcdFx0XHRwYXNzd29yZDogcGFzc3dvcmRcblxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IsIGF1dGhEYXRhKSB7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdHJlamVjdCgnRXJyb3IgTG9nZ2luZyBJbjogJyArIGVycm9yKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyRsb2cuaW5mbygnTG9nZ2VkIEluIHN1Y2Nlc3NmdWxseTogJyArIGF1dGhEYXRhLnVpZCk7XG5cdFx0XHRcdFx0cmVzb2x2ZShhdXRoRGF0YSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0fSk7XG5cblx0XHR9KTtcblx0XHRcblx0fVxuXG5cdGZ1bmN0aW9uIGNoZWNrTG9naW5TdGF0dXMoKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XG5cdFx0XHRhcHAub25BdXRoKGZ1bmN0aW9uKGF1dGhEYXRhKSB7XG5cdFx0XHRcdGlmIChhdXRoRGF0YSkge1xuXHRcdFx0XHQgICAgLy8kbG9nLmluZm8oXCJVc2VyIFwiICsgYXV0aERhdGEudWlkICsgXCIgaXMgbG9nZ2VkIGluIHdpdGggXCIgKyBhdXRoRGF0YS5wcm92aWRlcik7XG5cdFx0XHRcdCAgICByZXNvbHZlKHRydWUpO1xuXHRcdFx0XHQgIH0gZWxzZSB7XG5cdFx0XHRcdCAgICAvLyRsb2cuaW5mbyhcIlVzZXIgaXMgbG9nZ2VkIG91dFwiKTtcblx0XHRcdFx0ICAgIHJlc29sdmUoZmFsc2UpO1xuXHRcdFx0XHQgIH1cblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBsb2dVc2VyT3V0KCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHRcdCRsb2cuaW5mbygnbG9nZ2luZyB1c2VyIG91dCcpO1xuXHRcdGFwcC51bmF1dGgoKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHVwbG9hZFVzZXJEYXRhKGFsbFVzZXJEYXRhKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciB1aWQgPSBhbGxVc2VyRGF0YS51aWQ7XG5cdFx0dmFyIHJlbW90ZVVzZXIgPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKTtcblxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly90aGUgYWN0dWFsIGNhbGxcblx0XHRcdHJlbW90ZVVzZXIudXBkYXRlKGFsbFVzZXJEYXRhLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KCdUaGVyZSB3YXMgYSBwcm9ibGVtIHVwZGF0aW5nIHRoYXQgcmVjb3JkOiAnICsgZXJyb3IpO1xuXHRcdFx0XHRlbHNlIHJlc29sdmUoJ2FsbCB1c2VyIGRhdGEgdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5Jyk7XG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXHRcdFxuXHR9XG5cblx0ZnVuY3Rpb24gdXBsb2FkVXNlckJpbyhjdXJyZW50VXNlckJpbykge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgdWlkID0gKGN1cnJlbnRVc2VyQmlvLnVpZCkudG9TdHJpbmcoKTtcblx0XHR2YXIgcmVtb3RlVXNlckJpbyA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdiaW8nKTtcblxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHQvL2NhbGwgdG8gdGhlIGRiXG5cdFx0XHRyZW1vdGVVc2VyQmlvLnVwZGF0ZShjdXJyZW50VXNlckJpbywgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdCgnVGhlcmUgd2FzIGEgcHJvYmxlbSB1cGRhdGluZyB0aGF0IHJlY29yZDogJyArIGVycm9yKTtcblx0XHRcdFx0ZWxzZSByZXNvbHZlKCdhbGwgdXNlciBiaW8gZGF0YSB1cGxvYWRlZCBzdWNjZXNzZnVsbHknKTtcblx0XHRcdH0pXG5cblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGRvd25sb2FkVXNlckRhdGEoKSB7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGdldFVzZXJCaW8odWlkKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciB1c2VyQmlvID0gYXBwLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2JpbycpO1xuXG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL3RoZSBhY3R1YWwgY2FsbFxuXHRcdFx0dXNlckJpby5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHRcdC8vd2hlbiB0aGUgY2FsbCBpcyBzdWNjZXNzZnVsIHJldHVybiB0aGUgZGF0YVxuXHRcdFx0XHRyZXNvbHZlKHNuYXBzaG90LnZhbCgpKTtcblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSB7XG5cdFx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHRcdFx0fSBcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBjcmVhdGVIb3N0ZWRFdmVudCh1aWQsIG5ld0V2ZW50KSB7XG5cblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIGV2ZW50SUQgPSBuZXdFdmVudC5pZDtcblx0XHR2YXIgbmV3SG9zdGVkRXZlbnQgPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ2hvc3RpbmcnKS5jaGlsZChldmVudElEKTtcblxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XG5cdFx0XHQvL2NhbGwgdG8gZmlyZWJhc2Vcblx0XHRcdG5ld0hvc3RlZEV2ZW50LnNldChuZXdFdmVudCwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdCgnVGhlcmUgd2FzIGFuIGVycm9yOiAnICsgZXJyb3IpO1xuXHRcdFx0XHRlbHNlIHJlc29sdmUoJ05ldyBldmVudCBzYXZlZCB0byBEQiBzdWNjZXNzZnVsbHknKTtcblx0XHRcdH0pXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGFkZEd1ZXN0VG9Ib3N0R3Vlc3RMaXN0b25EQihuYW1lLCBndWllc3RJZCwgZXZlbnRJZCwgdWlkKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciBndWVzdExpc3QgPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ2hvc3RpbmcnKS5jaGlsZChldmVudElkKS5jaGlsZCgnZ3Vlc3RMaXN0JykuY2hpbGQoZ3VpZXN0SWQpO1xuXG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHRcdC8vY2FsbCB0byB0aGUgZGJcblx0XHRcdGd1ZXN0TGlzdC5zZXQoe1xuXHRcdFx0XHRyc3ZwZDogZmFsc2UsXG5cdFx0XHRcdHN0YXR1czogJ3BlbmRpbmcnLFxuXHRcdFx0XHRuYW1lOiBuYW1lXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3I6ICcgKyBlcnJvcik7XG5cdFx0XHRcdGVsc2UgcmVzb2x2ZSgnTmV3IGV2ZW50IHNhdmVkIHRvIERCIHN1Y2Nlc3NmdWxseScpO1xuXHRcdFx0fSlcblxuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0VXNlckV2ZW50cyh1aWQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIHVzZXJFdmVudHMgPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJyk7XG5cdFx0XG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL3RoZSBhY3R1YWwgY2FsbFxuXHRcdFx0dXNlckV2ZW50cy5vcmRlckJ5S2V5KCkub25jZSgndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0XHR2YXIgdXNlclByb2ZpbGUgPSBzbmFwc2hvdC52YWwoKTtcblxuXHRcdFx0XHQvL3doZW4gdGhlIGNhbGwgaXMgc3VjY2Vzc2Z1bCByZXR1cm4gdGhlIGRhdGFcblx0XHRcdFx0dmFyIGV2ZW50c1BhY2thZ2UgPSB7XG5cdFx0XHRcdFx0aG9zdGluZzogdXNlclByb2ZpbGUuaG9zdGluZyxcblx0XHRcdFx0XHRhdHRlbmRpbmc6IHVzZXJQcm9maWxlLmF0dGVuZGluZyxcblx0XHRcdFx0XHRwZW5kaW5nOiB1c2VyUHJvZmlsZS5wZW5kaW5nLFxuXHRcdFx0XHRcdGNvbXBsZXRlZDogdXNlclByb2ZpbGUuY29tcGxldGVkXG5cdFx0XHRcdH07XG5cblx0XHRcdFx0cmVzb2x2ZShldmVudHNQYWNrYWdlKTtcblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSB7XG5cdFx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHRcdFx0fSBcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRBSG9zdGVkRXZlbnQodWlkLCBldmVudElkKSB7XG5cblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIGhvc3RlZEV2ZW50ID0gYXBwLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdob3N0aW5nJykuY2hpbGQoZXZlbnRJZCk7XG5cblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vdGhlIGFjdHVhbCBjYWxsXG5cdFx0XHRob3N0ZWRFdmVudC5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHRcdHZhciBzZWxlY3RFdmVudCA9IHNuYXBzaG90LnZhbCgpO1xuXG5cdFx0XHRcdHJlc29sdmUoc2VsZWN0RXZlbnQpO1xuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdChlcnJvcik7XG5cdFx0XHR9KVxuXHRcdH0pXG5cdH1cblxuXHRmdW5jdGlvbiBmaW5kR3Vlc3RVSUQoZ3Vlc3RiNjRFbWFpbCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgdWlkcyA9IGFwcC5jaGlsZCgnVWlkcycpO1xuXG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL2NhbGwgdG8gZGJcblx0XHRcdHVpZHMub25jZSgndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0XHQvL2Rpc3RpbGwgcmVzdWx0c1xuXHRcdFx0XHR2YXIgYWxsVXNlcnMgPSBzbmFwc2hvdC52YWwoKTtcblxuXHRcdFx0XHRPYmplY3Qua2V5cyhhbGxVc2VycykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcblx0XHRcdFx0XHQvL2NoZWNrIGVhY2ggdXNlclxuXHRcdFx0XHRcdGlmKGtleSA9PSBndWVzdGI2NEVtYWlsKSB7XG5cdFx0XHRcdFx0XHRyZXNvbHZlKGFsbFVzZXJzW2tleV0pO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRyZWplY3QoJ05vIHVzZXIgYnkgdGhhdCBlbWFpbCcpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9KTtcblxuXHRcdFx0fSk7XG5cblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0R3Vlc3RMaXN0Rm9yRXZlbnQoaG9zdElkLCBldmVudElkKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciBndWVzdExpc3QgPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQoaG9zdElkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ2hvc3RpbmcnKS5jaGlsZChldmVudElkKS5jaGlsZCgnZ3Vlc3RMaXN0Jyk7XG5cblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHRcdC8vY2FsbCB0aGUgZGJcblx0XHRcdGd1ZXN0TGlzdC5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHRcdC8vbG9jYWwgdmFyaWFibGVcblx0XHRcdFx0dmFyIHRoZUxpc3QgPSBzbmFwc2hvdC52YWwoKTtcblxuXHRcdFx0XHRyZXNvbHZlKHRoZUxpc3QpO1xuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdCgnVGhlcmUgd2FzIGFuIGVycm9yIGdldHRpbmcgdGhlIGd1ZXN0IGxpc3Q6ICcgKyAgZXJyb3IpO1xuXHRcdFx0fSlcblx0XHR9KVxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0QW5JbnZpdGVkRXZlbnQoaG9zdElkLCB1aWQsIGV2ZW50SWQpIHt9XG5cblx0Lypcblx0ZnVuY3Rpb24gYWRkUGVuZGluZ0V2ZW50Rm9yVXNlcih1aWQsIGhvc3RJZCwgZXZlbnRJZCwgZXZlbnQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIHVzZXJQZW5kaW5nTGlzdCA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgncGVuZGluZycpO1xuXG5cdFx0Ly9tYW5nZSB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9jYWxsIHRoZSBkYlxuXHRcdFx0dXNlclBlbmRpbmdMaXN0LnNldCh7XG5cdFx0XHRcdGhvc3RJZDoge1xuXHRcdFx0XHRcdGV2ZW50SWQ6IHtcblx0XHRcdFx0XHRcdGV2ZW50XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KFwiRXJyb3IgYWRkaW5nIHRvIHVzZXIgcGVuZGluZyBsaXN0OiBcIiArIGVycm9yKTtcblx0XHRcdFx0ZWxzZSByZXR1cm4gcmVzb2x2ZSgnQWRkZWQgdG8gdXNlciBwZW5kaW5nIGxpc3Qgc3VjY2Vzc2Z1bGx5Jyk7XG5cdFx0XHR9KVxuXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGFkZFBlbmRpbmdFdmVudEZvckd1ZXN0KHVpZCwgaG9zdElkLCBldmVudElkLCBldmVudCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgZ3Vlc3RzUGVuZGluZ0xpc3QgPSBhcHAuY2hpbGQoJ1VucmVnaXN0ZXJlZCcpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdwZW5kaW5nJyk7XG5cblx0XHQvL21hbmdlIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHQvL2NhbGwgdGhlIGRiXG5cdFx0XHR1c2VyUGVuZGluZ0xpc3Quc2V0KHtcblx0XHRcdFx0aG9zdElkOiB7XG5cdFx0XHRcdFx0ZXZlbnRJZDoge1xuXHRcdFx0XHRcdFx0ZXZlbnRcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoXCJFcnJvciBhZGRpbmcgdG8gdXNlciBwZW5kaW5nIGxpc3Q6IFwiICsgZXJyb3IpO1xuXHRcdFx0XHRlbHNlIHJldHVybiByZXNvbHZlKCdBZGRlZCB0byB1c2VyIHBlbmRpbmcgbGlzdCBzdWNjZXNzZnVsbHknKTtcblx0XHRcdH0pXG5cblx0XHR9KTtcblxuXHR9Ki9cblxuXHRmdW5jdGlvbiBkZWxldGVVcGRhdGVGaWVsZChjYXRlZ29yeSwgdWlkKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciBjYXRSZW1vdmluZ0Zyb20gPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoY2F0ZWdvcnkpLmNoaWxkKCd1cGRhdGVkJyk7XG5cblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdGNhdFJlbW92aW5nRnJvbS5zZXQobnVsbCwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdCgnVGhlcmUgd2FzIGFuIGVycm9yIGRlbGV0aW5nIHVwZGF0ZSBmaWVsZDogJyArIGVycm9yKTtcblx0XHRcdFx0ZWxzZSByZXNvbHZlKCdEZWxldGVkIHVwZGF0ZSBzdWNjZXNzZnVsbHknKTtcblx0XHRcdH0pXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIHJlbW92ZUluY29tcGxldGVFdmVudCh1aWQsIGV2ZW50SWQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIGV2ZW50VG9SZW1vdmUgPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ2hvc3RpbmcnKS5jaGlsZChldmVudElkKTtcblxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdHZhciBvbkNvbXBsZXRlID0gZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHRyZWplY3QoJ1N5bmNocm9uaXphdGlvbiBmYWlsZWQnKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRyZXNvbHZlKCdTeW5jaHJvbml6YXRpb24gc3VjY2VlZGVkJyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly9jYWxsIGRvIGRiXG5cdFx0XHRldmVudFRvUmVtb3ZlLnJlbW92ZShvbkNvbXBsZXRlKTtcblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gdGhlcmVXYXNBblVwZGF0ZUZpZWxkKGNhdGVnb3J5LCB1aWQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIGNhdFRvQ2hlY2sgPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoY2F0ZWdvcnkpO1xuXG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL2NhbGwgdGhlIGRiXG5cdFx0XHRjYXRUb0NoZWNrLm9uY2UoJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdFx0Ly9zYXZlIHRoZSByZXNwb25zZVxuXHRcdFx0XHR2YXIgY3VycmVudENhdE1vZGVsID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHRcdC8vc2hvdyB3aGF0IHdhcyBmb3VuZFxuXHRcdFx0XHQvL2xvb2sgZm9yIHRoZSB1cGRhdGUgZmllbGRcblx0XHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoY3VycmVudENhdE1vZGVsWyd1cGRhdGVkJ10pKSByZXNvbHZlKHRydWUpO1xuXHRcdFx0XHRlbHNlIHJlamVjdChmYWxzZSk7XG5cblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoZXJyb3IpO1xuXHRcdFx0fSlcblx0XHR9KTtcblx0fVxuXG5cdC8vcmV0dXJuIHRoZSBvYmplY3Rcblx0cmV0dXJuIGFsbEJhY2tlbmRTZXJ2aWNlcztcbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmZhY3RvcnkoJ3RyYWZmaWNWYWxldCcsIHRyYWZmaWNWYWxldCk7XG5cbnRyYWZmaWNWYWxldC4kaW5qZWN0ID0gWyckbG9nJywgJyRsb2NhdGlvbiddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHRyYWZmaWNWYWxldCgkbG9nLCAkbG9jYXRpb24pIHtcblx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHR2YXIgYWxsVHJhZmZpY0NvbnRyb2xzID0ge1xuXHRcdHJlZGlyZWN0VG86IHJlZGlyZWN0VG8sXG5cdFx0ZXZlbnRSb3V0ZTogZXZlbnRSb3V0ZVxuXHR9O1xuXG5cdGZ1bmN0aW9uIHJlZGlyZWN0VG8ocGF0aCwgcGFyYW0xLCBwYXJhbTIsIHBhcmFtMykge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHBhcmFtMSkpIHtcblx0XHRcdHBhdGggPSBwYXRoICsgJy8nICsgcGFyYW0xO1xuXG5cdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChwYXJhbTIpKSB7XG5cdFx0XHRcdC8vZ28gdG8gcGF0aCB3aXRoIDIgcGFyYW1zXG5cdFx0XHRcdHBhdGggPSBwYXRoICsgJy8nICsgcGFyYW0yO1xuXG5cdFx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHBhcmFtMykpIHtcblx0XHRcdFx0XHRwYXRoID0gcGF0aCArICcvJyArIHBhcmFtMztcblxuXHRcdFx0XHRcdCRsb2NhdGlvbi5wYXRoKHBhdGgpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0JGxvY2F0aW9uLnBhdGgocGF0aCk7XG5cdFx0XHR9XG5cdFx0XHQvL2dvIHdpdGggMSBwYXJhbVxuXHRcdFx0JGxvY2F0aW9uLnBhdGgocGF0aCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vanVzdCBnbyB0byBwYXRoXG5cdFx0XHQkbG9jYXRpb24ucGF0aChwYXRoKTtcblx0XHR9XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGV2ZW50Um91dGUoZXZlbnRJZCwgaG9zdElkLCB1c2VySWQsIHNlY3Rpb24pIHtcblxuXHRcdC8vaWYgdGhlcmUgaXNuJ3QgYSBzZWN0aW9uIHNldCB0byBkZWZhdWx0XG5cdFx0aWYoYW5ndWxhci5pc1VuZGVmaW5lZChzZWN0aW9uKSkgc2VjdGlvbiA9IDE7XG5cblx0XHQvL2lmIHRoZSBob3N0SWQgYW5kIHVzZXJJZCBtYXRjaCwgbGF1bmNoIGhvc3Qgdmlld1xuXHRcdGlmKGhvc3RJZCA9PT0gdXNlcklkKSB7IFxuXHRcdFx0dmFyIHBhdGggPSAnL2V2ZW50L2hvc3QvJyArIGV2ZW50SWQgKyAnLycgKyB1c2VySWQgKyAnLycrIHNlY3Rpb247XG5cdFx0XHQvL3JlZGlyZWN0XG5cdFx0XHQkbG9jYXRpb24ucGF0aChwYXRoKTtcblx0XHR9XG5cdFx0Ly9pZiB0aGUgaG9zdElkIGFuZCB1c2VySWQgRE9OJ1QgbWF0Y2gsIGxhdW5jaCBndWVzdCB2aWV3XG5cdFx0ZWxzZSB7XG5cdFx0XHR2YXIgcGF0aCA9ICcvZXZlbnQvZ3Vlc3QvJyArIGV2ZW50SWQgKyAnLycgKyB1c2VySWQgKyAnLycgKyBob3N0SWQ7XG5cdFx0XHQvL3JlZGlyZWN0XG5cdFx0XHQkbG9jYXRpb24ucGF0aChwYXRoKTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gYWxsVHJhZmZpY0NvbnRyb2xzO1xufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuZmFjdG9yeSgndXNlckRhdGEnLCB1c2VyRGF0YSk7XG5cbnVzZXJEYXRhLiRpbmplY3QgPSBbJyRsb2cnLCAnJHEnLCAnYmFja2VuZFNlcnZpY2VzJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gdXNlckRhdGEoJGxvZywgJHEsIGJhY2tlbmRTZXJ2aWNlcykge1xuXHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdHZhciBjdXJyZW50VXNlciA9IHtcblx0XHRiaW86IHsgXG5cdFx0XHR1aWQ6ICcnLFxuXHRcdFx0bmFtZTogJycsXG5cdFx0XHRlbWFpbDogJycsXG5cdFx0XHRjb21wYW55OiAnJyxcblx0XHRcdHRpdGxlOiAnJyxcblx0XHRcdGRvYjogMFxuXHRcdH0sXG5cdFx0ZXZlbnRzOiB7XG5cdFx0XHRob3N0aW5nOiB7fSxcblx0XHRcdHBlbmRpbmc6IHt9LFxuXHRcdFx0YXR0ZW5kaW5nOiB7fSxcblx0XHRcdGNvbXBsZXRlZDoge31cblx0XHR9XG5cdH07XG5cblx0dmFyIGFjdGl2ZUV2ZW50ID0ge307XG5cblx0Ly9sb2NhbCBmdW5jdGlvbnNcblx0ZnVuY3Rpb24gdXRmOF90b19iNjQoc3RyKSB7XG5cdFx0cmV0dXJuIGJ0b2Eoc3RyKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGI2NF90b191dGY4KHN0cikge1xuICAgIFx0cmV0dXJuIGF0b2Ioc3RyKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHVuaXhUaW1lVG9EYXRlVGltZSh1bml4VGltZSkge1xuXHRcdHJldHVybiBuZXcgRGF0ZShwYXJzZUludCh1bml4VGltZSkpO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIGRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fTtcblxuXHR2YXIgYWxsVXNlckRhdGEgPSB7XG5cdFx0YmlvUHJpbWFyaWVzQXJlQ29tcGxldGVMb2NhbGx5OiBiaW9QcmltYXJpZXNBcmVDb21wbGV0ZUxvY2FsbHksXHRcdC8vbW9kYWwgYW5hbHlzaXNcblx0XHRldmVudEV4aXN0c0xvY2FsbHk6IGV2ZW50RXhpc3RzTG9jYWxseSxcblx0XHR0aGlzSXNUaGVIb3N0RW1haWw6IHRoaXNJc1RoZUhvc3RFbWFpbCxcblx0XHRndWVzdEludml0ZWRBbHJlYWR5OiBndWVzdEludml0ZWRBbHJlYWR5LFxuXHRcdHRoZXJlSXNBbkFjdGl2ZUV2ZW50OiB0aGVyZUlzQW5BY3RpdmVFdmVudCxcblxuXHRcdGNsZWFuRXZlbnRzOiBjbGVhbkV2ZW50cyxcdFx0XHRcdFx0XHRcdC8vbW9kZWwgbWFpbnRhaW5hbmNlXG5cblx0XHRnZXRVSURMb2NhbGx5OiBnZXRVSURMb2NhbGx5LFx0XHRcdFx0XHRcdC8vZ2V0dGVyIE1ldGhvZHNcblx0XHRnZXROYW1lTG9jYWxseTogZ2V0TmFtZUxvY2FsbHksXG5cdFx0Z2V0RW1haWxMb2NhbGx5OiBnZXRFbWFpbExvY2FsbHksXG5cdFx0Z2V0Q29tcGFueUxvY2FsbHk6IGdldENvbXBhbnlMb2NhbGx5LFxuXHRcdGdldFRpdGxlTG9jYWxseTogZ2V0VGl0bGVMb2NhbGx5LFxuXHRcdGdldERPQkxvY2FsbHk6IGdldERPQkxvY2FsbHksXG5cdFx0Z2V0RnVsbEJpb0xvY2FsbHk6IGdldEZ1bGxCaW9Mb2NhbGx5LFxuXHRcdGdldE9uZVVzZXJFdmVudExvY2FsbHk6IGdldE9uZVVzZXJFdmVudExvY2FsbHksXG5cdFx0Z2V0VXNlckV2ZW50c0xvY2FsbHk6IGdldFVzZXJFdmVudHNMb2NhbGx5LFxuXHRcdGdldEFsbFVzZXJFdmVudHNMb2NhbGx5OiBnZXRBbGxVc2VyRXZlbnRzTG9jYWxseSxcblx0XHRnZXRBY3RpdmVFdmVudDogZ2V0QWN0aXZlRXZlbnQsXG5cblx0XHRzZXRVSURMb2NhbGx5OiBzZXRVSURMb2NhbGx5LFx0XHRcdFx0XHRcdC8vc2V0dGVyIE1ldGhvZHNcblx0XHRzZXROYW1lTG9jYWxseTogc2V0TmFtZUxvY2FsbHksXG5cdFx0c2V0RW1haWxMb2NhbGx5OiBzZXRFbWFpbExvY2FsbHksXG5cdFx0c2V0Q29tcGFueUxvY2FsbHk6IHNldENvbXBhbnlMb2NhbGx5LFxuXHRcdHNldFRpdGxlTG9jYWxseTogc2V0VGl0bGVMb2NhbGx5LFxuXHRcdHNldERPQkxvY2FsbHk6IHNldERPQkxvY2FsbHksXG5cdFx0c2V0UHJpbWFyaWVzTG9jYWxseTogc2V0UHJpbWFyaWVzTG9jYWxseSxcblx0XHR1cGRhdGVVc2VyRXZlbnRzTG9jYWxseTogdXBkYXRlVXNlckV2ZW50c0xvY2FsbHksXG5cdFx0dXBkYXRlQWxsVXNlckV2ZW50c0xvY2FsbHk6IHVwZGF0ZUFsbFVzZXJFdmVudHNMb2NhbGx5LFxuXHRcdHVwZGF0ZUJpb0xvY2FsbHk6IHVwZGF0ZUJpb0xvY2FsbHksXG5cdFx0YWRkR3Vlc3RUb0hvc3RHdWVzdExpc3Q6IGFkZEd1ZXN0VG9Ib3N0R3Vlc3RMaXN0LFxuXHRcdHNldEFjdGl2ZUV2ZW50OiBzZXRBY3RpdmVFdmVudCxcblx0XHRhZGRHdWVzdFRvQWN0aXZlRXZlbnQ6IGFkZEd1ZXN0VG9BY3RpdmVFdmVudCxcblx0XHRzYXZlTmV3SG9zdGluZ0V2ZW50OiBzYXZlTmV3SG9zdGluZ0V2ZW50LFxuXG5cdFx0cmVtb3ZlVXNlckV2ZW50c0xvY2FsbHk6IHJlbW92ZVVzZXJFdmVudHNMb2NhbGx5LCBcdC8vcmVtb3ZlIGRhdGFcblx0XHRcblx0XHRnZXRGdWxsUmVtb3RlREJmb3JMb2NhbDogZ2V0RnVsbFJlbW90ZURCZm9yTG9jYWwsXHQvL2xvY2FsLXJlbW90ZSBpbnRlcmFjaW9uc1xuXHRcdGdldFJlbW90ZUJpb0ZvckxvY2FsOiBnZXRSZW1vdGVCaW9Gb3JMb2NhbCxcdFx0XHRcblx0XHRnZXRSZW1vdGVFdmVudHNGb3JMb2NhbDogZ2V0UmVtb3RlRXZlbnRzRm9yTG9jYWwsXG5cdFx0Z2V0T25lUmVtb3RlRXZlbnRGb3JMb2NhbDogZ2V0T25lUmVtb3RlRXZlbnRGb3JMb2NhbCxcblx0XHRzZXRGdWxsUmVtb3RlREJmcm9tTG9jYWw6IHNldEZ1bGxSZW1vdGVEQmZyb21Mb2NhbCxcblx0XHRzZXRSZW1vdGVCaW9Gcm9tTG9jYWw6IHNldFJlbW90ZUJpb0Zyb21Mb2NhbCxcblx0XHRzZXRBUmVtb3RlRXZlbnRGcm9tTG9jYWw6IHNldEFSZW1vdGVFdmVudEZyb21Mb2NhbCxcblx0XHRzZXRSZW1vdGVFdmVudHNGcm9tTG9jYWw6IHNldFJlbW90ZUV2ZW50c0Zyb21Mb2NhbCxcblx0XHRjbGVhbkRCRXZlbnRzQ2F0ZWdvcnk6IGNsZWFuREJFdmVudHNDYXRlZ29yeSxcblx0XHRnZXRVc2VySWRGb3JHdWVzdDogZ2V0VXNlcklkRm9yR3Vlc3QsXG5cdFx0Z2V0RXZlbnRHdWVzdExpc3Q6IGdldEV2ZW50R3Vlc3RMaXN0LFxuXHRcdHJlbW92ZUluY29tcGxldGVFdmVudEZyb21EQjogcmVtb3ZlSW5jb21wbGV0ZUV2ZW50RnJvbURCLFxuXG5cdFx0bG9hZEJpbzogbG9hZEJpbyxcdFx0XHRcdFx0XHRcdFx0XHQvL2V4dGVybmFsIG1ldGhvZHNcblx0XHRsb2FkRXZlbnRzUHJvZ3Jlc3NpdmVseTogbG9hZEV2ZW50c1Byb2dyZXNzaXZlbHksXG5cdFx0bG9hZEFuRXZlbnRQcm9ncmVzc2l2ZWx5OiBsb2FkQW5FdmVudFByb2dyZXNzaXZlbHksXG5cdFx0Y3JlYXRlTmV3RXZlbnQ6IGNyZWF0ZU5ld0V2ZW50LFxuXHRcdHVwZGF0ZVBlbmRpbmdFdmVudHNMaXN0Rm9yR3Vlc3Q6IHVwZGF0ZVBlbmRpbmdFdmVudHNMaXN0Rm9yR3Vlc3Rcblx0fVxuXG5cdC8vYW5hbHlzaXMgbWV0aG9kc1xuXHRmdW5jdGlvbiBiaW9QcmltYXJpZXNBcmVDb21wbGV0ZUxvY2FsbHkoKSB7XG5cdFx0aWYoIGN1cnJlbnRVc2VyLmJpby51aWQgIT09ICcnICYmXG5cdFx0XHRjdXJyZW50VXNlci5iaW8ubmFtZSAhPT0gJycgJiZcblx0XHRcdGN1cnJlbnRVc2VyLmJpby5lbWFpbCAhPT0gJydcblx0XHRcdClcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdGVsc2UgcmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0ZnVuY3Rpb24gZXZlbnRFeGlzdHNMb2NhbGx5KHR5cGUsIGV2ZW50SWQpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChjdXJyZW50VXNlci5ldmVudHNbdHlwZV1bZXZlbnRJZF0pKSByZXR1cm4gdHJ1ZTtcblx0XHRlbHNlIHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGZ1bmN0aW9uIHRoaXNJc1RoZUhvc3RFbWFpbChlbWFpbCwgZXZlbnRJZCkge1xuXHRcdFxuXHRcdC8vY2hlY2sgaWYgYSBiaW8gaXMgbG9hZGVkXG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoY3VycmVudFVzZXIuYmlvLmVtYWlsKSkge1xuXHRcdFx0XG5cdFx0XHRpZihjdXJyZW50VXNlci5iaW8uZW1haWwgIT0gJycpIHtcblx0XHRcdFx0Ly9jaGVjayBmb3IgYSBtYXRjaFxuXHRcdFx0XHRpZihlbWFpbCA9PSBjdXJyZW50VXNlci5iaW8uZW1haWwpIHtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblxuXHRcdFx0fSBcblx0XHRcdFxuXHRcdH0gXG5cdFx0XG5cdFx0Ly9pZiB0aGF0IGRpZG4ndCB3b3JrIGNoZWNrIHRoZSBjdXJyZW50IGV2ZW50XG5cdFx0XG5cdFx0aWYoY3VycmVudFVzZXIuZXZlbnRzLmhvc3RpbmdbZXZlbnRJZF0uaG9zdC5lbWFpbCA9PSBlbWFpbCkge1xuXHRcdFx0XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcdFxuXHR9XG5cblx0ZnVuY3Rpb24gZ3Vlc3RJbnZpdGVkQWxyZWFkeShlbWFpbCwgZXZlbnRJZCkge1xuXHRcdC8vZmlyc3QgY2hlY2sgaWYgdGhlcmUgaXMgYSBndWVzdCBsaXN0XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoY3VycmVudFVzZXIuZXZlbnRzLmhvc3RpbmdbZXZlbnRJZF0uZ3Vlc3RMaXN0KSkge1xuXHRcdFx0Ly9pZiB0aGVyZSBpcyBhIGxpc3QsIGNoZWNrIGZvciB0aGUgZW1haWxcblxuXHRcdFx0Ly9jb252ZXJ0IGVtYWlsIGZvciBldmFsdWF0aW9uXG5cdFx0XHRyZWZFbWFpbCA9IHV0ZjhfdG9fYjY0KGVtYWlsKTtcblxuXHRcdFx0Ly9ydW4gdGhyb3VnaCBlYWNoIGd1ZXN0IGFuZCBjb21wYXJlXG5cdFx0XHRPYmplY3Qua2V5cyhjdXJyZW50VXNlci5ldmVudHMuaG9zdGluZ1tldmVudElkXS5ndWVzdExpc3QpLmZvckVhY2goZnVuY3Rpb24oYjY0RW1haWwpIHtcblx0XHRcdFx0aWYocmVmRW1haWwgPT0gYjY0RW1haWwpIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ2FuIGVtYWlsIG1hdGNoIHdhcyBmb3VuZCwgdGhpcyBndWVzdCBoYXMgYmVlbiBpbnZpdGVkIGFscmVhZHknKTtcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ25vIGVtYWlsIG1hdGNoIGZvdW5kLCBvayB0byBpbnZpdGUgZ3Vlc3QnKTtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly9pZiBubyBndWVzdCBsaXN0IHRoYW4gY2FuJ3QgYWxyZWFkeSBiZSBvbiBpdFxuXHRcdFx0JGxvZy5pbmZvKCdubyBndWVzdGxpc3QnKTtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0fVxuXG5cdGZ1bmN0aW9uIHRoZXJlSXNBbkFjdGl2ZUV2ZW50KCkge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGFjdGl2ZUV2ZW50LmV2ZW50KSkge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHRcdGVsc2UgcmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0Ly9tb2RlbCBtYWludGFpbmFuY2Vcblx0ZnVuY3Rpb24gY2xlYW5FdmVudHModHlwZSkge1xuXHRcdC8vaXRlcmF0ZSB0aHJvdWdoIG9iamVjdHMgaW4gb2JqZWN0XG5cdFx0T2JqZWN0LmtleXMoY3VycmVudFVzZXIuZXZlbnRzW3R5cGVdKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuXHRcdFx0Ly9pZiBhbnkgYXJlIG5vbi1vYmplY3RzLCBkZWxldGUgdGhlbVxuXHRcdFx0aWYoIWFuZ3VsYXIuaXNPYmplY3QoY3VycmVudFVzZXIuZXZlbnRzW3R5cGVdW2tleV0pKSB7XG5cdFx0XHRcdGRlbGV0ZSBjdXJyZW50VXNlci5ldmVudHNbdHlwZV1ba2V5XTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdC8vZ2V0dGVyIG1ldGhvZHNcblx0ZnVuY3Rpb24gZ2V0VUlETG9jYWxseSgpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuYmlvLnVpZDtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldE5hbWVMb2NhbGx5KCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5iaW8ubmFtZTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldEVtYWlsTG9jYWxseSgpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuYmlvLmVtYWlsO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0Q29tcGFueUxvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmJpby5jb21wYW55O1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0VGl0bGVMb2NhbGx5KCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5iaW8udGl0bGU7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldERPQkxvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmJpby5kb2I7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRGdWxsQmlvTG9jYWxseSgpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0dWlkOiBjdXJyZW50VXNlci5iaW8udWlkLFxuXHRcdFx0bmFtZTogY3VycmVudFVzZXIuYmlvLm5hbWUsXG5cdFx0XHRlbWFpbDogY3VycmVudFVzZXIuYmlvLmVtYWlsLFxuXHRcdFx0Y29tcGFueTogY3VycmVudFVzZXIuYmlvLmNvbXBhbnksXG5cdFx0XHR0aXRsZTogY3VycmVudFVzZXIuYmlvLnRpdGxlLFxuXHRcdFx0ZG9iOiBjdXJyZW50VXNlci5iaW8uZG9iXG5cdFx0fTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldE9uZVVzZXJFdmVudExvY2FsbHkodHlwZSwgZXZlbnRJZCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5ldmVudHNbdHlwZV1bZXZlbnRJZF07XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRVc2VyRXZlbnRzTG9jYWxseSh0eXBlKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldEFsbFVzZXJFdmVudHNMb2NhbGx5KCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5ldmVudHM7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRBY3RpdmVFdmVudCgpIHtcblx0XHRyZXR1cm4gYWN0aXZlRXZlbnQ7XG5cdH1cblxuXHQvL3NldHRlciBtZXRob2RzXG5cdGZ1bmN0aW9uIHNldFVJRExvY2FsbHkodWlkKSB7XG5cdFx0Y3VycmVudFVzZXIuYmlvLnVpZCA9IHVpZDtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldE5hbWVMb2NhbGx5KG5hbWUpIHtcblx0XHRjdXJyZW50VXNlci5iaW8ubmFtZSA9IG5hbWU7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXRFbWFpbExvY2FsbHkoZW1haWwpIHtcblx0XHRjdXJyZW50VXNlci5iaW8uZW1haWwgPSBlbWFpbDtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldENvbXBhbnlMb2NhbGx5KGNvbXBhbnkpIHtcblx0XHRjdXJyZW50VXNlci5iaW8uY29tcGFueSA9IGNvbXBhbnk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNldFRpdGxlTG9jYWxseSh0aXRsZSkge1xuXHRcdGN1cnJlbnRVc2VyLmJpby50aXRsZSA9IHRpdGxlO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0RE9CTG9jYWxseShkb2IpIHtcblx0XHRjdXJyZW50VXNlci5iaW8uZG9iID0gZG9iO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0UHJpbWFyaWVzTG9jYWxseShlbWFpbCwgbmFtZSwgdWlkKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoZW1haWwpKSBzZXRFbWFpbExvY2FsbHkoZW1haWwpO1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKG5hbWUpKSBzZXROYW1lTG9jYWxseShuYW1lKTtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh1aWQpKSBzZXRVSURMb2NhbGx5KHVpZCk7XG5cdH1cblxuXHRmdW5jdGlvbiB1cGRhdGVVc2VyRXZlbnRzTG9jYWxseSh0eXBlLCBldmVudCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZXZlbnRJRCA9IGV2ZW50LmlkO1xuXG5cdFx0Ly9jaGVjayBpZiB0aGUgbW9kZWwgbmVlZHMgdG8gYmUgY2xlYW5lZFxuXHRcdGNsZWFuRXZlbnRzKHR5cGUpO1xuXHRcdC8vdGhlbiBsb2FkIHRoZSBuZXcgZXZlbnRcblx0XHRjdXJyZW50VXNlci5ldmVudHNbdHlwZV1bZXZlbnRJRF0gPSBldmVudDtcblx0fVxuXG5cdGZ1bmN0aW9uIHVwZGF0ZUFsbFVzZXJFdmVudHNMb2NhbGx5KGFsbFVzZXJFdmVudHMpIHtcblx0XHRjdXJyZW50VXNlci5ldmVudHMgPSBhbGxVc2VyRXZlbnRzO1xuXHR9XG5cblx0ZnVuY3Rpb24gdXBkYXRlQmlvTG9jYWxseSh1c2VyQmlvKSB7XG5cdFx0Ly91cGRhdGUgbG9jYWwgdmFsdWVzXG5cdFx0c2V0TmFtZUxvY2FsbHkodXNlckJpby5uYW1lKTtcblx0XHRzZXRFbWFpbExvY2FsbHkodXNlckJpby5lbWFpbCk7XG5cdFx0c2V0Q29tcGFueUxvY2FsbHkodXNlckJpby5jb21wYW55KTtcblx0XHRzZXRUaXRsZUxvY2FsbHkodXNlckJpby50aXRsZSk7XG5cdFx0c2V0RE9CTG9jYWxseSh1c2VyQmlvLmRvYik7XG5cdFx0Ly9zYXZlIHRvIGRiXG5cdFx0c2V0UmVtb3RlQmlvRnJvbUxvY2FsKCk7XG5cdH1cblxuXHRmdW5jdGlvbiBhZGRHdWVzdFRvSG9zdEd1ZXN0TGlzdChuYW1lLCBlbWFpbCwgZ3Vlc3RJZCwgZXZlbnRJZCwgdWlkKSB7XG5cdFx0Ly9jYWxsIHRvIHRoZSBkYiBzbyByZXR1cm4gYSBwcm9taXNlXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly9jb252ZXJ0IHRoZSBlbWFpbCBpZiBvbmUgd2FzIHBhc3NlZFxuXHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoZW1haWwpKSB7XG5cdFx0XHRcdGd1ZXN0SWQgPSB1dGY4X3RvX2I2NChlbWFpbCk7XG5cdFx0XHR9XG5cblx0XHRcdGRiLmFkZEd1ZXN0VG9Ib3N0R3Vlc3RMaXN0b25EQihuYW1lLCBndWVzdElkLCBldmVudElkLCB1aWQpXG5cdFx0XHQudGhlbihmdW5jdGlvbihwb3NpdGl2ZVJlc3VsdCkge1xuXHRcdFx0XHRyZXNvbHZlKHBvc2l0aXZlUmVzdWx0KTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24obmVnYXRpdmVSZXN1bHQpIHtcblx0XHRcdFx0cmVqZWN0KG5lZ2F0aXZlUmVzdWx0KTtcblx0XHRcdH0pXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIHNldEFjdGl2ZUV2ZW50KGV2ZW50KSB7XG5cdFx0Ly9cblx0XHRhY3RpdmVFdmVudCA9IGV2ZW50O1xuXHR9XG5cblx0ZnVuY3Rpb24gYWRkR3Vlc3RUb0FjdGl2ZUV2ZW50KG5ld0d1ZXN0KSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgdWlkID0gbmV3R3Vlc3QudWlkO1xuXG5cdFx0Ly9pZiB0aGlzIGlzIHRoZSBmaXJzdCBndWVzdCwgY3JlYXRlIHRoZSBsaXN0IG9iamVjdFxuXHRcdGlmKCFhbmd1bGFyLmlzT2JqZWN0KGFjdGl2ZUV2ZW50LmV2ZW50Lmd1ZXN0TGlzdCkpIHtcblx0XHRcdGFjdGl2ZUV2ZW50LmV2ZW50Lmd1ZXN0TGlzdCA9IHt9O1xuXHRcdH1cblxuXHRcdC8vYWRkIHRoZSBndWVzdCB0byB0aGUgbGlzdFxuXHRcdGFjdGl2ZUV2ZW50LmV2ZW50Lmd1ZXN0TGlzdFt1aWRdID0gbmV3R3Vlc3QuZ3Vlc3Q7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGdldFVzZXJJZEZvckd1ZXN0KGVtYWlsKSB7XG5cdFx0Ly9jYWxsIHRvIHRoZSBkYiBzbyByZXR1cm4gYSBwcm9taXNlXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly9jb252ZXJ0IHRoZSBlbWFpbFxuXHRcdFx0Z3Vlc3RFbWFpbCA9IHV0ZjhfdG9fYjY0KGVtYWlsKTtcblxuXHRcdFx0ZGIuZmluZEd1ZXN0VUlEKGd1ZXN0RW1haWwpXG5cdFx0XHQudGhlbihmdW5jdGlvbih1aWQpIHtcblx0XHRcdFx0cmVzb2x2ZSh1aWQpO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvclJlc3BvbnNlKSB7XG5cdFx0XHRcdHJlamVjdChlcnJvclJlc3BvbnNlKTtcblx0XHRcdH0pXG5cblx0XHR9KTtcblx0fVxuXG5cdC8vZGVsZXRlIE1ldGhvZHNcblx0ZnVuY3Rpb24gcmVtb3ZlVXNlckV2ZW50c0xvY2FsbHkodHlwZSwgZXZlbnQpIHtcblx0XHQvL2RvZXMgdGhpcyB3b3JrP1xuXHRcdGRlbGV0ZSBjdXJyZW50VXNlci5ldmVudHNbdHlwZV1bZXZlbnQuaWRdO1xuXHR9XG5cblx0Ly9yZW1vdGUtbG9jYWwgaW50ZXJhY3Rpb24gTWV0aG9kc1xuXHRmdW5jdGlvbiBnZXRGdWxsUmVtb3RlREJmb3JMb2NhbCgpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdGRiLmRvd25sb2FkVXNlckRhdGEoKVxuXHRcdC50aGVuKGZ1bmN0aW9uKHJlbW90ZVVzZXJEYXRhKSB7XG5cdFx0XHRjdXJyZW50VXNlciA9IHJlbW90ZVVzZXJEYXRhO1xuXHRcdH0pXG5cdH1cblxuXHRmdW5jdGlvbiBnZXRSZW1vdGVCaW9Gb3JMb2NhbCh1aWQpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblx0XHRcdFx0XG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly9nbyBvdXQgdG8gdGhlIGRiIGJlZm9yZSByZXNvbHZpbmdcblx0XHRcdGRiLmdldFVzZXJCaW8odWlkKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24odXNlckJpbykge1xuXG5cdFx0XHRcdHJlc29sdmUodXNlckJpbyk7XG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdHJlamVjdCgnVGhlcmUgd2FzIGFuIGVycm9yIHJlYWRpbmcgdGhlIHVzZXIgYmlvOiAnICsgZXJyb3IpO1xuXHRcdFx0fSlcblx0XHR9KTtcblx0XHRcblx0fVxuXG5cdGZ1bmN0aW9uIGdldFJlbW90ZUV2ZW50c0ZvckxvY2FsKCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXHRcdFx0XHRcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHRcdC8vZ28gb3V0IHRvIHRoZSBkYiBiZWZvcmUgcmVzb2x2aW5nXG5cdFx0XHRkYi5nZXRVc2VyRXZlbnRzKGdldFVJRExvY2FsbHkoKSlcblx0XHRcdC50aGVuKGZ1bmN0aW9uKG9idGFpbmVkVXNlckV2ZW50cykge1xuXG5cdFx0XHRcdC8vc2F2ZSB0aGUgcmVzdWx0cyB0byB0aGUgbG9jYWwgZGF0YWJzZVxuXHRcdFx0XHRPYmplY3Qua2V5cyhvYnRhaW5lZFVzZXJFdmVudHMpLmZvckVhY2goZnVuY3Rpb24oZXZlbnRUeXBlKSB7XG5cdFx0XHRcdFx0Ly93aXRoaW4gZWFjaCBldmVudCB0eXBlIGl0ZXJhdGUgdGhyb3VnaCB0aGUgYWN0dWFsIGV2ZW50c1xuXHRcdFx0XHRcdE9iamVjdC5rZXlzKG9idGFpbmVkVXNlckV2ZW50c1tldmVudFR5cGVdKS5mb3JFYWNoKGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0XHRcdFx0XHQvL29uY2Ugd2Ugc2VlIHRoZSBldmVudHMsIHNhdmUgdGhlbSB0byB0aGUgbG9jYWwgbW9kZWxcblxuXHRcdFx0XHRcdFx0dXBkYXRlVXNlckV2ZW50c0xvY2FsbHkoZXZlbnRUeXBlLCBvYnRhaW5lZFVzZXJFdmVudHNbZXZlbnRUeXBlXVtldmVudF0pO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0XG5cdFx0XHRcdC8vcmV0dXJuIHRoZSByZXN1bHRzIHRvIHRoZSByZXF1ZXN0aW5nIG9iamVjdFxuXHRcdFx0XHRyZXNvbHZlKG9idGFpbmVkVXNlckV2ZW50cyk7XG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdHJlamVjdCgnVGhlcmUgd2FzIGFuIGVycm9yIHJlYWRpbmcgdGhlIHVzZXIgZXZlbnRzOiAnICsgZXJyb3IpO1xuXHRcdFx0fSlcblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldE9uZVJlbW90ZUV2ZW50Rm9yTG9jYWwoZXZlbnRJZCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XG5cdFx0XHQvL2dvaW5nIHRvIGJhY2tlbmQgc2VydmljZXNcblx0XHRcdGRiLmdldEFIb3N0ZWRFdmVudChnZXRVSURMb2NhbGx5KCksIGV2ZW50SWQpXG5cdFx0XHQudGhlbihmdW5jdGlvbihvYnRhaW5lZEV2ZW50KSB7XG5cblx0XHRcdFx0Ly9zYXZlIHRoZSByZXN1bHQgdG8gdGhlIGxvY2FsIG1vZGVsXG5cdFx0XHRcdFxuXHRcdFx0XHQvL3JldHVybiB0aGUgcmVzdWx0IHRvIHRoZSByZXF1ZXN0aW5nIG9iamVjdFxuXHRcdFx0XHRyZXNvbHZlKG9idGFpbmVkRXZlbnQpO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRyZWplY3QoJ1RoZXJlIHdhcyBhbiBlcnJvciByZWFkaW5nIHRoZSB1c2VyIGV2ZW50OiAnICsgZXJyb3IpO1xuXHRcdFx0fSlcblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldEZ1bGxSZW1vdGVEQmZyb21Mb2NhbCgpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdGRiLnVwbG9hZFVzZXJEYXRhKGN1cnJlbnRVc2VyKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldFJlbW90ZUJpb0Zyb21Mb2NhbCgpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdGRiLnVwbG9hZFVzZXJCaW8oY3VycmVudFVzZXIuYmlvKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldEFSZW1vdGVFdmVudEZyb21Mb2NhbCgpIHtcblxuXHR9XG5cblx0ZnVuY3Rpb24gc2V0UmVtb3RlRXZlbnRzRnJvbUxvY2FsKHVpZCwgZXZlbnQpIHtcblx0XHQvL2RlY2xhciBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0XHQkbG9nLmluZm8oJ3NlbmRpbmcgdGhpcyB0byB0aGUgc2VydmVyJyk7XG5cdFx0JGxvZy5pbmZvKGV2ZW50KTtcblx0XHRcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL3NlbmQgdGhlIGV2ZW50IHRvIHRoZSBkYlxuXHRcdFx0ZGIuY3JlYXRlSG9zdGVkRXZlbnQodWlkLCBldmVudClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKHN1Y2Nlc3NNZXNzYWdlKSB7XG5cdFx0XHRcdHJlc29sdmUoc3VjY2Vzc01lc3NhZ2UpO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvck1lc3NhZ2UpIHtcblx0XHRcdFx0cmVqZWN0KGVycm9yTWVzc2FnZSk7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBjbGVhbkRCRXZlbnRzQ2F0ZWdvcnkoY2F0ZWdvcnkpIHtcblx0XHQvL2RlY2xhciBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0XHQvL3JlbW92ZSAndXBkYXRlZCcgb2JqZWN0IGlmIG5lZWQgYmVcblx0XHQvL2RiIGNhbGwgc28gcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vY2hlY2sgZm9yIG9iamVjdFxuXHRcdFx0ZGIudGhlcmVXYXNBblVwZGF0ZUZpZWxkKGNhdGVnb3J5LCBnZXRVSURMb2NhbGx5KCkpXG5cdFx0XHQudGhlbihmdW5jdGlvbihhZmZpcm1hdGl2ZVJlc3BvbnNlKSB7XG5cdFx0XHRcdC8vaWYgdGhlcmUgd2FzIGFuIHVwZGF0ZSBmaWVsZCwgZGVsZXRlIGl0XG5cdFx0XHRcdGRiLmRlbGV0ZVVwZGF0ZUZpZWxkKGNhdGVnb3J5LCBnZXRVSURMb2NhbGx5KCkpXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKGFmZmlybWF0aXZlUmVzcG9uc2UpIHsgJGxvZy5pbmZvKGFmZmlybWF0aXZlUmVzcG9uc2UpOyB9IClcblx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yUmVzcG9uc2UpIHsgJGxvZy5pbmZvKGVycm9yUmVzcG9uc2UpOyB9IClcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3JSZXNwb25zZSkge1xuXHRcdFx0XHQkbG9nLmluZm8oZXJyb3JSZXNwb25zZSlcblx0XHRcdH0pXG5cblx0XHR9KTtcblx0XHQvL2lmIGl0IGlzIHRoZXJlLCByZW1vdmUgaXRcblx0fVxuXG5cdGZ1bmN0aW9uIGdldEV2ZW50R3Vlc3RMaXN0KGhvc3RJZCwgZXZlbnRJZCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL2dldCB0aGUgb2JqZWN0XG5cdFx0XHRkYi5nZXRHdWVzdExpc3RGb3JFdmVudChob3N0SWQsIGV2ZW50SWQpXG5cdFx0XHQudGhlbihmdW5jdGlvbihvYnRhaW5lZExpc3QpIHtcblx0XHRcdFx0cmVzb2x2ZShvYnRhaW5lZExpc3QpO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvclJlc3BvbnNlKSB7XG5cdFx0XHRcdHJlamVjdChlcnJvclJlc3BvbnNlKTtcblx0XHRcdH0pXG5cdFx0fSlcblx0fVxuXG5cdGZ1bmN0aW9uIHJlbW92ZUluY29tcGxldGVFdmVudEZyb21EQihldmVudElkKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdGRiLnJlbW92ZUluY29tcGxldGVFdmVudChjdXJyZW50VXNlci5nZXRVSURMb2NhbGx5LCBldmVudElkKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24oc3VjY2Vzc01lc3NhZ2Upe1xuXHRcdFx0XHRyZXNvbHZlKHN1Y2Nlc3NNZXNzYWdlKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3JNZXNzYWdlKSB7XG5cdFx0XHRcdHJlamVjdChlcnJvck1lc3NhZ2UpO1xuXHRcdFx0fSlcblx0XHR9KVxuXHR9XG5cblx0ZnVuY3Rpb24gbG9hZEJpbyh1aWQpIHtcblxuXHRcdC8vbWlnaHQgbmVlZCB0byBnbyBvdXQgdG8gdGhlIGRiIHNvIHJldHVybiBhIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHRcdC8vY2hlY2sgZm9yIGJpbyBsb2NhbGx5IGZpcnN0XG5cdFx0XHRpZihiaW9QcmltYXJpZXNBcmVDb21wbGV0ZUxvY2FsbHkoKSkge1xuXG5cdFx0XHRcdC8vcGFzcyBpdCBiYWNrIGFzIHN1Y2Nlc3Ncblx0XHRcdFx0cmVzb2x2ZShnZXRGdWxsQmlvTG9jYWxseSgpKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vaWYgdGhleSdyZSBub3QgY29tcGxldGUgbG9jYWxseSwgY2hlY2sgdGhlIHNlcnZlclxuXHRcdFx0XHRnZXRSZW1vdGVCaW9Gb3JMb2NhbCh1aWQpXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKGJpb0Zyb21SZW1vdGVEQikge1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vc2F2ZSB0aGVtIGxvY2FsbHkgZmlyc3Rcblx0XHRcdFx0XHRzZXRQcmltYXJpZXNMb2NhbGx5KGJpb0Zyb21SZW1vdGVEQi5lbWFpbCwgYmlvRnJvbVJlbW90ZURCLm5hbWUsIGJpb0Zyb21SZW1vdGVEQi51aWQpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vcmV0dXJuIHRoZSBmaW5kaW5nc1xuXHRcdFx0XHRcdHJlc29sdmUoYmlvRnJvbVJlbW90ZURCKTtcblx0XHRcdFx0fSlcblx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHRcdFx0fSlcblx0XHRcdH1cblxuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBsb2FkQW5FdmVudFByb2dyZXNzaXZlbHkodWlkLCBldmVudElkKSB7XG5cdFx0Ly91cGRhdGUgdWlkIGlmIG5lZWQgYmVcblx0XHRzZXRVSURMb2NhbGx5KHVpZCk7XG5cblx0XHQvL2dvaW5nIG91dCB0aGUgdGhlIGRiIHNvIHJldHVybiBhIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHRcdC8vcmVhY2ggb3V0IHRvIGRiXG5cdFx0XHRnZXRPbmVSZW1vdGVFdmVudEZvckxvY2FsKGV2ZW50SWQpXG5cdFx0XHQudGhlbihmdW5jdGlvbihvYnRhaW5lZFVzZXJFdmVudCkge1xuXHRcdFx0XHQvL3doZW4gdGhlIGRiIHJlc3VsdHMgY29tZSBiYWNrLCByZXR1cm4gaXRcblx0XHRcdFx0cmVzb2x2ZShvYnRhaW5lZFVzZXJFdmVudClcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goKVxuXG5cdFx0XHQvL2ZpcnN0IHJldHVybiB3aGF0ZXZlciBldmVudCBpbmZvIGlzIHN0b3JlZCBsb2NhbGx5XG5cdFx0XHQvL2NoZWNrIGlmIHRoZSBldmVudCBpcyBhdmFpbGFibGUgbG9jYWxseVxuXHRcdFx0aWYoZXZlbnRFeGlzdHNMb2NhbGx5KCdob3N0aW5nJywgZXZlbnRJZCkpIHJlc29sdmUoZ2V0T25lVXNlckV2ZW50TG9jYWxseSgnaG9zdGluZycsIGV2ZW50SWQpKTtcblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gbG9hZEV2ZW50c1Byb2dyZXNzaXZlbHkodWlkKSB7XG5cdFx0dmFyIGV2ZW50VHlwZXMgPSBbJ2F0dGVuZGluZycsICdwZW5kaW5nJywgJ2hvc3RpbmcnLCAnY29tcGxldGVkJ107XG5cdFx0dmFyIGFsbEV2ZW50cyA9IHt9O1xuXG5cdFx0Ly93aWxsIGdvIG91dCB0byB0aGUgZGIgc28gcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Z2V0UmVtb3RlRXZlbnRzRm9yTG9jYWwoKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24ob2J0YWluZWRVc2VyRXZlbnRzKSB7XG5cdFx0XHRcdC8vd2hlbiB0aGUgZGIgcmVzdWx0cyBjb21lIGJhY2ssIHJldHVybiB0aG9zZVxuXHRcdFx0XHRyZXNvbHZlKG9idGFpbmVkVXNlckV2ZW50cyk7XG5cdFx0XHR9KVxuXG5cdFx0XHQvL2J1aWxkIHRoZSBsb2NhbCBtb2RlbFxuXHRcdFx0YWxsRXZlbnRzID0gZ2V0VXNlckV2ZW50c0xvY2FsbHkodHlwZSk7XG5cblx0XHRcdC8vZmlyc3QgcmV0dXJuIHdoYXRldmVyIGV2ZW50IGluZm8gaXMgc3RvcmVkIGxvY2FsbHlcblx0XHRcdHJlc29sdmUoYWxsRXZlbnRzKTtcblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gY3JlYXRlTmV3RXZlbnQoZXZlbnRJRCkge1xuXHRcdC8vZGVjbGFyIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblx0XHR2YXIgbmV3RXZlbnQgPSB7fTtcblx0XHR2YXIgZGF0ZVRpbWUgPSBuZXcgRGF0ZSgpO1xuXHRcdGRhdGVUaW1lLnNldE1pbnV0ZXMoMCwgMCwgMCk7XG5cdFx0dmFyIHRlbXBUaW1lID0gZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKTtcblxuXHRcdC8vZmlyc3QgY3JlYXRlIHRoZSBvYmplY3Rcblx0XHRuZXdFdmVudCA9IHtcblx0XHRcdGlkOiBldmVudElELFxuXHRcdFx0bmFtZTogJycsXG5cdFx0XHR0eXBlOiAnJyxcblx0XHRcdGhvc3Q6IHtcblx0XHRcdFx0bmFtZTogY3VycmVudFVzZXIuYmlvLm5hbWUsXG5cdFx0XHRcdHVpZDogY3VycmVudFVzZXIuYmlvLnVpZCxcblx0XHRcdFx0ZW1haWw6IGN1cnJlbnRVc2VyLmJpby5lbWFpbFxuXHRcdFx0fSxcblx0XHRcdG1lc3NhZ2U6ICcnLFxuXHRcdFx0ZXZlbnRUaW1lczoge1xuXHRcdFx0XHRzdGFydDogdGVtcFRpbWUsXG5cdFx0XHRcdGVuZDogKHRlbXBUaW1lICsgKDYwKjYwKjEwMDApKVxuXHRcdFx0fSxcblx0XHRcdGFkZHJlc3M6IHtcblx0XHRcdFx0c3RyZWV0MDE6ICcnLFxuXHRcdFx0XHRzdHJlZXQwMjogJycsXG5cdFx0XHRcdHN0cmVldDAzOiAnJyxcblx0XHRcdFx0Y2l0eTogJycsXG5cdFx0XHRcdHN0YXRlOiAnJyxcblx0XHRcdFx0emlwOiAwXG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdC8vc2F2ZSBpdCBsb2NhbGx5XG5cdFx0dXBkYXRlVXNlckV2ZW50c0xvY2FsbHkoJ2hvc3RpbmcnLCBuZXdFdmVudCk7XG5cblx0XHQvL3NhdmUgaXQgYXMgdGhlIGFjdGl2ZSBldmVudFxuXHRcdHNldEFjdGl2ZUV2ZW50KG5ld0V2ZW50KTtcblxuXHRcdC8vdGhlbiBjcmVhdGUgaXQgb24gdGhlIHNlcnZlclxuXHRcdC8vd2lsbCBnbyBvdXQgdG8gdGhlIGRiIHNvIHJldHVybiBhIHByb21pc2Vcblx0XHRcblx0XHQvKnJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFxuXHRcdFx0JGxvZy5pbmZvKCdzYXZlZCBsb2NhbGx5LCBub3Qgb24gdGhlIGRiJyk7XG5cdFx0XHQvL21hbmFnZSB0aGUgcHJvbWlzZSByZXNwb25zZXNcblx0XHRcdC8qZGIuY3JlYXRlSG9zdGVkRXZlbnQoZ2V0VUlETG9jYWxseSgpLCBuZXdFdmVudClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKG1lc3NhZ2UpIHtcblx0XHRcdFx0cmVzb2x2ZShtZXNzYWdlKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHRcdH0pXG5cblx0XHR9KTsqL1xuXG5cdH1cblxuXHRmdW5jdGlvbiB1cGRhdGVQZW5kaW5nRXZlbnRzTGlzdEZvckd1ZXN0KGV2ZW50SWQpIHtcblx0XHQvL2RlY2xhciBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHRcdC8vbWFuYWdlIHRoZSBkYiBwcm9taXNlXG5cdFx0XHQvL2RiLmFkZFBlbmRpbmdFdmVudEZvckd1ZXN0KGN1cnJlbnRVc2VyLmdldFVJRExvY2FsbHkoKSwgaG9zdElkLCBldmVudElkLCBjdXJyZW50VXNlci5nZXRVc2VyRXZlbnRzTG9jYWxseSgnJywgZXZlbnRJZCkpXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIHNhdmVOZXdIb3N0aW5nRXZlbnQoY2F0ZWdvcnksIGV2ZW50KSB7XG5cdFx0JGxvZy5pbmZvKCdzYXZpbmcgdGhpcyBldmVudCBsb2NhbGx5Jyk7XG5cdFx0JGxvZy5pbmZvKGV2ZW50KTtcblx0XHR1cGRhdGVVc2VyRXZlbnRzTG9jYWxseShjYXRlZ29yeSwgZXZlbnQpO1xuXHR9XG5cdFxuXHRyZXR1cm4gYWxsVXNlckRhdGE7XG59XG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5mYWN0b3J5KCd2YWxpZGF0aW9uJywgdmFsaWRhdGlvbik7XG5cbnZhbGlkYXRpb24uJGluamVjdCA9IFsnJGxvZyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHZhbGlkYXRpb24oJGxvZykge1xuXHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdHZhciBtaW5pbXVtTmFtZUxlbmd0aCA9IDM7XG5cdHZhciBtaW5pbXVtUGFzc0xlbmd0aCA9IDY7XG5cdHZhciBtYXhpbXVtUGFzc0xlbmd0aCA9IDEwMDtcblxuXHQvL3ZhbGlkYXRpb24gb2JqZWN0c1xuXHR2YXIgcmVxdWlyZWQgPSB7XG5cdFx0bWV0OiBmYWxzZSxcblx0XHRlcnJvck1lc3NhZ2U6ICdUaGlzIGZpZWxkIGlzIHJlcXVpcmVkJyxcblx0XHR0ZXN0OiBmdW5jdGlvbih2YWx1ZSkge1xuXHRcdFx0Ly90aHJvdyB0aGUgdGVzdGVkIGZsYWdcblx0XHRcdHRoaXMudGVzdGVkID0gdHJ1ZTtcblx0XHRcdGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQodmFsdWUpKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKHZhbHVlID09ICcnKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZVxuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHR2YXIgbmFtZU1pbkxlbmd0aCA9IHtcblx0XHRtZXQ6IGZhbHNlLFxuXHRcdGVycm9yTWVzc2FnZTogJ1RvbyBzaG9ydCAoMyBjaGFycyBtaW5pbXVtKScsXG5cdFx0dGVzdDogZnVuY3Rpb24odmFsdWUpIHtcblx0XHRcdC8vdGhyb3cgdGhlIHRlc3RlZCBmbGFnXG5cdFx0XHR0aGlzLnRlc3RlZCA9IHRydWU7XG5cdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdFx0aWYodmFsdWUubGVuZ3RoID49IDMpIHtcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fSBlbHNlIHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHR2YXIgaXNBbkVtYWlsID0ge1xuICAgIFx0bWV0OiBmYWxzZSxcbiAgICBcdGVycm9yTWVzc2FnZTogJ1RoaXMgaXMgbm90IGEgdmFsaWQgZW1haWwnLFxuICAgIFx0dGVzdDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICBcdFx0Ly9kZWZpbmUgcmVnZXhcbiAgICBcdFx0dmFyIEVNQUlMX1JFR0VYUCA9IC9bYS16MC05ISMkJSYnKis9P15fYHt8fX4tXSsoPzpcXC5bYS16MC05ISMkJSYnKis9P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/L2c7XG5cdCAgICBcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChFTUFJTF9SRUdFWFApO1xuXG5cdCAgICBcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHQgICAgXHRcdC8vaWYgZW1haWwgaXMgZGVmaW5lZFxuXHQgICAgXHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2YWx1ZSkpIHtcblx0ICAgIFx0XHRcdC8vaWYgaXQgcGFzc2VzIHJlZ2V4XG5cdCAgICBcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0ICAgIFx0XHR9IGVsc2UgcmV0dXJuIGZhbHNlO1xuXHQgICAgXHR9IGVsc2UgcmV0dXJuIGZhbHNlO1xuICAgIFx0fVxuICAgIH1cblxuICAgIHZhciBwYXNzTWluTGVuZ3RoID0ge1xuICAgIFx0bWV0OiBmYWxzZSxcbiAgICBcdGVycm9yTWVzc2FnZTogJ1Nob3VsZCBiZSBhdCBsZWFzdCA2IGNoYXJhY3RlcnMgbG9uZycsXG4gICAgXHR0ZXN0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIFx0XHQvL3Rocm93IHRoZSB0ZXN0ZWQgZmxhZ1xuXHRcdFx0dGhpcy50ZXN0ZWQgPSB0cnVlO1xuXHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHRcdGlmKHZhbHVlLmxlbmd0aCA+PSA2KSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH0gZWxzZSByZXR1cm4gZmFsc2U7XG5cdFx0XHR9IGVsc2UgcmV0dXJuIGZhbHNlXG4gICAgXHR9XG4gICAgfVxuXHR2YXIgcGFzc01heExlbmd0aCA9IHtcbiAgICBcdG1ldDogZmFsc2UsXG4gICAgXHRlcnJvck1lc3NhZ2U6ICdTaG91bGQgYmUgbm8gbW9yZSB0aGFuIDEwMCBjaGFyYWN0ZXJzJyxcbiAgICBcdHRlc3Q6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgXHRcdC8vdGhyb3cgdGhlIHRlc3RlZCBmbGFnXG5cdFx0XHR0aGlzLnRlc3RlZCA9IHRydWU7XG5cdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdFx0aWYodmFsdWUubGVuZ3RoIDw9IDEwMCkge1xuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9IGVsc2UgcmV0dXJuIGZhbHNlO1xuXHRcdFx0fSBlbHNlIHJldHVybiBmYWxzZTtcbiAgICBcdH1cbiAgICB9XG5cblx0dmFyIGhhc0xvd2VyY2FzZSA9IHtcbiAgICBcdG1ldDogZmFsc2UsXG4gICAgXHRlcnJvck1lc3NhZ2U6ICdTaG91bGQgaGF2ZSBhdCBsZWFzdCBvbmUgbG93ZXJjYXNlIGxldHRlcicsXG4gICAgXHR0ZXN0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIFx0XHQvL2RlZmluZSByZWdleFxuICAgIFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbYS16XVwiKTtcblxuICAgIFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICBcdFx0XHQvL2lmIHBhc3MgaXMgZGVmaW5lZFxuICAgIFx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2YWx1ZSkpIHtcbiAgICBcdFx0XHRcdC8vc3VjY2VzXG4gICAgXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcbiAgICBcdFx0XHR9IGVsc2UgcmV0dXJuIGZhbHNlO1xuICAgIFx0XHR9IGVsc2UgcmV0dXJuIGZhbHNlO1xuXG4gICAgXHR9XG4gICAgfVxuXG5cdHZhciBoYXNVcHBlcmNhc2UgPSB7XG4gICAgXHRtZXQ6IGZhbHNlLFxuICAgIFx0ZXJyb3JNZXNzYWdlOiAnU2hvdWxkIGhhdmUgYXQgbGVhc3Qgb25lIHVwcGVyY2FzZSBsZXR0ZXInLFxuICAgIFx0dGVzdDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICBcdFx0Ly9kZWZpbmUgcmVnZXhcbiAgICBcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW0EtWl1cIik7XG5cbiAgICBcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG4gICAgXHRcdFx0Ly9pZiBwYXNzIGlzIGRlZmluZWRcbiAgICBcdFx0XHRpZihjb25zdHJhaW50LnRlc3QodmFsdWUpKSB7XG4gICAgXHRcdFx0XHQvL3N1Y2Nlc1xuICAgIFx0XHRcdFx0cmV0dXJuIHRydWU7XG4gICAgXHRcdFx0fSBlbHNlIHJldHVybiBmYWxzZTtcbiAgICBcdFx0fSBlbHNlIHJldHVybiBmYWxzZTtcbiAgICBcdH1cbiAgICB9XG5cblx0dmFyIGhhc0FOdW1iZXIgPSB7XG4gICAgXHRtZXQ6IGZhbHNlLFxuICAgIFx0ZXJyb3JNZXNzYWdlOiAnU2hvdWxkIGhhdmUgYXQgbGVhc3Qgb25lIG51bWJlciBsZXR0ZXInLFxuICAgIFx0dGVzdDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICBcdFx0Ly9kZWZpbmUgcmVnZXhcbiAgICBcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiWzAtOV1cIik7XG5cbiAgICBcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG4gICAgXHRcdFx0Ly9pZiBwYXNzIGlzIGRlZmluZWRcbiAgICBcdFx0XHRpZihjb25zdHJhaW50LnRlc3QodmFsdWUpKSB7XG4gICAgXHRcdFx0XHQvL3N1Y2Nlc1xuICAgIFx0XHRcdFx0cmV0dXJuIHRydWU7XG4gICAgXHRcdFx0fSBlbHNlIHJldHVybiBmYWxzZTtcbiAgICBcdFx0fSBlbHNlIHJldHVybiBmYWxzZTtcbiAgICBcdH1cbiAgICB9XG5cblx0dmFyIGhhc0FTeW1ib2wgPSB7XG4gICAgXHRtZXQ6IGZhbHNlLFxuICAgIFx0ZXJyb3JNZXNzYWdlOiAnU2hvdWxkIGhhdmUgYXQgbGVhc3Qgb25lIHN5bWJvbCBsZXR0ZXInLFxuICAgIFx0dGVzdDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICBcdFx0Ly9kZWZpbmUgcmVnZXhcbiAgICBcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW1xcIVxcQFxcI1xcJFxcJVxcXlxcJlxcKl1cIik7XG5cbiAgICBcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG4gICAgXHRcdFx0Ly9pZiBwYXNzIGlzIGRlZmluZWRcbiAgICBcdFx0XHRpZihjb25zdHJhaW50LnRlc3QodmFsdWUpKSB7XG4gICAgXHRcdFx0XHQvL3N1Y2Nlc1xuICAgIFx0XHRcdFx0cmV0dXJuIHRydWU7XG4gICAgXHRcdFx0fSBlbHNlIHJldHVybiBmYWxzZTtcbiAgICBcdFx0fSBlbHNlIHJldHVybiBmYWxzZTtcbiAgICBcdH1cbiAgICB9XG5cblx0dmFyIG5vSWxsZWdhbENoYXJzID0ge1xuICAgIFx0bWV0OiBmYWxzZSxcbiAgICBcdGVycm9yTWVzc2FnZTogJ1Nob3VsZCBiZSBhdCBsZWFzdCA2IGNoYXJhY3RlcnMgbG9uZycsXG4gICAgXHR0ZXN0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbXkEtejAtOVxcIVxcQFxcI1xcJFxcJVxcXlxcJlxcKl1cIik7XG5cbiAgICBcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG4gICAgXHRcdFx0Ly9pZiBwYXNzIGlzIGRlZmluZWRcbiAgICBcdFx0XHRpZihjb25zdHJhaW50LnRlc3QodmFsdWUpKSB7XG4gICAgXHRcdFx0XHQvL3N1Y2Nlc1xuICAgIFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuICAgIFx0XHRcdH0gZWxzZSByZXR1cm4gdHJ1ZTtcbiAgICBcdFx0fSBlbHNlIHJldHVybiB0cnVlO1xuICAgIFx0fVxuICAgIH1cblxuXG5cdHZhciBhbGxWYWxpZGF0aW9ucyA9IHtcblx0XHRyZXF1aXJlZDogcmVxdWlyZWQsXHRcdFx0XHRcdFx0Ly9uZXcgVXNlciB2YWxpZGF0aW9uc1xuXHRcdG1pbk5hbWVMZW5ndGg6IG1pbk5hbWVMZW5ndGgsXG5cdFx0bWluUGFzc0xlbmd0aDogbWluUGFzc0xlbmd0aCxcblx0XHRtYXhQYXNzTGVuZ3RoOiBtYXhQYXNzTGVuZ3RoLFxuXHRcdGF0TGVhc3RPbmVTeW1ib2w6IGF0TGVhc3RPbmVTeW1ib2wsXG5cdFx0YXRMZWFzdE9uZU51bWJlcjogYXRMZWFzdE9uZU51bWJlcixcblx0XHRhdExlYXN0T25lTG93ZXJjYXNlOiBhdExlYXN0T25lTG93ZXJjYXNlLFxuXHRcdGF0TGVhc3RPbmVVcHBlcmNhc2U6IGF0TGVhc3RPbmVVcHBlcmNhc2UsXG5cdFx0aWxsZWdhbENoYXJhY3RlcjogaWxsZWdhbENoYXJhY3Rlcixcblx0XHRlbWFpbDogZW1haWwsXG5cdFx0ZGF0ZU9mQmlydGg6IGRhdGVPZkJpcnRoLFxuXG5cdFx0Z2VuZXJhdGVFdmVudFJlcXVpcm5tZW50czogZ2VuZXJhdGVFdmVudFJlcXVpcm5tZW50cyxcdFx0Ly9ldmVudCByZXF1aXJubWVudHNcblx0XHRnZW5lcmF0ZU5ld1VzZXJSZXF1aXJuZW1udHM6IGdlbmVyYXRlTmV3VXNlclJlcXVpcm5lbW50cywgXG5cdFx0dXBkYXRlRXZlbnRSZXFTdGF0dXM6IHVwZGF0ZUV2ZW50UmVxU3RhdHVzLFxuXHRcdHVwZGF0ZUV2ZW50UmVxQWRkcmVzc2VkOiB1cGRhdGVFdmVudFJlcUFkZHJlc3NlZCxcblx0XHR1cGRhdGVFdmVudFJlcUNsYXNzOiB1cGRhdGVFdmVudFJlcUNsYXNzLFxuXHRcdGdlbmVyYXRlVGVzdGFibGVPYmplY3Q6IGdlbmVyYXRlVGVzdGFibGVPYmplY3Rcblx0fTtcblxuXHRmdW5jdGlvbiByZXF1aXJlZCh2YWx1ZSkge1xuXHRcdGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQodmFsdWUpKSB7XG5cdFx0XHRyZXR1cm4gJ1RoaXMgaXMgYSByZXF1aXJlZCBmaWVsZCc7XG5cdFx0fSBcblx0fVxuXG5cdGZ1bmN0aW9uIG1pbk5hbWVMZW5ndGgodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdGlmKHZhbHVlLmxlbmd0aCA8IG1pbmltdW1OYW1lTGVuZ3RoKSByZXR1cm4gKCdOYW1lIHNob3VsZCBiZSBhdCBsZWFzdCAnICsgbWluaW11bU5hbWVMZW5ndGggKyAnIGNoYXJhY3RlcnMnKTtcblx0XHR9IFxuXHR9XG5cblx0ZnVuY3Rpb24gbWluUGFzc0xlbmd0aCh2YWx1ZSkge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0aWYoISh2YWx1ZS5sZW5ndGggPCBtaW5pbXVtUGFzc0xlbmd0aCkpIHJldHVybiB0cnVlO1xuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRmdW5jdGlvbiBtYXhQYXNzTGVuZ3RoKHZhbHVlKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHRpZighKHZhbHVlLmxlbmd0aCA+IG1heGltdW1QYXNzTGVuZ3RoKSkgcmV0dXJuIHRydWU7XG5cdFx0fSBcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRmdW5jdGlvbiBhdExlYXN0T25lU3ltYm9sKHZhbHVlKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHQvLyBidWlsZCByZWdleFxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW1xcIVxcQFxcI1xcJFxcJVxcXlxcJlxcKl1cIik7XG5cblx0XHRcdC8vY2hlY2sgY29uc3RyYXRpbnRcblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2YWx1ZSkpIHtcblx0XHRcdFx0Ly9zdWNjZXNzOiBhdCBsZWFzdCBvbmUgc3BlY2lhbCBjaGFyYWN0ZXIgZm91bmRcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2ZhaWx1cmU6IGRpZG4ndCBmaW5kIGFueSBzcGNpYWwgY2hhcmFjdGVyc1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0ZnVuY3Rpb24gYXRMZWFzdE9uZU51bWJlcih2YWx1ZSkge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0Ly8gYnVpbGQgcmVnZXhcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIlswLTldXCIsIFwiXCIpO1xuXG5cdFx0XHQvL2NoZWNrIGNvbnN0cmF0aW50XG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3QodmFsdWUpKSB7XG5cdFx0XHRcdC8vc3VjY2VzczogYXQgbGVhc3Qgb25lIHNwZWNpYWwgY2hhcmFjdGVyIGZvdW5kXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9mYWlsdXJlOiBkaWRuJ3QgZmluZCBhbnkgc3BjaWFsIGNoYXJhY3RlcnNcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG4gICAgZnVuY3Rpb24gYXRMZWFzdE9uZUxvd2VyY2FzZSh2YWx1ZSkge1xuICAgIFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHQvLyBidWlsZCByZWdleFxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW2Etel1cIiwgXCJcIik7XG5cblx0XHRcdC8vY2hlY2sgY29uc3RyYXRpbnRcblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2YWx1ZSkpIHtcblx0XHRcdFx0Ly9zdWNjZXNzOiBhdCBsZWFzdCBvbmUgc3BlY2lhbCBjaGFyYWN0ZXIgZm91bmRcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2ZhaWx1cmU6IGRpZG4ndCBmaW5kIGFueSBzcGNpYWwgY2hhcmFjdGVyc1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGF0TGVhc3RPbmVVcHBlcmNhc2UodmFsdWUpIHtcbiAgICBcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0Ly8gYnVpbGQgcmVnZXhcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIltBLVpdXCIsIFwiXCIpO1xuXG5cdFx0XHQvL2NoZWNrIGNvbnN0cmF0aW50XG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3QodmFsdWUpKSB7XG5cdFx0XHRcdC8vc3VjY2VzczogYXQgbGVhc3Qgb25lIHNwZWNpYWwgY2hhcmFjdGVyIGZvdW5kXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9mYWlsdXJlOiBkaWRuJ3QgZmluZCBhbnkgc3BjaWFsIGNoYXJhY3RlcnNcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbGxlZ2FsQ2hhcmFjdGVyKHZhbHVlKSB7XG4gICAgXHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdC8vIGJ1aWxkIHJlZ2V4XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbXkEtejAtOVxcIVxcQFxcI1xcJFxcJVxcXlxcJlxcKl1cIiwgXCJcIik7XG5cblx0XHRcdC8vY2hlY2sgY29uc3RyYXRpbnRcblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2YWx1ZSkpIHtcblx0XHRcdFx0Ly9zdWNjZXNzOiBhdCBsZWFzdCBvbmUgc3BlY2lhbCBjaGFyYWN0ZXIgZm91bmRcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9mYWlsdXJlOiBkaWRuJ3QgZmluZCBhbnkgc3BjaWFsIGNoYXJhY3RlcnNcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiBlbWFpbCh2YWx1ZSkge1xuICAgIFx0Ly9kZWZpbmUgY29uc3RyYWludHNcbiAgICBcdHZhciBFTUFJTF9SRUdFWFAgPSAvW2EtejAtOSEjJCUmJyorPT9eX2B7fH1+LV0rKD86XFwuW2EtejAtOSEjJCUmJyorPT9eX2B7fH1+LV0rKSpAKD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1xcLikrW2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pPy9nO1xuICAgIFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKEVNQUlMX1JFR0VYUCk7XG5cbiAgICBcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSAmJiAhY29uc3RyYWludC50ZXN0KHZhbHVlKSkgcmV0dXJuICdOb3QgYSB2YWxpZCBlbWFpbCc7XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkYXRlT2ZCaXJ0aCh2YWx1ZSkge31cblxuICAgIGZ1bmN0aW9uIGdlbmVyYXRlTmV3VXNlclJlcXVpcm5lbW50cygpIHtcbiAgICBcdC8vZGVjbGFyZSB0aGUgb2JqZWN0XG4gICAgXHR2YXIgZXJyb3JzT2JqZWN0ID0ge1xuXHRcdFx0bmFtZToge1xuXHRcdFx0XHRuYW1lOiB7XG5cdFx0XHRcdFx0c3RhdHVzOiBmYWxzZSxcblx0XHRcdFx0XHRtZXNzYWdlOiAnQSBuYW1lIGlzIHJlcXVpcmVkJ1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR2YWxpZExlbmd0aDoge1xuXHRcdFx0XHRcdHN0YXR1czpmYWxzZSxcblx0XHRcdFx0XHRtZXNzYWdlOiAnTmFtZSBtdXN0IGJlIGF0IGxlYXN0IDMgY2hhcmFjdGVycyBsb25nJ1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0ZW1haWw6IHtcblx0XHRcdFx0ZW1haWw6IHtcblx0XHRcdFx0XHRzdGF0dXM6IGZhbHNlLFxuXHRcdFx0XHRcdG1lc3NhZ2U6ICdBbiBlbWFpbCBpcyByZXF1aXJlZCdcblx0XHRcdFx0fSxcblx0XHRcdFx0dmFsaWRFbWFpbDoge1xuXHRcdFx0XHRcdHN0YXR1czogZmFsc2UsXG5cdFx0XHRcdFx0bWVzc2FnZTogJ1RoaXMgaXMgbm90IGEgdmFsaWQgZW1haWwnXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRwYXNzOiB7XG5cdFx0XHRcdHBhc3M6IHtcblx0XHRcdFx0XHRzdGF0dXM6IGZhbHNlLFxuXHRcdFx0XHRcdG1lc3NhZ2U6ICdBIHBhc3N3b3JkIGlzIHJlcXVpcmVkJ1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR0b29TaG9ydDoge1xuXHRcdFx0XHRcdHN0YXR1czogZmFsc2UsXG5cdFx0XHRcdFx0bWVzc2FnZTogJ1RoZXJlIHNob3VsZCBiZSBhdCBsZWFzdCA2IGNoYXJhY3RlcnMnXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHRvb0xvbmc6IHtcblx0XHRcdFx0XHRzdGF0dXM6IGZhbHNlLFxuXHRcdFx0XHRcdG1lc3NhZ2U6ICdUaGVyZSBzaG91bGQgYmUgbm8gbW9yZSB0aGFuIDEwMCBjaGFyYWN0ZXJzJ1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRub0xvd2VyY2FzZToge1xuXHRcdFx0XHRcdHN0YXR1czogZmFsc2UsXG5cdFx0XHRcdFx0bWVzc2FnZTogJ1RoZXJlIHNob3VsZCBiZSBhdCBsZWFzdCBvbmUgbG93ZXJjYXNlIGxldHRlcidcblx0XHRcdFx0fSxcblx0XHRcdFx0bm9VcHBlcmNhc2U6IHtcblx0XHRcdFx0XHRzdGF0dXM6IGZhbHNlLFxuXHRcdFx0XHRcdG1lc3NhZ2U6ICdUaGVyZSBzaG91bGQgYmUgYXQgbGVhc3Qgb25lIHVwcGVyY2FzZSBsZXR0ZXInXG5cdFx0XHRcdH0sXG5cdFx0XHRcdG5vTnVtYmVyOiB7XG5cdFx0XHRcdFx0c3RhdHVzOiBmYWxzZSxcblx0XHRcdFx0XHRtZXNzYWdlOiAnVGhlcmUgc2hvdWxkIGJlIGF0IGxlYXN0IG9uZSBudW1iZXInXG5cdFx0XHRcdH0sXG5cdFx0XHRcdG5vU3ltYm9sOiB7XG5cdFx0XHRcdFx0c3RhdHVzOiBmYWxzZSxcblx0XHRcdFx0XHRtZXNzYWdlOiAnVGhlcmUgc2hvdWxkIGJlIGF0IGxlYXN0IG9uZSBzeW1ib2wnXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGhhc0ludmFsaWRDaGFyOiB7XG5cdFx0XHRcdFx0c3RhdHVzOiBmYWxzZSxcblx0XHRcdFx0XHRtZXNzYWdlOiAnVGhlcmUgc2hvdWxkblxcJ3QgYmUgYW55IGludmFsaWQgY2hhcmFjdGVycydcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGNoYW5nZVN0YXR1czogZnVuY3Rpb24oaW5wdXQsIHJlcSwgc3RhdHVzKSB7XG5cdFx0XHRcdHRoaXNbaW5wdXRdW3JlcV0uc3RhdHVzID0gc3RhdHVzO1xuXHRcdFx0fSxcblx0XHRcdGdldEVycm9yTWVzc2FnZTogZnVuY3Rpb24oaW5wdXQsIHJlcSkge1xuXHRcdFx0XHRyZXR1cm4gdGhpc1tpbnB1dF1bcmVxXS5tZXNzYWdlO1xuXHRcdFx0fSxcblx0XHRcdGFsbFJlcXNGdWxmaWxsZWQ6IGZ1bmN0aW9uKGlucHV0KSB7XG5cdFx0XHRcdE9iamVjdC5rZXlzKGlucHV0KS5mb3JFYWNoKGZ1bmN0aW9uKHJlcSkge1xuXHRcdFx0XHRcdGlmKCFpbnB1dFtyZXFdLnN0YXR1cykgcmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0sXG5cdFx0XHRhbGxJbnB1dHNQYXNzOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0T2JqZWN0LmtleXModGhpcykuZm9yRWFjaChmdW5jdGlvbihpbnB1dCkge1xuXHRcdFx0XHRcdGlmKCF0aGlzLmFsbFJlcXNGdWxmaWxsZWQoaW5wdXQpKSByZXR1cm4gZmFsc2Vcblx0XHRcdFx0fSk7XG5cdFx0XHR9LFxuXHRcdFx0Z2V0QWxsRXJyb3JzOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIGFsbEVycm9ycyA9IHt9O1xuXHRcdFx0XHRPYmplY3Qua2V5cyh0aGlzKS5mb3JFYWNoKGZ1bmN0aW9uKGlucHV0KSB7XG5cdFx0XHRcdFx0Ly9pZiB0aGUgdmFsdWUgaXMgYW4gb2JqZWN0XG5cdFx0XHRcdFx0aWYoYW5ndWxhci5pc09iamVjdCh0aGlzW2lucHV0XSkpIHtcblxuXHRcdFx0XHRcdFx0T2JqZWN0LmtleXMoaW5wdXQpLmZvckVhY2goZnVuY3Rpb24ocmVxKSB7XG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHRpZih0aGlzW2lucHV0XVtyZXFdLnN0YXR1cykge1xuXG5cdFx0XHRcdFx0XHRcdFx0YWxsRXJyb3JzW2lucHV0XSA9IHt9O1xuXHRcdFx0XHRcdFx0XHRcdGFsbEVycm9yc1tpbnB1dF1bcmVxXSA9IHsgbWVzc2FnZTogdGhpc1tpbnB1dF1bcmVxXS5tZXNzYWdlIH1cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcblx0XHRcdFx0fSk7XG5cdFx0XHRcdHJldHVybiBhbGxFcnJvcnM7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGVycm9yc09iamVjdDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZW5lcmF0ZUV2ZW50UmVxdWlybm1lbnRzKCkge1xuICAgIFx0Ly9idWlsZCB0aGUgb2JqZWN0IGFuZCByZXR1cm4gaXRcbiAgICBcdHZhciBldmVudFZhbGlkYXRpb25zID0ge1xuICAgIFx0XHRldmVudE5hbWU6IHsgXG4gICAgXHRcdFx0Y29tcGxldGVkIDpmYWxzZSwgXG4gICAgXHRcdFx0YWRkcmVzc2VkOmZhbHNlLCBcbiAgICBcdFx0XHRyb3c6IHtcbiAgICBcdFx0XHRcdGNsYXNzOiB7XG4gICAgXHRcdFx0XHRcdCdjb2wteHMtMTInOiB0cnVlLFxuICAgIFx0XHRcdFx0XHQnY29sLXNtLTEyJzogdHJ1ZSxcbiAgICBcdFx0XHRcdFx0J2Zvcm0tZ3JvdXAnOiB0cnVlLFxuICAgIFx0XHRcdFx0XHQnaGFzLXN1Y2Nlc3MnOiBmYWxzZSxcbiAgICBcdFx0XHRcdFx0J2hhcy1lcnJvcic6IGZhbHNlXG4gICAgXHRcdFx0XHR9XG4gICAgXHRcdFx0fSxcbiAgICBcdFx0XHRsYWJlbDoge1xuICAgIFx0XHRcdFx0Y2xhc3M6IHtcbiAgICBcdFx0XHRcdFx0J2NvbnRyb2wtbGFiZWwnOiB0cnVlXG4gICAgXHRcdFx0XHR9XG4gICAgXHRcdFx0fSxcbiAgICBcdFx0XHRpbnB1dDoge1xuICAgIFx0XHRcdFx0Y2xhc3M6IHtcbiAgICBcdFx0XHRcdFx0J2Zvcm0tY29udHJvbCc6IHRydWUsXG4gICAgXHRcdFx0XHRcdCdjb2wteHMtMTInOiB0cnVlLFxuICAgIFx0XHRcdFx0XHQnY29sLXNtLTEyJzp0cnVlLFxuICAgIFx0XHRcdFx0XHQnY29sLW1kLTEyJzogdHJ1ZVxuICAgIFx0XHRcdFx0fVxuICAgIFx0XHRcdH1cbiAgICBcdFx0fSxcblx0XHRcdGV2ZW50SG9zdDogeyBjb21wbGV0ZWQgOmZhbHNlLCBhZGRyZXNzZWQ6ZmFsc2UsIHJvdzogeyBjbGFzczogeydjb2wteHMtMTInOiB0cnVlLCAnY29sLXNtLTEyJzogdHJ1ZSwgJ2Zvcm0tZ3JvdXAnOiB0cnVlLCAnaGFzLXN1Y2Nlc3MnOiBmYWxzZSwgJ2hhcy1lcnJvcic6IGZhbHNlIH0gfSwgbGFiZWw6IHsgY2xhc3M6IHsgJ2NvbnRyb2wtbGFiZWwnOiB0cnVlIH0gfSwgaW5wdXQ6IHsgY2xhc3M6IHsgJ2Zvcm0tY29udHJvbCc6IHRydWUgfSB9IH0sXG5cdFx0XHRldmVudFR5cGU6IHsgY29tcGxldGVkIDpmYWxzZSwgYWRkcmVzc2VkOmZhbHNlLCByb3c6IHsgY2xhc3M6IHsnY29sLXhzLTEyJzogdHJ1ZSwgJ2NvbC1zbS0xMic6IHRydWUsICdmb3JtLWdyb3VwJzogdHJ1ZSwgJ2hhcy1zdWNjZXNzJzogZmFsc2UsICdoYXMtZXJyb3InOiBmYWxzZSB9IH0sIGxhYmVsOiB7IGNsYXNzOiB7ICdjb250cm9sLWxhYmVsJzogdHJ1ZSB9IH0sIGlucHV0OiB7IGNsYXNzOiB7ICdmb3JtLWNvbnRyb2wnOiB0cnVlIH0gfSB9LFxuXHRcdFx0ZXZlbnRTdGFydDogeyBjb21wbGV0ZWQgOmZhbHNlLCBhZGRyZXNzZWQ6ZmFsc2UsIHJvdzogeyBjbGFzczogeydjb2wteHMtMTInOiB0cnVlLCAnY29sLXNtLTEyJzogdHJ1ZSwgJ2Zvcm0tZ3JvdXAnOiB0cnVlLCAnaGFzLXN1Y2Nlc3MnOiBmYWxzZSwgJ2hhcy1lcnJvcic6IGZhbHNlIH0gfSwgbGFiZWw6IHsgY2xhc3M6IHsgJ2NvbnRyb2wtbGFiZWwnOiB0cnVlIH0gfSwgaW5wdXQ6IHsgY2xhc3M6IHsgJ2Zvcm0tY29udHJvbCc6IHRydWUgfSB9IH0sXG5cdFx0XHRldmVudEVuZDogeyBjb21wbGV0ZWQgOmZhbHNlLCBhZGRyZXNzZWQ6ZmFsc2UsIHJvdzogeyBjbGFzczogeydjb2wteHMtMTInOiB0cnVlLCAnY29sLXNtLTEyJzogdHJ1ZSwgJ2Zvcm0tZ3JvdXAnOiB0cnVlLCAnaGFzLXN1Y2Nlc3MnOiBmYWxzZSwgJ2hhcy1lcnJvcic6IGZhbHNlIH0gfSwgbGFiZWw6IHsgY2xhc3M6IHsgJ2NvbnRyb2wtbGFiZWwnOiB0cnVlIH0gfSwgaW5wdXQ6IHsgY2xhc3M6IHsgJ2Zvcm0tY29udHJvbCc6IHRydWUgfSB9IH0sXG5cdFx0XHRldmVudFN0cmVldDAxOiB7IGNvbXBsZXRlZCA6ZmFsc2UsIGFkZHJlc3NlZDpmYWxzZSwgcm93OiB7IGNsYXNzOiB7J2NvbC14cy0xMic6IHRydWUsICdjb2wtc20tMTInOiB0cnVlLCAnZm9ybS1ncm91cCc6IHRydWUsICdoYXMtc3VjY2Vzcyc6IGZhbHNlLCAnaGFzLWVycm9yJzogZmFsc2UgfSB9LCBsYWJlbDogeyBjbGFzczogeyAnY29udHJvbC1sYWJlbCc6IHRydWUgfSB9LCBpbnB1dDogeyBjbGFzczogeyAnZm9ybS1jb250cm9sJzogdHJ1ZSB9IH0gfSxcblx0XHRcdGV2ZW50Q2l0eTogeyBjb21wbGV0ZWQgOmZhbHNlLCBhZGRyZXNzZWQ6ZmFsc2UsIHJvdzogeyBjbGFzczogeydjb2wteHMtMTInOiB0cnVlLCAnY29sLXNtLTEyJzogdHJ1ZSwgJ2Zvcm0tZ3JvdXAnOiB0cnVlLCAnaGFzLXN1Y2Nlc3MnOiBmYWxzZSwgJ2hhcy1lcnJvcic6IGZhbHNlIH0gfSwgbGFiZWw6IHsgY2xhc3M6IHsgJ2NvbnRyb2wtbGFiZWwnOiB0cnVlIH0gfSwgaW5wdXQ6IHsgY2xhc3M6IHsgJ2Zvcm0tY29udHJvbCc6IHRydWUgfSB9IH0sXG5cdFx0XHRldmVudFN0YXRlOiB7IGNvbXBsZXRlZCA6ZmFsc2UsIGFkZHJlc3NlZDpmYWxzZSwgcm93OiB7IGNsYXNzOiB7J2NvbC14cy0xMic6IHRydWUsICdjb2wtc20tMTInOiB0cnVlLCAnZm9ybS1ncm91cCc6IHRydWUsICdoYXMtc3VjY2Vzcyc6IGZhbHNlLCAnaGFzLWVycm9yJzogZmFsc2UgfSB9LCBsYWJlbDogeyBjbGFzczogeyAnY29udHJvbC1sYWJlbCc6IHRydWUgfSB9LCBpbnB1dDogeyBjbGFzczogeyAnZm9ybS1jb250cm9sJzogdHJ1ZSB9IH0gfSxcblx0XHRcdGV2ZW50WmlwOiB7IGNvbXBsZXRlZCA6ZmFsc2UsIGFkZHJlc3NlZDpmYWxzZSwgcm93OiB7IGNsYXNzOiB7J2NvbC14cy0xMic6IHRydWUsICdjb2wtc20tMTInOiB0cnVlLCAnZm9ybS1ncm91cCc6IHRydWUsICdoYXMtc3VjY2Vzcyc6IGZhbHNlLCAnaGFzLWVycm9yJzogZmFsc2UgfSB9LCBsYWJlbDogeyBjbGFzczogeyAnY29udHJvbC1sYWJlbCc6IHRydWUgfSB9LCBpbnB1dDogeyBjbGFzczogeyAnZm9ybS1jb250cm9sJzogdHJ1ZSB9IH0gfSxcblx0XHRcdGV2ZW50R3Vlc3Q6IHsgY29tcGxldGVkIDpmYWxzZSwgYWRkcmVzc2VkOmZhbHNlLCByb3c6IHsgY2xhc3M6IHsnY29sLXhzLTEyJzogdHJ1ZSwgJ2NvbC1zbS0xMic6IHRydWUsICdmb3JtLWdyb3VwJzogdHJ1ZSwgJ2hhcy1zdWNjZXNzJzogZmFsc2UsICdoYXMtZXJyb3InOiBmYWxzZSB9IH0sIGxhYmVsOiB7IGNsYXNzOiB7ICdjb250cm9sLWxhYmVsJzogdHJ1ZSB9IH0sIGlucHV0OiB7IGNsYXNzOiB7ICdmb3JtLWNvbnRyb2wnOiB0cnVlIH0gfSB9XG4gICAgXHR9XG5cbiAgICBcdHJldHVybiBldmVudFZhbGlkYXRpb25zO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHVwZGF0ZUNsYXNzZXMoKSB7XG4gICAgXHQvL2NoZWNrIHRoZSB2YWxpZGl0eSBzdGF0ZVxuICAgIFx0aWYodGhpcy5wYXNzZXNBbGxSZXFzKSB7XG4gICAgXHRcdHRoaXMuY2xhc3Mucm93WydoYXMtc3VjY2VzcyddID0gdHJ1ZTtcbiAgICBcdFx0dGhpcy5jbGFzcy5yb3dbJ2hhcy1lcnJvciddID0gZmFsc2U7XG4gICAgXHRcdHRoaXMuc3R5bGVbJ2JhY2tncm91bmQtY29sb3InXSA9ICcjNzhGQTg5JztcbiAgICBcdFx0dGhpcy5zdHlsZVsnY29sb3InXSA9ICdibGFjayc7XG4gICAgXHR9IGVsc2Uge1xuICAgIFx0XHR0aGlzLmNsYXNzLnJvd1snaGFzLXN1Y2Nlc3MnXSA9IGZhbHNlO1xuICAgIFx0XHR0aGlzLmNsYXNzLnJvd1snaGFzLWVycm9yJ10gPSB0cnVlO1xuICAgIFx0XHR0aGlzLnN0eWxlWydiYWNrZ3JvdW5kLWNvbG9yJ10gPSAnI0ZBNzg3RSc7XG4gICAgXHRcdHRoaXMuc3R5bGVbJ2NvbG9yJ10gPSAnd2hpdGUnO1xuICAgIFx0fVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHVwZGF0ZVJlcVN0eWxlcygpIHtcbiAgICBcdC8vbG9jYWwgdmFyaWFibGVzXG4gICAgXHR2YXIgcmVxdWlybm1lbnRzID0gdGhpcy5yZXFzO1xuICAgIFx0dmFyIHJlcUJveCA9IHRoaXMucmVxQm94O1xuICAgIFx0Ly9pdGVyYXRlIHRocm91Z2ggZWFjaCByZXFcbiAgICBcdE9iamVjdC5rZXlzKHJlcXVpcm5tZW50cykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcblxuICAgIFx0XHRpZihyZXF1aXJubWVudHNba2V5XS5tZXQpIHtcbiAgICBcdFx0XHRyZXFCb3hba2V5XS5zdHlsZS5jb2xvciA9ICdncmVlbic7XG4gICAgXHRcdH0gZWxzZSB7XG4gICAgXHRcdFx0cmVxQm94W2tleV0uc3R5bGUuY29sb3IgPSAncmVkJztcbiAgICBcdFx0fVxuICAgIFx0fSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRFcnJvck1lc3NhZ2UoKSB7XG4gICAgXHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG4gICAgXHR2YXIgcmVxdWlybm1lbnRzID0gdGhpcy5yZXFzO1xuICAgIFx0dmFyIG9iamVjdEVycm9ycyA9IFtdO1xuXG4gICAgXHQvL2NoZWNrIGZvciBmYWlsZWQgdGVzdHNcbiAgICBcdE9iamVjdC5rZXlzKHJlcXVpcm5tZW50cykuZm9yRWFjaChmdW5jdGlvbih0ZXN0KSB7XG4gICAgXHRcdC8vaWYgdGhlIHRlc3QgaXNuJ3QgbWV0IGFkZCB0aGUgZXJyb3IgbWVzc2FnZSB0byB0aGUgYXJyYXkgb2YgbWVzc2FnZXNcbiAgICBcdFx0aWYoIXJlcXVpcm5tZW50c1t0ZXN0XS5tZXQpIG9iamVjdEVycm9ycy5wdXNoKHJlcXVpcm5tZW50c1t0ZXN0XS5lcnJvck1lc3NhZ2UpO1xuICAgIFx0fSk7XG4gICAgXHQvL2Fzc2VtYmxlIG1lc3NhZ2VcbiAgICBcdHRoaXMuZXJyb3JNZXNzYWdlID0gb2JqZWN0RXJyb3JzLmpvaW4oJywgJyk7XG4gICAgXHRcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjaGVja0ZvclZhbHVlKCkge1xuICAgIFx0aWYoYW5ndWxhci5pc0RlZmluZWQodGhpcy52YWx1ZSkgJiYgdGhpcy52YWx1ZSAhPSAnJykgdGhpcy5oYXNWYWx1ZSA9IHRydWU7XG4gICAgXHRlbHNlIHRoaXMuaGFzVmFsdWUgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjaGVja0ZvckVycm9yTWVzc2FnZSgpIHtcblx0XHQvL29ubHkgdW5sb2NrIGVycm9yIG1lc3NhZ2UgaWYgdGVzdHMgaGF2ZSBiZWVuIHJ1biBhdCBsZWFzdCBvbmNlXG5cdFx0aWYodGhpcy5hbGxSZXFzVGVzdGVkKSB7XG5cdFx0XHQvL2NoZWNrXG5cdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh0aGlzLmVycm9yTWVzc2FnZSkgJiYgdGhpcy5lcnJvck1lc3NhZ2UgIT0gJycpIHRoaXMuaGFzQW5FcnJvck1lc3NhZ2UgPSB0cnVlO1xuXHRcdFx0ZWxzZSB0aGlzLmhhc0FuRXJyb3JNZXNzYWdlID0gZmFsc2U7XG5cdFx0fSBcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjaGVja0FsbFJlcXVpcm5tZW50cygpIHtcbiAgICBcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgcmVxdWlybm1lbnRzID0gdGhpcy5yZXFzO1xuXHRcdHZhciB2YWx1ZSA9IHRoaXMudmFsdWU7XG4gICAgXHR2YXIgYWxsVGVzdHNQYXNzID0gdHJ1ZTtcbiAgICBcdFxuXHRcdC8vcnVuIHRocm91Z2ggcmVxdWlybm1lbnRzXG5cdFx0T2JqZWN0LmtleXMocmVxdWlybm1lbnRzKS5mb3JFYWNoKGZ1bmN0aW9uKHRlc3QpIHtcblx0XHRcdFxuXHRcdFx0Ly9wYXNzIHRoZSB2YWx1ZSBhbmQgdGVzdCB0aGUgY29uc3RyYWludFxuXHRcdFx0aWYocmVxdWlybm1lbnRzW3Rlc3RdLnRlc3QodmFsdWUpKSB7XG5cdFx0XHRcdC8vaWYgaXQgcGFzc2VzIHRoZSB0ZXN0IHVwZGF0ZSB0aGUgc3RhdHVzXG5cdFx0XHRcdHJlcXVpcm5tZW50c1t0ZXN0XS5tZXQgPSB0cnVlOyBcblx0XHRcdFx0Ly9nZXQgdGhlIGVycm9yIG1lc3NhZ2Vcblx0XHRcdFx0Ly9hbGxUZXN0c1Bhc3MgPSB0cnVlXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXF1aXJubWVudHNbdGVzdF0ubWV0ID0gZmFsc2U7XG5cdFx0XHRcdGFsbFRlc3RzUGFzcyA9IGZhbHNlOyBcblx0XHRcdH1cblx0XHR9KVxuXHRcdC8vdXBkYXRlIHRoZSBmbGFnXG5cdFx0dGhpcy5wYXNzZXNBbGxSZXFzID0gYWxsVGVzdHNQYXNzO1xuXG5cdFx0aWYoIWFsbFRlc3RzUGFzcykge1xuXHRcdFx0Ly9idWlsZCB0aGUgZXJyb3IgbWVzc2FnZVxuXHRcdFx0dGhpcy5idWlsZEVycm9yTWVzc2FnZSgpO1xuXHRcdFx0Ly90aHJvdyBpdCdzIGZsYWdcblx0XHRcdHRoaXMuaGFzQW5FcnJvck1lc3NhZ2UgPSB0cnVlO1xuXG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuaGFzQW5FcnJvck1lc3NhZ2UgPSBmYWxzZTtcblx0XHR9XG5cdFx0Ly91cGRhdGUgZWxlbWVudCBjbGFzc2VzXG5cdFx0dGhpcy51cGRhdGVDbGFzc2VzKCk7XG5cdFx0Ly91cGRhdGUgc3R5bGVzIGlmIG5lZWQgYmVcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh0aGlzLnVwZGF0ZVJlcVN0eWxlcykpIHRoaXMudXBkYXRlUmVxU3R5bGVzKCk7XG5cdFx0Ly90aHJvdyBhbGxSZXFzVGVzdGVkIGZsYWdcblx0XHR0aGlzLmFsbFJlcXNUZXN0ZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBvc3RGYWlsUmVxc1Rlc3QoKSB7XG4gICAgXHQvL2lmIGEgY29tcGxldGUgYXR0ZW1wdCBoYXMgb2NjdXJlZCB0aGVuIGNoZWNrIG9uIGtleXN0cm9rZVxuICAgIFx0aWYodGhpcy5hbGxSZXFzVGVzdGVkKSB7XG4gICAgXHRcdHRoaXMuY2hlY2tBbGxSZXF1aXJubWVudHMoKTtcbiAgICBcdH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvcGVuUmVxQm94KCkge1xuICAgIFx0dGhpcy5zaG93UmVxc0JveCA9IHRydWU7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xvc2VSZXFCb3goKSB7XG4gICAgXHR0aGlzLnNob3dSZXFzQm94ID0gZmFsc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2VuZXJhdGVUZXN0YWJsZU9iamVjdCh0eXBlKSB7XG4gICAgXHQvL2J1aWxkIG9iamVjdHNcbiAgICBcdHZhciB0ZXN0YWJsZU9iamVjdHMgPSB7XG4gICAgXHRcdG5hbWU6IHtcbiAgICBcdFx0XHR2YWx1ZTogJycsXG4gICAgXHRcdFx0cmVxczoge1xuICAgIFx0XHRcdFx0aGFzT25lOiByZXF1aXJlZCxcbiAgICBcdFx0XHRcdGxvbmdFbm91Z2g6IG5hbWVNaW5MZW5ndGhcbiAgICBcdFx0XHR9LFxuICAgIFx0XHRcdGVycm9yTWVzc2FnZTogJycsXG4gICAgXHRcdFx0aGFzVmFsdWU6IGZhbHNlLFxuICAgIFx0XHRcdHBhc3Nlc0FsbFJlcXM6IGZhbHNlLFxuICAgIFx0XHRcdGFsbFJlcXNUZXN0ZWQ6IGZhbHNlLFxuICAgIFx0XHRcdGhhc0FuRXJyb3JNZXNzYWdlOiBmYWxzZSxcbiAgICBcdFx0XHRidWlsZEVycm9yTWVzc2FnZTogYnVpbGRFcnJvck1lc3NhZ2UsXG4gICAgXHRcdFx0Y2hlY2tGb3JWYWx1ZTogY2hlY2tGb3JWYWx1ZSxcbiAgICBcdFx0XHRjaGVja0ZvckVycm9yTWVzc2FnZTogY2hlY2tGb3JFcnJvck1lc3NhZ2UsXG4gICAgXHRcdFx0Y2hlY2tBbGxSZXF1aXJubWVudHM6IGNoZWNrQWxsUmVxdWlybm1lbnRzLFxuICAgIFx0XHRcdHBvc3RGYWlsUmVxc1Rlc3Q6IHBvc3RGYWlsUmVxc1Rlc3QsXG4gICAgXHRcdFx0dXBkYXRlQ2xhc3NlczogdXBkYXRlQ2xhc3NlcyxcbiAgICBcdFx0XHRjbGFzczoge1xuICAgIFx0XHRcdFx0cm93OiB7XG4gICAgXHRcdFx0XHRcdCdjb2wteHMtMTInOiB0cnVlLFxuICAgIFx0XHRcdFx0XHQnY29sLXNtLTEyJzogdHJ1ZSxcbiAgICBcdFx0XHRcdFx0J2Zvcm0tZ3JvdXAnOiB0cnVlLFxuICAgIFx0XHRcdFx0XHQnaGFzLXN1Y2Nlc3MnOiBmYWxzZSxcbiAgICBcdFx0XHRcdFx0J2hhcy1lcnJvcic6IGZhbHNlXG4gICAgXHRcdFx0XHR9LFxuICAgIFx0XHRcdFx0bGFiZWw6IHtcbiAgICBcdFx0XHRcdFx0J2NvbnRyb2wtbGFiZWwnOiB0cnVlXG4gICAgXHRcdFx0XHR9LFxuICAgIFx0XHRcdFx0aW5wdXQ6IHtcbiAgICBcdFx0XHRcdFx0J2NvbC14cy0xMic6IHRydWUsXG5cdCAgICBcdFx0XHRcdCdjb2wtc20tMTInOiB0cnVlLFxuXHQgICAgXHRcdFx0XHQnY29sLW1kLTEyJzogdHJ1ZSxcblx0ICAgIFx0XHRcdFx0J2Zvcm0tY29udHJvbCc6IHRydWVcbiAgICBcdFx0XHRcdH1cbiAgICBcdFx0XHR9LFxuICAgIFx0XHRcdHN0eWxlOiB7XG4gICAgXHRcdFx0XHQnY29sb3InOiAnYmxhY2snXG4gICAgXHRcdFx0fVxuICAgIFx0XHR9LFxuICAgIFx0XHRlbWFpbDoge1xuICAgIFx0XHRcdHZhbHVlOiAnJyxcbiAgICBcdFx0XHRyZXFzOiB7XG4gICAgXHRcdFx0XHRoYXNPbmU6IHJlcXVpcmVkLFxuICAgIFx0XHRcdFx0aXNBbkVtYWlsOiBpc0FuRW1haWxcbiAgICBcdFx0XHR9LFxuICAgIFx0XHRcdGVycm9yTWVzc2FnZTogJycsXG4gICAgXHRcdFx0aGFzVmFsdWU6IGZhbHNlLFxuICAgIFx0XHRcdHBhc3Nlc0FsbFJlcXM6IGZhbHNlLFxuICAgIFx0XHRcdGFsbFJlcXNUZXN0ZWQ6IGZhbHNlLFxuICAgIFx0XHRcdGhhc0FuRXJyb3JNZXNzYWdlOiBmYWxzZSxcbiAgICBcdFx0XHRidWlsZEVycm9yTWVzc2FnZTogYnVpbGRFcnJvck1lc3NhZ2UsXG4gICAgXHRcdFx0Y2hlY2tGb3JWYWx1ZTogY2hlY2tGb3JWYWx1ZSxcbiAgICBcdFx0XHRjaGVja0ZvckVycm9yTWVzc2FnZTogY2hlY2tGb3JFcnJvck1lc3NhZ2UsXG4gICAgXHRcdFx0Y2hlY2tBbGxSZXF1aXJubWVudHM6IGNoZWNrQWxsUmVxdWlybm1lbnRzLFxuICAgIFx0XHRcdHBvc3RGYWlsUmVxc1Rlc3Q6IHBvc3RGYWlsUmVxc1Rlc3QsXG4gICAgXHRcdFx0dXBkYXRlQ2xhc3NlczogdXBkYXRlQ2xhc3NlcyxcbiAgICBcdFx0XHRjbGFzczoge1xuICAgIFx0XHRcdFx0cm93OiB7XG4gICAgXHRcdFx0XHRcdCdjb2wteHMtMTInOiB0cnVlLFxuICAgIFx0XHRcdFx0XHQnY29sLXNtLTEyJzogdHJ1ZSxcbiAgICBcdFx0XHRcdFx0J2Zvcm0tZ3JvdXAnOiB0cnVlLFxuICAgIFx0XHRcdFx0XHQnaGFzLXN1Y2Nlc3MnOiBmYWxzZSxcbiAgICBcdFx0XHRcdFx0J2hhcy1lcnJvcic6IGZhbHNlXG4gICAgXHRcdFx0XHR9LFxuICAgIFx0XHRcdFx0bGFiZWw6IHtcbiAgICBcdFx0XHRcdFx0J2NvbnRyb2wtbGFiZWwnOiB0cnVlXG4gICAgXHRcdFx0XHR9LFxuICAgIFx0XHRcdFx0aW5wdXQ6IHtcbiAgICBcdFx0XHRcdFx0J2NvbC14cy0xMic6IHRydWUsXG5cdCAgICBcdFx0XHRcdCdjb2wtc20tMTInOiB0cnVlLFxuXHQgICAgXHRcdFx0XHQnY29sLW1kLTEyJzogdHJ1ZSxcblx0ICAgIFx0XHRcdFx0J2Zvcm0tY29udHJvbCc6IHRydWVcbiAgICBcdFx0XHRcdH1cbiAgICBcdFx0XHR9LFxuICAgIFx0XHRcdHN0eWxlOiB7XG4gICAgXHRcdFx0XHQnY29sb3InOiAnYmxhY2snXG4gICAgXHRcdFx0fVxuICAgIFx0XHR9LFxuICAgIFx0XHRwYXNzOiB7XG4gICAgXHRcdFx0dmFsdWU6ICcnLFxuICAgIFx0XHRcdHJlcXM6IHtcbiAgICBcdFx0XHRcdGhhc09uZTogcmVxdWlyZWQsXG4gICAgXHRcdFx0XHRsb25nRW5vdWdoOiBwYXNzTWluTGVuZ3RoLFxuICAgIFx0XHRcdFx0c2hvcnRFbm91Z2g6IHBhc3NNYXhMZW5ndGgsXG4gICAgXHRcdFx0XHRoYXNMb3dlcmNhc2U6IGhhc0xvd2VyY2FzZSxcbiAgICBcdFx0XHRcdGhhc1VwcGVyY2FzZTogaGFzVXBwZXJjYXNlLFxuICAgIFx0XHRcdFx0aGFzQU51bWJlcjogaGFzQU51bWJlcixcbiAgICBcdFx0XHRcdGhhc0FTeW1ib2w6IGhhc0FTeW1ib2wsXG4gICAgXHRcdFx0XHRub0lsbGVnYWxDaGFyczogbm9JbGxlZ2FsQ2hhcnNcbiAgICBcdFx0XHR9LFxuICAgIFx0XHRcdGVycm9yTWVzc2FnZTogJycsXG4gICAgXHRcdFx0aGFzVmFsdWU6IGZhbHNlLFxuICAgIFx0XHRcdHBhc3Nlc0FsbFJlcXM6IGZhbHNlLFxuICAgIFx0XHRcdGFsbFJlcXNUZXN0ZWQ6IGZhbHNlLFxuICAgIFx0XHRcdGhhc0FuRXJyb3JNZXNzYWdlOiBmYWxzZSxcbiAgICBcdFx0XHRzaG93UmVxc0JveDogZmFsc2UsXG4gICAgXHRcdFx0YnVpbGRFcnJvck1lc3NhZ2U6IGJ1aWxkRXJyb3JNZXNzYWdlLFxuICAgIFx0XHRcdGNoZWNrRm9yVmFsdWU6IGNoZWNrRm9yVmFsdWUsXG4gICAgXHRcdFx0Y2hlY2tGb3JFcnJvck1lc3NhZ2U6IGNoZWNrRm9yRXJyb3JNZXNzYWdlLFxuICAgIFx0XHRcdGNoZWNrQWxsUmVxdWlybm1lbnRzOiBjaGVja0FsbFJlcXVpcm5tZW50cyxcbiAgICBcdFx0XHRwb3N0RmFpbFJlcXNUZXN0OiBwb3N0RmFpbFJlcXNUZXN0LFxuICAgIFx0XHRcdHVwZGF0ZUNsYXNzZXM6IHVwZGF0ZUNsYXNzZXMsXG4gICAgXHRcdFx0dXBkYXRlUmVxU3R5bGVzOiB1cGRhdGVSZXFTdHlsZXMsXG4gICAgXHRcdFx0b3BlblJlcUJveDogb3BlblJlcUJveCxcbiAgICBcdFx0XHRjbG9zZVJlcUJveDogY2xvc2VSZXFCb3gsXG4gICAgXHRcdFx0Y2xhc3M6IHtcbiAgICBcdFx0XHRcdHJvdzoge1xuICAgIFx0XHRcdFx0XHQnY29sLXhzLTEyJzogdHJ1ZSxcbiAgICBcdFx0XHRcdFx0J2NvbC1zbS0xMic6IHRydWUsXG4gICAgXHRcdFx0XHRcdCdmb3JtLWdyb3VwJzogdHJ1ZSxcbiAgICBcdFx0XHRcdFx0J2hhcy1zdWNjZXNzJzogZmFsc2UsXG4gICAgXHRcdFx0XHRcdCdoYXMtZXJyb3InOiBmYWxzZVxuICAgIFx0XHRcdFx0fSxcbiAgICBcdFx0XHRcdGxhYmVsOiB7XG4gICAgXHRcdFx0XHRcdCdjb250cm9sLWxhYmVsJzogdHJ1ZVxuICAgIFx0XHRcdFx0fSxcbiAgICBcdFx0XHRcdGlucHV0OiB7XG4gICAgXHRcdFx0XHRcdCdjb2wteHMtMTInOiB0cnVlLFxuXHQgICAgXHRcdFx0XHQnY29sLXNtLTEyJzogdHJ1ZSxcblx0ICAgIFx0XHRcdFx0J2NvbC1tZC0xMic6IHRydWUsXG5cdCAgICBcdFx0XHRcdCdmb3JtLWNvbnRyb2wnOiB0cnVlXG4gICAgXHRcdFx0XHR9XG4gICAgXHRcdFx0fSxcbiAgICBcdFx0XHRzdHlsZToge1xuICAgIFx0XHRcdFx0J2NvbG9yJzogJ2JsYWNrJ1xuICAgIFx0XHRcdH0sXG4gICAgXHRcdFx0cmVxQm94OiB7XG4gICAgXHRcdFx0XHRoYXNPbmU6IHsgcmVxOiAnTmVlZCB0byBzZXQgYSBwYXNzd29yZCcsICdzdHlsZSc6e2NvbG9yOidyZWQnfX0sXG4gICAgXHRcdFx0XHRsb25nRW5vdWdoOiB7IHJlcTogJ0lzIGF0IGxlYXN0IDYgY2hhcmFjdGVycyBsb25nJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9fSxcbiAgICBcdFx0XHRcdHNob3J0RW5vdWdoOiB7IHJlcTogJ0lzIG5vIGxvbmdlciB0aGFuIDEwMCBjaGFyYWN0ZXJzJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9fSxcbiAgICBcdFx0XHRcdGhhc0xvd2VyY2FzZTogeyByZXE6ICdDb250YWlucyBhdCBsZWFzdCBvbmUgbG93ZXJjYXNlIGxldHRlcicsICdzdHlsZSc6e2NvbG9yOidyZWQnfX0sXG4gICAgXHRcdFx0XHRoYXNVcHBlcmNhc2U6IHsgcmVxOiAnQ29udGFpbnMgYXQgbGVhc3Qgb25lIHVwcGVyY2FzZSBsZXR0ZXInLCAnc3R5bGUnOntjb2xvcjoncmVkJ319LFxuICAgIFx0XHRcdFx0aGFzQU51bWJlcjogeyByZXE6ICdDb250YWlucyBhdCBsZWFzdCBvbmUgbnVtYmVyJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9fSxcbiAgICBcdFx0XHRcdGhhc0FTeW1ib2w6IHsgcmVxOiAnQ29udGFpbnMgYXQgbGVhc3Qgb25lIHJlcXVpcmVkIHN5bWJvbCAoXFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqKScsICdzdHlsZSc6e2NvbG9yOidyZWQnfX0sXG4gICAgXHRcdFx0XHRub0lsbGVnYWxDaGFyczogeyByZXE6ICdEb2VzblxcJ3QgaGF2ZSBhbnkgaWxsZWdhbCBjaGFyYWN0ZXJzJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9fSxcbiAgICBcdFx0XHR9XG4gICAgXHRcdH1cbiAgICBcdH1cblxuICAgIFx0cmV0dXJuIHRlc3RhYmxlT2JqZWN0c1t0eXBlXTtcblxuICAgIH1cblxuXHRmdW5jdGlvbiB1cGRhdGVFdmVudFJlcVN0YXR1cygpIHt9XG5cdGZ1bmN0aW9uIHVwZGF0ZUV2ZW50UmVxQWRkcmVzc2VkKCkge30gXG5cdGZ1bmN0aW9uIHVwZGF0ZUV2ZW50UmVxQ2xhc3MoKSB7fVxuXG5cdHJldHVybiBhbGxWYWxpZGF0aW9ucztcbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbmZpZyhjb25maWcpO1xuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBjb25maWcoJHJvdXRlUHJvdmlkZXIpIHsgICBcbiAgICAkcm91dGVQcm92aWRlclxuICAgIC53aGVuKCcvJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2xhbmRpbmdQYWdlLmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdMYW5kaW5nUGFnZUNvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICB9KVxuICAgIC53aGVuKCcvc2lnbnVwJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL25ld1VzZXJTaWdudXAuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ05ld1VzZXJTaWduVXBDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgfSlcbiAgICAud2hlbignL2xvZ2luJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3JlZ2lzdGVyZWRVc2VyTG9naW4uaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1JlZ1VzZXJMb2dpbkNvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICB9KVxuICAgIC53aGVuKCcvdXNlckluZm9ybWF0aW9uLzp1aWQ/Jywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3VzZXJJbmZvcm1hdGlvbi5odG0nLFxuICAgICAgICBjb250cm9sbGVyOiAnVXNlckluZm9ybWF0aW9uQ29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgcmVzb2x2ZTogeyAvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgICAgIHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2U6IHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2VcbiAgICAgICAgfVxuICAgIH0pXG4gICAgLndoZW4oJy91c2VyRXZlbnRzLzp1aWQ/Jywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3VzZXJFdmVudHMuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1VzZXJFdmVudHNDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICByZXNvbHZlOiB7IC8qIEBuZ0luamVjdCAqL1xuICAgICAgICAgICAgdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZTogdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZVxuICAgICAgICB9XG4gICAgfSlcbiAgICAud2hlbignL2V2ZW50L2hvc3QvOmV2ZW50SWQvOnVpZC86c2VjdGlvbicsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9ob3N0RXZlbnQuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ0hvc3RFdmVudENvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgIHJlc29sdmU6IHsgLyogQG5nSW5qZWN0ICovXG4gICAgICAgICAgICB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlOiB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlLFxuICAgICAgICB9XG4gICAgfSlcbiAgICAud2hlbignL2V2ZW50L2d1ZXN0LzpldmVudElkLzp1aWQvOmhvc3RJZCcsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9ndWVzdEV2ZW50Lmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdHdWVzdEV2ZW50Q29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgcmVzb2x2ZTogeyAvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgICAgIHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2U6IHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2UsXG4gICAgICAgIH1cbiAgICB9KVxuICAgIC53aGVuKCcvZXZlbnQvOmV2ZW50SWQ/Lzpob3N0SWQ/Lzp1aWQ/LzpzZWN0aW9uPycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9hbkV2ZW50Lmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdBbkV2ZW50Q29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgcmVzb2x2ZTogeyAvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgICAgIHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2U6IHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2UsXG4gICAgICAgICAgICBldmVudFZpZXdDaGFuZ2VyOiBldmVudFZpZXdDaGFuZ2VyXG4gICAgICAgIH1cbiAgICB9KVxuICAgIC5vdGhlcndpc2Uoe1xuICAgICAgICByZWRpcmVjdFRvOiAnLydcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZShhdXRoU2VydmljZSkge1xuICAgIGF1dGhTZXJ2aWNlLmlzTG9nZ2VkSW4oKTtcbn07XG5cbmZ1bmN0aW9uIGV2ZW50Vmlld0NoYW5nZXIodHJhZmZpY1ZhbGV0LCAkcm91dGUpIHtcbiAgICB0cmFmZmljVmFsZXQuZXZlbnRSb3V0ZSgkcm91dGUuY3VycmVudC5wYXJhbXMuZXZlbnRJZCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvdXRlLmN1cnJlbnQucGFyYW1zLmhvc3RJZCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvdXRlLmN1cnJlbnQucGFyYW1zLnVpZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm91dGUuY3VycmVudC5wYXJhbXMuc2VjdGlvbik7XG59O1xuLyogQWRkQUd1ZXN0LmRpcmVjdGl2ZS5qcyAqL1xuXG4vKipcbiogQGRlc2MgZGlzcGxheXMgYSBsaXN0IG9mIGFsbCBndWVzdHMgaW52aXRlZCB0byBhbiBldmVudCB0aGlzIHVzZXIgaXMgaG9zdGluZy5cbiogQGV4YW1wbGUgPGFkZC1hLWd1ZXN0PjwvYWRkLWEtZ3Vlc3Q+XG4qL1xuXG5hbmd1bGFyXG5cdC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcblx0LmRpcmVjdGl2ZSgnYWRkQUd1ZXN0JywgYWRkQUd1ZXN0KTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBhZGRBR3Vlc3QoKSB7XG4gICAgbGlua0Z1bmMuJGluamVjdCA9IFtcInNjb3BlXCIsIFwiZWxcIiwgXCJhdHRyXCIsIFwiY3RybFwiXTtcblx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRyZXN0cmljdDogJ0FFQ00nLFxuXHRcdHRlbXBsYXRlVXJsOiAndmlld3MvZGlyZWN0aXZlcy9hZGRBR3Vlc3QuZGlyZWN0aXZlLmh0bScsXG5cdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRzY29wZToge1xuXHRcdFx0Z3Vlc3RMaXN0OiAnPSdcblx0XHR9LFxuXHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdGNvbnRyb2xsZXI6IGFkZEFHdWVzdENvbnRyb2xsZXIsXG5cdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0fVxuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHtcbiAgICB9XG5cbiAgICBhZGRBR3Vlc3RDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJHJvdXRlUGFyYW1zJywgJ3ZhbGlkYXRpb24nLCAndXNlckRhdGEnXTtcbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBhZGRBR3Vlc3RDb250cm9sbGVyKCRsb2csICRyb3V0ZVBhcmFtcywgdmFsaWRhdGlvbiwgdXNlckRhdGEpIHtcblx0ICAgIHZhciB2bSA9IHRoaXM7XG5cdCAgICB2YXIgZW1haWxDaGVja2VyID0gdmFsaWRhdGlvbjtcblx0ICAgIHZhciBpbnZpdGF0aW9uTWFuYWdlciA9IHVzZXJEYXRhO1xuXG5cdCAgICAvL2xvY2FsIHZhcmlhYmxlc1xuXHQgICAgdmFyIGV2ZW50RGV0YWlscyA9IHt9O1xuXG5cdCAgICAvL3ZtIHZhcmlhYmxlc1xuXHQgICAgdm0udGVtcEd1ZXN0ID0ge1xuXHQgICAgXHRuYW1lOiAnJyxcblx0ICAgIFx0ZW1haWw6ICcnLFxuXHQgICAgXHRzdGF0dXM6ICdwZW5kaW5nJ1xuXHQgICAgfVxuXHQgICAgdm0udmFsaWRhdGlvbnMgPSB7XG5cdCAgICBcdG5hbWU6IHtcblx0ICAgIFx0XHRhZGRyZXNzZWQ6IGZhbHNlLFxuXHQgICAgXHRcdHZhbGlkOiBmYWxzZSxcblx0ICAgIFx0XHRlcnJvck1lc3NhZ2U6ICcnXG5cdCAgICBcdH0sXG5cdCAgICBcdGVtYWlsOiB7XG5cdCAgICBcdFx0YWRkcmVzc2VkOiBmYWxzZSxcblx0ICAgIFx0XHR2YWxpZDogZmFsc2UsXG5cdCAgICBcdFx0ZXJyb3JNZXNzYWdlOiAnJ1xuXHQgICAgXHR9LFxuXHQgICAgXHRpbnZpdGF0aW9uOiB7XG5cdCAgICBcdFx0aXNUaGVIb3N0OiBmYWxzZSxcblx0ICAgIFx0XHRhbHJlYWR5SW52aXRlZDogZmFsc2UsXG5cdCAgICBcdFx0ZXJyb3JNZXNzYWdlOiAnJ1xuXHQgICAgXHR9XG5cdCAgICB9XG5cdCAgICB2bS5pbnZpdGF0aW9uVmFsaWRGb3JTdWJtaXNzaW9uID0gZmFsc2U7XG5cdCAgICB2bS5zdWJtaXNzaW9uQnV0dG9uID0ge1xuXHQgICAgXHRzdHlsZToge1xuXHQgICAgXHRcdGNvbG9yOidyZWQnXG5cdCAgICBcdH0sXG5cdCAgICBcdGNsYXNzOiB7XG5cdCAgICBcdFx0J2NvbC14cy0xMic6IHRydWUsXG5cdCAgICBcdFx0J2NvbC1zbS0xMic6IHRydWUsXG5cdCAgICBcdFx0J2J0bic6IHRydWUsXG5cdCAgICBcdFx0J2J0bi13YXJuaW5nJzogdHJ1ZSxcblx0ICAgIFx0XHQnYnRuLXN1Y2Nlc3MnOiBmYWxzZVxuXHQgICAgXHR9LFxuXHQgICAgXHRtZXNzYWdlOiAnQWRkcmVzcyBJbnZpdGF0aW9uLi4uJ1xuXHQgICAgfVxuXHQgICAgLy9sb2NhbCBtZXRob2RzXG5cdCAgICBmdW5jdGlvbiB1dGY4X3RvX2I2NChzdHIpIHtcblx0XHRcdHJldHVybiBidG9hKHN0cik7XG5cdFx0fVxuXG5cdCAgICBmdW5jdGlvbiB2YWxpZGF0ZUludml0YXRpb24oKSB7XG5cdCAgICBcdC8vY2hlY2sgaWYgYm90aCBpbnB1dHMgYXJlIHZhbGlkXG5cdCAgICBcdGlmKHZtLnZhbGlkYXRpb25zLm5hbWUudmFsaWQgJiYgdm0udmFsaWRhdGlvbnMuZW1haWwudmFsaWQpIHtcblx0ICAgIFx0XHRcblx0ICAgIFx0XHQvL3NldCB0aGUgdmFsaWRpdHkgZmxhZ1xuXHQgICAgXHRcdHZtLmludml0YXRpb25WYWxpZEZvclN1Ym1pc3Npb24gPSB0cnVlO1xuXHQgICAgXHRcdC8vdXBkYXRlIHRoZSBzdWJtaXNzaW9uIGJ1dHRvblxuXHQgICAgXHRcdHZtLnN1Ym1pc3Npb25CdXR0b24uY2xhc3NbJ2J0bi13YXJuaW5nJ10gPSBmYWxzZTtcblx0ICAgIFx0XHR2bS5zdWJtaXNzaW9uQnV0dG9uLmNsYXNzWydidG4tc3VjY2VzcyddID0gdHJ1ZTtcblx0ICAgIFx0XHR2bS5zdWJtaXNzaW9uQnV0dG9uLm1lc3NhZ2U9J0ludml0ZSBHdWVzdCc7XG5cdCAgICBcdH0gZWxzZSB7XG5cdCAgICBcdFx0XG5cdCAgICBcdFx0Ly9zZXQgdGhlIHZhbGlkaXR5IGZsYWdcblx0ICAgIFx0XHR2bS5pbnZpdGF0aW9uVmFsaWRGb3JTdWJtaXNzaW9uID0gZmFsc2U7XG5cdCAgICBcdFx0Ly91cGRhdGUgdGhlIHN1Ym1pc3Npb24gYnV0dG9uXG5cdCAgICBcdFx0dm0uc3VibWlzc2lvbkJ1dHRvbi5jbGFzc1snYnRuLXdhcm5pbmcnXSA9IHRydWU7XG5cdCAgICBcdFx0dm0uc3VibWlzc2lvbkJ1dHRvbi5jbGFzc1snYnRuLXN1Y2Nlc3MnXSA9IGZhbHNlO1xuXHQgICAgXHRcdHZtLnN1Ym1pc3Npb25CdXR0b24ubWVzc2FnZT0nQWRkcmVzcyBJbnZpdGF0aW9uLi4uJztcblx0ICAgIFx0fVxuXHQgICAgfVxuXG5cdCAgICBmdW5jdGlvbiBpbml0KCkge1xuXHQgICAgXHQvL2xvYWQgdGhlIGV2ZW50IGZvciByZWZlcmVuY2Vcblx0ICAgIFx0aWYoYW5ndWxhci5pc1VuZGVmaW5lZChpbnZpdGF0aW9uTWFuYWdlci5nZXRPbmVVc2VyRXZlbnRMb2NhbGx5KCdob3N0aW5nJywgJHJvdXRlUGFyYW1zLmV2ZW50SWQpKSkge1xuXHQgICAgXHRcdC8vaWYgdGhpcyBwYWdlIHdhcyBsb2FkZWQgYmVmb3JlIHRoZSBtb2RlbCBnZXQgdGhlIGV2ZW50XG5cdCAgICBcdFx0aW52aXRhdGlvbk1hbmFnZXIuZ2V0UmVtb3RlRXZlbnRzRm9yTG9jYWwoKVxuXHRcdCAgICBcdC50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdCAgICBcdFx0Ly93aGVuIHRoZSBldmVudCBoYXMgYmVlbiBsb2FkZWRcblx0XHQgICAgXHRcdGV2ZW50RGV0YWlscyA9IGludml0YXRpb25NYW5hZ2VyLmdldE9uZVVzZXJFdmVudExvY2FsbHkoJ2hvc3RpbmcnLCAkcm91dGVQYXJhbXMuZXZlbnRJZCk7XG5cblx0XHQgICAgXHR9KVxuXHQgICAgXHR9IGVsc2Uge1xuXHQgICAgXHRcdC8vanVzdCBnZXQgdGhlIG1vZGVsIGxvY2FsbHlcblx0ICAgIFx0XHRldmVudERldGFpbHMgPSBpbnZpdGF0aW9uTWFuYWdlci5nZXRPbmVVc2VyRXZlbnRMb2NhbGx5KCdob3N0aW5nJywgJHJvdXRlUGFyYW1zLmV2ZW50SWQpO1xuXHQgICAgXHR9XG5cdCAgICBcdCAgXHRcblx0ICAgIH1cblxuXHQgICAgLy92bSBtZXRob2RzXG5cdCAgICB2bS52YWxpZGF0ZU5hbWUgPSBmdW5jdGlvbigpIHtcblx0ICAgIFx0Ly90aGlzIGZpZWxkIGlzIGJlaW5nIGVkaXRlZCwgdGhyb3cgZmxhZ1xuXHQgICAgXHR2bS52YWxpZGF0aW9ucy5uYW1lLmFkZHJlc3NlZCA9IHRydWU7XG5cblx0ICAgIFx0Ly9jaGVjayBmb3IgdmFsdWVcblx0ICAgIFx0aWYoYW5ndWxhci5pc0RlZmluZWQodm0udGVtcEd1ZXN0Lm5hbWUpICYmIHZtLnRlbXBHdWVzdC5uYW1lICE9ICcnKSB7XG5cdCAgICBcdFx0dm0udmFsaWRhdGlvbnMubmFtZS52YWxpZCA9IHRydWU7XG5cdCAgICBcdFx0dm0udmFsaWRhdGlvbnMubmFtZS5lcnJvck1lc3NhZ2UgPSAnJztcblx0ICAgIFx0fSBlbHNlIHtcblx0ICAgIFx0XHR2bS52YWxpZGF0aW9ucy5uYW1lLnZhbGlkID0gZmFsc2U7XG5cdCAgICBcdFx0dm0udmFsaWRhdGlvbnMubmFtZS5lcnJvck1lc3NhZ2UgPSAnVGhpcyBndWVzdCBuZWVkcyBhIG5hbWUnO1xuXHQgICAgXHR9XG5cblx0ICAgIFx0dmFsaWRhdGVJbnZpdGF0aW9uKCk7XG5cdCAgICB9XG5cdCAgICB2bS52YWxpZGF0ZUVtYWlsID0gZnVuY3Rpb24oKSB7XG5cdCAgICBcdC8vdGhpcyBmaWVsZCBpcyBiZWluZyBlZGl0ZWQsIHRocm93IGZsYWdcblx0ICAgIFx0dm0udmFsaWRhdGlvbnMuZW1haWwuYWRkcmVzc2VkID0gdHJ1ZTtcblxuXHQgICAgXHQvL2lzIHRoZXJlIGFuIGVtYWlsIHZhbHVlP1xuXHQgICAgXHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2bS50ZW1wR3Vlc3QuZW1haWwpICYmIHZtLnRlbXBHdWVzdC5lbWFpbCAhPSAnJykge1xuXHQgICAgXHRcdFxuXHQgICAgXHRcdC8vaWYgYW4gZW1haWwgZXhpc3RzIGNoZWNrIGl0J3MgdmFsaWRpdHlcblx0ICAgIFx0XHRpZihhbmd1bGFyLmlzVW5kZWZpbmVkKGVtYWlsQ2hlY2tlci5lbWFpbCh2bS50ZW1wR3Vlc3QuZW1haWwpKSkge1xuXHQgICAgXHRcdFx0Ly9lbWFpbCBpcyB2YWxpZFxuXHQgICAgXHRcdFx0dm0udmFsaWRhdGlvbnMuZW1haWwudmFsaWQgPSB0cnVlO1xuXHQgICAgXHRcdFx0dm0udmFsaWRhdGlvbnMuZW1haWwuZXJyb3JNZXNzYWdlID0gJyc7XG5cdCAgICBcdFx0fSBlbHNlIHtcblx0ICAgIFx0XHRcdC8vZ2V0IHRoZSBlcnJvclxuXHQgICAgXHRcdFx0dm0udmFsaWRhdGlvbnMuZW1haWwudmFsaWQgPSBmYWxzZTtcblx0ICAgIFx0XHRcdHZtLnZhbGlkYXRpb25zLmVtYWlsLmVycm9yTWVzc2FnZSA9IGVtYWlsQ2hlY2tlci5lbWFpbCh2bS50ZW1wR3Vlc3QuZW1haWwpO1xuXHQgICAgXHRcdFx0JGxvZy5pbmZvKHZtLnZhbGlkYXRpb25zLmVtYWlsLmVycm9yTWVzc2FnZSk7XG5cdCAgICBcdFx0fVxuXG5cdCAgICBcdH0gZWxzZSB7XG5cdCAgICBcdFx0Ly90aGVyZSBpc24ndCBhbiBlbWFpbCB5ZXRcblx0ICAgIFx0XHR2bS52YWxpZGF0aW9ucy5lbWFpbC52YWxpZCA9IGZhbHNlO1xuXHQgICAgXHRcdHZtLnZhbGlkYXRpb25zLmVtYWlsLmVycm9yTWVzc2FnZSA9ICdOb3QgYSB2YWxpZCBlbWFpbCc7XG5cdCAgICBcdH1cblxuXHQgICAgXHR2YWxpZGF0ZUludml0YXRpb24oKTtcblx0ICAgIH1cblxuXHQgICAgdm0uc2hvd05hbWVFcnJvciA9IGZ1bmN0aW9uKCkge1xuXHQgICAgXHRpZighdm0udmFsaWRhdGlvbnMubmFtZS52YWxpZCAmJiB2bS52YWxpZGF0aW9ucy5uYW1lLmFkZHJlc3NlZCkgcmV0dXJuIHRydWU7XG5cdCAgICBcdGVsc2UgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXG5cdCAgICB2bS5zaG93RW1haWxFcnJvciA9IGZ1bmN0aW9uKCkge1xuXHQgICAgXHRpZighdm0udmFsaWRhdGlvbnMuZW1haWwudmFsaWQgJiYgdm0udmFsaWRhdGlvbnMuZW1haWwuYWRkcmVzc2VkKSByZXR1cm4gdHJ1ZTtcblx0ICAgIFx0ZWxzZSByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cblx0ICAgIHZtLnNob3dJbnZpdGF0aW9uRXJyb3IgPSBmdW5jdGlvbigpIHtcblx0ICAgIFx0aWYoIHZtLnZhbGlkYXRpb25zLmludml0YXRpb24uaXNUaGVIb3N0IHx8XG5cdCAgICBcdFx0dm0udmFsaWRhdGlvbnMuaW52aXRhdGlvbi5hbHJlYWR5SW52aXRlZCApIFxuXHQgICAgXHRcdFx0cmV0dXJuIHRydWU7XG5cdCAgICBcdGVsc2UgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXG5cdCAgICB2bS5zdWJtaXRHdWVzdEludml0YXRpb24gPSBmdW5jdGlvbigpIHtcblx0ICAgIFx0XG5cdCAgICBcdC8vaWYgdGhlIHJlcXVpcm5tZW50cyBhcmUgZnVsZmlsbGVkLi4uXG5cdCAgICBcdGlmKHZtLmludml0YXRpb25WYWxpZEZvclN1Ym1pc3Npb24pIHtcblx0ICAgIFx0XHQvL21ha2Ugc3VyZSB0aGUgaW52aXRhdGlvbiBpcyBub3QgdG8gdGhlIGN1cnJlbnQgdXNlclxuXHQgICAgXHRcdGlmKGludml0YXRpb25NYW5hZ2VyLnRoaXNJc1RoZUhvc3RFbWFpbCh2bS50ZW1wR3Vlc3QuZW1haWwsICRyb3V0ZVBhcmFtcy5ldmVudElkKSkge1xuXHRcdFx0XHRcdHZtLnZhbGlkYXRpb25zLmludml0YXRpb24uaXNUaGVIb3N0ID0gdHJ1ZTtcblx0XHRcdFx0XHR2bS52YWxpZGF0aW9ucy5pbnZpdGF0aW9uLmVycm9yTWVzc2FnZSA9ICdObyBuZWVkIHRvIGludml0ZSB0aGUgaG9zdCc7XG5cdFx0XHRcdFx0cmV0dXJuIDA7XG5cdCAgICBcdFx0fSBlbHNlIHtcblx0ICAgIFx0XHRcdHZtLnZhbGlkYXRpb25zLmludml0YXRpb24uaXNUaGVIb3N0ID0gZmFsc2U7XG5cdCAgICBcdFx0fVxuXHQgICAgXHRcdFxuXHRcdCAgICBcdC8vbWFrZSBzdXJlIHRoaXMgcGVyc29uIGhhcyBub3QgYWxyZWFkeSBiZWVuIGludml0ZWRcblx0XHQgICAgXHQvKlxuXHRcdCAgICBcdGlmKGludml0YXRpb25NYW5hZ2VyLmd1ZXN0SW52aXRlZEFscmVhZHkodm0udGVtcEd1ZXN0LmVtYWlsLCAkcm91dGVQYXJhbXMuZXZlbnRJZCkpIHtcblx0XHQgICAgXHRcdHZtLnZhbGlkYXRpb25zLmludml0YXRpb24uYWxyZWFkeUludml0ZWQgPSB0cnVlO1xuXHRcdFx0XHRcdHZtLnZhbGlkYXRpb25zLmludml0YXRpb24uZXJyb3JNZXNzYWdlID0gJ1RoaXMgZ3Vlc3QgaGFzIGFscmVhZHkgYmVlbiBpbnZpdGVkJztcblx0XHRcdFx0XHRyZXR1cm4gMDtcblx0ICAgIFx0XHR9IGVsc2Uge1xuXHQgICAgXHRcdFx0dm0udmFsaWRhdGlvbnMuaW52aXRhdGlvbi5hbHJlYWR5SW52aXRlZCA9IGZhbHNlO1xuXHQgICAgXHRcdH0qL1xuXG5cdCAgICBcdFx0Ly9pZiB0aGlzIHBlcnNvbiBpcyBhIHJlZ2lzdGVyZWQgdXNlciBnZXQgdGhlaXIgdXNlciBpZFxuXHQgICAgXHRcdGludml0YXRpb25NYW5hZ2VyLmdldFVzZXJJZEZvckd1ZXN0KHZtLnRlbXBHdWVzdC5lbWFpbClcblx0ICAgIFx0XHQudGhlbihmdW5jdGlvbih1aWQpIHtcblx0ICAgIFx0XHRcdFxuXHQgICAgXHRcdFx0cmV0dXJuIHVpZDtcblx0ICAgIFx0XHR9KVxuXHQgICAgXHRcdC50aGVuKGZ1bmN0aW9uKHVpZCkge1xuXHQgICAgXHRcdFx0Ly91c2UgdGhhdCB1aWQgdG8gcmVnaXN0ZXIgdGhlIHVzZXJcblx0ICAgIFx0XHRcdC8vYWRkIHRoZSBwZXJzb24gdG8gdGhlIGhvc3QncyBMT0NBTCBndWVzdCBsaXN0XG5cdCAgICBcdFx0XHRcblxuXHQgICAgXHRcdFx0aWYoIWFuZ3VsYXIuaXNPYmplY3Qodm0uZ3Vlc3RMaXN0KSkge1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHR2bS5ndWVzdExpc3QgPSB7fTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Ly9jcmVhdGUgdGhlIGd1ZXN0IHRvIHNhdmVcblx0XHRcdFx0XHR2YXIgZ3Vlc3RCZWluZ0FkZGVkID0gdm0udGVtcEd1ZXN0O1xuXG5cdCAgICBcdFx0XHR2bS5ndWVzdExpc3RbdWlkXSA9IGd1ZXN0QmVpbmdBZGRlZDtcblxuXHQgICAgXHRcdFx0dm0udGVtcEd1ZXN0ID0ge1xuXHRcdFx0XHQgICAgXHRuYW1lOiAnJyxcblx0XHRcdFx0ICAgIFx0ZW1haWw6ICcnLFxuXHRcdFx0XHQgICAgXHRzdGF0dXM6ICdwZW5kaW5nJ1xuXHRcdFx0XHQgICAgfTtcblxuXHQgICAgXHRcdH0pXG5cdCAgICBcdFx0LnRoZW4oZnVuY3Rpb24oKSB7XG5cdCAgICBcdFx0XHQvL2FkZCB0aGlzIGV2ZW50IHRvIHRoZSB1c2VycycgcGVuZGluZyBsaXN0XG5cdCAgICBcdFx0XHQvKmludml0YXRpb25NYW5hZ2VyLnVwZGF0ZVBlbmRpbmdFdmVudHNMaXN0Rm9yVXNlcigpKi9cblx0ICAgIFx0XHR9KVxuXHQgICAgXHRcdC50aGVuKGZ1bmN0aW9uKCkge1xuXHQgICAgXHRcdFx0Ly9yZW1vdmUgdGhlICd1cGRhdGVkJyBmaWVsZCBpZiBuZWVkIGJlXG5cdCAgICBcdFx0fSlcblx0ICAgIFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3JNZXNzYWdlKSB7XG5cdCAgICBcdFx0XHQvL2Fzc3VtaW5nIG5vIHVpZCB3YXMgZm91bmQganVzdCB1c2UgdGhlIGVtYWlsXG5cdCAgICBcdFx0XHQkbG9nLmluZm8oZXJyb3JNZXNzYWdlKTtcblx0ICAgIFx0XHRcdFxuXHQgICAgXHRcdFx0Ly9jcmVhdGUgdGhlIGVtYWlsSWRcblx0ICAgIFx0XHRcdGlkQnlFbWFpbCA9IHV0ZjhfdG9fYjY0KHZtLnRlbXBHdWVzdC5lbWFpbCk7XG5cdCAgICBcdFx0XHQvL2FkZCB0aGlzIHBlcnNvbiB0byB0aGUgaG9zdCdzIGd1ZXN0IGxpc3Rcblx0ICAgIFx0XHRcdGlmKCFhbmd1bGFyLmlzT2JqZWN0KHZtLmd1ZXN0TGlzdCkpIHtcblx0ICAgIFx0XHRcdFx0XG5cdFx0XHRcdFx0XHR2bS5ndWVzdExpc3QgPSB7fTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Ly9jcmVhdGUgdGhlIGd1ZXN0IHRvIHNhdmVcblx0XHRcdFx0XHR2YXIgZ3Vlc3RCZWluZ0FkZGVkID0gdm0udGVtcEd1ZXN0O1xuXG5cdCAgICBcdFx0XHR2bS5ndWVzdExpc3RbaWRCeUVtYWlsXSA9IGd1ZXN0QmVpbmdBZGRlZDtcblxuXHRcdFx0ICAgIFx0LyppbnZpdGF0aW9uTWFuYWdlci5hZGRHdWVzdFRvSG9zdEd1ZXN0TGlzdCh2bS50ZW1wR3Vlc3QubmFtZSwgdm0udGVtcEd1ZXN0LmVtYWlsLCB1bmRlZmluZWQsICRyb3V0ZVBhcmFtcy5ldmVudElkLCAkcm91dGVQYXJhbXMudWlkKVxuXHRcdFx0ICAgIFx0LnRoZW4oZnVuY3Rpb24ocG9zaXRpdmVSZXN1bHQpIHtcblx0XHRcdCAgICBcdFx0JGxvZy5pbmZvKCdnb3QgdGhpcyByZXN1bHQ6ICcgKyBwb3NpdGl2ZVJlc3VsdCk7XG5cdFx0XHQgICAgXHR9KVxuXHRcdFx0ICAgIFx0LnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHQgICAgXHRcdC8vYWRkIHRoaXMgZXZlbnQgdG8gdGhlIGd1ZXN0J3MgcGVuZGluZyBsaXN0XG5cdFx0XHQgICAgXHRcdGludml0YXRpb25NYW5hZ2VyLnVwZGF0ZVBlbmRpbmdFdmVudHNMaXN0Rm9yR3Vlc3QoJHJvdXRlUGFyYW1zLmV2ZW50SWQpXG5cdFx0XHQgICAgXHR9KVxuXHRcdFx0ICAgIFx0LnRoZW4oZnVuY3Rpb24oKSB7XG5cdCAgICBcdFx0XHQvL3JlbW92ZSB0aGUgJ3VwZGF0ZWQnIGZpZWxkIGlmIG5lZWQgYmVcblx0ICAgIFx0XHRcdH0pXG5cdFx0XHQgICAgXHQuY2F0Y2goZnVuY3Rpb24obmVnYXRpdmVSZXN1bHQpIHtcblx0XHRcdCAgICBcdFx0JGxvZy5pbmZvKCdnb3QgdGhpcyByZXN1bHQ6ICcgKyBwb3NpdGl2ZVJlc3VsdCk7XG5cdFx0XHQgICAgXHR9KSovXG5cblx0XHRcdCAgICBcdHZtLnRlbXBHdWVzdCA9IHtcblx0XHRcdFx0ICAgIFx0bmFtZTogJycsXG5cdFx0XHRcdCAgICBcdGVtYWlsOiAnJyxcblx0XHRcdFx0ICAgIFx0c3RhdHVzOiAncGVuZGluZydcblx0XHRcdFx0ICAgIH0gXG5cblx0ICAgIFx0XHR9KVxuXHQgICAgXHRcdFxuXHQgICAgXHR9XG5cdCAgICBcdFxuXHQgICAgfVxuXG5cdFx0Ly9hY3Rpb25zXG5cdFx0aW5pdCgpO1xuXG5cdH1cblxuXHRyZXR1cm4gIGRpcmVjdGl2ZTtcblx0XHRcbn07XG4vKiBIb3N0ZWRFdmVudHNMaXN0LmRpcmVjdGl2ZS5qcyAqL1xuXG4vKipcbiogQGRlc2MgZGlzcGxheXMgYSBsaXN0IG9mIGFsbCB0aGUgZXZlbnRzIHRoZSBjdXJyZW50IHVzZXIgaXMgaG9zdGluZy5cbiogQGV4YW1wbGUgPGhvc3RlZC1ldmVudHMtbGlzdD48L2hvc3RlZC1ldmVudHMtbGlzdD5cbiovXG5cbmFuZ3VsYXJcblx0Lm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuXHQuZGlyZWN0aXZlKCdob3N0ZWRFdmVudHNMaXN0JywgaG9zdGVkRXZlbnRzTGlzdCk7XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gaG9zdGVkRXZlbnRzTGlzdCgpIHtcbiAgICBsaW5rRnVuYy4kaW5qZWN0ID0gW1wic2NvcGVcIiwgXCJlbFwiLCBcImF0dHJcIiwgXCJjdHJsXCJdO1xuXHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdHJlc3RyaWN0OiAnQUVDTScsXG5cdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9kaXJlY3RpdmVzL2hvc3RlZEV2ZW50c0xpc3QuZGlyZWN0aXZlLmh0bScsXG5cdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRzY29wZToge1xuXHRcdFx0aG9zdGVkRXZlbnRzOiAnPScsXG5cdFx0XHR1c2VySWQ6ICc9J1xuXHRcdH0sXG5cdFx0bGluazogbGlua0Z1bmMsXG5cdFx0Y29udHJvbGxlcjogaG9zdGVkRXZlbnRzTGlzdENvbnRyb2xsZXIsXG5cdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0fVxuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHtcblx0XHRzY29wZS4kd2F0Y2goJ2hvc3RlZEV2ZW50cycsIGZ1bmN0aW9uKG5leHQsIGN1cnJlbnQpIHtcblx0XHRcdC8vc29tZXRoaW5nXG5cdFx0fSk7XG4gICAgfVxuXG4gICAgaG9zdGVkRXZlbnRzTGlzdENvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICd0cmFmZmljVmFsZXQnXTtcbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBob3N0ZWRFdmVudHNMaXN0Q29udHJvbGxlcigkbG9nLCB0cmFmZmljVmFsZXQpIHtcblx0ICAgIHZhciB2bSA9IHRoaXM7XG5cblx0ICAgIC8vbG9jYWwgdmFyaWFibGVzXG5cdCAgICB2YXIgaG9zdGVkRXZlbnRzU2hlcnBhID0gdHJhZmZpY1ZhbGV0O1xuXG5cdCAgICAvL3ZpZXcgbW9kZWwgdmFyaWFibGVzXG5cdCAgICB2bS5ndWVzdHNBcmVJbnZpdGVkID0gZmFsc2U7XG5cblx0ICAgIC8vbG9jYWwgbWV0aG9kc1xuXHQgICAgZnVuY3Rpb24gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKSB7XG5cdFx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gY291bnRHdWVzdHMobGlzdCkge1xuXHRcdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlXG5cdFx0XHR2YXIgY291bnRlciA9IDA7XG5cblx0XHRcdC8vaWYgd2UncmUgY291bnRpbmcsIHRoZW4gdGhlcmUncyBhIGxpc3QsIHNvIHRocm93IHRoZSBmbGFnXG5cdFx0XHR2bS5ndWVzdHNBcmVJbnZpdGVkID0gdHJ1ZTtcblxuXHRcdFx0T2JqZWN0LmtleXNbbGlzdF0uZm9yRWFjaChmdW5jdGlvbihndWVzdCkge1xuXHRcdFx0XHRjb3VudGVyKys7XG5cdFx0XHR9KVxuXG5cdFx0XHRyZXR1cm4gY291bnRlcjtcblx0XHR9XG5cblx0XHQvL3ZpZXcgbW9kZWwgbWV0aG9kc1xuXHRcdHZtLmZvcm1hdERhdGUgPSBmdW5jdGlvbih1bml4VGltZSkge1xuXHRcdFx0Ly9yZWZvcm1hdCB0aGUgdGltZVxuXHRcdFx0XG5cdFx0XHRyZXR1cm4gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKTtcblx0XHR9XG5cblx0XHR2bS5ndWVzdHNBdHRlbmRpbmcgPSBmdW5jdGlvbihndWVzdExpc3QpIHtcblx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGd1ZXN0TGlzdCkpIHtcblx0XHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoZ3Vlc3RMaXN0WydhdHRlbmRpbmcnXSkpIHJldHVybiBjb3VudEd1ZXN0cyhndWVzdExpc3RbJ2F0dGVuZGluZyddKTtcblx0XHRcdFx0ZWxzZSByZXR1cm4gMDtcblx0XHRcdH1cblx0XHRcdGVsc2UgcmV0dXJuIDA7XG5cdFx0fVxuXG5cdFx0dm0uZ3Vlc3RzSW52aXRlZCA9IGZ1bmN0aW9uKGd1ZXN0TGlzdCkge1xuXHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoZ3Vlc3RMaXN0KSkge1xuXHRcdFx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XHRcdHZhciBndWVzdENvdW50ID0geyBhdHRlbmRpbmc6IDAsIHBlbmRpbmc6IDAsIGRlY2xpbmVkOiAwIH07XG5cblx0XHRcdFx0Ly9sb2NhbCBtZXRob2RzXG5cdFx0XHRcdGZ1bmN0aW9uIHRvdGFsR3Vlc3RDb3VudCgpIHtcblx0XHRcdFx0XHRyZXR1cm4gZ3Vlc3RDb3VudC5hdHRlbmRpbmcgKyBndWVzdENvdW50LnBlbmRpbmcgKyBndWVzdENvdW50LmRlY2xpbmVkO1xuXHRcdFx0XHR9IFxuXG5cdFx0XHRcdC8vY2hlY2sgdmFsdWVzXG5cdFx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGd1ZXN0TGlzdFsnYXR0ZW5kaW5nJ10pKSBndWVzdENvdW50LmF0dGVuZGluZyA9IGNvdW50R3Vlc3RzKGd1ZXN0TGlzdFsnYXR0ZW5kaW5nJ10pO1xuXHRcdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChndWVzdExpc3RbJ3BlbmRpbmcnXSkpIGd1ZXN0Q291bnQucGVuZGluZyA9IGNvdW50R3Vlc3RzKGd1ZXN0TGlzdFsncGVuZGluZyddKTtcblx0XHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoZ3Vlc3RMaXN0WydkZWNsaW5lZCddKSkgZ3Vlc3RDb3VudC5kZWNsaW5lZCA9IGNvdW50R3Vlc3RzKGd1ZXN0TGlzdFsnZGVjbGluZWQnXSk7XG5cblx0XHRcdFx0cmV0dXJuIHRvdGFsR3Vlc3RDb3VudCgpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSByZXR1cm4gMDtcblx0XHR9XG5cblx0XHR2bS5wZXJjZW50YWdlQXR0ZW5kaW5nID0gZnVuY3Rpb24oZ3Vlc3RMaXN0KSB7XG5cdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChndWVzdExpc3QpKSB7XG5cdFx0XHRcdHJldHVybiAoZ3Vlc3RzQXR0ZW5kaW5nKGd1ZXN0bGlzdCkgLyBndWVzdHNJbnZpdGVkKGd1ZXN0TGlzdCkpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSByZXR1cm4gMDtcblx0XHR9XG5cblx0XHR2bS5ldmVudENsaWNrZWQgPSBmdW5jdGlvbihldmVudElEKSB7XG5cdFx0XHQvL3JlZGlyZWN0IHRvIHRoZSBldmVudCBwYWdlXG5cdFx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIHRvOiAvZXZlbnQvJyArIGV2ZW50SUQgKyAnLycgKyB2bS5ob3N0ZWRFdmVudHNbZXZlbnRJRF0uaG9zdC51aWQgKyAnLycgKyB2bS51c2VySWQpO1xuXHRcdFx0aG9zdGVkRXZlbnRzU2hlcnBhLnJlZGlyZWN0VG8oJy9ldmVudCcsIGV2ZW50SUQsIHZtLmhvc3RlZEV2ZW50c1tldmVudElEXS5ob3N0LnVpZCwgdm0udXNlcklkKTtcblx0XHR9XG5cblx0XHR2bS5pbnZpdGVHdWVzdHMgPSBmdW5jdGlvbihldmVudElkKSB7XG5cdFx0XHRob3N0ZWRFdmVudHNTaGVycGEucmVkaXJlY3RUbygnL2V2ZW50L2hvc3QnLCBldmVudElkLCB2bS5ob3N0ZWRFdmVudHNbZXZlbnRJZF0uaG9zdC51aWQsICczJyk7XG5cdFx0fVxuXG5cdFx0Ly9hY3Rpb25zXG5cdH1cblxuXHRyZXR1cm4gIGRpcmVjdGl2ZTtcblx0XHRcbn07XG4vKiBIb3N0ZWRHdWVzdExpc3QuZGlyZWN0aXZlLmpzICovXG5cbi8qKlxuKiBAZGVzYyBkaXNwbGF5cyBhIGxpc3Qgb2YgYWxsIGd1ZXN0cyBpbnZpdGVkIHRvIGFuIGV2ZW50IHRoaXMgdXNlciBpcyBob3N0aW5nLlxuKiBAZXhhbXBsZSA8aG9zdGVkLWd1ZXN0LWxpc3Q+PC9ob3N0ZWQtZ3Vlc3QtbGlzdD5cbiovXG5cbmFuZ3VsYXJcblx0Lm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuXHQuZGlyZWN0aXZlKCdob3N0ZWRHdWVzdExpc3QnLCBob3N0ZWRHdWVzdExpc3QpO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGhvc3RlZEd1ZXN0TGlzdCgpIHtcbiAgICBsaW5rRnVuYy4kaW5qZWN0ID0gW1wic2NvcGVcIiwgXCJlbFwiLCBcImF0dHJcIiwgXCJjdHJsXCJdO1xuXHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdHJlc3RyaWN0OiAnQUVDTScsXG5cdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9kaXJlY3RpdmVzL2hvc3RlZEd1ZXN0TGlzdC5kaXJlY3RpdmUuaHRtJyxcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdHNjb3BlOiB7XG5cdFx0XHRndWVzdExpc3Q6ICc9Jyxcblx0XHR9LFxuXHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdGNvbnRyb2xsZXI6IGhvc3RlZEd1ZXN0TGlzdENvbnRyb2xsZXIsXG5cdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0fVxuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHtcblx0XHRzY29wZS4kd2F0Y2goJ2d1ZXN0TGlzdCcsIGZ1bmN0aW9uKCkge1xuXHRcdFx0c2NvcGUuJGFwcGx5O1xuXHRcdH0pO1xuICAgIH1cblxuICAgIGhvc3RlZEd1ZXN0TGlzdENvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICckcm91dGVQYXJhbXMnLCAndXNlckRhdGEnXTtcbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBob3N0ZWRHdWVzdExpc3RDb250cm9sbGVyKCRsb2csICRyb3V0ZVBhcmFtcywgdXNlckRhdGEpIHtcblx0ICAgIHZhciB2bSA9IHRoaXM7XG5cblx0ICAgIC8vbG9jYWwgdmFyaWFibGVzXG5cdCAgICB2bS5pc0FHdWVzdExpc3QgPSBmYWxzZTtcblxuXHQgICAgLy9sb2NhbCBtZXRob2RzXG5cdCAgICBmdW5jdGlvbiB0aGVyZUlzQUd1ZXN0TGlzdCgpIHtcblx0ICAgIFx0Ly9jaGVjayBmb3IgYSBndWVzdExpc3Qgb2JqZWN0XG5cdCAgICBcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZtLmd1ZXN0TGlzdCkgJiYgdm0uZ3Vlc3RMaXN0ICE9ICcnKSB7XG5cdCAgICBcdFx0dm0uaXNBR3Vlc3RMaXN0ID0gdHJ1ZTtcblx0ICAgIFx0XHRyZXR1cm4gdHJ1ZTtcblx0ICAgIFx0fSBlbHNlIHtcblx0ICAgIFx0XHR2bS5pc0FHdWVzdExpc3QgPSBmYWxzZTtcblx0ICAgIFx0XHRyZXR1cm4gZmFsc2U7XG5cdCAgICBcdH1cblx0ICAgIH1cblxuXHQgICAgZnVuY3Rpb24gaW5pdCgpIHtcblx0ICAgIFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0ICAgIFx0dmFyIGxpc3RDb2xsZWN0b3IgPSB1c2VyRGF0YTtcblxuXHQgICAgXHQvL2lmIHRoZXJlIGlzbid0IGEgZ3Vlc3QgbGlzdCwgZ28gb3V0IHRvIHRoZSBkYiB0byBnZXQgaXRcblxuXHRcdFx0aWYoIXRoZXJlSXNBR3Vlc3RMaXN0KCkpIHtcblx0XHRcdFx0JGxvZy5pbmZvKCdnb2luZyBhZnRlciB0aGUgbGlzdCcpO1xuXHRcdFx0XHRsaXN0Q29sbGVjdG9yLmdldEV2ZW50R3Vlc3RMaXN0KCRyb3V0ZVBhcmFtcy51aWQsICRyb3V0ZVBhcmFtcy5ldmVudElkKVxuXHRcdFx0XHQudGhlbihmdW5jdGlvbihyZXR1cm5lZExpc3QpIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ2dvdCB0aGUgbGlzdCcpO1xuXHRcdFx0XHRcdCRsb2cuaW5mbyhyZXR1cm5lZExpc3QpO1xuXHRcdFx0XHRcdHZtLmd1ZXN0TGlzdCA9IHJldHVybmVkTGlzdDtcblx0XHRcdFx0XHRpZihhbmd1bGFyLmlzT2JqZWN0KHJldHVybmVkTGlzdCkpIHZtLmlzQUd1ZXN0TGlzdCA9IHRydWU7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvcikgeyBcblx0XHRcdFx0XHQkbG9nLmluZm8oJ1RoZXJlIHdhcyBhbiBlcnJvcjogJysgZXJyb3IpO1xuXHRcdFx0XHR9KVxuXHRcdFx0fVxuXHQgICAgfVxuXHQgICAgLy92bSBtZXRob2RzXG5cblx0XHQvL2FjdGlvbnNcblx0XHRpbml0KCk7XG5cblx0fVxuXG5cdHJldHVybiAgZGlyZWN0aXZlO1xuXHRcdFxufTtcbi8qIFBlbmRpbmdFdmVudHNMaXN0LmRpcmVjdGl2ZS5qcyAqL1xuXG4vKipcbiogQGRlc2MgZGlzcGxheXMgYSBsaXN0IG9mIGFsbCB0aGUgZXZlbnRzIHRoZSBjdXJyZW50IHVzZXIgaXMgaG9zdGluZy5cbiogQGV4YW1wbGUgPHBlbmRpbmctZXZlbnRzLWxpc3Q+PC9wZW5kaW5nLWV2ZW50cy1saXN0PlxuKi9cblxuYW5ndWxhclxuXHQubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG5cdC5kaXJlY3RpdmUoJ3BlbmRpbmdFdmVudHNMaXN0JywgcGVuZGluZ0V2ZW50c0xpc3QpO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHBlbmRpbmdFdmVudHNMaXN0KCkge1xuICAgIGxpbmtGdW5jLiRpbmplY3QgPSBbXCJzY29wZVwiLCBcImVsXCIsIFwiYXR0clwiLCBcImN0cmxcIl07XG5cdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0cmVzdHJpY3Q6ICdBRUNNJyxcblx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2RpcmVjdGl2ZXMvcGVuZGluZ0V2ZW50c0xpc3QuZGlyZWN0aXZlLmh0bScsXG5cdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRzY29wZToge1xuXHRcdFx0cGVuZGluZ0V2ZW50czogJz0nLFxuXHRcdFx0dXNlcklkOiAnPSdcblx0XHR9LFxuXHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdGNvbnRyb2xsZXI6IHBlbmRpbmdFdmVudHNMaXN0Q29udHJvbGxlcixcblx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHR9XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCwgYXR0ciwgY3RybCkge1xuXHRcdHNjb3BlLiR3YXRjaCgnaG9zdGVkRXZlbnRzJywgZnVuY3Rpb24obmV4dCwgY3VycmVudCkge1xuXHRcdFx0Ly9zb21ldGhpbmdcblx0XHR9KTtcbiAgICB9XG5cbiAgICBwZW5kaW5nRXZlbnRzTGlzdENvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICd0cmFmZmljVmFsZXQnXTtcbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBwZW5kaW5nRXZlbnRzTGlzdENvbnRyb2xsZXIoJGxvZywgdHJhZmZpY1ZhbGV0KSB7XG5cdCAgICB2YXIgdm0gPSB0aGlzO1xuXG5cdCAgICAvL2xvY2FsIHZhcmlhYmxlc1xuXG5cdCAgICAvL3ZpZXcgbW9kZWwgdmFyaWFibGVzXG5cdCAgICB2bS5wZW5kaW5nRXZlbnRzID0ge31cblxuXHQgICAgLy9sb2NhbCBtZXRob2RzXG5cdFx0ZnVuY3Rpb24gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKSB7XG5cdFx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKSB7XG5cdFx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdFx0fTtcblx0ICBcdFxuXHQgIFx0ZnVuY3Rpb24gYnVpbGRUb21vcnJvd0RhdGUoKSB7XG5cdCAgXHRcdHZhciB0b2RheSA9IG5ldyBEYXRlKCk7XG5cblx0ICAgIFx0Ly9yb3VuZCB0byB0aGUgbmVhcmVzdCBob3VyLCBjdXQgb2ZmIGFueXRoaW5nIHNtYWxsZXJcblx0XHRcdHRvZGF5LnNldEhvdXJzKHRvZGF5LmdldEhvdXJzKCkgKyBNYXRoLnJvdW5kKHRvZGF5LmdldE1pbnV0ZXMoKS82MCkpO1xuXHRcdFx0dG9kYXkuc2V0TWludXRlcygwKTtcblx0XHRcdHRvZGF5LnNldFNlY29uZHMoMCk7XG5cdFx0XHR0b2RheS5zZXRNaWxsaXNlY29uZHMoMCk7XG5cblx0ICAgIFx0dG9kYXkgPSBkYXRlVGltZVRvVW5peFRpbWUodG9kYXkpO1xuXG5cdCAgICBcdHZhciB0b21vcnJvdyA9IHRvZGF5ICsgKDEwMDAqNjAqNjAqMjQpO1xuXHQgICAgXHRcblx0ICAgIFx0cmV0dXJuIHRvbW9ycm93O1xuXHQgICAgfVxuXG5cdCAgXHRmdW5jdGlvbiBhZGRXZWxjb21lRXZlbnQoKSB7XG5cdCAgXHRcdHZtLnBlbmRpbmdFdmVudHMgPSB7XG5cdFx0ICAgIFx0d2VsY29tZToge1xuXHRcdCAgICBcdFx0bmFtZTogJ01lZXQtdXAgRXZlbnQgUGxhbm5lciBXZWxjb21lIEV2ZW50Jyxcblx0XHQgICAgXHRcdG1lc3NhZ2U6ICdUaGFua3MgZm9yIHRyeWluZyBvdXQgTWVldC11cCBFdmVudCBQbGFubmVyISAgQ2xpY2sgaGVyZSB0byBsZWFybiBtb3JlLicsXG5cdFx0ICAgIFx0XHRldmVudFRpbWVzOiB7XG5cdFx0ICAgIFx0XHRcdGVuZDogKGJ1aWxkVG9tb3Jyb3dEYXRlKCkgKyAoMTAwMCo2MCo2MCozKSksXG5cdFx0ICAgIFx0XHRcdHN0YXJ0OiBidWlsZFRvbW9ycm93RGF0ZSgpXG5cdFx0ICAgIFx0XHR9LFxuXHRcdCAgICBcdFx0cnN2cGVkOiBmYWxzZSxcblx0XHQgICAgXHRcdGFjY2VwdGVkOiBmYWxzZSxcblx0XHQgICAgXHRcdGFjY2VwdDogZnVuY3Rpb24oKSB7XG5cdFx0ICAgIFx0XHRcdHRoaXMucnN2cGVkID0gdHJ1ZTtcblx0XHQgICAgXHRcdFx0dGhpcy5hY2NlcHRlZCA9IHRydWU7XG5cdFx0ICAgIFx0XHR9LFxuXHRcdCAgICBcdFx0ZGVjbGluZTogZnVuY3Rpb24oKSB7XG5cdFx0ICAgIFx0XHRcdHRoaXMucnN2cGVkID0gdHJ1ZTtcblx0XHQgICAgXHRcdFx0dGhpcy5hY2NlcHRlZCA9IGZhbHNlO1xuXHRcdCAgICBcdFx0fVxuXHRcdCAgICBcdH1cblx0XHQgICAgfVxuXHQgIFx0fVxuXG5cdCAgXHQvL3ZpZXcgbW9kZWwgbWV0aG9kc1xuXHQgIFx0dm0uZXZlbnRDbGlja2VkID0gZnVuY3Rpb24oKSB7XG5cblx0ICBcdH1cblxuXHQgIFx0dm0uZm9ybWF0RGF0ZSA9IGZ1bmN0aW9uKHVuaXhUaW1lKSB7XG5cdCAgXHRcdHJldHVybiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpO1xuXHQgIFx0fVxuXG5cdFx0Ly90YWtlIGFjdGlvblxuXHRcdGFkZFdlbGNvbWVFdmVudCgpO1xuXHR9XG5cblx0cmV0dXJuICBkaXJlY3RpdmU7XG5cdFx0XG59O1xuLyogVG9vbEJhci5kaXJlY3RpdmUuanMgKi9cblxuLyoqXG4qIEBkZXNjIHRvb2xiYXIgZGlyZWN0aXZlIHRoYXQgaXMgdXNlZCBvbiB0aGUgbWFpbiBwYWdlIGFjcm9zcyB0aGUgZW50aXJlIGFwcC5cbiogQGV4YW1wbGUgPGRpdiB0b29sLWJhcj48L2Rpdj5cbiovXG5cbmFuZ3VsYXJcblx0Lm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuXHQuZGlyZWN0aXZlKCd0b29sQmFyJywgdG9vbEJhcik7XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gdG9vbEJhcigpIHtcbiAgICBsaW5rRnVuYy4kaW5qZWN0ID0gW1wic2NvcGVcIiwgXCJlbFwiLCBcImF0dHJcIiwgXCJjdHJsXCJdO1xuXHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdHJlc3RyaWN0OiAnQUVDTScsXG5cdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9kaXJlY3RpdmVzL3Rvb2xCYXIuZGlyZWN0aXZlLmh0bScsXG5cdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRzY29wZToge30sXG5cdFx0bGluazogbGlua0Z1bmMsXG5cdFx0Y29udHJvbGxlcjogVG9vbEJhckNvbnRyb2xsZXIsXG5cdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0fVxuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHtcbiAgICB9XG5cbiAgICBUb29sQmFyQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZycsICdiYWNrZW5kU2VydmljZXMnLCAndHJhZmZpY1ZhbGV0J107XG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gVG9vbEJhckNvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCBiYWNrZW5kU2VydmljZXMsIHRyYWZmaWNWYWxldCkge1xuXHQgICAgdmFyIHZtID0gdGhpcztcblxuXHQgICAgLy9sb2NhbCBjb250cm9sZXIgdmFyaWFibGVzXG5cdCAgICB2YXIgZmJDb25uZWN0ID0gYmFja2VuZFNlcnZpY2VzO1xuXHQgICAgdmFyIHRvb2xiYXJTaGVycGEgPSB0cmFmZmljVmFsZXQ7XG5cblx0ICAgIC8vbG9jYWwgdmlldyB2YXJpYWJsZXNcblx0XHRmdW5jdGlvbiBjaGVja0xvZ2luU3RhdHVzKCkge1xuXG5cdFx0XHRmYkNvbm5lY3QuY2hlY2tMb2dpblN0YXR1cygpXG5cdFx0XHQudGhlbihmdW5jdGlvbihzdGF0dXMpIHtcblx0XHRcdFx0XG5cdFx0XHRcdHZtLmxvZ2dlZEluID0gc3RhdHVzO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaCgpXG5cdFx0fVxuXG5cdFx0Ly92bSBtZXRob2RzXG5cdFx0dm0ubG9naW4gPSBmdW5jdGlvbigpIHtcblxuXHRcdH1cblxuXHRcdHZtLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0JGxvZy5pbmZvKCdsb2dnaW5nIG91dCcpO1xuXHRcdFx0XG5cdFx0XHQvL2xvZ291dFxuXHRcdFx0ZmJDb25uZWN0LmxvZ1VzZXJPdXQoKTtcblx0XHRcdFxuXHRcdFx0Ly9yZWRpcmVjdFxuXHRcdFx0dG9vbGJhclNoZXJwYS5yZWRpcmVjdFRvKCcvbG9naW4nKTtcblx0XHR9XG5cblx0XHR2bS5sb2dpblJlZ2lzdGVyZWRVc2VyID0gZnVuY3Rpb24oKSB7XG5cdFx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgcmVnaXN0ZXJlZFVzZXJTaGVycGEgPSB0cmFmZmljVmFsZXQ7XG5cblx0XHRcdC8vY29uZmlybSBhbGwgZmllbGRzIGFyZSB2YWxpZFxuXHRcdFx0aWYodHJ1ZSkge1xuXHRcdFx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XHRcdHZhciBkYXRhYmFzZSA9IGJhY2tlbmRTZXJ2aWNlcztcblx0XHRcdFx0dmFyIHJlZ2lzdGVyZWRVc2VyRGF0YSA9IHVzZXJEYXRhO1xuXG5cdFx0XHRcdC8vdmVyaWZ5IHVzZXJzIGNyZWRlbnRpYWxzXG5cdFx0XHRcdGRhdGFiYXNlLkxvZ2luUmVnaXN0ZXJlZFVzZXIodm0uZW1haWwsIHZtLnBhc3N3b3JkKVxuXHRcdFx0XHQudGhlbihmdW5jdGlvbih1c2VyQ3JlZGVudGlhbHMpIHtcblx0XHRcdFx0XHQvL2lmIG5vIHRyb3VibGUgbG9nZ2luZyBpbiB1cGRhdGUgZXJyb3Igb2JqZWN0XG5cdFx0XHRcdFx0Ly92bS5lcnJvcnMucGFzc2VzQWxsVGVzdHMgPSB0cnVlO1xuXHRcdFx0XG5cdFx0XHRcdFx0Ly9hZGQgcHJpbWFyeSBpbmZvcm1hdGlvbiB0byBsb2NhbCBtb2RlbFxuXHRcdFx0XHRcdC8vcmVnaXN0ZXJlZFVzZXJEYXRhLnNldFByaW1hcmllc0xvY2FsbHkodXNlckNyZWRlbnRpYWxzLmVtYWlsLCB1c2VyQ3JlZGVudGlhbHMubmFtZSwgdXNlckNyZWRlbnRpYWxzLnVpZCk7XG5cdFx0XHRcdFx0cmV0dXJuIHVzZXJDcmVkZW50aWFscy51aWRcblx0XHRcdFx0fSlcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24odWlkKSB7XG5cblx0XHRcdFx0XHRkYXRhYmFzZS5nZXRVc2VyQmlvKHVpZClcblx0XHRcdFx0XHQudGhlbihmdW5jdGlvbih1c2VyQmlvKSB7XG5cdFx0XHRcdFx0XHQvL3VwZGF0ZSB1c2VyRGF0YSBtb2RlbCB3aXRoIHVzZXJCaW9cblx0XHRcdFx0XHRcdHJlZ2lzdGVyZWRVc2VyRGF0YS51cGRhdGVCaW9Mb2NhbGx5KHVzZXJCaW8pO1xuXG5cdFx0XHRcdFx0XHQvL2xvYWQgdXNlciBldmVudHNcblx0XHRcdFx0XHRcdGRhdGFiYXNlLmdldFVzZXJFdmVudHModWlkKVxuXHRcdFx0XHRcdFx0LnRoZW4oZnVuY3Rpb24oYWxsRXZlbnRzRm9yVGhpc1VzZXIpIHtcblx0XHRcdFx0XHRcdFx0Ly91cGRhdGUgdXNlckRhdGEgbW9kZWwgd2l0aCB1c2VyRXZlbnRzXG5cdFx0XHRcdFx0XHRcdHJlZ2lzdGVyZWRVc2VyRGF0YS51cGRhdGVBbGxVc2VyRXZlbnRzTG9jYWxseShhbGxFdmVudHNGb3JUaGlzVXNlcik7XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKG1lc3NhZ2UpIHsgJGxvZy5pbmZvKG1lc3NhZ2UpOyB9KVxuXG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyAkbG9nLmluZm8obWVzc2FnZSk7IH0pXG5cblx0XHRcdFx0XHQvL3JlZGlyZWN0IHRvIHRoZSBuZXh0IHBhZ2UgXG5cdFx0XHRcdFx0cmVnaXN0ZXJlZFVzZXJTaGVycGEucmVkaXJlY3RUbygnL3VzZXJJbmZvcm1hdGlvbicsIHVpZCk7XG5cblx0XHRcdFx0fSlcblx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKG1lc3NhZ2UpIHsgXG5cdFx0XHRcdFx0Ly9pZiB0aGVyZSB3YXMgYW4gZXJyb3IgbG9nZ2luZyBpbiwgbGV0IHRoZSB1c2VyIGtub3dcblx0XHRcdFx0XHQvL3ZtLmVycm9ycy5tZXNzYWdlID0gbWVzc2FnZTtcblx0XHRcdFx0XHQvL3ZtLmVycm9ycy5wYXNzZXNBbGxUZXN0cyA9IGZhbHNlO1xuXHRcdFx0XHR9KVxuXG5cdFx0XHRcdC8vdXNlIHVpZCB0byBjb2xsZWN0IHVzZXIgYmlvXG5cdFx0XHRcdFxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0Ly9hY3Rpb25zXG5cdFx0Y2hlY2tMb2dpblN0YXR1cygpO1xuXG5cdFx0Ly93YXRjaGVyc1xuXHRcdCRzY29wZS4kb24oJyRyb3V0ZUNoYW5nZVN0YXJ0JywgZnVuY3Rpb24obmV4dCwgY3VycmVudCkge1xuXHRcdFx0XG5cdFx0XHRjaGVja0xvZ2luU3RhdHVzKCk7XG5cdFx0fSlcblx0fVxuXG5cdHJldHVybiAgZGlyZWN0aXZlO1xuXHRcdFxufTtcbi8qIGZvY3VzTWUuZGlyZWN0aXZlLmpzICovXG5cbi8qKlxuKiBAZGVzYyBkaXNwbGF5cyBhIGxpc3Qgb2YgYWxsIGd1ZXN0cyBpbnZpdGVkIHRvIGFuIGV2ZW50IHRoaXMgdXNlciBpcyBob3N0aW5nLlxuKiBAZXhhbXBsZSA8aW5wdXQgdHlwZT1cInRleHRcIiBmb2N1cy1tZT1cInNob3VsZEJlT3BlblwiPlxuKi9cblxuYW5ndWxhclxuXHQubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG5cdC5kaXJlY3RpdmUoJ2ZvY3VzTWUnLCBmb2N1c01lKTtcblxuZm9jdXNNZS4kaW5qZWN0ID0gWyckdGltZW91dCcsICckcGFyc2UnLCAnJGxvZyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGZvY3VzTWUoJHRpbWVvdXQsICRwYXJzZSwgJGxvZykge1xuXHR2YXIgZm9jdXNNZURpcmVjdGl2ZSA9IHtcblx0XHQvL1xuXHRcdGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuXHRcdFx0dmFyIG1vZGVsID0gJHBhcnNlKGF0dHJzLmZvY3VzTWUpO1xuXHRcdFx0XG5cdFx0XHRzY29wZS4kd2F0Y2gobW9kZWwsIGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0XHRcdCRsb2cuaW5mbygndmFsdWU9Jyx2YWx1ZSk7XG5cdFx0XHRcdGlmKHZhbHVlID09PSB0cnVlKSB7XG5cdFx0XHRcdFx0JHRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRlbGVtZW50WzBdLmZvY3VzKCk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0fVxuXG5cdFx0XHR9KTtcblx0XHRcdGVsZW1lbnQuYmluZCgnYmx1cicsZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCRsb2cuaW5mbygnYmx1cicpO1xuXHRcdFx0XHRzY29wZS4kYXBwbHkobW9kZWwuYXNzaWduKHNjb3BlLCBmYWxzZSkpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGZvY3VzTWVEaXJlY3RpdmU7XG59IiwiLyogQWRkQUd1ZXN0LmRpcmVjdGl2ZS5qcyAqL1xuXG4vKipcbiogQGRlc2MgZGlzcGxheXMgYSBsaXN0IG9mIGFsbCBndWVzdHMgaW52aXRlZCB0byBhbiBldmVudCB0aGlzIHVzZXIgaXMgaG9zdGluZy5cbiogQGV4YW1wbGUgPGFkZC1hLWd1ZXN0PjwvYWRkLWEtZ3Vlc3Q+XG4qL1xuXG5hbmd1bGFyXG5cdC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcblx0LmRpcmVjdGl2ZSgnYWRkQUd1ZXN0JywgYWRkQUd1ZXN0KTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBhZGRBR3Vlc3QoKSB7XG5cdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0cmVzdHJpY3Q6ICdBRUNNJyxcblx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2RpcmVjdGl2ZXMvYWRkQUd1ZXN0LmRpcmVjdGl2ZS5odG0nLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0c2NvcGU6IHtcblx0XHRcdGd1ZXN0TGlzdDogJz0nXG5cdFx0fSxcblx0XHRsaW5rOiBsaW5rRnVuYyxcblx0XHRjb250cm9sbGVyOiBhZGRBR3Vlc3RDb250cm9sbGVyLFxuXHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdH1cblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7XG4gICAgfVxuXG4gICAgYWRkQUd1ZXN0Q29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJywgJyRyb3V0ZVBhcmFtcycsICd2YWxpZGF0aW9uJywgJ3VzZXJEYXRhJ107XG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gYWRkQUd1ZXN0Q29udHJvbGxlcigkbG9nLCAkcm91dGVQYXJhbXMsIHZhbGlkYXRpb24sIHVzZXJEYXRhKSB7XG5cdCAgICB2YXIgdm0gPSB0aGlzO1xuXHQgICAgdmFyIGVtYWlsQ2hlY2tlciA9IHZhbGlkYXRpb247XG5cdCAgICB2YXIgaW52aXRhdGlvbk1hbmFnZXIgPSB1c2VyRGF0YTtcblxuXHQgICAgLy9sb2NhbCB2YXJpYWJsZXNcblx0ICAgIHZhciBldmVudERldGFpbHMgPSB7fTtcblxuXHQgICAgLy92bSB2YXJpYWJsZXNcblx0ICAgIHZtLnRlbXBHdWVzdCA9IHtcblx0ICAgIFx0bmFtZTogJycsXG5cdCAgICBcdGVtYWlsOiAnJyxcblx0ICAgIFx0c3RhdHVzOiAncGVuZGluZydcblx0ICAgIH1cblx0ICAgIHZtLnZhbGlkYXRpb25zID0ge1xuXHQgICAgXHRuYW1lOiB7XG5cdCAgICBcdFx0YWRkcmVzc2VkOiBmYWxzZSxcblx0ICAgIFx0XHR2YWxpZDogZmFsc2UsXG5cdCAgICBcdFx0ZXJyb3JNZXNzYWdlOiAnJ1xuXHQgICAgXHR9LFxuXHQgICAgXHRlbWFpbDoge1xuXHQgICAgXHRcdGFkZHJlc3NlZDogZmFsc2UsXG5cdCAgICBcdFx0dmFsaWQ6IGZhbHNlLFxuXHQgICAgXHRcdGVycm9yTWVzc2FnZTogJydcblx0ICAgIFx0fSxcblx0ICAgIFx0aW52aXRhdGlvbjoge1xuXHQgICAgXHRcdGlzVGhlSG9zdDogZmFsc2UsXG5cdCAgICBcdFx0YWxyZWFkeUludml0ZWQ6IGZhbHNlLFxuXHQgICAgXHRcdGVycm9yTWVzc2FnZTogJydcblx0ICAgIFx0fVxuXHQgICAgfVxuXHQgICAgdm0uaW52aXRhdGlvblZhbGlkRm9yU3VibWlzc2lvbiA9IGZhbHNlO1xuXHQgICAgdm0uc3VibWlzc2lvbkJ1dHRvbiA9IHtcblx0ICAgIFx0c3R5bGU6IHtcblx0ICAgIFx0XHRjb2xvcjoncmVkJ1xuXHQgICAgXHR9LFxuXHQgICAgXHRjbGFzczoge1xuXHQgICAgXHRcdCdjb2wteHMtMTInOiB0cnVlLFxuXHQgICAgXHRcdCdjb2wtc20tMTInOiB0cnVlLFxuXHQgICAgXHRcdCdidG4nOiB0cnVlLFxuXHQgICAgXHRcdCdidG4td2FybmluZyc6IHRydWUsXG5cdCAgICBcdFx0J2J0bi1zdWNjZXNzJzogZmFsc2Vcblx0ICAgIFx0fSxcblx0ICAgIFx0bWVzc2FnZTogJ0FkZHJlc3MgSW52aXRhdGlvbi4uLidcblx0ICAgIH1cblx0ICAgIC8vbG9jYWwgbWV0aG9kc1xuXHQgICAgZnVuY3Rpb24gdXRmOF90b19iNjQoc3RyKSB7XG5cdFx0XHRyZXR1cm4gYnRvYShzdHIpO1xuXHRcdH1cblxuXHQgICAgZnVuY3Rpb24gdmFsaWRhdGVJbnZpdGF0aW9uKCkge1xuXHQgICAgXHQvL2NoZWNrIGlmIGJvdGggaW5wdXRzIGFyZSB2YWxpZFxuXHQgICAgXHRpZih2bS52YWxpZGF0aW9ucy5uYW1lLnZhbGlkICYmIHZtLnZhbGlkYXRpb25zLmVtYWlsLnZhbGlkKSB7XG5cdCAgICBcdFx0XG5cdCAgICBcdFx0Ly9zZXQgdGhlIHZhbGlkaXR5IGZsYWdcblx0ICAgIFx0XHR2bS5pbnZpdGF0aW9uVmFsaWRGb3JTdWJtaXNzaW9uID0gdHJ1ZTtcblx0ICAgIFx0XHQvL3VwZGF0ZSB0aGUgc3VibWlzc2lvbiBidXR0b25cblx0ICAgIFx0XHR2bS5zdWJtaXNzaW9uQnV0dG9uLmNsYXNzWydidG4td2FybmluZyddID0gZmFsc2U7XG5cdCAgICBcdFx0dm0uc3VibWlzc2lvbkJ1dHRvbi5jbGFzc1snYnRuLXN1Y2Nlc3MnXSA9IHRydWU7XG5cdCAgICBcdFx0dm0uc3VibWlzc2lvbkJ1dHRvbi5tZXNzYWdlPSdJbnZpdGUgR3Vlc3QnO1xuXHQgICAgXHR9IGVsc2Uge1xuXHQgICAgXHRcdFxuXHQgICAgXHRcdC8vc2V0IHRoZSB2YWxpZGl0eSBmbGFnXG5cdCAgICBcdFx0dm0uaW52aXRhdGlvblZhbGlkRm9yU3VibWlzc2lvbiA9IGZhbHNlO1xuXHQgICAgXHRcdC8vdXBkYXRlIHRoZSBzdWJtaXNzaW9uIGJ1dHRvblxuXHQgICAgXHRcdHZtLnN1Ym1pc3Npb25CdXR0b24uY2xhc3NbJ2J0bi13YXJuaW5nJ10gPSB0cnVlO1xuXHQgICAgXHRcdHZtLnN1Ym1pc3Npb25CdXR0b24uY2xhc3NbJ2J0bi1zdWNjZXNzJ10gPSBmYWxzZTtcblx0ICAgIFx0XHR2bS5zdWJtaXNzaW9uQnV0dG9uLm1lc3NhZ2U9J0FkZHJlc3MgSW52aXRhdGlvbi4uLic7XG5cdCAgICBcdH1cblx0ICAgIH1cblxuXHQgICAgZnVuY3Rpb24gaW5pdCgpIHtcblx0ICAgIFx0Ly9sb2FkIHRoZSBldmVudCBmb3IgcmVmZXJlbmNlXG5cdCAgICBcdGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQoaW52aXRhdGlvbk1hbmFnZXIuZ2V0T25lVXNlckV2ZW50TG9jYWxseSgnaG9zdGluZycsICRyb3V0ZVBhcmFtcy5ldmVudElkKSkpIHtcblx0ICAgIFx0XHQvL2lmIHRoaXMgcGFnZSB3YXMgbG9hZGVkIGJlZm9yZSB0aGUgbW9kZWwgZ2V0IHRoZSBldmVudFxuXHQgICAgXHRcdGludml0YXRpb25NYW5hZ2VyLmdldFJlbW90ZUV2ZW50c0ZvckxvY2FsKClcblx0XHQgICAgXHQudGhlbihmdW5jdGlvbigpIHtcblx0XHQgICAgXHRcdC8vd2hlbiB0aGUgZXZlbnQgaGFzIGJlZW4gbG9hZGVkXG5cdFx0ICAgIFx0XHRldmVudERldGFpbHMgPSBpbnZpdGF0aW9uTWFuYWdlci5nZXRPbmVVc2VyRXZlbnRMb2NhbGx5KCdob3N0aW5nJywgJHJvdXRlUGFyYW1zLmV2ZW50SWQpO1xuXG5cdFx0ICAgIFx0fSlcblx0ICAgIFx0fSBlbHNlIHtcblx0ICAgIFx0XHQvL2p1c3QgZ2V0IHRoZSBtb2RlbCBsb2NhbGx5XG5cdCAgICBcdFx0ZXZlbnREZXRhaWxzID0gaW52aXRhdGlvbk1hbmFnZXIuZ2V0T25lVXNlckV2ZW50TG9jYWxseSgnaG9zdGluZycsICRyb3V0ZVBhcmFtcy5ldmVudElkKTtcblx0ICAgIFx0fVxuXHQgICAgXHQgIFx0XG5cdCAgICB9XG5cblx0ICAgIC8vdm0gbWV0aG9kc1xuXHQgICAgdm0udmFsaWRhdGVOYW1lID0gZnVuY3Rpb24oKSB7XG5cdCAgICBcdC8vdGhpcyBmaWVsZCBpcyBiZWluZyBlZGl0ZWQsIHRocm93IGZsYWdcblx0ICAgIFx0dm0udmFsaWRhdGlvbnMubmFtZS5hZGRyZXNzZWQgPSB0cnVlO1xuXG5cdCAgICBcdC8vY2hlY2sgZm9yIHZhbHVlXG5cdCAgICBcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZtLnRlbXBHdWVzdC5uYW1lKSAmJiB2bS50ZW1wR3Vlc3QubmFtZSAhPSAnJykge1xuXHQgICAgXHRcdHZtLnZhbGlkYXRpb25zLm5hbWUudmFsaWQgPSB0cnVlO1xuXHQgICAgXHRcdHZtLnZhbGlkYXRpb25zLm5hbWUuZXJyb3JNZXNzYWdlID0gJyc7XG5cdCAgICBcdH0gZWxzZSB7XG5cdCAgICBcdFx0dm0udmFsaWRhdGlvbnMubmFtZS52YWxpZCA9IGZhbHNlO1xuXHQgICAgXHRcdHZtLnZhbGlkYXRpb25zLm5hbWUuZXJyb3JNZXNzYWdlID0gJ1RoaXMgZ3Vlc3QgbmVlZHMgYSBuYW1lJztcblx0ICAgIFx0fVxuXG5cdCAgICBcdHZhbGlkYXRlSW52aXRhdGlvbigpO1xuXHQgICAgfVxuXHQgICAgdm0udmFsaWRhdGVFbWFpbCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgXHQvL3RoaXMgZmllbGQgaXMgYmVpbmcgZWRpdGVkLCB0aHJvdyBmbGFnXG5cdCAgICBcdHZtLnZhbGlkYXRpb25zLmVtYWlsLmFkZHJlc3NlZCA9IHRydWU7XG5cblx0ICAgIFx0Ly9pcyB0aGVyZSBhbiBlbWFpbCB2YWx1ZT9cblx0ICAgIFx0aWYoYW5ndWxhci5pc0RlZmluZWQodm0udGVtcEd1ZXN0LmVtYWlsKSAmJiB2bS50ZW1wR3Vlc3QuZW1haWwgIT0gJycpIHtcblx0ICAgIFx0XHRcblx0ICAgIFx0XHQvL2lmIGFuIGVtYWlsIGV4aXN0cyBjaGVjayBpdCdzIHZhbGlkaXR5XG5cdCAgICBcdFx0aWYoYW5ndWxhci5pc1VuZGVmaW5lZChlbWFpbENoZWNrZXIuZW1haWwodm0udGVtcEd1ZXN0LmVtYWlsKSkpIHtcblx0ICAgIFx0XHRcdC8vZW1haWwgaXMgdmFsaWRcblx0ICAgIFx0XHRcdHZtLnZhbGlkYXRpb25zLmVtYWlsLnZhbGlkID0gdHJ1ZTtcblx0ICAgIFx0XHRcdHZtLnZhbGlkYXRpb25zLmVtYWlsLmVycm9yTWVzc2FnZSA9ICcnO1xuXHQgICAgXHRcdH0gZWxzZSB7XG5cdCAgICBcdFx0XHQvL2dldCB0aGUgZXJyb3Jcblx0ICAgIFx0XHRcdHZtLnZhbGlkYXRpb25zLmVtYWlsLnZhbGlkID0gZmFsc2U7XG5cdCAgICBcdFx0XHR2bS52YWxpZGF0aW9ucy5lbWFpbC5lcnJvck1lc3NhZ2UgPSBlbWFpbENoZWNrZXIuZW1haWwodm0udGVtcEd1ZXN0LmVtYWlsKTtcblx0ICAgIFx0XHRcdCRsb2cuaW5mbyh2bS52YWxpZGF0aW9ucy5lbWFpbC5lcnJvck1lc3NhZ2UpO1xuXHQgICAgXHRcdH1cblxuXHQgICAgXHR9IGVsc2Uge1xuXHQgICAgXHRcdC8vdGhlcmUgaXNuJ3QgYW4gZW1haWwgeWV0XG5cdCAgICBcdFx0dm0udmFsaWRhdGlvbnMuZW1haWwudmFsaWQgPSBmYWxzZTtcblx0ICAgIFx0XHR2bS52YWxpZGF0aW9ucy5lbWFpbC5lcnJvck1lc3NhZ2UgPSAnTm90IGEgdmFsaWQgZW1haWwnO1xuXHQgICAgXHR9XG5cblx0ICAgIFx0dmFsaWRhdGVJbnZpdGF0aW9uKCk7XG5cdCAgICB9XG5cblx0ICAgIHZtLnNob3dOYW1lRXJyb3IgPSBmdW5jdGlvbigpIHtcblx0ICAgIFx0aWYoIXZtLnZhbGlkYXRpb25zLm5hbWUudmFsaWQgJiYgdm0udmFsaWRhdGlvbnMubmFtZS5hZGRyZXNzZWQpIHJldHVybiB0cnVlO1xuXHQgICAgXHRlbHNlIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblxuXHQgICAgdm0uc2hvd0VtYWlsRXJyb3IgPSBmdW5jdGlvbigpIHtcblx0ICAgIFx0aWYoIXZtLnZhbGlkYXRpb25zLmVtYWlsLnZhbGlkICYmIHZtLnZhbGlkYXRpb25zLmVtYWlsLmFkZHJlc3NlZCkgcmV0dXJuIHRydWU7XG5cdCAgICBcdGVsc2UgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXG5cdCAgICB2bS5zaG93SW52aXRhdGlvbkVycm9yID0gZnVuY3Rpb24oKSB7XG5cdCAgICBcdGlmKCB2bS52YWxpZGF0aW9ucy5pbnZpdGF0aW9uLmlzVGhlSG9zdCB8fFxuXHQgICAgXHRcdHZtLnZhbGlkYXRpb25zLmludml0YXRpb24uYWxyZWFkeUludml0ZWQgKSBcblx0ICAgIFx0XHRcdHJldHVybiB0cnVlO1xuXHQgICAgXHRlbHNlIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblxuXHQgICAgdm0uc3VibWl0R3Vlc3RJbnZpdGF0aW9uID0gZnVuY3Rpb24oKSB7XG5cdCAgICBcdFxuXHQgICAgXHQvL2lmIHRoZSByZXF1aXJubWVudHMgYXJlIGZ1bGZpbGxlZC4uLlxuXHQgICAgXHRpZih2bS5pbnZpdGF0aW9uVmFsaWRGb3JTdWJtaXNzaW9uKSB7XG5cdCAgICBcdFx0Ly9tYWtlIHN1cmUgdGhlIGludml0YXRpb24gaXMgbm90IHRvIHRoZSBjdXJyZW50IHVzZXJcblx0ICAgIFx0XHRpZihpbnZpdGF0aW9uTWFuYWdlci50aGlzSXNUaGVIb3N0RW1haWwodm0udGVtcEd1ZXN0LmVtYWlsLCAkcm91dGVQYXJhbXMuZXZlbnRJZCkpIHtcblx0XHRcdFx0XHR2bS52YWxpZGF0aW9ucy5pbnZpdGF0aW9uLmlzVGhlSG9zdCA9IHRydWU7XG5cdFx0XHRcdFx0dm0udmFsaWRhdGlvbnMuaW52aXRhdGlvbi5lcnJvck1lc3NhZ2UgPSAnTm8gbmVlZCB0byBpbnZpdGUgdGhlIGhvc3QnO1xuXHRcdFx0XHRcdHJldHVybiAwO1xuXHQgICAgXHRcdH0gZWxzZSB7XG5cdCAgICBcdFx0XHR2bS52YWxpZGF0aW9ucy5pbnZpdGF0aW9uLmlzVGhlSG9zdCA9IGZhbHNlO1xuXHQgICAgXHRcdH1cblx0ICAgIFx0XHRcblx0XHQgICAgXHQvL21ha2Ugc3VyZSB0aGlzIHBlcnNvbiBoYXMgbm90IGFscmVhZHkgYmVlbiBpbnZpdGVkXG5cdFx0ICAgIFx0Lypcblx0XHQgICAgXHRpZihpbnZpdGF0aW9uTWFuYWdlci5ndWVzdEludml0ZWRBbHJlYWR5KHZtLnRlbXBHdWVzdC5lbWFpbCwgJHJvdXRlUGFyYW1zLmV2ZW50SWQpKSB7XG5cdFx0ICAgIFx0XHR2bS52YWxpZGF0aW9ucy5pbnZpdGF0aW9uLmFscmVhZHlJbnZpdGVkID0gdHJ1ZTtcblx0XHRcdFx0XHR2bS52YWxpZGF0aW9ucy5pbnZpdGF0aW9uLmVycm9yTWVzc2FnZSA9ICdUaGlzIGd1ZXN0IGhhcyBhbHJlYWR5IGJlZW4gaW52aXRlZCc7XG5cdFx0XHRcdFx0cmV0dXJuIDA7XG5cdCAgICBcdFx0fSBlbHNlIHtcblx0ICAgIFx0XHRcdHZtLnZhbGlkYXRpb25zLmludml0YXRpb24uYWxyZWFkeUludml0ZWQgPSBmYWxzZTtcblx0ICAgIFx0XHR9Ki9cblxuXHQgICAgXHRcdC8vaWYgdGhpcyBwZXJzb24gaXMgYSByZWdpc3RlcmVkIHVzZXIgZ2V0IHRoZWlyIHVzZXIgaWRcblx0ICAgIFx0XHRpbnZpdGF0aW9uTWFuYWdlci5nZXRVc2VySWRGb3JHdWVzdCh2bS50ZW1wR3Vlc3QuZW1haWwpXG5cdCAgICBcdFx0LnRoZW4oZnVuY3Rpb24odWlkKSB7XG5cdCAgICBcdFx0XHRcblx0ICAgIFx0XHRcdHJldHVybiB1aWQ7XG5cdCAgICBcdFx0fSlcblx0ICAgIFx0XHQudGhlbihmdW5jdGlvbih1aWQpIHtcblx0ICAgIFx0XHRcdC8vdXNlIHRoYXQgdWlkIHRvIHJlZ2lzdGVyIHRoZSB1c2VyXG5cdCAgICBcdFx0XHQvL2FkZCB0aGUgcGVyc29uIHRvIHRoZSBob3N0J3MgTE9DQUwgZ3Vlc3QgbGlzdFxuXHQgICAgXHRcdFx0XG5cblx0ICAgIFx0XHRcdGlmKCFhbmd1bGFyLmlzT2JqZWN0KHZtLmd1ZXN0TGlzdCkpIHtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0dm0uZ3Vlc3RMaXN0ID0ge307XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vY3JlYXRlIHRoZSBndWVzdCB0byBzYXZlXG5cdFx0XHRcdFx0dmFyIGd1ZXN0QmVpbmdBZGRlZCA9IHZtLnRlbXBHdWVzdDtcblxuXHQgICAgXHRcdFx0dm0uZ3Vlc3RMaXN0W3VpZF0gPSBndWVzdEJlaW5nQWRkZWQ7XG5cblx0ICAgIFx0XHRcdHZtLnRlbXBHdWVzdCA9IHtcblx0XHRcdFx0ICAgIFx0bmFtZTogJycsXG5cdFx0XHRcdCAgICBcdGVtYWlsOiAnJyxcblx0XHRcdFx0ICAgIFx0c3RhdHVzOiAncGVuZGluZydcblx0XHRcdFx0ICAgIH07XG5cblx0ICAgIFx0XHR9KVxuXHQgICAgXHRcdC50aGVuKGZ1bmN0aW9uKCkge1xuXHQgICAgXHRcdFx0Ly9hZGQgdGhpcyBldmVudCB0byB0aGUgdXNlcnMnIHBlbmRpbmcgbGlzdFxuXHQgICAgXHRcdFx0LyppbnZpdGF0aW9uTWFuYWdlci51cGRhdGVQZW5kaW5nRXZlbnRzTGlzdEZvclVzZXIoKSovXG5cdCAgICBcdFx0fSlcblx0ICAgIFx0XHQudGhlbihmdW5jdGlvbigpIHtcblx0ICAgIFx0XHRcdC8vcmVtb3ZlIHRoZSAndXBkYXRlZCcgZmllbGQgaWYgbmVlZCBiZVxuXHQgICAgXHRcdH0pXG5cdCAgICBcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yTWVzc2FnZSkge1xuXHQgICAgXHRcdFx0Ly9hc3N1bWluZyBubyB1aWQgd2FzIGZvdW5kIGp1c3QgdXNlIHRoZSBlbWFpbFxuXHQgICAgXHRcdFx0JGxvZy5pbmZvKGVycm9yTWVzc2FnZSk7XG5cdCAgICBcdFx0XHRcblx0ICAgIFx0XHRcdC8vY3JlYXRlIHRoZSBlbWFpbElkXG5cdCAgICBcdFx0XHRpZEJ5RW1haWwgPSB1dGY4X3RvX2I2NCh2bS50ZW1wR3Vlc3QuZW1haWwpO1xuXHQgICAgXHRcdFx0Ly9hZGQgdGhpcyBwZXJzb24gdG8gdGhlIGhvc3QncyBndWVzdCBsaXN0XG5cdCAgICBcdFx0XHRpZighYW5ndWxhci5pc09iamVjdCh2bS5ndWVzdExpc3QpKSB7XG5cdCAgICBcdFx0XHRcdFxuXHRcdFx0XHRcdFx0dm0uZ3Vlc3RMaXN0ID0ge307XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vY3JlYXRlIHRoZSBndWVzdCB0byBzYXZlXG5cdFx0XHRcdFx0dmFyIGd1ZXN0QmVpbmdBZGRlZCA9IHZtLnRlbXBHdWVzdDtcblxuXHQgICAgXHRcdFx0dm0uZ3Vlc3RMaXN0W2lkQnlFbWFpbF0gPSBndWVzdEJlaW5nQWRkZWQ7XG5cblx0XHRcdCAgICBcdC8qaW52aXRhdGlvbk1hbmFnZXIuYWRkR3Vlc3RUb0hvc3RHdWVzdExpc3Qodm0udGVtcEd1ZXN0Lm5hbWUsIHZtLnRlbXBHdWVzdC5lbWFpbCwgdW5kZWZpbmVkLCAkcm91dGVQYXJhbXMuZXZlbnRJZCwgJHJvdXRlUGFyYW1zLnVpZClcblx0XHRcdCAgICBcdC50aGVuKGZ1bmN0aW9uKHBvc2l0aXZlUmVzdWx0KSB7XG5cdFx0XHQgICAgXHRcdCRsb2cuaW5mbygnZ290IHRoaXMgcmVzdWx0OiAnICsgcG9zaXRpdmVSZXN1bHQpO1xuXHRcdFx0ICAgIFx0fSlcblx0XHRcdCAgICBcdC50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdFx0ICAgIFx0XHQvL2FkZCB0aGlzIGV2ZW50IHRvIHRoZSBndWVzdCdzIHBlbmRpbmcgbGlzdFxuXHRcdFx0ICAgIFx0XHRpbnZpdGF0aW9uTWFuYWdlci51cGRhdGVQZW5kaW5nRXZlbnRzTGlzdEZvckd1ZXN0KCRyb3V0ZVBhcmFtcy5ldmVudElkKVxuXHRcdFx0ICAgIFx0fSlcblx0XHRcdCAgICBcdC50aGVuKGZ1bmN0aW9uKCkge1xuXHQgICAgXHRcdFx0Ly9yZW1vdmUgdGhlICd1cGRhdGVkJyBmaWVsZCBpZiBuZWVkIGJlXG5cdCAgICBcdFx0XHR9KVxuXHRcdFx0ICAgIFx0LmNhdGNoKGZ1bmN0aW9uKG5lZ2F0aXZlUmVzdWx0KSB7XG5cdFx0XHQgICAgXHRcdCRsb2cuaW5mbygnZ290IHRoaXMgcmVzdWx0OiAnICsgcG9zaXRpdmVSZXN1bHQpO1xuXHRcdFx0ICAgIFx0fSkqL1xuXG5cdFx0XHQgICAgXHR2bS50ZW1wR3Vlc3QgPSB7XG5cdFx0XHRcdCAgICBcdG5hbWU6ICcnLFxuXHRcdFx0XHQgICAgXHRlbWFpbDogJycsXG5cdFx0XHRcdCAgICBcdHN0YXR1czogJ3BlbmRpbmcnXG5cdFx0XHRcdCAgICB9IFxuXG5cdCAgICBcdFx0fSlcblx0ICAgIFx0XHRcblx0ICAgIFx0fVxuXHQgICAgXHRcblx0ICAgIH1cblxuXHRcdC8vYWN0aW9uc1xuXHRcdGluaXQoKTtcblxuXHR9XG5cblx0cmV0dXJuICBkaXJlY3RpdmU7XG5cdFx0XG59OyIsIi8qIEhvc3RlZEV2ZW50c0xpc3QuZGlyZWN0aXZlLmpzICovXG5cbi8qKlxuKiBAZGVzYyBkaXNwbGF5cyBhIGxpc3Qgb2YgYWxsIHRoZSBldmVudHMgdGhlIGN1cnJlbnQgdXNlciBpcyBob3N0aW5nLlxuKiBAZXhhbXBsZSA8aG9zdGVkLWV2ZW50cy1saXN0PjwvaG9zdGVkLWV2ZW50cy1saXN0PlxuKi9cblxuYW5ndWxhclxuXHQubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG5cdC5kaXJlY3RpdmUoJ2hvc3RlZEV2ZW50c0xpc3QnLCBob3N0ZWRFdmVudHNMaXN0KTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBob3N0ZWRFdmVudHNMaXN0KCkge1xuXHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdHJlc3RyaWN0OiAnQUVDTScsXG5cdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9kaXJlY3RpdmVzL2hvc3RlZEV2ZW50c0xpc3QuZGlyZWN0aXZlLmh0bScsXG5cdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRzY29wZToge1xuXHRcdFx0aG9zdGVkRXZlbnRzOiAnPScsXG5cdFx0XHR1c2VySWQ6ICc9J1xuXHRcdH0sXG5cdFx0bGluazogbGlua0Z1bmMsXG5cdFx0Y29udHJvbGxlcjogaG9zdGVkRXZlbnRzTGlzdENvbnRyb2xsZXIsXG5cdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0fVxuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHtcblx0XHRzY29wZS4kd2F0Y2goJ2hvc3RlZEV2ZW50cycsIGZ1bmN0aW9uKG5leHQsIGN1cnJlbnQpIHtcblx0XHRcdC8vc29tZXRoaW5nXG5cdFx0fSk7XG4gICAgfVxuXG4gICAgaG9zdGVkRXZlbnRzTGlzdENvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICd0cmFmZmljVmFsZXQnXTtcbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBob3N0ZWRFdmVudHNMaXN0Q29udHJvbGxlcigkbG9nLCB0cmFmZmljVmFsZXQpIHtcblx0ICAgIHZhciB2bSA9IHRoaXM7XG5cblx0ICAgIC8vbG9jYWwgdmFyaWFibGVzXG5cdCAgICB2YXIgaG9zdGVkRXZlbnRzU2hlcnBhID0gdHJhZmZpY1ZhbGV0O1xuXG5cdCAgICAvL3ZpZXcgbW9kZWwgdmFyaWFibGVzXG5cdCAgICB2bS5ndWVzdHNBcmVJbnZpdGVkID0gZmFsc2U7XG5cblx0ICAgIC8vbG9jYWwgbWV0aG9kc1xuXHQgICAgZnVuY3Rpb24gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKSB7XG5cdFx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gY291bnRHdWVzdHMobGlzdCkge1xuXHRcdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlXG5cdFx0XHR2YXIgY291bnRlciA9IDA7XG5cblx0XHRcdC8vaWYgd2UncmUgY291bnRpbmcsIHRoZW4gdGhlcmUncyBhIGxpc3QsIHNvIHRocm93IHRoZSBmbGFnXG5cdFx0XHR2bS5ndWVzdHNBcmVJbnZpdGVkID0gdHJ1ZTtcblxuXHRcdFx0T2JqZWN0LmtleXNbbGlzdF0uZm9yRWFjaChmdW5jdGlvbihndWVzdCkge1xuXHRcdFx0XHRjb3VudGVyKys7XG5cdFx0XHR9KVxuXG5cdFx0XHRyZXR1cm4gY291bnRlcjtcblx0XHR9XG5cblx0XHQvL3ZpZXcgbW9kZWwgbWV0aG9kc1xuXHRcdHZtLmZvcm1hdERhdGUgPSBmdW5jdGlvbih1bml4VGltZSkge1xuXHRcdFx0Ly9yZWZvcm1hdCB0aGUgdGltZVxuXHRcdFx0XG5cdFx0XHRyZXR1cm4gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKTtcblx0XHR9XG5cblx0XHR2bS5ndWVzdHNBdHRlbmRpbmcgPSBmdW5jdGlvbihndWVzdExpc3QpIHtcblx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGd1ZXN0TGlzdCkpIHtcblx0XHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoZ3Vlc3RMaXN0WydhdHRlbmRpbmcnXSkpIHJldHVybiBjb3VudEd1ZXN0cyhndWVzdExpc3RbJ2F0dGVuZGluZyddKTtcblx0XHRcdFx0ZWxzZSByZXR1cm4gMDtcblx0XHRcdH1cblx0XHRcdGVsc2UgcmV0dXJuIDA7XG5cdFx0fVxuXG5cdFx0dm0uZ3Vlc3RzSW52aXRlZCA9IGZ1bmN0aW9uKGd1ZXN0TGlzdCkge1xuXHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoZ3Vlc3RMaXN0KSkge1xuXHRcdFx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XHRcdHZhciBndWVzdENvdW50ID0geyBhdHRlbmRpbmc6IDAsIHBlbmRpbmc6IDAsIGRlY2xpbmVkOiAwIH07XG5cblx0XHRcdFx0Ly9sb2NhbCBtZXRob2RzXG5cdFx0XHRcdGZ1bmN0aW9uIHRvdGFsR3Vlc3RDb3VudCgpIHtcblx0XHRcdFx0XHRyZXR1cm4gZ3Vlc3RDb3VudC5hdHRlbmRpbmcgKyBndWVzdENvdW50LnBlbmRpbmcgKyBndWVzdENvdW50LmRlY2xpbmVkO1xuXHRcdFx0XHR9IFxuXG5cdFx0XHRcdC8vY2hlY2sgdmFsdWVzXG5cdFx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGd1ZXN0TGlzdFsnYXR0ZW5kaW5nJ10pKSBndWVzdENvdW50LmF0dGVuZGluZyA9IGNvdW50R3Vlc3RzKGd1ZXN0TGlzdFsnYXR0ZW5kaW5nJ10pO1xuXHRcdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChndWVzdExpc3RbJ3BlbmRpbmcnXSkpIGd1ZXN0Q291bnQucGVuZGluZyA9IGNvdW50R3Vlc3RzKGd1ZXN0TGlzdFsncGVuZGluZyddKTtcblx0XHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoZ3Vlc3RMaXN0WydkZWNsaW5lZCddKSkgZ3Vlc3RDb3VudC5kZWNsaW5lZCA9IGNvdW50R3Vlc3RzKGd1ZXN0TGlzdFsnZGVjbGluZWQnXSk7XG5cblx0XHRcdFx0cmV0dXJuIHRvdGFsR3Vlc3RDb3VudCgpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSByZXR1cm4gMDtcblx0XHR9XG5cblx0XHR2bS5wZXJjZW50YWdlQXR0ZW5kaW5nID0gZnVuY3Rpb24oZ3Vlc3RMaXN0KSB7XG5cdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChndWVzdExpc3QpKSB7XG5cdFx0XHRcdHJldHVybiAoZ3Vlc3RzQXR0ZW5kaW5nKGd1ZXN0bGlzdCkgLyBndWVzdHNJbnZpdGVkKGd1ZXN0TGlzdCkpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSByZXR1cm4gMDtcblx0XHR9XG5cblx0XHR2bS5ldmVudENsaWNrZWQgPSBmdW5jdGlvbihldmVudElEKSB7XG5cdFx0XHQvL3JlZGlyZWN0IHRvIHRoZSBldmVudCBwYWdlXG5cdFx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIHRvOiAvZXZlbnQvJyArIGV2ZW50SUQgKyAnLycgKyB2bS5ob3N0ZWRFdmVudHNbZXZlbnRJRF0uaG9zdC51aWQgKyAnLycgKyB2bS51c2VySWQpO1xuXHRcdFx0aG9zdGVkRXZlbnRzU2hlcnBhLnJlZGlyZWN0VG8oJy9ldmVudCcsIGV2ZW50SUQsIHZtLmhvc3RlZEV2ZW50c1tldmVudElEXS5ob3N0LnVpZCwgdm0udXNlcklkKTtcblx0XHR9XG5cblx0XHR2bS5pbnZpdGVHdWVzdHMgPSBmdW5jdGlvbihldmVudElkKSB7XG5cdFx0XHRob3N0ZWRFdmVudHNTaGVycGEucmVkaXJlY3RUbygnL2V2ZW50L2hvc3QnLCBldmVudElkLCB2bS5ob3N0ZWRFdmVudHNbZXZlbnRJZF0uaG9zdC51aWQsICczJyk7XG5cdFx0fVxuXG5cdFx0Ly9hY3Rpb25zXG5cdH1cblxuXHRyZXR1cm4gIGRpcmVjdGl2ZTtcblx0XHRcbn07IiwiLyogSG9zdGVkR3Vlc3RMaXN0LmRpcmVjdGl2ZS5qcyAqL1xuXG4vKipcbiogQGRlc2MgZGlzcGxheXMgYSBsaXN0IG9mIGFsbCBndWVzdHMgaW52aXRlZCB0byBhbiBldmVudCB0aGlzIHVzZXIgaXMgaG9zdGluZy5cbiogQGV4YW1wbGUgPGhvc3RlZC1ndWVzdC1saXN0PjwvaG9zdGVkLWd1ZXN0LWxpc3Q+XG4qL1xuXG5hbmd1bGFyXG5cdC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcblx0LmRpcmVjdGl2ZSgnaG9zdGVkR3Vlc3RMaXN0JywgaG9zdGVkR3Vlc3RMaXN0KTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBob3N0ZWRHdWVzdExpc3QoKSB7XG5cdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0cmVzdHJpY3Q6ICdBRUNNJyxcblx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2RpcmVjdGl2ZXMvaG9zdGVkR3Vlc3RMaXN0LmRpcmVjdGl2ZS5odG0nLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0c2NvcGU6IHtcblx0XHRcdGd1ZXN0TGlzdDogJz0nLFxuXHRcdH0sXG5cdFx0bGluazogbGlua0Z1bmMsXG5cdFx0Y29udHJvbGxlcjogaG9zdGVkR3Vlc3RMaXN0Q29udHJvbGxlcixcblx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHR9XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCwgYXR0ciwgY3RybCkge1xuXHRcdHNjb3BlLiR3YXRjaCgnZ3Vlc3RMaXN0JywgZnVuY3Rpb24oKSB7XG5cdFx0XHRzY29wZS4kYXBwbHk7XG5cdFx0fSk7XG4gICAgfVxuXG4gICAgaG9zdGVkR3Vlc3RMaXN0Q29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJywgJyRyb3V0ZVBhcmFtcycsICd1c2VyRGF0YSddO1xuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIGhvc3RlZEd1ZXN0TGlzdENvbnRyb2xsZXIoJGxvZywgJHJvdXRlUGFyYW1zLCB1c2VyRGF0YSkge1xuXHQgICAgdmFyIHZtID0gdGhpcztcblxuXHQgICAgLy9sb2NhbCB2YXJpYWJsZXNcblx0ICAgIHZtLmlzQUd1ZXN0TGlzdCA9IGZhbHNlO1xuXG5cdCAgICAvL2xvY2FsIG1ldGhvZHNcblx0ICAgIGZ1bmN0aW9uIHRoZXJlSXNBR3Vlc3RMaXN0KCkge1xuXHQgICAgXHQvL2NoZWNrIGZvciBhIGd1ZXN0TGlzdCBvYmplY3Rcblx0ICAgIFx0aWYoYW5ndWxhci5pc0RlZmluZWQodm0uZ3Vlc3RMaXN0KSAmJiB2bS5ndWVzdExpc3QgIT0gJycpIHtcblx0ICAgIFx0XHR2bS5pc0FHdWVzdExpc3QgPSB0cnVlO1xuXHQgICAgXHRcdHJldHVybiB0cnVlO1xuXHQgICAgXHR9IGVsc2Uge1xuXHQgICAgXHRcdHZtLmlzQUd1ZXN0TGlzdCA9IGZhbHNlO1xuXHQgICAgXHRcdHJldHVybiBmYWxzZTtcblx0ICAgIFx0fVxuXHQgICAgfVxuXG5cdCAgICBmdW5jdGlvbiBpbml0KCkge1xuXHQgICAgXHQvL2xvY2FsIHZhcmlhYmxlc1xuXHQgICAgXHR2YXIgbGlzdENvbGxlY3RvciA9IHVzZXJEYXRhO1xuXG5cdCAgICBcdC8vaWYgdGhlcmUgaXNuJ3QgYSBndWVzdCBsaXN0LCBnbyBvdXQgdG8gdGhlIGRiIHRvIGdldCBpdFxuXG5cdFx0XHRpZighdGhlcmVJc0FHdWVzdExpc3QoKSkge1xuXHRcdFx0XHQkbG9nLmluZm8oJ2dvaW5nIGFmdGVyIHRoZSBsaXN0Jyk7XG5cdFx0XHRcdGxpc3RDb2xsZWN0b3IuZ2V0RXZlbnRHdWVzdExpc3QoJHJvdXRlUGFyYW1zLnVpZCwgJHJvdXRlUGFyYW1zLmV2ZW50SWQpXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKHJldHVybmVkTGlzdCkge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnZ290IHRoZSBsaXN0Jyk7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKHJldHVybmVkTGlzdCk7XG5cdFx0XHRcdFx0dm0uZ3Vlc3RMaXN0ID0gcmV0dXJuZWRMaXN0O1xuXHRcdFx0XHRcdGlmKGFuZ3VsYXIuaXNPYmplY3QocmV0dXJuZWRMaXN0KSkgdm0uaXNBR3Vlc3RMaXN0ID0gdHJ1ZTtcblx0XHRcdFx0fSlcblx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7IFxuXHRcdFx0XHRcdCRsb2cuaW5mbygnVGhlcmUgd2FzIGFuIGVycm9yOiAnKyBlcnJvcik7XG5cdFx0XHRcdH0pXG5cdFx0XHR9XG5cdCAgICB9XG5cdCAgICAvL3ZtIG1ldGhvZHNcblxuXHRcdC8vYWN0aW9uc1xuXHRcdGluaXQoKTtcblxuXHR9XG5cblx0cmV0dXJuICBkaXJlY3RpdmU7XG5cdFx0XG59OyIsIi8qIFBlbmRpbmdFdmVudHNMaXN0LmRpcmVjdGl2ZS5qcyAqL1xuXG4vKipcbiogQGRlc2MgZGlzcGxheXMgYSBsaXN0IG9mIGFsbCB0aGUgZXZlbnRzIHRoZSBjdXJyZW50IHVzZXIgaXMgaG9zdGluZy5cbiogQGV4YW1wbGUgPHBlbmRpbmctZXZlbnRzLWxpc3Q+PC9wZW5kaW5nLWV2ZW50cy1saXN0PlxuKi9cblxuYW5ndWxhclxuXHQubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG5cdC5kaXJlY3RpdmUoJ3BlbmRpbmdFdmVudHNMaXN0JywgcGVuZGluZ0V2ZW50c0xpc3QpO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHBlbmRpbmdFdmVudHNMaXN0KCkge1xuXHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdHJlc3RyaWN0OiAnQUVDTScsXG5cdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9kaXJlY3RpdmVzL3BlbmRpbmdFdmVudHNMaXN0LmRpcmVjdGl2ZS5odG0nLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0c2NvcGU6IHtcblx0XHRcdHBlbmRpbmdFdmVudHM6ICc9Jyxcblx0XHRcdHVzZXJJZDogJz0nXG5cdFx0fSxcblx0XHRsaW5rOiBsaW5rRnVuYyxcblx0XHRjb250cm9sbGVyOiBwZW5kaW5nRXZlbnRzTGlzdENvbnRyb2xsZXIsXG5cdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0fVxuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHtcblx0XHRzY29wZS4kd2F0Y2goJ2hvc3RlZEV2ZW50cycsIGZ1bmN0aW9uKG5leHQsIGN1cnJlbnQpIHtcblx0XHRcdC8vc29tZXRoaW5nXG5cdFx0fSk7XG4gICAgfVxuXG4gICAgcGVuZGluZ0V2ZW50c0xpc3RDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAndHJhZmZpY1ZhbGV0J107XG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gcGVuZGluZ0V2ZW50c0xpc3RDb250cm9sbGVyKCRsb2csIHRyYWZmaWNWYWxldCkge1xuXHQgICAgdmFyIHZtID0gdGhpcztcblxuXHQgICAgLy9sb2NhbCB2YXJpYWJsZXNcblxuXHQgICAgLy92aWV3IG1vZGVsIHZhcmlhYmxlc1xuXHQgICAgdm0ucGVuZGluZ0V2ZW50cyA9IHt9XG5cblx0ICAgIC8vbG9jYWwgbWV0aG9kc1xuXHRcdGZ1bmN0aW9uIHVuaXhUaW1lVG9EYXRlVGltZSh1bml4VGltZSkge1xuXHRcdFx0cmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KHVuaXhUaW1lKSk7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIGRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSkge1xuXHRcdFx0cmV0dXJuIERhdGUucGFyc2UoZGF0ZVRpbWUpO1xuXHRcdH07XG5cdCAgXHRcblx0ICBcdGZ1bmN0aW9uIGJ1aWxkVG9tb3Jyb3dEYXRlKCkge1xuXHQgIFx0XHR2YXIgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuXG5cdCAgICBcdC8vcm91bmQgdG8gdGhlIG5lYXJlc3QgaG91ciwgY3V0IG9mZiBhbnl0aGluZyBzbWFsbGVyXG5cdFx0XHR0b2RheS5zZXRIb3Vycyh0b2RheS5nZXRIb3VycygpICsgTWF0aC5yb3VuZCh0b2RheS5nZXRNaW51dGVzKCkvNjApKTtcblx0XHRcdHRvZGF5LnNldE1pbnV0ZXMoMCk7XG5cdFx0XHR0b2RheS5zZXRTZWNvbmRzKDApO1xuXHRcdFx0dG9kYXkuc2V0TWlsbGlzZWNvbmRzKDApO1xuXG5cdCAgICBcdHRvZGF5ID0gZGF0ZVRpbWVUb1VuaXhUaW1lKHRvZGF5KTtcblxuXHQgICAgXHR2YXIgdG9tb3Jyb3cgPSB0b2RheSArICgxMDAwKjYwKjYwKjI0KTtcblx0ICAgIFx0XG5cdCAgICBcdHJldHVybiB0b21vcnJvdztcblx0ICAgIH1cblxuXHQgIFx0ZnVuY3Rpb24gYWRkV2VsY29tZUV2ZW50KCkge1xuXHQgIFx0XHR2bS5wZW5kaW5nRXZlbnRzID0ge1xuXHRcdCAgICBcdHdlbGNvbWU6IHtcblx0XHQgICAgXHRcdG5hbWU6ICdNZWV0LXVwIEV2ZW50IFBsYW5uZXIgV2VsY29tZSBFdmVudCcsXG5cdFx0ICAgIFx0XHRtZXNzYWdlOiAnVGhhbmtzIGZvciB0cnlpbmcgb3V0IE1lZXQtdXAgRXZlbnQgUGxhbm5lciEgIENsaWNrIGhlcmUgdG8gbGVhcm4gbW9yZS4nLFxuXHRcdCAgICBcdFx0ZXZlbnRUaW1lczoge1xuXHRcdCAgICBcdFx0XHRlbmQ6IChidWlsZFRvbW9ycm93RGF0ZSgpICsgKDEwMDAqNjAqNjAqMykpLFxuXHRcdCAgICBcdFx0XHRzdGFydDogYnVpbGRUb21vcnJvd0RhdGUoKVxuXHRcdCAgICBcdFx0fSxcblx0XHQgICAgXHRcdHJzdnBlZDogZmFsc2UsXG5cdFx0ICAgIFx0XHRhY2NlcHRlZDogZmFsc2UsXG5cdFx0ICAgIFx0XHRhY2NlcHQ6IGZ1bmN0aW9uKCkge1xuXHRcdCAgICBcdFx0XHR0aGlzLnJzdnBlZCA9IHRydWU7XG5cdFx0ICAgIFx0XHRcdHRoaXMuYWNjZXB0ZWQgPSB0cnVlO1xuXHRcdCAgICBcdFx0fSxcblx0XHQgICAgXHRcdGRlY2xpbmU6IGZ1bmN0aW9uKCkge1xuXHRcdCAgICBcdFx0XHR0aGlzLnJzdnBlZCA9IHRydWU7XG5cdFx0ICAgIFx0XHRcdHRoaXMuYWNjZXB0ZWQgPSBmYWxzZTtcblx0XHQgICAgXHRcdH1cblx0XHQgICAgXHR9XG5cdFx0ICAgIH1cblx0ICBcdH1cblxuXHQgIFx0Ly92aWV3IG1vZGVsIG1ldGhvZHNcblx0ICBcdHZtLmV2ZW50Q2xpY2tlZCA9IGZ1bmN0aW9uKCkge1xuXG5cdCAgXHR9XG5cblx0ICBcdHZtLmZvcm1hdERhdGUgPSBmdW5jdGlvbih1bml4VGltZSkge1xuXHQgIFx0XHRyZXR1cm4gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKTtcblx0ICBcdH1cblxuXHRcdC8vdGFrZSBhY3Rpb25cblx0XHRhZGRXZWxjb21lRXZlbnQoKTtcblx0fVxuXG5cdHJldHVybiAgZGlyZWN0aXZlO1xuXHRcdFxufTsiLCIvKiBUb29sQmFyLmRpcmVjdGl2ZS5qcyAqL1xuXG4vKipcbiogQGRlc2MgdG9vbGJhciBkaXJlY3RpdmUgdGhhdCBpcyB1c2VkIG9uIHRoZSBtYWluIHBhZ2UgYWNyb3NzIHRoZSBlbnRpcmUgYXBwLlxuKiBAZXhhbXBsZSA8ZGl2IHRvb2wtYmFyPjwvZGl2PlxuKi9cblxuYW5ndWxhclxuXHQubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG5cdC5kaXJlY3RpdmUoJ3Rvb2xCYXInLCB0b29sQmFyKTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiB0b29sQmFyKCkge1xuXHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdHJlc3RyaWN0OiAnQUVDTScsXG5cdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9kaXJlY3RpdmVzL3Rvb2xCYXIuZGlyZWN0aXZlLmh0bScsXG5cdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRzY29wZToge30sXG5cdFx0bGluazogbGlua0Z1bmMsXG5cdFx0Y29udHJvbGxlcjogVG9vbEJhckNvbnRyb2xsZXIsXG5cdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0fVxuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHtcbiAgICB9XG5cbiAgICBUb29sQmFyQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZycsICdiYWNrZW5kU2VydmljZXMnLCAndHJhZmZpY1ZhbGV0J107XG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gVG9vbEJhckNvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCBiYWNrZW5kU2VydmljZXMsIHRyYWZmaWNWYWxldCkge1xuXHQgICAgdmFyIHZtID0gdGhpcztcblxuXHQgICAgLy9sb2NhbCBjb250cm9sZXIgdmFyaWFibGVzXG5cdCAgICB2YXIgZmJDb25uZWN0ID0gYmFja2VuZFNlcnZpY2VzO1xuXHQgICAgdmFyIHRvb2xiYXJTaGVycGEgPSB0cmFmZmljVmFsZXQ7XG5cblx0ICAgIC8vbG9jYWwgdmlldyB2YXJpYWJsZXNcblx0XHRmdW5jdGlvbiBjaGVja0xvZ2luU3RhdHVzKCkge1xuXG5cdFx0XHRmYkNvbm5lY3QuY2hlY2tMb2dpblN0YXR1cygpXG5cdFx0XHQudGhlbihmdW5jdGlvbihzdGF0dXMpIHtcblx0XHRcdFx0XG5cdFx0XHRcdHZtLmxvZ2dlZEluID0gc3RhdHVzO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaCgpXG5cdFx0fVxuXG5cdFx0Ly92bSBtZXRob2RzXG5cdFx0dm0ubG9naW4gPSBmdW5jdGlvbigpIHtcblxuXHRcdH1cblxuXHRcdHZtLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0JGxvZy5pbmZvKCdsb2dnaW5nIG91dCcpO1xuXHRcdFx0XG5cdFx0XHQvL2xvZ291dFxuXHRcdFx0ZmJDb25uZWN0LmxvZ1VzZXJPdXQoKTtcblx0XHRcdFxuXHRcdFx0Ly9yZWRpcmVjdFxuXHRcdFx0dG9vbGJhclNoZXJwYS5yZWRpcmVjdFRvKCcvbG9naW4nKTtcblx0XHR9XG5cblx0XHR2bS5sb2dpblJlZ2lzdGVyZWRVc2VyID0gZnVuY3Rpb24oKSB7XG5cdFx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgcmVnaXN0ZXJlZFVzZXJTaGVycGEgPSB0cmFmZmljVmFsZXQ7XG5cblx0XHRcdC8vY29uZmlybSBhbGwgZmllbGRzIGFyZSB2YWxpZFxuXHRcdFx0aWYodHJ1ZSkge1xuXHRcdFx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XHRcdHZhciBkYXRhYmFzZSA9IGJhY2tlbmRTZXJ2aWNlcztcblx0XHRcdFx0dmFyIHJlZ2lzdGVyZWRVc2VyRGF0YSA9IHVzZXJEYXRhO1xuXG5cdFx0XHRcdC8vdmVyaWZ5IHVzZXJzIGNyZWRlbnRpYWxzXG5cdFx0XHRcdGRhdGFiYXNlLkxvZ2luUmVnaXN0ZXJlZFVzZXIodm0uZW1haWwsIHZtLnBhc3N3b3JkKVxuXHRcdFx0XHQudGhlbihmdW5jdGlvbih1c2VyQ3JlZGVudGlhbHMpIHtcblx0XHRcdFx0XHQvL2lmIG5vIHRyb3VibGUgbG9nZ2luZyBpbiB1cGRhdGUgZXJyb3Igb2JqZWN0XG5cdFx0XHRcdFx0Ly92bS5lcnJvcnMucGFzc2VzQWxsVGVzdHMgPSB0cnVlO1xuXHRcdFx0XG5cdFx0XHRcdFx0Ly9hZGQgcHJpbWFyeSBpbmZvcm1hdGlvbiB0byBsb2NhbCBtb2RlbFxuXHRcdFx0XHRcdC8vcmVnaXN0ZXJlZFVzZXJEYXRhLnNldFByaW1hcmllc0xvY2FsbHkodXNlckNyZWRlbnRpYWxzLmVtYWlsLCB1c2VyQ3JlZGVudGlhbHMubmFtZSwgdXNlckNyZWRlbnRpYWxzLnVpZCk7XG5cdFx0XHRcdFx0cmV0dXJuIHVzZXJDcmVkZW50aWFscy51aWRcblx0XHRcdFx0fSlcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24odWlkKSB7XG5cblx0XHRcdFx0XHRkYXRhYmFzZS5nZXRVc2VyQmlvKHVpZClcblx0XHRcdFx0XHQudGhlbihmdW5jdGlvbih1c2VyQmlvKSB7XG5cdFx0XHRcdFx0XHQvL3VwZGF0ZSB1c2VyRGF0YSBtb2RlbCB3aXRoIHVzZXJCaW9cblx0XHRcdFx0XHRcdHJlZ2lzdGVyZWRVc2VyRGF0YS51cGRhdGVCaW9Mb2NhbGx5KHVzZXJCaW8pO1xuXG5cdFx0XHRcdFx0XHQvL2xvYWQgdXNlciBldmVudHNcblx0XHRcdFx0XHRcdGRhdGFiYXNlLmdldFVzZXJFdmVudHModWlkKVxuXHRcdFx0XHRcdFx0LnRoZW4oZnVuY3Rpb24oYWxsRXZlbnRzRm9yVGhpc1VzZXIpIHtcblx0XHRcdFx0XHRcdFx0Ly91cGRhdGUgdXNlckRhdGEgbW9kZWwgd2l0aCB1c2VyRXZlbnRzXG5cdFx0XHRcdFx0XHRcdHJlZ2lzdGVyZWRVc2VyRGF0YS51cGRhdGVBbGxVc2VyRXZlbnRzTG9jYWxseShhbGxFdmVudHNGb3JUaGlzVXNlcik7XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKG1lc3NhZ2UpIHsgJGxvZy5pbmZvKG1lc3NhZ2UpOyB9KVxuXG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyAkbG9nLmluZm8obWVzc2FnZSk7IH0pXG5cblx0XHRcdFx0XHQvL3JlZGlyZWN0IHRvIHRoZSBuZXh0IHBhZ2UgXG5cdFx0XHRcdFx0cmVnaXN0ZXJlZFVzZXJTaGVycGEucmVkaXJlY3RUbygnL3VzZXJJbmZvcm1hdGlvbicsIHVpZCk7XG5cblx0XHRcdFx0fSlcblx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKG1lc3NhZ2UpIHsgXG5cdFx0XHRcdFx0Ly9pZiB0aGVyZSB3YXMgYW4gZXJyb3IgbG9nZ2luZyBpbiwgbGV0IHRoZSB1c2VyIGtub3dcblx0XHRcdFx0XHQvL3ZtLmVycm9ycy5tZXNzYWdlID0gbWVzc2FnZTtcblx0XHRcdFx0XHQvL3ZtLmVycm9ycy5wYXNzZXNBbGxUZXN0cyA9IGZhbHNlO1xuXHRcdFx0XHR9KVxuXG5cdFx0XHRcdC8vdXNlIHVpZCB0byBjb2xsZWN0IHVzZXIgYmlvXG5cdFx0XHRcdFxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0Ly9hY3Rpb25zXG5cdFx0Y2hlY2tMb2dpblN0YXR1cygpO1xuXG5cdFx0Ly93YXRjaGVyc1xuXHRcdCRzY29wZS4kb24oJyRyb3V0ZUNoYW5nZVN0YXJ0JywgZnVuY3Rpb24obmV4dCwgY3VycmVudCkge1xuXHRcdFx0XG5cdFx0XHRjaGVja0xvZ2luU3RhdHVzKCk7XG5cdFx0fSlcblx0fVxuXG5cdHJldHVybiAgZGlyZWN0aXZlO1xuXHRcdFxufTsiLCIvKiBmb2N1c01lLmRpcmVjdGl2ZS5qcyAqL1xuXG4vKipcbiogQGRlc2MgZGlzcGxheXMgYSBsaXN0IG9mIGFsbCBndWVzdHMgaW52aXRlZCB0byBhbiBldmVudCB0aGlzIHVzZXIgaXMgaG9zdGluZy5cbiogQGV4YW1wbGUgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgZm9jdXMtbWU9XCJzaG91bGRCZU9wZW5cIj5cbiovXG5cbmFuZ3VsYXJcblx0Lm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuXHQuZGlyZWN0aXZlKCdmb2N1c01lJywgZm9jdXNNZSk7XG5cbmZvY3VzTWUuJGluamVjdCA9IFsnJHRpbWVvdXQnLCAnJHBhcnNlJywgJyRsb2cnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBmb2N1c01lKCR0aW1lb3V0LCAkcGFyc2UsICRsb2cpIHtcblx0dmFyIGZvY3VzTWVEaXJlY3RpdmUgPSB7XG5cdFx0Ly9cblx0XHRsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcblx0XHRcdHZhciBtb2RlbCA9ICRwYXJzZShhdHRycy5mb2N1c01lKTtcblx0XHRcdFxuXHRcdFx0c2NvcGUuJHdhdGNoKG1vZGVsLCBmdW5jdGlvbih2YWx1ZSkge1xuXHRcdFx0XHQkbG9nLmluZm8oJ3ZhbHVlPScsdmFsdWUpO1xuXHRcdFx0XHRpZih2YWx1ZSA9PT0gdHJ1ZSkge1xuXHRcdFx0XHRcdCR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0ZWxlbWVudFswXS5mb2N1cygpO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdH1cblxuXHRcdFx0fSk7XG5cdFx0XHRlbGVtZW50LmJpbmQoJ2JsdXInLGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQkbG9nLmluZm8oJ2JsdXInKTtcblx0XHRcdFx0c2NvcGUuJGFwcGx5KG1vZGVsLmFzc2lnbihzY29wZSwgZmFsc2UpKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBmb2N1c01lRGlyZWN0aXZlO1xufSIsImFuZ3VsYXJcblx0Lm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnLCBbXG5cdFx0J25nUm91dGUnLFxuXHRcdCduZ1RvdWNoJyxcblx0XHQnZmlyZWJhc2UnXG5cdF0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
