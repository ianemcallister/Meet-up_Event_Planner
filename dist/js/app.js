function AnEventController(e,n){function t(){v.tempDateTime={start:"",end:""},v.newGuest={name:"",email:{address:"",valid:!1,style:{color:""}}},v.showIfHost=!1,v.hideIfAttending=!0,v.manageSections={1:{active:!0,complete:!1,style:{color:"black","background-color":"yellow"}},2:{active:!1,complete:!1,style:{color:"white","background-color":"gray"}},3:{active:!1,complete:!1,style:{color:"white","background-color":"gray"}}},c(),d(),v.showIfHost||f()}function o(e){return btoa(e)}function a(e){return atob(e)}function r(e){return Date.parse(e)}function s(){v.newGuest={name:"",email:{address:"",valid:!1,style:{color:""}}}}function l(t){e.info("adding them to the registered users list "+t),ref.child("Users").child(t).child("events").child("pending").child(n.uid).child(n.eventId).set({id:n.eventId,eventTimes:{start:v.event.eventTimes.start,end:v.event.eventTimes.end},name:v.event.name,host:n.uid},function(n){n&&e.info("there was an error"+n)}),ref.child("Users").child(t).child("events").child("pending").once("value",function(n){var i=n.val();e.info(n.val()),i.updated?(e.info("deleting updated"),ref.child("Users").child(t).child("events").child("pending").child("updated").remove(function(n){n&&e.info("Deleting failed: "+n.code)})):e.info("nothing to do")},function(n){n&&e.info("The read failed: "+n.code)})}function u(t){e.info("adding them to the UNREGISTERED users list "+t),ref.child("UnregisteredUsers").child(t).child("pending").child(n.uid).child(n.eventId).set({id:n.eventId,host:n.uid,eventTimes:{start:v.event.eventTimes.start,end:v.event.eventTimes.end},name:v.event.name},function(n){n&&e.info("there was an error"+n)})}function c(){var t=ref.getAuth();t.uid==n.hostId?(e.info("is the host"),v.showIfHost=!0):(e.info("not the host"),v.showIfHost=!1)}function d(){v.showIfHost||(e.info("check guest attendance"),userEvents.child("guestList").on("value",function(e){var t=e.val();v.hideIfAttending=!t[n.uid].attending}))}function f(){v.manageSections[1].active=!0,v.manageSections[2].active=!0,v.manageSections[3].active=!0}var v=this;v.tempTime={start:"",end:""},v.userIsHost=!1,v.setTempTime=function(e){"start"==e&&(v.tempDateTime.start=new Date),"end"==e&&(v.tempDateTime.end=new Date)},v.unixTimeToDateTime=function(e){return new Date(parseInt(e))},v.dateTimeToUnixTime=function(e){return Date.parse(e)},v.submit=function(){e.info("submitting the form now!")},v.backToUserEvents=function(){$location.path("/userEvents/"+n.uid+"/"+n.token)},v.eventRedirect=function(t,i){var o=t+"/"+n.uid+"/"+n.token;e.info("redirecting to: "+o),$location.path(o)},v.changeSection=function(n){for(e.info("are we here"),i=1;i<=3;i++)i==n?(v.manageSections[i].active=!0,v.manageSections[i].style["background-color"]="yellow",v.manageSections[i].style.color="black"):(v.manageSections[i].active=!1,v.manageSections[i].style["background-color"]="gray",v.manageSections[i].style.color="white")},v.saveEventTime=function(e,n){v.event.eventTimes||(v.event.eventTimes={start:"",end:""},v.event.eventTimes.start=v.dateTimeToUnixTime(v.tempDateTime.start),v.event.eventTimes.end=v.dateTimeToUnixTime(v.tempDateTime.end)),v.tempDateTime.end<v.tempDateTime.start&&"start"==n&&(v.tempDateTime.end=v.tempDateTime.start),"start"==n&&(v.event.eventTimes.start=v.dateTimeToUnixTime(e)),"end"==n&&(v.event.eventTimes.end=v.dateTimeToUnixTime(e))},v.guestsAreInvited=function(){return!!v.event.guestList},v.validateGuestEmail=function(){if(v.newGuest.email.address){var e=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","");e.test(v.newGuest.email.address)?(v.newGuest.email.valid=!0,v.newGuest.email.style={color:"green"}):(v.newGuest.email.valid=!1,v.newGuest.email.style={color:""})}},v.isSectionComplete=function(){for(i=0;i<8;i++)e.info(v.requiredInputs[i])},v.saveAndAdvance=function(){v.event.$save().then(function(){e.info("event saved")})["catch"](function(n){e.info("error! "+n)}),v.isSectionComplete(),1==v.manageSections[1].complete&&1==v.manageSections[2].complete&&1==v.manageSections[3].complete?v.eventRedirect("/userEvents",n.uid):v.manageSections[1].active?v.changeSection(2):v.manageSections[2].active?v.changeSection(3):v.manageSections[3].active&&v.changeSection(1)},v.addGuestToHostsList=function(){var t=o(v.newGuest.email.address);if(v.newGuest.name&&v.newGuest.email.valid){if(v.event.guestList)for(var i=0;v.event.guestList[i];){if(v.event.guestList[i].email==a(t))return e.info("This guest is already on the list"),void s();i++}else v.event.guestList={};if(registeredUsers[t]){if(registeredUsers[t]==n.uid)return e.info("tried to register the host"),void s();l(registeredUsers[t]),v.event.guestList[registeredUsers[t]]={attending:!1,status:"pending",name:v.newGuest.name,email:v.newGuest.email.address}}else u(t),v.event.guestList[t]={attending:!1,status:"pending",name:v.newGuest.name,email:v.newGuest.email.address};v.saveEvent(),s()}else e.info("you didn't enter a name and or email")},v.guestWillAttend=function(t){var i=ref.child("Users").child(n.uid).child("events"),o=0,a=!1;if(v.event.guestList[n.uid].attending=t,v.event.guestList[n.uid].status="attending",i.child("pending").on("value",function(a){var r=a.val();e.info(r),e.info(r[n.hostId]),e.info(r[n.hostId][n.eventId]);var s=r[n.hostId][n.eventId];e.info(s);for(invitation in r)o++;e.info("total attending: "+o),t&&i.child("attending").child(n.hostId).child(n.eventId).set(s,function(n){n&&e.info(n)})}),i.child("attending").on("value",function(n){var t=n.val();e.info("this is the attending list"),e.info(t),t.updated&&(a=!0)},function(n){n&&e.info(n)}),2>o){var s=new Date;i.child("pending").update({updated:r(s)},function(n){n&&e.info(n)})}i.child("pending").child(n.hostId).remove(),a&&e.info("removing the updated placeholder"),v.event.$save()},v.updateUpdatedParam=function(){var t=ref.child("Users").child(n.uid).child("events");e.info("updating the param"),t.child("attending").on("value",function(n){e.info(n.val())}),t.child("attending").child("updated").remove()},v.addInvitationToAttending=function(t){var i=ref.child("Users").child(n.uid).child("events"),o=0;i.child("pending").on("value",function(a){var r=a.val(),s=r[n.hostId][n.eventId];e.info(r),e.info(r[n.hostId]),e.info(r[n.hostId][n.eventId]);for(invitation in r)o++;e.info("total pending invitations: "+o),e.info(t),t&&i.child("attending").child(n.hostId).child(n.eventId).set(s,function(n){n&&e.info(n)})})},t()}function GuestEventController(e){e.info("into the GuestEventController")}function HostEventController(e,n,t,i){function o(e){return new Date(parseInt(e))}function a(e){return Date.parse(e)}function r(e,n){return(a(n)-a(e))/6e4}function s(){var e=new Date;e.setHours(e.getHours()+Math.round(e.getMinutes()/60)),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),c.tempTime.start=e,c.tempTime.end=e,c.tempTime.duration=r(c.tempTime.start,c.tempTime.end)}function l(){angular.isDefined(c.tempEvent.eventTimes.start)&&(c.tempTime.start=o(c.tempEvent.eventTimes.start),c.tempTime.end=o(c.tempEvent.eventTimes.end))}function u(){f.loadAnEventProgressively(n.uid,n.eventId).then(function(e){c.tempEvent=e,l()})["catch"](function(n){e("the error is: "+n)}),c.activeSection=parseInt(n.section),s()}var c=this,d=i,f=t;c.activeSection=1,c.tempTime={start:"",end:"",duration:""},c.progressBar=39,c.tempEvent={},c.formatDuration=function(){c.tempTime.duration=r(c.tempTime.start,c.tempTime.end),e.info(c.tempTime.duration);var n=Math.floor(c.tempTime.duration/60),t=c.tempTime.duration%60,i=Math.round(t/15)/4;return e.info(n+" "+t+" "+i),n+i+" h"},c.settingTempStart=function(){c.tempTime.end=c.tempTime.start},c.settingTempEnd=function(){c.tempTime.start>c.tempTime.end&&(c.tempTime.start=c.tempTime.end),c.tempTime.duration=r(c.tempTime.start,c.tempTime.end)},c.backToUserEvents=function(){d.redirectTo("/userEvents",n.uid)},c.sectionBack=function(){targetSection=c.activeSection-1,d.redirectTo("/event/host",n.eventId,n.uid,targetSection)},c.sectionForward=function(){targetSection=c.activeSection+1,d.redirectTo("/event/host",n.eventId,n.uid,targetSection)},u()}function LandingPageController(e,n,t,o,a){function r(e){return btoa(e)}function s(e){return Date.parse(e)}function l(i,o){var a=i+"/"+d.uid+"/"+d.token;n.info("redirecting to: "+a),t.path(a),e.$apply()}var u=this,c="https://meetupplanner.firebaseio.com/",d={};u.showRequirnments=!1,u.validNewName={valid:!1,style:{color:""}},u.validNewEmail={valid:!1,style:{color:""}},u.securePassword={secure:!1,style:{color:""}},u.unlockCreateUserBtn={usable:!1,"class":"btn btn-warning"},u.message="testing",u.validUserEmail={valid:!1,style:{color:""}},u.validUserPassword={valid:!1,style:{color:""}},u.unclockUserLoginBtn={usable:!1,"class":"btn btn-warning"},u.passwordRequirnments={0:{constraint:"Is at least 16 characters long",style:{color:"red"},met:!1},1:{constraint:"Is no longer than 100 characters",style:{color:"red"},met:!1},2:{constraint:"Contains at least one required symbol (!@#$%^&*)",style:{color:"red"},met:!1},3:{constraint:"Contains at least one number",style:{color:"red"},met:!1},4:{constraint:"Contains at least one lowercase letter",style:{color:"red"},met:!1},5:{constraint:"Contains at least one uppercase letter",style:{color:"red"},met:!1},6:{constraint:"Doesn't have any illegal characters",style:{color:"red"},met:!1}},u.displayPassReqs=function(){u.newName&&u.newEmail?u.showRequirnments=!0:u.showRequirnments=!1},u.checkNewName=function(){u.newName&&(u.newName.length>0?(u.validNewName.valid=!0,u.validNewName.style={color:"green"}):(u.validNewName.valid=!1,u.validNewName.style={color:"red"})),u.openCreateUserButton()},u.checkNewEmail=function(){if(u.newEmail){var e=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","");e.test(u.newEmail)?(u.validNewEmail.valid=!0,u.validNewEmail.style={color:"green"}):(u.validNewEmail.valid=!1,u.validNewEmail.style={color:"red"})}u.openCreateUserButton()},u.checkUserEmail=function(){if(u.userEmail){var e=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","");e.test(u.userEmail)?(u.validUserEmail.valid=!0,u.validUserEmail.style={color:"green"}):(u.validUserEmail.valid=!1,u.validUserEmail.style={color:"red"})}u.openUserLoginBtn()},u.checkNewPasswords=function(){var e={0:[""," your password needs to be 16 characters or longer"],1:[""," your password needs to be less than 100 characters"],2:["[!@#$%^&*]"," no required symbols found"],3:["[0-9]"," no numbers found"],4:["[a-z]"," no lowercase letters found"],5:["[A-Z]"," no uppercase letters found"],6:["[^A-z0-9!@#$%^&*]"," illegal characters found"]};if(u.newPassword){for(u.newPassword.length>15?(u.passwordRequirnments[0].style={color:"green"},u.passwordRequirnments[0].met=!0):(u.passwordRequirnments[0].style={color:"red"},u.passwordRequirnments[0].met=!1),u.newPassword.length<=100?(u.passwordRequirnments[1].style={color:"green"},u.passwordRequirnments[1].met=!0):(u.passwordRequirnments[1].style={color:"red"},u.passwordRequirnments[1].met=!1),i=2;i<6;i++){var n=new RegExp(e[i][0],"");n.test(u.newPassword)?(u.passwordRequirnments[i].style={color:"green"},u.passwordRequirnments[i].met=!0):(u.passwordRequirnments[i].style={color:"red"},u.passwordRequirnments[i].met=!1)}var n=new RegExp(e[6][0],"");n.test(u.newPassword)?(u.passwordRequirnments[6].style={color:"green"},u.passwordRequirnments[6].met=!0):(u.passwordRequirnments[6].style={color:"red"},u.passwordRequirnments[6].met=!1),u.passwordRequirnments[0].met&&u.passwordRequirnments[1].met&&u.passwordRequirnments[2].met&&u.passwordRequirnments[3].met&&u.passwordRequirnments[4].met&&u.passwordRequirnments[5].met&&u.passwordRequirnments[6].met?u.securePassword.secure=!0:u.securePassword.secure=!1,u.securePassword.secure?u.securePassword.style={color:"green"}:u.securePassword.style={color:"red"}}u.openCreateUserButton()},u.checkUserPasswords=function(){u.userPassword&&(u.userPassword.length>15?(u.validUserPassword.style={color:"green"},u.validUserPassword.valid=!0):(u.validUserPassword.style={color:"red"},u.validUserPassword.valid=!1)),u.openUserLoginBtn()},u.openCreateUserButton=function(){u.validNewName.valid&&u.validNewEmail.valid&&u.securePassword.secure?(u.unlockCreateUserBtn["class"]="btn btn-success",u.unlockCreateUserBtn.usable=!0):(u.unlockCreateUserBtn["class"]="btn btn-warning",u.unlockCreateUserBtn.usable=!1)},u.openUserLoginBtn=function(){u.validUserEmail.valid&&u.validUserPassword.valid?(u.unclockUserLoginBtn["class"]="btn btn-success",u.unclockUserLoginBtn.usable=!0):(u.unclockUserLoginBtn["class"]="btn btn-warning",u.unclockUserLoginBtn.usable=!1)},u.update=function(){u.newName=o.find("#newName")[0].value,u.newEmail=o.find("#newEmail")[0].value,u.userEmail=o.find("#userEmail")[0].value,u.checkNewName(),u.checkNewEmail(),u.checkUserEmail()},u.createNewUser=function(){if(n.info("Creating a new user account now!"),u.unlockCreateUserBtn.usable){var e=new Firebase(c);e.createUser({email:u.newEmail,password:u.newPassword},function(t,i){if(t)n.info("Error creating user: "+t);else{n.info(i),d=i;var o=e.child("Users/"+i.uid),a=new Date;o.set({bio:{name:u.newName,email:u.newEmail},events:{pending:{updated:s(a)},hosting:{updated:s(a)},attending:{updated:s(a)},completed:{updated:s(a)}}},function(e){e?n.info("Data could not be saved: "+e):n.info("Data saved successfully.")}),e.child("Uids").child(r(u.newEmail)).set(d.uid,function(e){e?n.info("Data could not be saved. "+e):n.info("uid created sucessfully.")}),l("/userInformation",d)}})}},u.loginRegisteredUser=function(){if(u.unclockUserLoginBtn.usable){var t=new Firebase(c);t.authWithPassword({email:u.userEmail,password:u.userPassword},function(t,i){t?n.info("Error Logging In: "+t):(n.info("Logged In successfully: "+i.uid),n.info(i),d=i,l("/userInformation",d),e.$apply())})}},u.alertMe=function(){alert("this is working! an alert!")},u.onResizeFunction=function(){var e=angular.element(".inputText");a.outerWidth>a.outerHeight?(e.css("font-size","2em"),n.info("making bigger")):e.css("font-size","1.2em")},"addEventListener"in o&&o.addEventListener("DOMContentLoaded",function(){n.info("adding FastClick"),FastClick.attach(o.body)},!1),angular.element(a).bind("resize",function(){u.onResizeFunction()}),angular.element(o).ready(function(){a.outerWidth<600&&u.onResizeFunction()}),u.master={},u.update=function(e){u.master=angular.copy(e)},u.reset=function(e){e&&(e.$setPristine(),e.$setUntouched()),u.user=angular.copy(u.master)},u.reset()}function MainController(e,n,t,i){function o(){angular.element(t);t.css("hight",i.outerHeight)}var a=this,r="https://meetupplanner.firebaseio.com/",s=new Firebase(r);a.logout=function(){alert("logging you out!"),s.unauth(),n.path("/")},angular.element(t).ready(function(){o()})}function NewUserSignUpController(e,n,t,o,a,r){function s(){""!=l.errors.name||""!=l.errors.email||l.errors.password?l.errors.passesAllTests=!1:l.errors.passesAllTests=!0,angular.isDefined(l.inputs.newName)&&""!==l.inputs.newName&&angular.isDefined(l.inputs.newEmail)&&""!==l.inputs.newEmail&&angular.isDefined(l.inputs.newPassword)&&""!==l.inputs.newPassword?l.inputs.requiredFieldsDefined=!0:l.inputs.requiredFieldsDefined=!1}var l=this;l.inputs={newName:"",newEmail:"",newPassword:"",requiredFieldsDefined:!1},l.errors={name:"",email:"",password:!1,passesAllTests:!1},l.passReqs={0:{id:"",req:"Is at least 16 characters long",fulfilled:!1,style:{color:"red"}},1:{id:"",req:"Is no longer than 100 characters",fulfilled:!1,style:{color:"red"}},2:{id:"",req:"Contains at least one lowercase letter",fulfilled:!1,style:{color:"red"}},3:{id:"",req:"Contains at least one uppercase letter",fulfilled:!1,style:{color:"red"}},4:{id:"",req:"Contains at least one number",fulfilled:!1,style:{color:"red"}},5:{id:"",req:"Contains at least one required symbol (!@#$%^&*)",fulfilled:!1,style:{color:"red"}},6:{id:"",req:"Doesn't have any illegal characters",fulfilled:!0,style:{color:"red"}}},l.showReqsBox=!1;var u=t;l.checkNewName=function(){var e=[],n=u.required(l.inputs.newName),t=u.minNameLength(l.inputs.newName);angular.isDefined(n)&&e.push(n),angular.isDefined(t)&&e.push(t),e.length>0?l.errors.name=e.join(", "):l.errors.name="",s()},l.checkNewEmail=function(){var e=[],n=u.required(l.inputs.newEmail),t=u.email(l.inputs.newEmail);angular.isDefined(n)&&e.push(n),angular.isDefined(t)&&e.push(t),e.length>0?l.errors.email=e.join(", "):l.errors.email="",s()},l.checkNewPassword=function(){l.showReqsBox=!0;var e=[],n=u.required(l.inputs.newPassword),t=[u.minPassLength(l.inputs.newPassword),u.maxPassLength(l.inputs.newPassword),u.atLeastOneLowercase(l.inputs.newPassword),u.atLeastOneUppercase(l.inputs.newPassword),u.atLeastOneNumber(l.inputs.newPassword),u.atLeastOneSymbol(l.inputs.newPassword),u.illegalCharacter(l.inputs.newPassword)];angular.isDefined(n)&&e.push(n),e.length>0?l.errors.password=e.join(", "):l.errors.email="";var o=!1;for(i=0;i<7;i++)t[i]?(l.passReqs[i].fulfilled=!0,l.passReqs[i].style={color:"green"}):(l.passReqs[i].fulfilled=!1,l.passReqs[i].style={color:"red"},o=!0);l.errors.password=o,s()},l.exitPassword=function(){l.checkNewPassword(),l.showReqsBox=!1},l.createNewUser=function(){var e=a;if(l.errors.passesAllTests&&l.inputs.requiredFieldsDefined){var t=o,i=r;t.createNewUser(l.inputs.newEmail,l.inputs.newPassword).then(function(o){i.loadPrimaries(l.inputs.newEmail,l.inputs.newName,o.uid),t.addNewUserToDatabase(o.uid,l.inputs.newName,l.inputs.newEmail).then(function(i){n.info(i),t.addNewUserToRegUsersList(o.uid,l.inputs.newEmail).then(function(t){e.redirectTo("/userInformation",o.uid),n.info(t)})["catch"](function(e){n.info(e)})})["catch"](function(e){n.info(e)})})["catch"](function(e){n.info(e)})}}}function RegUserLoginController(e,n,t,i,o){function a(){angular.isDefined(r.inputs.email)&&""!==r.inputs.email&&angular.isDefined(r.inputs.password)&&""!==r.inputs.password?(r.inputs.requiredFieldsDefined=!0,r.unclockUserLoginBtn["class"]="btn btn-success",r.unclockUserLoginBtn.message="Login",r.unclockUserLoginBtn.usable=!0):(r.inputs.requiredFieldsDefined=!1,r.unclockUserLoginBtn["class"]="btn btn-warning",r.unclockUserLoginBtn.message="Need Email & Pass",r.unclockUserLoginBtn.usable=!1)}var r=this;r.inputs={email:"",password:"",requiredFieldsDefined:!1},r.errors={message:"",passesAllTests:!0},r.unclockUserLoginBtn={usable:!1,"class":"btn btn-warning",message:"Need Email & Pass"},r.update=function(){r.inputs.email=n.find("#userEmail")[0].value,r.inputs.password=n.find("#userPassword")[0].value,a()},r.loginRegisteredUser=function(){var n=i,a=t,s=o;a.LoginRegisteredUser(r.inputs.email,r.inputs.password).then(function(e){r.errors.passesAllTests=!0,s.setPrimariesLocally(r.inputs.email,r.inputs.name,e.uid)}).then(function(){e.info("uid is "+s.getUIDLocally()),a.getUserBio(s.getUIDLocally()).then(function(n){s.updateBioLocally(n),a.getUserEvents(s.getUIDLocally()).then(function(e){s.updateAllUserEventsLocally(e)})["catch"](function(n){e.info(n)})})["catch"](function(n){e.info(n)}),n.redirectTo("/userInformation",s.getUIDLocally())})["catch"](function(e){r.errors.message=e,r.errors.passesAllTests=!1})},r.clicked=function(){var e=t;e.logUserOut()}}function topMenuController(e,n,t,i,o){function a(e){e?(n.info("User "+e.uid+" is logged in with "+e.provider),s.loggedIn=!0):(n.info("User is logged out"),s.loggedIn=!1)}function r(e,i){var o=e+"/"+i.uid+"/"+i.token;n.info("redirecting to: "+o),t.path(o)}var s=this,l="https://meetupplanner.firebaseio.com/",u=new Firebase(l);s.loggedIn=!1,"addEventListener"in i&&i.addEventListener("DOMContentLoaded",function(){n.info("adding FastClick"),FastClick.attach(i.body)},!1),angular.element(o).bind("resize",function(){s.onResizeFunction(),e.$apply()}),angular.element(i).ready(function(){o.outerWidth<600&&(s.onResizeFunction(),e.$apply())}),s.logout=function(){n.info("logging out!"),s.loggedIn=!1,u.unauth(),r("/",{uid:"",token:""})},s.navBarLoginRegisteredUser=function(){n.info("launching login");var t=new Firebase(l);t.authWithPassword({email:s.navbarUserEmail,password:s.navbarUserPass},function(t,i){t?n.info("Error Logging In: "+t):(n.info("Logged In successfully: "+i.uid),n.info(i),r("/userInformation",i),e.$apply(),angular.element(".navbar-toggle").click())})},s.onResizeFunction=function(){var e=angular.element(".navbarInputs");e.css("width",o.outerWidth-26+"px")},u.onAuth(a)}function UserEventsController(e,n,t,i){function o(e){return Date.parse(e)}function a(){var e=0;for(event in u.events.hosting)e++;return e}function r(){var e=new Date,n=10*o(e)+a();return n}function s(){Object.keys(u.events).forEach(function(e){Object.keys(u.events[e]).forEach(function(n){var t=0;angular.isObject(u.events[e][n])&&t++,t>0?u.sectionAvailable[e]=!0:u.sectionAvailable[e]=!1})})}function l(){c.setUIDLocally(n.uid),c.loadBio(n.uid).then(function(e){u.userBio=e})["catch"](),u.events=c.getAllUserEventsLocally(),c.getRemoteEventsForLocal().then(function(e){u.events=c.getAllUserEventsLocally()}).then(function(){s()})}var u=this,c=t;u.showDecline=!1,u.userBio={},u.events={},u.sectionAvailable={pending:!1,attending:!1,hosting:!1,completed:!1},u.errors={},u.createNewEvent=function(){var n=r(),t=i;c.createNewEvent(n).then(function(n){e.info(n)}).then(function(){c.cleanDBEventsCategory("hosting")})["catch"](function(n){e.info(n)}),t.redirectTo("/event",n,c.getUIDLocally(),c.getUIDLocally())},l()}function UserInformationController(e,n,t,i,o){function a(e){return new Date(parseInt(e))}function r(e){return Date.parse(e)}function s(){u.loadBio(t.uid).then(function(e){l.user=e,angular.isDefined(e.dob)&&""!==e.dob&&(l.tempBirthday=a(e.dob))})}var l=this,u=i;l.user={},l.tempBirthday,l.view={dataToSave:!1,isData:!1,btnMssg:"Move On...",proceedBtn:"btn btn-primary"},l.checkValues=function(){l.view.isData=!0,!angular.isUndefined(l.user.company)&&""!==l.user.company||!angular.isUndefined(l.user.title)&&""!==l.user.title||!angular.isUndefined(l.user.dob)&&""!==l.user.dob?(l.view.dataToSave=!0,l.view.proceedBtn="btn btn-success",l.view.btnMssg="Save & Continue"):(l.view.dataToSave=!1,l.view.proceedBtn="btn btn-primary",l.view.btnMssg="Move On...")},l.updateDOB=function(){l.user.dob=r(l.tempBirthday),l.checkValues()},l.saveAndMoveOn=function(){var n=o,i=u.getUIDLocally();0!==l.tempBirthday&&l.updateDOB(),(""==i||angular.isUndefined(i))&&u.setUIDLocally(t.uid),l.view.isData&&(e.info("saving the new data"),u.updateBioLocally(l.user)),n.redirectTo("/userEvents",l.user.uid)},s()}function authService(e,n){function t(){var e=n;e.checkLoginStatus().then(function(e){return e})["catch"](function(e){return e})}var i={isLoggedIn:t};return i}function backendServices(e,n,t){function i(e){return btoa(e)}function o(e){return atob(e)}function a(e){return new Date(parseInt(e))}function r(e){return Date.parse(e)}function s(e,t){var i=new Firebase(L);return n(function(n,o){i.createUser({email:e,password:t},function(e,t){e?o("Error creating user: "+e):n(t)})})}function l(e,t,i){var o=new Firebase(L),a=o.child("Users").child(e),s=new Date;return n(function(n,o){a.set({bio:{uid:e,name:t,email:i},events:{pending:{updated:r(s)},hosting:{updated:r(s)},attending:{updated:r(s)},completed:{updated:r(s)}}},function(e){e?o("Data could not be saved: "+e):n("Data saved successfully.")})})}function u(e,t){var o=new Firebase(L),a=i(t),r=o.child("Uids").child(a);return n(function(n,t){r.set(e,function(e){e?t("Data could not be saved. "+e):n("uid created sucessfully.")})})}function c(t,i){var o=new Firebase(L);return n(function(n,a){o.authWithPassword({email:t,password:i},function(t,i){t?a("Error Logging In: "+t):(e.info("Logged In successfully: "+i.uid),n(i))})})}function d(){var n=new Firebase(L);return new Promise(function(t,i){n.onAuth(function(n){n?(e.info("User "+n.uid+" is logged in with "+n.provider),t(!0)):(e.info("User is logged out"),t(!1))})})}function f(){var n=new Firebase(L);e.info("logging user out"),n.unauth()}function v(e){var t=new Firebase(L),i=e.uid,o=t.child("Users").child(i);return n(function(n,t){o.update(e,function(e){e?t("There was a problem updating that record: "+e):n("all user data uploaded successfully")})})}function m(e){var t=new Firebase(L),i=e.uid.toString(),o=t.child("Users").child(i).child("bio");return n(function(n,t){o.update(e,function(e){e?t("There was a problem updating that record: "+e):n("all user bio data uploaded successfully")})})}function g(){}function p(e){var t=new Firebase(L),i=t.child("Users").child(e).child("bio");return n(function(e,n){i.once("value",function(n){e(n.val())},function(e){e&&n(e)})})}function h(e,t){var i=new Firebase(L),o=t.id,a=i.child("Users").child(e).child("events").child("hosting").child(o);return n(function(e,n){a.set(t,function(t){t?n("There was an error: "+t):e("New event saved to DB successfully")})})}function w(e){var t=new Firebase(L),i=t.child("Users").child(e).child("events");return n(function(e,n){i.orderByKey().once("value",function(n){var t=n.val(),i={hosting:t.hosting,attending:t.attending,pending:t.pending,completed:t.completed};e(i)},function(e){e&&n(e)})})}function b(e,t){var i=new Firebase(L),o=i.child("Users").child(e).child("events").child("hosting").child(t);return n(function(e,n){o.once("value",function(n){var t=n.val();e(t)},function(e){e&&n(e)})})}function U(e,n,t){}function E(e,t){var i=new Firebase(L),o=i.child("Users").child(t).child("events").child(e).child("updated");return n(function(e,n){o.set(null,function(t){t?n("There was an error deleting update field: "+t):e("Deleted update successfully")})})}function y(e,t){var i=new Firebase(L),o=i.child("Users").child(t).child("events").child(e);return n(function(e,n){o.once("value",function(t){var i=t.val();angular.isDefined(i.updated)?e(!0):n(!1)},function(e){e&&n(e)})})}var L="https://meetupplanner.firebaseio.com/",T={utf8_to_b64:i,b64_to_utf8:o,unixTimeToDateTime:a,dateTimeToUnixTime:r,LoginRegisteredUser:c,checkLoginStatus:d,logUserOut:f,downloadUserData:g,getUserBio:p,getUserEvents:w,getAHostedEvent:b,getAnInvitedEvent:U,createNewUser:s,addNewUserToDatabase:l,addNewUserToRegUsersList:u,uploadUserData:v,uploadUserBio:m,createHostedEvent:h,deleteUpdateField:E,thereWasAnUpdateField:y};return T}function trafficValet(e,n){function t(t,i,o,a){angular.isDefined(i)?(t=t+"/"+i,angular.isDefined(o)&&(t=t+"/"+o,angular.isDefined(a)&&(t=t+"/"+a,e.info("redirecting now to "+t),n.path(t)),e.info("redirecting now to "+t),n.path(t)),e.info("redirecting now to "+t),n.path(t)):(e.info("redirecting now to "+t),n.path(t))}function i(t,i,o,a){if(e.info("Traffic valet accessed"),e.info("eventId: "+t),e.info("hostId: "+i),e.info("userId: "+o),angular.isUndefined(a)&&(a=1),i===o){var r="/event/host/"+t+"/"+o+"/"+a;e.info(r),n.path(r)}else{var r="/event/guest/"+t+"/"+o+"/"+i;e.info(r),n.path(r)}}var o={redirectTo:t,eventRoute:i};return o}function userData(e,n,t){function i(){return""!==M.bio.uid&&""!==M.bio.name&&""!==M.bio.email}function o(n,t){return e.info("checking if the event exits"),!!angular.isDefined(M.events[n][t])}function a(n,t,i){return e.info("current user bio is:"),e.info(M.bio),angular.isDefined(M.bio.email)&&(e.info("email is defined"),""!=M.bio.email)?n==M.bio.email?(e.info("email matches"),!0):(e.info("email does not match"),!1):(e.info("current event is:"),e.info(M.events.hosting[i]),M.events.hosting[i].host.email==n?(e.info("event host email matches"),!0):(e.info("event host email DOESN'T not match"),!1))}function r(e){Object.keys(M.events[e]).forEach(function(n){angular.isObject(M.events[e][n])||delete M.events[e][n]})}function s(){return M.bio.uid}function l(){return M.bio.name}function u(){return M.bio.email}function c(){return M.bio.company}function d(){return M.bio.title}function f(){return M.bio.dob}function v(){return{uid:M.bio.uid,name:M.bio.name,email:M.bio.email,company:M.bio.company,title:M.bio.title,dob:M.bio.dob}}function m(e,n){return M.events[e][n]}function g(e){return M.events[e]}function p(){return M.events}function h(e){M.bio.uid=e}function w(e){M.bio.name=e}function b(e){M.bio.email=e}function U(e){M.bio.company=e}function E(e){M.bio.title=e}function y(e){M.bio.dob=e}function L(e,n,t){angular.isDefined(e)&&b(e),angular.isDefined(n)&&l(n),angular.isDefined(t)&&h(t)}function T(e,n){var t=n.id;r(e),M.events[e][t]=n}function D(e){M.events=e}function I(e){w(e.name),b(e.email),U(e.company),E(e.title),y(e.dob),S()}function A(e,n){delete M.events[e][n.id]}function C(){var e=t;e.downloadUserData().then(function(e){M=e})}function $(e){var i=t;return n(function(n,t){i.getUserBio(e).then(function(e){n(e)})["catch"](function(e){t("There was an error reading the user bio: "+e)})})}function k(){var e=t;return n(function(n,t){e.getUserEvents(s()).then(function(e){Object.keys(e).forEach(function(n){Object.keys(e[n]).forEach(function(t){T(n,e[n][t])})}),n(e)})["catch"](function(e){t("There was an error reading the user events: "+e)})})}function R(i){var o=t;return n(function(n,t){o.getAHostedEvent(s(),i).then(function(t){e.info(t),n(t)})["catch"](function(e){t("There was an error reading the user event: "+e)})})}function B(){var e=t;e.uploadUserData(M)}function S(){var e=t;e.uploadUserBio(M.bio)}function N(){}function P(i){var o=t;return n(function(n,t){o.thereWasAnUpdateField(i,s()).then(function(n){o.deleteUpdateField(i,s()).then(function(n){e.info(n)})["catch"](function(n){e.info(n)})})["catch"](function(n){e.info(n)})})}function q(e){return n(function(n,t){i()?n(v()):$(e).then(function(e){n(e)})["catch"](function(e){t(e)})})}function F(e,t){return h(e),n(function(e,n){R(t).then(function(n){e(n)})["catch"](),o("hosting",t)&&e(m("hosting",t))})}function z(e){var t={};return n(function(e,n){k().then(function(n){e(n)}),t=g(type),e(t)})}function G(e){var i=t,o={};return o={id:e,name:"",type:"",host:{name:M.bio.name,uid:M.bio.uid,email:M.bio.email},message:"",eventTimes:{start:0,end:0},address:{street01:"",street02:"",street03:"",city:"",state:"",zip:0},guestList:{}},T("hosting",o),n(function(e,n){i.createHostedEvent(s(),o).then(function(n){e(n)})["catch"](function(e){n(e)})})}var M={bio:{uid:"",name:"",email:"",company:"",title:"",dob:0},events:{hosting:{},pending:{},attending:{},completed:{}}},j={bioPrimariesAreCompleteLocally:i,eventExistsLocally:o,thisIsTheHostEmail:a,cleanEvents:r,getUIDLocally:s,getNameLocally:l,getEmailLocally:u,getCompanyLocally:c,getTitleLocally:d,getDOBLocally:f,getFullBioLocally:v,getOneUserEventLocally:m,getUserEventsLocally:g,getAllUserEventsLocally:p,setUIDLocally:h,setNameLocally:w,setEmailLocally:b,setCompanyLocally:U,setTitleLocally:E,setDOBLocally:y,setPrimariesLocally:L,updateUserEventsLocally:T,updateAllUserEventsLocally:D,updateBioLocally:I,removeUserEventsLocally:A,getFullRemoteDBforLocal:C,getRemoteBioForLocal:$,getRemoteEventsForLocal:k,getOneRemoteEventForLocal:R,setFullRemoteDBfromLocal:B,setRemoteBioFromLocal:S,setRemoteEventsFromLocal:N,cleanDBEventsCategory:P,loadBio:q,loadEventsProgressively:z,loadAnEventProgressively:F,createNewEvent:G};return j}function validation(e){function n(e){return angular.isUndefined(e)?"This is a required field":void 0}function t(e){return angular.isDefined(e)&&e.length<f?"Name should be at least "+f+" characters":void 0}function i(e){return angular.isDefined(e)&&!(e.length<v)}function o(e){return angular.isDefined(e)&&!(e.length>m)}function a(e){if(angular.isDefined(e)){var n=new RegExp("[!@#$%^&*]");return!!n.test(e)}return!1}function r(e){if(angular.isDefined(e)){var n=new RegExp("[0-9]","");return!!n.test(e)}return!1}function s(e){if(angular.isDefined(e)){var n=new RegExp("[a-z]","");return!!n.test(e)}return!1}function l(e){if(angular.isDefined(e)){var n=new RegExp("[A-Z]","");return!!n.test(e)}return!1}function u(e){if(angular.isDefined(e)){var n=new RegExp("[^A-z0-9!@#$%^&*]","");return!n.test(e)}return!1}function c(e){var n=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","");
return angular.isDefined(e)&&!n.test(e)?"Not a valid email":void 0}function d(e){}var f=3,v=16,m=100,g={required:n,minNameLength:t,minPassLength:i,maxPassLength:o,atLeastOneSymbol:a,atLeastOneNumber:r,atLeastOneLowercase:s,atLeastOneUppercase:l,illegalCharacter:u,email:c,dateOfBirth:d};return g}function config(e){e.when("/",{templateUrl:"views/landingPage.htm",controller:"LandingPageController",controllerAs:"vm"}).when("/signup",{templateUrl:"views/newUserSignup.htm",controller:"NewUserSignUpController",controllerAs:"vm"}).when("/login",{templateUrl:"views/registeredUserLogin.htm",controller:"RegUserLoginController",controllerAs:"vm"}).when("/userInformation/:uid?",{templateUrl:"views/userInformation.htm",controller:"UserInformationController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).when("/userEvents/:uid?",{templateUrl:"views/userEvents.htm",controller:"UserEventsController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).when("/event/host/:eventId/:uid/:section",{templateUrl:"views/hostEvent.htm",controller:"HostEventController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).when("/event/guest/:eventId/:uid/:hostId",{templateUrl:"views/guestEvent.htm",controller:"GuestEventController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).when("/event/:eventId?/:hostId?/:uid?/:section?",{templateUrl:"views/anEvent.htm",controller:"AnEventController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService,eventViewChanger:eventViewChanger}}).otherwise({redirectTo:"/"})}function userAuthenticationService(e){e.isLoggedIn()}function eventViewChanger(e,n){e.eventRoute(n.current.params.eventId,n.current.params.hostId,n.current.params.uid,n.current.params.section)}function addAGuest(){function e(e,n,t,i){}function n(e,n,t,i){function o(){r.validations.name.valid&&r.validations.email.valid?(e.info("ready to submit"),r.invitationValidForSubmission=!0,r.submissionButton["class"]["btn-warning"]=!1,r.submissionButton["class"]["btn-success"]=!0,r.submissionButton.message="Invite Guest"):(e.info("not ready to submit"),r.invitationValidForSubmission=!1,r.submissionButton["class"]["btn-warning"]=!0,r.submissionButton["class"]["btn-success"]=!1,r.submissionButton.message="Address Invitation...")}function a(){angular.isUndefined(l.getOneUserEventLocally("hosting",n.eventId))?l.getRemoteEventsForLocal().then(function(){u=l.getOneUserEventLocally("hosting",n.eventId)}):u=l.getOneUserEventLocally("hosting",n.eventId)}var r=this,s=t,l=i,u={};r.tempGuest={name:"",email:""},r.validations={name:{addressed:!1,valid:!1,errorMessage:""},email:{addressed:!1,valid:!1,errorMessage:""},invitation:{isTheHost:!1,alreadyInvited:!1,errorMessage:""}},r.invitationValidForSubmission=!1,r.submissionButton={style:{color:"red"},"class":{"col-xs-12":!0,"col-sm-12":!0,btn:!0,"btn-warning":!0,"btn-success":!1},message:"Address Invitation..."},r.validateName=function(){r.validations.name.addressed=!0,angular.isDefined(r.tempGuest.name)&&""!=r.tempGuest.name?(r.validations.name.valid=!0,r.validations.name.errorMessage=""):(r.validations.name.valid=!1,r.validations.name.errorMessage="This guest needs a name"),o()},r.validateEmail=function(){r.validations.email.addressed=!0,angular.isDefined(r.tempGuest.email)&&""!=r.tempGuest.email?angular.isUndefined(s.email(r.tempGuest.email))?(r.validations.email.valid=!0,r.validations.email.errorMessage=""):(r.validations.email.valid=!1,r.validations.email.errorMessage=s.email(r.tempGuest.email),e.info(r.validations.email.errorMessage)):(r.validations.email.valid=!1,r.validations.email.errorMessage="Not a valid email"),o()},r.showNameError=function(){return!(r.validations.name.valid||!r.validations.name.addressed)},r.showEmailError=function(){return!(r.validations.email.valid||!r.validations.email.addressed)},r.showInvitationError=function(){return!(!r.validations.invitation.isTheHost&&!r.validations.invitation.alreadyInvited)},r.submitGuestInvitation=function(){if(e.info("submitting the invitation"),r.invitationValidForSubmission){if(l.thisIsTheHostEmail(r.tempGuest.email,n.uid,n.eventId))return r.validations.invitation.isTheHost=!0,r.validations.invitation.errorMessage="No need to invite the host",0;r.validations.invitation.isTheHost=!1}},a()}e.$inject=["scope","el","attr","ctrl"];var t={restrict:"AECM",templateUrl:"../views/directives/addAGuest.directive.htm",replace:!0,scope:{},link:e,controller:n,controllerAs:"vm",bindToController:!0};return n.$inject=["$log","$routeParams","validation","userData"],t}function hostedEventsList(){function e(e,n,t,i){}function n(e,n){function t(e){return new Date(parseInt(e))}function i(e){var n=0;return o.guestsAreInvited=!0,Object.keys[e].forEach(function(e){n++}),n}var o=this,a=n;o.guestsAreInvited=!1,o.formatDate=function(n){return e.info("got thist time: "+n),t(n)},o.guestsAttending=function(e){return angular.isDefined(e)&&angular.isDefined(e.attending)?i(e.attending):0},o.guestsInvited=function(e){function n(){return t.attending+t.pending+t.declined}if(angular.isDefined(e)){var t={attending:0,pending:0,declined:0};return angular.isDefined(e.attending)&&(t.attending=i(e.attending)),angular.isDefined(e.pending)&&(t.pending=i(e.pending)),angular.isDefined(e.declined)&&(t.declined=i(e.declined)),n()}return 0},o.percentageAttending=function(e){return angular.isDefined(e)?guestsAttending(guestlist)/guestsInvited(e):0},o.eventClicked=function(n){e.info("redirecting to: /event/"+n+"/"+o.hostedEvents[n].host.uid+"/"+o.userId),a.redirectTo("/event",n,o.hostedEvents[n].host.uid,o.userId)}}e.$inject=["scope","el","attr","ctrl"];var t={restrict:"AECM",templateUrl:"../views/directives/hostedEventsList.directive.htm",replace:!0,scope:{hostedEvents:"=",userId:"="},link:e,controller:n,controllerAs:"vm",bindToController:!0};return n.$inject=["$log","trafficValet"],t}function progressBar(){return{restrict:"E",scope:{curVal:"@",maxVal:"@"},template:"<div class='progress-bar'><div class='progress-bar-bar'>testing</div></div>",link:function(e,n,t){function i(){var t=0;e.maxVal&&(t=Math.min(e.curVal,e.maxVal)/e.maxVal*n.find(".progress-bar").width()),n.find(".progress-bar-bar").css("width",t)}e.$watch("curVal",i),e.$watch("maxVal",i)}}}function hostedGuestList(){function e(e,n,t,i){}function n(e){function n(){return angular.isDefined(i.guestList)?(i.isAGuestList=!0,!0):(i.isAGuestList=!1,!1)}function t(){n()&&(i.guestList={})}var i=this;i.isAGuestList=!1,t()}e.$inject=["scope","el","attr","ctrl"];var t={restrict:"AECM",templateUrl:"../views/directives/hostedGuestList.directive.htm",replace:!0,scope:{guestList:"="},link:e,controller:n,controllerAs:"vm",bindToController:!0};return n.$inject=["$log"],t}function toolBar(){function e(e,n,t,i){}function n(e,n){var t=this,i=n;i.checkLoginStatus().then(function(e){t.loggedIn=e})["catch"](),t.clicked=function(){e.info("button clicked")}}e.$inject=["scope","el","attr","ctrl"];var t={restrict:"AECM",templateUrl:"../views/directives/toolBar.directive.htm",replace:!0,scope:{},link:e,controller:n,controllerAs:"vm",bindToController:!0};return n.$inject=["$log","backendServices"],t}config.$inject=["$routeProvider"],userAuthenticationService.$inject=["authService"],eventViewChanger.$inject=["trafficValet","$route"],angular.module("meetUpEventApp",["ngRoute","ngTouch","firebase"]),angular.module("meetUpEventApp").controller("AnEventController",AnEventController),AnEventController.$inject=["$log","$routeParams"],angular.module("meetUpEventApp").controller("GuestEventController",GuestEventController),GuestEventController.$inject=["$log"],angular.module("meetUpEventApp").controller("HostEventController",HostEventController),HostEventController.$inject=["$log","$routeParams","userData","trafficValet"],angular.module("meetUpEventApp").controller("LandingPageController",LandingPageController),LandingPageController.$inject=["$scope","$log","$location","$document","$window"],angular.module("meetUpEventApp").controller("MainController",MainController),MainController.$inject=["$log","$location","$document","$window"],angular.module("meetUpEventApp").controller("NewUserSignUpController",NewUserSignUpController),NewUserSignUpController.$inject=["$scope","$log","validation","backendServices","trafficValet","userData"],angular.module("meetUpEventApp").controller("RegUserLoginController",RegUserLoginController),RegUserLoginController.$inject=["$log","$document","backendServices","trafficValet","userData"],angular.module("meetUpEventApp").controller("topMenuController",topMenuController),topMenuController.$inject=["$scope","$log","$location","$document","$window"],angular.module("meetUpEventApp").controller("UserEventsController",UserEventsController),UserEventsController.$inject=["$log","$routeParams","userData","trafficValet"],angular.module("meetUpEventApp").controller("UserInformationController",UserInformationController),UserInformationController.$inject=["$log","$document","$routeParams","userData","trafficValet"],angular.module("meetUpEventApp").factory("authService",authService),authService.$inject=["$log","backendServices"],angular.module("meetUpEventApp").factory("backendServices",backendServices),backendServices.$inject=["$log","$q","$window"],angular.module("meetUpEventApp").factory("trafficValet",trafficValet),trafficValet.$inject=["$log","$location"],angular.module("meetUpEventApp").factory("userData",userData),userData.$inject=["$log","$q","backendServices"],angular.module("meetUpEventApp").factory("validation",validation),validation.$inject=["$log"],angular.module("meetUpEventApp").config(config),angular.module("meetUpEventApp").directive("addAGuest",addAGuest),angular.module("meetUpEventApp").directive("hostedEventsList",hostedEventsList),angular.module("meetUpEventApp").directive("progressBar",progressBar),angular.module("meetUpEventApp").directive("hostedGuestList",hostedGuestList),angular.module("meetUpEventApp").directive("toolBar",toolBar);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFuRXZlbnQuY29udHJvbGxlci5qcyIsIkd1ZXN0RXZlbnQuY29udHJvbGxlci5qcyIsIkhvc3RFdmVudC5jb250cm9sbGVyLmpzIiwiTGFuZGluZ1BhZ2UuY29udHJvbGxlci5qcyIsIk1haW4uY29udHJvbGxlci5qcyIsIk5ld1VzZXJTaWduVXAuY29udHJvbGxlci5qcyIsIlJlZ1VzZXJMb2dpbi5jb250cm9sbGVyLmpzIiwiVG9wTWVudS5jb250cm9sbGVyLmpzIiwiVXNlckV2ZW50cy5jb250cm9sbGVyLmpzIiwiVXNlckluZm9ybWF0aW9uLmNvbnRyb2xsZXIuanMiLCJBdXRoU2VydmljZS5mYWN0b3J5LmpzIiwiQmFja2VuZFNlcnZpY2VzLmZhY3RvcnkuanMiLCJUcmFmZmljVmFsZXQuZmFjdG9yeS5qcyIsIlVzZXJEYXRhLmZhY3RvcnkuanMiLCJWYWxpZGF0aW9uLmZhY3RvcnkuanMiLCJyb3V0ZS1jb25maWcuanMiLCJhcHAuanMiLCJBZGRBR3Vlc3QuZGlyZWN0aXZlLmpzIiwiSG9zdGVkRXZlbnRzTGlzdC5kaXJlY3RpdmUuanMiLCJIb3N0ZWRFdmVudHNQcm9ncmVzc0Jhci5kaXJlY3RpdmUuanMiLCJIb3N0ZWRHdWVzdExpc3QuZGlyZWN0aXZlLmpzIiwiVG9vbEJhci5kaXJlY3RpdmUuanMiLCJhcHAubW9kdWxlLmpzIl0sIm5hbWVzIjpbIkFuRXZlbnRDb250cm9sbGVyIiwiJGxvZyIsIiRyb3V0ZVBhcmFtcyIsImluaXQiLCJ2bSIsInRlbXBEYXRlVGltZSIsInN0YXJ0IiwiZW5kIiwibmV3R3Vlc3QiLCJuYW1lIiwiZW1haWwiLCJhZGRyZXNzIiwidmFsaWQiLCJzdHlsZSIsImNvbG9yIiwic2hvd0lmSG9zdCIsImhpZGVJZkF0dGVuZGluZyIsIm1hbmFnZVNlY3Rpb25zIiwxLCJhY3RpdmUiLCJjb21wbGV0ZSIsImJhY2tncm91bmQtY29sb3IiLDIsMywiY2hlY2tGb3JIb3N0IiwiY2hlY2tJZkd1ZXN0SXNBdHRlbmRpbmciLCJvcGVuQWxsU2VjdGlvbnMiLCJ1dGY4X3RvX2I2NCIsInN0ciIsImJ0b2EiLCJiNjRfdG9fdXRmOCIsImF0b2IiLCJkYXRlVGltZVRvVW5peFRpbWUiLCJkYXRlVGltZSIsIkRhdGUiLCJwYXJzZSIsImNsZWFuTmV3R3Vlc3RWYXJpYWJsZSIsImludml0ZUFSZWdpc3RlcmVkVXNlciIsInVpZCIsImluZm8iLCJyZWYiLCJjaGlsZCIsImV2ZW50SWQiLCJzZXQiLCJpZCIsImV2ZW50VGltZXMiLCJldmVudCIsImhvc3QiLCJlcnJvciIsIm9uY2UiLCJzbmFwc2hvdCIsImNoZWNrRm9yUGxhY2Vob2xkZXIiLCJ2YWwiLCJ1cGRhdGVkIiwicmVtb3ZlIiwiZXJyb3JPYmplY3QiLCJjb2RlIiwiaW52aXRlQW5VbnJlZ2lzdGVyZWRVc2VyIiwidXNlcktleSIsImF1dGhEYXRhIiwiZ2V0QXV0aCIsImhvc3RJZCIsInVzZXJFdmVudHMiLCJvbiIsImFsbEd1ZXN0cyIsImF0dGVuZGluZyIsInRoaXMiLCJ0ZW1wVGltZSIsInVzZXJJc0hvc3QiLCJzZXRUZW1wVGltZSIsImVuZHBvaW50IiwidW5peFRpbWVUb0RhdGVUaW1lIiwidW5peFRpbWUiLCJwYXJzZUludCIsInN1Ym1pdCIsImJhY2tUb1VzZXJFdmVudHMiLCIkbG9jYXRpb24iLCJwYXRoIiwidG9rZW4iLCJldmVudFJlZGlyZWN0IiwiZXZlbnRJRCIsImZ1bGxQYXRoIiwiY2hhbmdlU2VjdGlvbiIsInRhcmdldFNlY3Rpb24iLCJpIiwic2F2ZUV2ZW50VGltZSIsInRhcmdldCIsImd1ZXN0c0FyZUludml0ZWQiLCJndWVzdExpc3QiLCJ2YWxpZGF0ZUd1ZXN0RW1haWwiLCJjb25zdHJhaW50IiwiUmVnRXhwIiwidGVzdCIsImlzU2VjdGlvbkNvbXBsZXRlIiwicmVxdWlyZWRJbnB1dHMiLCJzYXZlQW5kQWR2YW5jZSIsIiRzYXZlIiwidGhlbiIsImFkZEd1ZXN0VG9Ib3N0c0xpc3QiLCJyZWdpc3RlcmVkVXNlcnMiLCJzdGF0dXMiLCJzYXZlRXZlbnQiLCJndWVzdFdpbGxBdHRlbmQiLCJyZXNwb25zZSIsImN1cnJlbnRVc2VyIiwidG90YWxQZW5kaW5nSW52aXRhdGlvbnMiLCJyZW1vdmVBdHRlbmRpbmdVcGRhdGVkIiwiaW52aXRhdGlvbnMiLCJ0aGlzSW52aXRhdGlvbiIsImludml0YXRpb24iLCJhdHRlbmRpbmdMaXN0IiwiY3VycmVudERhdGUiLCJ1cGRhdGUiLCJ1cGRhdGVVcGRhdGVkUGFyYW0iLCJhZGRJbnZpdGF0aW9uVG9BdHRlbmRpbmciLCJHdWVzdEV2ZW50Q29udHJvbGxlciIsIkhvc3RFdmVudENvbnRyb2xsZXIiLCJ1c2VyRGF0YSIsInRyYWZmaWNWYWxldCIsImNhbGN1bGF0ZUR1cmF0aW9uIiwiaW5pdEV2ZW50VGltZXMiLCJub3ciLCJzZXRIb3VycyIsImdldEhvdXJzIiwiTWF0aCIsInJvdW5kIiwiZ2V0TWludXRlcyIsInNldE1pbnV0ZXMiLCJzZXRTZWNvbmRzIiwic2V0TWlsbGlzZWNvbmRzIiwiZHVyYXRpb24iLCJ1cGRhdGVUZW1wVGltZUZyb21Nb2RlbCIsImFuZ3VsYXIiLCJpc0RlZmluZWQiLCJ0ZW1wRXZlbnQiLCJ0aGlzRXZlbnRNYW5hZ2VyIiwibG9hZEFuRXZlbnRQcm9ncmVzc2l2ZWx5IiwidGhlRXZlbnQiLCJhY3RpdmVTZWN0aW9uIiwic2VjdGlvbiIsImhvc3RlZEV2ZW50U2hlcnBhIiwicHJvZ3Jlc3NCYXIiLCJmb3JtYXREdXJhdGlvbiIsImhvdXJzIiwiZmxvb3IiLCJtaW4iLCJmcmFjdGlvbiIsInNldHRpbmdUZW1wU3RhcnQiLCJzZXR0aW5nVGVtcEVuZCIsInJlZGlyZWN0VG8iLCJzZWN0aW9uQmFjayIsInNlY3Rpb25Gb3J3YXJkIiwiTGFuZGluZ1BhZ2VDb250cm9sbGVyIiwiJHNjb3BlIiwiJGRvY3VtZW50IiwiJHdpbmRvdyIsInJlZGlyZWN0IiwiY3VycmVudFVzZXJEYXRhIiwiJGFwcGx5IiwiZmJVUkwiLCJzaG93UmVxdWlybm1lbnRzIiwidmFsaWROZXdOYW1lIiwidmFsaWROZXdFbWFpbCIsInNlY3VyZVBhc3N3b3JkIiwic2VjdXJlIiwidW5sb2NrQ3JlYXRlVXNlckJ0biIsInVzYWJsZSIsImNsYXNzIiwibWVzc2FnZSIsInZhbGlkVXNlckVtYWlsIiwidmFsaWRVc2VyUGFzc3dvcmQiLCJ1bmNsb2NrVXNlckxvZ2luQnRuIiwicGFzc3dvcmRSZXF1aXJubWVudHMiLDAsIm1ldCIsNCw1LDYsImRpc3BsYXlQYXNzUmVxcyIsIm5ld05hbWUiLCJuZXdFbWFpbCIsImNoZWNrTmV3TmFtZSIsImxlbmd0aCIsIm9wZW5DcmVhdGVVc2VyQnV0dG9uIiwiY2hlY2tOZXdFbWFpbCIsImNoZWNrVXNlckVtYWlsIiwidXNlckVtYWlsIiwib3BlblVzZXJMb2dpbkJ0biIsImNoZWNrTmV3UGFzc3dvcmRzIiwiY29uc3RyYWludHMiLCJuZXdQYXNzd29yZCIsImNoZWNrVXNlclBhc3N3b3JkcyIsInVzZXJQYXNzd29yZCIsImZpbmQiLCJ2YWx1ZSIsImNyZWF0ZU5ld1VzZXIiLCJGaXJlYmFzZSIsImNyZWF0ZVVzZXIiLCJwYXNzd29yZCIsInVzZXJzUmVmIiwiYmlvIiwiZXZlbnRzIiwicGVuZGluZyIsImhvc3RpbmciLCJjb21wbGV0ZWQiLCJsb2dpblJlZ2lzdGVyZWRVc2VyIiwiYXV0aFdpdGhQYXNzd29yZCIsImFsZXJ0TWUiLCJhbGVydCIsIm9uUmVzaXplRnVuY3Rpb24iLCJpbnB1dFRleHQiLCJlbGVtZW50Iiwib3V0ZXJXaWR0aCIsIm91dGVySGVpZ2h0IiwiY3NzIiwiYWRkRXZlbnRMaXN0ZW5lciIsIkZhc3RDbGljayIsImF0dGFjaCIsImJvZHkiLCJiaW5kIiwicmVhZHkiLCJtYXN0ZXIiLCJ1c2VyIiwiY29weSIsInJlc2V0IiwiZm9ybSIsIiRzZXRQcmlzdGluZSIsIiRzZXRVbnRvdWNoZWQiLCJNYWluQ29udHJvbGxlciIsInJlc2l6ZUJHSW1hZ2UiLCJsb2dvdXQiLCJ1bmF1dGgiLCJOZXdVc2VyU2lnblVwQ29udHJvbGxlciIsInZhbGlkYXRpb24iLCJiYWNrZW5kU2VydmljZXMiLCJ2ZXJpZnlSZXF1aXJubWVudHMiLCJlcnJvcnMiLCJwYXNzZXNBbGxUZXN0cyIsImlucHV0cyIsInJlcXVpcmVkRmllbGRzRGVmaW5lZCIsInBhc3NSZXFzIiwicmVxIiwiZnVsZmlsbGVkIiwic2hvd1JlcXNCb3giLCJzaWdudXBWYWxpZGF0aW9uIiwiaGFzTmFtZSIsInJlcXVpcmVkIiwibG9uZ0Vub3VnaCIsIm1pbk5hbWVMZW5ndGgiLCJwdXNoIiwiam9pbiIsImhhc0VtYWlsIiwiaXNBbkVtYWlsIiwiY2hlY2tOZXdQYXNzd29yZCIsImhhc1Bhc3N3b3JkIiwic3BlY2lmaWNSZXFzIiwibWluUGFzc0xlbmd0aCIsIm1heFBhc3NMZW5ndGgiLCJhdExlYXN0T25lTG93ZXJjYXNlIiwiYXRMZWFzdE9uZVVwcGVyY2FzZSIsImF0TGVhc3RPbmVOdW1iZXIiLCJhdExlYXN0T25lU3ltYm9sIiwiaWxsZWdhbENoYXJhY3RlciIsImFueUVycm9ycyIsImV4aXRQYXNzd29yZCIsIm5ld1VzZXJTaGVycGEiLCJuZXdVc2VyRGF0YSIsImRiVXNlckRhdGEiLCJsb2FkUHJpbWFyaWVzIiwiYWRkTmV3VXNlclRvRGF0YWJhc2UiLCJhZGROZXdVc2VyVG9SZWdVc2Vyc0xpc3QiLCJSZWdVc2VyTG9naW5Db250cm9sbGVyIiwicmVnaXN0ZXJlZFVzZXJTaGVycGEiLCJkYXRhYmFzZSIsInJlZ2lzdGVyZWRVc2VyRGF0YSIsIkxvZ2luUmVnaXN0ZXJlZFVzZXIiLCJ1c2VyQ3JlZGVudGlhbHMiLCJzZXRQcmltYXJpZXNMb2NhbGx5IiwiZ2V0VUlETG9jYWxseSIsImdldFVzZXJCaW8iLCJ1c2VyQmlvIiwidXBkYXRlQmlvTG9jYWxseSIsImdldFVzZXJFdmVudHMiLCJhbGxFdmVudHNGb3JUaGlzVXNlciIsInVwZGF0ZUFsbFVzZXJFdmVudHNMb2NhbGx5IiwiY2xpY2tlZCIsInVzZXJBdXRoZW50aWNhdGlvbiIsImxvZ1VzZXJPdXQiLCJ0b3BNZW51Q29udHJvbGxlciIsImF1dGhEYXRhQ2FsbGJhY2siLCJwcm92aWRlciIsImxvZ2dlZEluIiwibmF2QmFyTG9naW5SZWdpc3RlcmVkVXNlciIsIm5hdmJhclVzZXJFbWFpbCIsIm5hdmJhclVzZXJQYXNzIiwiY2xpY2siLCJuYXZiYXJJbnB1dHMiLCJvbkF1dGgiLCJVc2VyRXZlbnRzQ29udHJvbGxlciIsIm5vT2ZIb3N0ZUV2ZW50cyIsImNvdW50ZXIiLCJnZW5lcmF0ZUV2ZW50SUQiLCJkYXRlIiwiY2hlY2tGb3JFdmVudHMiLCJPYmplY3QiLCJrZXlzIiwiZm9yRWFjaCIsImNhdGVnb3J5IiwiaXNPYmplY3QiLCJzZWN0aW9uQXZhaWxhYmxlIiwiaW5pdGlhbGl6ZSIsInNldFVJRExvY2FsbHkiLCJsb2FkQmlvIiwicmV0cmlldmVkQmlvIiwiZ2V0QWxsVXNlckV2ZW50c0xvY2FsbHkiLCJnZXRSZW1vdGVFdmVudHNGb3JMb2NhbCIsIm9idGFpbmVkVXNlckV2ZW50cyIsInNob3dEZWNsaW5lIiwiY3JlYXRlTmV3RXZlbnQiLCJuZXdFdmVudFNoZXJwYSIsImFmZmlybWF0aXZlUmVzcG9uc2UiLCJjbGVhbkRCRXZlbnRzQ2F0ZWdvcnkiLCJlcnJvclJlc3BvbnNlIiwiVXNlckluZm9ybWF0aW9uQ29udHJvbGxlciIsIm9idGFpbmVkVXNlckRhdGEiLCJkb2IiLCJ0ZW1wQmlydGhkYXkiLCJ2aWV3IiwiZGF0YVRvU2F2ZSIsImlzRGF0YSIsImJ0bk1zc2ciLCJwcm9jZWVkQnRuIiwiY2hlY2tWYWx1ZXMiLCJpc1VuZGVmaW5lZCIsImNvbXBhbnkiLCJ0aXRsZSIsInVwZGF0ZURPQiIsInNhdmVBbmRNb3ZlT24iLCJ1c2VySW5mb1NoZXJwYSIsImN1cnJlbnRVaWQiLCJhdXRoU2VydmljZSIsImlzTG9nZ2VkSW4iLCJkYkF1dGhlbnRpY2F0aW9uIiwiY2hlY2tMb2dpblN0YXR1cyIsImFsbEF1dGhTZXJ2aWNlcyIsIiRxIiwiZmlyZUJhc2VBY2NvdW50cyIsInJlc29sdmUiLCJyZWplY3QiLCJhcHAiLCJhcHBVc2VycyIsImI2NEVtYWlsIiwiUmVnaXN0ZXJlZFVzZXJzTGlzdCIsIlByb21pc2UiLCJ1cGxvYWRVc2VyRGF0YSIsImFsbFVzZXJEYXRhIiwicmVtb3RlVXNlciIsInVwbG9hZFVzZXJCaW8iLCJjdXJyZW50VXNlckJpbyIsInRvU3RyaW5nIiwicmVtb3RlVXNlckJpbyIsImRvd25sb2FkVXNlckRhdGEiLCJjcmVhdGVIb3N0ZWRFdmVudCIsIm5ld0V2ZW50IiwibmV3SG9zdGVkRXZlbnQiLCJvcmRlckJ5S2V5IiwidXNlclByb2ZpbGUiLCJldmVudHNQYWNrYWdlIiwiZ2V0QUhvc3RlZEV2ZW50IiwiaG9zdGVkRXZlbnQiLCJzZWxlY3RFdmVudCIsImdldEFuSW52aXRlZEV2ZW50IiwiZGVsZXRlVXBkYXRlRmllbGQiLCJjYXRSZW1vdmluZ0Zyb20iLCJ0aGVyZVdhc0FuVXBkYXRlRmllbGQiLCJjYXRUb0NoZWNrIiwiY3VycmVudENhdE1vZGVsIiwiYWxsQmFja2VuZFNlcnZpY2VzIiwicGFyYW0xIiwicGFyYW0yIiwicGFyYW0zIiwiZXZlbnRSb3V0ZSIsInVzZXJJZCIsImFsbFRyYWZmaWNDb250cm9scyIsImJpb1ByaW1hcmllc0FyZUNvbXBsZXRlTG9jYWxseSIsImV2ZW50RXhpc3RzTG9jYWxseSIsInR5cGUiLCJ0aGlzSXNUaGVIb3N0RW1haWwiLCJjbGVhbkV2ZW50cyIsImtleSIsImdldE5hbWVMb2NhbGx5IiwiZ2V0RW1haWxMb2NhbGx5IiwiZ2V0Q29tcGFueUxvY2FsbHkiLCJnZXRUaXRsZUxvY2FsbHkiLCJnZXRET0JMb2NhbGx5IiwiZ2V0RnVsbEJpb0xvY2FsbHkiLCJnZXRPbmVVc2VyRXZlbnRMb2NhbGx5IiwiZ2V0VXNlckV2ZW50c0xvY2FsbHkiLCJzZXROYW1lTG9jYWxseSIsInNldEVtYWlsTG9jYWxseSIsInNldENvbXBhbnlMb2NhbGx5Iiwic2V0VGl0bGVMb2NhbGx5Iiwic2V0RE9CTG9jYWxseSIsInVwZGF0ZVVzZXJFdmVudHNMb2NhbGx5IiwiYWxsVXNlckV2ZW50cyIsInNldFJlbW90ZUJpb0Zyb21Mb2NhbCIsInJlbW92ZVVzZXJFdmVudHNMb2NhbGx5IiwiZ2V0RnVsbFJlbW90ZURCZm9yTG9jYWwiLCJkYiIsInJlbW90ZVVzZXJEYXRhIiwiZ2V0UmVtb3RlQmlvRm9yTG9jYWwiLCJldmVudFR5cGUiLCJnZXRPbmVSZW1vdGVFdmVudEZvckxvY2FsIiwib2J0YWluZWRFdmVudCIsInNldEZ1bGxSZW1vdGVEQmZyb21Mb2NhbCIsInNldFJlbW90ZUV2ZW50c0Zyb21Mb2NhbCIsImJpb0Zyb21SZW1vdGVEQiIsIm9idGFpbmVkVXNlckV2ZW50IiwibG9hZEV2ZW50c1Byb2dyZXNzaXZlbHkiLCJhbGxFdmVudHMiLCJzdHJlZXQwMSIsInN0cmVldDAyIiwic3RyZWV0MDMiLCJjaXR5Iiwic3RhdGUiLCJ6aXAiLCJtaW5pbXVtTmFtZUxlbmd0aCIsIm1pbmltdW1QYXNzTGVuZ3RoIiwibWF4aW11bVBhc3NMZW5ndGgiLCJkYXRlT2ZCaXJ0aCIsImFsbFZhbGlkYXRpb25zIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwiY29udHJvbGxlckFzIiwidXNlckF1dGhlbnRpY2F0aW9uU2VydmljZSIsImV2ZW50Vmlld0NoYW5nZXIiLCJvdGhlcndpc2UiLCIkcm91dGUiLCJjdXJyZW50IiwicGFyYW1zIiwiYWRkQUd1ZXN0IiwibGlua0Z1bmMiLCJzY29wZSIsImVsIiwiYXR0ciIsImN0cmwiLCJhZGRBR3Vlc3RDb250cm9sbGVyIiwidmFsaWRhdGVJbnZpdGF0aW9uIiwidmFsaWRhdGlvbnMiLCJpbnZpdGF0aW9uVmFsaWRGb3JTdWJtaXNzaW9uIiwic3VibWlzc2lvbkJ1dHRvbiIsImludml0YXRpb25NYW5hZ2VyIiwiZXZlbnREZXRhaWxzIiwiZW1haWxDaGVja2VyIiwidGVtcEd1ZXN0IiwiYWRkcmVzc2VkIiwiZXJyb3JNZXNzYWdlIiwiaXNUaGVIb3N0IiwiYWxyZWFkeUludml0ZWQiLCJjb2wteHMtMTIiLCJjb2wtc20tMTIiLCJidG4iLCJidG4td2FybmluZyIsImJ0bi1zdWNjZXNzIiwidmFsaWRhdGVOYW1lIiwidmFsaWRhdGVFbWFpbCIsInNob3dOYW1lRXJyb3IiLCJzaG93RW1haWxFcnJvciIsInNob3dJbnZpdGF0aW9uRXJyb3IiLCJzdWJtaXRHdWVzdEludml0YXRpb24iLCIkaW5qZWN0IiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJyZXBsYWNlIiwibGluayIsImJpbmRUb0NvbnRyb2xsZXIiLCJob3N0ZWRFdmVudHNMaXN0IiwiaG9zdGVkRXZlbnRzTGlzdENvbnRyb2xsZXIiLCJjb3VudEd1ZXN0cyIsImxpc3QiLCJndWVzdCIsImhvc3RlZEV2ZW50c1NoZXJwYSIsImZvcm1hdERhdGUiLCJndWVzdHNBdHRlbmRpbmciLCJndWVzdHNJbnZpdGVkIiwidG90YWxHdWVzdENvdW50IiwiZ3Vlc3RDb3VudCIsImRlY2xpbmVkIiwicGVyY2VudGFnZUF0dGVuZGluZyIsImd1ZXN0bGlzdCIsImV2ZW50Q2xpY2tlZCIsImhvc3RlZEV2ZW50cyIsImN1clZhbCIsIm1heFZhbCIsInRlbXBsYXRlIiwiYXR0cnMiLCJ1cGRhdGVQcm9ncmVzcyIsInByb2dyZXNzIiwid2lkdGgiLCIkd2F0Y2giLCJob3N0ZWRHdWVzdExpc3QiLCJob3N0ZWRHdWVzdExpc3RDb250cm9sbGVyIiwidGhlcmVJc0FHdWVzdExpc3QiLCJpc0FHdWVzdExpc3QiLCJ0b29sQmFyIiwiVG9vbEJhckNvbnRyb2xsZXIiLCJmYkNvbm5lY3QiLCJtb2R1bGUiLCJmYWN0b3J5Il0sIm1hcHBpbmdzIjoiQUFPQSxRQUFBQSxtQkFBQUMsRUFBQUMsR0FTQSxRQUFBQyxLQUVBQyxFQUFBQyxjQUFBQyxNQUFBLEdBQUFDLElBQUEsSUFDQUgsRUFBQUksVUFBQUMsS0FBQSxHQUFBQyxPQUFBQyxRQUFBLEdBQUFDLE9BQUEsRUFBQUMsT0FBQUMsTUFBQSxNQUNBVixFQUFBVyxZQUFBLEVBQ0FYLEVBQUFZLGlCQUFBLEVBRUFaLEVBQUFhLGdCQUNBQyxHQUFBQyxRQUFBLEVBQUFD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ZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdBbkV2ZW50Q29udHJvbGxlcicsIEFuRXZlbnRDb250cm9sbGVyKTtcblxuQW5FdmVudENvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICckcm91dGVQYXJhbXMnLCBdO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIEFuRXZlbnRDb250cm9sbGVyKCRsb2csICRyb3V0ZVBhcmFtcykge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHRcblx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0dm0udGVtcFRpbWUgPSB7c3RhcnQ6ICcnLCBlbmQ6ICcnfTtcblx0dm0udXNlcklzSG9zdCA9IGZhbHNlO1xuXG5cblx0Ly9Mb2NhbCBNZXRob2RzXG5cdGZ1bmN0aW9uIGluaXQoKSB7XG5cdFx0Ly9kZWNsYXJlIGFuZCBpbml0aWFsaXplIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZtLnRlbXBEYXRlVGltZSA9IHtzdGFydDogJycsIGVuZDogJyd9O1xuXHRcdHZtLm5ld0d1ZXN0ID0ge25hbWU6ICcnLCBlbWFpbDp7YWRkcmVzczonJywgdmFsaWQ6ZmFsc2UsIHN0eWxlOntjb2xvcjonJ319fTtcblx0XHR2bS5zaG93SWZIb3N0ID0gZmFsc2U7XG5cdFx0dm0uaGlkZUlmQXR0ZW5kaW5nID0gdHJ1ZTtcblx0XHQvL3NlY3Rpb25zXG5cdFx0dm0ubWFuYWdlU2VjdGlvbnMgPSB7XG5cdFx0XHQxOiB7YWN0aXZlOiB0cnVlLCBjb21wbGV0ZTogZmFsc2UsIHN0eWxlOntjb2xvcjonYmxhY2snLCAnYmFja2dyb3VuZC1jb2xvcic6J3llbGxvdyd9fSxcblx0XHRcdDI6IHthY3RpdmU6IGZhbHNlLCBjb21wbGV0ZTogZmFsc2UsIHN0eWxlOntjb2xvcjond2hpdGUnLCAnYmFja2dyb3VuZC1jb2xvcic6J2dyYXknfX0sXG5cdFx0XHQzOiB7YWN0aXZlOiBmYWxzZSwgY29tcGxldGU6IGZhbHNlLCBzdHlsZTp7Y29sb3I6J3doaXRlJywgJ2JhY2tncm91bmQtY29sb3InOidncmF5J319XG5cdFx0fTtcblxuXHRcdC8vY2hlY2sgdXNlciB0byBkZXRlcm1pbmUgc3RhdGVcblx0XHRjaGVja0Zvckhvc3QoKTtcblx0XHRjaGVja0lmR3Vlc3RJc0F0dGVuZGluZygpO1xuXG5cdFx0Ly9vcGVuIHVwIHNlY3Rpb25zXG5cdFx0aWYoIXZtLnNob3dJZkhvc3QpIG9wZW5BbGxTZWN0aW9ucygpO1xuXHR9XG5cblx0ZnVuY3Rpb24gdXRmOF90b19iNjQoc3RyKSB7XG5cdFx0cmV0dXJuIGJ0b2Eoc3RyKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGI2NF90b191dGY4KHN0cikge1xuICAgIFx0cmV0dXJuIGF0b2Ioc3RyKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNsZWFuTmV3R3Vlc3RWYXJpYWJsZSgpIHtcblx0XHR2bS5uZXdHdWVzdCA9IHtuYW1lOiAnJywgZW1haWw6e2FkZHJlc3M6JycsIHZhbGlkOmZhbHNlLCBzdHlsZTp7Y29sb3I6Jyd9fX07XG5cdH1cblxuXHRmdW5jdGlvbiBpbnZpdGVBUmVnaXN0ZXJlZFVzZXIodWlkKSB7XG5cdFx0JGxvZy5pbmZvKCdhZGRpbmcgdGhlbSB0byB0aGUgcmVnaXN0ZXJlZCB1c2VycyBsaXN0ICcgKyB1aWQpO1xuXHRcdC8vc2V0IHRoZSBuZXcgZXZlbnRcblx0XHRyZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ3BlbmRpbmcnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS5jaGlsZCgkcm91dGVQYXJhbXMuZXZlbnRJZCkuc2V0KHtcblx0XHRcdGlkOiAkcm91dGVQYXJhbXMuZXZlbnRJZCxcblx0XHRcdGV2ZW50VGltZXM6IHtcblx0XHRcdFx0c3RhcnQ6IHZtLmV2ZW50LmV2ZW50VGltZXMuc3RhcnQsXG5cdFx0XHRcdGVuZDogdm0uZXZlbnQuZXZlbnRUaW1lcy5lbmRcblx0XHRcdH0sXG5cdFx0XHRuYW1lOiB2bS5ldmVudC5uYW1lLFxuXHRcdFx0aG9zdDogJHJvdXRlUGFyYW1zLnVpZFxuXHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKCd0aGVyZSB3YXMgYW4gZXJyb3InICsgZXJyb3IpO1xuXHRcdH0pO1xuXHRcdC8vaWYgdGhlcmUgd2FzIGFuIHVwZGF0ZWQgcGxhY2UgaG9sZGVyLCByZW1vdmUgaXRcblx0XHRyZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ3BlbmRpbmcnKS5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHR2YXIgY2hlY2tGb3JQbGFjZWhvbGRlciA9IHNuYXBzaG90LnZhbCgpXG5cdFx0XHQkbG9nLmluZm8oc25hcHNob3QudmFsKCkpO1xuXG5cdFx0XHRpZihjaGVja0ZvclBsYWNlaG9sZGVyLnVwZGF0ZWQpIHtcblx0XHRcdFx0JGxvZy5pbmZvKCdkZWxldGluZyB1cGRhdGVkJyk7XG5cdFx0XHRcdHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgncGVuZGluZycpLmNoaWxkKCd1cGRhdGVkJykucmVtb3ZlKGZ1bmN0aW9uKGVycm9yT2JqZWN0KSB7XG5cdFx0XHRcdFx0aWYoZXJyb3JPYmplY3QpICRsb2cuaW5mbyhcIkRlbGV0aW5nIGZhaWxlZDogXCIgKyBlcnJvck9iamVjdC5jb2RlKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2UgJGxvZy5pbmZvKCdub3RoaW5nIHRvIGRvJyk7XG5cblx0XHR9LCBmdW5jdGlvbihlcnJvck9iamVjdCkge1xuXHRcdFx0aWYoZXJyb3JPYmplY3QpICRsb2cuaW5mbyhcIlRoZSByZWFkIGZhaWxlZDogXCIgKyBlcnJvck9iamVjdC5jb2RlKTtcblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGludml0ZUFuVW5yZWdpc3RlcmVkVXNlcih1c2VyS2V5KSB7XG5cdFx0JGxvZy5pbmZvKCdhZGRpbmcgdGhlbSB0byB0aGUgVU5SRUdJU1RFUkVEIHVzZXJzIGxpc3QgJyArIHVzZXJLZXkpO1xuXHRcdHJlZi5jaGlsZCgnVW5yZWdpc3RlcmVkVXNlcnMnKS5jaGlsZCh1c2VyS2V5KS5jaGlsZCgncGVuZGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ldmVudElkKS5zZXQoe1xuXHRcdFx0aWQ6ICRyb3V0ZVBhcmFtcy5ldmVudElkLFxuXHRcdFx0aG9zdDogJHJvdXRlUGFyYW1zLnVpZCxcblx0XHRcdGV2ZW50VGltZXM6IHtcblx0XHRcdFx0c3RhcnQ6IHZtLmV2ZW50LmV2ZW50VGltZXMuc3RhcnQsXG5cdFx0XHRcdGVuZDogdm0uZXZlbnQuZXZlbnRUaW1lcy5lbmRcblx0XHRcdH0sXG5cdFx0XHRuYW1lOiB2bS5ldmVudC5uYW1lXG5cdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oJ3RoZXJlIHdhcyBhbiBlcnJvcicgKyBlcnJvcik7XG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBjaGVja0Zvckhvc3QoKSB7XG5cdFx0Ly9jaGVjayBldmVudCBob3N0XG5cdFx0dmFyIGF1dGhEYXRhID0gcmVmLmdldEF1dGgoKTtcblxuXHRcdGlmKGF1dGhEYXRhLnVpZCA9PSAkcm91dGVQYXJhbXMuaG9zdElkKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2lzIHRoZSBob3N0Jyk7XG5cdFx0XHR2bS5zaG93SWZIb3N0ID0gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JGxvZy5pbmZvKCdub3QgdGhlIGhvc3QnKTtcblx0XHRcdHZtLnNob3dJZkhvc3QgPSBmYWxzZTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBjaGVja0lmR3Vlc3RJc0F0dGVuZGluZygpIHtcblx0XHRpZighdm0uc2hvd0lmSG9zdCkge1xuXHRcdFx0JGxvZy5pbmZvKCdjaGVjayBndWVzdCBhdHRlbmRhbmNlJyk7XG5cdFx0XHR1c2VyRXZlbnRzLmNoaWxkKCdndWVzdExpc3QnKS5vbigndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0XHR2YXIgYWxsR3Vlc3RzID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHRcdHZtLmhpZGVJZkF0dGVuZGluZyA9ICFhbGxHdWVzdHNbJHJvdXRlUGFyYW1zLnVpZF0uYXR0ZW5kaW5nO1xuXHRcdFx0XHRcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIG9wZW5BbGxTZWN0aW9ucygpIHtcblx0XHR2bS5tYW5hZ2VTZWN0aW9uc1sxXS5hY3RpdmUgPSB0cnVlO1xuXHRcdHZtLm1hbmFnZVNlY3Rpb25zWzJdLmFjdGl2ZSA9IHRydWU7XG5cdFx0dm0ubWFuYWdlU2VjdGlvbnNbM10uYWN0aXZlID0gdHJ1ZTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNhdmVFdmVudCgpIHtcblx0XHR2bS5ldmVudC4kc2F2ZSgpLnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2V2ZW50IHNhdmVkJyk7XG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdCRsb2cuaW5mbygnZXJyb3IhICcgKyBlcnJvcik7XG5cdFx0fSk7XG5cdH1cblxuXHQvL3ZpZXcgTWV0aG9kXG5cdHZtLnNldFRlbXBUaW1lID0gZnVuY3Rpb24oZW5kcG9pbnQpIHtcblx0XHRpZihlbmRwb2ludCA9PSAnc3RhcnQnKSB2bS50ZW1wRGF0ZVRpbWUuc3RhcnQgPSBuZXcgRGF0ZSgpO1xuXHRcdGlmKGVuZHBvaW50ID09ICdlbmQnKSB2bS50ZW1wRGF0ZVRpbWUuZW5kID0gbmV3IERhdGUoKTtcblx0fVxuXG5cdHZtLnVuaXhUaW1lVG9EYXRlVGltZSA9IGZ1bmN0aW9uICh1bml4VGltZSkge1xuXHRcdHJldHVybiBuZXcgRGF0ZShwYXJzZUludCh1bml4VGltZSkpO1xuXHR9O1xuXG5cdHZtLmRhdGVUaW1lVG9Vbml4VGltZSA9IGZ1bmN0aW9uIChkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fTtcblxuXHR2bS5zdWJtaXQgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9nLmluZm8oJ3N1Ym1pdHRpbmcgdGhlIGZvcm0gbm93IScpO1xuXHR9XG5cblx0dm0uYmFja1RvVXNlckV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2NhdGlvbi5wYXRoKCcvdXNlckV2ZW50cy8nICsgJHJvdXRlUGFyYW1zLnVpZCArICcvJyArICRyb3V0ZVBhcmFtcy50b2tlbik7XG5cdH1cblxuXHR2bS5ldmVudFJlZGlyZWN0ID0gZnVuY3Rpb24ocGF0aCwgZXZlbnRJRCkge1xuXHRcdHZhciBmdWxsUGF0aCA9IHBhdGggKyAnLycgKyAkcm91dGVQYXJhbXMudWlkICsgJy8nICsgJHJvdXRlUGFyYW1zLnRva2VuO1xuXHRcdC8vcmVkaXJlY3Rcblx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIHRvOiAnICsgZnVsbFBhdGgpO1xuXHRcdCRsb2NhdGlvbi5wYXRoKGZ1bGxQYXRoKTtcblx0fVxuXG5cdHZtLmNoYW5nZVNlY3Rpb24gPSBmdW5jdGlvbih0YXJnZXRTZWN0aW9uKSB7XG5cdFx0JGxvZy5pbmZvKCdhcmUgd2UgaGVyZScpO1xuXHRcdGZvcihpID0gMTsgaSA8PTM7IGkrKykge1xuXHRcdFx0aWYoaT09dGFyZ2V0U2VjdGlvbikge1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5hY3RpdmUgPSB0cnVlO1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5zdHlsZVsnYmFja2dyb3VuZC1jb2xvciddID0neWVsbG93Jztcblx0XHRcdFx0dm0ubWFuYWdlU2VjdGlvbnNbaV0uc3R5bGVbJ2NvbG9yJ10gPSdibGFjayc7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5hY3RpdmUgPSBmYWxzZTtcblx0XHRcdFx0dm0ubWFuYWdlU2VjdGlvbnNbaV0uc3R5bGVbJ2JhY2tncm91bmQtY29sb3InXSA9J2dyYXknO1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5zdHlsZVsnY29sb3InXSA9J3doaXRlJztcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHR2bS5zYXZlRXZlbnRUaW1lID0gZnVuY3Rpb24oZGF0ZVRpbWUsIHRhcmdldCkge1xuXHRcdC8vaWYgdGhpcyBldmVudCBkaWRuJ3QgaGF2ZSBhIHN0YXJ0IHRpbWUsIGNyZWF0ZSBpdFxuXHRcdGlmKCF2bS5ldmVudC5ldmVudFRpbWVzKSB7IFxuXHRcdFx0dm0uZXZlbnQuZXZlbnRUaW1lcyA9IHtzdGFydDogJycsIGVuZDogJyd9O1xuXHRcdFx0dm0uZXZlbnQuZXZlbnRUaW1lcy5zdGFydCA9IHZtLmRhdGVUaW1lVG9Vbml4VGltZSh2bS50ZW1wRGF0ZVRpbWUuc3RhcnQpOyBcblx0XHRcdHZtLmV2ZW50LmV2ZW50VGltZXMuZW5kID0gdm0uZGF0ZVRpbWVUb1VuaXhUaW1lKHZtLnRlbXBEYXRlVGltZS5lbmQpO1xuXHRcdH1cblxuXHRcdGlmKCh2bS50ZW1wRGF0ZVRpbWUuZW5kIDwgdm0udGVtcERhdGVUaW1lLnN0YXJ0KSAmJiB0YXJnZXQgPT0gJ3N0YXJ0Jykgdm0udGVtcERhdGVUaW1lLmVuZCA9IHZtLnRlbXBEYXRlVGltZS5zdGFydDtcblx0XHRpZih0YXJnZXQgPT0gJ3N0YXJ0Jykgdm0uZXZlbnQuZXZlbnRUaW1lcy5zdGFydCA9IHZtLmRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSk7XG5cdFx0aWYodGFyZ2V0ID09ICdlbmQnKSB2bS5ldmVudC5ldmVudFRpbWVzLmVuZCA9IHZtLmRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSk7XG5cdH1cblxuXHR2bS5ndWVzdHNBcmVJbnZpdGVkID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodm0uZXZlbnQuZ3Vlc3RMaXN0KSByZXR1cm4gdHJ1ZTtcblx0XHRlbHNlIHJldHVybiBmYWxzZTtcblx0fVxuXG5cdHZtLnZhbGlkYXRlR3Vlc3RFbWFpbCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vaWYgdGhlcmUgaXMgYW4gZW1haWwgYWRkcmVzc1xuXHRcdGlmKHZtLm5ld0d1ZXN0LmVtYWlsLmFkZHJlc3MpIHtcblx0XHRcdC8vY2hlY2sgdmFsaWRpdHlcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSsoPzpcXC5bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKSpAKD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1xcLikrW2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1wiLCBcIlwiKTtcblxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZtLm5ld0d1ZXN0LmVtYWlsLmFkZHJlc3MpKSB7XG5cdFx0XHRcdHZtLm5ld0d1ZXN0LmVtYWlsLnZhbGlkID0gdHJ1ZTtcblx0XHRcdFx0dm0ubmV3R3Vlc3QuZW1haWwuc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS5uZXdHdWVzdC5lbWFpbC52YWxpZCA9IGZhbHNlO1xuXHRcdFx0XHR2bS5uZXdHdWVzdC5lbWFpbC5zdHlsZSA9IHtjb2xvcjonJ307XG5cdFx0XHR9XHRcdFx0XG5cdFx0fVxuXHR9XG5cblx0dm0uaXNTZWN0aW9uQ29tcGxldGUgPSBmdW5jdGlvbigpIHtcblx0XHRmb3IoaT0wO2k8ODtpKyspIHtcblx0XHRcdCRsb2cuaW5mbyh2bS5yZXF1aXJlZElucHV0c1tpXSk7XG5cdFx0fVxuXHR9XG5cblx0dm0uc2F2ZUFuZEFkdmFuY2UgPSBmdW5jdGlvbigpIHtcblx0XHR2bS5ldmVudC4kc2F2ZSgpLnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2V2ZW50IHNhdmVkJyk7XG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdCRsb2cuaW5mbygnZXJyb3IhICcgKyBlcnJvcik7XG5cdFx0fSk7XG5cblx0XHQvL2NoZWNrIGZvciBjb21wbGV0ZW5lc1xuXHRcdHZtLmlzU2VjdGlvbkNvbXBsZXRlKCk7XG5cblx0XHRpZih2bS5tYW5hZ2VTZWN0aW9uc1sxXS5jb21wbGV0ZSA9PSB0cnVlICYmIHZtLm1hbmFnZVNlY3Rpb25zWzJdLmNvbXBsZXRlID09IHRydWUgJiYgdm0ubWFuYWdlU2VjdGlvbnNbM10uY29tcGxldGUgPT0gdHJ1ZSkge1xuXHRcdFx0dm0uZXZlbnRSZWRpcmVjdCgnL3VzZXJFdmVudHMnLCAkcm91dGVQYXJhbXMudWlkKTtcblx0XHR9IGVsc2UgaWYgKHZtLm1hbmFnZVNlY3Rpb25zWzFdLmFjdGl2ZSkgdm0uY2hhbmdlU2VjdGlvbigyKTtcblx0XHRlbHNlIGlmICh2bS5tYW5hZ2VTZWN0aW9uc1syXS5hY3RpdmUpIHZtLmNoYW5nZVNlY3Rpb24oMyk7XG5cdFx0ZWxzZSBpZiAodm0ubWFuYWdlU2VjdGlvbnNbM10uYWN0aXZlKSB2bS5jaGFuZ2VTZWN0aW9uKDEpO1xuXHR9XG5cblx0dm0uYWRkR3Vlc3RUb0hvc3RzTGlzdCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vZGVjbGFyZSBhbmQgaW5pdGlhbGl6ZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgdXNlcktleSA9IHV0ZjhfdG9fYjY0KHZtLm5ld0d1ZXN0LmVtYWlsLmFkZHJlc3MpO1xuXG5cdFx0Ly9pZiBlbWFpbCBpcyB2YWxpZCBhbmQgbmFtZSBleGlzdHNcblx0XHRpZiAodm0ubmV3R3Vlc3QubmFtZSAmJiB2bS5uZXdHdWVzdC5lbWFpbC52YWxpZCkge1xuXHRcdFx0Ly9pcyB0aGVyZSBhIGd1ZXN0IGxpc3QgYWxyZWFkeT8gSWYgbm90IGNyZWF0ZSBvbmVcblx0XHRcdGlmKCF2bS5ldmVudC5ndWVzdExpc3QpIHtcblx0XHRcdFx0dm0uZXZlbnQuZ3Vlc3RMaXN0ID0ge307XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2lmIHNvIGlzIHRoaXMgcGVyc29uIGFscmVhZHkgb24gdGhlIGxpc3Q/XG5cdFx0XHRcdHZhciBpID0wO1xuXHRcdFx0XHR3aGlsZSh2bS5ldmVudC5ndWVzdExpc3RbaV0pIHtcblx0XHRcdFx0XHRpZih2bS5ldmVudC5ndWVzdExpc3RbaV0uZW1haWwgPT0gYjY0X3RvX3V0ZjgodXNlcktleSkpIHtcblx0XHRcdFx0XHRcdCRsb2cuaW5mbygnVGhpcyBndWVzdCBpcyBhbHJlYWR5IG9uIHRoZSBsaXN0Jyk7XG5cdFx0XHRcdFx0XHRjbGVhbk5ld0d1ZXN0VmFyaWFibGUoKTtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aSsrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vaXMgdGhpcyBndWVzdCBhIHJlZ2lzdGVyZWQgdXNlcj9cblx0XHRcdGlmKHJlZ2lzdGVyZWRVc2Vyc1t1c2VyS2V5XSkge1xuXHRcdFx0XHQvL2lzIHRoZSByZWdpc3RlcmVkIHVzZXIgdGhlIGhvc3Q/XG5cdFx0XHRcdGlmKHJlZ2lzdGVyZWRVc2Vyc1t1c2VyS2V5XSA9PSAkcm91dGVQYXJhbXMudWlkKSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCd0cmllZCB0byByZWdpc3RlciB0aGUgaG9zdCcpO1xuXHRcdFx0XHRcdGNsZWFuTmV3R3Vlc3RWYXJpYWJsZSgpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHQvL2FkZCB0aGVtIHRvIHRoZSBhcHByb3ByaWF0ZSByZWdpc3RlcmVkIHVzZXJzJyBsaXN0IG9mIGV2ZW50IGludml0ZXNcblx0XHRcdFx0XHRpbnZpdGVBUmVnaXN0ZXJlZFVzZXIocmVnaXN0ZXJlZFVzZXJzW3VzZXJLZXldKTtcblxuXHRcdFx0XHRcdC8vYWRkIHRoZSBndWVzdCB0byB0aGUgbGlzdFxuXHRcdFx0XHRcdHZtLmV2ZW50Lmd1ZXN0TGlzdFtyZWdpc3RlcmVkVXNlcnNbdXNlcktleV1dID0ge1xuXHRcdFx0XHRcdFx0YXR0ZW5kaW5nOiBmYWxzZSwgXG5cdFx0XHRcdFx0XHRzdGF0dXM6J3BlbmRpbmcnLCBcblx0XHRcdFx0XHRcdG5hbWU6IHZtLm5ld0d1ZXN0Lm5hbWUsIFxuXHRcdFx0XHRcdFx0ZW1haWw6dm0ubmV3R3Vlc3QuZW1haWwuYWRkcmVzcyxcblx0XHRcdFx0XHR9O1x0XHRcdFx0XHRcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9hZGQgdGhlIGludml0ZSB0byB0aGUgbm9uLXJlZ2lzdGVyZWQgdXNlcnMgbGlzdCBvZiBldmVudCBpbnZpdGVzXG5cdFx0XHRcdGludml0ZUFuVW5yZWdpc3RlcmVkVXNlcih1c2VyS2V5KTtcblxuXHRcdFx0XHQvL2FkZCB0aGUgZ3Vlc3QgdG8gdGhlIGxpc3Rcblx0XHRcdFx0dm0uZXZlbnQuZ3Vlc3RMaXN0W3VzZXJLZXldID0ge1xuXHRcdFx0XHRcdFx0YXR0ZW5kaW5nOiBmYWxzZSwgXG5cdFx0XHRcdFx0XHRzdGF0dXM6J3BlbmRpbmcnLCBcblx0XHRcdFx0XHRcdG5hbWU6IHZtLm5ld0d1ZXN0Lm5hbWUsIFxuXHRcdFx0XHRcdFx0ZW1haWw6dm0ubmV3R3Vlc3QuZW1haWwuYWRkcmVzcyxcblx0XHRcdFx0fTtcblx0XHRcdH1cblxuXG5cdFx0XHQvL3NhdmUgdGhlIGV2ZW50XG5cdFx0XHR2bS5zYXZlRXZlbnQoKTtcblx0XHRcdC8vY2xlYXIgdGhlIHRlbXAgdmFsdWVzXG5cdFx0XHRjbGVhbk5ld0d1ZXN0VmFyaWFibGUoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JGxvZy5pbmZvKCd5b3UgZGlkblxcJ3QgZW50ZXIgYSBuYW1lIGFuZCBvciBlbWFpbCcpO1xuXHRcdH1cblx0fVxuXG5cdHZtLmd1ZXN0V2lsbEF0dGVuZCA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdFx0dmFyIGN1cnJlbnRVc2VyID0gcmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCdldmVudHMnKTtcblx0XHR2YXIgdG90YWxQZW5kaW5nSW52aXRhdGlvbnMgPSAwO1xuXHRcdHZhciByZW1vdmVBdHRlbmRpbmdVcGRhdGVkID0gZmFsc2U7XG5cdFx0XG5cdFx0Ly9jaGFuZ2UgYXR0ZW5kaW5nIHRvIHRydWUgaW4gaG9zdCdzIGd1ZXN0TGlzdFxuXHRcdHZtLmV2ZW50Lmd1ZXN0TGlzdFskcm91dGVQYXJhbXMudWlkXS5hdHRlbmRpbmcgPSByZXNwb25zZTtcblx0XHQvL2NoYW5nZSBzdGF0dXMgdG8gJ2F0dGVuZGluZycgaW4gaG9zdCdzIGd1ZXN0TGlzdFxuXHRcdHZtLmV2ZW50Lmd1ZXN0TGlzdFskcm91dGVQYXJhbXMudWlkXS5zdGF0dXMgPSAnYXR0ZW5kaW5nJztcblx0XHRcblx0XHQvL2dldCB0aGUgaW52aXRhdGlvbiBkZXRhaWxzXG5cdFx0Y3VycmVudFVzZXIuY2hpbGQoJ3BlbmRpbmcnKS5vbigndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFsYmVcblx0XHRcdHZhciBpbnZpdGF0aW9ucyA9IHNuYXBzaG90LnZhbCgpO1xuXHRcdFx0Ly9sb2cgc3RhcnRpbmcgdmFsdWVzXG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnMpO1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdKTtcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9uc1skcm91dGVQYXJhbXMuaG9zdElkXVskcm91dGVQYXJhbXMuZXZlbnRJZF0pO1xuXG5cdFx0XHR2YXIgdGhpc0ludml0YXRpb24gPSBpbnZpdGF0aW9uc1skcm91dGVQYXJhbXMuaG9zdElkXVskcm91dGVQYXJhbXMuZXZlbnRJZF07XG5cdFx0XHRcblx0XHRcdCRsb2cuaW5mbyh0aGlzSW52aXRhdGlvbik7XG5cdFx0XHRcblx0XHRcdC8vY2hlY2sgIyBvZiBpbml2aWF0aW9uc1xuXHRcdFx0Zm9yKGludml0YXRpb24gaW4gaW52aXRhdGlvbnMpIHtcblx0XHRcdFx0dG90YWxQZW5kaW5nSW52aXRhdGlvbnMrKztcblx0XHRcdH1cblxuXHRcdFx0Ly9yZXBvcnQgIyBvZiBpbnZpdGF0aW9uc1xuXHRcdFx0JGxvZy5pbmZvKFwidG90YWwgYXR0ZW5kaW5nOiBcIiArIHRvdGFsUGVuZGluZ0ludml0YXRpb25zKTtcblx0XHRcdFxuXHRcdFx0Ly9hZGQgdGhlIGV2ZW50IHRvIHRoZSBndWVzdCdzIGF0dGVuZGluZyBsaXN0XG5cdFx0XHRpZihyZXNwb25zZSkgY3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ob3N0SWQpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ldmVudElkKS5zZXQodGhpc0ludml0YXRpb24sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oZXJyb3IpO1xuXHRcdFx0fSk7XG5cblx0XHR9KTtcblxuXHRcdC8vaWYgdGhlIHVwZGF0ZWQgcGxhY2Vob2xkZXIgd2FzIG9uIHRoZSBhdHRlbmRpbmcgbGlzdCByZW1vdmUgaXRcblx0XHRjdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykub24oJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgYXR0ZW5kaW5nTGlzdCA9IHNuYXBzaG90LnZhbCgpO1xuXHRcdFx0XG5cdFx0XHQvL3JlcG9ydCBhY3Rpb25zXG5cdFx0XHQkbG9nLmluZm8oJ3RoaXMgaXMgdGhlIGF0dGVuZGluZyBsaXN0Jyk7XG5cdFx0XHQkbG9nLmluZm8oYXR0ZW5kaW5nTGlzdCk7XG5cdFx0XHRcblx0XHRcdC8vdGhyb3cgZmxhZyBmb3IgbGF0ZXJcblx0XHRcdGlmKGF0dGVuZGluZ0xpc3QudXBkYXRlZCkgcmVtb3ZlQXR0ZW5kaW5nVXBkYXRlZCA9IHRydWU7XG5cblx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0Ly9pZiB0aGVyIHdhcyBhbiBlcnJvciByZXBvcnQgaXRcblx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oZXJyb3IpO1xuXHRcdH0pO1xuXG5cdFx0Ly9pZiB0aGlzIGlzIHRoZSBsYXN0IHBlbmRpbmcgZXZlbnQgb24gdGhlIGd1ZXN0J3MgcGVuZGluZyBsaXN0LCBhZGQgdGhlIHVwZGF0ZWQgcGxhY2Vob2xkZXJcblx0XHRpZih0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucyA8IDIpIHtcblx0XHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xuXG5cdFx0XHQvL3JlcGxhY2Ugd2l0aCB1cGRhdGVkIGZpZWxkXG5cdFx0XHRjdXJyZW50VXNlci5jaGlsZCgncGVuZGluZycpLnVwZGF0ZSh7XG5cdFx0XHRcdHVwZGF0ZWQ6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oZXJyb3IpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0Ly9yZW1vdmUgdGhlIGV2ZW50IGZyb20gdGhlIGd1ZXN0J3MgcGVuZGluZyBsaXN0XG5cdFx0Y3VycmVudFVzZXIuY2hpbGQoJ3BlbmRpbmcnKS5jaGlsZCgkcm91dGVQYXJhbXMuaG9zdElkKS5yZW1vdmUoKTtcblxuXHRcdC8vaWYgdGhlcmUgd2FzIGFuIHVwZGF0ZWQgZmllbGQgaW4gYXR0ZW5kaW5nLCByZW1vdmUgaXRcblx0XHRpZihyZW1vdmVBdHRlbmRpbmdVcGRhdGVkKSB7XG5cdFx0XHQkbG9nLmluZm8oJ3JlbW92aW5nIHRoZSB1cGRhdGVkIHBsYWNlaG9sZGVyJyk7XG5cdFx0XHQvL2N1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5jaGlsZCgndXBkYXRlZCcpLnJlbW92ZSgpO1xuXHRcdH1cblxuXHRcdC8vc2F2ZSBjaGFuZ2VzXG5cdFx0dm0uZXZlbnQuJHNhdmUoKTtcblx0fVxuXG5cdHZtLnVwZGF0ZVVwZGF0ZWRQYXJhbSA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBjdXJyZW50VXNlciA9IHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS5jaGlsZCgnZXZlbnRzJyk7XG5cdFx0XG5cdFx0JGxvZy5pbmZvKCd1cGRhdGluZyB0aGUgcGFyYW0nKTtcblx0XHRjdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykub24oJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdCRsb2cuaW5mbyhzbmFwc2hvdC52YWwoKSk7XG5cdFx0fSk7XG5cdFx0Y3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLmNoaWxkKCd1cGRhdGVkJykucmVtb3ZlKCk7XG5cdH1cblxuXHR2bS5hZGRJbnZpdGF0aW9uVG9BdHRlbmRpbmcgPSBmdW5jdGlvbihyZXNwb25zZSkge1xuXHRcdHZhciBjdXJyZW50VXNlciA9IHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS5jaGlsZCgnZXZlbnRzJyk7XG5cdFx0dmFyIHRvdGFsUGVuZGluZ0ludml0YXRpb25zID0gMDtcblxuXHRcdC8vZ2V0IHRoZSBpbnZpdGF0aW9uIGRldGFpbHNcblx0XHRjdXJyZW50VXNlci5jaGlsZCgncGVuZGluZycpLm9uKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWxiZVxuXHRcdFx0dmFyIGludml0YXRpb25zID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHR2YXIgdGhpc0ludml0YXRpb24gPSBpbnZpdGF0aW9uc1skcm91dGVQYXJhbXMuaG9zdElkXVskcm91dGVQYXJhbXMuZXZlbnRJZF07XG5cdFx0XHRcblx0XHRcdC8vbG9nIHN0YXJ0aW5nIHZhbHVlc1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zKTtcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9uc1skcm91dGVQYXJhbXMuaG9zdElkXSk7XG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnNbJHJvdXRlUGFyYW1zLmhvc3RJZF1bJHJvdXRlUGFyYW1zLmV2ZW50SWRdKTtcblx0XHRcdFxuXHRcdFx0Ly9jaGVjayAjIG9mIGluaXZpYXRpb25zXG5cdFx0XHRmb3IoaW52aXRhdGlvbiBpbiBpbnZpdGF0aW9ucykge1xuXHRcdFx0XHR0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucysrO1xuXHRcdFx0fVxuXG5cdFx0XHQvL3JlcG9ydCAjIG9mIGludml0YXRpb25zXG5cdFx0XHQkbG9nLmluZm8oXCJ0b3RhbCBwZW5kaW5nIGludml0YXRpb25zOiBcIiArIHRvdGFsUGVuZGluZ0ludml0YXRpb25zKTtcblx0XHRcdFxuXHRcdFx0JGxvZy5pbmZvKHJlc3BvbnNlKTtcblx0XHRcdC8vYWRkIHRoZSBldmVudCB0byB0aGUgZ3Vlc3QncyBhdHRlbmRpbmcgbGlzdFxuXHRcdFx0aWYocmVzcG9uc2UpIGN1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5jaGlsZCgkcm91dGVQYXJhbXMuaG9zdElkKS5jaGlsZCgkcm91dGVQYXJhbXMuZXZlbnRJZCkuc2V0KHRoaXNJbnZpdGF0aW9uLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKGVycm9yKTtcblx0XHRcdH0pO1xuXG5cblxuXHRcdH0pO1xuXHR9XG5cblx0Ly9zdGFydCBydW5cblx0aW5pdCgpO1xufVxuIiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignR3Vlc3RFdmVudENvbnRyb2xsZXInLCBHdWVzdEV2ZW50Q29udHJvbGxlcik7XG5cbkd1ZXN0RXZlbnRDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBHdWVzdEV2ZW50Q29udHJvbGxlcigkbG9nKSB7XG5cdCRsb2cuaW5mbygnaW50byB0aGUgR3Vlc3RFdmVudENvbnRyb2xsZXInKTtcbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdIb3N0RXZlbnRDb250cm9sbGVyJywgSG9zdEV2ZW50Q29udHJvbGxlcik7XG5cbkhvc3RFdmVudENvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICckcm91dGVQYXJhbXMnLCAndXNlckRhdGEnLCAndHJhZmZpY1ZhbGV0J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gSG9zdEV2ZW50Q29udHJvbGxlcigkbG9nLCAkcm91dGVQYXJhbXMsIHVzZXJEYXRhLCB0cmFmZmljVmFsZXQpIHtcblx0dmFyIHZtID0gdGhpcztcblx0XG5cdC8vbG9jYWwgdmFyaWFibGVzXG5cdHZhciBob3N0ZWRFdmVudFNoZXJwYSA9IHRyYWZmaWNWYWxldDtcblx0dmFyIHRoaXNFdmVudE1hbmFnZXIgPSB1c2VyRGF0YTtcblxuXHQvL3ZpZXcgbW9kZWwgdmFyaWFibGVzXG5cdHZtLmFjdGl2ZVNlY3Rpb24gPSAxO1xuXHR2bS50ZW1wVGltZSA9IHtzdGFydDogJycsIGVuZDogJycsIGR1cmF0aW9uOicnfTtcblx0dm0ucHJvZ3Jlc3NCYXIgPSAzOTtcblx0dm0udGVtcEV2ZW50ID0ge307XG5cblx0Ly9sb2NhbCBtZXRob2RzXG5cdGZ1bmN0aW9uIHVuaXhUaW1lVG9EYXRlVGltZSh1bml4VGltZSkge1xuXHRcdHJldHVybiBuZXcgRGF0ZShwYXJzZUludCh1bml4VGltZSkpO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIGRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fTtcblxuXHRmdW5jdGlvbiBjYWxjdWxhdGVEdXJhdGlvbihzdGFydCwgZW5kKSB7XG5cdFx0cmV0dXJuIChkYXRlVGltZVRvVW5peFRpbWUoZW5kKSAtIGRhdGVUaW1lVG9Vbml4VGltZShzdGFydCkpIC8gKDYwKjEwMDApO1xuXHR9XG5cblx0ZnVuY3Rpb24gaW5pdEV2ZW50VGltZXMoKSB7XG5cdFx0Ly9idWlsZCBuZXcgdGVtcCB0aW1lc1xuXHRcdHZhciBub3cgPSBuZXcgRGF0ZSgpO1xuXG5cdFx0Ly9yb3VuZCB0byB0aGUgbmVhcmVzdCBob3VyLCBjdXQgb2ZmIGFueXRoaW5nIHNtYWxsZXJcblx0XHRub3cuc2V0SG91cnMobm93LmdldEhvdXJzKCkgKyBNYXRoLnJvdW5kKG5vdy5nZXRNaW51dGVzKCkvNjApKTtcblx0XHRub3cuc2V0TWludXRlcygwKTtcblx0XHRub3cuc2V0U2Vjb25kcygwKTtcblx0XHRub3cuc2V0TWlsbGlzZWNvbmRzKDApO1xuXG5cdFx0dm0udGVtcFRpbWUuc3RhcnQgPSBub3c7XG5cdFx0dm0udGVtcFRpbWUuZW5kID0gbm93O1xuXG5cdFx0dm0udGVtcFRpbWUuZHVyYXRpb24gPSBjYWxjdWxhdGVEdXJhdGlvbih2bS50ZW1wVGltZS5zdGFydCwgdm0udGVtcFRpbWUuZW5kKTtcblx0XHRcblx0fVxuXG5cdGZ1bmN0aW9uIHVwZGF0ZVRlbXBUaW1lRnJvbU1vZGVsKCkge1xuXHRcdC8vaWYgc3RhcnQgdGltZXMgYXJlIGF2YWlsYWJsZVxuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZtLnRlbXBFdmVudC5ldmVudFRpbWVzLnN0YXJ0KSkge1xuXHRcdFx0Ly9zZXQgdGhlIHRlbXBUaW1lIG1vZGVsXG5cdFx0XHR2bS50ZW1wVGltZS5zdGFydCA9IHVuaXhUaW1lVG9EYXRlVGltZSh2bS50ZW1wRXZlbnQuZXZlbnRUaW1lcy5zdGFydCk7XG5cdFx0XHR2bS50ZW1wVGltZS5lbmQgPSB1bml4VGltZVRvRGF0ZVRpbWUodm0udGVtcEV2ZW50LmV2ZW50VGltZXMuZW5kKTtcblx0XHR9XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGluaXQoKSB7XG5cdFx0XG5cdFx0Ly9sb2FkIGV2ZW50IGRldGFpbHNcblx0XHR0aGlzRXZlbnRNYW5hZ2VyLmxvYWRBbkV2ZW50UHJvZ3Jlc3NpdmVseSgkcm91dGVQYXJhbXMudWlkLCAkcm91dGVQYXJhbXMuZXZlbnRJZClcblx0XHQudGhlbihmdW5jdGlvbih0aGVFdmVudCkge1xuXHRcdFx0Ly9hZGQgdGhpcyBldmVudCBtb2RlbCB0byB0aGUgdmlldyBtb2RlbCBldmVudFxuXHRcdFx0dm0udGVtcEV2ZW50ID0gdGhlRXZlbnQ7XG5cblx0XHRcdC8vdXBkYXRlIHRlbXBUaW1lXG5cdFx0XHR1cGRhdGVUZW1wVGltZUZyb21Nb2RlbCgpO1xuXHRcdH0pXG5cdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHQkbG9nKCd0aGUgZXJyb3IgaXM6ICcgKyBlcnJvcik7XG5cdFx0fSlcblxuXHRcdC8vbG9hZCBzcGVjaWZpZWQgc2VjdGlvblxuXHRcdHZtLmFjdGl2ZVNlY3Rpb24gPSBwYXJzZUludCgkcm91dGVQYXJhbXMuc2VjdGlvbik7XG5cdFx0Ly9zZXQgdGVtcFRpbWVzXG5cdFx0aW5pdEV2ZW50VGltZXMoKTtcblx0fVxuXG5cdC8vdmlldyBtb2RlbCBtZXRob2RzXG5cdHZtLmZvcm1hdER1cmF0aW9uID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9jYWxjIGR1cmF0aW9uXG5cdFx0dm0udGVtcFRpbWUuZHVyYXRpb24gPSBjYWxjdWxhdGVEdXJhdGlvbih2bS50ZW1wVGltZS5zdGFydCwgdm0udGVtcFRpbWUuZW5kKTtcblx0XHQkbG9nLmluZm8odm0udGVtcFRpbWUuZHVyYXRpb24pO1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGhvdXJzID0gTWF0aC5mbG9vcih2bS50ZW1wVGltZS5kdXJhdGlvbi8oNjApKTtcblx0XHR2YXIgbWluID0gdm0udGVtcFRpbWUuZHVyYXRpb24gJSA2MDtcblx0XHR2YXIgZnJhY3Rpb24gPSAoTWF0aC5yb3VuZChtaW4vMTUpLzQpO1xuXG5cdFx0JGxvZy5pbmZvKGhvdXJzICsgJyAnICsgbWluICsgJyAnICsgZnJhY3Rpb24pO1xuXHRcdHJldHVybiAoaG91cnMrZnJhY3Rpb24pICsgJyBoJztcblx0fVxuXG5cdHZtLnNldHRpbmdUZW1wU3RhcnQgPSBmdW5jdGlvbigpIHtcblx0XHR2bS50ZW1wVGltZS5lbmQgPSB2bS50ZW1wVGltZS5zdGFydDtcblx0fVxuXG5cdHZtLnNldHRpbmdUZW1wRW5kID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9zZXQgdmFsaWQgZW5kIHdpdGggc3RhcnRcblx0XHRpZih2bS50ZW1wVGltZS5zdGFydCA+IHZtLnRlbXBUaW1lLmVuZCkgdm0udGVtcFRpbWUuc3RhcnQgPSB2bS50ZW1wVGltZS5lbmQ7XG5cdFx0Ly9jYWxjIGR1cmF0aW9uXG5cdFx0dm0udGVtcFRpbWUuZHVyYXRpb24gPSBjYWxjdWxhdGVEdXJhdGlvbih2bS50ZW1wVGltZS5zdGFydCwgdm0udGVtcFRpbWUuZW5kKTtcblx0fVxuXG5cdHZtLmJhY2tUb1VzZXJFdmVudHMgPSBmdW5jdGlvbigpIHtcblx0XHQvL3NlbmQgdGhlIHVzZXIgYmFjayB0byB0aGUgcGFnZSB0aGV5IGNhbWUgZnJvbVxuXHRcdGhvc3RlZEV2ZW50U2hlcnBhLnJlZGlyZWN0VG8oJy91c2VyRXZlbnRzJywgJHJvdXRlUGFyYW1zLnVpZCk7XG5cdH1cblxuXHR2bS5zZWN0aW9uQmFjayA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vbW92ZSBiYWNrXG5cdFx0dGFyZ2V0U2VjdGlvbiA9IHZtLmFjdGl2ZVNlY3Rpb24gLSAxO1xuXHRcdGhvc3RlZEV2ZW50U2hlcnBhLnJlZGlyZWN0VG8oJy9ldmVudC9ob3N0JywgJHJvdXRlUGFyYW1zLmV2ZW50SWQsICRyb3V0ZVBhcmFtcy51aWQsIHRhcmdldFNlY3Rpb24pO1xuXHR9XHRcblxuXHR2bS5zZWN0aW9uRm9yd2FyZCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vbW92ZSBmb3J3YXJkXG5cdFx0dGFyZ2V0U2VjdGlvbiA9IHZtLmFjdGl2ZVNlY3Rpb24gKyAxO1xuXHRcdGhvc3RlZEV2ZW50U2hlcnBhLnJlZGlyZWN0VG8oJy9ldmVudC9ob3N0JywgJHJvdXRlUGFyYW1zLmV2ZW50SWQsICRyb3V0ZVBhcmFtcy51aWQsIHRhcmdldFNlY3Rpb24pO1xuXHR9XG5cblx0Ly90YWtlIGFjdGlvblxuXHRpbml0KCk7XG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignTGFuZGluZ1BhZ2VDb250cm9sbGVyJywgTGFuZGluZ1BhZ2VDb250cm9sbGVyKTtcblxuTGFuZGluZ1BhZ2VDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJywgJyRsb2NhdGlvbicsICckZG9jdW1lbnQnLCAnJHdpbmRvdyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIExhbmRpbmdQYWdlQ29udHJvbGxlcigkc2NvcGUsICRsb2csICRsb2NhdGlvbiwgJGRvY3VtZW50LCAkd2luZG93KSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdHZhciBmYlVSTCA9ICdodHRwczovL21lZXR1cHBsYW5uZXIuZmlyZWJhc2Vpby5jb20vJztcblx0dmFyIGF1dGhEYXRhID0ge307XG5cdHZhciBjdXJyZW50VXNlckRhdGEgPSB7fTtcblxuXHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0dm0uc2hvd1JlcXVpcm5tZW50cyA9IGZhbHNlO1xuXHR2bS52YWxpZE5ld05hbWUgPSB7J3ZhbGlkJzpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6Jyd9fTtcblx0dm0udmFsaWROZXdFbWFpbCA9IHsndmFsaWQnOmZhbHNlLCAnc3R5bGUnOntjb2xvcjonJ319O1xuXHR2bS5zZWN1cmVQYXNzd29yZCA9IHsnc2VjdXJlJzpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6Jyd9fTtcblx0dm0udW5sb2NrQ3JlYXRlVXNlckJ0biA9IHsndXNhYmxlJzpmYWxzZSwgJ2NsYXNzJzonYnRuIGJ0bi13YXJuaW5nJ307XG5cdHZtLm1lc3NhZ2UgPSAndGVzdGluZyc7XG5cblx0XG5cdHZtLnZhbGlkVXNlckVtYWlsID0geyd2YWxpZCc6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOicnfX07XG5cdHZtLnZhbGlkVXNlclBhc3N3b3JkID0geyd2YWxpZCc6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOicnfX07XG5cdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4gPSB7J3VzYWJsZSc6ZmFsc2UsICdjbGFzcyc6J2J0biBidG4td2FybmluZyd9O1xuXHR2bS5wYXNzd29yZFJlcXVpcm5tZW50cyA9IHtcblx0XHQwOnsnY29uc3RyYWludCc6J0lzIGF0IGxlYXN0IDE2IGNoYXJhY3RlcnMgbG9uZycsICdzdHlsZSc6e2NvbG9yOidyZWQnfSwgJ21ldCc6ZmFsc2V9LFxuXHRcdDE6eydjb25zdHJhaW50JzonSXMgbm8gbG9uZ2VyIHRoYW4gMTAwIGNoYXJhY3RlcnMnLCAnc3R5bGUnOntjb2xvcjoncmVkJ30sICdtZXQnOmZhbHNlfSxcblx0XHQyOnsnY29uc3RyYWludCc6J0NvbnRhaW5zIGF0IGxlYXN0IG9uZSByZXF1aXJlZCBzeW1ib2wgKFxcIVxcQFxcI1xcJFxcJVxcXlxcJlxcKiknLCAnc3R5bGUnOntjb2xvcjoncmVkJ30sICdtZXQnOmZhbHNlfSxcblx0XHQzOnsnY29uc3RyYWludCc6J0NvbnRhaW5zIGF0IGxlYXN0IG9uZSBudW1iZXInLCAnc3R5bGUnOntjb2xvcjoncmVkJ30sICdtZXQnOmZhbHNlfSxcblx0XHQ0OnsnY29uc3RyYWludCc6J0NvbnRhaW5zIGF0IGxlYXN0IG9uZSBsb3dlcmNhc2UgbGV0dGVyJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX0sXG5cdFx0NTp7J2NvbnN0cmFpbnQnOidDb250YWlucyBhdCBsZWFzdCBvbmUgdXBwZXJjYXNlIGxldHRlcicsICdzdHlsZSc6e2NvbG9yOidyZWQnfSwgJ21ldCc6ZmFsc2V9LFxuXHRcdDY6eydjb25zdHJhaW50JzpcIkRvZXNuJ3QgaGF2ZSBhbnkgaWxsZWdhbCBjaGFyYWN0ZXJzXCIsICdzdHlsZSc6e2NvbG9yOidyZWQnfSwgJ21ldCc6ZmFsc2V9XG5cdH07XG5cblx0Ly92YXIgdGhlVGVzdEJveCA9IGFuZ3VsYXIuZWxlbWVudCgkZG9jdW1lbnQpLmZpbmQoJyN0ZXN0Qm94Jyk7XG5cblx0Ly90aGVUZXN0Qm94LmNoZWNrVmFsaWRpdHkoKTtcblx0Ly9zZXRDdXN0b21WYWxpZGl0eSgneW91IG5lZWQgc29tZXRoaW5nIGVsc2UnKTtcblxuXHQvL2xvY2FsIG1ldGhvZHNcblx0ZnVuY3Rpb24gdXRmOF90b19iNjQoc3RyKSB7XG5cdFx0cmV0dXJuIGJ0b2Eoc3RyKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGI2NF90b191dGY4KHN0cikge1xuICAgIFx0cmV0dXJuIGF0b2Ioc3RyKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHVuaXhUaW1lVG9EYXRlVGltZSh1bml4VGltZSkge1xuXHRcdHJldHVybiBuZXcgRGF0ZShwYXJzZUludCh1bml4VGltZSkpO1xuXHR9XG5cblx0ZnVuY3Rpb24gZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKSB7XG5cdFx0cmV0dXJuIERhdGUucGFyc2UoZGF0ZVRpbWUpO1xuXHR9XG5cblx0Ly9kZWZpbmUgY29udHJvbGxlciBtZXRob2RzXG5cdHZtLmRpc3BsYXlQYXNzUmVxcyA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHZtLm5ld05hbWUgJiYgdm0ubmV3RW1haWwpIHtcblx0XHRcdHZtLnNob3dSZXF1aXJubWVudHMgPSB0cnVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2bS5zaG93UmVxdWlybm1lbnRzID0gZmFsc2U7XG5cdFx0fVxuXHR9XG5cblx0dm0uY2hlY2tOZXdOYW1lID0gZnVuY3Rpb24oKSB7XG5cdFx0XG5cdFx0aWYodm0ubmV3TmFtZSkge1xuXHRcdFx0aWYodm0ubmV3TmFtZS5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdHZtLnZhbGlkTmV3TmFtZS52YWxpZCA9IHRydWU7XG5cdFx0XHRcdHZtLnZhbGlkTmV3TmFtZS5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLnZhbGlkTmV3TmFtZS52YWxpZCA9IGZhbHNlO1xuXHRcdFx0XHR2bS52YWxpZE5ld05hbWUuc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHZtLm9wZW5DcmVhdGVVc2VyQnV0dG9uKCk7XG5cdH1cblxuXHR2bS5jaGVja05ld0VtYWlsID0gZnVuY3Rpb24gKCkge1xuXHRcdGlmKHZtLm5ld0VtYWlsKSB7XG5cdFx0XHQvL2NoZWNrIHZhbGlkaXR5XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKD86XFwuW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKykqQCg/OlthLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cXC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cIiwgXCJcIik7XG5cblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2bS5uZXdFbWFpbCkpIHtcblx0XHRcdFx0dm0udmFsaWROZXdFbWFpbC52YWxpZCA9IHRydWU7XG5cdFx0XHRcdHZtLnZhbGlkTmV3RW1haWwuc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS52YWxpZE5ld0VtYWlsLnZhbGlkID0gZmFsc2U7XG5cdFx0XHRcdHZtLnZhbGlkTmV3RW1haWwuc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHRcdFx0fVx0XHRcdFxuXHRcdH1cblx0XHRcblx0XHR2bS5vcGVuQ3JlYXRlVXNlckJ1dHRvbigpO1xuXHR9XG5cblx0dm0uY2hlY2tVc2VyRW1haWwgPSBmdW5jdGlvbigpIHtcblx0XHRpZih2bS51c2VyRW1haWwpIHtcblx0XHRcdC8vY2hlY2sgdmFsaWRpdHlcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSsoPzpcXC5bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKSpAKD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1xcLikrW2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1wiLCBcIlwiKTtcblxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZtLnVzZXJFbWFpbCkpIHtcblx0XHRcdFx0dm0udmFsaWRVc2VyRW1haWwudmFsaWQgPSB0cnVlO1xuXHRcdFx0XHR2bS52YWxpZFVzZXJFbWFpbC5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLnZhbGlkVXNlckVtYWlsLnZhbGlkID0gZmFsc2U7XG5cdFx0XHRcdHZtLnZhbGlkVXNlckVtYWlsLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR2bS5vcGVuVXNlckxvZ2luQnRuKCk7XG5cdH1cblxuXHR2bS5jaGVja05ld1Bhc3N3b3JkcyA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vZm9yIGVhY2ggcGFzc3dvcmQgZGVmaW5lIHRoZSBwYXR0ZXJuIHRoYXQgdGhlIHBhc3N3b3JkIG11c3QgbWF0Y2hcblx0XHR2YXIgY29uc3RyYWludHMgPSB7XG5cdCBcdFx0MDogWycnLCAnIHlvdXIgcGFzc3dvcmQgbmVlZHMgdG8gYmUgMTYgY2hhcmFjdGVycyBvciBsb25nZXInXSxcblx0IFx0XHQxOiBbJycsICcgeW91ciBwYXNzd29yZCBuZWVkcyB0byBiZSBsZXNzIHRoYW4gMTAwIGNoYXJhY3RlcnMnXSxcblx0IFx0XHQyOiBbJ1tcXCFcXEBcXCNcXCRcXCVcXF5cXCZcXCpdJywgXCIgbm8gcmVxdWlyZWQgc3ltYm9scyBmb3VuZFwiXSxcblx0IFx0XHQzOiBbJ1swLTldJywgXCIgbm8gbnVtYmVycyBmb3VuZFwiXSxcblx0IFx0XHQ0OiBbJ1thLXpdJywgXCIgbm8gbG93ZXJjYXNlIGxldHRlcnMgZm91bmRcIl0sXG5cdCBcdFx0NTogWydbQS1aXScsIFwiIG5vIHVwcGVyY2FzZSBsZXR0ZXJzIGZvdW5kXCJdLFxuXHQgXHRcdDY6IFsnW15BLXowLTlcXCFcXEBcXCNcXCRcXCVcXF5cXCZcXCpdJywgXCIgaWxsZWdhbCBjaGFyYWN0ZXJzIGZvdW5kXCJdLFxuIFx0XHR9O1xuIFx0XHRcbiBcdFx0Ly9jaGVjayBmb3IgbGVuZ3RoXG4gXHRcdGlmKHZtLm5ld1Bhc3N3b3JkKSB7XG4gXHRcdFx0aWYodm0ubmV3UGFzc3dvcmQubGVuZ3RoID4gMTUpIHsgXG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1swXS5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTsgXG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1swXS5tZXQgPSB0cnVlOyBcbiBcdFx0XHR9IGVsc2Uge1xuIFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMF0uc3R5bGUgPSB7Y29sb3I6J3JlZCd9OyBcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzBdLm1ldCA9IGZhbHNlO1xuIFx0XHRcdH1cbiBcdFx0XHRpZih2bS5uZXdQYXNzd29yZC5sZW5ndGggPD0gMTAwKSB7IFxuIFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMV0uc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307IFxuIFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMV0ubWV0ID0gdHJ1ZTtcbiBcdFx0XHR9IGVsc2Uge1xuIFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMV0uc3R5bGUgPSB7Y29sb3I6J3JlZCd9OyBcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzFdLm1ldCA9IGZhbHNlO1xuIFx0XHRcdH1cblxuIFx0XHRcdC8vY2hlY2sgY29uc3RyYWludHMgMi01XG4gXHRcdFx0Zm9yKGkgPSAyOyBpIDwgNjsgaSsrKSB7XG5cdCBcdFx0XHQvL2NoZWNrIGZvciByZXF1aXJlZCBzeW1ib2xzLCB1cHBlcmNhc2UsIGxvc2VyY2FzZSwgYW5kIGNoYXJhY3RlcnNcblx0IFx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChjb25zdHJhaW50c1tpXVswXSwgXCJcIik7XHRcblxuXHQgXHRcdFx0Ly90ZXN0IGVhY2ggY29uc3RyYXRpbnRcblx0IFx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2bS5uZXdQYXNzd29yZCkpIHtcblx0IFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbaV0uc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdCBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzW2ldLm1ldCA9IHRydWU7XG5cdCBcdFx0XHR9IGVsc2Uge1xuXHQgXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1tpXS5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdCBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzW2ldLm1ldCA9IGZhbHNlO1xuXHQgXHRcdFx0fVxuXHQgXHRcdH1cblxuXHQgXHRcdC8vY2hlY2sgaWxsZWdhbCBjaGFyYWN0ZXJzXG5cdCBcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKGNvbnN0cmFpbnRzWzZdWzBdLCBcIlwiKTtcblxuXHQgXHRcdC8vcnVuIHRoZSBjaGVja1xuXHQgXHRcdGlmKCFjb25zdHJhaW50LnRlc3Qodm0ubmV3UGFzc3dvcmQpKSB7XG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1s2XS5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1s2XS5tZXQgPSBmYWxzZTtcblx0IFx0XHR9IGVsc2Uge1xuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNl0uc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1s2XS5tZXQgPSB0cnVlO1xuXHQgXHRcdH1cblxuXHQgXHRcdC8vaWYgYWxsIGNvbnN0cmFpbnMgbWV0LCB0aHJvdyB2YWxpZCBwYXNzIGZsYWdcblx0IFx0XHRpZiggdm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMF0ubWV0ICYmXG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1sxXS5tZXQgJiZcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzJdLm1ldCAmJlxuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbM10ubWV0ICYmXG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1s0XS5tZXQgJiZcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzVdLm1ldCAmJlxuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNl0ubWV0KSB7XG5cdCBcdFx0XHR2bS5zZWN1cmVQYXNzd29yZC5zZWN1cmUgPSB0cnVlXG5cdCBcdFx0fSBlbHNlIHtcblx0IFx0XHRcdHZtLnNlY3VyZVBhc3N3b3JkLnNlY3VyZSA9IGZhbHNlO1xuXHQgXHRcdH1cblxuXHQgXHRcdGlmKHZtLnNlY3VyZVBhc3N3b3JkLnNlY3VyZSkge1xuXHQgXHRcdFx0dm0uc2VjdXJlUGFzc3dvcmQuc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdCBcdFx0fSBlbHNlIHtcblx0IFx0XHRcdHZtLnNlY3VyZVBhc3N3b3JkLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0IFx0XHR9XG4gXHRcdH1cbiBcdFx0XG4gXHRcdHZtLm9wZW5DcmVhdGVVc2VyQnV0dG9uKCk7XG5cdH1cblxuXHR2bS5jaGVja1VzZXJQYXNzd29yZHMgPSBmdW5jdGlvbigpIHtcblx0XHRpZih2bS51c2VyUGFzc3dvcmQpIHtcblx0XHRcdGlmKHZtLnVzZXJQYXNzd29yZC5sZW5ndGggPiAxNSkge1xuXHRcdFx0XHR2bS52YWxpZFVzZXJQYXNzd29yZC5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0XHRcdFx0dm0udmFsaWRVc2VyUGFzc3dvcmQudmFsaWQgPSB0cnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0udmFsaWRVc2VyUGFzc3dvcmQuc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHRcdFx0XHR2bS52YWxpZFVzZXJQYXNzd29yZC52YWxpZCA9IGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdFxuXHRcdHZtLm9wZW5Vc2VyTG9naW5CdG4oKTtcblx0fVxuXG5cdHZtLm9wZW5DcmVhdGVVc2VyQnV0dG9uID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodm0udmFsaWROZXdOYW1lLnZhbGlkICYmIHZtLnZhbGlkTmV3RW1haWwudmFsaWQgJiYgdm0uc2VjdXJlUGFzc3dvcmQuc2VjdXJlKSB7XG5cdFx0XHR2bS51bmxvY2tDcmVhdGVVc2VyQnRuLmNsYXNzID0gJ2J0biBidG4tc3VjY2Vzcyc7XG5cdFx0XHR2bS51bmxvY2tDcmVhdGVVc2VyQnRuLnVzYWJsZSA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZtLnVubG9ja0NyZWF0ZVVzZXJCdG4uY2xhc3MgPSAnYnRuIGJ0bi13YXJuaW5nJztcblx0XHRcdHZtLnVubG9ja0NyZWF0ZVVzZXJCdG4udXNhYmxlID0gZmFsc2U7XHRcblx0XHR9XG5cblx0fVxuXG5cdHZtLm9wZW5Vc2VyTG9naW5CdG4gPSBmdW5jdGlvbigpIHtcblx0XHRpZih2bS52YWxpZFVzZXJFbWFpbC52YWxpZCAmJiB2bS52YWxpZFVzZXJQYXNzd29yZC52YWxpZCkge1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi5jbGFzcyA9ICdidG4gYnRuLXN1Y2Nlc3MnO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi51c2FibGUgPSB0cnVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLmNsYXNzID0gJ2J0biBidG4td2FybmluZyc7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLnVzYWJsZSA9IGZhbHNlO1x0XG5cdFx0fVxuXHR9XG5cblx0dm0udXBkYXRlID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9zZXQgdmFsdWVzXG5cdFx0dm0ubmV3TmFtZSA9ICRkb2N1bWVudC5maW5kKCcjbmV3TmFtZScpWzBdLnZhbHVlO1xuXHRcdHZtLm5ld0VtYWlsID0gJGRvY3VtZW50LmZpbmQoJyNuZXdFbWFpbCcpWzBdLnZhbHVlO1xuXHRcdHZtLnVzZXJFbWFpbCA9ICRkb2N1bWVudC5maW5kKCcjdXNlckVtYWlsJylbMF0udmFsdWU7XG5cdFx0XG5cdFx0dm0uY2hlY2tOZXdOYW1lKCk7XG5cdFx0dm0uY2hlY2tOZXdFbWFpbCgpO1xuXHRcdHZtLmNoZWNrVXNlckVtYWlsKCk7XG5cdH1cblxuXHRmdW5jdGlvbiByZWRpcmVjdChwYXRoLCB1c2VyRGF0YSkge1xuXHRcdHZhciBmdWxsUGF0aCA9IHBhdGggKyAnLycgKyBjdXJyZW50VXNlckRhdGEudWlkICsgJy8nICsgY3VycmVudFVzZXJEYXRhLnRva2VuO1xuXHRcdC8vcmVkaXJlY3Rcblx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIHRvOiAnICsgZnVsbFBhdGgpO1xuXHRcdCRsb2NhdGlvbi5wYXRoKGZ1bGxQYXRoKTtcblx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cdH1cblxuXHR2bS5jcmVhdGVOZXdVc2VyID0gZnVuY3Rpb24oKSB7XG5cdFx0JGxvZy5pbmZvKCdDcmVhdGluZyBhIG5ldyB1c2VyIGFjY291bnQgbm93IScpO1xuXG5cdFx0aWYodm0udW5sb2NrQ3JlYXRlVXNlckJ0bi51c2FibGUpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlXG5cdFx0XHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHRcdFx0cmVmLmNyZWF0ZVVzZXIoe1xuXHRcdFx0XHRlbWFpbDp2bS5uZXdFbWFpbCxcblx0XHRcdFx0cGFzc3dvcmQ6dm0ubmV3UGFzc3dvcmRcblx0XHRcdH0sZnVuY3Rpb24oZXJyb3IsIHVzZXJEYXRhKSB7XG5cdFx0XHRcdGlmKGVycm9yKSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdFcnJvciBjcmVhdGluZyB1c2VyOiAnICsgZXJyb3IpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vbG9nIHJlc3VsdHNcblx0XHRcdFx0XHQkbG9nLmluZm8odXNlckRhdGEpO1xuXG5cdFx0XHRcdFx0Ly9zYXZlIGFsbCB0aGUgZGF0YVxuXHRcdFx0XHRcdGN1cnJlbnRVc2VyRGF0YSA9IHVzZXJEYXRhO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vZ2VuZXJhdGUgdGhlIHVzZXIgcmVjb3JkXG5cdFx0XHRcdFx0dmFyIHVzZXJzUmVmID0gcmVmLmNoaWxkKCdVc2Vycy8nICsgdXNlckRhdGEudWlkKTtcblx0XHRcdFx0XHR2YXIgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xuXG5cdFx0XHRcdFx0Ly93cml0ZSBuZXcgdXNlciB0byB0aGUgZGF0YWJhc2Ugd2l0aCBiaW8gaW5mb1xuXHRcdFx0XHRcdHVzZXJzUmVmLnNldCh7IFxuXHRcdFx0XHRcdFx0J2Jpbyc6IHtcblx0XHRcdFx0XHRcdFx0J25hbWUnOiB2bS5uZXdOYW1lLFxuXHRcdFx0XHRcdFx0XHQnZW1haWwnOiB2bS5uZXdFbWFpbFxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdCdldmVudHMnOiB7XG5cdFx0XHRcdFx0XHRcdCdwZW5kaW5nJzoge1xuXHRcdFx0XHRcdFx0XHRcdCd1cGRhdGVkJzogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHQnaG9zdGluZyc6IHtcblx0XHRcdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0J2F0dGVuZGluZyc6IHtcblx0XHRcdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0J2NvbXBsZXRlZCc6IHtcblx0XHRcdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdFx0XHQkbG9nLmluZm8oJ0RhdGEgY291bGQgbm90IGJlIHNhdmVkOiAnICsgZXJyb3IpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0JGxvZy5pbmZvKCdEYXRhIHNhdmVkIHN1Y2Nlc3NmdWxseS4nKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHQvL2FkZCB0aGlzIHVzZXIgdG8gdGhlIGxpc3Qgb2YgcmVnaXN0ZXJlZCB1c2Vyc1xuXHRcdFx0XHRcdHJlZi5jaGlsZCgnVWlkcycpLmNoaWxkKHV0ZjhfdG9fYjY0KHZtLm5ld0VtYWlsKSkuc2V0KGN1cnJlbnRVc2VyRGF0YS51aWQsIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKFwiRGF0YSBjb3VsZCBub3QgYmUgc2F2ZWQuIFwiICsgZXJyb3IpO1xuXHRcdFx0XHRcdFx0ZWxzZSAkbG9nLmluZm8oXCJ1aWQgY3JlYXRlZCBzdWNlc3NmdWxseS5cIik7XG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHQvL3JlZGlyZWN0IHRvIFVzZXJJbmZvcm1hdGlvblxuXHRcdFx0XHRcdHJlZGlyZWN0KCcvdXNlckluZm9ybWF0aW9uJywgY3VycmVudFVzZXJEYXRhKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHR9XG5cdH1cblxuXHR2bS5sb2dpblJlZ2lzdGVyZWRVc2VyID0gZnVuY3Rpb24oKSB7XG5cblx0XHRpZih2bS51bmNsb2NrVXNlckxvZ2luQnRuLnVzYWJsZSkge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVcblx0XHRcdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXG5cdFx0XHQvL2F1dGhlbnRpY2F0ZSB0aGUgdXNlclxuXHRcdFx0cmVmLmF1dGhXaXRoUGFzc3dvcmQoe1xuXHRcdFx0XHRlbWFpbDogdm0udXNlckVtYWlsLFxuXHRcdFx0XHRwYXNzd29yZDogdm0udXNlclBhc3N3b3JkXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvciwgYXV0aERhdGEpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ0Vycm9yIExvZ2dpbmcgSW46ICcgKyBlcnJvcik7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdMb2dnZWQgSW4gc3VjY2Vzc2Z1bGx5OiAnICsgYXV0aERhdGEudWlkKTtcblx0XHRcdFx0XHQkbG9nLmluZm8oYXV0aERhdGEpO1xuXHRcdFx0XHRcdC8vc2F2ZSBhbGwgdGhlIGRhdGFcblx0XHRcdFx0XHRjdXJyZW50VXNlckRhdGEgPSBhdXRoRGF0YTtcblxuXHRcdFx0XHRcdC8vbG9hZCB1c2VyIGJpb1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vbG9hZCB1c2VyIGV2ZW50c1xuXG5cdFx0XHRcdFx0Ly9yZWRpcmVjdFxuXHRcdFx0XHRcdHJlZGlyZWN0KCcvdXNlckluZm9ybWF0aW9uJywgY3VycmVudFVzZXJEYXRhKTtcblx0XHRcdFx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0fVxuXG5cdH1cblxuXHR2bS5hbGVydE1lID0gZnVuY3Rpb24oKSB7XG5cdFx0YWxlcnQoJ3RoaXMgaXMgd29ya2luZyEgYW4gYWxlcnQhJyk7XG5cdH1cblxuXHR2bS5vblJlc2l6ZUZ1bmN0aW9uID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGlucHV0VGV4dCA9IGFuZ3VsYXIuZWxlbWVudCgnLmlucHV0VGV4dCcpO1xuXHRcdGlmKCR3aW5kb3cub3V0ZXJXaWR0aCA+ICR3aW5kb3cub3V0ZXJIZWlnaHQpIHtcblx0XHRcdGlucHV0VGV4dC5jc3MoJ2ZvbnQtc2l6ZScsICcyZW0nKTtcblx0XHRcdCRsb2cuaW5mbygnbWFraW5nIGJpZ2dlcicpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpbnB1dFRleHQuY3NzKCdmb250LXNpemUnLCAnMS4yZW0nKTtcblx0XHR9XG5cdH1cblxuXHQvL2V2ZW50IGxpc3RlbmVyc1xuXHRpZiAoJ2FkZEV2ZW50TGlzdGVuZXInIGluICRkb2N1bWVudCkge1xuXHQgICAgJGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHtcblx0ICAgIFx0JGxvZy5pbmZvKCdhZGRpbmcgRmFzdENsaWNrJyk7XG5cdCAgICAgICAgRmFzdENsaWNrLmF0dGFjaCgkZG9jdW1lbnQuYm9keSk7XG5cdCAgICB9LCBmYWxzZSk7XG5cdH1cblxuXHRhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdykuYmluZCgncmVzaXplJywgZnVuY3Rpb24oKSB7XG5cdFx0dm0ub25SZXNpemVGdW5jdGlvbigpO1xuXHRcdC8vJHNjb3BlLiRhcHBseSgpO1xuXHR9KTtcblxuXHRhbmd1bGFyLmVsZW1lbnQoJGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcblx0XHRpZigkd2luZG93Lm91dGVyV2lkdGggPCA2MDApIHtcblx0XHRcdHZtLm9uUmVzaXplRnVuY3Rpb24oKTtcblx0XHRcdC8vJHNjb3BlLiRhcHBseSgpO1xuXHRcdH1cblx0fSlcblxuXG5cdCB2bS5tYXN0ZXIgPSB7fTtcblxuXHQgIHZtLnVwZGF0ZSA9IGZ1bmN0aW9uKHVzZXIpIHtcblx0ICAgIHZtLm1hc3RlciA9IGFuZ3VsYXIuY29weSh1c2VyKTtcblx0ICB9O1xuXG5cdCAgdm0ucmVzZXQgPSBmdW5jdGlvbihmb3JtKSB7XG5cdCAgICBpZiAoZm9ybSkge1xuXHQgICAgICBmb3JtLiRzZXRQcmlzdGluZSgpO1xuXHQgICAgICBmb3JtLiRzZXRVbnRvdWNoZWQoKTtcblx0ICAgIH1cblx0ICAgIHZtLnVzZXIgPSBhbmd1bGFyLmNvcHkodm0ubWFzdGVyKTtcblx0ICB9O1xuXG5cdCAgdm0ucmVzZXQoKTtcbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdNYWluQ29udHJvbGxlcicsIE1haW5Db250cm9sbGVyKTtcblxuTWFpbkNvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICckbG9jYXRpb24nLCAnJGRvY3VtZW50JywgJyR3aW5kb3cnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBNYWluQ29udHJvbGxlcigkbG9nLCAkbG9jYXRpb24sICRkb2N1bWVudCwgJHdpbmRvdykge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHR2YXIgZmJVUkwgPSAnaHR0cHM6Ly9tZWV0dXBwbGFubmVyLmZpcmViYXNlaW8uY29tLyc7XG5cdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoZmJVUkwpOyBcblxuXHRmdW5jdGlvbiByZXNpemVCR0ltYWdlKCkge1xuXHRcdHZhciBib2R5ID0gYW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCk7XG5cdFx0JGRvY3VtZW50LmNzcygnaGlnaHQnLCAkd2luZG93Lm91dGVySGVpZ2h0KVxuXHR9XG5cblx0dm0ubG9nb3V0ID0gZnVuY3Rpb24oKSB7XG5cdFx0YWxlcnQoJ2xvZ2dpbmcgeW91IG91dCEnKTtcblx0XHRyZWYudW5hdXRoKCk7XG5cdFx0JGxvY2F0aW9uLnBhdGgoJy8nKTtcblx0fTtcblxuXHRhbmd1bGFyLmVsZW1lbnQoJGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcblx0XHQvL0Zhc3RDbGljay5hdHRhY2goJGRvY3VtZW50LmJvZHkpO1xuXHRcdHJlc2l6ZUJHSW1hZ2UoKTtcblx0fSlcbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdOZXdVc2VyU2lnblVwQ29udHJvbGxlcicsIE5ld1VzZXJTaWduVXBDb250cm9sbGVyKTtcblxuTmV3VXNlclNpZ25VcENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnLCAndmFsaWRhdGlvbicsICdiYWNrZW5kU2VydmljZXMnLCAndHJhZmZpY1ZhbGV0JywgJ3VzZXJEYXRhJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gTmV3VXNlclNpZ25VcENvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCB2YWxpZGF0aW9uLCBiYWNrZW5kU2VydmljZXMsIHRyYWZmaWNWYWxldCwgdXNlckRhdGEpIHtcblx0dmFyIHZtID0gdGhpcztcblxuXHQvL2RlZmluZSB2bSBpbnB1dCB2YXJpYWJsZXNcblx0dm0uaW5wdXRzID0ge1xuXHRcdG5ld05hbWU6ICcnLFxuXHRcdG5ld0VtYWlsOiAnJyxcblx0XHRuZXdQYXNzd29yZDogJycsXG5cdFx0cmVxdWlyZWRGaWVsZHNEZWZpbmVkOiBmYWxzZVxuXHR9XG5cdHZtLmVycm9ycyA9IHtcblx0XHRuYW1lOiAnJyxcblx0XHRlbWFpbDogJycsXG5cdFx0cGFzc3dvcmQ6IGZhbHNlLFxuXHRcdHBhc3Nlc0FsbFRlc3RzOiBmYWxzZVxuXHR9XG5cdHZtLnBhc3NSZXFzID0ge1xuXHRcdDA6IHsgaWQ6JycsIHJlcTonSXMgYXQgbGVhc3QgMTYgY2hhcmFjdGVycyBsb25nJywgZnVsZmlsbGVkOmZhbHNlLCAnc3R5bGUnOntjb2xvcjoncmVkJ319LFxuXHRcdDE6IHsgaWQ6JycsIHJlcTonSXMgbm8gbG9uZ2VyIHRoYW4gMTAwIGNoYXJhY3RlcnMnLCBmdWxmaWxsZWQ6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOidyZWQnfSB9LFxuXHRcdDI6IHsgaWQ6JycsIHJlcTonQ29udGFpbnMgYXQgbGVhc3Qgb25lIGxvd2VyY2FzZSBsZXR0ZXInLCBmdWxmaWxsZWQ6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOidyZWQnfSB9LFxuXHRcdDM6IHsgaWQ6JycsIHJlcTonQ29udGFpbnMgYXQgbGVhc3Qgb25lIHVwcGVyY2FzZSBsZXR0ZXInLCBmdWxmaWxsZWQ6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOidyZWQnfSB9LFxuXHRcdDQ6IHsgaWQ6JycsIHJlcTonQ29udGFpbnMgYXQgbGVhc3Qgb25lIG51bWJlcicsIGZ1bGZpbGxlZDpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9IH0sXG5cdFx0NTogeyBpZDonJywgcmVxOidDb250YWlucyBhdCBsZWFzdCBvbmUgcmVxdWlyZWQgc3ltYm9sIChcXCFcXEBcXCNcXCRcXCVcXF5cXCZcXCopJywgZnVsZmlsbGVkOmZhbHNlLCAnc3R5bGUnOntjb2xvcjoncmVkJ30gfSxcblx0XHQ2OiB7IGlkOicnLCByZXE6XCJEb2Vzbid0IGhhdmUgYW55IGlsbGVnYWwgY2hhcmFjdGVyc1wiLCBmdWxmaWxsZWQ6dHJ1ZSwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9IH1cblx0fVxuXHR2bS5zaG93UmVxc0JveCA9IGZhbHNlO1xuXG5cdC8vZGVmaW5lIHJlcXVpcmVkIGZpZWxkIGNvbnN0cmFpbnRzXG5cdHZhciBzaWdudXBWYWxpZGF0aW9uID0gdmFsaWRhdGlvbjtcblxuXHQvL2RlZmluZSBjb250cm9sbGVyIG1ldGhvZHNcblx0ZnVuY3Rpb24gdmVyaWZ5UmVxdWlybm1lbnRzKCkge1xuXHRcdGlmKHZtLmVycm9ycy5uYW1lID09ICcnICYmIHZtLmVycm9ycy5lbWFpbCA9PSAnJyAmJiAhdm0uZXJyb3JzLnBhc3N3b3JkKSB2bS5lcnJvcnMucGFzc2VzQWxsVGVzdHMgPSB0cnVlO1xuXHRcdGVsc2Ugdm0uZXJyb3JzLnBhc3Nlc0FsbFRlc3RzID0gZmFsc2U7XG5cblx0XHRpZiggYW5ndWxhci5pc0RlZmluZWQodm0uaW5wdXRzLm5ld05hbWUpICYmIHZtLmlucHV0cy5uZXdOYW1lICE9PSAnJyAmJlxuXHRcdFx0YW5ndWxhci5pc0RlZmluZWQodm0uaW5wdXRzLm5ld0VtYWlsKSAmJiB2bS5pbnB1dHMubmV3RW1haWwgIT09ICcnICYmXG5cdFx0XHRhbmd1bGFyLmlzRGVmaW5lZCh2bS5pbnB1dHMubmV3UGFzc3dvcmQpICYmIHZtLmlucHV0cy5uZXdQYXNzd29yZCAhPT0gJycpIFxuXHRcdFx0XHR2bS5pbnB1dHMucmVxdWlyZWRGaWVsZHNEZWZpbmVkID0gdHJ1ZTtcblx0XHRlbHNlIHZtLmlucHV0cy5yZXF1aXJlZEZpZWxkc0RlZmluZWQgPSBmYWxzZTtcblx0fVxuXG5cdC8vZGVmaW5lIHZtIGFjY2Vzc2libGUgbWV0aG9kc1xuXHR2bS5jaGVja05ld05hbWUgPSBmdW5jdGlvbigpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlXG5cdFx0dmFyIGVycm9ycyA9IFtdO1xuXHRcdHZhciBoYXNOYW1lID0gc2lnbnVwVmFsaWRhdGlvbi5yZXF1aXJlZCh2bS5pbnB1dHMubmV3TmFtZSk7XG5cdFx0dmFyIGxvbmdFbm91Z2ggPSBzaWdudXBWYWxpZGF0aW9uLm1pbk5hbWVMZW5ndGgodm0uaW5wdXRzLm5ld05hbWUpXG5cdFx0XG5cdFx0Ly9sb2cgZXJyb3JzXG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoaGFzTmFtZSkpIGVycm9ycy5wdXNoKGhhc05hbWUpO1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGxvbmdFbm91Z2gpKSBlcnJvcnMucHVzaChsb25nRW5vdWdoKTtcblxuXHRcdC8vdXBkYXRlIHRoZSBlcnJvcnMgbW9kZWxcblx0XHRpZihlcnJvcnMubGVuZ3RoID4gMCkgdm0uZXJyb3JzLm5hbWUgPSBlcnJvcnMuam9pbignLCAnKTtcblx0XHRlbHNlIHZtLmVycm9ycy5uYW1lID0gJyc7XG5cblx0XHR2ZXJpZnlSZXF1aXJubWVudHMoKTtcblx0fVxuXG5cdHZtLmNoZWNrTmV3RW1haWwgPSBmdW5jdGlvbigpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlXG5cdFx0dmFyIGVycm9ycyA9IFtdO1xuXHRcdHZhciBoYXNFbWFpbCA9IHNpZ251cFZhbGlkYXRpb24ucmVxdWlyZWQodm0uaW5wdXRzLm5ld0VtYWlsKTtcblx0XHR2YXIgaXNBbkVtYWlsID0gc2lnbnVwVmFsaWRhdGlvbi5lbWFpbCh2bS5pbnB1dHMubmV3RW1haWwpO1xuXHRcdFxuXHRcdC8vbG9nIGVycm9yc1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGhhc0VtYWlsKSkgZXJyb3JzLnB1c2goaGFzRW1haWwpO1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGlzQW5FbWFpbCkpIGVycm9ycy5wdXNoKGlzQW5FbWFpbCk7XG5cblx0XHQvL3VwZGF0ZSB0aGUgZXJyb3JzIG1vZGVsXG5cdFx0aWYoZXJyb3JzLmxlbmd0aCA+IDApIHZtLmVycm9ycy5lbWFpbCA9IGVycm9ycy5qb2luKCcsICcpO1xuXHRcdGVsc2Ugdm0uZXJyb3JzLmVtYWlsID0gJyc7XG5cblx0XHR2ZXJpZnlSZXF1aXJubWVudHMoKTtcblx0fVxuXG5cdHZtLmNoZWNrTmV3UGFzc3dvcmQgPSBmdW5jdGlvbigpIHtcblx0XHQvL2ZsaXAgb24gcmVxcyBib3hcblx0XHR2bS5zaG93UmVxc0JveCA9IHRydWU7XG5cblx0XHQvL2xvY2FsIHZhcmlhYmxlXG5cdFx0dmFyIGVycm9ycyA9IFtdO1xuXHRcdHZhciBoYXNQYXNzd29yZCA9IHNpZ251cFZhbGlkYXRpb24ucmVxdWlyZWQodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKTtcblx0XHR2YXIgc3BlY2lmaWNSZXFzID0gW1xuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5taW5QYXNzTGVuZ3RoKHZtLmlucHV0cy5uZXdQYXNzd29yZCksXG5cdFx0XHRzaWdudXBWYWxpZGF0aW9uLm1heFBhc3NMZW5ndGgodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKSxcblx0XHRcdHNpZ251cFZhbGlkYXRpb24uYXRMZWFzdE9uZUxvd2VyY2FzZSh2bS5pbnB1dHMubmV3UGFzc3dvcmQpLFxuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5hdExlYXN0T25lVXBwZXJjYXNlKHZtLmlucHV0cy5uZXdQYXNzd29yZCksXG5cdFx0XHRzaWdudXBWYWxpZGF0aW9uLmF0TGVhc3RPbmVOdW1iZXIodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKSxcblx0XHRcdHNpZ251cFZhbGlkYXRpb24uYXRMZWFzdE9uZVN5bWJvbCh2bS5pbnB1dHMubmV3UGFzc3dvcmQpLFxuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5pbGxlZ2FsQ2hhcmFjdGVyKHZtLmlucHV0cy5uZXdQYXNzd29yZClcblx0XHRdO1xuXG5cdFx0Ly9sb2cgZXJyb3JzXG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoaGFzUGFzc3dvcmQpKSBlcnJvcnMucHVzaChoYXNQYXNzd29yZCk7XG5cblx0XHQvL3VwZGF0ZSB0aGUgZXJyb3JzIG1vZGVsXG5cdFx0aWYoZXJyb3JzLmxlbmd0aCA+IDApIHZtLmVycm9ycy5wYXNzd29yZCA9IGVycm9ycy5qb2luKCcsICcpO1xuXHRcdGVsc2Ugdm0uZXJyb3JzLmVtYWlsID0gJyc7XG5cblx0XHQvL3VwZGF0ZSByZXFzIG1vZGVsXG5cdFx0dmFyIGFueUVycm9ycyA9IGZhbHNlO1xuXHRcdGZvcihpPTA7IGk8NzsgaSsrKSB7XG5cdFx0XHRpZihzcGVjaWZpY1JlcXNbaV0pIHtcblx0XHRcdFx0dm0ucGFzc1JlcXNbaV0uZnVsZmlsbGVkID0gdHJ1ZTtcblx0XHRcdFx0dm0ucGFzc1JlcXNbaV0uc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS5wYXNzUmVxc1tpXS5mdWxmaWxsZWQgPSBmYWxzZTtcblx0XHRcdFx0dm0ucGFzc1JlcXNbaV0uc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHRcdFx0XHRhbnlFcnJvcnMgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHZtLmVycm9ycy5wYXNzd29yZCA9IGFueUVycm9ycztcblx0XHR2ZXJpZnlSZXF1aXJubWVudHMoKTtcblx0fVxuXG5cdHZtLmV4aXRQYXNzd29yZCA9IGZ1bmN0aW9uKCkge1xuXHRcdHZtLmNoZWNrTmV3UGFzc3dvcmQoKTtcblx0XHR2bS5zaG93UmVxc0JveCA9IGZhbHNlO1xuXHR9XG5cblx0dm0uY3JlYXRlTmV3VXNlciA9IGZ1bmN0aW9uICgpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIG5ld1VzZXJTaGVycGEgPSB0cmFmZmljVmFsZXQ7XG5cblx0XHQvL2NvbmZpcm0gYWxsIGZpZWxkcyBhcmUgdmFsaWRcblx0XHRpZih2bS5lcnJvcnMucGFzc2VzQWxsVGVzdHMgJiYgdm0uaW5wdXRzLnJlcXVpcmVkRmllbGRzRGVmaW5lZCkge1xuXHRcdFx0XG5cdFx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgY3JlYXRlTmV3VXNlciA9IGJhY2tlbmRTZXJ2aWNlcztcblx0XHRcdHZhciBuZXdVc2VyRGF0YSA9IHVzZXJEYXRhO1xuXHRcdFx0dmFyIHRoaXNVSUQ7XG5cblx0XHRcdC8vY3JlYXRlIHRoZSBuZXcgdXNlciBpbiB0aGUgZGF0YWJhc2Vcblx0XHRcdGNyZWF0ZU5ld1VzZXIuY3JlYXRlTmV3VXNlcih2bS5pbnB1dHMubmV3RW1haWwsIHZtLmlucHV0cy5uZXdQYXNzd29yZClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKGRiVXNlckRhdGEpIHtcblx0XHRcdFx0XG5cdFx0XHRcdC8vbWFpbnRhaW4gbG9jYWwgdmFsdWVzIHRvIHNwZWVkIHVwIHVzZXIgZXhwZXJpZW5jZVxuXHRcdFx0XHRuZXdVc2VyRGF0YS5sb2FkUHJpbWFyaWVzKHZtLmlucHV0cy5uZXdFbWFpbCwgdm0uaW5wdXRzLm5ld05hbWUsIGRiVXNlckRhdGEudWlkKTtcblxuXHRcdFx0XHQvL2NyZWF0ZSBhIHVzZXIgcHJvZmlsZSBpbiB0aGUgZGF0YWJhc2Vcblx0XHRcdFx0Y3JlYXRlTmV3VXNlci5hZGROZXdVc2VyVG9EYXRhYmFzZShkYlVzZXJEYXRhLnVpZCwgdm0uaW5wdXRzLm5ld05hbWUsIHZtLmlucHV0cy5uZXdFbWFpbClcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24obWVzc2FnZSkge1xuXG5cdFx0XHRcdFx0JGxvZy5pbmZvKG1lc3NhZ2UpO1xuXG5cdFx0XHRcdFx0Ly9hZGQgdGhpcyB1c2VyIHRvIHRoZSBsaXN0IG9mIHJlZ2lzdGVyZWQgdXNlcnNcblx0XHRcdFx0XHRjcmVhdGVOZXdVc2VyLmFkZE5ld1VzZXJUb1JlZ1VzZXJzTGlzdChkYlVzZXJEYXRhLnVpZCwgdm0uaW5wdXRzLm5ld0VtYWlsKVxuXHRcdFx0XHRcdC50aGVuKGZ1bmN0aW9uKG1lc3NhZ2UpIHtcblxuXHRcdFx0XHRcdFx0Ly9yZWRpcmVjdCB1c2luZyB0aGUgdWlkXG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdC8vcmVkaXJlY3QgdG8gdGhlIG5leHQgcGFnZSBcblx0XHRcdFx0XHRcdG5ld1VzZXJTaGVycGEucmVkaXJlY3RUbygnL3VzZXJJbmZvcm1hdGlvbicsIGRiVXNlckRhdGEudWlkKTtcblx0XHRcdFx0XHRcdCBcblx0XHRcdFx0XHRcdCRsb2cuaW5mbyhtZXNzYWdlKTsgXG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyAkbG9nLmluZm8obWVzc2FnZSk7IH0pXG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5jYXRjaChmdW5jdGlvbihtZXNzYWdlKSB7ICRsb2cuaW5mbyhtZXNzYWdlKTsgfSlcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyAkbG9nLmluZm8obWVzc2FnZSk7IH0pXG5cdFx0XHRcblx0XHR9XG5cblx0fVxuXHRcblx0Ly9ydW4gdGltZSBhY3Rpb25zXG5cbn1cbiIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ1JlZ1VzZXJMb2dpbkNvbnRyb2xsZXInLCBSZWdVc2VyTG9naW5Db250cm9sbGVyKTtcblxuUmVnVXNlckxvZ2luQ29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJywgJyRkb2N1bWVudCcsICdiYWNrZW5kU2VydmljZXMnLCAndHJhZmZpY1ZhbGV0JywgJ3VzZXJEYXRhJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gUmVnVXNlckxvZ2luQ29udHJvbGxlcigkbG9nLCAkZG9jdW1lbnQsIGJhY2tlbmRTZXJ2aWNlcywgdHJhZmZpY1ZhbGV0LCB1c2VyRGF0YSkge1xuXHR2YXIgdm0gPSB0aGlzO1xuXG5cdC8vZGVmaW5lIHZtIGlucHV0IHZhcmlhYmxlc1xuXHR2bS5pbnB1dHMgPSB7XG5cdFx0ZW1haWw6ICcnLFxuXHRcdHBhc3N3b3JkOiAnJyxcblx0XHRyZXF1aXJlZEZpZWxkc0RlZmluZWQ6IGZhbHNlXG5cdH1cblx0dm0uZXJyb3JzID0ge1xuXHRcdG1lc3NhZ2U6ICcnLFxuXHRcdHBhc3Nlc0FsbFRlc3RzOiB0cnVlXG5cdH1cblx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0biA9IHtcblx0XHQndXNhYmxlJzpmYWxzZSwgXG5cdFx0J2NsYXNzJzonYnRuIGJ0bi13YXJuaW5nJyxcblx0XHRtZXNzYWdlOiAnTmVlZCBFbWFpbCAmIFBhc3MnXG5cdH1cblxuXHQvL21ldGhvZHNcblx0ZnVuY3Rpb24gb3BlblVzZXJMb2dpbkJ0bigpIHtcblx0XHQvL2NoZWNrIHRoYXQgdGhlcmUgaXMgYW4gZW1haWwgYW5kIHRoZXJlIGlzIGEgcGFzc3dvcmRcblx0XHRpZihcdGFuZ3VsYXIuaXNEZWZpbmVkKHZtLmlucHV0cy5lbWFpbCkgJiYgdm0uaW5wdXRzLmVtYWlsICE9PSAnJyAmJlxuXHRcdFx0YW5ndWxhci5pc0RlZmluZWQodm0uaW5wdXRzLnBhc3N3b3JkKSAmJiB2bS5pbnB1dHMucGFzc3dvcmQgIT09ICcnKSBcblx0XHR7XG5cdFx0XHR2bS5pbnB1dHMucmVxdWlyZWRGaWVsZHNEZWZpbmVkID0gdHJ1ZTtcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4uY2xhc3MgPSAnYnRuIGJ0bi1zdWNjZXNzJztcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4ubWVzc2FnZSA9ICdMb2dpbic7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLnVzYWJsZSA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZtLmlucHV0cy5yZXF1aXJlZEZpZWxkc0RlZmluZWQgPSBmYWxzZTtcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4uY2xhc3MgPSAnYnRuIGJ0bi13YXJuaW5nJztcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4ubWVzc2FnZSA9ICdOZWVkIEVtYWlsICYgUGFzcyc7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLnVzYWJsZSA9IGZhbHNlO1xuXHRcdH1cblxuXHR9XG5cblx0Ly92aWV3IG1vZGVsIG1ldGhvZHNcblx0dm0udXBkYXRlID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9zZXQgdmFsdWVzXG5cdFx0dm0uaW5wdXRzLmVtYWlsID0gJGRvY3VtZW50LmZpbmQoJyN1c2VyRW1haWwnKVswXS52YWx1ZTtcblx0XHR2bS5pbnB1dHMucGFzc3dvcmQgPSAkZG9jdW1lbnQuZmluZCgnI3VzZXJQYXNzd29yZCcpWzBdLnZhbHVlO1xuXHRcdFxuXHRcdG9wZW5Vc2VyTG9naW5CdG4oKTtcblx0fVxuXG5cdHZtLmxvZ2luUmVnaXN0ZXJlZFVzZXIgPSBmdW5jdGlvbigpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIHJlZ2lzdGVyZWRVc2VyU2hlcnBhID0gdHJhZmZpY1ZhbGV0O1xuXG5cdFx0Ly9jb25maXJtIGFsbCBmaWVsZHMgYXJlIHZhbGlkXG5cdFx0aWYodHJ1ZSkge1xuXHRcdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdFx0dmFyIGRhdGFiYXNlID0gYmFja2VuZFNlcnZpY2VzO1xuXHRcdFx0dmFyIHJlZ2lzdGVyZWRVc2VyRGF0YSA9IHVzZXJEYXRhO1xuXG5cdFx0XHQvL3ZlcmlmeSB1c2VycyBjcmVkZW50aWFsc1xuXHRcdFx0ZGF0YWJhc2UuTG9naW5SZWdpc3RlcmVkVXNlcih2bS5pbnB1dHMuZW1haWwsIHZtLmlucHV0cy5wYXNzd29yZClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKHVzZXJDcmVkZW50aWFscykge1xuXHRcdFx0XHQvL2lmIG5vIHRyb3VibGUgbG9nZ2luZyBpbiB1cGRhdGUgZXJyb3Igb2JqZWN0XG5cdFx0XHRcdHZtLmVycm9ycy5wYXNzZXNBbGxUZXN0cyA9IHRydWU7XG5cblx0XHRcdFx0Ly9hZGQgcHJpbWFyeSBpbmZvcm1hdGlvbiB0byBsb2NhbCBtb2RlbFxuXHRcdFx0XHRyZWdpc3RlcmVkVXNlckRhdGEuc2V0UHJpbWFyaWVzTG9jYWxseSh2bS5pbnB1dHMuZW1haWwsIHZtLmlucHV0cy5uYW1lLCB1c2VyQ3JlZGVudGlhbHMudWlkKTtcblxuXHRcdFx0fSlcblx0XHRcdC50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQkbG9nLmluZm8oXCJ1aWQgaXMgXCIgKyByZWdpc3RlcmVkVXNlckRhdGEuZ2V0VUlETG9jYWxseSgpKTtcblxuXHRcdFx0XHRkYXRhYmFzZS5nZXRVc2VyQmlvKHJlZ2lzdGVyZWRVc2VyRGF0YS5nZXRVSURMb2NhbGx5KCkpXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKHVzZXJCaW8pIHtcblx0XHRcdFx0XHQvL3VwZGF0ZSB1c2VyRGF0YSBtb2RlbCB3aXRoIHVzZXJCaW9cblx0XHRcdFx0XHRyZWdpc3RlcmVkVXNlckRhdGEudXBkYXRlQmlvTG9jYWxseSh1c2VyQmlvKTtcblxuXHRcdFx0XHRcdC8vbG9hZCB1c2VyIGV2ZW50c1xuXHRcdFx0XHRcdGRhdGFiYXNlLmdldFVzZXJFdmVudHMocmVnaXN0ZXJlZFVzZXJEYXRhLmdldFVJRExvY2FsbHkoKSlcblx0XHRcdFx0XHQudGhlbihmdW5jdGlvbihhbGxFdmVudHNGb3JUaGlzVXNlcikge1xuXHRcdFx0XHRcdFx0Ly91cGRhdGUgdXNlckRhdGEgbW9kZWwgd2l0aCB1c2VyRXZlbnRzXG5cdFx0XHRcdFx0XHRyZWdpc3RlcmVkVXNlckRhdGEudXBkYXRlQWxsVXNlckV2ZW50c0xvY2FsbHkoYWxsRXZlbnRzRm9yVGhpc1VzZXIpO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKG1lc3NhZ2UpIHsgJGxvZy5pbmZvKG1lc3NhZ2UpOyB9KVxuXG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5jYXRjaChmdW5jdGlvbihtZXNzYWdlKSB7ICRsb2cuaW5mbyhtZXNzYWdlKTsgfSlcblxuXHRcdFx0XHQvL3JlZGlyZWN0IHRvIHRoZSBuZXh0IHBhZ2UgXG5cdFx0XHRcdHJlZ2lzdGVyZWRVc2VyU2hlcnBhLnJlZGlyZWN0VG8oJy91c2VySW5mb3JtYXRpb24nLCByZWdpc3RlcmVkVXNlckRhdGEuZ2V0VUlETG9jYWxseSgpKTtcblxuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihtZXNzYWdlKSB7IFxuXHRcdFx0XHQvL2lmIHRoZXJlIHdhcyBhbiBlcnJvciBsb2dnaW5nIGluLCBsZXQgdGhlIHVzZXIga25vd1xuXHRcdFx0XHR2bS5lcnJvcnMubWVzc2FnZSA9IG1lc3NhZ2U7XG5cdFx0XHRcdHZtLmVycm9ycy5wYXNzZXNBbGxUZXN0cyA9IGZhbHNlO1xuXHRcdFx0fSlcblxuXHRcdFx0Ly91c2UgdWlkIHRvIGNvbGxlY3QgdXNlciBiaW9cblx0XHRcdFxuXHRcdH1cblxuXHR9XG5cblx0dm0uY2xpY2tlZCA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciB1c2VyQXV0aGVudGljYXRpb24gPSBiYWNrZW5kU2VydmljZXM7XG5cblx0XHR1c2VyQXV0aGVudGljYXRpb24ubG9nVXNlck91dCgpO1xuXHR9XG5cblx0Ly9ydW4gY29tbWFuZHNcbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCd0b3BNZW51Q29udHJvbGxlcicsIHRvcE1lbnVDb250cm9sbGVyKTtcblxudG9wTWVudUNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnLCAnJGxvY2F0aW9uJywgJyRkb2N1bWVudCcsICckd2luZG93J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gdG9wTWVudUNvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCAkbG9jYXRpb24sICRkb2N1bWVudCwgJHdpbmRvdykge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHR2YXIgZmJVUkwgPSAnaHR0cHM6Ly9tZWV0dXBwbGFubmVyLmZpcmViYXNlaW8uY29tLyc7XG5cdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXG5cdC8vbG9jYWwgdmFyaWFibGVzXG5cdHZtLmxvZ2dlZEluID0gZmFsc2VcblxuXHQvL3N0eWxlcyB2YXJpYWJsZXNcblx0XG5cdC8vZXZlbnQgbGlzdGVuZXJzXG5cdGlmICgnYWRkRXZlbnRMaXN0ZW5lcicgaW4gJGRvY3VtZW50KSB7XG5cdCAgICAkZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkge1xuXHQgICAgXHQkbG9nLmluZm8oJ2FkZGluZyBGYXN0Q2xpY2snKTtcblx0ICAgICAgICBGYXN0Q2xpY2suYXR0YWNoKCRkb2N1bWVudC5ib2R5KTtcblx0ICAgIH0sIGZhbHNlKTtcblx0fVxuXG5cdGFuZ3VsYXIuZWxlbWVudCgkd2luZG93KS5iaW5kKCdyZXNpemUnLCBmdW5jdGlvbigpIHtcblx0XHR2bS5vblJlc2l6ZUZ1bmN0aW9uKCk7XG5cdFx0JHNjb3BlLiRhcHBseSgpO1xuXHR9KTtcblxuXHRhbmd1bGFyLmVsZW1lbnQoJGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcblx0XHRpZigkd2luZG93Lm91dGVyV2lkdGggPCA2MDApIHtcblx0XHRcdHZtLm9uUmVzaXplRnVuY3Rpb24oKTtcblx0XHRcdCRzY29wZS4kYXBwbHkoKTtcblx0XHR9XG5cdH0pXG5cdC8vZHluYW1pY2FsbHkgc2V0IGlucHV0IHdpZHRoXG5cblxuXHQvLyBDcmVhdGUgYSBjYWxsYmFjayB3aGljaCBsb2dzIHRoZSBjdXJyZW50IGF1dGggc3RhdGVcblx0ZnVuY3Rpb24gaW5pdCgpIHtcblx0XHR2bS5vblJlc2l6ZUZ1bmN0aW9uKCk7XG5cdFx0JHNjb3BlLiRhcHBseSgpO1xuXHR9XG5cblx0ZnVuY3Rpb24gYXV0aERhdGFDYWxsYmFjayhhdXRoRGF0YSkge1xuXHQgIGlmIChhdXRoRGF0YSkge1xuXHQgICAgJGxvZy5pbmZvKFwiVXNlciBcIiArIGF1dGhEYXRhLnVpZCArIFwiIGlzIGxvZ2dlZCBpbiB3aXRoIFwiICsgYXV0aERhdGEucHJvdmlkZXIpO1xuXHQgICAgdm0ubG9nZ2VkSW4gPSB0cnVlO1xuXHQgIH0gZWxzZSB7XG5cdCAgICAkbG9nLmluZm8oXCJVc2VyIGlzIGxvZ2dlZCBvdXRcIik7XG5cdCAgICB2bS5sb2dnZWRJbiA9IGZhbHNlO1xuXHQgIH1cblx0fVxuXG5cdGZ1bmN0aW9uIHJlZGlyZWN0KHBhdGgsIHVzZXJEYXRhKSB7XG5cdFx0dmFyIGZ1bGxQYXRoID0gcGF0aCArICcvJyArIHVzZXJEYXRhLnVpZCArICcvJyArIHVzZXJEYXRhLnRva2VuO1xuXHRcdC8vcmVkaXJlY3Rcblx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIHRvOiAnICsgZnVsbFBhdGgpO1xuXHRcdCRsb2NhdGlvbi5wYXRoKGZ1bGxQYXRoKTtcblx0XHQvLyRzY29wZS4kYXBwbHkoKTtcblx0fVxuXG5cdC8vdm0gYWNjZXNzaWJsZSBtZXRob2RzXG5cdHZtLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2cuaW5mbygnbG9nZ2luZyBvdXQhJyk7XG5cdFx0dm0ubG9nZ2VkSW4gPSBmYWxzZTtcblx0XHRyZWYudW5hdXRoKCk7XG5cdFx0cmVkaXJlY3QoJy8nLCB7dWlkOicnLCB0b2tlbjonJ30pO1xuXHR9XG5cblx0dm0ubmF2QmFyTG9naW5SZWdpc3RlcmVkVXNlciA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2cuaW5mbygnbGF1bmNoaW5nIGxvZ2luJyk7XG5cdFx0aWYodHJ1ZSkge1xuXHRcdC8vaWYodm0udW5jbG9ja1VzZXJMb2dpbkJ0bi51c2FibGUpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlXG5cdFx0XHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHRcdFx0Ly9hdXRoZW50aWNhdGUgdGhlIHVzZXJcblx0XHRcdHJlZi5hdXRoV2l0aFBhc3N3b3JkKHtcblx0XHRcdFx0ZW1haWw6IHZtLm5hdmJhclVzZXJFbWFpbCxcblx0XHRcdFx0cGFzc3dvcmQ6IHZtLm5hdmJhclVzZXJQYXNzXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvciwgYXV0aERhdGEpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ0Vycm9yIExvZ2dpbmcgSW46ICcgKyBlcnJvcik7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdMb2dnZWQgSW4gc3VjY2Vzc2Z1bGx5OiAnICsgYXV0aERhdGEudWlkKTtcblx0XHRcdFx0XHQkbG9nLmluZm8oYXV0aERhdGEpO1xuXHRcdFx0XHRcdC8vc2F2ZSBhbGwgdGhlIGRhdGFcblxuXHRcdFx0XHRcdC8vbG9hZCB1c2VyIGJpb1xuXHRcdFx0XHRcdC8vbG9hZCB1c2VyIGV2ZW50c1xuXG5cdFx0XHRcdFx0Ly9yZWRpcmVjdFxuXHRcdFx0XHRcdHJlZGlyZWN0KCcvdXNlckluZm9ybWF0aW9uJywgYXV0aERhdGEpO1xuXHRcdFx0XHRcdCRzY29wZS4kYXBwbHkoKTtcblxuXHRcdFx0XHRcdC8vY2xpY2sgY2xvc2VkIHRoZSBuYXZiYXJcblx0XHRcdFx0XHRhbmd1bGFyLmVsZW1lbnQoJy5uYXZiYXItdG9nZ2xlJykuY2xpY2soKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblxuXG5cdFx0fVxuXG5cdH1cblxuXHR2bS5vblJlc2l6ZUZ1bmN0aW9uID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG5hdmJhcklucHV0cyA9IGFuZ3VsYXIuZWxlbWVudCgnLm5hdmJhcklucHV0cycpO1xuXHRcdG5hdmJhcklucHV0cy5jc3MoJ3dpZHRoJywgKCR3aW5kb3cub3V0ZXJXaWR0aCAtIDI2KSArICdweCcpO1xuXHR9XG5cblx0Ly8gUmVnaXN0ZXIgdGhlIGNhbGxiYWNrIHRvIGJlIGZpcmVkIGV2ZXJ5IHRpbWUgYXV0aCBzdGF0ZSBjaGFuZ2VzXG5cdHJlZi5vbkF1dGgoYXV0aERhdGFDYWxsYmFjayk7XG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignVXNlckV2ZW50c0NvbnRyb2xsZXInLCBVc2VyRXZlbnRzQ29udHJvbGxlcik7XG5cblVzZXJFdmVudHNDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJHJvdXRlUGFyYW1zJywgJ3VzZXJEYXRhJywgJ3RyYWZmaWNWYWxldCddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIFVzZXJFdmVudHNDb250cm9sbGVyKCRsb2csICRyb3V0ZVBhcmFtcywgdXNlckRhdGEsIHRyYWZmaWNWYWxldCkge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHR2YXIgY3VycmVudFVzZXIgPSB1c2VyRGF0YTtcblxuXHQvL2xvY2FsIHZpZXcgdmFyaWFibGVzXG5cdHZtLnNob3dEZWNsaW5lID0gZmFsc2U7XHQvL3doYXQgaXMgdGhpcyBiZWluZyB1c2VkIGZvcj9cblx0dm0udXNlckJpbyA9IHt9XG5cdHZtLmV2ZW50cyA9IHt9O1xuXHR2bS5zZWN0aW9uQXZhaWxhYmxlID0ge1xuXHRcdHBlbmRpbmc6IGZhbHNlLFxuXHRcdGF0dGVuZGluZzogZmFsc2UsXG5cdFx0aG9zdGluZzogZmFsc2UsXG5cdFx0Y29tcGxldGVkOiBmYWxzZVxuXHR9O1xuXHR2bS5lcnJvcnMgPSB7fTtcblxuXHQvL2RlY2xhcmUgbG9jYWwgbWV0aG9kc1xuXHRmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fTtcblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH07XG5cblx0ZnVuY3Rpb24gbm9PZkhvc3RlRXZlbnRzKCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZVxuXHRcdHZhciBjb3VudGVyID0gMDtcblxuXHRcdGZvcihldmVudCBpbiB2bS5ldmVudHMuaG9zdGluZykgY291bnRlcisrO1xuXG5cdFx0cmV0dXJuIGNvdW50ZXI7XG5cdH1cblxuXHRmdW5jdGlvbiBnZW5lcmF0ZUV2ZW50SUQoKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYXRlID0gbmV3IERhdGUoKTtcblx0XHR2YXIgZXZlbnRJRCA9IChkYXRlVGltZVRvVW5peFRpbWUoZGF0ZSkgKiAxMCkgKyAobm9PZkhvc3RlRXZlbnRzKCkpO1xuXG5cdFx0cmV0dXJuIGV2ZW50SUQ7XG5cdH1cblxuXHRmdW5jdGlvbiBjaGVja0ZvckV2ZW50cygpIHtcblx0XHRcblx0XHQvL2xvb3AgdGhyb3VnaCBhbGwgdGhlIGV2ZW50IGNhdGVnb3JpZXNcblx0XHRPYmplY3Qua2V5cyh2bS5ldmVudHMpLmZvckVhY2goZnVuY3Rpb24oY2F0ZWdvcnkpIHtcblx0XHRcdFxuXHRcdFx0Ly9pbnNpZGUgZWFjaCBjYXRlZ29yeSBjb3VudCB0aGUgbnVtYmVyIG9mIGV2ZW50IG9iamVjdHMuLi5OT1QgdXBkYXRlZCBwbGFjZWhvbGRlciB0aG91Z2hcblx0XHRcdE9iamVjdC5rZXlzKHZtLmV2ZW50c1tjYXRlZ29yeV0pLmZvckVhY2goZnVuY3Rpb24oZXZlbnRJRCkge1xuXHRcdFx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVcblx0XHRcdFx0dmFyIGNvdW50ZXIgPSAwO1xuXHRcdFx0XHQvL2NvdW50IGV2ZW50cyB3aXRoIGlkJ3MgLyBOT1QgJ3VwZGF0ZWQnIHBsYWNlaG9sZGVyc1xuXHRcdFx0XHRpZihhbmd1bGFyLmlzT2JqZWN0KHZtLmV2ZW50c1tjYXRlZ29yeV1bZXZlbnRJRF0pKSBjb3VudGVyKys7XG5cdFx0XHRcdFxuXHRcdFx0XHQvL2lmIGF0IGxlYXN0IG9uZSBldmVudCBpZCAob2JqZWN0KSB3YXMgY291bnRlZCwgdGhlbiBzaG93IHRoZSBzZWN0aW9uXG5cdFx0XHRcdGlmKGNvdW50ZXIgPiAwKSB2bS5zZWN0aW9uQXZhaWxhYmxlW2NhdGVnb3J5XSA9IHRydWU7XG5cdFx0XHRcdGVsc2Ugdm0uc2VjdGlvbkF2YWlsYWJsZVtjYXRlZ29yeV0gPSBmYWxzZTtcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGluaXRpYWxpemUoKSB7XG5cdFx0Ly9tYWtlIHN1cmUgdGhlIHVpZCBpcyBzZXRcblx0XHRjdXJyZW50VXNlci5zZXRVSURMb2NhbGx5KCRyb3V0ZVBhcmFtcy51aWQpO1xuXG5cdFx0Ly9sb2FkIHRoZSB1c2VyIGJpb1xuXHRcdGN1cnJlbnRVc2VyLmxvYWRCaW8oJHJvdXRlUGFyYW1zLnVpZClcblx0XHQudGhlbihmdW5jdGlvbihyZXRyaWV2ZWRCaW8pIHtcblx0XHRcdHZtLnVzZXJCaW8gPSByZXRyaWV2ZWRCaW87XG5cdFx0fSlcblx0XHQuY2F0Y2goKVxuXG5cdFx0Ly9sb2FkIHVzZXIgZXZlbnRzIHByb2dyZXNzaXZsZXlcblx0XHQvL2Zpc3Qgd2hhdGV2ZXIgaXMgaW4gdGhlIG1vZGVsIGFscmVhZHlcblx0XHR2bS5ldmVudHMgPSBjdXJyZW50VXNlci5nZXRBbGxVc2VyRXZlbnRzTG9jYWxseSgpO1xuXG5cdFx0Ly90aGVuIGNhbGwgdG8gdGhlIGRiIGFuZCBnZXQgdGhlIG1vc3QgdXAgdG8gZGF0ZSBpbmZvXG5cdFx0Y3VycmVudFVzZXIuZ2V0UmVtb3RlRXZlbnRzRm9yTG9jYWwoKVxuXHRcdC50aGVuKGZ1bmN0aW9uKG9idGFpbmVkVXNlckV2ZW50cykge1xuXG5cdFx0XHQvL3VwZGF0ZSB0aGUgdmlldyBtb2RlbCB3aXRoIHRoZSB1cGRhdGVkIERCIHJlc3VsdHNcblx0XHRcdHZtLmV2ZW50cyA9IGN1cnJlbnRVc2VyLmdldEFsbFVzZXJFdmVudHNMb2NhbGx5KCk7XG5cdFx0fSlcblx0XHQudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdC8vbm93IHRoYXQgZXZlbnRzIGFyZSBsb2FkZWQsIHJlZmxlY3QgaXQgaW4gdGhlIHZpZXcgbW9kZWxcblx0XHRcdGNoZWNrRm9yRXZlbnRzKCk7XG5cdFx0fSlcblxuXHR9XG5cblx0Ly9kZWNsYXJlIHZpZXcgbWV0aG9kc1xuXHR2bS5jcmVhdGVOZXdFdmVudCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBldmVudElEID0gZ2VuZXJhdGVFdmVudElEKCk7XG5cdFx0dmFyIG5ld0V2ZW50U2hlcnBhID0gdHJhZmZpY1ZhbGV0O1xuXG5cdFx0Ly9hZGQgdGhlIGV2ZW50IHRvIHRoZSBtb2RhbCAobG9jYWxseSB0aGVuIG9uIHRoZSBkYilcblx0XHRjdXJyZW50VXNlci5jcmVhdGVOZXdFdmVudChldmVudElEKVxuXHRcdC50aGVuKGZ1bmN0aW9uKGFmZmlybWF0aXZlUmVzcG9uc2UpIHtcblx0XHRcdC8vcmVwb3J0IHRoZSBzdWNjZXNzXG5cdFx0XHQkbG9nLmluZm8oYWZmaXJtYXRpdmVSZXNwb25zZSk7XG5cdFx0fSlcblx0XHQudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdC8vaWYgdGhlcmUgd2FzIGFuIHVwZGF0ZWQgZmllbGQsIHJlbW92ZSBpdCBub3dcblx0XHRcdGN1cnJlbnRVc2VyLmNsZWFuREJFdmVudHNDYXRlZ29yeSgnaG9zdGluZycpO1xuXG5cdFx0fSlcblx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3JSZXNwb25zZSkge1xuXHRcdFx0Ly9yZXBvcnQgdGhlIGVycm9yXG5cdFx0XHQkbG9nLmluZm8oZXJyb3JSZXNwb25zZSk7XG5cdFx0fSlcblx0XHRcblxuXHRcdC8vcmVkaXJlY3QgdG8gdGhlIG5ldyBldmVudCBwYWdlXHRcdFxuXHRcdG5ld0V2ZW50U2hlcnBhLnJlZGlyZWN0VG8oJy9ldmVudCcsIGV2ZW50SUQsIGN1cnJlbnRVc2VyLmdldFVJRExvY2FsbHkoKSwgY3VycmVudFVzZXIuZ2V0VUlETG9jYWxseSgpKTtcblx0fVxuXG5cdC8vZXhlY3V0ZSBzY3JpcHRzXG5cdGluaXRpYWxpemUoKTtcblxufVxuIiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignVXNlckluZm9ybWF0aW9uQ29udHJvbGxlcicsIFVzZXJJbmZvcm1hdGlvbkNvbnRyb2xsZXIpO1xuXG5Vc2VySW5mb3JtYXRpb25Db250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJGRvY3VtZW50JywgJyRyb3V0ZVBhcmFtcycsJ3VzZXJEYXRhJywgJ3RyYWZmaWNWYWxldCddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIFVzZXJJbmZvcm1hdGlvbkNvbnRyb2xsZXIoJGxvZywgJGRvY3VtZW50LCAkcm91dGVQYXJhbXMsIHVzZXJEYXRhLCB0cmFmZmljVmFsZXQpIHtcblx0dmFyIHZtID0gdGhpcztcblx0XG5cdC8vbG9jYWwgdmFyaWFibGVzXG5cdHZhciBjdXJyZW50VXNlciA9IHVzZXJEYXRhO1xuXG5cdC8vdmlldyBtb2RlbCB2YXJpYWJsZXNcblx0dm0udXNlciA9IHt9O1xuXHR2bS50ZW1wQmlydGhkYXk7XG5cdHZtLnZpZXcgPSB7XG5cdFx0ZGF0YVRvU2F2ZTogZmFsc2UsXG5cdFx0aXNEYXRhOiBmYWxzZSxcblx0XHRidG5Nc3NnOiAnTW92ZSBPbi4uLicsXG5cdFx0cHJvY2VlZEJ0bjogJ2J0biBidG4tcHJpbWFyeSdcblx0fTtcblxuXHQvL2xvY2FsIG1ldGhvZHNcblx0ZnVuY3Rpb24gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKSB7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KHVuaXhUaW1lKSk7XG5cdH07XG5cblx0ZnVuY3Rpb24gZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKSB7XG5cdFx0cmV0dXJuIERhdGUucGFyc2UoZGF0ZVRpbWUpO1xuXHR9O1xuXG5cdC8vdmlldyBhY2Nlc3NpYmxlIG1ldGhvZHNcblx0dm0uY2hlY2tWYWx1ZXMgPSBmdW5jdGlvbigpIHtcblx0XHQvL3Rocm93IHRoZSBpc0RhdGEgZmxhZyBpZiBzb21ldGhpbmcgaXMgdXBkYXRlZFxuXHRcdHZtLnZpZXcuaXNEYXRhID0gdHJ1ZTtcblxuXHRcdGlmKCAhKGFuZ3VsYXIuaXNVbmRlZmluZWQodm0udXNlci5jb21wYW55KSB8fCB2bS51c2VyLmNvbXBhbnkgPT09ICcnKSB8fCBcblx0XHRcdCEoYW5ndWxhci5pc1VuZGVmaW5lZCh2bS51c2VyLnRpdGxlKSB8fCB2bS51c2VyLnRpdGxlID09PSAnJykgfHwgXG5cdFx0XHQhKGFuZ3VsYXIuaXNVbmRlZmluZWQodm0udXNlci5kb2IpIHx8IHZtLnVzZXIuZG9iID09PSAnJykpIFxuXHRcdHtcblx0XHRcdHZtLnZpZXcuZGF0YVRvU2F2ZSA9IHRydWU7XG5cdFx0XHR2bS52aWV3LnByb2NlZWRCdG4gPSAnYnRuIGJ0bi1zdWNjZXNzJztcblx0XHRcdHZtLnZpZXcuYnRuTXNzZyA9ICdTYXZlICYgQ29udGludWUnO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2bS52aWV3LmRhdGFUb1NhdmUgPSBmYWxzZTtcblx0XHRcdHZtLnZpZXcucHJvY2VlZEJ0biA9ICdidG4gYnRuLXByaW1hcnknO1xuXHRcdFx0dm0udmlldy5idG5Nc3NnID0gJ01vdmUgT24uLi4nO1x0XG5cdFx0fVxuXG5cdH1cblxuXHR2bS51cGRhdGVET0IgPSBmdW5jdGlvbigpIHtcblx0XHR2bS51c2VyLmRvYiA9IGRhdGVUaW1lVG9Vbml4VGltZSh2bS50ZW1wQmlydGhkYXkpO1xuXHRcdHZtLmNoZWNrVmFsdWVzKCk7XG5cdH1cblxuXHR2bS5zYXZlQW5kTW92ZU9uID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgdXNlckluZm9TaGVycGEgPSB0cmFmZmljVmFsZXQ7XG5cdFx0dmFyIGN1cnJlbnRVaWQgPSBjdXJyZW50VXNlci5nZXRVSURMb2NhbGx5KCk7XG5cblx0XHQvL2NvbnZlcnQgRE9CIHRvIHVuaXhUaW1lIGFuZCBzYXZlXG5cdFx0aWYodm0udGVtcEJpcnRoZGF5ICE9PSAwKSB2bS51cGRhdGVET0IoKTtcblx0XHRcblx0XHQvL2lmIHRoZXJlIGlzbid0IGN1cnJlbnRseSBhIGRvYiwgZ3JhYiBmcm9tIHRoZSByb3V0ZSBwYXJhbXNcblx0XHRpZihjdXJyZW50VWlkID09ICcnIHx8IGFuZ3VsYXIuaXNVbmRlZmluZWQoY3VycmVudFVpZCkpIHtcblx0XHRcdGN1cnJlbnRVc2VyLnNldFVJRExvY2FsbHkoJHJvdXRlUGFyYW1zLnVpZCk7XG5cdFx0fVxuXG5cdFx0Ly9pZiB0aGVyZSBpcyBuZXcgZGF0YSwgc2F2ZSBpdFxuXHRcdGlmKHZtLnZpZXcuaXNEYXRhKSB7XG5cdFx0XHQkbG9nLmluZm8oJ3NhdmluZyB0aGUgbmV3IGRhdGEnKTtcblx0XHRcdGN1cnJlbnRVc2VyLnVwZGF0ZUJpb0xvY2FsbHkodm0udXNlcik7XG5cdFx0fVxuXHRcdFxuXHRcdC8vbW92ZSBvblxuXHRcdHVzZXJJbmZvU2hlcnBhLnJlZGlyZWN0VG8oJy91c2VyRXZlbnRzJywgdm0udXNlci51aWQpXG5cdH1cblxuXHRmdW5jdGlvbiBpbml0aWFsaXplKCkge1xuXHRcdC8vbG9hZCBGYXN0Q2xpY2tcblx0XHQvL0Zhc3RDbGljay5hdHRhY2goJGRvY3VtZW50LmJvZHkpO1xuXHRcdFxuXHRcdC8vbG9hZCB1c2VyRGF0YSBsb2NhbGx5IG9yIGZyb20gZGJcblx0XHRjdXJyZW50VXNlci5sb2FkQmlvKCRyb3V0ZVBhcmFtcy51aWQpXG5cdFx0LnRoZW4oZnVuY3Rpb24ob2J0YWluZWRVc2VyRGF0YSkge1xuXHRcdFx0Ly9hc3NpZ24gdXNlciB2YWx1ZXNcblx0XHRcdHZtLnVzZXIgPSBvYnRhaW5lZFVzZXJEYXRhO1xuXG5cdFx0XHQvL2J1aWxkIHRlbXBCaXJ0aGRheVxuXHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQob2J0YWluZWRVc2VyRGF0YS5kb2IpICYmIG9idGFpbmVkVXNlckRhdGEuZG9iICE9PSAnJykge1xuXHRcdFx0XHR2bS50ZW1wQmlydGhkYXkgPSB1bml4VGltZVRvRGF0ZVRpbWUob2J0YWluZWRVc2VyRGF0YS5kb2IpXG5cdFx0XHR9XG5cblx0XHR9KTtcblx0XG5cdH1cblxuXHQvL3J1biBwcm9jZXNzZXNcblx0aW5pdGlhbGl6ZSgpOyAvL3dpdGggaW50ZXJuZXQgdXNlIHRoZSBldmVudCBsaXN0ZW5lciBpbnN0ZWFkXG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuZmFjdG9yeSgnYXV0aFNlcnZpY2UnLCBhdXRoU2VydmljZSk7XG5cbmF1dGhTZXJ2aWNlLiRpbmplY3QgPSBbJyRsb2cnLCAnYmFja2VuZFNlcnZpY2VzJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gYXV0aFNlcnZpY2UoJGxvZywgYmFja2VuZFNlcnZpY2VzKSB7XG5cblx0dmFyIGFsbEF1dGhTZXJ2aWNlcyA9IHtcblx0XHRpc0xvZ2dlZEluOiBpc0xvZ2dlZEluXG5cdH07XG5cblx0ZnVuY3Rpb24gaXNMb2dnZWRJbigpIHtcblx0XHQvL2NoZWNrIHRoZSB1c2VyIGF1dGhlbnRpY2Fpb24gc3RhdGVcblx0XHR2YXIgZGJBdXRoZW50aWNhdGlvbiA9IGJhY2tlbmRTZXJ2aWNlcztcblx0XHRcblx0XHRkYkF1dGhlbnRpY2F0aW9uLmNoZWNrTG9naW5TdGF0dXMoKVxuXHRcdC50aGVuKGZ1bmN0aW9uKHN0YXR1cykge1xuXHRcdFx0cmV0dXJuIHN0YXR1cztcblx0XHR9KVxuXHRcdC5jYXRjaChmdW5jdGlvbihzdGF0dXMpIHtcblx0XHRcdHJldHVybiBzdGF0dXM7XG5cdFx0fSlcblx0fVxuXHRcblx0cmV0dXJuIGFsbEF1dGhTZXJ2aWNlcztcblxufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmZhY3RvcnkoJ2JhY2tlbmRTZXJ2aWNlcycsIGJhY2tlbmRTZXJ2aWNlcyk7XG5cbmJhY2tlbmRTZXJ2aWNlcy4kaW5qZWN0ID0gWyckbG9nJywgJyRxJywgJyR3aW5kb3cnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBiYWNrZW5kU2VydmljZXMoJGxvZywgJHEsICR3aW5kb3cpIHtcblx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHR2YXIgZmJVUkwgPSAnaHR0cHM6Ly9tZWV0dXBwbGFubmVyLmZpcmViYXNlaW8uY29tLyc7XG5cdHZhciBhbGxCYWNrZW5kU2VydmljZXMgPSB7XG5cdFx0dXRmOF90b19iNjQ6IHV0ZjhfdG9fYjY0LCBcdFx0XHRcdFx0XHQvL2xvY2FsIGZ1bmN0aW9ucyB0byBjb252ZXJ0IGRhdGVzXG5cdFx0YjY0X3RvX3V0Zjg6IGI2NF90b191dGY4LFxuXHRcdHVuaXhUaW1lVG9EYXRlVGltZTogdW5peFRpbWVUb0RhdGVUaW1lLFxuXHRcdGRhdGVUaW1lVG9Vbml4VGltZTogZGF0ZVRpbWVUb1VuaXhUaW1lLFxuXG5cdFx0TG9naW5SZWdpc3RlcmVkVXNlcjogTG9naW5SZWdpc3RlcmVkVXNlcixcdFx0Ly9hdXRoZW50aWNhaW9uXG5cdFx0Y2hlY2tMb2dpblN0YXR1czogY2hlY2tMb2dpblN0YXR1cyxcblx0XHRsb2dVc2VyT3V0OiBsb2dVc2VyT3V0LFxuXG5cdFx0ZG93bmxvYWRVc2VyRGF0YTogZG93bmxvYWRVc2VyRGF0YSxcdFx0XHRcdC8vZ2V0dGVyIG1ldGhvZHNcblx0XHRnZXRVc2VyQmlvOiBnZXRVc2VyQmlvLFxuXHRcdGdldFVzZXJFdmVudHM6IGdldFVzZXJFdmVudHMsXG5cdFx0Z2V0QUhvc3RlZEV2ZW50OiBnZXRBSG9zdGVkRXZlbnQsXG5cdFx0Z2V0QW5JbnZpdGVkRXZlbnQ6IGdldEFuSW52aXRlZEV2ZW50LFxuXG5cdFx0Y3JlYXRlTmV3VXNlcjogY3JlYXRlTmV3VXNlcixcdFx0XHRcdFx0Ly9zZXR0ZXIgTWV0aG9kc1xuXHRcdGFkZE5ld1VzZXJUb0RhdGFiYXNlOiBhZGROZXdVc2VyVG9EYXRhYmFzZSxcblx0XHRhZGROZXdVc2VyVG9SZWdVc2Vyc0xpc3Q6IGFkZE5ld1VzZXJUb1JlZ1VzZXJzTGlzdCxcblx0XHR1cGxvYWRVc2VyRGF0YTogdXBsb2FkVXNlckRhdGEsXG5cdFx0dXBsb2FkVXNlckJpbzogdXBsb2FkVXNlckJpbyxcblx0XHRjcmVhdGVIb3N0ZWRFdmVudDogY3JlYXRlSG9zdGVkRXZlbnQsXG5cdFx0ZGVsZXRlVXBkYXRlRmllbGQ6IGRlbGV0ZVVwZGF0ZUZpZWxkLFxuXG5cdFx0dGhlcmVXYXNBblVwZGF0ZUZpZWxkOiB0aGVyZVdhc0FuVXBkYXRlRmllbGRcdC8vbW9kZWwgbWFpbnRhaW5hbmNlXG5cdH07XG5cblx0ZnVuY3Rpb24gdXRmOF90b19iNjQoc3RyKSB7XG5cdFx0cmV0dXJuIGJ0b2Eoc3RyKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGI2NF90b191dGY4KHN0cikge1xuICAgIFx0cmV0dXJuIGF0b2Ioc3RyKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHVuaXhUaW1lVG9EYXRlVGltZSh1bml4VGltZSkge1xuXHRcdHJldHVybiBuZXcgRGF0ZShwYXJzZUludCh1bml4VGltZSkpO1xuXHR9XG5cblx0ZnVuY3Rpb24gZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKSB7XG5cdFx0cmV0dXJuIERhdGUucGFyc2UoZGF0ZVRpbWUpO1xuXHR9XG5cblx0ZnVuY3Rpb24gY3JlYXRlTmV3VXNlcihlbWFpbCwgcGFzc3dvcmQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGZpcmVCYXNlQWNjb3VudHMgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdFxuXHRcdC8vcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFxuXHRcdFx0ZmlyZUJhc2VBY2NvdW50cy5jcmVhdGVVc2VyKHtcblx0XHRcdFx0XG5cdFx0XHRcdGVtYWlsOiBlbWFpbCxcblx0XHRcdFx0cGFzc3dvcmQ6IHBhc3N3b3JkXG5cdFx0XHRcblx0XHRcdH0sZnVuY3Rpb24oZXJyb3IsIHVzZXJEYXRhKSB7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KCdFcnJvciBjcmVhdGluZyB1c2VyOiAnICsgZXJyb3IpO1xuXG5cdFx0XHRcdGVsc2UgcmVzb2x2ZSh1c2VyRGF0YSk7XG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gYWRkTmV3VXNlclRvRGF0YWJhc2UodWlkLCBuYW1lLCBlbWFpbCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgYXBwVXNlcnMgPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKTtcblx0XHR2YXIgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xuXG5cdFx0Ly9yZXR1cm4gYSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XG5cdFx0XHRhcHBVc2Vycy5zZXQoeyBcblx0XHRcdFx0J2Jpbyc6IHtcblx0XHRcdFx0XHQndWlkJzogdWlkLFxuXHRcdFx0XHRcdCduYW1lJzogbmFtZSxcblx0XHRcdFx0XHQnZW1haWwnOiBlbWFpbFxuXHRcdFx0XHR9LFxuXHRcdFx0XHQnZXZlbnRzJzoge1xuXHRcdFx0XHRcdCdwZW5kaW5nJzoge1xuXHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQnaG9zdGluZyc6IHtcblx0XHRcdFx0XHRcdCd1cGRhdGVkJzogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0J2F0dGVuZGluZyc6IHtcblx0XHRcdFx0XHRcdCd1cGRhdGVkJzogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0J2NvbXBsZXRlZCc6IHtcblx0XHRcdFx0XHRcdCd1cGRhdGVkJzogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdCgnRGF0YSBjb3VsZCBub3QgYmUgc2F2ZWQ6ICcgKyBlcnJvcik7XG5cdFx0XHRcdFxuXHRcdFx0XHRlbHNlIHJlc29sdmUoJ0RhdGEgc2F2ZWQgc3VjY2Vzc2Z1bGx5LicpO1xuXG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBhZGROZXdVc2VyVG9SZWdVc2Vyc0xpc3QodWlkLCBlbWFpbCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgYjY0RW1haWwgPSB1dGY4X3RvX2I2NChlbWFpbCk7XG5cdFx0dmFyIFJlZ2lzdGVyZWRVc2Vyc0xpc3QgPSBhcHAuY2hpbGQoJ1VpZHMnKS5jaGlsZChiNjRFbWFpbCk7XG5cblx0XHQvL3JldHVybiBhIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcblx0XHRcdFJlZ2lzdGVyZWRVc2Vyc0xpc3Quc2V0KHVpZCwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdChcIkRhdGEgY291bGQgbm90IGJlIHNhdmVkLiBcIiArIGVycm9yKTtcblx0XHRcdFx0ZWxzZSByZXNvbHZlKFwidWlkIGNyZWF0ZWQgc3VjZXNzZnVsbHkuXCIpO1xuXHRcdFx0fSk7XG5cblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gTG9naW5SZWdpc3RlcmVkVXNlcihlbWFpbCwgcGFzc3dvcmQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0XG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHQvL2F1dGhlbnRpY2F0ZSB0aGUgdXNlclxuXHRcdFx0YXBwLmF1dGhXaXRoUGFzc3dvcmQoe1xuXG5cdFx0XHRcdGVtYWlsOiBlbWFpbCxcblx0XHRcdFx0cGFzc3dvcmQ6IHBhc3N3b3JkXG5cblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yLCBhdXRoRGF0YSkge1xuXHRcdFx0XHRcblx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHRyZWplY3QoJ0Vycm9yIExvZ2dpbmcgSW46ICcgKyBlcnJvcik7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdMb2dnZWQgSW4gc3VjY2Vzc2Z1bGx5OiAnICsgYXV0aERhdGEudWlkKTtcblx0XHRcdFx0XHRyZXNvbHZlKGF1dGhEYXRhKTtcblx0XHRcdFx0fVxuXG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXHRcdFxuXHR9XG5cblx0ZnVuY3Rpb24gY2hlY2tMb2dpblN0YXR1cygpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cblx0XHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcblx0XHRcdGFwcC5vbkF1dGgoZnVuY3Rpb24oYXV0aERhdGEpIHtcblx0XHRcdFx0aWYgKGF1dGhEYXRhKSB7XG5cdFx0XHRcdCAgICAkbG9nLmluZm8oXCJVc2VyIFwiICsgYXV0aERhdGEudWlkICsgXCIgaXMgbG9nZ2VkIGluIHdpdGggXCIgKyBhdXRoRGF0YS5wcm92aWRlcik7XG5cdFx0XHRcdCAgICByZXNvbHZlKHRydWUpO1xuXHRcdFx0XHQgIH0gZWxzZSB7XG5cdFx0XHRcdCAgICAkbG9nLmluZm8oXCJVc2VyIGlzIGxvZ2dlZCBvdXRcIik7XG5cdFx0XHRcdCAgICByZXNvbHZlKGZhbHNlKTtcblx0XHRcdFx0ICB9XG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gbG9nVXNlck91dCgpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cblx0XHQkbG9nLmluZm8oJ2xvZ2dpbmcgdXNlciBvdXQnKTtcblx0XHRhcHAudW5hdXRoKCk7XG5cdH1cblxuXHRmdW5jdGlvbiB1cGxvYWRVc2VyRGF0YShhbGxVc2VyRGF0YSkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgdWlkID0gYWxsVXNlckRhdGEudWlkO1xuXHRcdHZhciByZW1vdGVVc2VyID0gYXBwLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCk7XG5cblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vdGhlIGFjdHVhbCBjYWxsXG5cdFx0XHRyZW1vdGVVc2VyLnVwZGF0ZShhbGxVc2VyRGF0YSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdCgnVGhlcmUgd2FzIGEgcHJvYmxlbSB1cGRhdGluZyB0aGF0IHJlY29yZDogJyArIGVycm9yKTtcblx0XHRcdFx0ZWxzZSByZXNvbHZlKCdhbGwgdXNlciBkYXRhIHVwbG9hZGVkIHN1Y2Nlc3NmdWxseScpO1xuXHRcdFx0fSk7XG5cblx0XHR9KTtcblx0XHRcblx0fVxuXG5cdGZ1bmN0aW9uIHVwbG9hZFVzZXJCaW8oY3VycmVudFVzZXJCaW8pIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIHVpZCA9IChjdXJyZW50VXNlckJpby51aWQpLnRvU3RyaW5nKCk7XG5cdFx0dmFyIHJlbW90ZVVzZXJCaW8gPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnYmlvJyk7XG5cblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9jYWxsIHRvIHRoZSBkYlxuXHRcdFx0cmVtb3RlVXNlckJpby51cGRhdGUoY3VycmVudFVzZXJCaW8sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoJ1RoZXJlIHdhcyBhIHByb2JsZW0gdXBkYXRpbmcgdGhhdCByZWNvcmQ6ICcgKyBlcnJvcik7XG5cdFx0XHRcdGVsc2UgcmVzb2x2ZSgnYWxsIHVzZXIgYmlvIGRhdGEgdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5Jyk7XG5cdFx0XHR9KVxuXG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBkb3dubG9hZFVzZXJEYXRhKCkge1xuXG5cdH1cblxuXHRmdW5jdGlvbiBnZXRVc2VyQmlvKHVpZCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgdXNlckJpbyA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdiaW8nKTtcblxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly90aGUgYWN0dWFsIGNhbGxcblx0XHRcdHVzZXJCaW8ub25jZSgndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0XHQvL3doZW4gdGhlIGNhbGwgaXMgc3VjY2Vzc2Z1bCByZXR1cm4gdGhlIGRhdGFcblx0XHRcdFx0cmVzb2x2ZShzbmFwc2hvdC52YWwoKSk7XG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHRcdH0gXG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gY3JlYXRlSG9zdGVkRXZlbnQodWlkLCBuZXdFdmVudCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgZXZlbnRJRCA9IG5ld0V2ZW50LmlkO1xuXHRcdHZhciBuZXdIb3N0ZWRFdmVudCA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgnaG9zdGluZycpLmNoaWxkKGV2ZW50SUQpO1xuXG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcblx0XHRcdC8vY2FsbCB0byBmaXJlYmFzZVxuXHRcdFx0bmV3SG9zdGVkRXZlbnQuc2V0KG5ld0V2ZW50LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3I6ICcgKyBlcnJvcik7XG5cdFx0XHRcdGVsc2UgcmVzb2x2ZSgnTmV3IGV2ZW50IHNhdmVkIHRvIERCIHN1Y2Nlc3NmdWxseScpO1xuXHRcdFx0fSlcblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0VXNlckV2ZW50cyh1aWQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIHVzZXJFdmVudHMgPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJyk7XG5cdFx0XG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL3RoZSBhY3R1YWwgY2FsbFxuXHRcdFx0dXNlckV2ZW50cy5vcmRlckJ5S2V5KCkub25jZSgndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0XHR2YXIgdXNlclByb2ZpbGUgPSBzbmFwc2hvdC52YWwoKTtcblxuXHRcdFx0XHQvL3doZW4gdGhlIGNhbGwgaXMgc3VjY2Vzc2Z1bCByZXR1cm4gdGhlIGRhdGFcblx0XHRcdFx0dmFyIGV2ZW50c1BhY2thZ2UgPSB7XG5cdFx0XHRcdFx0aG9zdGluZzogdXNlclByb2ZpbGUuaG9zdGluZyxcblx0XHRcdFx0XHRhdHRlbmRpbmc6IHVzZXJQcm9maWxlLmF0dGVuZGluZyxcblx0XHRcdFx0XHRwZW5kaW5nOiB1c2VyUHJvZmlsZS5wZW5kaW5nLFxuXHRcdFx0XHRcdGNvbXBsZXRlZDogdXNlclByb2ZpbGUuY29tcGxldGVkXG5cdFx0XHRcdH07XG5cblx0XHRcdFx0cmVzb2x2ZShldmVudHNQYWNrYWdlKTtcblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSB7XG5cdFx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHRcdFx0fSBcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRBSG9zdGVkRXZlbnQodWlkLCBldmVudElkKSB7XG5cblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIGhvc3RlZEV2ZW50ID0gYXBwLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdob3N0aW5nJykuY2hpbGQoZXZlbnRJZCk7XG5cblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vdGhlIGFjdHVhbCBjYWxsXG5cdFx0XHRob3N0ZWRFdmVudC5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHRcdHZhciBzZWxlY3RFdmVudCA9IHNuYXBzaG90LnZhbCgpO1xuXG5cdFx0XHRcdHJlc29sdmUoc2VsZWN0RXZlbnQpO1xuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdChlcnJvcik7XG5cdFx0XHR9KVxuXHRcdH0pXG5cdH1cblxuXHRmdW5jdGlvbiBnZXRBbkludml0ZWRFdmVudChob3N0SWQsIHVpZCwgZXZlbnRJZCkge31cblxuXHRmdW5jdGlvbiBkZWxldGVVcGRhdGVGaWVsZChjYXRlZ29yeSwgdWlkKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciBjYXRSZW1vdmluZ0Zyb20gPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoY2F0ZWdvcnkpLmNoaWxkKCd1cGRhdGVkJyk7XG5cblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdGNhdFJlbW92aW5nRnJvbS5zZXQobnVsbCwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdCgnVGhlcmUgd2FzIGFuIGVycm9yIGRlbGV0aW5nIHVwZGF0ZSBmaWVsZDogJyArIGVycm9yKTtcblx0XHRcdFx0ZWxzZSByZXNvbHZlKCdEZWxldGVkIHVwZGF0ZSBzdWNjZXNzZnVsbHknKTtcblx0XHRcdH0pXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIHRoZXJlV2FzQW5VcGRhdGVGaWVsZChjYXRlZ29yeSwgdWlkKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciBjYXRUb0NoZWNrID0gYXBwLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKGNhdGVnb3J5KTtcblxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly9jYWxsIHRoZSBkYlxuXHRcdFx0Y2F0VG9DaGVjay5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHRcdC8vc2F2ZSB0aGUgcmVzcG9uc2Vcblx0XHRcdFx0dmFyIGN1cnJlbnRDYXRNb2RlbCA9IHNuYXBzaG90LnZhbCgpO1xuXHRcdFx0XHQvL3Nob3cgd2hhdCB3YXMgZm91bmRcblx0XHRcdFx0Ly9sb29rIGZvciB0aGUgdXBkYXRlIGZpZWxkXG5cdFx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGN1cnJlbnRDYXRNb2RlbFsndXBkYXRlZCddKSkgcmVzb2x2ZSh0cnVlKTtcblx0XHRcdFx0ZWxzZSByZWplY3QoZmFsc2UpO1xuXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KGVycm9yKTtcblx0XHRcdH0pXG5cdFx0fSk7XG5cdH1cblxuXHQvL3JldHVybiB0aGUgb2JqZWN0XG5cdHJldHVybiBhbGxCYWNrZW5kU2VydmljZXM7XG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuZmFjdG9yeSgndHJhZmZpY1ZhbGV0JywgdHJhZmZpY1ZhbGV0KTtcblxudHJhZmZpY1ZhbGV0LiRpbmplY3QgPSBbJyRsb2cnLCAnJGxvY2F0aW9uJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gdHJhZmZpY1ZhbGV0KCRsb2csICRsb2NhdGlvbikge1xuXHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdHZhciBhbGxUcmFmZmljQ29udHJvbHMgPSB7XG5cdFx0cmVkaXJlY3RUbzogcmVkaXJlY3RUbyxcblx0XHRldmVudFJvdXRlOiBldmVudFJvdXRlXG5cdH07XG5cblx0ZnVuY3Rpb24gcmVkaXJlY3RUbyhwYXRoLCBwYXJhbTEsIHBhcmFtMiwgcGFyYW0zKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQocGFyYW0xKSkge1xuXHRcdFx0cGF0aCA9IHBhdGggKyAnLycgKyBwYXJhbTE7XG5cblx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHBhcmFtMikpIHtcblx0XHRcdFx0Ly9nbyB0byBwYXRoIHdpdGggMiBwYXJhbXNcblx0XHRcdFx0cGF0aCA9IHBhdGggKyAnLycgKyBwYXJhbTI7XG5cblx0XHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQocGFyYW0zKSkge1xuXHRcdFx0XHRcdHBhdGggPSBwYXRoICsgJy8nICsgcGFyYW0zO1xuXG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyBub3cgdG8gJyArIHBhdGgpO1xuXHRcdFx0XHRcdCRsb2NhdGlvbi5wYXRoKHBhdGgpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyBub3cgdG8gJyArIHBhdGgpO1xuXHRcdFx0XHQkbG9jYXRpb24ucGF0aChwYXRoKTtcblx0XHRcdH1cblx0XHRcdC8vZ28gd2l0aCAxIHBhcmFtXG5cdFx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIG5vdyB0byAnICsgcGF0aCk7XG5cdFx0XHQkbG9jYXRpb24ucGF0aChwYXRoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly9qdXN0IGdvIHRvIHBhdGhcblx0XHRcdCRsb2cuaW5mbygncmVkaXJlY3Rpbmcgbm93IHRvICcgKyBwYXRoKTtcblx0XHRcdCRsb2NhdGlvbi5wYXRoKHBhdGgpO1xuXHRcdH1cblxuXHR9XG5cblx0ZnVuY3Rpb24gZXZlbnRSb3V0ZShldmVudElkLCBob3N0SWQsIHVzZXJJZCwgc2VjdGlvbikge1xuXHRcdCRsb2cuaW5mbygnVHJhZmZpYyB2YWxldCBhY2Nlc3NlZCcpO1xuXHRcdCRsb2cuaW5mbygnZXZlbnRJZDogJyArIGV2ZW50SWQpO1xuXHRcdCRsb2cuaW5mbygnaG9zdElkOiAnICsgaG9zdElkKTtcblx0XHQkbG9nLmluZm8oJ3VzZXJJZDogJyArIHVzZXJJZCk7XG5cblx0XHQvL2lmIHRoZXJlIGlzbid0IGEgc2VjdGlvbiBzZXQgdG8gZGVmYXVsdFxuXHRcdGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQoc2VjdGlvbikpIHNlY3Rpb24gPSAxO1xuXG5cdFx0Ly9pZiB0aGUgaG9zdElkIGFuZCB1c2VySWQgbWF0Y2gsIGxhdW5jaCBob3N0IHZpZXdcblx0XHRpZihob3N0SWQgPT09IHVzZXJJZCkgeyBcblx0XHRcdHZhciBwYXRoID0gJy9ldmVudC9ob3N0LycgKyBldmVudElkICsgJy8nICsgdXNlcklkICsgJy8nKyBzZWN0aW9uO1xuXHRcdFx0JGxvZy5pbmZvKHBhdGgpO1xuXHRcdFx0Ly9yZWRpcmVjdFxuXHRcdFx0JGxvY2F0aW9uLnBhdGgocGF0aCk7XG5cdFx0fVxuXHRcdC8vaWYgdGhlIGhvc3RJZCBhbmQgdXNlcklkIERPTidUIG1hdGNoLCBsYXVuY2ggZ3Vlc3Qgdmlld1xuXHRcdGVsc2Uge1xuXHRcdFx0dmFyIHBhdGggPSAnL2V2ZW50L2d1ZXN0LycgKyBldmVudElkICsgJy8nICsgdXNlcklkICsgJy8nICsgaG9zdElkO1xuXHRcdFx0JGxvZy5pbmZvKHBhdGgpO1xuXHRcdFx0Ly9yZWRpcmVjdFxuXHRcdFx0JGxvY2F0aW9uLnBhdGgocGF0aCk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGFsbFRyYWZmaWNDb250cm9scztcbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5mYWN0b3J5KCd1c2VyRGF0YScsIHVzZXJEYXRhKTtcblxudXNlckRhdGEuJGluamVjdCA9IFsnJGxvZycsICckcScsICdiYWNrZW5kU2VydmljZXMnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiB1c2VyRGF0YSgkbG9nLCAkcSwgYmFja2VuZFNlcnZpY2VzKSB7XG5cdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0dmFyIGN1cnJlbnRVc2VyID0ge1xuXHRcdGJpbzogeyBcblx0XHRcdHVpZDogJycsXG5cdFx0XHRuYW1lOiAnJyxcblx0XHRcdGVtYWlsOiAnJyxcblx0XHRcdGNvbXBhbnk6ICcnLFxuXHRcdFx0dGl0bGU6ICcnLFxuXHRcdFx0ZG9iOiAwXG5cdFx0fSxcblx0XHRldmVudHM6IHtcblx0XHRcdGhvc3Rpbmc6IHt9LFxuXHRcdFx0cGVuZGluZzoge30sXG5cdFx0XHRhdHRlbmRpbmc6IHt9LFxuXHRcdFx0Y29tcGxldGVkOiB7fVxuXHRcdH1cblx0fTtcblxuXHR2YXIgYWxsVXNlckRhdGEgPSB7XG5cdFx0YmlvUHJpbWFyaWVzQXJlQ29tcGxldGVMb2NhbGx5OiBiaW9QcmltYXJpZXNBcmVDb21wbGV0ZUxvY2FsbHksXHRcdC8vbW9kYWwgYW5hbHlzaXNcblx0XHRldmVudEV4aXN0c0xvY2FsbHk6IGV2ZW50RXhpc3RzTG9jYWxseSxcblx0XHR0aGlzSXNUaGVIb3N0RW1haWw6IHRoaXNJc1RoZUhvc3RFbWFpbCxcblxuXHRcdGNsZWFuRXZlbnRzOiBjbGVhbkV2ZW50cyxcdFx0XHRcdFx0XHRcdC8vbW9kZWwgbWFpbnRhaW5hbmNlXG5cblx0XHRnZXRVSURMb2NhbGx5OiBnZXRVSURMb2NhbGx5LFx0XHRcdFx0XHRcdC8vZ2V0dGVyIE1ldGhvZHNcblx0XHRnZXROYW1lTG9jYWxseTogZ2V0TmFtZUxvY2FsbHksXG5cdFx0Z2V0RW1haWxMb2NhbGx5OiBnZXRFbWFpbExvY2FsbHksXG5cdFx0Z2V0Q29tcGFueUxvY2FsbHk6IGdldENvbXBhbnlMb2NhbGx5LFxuXHRcdGdldFRpdGxlTG9jYWxseTogZ2V0VGl0bGVMb2NhbGx5LFxuXHRcdGdldERPQkxvY2FsbHk6IGdldERPQkxvY2FsbHksXG5cdFx0Z2V0RnVsbEJpb0xvY2FsbHk6IGdldEZ1bGxCaW9Mb2NhbGx5LFxuXHRcdGdldE9uZVVzZXJFdmVudExvY2FsbHk6IGdldE9uZVVzZXJFdmVudExvY2FsbHksXG5cdFx0Z2V0VXNlckV2ZW50c0xvY2FsbHk6IGdldFVzZXJFdmVudHNMb2NhbGx5LFxuXHRcdGdldEFsbFVzZXJFdmVudHNMb2NhbGx5OiBnZXRBbGxVc2VyRXZlbnRzTG9jYWxseSxcblxuXHRcdHNldFVJRExvY2FsbHk6IHNldFVJRExvY2FsbHksXHRcdFx0XHRcdFx0Ly9zZXR0ZXIgTWV0aG9kc1xuXHRcdHNldE5hbWVMb2NhbGx5OiBzZXROYW1lTG9jYWxseSxcblx0XHRzZXRFbWFpbExvY2FsbHk6IHNldEVtYWlsTG9jYWxseSxcblx0XHRzZXRDb21wYW55TG9jYWxseTogc2V0Q29tcGFueUxvY2FsbHksXG5cdFx0c2V0VGl0bGVMb2NhbGx5OiBzZXRUaXRsZUxvY2FsbHksXG5cdFx0c2V0RE9CTG9jYWxseTogc2V0RE9CTG9jYWxseSxcblx0XHRzZXRQcmltYXJpZXNMb2NhbGx5OiBzZXRQcmltYXJpZXNMb2NhbGx5LFxuXHRcdHVwZGF0ZVVzZXJFdmVudHNMb2NhbGx5OiB1cGRhdGVVc2VyRXZlbnRzTG9jYWxseSxcblx0XHR1cGRhdGVBbGxVc2VyRXZlbnRzTG9jYWxseTogdXBkYXRlQWxsVXNlckV2ZW50c0xvY2FsbHksXG5cdFx0dXBkYXRlQmlvTG9jYWxseTogdXBkYXRlQmlvTG9jYWxseSxcblxuXHRcdHJlbW92ZVVzZXJFdmVudHNMb2NhbGx5OiByZW1vdmVVc2VyRXZlbnRzTG9jYWxseSwgXHQvL3JlbW92ZSBkYXRhXG5cdFx0XG5cdFx0Z2V0RnVsbFJlbW90ZURCZm9yTG9jYWw6IGdldEZ1bGxSZW1vdGVEQmZvckxvY2FsLFx0Ly9sb2NhbC1yZW1vdGUgaW50ZXJhY2lvbnNcblx0XHRnZXRSZW1vdGVCaW9Gb3JMb2NhbDogZ2V0UmVtb3RlQmlvRm9yTG9jYWwsXHRcdFx0XG5cdFx0Z2V0UmVtb3RlRXZlbnRzRm9yTG9jYWw6IGdldFJlbW90ZUV2ZW50c0ZvckxvY2FsLFxuXHRcdGdldE9uZVJlbW90ZUV2ZW50Rm9yTG9jYWw6IGdldE9uZVJlbW90ZUV2ZW50Rm9yTG9jYWwsXG5cdFx0c2V0RnVsbFJlbW90ZURCZnJvbUxvY2FsOiBzZXRGdWxsUmVtb3RlREJmcm9tTG9jYWwsXG5cdFx0c2V0UmVtb3RlQmlvRnJvbUxvY2FsOiBzZXRSZW1vdGVCaW9Gcm9tTG9jYWwsXG5cdFx0c2V0UmVtb3RlRXZlbnRzRnJvbUxvY2FsOiBzZXRSZW1vdGVFdmVudHNGcm9tTG9jYWwsXG5cdFx0Y2xlYW5EQkV2ZW50c0NhdGVnb3J5OiBjbGVhbkRCRXZlbnRzQ2F0ZWdvcnksXG5cblx0XHRsb2FkQmlvOiBsb2FkQmlvLFx0XHRcdFx0XHRcdFx0XHRcdC8vZXh0ZXJuYWwgbWV0aG9kc1xuXHRcdGxvYWRFdmVudHNQcm9ncmVzc2l2ZWx5OiBsb2FkRXZlbnRzUHJvZ3Jlc3NpdmVseSxcblx0XHRsb2FkQW5FdmVudFByb2dyZXNzaXZlbHk6IGxvYWRBbkV2ZW50UHJvZ3Jlc3NpdmVseSxcblx0XHRjcmVhdGVOZXdFdmVudDogY3JlYXRlTmV3RXZlbnRcblx0fVxuXG5cdC8vYW5hbHlzaXMgbWV0aG9kc1xuXHRmdW5jdGlvbiBiaW9QcmltYXJpZXNBcmVDb21wbGV0ZUxvY2FsbHkoKSB7XG5cdFx0aWYoIGN1cnJlbnRVc2VyLmJpby51aWQgIT09ICcnICYmXG5cdFx0XHRjdXJyZW50VXNlci5iaW8ubmFtZSAhPT0gJycgJiZcblx0XHRcdGN1cnJlbnRVc2VyLmJpby5lbWFpbCAhPT0gJydcblx0XHRcdClcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdGVsc2UgcmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0ZnVuY3Rpb24gZXZlbnRFeGlzdHNMb2NhbGx5KHR5cGUsIGV2ZW50SWQpIHtcblx0XHQkbG9nLmluZm8oJ2NoZWNraW5nIGlmIHRoZSBldmVudCBleGl0cycpO1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXVtldmVudElkXSkpIHJldHVybiB0cnVlO1xuXHRcdGVsc2UgcmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0ZnVuY3Rpb24gdGhpc0lzVGhlSG9zdEVtYWlsKGVtYWlsLCB1aWQsIGV2ZW50SWQpIHtcblx0XHQkbG9nLmluZm8oJ2N1cnJlbnQgdXNlciBiaW8gaXM6Jyk7XG5cdFx0JGxvZy5pbmZvKGN1cnJlbnRVc2VyLmJpbyk7XG5cdFx0Ly9jaGVjayBpZiBhIGJpbyBpcyBsb2FkZWRcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChjdXJyZW50VXNlci5iaW8uZW1haWwpKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2VtYWlsIGlzIGRlZmluZWQnKTtcblx0XHRcdGlmKGN1cnJlbnRVc2VyLmJpby5lbWFpbCAhPSAnJykge1xuXHRcdFx0XHQvL2NoZWNrIGZvciBhIG1hdGNoXG5cdFx0XHRcdGlmKGVtYWlsID09IGN1cnJlbnRVc2VyLmJpby5lbWFpbCkge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnZW1haWwgbWF0Y2hlcycpO1xuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnZW1haWwgZG9lcyBub3QgbWF0Y2gnKTtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblxuXHRcdFx0fSBcblx0XHRcdFxuXHRcdH0gXG5cdFx0XG5cdFx0Ly9pZiB0aGF0IGRpZG4ndCB3b3JrIGNoZWNrIHRoZSBjdXJyZW50IGV2ZW50XG5cdFx0JGxvZy5pbmZvKCdjdXJyZW50IGV2ZW50IGlzOicpO1xuXHRcdCRsb2cuaW5mbyhjdXJyZW50VXNlci5ldmVudHMuaG9zdGluZ1tldmVudElkXSk7XG5cdFx0aWYoY3VycmVudFVzZXIuZXZlbnRzLmhvc3RpbmdbZXZlbnRJZF0uaG9zdC5lbWFpbCA9PSBlbWFpbCkge1xuXHRcdFx0JGxvZy5pbmZvKCdldmVudCBob3N0IGVtYWlsIG1hdGNoZXMnKTtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkbG9nLmluZm8oJ2V2ZW50IGhvc3QgZW1haWwgRE9FU05cXCdUIG5vdCBtYXRjaCcpO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRcblx0fVxuXG5cdC8vbW9kZWwgbWFpbnRhaW5hbmNlXG5cdGZ1bmN0aW9uIGNsZWFuRXZlbnRzKHR5cGUpIHtcblx0XHQvL2l0ZXJhdGUgdGhyb3VnaCBvYmplY3RzIGluIG9iamVjdFxuXHRcdE9iamVjdC5rZXlzKGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXSkuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcblx0XHRcdC8vaWYgYW55IGFyZSBub24tb2JqZWN0cywgZGVsZXRlIHRoZW1cblx0XHRcdGlmKCFhbmd1bGFyLmlzT2JqZWN0KGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXVtrZXldKSkge1xuXHRcdFx0XHRkZWxldGUgY3VycmVudFVzZXIuZXZlbnRzW3R5cGVdW2tleV07XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHQvL2dldHRlciBtZXRob2RzXG5cdGZ1bmN0aW9uIGdldFVJRExvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmJpby51aWQ7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXROYW1lTG9jYWxseSgpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuYmlvLm5hbWU7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRFbWFpbExvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmJpby5lbWFpbDtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldENvbXBhbnlMb2NhbGx5KCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5iaW8uY29tcGFueTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldFRpdGxlTG9jYWxseSgpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuYmlvLnRpdGxlO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXRET0JMb2NhbGx5KCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5iaW8uZG9iO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0RnVsbEJpb0xvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHVpZDogY3VycmVudFVzZXIuYmlvLnVpZCxcblx0XHRcdG5hbWU6IGN1cnJlbnRVc2VyLmJpby5uYW1lLFxuXHRcdFx0ZW1haWw6IGN1cnJlbnRVc2VyLmJpby5lbWFpbCxcblx0XHRcdGNvbXBhbnk6IGN1cnJlbnRVc2VyLmJpby5jb21wYW55LFxuXHRcdFx0dGl0bGU6IGN1cnJlbnRVc2VyLmJpby50aXRsZSxcblx0XHRcdGRvYjogY3VycmVudFVzZXIuYmlvLmRvYlxuXHRcdH07XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRPbmVVc2VyRXZlbnRMb2NhbGx5KHR5cGUsIGV2ZW50SWQpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuZXZlbnRzW3R5cGVdW2V2ZW50SWRdO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0VXNlckV2ZW50c0xvY2FsbHkodHlwZSkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5ldmVudHNbdHlwZV07XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRBbGxVc2VyRXZlbnRzTG9jYWxseSgpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuZXZlbnRzO1xuXHR9XG5cblx0Ly9zZXR0ZXIgbWV0aG9kc1xuXHRmdW5jdGlvbiBzZXRVSURMb2NhbGx5KHVpZCkge1xuXHRcdGN1cnJlbnRVc2VyLmJpby51aWQgPSB1aWQ7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXROYW1lTG9jYWxseShuYW1lKSB7XG5cdFx0Y3VycmVudFVzZXIuYmlvLm5hbWUgPSBuYW1lO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0RW1haWxMb2NhbGx5KGVtYWlsKSB7XG5cdFx0Y3VycmVudFVzZXIuYmlvLmVtYWlsID0gZW1haWw7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXRDb21wYW55TG9jYWxseShjb21wYW55KSB7XG5cdFx0Y3VycmVudFVzZXIuYmlvLmNvbXBhbnkgPSBjb21wYW55O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzZXRUaXRsZUxvY2FsbHkodGl0bGUpIHtcblx0XHRjdXJyZW50VXNlci5iaW8udGl0bGUgPSB0aXRsZTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldERPQkxvY2FsbHkoZG9iKSB7XG5cdFx0Y3VycmVudFVzZXIuYmlvLmRvYiA9IGRvYjtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldFByaW1hcmllc0xvY2FsbHkoZW1haWwsIG5hbWUsIHVpZCkge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGVtYWlsKSkgc2V0RW1haWxMb2NhbGx5KGVtYWlsKTtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChuYW1lKSkgZ2V0TmFtZUxvY2FsbHkobmFtZSk7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodWlkKSkgc2V0VUlETG9jYWxseSh1aWQpO1xuXHR9XG5cblx0ZnVuY3Rpb24gdXBkYXRlVXNlckV2ZW50c0xvY2FsbHkodHlwZSwgZXZlbnQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGV2ZW50SUQgPSBldmVudC5pZDtcblxuXHRcdC8vY2hlY2sgaWYgdGhlIG1vZGVsIG5lZWRzIHRvIGJlIGNsZWFuZWRcblx0XHRjbGVhbkV2ZW50cyh0eXBlKTtcblx0XHQvL3RoZW4gbG9hZCB0aGUgbmV3IGV2ZW50XG5cdFx0Y3VycmVudFVzZXIuZXZlbnRzW3R5cGVdW2V2ZW50SURdID0gZXZlbnQ7XG5cdH1cblxuXHRmdW5jdGlvbiB1cGRhdGVBbGxVc2VyRXZlbnRzTG9jYWxseShhbGxVc2VyRXZlbnRzKSB7XG5cdFx0Y3VycmVudFVzZXIuZXZlbnRzID0gYWxsVXNlckV2ZW50cztcblx0fVxuXG5cdGZ1bmN0aW9uIHVwZGF0ZUJpb0xvY2FsbHkodXNlckJpbykge1xuXHRcdC8vdXBkYXRlIGxvY2FsIHZhbHVlc1xuXHRcdHNldE5hbWVMb2NhbGx5KHVzZXJCaW8ubmFtZSk7XG5cdFx0c2V0RW1haWxMb2NhbGx5KHVzZXJCaW8uZW1haWwpO1xuXHRcdHNldENvbXBhbnlMb2NhbGx5KHVzZXJCaW8uY29tcGFueSk7XG5cdFx0c2V0VGl0bGVMb2NhbGx5KHVzZXJCaW8udGl0bGUpO1xuXHRcdHNldERPQkxvY2FsbHkodXNlckJpby5kb2IpO1xuXHRcdC8vc2F2ZSB0byBkYlxuXHRcdHNldFJlbW90ZUJpb0Zyb21Mb2NhbCgpO1xuXHR9XG5cblx0Ly9kZWxldGUgTWV0aG9kc1xuXHRmdW5jdGlvbiByZW1vdmVVc2VyRXZlbnRzTG9jYWxseSh0eXBlLCBldmVudCkge1xuXHRcdC8vZG9lcyB0aGlzIHdvcms/XG5cdFx0ZGVsZXRlIGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXVtldmVudC5pZF07XG5cdH1cblxuXHQvL3JlbW90ZS1sb2NhbCBpbnRlcmFjdGlvbiBNZXRob2RzXG5cdGZ1bmN0aW9uIGdldEZ1bGxSZW1vdGVEQmZvckxvY2FsKCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0ZGIuZG93bmxvYWRVc2VyRGF0YSgpXG5cdFx0LnRoZW4oZnVuY3Rpb24ocmVtb3RlVXNlckRhdGEpIHtcblx0XHRcdGN1cnJlbnRVc2VyID0gcmVtb3RlVXNlckRhdGE7XG5cdFx0fSlcblx0fVxuXG5cdGZ1bmN0aW9uIGdldFJlbW90ZUJpb0ZvckxvY2FsKHVpZCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXHRcdFx0XHRcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL2dvIG91dCB0byB0aGUgZGIgYmVmb3JlIHJlc29sdmluZ1xuXHRcdFx0ZGIuZ2V0VXNlckJpbyh1aWQpXG5cdFx0XHQudGhlbihmdW5jdGlvbih1c2VyQmlvKSB7XG5cblx0XHRcdFx0cmVzb2x2ZSh1c2VyQmlvKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0cmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3IgcmVhZGluZyB0aGUgdXNlciBiaW86ICcgKyBlcnJvcik7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXHRcdFxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0UmVtb3RlRXZlbnRzRm9yTG9jYWwoKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cdFx0XHRcdFxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9nbyBvdXQgdG8gdGhlIGRiIGJlZm9yZSByZXNvbHZpbmdcblx0XHRcdGRiLmdldFVzZXJFdmVudHMoZ2V0VUlETG9jYWxseSgpKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24ob2J0YWluZWRVc2VyRXZlbnRzKSB7XG5cblx0XHRcdFx0Ly9zYXZlIHRoZSByZXN1bHRzIHRvIHRoZSBsb2NhbCBkYXRhYnNlXG5cdFx0XHRcdE9iamVjdC5rZXlzKG9idGFpbmVkVXNlckV2ZW50cykuZm9yRWFjaChmdW5jdGlvbihldmVudFR5cGUpIHtcblx0XHRcdFx0XHQvL3dpdGhpbiBlYWNoIGV2ZW50IHR5cGUgaXRlcmF0ZSB0aHJvdWdoIHRoZSBhY3R1YWwgZXZlbnRzXG5cdFx0XHRcdFx0T2JqZWN0LmtleXMob2J0YWluZWRVc2VyRXZlbnRzW2V2ZW50VHlwZV0pLmZvckVhY2goZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRcdFx0XHRcdC8vb25jZSB3ZSBzZWUgdGhlIGV2ZW50cywgc2F2ZSB0aGVtIHRvIHRoZSBsb2NhbCBtb2RlbFxuXG5cdFx0XHRcdFx0XHR1cGRhdGVVc2VyRXZlbnRzTG9jYWxseShldmVudFR5cGUsIG9idGFpbmVkVXNlckV2ZW50c1tldmVudFR5cGVdW2V2ZW50XSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly9yZXR1cm4gdGhlIHJlc3VsdHMgdG8gdGhlIHJlcXVlc3Rpbmcgb2JqZWN0XG5cdFx0XHRcdHJlc29sdmUob2J0YWluZWRVc2VyRXZlbnRzKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0cmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3IgcmVhZGluZyB0aGUgdXNlciBldmVudHM6ICcgKyBlcnJvcik7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0T25lUmVtb3RlRXZlbnRGb3JMb2NhbChldmVudElkKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcblx0XHRcdC8vZ29pbmcgdG8gYmFja2VuZCBzZXJ2aWNlc1xuXHRcdFx0ZGIuZ2V0QUhvc3RlZEV2ZW50KGdldFVJRExvY2FsbHkoKSwgZXZlbnRJZClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKG9idGFpbmVkRXZlbnQpIHtcblxuXHRcdFx0XHQvL3NhdmUgdGhlIHJlc3VsdCB0byB0aGUgbG9jYWwgbW9kZWxcblx0XHRcdFx0JGxvZy5pbmZvKG9idGFpbmVkRXZlbnQpO1xuXHRcdFx0XHQvL3JldHVybiB0aGUgcmVzdWx0IHRvIHRoZSByZXF1ZXN0aW5nIG9iamVjdFxuXHRcdFx0XHRyZXNvbHZlKG9idGFpbmVkRXZlbnQpO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRyZWplY3QoJ1RoZXJlIHdhcyBhbiBlcnJvciByZWFkaW5nIHRoZSB1c2VyIGV2ZW50OiAnICsgZXJyb3IpO1xuXHRcdFx0fSlcblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldEZ1bGxSZW1vdGVEQmZyb21Mb2NhbCgpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdGRiLnVwbG9hZFVzZXJEYXRhKGN1cnJlbnRVc2VyKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldFJlbW90ZUJpb0Zyb21Mb2NhbCgpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdGRiLnVwbG9hZFVzZXJCaW8oY3VycmVudFVzZXIuYmlvKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldFJlbW90ZUV2ZW50c0Zyb21Mb2NhbCgpIHt9XG5cblx0ZnVuY3Rpb24gY2xlYW5EQkV2ZW50c0NhdGVnb3J5KGNhdGVnb3J5KSB7XG5cdFx0Ly9kZWNsYXIgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0Ly9yZW1vdmUgJ3VwZGF0ZWQnIG9iamVjdCBpZiBuZWVkIGJlXG5cdFx0Ly9kYiBjYWxsIHNvIHJldHVybiBhIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL2NoZWNrIGZvciBvYmplY3Rcblx0XHRcdGRiLnRoZXJlV2FzQW5VcGRhdGVGaWVsZChjYXRlZ29yeSwgZ2V0VUlETG9jYWxseSgpKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24oYWZmaXJtYXRpdmVSZXNwb25zZSkge1xuXHRcdFx0XHQvL2lmIHRoZXJlIHdhcyBhbiB1cGRhdGUgZmllbGQsIGRlbGV0ZSBpdFxuXHRcdFx0XHRkYi5kZWxldGVVcGRhdGVGaWVsZChjYXRlZ29yeSwgZ2V0VUlETG9jYWxseSgpKVxuXHRcdFx0XHQudGhlbihmdW5jdGlvbihhZmZpcm1hdGl2ZVJlc3BvbnNlKSB7ICRsb2cuaW5mbyhhZmZpcm1hdGl2ZVJlc3BvbnNlKTsgfSApXG5cdFx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvclJlc3BvbnNlKSB7ICRsb2cuaW5mbyhlcnJvclJlc3BvbnNlKTsgfSApXG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yUmVzcG9uc2UpIHtcblx0XHRcdFx0JGxvZy5pbmZvKGVycm9yUmVzcG9uc2UpXG5cdFx0XHR9KVxuXG5cdFx0fSk7XG5cdFx0Ly9pZiBpdCBpcyB0aGVyZSwgcmVtb3ZlIGl0XG5cdH1cblxuXHRmdW5jdGlvbiBsb2FkQmlvKHVpZCkge1xuXG5cdFx0Ly9taWdodCBuZWVkIHRvIGdvIG91dCB0byB0aGUgZGIgc28gcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9jaGVjayBmb3IgYmlvIGxvY2FsbHkgZmlyc3Rcblx0XHRcdGlmKGJpb1ByaW1hcmllc0FyZUNvbXBsZXRlTG9jYWxseSgpKSB7XG5cdFx0XHRcdFxuXHRcdFx0XHQvL3Bhc3MgaXQgYmFjayBhcyBzdWNjZXNzXG5cdFx0XHRcdHJlc29sdmUoZ2V0RnVsbEJpb0xvY2FsbHkoKSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2lmIHRoZXkncmUgbm90IGNvbXBsZXRlIGxvY2FsbHksIGNoZWNrIHRoZSBzZXJ2ZXJcblx0XHRcdFx0Z2V0UmVtb3RlQmlvRm9yTG9jYWwodWlkKVxuXHRcdFx0XHQudGhlbihmdW5jdGlvbihiaW9Gcm9tUmVtb3RlREIpIHtcblx0XHRcdFx0XHRyZXNvbHZlKGJpb0Zyb21SZW1vdGVEQik7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHRcdH0pXG5cdFx0XHR9XG5cblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gbG9hZEFuRXZlbnRQcm9ncmVzc2l2ZWx5KHVpZCwgZXZlbnRJZCkge1xuXHRcdC8vdXBkYXRlIHVpZCBpZiBuZWVkIGJlXG5cdFx0c2V0VUlETG9jYWxseSh1aWQpO1xuXG5cdFx0Ly9nb2luZyBvdXQgdGhlIHRoZSBkYiBzbyByZXR1cm4gYSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHQvL3JlYWNoIG91dCB0byBkYlxuXHRcdFx0Z2V0T25lUmVtb3RlRXZlbnRGb3JMb2NhbChldmVudElkKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24ob2J0YWluZWRVc2VyRXZlbnQpIHtcblx0XHRcdFx0Ly93aGVuIHRoZSBkYiByZXN1bHRzIGNvbWUgYmFjaywgcmV0dXJuIGl0XG5cdFx0XHRcdHJlc29sdmUob2J0YWluZWRVc2VyRXZlbnQpXG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKClcblxuXHRcdFx0Ly9maXJzdCByZXR1cm4gd2hhdGV2ZXIgZXZlbnQgaW5mbyBpcyBzdG9yZWQgbG9jYWxseVxuXHRcdFx0Ly9jaGVjayBpZiB0aGUgZXZlbnQgaXMgYXZhaWxhYmxlIGxvY2FsbHlcblx0XHRcdGlmKGV2ZW50RXhpc3RzTG9jYWxseSgnaG9zdGluZycsIGV2ZW50SWQpKSByZXNvbHZlKGdldE9uZVVzZXJFdmVudExvY2FsbHkoJ2hvc3RpbmcnLCBldmVudElkKSk7XG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGxvYWRFdmVudHNQcm9ncmVzc2l2ZWx5KHVpZCkge1xuXHRcdHZhciBldmVudFR5cGVzID0gWydhdHRlbmRpbmcnLCAncGVuZGluZycsICdob3N0aW5nJywgJ2NvbXBsZXRlZCddO1xuXHRcdHZhciBhbGxFdmVudHMgPSB7fTtcblxuXHRcdC8vd2lsbCBnbyBvdXQgdG8gdGhlIGRiIHNvIHJldHVybiBhIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHRcdGdldFJlbW90ZUV2ZW50c0ZvckxvY2FsKClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKG9idGFpbmVkVXNlckV2ZW50cykge1xuXHRcdFx0XHQvL3doZW4gdGhlIGRiIHJlc3VsdHMgY29tZSBiYWNrLCByZXR1cm4gdGhvc2Vcblx0XHRcdFx0cmVzb2x2ZShvYnRhaW5lZFVzZXJFdmVudHMpO1xuXHRcdFx0fSlcblxuXHRcdFx0Ly9idWlsZCB0aGUgbG9jYWwgbW9kZWxcblx0XHRcdGFsbEV2ZW50cyA9IGdldFVzZXJFdmVudHNMb2NhbGx5KHR5cGUpO1xuXG5cdFx0XHQvL2ZpcnN0IHJldHVybiB3aGF0ZXZlciBldmVudCBpbmZvIGlzIHN0b3JlZCBsb2NhbGx5XG5cdFx0XHRyZXNvbHZlKGFsbEV2ZW50cyk7XG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGNyZWF0ZU5ld0V2ZW50KGV2ZW50SUQpIHtcblx0XHQvL2RlY2xhciBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cdFx0dmFyIG5ld0V2ZW50ID0ge307XG5cblx0XHQvL2ZpcnN0IGNyZWF0ZSB0aGUgb2JqZWN0XG5cdFx0bmV3RXZlbnQgPSB7XG5cdFx0XHRpZDogZXZlbnRJRCxcblx0XHRcdG5hbWU6ICcnLFxuXHRcdFx0dHlwZTogJycsXG5cdFx0XHRob3N0OiB7XG5cdFx0XHRcdG5hbWU6IGN1cnJlbnRVc2VyLmJpby5uYW1lLFxuXHRcdFx0XHR1aWQ6IGN1cnJlbnRVc2VyLmJpby51aWQsXG5cdFx0XHRcdGVtYWlsOiBjdXJyZW50VXNlci5iaW8uZW1haWxcblx0XHRcdH0sXG5cdFx0XHRtZXNzYWdlOiAnJyxcblx0XHRcdGV2ZW50VGltZXM6IHtcblx0XHRcdFx0c3RhcnQ6IDAsXG5cdFx0XHRcdGVuZDogMFxuXHRcdFx0fSxcblx0XHRcdGFkZHJlc3M6IHtcblx0XHRcdFx0c3RyZWV0MDE6ICcnLFxuXHRcdFx0XHRzdHJlZXQwMjogJycsXG5cdFx0XHRcdHN0cmVldDAzOiAnJyxcblx0XHRcdFx0Y2l0eTogJycsXG5cdFx0XHRcdHN0YXRlOiAnJyxcblx0XHRcdFx0emlwOiAwXG5cdFx0XHR9LFxuXHRcdFx0Z3Vlc3RMaXN0OiB7fVxuXHRcdH07XG5cblx0XHQvL3NhdmUgaXQgbG9jYWxseVxuXHRcdHVwZGF0ZVVzZXJFdmVudHNMb2NhbGx5KCdob3N0aW5nJywgbmV3RXZlbnQpO1xuXG5cdFx0Ly90aGVuIGNyZWF0ZSBpdCBvbiB0aGUgc2VydmVyXG5cdFx0Ly93aWxsIGdvIG91dCB0byB0aGUgZGIgc28gcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFxuXHRcdFx0Ly9tYW5hZ2UgdGhlIHByb21pc2UgcmVzcG9uc2VzXG5cdFx0XHRkYi5jcmVhdGVIb3N0ZWRFdmVudChnZXRVSURMb2NhbGx5KCksIG5ld0V2ZW50KVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24obWVzc2FnZSkge1xuXHRcdFx0XHRyZXNvbHZlKG1lc3NhZ2UpO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0fSlcblxuXHRcdH0pO1xuXG5cdH1cblx0XG5cdHJldHVybiBhbGxVc2VyRGF0YTtcbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5mYWN0b3J5KCd2YWxpZGF0aW9uJywgdmFsaWRhdGlvbik7XG5cbnZhbGlkYXRpb24uJGluamVjdCA9IFsnJGxvZyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHZhbGlkYXRpb24oJGxvZykge1xuXHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdHZhciBtaW5pbXVtTmFtZUxlbmd0aCA9IDM7XG5cdHZhciBtaW5pbXVtUGFzc0xlbmd0aCA9IDE2O1xuXHR2YXIgbWF4aW11bVBhc3NMZW5ndGggPSAxMDA7XG5cblx0dmFyIGFsbFZhbGlkYXRpb25zID0ge1xuXHRcdHJlcXVpcmVkOiByZXF1aXJlZCxcblx0XHRtaW5OYW1lTGVuZ3RoOiBtaW5OYW1lTGVuZ3RoLFxuXHRcdG1pblBhc3NMZW5ndGg6IG1pblBhc3NMZW5ndGgsXG5cdFx0bWF4UGFzc0xlbmd0aDogbWF4UGFzc0xlbmd0aCxcblx0XHRhdExlYXN0T25lU3ltYm9sOiBhdExlYXN0T25lU3ltYm9sLFxuXHRcdGF0TGVhc3RPbmVOdW1iZXI6IGF0TGVhc3RPbmVOdW1iZXIsXG5cdFx0YXRMZWFzdE9uZUxvd2VyY2FzZTogYXRMZWFzdE9uZUxvd2VyY2FzZSxcblx0XHRhdExlYXN0T25lVXBwZXJjYXNlOiBhdExlYXN0T25lVXBwZXJjYXNlLFxuXHRcdGlsbGVnYWxDaGFyYWN0ZXI6IGlsbGVnYWxDaGFyYWN0ZXIsXG5cdFx0ZW1haWw6IGVtYWlsLFxuXHRcdGRhdGVPZkJpcnRoOiBkYXRlT2ZCaXJ0aFxuXHR9O1xuXG5cdGZ1bmN0aW9uIHJlcXVpcmVkKHZhbHVlKSB7XG5cdFx0aWYoYW5ndWxhci5pc1VuZGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdHJldHVybiAnVGhpcyBpcyBhIHJlcXVpcmVkIGZpZWxkJztcblx0XHR9IFxuXHR9XG5cblx0ZnVuY3Rpb24gbWluTmFtZUxlbmd0aCh2YWx1ZSkge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0aWYodmFsdWUubGVuZ3RoIDwgbWluaW11bU5hbWVMZW5ndGgpIHJldHVybiAoJ05hbWUgc2hvdWxkIGJlIGF0IGxlYXN0ICcgKyBtaW5pbXVtTmFtZUxlbmd0aCArICcgY2hhcmFjdGVycycpO1xuXHRcdH0gXG5cdH1cblxuXHRmdW5jdGlvbiBtaW5QYXNzTGVuZ3RoKHZhbHVlKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHRpZighKHZhbHVlLmxlbmd0aCA8IG1pbmltdW1QYXNzTGVuZ3RoKSkgcmV0dXJuIHRydWU7XG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGZ1bmN0aW9uIG1heFBhc3NMZW5ndGgodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdGlmKCEodmFsdWUubGVuZ3RoID4gbWF4aW11bVBhc3NMZW5ndGgpKSByZXR1cm4gdHJ1ZTtcblx0XHR9IFxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGZ1bmN0aW9uIGF0TGVhc3RPbmVTeW1ib2wodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdC8vIGJ1aWxkIHJlZ2V4XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbXFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqXVwiKTtcblxuXHRcdFx0Ly9jaGVjayBjb25zdHJhdGludFxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZhbHVlKSkge1xuXHRcdFx0XHQvL3N1Y2Nlc3M6IGF0IGxlYXN0IG9uZSBzcGVjaWFsIGNoYXJhY3RlciBmb3VuZFxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vZmFpbHVyZTogZGlkbid0IGZpbmQgYW55IHNwY2lhbCBjaGFyYWN0ZXJzXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRmdW5jdGlvbiBhdExlYXN0T25lTnVtYmVyKHZhbHVlKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHQvLyBidWlsZCByZWdleFxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiWzAtOV1cIiwgXCJcIik7XG5cblx0XHRcdC8vY2hlY2sgY29uc3RyYXRpbnRcblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2YWx1ZSkpIHtcblx0XHRcdFx0Ly9zdWNjZXNzOiBhdCBsZWFzdCBvbmUgc3BlY2lhbCBjaGFyYWN0ZXIgZm91bmRcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2ZhaWx1cmU6IGRpZG4ndCBmaW5kIGFueSBzcGNpYWwgY2hhcmFjdGVyc1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cbiAgICBmdW5jdGlvbiBhdExlYXN0T25lTG93ZXJjYXNlKHZhbHVlKSB7XG4gICAgXHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdC8vIGJ1aWxkIHJlZ2V4XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbYS16XVwiLCBcIlwiKTtcblxuXHRcdFx0Ly9jaGVjayBjb25zdHJhdGludFxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZhbHVlKSkge1xuXHRcdFx0XHQvL3N1Y2Nlc3M6IGF0IGxlYXN0IG9uZSBzcGVjaWFsIGNoYXJhY3RlciBmb3VuZFxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vZmFpbHVyZTogZGlkbid0IGZpbmQgYW55IHNwY2lhbCBjaGFyYWN0ZXJzXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYXRMZWFzdE9uZVVwcGVyY2FzZSh2YWx1ZSkge1xuICAgIFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHQvLyBidWlsZCByZWdleFxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW0EtWl1cIiwgXCJcIik7XG5cblx0XHRcdC8vY2hlY2sgY29uc3RyYXRpbnRcblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2YWx1ZSkpIHtcblx0XHRcdFx0Ly9zdWNjZXNzOiBhdCBsZWFzdCBvbmUgc3BlY2lhbCBjaGFyYWN0ZXIgZm91bmRcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2ZhaWx1cmU6IGRpZG4ndCBmaW5kIGFueSBzcGNpYWwgY2hhcmFjdGVyc1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlsbGVnYWxDaGFyYWN0ZXIodmFsdWUpIHtcbiAgICBcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0Ly8gYnVpbGQgcmVnZXhcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIlteQS16MC05XFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqXVwiLCBcIlwiKTtcblxuXHRcdFx0Ly9jaGVjayBjb25zdHJhdGludFxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZhbHVlKSkge1xuXHRcdFx0XHQvL3N1Y2Nlc3M6IGF0IGxlYXN0IG9uZSBzcGVjaWFsIGNoYXJhY3RlciBmb3VuZFxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2ZhaWx1cmU6IGRpZG4ndCBmaW5kIGFueSBzcGNpYWwgY2hhcmFjdGVyc1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIGVtYWlsKHZhbHVlKSB7XG4gICAgXHQvL2RlZmluZSBjb25zdHJhaW50c1xuICAgIFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XCIsIFwiXCIpO1xuICAgIFx0XG4gICAgXHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkgJiYgIWNvbnN0cmFpbnQudGVzdCh2YWx1ZSkpIHtcbiAgICBcdFx0cmV0dXJuICdOb3QgYSB2YWxpZCBlbWFpbCc7XG4gICAgXHR9XG4gICAgXHQvL2lmKCFjb25zdHJhaW50LnRlc3QodmFsdWUpKSByZXR1cm4gJ05vdCBhIHZhbGlkIGUtbWFpbCBhZGRyZXNzJ1xuICAgIFx0XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGF0ZU9mQmlydGgodmFsdWUpIHt9XG5cblx0cmV0dXJuIGFsbFZhbGlkYXRpb25zO1xufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbmZpZyhjb25maWcpO1xuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBjb25maWcoJHJvdXRlUHJvdmlkZXIpIHsgICBcbiAgICAkcm91dGVQcm92aWRlclxuICAgIC53aGVuKCcvJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2xhbmRpbmdQYWdlLmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdMYW5kaW5nUGFnZUNvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICB9KVxuICAgIC53aGVuKCcvc2lnbnVwJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL25ld1VzZXJTaWdudXAuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ05ld1VzZXJTaWduVXBDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgfSlcbiAgICAud2hlbignL2xvZ2luJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3JlZ2lzdGVyZWRVc2VyTG9naW4uaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1JlZ1VzZXJMb2dpbkNvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICB9KVxuICAgIC53aGVuKCcvdXNlckluZm9ybWF0aW9uLzp1aWQ/Jywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3VzZXJJbmZvcm1hdGlvbi5odG0nLFxuICAgICAgICBjb250cm9sbGVyOiAnVXNlckluZm9ybWF0aW9uQ29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgcmVzb2x2ZTogeyAvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgICAgIHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2U6IHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2VcbiAgICAgICAgfVxuICAgIH0pXG4gICAgLndoZW4oJy91c2VyRXZlbnRzLzp1aWQ/Jywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3VzZXJFdmVudHMuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1VzZXJFdmVudHNDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICByZXNvbHZlOiB7IC8qIEBuZ0luamVjdCAqL1xuICAgICAgICAgICAgdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZTogdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZVxuICAgICAgICB9XG4gICAgfSlcbiAgICAud2hlbignL2V2ZW50L2hvc3QvOmV2ZW50SWQvOnVpZC86c2VjdGlvbicsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9ob3N0RXZlbnQuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ0hvc3RFdmVudENvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgIHJlc29sdmU6IHsgLyogQG5nSW5qZWN0ICovXG4gICAgICAgICAgICB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlOiB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlLFxuICAgICAgICB9XG4gICAgfSlcbiAgICAud2hlbignL2V2ZW50L2d1ZXN0LzpldmVudElkLzp1aWQvOmhvc3RJZCcsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9ndWVzdEV2ZW50Lmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdHdWVzdEV2ZW50Q29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgcmVzb2x2ZTogeyAvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgICAgIHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2U6IHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2UsXG4gICAgICAgIH1cbiAgICB9KVxuICAgIC53aGVuKCcvZXZlbnQvOmV2ZW50SWQ/Lzpob3N0SWQ/Lzp1aWQ/LzpzZWN0aW9uPycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9hbkV2ZW50Lmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdBbkV2ZW50Q29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgcmVzb2x2ZTogeyAvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgICAgIHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2U6IHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2UsXG4gICAgICAgICAgICBldmVudFZpZXdDaGFuZ2VyOiBldmVudFZpZXdDaGFuZ2VyXG4gICAgICAgIH1cbiAgICB9KVxuICAgIC5vdGhlcndpc2Uoe1xuICAgICAgICByZWRpcmVjdFRvOiAnLydcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZShhdXRoU2VydmljZSkge1xuICAgIGF1dGhTZXJ2aWNlLmlzTG9nZ2VkSW4oKTtcbn07XG5cbmZ1bmN0aW9uIGV2ZW50Vmlld0NoYW5nZXIodHJhZmZpY1ZhbGV0LCAkcm91dGUpIHtcbiAgICB0cmFmZmljVmFsZXQuZXZlbnRSb3V0ZSgkcm91dGUuY3VycmVudC5wYXJhbXMuZXZlbnRJZCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvdXRlLmN1cnJlbnQucGFyYW1zLmhvc3RJZCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvdXRlLmN1cnJlbnQucGFyYW1zLnVpZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm91dGUuY3VycmVudC5wYXJhbXMuc2VjdGlvbik7XG59OyIsIlxuY29uZmlnLiRpbmplY3QgPSBbXCIkcm91dGVQcm92aWRlclwiXTtcbnVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2UuJGluamVjdCA9IFtcImF1dGhTZXJ2aWNlXCJdO1xuZXZlbnRWaWV3Q2hhbmdlci4kaW5qZWN0ID0gW1widHJhZmZpY1ZhbGV0XCIsIFwiJHJvdXRlXCJdO2FuZ3VsYXJcblx0Lm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnLCBbXG5cdFx0J25nUm91dGUnLFxuXHRcdCduZ1RvdWNoJyxcblx0XHQnZmlyZWJhc2UnXG5cdF0pO1xuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignQW5FdmVudENvbnRyb2xsZXInLCBBbkV2ZW50Q29udHJvbGxlcik7XG5cbkFuRXZlbnRDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJHJvdXRlUGFyYW1zJywgXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBBbkV2ZW50Q29udHJvbGxlcigkbG9nLCAkcm91dGVQYXJhbXMpIHtcblx0dmFyIHZtID0gdGhpcztcblx0XG5cdC8vbG9jYWwgdmFyaWFibGVzXG5cdHZtLnRlbXBUaW1lID0ge3N0YXJ0OiAnJywgZW5kOiAnJ307XG5cdHZtLnVzZXJJc0hvc3QgPSBmYWxzZTtcblxuXG5cdC8vTG9jYWwgTWV0aG9kc1xuXHRmdW5jdGlvbiBpbml0KCkge1xuXHRcdC8vZGVjbGFyZSBhbmQgaW5pdGlhbGl6ZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2bS50ZW1wRGF0ZVRpbWUgPSB7c3RhcnQ6ICcnLCBlbmQ6ICcnfTtcblx0XHR2bS5uZXdHdWVzdCA9IHtuYW1lOiAnJywgZW1haWw6e2FkZHJlc3M6JycsIHZhbGlkOmZhbHNlLCBzdHlsZTp7Y29sb3I6Jyd9fX07XG5cdFx0dm0uc2hvd0lmSG9zdCA9IGZhbHNlO1xuXHRcdHZtLmhpZGVJZkF0dGVuZGluZyA9IHRydWU7XG5cdFx0Ly9zZWN0aW9uc1xuXHRcdHZtLm1hbmFnZVNlY3Rpb25zID0ge1xuXHRcdFx0MToge2FjdGl2ZTogdHJ1ZSwgY29tcGxldGU6IGZhbHNlLCBzdHlsZTp7Y29sb3I6J2JsYWNrJywgJ2JhY2tncm91bmQtY29sb3InOid5ZWxsb3cnfX0sXG5cdFx0XHQyOiB7YWN0aXZlOiBmYWxzZSwgY29tcGxldGU6IGZhbHNlLCBzdHlsZTp7Y29sb3I6J3doaXRlJywgJ2JhY2tncm91bmQtY29sb3InOidncmF5J319LFxuXHRcdFx0Mzoge2FjdGl2ZTogZmFsc2UsIGNvbXBsZXRlOiBmYWxzZSwgc3R5bGU6e2NvbG9yOid3aGl0ZScsICdiYWNrZ3JvdW5kLWNvbG9yJzonZ3JheSd9fVxuXHRcdH07XG5cblx0XHQvL2NoZWNrIHVzZXIgdG8gZGV0ZXJtaW5lIHN0YXRlXG5cdFx0Y2hlY2tGb3JIb3N0KCk7XG5cdFx0Y2hlY2tJZkd1ZXN0SXNBdHRlbmRpbmcoKTtcblxuXHRcdC8vb3BlbiB1cCBzZWN0aW9uc1xuXHRcdGlmKCF2bS5zaG93SWZIb3N0KSBvcGVuQWxsU2VjdGlvbnMoKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHV0ZjhfdG9fYjY0KHN0cikge1xuXHRcdHJldHVybiBidG9hKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiBiNjRfdG9fdXRmOChzdHIpIHtcbiAgICBcdHJldHVybiBhdG9iKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH1cblxuXHRmdW5jdGlvbiBjbGVhbk5ld0d1ZXN0VmFyaWFibGUoKSB7XG5cdFx0dm0ubmV3R3Vlc3QgPSB7bmFtZTogJycsIGVtYWlsOnthZGRyZXNzOicnLCB2YWxpZDpmYWxzZSwgc3R5bGU6e2NvbG9yOicnfX19O1xuXHR9XG5cblx0ZnVuY3Rpb24gaW52aXRlQVJlZ2lzdGVyZWRVc2VyKHVpZCkge1xuXHRcdCRsb2cuaW5mbygnYWRkaW5nIHRoZW0gdG8gdGhlIHJlZ2lzdGVyZWQgdXNlcnMgbGlzdCAnICsgdWlkKTtcblx0XHQvL3NldCB0aGUgbmV3IGV2ZW50XG5cdFx0cmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdwZW5kaW5nJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJHJvdXRlUGFyYW1zLmV2ZW50SWQpLnNldCh7XG5cdFx0XHRpZDogJHJvdXRlUGFyYW1zLmV2ZW50SWQsXG5cdFx0XHRldmVudFRpbWVzOiB7XG5cdFx0XHRcdHN0YXJ0OiB2bS5ldmVudC5ldmVudFRpbWVzLnN0YXJ0LFxuXHRcdFx0XHRlbmQ6IHZtLmV2ZW50LmV2ZW50VGltZXMuZW5kXG5cdFx0XHR9LFxuXHRcdFx0bmFtZTogdm0uZXZlbnQubmFtZSxcblx0XHRcdGhvc3Q6ICRyb3V0ZVBhcmFtcy51aWRcblx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbygndGhlcmUgd2FzIGFuIGVycm9yJyArIGVycm9yKTtcblx0XHR9KTtcblx0XHQvL2lmIHRoZXJlIHdhcyBhbiB1cGRhdGVkIHBsYWNlIGhvbGRlciwgcmVtb3ZlIGl0XG5cdFx0cmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdwZW5kaW5nJykub25jZSgndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0dmFyIGNoZWNrRm9yUGxhY2Vob2xkZXIgPSBzbmFwc2hvdC52YWwoKVxuXHRcdFx0JGxvZy5pbmZvKHNuYXBzaG90LnZhbCgpKTtcblxuXHRcdFx0aWYoY2hlY2tGb3JQbGFjZWhvbGRlci51cGRhdGVkKSB7XG5cdFx0XHRcdCRsb2cuaW5mbygnZGVsZXRpbmcgdXBkYXRlZCcpO1xuXHRcdFx0XHRyZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ3BlbmRpbmcnKS5jaGlsZCgndXBkYXRlZCcpLnJlbW92ZShmdW5jdGlvbihlcnJvck9iamVjdCkge1xuXHRcdFx0XHRcdGlmKGVycm9yT2JqZWN0KSAkbG9nLmluZm8oXCJEZWxldGluZyBmYWlsZWQ6IFwiICsgZXJyb3JPYmplY3QuY29kZSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlICRsb2cuaW5mbygnbm90aGluZyB0byBkbycpO1xuXG5cdFx0fSwgZnVuY3Rpb24oZXJyb3JPYmplY3QpIHtcblx0XHRcdGlmKGVycm9yT2JqZWN0KSAkbG9nLmluZm8oXCJUaGUgcmVhZCBmYWlsZWQ6IFwiICsgZXJyb3JPYmplY3QuY29kZSk7XG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBpbnZpdGVBblVucmVnaXN0ZXJlZFVzZXIodXNlcktleSkge1xuXHRcdCRsb2cuaW5mbygnYWRkaW5nIHRoZW0gdG8gdGhlIFVOUkVHSVNURVJFRCB1c2VycyBsaXN0ICcgKyB1c2VyS2V5KTtcblx0XHRyZWYuY2hpbGQoJ1VucmVnaXN0ZXJlZFVzZXJzJykuY2hpbGQodXNlcktleSkuY2hpbGQoJ3BlbmRpbmcnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS5jaGlsZCgkcm91dGVQYXJhbXMuZXZlbnRJZCkuc2V0KHtcblx0XHRcdGlkOiAkcm91dGVQYXJhbXMuZXZlbnRJZCxcblx0XHRcdGhvc3Q6ICRyb3V0ZVBhcmFtcy51aWQsXG5cdFx0XHRldmVudFRpbWVzOiB7XG5cdFx0XHRcdHN0YXJ0OiB2bS5ldmVudC5ldmVudFRpbWVzLnN0YXJ0LFxuXHRcdFx0XHRlbmQ6IHZtLmV2ZW50LmV2ZW50VGltZXMuZW5kXG5cdFx0XHR9LFxuXHRcdFx0bmFtZTogdm0uZXZlbnQubmFtZVxuXHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKCd0aGVyZSB3YXMgYW4gZXJyb3InICsgZXJyb3IpO1xuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gY2hlY2tGb3JIb3N0KCkge1xuXHRcdC8vY2hlY2sgZXZlbnQgaG9zdFxuXHRcdHZhciBhdXRoRGF0YSA9IHJlZi5nZXRBdXRoKCk7XG5cblx0XHRpZihhdXRoRGF0YS51aWQgPT0gJHJvdXRlUGFyYW1zLmhvc3RJZCkge1xuXHRcdFx0JGxvZy5pbmZvKCdpcyB0aGUgaG9zdCcpO1xuXHRcdFx0dm0uc2hvd0lmSG9zdCA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCRsb2cuaW5mbygnbm90IHRoZSBob3N0Jyk7XG5cdFx0XHR2bS5zaG93SWZIb3N0ID0gZmFsc2U7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gY2hlY2tJZkd1ZXN0SXNBdHRlbmRpbmcoKSB7XG5cdFx0aWYoIXZtLnNob3dJZkhvc3QpIHtcblx0XHRcdCRsb2cuaW5mbygnY2hlY2sgZ3Vlc3QgYXR0ZW5kYW5jZScpO1xuXHRcdFx0dXNlckV2ZW50cy5jaGlsZCgnZ3Vlc3RMaXN0Jykub24oJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdFx0dmFyIGFsbEd1ZXN0cyA9IHNuYXBzaG90LnZhbCgpO1xuXHRcdFx0XHR2bS5oaWRlSWZBdHRlbmRpbmcgPSAhYWxsR3Vlc3RzWyRyb3V0ZVBhcmFtcy51aWRdLmF0dGVuZGluZztcblx0XHRcdFx0XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBvcGVuQWxsU2VjdGlvbnMoKSB7XG5cdFx0dm0ubWFuYWdlU2VjdGlvbnNbMV0uYWN0aXZlID0gdHJ1ZTtcblx0XHR2bS5tYW5hZ2VTZWN0aW9uc1syXS5hY3RpdmUgPSB0cnVlO1xuXHRcdHZtLm1hbmFnZVNlY3Rpb25zWzNdLmFjdGl2ZSA9IHRydWU7XG5cdH1cblxuXHRmdW5jdGlvbiBzYXZlRXZlbnQoKSB7XG5cdFx0dm0uZXZlbnQuJHNhdmUoKS50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdFx0JGxvZy5pbmZvKCdldmVudCBzYXZlZCcpO1xuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2Vycm9yISAnICsgZXJyb3IpO1xuXHRcdH0pO1xuXHR9XG5cblx0Ly92aWV3IE1ldGhvZFxuXHR2bS5zZXRUZW1wVGltZSA9IGZ1bmN0aW9uKGVuZHBvaW50KSB7XG5cdFx0aWYoZW5kcG9pbnQgPT0gJ3N0YXJ0Jykgdm0udGVtcERhdGVUaW1lLnN0YXJ0ID0gbmV3IERhdGUoKTtcblx0XHRpZihlbmRwb2ludCA9PSAnZW5kJykgdm0udGVtcERhdGVUaW1lLmVuZCA9IG5ldyBEYXRlKCk7XG5cdH1cblxuXHR2bS51bml4VGltZVRvRGF0ZVRpbWUgPSBmdW5jdGlvbiAodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fTtcblxuXHR2bS5kYXRlVGltZVRvVW5peFRpbWUgPSBmdW5jdGlvbiAoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH07XG5cblx0dm0uc3VibWl0ID0gZnVuY3Rpb24oKSB7XG5cdFx0JGxvZy5pbmZvKCdzdWJtaXR0aW5nIHRoZSBmb3JtIG5vdyEnKTtcblx0fVxuXG5cdHZtLmJhY2tUb1VzZXJFdmVudHMgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9jYXRpb24ucGF0aCgnL3VzZXJFdmVudHMvJyArICRyb3V0ZVBhcmFtcy51aWQgKyAnLycgKyAkcm91dGVQYXJhbXMudG9rZW4pO1xuXHR9XG5cblx0dm0uZXZlbnRSZWRpcmVjdCA9IGZ1bmN0aW9uKHBhdGgsIGV2ZW50SUQpIHtcblx0XHR2YXIgZnVsbFBhdGggPSBwYXRoICsgJy8nICsgJHJvdXRlUGFyYW1zLnVpZCArICcvJyArICRyb3V0ZVBhcmFtcy50b2tlbjtcblx0XHQvL3JlZGlyZWN0XG5cdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyB0bzogJyArIGZ1bGxQYXRoKTtcblx0XHQkbG9jYXRpb24ucGF0aChmdWxsUGF0aCk7XG5cdH1cblxuXHR2bS5jaGFuZ2VTZWN0aW9uID0gZnVuY3Rpb24odGFyZ2V0U2VjdGlvbikge1xuXHRcdCRsb2cuaW5mbygnYXJlIHdlIGhlcmUnKTtcblx0XHRmb3IoaSA9IDE7IGkgPD0zOyBpKyspIHtcblx0XHRcdGlmKGk9PXRhcmdldFNlY3Rpb24pIHtcblx0XHRcdFx0dm0ubWFuYWdlU2VjdGlvbnNbaV0uYWN0aXZlID0gdHJ1ZTtcblx0XHRcdFx0dm0ubWFuYWdlU2VjdGlvbnNbaV0uc3R5bGVbJ2JhY2tncm91bmQtY29sb3InXSA9J3llbGxvdyc7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLnN0eWxlWydjb2xvciddID0nYmxhY2snO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0ubWFuYWdlU2VjdGlvbnNbaV0uYWN0aXZlID0gZmFsc2U7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLnN0eWxlWydiYWNrZ3JvdW5kLWNvbG9yJ10gPSdncmF5Jztcblx0XHRcdFx0dm0ubWFuYWdlU2VjdGlvbnNbaV0uc3R5bGVbJ2NvbG9yJ10gPSd3aGl0ZSc7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0dm0uc2F2ZUV2ZW50VGltZSA9IGZ1bmN0aW9uKGRhdGVUaW1lLCB0YXJnZXQpIHtcblx0XHQvL2lmIHRoaXMgZXZlbnQgZGlkbid0IGhhdmUgYSBzdGFydCB0aW1lLCBjcmVhdGUgaXRcblx0XHRpZighdm0uZXZlbnQuZXZlbnRUaW1lcykgeyBcblx0XHRcdHZtLmV2ZW50LmV2ZW50VGltZXMgPSB7c3RhcnQ6ICcnLCBlbmQ6ICcnfTtcblx0XHRcdHZtLmV2ZW50LmV2ZW50VGltZXMuc3RhcnQgPSB2bS5kYXRlVGltZVRvVW5peFRpbWUodm0udGVtcERhdGVUaW1lLnN0YXJ0KTsgXG5cdFx0XHR2bS5ldmVudC5ldmVudFRpbWVzLmVuZCA9IHZtLmRhdGVUaW1lVG9Vbml4VGltZSh2bS50ZW1wRGF0ZVRpbWUuZW5kKTtcblx0XHR9XG5cblx0XHRpZigodm0udGVtcERhdGVUaW1lLmVuZCA8IHZtLnRlbXBEYXRlVGltZS5zdGFydCkgJiYgdGFyZ2V0ID09ICdzdGFydCcpIHZtLnRlbXBEYXRlVGltZS5lbmQgPSB2bS50ZW1wRGF0ZVRpbWUuc3RhcnQ7XG5cdFx0aWYodGFyZ2V0ID09ICdzdGFydCcpIHZtLmV2ZW50LmV2ZW50VGltZXMuc3RhcnQgPSB2bS5kYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpO1xuXHRcdGlmKHRhcmdldCA9PSAnZW5kJykgdm0uZXZlbnQuZXZlbnRUaW1lcy5lbmQgPSB2bS5kYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpO1xuXHR9XG5cblx0dm0uZ3Vlc3RzQXJlSW52aXRlZCA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHZtLmV2ZW50Lmd1ZXN0TGlzdCkgcmV0dXJuIHRydWU7XG5cdFx0ZWxzZSByZXR1cm4gZmFsc2U7XG5cdH1cblxuXHR2bS52YWxpZGF0ZUd1ZXN0RW1haWwgPSBmdW5jdGlvbigpIHtcblx0XHQvL2lmIHRoZXJlIGlzIGFuIGVtYWlsIGFkZHJlc3Ncblx0XHRpZih2bS5uZXdHdWVzdC5lbWFpbC5hZGRyZXNzKSB7XG5cdFx0XHQvL2NoZWNrIHZhbGlkaXR5XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKD86XFwuW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKykqQCg/OlthLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cXC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cIiwgXCJcIik7XG5cblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2bS5uZXdHdWVzdC5lbWFpbC5hZGRyZXNzKSkge1xuXHRcdFx0XHR2bS5uZXdHdWVzdC5lbWFpbC52YWxpZCA9IHRydWU7XG5cdFx0XHRcdHZtLm5ld0d1ZXN0LmVtYWlsLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0ubmV3R3Vlc3QuZW1haWwudmFsaWQgPSBmYWxzZTtcblx0XHRcdFx0dm0ubmV3R3Vlc3QuZW1haWwuc3R5bGUgPSB7Y29sb3I6Jyd9O1xuXHRcdFx0fVx0XHRcdFxuXHRcdH1cblx0fVxuXG5cdHZtLmlzU2VjdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24oKSB7XG5cdFx0Zm9yKGk9MDtpPDg7aSsrKSB7XG5cdFx0XHQkbG9nLmluZm8odm0ucmVxdWlyZWRJbnB1dHNbaV0pO1xuXHRcdH1cblx0fVxuXG5cdHZtLnNhdmVBbmRBZHZhbmNlID0gZnVuY3Rpb24oKSB7XG5cdFx0dm0uZXZlbnQuJHNhdmUoKS50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdFx0JGxvZy5pbmZvKCdldmVudCBzYXZlZCcpO1xuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2Vycm9yISAnICsgZXJyb3IpO1xuXHRcdH0pO1xuXG5cdFx0Ly9jaGVjayBmb3IgY29tcGxldGVuZXNcblx0XHR2bS5pc1NlY3Rpb25Db21wbGV0ZSgpO1xuXG5cdFx0aWYodm0ubWFuYWdlU2VjdGlvbnNbMV0uY29tcGxldGUgPT0gdHJ1ZSAmJiB2bS5tYW5hZ2VTZWN0aW9uc1syXS5jb21wbGV0ZSA9PSB0cnVlICYmIHZtLm1hbmFnZVNlY3Rpb25zWzNdLmNvbXBsZXRlID09IHRydWUpIHtcblx0XHRcdHZtLmV2ZW50UmVkaXJlY3QoJy91c2VyRXZlbnRzJywgJHJvdXRlUGFyYW1zLnVpZCk7XG5cdFx0fSBlbHNlIGlmICh2bS5tYW5hZ2VTZWN0aW9uc1sxXS5hY3RpdmUpIHZtLmNoYW5nZVNlY3Rpb24oMik7XG5cdFx0ZWxzZSBpZiAodm0ubWFuYWdlU2VjdGlvbnNbMl0uYWN0aXZlKSB2bS5jaGFuZ2VTZWN0aW9uKDMpO1xuXHRcdGVsc2UgaWYgKHZtLm1hbmFnZVNlY3Rpb25zWzNdLmFjdGl2ZSkgdm0uY2hhbmdlU2VjdGlvbigxKTtcblx0fVxuXG5cdHZtLmFkZEd1ZXN0VG9Ib3N0c0xpc3QgPSBmdW5jdGlvbigpIHtcblx0XHQvL2RlY2xhcmUgYW5kIGluaXRpYWxpemUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIHVzZXJLZXkgPSB1dGY4X3RvX2I2NCh2bS5uZXdHdWVzdC5lbWFpbC5hZGRyZXNzKTtcblxuXHRcdC8vaWYgZW1haWwgaXMgdmFsaWQgYW5kIG5hbWUgZXhpc3RzXG5cdFx0aWYgKHZtLm5ld0d1ZXN0Lm5hbWUgJiYgdm0ubmV3R3Vlc3QuZW1haWwudmFsaWQpIHtcblx0XHRcdC8vaXMgdGhlcmUgYSBndWVzdCBsaXN0IGFscmVhZHk/IElmIG5vdCBjcmVhdGUgb25lXG5cdFx0XHRpZighdm0uZXZlbnQuZ3Vlc3RMaXN0KSB7XG5cdFx0XHRcdHZtLmV2ZW50Lmd1ZXN0TGlzdCA9IHt9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9pZiBzbyBpcyB0aGlzIHBlcnNvbiBhbHJlYWR5IG9uIHRoZSBsaXN0P1xuXHRcdFx0XHR2YXIgaSA9MDtcblx0XHRcdFx0d2hpbGUodm0uZXZlbnQuZ3Vlc3RMaXN0W2ldKSB7XG5cdFx0XHRcdFx0aWYodm0uZXZlbnQuZ3Vlc3RMaXN0W2ldLmVtYWlsID09IGI2NF90b191dGY4KHVzZXJLZXkpKSB7XG5cdFx0XHRcdFx0XHQkbG9nLmluZm8oJ1RoaXMgZ3Vlc3QgaXMgYWxyZWFkeSBvbiB0aGUgbGlzdCcpO1xuXHRcdFx0XHRcdFx0Y2xlYW5OZXdHdWVzdFZhcmlhYmxlKCk7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGkrKztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvL2lzIHRoaXMgZ3Vlc3QgYSByZWdpc3RlcmVkIHVzZXI/XG5cdFx0XHRpZihyZWdpc3RlcmVkVXNlcnNbdXNlcktleV0pIHtcblx0XHRcdFx0Ly9pcyB0aGUgcmVnaXN0ZXJlZCB1c2VyIHRoZSBob3N0P1xuXHRcdFx0XHRpZihyZWdpc3RlcmVkVXNlcnNbdXNlcktleV0gPT0gJHJvdXRlUGFyYW1zLnVpZCkge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygndHJpZWQgdG8gcmVnaXN0ZXIgdGhlIGhvc3QnKTtcblx0XHRcdFx0XHRjbGVhbk5ld0d1ZXN0VmFyaWFibGUoKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0Ly9hZGQgdGhlbSB0byB0aGUgYXBwcm9wcmlhdGUgcmVnaXN0ZXJlZCB1c2VycycgbGlzdCBvZiBldmVudCBpbnZpdGVzXG5cdFx0XHRcdFx0aW52aXRlQVJlZ2lzdGVyZWRVc2VyKHJlZ2lzdGVyZWRVc2Vyc1t1c2VyS2V5XSk7XG5cblx0XHRcdFx0XHQvL2FkZCB0aGUgZ3Vlc3QgdG8gdGhlIGxpc3Rcblx0XHRcdFx0XHR2bS5ldmVudC5ndWVzdExpc3RbcmVnaXN0ZXJlZFVzZXJzW3VzZXJLZXldXSA9IHtcblx0XHRcdFx0XHRcdGF0dGVuZGluZzogZmFsc2UsIFxuXHRcdFx0XHRcdFx0c3RhdHVzOidwZW5kaW5nJywgXG5cdFx0XHRcdFx0XHRuYW1lOiB2bS5uZXdHdWVzdC5uYW1lLCBcblx0XHRcdFx0XHRcdGVtYWlsOnZtLm5ld0d1ZXN0LmVtYWlsLmFkZHJlc3MsXG5cdFx0XHRcdFx0fTtcdFx0XHRcdFx0XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vYWRkIHRoZSBpbnZpdGUgdG8gdGhlIG5vbi1yZWdpc3RlcmVkIHVzZXJzIGxpc3Qgb2YgZXZlbnQgaW52aXRlc1xuXHRcdFx0XHRpbnZpdGVBblVucmVnaXN0ZXJlZFVzZXIodXNlcktleSk7XG5cblx0XHRcdFx0Ly9hZGQgdGhlIGd1ZXN0IHRvIHRoZSBsaXN0XG5cdFx0XHRcdHZtLmV2ZW50Lmd1ZXN0TGlzdFt1c2VyS2V5XSA9IHtcblx0XHRcdFx0XHRcdGF0dGVuZGluZzogZmFsc2UsIFxuXHRcdFx0XHRcdFx0c3RhdHVzOidwZW5kaW5nJywgXG5cdFx0XHRcdFx0XHRuYW1lOiB2bS5uZXdHdWVzdC5uYW1lLCBcblx0XHRcdFx0XHRcdGVtYWlsOnZtLm5ld0d1ZXN0LmVtYWlsLmFkZHJlc3MsXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cblxuXHRcdFx0Ly9zYXZlIHRoZSBldmVudFxuXHRcdFx0dm0uc2F2ZUV2ZW50KCk7XG5cdFx0XHQvL2NsZWFyIHRoZSB0ZW1wIHZhbHVlc1xuXHRcdFx0Y2xlYW5OZXdHdWVzdFZhcmlhYmxlKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCRsb2cuaW5mbygneW91IGRpZG5cXCd0IGVudGVyIGEgbmFtZSBhbmQgb3IgZW1haWwnKTtcblx0XHR9XG5cdH1cblxuXHR2bS5ndWVzdFdpbGxBdHRlbmQgPSBmdW5jdGlvbihyZXNwb25zZSkge1xuXHRcdHZhciBjdXJyZW50VXNlciA9IHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS5jaGlsZCgnZXZlbnRzJyk7XG5cdFx0dmFyIHRvdGFsUGVuZGluZ0ludml0YXRpb25zID0gMDtcblx0XHR2YXIgcmVtb3ZlQXR0ZW5kaW5nVXBkYXRlZCA9IGZhbHNlO1xuXHRcdFxuXHRcdC8vY2hhbmdlIGF0dGVuZGluZyB0byB0cnVlIGluIGhvc3QncyBndWVzdExpc3Rcblx0XHR2bS5ldmVudC5ndWVzdExpc3RbJHJvdXRlUGFyYW1zLnVpZF0uYXR0ZW5kaW5nID0gcmVzcG9uc2U7XG5cdFx0Ly9jaGFuZ2Ugc3RhdHVzIHRvICdhdHRlbmRpbmcnIGluIGhvc3QncyBndWVzdExpc3Rcblx0XHR2bS5ldmVudC5ndWVzdExpc3RbJHJvdXRlUGFyYW1zLnVpZF0uc3RhdHVzID0gJ2F0dGVuZGluZyc7XG5cdFx0XG5cdFx0Ly9nZXQgdGhlIGludml0YXRpb24gZGV0YWlsc1xuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdwZW5kaW5nJykub24oJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhbGJlXG5cdFx0XHR2YXIgaW52aXRhdGlvbnMgPSBzbmFwc2hvdC52YWwoKTtcblx0XHRcdC8vbG9nIHN0YXJ0aW5nIHZhbHVlc1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zKTtcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9uc1skcm91dGVQYXJhbXMuaG9zdElkXSk7XG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnNbJHJvdXRlUGFyYW1zLmhvc3RJZF1bJHJvdXRlUGFyYW1zLmV2ZW50SWRdKTtcblxuXHRcdFx0dmFyIHRoaXNJbnZpdGF0aW9uID0gaW52aXRhdGlvbnNbJHJvdXRlUGFyYW1zLmhvc3RJZF1bJHJvdXRlUGFyYW1zLmV2ZW50SWRdO1xuXHRcdFx0XG5cdFx0XHQkbG9nLmluZm8odGhpc0ludml0YXRpb24pO1xuXHRcdFx0XG5cdFx0XHQvL2NoZWNrICMgb2YgaW5pdmlhdGlvbnNcblx0XHRcdGZvcihpbnZpdGF0aW9uIGluIGludml0YXRpb25zKSB7XG5cdFx0XHRcdHRvdGFsUGVuZGluZ0ludml0YXRpb25zKys7XG5cdFx0XHR9XG5cblx0XHRcdC8vcmVwb3J0ICMgb2YgaW52aXRhdGlvbnNcblx0XHRcdCRsb2cuaW5mbyhcInRvdGFsIGF0dGVuZGluZzogXCIgKyB0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucyk7XG5cdFx0XHRcblx0XHRcdC8vYWRkIHRoZSBldmVudCB0byB0aGUgZ3Vlc3QncyBhdHRlbmRpbmcgbGlzdFxuXHRcdFx0aWYocmVzcG9uc2UpIGN1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5jaGlsZCgkcm91dGVQYXJhbXMuaG9zdElkKS5jaGlsZCgkcm91dGVQYXJhbXMuZXZlbnRJZCkuc2V0KHRoaXNJbnZpdGF0aW9uLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKGVycm9yKTtcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cblx0XHQvL2lmIHRoZSB1cGRhdGVkIHBsYWNlaG9sZGVyIHdhcyBvbiB0aGUgYXR0ZW5kaW5nIGxpc3QgcmVtb3ZlIGl0XG5cdFx0Y3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLm9uKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdFx0dmFyIGF0dGVuZGluZ0xpc3QgPSBzbmFwc2hvdC52YWwoKTtcblx0XHRcdFxuXHRcdFx0Ly9yZXBvcnQgYWN0aW9uc1xuXHRcdFx0JGxvZy5pbmZvKCd0aGlzIGlzIHRoZSBhdHRlbmRpbmcgbGlzdCcpO1xuXHRcdFx0JGxvZy5pbmZvKGF0dGVuZGluZ0xpc3QpO1xuXHRcdFx0XG5cdFx0XHQvL3Rocm93IGZsYWcgZm9yIGxhdGVyXG5cdFx0XHRpZihhdHRlbmRpbmdMaXN0LnVwZGF0ZWQpIHJlbW92ZUF0dGVuZGluZ1VwZGF0ZWQgPSB0cnVlO1xuXG5cdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdC8vaWYgdGhlciB3YXMgYW4gZXJyb3IgcmVwb3J0IGl0XG5cdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKGVycm9yKTtcblx0XHR9KTtcblxuXHRcdC8vaWYgdGhpcyBpcyB0aGUgbGFzdCBwZW5kaW5nIGV2ZW50IG9uIHRoZSBndWVzdCdzIHBlbmRpbmcgbGlzdCwgYWRkIHRoZSB1cGRhdGVkIHBsYWNlaG9sZGVyXG5cdFx0aWYodG90YWxQZW5kaW5nSW52aXRhdGlvbnMgPCAyKSB7XG5cdFx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdFx0dmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcblxuXHRcdFx0Ly9yZXBsYWNlIHdpdGggdXBkYXRlZCBmaWVsZFxuXHRcdFx0Y3VycmVudFVzZXIuY2hpbGQoJ3BlbmRpbmcnKS51cGRhdGUoe1xuXHRcdFx0XHR1cGRhdGVkOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKGVycm9yKTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdC8vcmVtb3ZlIHRoZSBldmVudCBmcm9tIHRoZSBndWVzdCdzIHBlbmRpbmcgbGlzdFxuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdwZW5kaW5nJykuY2hpbGQoJHJvdXRlUGFyYW1zLmhvc3RJZCkucmVtb3ZlKCk7XG5cblx0XHQvL2lmIHRoZXJlIHdhcyBhbiB1cGRhdGVkIGZpZWxkIGluIGF0dGVuZGluZywgcmVtb3ZlIGl0XG5cdFx0aWYocmVtb3ZlQXR0ZW5kaW5nVXBkYXRlZCkge1xuXHRcdFx0JGxvZy5pbmZvKCdyZW1vdmluZyB0aGUgdXBkYXRlZCBwbGFjZWhvbGRlcicpO1xuXHRcdFx0Ly9jdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykuY2hpbGQoJ3VwZGF0ZWQnKS5yZW1vdmUoKTtcblx0XHR9XG5cblx0XHQvL3NhdmUgY2hhbmdlc1xuXHRcdHZtLmV2ZW50LiRzYXZlKCk7XG5cdH1cblxuXHR2bS51cGRhdGVVcGRhdGVkUGFyYW0gPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgY3VycmVudFVzZXIgPSByZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJ2V2ZW50cycpO1xuXHRcdFxuXHRcdCRsb2cuaW5mbygndXBkYXRpbmcgdGhlIHBhcmFtJyk7XG5cdFx0Y3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLm9uKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHQkbG9nLmluZm8oc25hcHNob3QudmFsKCkpO1xuXHRcdH0pO1xuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5jaGlsZCgndXBkYXRlZCcpLnJlbW92ZSgpO1xuXHR9XG5cblx0dm0uYWRkSW52aXRhdGlvblRvQXR0ZW5kaW5nID0gZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHR2YXIgY3VycmVudFVzZXIgPSByZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJ2V2ZW50cycpO1xuXHRcdHZhciB0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucyA9IDA7XG5cblx0XHQvL2dldCB0aGUgaW52aXRhdGlvbiBkZXRhaWxzXG5cdFx0Y3VycmVudFVzZXIuY2hpbGQoJ3BlbmRpbmcnKS5vbigndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFsYmVcblx0XHRcdHZhciBpbnZpdGF0aW9ucyA9IHNuYXBzaG90LnZhbCgpO1xuXHRcdFx0dmFyIHRoaXNJbnZpdGF0aW9uID0gaW52aXRhdGlvbnNbJHJvdXRlUGFyYW1zLmhvc3RJZF1bJHJvdXRlUGFyYW1zLmV2ZW50SWRdO1xuXHRcdFx0XG5cdFx0XHQvL2xvZyBzdGFydGluZyB2YWx1ZXNcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9ucyk7XG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnNbJHJvdXRlUGFyYW1zLmhvc3RJZF0pO1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdWyRyb3V0ZVBhcmFtcy5ldmVudElkXSk7XG5cdFx0XHRcblx0XHRcdC8vY2hlY2sgIyBvZiBpbml2aWF0aW9uc1xuXHRcdFx0Zm9yKGludml0YXRpb24gaW4gaW52aXRhdGlvbnMpIHtcblx0XHRcdFx0dG90YWxQZW5kaW5nSW52aXRhdGlvbnMrKztcblx0XHRcdH1cblxuXHRcdFx0Ly9yZXBvcnQgIyBvZiBpbnZpdGF0aW9uc1xuXHRcdFx0JGxvZy5pbmZvKFwidG90YWwgcGVuZGluZyBpbnZpdGF0aW9uczogXCIgKyB0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucyk7XG5cdFx0XHRcblx0XHRcdCRsb2cuaW5mbyhyZXNwb25zZSk7XG5cdFx0XHQvL2FkZCB0aGUgZXZlbnQgdG8gdGhlIGd1ZXN0J3MgYXR0ZW5kaW5nIGxpc3Rcblx0XHRcdGlmKHJlc3BvbnNlKSBjdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykuY2hpbGQoJHJvdXRlUGFyYW1zLmhvc3RJZCkuY2hpbGQoJHJvdXRlUGFyYW1zLmV2ZW50SWQpLnNldCh0aGlzSW52aXRhdGlvbiwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbyhlcnJvcik7XG5cdFx0XHR9KTtcblxuXG5cblx0XHR9KTtcblx0fVxuXG5cdC8vc3RhcnQgcnVuXG5cdGluaXQoKTtcbn1cblxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignR3Vlc3RFdmVudENvbnRyb2xsZXInLCBHdWVzdEV2ZW50Q29udHJvbGxlcik7XG5cbkd1ZXN0RXZlbnRDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBHdWVzdEV2ZW50Q29udHJvbGxlcigkbG9nKSB7XG5cdCRsb2cuaW5mbygnaW50byB0aGUgR3Vlc3RFdmVudENvbnRyb2xsZXInKTtcbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ0hvc3RFdmVudENvbnRyb2xsZXInLCBIb3N0RXZlbnRDb250cm9sbGVyKTtcblxuSG9zdEV2ZW50Q29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJywgJyRyb3V0ZVBhcmFtcycsICd1c2VyRGF0YScsICd0cmFmZmljVmFsZXQnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBIb3N0RXZlbnRDb250cm9sbGVyKCRsb2csICRyb3V0ZVBhcmFtcywgdXNlckRhdGEsIHRyYWZmaWNWYWxldCkge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHRcblx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0dmFyIGhvc3RlZEV2ZW50U2hlcnBhID0gdHJhZmZpY1ZhbGV0O1xuXHR2YXIgdGhpc0V2ZW50TWFuYWdlciA9IHVzZXJEYXRhO1xuXG5cdC8vdmlldyBtb2RlbCB2YXJpYWJsZXNcblx0dm0uYWN0aXZlU2VjdGlvbiA9IDE7XG5cdHZtLnRlbXBUaW1lID0ge3N0YXJ0OiAnJywgZW5kOiAnJywgZHVyYXRpb246Jyd9O1xuXHR2bS5wcm9ncmVzc0JhciA9IDM5O1xuXHR2bS50ZW1wRXZlbnQgPSB7fTtcblxuXHQvL2xvY2FsIG1ldGhvZHNcblx0ZnVuY3Rpb24gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKSB7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KHVuaXhUaW1lKSk7XG5cdH07XG5cblx0ZnVuY3Rpb24gZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKSB7XG5cdFx0cmV0dXJuIERhdGUucGFyc2UoZGF0ZVRpbWUpO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIGNhbGN1bGF0ZUR1cmF0aW9uKHN0YXJ0LCBlbmQpIHtcblx0XHRyZXR1cm4gKGRhdGVUaW1lVG9Vbml4VGltZShlbmQpIC0gZGF0ZVRpbWVUb1VuaXhUaW1lKHN0YXJ0KSkgLyAoNjAqMTAwMCk7XG5cdH1cblxuXHRmdW5jdGlvbiBpbml0RXZlbnRUaW1lcygpIHtcblx0XHQvL2J1aWxkIG5ldyB0ZW1wIHRpbWVzXG5cdFx0dmFyIG5vdyA9IG5ldyBEYXRlKCk7XG5cblx0XHQvL3JvdW5kIHRvIHRoZSBuZWFyZXN0IGhvdXIsIGN1dCBvZmYgYW55dGhpbmcgc21hbGxlclxuXHRcdG5vdy5zZXRIb3Vycyhub3cuZ2V0SG91cnMoKSArIE1hdGgucm91bmQobm93LmdldE1pbnV0ZXMoKS82MCkpO1xuXHRcdG5vdy5zZXRNaW51dGVzKDApO1xuXHRcdG5vdy5zZXRTZWNvbmRzKDApO1xuXHRcdG5vdy5zZXRNaWxsaXNlY29uZHMoMCk7XG5cblx0XHR2bS50ZW1wVGltZS5zdGFydCA9IG5vdztcblx0XHR2bS50ZW1wVGltZS5lbmQgPSBub3c7XG5cblx0XHR2bS50ZW1wVGltZS5kdXJhdGlvbiA9IGNhbGN1bGF0ZUR1cmF0aW9uKHZtLnRlbXBUaW1lLnN0YXJ0LCB2bS50ZW1wVGltZS5lbmQpO1xuXHRcdFxuXHR9XG5cblx0ZnVuY3Rpb24gdXBkYXRlVGVtcFRpbWVGcm9tTW9kZWwoKSB7XG5cdFx0Ly9pZiBzdGFydCB0aW1lcyBhcmUgYXZhaWxhYmxlXG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodm0udGVtcEV2ZW50LmV2ZW50VGltZXMuc3RhcnQpKSB7XG5cdFx0XHQvL3NldCB0aGUgdGVtcFRpbWUgbW9kZWxcblx0XHRcdHZtLnRlbXBUaW1lLnN0YXJ0ID0gdW5peFRpbWVUb0RhdGVUaW1lKHZtLnRlbXBFdmVudC5ldmVudFRpbWVzLnN0YXJ0KTtcblx0XHRcdHZtLnRlbXBUaW1lLmVuZCA9IHVuaXhUaW1lVG9EYXRlVGltZSh2bS50ZW1wRXZlbnQuZXZlbnRUaW1lcy5lbmQpO1xuXHRcdH1cblxuXHR9XG5cblx0ZnVuY3Rpb24gaW5pdCgpIHtcblx0XHRcblx0XHQvL2xvYWQgZXZlbnQgZGV0YWlsc1xuXHRcdHRoaXNFdmVudE1hbmFnZXIubG9hZEFuRXZlbnRQcm9ncmVzc2l2ZWx5KCRyb3V0ZVBhcmFtcy51aWQsICRyb3V0ZVBhcmFtcy5ldmVudElkKVxuXHRcdC50aGVuKGZ1bmN0aW9uKHRoZUV2ZW50KSB7XG5cdFx0XHQvL2FkZCB0aGlzIGV2ZW50IG1vZGVsIHRvIHRoZSB2aWV3IG1vZGVsIGV2ZW50XG5cdFx0XHR2bS50ZW1wRXZlbnQgPSB0aGVFdmVudDtcblxuXHRcdFx0Ly91cGRhdGUgdGVtcFRpbWVcblx0XHRcdHVwZGF0ZVRlbXBUaW1lRnJvbU1vZGVsKCk7XG5cdFx0fSlcblx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdCRsb2coJ3RoZSBlcnJvciBpczogJyArIGVycm9yKTtcblx0XHR9KVxuXG5cdFx0Ly9sb2FkIHNwZWNpZmllZCBzZWN0aW9uXG5cdFx0dm0uYWN0aXZlU2VjdGlvbiA9IHBhcnNlSW50KCRyb3V0ZVBhcmFtcy5zZWN0aW9uKTtcblx0XHQvL3NldCB0ZW1wVGltZXNcblx0XHRpbml0RXZlbnRUaW1lcygpO1xuXHR9XG5cblx0Ly92aWV3IG1vZGVsIG1ldGhvZHNcblx0dm0uZm9ybWF0RHVyYXRpb24gPSBmdW5jdGlvbigpIHtcblx0XHQvL2NhbGMgZHVyYXRpb25cblx0XHR2bS50ZW1wVGltZS5kdXJhdGlvbiA9IGNhbGN1bGF0ZUR1cmF0aW9uKHZtLnRlbXBUaW1lLnN0YXJ0LCB2bS50ZW1wVGltZS5lbmQpO1xuXHRcdCRsb2cuaW5mbyh2bS50ZW1wVGltZS5kdXJhdGlvbik7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgaG91cnMgPSBNYXRoLmZsb29yKHZtLnRlbXBUaW1lLmR1cmF0aW9uLyg2MCkpO1xuXHRcdHZhciBtaW4gPSB2bS50ZW1wVGltZS5kdXJhdGlvbiAlIDYwO1xuXHRcdHZhciBmcmFjdGlvbiA9IChNYXRoLnJvdW5kKG1pbi8xNSkvNCk7XG5cblx0XHQkbG9nLmluZm8oaG91cnMgKyAnICcgKyBtaW4gKyAnICcgKyBmcmFjdGlvbik7XG5cdFx0cmV0dXJuIChob3VycytmcmFjdGlvbikgKyAnIGgnO1xuXHR9XG5cblx0dm0uc2V0dGluZ1RlbXBTdGFydCA9IGZ1bmN0aW9uKCkge1xuXHRcdHZtLnRlbXBUaW1lLmVuZCA9IHZtLnRlbXBUaW1lLnN0YXJ0O1xuXHR9XG5cblx0dm0uc2V0dGluZ1RlbXBFbmQgPSBmdW5jdGlvbigpIHtcblx0XHQvL3NldCB2YWxpZCBlbmQgd2l0aCBzdGFydFxuXHRcdGlmKHZtLnRlbXBUaW1lLnN0YXJ0ID4gdm0udGVtcFRpbWUuZW5kKSB2bS50ZW1wVGltZS5zdGFydCA9IHZtLnRlbXBUaW1lLmVuZDtcblx0XHQvL2NhbGMgZHVyYXRpb25cblx0XHR2bS50ZW1wVGltZS5kdXJhdGlvbiA9IGNhbGN1bGF0ZUR1cmF0aW9uKHZtLnRlbXBUaW1lLnN0YXJ0LCB2bS50ZW1wVGltZS5lbmQpO1xuXHR9XG5cblx0dm0uYmFja1RvVXNlckV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vc2VuZCB0aGUgdXNlciBiYWNrIHRvIHRoZSBwYWdlIHRoZXkgY2FtZSBmcm9tXG5cdFx0aG9zdGVkRXZlbnRTaGVycGEucmVkaXJlY3RUbygnL3VzZXJFdmVudHMnLCAkcm91dGVQYXJhbXMudWlkKTtcblx0fVxuXG5cdHZtLnNlY3Rpb25CYWNrID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9tb3ZlIGJhY2tcblx0XHR0YXJnZXRTZWN0aW9uID0gdm0uYWN0aXZlU2VjdGlvbiAtIDE7XG5cdFx0aG9zdGVkRXZlbnRTaGVycGEucmVkaXJlY3RUbygnL2V2ZW50L2hvc3QnLCAkcm91dGVQYXJhbXMuZXZlbnRJZCwgJHJvdXRlUGFyYW1zLnVpZCwgdGFyZ2V0U2VjdGlvbik7XG5cdH1cdFxuXG5cdHZtLnNlY3Rpb25Gb3J3YXJkID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9tb3ZlIGZvcndhcmRcblx0XHR0YXJnZXRTZWN0aW9uID0gdm0uYWN0aXZlU2VjdGlvbiArIDE7XG5cdFx0aG9zdGVkRXZlbnRTaGVycGEucmVkaXJlY3RUbygnL2V2ZW50L2hvc3QnLCAkcm91dGVQYXJhbXMuZXZlbnRJZCwgJHJvdXRlUGFyYW1zLnVpZCwgdGFyZ2V0U2VjdGlvbik7XG5cdH1cblxuXHQvL3Rha2UgYWN0aW9uXG5cdGluaXQoKTtcbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ0xhbmRpbmdQYWdlQ29udHJvbGxlcicsIExhbmRpbmdQYWdlQ29udHJvbGxlcik7XG5cbkxhbmRpbmdQYWdlQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZycsICckbG9jYXRpb24nLCAnJGRvY3VtZW50JywgJyR3aW5kb3cnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBMYW5kaW5nUGFnZUNvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCAkbG9jYXRpb24sICRkb2N1bWVudCwgJHdpbmRvdykge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHR2YXIgZmJVUkwgPSAnaHR0cHM6Ly9tZWV0dXBwbGFubmVyLmZpcmViYXNlaW8uY29tLyc7XG5cdHZhciBhdXRoRGF0YSA9IHt9O1xuXHR2YXIgY3VycmVudFVzZXJEYXRhID0ge307XG5cblx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdHZtLnNob3dSZXF1aXJubWVudHMgPSBmYWxzZTtcblx0dm0udmFsaWROZXdOYW1lID0geyd2YWxpZCc6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOicnfX07XG5cdHZtLnZhbGlkTmV3RW1haWwgPSB7J3ZhbGlkJzpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6Jyd9fTtcblx0dm0uc2VjdXJlUGFzc3dvcmQgPSB7J3NlY3VyZSc6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOicnfX07XG5cdHZtLnVubG9ja0NyZWF0ZVVzZXJCdG4gPSB7J3VzYWJsZSc6ZmFsc2UsICdjbGFzcyc6J2J0biBidG4td2FybmluZyd9O1xuXHR2bS5tZXNzYWdlID0gJ3Rlc3RpbmcnO1xuXG5cdFxuXHR2bS52YWxpZFVzZXJFbWFpbCA9IHsndmFsaWQnOmZhbHNlLCAnc3R5bGUnOntjb2xvcjonJ319O1xuXHR2bS52YWxpZFVzZXJQYXNzd29yZCA9IHsndmFsaWQnOmZhbHNlLCAnc3R5bGUnOntjb2xvcjonJ319O1xuXHR2bS51bmNsb2NrVXNlckxvZ2luQnRuID0geyd1c2FibGUnOmZhbHNlLCAnY2xhc3MnOididG4gYnRuLXdhcm5pbmcnfTtcblx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHMgPSB7XG5cdFx0MDp7J2NvbnN0cmFpbnQnOidJcyBhdCBsZWFzdCAxNiBjaGFyYWN0ZXJzIGxvbmcnLCAnc3R5bGUnOntjb2xvcjoncmVkJ30sICdtZXQnOmZhbHNlfSxcblx0XHQxOnsnY29uc3RyYWludCc6J0lzIG5vIGxvbmdlciB0aGFuIDEwMCBjaGFyYWN0ZXJzJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX0sXG5cdFx0Mjp7J2NvbnN0cmFpbnQnOidDb250YWlucyBhdCBsZWFzdCBvbmUgcmVxdWlyZWQgc3ltYm9sIChcXCFcXEBcXCNcXCRcXCVcXF5cXCZcXCopJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX0sXG5cdFx0Mzp7J2NvbnN0cmFpbnQnOidDb250YWlucyBhdCBsZWFzdCBvbmUgbnVtYmVyJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX0sXG5cdFx0NDp7J2NvbnN0cmFpbnQnOidDb250YWlucyBhdCBsZWFzdCBvbmUgbG93ZXJjYXNlIGxldHRlcicsICdzdHlsZSc6e2NvbG9yOidyZWQnfSwgJ21ldCc6ZmFsc2V9LFxuXHRcdDU6eydjb25zdHJhaW50JzonQ29udGFpbnMgYXQgbGVhc3Qgb25lIHVwcGVyY2FzZSBsZXR0ZXInLCAnc3R5bGUnOntjb2xvcjoncmVkJ30sICdtZXQnOmZhbHNlfSxcblx0XHQ2OnsnY29uc3RyYWludCc6XCJEb2Vzbid0IGhhdmUgYW55IGlsbGVnYWwgY2hhcmFjdGVyc1wiLCAnc3R5bGUnOntjb2xvcjoncmVkJ30sICdtZXQnOmZhbHNlfVxuXHR9O1xuXG5cdC8vdmFyIHRoZVRlc3RCb3ggPSBhbmd1bGFyLmVsZW1lbnQoJGRvY3VtZW50KS5maW5kKCcjdGVzdEJveCcpO1xuXG5cdC8vdGhlVGVzdEJveC5jaGVja1ZhbGlkaXR5KCk7XG5cdC8vc2V0Q3VzdG9tVmFsaWRpdHkoJ3lvdSBuZWVkIHNvbWV0aGluZyBlbHNlJyk7XG5cblx0Ly9sb2NhbCBtZXRob2RzXG5cdGZ1bmN0aW9uIHV0ZjhfdG9fYjY0KHN0cikge1xuXHRcdHJldHVybiBidG9hKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiBiNjRfdG9fdXRmOChzdHIpIHtcbiAgICBcdHJldHVybiBhdG9iKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fVxuXG5cdC8vZGVmaW5lIGNvbnRyb2xsZXIgbWV0aG9kc1xuXHR2bS5kaXNwbGF5UGFzc1JlcXMgPSBmdW5jdGlvbigpIHtcblx0XHRpZih2bS5uZXdOYW1lICYmIHZtLm5ld0VtYWlsKSB7XG5cdFx0XHR2bS5zaG93UmVxdWlybm1lbnRzID0gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dm0uc2hvd1JlcXVpcm5tZW50cyA9IGZhbHNlO1xuXHRcdH1cblx0fVxuXG5cdHZtLmNoZWNrTmV3TmFtZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFxuXHRcdGlmKHZtLm5ld05hbWUpIHtcblx0XHRcdGlmKHZtLm5ld05hbWUubGVuZ3RoID4gMCkge1xuXHRcdFx0XHR2bS52YWxpZE5ld05hbWUudmFsaWQgPSB0cnVlO1xuXHRcdFx0XHR2bS52YWxpZE5ld05hbWUuc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS52YWxpZE5ld05hbWUudmFsaWQgPSBmYWxzZTtcblx0XHRcdFx0dm0udmFsaWROZXdOYW1lLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR2bS5vcGVuQ3JlYXRlVXNlckJ1dHRvbigpO1xuXHR9XG5cblx0dm0uY2hlY2tOZXdFbWFpbCA9IGZ1bmN0aW9uICgpIHtcblx0XHRpZih2bS5uZXdFbWFpbCkge1xuXHRcdFx0Ly9jaGVjayB2YWxpZGl0eVxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XCIsIFwiXCIpO1xuXG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3Qodm0ubmV3RW1haWwpKSB7XG5cdFx0XHRcdHZtLnZhbGlkTmV3RW1haWwudmFsaWQgPSB0cnVlO1xuXHRcdFx0XHR2bS52YWxpZE5ld0VtYWlsLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0udmFsaWROZXdFbWFpbC52YWxpZCA9IGZhbHNlO1xuXHRcdFx0XHR2bS52YWxpZE5ld0VtYWlsLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0XHRcdH1cdFx0XHRcblx0XHR9XG5cdFx0XG5cdFx0dm0ub3BlbkNyZWF0ZVVzZXJCdXR0b24oKTtcblx0fVxuXG5cdHZtLmNoZWNrVXNlckVtYWlsID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodm0udXNlckVtYWlsKSB7XG5cdFx0XHQvL2NoZWNrIHZhbGlkaXR5XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKD86XFwuW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKykqQCg/OlthLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cXC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cIiwgXCJcIik7XG5cblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2bS51c2VyRW1haWwpKSB7XG5cdFx0XHRcdHZtLnZhbGlkVXNlckVtYWlsLnZhbGlkID0gdHJ1ZTtcblx0XHRcdFx0dm0udmFsaWRVc2VyRW1haWwuc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS52YWxpZFVzZXJFbWFpbC52YWxpZCA9IGZhbHNlO1xuXHRcdFx0XHR2bS52YWxpZFVzZXJFbWFpbC5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dm0ub3BlblVzZXJMb2dpbkJ0bigpO1xuXHR9XG5cblx0dm0uY2hlY2tOZXdQYXNzd29yZHMgPSBmdW5jdGlvbigpIHtcblx0XHQvL2ZvciBlYWNoIHBhc3N3b3JkIGRlZmluZSB0aGUgcGF0dGVybiB0aGF0IHRoZSBwYXNzd29yZCBtdXN0IG1hdGNoXG5cdFx0dmFyIGNvbnN0cmFpbnRzID0ge1xuXHQgXHRcdDA6IFsnJywgJyB5b3VyIHBhc3N3b3JkIG5lZWRzIHRvIGJlIDE2IGNoYXJhY3RlcnMgb3IgbG9uZ2VyJ10sXG5cdCBcdFx0MTogWycnLCAnIHlvdXIgcGFzc3dvcmQgbmVlZHMgdG8gYmUgbGVzcyB0aGFuIDEwMCBjaGFyYWN0ZXJzJ10sXG5cdCBcdFx0MjogWydbXFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqXScsIFwiIG5vIHJlcXVpcmVkIHN5bWJvbHMgZm91bmRcIl0sXG5cdCBcdFx0MzogWydbMC05XScsIFwiIG5vIG51bWJlcnMgZm91bmRcIl0sXG5cdCBcdFx0NDogWydbYS16XScsIFwiIG5vIGxvd2VyY2FzZSBsZXR0ZXJzIGZvdW5kXCJdLFxuXHQgXHRcdDU6IFsnW0EtWl0nLCBcIiBubyB1cHBlcmNhc2UgbGV0dGVycyBmb3VuZFwiXSxcblx0IFx0XHQ2OiBbJ1teQS16MC05XFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqXScsIFwiIGlsbGVnYWwgY2hhcmFjdGVycyBmb3VuZFwiXSxcbiBcdFx0fTtcbiBcdFx0XG4gXHRcdC8vY2hlY2sgZm9yIGxlbmd0aFxuIFx0XHRpZih2bS5uZXdQYXNzd29yZCkge1xuIFx0XHRcdGlmKHZtLm5ld1Bhc3N3b3JkLmxlbmd0aCA+IDE1KSB7IFxuIFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMF0uc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307IFxuIFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMF0ubWV0ID0gdHJ1ZTsgXG4gXHRcdFx0fSBlbHNlIHtcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzBdLnN0eWxlID0ge2NvbG9yOidyZWQnfTsgXG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1swXS5tZXQgPSBmYWxzZTtcbiBcdFx0XHR9XG4gXHRcdFx0aWYodm0ubmV3UGFzc3dvcmQubGVuZ3RoIDw9IDEwMCkgeyBcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzFdLnN0eWxlID0ge2NvbG9yOidncmVlbid9OyBcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzFdLm1ldCA9IHRydWU7XG4gXHRcdFx0fSBlbHNlIHtcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzFdLnN0eWxlID0ge2NvbG9yOidyZWQnfTsgXG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1sxXS5tZXQgPSBmYWxzZTtcbiBcdFx0XHR9XG5cbiBcdFx0XHQvL2NoZWNrIGNvbnN0cmFpbnRzIDItNVxuIFx0XHRcdGZvcihpID0gMjsgaSA8IDY7IGkrKykge1xuXHQgXHRcdFx0Ly9jaGVjayBmb3IgcmVxdWlyZWQgc3ltYm9scywgdXBwZXJjYXNlLCBsb3NlcmNhc2UsIGFuZCBjaGFyYWN0ZXJzXG5cdCBcdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoY29uc3RyYWludHNbaV1bMF0sIFwiXCIpO1x0XG5cblx0IFx0XHRcdC8vdGVzdCBlYWNoIGNvbnN0cmF0aW50XG5cdCBcdFx0XHRpZihjb25zdHJhaW50LnRlc3Qodm0ubmV3UGFzc3dvcmQpKSB7XG5cdCBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzW2ldLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHQgXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1tpXS5tZXQgPSB0cnVlO1xuXHQgXHRcdFx0fSBlbHNlIHtcblx0IFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbaV0uc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHQgXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1tpXS5tZXQgPSBmYWxzZTtcblx0IFx0XHRcdH1cblx0IFx0XHR9XG5cblx0IFx0XHQvL2NoZWNrIGlsbGVnYWwgY2hhcmFjdGVyc1xuXHQgXHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChjb25zdHJhaW50c1s2XVswXSwgXCJcIik7XG5cblx0IFx0XHQvL3J1biB0aGUgY2hlY2tcblx0IFx0XHRpZighY29uc3RyYWludC50ZXN0KHZtLm5ld1Bhc3N3b3JkKSkge1xuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNl0uc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNl0ubWV0ID0gZmFsc2U7XG5cdCBcdFx0fSBlbHNlIHtcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzZdLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNl0ubWV0ID0gdHJ1ZTtcblx0IFx0XHR9XG5cblx0IFx0XHQvL2lmIGFsbCBjb25zdHJhaW5zIG1ldCwgdGhyb3cgdmFsaWQgcGFzcyBmbGFnXG5cdCBcdFx0aWYoIHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzBdLm1ldCAmJlxuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMV0ubWV0ICYmXG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1syXS5tZXQgJiZcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzNdLm1ldCAmJlxuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNF0ubWV0ICYmXG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1s1XS5tZXQgJiZcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzZdLm1ldCkge1xuXHQgXHRcdFx0dm0uc2VjdXJlUGFzc3dvcmQuc2VjdXJlID0gdHJ1ZVxuXHQgXHRcdH0gZWxzZSB7XG5cdCBcdFx0XHR2bS5zZWN1cmVQYXNzd29yZC5zZWN1cmUgPSBmYWxzZTtcblx0IFx0XHR9XG5cblx0IFx0XHRpZih2bS5zZWN1cmVQYXNzd29yZC5zZWN1cmUpIHtcblx0IFx0XHRcdHZtLnNlY3VyZVBhc3N3b3JkLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHQgXHRcdH0gZWxzZSB7XG5cdCBcdFx0XHR2bS5zZWN1cmVQYXNzd29yZC5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdCBcdFx0fVxuIFx0XHR9XG4gXHRcdFxuIFx0XHR2bS5vcGVuQ3JlYXRlVXNlckJ1dHRvbigpO1xuXHR9XG5cblx0dm0uY2hlY2tVc2VyUGFzc3dvcmRzID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodm0udXNlclBhc3N3b3JkKSB7XG5cdFx0XHRpZih2bS51c2VyUGFzc3dvcmQubGVuZ3RoID4gMTUpIHtcblx0XHRcdFx0dm0udmFsaWRVc2VyUGFzc3dvcmQuc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdFx0XHRcdHZtLnZhbGlkVXNlclBhc3N3b3JkLnZhbGlkID0gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLnZhbGlkVXNlclBhc3N3b3JkLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0XHRcdFx0dm0udmFsaWRVc2VyUGFzc3dvcmQudmFsaWQgPSBmYWxzZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRcblx0XHR2bS5vcGVuVXNlckxvZ2luQnRuKCk7XG5cdH1cblxuXHR2bS5vcGVuQ3JlYXRlVXNlckJ1dHRvbiA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHZtLnZhbGlkTmV3TmFtZS52YWxpZCAmJiB2bS52YWxpZE5ld0VtYWlsLnZhbGlkICYmIHZtLnNlY3VyZVBhc3N3b3JkLnNlY3VyZSkge1xuXHRcdFx0dm0udW5sb2NrQ3JlYXRlVXNlckJ0bi5jbGFzcyA9ICdidG4gYnRuLXN1Y2Nlc3MnO1xuXHRcdFx0dm0udW5sb2NrQ3JlYXRlVXNlckJ0bi51c2FibGUgPSB0cnVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2bS51bmxvY2tDcmVhdGVVc2VyQnRuLmNsYXNzID0gJ2J0biBidG4td2FybmluZyc7XG5cdFx0XHR2bS51bmxvY2tDcmVhdGVVc2VyQnRuLnVzYWJsZSA9IGZhbHNlO1x0XG5cdFx0fVxuXG5cdH1cblxuXHR2bS5vcGVuVXNlckxvZ2luQnRuID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodm0udmFsaWRVc2VyRW1haWwudmFsaWQgJiYgdm0udmFsaWRVc2VyUGFzc3dvcmQudmFsaWQpIHtcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4uY2xhc3MgPSAnYnRuIGJ0bi1zdWNjZXNzJztcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlID0gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi5jbGFzcyA9ICdidG4gYnRuLXdhcm5pbmcnO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi51c2FibGUgPSBmYWxzZTtcdFxuXHRcdH1cblx0fVxuXG5cdHZtLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vc2V0IHZhbHVlc1xuXHRcdHZtLm5ld05hbWUgPSAkZG9jdW1lbnQuZmluZCgnI25ld05hbWUnKVswXS52YWx1ZTtcblx0XHR2bS5uZXdFbWFpbCA9ICRkb2N1bWVudC5maW5kKCcjbmV3RW1haWwnKVswXS52YWx1ZTtcblx0XHR2bS51c2VyRW1haWwgPSAkZG9jdW1lbnQuZmluZCgnI3VzZXJFbWFpbCcpWzBdLnZhbHVlO1xuXHRcdFxuXHRcdHZtLmNoZWNrTmV3TmFtZSgpO1xuXHRcdHZtLmNoZWNrTmV3RW1haWwoKTtcblx0XHR2bS5jaGVja1VzZXJFbWFpbCgpO1xuXHR9XG5cblx0ZnVuY3Rpb24gcmVkaXJlY3QocGF0aCwgdXNlckRhdGEpIHtcblx0XHR2YXIgZnVsbFBhdGggPSBwYXRoICsgJy8nICsgY3VycmVudFVzZXJEYXRhLnVpZCArICcvJyArIGN1cnJlbnRVc2VyRGF0YS50b2tlbjtcblx0XHQvL3JlZGlyZWN0XG5cdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyB0bzogJyArIGZ1bGxQYXRoKTtcblx0XHQkbG9jYXRpb24ucGF0aChmdWxsUGF0aCk7XG5cdFx0JHNjb3BlLiRhcHBseSgpO1xuXHR9XG5cblx0dm0uY3JlYXRlTmV3VXNlciA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2cuaW5mbygnQ3JlYXRpbmcgYSBuZXcgdXNlciBhY2NvdW50IG5vdyEnKTtcblxuXHRcdGlmKHZtLnVubG9ja0NyZWF0ZVVzZXJCdG4udXNhYmxlKSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZVxuXHRcdFx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cblx0XHRcdHJlZi5jcmVhdGVVc2VyKHtcblx0XHRcdFx0ZW1haWw6dm0ubmV3RW1haWwsXG5cdFx0XHRcdHBhc3N3b3JkOnZtLm5ld1Bhc3N3b3JkXG5cdFx0XHR9LGZ1bmN0aW9uKGVycm9yLCB1c2VyRGF0YSkge1xuXHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnRXJyb3IgY3JlYXRpbmcgdXNlcjogJyArIGVycm9yKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvL2xvZyByZXN1bHRzXG5cdFx0XHRcdFx0JGxvZy5pbmZvKHVzZXJEYXRhKTtcblxuXHRcdFx0XHRcdC8vc2F2ZSBhbGwgdGhlIGRhdGFcblx0XHRcdFx0XHRjdXJyZW50VXNlckRhdGEgPSB1c2VyRGF0YTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvL2dlbmVyYXRlIHRoZSB1c2VyIHJlY29yZFxuXHRcdFx0XHRcdHZhciB1c2Vyc1JlZiA9IHJlZi5jaGlsZCgnVXNlcnMvJyArIHVzZXJEYXRhLnVpZCk7XG5cdFx0XHRcdFx0dmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcblxuXHRcdFx0XHRcdC8vd3JpdGUgbmV3IHVzZXIgdG8gdGhlIGRhdGFiYXNlIHdpdGggYmlvIGluZm9cblx0XHRcdFx0XHR1c2Vyc1JlZi5zZXQoeyBcblx0XHRcdFx0XHRcdCdiaW8nOiB7XG5cdFx0XHRcdFx0XHRcdCduYW1lJzogdm0ubmV3TmFtZSxcblx0XHRcdFx0XHRcdFx0J2VtYWlsJzogdm0ubmV3RW1haWxcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHQnZXZlbnRzJzoge1xuXHRcdFx0XHRcdFx0XHQncGVuZGluZyc6IHtcblx0XHRcdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0J2hvc3RpbmcnOiB7XG5cdFx0XHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdCdhdHRlbmRpbmcnOiB7XG5cdFx0XHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdCdjb21wbGV0ZWQnOiB7XG5cdFx0XHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHRcdFx0JGxvZy5pbmZvKCdEYXRhIGNvdWxkIG5vdCBiZSBzYXZlZDogJyArIGVycm9yKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdCRsb2cuaW5mbygnRGF0YSBzYXZlZCBzdWNjZXNzZnVsbHkuJyk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Ly9hZGQgdGhpcyB1c2VyIHRvIHRoZSBsaXN0IG9mIHJlZ2lzdGVyZWQgdXNlcnNcblx0XHRcdFx0XHRyZWYuY2hpbGQoJ1VpZHMnKS5jaGlsZCh1dGY4X3RvX2I2NCh2bS5uZXdFbWFpbCkpLnNldChjdXJyZW50VXNlckRhdGEudWlkLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbyhcIkRhdGEgY291bGQgbm90IGJlIHNhdmVkLiBcIiArIGVycm9yKTtcblx0XHRcdFx0XHRcdGVsc2UgJGxvZy5pbmZvKFwidWlkIGNyZWF0ZWQgc3VjZXNzZnVsbHkuXCIpO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0Ly9yZWRpcmVjdCB0byBVc2VySW5mb3JtYXRpb25cblx0XHRcdFx0XHRyZWRpcmVjdCgnL3VzZXJJbmZvcm1hdGlvbicsIGN1cnJlbnRVc2VyRGF0YSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0fVxuXHR9XG5cblx0dm0ubG9naW5SZWdpc3RlcmVkVXNlciA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0aWYodm0udW5jbG9ja1VzZXJMb2dpbkJ0bi51c2FibGUpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlXG5cdFx0XHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHRcdFx0Ly9hdXRoZW50aWNhdGUgdGhlIHVzZXJcblx0XHRcdHJlZi5hdXRoV2l0aFBhc3N3b3JkKHtcblx0XHRcdFx0ZW1haWw6IHZtLnVzZXJFbWFpbCxcblx0XHRcdFx0cGFzc3dvcmQ6IHZtLnVzZXJQYXNzd29yZFxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IsIGF1dGhEYXRhKSB7XG5cdFx0XHRcdGlmKGVycm9yKSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdFcnJvciBMb2dnaW5nIEluOiAnICsgZXJyb3IpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnTG9nZ2VkIEluIHN1Y2Nlc3NmdWxseTogJyArIGF1dGhEYXRhLnVpZCk7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKGF1dGhEYXRhKTtcblx0XHRcdFx0XHQvL3NhdmUgYWxsIHRoZSBkYXRhXG5cdFx0XHRcdFx0Y3VycmVudFVzZXJEYXRhID0gYXV0aERhdGE7XG5cblx0XHRcdFx0XHQvL2xvYWQgdXNlciBiaW9cblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvL2xvYWQgdXNlciBldmVudHNcblxuXHRcdFx0XHRcdC8vcmVkaXJlY3Rcblx0XHRcdFx0XHRyZWRpcmVjdCgnL3VzZXJJbmZvcm1hdGlvbicsIGN1cnJlbnRVc2VyRGF0YSk7XG5cdFx0XHRcdFx0JHNjb3BlLiRhcHBseSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdH1cblxuXHR9XG5cblx0dm0uYWxlcnRNZSA9IGZ1bmN0aW9uKCkge1xuXHRcdGFsZXJ0KCd0aGlzIGlzIHdvcmtpbmchIGFuIGFsZXJ0IScpO1xuXHR9XG5cblx0dm0ub25SZXNpemVGdW5jdGlvbiA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBpbnB1dFRleHQgPSBhbmd1bGFyLmVsZW1lbnQoJy5pbnB1dFRleHQnKTtcblx0XHRpZigkd2luZG93Lm91dGVyV2lkdGggPiAkd2luZG93Lm91dGVySGVpZ2h0KSB7XG5cdFx0XHRpbnB1dFRleHQuY3NzKCdmb250LXNpemUnLCAnMmVtJyk7XG5cdFx0XHQkbG9nLmluZm8oJ21ha2luZyBiaWdnZXInKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aW5wdXRUZXh0LmNzcygnZm9udC1zaXplJywgJzEuMmVtJyk7XG5cdFx0fVxuXHR9XG5cblx0Ly9ldmVudCBsaXN0ZW5lcnNcblx0aWYgKCdhZGRFdmVudExpc3RlbmVyJyBpbiAkZG9jdW1lbnQpIHtcblx0ICAgICRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XG5cdCAgICBcdCRsb2cuaW5mbygnYWRkaW5nIEZhc3RDbGljaycpO1xuXHQgICAgICAgIEZhc3RDbGljay5hdHRhY2goJGRvY3VtZW50LmJvZHkpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHR9XG5cblx0YW5ndWxhci5lbGVtZW50KCR3aW5kb3cpLmJpbmQoJ3Jlc2l6ZScsIGZ1bmN0aW9uKCkge1xuXHRcdHZtLm9uUmVzaXplRnVuY3Rpb24oKTtcblx0XHQvLyRzY29wZS4kYXBwbHkoKTtcblx0fSk7XG5cblx0YW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cdFx0aWYoJHdpbmRvdy5vdXRlcldpZHRoIDwgNjAwKSB7XG5cdFx0XHR2bS5vblJlc2l6ZUZ1bmN0aW9uKCk7XG5cdFx0XHQvLyRzY29wZS4kYXBwbHkoKTtcblx0XHR9XG5cdH0pXG5cblxuXHQgdm0ubWFzdGVyID0ge307XG5cblx0ICB2bS51cGRhdGUgPSBmdW5jdGlvbih1c2VyKSB7XG5cdCAgICB2bS5tYXN0ZXIgPSBhbmd1bGFyLmNvcHkodXNlcik7XG5cdCAgfTtcblxuXHQgIHZtLnJlc2V0ID0gZnVuY3Rpb24oZm9ybSkge1xuXHQgICAgaWYgKGZvcm0pIHtcblx0ICAgICAgZm9ybS4kc2V0UHJpc3RpbmUoKTtcblx0ICAgICAgZm9ybS4kc2V0VW50b3VjaGVkKCk7XG5cdCAgICB9XG5cdCAgICB2bS51c2VyID0gYW5ndWxhci5jb3B5KHZtLm1hc3Rlcik7XG5cdCAgfTtcblxuXHQgIHZtLnJlc2V0KCk7XG59XG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdNYWluQ29udHJvbGxlcicsIE1haW5Db250cm9sbGVyKTtcblxuTWFpbkNvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICckbG9jYXRpb24nLCAnJGRvY3VtZW50JywgJyR3aW5kb3cnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBNYWluQ29udHJvbGxlcigkbG9nLCAkbG9jYXRpb24sICRkb2N1bWVudCwgJHdpbmRvdykge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHR2YXIgZmJVUkwgPSAnaHR0cHM6Ly9tZWV0dXBwbGFubmVyLmZpcmViYXNlaW8uY29tLyc7XG5cdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoZmJVUkwpOyBcblxuXHRmdW5jdGlvbiByZXNpemVCR0ltYWdlKCkge1xuXHRcdHZhciBib2R5ID0gYW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCk7XG5cdFx0JGRvY3VtZW50LmNzcygnaGlnaHQnLCAkd2luZG93Lm91dGVySGVpZ2h0KVxuXHR9XG5cblx0dm0ubG9nb3V0ID0gZnVuY3Rpb24oKSB7XG5cdFx0YWxlcnQoJ2xvZ2dpbmcgeW91IG91dCEnKTtcblx0XHRyZWYudW5hdXRoKCk7XG5cdFx0JGxvY2F0aW9uLnBhdGgoJy8nKTtcblx0fTtcblxuXHRhbmd1bGFyLmVsZW1lbnQoJGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcblx0XHQvL0Zhc3RDbGljay5hdHRhY2goJGRvY3VtZW50LmJvZHkpO1xuXHRcdHJlc2l6ZUJHSW1hZ2UoKTtcblx0fSlcbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ05ld1VzZXJTaWduVXBDb250cm9sbGVyJywgTmV3VXNlclNpZ25VcENvbnRyb2xsZXIpO1xuXG5OZXdVc2VyU2lnblVwQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZycsICd2YWxpZGF0aW9uJywgJ2JhY2tlbmRTZXJ2aWNlcycsICd0cmFmZmljVmFsZXQnLCAndXNlckRhdGEnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBOZXdVc2VyU2lnblVwQ29udHJvbGxlcigkc2NvcGUsICRsb2csIHZhbGlkYXRpb24sIGJhY2tlbmRTZXJ2aWNlcywgdHJhZmZpY1ZhbGV0LCB1c2VyRGF0YSkge1xuXHR2YXIgdm0gPSB0aGlzO1xuXG5cdC8vZGVmaW5lIHZtIGlucHV0IHZhcmlhYmxlc1xuXHR2bS5pbnB1dHMgPSB7XG5cdFx0bmV3TmFtZTogJycsXG5cdFx0bmV3RW1haWw6ICcnLFxuXHRcdG5ld1Bhc3N3b3JkOiAnJyxcblx0XHRyZXF1aXJlZEZpZWxkc0RlZmluZWQ6IGZhbHNlXG5cdH1cblx0dm0uZXJyb3JzID0ge1xuXHRcdG5hbWU6ICcnLFxuXHRcdGVtYWlsOiAnJyxcblx0XHRwYXNzd29yZDogZmFsc2UsXG5cdFx0cGFzc2VzQWxsVGVzdHM6IGZhbHNlXG5cdH1cblx0dm0ucGFzc1JlcXMgPSB7XG5cdFx0MDogeyBpZDonJywgcmVxOidJcyBhdCBsZWFzdCAxNiBjaGFyYWN0ZXJzIGxvbmcnLCBmdWxmaWxsZWQ6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOidyZWQnfX0sXG5cdFx0MTogeyBpZDonJywgcmVxOidJcyBubyBsb25nZXIgdGhhbiAxMDAgY2hhcmFjdGVycycsIGZ1bGZpbGxlZDpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9IH0sXG5cdFx0MjogeyBpZDonJywgcmVxOidDb250YWlucyBhdCBsZWFzdCBvbmUgbG93ZXJjYXNlIGxldHRlcicsIGZ1bGZpbGxlZDpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9IH0sXG5cdFx0MzogeyBpZDonJywgcmVxOidDb250YWlucyBhdCBsZWFzdCBvbmUgdXBwZXJjYXNlIGxldHRlcicsIGZ1bGZpbGxlZDpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9IH0sXG5cdFx0NDogeyBpZDonJywgcmVxOidDb250YWlucyBhdCBsZWFzdCBvbmUgbnVtYmVyJywgZnVsZmlsbGVkOmZhbHNlLCAnc3R5bGUnOntjb2xvcjoncmVkJ30gfSxcblx0XHQ1OiB7IGlkOicnLCByZXE6J0NvbnRhaW5zIGF0IGxlYXN0IG9uZSByZXF1aXJlZCBzeW1ib2wgKFxcIVxcQFxcI1xcJFxcJVxcXlxcJlxcKiknLCBmdWxmaWxsZWQ6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOidyZWQnfSB9LFxuXHRcdDY6IHsgaWQ6JycsIHJlcTpcIkRvZXNuJ3QgaGF2ZSBhbnkgaWxsZWdhbCBjaGFyYWN0ZXJzXCIsIGZ1bGZpbGxlZDp0cnVlLCAnc3R5bGUnOntjb2xvcjoncmVkJ30gfVxuXHR9XG5cdHZtLnNob3dSZXFzQm94ID0gZmFsc2U7XG5cblx0Ly9kZWZpbmUgcmVxdWlyZWQgZmllbGQgY29uc3RyYWludHNcblx0dmFyIHNpZ251cFZhbGlkYXRpb24gPSB2YWxpZGF0aW9uO1xuXG5cdC8vZGVmaW5lIGNvbnRyb2xsZXIgbWV0aG9kc1xuXHRmdW5jdGlvbiB2ZXJpZnlSZXF1aXJubWVudHMoKSB7XG5cdFx0aWYodm0uZXJyb3JzLm5hbWUgPT0gJycgJiYgdm0uZXJyb3JzLmVtYWlsID09ICcnICYmICF2bS5lcnJvcnMucGFzc3dvcmQpIHZtLmVycm9ycy5wYXNzZXNBbGxUZXN0cyA9IHRydWU7XG5cdFx0ZWxzZSB2bS5lcnJvcnMucGFzc2VzQWxsVGVzdHMgPSBmYWxzZTtcblxuXHRcdGlmKCBhbmd1bGFyLmlzRGVmaW5lZCh2bS5pbnB1dHMubmV3TmFtZSkgJiYgdm0uaW5wdXRzLm5ld05hbWUgIT09ICcnICYmXG5cdFx0XHRhbmd1bGFyLmlzRGVmaW5lZCh2bS5pbnB1dHMubmV3RW1haWwpICYmIHZtLmlucHV0cy5uZXdFbWFpbCAhPT0gJycgJiZcblx0XHRcdGFuZ3VsYXIuaXNEZWZpbmVkKHZtLmlucHV0cy5uZXdQYXNzd29yZCkgJiYgdm0uaW5wdXRzLm5ld1Bhc3N3b3JkICE9PSAnJykgXG5cdFx0XHRcdHZtLmlucHV0cy5yZXF1aXJlZEZpZWxkc0RlZmluZWQgPSB0cnVlO1xuXHRcdGVsc2Ugdm0uaW5wdXRzLnJlcXVpcmVkRmllbGRzRGVmaW5lZCA9IGZhbHNlO1xuXHR9XG5cblx0Ly9kZWZpbmUgdm0gYWNjZXNzaWJsZSBtZXRob2RzXG5cdHZtLmNoZWNrTmV3TmFtZSA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVcblx0XHR2YXIgZXJyb3JzID0gW107XG5cdFx0dmFyIGhhc05hbWUgPSBzaWdudXBWYWxpZGF0aW9uLnJlcXVpcmVkKHZtLmlucHV0cy5uZXdOYW1lKTtcblx0XHR2YXIgbG9uZ0Vub3VnaCA9IHNpZ251cFZhbGlkYXRpb24ubWluTmFtZUxlbmd0aCh2bS5pbnB1dHMubmV3TmFtZSlcblx0XHRcblx0XHQvL2xvZyBlcnJvcnNcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChoYXNOYW1lKSkgZXJyb3JzLnB1c2goaGFzTmFtZSk7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQobG9uZ0Vub3VnaCkpIGVycm9ycy5wdXNoKGxvbmdFbm91Z2gpO1xuXG5cdFx0Ly91cGRhdGUgdGhlIGVycm9ycyBtb2RlbFxuXHRcdGlmKGVycm9ycy5sZW5ndGggPiAwKSB2bS5lcnJvcnMubmFtZSA9IGVycm9ycy5qb2luKCcsICcpO1xuXHRcdGVsc2Ugdm0uZXJyb3JzLm5hbWUgPSAnJztcblxuXHRcdHZlcmlmeVJlcXVpcm5tZW50cygpO1xuXHR9XG5cblx0dm0uY2hlY2tOZXdFbWFpbCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVcblx0XHR2YXIgZXJyb3JzID0gW107XG5cdFx0dmFyIGhhc0VtYWlsID0gc2lnbnVwVmFsaWRhdGlvbi5yZXF1aXJlZCh2bS5pbnB1dHMubmV3RW1haWwpO1xuXHRcdHZhciBpc0FuRW1haWwgPSBzaWdudXBWYWxpZGF0aW9uLmVtYWlsKHZtLmlucHV0cy5uZXdFbWFpbCk7XG5cdFx0XG5cdFx0Ly9sb2cgZXJyb3JzXG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoaGFzRW1haWwpKSBlcnJvcnMucHVzaChoYXNFbWFpbCk7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoaXNBbkVtYWlsKSkgZXJyb3JzLnB1c2goaXNBbkVtYWlsKTtcblxuXHRcdC8vdXBkYXRlIHRoZSBlcnJvcnMgbW9kZWxcblx0XHRpZihlcnJvcnMubGVuZ3RoID4gMCkgdm0uZXJyb3JzLmVtYWlsID0gZXJyb3JzLmpvaW4oJywgJyk7XG5cdFx0ZWxzZSB2bS5lcnJvcnMuZW1haWwgPSAnJztcblxuXHRcdHZlcmlmeVJlcXVpcm5tZW50cygpO1xuXHR9XG5cblx0dm0uY2hlY2tOZXdQYXNzd29yZCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vZmxpcCBvbiByZXFzIGJveFxuXHRcdHZtLnNob3dSZXFzQm94ID0gdHJ1ZTtcblxuXHRcdC8vbG9jYWwgdmFyaWFibGVcblx0XHR2YXIgZXJyb3JzID0gW107XG5cdFx0dmFyIGhhc1Bhc3N3b3JkID0gc2lnbnVwVmFsaWRhdGlvbi5yZXF1aXJlZCh2bS5pbnB1dHMubmV3UGFzc3dvcmQpO1xuXHRcdHZhciBzcGVjaWZpY1JlcXMgPSBbXG5cdFx0XHRzaWdudXBWYWxpZGF0aW9uLm1pblBhc3NMZW5ndGgodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKSxcblx0XHRcdHNpZ251cFZhbGlkYXRpb24ubWF4UGFzc0xlbmd0aCh2bS5pbnB1dHMubmV3UGFzc3dvcmQpLFxuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5hdExlYXN0T25lTG93ZXJjYXNlKHZtLmlucHV0cy5uZXdQYXNzd29yZCksXG5cdFx0XHRzaWdudXBWYWxpZGF0aW9uLmF0TGVhc3RPbmVVcHBlcmNhc2Uodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKSxcblx0XHRcdHNpZ251cFZhbGlkYXRpb24uYXRMZWFzdE9uZU51bWJlcih2bS5pbnB1dHMubmV3UGFzc3dvcmQpLFxuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5hdExlYXN0T25lU3ltYm9sKHZtLmlucHV0cy5uZXdQYXNzd29yZCksXG5cdFx0XHRzaWdudXBWYWxpZGF0aW9uLmlsbGVnYWxDaGFyYWN0ZXIodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKVxuXHRcdF07XG5cblx0XHQvL2xvZyBlcnJvcnNcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChoYXNQYXNzd29yZCkpIGVycm9ycy5wdXNoKGhhc1Bhc3N3b3JkKTtcblxuXHRcdC8vdXBkYXRlIHRoZSBlcnJvcnMgbW9kZWxcblx0XHRpZihlcnJvcnMubGVuZ3RoID4gMCkgdm0uZXJyb3JzLnBhc3N3b3JkID0gZXJyb3JzLmpvaW4oJywgJyk7XG5cdFx0ZWxzZSB2bS5lcnJvcnMuZW1haWwgPSAnJztcblxuXHRcdC8vdXBkYXRlIHJlcXMgbW9kZWxcblx0XHR2YXIgYW55RXJyb3JzID0gZmFsc2U7XG5cdFx0Zm9yKGk9MDsgaTw3OyBpKyspIHtcblx0XHRcdGlmKHNwZWNpZmljUmVxc1tpXSkge1xuXHRcdFx0XHR2bS5wYXNzUmVxc1tpXS5mdWxmaWxsZWQgPSB0cnVlO1xuXHRcdFx0XHR2bS5wYXNzUmVxc1tpXS5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLnBhc3NSZXFzW2ldLmZ1bGZpbGxlZCA9IGZhbHNlO1xuXHRcdFx0XHR2bS5wYXNzUmVxc1tpXS5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdFx0XHRcdGFueUVycm9ycyA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dm0uZXJyb3JzLnBhc3N3b3JkID0gYW55RXJyb3JzO1xuXHRcdHZlcmlmeVJlcXVpcm5tZW50cygpO1xuXHR9XG5cblx0dm0uZXhpdFBhc3N3b3JkID0gZnVuY3Rpb24oKSB7XG5cdFx0dm0uY2hlY2tOZXdQYXNzd29yZCgpO1xuXHRcdHZtLnNob3dSZXFzQm94ID0gZmFsc2U7XG5cdH1cblxuXHR2bS5jcmVhdGVOZXdVc2VyID0gZnVuY3Rpb24gKCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgbmV3VXNlclNoZXJwYSA9IHRyYWZmaWNWYWxldDtcblxuXHRcdC8vY29uZmlybSBhbGwgZmllbGRzIGFyZSB2YWxpZFxuXHRcdGlmKHZtLmVycm9ycy5wYXNzZXNBbGxUZXN0cyAmJiB2bS5pbnB1dHMucmVxdWlyZWRGaWVsZHNEZWZpbmVkKSB7XG5cdFx0XHRcblx0XHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRcdHZhciBjcmVhdGVOZXdVc2VyID0gYmFja2VuZFNlcnZpY2VzO1xuXHRcdFx0dmFyIG5ld1VzZXJEYXRhID0gdXNlckRhdGE7XG5cdFx0XHR2YXIgdGhpc1VJRDtcblxuXHRcdFx0Ly9jcmVhdGUgdGhlIG5ldyB1c2VyIGluIHRoZSBkYXRhYmFzZVxuXHRcdFx0Y3JlYXRlTmV3VXNlci5jcmVhdGVOZXdVc2VyKHZtLmlucHV0cy5uZXdFbWFpbCwgdm0uaW5wdXRzLm5ld1Bhc3N3b3JkKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24oZGJVc2VyRGF0YSkge1xuXHRcdFx0XHRcblx0XHRcdFx0Ly9tYWludGFpbiBsb2NhbCB2YWx1ZXMgdG8gc3BlZWQgdXAgdXNlciBleHBlcmllbmNlXG5cdFx0XHRcdG5ld1VzZXJEYXRhLmxvYWRQcmltYXJpZXModm0uaW5wdXRzLm5ld0VtYWlsLCB2bS5pbnB1dHMubmV3TmFtZSwgZGJVc2VyRGF0YS51aWQpO1xuXG5cdFx0XHRcdC8vY3JlYXRlIGEgdXNlciBwcm9maWxlIGluIHRoZSBkYXRhYmFzZVxuXHRcdFx0XHRjcmVhdGVOZXdVc2VyLmFkZE5ld1VzZXJUb0RhdGFiYXNlKGRiVXNlckRhdGEudWlkLCB2bS5pbnB1dHMubmV3TmFtZSwgdm0uaW5wdXRzLm5ld0VtYWlsKVxuXHRcdFx0XHQudGhlbihmdW5jdGlvbihtZXNzYWdlKSB7XG5cblx0XHRcdFx0XHQkbG9nLmluZm8obWVzc2FnZSk7XG5cblx0XHRcdFx0XHQvL2FkZCB0aGlzIHVzZXIgdG8gdGhlIGxpc3Qgb2YgcmVnaXN0ZXJlZCB1c2Vyc1xuXHRcdFx0XHRcdGNyZWF0ZU5ld1VzZXIuYWRkTmV3VXNlclRvUmVnVXNlcnNMaXN0KGRiVXNlckRhdGEudWlkLCB2bS5pbnB1dHMubmV3RW1haWwpXG5cdFx0XHRcdFx0LnRoZW4oZnVuY3Rpb24obWVzc2FnZSkge1xuXG5cdFx0XHRcdFx0XHQvL3JlZGlyZWN0IHVzaW5nIHRoZSB1aWRcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0Ly9yZWRpcmVjdCB0byB0aGUgbmV4dCBwYWdlIFxuXHRcdFx0XHRcdFx0bmV3VXNlclNoZXJwYS5yZWRpcmVjdFRvKCcvdXNlckluZm9ybWF0aW9uJywgZGJVc2VyRGF0YS51aWQpO1xuXHRcdFx0XHRcdFx0IFxuXHRcdFx0XHRcdFx0JGxvZy5pbmZvKG1lc3NhZ2UpOyBcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdC5jYXRjaChmdW5jdGlvbihtZXNzYWdlKSB7ICRsb2cuaW5mbyhtZXNzYWdlKTsgfSlcblx0XHRcdFx0fSlcblx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKG1lc3NhZ2UpIHsgJGxvZy5pbmZvKG1lc3NhZ2UpOyB9KVxuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihtZXNzYWdlKSB7ICRsb2cuaW5mbyhtZXNzYWdlKTsgfSlcblx0XHRcdFxuXHRcdH1cblxuXHR9XG5cdFxuXHQvL3J1biB0aW1lIGFjdGlvbnNcblxufVxuXG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdSZWdVc2VyTG9naW5Db250cm9sbGVyJywgUmVnVXNlckxvZ2luQ29udHJvbGxlcik7XG5cblJlZ1VzZXJMb2dpbkNvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICckZG9jdW1lbnQnLCAnYmFja2VuZFNlcnZpY2VzJywgJ3RyYWZmaWNWYWxldCcsICd1c2VyRGF0YSddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIFJlZ1VzZXJMb2dpbkNvbnRyb2xsZXIoJGxvZywgJGRvY3VtZW50LCBiYWNrZW5kU2VydmljZXMsIHRyYWZmaWNWYWxldCwgdXNlckRhdGEpIHtcblx0dmFyIHZtID0gdGhpcztcblxuXHQvL2RlZmluZSB2bSBpbnB1dCB2YXJpYWJsZXNcblx0dm0uaW5wdXRzID0ge1xuXHRcdGVtYWlsOiAnJyxcblx0XHRwYXNzd29yZDogJycsXG5cdFx0cmVxdWlyZWRGaWVsZHNEZWZpbmVkOiBmYWxzZVxuXHR9XG5cdHZtLmVycm9ycyA9IHtcblx0XHRtZXNzYWdlOiAnJyxcblx0XHRwYXNzZXNBbGxUZXN0czogdHJ1ZVxuXHR9XG5cdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4gPSB7XG5cdFx0J3VzYWJsZSc6ZmFsc2UsIFxuXHRcdCdjbGFzcyc6J2J0biBidG4td2FybmluZycsXG5cdFx0bWVzc2FnZTogJ05lZWQgRW1haWwgJiBQYXNzJ1xuXHR9XG5cblx0Ly9tZXRob2RzXG5cdGZ1bmN0aW9uIG9wZW5Vc2VyTG9naW5CdG4oKSB7XG5cdFx0Ly9jaGVjayB0aGF0IHRoZXJlIGlzIGFuIGVtYWlsIGFuZCB0aGVyZSBpcyBhIHBhc3N3b3JkXG5cdFx0aWYoXHRhbmd1bGFyLmlzRGVmaW5lZCh2bS5pbnB1dHMuZW1haWwpICYmIHZtLmlucHV0cy5lbWFpbCAhPT0gJycgJiZcblx0XHRcdGFuZ3VsYXIuaXNEZWZpbmVkKHZtLmlucHV0cy5wYXNzd29yZCkgJiYgdm0uaW5wdXRzLnBhc3N3b3JkICE9PSAnJykgXG5cdFx0e1xuXHRcdFx0dm0uaW5wdXRzLnJlcXVpcmVkRmllbGRzRGVmaW5lZCA9IHRydWU7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLmNsYXNzID0gJ2J0biBidG4tc3VjY2Vzcyc7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLm1lc3NhZ2UgPSAnTG9naW4nO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi51c2FibGUgPSB0cnVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2bS5pbnB1dHMucmVxdWlyZWRGaWVsZHNEZWZpbmVkID0gZmFsc2U7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLmNsYXNzID0gJ2J0biBidG4td2FybmluZyc7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLm1lc3NhZ2UgPSAnTmVlZCBFbWFpbCAmIFBhc3MnO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi51c2FibGUgPSBmYWxzZTtcblx0XHR9XG5cblx0fVxuXG5cdC8vdmlldyBtb2RlbCBtZXRob2RzXG5cdHZtLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vc2V0IHZhbHVlc1xuXHRcdHZtLmlucHV0cy5lbWFpbCA9ICRkb2N1bWVudC5maW5kKCcjdXNlckVtYWlsJylbMF0udmFsdWU7XG5cdFx0dm0uaW5wdXRzLnBhc3N3b3JkID0gJGRvY3VtZW50LmZpbmQoJyN1c2VyUGFzc3dvcmQnKVswXS52YWx1ZTtcblx0XHRcblx0XHRvcGVuVXNlckxvZ2luQnRuKCk7XG5cdH1cblxuXHR2bS5sb2dpblJlZ2lzdGVyZWRVc2VyID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciByZWdpc3RlcmVkVXNlclNoZXJwYSA9IHRyYWZmaWNWYWxldDtcblxuXHRcdC8vY29uZmlybSBhbGwgZmllbGRzIGFyZSB2YWxpZFxuXHRcdGlmKHRydWUpIHtcblx0XHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRcdHZhciBkYXRhYmFzZSA9IGJhY2tlbmRTZXJ2aWNlcztcblx0XHRcdHZhciByZWdpc3RlcmVkVXNlckRhdGEgPSB1c2VyRGF0YTtcblxuXHRcdFx0Ly92ZXJpZnkgdXNlcnMgY3JlZGVudGlhbHNcblx0XHRcdGRhdGFiYXNlLkxvZ2luUmVnaXN0ZXJlZFVzZXIodm0uaW5wdXRzLmVtYWlsLCB2bS5pbnB1dHMucGFzc3dvcmQpXG5cdFx0XHQudGhlbihmdW5jdGlvbih1c2VyQ3JlZGVudGlhbHMpIHtcblx0XHRcdFx0Ly9pZiBubyB0cm91YmxlIGxvZ2dpbmcgaW4gdXBkYXRlIGVycm9yIG9iamVjdFxuXHRcdFx0XHR2bS5lcnJvcnMucGFzc2VzQWxsVGVzdHMgPSB0cnVlO1xuXG5cdFx0XHRcdC8vYWRkIHByaW1hcnkgaW5mb3JtYXRpb24gdG8gbG9jYWwgbW9kZWxcblx0XHRcdFx0cmVnaXN0ZXJlZFVzZXJEYXRhLnNldFByaW1hcmllc0xvY2FsbHkodm0uaW5wdXRzLmVtYWlsLCB2bS5pbnB1dHMubmFtZSwgdXNlckNyZWRlbnRpYWxzLnVpZCk7XG5cblx0XHRcdH0pXG5cdFx0XHQudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdFx0JGxvZy5pbmZvKFwidWlkIGlzIFwiICsgcmVnaXN0ZXJlZFVzZXJEYXRhLmdldFVJRExvY2FsbHkoKSk7XG5cblx0XHRcdFx0ZGF0YWJhc2UuZ2V0VXNlckJpbyhyZWdpc3RlcmVkVXNlckRhdGEuZ2V0VUlETG9jYWxseSgpKVxuXHRcdFx0XHQudGhlbihmdW5jdGlvbih1c2VyQmlvKSB7XG5cdFx0XHRcdFx0Ly91cGRhdGUgdXNlckRhdGEgbW9kZWwgd2l0aCB1c2VyQmlvXG5cdFx0XHRcdFx0cmVnaXN0ZXJlZFVzZXJEYXRhLnVwZGF0ZUJpb0xvY2FsbHkodXNlckJpbyk7XG5cblx0XHRcdFx0XHQvL2xvYWQgdXNlciBldmVudHNcblx0XHRcdFx0XHRkYXRhYmFzZS5nZXRVc2VyRXZlbnRzKHJlZ2lzdGVyZWRVc2VyRGF0YS5nZXRVSURMb2NhbGx5KCkpXG5cdFx0XHRcdFx0LnRoZW4oZnVuY3Rpb24oYWxsRXZlbnRzRm9yVGhpc1VzZXIpIHtcblx0XHRcdFx0XHRcdC8vdXBkYXRlIHVzZXJEYXRhIG1vZGVsIHdpdGggdXNlckV2ZW50c1xuXHRcdFx0XHRcdFx0cmVnaXN0ZXJlZFVzZXJEYXRhLnVwZGF0ZUFsbFVzZXJFdmVudHNMb2NhbGx5KGFsbEV2ZW50c0ZvclRoaXNVc2VyKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdC5jYXRjaChmdW5jdGlvbihtZXNzYWdlKSB7ICRsb2cuaW5mbyhtZXNzYWdlKTsgfSlcblxuXHRcdFx0XHR9KVxuXHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyAkbG9nLmluZm8obWVzc2FnZSk7IH0pXG5cblx0XHRcdFx0Ly9yZWRpcmVjdCB0byB0aGUgbmV4dCBwYWdlIFxuXHRcdFx0XHRyZWdpc3RlcmVkVXNlclNoZXJwYS5yZWRpcmVjdFRvKCcvdXNlckluZm9ybWF0aW9uJywgcmVnaXN0ZXJlZFVzZXJEYXRhLmdldFVJRExvY2FsbHkoKSk7XG5cblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyBcblx0XHRcdFx0Ly9pZiB0aGVyZSB3YXMgYW4gZXJyb3IgbG9nZ2luZyBpbiwgbGV0IHRoZSB1c2VyIGtub3dcblx0XHRcdFx0dm0uZXJyb3JzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuXHRcdFx0XHR2bS5lcnJvcnMucGFzc2VzQWxsVGVzdHMgPSBmYWxzZTtcblx0XHRcdH0pXG5cblx0XHRcdC8vdXNlIHVpZCB0byBjb2xsZWN0IHVzZXIgYmlvXG5cdFx0XHRcblx0XHR9XG5cblx0fVxuXG5cdHZtLmNsaWNrZWQgPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgdXNlckF1dGhlbnRpY2F0aW9uID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0dXNlckF1dGhlbnRpY2F0aW9uLmxvZ1VzZXJPdXQoKTtcblx0fVxuXG5cdC8vcnVuIGNvbW1hbmRzXG59XG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCd0b3BNZW51Q29udHJvbGxlcicsIHRvcE1lbnVDb250cm9sbGVyKTtcblxudG9wTWVudUNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnLCAnJGxvY2F0aW9uJywgJyRkb2N1bWVudCcsICckd2luZG93J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gdG9wTWVudUNvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCAkbG9jYXRpb24sICRkb2N1bWVudCwgJHdpbmRvdykge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHR2YXIgZmJVUkwgPSAnaHR0cHM6Ly9tZWV0dXBwbGFubmVyLmZpcmViYXNlaW8uY29tLyc7XG5cdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXG5cdC8vbG9jYWwgdmFyaWFibGVzXG5cdHZtLmxvZ2dlZEluID0gZmFsc2VcblxuXHQvL3N0eWxlcyB2YXJpYWJsZXNcblx0XG5cdC8vZXZlbnQgbGlzdGVuZXJzXG5cdGlmICgnYWRkRXZlbnRMaXN0ZW5lcicgaW4gJGRvY3VtZW50KSB7XG5cdCAgICAkZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkge1xuXHQgICAgXHQkbG9nLmluZm8oJ2FkZGluZyBGYXN0Q2xpY2snKTtcblx0ICAgICAgICBGYXN0Q2xpY2suYXR0YWNoKCRkb2N1bWVudC5ib2R5KTtcblx0ICAgIH0sIGZhbHNlKTtcblx0fVxuXG5cdGFuZ3VsYXIuZWxlbWVudCgkd2luZG93KS5iaW5kKCdyZXNpemUnLCBmdW5jdGlvbigpIHtcblx0XHR2bS5vblJlc2l6ZUZ1bmN0aW9uKCk7XG5cdFx0JHNjb3BlLiRhcHBseSgpO1xuXHR9KTtcblxuXHRhbmd1bGFyLmVsZW1lbnQoJGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcblx0XHRpZigkd2luZG93Lm91dGVyV2lkdGggPCA2MDApIHtcblx0XHRcdHZtLm9uUmVzaXplRnVuY3Rpb24oKTtcblx0XHRcdCRzY29wZS4kYXBwbHkoKTtcblx0XHR9XG5cdH0pXG5cdC8vZHluYW1pY2FsbHkgc2V0IGlucHV0IHdpZHRoXG5cblxuXHQvLyBDcmVhdGUgYSBjYWxsYmFjayB3aGljaCBsb2dzIHRoZSBjdXJyZW50IGF1dGggc3RhdGVcblx0ZnVuY3Rpb24gaW5pdCgpIHtcblx0XHR2bS5vblJlc2l6ZUZ1bmN0aW9uKCk7XG5cdFx0JHNjb3BlLiRhcHBseSgpO1xuXHR9XG5cblx0ZnVuY3Rpb24gYXV0aERhdGFDYWxsYmFjayhhdXRoRGF0YSkge1xuXHQgIGlmIChhdXRoRGF0YSkge1xuXHQgICAgJGxvZy5pbmZvKFwiVXNlciBcIiArIGF1dGhEYXRhLnVpZCArIFwiIGlzIGxvZ2dlZCBpbiB3aXRoIFwiICsgYXV0aERhdGEucHJvdmlkZXIpO1xuXHQgICAgdm0ubG9nZ2VkSW4gPSB0cnVlO1xuXHQgIH0gZWxzZSB7XG5cdCAgICAkbG9nLmluZm8oXCJVc2VyIGlzIGxvZ2dlZCBvdXRcIik7XG5cdCAgICB2bS5sb2dnZWRJbiA9IGZhbHNlO1xuXHQgIH1cblx0fVxuXG5cdGZ1bmN0aW9uIHJlZGlyZWN0KHBhdGgsIHVzZXJEYXRhKSB7XG5cdFx0dmFyIGZ1bGxQYXRoID0gcGF0aCArICcvJyArIHVzZXJEYXRhLnVpZCArICcvJyArIHVzZXJEYXRhLnRva2VuO1xuXHRcdC8vcmVkaXJlY3Rcblx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIHRvOiAnICsgZnVsbFBhdGgpO1xuXHRcdCRsb2NhdGlvbi5wYXRoKGZ1bGxQYXRoKTtcblx0XHQvLyRzY29wZS4kYXBwbHkoKTtcblx0fVxuXG5cdC8vdm0gYWNjZXNzaWJsZSBtZXRob2RzXG5cdHZtLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2cuaW5mbygnbG9nZ2luZyBvdXQhJyk7XG5cdFx0dm0ubG9nZ2VkSW4gPSBmYWxzZTtcblx0XHRyZWYudW5hdXRoKCk7XG5cdFx0cmVkaXJlY3QoJy8nLCB7dWlkOicnLCB0b2tlbjonJ30pO1xuXHR9XG5cblx0dm0ubmF2QmFyTG9naW5SZWdpc3RlcmVkVXNlciA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2cuaW5mbygnbGF1bmNoaW5nIGxvZ2luJyk7XG5cdFx0aWYodHJ1ZSkge1xuXHRcdC8vaWYodm0udW5jbG9ja1VzZXJMb2dpbkJ0bi51c2FibGUpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlXG5cdFx0XHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHRcdFx0Ly9hdXRoZW50aWNhdGUgdGhlIHVzZXJcblx0XHRcdHJlZi5hdXRoV2l0aFBhc3N3b3JkKHtcblx0XHRcdFx0ZW1haWw6IHZtLm5hdmJhclVzZXJFbWFpbCxcblx0XHRcdFx0cGFzc3dvcmQ6IHZtLm5hdmJhclVzZXJQYXNzXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvciwgYXV0aERhdGEpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ0Vycm9yIExvZ2dpbmcgSW46ICcgKyBlcnJvcik7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdMb2dnZWQgSW4gc3VjY2Vzc2Z1bGx5OiAnICsgYXV0aERhdGEudWlkKTtcblx0XHRcdFx0XHQkbG9nLmluZm8oYXV0aERhdGEpO1xuXHRcdFx0XHRcdC8vc2F2ZSBhbGwgdGhlIGRhdGFcblxuXHRcdFx0XHRcdC8vbG9hZCB1c2VyIGJpb1xuXHRcdFx0XHRcdC8vbG9hZCB1c2VyIGV2ZW50c1xuXG5cdFx0XHRcdFx0Ly9yZWRpcmVjdFxuXHRcdFx0XHRcdHJlZGlyZWN0KCcvdXNlckluZm9ybWF0aW9uJywgYXV0aERhdGEpO1xuXHRcdFx0XHRcdCRzY29wZS4kYXBwbHkoKTtcblxuXHRcdFx0XHRcdC8vY2xpY2sgY2xvc2VkIHRoZSBuYXZiYXJcblx0XHRcdFx0XHRhbmd1bGFyLmVsZW1lbnQoJy5uYXZiYXItdG9nZ2xlJykuY2xpY2soKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblxuXG5cdFx0fVxuXG5cdH1cblxuXHR2bS5vblJlc2l6ZUZ1bmN0aW9uID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG5hdmJhcklucHV0cyA9IGFuZ3VsYXIuZWxlbWVudCgnLm5hdmJhcklucHV0cycpO1xuXHRcdG5hdmJhcklucHV0cy5jc3MoJ3dpZHRoJywgKCR3aW5kb3cub3V0ZXJXaWR0aCAtIDI2KSArICdweCcpO1xuXHR9XG5cblx0Ly8gUmVnaXN0ZXIgdGhlIGNhbGxiYWNrIHRvIGJlIGZpcmVkIGV2ZXJ5IHRpbWUgYXV0aCBzdGF0ZSBjaGFuZ2VzXG5cdHJlZi5vbkF1dGgoYXV0aERhdGFDYWxsYmFjayk7XG59XG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdVc2VyRXZlbnRzQ29udHJvbGxlcicsIFVzZXJFdmVudHNDb250cm9sbGVyKTtcblxuVXNlckV2ZW50c0NvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICckcm91dGVQYXJhbXMnLCAndXNlckRhdGEnLCAndHJhZmZpY1ZhbGV0J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gVXNlckV2ZW50c0NvbnRyb2xsZXIoJGxvZywgJHJvdXRlUGFyYW1zLCB1c2VyRGF0YSwgdHJhZmZpY1ZhbGV0KSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdHZhciBjdXJyZW50VXNlciA9IHVzZXJEYXRhO1xuXG5cdC8vbG9jYWwgdmlldyB2YXJpYWJsZXNcblx0dm0uc2hvd0RlY2xpbmUgPSBmYWxzZTtcdC8vd2hhdCBpcyB0aGlzIGJlaW5nIHVzZWQgZm9yP1xuXHR2bS51c2VyQmlvID0ge31cblx0dm0uZXZlbnRzID0ge307XG5cdHZtLnNlY3Rpb25BdmFpbGFibGUgPSB7XG5cdFx0cGVuZGluZzogZmFsc2UsXG5cdFx0YXR0ZW5kaW5nOiBmYWxzZSxcblx0XHRob3N0aW5nOiBmYWxzZSxcblx0XHRjb21wbGV0ZWQ6IGZhbHNlXG5cdH07XG5cdHZtLmVycm9ycyA9IHt9O1xuXG5cdC8vZGVjbGFyZSBsb2NhbCBtZXRob2RzXG5cdGZ1bmN0aW9uIHVuaXhUaW1lVG9EYXRlVGltZSh1bml4VGltZSkge1xuXHRcdHJldHVybiBuZXcgRGF0ZShwYXJzZUludCh1bml4VGltZSkpO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIGRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fTtcblxuXHRmdW5jdGlvbiBub09mSG9zdGVFdmVudHMoKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlXG5cdFx0dmFyIGNvdW50ZXIgPSAwO1xuXG5cdFx0Zm9yKGV2ZW50IGluIHZtLmV2ZW50cy5ob3N0aW5nKSBjb3VudGVyKys7XG5cblx0XHRyZXR1cm4gY291bnRlcjtcblx0fVxuXG5cdGZ1bmN0aW9uIGdlbmVyYXRlRXZlbnRJRCgpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xuXHRcdHZhciBldmVudElEID0gKGRhdGVUaW1lVG9Vbml4VGltZShkYXRlKSAqIDEwKSArIChub09mSG9zdGVFdmVudHMoKSk7XG5cblx0XHRyZXR1cm4gZXZlbnRJRDtcblx0fVxuXG5cdGZ1bmN0aW9uIGNoZWNrRm9yRXZlbnRzKCkge1xuXHRcdFxuXHRcdC8vbG9vcCB0aHJvdWdoIGFsbCB0aGUgZXZlbnQgY2F0ZWdvcmllc1xuXHRcdE9iamVjdC5rZXlzKHZtLmV2ZW50cykuZm9yRWFjaChmdW5jdGlvbihjYXRlZ29yeSkge1xuXHRcdFx0XG5cdFx0XHQvL2luc2lkZSBlYWNoIGNhdGVnb3J5IGNvdW50IHRoZSBudW1iZXIgb2YgZXZlbnQgb2JqZWN0cy4uLk5PVCB1cGRhdGVkIHBsYWNlaG9sZGVyIHRob3VnaFxuXHRcdFx0T2JqZWN0LmtleXModm0uZXZlbnRzW2NhdGVnb3J5XSkuZm9yRWFjaChmdW5jdGlvbihldmVudElEKSB7XG5cdFx0XHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZVxuXHRcdFx0XHR2YXIgY291bnRlciA9IDA7XG5cdFx0XHRcdC8vY291bnQgZXZlbnRzIHdpdGggaWQncyAvIE5PVCAndXBkYXRlZCcgcGxhY2Vob2xkZXJzXG5cdFx0XHRcdGlmKGFuZ3VsYXIuaXNPYmplY3Qodm0uZXZlbnRzW2NhdGVnb3J5XVtldmVudElEXSkpIGNvdW50ZXIrKztcblx0XHRcdFx0XG5cdFx0XHRcdC8vaWYgYXQgbGVhc3Qgb25lIGV2ZW50IGlkIChvYmplY3QpIHdhcyBjb3VudGVkLCB0aGVuIHNob3cgdGhlIHNlY3Rpb25cblx0XHRcdFx0aWYoY291bnRlciA+IDApIHZtLnNlY3Rpb25BdmFpbGFibGVbY2F0ZWdvcnldID0gdHJ1ZTtcblx0XHRcdFx0ZWxzZSB2bS5zZWN0aW9uQXZhaWxhYmxlW2NhdGVnb3J5XSA9IGZhbHNlO1xuXHRcdFx0fSk7XG5cblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHtcblx0XHQvL21ha2Ugc3VyZSB0aGUgdWlkIGlzIHNldFxuXHRcdGN1cnJlbnRVc2VyLnNldFVJRExvY2FsbHkoJHJvdXRlUGFyYW1zLnVpZCk7XG5cblx0XHQvL2xvYWQgdGhlIHVzZXIgYmlvXG5cdFx0Y3VycmVudFVzZXIubG9hZEJpbygkcm91dGVQYXJhbXMudWlkKVxuXHRcdC50aGVuKGZ1bmN0aW9uKHJldHJpZXZlZEJpbykge1xuXHRcdFx0dm0udXNlckJpbyA9IHJldHJpZXZlZEJpbztcblx0XHR9KVxuXHRcdC5jYXRjaCgpXG5cblx0XHQvL2xvYWQgdXNlciBldmVudHMgcHJvZ3Jlc3NpdmxleVxuXHRcdC8vZmlzdCB3aGF0ZXZlciBpcyBpbiB0aGUgbW9kZWwgYWxyZWFkeVxuXHRcdHZtLmV2ZW50cyA9IGN1cnJlbnRVc2VyLmdldEFsbFVzZXJFdmVudHNMb2NhbGx5KCk7XG5cblx0XHQvL3RoZW4gY2FsbCB0byB0aGUgZGIgYW5kIGdldCB0aGUgbW9zdCB1cCB0byBkYXRlIGluZm9cblx0XHRjdXJyZW50VXNlci5nZXRSZW1vdGVFdmVudHNGb3JMb2NhbCgpXG5cdFx0LnRoZW4oZnVuY3Rpb24ob2J0YWluZWRVc2VyRXZlbnRzKSB7XG5cblx0XHRcdC8vdXBkYXRlIHRoZSB2aWV3IG1vZGVsIHdpdGggdGhlIHVwZGF0ZWQgREIgcmVzdWx0c1xuXHRcdFx0dm0uZXZlbnRzID0gY3VycmVudFVzZXIuZ2V0QWxsVXNlckV2ZW50c0xvY2FsbHkoKTtcblx0XHR9KVxuXHRcdC50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdFx0Ly9ub3cgdGhhdCBldmVudHMgYXJlIGxvYWRlZCwgcmVmbGVjdCBpdCBpbiB0aGUgdmlldyBtb2RlbFxuXHRcdFx0Y2hlY2tGb3JFdmVudHMoKTtcblx0XHR9KVxuXG5cdH1cblxuXHQvL2RlY2xhcmUgdmlldyBtZXRob2RzXG5cdHZtLmNyZWF0ZU5ld0V2ZW50ID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGV2ZW50SUQgPSBnZW5lcmF0ZUV2ZW50SUQoKTtcblx0XHR2YXIgbmV3RXZlbnRTaGVycGEgPSB0cmFmZmljVmFsZXQ7XG5cblx0XHQvL2FkZCB0aGUgZXZlbnQgdG8gdGhlIG1vZGFsIChsb2NhbGx5IHRoZW4gb24gdGhlIGRiKVxuXHRcdGN1cnJlbnRVc2VyLmNyZWF0ZU5ld0V2ZW50KGV2ZW50SUQpXG5cdFx0LnRoZW4oZnVuY3Rpb24oYWZmaXJtYXRpdmVSZXNwb25zZSkge1xuXHRcdFx0Ly9yZXBvcnQgdGhlIHN1Y2Nlc3Ncblx0XHRcdCRsb2cuaW5mbyhhZmZpcm1hdGl2ZVJlc3BvbnNlKTtcblx0XHR9KVxuXHRcdC50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdFx0Ly9pZiB0aGVyZSB3YXMgYW4gdXBkYXRlZCBmaWVsZCwgcmVtb3ZlIGl0IG5vd1xuXHRcdFx0Y3VycmVudFVzZXIuY2xlYW5EQkV2ZW50c0NhdGVnb3J5KCdob3N0aW5nJyk7XG5cblx0XHR9KVxuXHRcdC5jYXRjaChmdW5jdGlvbihlcnJvclJlc3BvbnNlKSB7XG5cdFx0XHQvL3JlcG9ydCB0aGUgZXJyb3Jcblx0XHRcdCRsb2cuaW5mbyhlcnJvclJlc3BvbnNlKTtcblx0XHR9KVxuXHRcdFxuXG5cdFx0Ly9yZWRpcmVjdCB0byB0aGUgbmV3IGV2ZW50IHBhZ2VcdFx0XG5cdFx0bmV3RXZlbnRTaGVycGEucmVkaXJlY3RUbygnL2V2ZW50JywgZXZlbnRJRCwgY3VycmVudFVzZXIuZ2V0VUlETG9jYWxseSgpLCBjdXJyZW50VXNlci5nZXRVSURMb2NhbGx5KCkpO1xuXHR9XG5cblx0Ly9leGVjdXRlIHNjcmlwdHNcblx0aW5pdGlhbGl6ZSgpO1xuXG59XG5cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ1VzZXJJbmZvcm1hdGlvbkNvbnRyb2xsZXInLCBVc2VySW5mb3JtYXRpb25Db250cm9sbGVyKTtcblxuVXNlckluZm9ybWF0aW9uQ29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJywgJyRkb2N1bWVudCcsICckcm91dGVQYXJhbXMnLCd1c2VyRGF0YScsICd0cmFmZmljVmFsZXQnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBVc2VySW5mb3JtYXRpb25Db250cm9sbGVyKCRsb2csICRkb2N1bWVudCwgJHJvdXRlUGFyYW1zLCB1c2VyRGF0YSwgdHJhZmZpY1ZhbGV0KSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdFxuXHQvL2xvY2FsIHZhcmlhYmxlc1xuXHR2YXIgY3VycmVudFVzZXIgPSB1c2VyRGF0YTtcblxuXHQvL3ZpZXcgbW9kZWwgdmFyaWFibGVzXG5cdHZtLnVzZXIgPSB7fTtcblx0dm0udGVtcEJpcnRoZGF5O1xuXHR2bS52aWV3ID0ge1xuXHRcdGRhdGFUb1NhdmU6IGZhbHNlLFxuXHRcdGlzRGF0YTogZmFsc2UsXG5cdFx0YnRuTXNzZzogJ01vdmUgT24uLi4nLFxuXHRcdHByb2NlZWRCdG46ICdidG4gYnRuLXByaW1hcnknXG5cdH07XG5cblx0Ly9sb2NhbCBtZXRob2RzXG5cdGZ1bmN0aW9uIHVuaXhUaW1lVG9EYXRlVGltZSh1bml4VGltZSkge1xuXHRcdHJldHVybiBuZXcgRGF0ZShwYXJzZUludCh1bml4VGltZSkpO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIGRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fTtcblxuXHQvL3ZpZXcgYWNjZXNzaWJsZSBtZXRob2RzXG5cdHZtLmNoZWNrVmFsdWVzID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly90aHJvdyB0aGUgaXNEYXRhIGZsYWcgaWYgc29tZXRoaW5nIGlzIHVwZGF0ZWRcblx0XHR2bS52aWV3LmlzRGF0YSA9IHRydWU7XG5cblx0XHRpZiggIShhbmd1bGFyLmlzVW5kZWZpbmVkKHZtLnVzZXIuY29tcGFueSkgfHwgdm0udXNlci5jb21wYW55ID09PSAnJykgfHwgXG5cdFx0XHQhKGFuZ3VsYXIuaXNVbmRlZmluZWQodm0udXNlci50aXRsZSkgfHwgdm0udXNlci50aXRsZSA9PT0gJycpIHx8IFxuXHRcdFx0IShhbmd1bGFyLmlzVW5kZWZpbmVkKHZtLnVzZXIuZG9iKSB8fCB2bS51c2VyLmRvYiA9PT0gJycpKSBcblx0XHR7XG5cdFx0XHR2bS52aWV3LmRhdGFUb1NhdmUgPSB0cnVlO1xuXHRcdFx0dm0udmlldy5wcm9jZWVkQnRuID0gJ2J0biBidG4tc3VjY2Vzcyc7XG5cdFx0XHR2bS52aWV3LmJ0bk1zc2cgPSAnU2F2ZSAmIENvbnRpbnVlJztcblx0XHR9IGVsc2Uge1xuXHRcdFx0dm0udmlldy5kYXRhVG9TYXZlID0gZmFsc2U7XG5cdFx0XHR2bS52aWV3LnByb2NlZWRCdG4gPSAnYnRuIGJ0bi1wcmltYXJ5Jztcblx0XHRcdHZtLnZpZXcuYnRuTXNzZyA9ICdNb3ZlIE9uLi4uJztcdFxuXHRcdH1cblxuXHR9XG5cblx0dm0udXBkYXRlRE9CID0gZnVuY3Rpb24oKSB7XG5cdFx0dm0udXNlci5kb2IgPSBkYXRlVGltZVRvVW5peFRpbWUodm0udGVtcEJpcnRoZGF5KTtcblx0XHR2bS5jaGVja1ZhbHVlcygpO1xuXHR9XG5cblx0dm0uc2F2ZUFuZE1vdmVPbiA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIHVzZXJJbmZvU2hlcnBhID0gdHJhZmZpY1ZhbGV0O1xuXHRcdHZhciBjdXJyZW50VWlkID0gY3VycmVudFVzZXIuZ2V0VUlETG9jYWxseSgpO1xuXG5cdFx0Ly9jb252ZXJ0IERPQiB0byB1bml4VGltZSBhbmQgc2F2ZVxuXHRcdGlmKHZtLnRlbXBCaXJ0aGRheSAhPT0gMCkgdm0udXBkYXRlRE9CKCk7XG5cdFx0XG5cdFx0Ly9pZiB0aGVyZSBpc24ndCBjdXJyZW50bHkgYSBkb2IsIGdyYWIgZnJvbSB0aGUgcm91dGUgcGFyYW1zXG5cdFx0aWYoY3VycmVudFVpZCA9PSAnJyB8fCBhbmd1bGFyLmlzVW5kZWZpbmVkKGN1cnJlbnRVaWQpKSB7XG5cdFx0XHRjdXJyZW50VXNlci5zZXRVSURMb2NhbGx5KCRyb3V0ZVBhcmFtcy51aWQpO1xuXHRcdH1cblxuXHRcdC8vaWYgdGhlcmUgaXMgbmV3IGRhdGEsIHNhdmUgaXRcblx0XHRpZih2bS52aWV3LmlzRGF0YSkge1xuXHRcdFx0JGxvZy5pbmZvKCdzYXZpbmcgdGhlIG5ldyBkYXRhJyk7XG5cdFx0XHRjdXJyZW50VXNlci51cGRhdGVCaW9Mb2NhbGx5KHZtLnVzZXIpO1xuXHRcdH1cblx0XHRcblx0XHQvL21vdmUgb25cblx0XHR1c2VySW5mb1NoZXJwYS5yZWRpcmVjdFRvKCcvdXNlckV2ZW50cycsIHZtLnVzZXIudWlkKVxuXHR9XG5cblx0ZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHtcblx0XHQvL2xvYWQgRmFzdENsaWNrXG5cdFx0Ly9GYXN0Q2xpY2suYXR0YWNoKCRkb2N1bWVudC5ib2R5KTtcblx0XHRcblx0XHQvL2xvYWQgdXNlckRhdGEgbG9jYWxseSBvciBmcm9tIGRiXG5cdFx0Y3VycmVudFVzZXIubG9hZEJpbygkcm91dGVQYXJhbXMudWlkKVxuXHRcdC50aGVuKGZ1bmN0aW9uKG9idGFpbmVkVXNlckRhdGEpIHtcblx0XHRcdC8vYXNzaWduIHVzZXIgdmFsdWVzXG5cdFx0XHR2bS51c2VyID0gb2J0YWluZWRVc2VyRGF0YTtcblxuXHRcdFx0Ly9idWlsZCB0ZW1wQmlydGhkYXlcblx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKG9idGFpbmVkVXNlckRhdGEuZG9iKSAmJiBvYnRhaW5lZFVzZXJEYXRhLmRvYiAhPT0gJycpIHtcblx0XHRcdFx0dm0udGVtcEJpcnRoZGF5ID0gdW5peFRpbWVUb0RhdGVUaW1lKG9idGFpbmVkVXNlckRhdGEuZG9iKVxuXHRcdFx0fVxuXG5cdFx0fSk7XG5cdFxuXHR9XG5cblx0Ly9ydW4gcHJvY2Vzc2VzXG5cdGluaXRpYWxpemUoKTsgLy93aXRoIGludGVybmV0IHVzZSB0aGUgZXZlbnQgbGlzdGVuZXIgaW5zdGVhZFxufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuZmFjdG9yeSgnYXV0aFNlcnZpY2UnLCBhdXRoU2VydmljZSk7XG5cbmF1dGhTZXJ2aWNlLiRpbmplY3QgPSBbJyRsb2cnLCAnYmFja2VuZFNlcnZpY2VzJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gYXV0aFNlcnZpY2UoJGxvZywgYmFja2VuZFNlcnZpY2VzKSB7XG5cblx0dmFyIGFsbEF1dGhTZXJ2aWNlcyA9IHtcblx0XHRpc0xvZ2dlZEluOiBpc0xvZ2dlZEluXG5cdH07XG5cblx0ZnVuY3Rpb24gaXNMb2dnZWRJbigpIHtcblx0XHQvL2NoZWNrIHRoZSB1c2VyIGF1dGhlbnRpY2Fpb24gc3RhdGVcblx0XHR2YXIgZGJBdXRoZW50aWNhdGlvbiA9IGJhY2tlbmRTZXJ2aWNlcztcblx0XHRcblx0XHRkYkF1dGhlbnRpY2F0aW9uLmNoZWNrTG9naW5TdGF0dXMoKVxuXHRcdC50aGVuKGZ1bmN0aW9uKHN0YXR1cykge1xuXHRcdFx0cmV0dXJuIHN0YXR1cztcblx0XHR9KVxuXHRcdC5jYXRjaChmdW5jdGlvbihzdGF0dXMpIHtcblx0XHRcdHJldHVybiBzdGF0dXM7XG5cdFx0fSlcblx0fVxuXHRcblx0cmV0dXJuIGFsbEF1dGhTZXJ2aWNlcztcblxufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuZmFjdG9yeSgnYmFja2VuZFNlcnZpY2VzJywgYmFja2VuZFNlcnZpY2VzKTtcblxuYmFja2VuZFNlcnZpY2VzLiRpbmplY3QgPSBbJyRsb2cnLCAnJHEnLCAnJHdpbmRvdyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGJhY2tlbmRTZXJ2aWNlcygkbG9nLCAkcSwgJHdpbmRvdykge1xuXHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdHZhciBmYlVSTCA9ICdodHRwczovL21lZXR1cHBsYW5uZXIuZmlyZWJhc2Vpby5jb20vJztcblx0dmFyIGFsbEJhY2tlbmRTZXJ2aWNlcyA9IHtcblx0XHR1dGY4X3RvX2I2NDogdXRmOF90b19iNjQsIFx0XHRcdFx0XHRcdC8vbG9jYWwgZnVuY3Rpb25zIHRvIGNvbnZlcnQgZGF0ZXNcblx0XHRiNjRfdG9fdXRmODogYjY0X3RvX3V0ZjgsXG5cdFx0dW5peFRpbWVUb0RhdGVUaW1lOiB1bml4VGltZVRvRGF0ZVRpbWUsXG5cdFx0ZGF0ZVRpbWVUb1VuaXhUaW1lOiBkYXRlVGltZVRvVW5peFRpbWUsXG5cblx0XHRMb2dpblJlZ2lzdGVyZWRVc2VyOiBMb2dpblJlZ2lzdGVyZWRVc2VyLFx0XHQvL2F1dGhlbnRpY2Fpb25cblx0XHRjaGVja0xvZ2luU3RhdHVzOiBjaGVja0xvZ2luU3RhdHVzLFxuXHRcdGxvZ1VzZXJPdXQ6IGxvZ1VzZXJPdXQsXG5cblx0XHRkb3dubG9hZFVzZXJEYXRhOiBkb3dubG9hZFVzZXJEYXRhLFx0XHRcdFx0Ly9nZXR0ZXIgbWV0aG9kc1xuXHRcdGdldFVzZXJCaW86IGdldFVzZXJCaW8sXG5cdFx0Z2V0VXNlckV2ZW50czogZ2V0VXNlckV2ZW50cyxcblx0XHRnZXRBSG9zdGVkRXZlbnQ6IGdldEFIb3N0ZWRFdmVudCxcblx0XHRnZXRBbkludml0ZWRFdmVudDogZ2V0QW5JbnZpdGVkRXZlbnQsXG5cblx0XHRjcmVhdGVOZXdVc2VyOiBjcmVhdGVOZXdVc2VyLFx0XHRcdFx0XHQvL3NldHRlciBNZXRob2RzXG5cdFx0YWRkTmV3VXNlclRvRGF0YWJhc2U6IGFkZE5ld1VzZXJUb0RhdGFiYXNlLFxuXHRcdGFkZE5ld1VzZXJUb1JlZ1VzZXJzTGlzdDogYWRkTmV3VXNlclRvUmVnVXNlcnNMaXN0LFxuXHRcdHVwbG9hZFVzZXJEYXRhOiB1cGxvYWRVc2VyRGF0YSxcblx0XHR1cGxvYWRVc2VyQmlvOiB1cGxvYWRVc2VyQmlvLFxuXHRcdGNyZWF0ZUhvc3RlZEV2ZW50OiBjcmVhdGVIb3N0ZWRFdmVudCxcblx0XHRkZWxldGVVcGRhdGVGaWVsZDogZGVsZXRlVXBkYXRlRmllbGQsXG5cblx0XHR0aGVyZVdhc0FuVXBkYXRlRmllbGQ6IHRoZXJlV2FzQW5VcGRhdGVGaWVsZFx0Ly9tb2RlbCBtYWludGFpbmFuY2Vcblx0fTtcblxuXHRmdW5jdGlvbiB1dGY4X3RvX2I2NChzdHIpIHtcblx0XHRyZXR1cm4gYnRvYShzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gYjY0X3RvX3V0Zjgoc3RyKSB7XG4gICAgXHRyZXR1cm4gYXRvYihzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKSB7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KHVuaXhUaW1lKSk7XG5cdH1cblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH1cblxuXHRmdW5jdGlvbiBjcmVhdGVOZXdVc2VyKGVtYWlsLCBwYXNzd29yZCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZmlyZUJhc2VBY2NvdW50cyA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0XG5cdFx0Ly9yZXR1cm4gYSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XG5cdFx0XHRmaXJlQmFzZUFjY291bnRzLmNyZWF0ZVVzZXIoe1xuXHRcdFx0XHRcblx0XHRcdFx0ZW1haWw6IGVtYWlsLFxuXHRcdFx0XHRwYXNzd29yZDogcGFzc3dvcmRcblx0XHRcdFxuXHRcdFx0fSxmdW5jdGlvbihlcnJvciwgdXNlckRhdGEpIHtcblx0XHRcdFx0XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoJ0Vycm9yIGNyZWF0aW5nIHVzZXI6ICcgKyBlcnJvcik7XG5cblx0XHRcdFx0ZWxzZSByZXNvbHZlKHVzZXJEYXRhKTtcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBhZGROZXdVc2VyVG9EYXRhYmFzZSh1aWQsIG5hbWUsIGVtYWlsKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciBhcHBVc2VycyA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpO1xuXHRcdHZhciBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XG5cblx0XHQvL3JldHVybiBhIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcblx0XHRcdGFwcFVzZXJzLnNldCh7IFxuXHRcdFx0XHQnYmlvJzoge1xuXHRcdFx0XHRcdCd1aWQnOiB1aWQsXG5cdFx0XHRcdFx0J25hbWUnOiBuYW1lLFxuXHRcdFx0XHRcdCdlbWFpbCc6IGVtYWlsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdCdldmVudHMnOiB7XG5cdFx0XHRcdFx0J3BlbmRpbmcnOiB7XG5cdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdCdob3N0aW5nJzoge1xuXHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQnYXR0ZW5kaW5nJzoge1xuXHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQnY29tcGxldGVkJzoge1xuXHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblxuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KCdEYXRhIGNvdWxkIG5vdCBiZSBzYXZlZDogJyArIGVycm9yKTtcblx0XHRcdFx0XG5cdFx0XHRcdGVsc2UgcmVzb2x2ZSgnRGF0YSBzYXZlZCBzdWNjZXNzZnVsbHkuJyk7XG5cblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGFkZE5ld1VzZXJUb1JlZ1VzZXJzTGlzdCh1aWQsIGVtYWlsKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciBiNjRFbWFpbCA9IHV0ZjhfdG9fYjY0KGVtYWlsKTtcblx0XHR2YXIgUmVnaXN0ZXJlZFVzZXJzTGlzdCA9IGFwcC5jaGlsZCgnVWlkcycpLmNoaWxkKGI2NEVtYWlsKTtcblxuXHRcdC8vcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFxuXHRcdFx0UmVnaXN0ZXJlZFVzZXJzTGlzdC5zZXQodWlkLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KFwiRGF0YSBjb3VsZCBub3QgYmUgc2F2ZWQuIFwiICsgZXJyb3IpO1xuXHRcdFx0XHRlbHNlIHJlc29sdmUoXCJ1aWQgY3JlYXRlZCBzdWNlc3NmdWxseS5cIik7XG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBMb2dpblJlZ2lzdGVyZWRVc2VyKGVtYWlsLCBwYXNzd29yZCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHRcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHRcdC8vYXV0aGVudGljYXRlIHRoZSB1c2VyXG5cdFx0XHRhcHAuYXV0aFdpdGhQYXNzd29yZCh7XG5cblx0XHRcdFx0ZW1haWw6IGVtYWlsLFxuXHRcdFx0XHRwYXNzd29yZDogcGFzc3dvcmRcblxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IsIGF1dGhEYXRhKSB7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdHJlamVjdCgnRXJyb3IgTG9nZ2luZyBJbjogJyArIGVycm9yKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ0xvZ2dlZCBJbiBzdWNjZXNzZnVsbHk6ICcgKyBhdXRoRGF0YS51aWQpO1xuXHRcdFx0XHRcdHJlc29sdmUoYXV0aERhdGEpO1xuXHRcdFx0XHR9XG5cblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cdFx0XG5cdH1cblxuXHRmdW5jdGlvbiBjaGVja0xvZ2luU3RhdHVzKCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFxuXHRcdFx0YXBwLm9uQXV0aChmdW5jdGlvbihhdXRoRGF0YSkge1xuXHRcdFx0XHRpZiAoYXV0aERhdGEpIHtcblx0XHRcdFx0ICAgICRsb2cuaW5mbyhcIlVzZXIgXCIgKyBhdXRoRGF0YS51aWQgKyBcIiBpcyBsb2dnZWQgaW4gd2l0aCBcIiArIGF1dGhEYXRhLnByb3ZpZGVyKTtcblx0XHRcdFx0ICAgIHJlc29sdmUodHJ1ZSk7XG5cdFx0XHRcdCAgfSBlbHNlIHtcblx0XHRcdFx0ICAgICRsb2cuaW5mbyhcIlVzZXIgaXMgbG9nZ2VkIG91dFwiKTtcblx0XHRcdFx0ICAgIHJlc29sdmUoZmFsc2UpO1xuXHRcdFx0XHQgIH1cblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBsb2dVc2VyT3V0KCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHRcdCRsb2cuaW5mbygnbG9nZ2luZyB1c2VyIG91dCcpO1xuXHRcdGFwcC51bmF1dGgoKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHVwbG9hZFVzZXJEYXRhKGFsbFVzZXJEYXRhKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciB1aWQgPSBhbGxVc2VyRGF0YS51aWQ7XG5cdFx0dmFyIHJlbW90ZVVzZXIgPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKTtcblxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly90aGUgYWN0dWFsIGNhbGxcblx0XHRcdHJlbW90ZVVzZXIudXBkYXRlKGFsbFVzZXJEYXRhLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KCdUaGVyZSB3YXMgYSBwcm9ibGVtIHVwZGF0aW5nIHRoYXQgcmVjb3JkOiAnICsgZXJyb3IpO1xuXHRcdFx0XHRlbHNlIHJlc29sdmUoJ2FsbCB1c2VyIGRhdGEgdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5Jyk7XG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXHRcdFxuXHR9XG5cblx0ZnVuY3Rpb24gdXBsb2FkVXNlckJpbyhjdXJyZW50VXNlckJpbykge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgdWlkID0gKGN1cnJlbnRVc2VyQmlvLnVpZCkudG9TdHJpbmcoKTtcblx0XHR2YXIgcmVtb3RlVXNlckJpbyA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdiaW8nKTtcblxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHQvL2NhbGwgdG8gdGhlIGRiXG5cdFx0XHRyZW1vdGVVc2VyQmlvLnVwZGF0ZShjdXJyZW50VXNlckJpbywgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdCgnVGhlcmUgd2FzIGEgcHJvYmxlbSB1cGRhdGluZyB0aGF0IHJlY29yZDogJyArIGVycm9yKTtcblx0XHRcdFx0ZWxzZSByZXNvbHZlKCdhbGwgdXNlciBiaW8gZGF0YSB1cGxvYWRlZCBzdWNjZXNzZnVsbHknKTtcblx0XHRcdH0pXG5cblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGRvd25sb2FkVXNlckRhdGEoKSB7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGdldFVzZXJCaW8odWlkKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciB1c2VyQmlvID0gYXBwLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2JpbycpO1xuXG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL3RoZSBhY3R1YWwgY2FsbFxuXHRcdFx0dXNlckJpby5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHRcdC8vd2hlbiB0aGUgY2FsbCBpcyBzdWNjZXNzZnVsIHJldHVybiB0aGUgZGF0YVxuXHRcdFx0XHRyZXNvbHZlKHNuYXBzaG90LnZhbCgpKTtcblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSB7XG5cdFx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHRcdFx0fSBcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBjcmVhdGVIb3N0ZWRFdmVudCh1aWQsIG5ld0V2ZW50KSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciBldmVudElEID0gbmV3RXZlbnQuaWQ7XG5cdFx0dmFyIG5ld0hvc3RlZEV2ZW50ID0gYXBwLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdob3N0aW5nJykuY2hpbGQoZXZlbnRJRCk7XG5cblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFxuXHRcdFx0Ly9jYWxsIHRvIGZpcmViYXNlXG5cdFx0XHRuZXdIb3N0ZWRFdmVudC5zZXQobmV3RXZlbnQsIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoJ1RoZXJlIHdhcyBhbiBlcnJvcjogJyArIGVycm9yKTtcblx0XHRcdFx0ZWxzZSByZXNvbHZlKCdOZXcgZXZlbnQgc2F2ZWQgdG8gREIgc3VjY2Vzc2Z1bGx5Jyk7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBnZXRVc2VyRXZlbnRzKHVpZCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgdXNlckV2ZW50cyA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKTtcblx0XHRcblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vdGhlIGFjdHVhbCBjYWxsXG5cdFx0XHR1c2VyRXZlbnRzLm9yZGVyQnlLZXkoKS5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHRcdHZhciB1c2VyUHJvZmlsZSA9IHNuYXBzaG90LnZhbCgpO1xuXG5cdFx0XHRcdC8vd2hlbiB0aGUgY2FsbCBpcyBzdWNjZXNzZnVsIHJldHVybiB0aGUgZGF0YVxuXHRcdFx0XHR2YXIgZXZlbnRzUGFja2FnZSA9IHtcblx0XHRcdFx0XHRob3N0aW5nOiB1c2VyUHJvZmlsZS5ob3N0aW5nLFxuXHRcdFx0XHRcdGF0dGVuZGluZzogdXNlclByb2ZpbGUuYXR0ZW5kaW5nLFxuXHRcdFx0XHRcdHBlbmRpbmc6IHVzZXJQcm9maWxlLnBlbmRpbmcsXG5cdFx0XHRcdFx0Y29tcGxldGVkOiB1c2VyUHJvZmlsZS5jb21wbGV0ZWRcblx0XHRcdFx0fTtcblxuXHRcdFx0XHRyZXNvbHZlKGV2ZW50c1BhY2thZ2UpO1xuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0XHR9IFxuXHRcdFx0fSk7XG5cblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldEFIb3N0ZWRFdmVudCh1aWQsIGV2ZW50SWQpIHtcblxuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgaG9zdGVkRXZlbnQgPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ2hvc3RpbmcnKS5jaGlsZChldmVudElkKTtcblxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly90aGUgYWN0dWFsIGNhbGxcblx0XHRcdGhvc3RlZEV2ZW50Lm9uY2UoJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdFx0dmFyIHNlbGVjdEV2ZW50ID0gc25hcHNob3QudmFsKCk7XG5cblx0XHRcdFx0cmVzb2x2ZShzZWxlY3RFdmVudCk7XG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KGVycm9yKTtcblx0XHRcdH0pXG5cdFx0fSlcblx0fVxuXG5cdGZ1bmN0aW9uIGdldEFuSW52aXRlZEV2ZW50KGhvc3RJZCwgdWlkLCBldmVudElkKSB7fVxuXG5cdGZ1bmN0aW9uIGRlbGV0ZVVwZGF0ZUZpZWxkKGNhdGVnb3J5LCB1aWQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIGNhdFJlbW92aW5nRnJvbSA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZChjYXRlZ29yeSkuY2hpbGQoJ3VwZGF0ZWQnKTtcblxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Y2F0UmVtb3ZpbmdGcm9tLnNldChudWxsLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3IgZGVsZXRpbmcgdXBkYXRlIGZpZWxkOiAnICsgZXJyb3IpO1xuXHRcdFx0XHRlbHNlIHJlc29sdmUoJ0RlbGV0ZWQgdXBkYXRlIHN1Y2Nlc3NmdWxseScpO1xuXHRcdFx0fSlcblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gdGhlcmVXYXNBblVwZGF0ZUZpZWxkKGNhdGVnb3J5LCB1aWQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIGNhdFRvQ2hlY2sgPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoY2F0ZWdvcnkpO1xuXG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL2NhbGwgdGhlIGRiXG5cdFx0XHRjYXRUb0NoZWNrLm9uY2UoJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdFx0Ly9zYXZlIHRoZSByZXNwb25zZVxuXHRcdFx0XHR2YXIgY3VycmVudENhdE1vZGVsID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHRcdC8vc2hvdyB3aGF0IHdhcyBmb3VuZFxuXHRcdFx0XHQvL2xvb2sgZm9yIHRoZSB1cGRhdGUgZmllbGRcblx0XHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoY3VycmVudENhdE1vZGVsWyd1cGRhdGVkJ10pKSByZXNvbHZlKHRydWUpO1xuXHRcdFx0XHRlbHNlIHJlamVjdChmYWxzZSk7XG5cblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoZXJyb3IpO1xuXHRcdFx0fSlcblx0XHR9KTtcblx0fVxuXG5cdC8vcmV0dXJuIHRoZSBvYmplY3Rcblx0cmV0dXJuIGFsbEJhY2tlbmRTZXJ2aWNlcztcbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmZhY3RvcnkoJ3RyYWZmaWNWYWxldCcsIHRyYWZmaWNWYWxldCk7XG5cbnRyYWZmaWNWYWxldC4kaW5qZWN0ID0gWyckbG9nJywgJyRsb2NhdGlvbiddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHRyYWZmaWNWYWxldCgkbG9nLCAkbG9jYXRpb24pIHtcblx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHR2YXIgYWxsVHJhZmZpY0NvbnRyb2xzID0ge1xuXHRcdHJlZGlyZWN0VG86IHJlZGlyZWN0VG8sXG5cdFx0ZXZlbnRSb3V0ZTogZXZlbnRSb3V0ZVxuXHR9O1xuXG5cdGZ1bmN0aW9uIHJlZGlyZWN0VG8ocGF0aCwgcGFyYW0xLCBwYXJhbTIsIHBhcmFtMykge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHBhcmFtMSkpIHtcblx0XHRcdHBhdGggPSBwYXRoICsgJy8nICsgcGFyYW0xO1xuXG5cdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChwYXJhbTIpKSB7XG5cdFx0XHRcdC8vZ28gdG8gcGF0aCB3aXRoIDIgcGFyYW1zXG5cdFx0XHRcdHBhdGggPSBwYXRoICsgJy8nICsgcGFyYW0yO1xuXG5cdFx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHBhcmFtMykpIHtcblx0XHRcdFx0XHRwYXRoID0gcGF0aCArICcvJyArIHBhcmFtMztcblxuXHRcdFx0XHRcdCRsb2cuaW5mbygncmVkaXJlY3Rpbmcgbm93IHRvICcgKyBwYXRoKTtcblx0XHRcdFx0XHQkbG9jYXRpb24ucGF0aChwYXRoKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdCRsb2cuaW5mbygncmVkaXJlY3Rpbmcgbm93IHRvICcgKyBwYXRoKTtcblx0XHRcdFx0JGxvY2F0aW9uLnBhdGgocGF0aCk7XG5cdFx0XHR9XG5cdFx0XHQvL2dvIHdpdGggMSBwYXJhbVxuXHRcdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyBub3cgdG8gJyArIHBhdGgpO1xuXHRcdFx0JGxvY2F0aW9uLnBhdGgocGF0aCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vanVzdCBnbyB0byBwYXRoXG5cdFx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIG5vdyB0byAnICsgcGF0aCk7XG5cdFx0XHQkbG9jYXRpb24ucGF0aChwYXRoKTtcblx0XHR9XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGV2ZW50Um91dGUoZXZlbnRJZCwgaG9zdElkLCB1c2VySWQsIHNlY3Rpb24pIHtcblx0XHQkbG9nLmluZm8oJ1RyYWZmaWMgdmFsZXQgYWNjZXNzZWQnKTtcblx0XHQkbG9nLmluZm8oJ2V2ZW50SWQ6ICcgKyBldmVudElkKTtcblx0XHQkbG9nLmluZm8oJ2hvc3RJZDogJyArIGhvc3RJZCk7XG5cdFx0JGxvZy5pbmZvKCd1c2VySWQ6ICcgKyB1c2VySWQpO1xuXG5cdFx0Ly9pZiB0aGVyZSBpc24ndCBhIHNlY3Rpb24gc2V0IHRvIGRlZmF1bHRcblx0XHRpZihhbmd1bGFyLmlzVW5kZWZpbmVkKHNlY3Rpb24pKSBzZWN0aW9uID0gMTtcblxuXHRcdC8vaWYgdGhlIGhvc3RJZCBhbmQgdXNlcklkIG1hdGNoLCBsYXVuY2ggaG9zdCB2aWV3XG5cdFx0aWYoaG9zdElkID09PSB1c2VySWQpIHsgXG5cdFx0XHR2YXIgcGF0aCA9ICcvZXZlbnQvaG9zdC8nICsgZXZlbnRJZCArICcvJyArIHVzZXJJZCArICcvJysgc2VjdGlvbjtcblx0XHRcdCRsb2cuaW5mbyhwYXRoKTtcblx0XHRcdC8vcmVkaXJlY3Rcblx0XHRcdCRsb2NhdGlvbi5wYXRoKHBhdGgpO1xuXHRcdH1cblx0XHQvL2lmIHRoZSBob3N0SWQgYW5kIHVzZXJJZCBET04nVCBtYXRjaCwgbGF1bmNoIGd1ZXN0IHZpZXdcblx0XHRlbHNlIHtcblx0XHRcdHZhciBwYXRoID0gJy9ldmVudC9ndWVzdC8nICsgZXZlbnRJZCArICcvJyArIHVzZXJJZCArICcvJyArIGhvc3RJZDtcblx0XHRcdCRsb2cuaW5mbyhwYXRoKTtcblx0XHRcdC8vcmVkaXJlY3Rcblx0XHRcdCRsb2NhdGlvbi5wYXRoKHBhdGgpO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBhbGxUcmFmZmljQ29udHJvbHM7XG59XG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5mYWN0b3J5KCd1c2VyRGF0YScsIHVzZXJEYXRhKTtcblxudXNlckRhdGEuJGluamVjdCA9IFsnJGxvZycsICckcScsICdiYWNrZW5kU2VydmljZXMnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiB1c2VyRGF0YSgkbG9nLCAkcSwgYmFja2VuZFNlcnZpY2VzKSB7XG5cdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0dmFyIGN1cnJlbnRVc2VyID0ge1xuXHRcdGJpbzogeyBcblx0XHRcdHVpZDogJycsXG5cdFx0XHRuYW1lOiAnJyxcblx0XHRcdGVtYWlsOiAnJyxcblx0XHRcdGNvbXBhbnk6ICcnLFxuXHRcdFx0dGl0bGU6ICcnLFxuXHRcdFx0ZG9iOiAwXG5cdFx0fSxcblx0XHRldmVudHM6IHtcblx0XHRcdGhvc3Rpbmc6IHt9LFxuXHRcdFx0cGVuZGluZzoge30sXG5cdFx0XHRhdHRlbmRpbmc6IHt9LFxuXHRcdFx0Y29tcGxldGVkOiB7fVxuXHRcdH1cblx0fTtcblxuXHR2YXIgYWxsVXNlckRhdGEgPSB7XG5cdFx0YmlvUHJpbWFyaWVzQXJlQ29tcGxldGVMb2NhbGx5OiBiaW9QcmltYXJpZXNBcmVDb21wbGV0ZUxvY2FsbHksXHRcdC8vbW9kYWwgYW5hbHlzaXNcblx0XHRldmVudEV4aXN0c0xvY2FsbHk6IGV2ZW50RXhpc3RzTG9jYWxseSxcblx0XHR0aGlzSXNUaGVIb3N0RW1haWw6IHRoaXNJc1RoZUhvc3RFbWFpbCxcblxuXHRcdGNsZWFuRXZlbnRzOiBjbGVhbkV2ZW50cyxcdFx0XHRcdFx0XHRcdC8vbW9kZWwgbWFpbnRhaW5hbmNlXG5cblx0XHRnZXRVSURMb2NhbGx5OiBnZXRVSURMb2NhbGx5LFx0XHRcdFx0XHRcdC8vZ2V0dGVyIE1ldGhvZHNcblx0XHRnZXROYW1lTG9jYWxseTogZ2V0TmFtZUxvY2FsbHksXG5cdFx0Z2V0RW1haWxMb2NhbGx5OiBnZXRFbWFpbExvY2FsbHksXG5cdFx0Z2V0Q29tcGFueUxvY2FsbHk6IGdldENvbXBhbnlMb2NhbGx5LFxuXHRcdGdldFRpdGxlTG9jYWxseTogZ2V0VGl0bGVMb2NhbGx5LFxuXHRcdGdldERPQkxvY2FsbHk6IGdldERPQkxvY2FsbHksXG5cdFx0Z2V0RnVsbEJpb0xvY2FsbHk6IGdldEZ1bGxCaW9Mb2NhbGx5LFxuXHRcdGdldE9uZVVzZXJFdmVudExvY2FsbHk6IGdldE9uZVVzZXJFdmVudExvY2FsbHksXG5cdFx0Z2V0VXNlckV2ZW50c0xvY2FsbHk6IGdldFVzZXJFdmVudHNMb2NhbGx5LFxuXHRcdGdldEFsbFVzZXJFdmVudHNMb2NhbGx5OiBnZXRBbGxVc2VyRXZlbnRzTG9jYWxseSxcblxuXHRcdHNldFVJRExvY2FsbHk6IHNldFVJRExvY2FsbHksXHRcdFx0XHRcdFx0Ly9zZXR0ZXIgTWV0aG9kc1xuXHRcdHNldE5hbWVMb2NhbGx5OiBzZXROYW1lTG9jYWxseSxcblx0XHRzZXRFbWFpbExvY2FsbHk6IHNldEVtYWlsTG9jYWxseSxcblx0XHRzZXRDb21wYW55TG9jYWxseTogc2V0Q29tcGFueUxvY2FsbHksXG5cdFx0c2V0VGl0bGVMb2NhbGx5OiBzZXRUaXRsZUxvY2FsbHksXG5cdFx0c2V0RE9CTG9jYWxseTogc2V0RE9CTG9jYWxseSxcblx0XHRzZXRQcmltYXJpZXNMb2NhbGx5OiBzZXRQcmltYXJpZXNMb2NhbGx5LFxuXHRcdHVwZGF0ZVVzZXJFdmVudHNMb2NhbGx5OiB1cGRhdGVVc2VyRXZlbnRzTG9jYWxseSxcblx0XHR1cGRhdGVBbGxVc2VyRXZlbnRzTG9jYWxseTogdXBkYXRlQWxsVXNlckV2ZW50c0xvY2FsbHksXG5cdFx0dXBkYXRlQmlvTG9jYWxseTogdXBkYXRlQmlvTG9jYWxseSxcblxuXHRcdHJlbW92ZVVzZXJFdmVudHNMb2NhbGx5OiByZW1vdmVVc2VyRXZlbnRzTG9jYWxseSwgXHQvL3JlbW92ZSBkYXRhXG5cdFx0XG5cdFx0Z2V0RnVsbFJlbW90ZURCZm9yTG9jYWw6IGdldEZ1bGxSZW1vdGVEQmZvckxvY2FsLFx0Ly9sb2NhbC1yZW1vdGUgaW50ZXJhY2lvbnNcblx0XHRnZXRSZW1vdGVCaW9Gb3JMb2NhbDogZ2V0UmVtb3RlQmlvRm9yTG9jYWwsXHRcdFx0XG5cdFx0Z2V0UmVtb3RlRXZlbnRzRm9yTG9jYWw6IGdldFJlbW90ZUV2ZW50c0ZvckxvY2FsLFxuXHRcdGdldE9uZVJlbW90ZUV2ZW50Rm9yTG9jYWw6IGdldE9uZVJlbW90ZUV2ZW50Rm9yTG9jYWwsXG5cdFx0c2V0RnVsbFJlbW90ZURCZnJvbUxvY2FsOiBzZXRGdWxsUmVtb3RlREJmcm9tTG9jYWwsXG5cdFx0c2V0UmVtb3RlQmlvRnJvbUxvY2FsOiBzZXRSZW1vdGVCaW9Gcm9tTG9jYWwsXG5cdFx0c2V0UmVtb3RlRXZlbnRzRnJvbUxvY2FsOiBzZXRSZW1vdGVFdmVudHNGcm9tTG9jYWwsXG5cdFx0Y2xlYW5EQkV2ZW50c0NhdGVnb3J5OiBjbGVhbkRCRXZlbnRzQ2F0ZWdvcnksXG5cblx0XHRsb2FkQmlvOiBsb2FkQmlvLFx0XHRcdFx0XHRcdFx0XHRcdC8vZXh0ZXJuYWwgbWV0aG9kc1xuXHRcdGxvYWRFdmVudHNQcm9ncmVzc2l2ZWx5OiBsb2FkRXZlbnRzUHJvZ3Jlc3NpdmVseSxcblx0XHRsb2FkQW5FdmVudFByb2dyZXNzaXZlbHk6IGxvYWRBbkV2ZW50UHJvZ3Jlc3NpdmVseSxcblx0XHRjcmVhdGVOZXdFdmVudDogY3JlYXRlTmV3RXZlbnRcblx0fVxuXG5cdC8vYW5hbHlzaXMgbWV0aG9kc1xuXHRmdW5jdGlvbiBiaW9QcmltYXJpZXNBcmVDb21wbGV0ZUxvY2FsbHkoKSB7XG5cdFx0aWYoIGN1cnJlbnRVc2VyLmJpby51aWQgIT09ICcnICYmXG5cdFx0XHRjdXJyZW50VXNlci5iaW8ubmFtZSAhPT0gJycgJiZcblx0XHRcdGN1cnJlbnRVc2VyLmJpby5lbWFpbCAhPT0gJydcblx0XHRcdClcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdGVsc2UgcmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0ZnVuY3Rpb24gZXZlbnRFeGlzdHNMb2NhbGx5KHR5cGUsIGV2ZW50SWQpIHtcblx0XHQkbG9nLmluZm8oJ2NoZWNraW5nIGlmIHRoZSBldmVudCBleGl0cycpO1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXVtldmVudElkXSkpIHJldHVybiB0cnVlO1xuXHRcdGVsc2UgcmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0ZnVuY3Rpb24gdGhpc0lzVGhlSG9zdEVtYWlsKGVtYWlsLCB1aWQsIGV2ZW50SWQpIHtcblx0XHQkbG9nLmluZm8oJ2N1cnJlbnQgdXNlciBiaW8gaXM6Jyk7XG5cdFx0JGxvZy5pbmZvKGN1cnJlbnRVc2VyLmJpbyk7XG5cdFx0Ly9jaGVjayBpZiBhIGJpbyBpcyBsb2FkZWRcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChjdXJyZW50VXNlci5iaW8uZW1haWwpKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2VtYWlsIGlzIGRlZmluZWQnKTtcblx0XHRcdGlmKGN1cnJlbnRVc2VyLmJpby5lbWFpbCAhPSAnJykge1xuXHRcdFx0XHQvL2NoZWNrIGZvciBhIG1hdGNoXG5cdFx0XHRcdGlmKGVtYWlsID09IGN1cnJlbnRVc2VyLmJpby5lbWFpbCkge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnZW1haWwgbWF0Y2hlcycpO1xuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnZW1haWwgZG9lcyBub3QgbWF0Y2gnKTtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblxuXHRcdFx0fSBcblx0XHRcdFxuXHRcdH0gXG5cdFx0XG5cdFx0Ly9pZiB0aGF0IGRpZG4ndCB3b3JrIGNoZWNrIHRoZSBjdXJyZW50IGV2ZW50XG5cdFx0JGxvZy5pbmZvKCdjdXJyZW50IGV2ZW50IGlzOicpO1xuXHRcdCRsb2cuaW5mbyhjdXJyZW50VXNlci5ldmVudHMuaG9zdGluZ1tldmVudElkXSk7XG5cdFx0aWYoY3VycmVudFVzZXIuZXZlbnRzLmhvc3RpbmdbZXZlbnRJZF0uaG9zdC5lbWFpbCA9PSBlbWFpbCkge1xuXHRcdFx0JGxvZy5pbmZvKCdldmVudCBob3N0IGVtYWlsIG1hdGNoZXMnKTtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkbG9nLmluZm8oJ2V2ZW50IGhvc3QgZW1haWwgRE9FU05cXCdUIG5vdCBtYXRjaCcpO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRcblx0fVxuXG5cdC8vbW9kZWwgbWFpbnRhaW5hbmNlXG5cdGZ1bmN0aW9uIGNsZWFuRXZlbnRzKHR5cGUpIHtcblx0XHQvL2l0ZXJhdGUgdGhyb3VnaCBvYmplY3RzIGluIG9iamVjdFxuXHRcdE9iamVjdC5rZXlzKGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXSkuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcblx0XHRcdC8vaWYgYW55IGFyZSBub24tb2JqZWN0cywgZGVsZXRlIHRoZW1cblx0XHRcdGlmKCFhbmd1bGFyLmlzT2JqZWN0KGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXVtrZXldKSkge1xuXHRcdFx0XHRkZWxldGUgY3VycmVudFVzZXIuZXZlbnRzW3R5cGVdW2tleV07XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHQvL2dldHRlciBtZXRob2RzXG5cdGZ1bmN0aW9uIGdldFVJRExvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmJpby51aWQ7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXROYW1lTG9jYWxseSgpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuYmlvLm5hbWU7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRFbWFpbExvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmJpby5lbWFpbDtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldENvbXBhbnlMb2NhbGx5KCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5iaW8uY29tcGFueTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldFRpdGxlTG9jYWxseSgpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuYmlvLnRpdGxlO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXRET0JMb2NhbGx5KCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5iaW8uZG9iO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0RnVsbEJpb0xvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHVpZDogY3VycmVudFVzZXIuYmlvLnVpZCxcblx0XHRcdG5hbWU6IGN1cnJlbnRVc2VyLmJpby5uYW1lLFxuXHRcdFx0ZW1haWw6IGN1cnJlbnRVc2VyLmJpby5lbWFpbCxcblx0XHRcdGNvbXBhbnk6IGN1cnJlbnRVc2VyLmJpby5jb21wYW55LFxuXHRcdFx0dGl0bGU6IGN1cnJlbnRVc2VyLmJpby50aXRsZSxcblx0XHRcdGRvYjogY3VycmVudFVzZXIuYmlvLmRvYlxuXHRcdH07XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRPbmVVc2VyRXZlbnRMb2NhbGx5KHR5cGUsIGV2ZW50SWQpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuZXZlbnRzW3R5cGVdW2V2ZW50SWRdO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0VXNlckV2ZW50c0xvY2FsbHkodHlwZSkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5ldmVudHNbdHlwZV07XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRBbGxVc2VyRXZlbnRzTG9jYWxseSgpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuZXZlbnRzO1xuXHR9XG5cblx0Ly9zZXR0ZXIgbWV0aG9kc1xuXHRmdW5jdGlvbiBzZXRVSURMb2NhbGx5KHVpZCkge1xuXHRcdGN1cnJlbnRVc2VyLmJpby51aWQgPSB1aWQ7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXROYW1lTG9jYWxseShuYW1lKSB7XG5cdFx0Y3VycmVudFVzZXIuYmlvLm5hbWUgPSBuYW1lO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0RW1haWxMb2NhbGx5KGVtYWlsKSB7XG5cdFx0Y3VycmVudFVzZXIuYmlvLmVtYWlsID0gZW1haWw7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXRDb21wYW55TG9jYWxseShjb21wYW55KSB7XG5cdFx0Y3VycmVudFVzZXIuYmlvLmNvbXBhbnkgPSBjb21wYW55O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzZXRUaXRsZUxvY2FsbHkodGl0bGUpIHtcblx0XHRjdXJyZW50VXNlci5iaW8udGl0bGUgPSB0aXRsZTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldERPQkxvY2FsbHkoZG9iKSB7XG5cdFx0Y3VycmVudFVzZXIuYmlvLmRvYiA9IGRvYjtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldFByaW1hcmllc0xvY2FsbHkoZW1haWwsIG5hbWUsIHVpZCkge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGVtYWlsKSkgc2V0RW1haWxMb2NhbGx5KGVtYWlsKTtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChuYW1lKSkgZ2V0TmFtZUxvY2FsbHkobmFtZSk7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodWlkKSkgc2V0VUlETG9jYWxseSh1aWQpO1xuXHR9XG5cblx0ZnVuY3Rpb24gdXBkYXRlVXNlckV2ZW50c0xvY2FsbHkodHlwZSwgZXZlbnQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGV2ZW50SUQgPSBldmVudC5pZDtcblxuXHRcdC8vY2hlY2sgaWYgdGhlIG1vZGVsIG5lZWRzIHRvIGJlIGNsZWFuZWRcblx0XHRjbGVhbkV2ZW50cyh0eXBlKTtcblx0XHQvL3RoZW4gbG9hZCB0aGUgbmV3IGV2ZW50XG5cdFx0Y3VycmVudFVzZXIuZXZlbnRzW3R5cGVdW2V2ZW50SURdID0gZXZlbnQ7XG5cdH1cblxuXHRmdW5jdGlvbiB1cGRhdGVBbGxVc2VyRXZlbnRzTG9jYWxseShhbGxVc2VyRXZlbnRzKSB7XG5cdFx0Y3VycmVudFVzZXIuZXZlbnRzID0gYWxsVXNlckV2ZW50cztcblx0fVxuXG5cdGZ1bmN0aW9uIHVwZGF0ZUJpb0xvY2FsbHkodXNlckJpbykge1xuXHRcdC8vdXBkYXRlIGxvY2FsIHZhbHVlc1xuXHRcdHNldE5hbWVMb2NhbGx5KHVzZXJCaW8ubmFtZSk7XG5cdFx0c2V0RW1haWxMb2NhbGx5KHVzZXJCaW8uZW1haWwpO1xuXHRcdHNldENvbXBhbnlMb2NhbGx5KHVzZXJCaW8uY29tcGFueSk7XG5cdFx0c2V0VGl0bGVMb2NhbGx5KHVzZXJCaW8udGl0bGUpO1xuXHRcdHNldERPQkxvY2FsbHkodXNlckJpby5kb2IpO1xuXHRcdC8vc2F2ZSB0byBkYlxuXHRcdHNldFJlbW90ZUJpb0Zyb21Mb2NhbCgpO1xuXHR9XG5cblx0Ly9kZWxldGUgTWV0aG9kc1xuXHRmdW5jdGlvbiByZW1vdmVVc2VyRXZlbnRzTG9jYWxseSh0eXBlLCBldmVudCkge1xuXHRcdC8vZG9lcyB0aGlzIHdvcms/XG5cdFx0ZGVsZXRlIGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXVtldmVudC5pZF07XG5cdH1cblxuXHQvL3JlbW90ZS1sb2NhbCBpbnRlcmFjdGlvbiBNZXRob2RzXG5cdGZ1bmN0aW9uIGdldEZ1bGxSZW1vdGVEQmZvckxvY2FsKCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0ZGIuZG93bmxvYWRVc2VyRGF0YSgpXG5cdFx0LnRoZW4oZnVuY3Rpb24ocmVtb3RlVXNlckRhdGEpIHtcblx0XHRcdGN1cnJlbnRVc2VyID0gcmVtb3RlVXNlckRhdGE7XG5cdFx0fSlcblx0fVxuXG5cdGZ1bmN0aW9uIGdldFJlbW90ZUJpb0ZvckxvY2FsKHVpZCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXHRcdFx0XHRcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL2dvIG91dCB0byB0aGUgZGIgYmVmb3JlIHJlc29sdmluZ1xuXHRcdFx0ZGIuZ2V0VXNlckJpbyh1aWQpXG5cdFx0XHQudGhlbihmdW5jdGlvbih1c2VyQmlvKSB7XG5cblx0XHRcdFx0cmVzb2x2ZSh1c2VyQmlvKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0cmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3IgcmVhZGluZyB0aGUgdXNlciBiaW86ICcgKyBlcnJvcik7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXHRcdFxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0UmVtb3RlRXZlbnRzRm9yTG9jYWwoKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cdFx0XHRcdFxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9nbyBvdXQgdG8gdGhlIGRiIGJlZm9yZSByZXNvbHZpbmdcblx0XHRcdGRiLmdldFVzZXJFdmVudHMoZ2V0VUlETG9jYWxseSgpKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24ob2J0YWluZWRVc2VyRXZlbnRzKSB7XG5cblx0XHRcdFx0Ly9zYXZlIHRoZSByZXN1bHRzIHRvIHRoZSBsb2NhbCBkYXRhYnNlXG5cdFx0XHRcdE9iamVjdC5rZXlzKG9idGFpbmVkVXNlckV2ZW50cykuZm9yRWFjaChmdW5jdGlvbihldmVudFR5cGUpIHtcblx0XHRcdFx0XHQvL3dpdGhpbiBlYWNoIGV2ZW50IHR5cGUgaXRlcmF0ZSB0aHJvdWdoIHRoZSBhY3R1YWwgZXZlbnRzXG5cdFx0XHRcdFx0T2JqZWN0LmtleXMob2J0YWluZWRVc2VyRXZlbnRzW2V2ZW50VHlwZV0pLmZvckVhY2goZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRcdFx0XHRcdC8vb25jZSB3ZSBzZWUgdGhlIGV2ZW50cywgc2F2ZSB0aGVtIHRvIHRoZSBsb2NhbCBtb2RlbFxuXG5cdFx0XHRcdFx0XHR1cGRhdGVVc2VyRXZlbnRzTG9jYWxseShldmVudFR5cGUsIG9idGFpbmVkVXNlckV2ZW50c1tldmVudFR5cGVdW2V2ZW50XSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly9yZXR1cm4gdGhlIHJlc3VsdHMgdG8gdGhlIHJlcXVlc3Rpbmcgb2JqZWN0XG5cdFx0XHRcdHJlc29sdmUob2J0YWluZWRVc2VyRXZlbnRzKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0cmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3IgcmVhZGluZyB0aGUgdXNlciBldmVudHM6ICcgKyBlcnJvcik7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0T25lUmVtb3RlRXZlbnRGb3JMb2NhbChldmVudElkKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcblx0XHRcdC8vZ29pbmcgdG8gYmFja2VuZCBzZXJ2aWNlc1xuXHRcdFx0ZGIuZ2V0QUhvc3RlZEV2ZW50KGdldFVJRExvY2FsbHkoKSwgZXZlbnRJZClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKG9idGFpbmVkRXZlbnQpIHtcblxuXHRcdFx0XHQvL3NhdmUgdGhlIHJlc3VsdCB0byB0aGUgbG9jYWwgbW9kZWxcblx0XHRcdFx0JGxvZy5pbmZvKG9idGFpbmVkRXZlbnQpO1xuXHRcdFx0XHQvL3JldHVybiB0aGUgcmVzdWx0IHRvIHRoZSByZXF1ZXN0aW5nIG9iamVjdFxuXHRcdFx0XHRyZXNvbHZlKG9idGFpbmVkRXZlbnQpO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRyZWplY3QoJ1RoZXJlIHdhcyBhbiBlcnJvciByZWFkaW5nIHRoZSB1c2VyIGV2ZW50OiAnICsgZXJyb3IpO1xuXHRcdFx0fSlcblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldEZ1bGxSZW1vdGVEQmZyb21Mb2NhbCgpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdGRiLnVwbG9hZFVzZXJEYXRhKGN1cnJlbnRVc2VyKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldFJlbW90ZUJpb0Zyb21Mb2NhbCgpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdGRiLnVwbG9hZFVzZXJCaW8oY3VycmVudFVzZXIuYmlvKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldFJlbW90ZUV2ZW50c0Zyb21Mb2NhbCgpIHt9XG5cblx0ZnVuY3Rpb24gY2xlYW5EQkV2ZW50c0NhdGVnb3J5KGNhdGVnb3J5KSB7XG5cdFx0Ly9kZWNsYXIgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0Ly9yZW1vdmUgJ3VwZGF0ZWQnIG9iamVjdCBpZiBuZWVkIGJlXG5cdFx0Ly9kYiBjYWxsIHNvIHJldHVybiBhIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL2NoZWNrIGZvciBvYmplY3Rcblx0XHRcdGRiLnRoZXJlV2FzQW5VcGRhdGVGaWVsZChjYXRlZ29yeSwgZ2V0VUlETG9jYWxseSgpKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24oYWZmaXJtYXRpdmVSZXNwb25zZSkge1xuXHRcdFx0XHQvL2lmIHRoZXJlIHdhcyBhbiB1cGRhdGUgZmllbGQsIGRlbGV0ZSBpdFxuXHRcdFx0XHRkYi5kZWxldGVVcGRhdGVGaWVsZChjYXRlZ29yeSwgZ2V0VUlETG9jYWxseSgpKVxuXHRcdFx0XHQudGhlbihmdW5jdGlvbihhZmZpcm1hdGl2ZVJlc3BvbnNlKSB7ICRsb2cuaW5mbyhhZmZpcm1hdGl2ZVJlc3BvbnNlKTsgfSApXG5cdFx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvclJlc3BvbnNlKSB7ICRsb2cuaW5mbyhlcnJvclJlc3BvbnNlKTsgfSApXG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yUmVzcG9uc2UpIHtcblx0XHRcdFx0JGxvZy5pbmZvKGVycm9yUmVzcG9uc2UpXG5cdFx0XHR9KVxuXG5cdFx0fSk7XG5cdFx0Ly9pZiBpdCBpcyB0aGVyZSwgcmVtb3ZlIGl0XG5cdH1cblxuXHRmdW5jdGlvbiBsb2FkQmlvKHVpZCkge1xuXG5cdFx0Ly9taWdodCBuZWVkIHRvIGdvIG91dCB0byB0aGUgZGIgc28gcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9jaGVjayBmb3IgYmlvIGxvY2FsbHkgZmlyc3Rcblx0XHRcdGlmKGJpb1ByaW1hcmllc0FyZUNvbXBsZXRlTG9jYWxseSgpKSB7XG5cdFx0XHRcdFxuXHRcdFx0XHQvL3Bhc3MgaXQgYmFjayBhcyBzdWNjZXNzXG5cdFx0XHRcdHJlc29sdmUoZ2V0RnVsbEJpb0xvY2FsbHkoKSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2lmIHRoZXkncmUgbm90IGNvbXBsZXRlIGxvY2FsbHksIGNoZWNrIHRoZSBzZXJ2ZXJcblx0XHRcdFx0Z2V0UmVtb3RlQmlvRm9yTG9jYWwodWlkKVxuXHRcdFx0XHQudGhlbihmdW5jdGlvbihiaW9Gcm9tUmVtb3RlREIpIHtcblx0XHRcdFx0XHRyZXNvbHZlKGJpb0Zyb21SZW1vdGVEQik7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHRcdH0pXG5cdFx0XHR9XG5cblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gbG9hZEFuRXZlbnRQcm9ncmVzc2l2ZWx5KHVpZCwgZXZlbnRJZCkge1xuXHRcdC8vdXBkYXRlIHVpZCBpZiBuZWVkIGJlXG5cdFx0c2V0VUlETG9jYWxseSh1aWQpO1xuXG5cdFx0Ly9nb2luZyBvdXQgdGhlIHRoZSBkYiBzbyByZXR1cm4gYSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHQvL3JlYWNoIG91dCB0byBkYlxuXHRcdFx0Z2V0T25lUmVtb3RlRXZlbnRGb3JMb2NhbChldmVudElkKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24ob2J0YWluZWRVc2VyRXZlbnQpIHtcblx0XHRcdFx0Ly93aGVuIHRoZSBkYiByZXN1bHRzIGNvbWUgYmFjaywgcmV0dXJuIGl0XG5cdFx0XHRcdHJlc29sdmUob2J0YWluZWRVc2VyRXZlbnQpXG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKClcblxuXHRcdFx0Ly9maXJzdCByZXR1cm4gd2hhdGV2ZXIgZXZlbnQgaW5mbyBpcyBzdG9yZWQgbG9jYWxseVxuXHRcdFx0Ly9jaGVjayBpZiB0aGUgZXZlbnQgaXMgYXZhaWxhYmxlIGxvY2FsbHlcblx0XHRcdGlmKGV2ZW50RXhpc3RzTG9jYWxseSgnaG9zdGluZycsIGV2ZW50SWQpKSByZXNvbHZlKGdldE9uZVVzZXJFdmVudExvY2FsbHkoJ2hvc3RpbmcnLCBldmVudElkKSk7XG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGxvYWRFdmVudHNQcm9ncmVzc2l2ZWx5KHVpZCkge1xuXHRcdHZhciBldmVudFR5cGVzID0gWydhdHRlbmRpbmcnLCAncGVuZGluZycsICdob3N0aW5nJywgJ2NvbXBsZXRlZCddO1xuXHRcdHZhciBhbGxFdmVudHMgPSB7fTtcblxuXHRcdC8vd2lsbCBnbyBvdXQgdG8gdGhlIGRiIHNvIHJldHVybiBhIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHRcdGdldFJlbW90ZUV2ZW50c0ZvckxvY2FsKClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKG9idGFpbmVkVXNlckV2ZW50cykge1xuXHRcdFx0XHQvL3doZW4gdGhlIGRiIHJlc3VsdHMgY29tZSBiYWNrLCByZXR1cm4gdGhvc2Vcblx0XHRcdFx0cmVzb2x2ZShvYnRhaW5lZFVzZXJFdmVudHMpO1xuXHRcdFx0fSlcblxuXHRcdFx0Ly9idWlsZCB0aGUgbG9jYWwgbW9kZWxcblx0XHRcdGFsbEV2ZW50cyA9IGdldFVzZXJFdmVudHNMb2NhbGx5KHR5cGUpO1xuXG5cdFx0XHQvL2ZpcnN0IHJldHVybiB3aGF0ZXZlciBldmVudCBpbmZvIGlzIHN0b3JlZCBsb2NhbGx5XG5cdFx0XHRyZXNvbHZlKGFsbEV2ZW50cyk7XG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGNyZWF0ZU5ld0V2ZW50KGV2ZW50SUQpIHtcblx0XHQvL2RlY2xhciBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cdFx0dmFyIG5ld0V2ZW50ID0ge307XG5cblx0XHQvL2ZpcnN0IGNyZWF0ZSB0aGUgb2JqZWN0XG5cdFx0bmV3RXZlbnQgPSB7XG5cdFx0XHRpZDogZXZlbnRJRCxcblx0XHRcdG5hbWU6ICcnLFxuXHRcdFx0dHlwZTogJycsXG5cdFx0XHRob3N0OiB7XG5cdFx0XHRcdG5hbWU6IGN1cnJlbnRVc2VyLmJpby5uYW1lLFxuXHRcdFx0XHR1aWQ6IGN1cnJlbnRVc2VyLmJpby51aWQsXG5cdFx0XHRcdGVtYWlsOiBjdXJyZW50VXNlci5iaW8uZW1haWxcblx0XHRcdH0sXG5cdFx0XHRtZXNzYWdlOiAnJyxcblx0XHRcdGV2ZW50VGltZXM6IHtcblx0XHRcdFx0c3RhcnQ6IDAsXG5cdFx0XHRcdGVuZDogMFxuXHRcdFx0fSxcblx0XHRcdGFkZHJlc3M6IHtcblx0XHRcdFx0c3RyZWV0MDE6ICcnLFxuXHRcdFx0XHRzdHJlZXQwMjogJycsXG5cdFx0XHRcdHN0cmVldDAzOiAnJyxcblx0XHRcdFx0Y2l0eTogJycsXG5cdFx0XHRcdHN0YXRlOiAnJyxcblx0XHRcdFx0emlwOiAwXG5cdFx0XHR9LFxuXHRcdFx0Z3Vlc3RMaXN0OiB7fVxuXHRcdH07XG5cblx0XHQvL3NhdmUgaXQgbG9jYWxseVxuXHRcdHVwZGF0ZVVzZXJFdmVudHNMb2NhbGx5KCdob3N0aW5nJywgbmV3RXZlbnQpO1xuXG5cdFx0Ly90aGVuIGNyZWF0ZSBpdCBvbiB0aGUgc2VydmVyXG5cdFx0Ly93aWxsIGdvIG91dCB0byB0aGUgZGIgc28gcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFxuXHRcdFx0Ly9tYW5hZ2UgdGhlIHByb21pc2UgcmVzcG9uc2VzXG5cdFx0XHRkYi5jcmVhdGVIb3N0ZWRFdmVudChnZXRVSURMb2NhbGx5KCksIG5ld0V2ZW50KVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24obWVzc2FnZSkge1xuXHRcdFx0XHRyZXNvbHZlKG1lc3NhZ2UpO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0fSlcblxuXHRcdH0pO1xuXG5cdH1cblx0XG5cdHJldHVybiBhbGxVc2VyRGF0YTtcbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmZhY3RvcnkoJ3ZhbGlkYXRpb24nLCB2YWxpZGF0aW9uKTtcblxudmFsaWRhdGlvbi4kaW5qZWN0ID0gWyckbG9nJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gdmFsaWRhdGlvbigkbG9nKSB7XG5cdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0dmFyIG1pbmltdW1OYW1lTGVuZ3RoID0gMztcblx0dmFyIG1pbmltdW1QYXNzTGVuZ3RoID0gMTY7XG5cdHZhciBtYXhpbXVtUGFzc0xlbmd0aCA9IDEwMDtcblxuXHR2YXIgYWxsVmFsaWRhdGlvbnMgPSB7XG5cdFx0cmVxdWlyZWQ6IHJlcXVpcmVkLFxuXHRcdG1pbk5hbWVMZW5ndGg6IG1pbk5hbWVMZW5ndGgsXG5cdFx0bWluUGFzc0xlbmd0aDogbWluUGFzc0xlbmd0aCxcblx0XHRtYXhQYXNzTGVuZ3RoOiBtYXhQYXNzTGVuZ3RoLFxuXHRcdGF0TGVhc3RPbmVTeW1ib2w6IGF0TGVhc3RPbmVTeW1ib2wsXG5cdFx0YXRMZWFzdE9uZU51bWJlcjogYXRMZWFzdE9uZU51bWJlcixcblx0XHRhdExlYXN0T25lTG93ZXJjYXNlOiBhdExlYXN0T25lTG93ZXJjYXNlLFxuXHRcdGF0TGVhc3RPbmVVcHBlcmNhc2U6IGF0TGVhc3RPbmVVcHBlcmNhc2UsXG5cdFx0aWxsZWdhbENoYXJhY3RlcjogaWxsZWdhbENoYXJhY3Rlcixcblx0XHRlbWFpbDogZW1haWwsXG5cdFx0ZGF0ZU9mQmlydGg6IGRhdGVPZkJpcnRoXG5cdH07XG5cblx0ZnVuY3Rpb24gcmVxdWlyZWQodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzVW5kZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0cmV0dXJuICdUaGlzIGlzIGEgcmVxdWlyZWQgZmllbGQnO1xuXHRcdH0gXG5cdH1cblxuXHRmdW5jdGlvbiBtaW5OYW1lTGVuZ3RoKHZhbHVlKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHRpZih2YWx1ZS5sZW5ndGggPCBtaW5pbXVtTmFtZUxlbmd0aCkgcmV0dXJuICgnTmFtZSBzaG91bGQgYmUgYXQgbGVhc3QgJyArIG1pbmltdW1OYW1lTGVuZ3RoICsgJyBjaGFyYWN0ZXJzJyk7XG5cdFx0fSBcblx0fVxuXG5cdGZ1bmN0aW9uIG1pblBhc3NMZW5ndGgodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdGlmKCEodmFsdWUubGVuZ3RoIDwgbWluaW11bVBhc3NMZW5ndGgpKSByZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0ZnVuY3Rpb24gbWF4UGFzc0xlbmd0aCh2YWx1ZSkge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0aWYoISh2YWx1ZS5sZW5ndGggPiBtYXhpbXVtUGFzc0xlbmd0aCkpIHJldHVybiB0cnVlO1xuXHRcdH0gXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0ZnVuY3Rpb24gYXRMZWFzdE9uZVN5bWJvbCh2YWx1ZSkge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0Ly8gYnVpbGQgcmVnZXhcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIltcXCFcXEBcXCNcXCRcXCVcXF5cXCZcXCpdXCIpO1xuXG5cdFx0XHQvL2NoZWNrIGNvbnN0cmF0aW50XG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3QodmFsdWUpKSB7XG5cdFx0XHRcdC8vc3VjY2VzczogYXQgbGVhc3Qgb25lIHNwZWNpYWwgY2hhcmFjdGVyIGZvdW5kXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9mYWlsdXJlOiBkaWRuJ3QgZmluZCBhbnkgc3BjaWFsIGNoYXJhY3RlcnNcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGZ1bmN0aW9uIGF0TGVhc3RPbmVOdW1iZXIodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdC8vIGJ1aWxkIHJlZ2V4XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbMC05XVwiLCBcIlwiKTtcblxuXHRcdFx0Ly9jaGVjayBjb25zdHJhdGludFxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZhbHVlKSkge1xuXHRcdFx0XHQvL3N1Y2Nlc3M6IGF0IGxlYXN0IG9uZSBzcGVjaWFsIGNoYXJhY3RlciBmb3VuZFxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vZmFpbHVyZTogZGlkbid0IGZpbmQgYW55IHNwY2lhbCBjaGFyYWN0ZXJzXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuICAgIGZ1bmN0aW9uIGF0TGVhc3RPbmVMb3dlcmNhc2UodmFsdWUpIHtcbiAgICBcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0Ly8gYnVpbGQgcmVnZXhcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIlthLXpdXCIsIFwiXCIpO1xuXG5cdFx0XHQvL2NoZWNrIGNvbnN0cmF0aW50XG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3QodmFsdWUpKSB7XG5cdFx0XHRcdC8vc3VjY2VzczogYXQgbGVhc3Qgb25lIHNwZWNpYWwgY2hhcmFjdGVyIGZvdW5kXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9mYWlsdXJlOiBkaWRuJ3QgZmluZCBhbnkgc3BjaWFsIGNoYXJhY3RlcnNcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhdExlYXN0T25lVXBwZXJjYXNlKHZhbHVlKSB7XG4gICAgXHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdC8vIGJ1aWxkIHJlZ2V4XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbQS1aXVwiLCBcIlwiKTtcblxuXHRcdFx0Ly9jaGVjayBjb25zdHJhdGludFxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZhbHVlKSkge1xuXHRcdFx0XHQvL3N1Y2Nlc3M6IGF0IGxlYXN0IG9uZSBzcGVjaWFsIGNoYXJhY3RlciBmb3VuZFxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vZmFpbHVyZTogZGlkbid0IGZpbmQgYW55IHNwY2lhbCBjaGFyYWN0ZXJzXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaWxsZWdhbENoYXJhY3Rlcih2YWx1ZSkge1xuICAgIFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHQvLyBidWlsZCByZWdleFxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW15BLXowLTlcXCFcXEBcXCNcXCRcXCVcXF5cXCZcXCpdXCIsIFwiXCIpO1xuXG5cdFx0XHQvL2NoZWNrIGNvbnN0cmF0aW50XG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3QodmFsdWUpKSB7XG5cdFx0XHRcdC8vc3VjY2VzczogYXQgbGVhc3Qgb25lIHNwZWNpYWwgY2hhcmFjdGVyIGZvdW5kXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vZmFpbHVyZTogZGlkbid0IGZpbmQgYW55IHNwY2lhbCBjaGFyYWN0ZXJzXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gZW1haWwodmFsdWUpIHtcbiAgICBcdC8vZGVmaW5lIGNvbnN0cmFpbnRzXG4gICAgXHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKD86XFwuW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKykqQCg/OlthLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cXC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cIiwgXCJcIik7XG4gICAgXHRcbiAgICBcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSAmJiAhY29uc3RyYWludC50ZXN0KHZhbHVlKSkge1xuICAgIFx0XHRyZXR1cm4gJ05vdCBhIHZhbGlkIGVtYWlsJztcbiAgICBcdH1cbiAgICBcdC8vaWYoIWNvbnN0cmFpbnQudGVzdCh2YWx1ZSkpIHJldHVybiAnTm90IGEgdmFsaWQgZS1tYWlsIGFkZHJlc3MnXG4gICAgXHRcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkYXRlT2ZCaXJ0aCh2YWx1ZSkge31cblxuXHRyZXR1cm4gYWxsVmFsaWRhdGlvbnM7XG59XG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb25maWcoY29uZmlnKTtcbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gY29uZmlnKCRyb3V0ZVByb3ZpZGVyKSB7ICAgXG4gICAgJHJvdXRlUHJvdmlkZXJcbiAgICAud2hlbignLycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9sYW5kaW5nUGFnZS5odG0nLFxuICAgICAgICBjb250cm9sbGVyOiAnTGFuZGluZ1BhZ2VDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgfSlcbiAgICAud2hlbignL3NpZ251cCcsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9uZXdVc2VyU2lnbnVwLmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdOZXdVc2VyU2lnblVwQ29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xuICAgIH0pXG4gICAgLndoZW4oJy9sb2dpbicsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9yZWdpc3RlcmVkVXNlckxvZ2luLmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdSZWdVc2VyTG9naW5Db250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgfSlcbiAgICAud2hlbignL3VzZXJJbmZvcm1hdGlvbi86dWlkPycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy91c2VySW5mb3JtYXRpb24uaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1VzZXJJbmZvcm1hdGlvbkNvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgIHJlc29sdmU6IHsgLyogQG5nSW5qZWN0ICovXG4gICAgICAgICAgICB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlOiB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlXG4gICAgICAgIH1cbiAgICB9KVxuICAgIC53aGVuKCcvdXNlckV2ZW50cy86dWlkPycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy91c2VyRXZlbnRzLmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdVc2VyRXZlbnRzQ29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgcmVzb2x2ZTogeyAvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgICAgIHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2U6IHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2VcbiAgICAgICAgfVxuICAgIH0pXG4gICAgLndoZW4oJy9ldmVudC9ob3N0LzpldmVudElkLzp1aWQvOnNlY3Rpb24nLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvaG9zdEV2ZW50Lmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdIb3N0RXZlbnRDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICByZXNvbHZlOiB7IC8qIEBuZ0luamVjdCAqL1xuICAgICAgICAgICAgdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZTogdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZSxcbiAgICAgICAgfVxuICAgIH0pXG4gICAgLndoZW4oJy9ldmVudC9ndWVzdC86ZXZlbnRJZC86dWlkLzpob3N0SWQnLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvZ3Vlc3RFdmVudC5odG0nLFxuICAgICAgICBjb250cm9sbGVyOiAnR3Vlc3RFdmVudENvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgIHJlc29sdmU6IHsgLyogQG5nSW5qZWN0ICovXG4gICAgICAgICAgICB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlOiB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlLFxuICAgICAgICB9XG4gICAgfSlcbiAgICAud2hlbignL2V2ZW50LzpldmVudElkPy86aG9zdElkPy86dWlkPy86c2VjdGlvbj8nLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvYW5FdmVudC5odG0nLFxuICAgICAgICBjb250cm9sbGVyOiAnQW5FdmVudENvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgIHJlc29sdmU6IHsgLyogQG5nSW5qZWN0ICovXG4gICAgICAgICAgICB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlOiB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlLFxuICAgICAgICAgICAgZXZlbnRWaWV3Q2hhbmdlcjogZXZlbnRWaWV3Q2hhbmdlclxuICAgICAgICB9XG4gICAgfSlcbiAgICAub3RoZXJ3aXNlKHtcbiAgICAgICAgcmVkaXJlY3RUbzogJy8nXG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2UoYXV0aFNlcnZpY2UpIHtcbiAgICBhdXRoU2VydmljZS5pc0xvZ2dlZEluKCk7XG59O1xuXG5mdW5jdGlvbiBldmVudFZpZXdDaGFuZ2VyKHRyYWZmaWNWYWxldCwgJHJvdXRlKSB7XG4gICAgdHJhZmZpY1ZhbGV0LmV2ZW50Um91dGUoJHJvdXRlLmN1cnJlbnQucGFyYW1zLmV2ZW50SWQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyb3V0ZS5jdXJyZW50LnBhcmFtcy5ob3N0SWQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyb3V0ZS5jdXJyZW50LnBhcmFtcy51aWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvdXRlLmN1cnJlbnQucGFyYW1zLnNlY3Rpb24pO1xufTtcbi8qIEFkZEFHdWVzdC5kaXJlY3RpdmUuanMgKi9cblxuLyoqXG4qIEBkZXNjIGRpc3BsYXlzIGEgbGlzdCBvZiBhbGwgZ3Vlc3RzIGludml0ZWQgdG8gYW4gZXZlbnQgdGhpcyB1c2VyIGlzIGhvc3RpbmcuXG4qIEBleGFtcGxlIDxhZGQtYS1ndWVzdD48L2FkZC1hLWd1ZXN0PlxuKi9cblxuYW5ndWxhclxuXHQubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG5cdC5kaXJlY3RpdmUoJ2FkZEFHdWVzdCcsIGFkZEFHdWVzdCk7XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gYWRkQUd1ZXN0KCkge1xuICAgIGxpbmtGdW5jLiRpbmplY3QgPSBbXCJzY29wZVwiLCBcImVsXCIsIFwiYXR0clwiLCBcImN0cmxcIl07XG5cdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0cmVzdHJpY3Q6ICdBRUNNJyxcblx0XHR0ZW1wbGF0ZVVybDogJy4uL3ZpZXdzL2RpcmVjdGl2ZXMvYWRkQUd1ZXN0LmRpcmVjdGl2ZS5odG0nLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0c2NvcGU6IHtcblx0XHR9LFxuXHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdGNvbnRyb2xsZXI6IGFkZEFHdWVzdENvbnRyb2xsZXIsXG5cdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0fVxuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHtcbiAgICB9XG5cbiAgICBhZGRBR3Vlc3RDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJHJvdXRlUGFyYW1zJywgJ3ZhbGlkYXRpb24nLCAndXNlckRhdGEnXTtcbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBhZGRBR3Vlc3RDb250cm9sbGVyKCRsb2csICRyb3V0ZVBhcmFtcywgdmFsaWRhdGlvbiwgdXNlckRhdGEpIHtcblx0ICAgIHZhciB2bSA9IHRoaXM7XG5cdCAgICB2YXIgZW1haWxDaGVja2VyID0gdmFsaWRhdGlvbjtcblx0ICAgIHZhciBpbnZpdGF0aW9uTWFuYWdlciA9IHVzZXJEYXRhO1xuXG5cdCAgICAvL2xvY2FsIHZhcmlhYmxlc1xuXHQgICAgdmFyIGV2ZW50RGV0YWlscyA9IHt9O1xuXG5cdCAgICAvL3ZtIHZhcmlhYmxlc1xuXHQgICAgdm0udGVtcEd1ZXN0ID0ge1xuXHQgICAgXHRuYW1lOiAnJyxcblx0ICAgIFx0ZW1haWw6ICcnXG5cdCAgICB9XG5cdCAgICB2bS52YWxpZGF0aW9ucyA9IHtcblx0ICAgIFx0bmFtZToge1xuXHQgICAgXHRcdGFkZHJlc3NlZDogZmFsc2UsXG5cdCAgICBcdFx0dmFsaWQ6IGZhbHNlLFxuXHQgICAgXHRcdGVycm9yTWVzc2FnZTogJydcblx0ICAgIFx0fSxcblx0ICAgIFx0ZW1haWw6IHtcblx0ICAgIFx0XHRhZGRyZXNzZWQ6IGZhbHNlLFxuXHQgICAgXHRcdHZhbGlkOiBmYWxzZSxcblx0ICAgIFx0XHRlcnJvck1lc3NhZ2U6ICcnXG5cdCAgICBcdH0sXG5cdCAgICBcdGludml0YXRpb246IHtcblx0ICAgIFx0XHRpc1RoZUhvc3Q6IGZhbHNlLFxuXHQgICAgXHRcdGFscmVhZHlJbnZpdGVkOiBmYWxzZSxcblx0ICAgIFx0XHRlcnJvck1lc3NhZ2U6ICcnXG5cdCAgICBcdH1cblx0ICAgIH1cblx0ICAgIHZtLmludml0YXRpb25WYWxpZEZvclN1Ym1pc3Npb24gPSBmYWxzZTtcblx0ICAgIHZtLnN1Ym1pc3Npb25CdXR0b24gPSB7XG5cdCAgICBcdHN0eWxlOiB7XG5cdCAgICBcdFx0Y29sb3I6J3JlZCdcblx0ICAgIFx0fSxcblx0ICAgIFx0Y2xhc3M6IHtcblx0ICAgIFx0XHQnY29sLXhzLTEyJzogdHJ1ZSxcblx0ICAgIFx0XHQnY29sLXNtLTEyJzogdHJ1ZSxcblx0ICAgIFx0XHQnYnRuJzogdHJ1ZSxcblx0ICAgIFx0XHQnYnRuLXdhcm5pbmcnOiB0cnVlLFxuXHQgICAgXHRcdCdidG4tc3VjY2Vzcyc6IGZhbHNlXG5cdCAgICBcdH0sXG5cdCAgICBcdG1lc3NhZ2U6ICdBZGRyZXNzIEludml0YXRpb24uLi4nXG5cdCAgICB9XG5cdCAgICAvL2xvY2FsIG1ldGhvZHNcblx0ICAgIGZ1bmN0aW9uIHZhbGlkYXRlSW52aXRhdGlvbigpIHtcblx0ICAgIFx0Ly9jaGVjayBpZiBib3RoIGlucHV0cyBhcmUgdmFsaWRcblx0ICAgIFx0aWYodm0udmFsaWRhdGlvbnMubmFtZS52YWxpZCAmJiB2bS52YWxpZGF0aW9ucy5lbWFpbC52YWxpZCkge1xuXHQgICAgXHRcdCRsb2cuaW5mbygncmVhZHkgdG8gc3VibWl0Jyk7XG5cdCAgICBcdFx0Ly9zZXQgdGhlIHZhbGlkaXR5IGZsYWdcblx0ICAgIFx0XHR2bS5pbnZpdGF0aW9uVmFsaWRGb3JTdWJtaXNzaW9uID0gdHJ1ZTtcblx0ICAgIFx0XHQvL3VwZGF0ZSB0aGUgc3VibWlzc2lvbiBidXR0b25cblx0ICAgIFx0XHR2bS5zdWJtaXNzaW9uQnV0dG9uLmNsYXNzWydidG4td2FybmluZyddID0gZmFsc2U7XG5cdCAgICBcdFx0dm0uc3VibWlzc2lvbkJ1dHRvbi5jbGFzc1snYnRuLXN1Y2Nlc3MnXSA9IHRydWU7XG5cdCAgICBcdFx0dm0uc3VibWlzc2lvbkJ1dHRvbi5tZXNzYWdlPSdJbnZpdGUgR3Vlc3QnO1xuXHQgICAgXHR9IGVsc2Uge1xuXHQgICAgXHRcdCRsb2cuaW5mbygnbm90IHJlYWR5IHRvIHN1Ym1pdCcpO1xuXHQgICAgXHRcdC8vc2V0IHRoZSB2YWxpZGl0eSBmbGFnXG5cdCAgICBcdFx0dm0uaW52aXRhdGlvblZhbGlkRm9yU3VibWlzc2lvbiA9IGZhbHNlO1xuXHQgICAgXHRcdC8vdXBkYXRlIHRoZSBzdWJtaXNzaW9uIGJ1dHRvblxuXHQgICAgXHRcdHZtLnN1Ym1pc3Npb25CdXR0b24uY2xhc3NbJ2J0bi13YXJuaW5nJ10gPSB0cnVlO1xuXHQgICAgXHRcdHZtLnN1Ym1pc3Npb25CdXR0b24uY2xhc3NbJ2J0bi1zdWNjZXNzJ10gPSBmYWxzZTtcblx0ICAgIFx0XHR2bS5zdWJtaXNzaW9uQnV0dG9uLm1lc3NhZ2U9J0FkZHJlc3MgSW52aXRhdGlvbi4uLic7XG5cdCAgICBcdH1cblx0ICAgIH1cblxuXHQgICAgZnVuY3Rpb24gaW5pdCgpIHtcblx0ICAgIFx0Ly9sb2FkIHRoZSBldmVudCBmb3IgcmVmZXJlbmNlXG5cdCAgICBcdGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQoaW52aXRhdGlvbk1hbmFnZXIuZ2V0T25lVXNlckV2ZW50TG9jYWxseSgnaG9zdGluZycsICRyb3V0ZVBhcmFtcy5ldmVudElkKSkpIHtcblx0ICAgIFx0XHQvL2lmIHRoaXMgcGFnZSB3YXMgbG9hZGVkIGJlZm9yZSB0aGUgbW9kZWwgZ2V0IHRoZSBldmVudFxuXHQgICAgXHRcdGludml0YXRpb25NYW5hZ2VyLmdldFJlbW90ZUV2ZW50c0ZvckxvY2FsKClcblx0XHQgICAgXHQudGhlbihmdW5jdGlvbigpIHtcblx0XHQgICAgXHRcdC8vd2hlbiB0aGUgZXZlbnQgaGFzIGJlZW4gbG9hZGVkXG5cdFx0ICAgIFx0XHRldmVudERldGFpbHMgPSBpbnZpdGF0aW9uTWFuYWdlci5nZXRPbmVVc2VyRXZlbnRMb2NhbGx5KCdob3N0aW5nJywgJHJvdXRlUGFyYW1zLmV2ZW50SWQpO1xuXG5cdFx0ICAgIFx0fSlcblx0ICAgIFx0fSBlbHNlIHtcblx0ICAgIFx0XHQvL2p1c3QgZ2V0IHRoZSBtb2RlbCBsb2NhbGx5XG5cdCAgICBcdFx0ZXZlbnREZXRhaWxzID0gaW52aXRhdGlvbk1hbmFnZXIuZ2V0T25lVXNlckV2ZW50TG9jYWxseSgnaG9zdGluZycsICRyb3V0ZVBhcmFtcy5ldmVudElkKTtcblx0ICAgIFx0fVxuXHQgICAgXHQgIFx0XG5cdCAgICB9XG5cblx0ICAgIC8vdm0gbWV0aG9kc1xuXHQgICAgdm0udmFsaWRhdGVOYW1lID0gZnVuY3Rpb24oKSB7XG5cdCAgICBcdC8vdGhpcyBmaWVsZCBpcyBiZWluZyBlZGl0ZWQsIHRocm93IGZsYWdcblx0ICAgIFx0dm0udmFsaWRhdGlvbnMubmFtZS5hZGRyZXNzZWQgPSB0cnVlO1xuXG5cdCAgICBcdC8vY2hlY2sgZm9yIHZhbHVlXG5cdCAgICBcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZtLnRlbXBHdWVzdC5uYW1lKSAmJiB2bS50ZW1wR3Vlc3QubmFtZSAhPSAnJykge1xuXHQgICAgXHRcdHZtLnZhbGlkYXRpb25zLm5hbWUudmFsaWQgPSB0cnVlO1xuXHQgICAgXHRcdHZtLnZhbGlkYXRpb25zLm5hbWUuZXJyb3JNZXNzYWdlID0gJyc7XG5cdCAgICBcdH0gZWxzZSB7XG5cdCAgICBcdFx0dm0udmFsaWRhdGlvbnMubmFtZS52YWxpZCA9IGZhbHNlO1xuXHQgICAgXHRcdHZtLnZhbGlkYXRpb25zLm5hbWUuZXJyb3JNZXNzYWdlID0gJ1RoaXMgZ3Vlc3QgbmVlZHMgYSBuYW1lJztcblx0ICAgIFx0fVxuXG5cdCAgICBcdHZhbGlkYXRlSW52aXRhdGlvbigpO1xuXHQgICAgfVxuXHQgICAgdm0udmFsaWRhdGVFbWFpbCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgXHQvL3RoaXMgZmllbGQgaXMgYmVpbmcgZWRpdGVkLCB0aHJvdyBmbGFnXG5cdCAgICBcdHZtLnZhbGlkYXRpb25zLmVtYWlsLmFkZHJlc3NlZCA9IHRydWU7XG5cblx0ICAgIFx0Ly9pcyB0aGVyZSBhbiBlbWFpbCB2YWx1ZT9cblx0ICAgIFx0aWYoYW5ndWxhci5pc0RlZmluZWQodm0udGVtcEd1ZXN0LmVtYWlsKSAmJiB2bS50ZW1wR3Vlc3QuZW1haWwgIT0gJycpIHtcblx0ICAgIFx0XHRcblx0ICAgIFx0XHQvL2lmIGFuIGVtYWlsIGV4aXN0cyBjaGVjayBpdCdzIHZhbGlkaXR5XG5cdCAgICBcdFx0aWYoYW5ndWxhci5pc1VuZGVmaW5lZChlbWFpbENoZWNrZXIuZW1haWwodm0udGVtcEd1ZXN0LmVtYWlsKSkpIHtcblx0ICAgIFx0XHRcdC8vZW1haWwgaXMgdmFsaWRcblx0ICAgIFx0XHRcdHZtLnZhbGlkYXRpb25zLmVtYWlsLnZhbGlkID0gdHJ1ZTtcblx0ICAgIFx0XHRcdHZtLnZhbGlkYXRpb25zLmVtYWlsLmVycm9yTWVzc2FnZSA9ICcnO1xuXHQgICAgXHRcdH0gZWxzZSB7XG5cdCAgICBcdFx0XHQvL2dldCB0aGUgZXJyb3Jcblx0ICAgIFx0XHRcdHZtLnZhbGlkYXRpb25zLmVtYWlsLnZhbGlkID0gZmFsc2U7XG5cdCAgICBcdFx0XHR2bS52YWxpZGF0aW9ucy5lbWFpbC5lcnJvck1lc3NhZ2UgPSBlbWFpbENoZWNrZXIuZW1haWwodm0udGVtcEd1ZXN0LmVtYWlsKTtcblx0ICAgIFx0XHRcdCRsb2cuaW5mbyh2bS52YWxpZGF0aW9ucy5lbWFpbC5lcnJvck1lc3NhZ2UpO1xuXHQgICAgXHRcdH1cblxuXHQgICAgXHR9IGVsc2Uge1xuXHQgICAgXHRcdC8vdGhlcmUgaXNuJ3QgYW4gZW1haWwgeWV0XG5cdCAgICBcdFx0dm0udmFsaWRhdGlvbnMuZW1haWwudmFsaWQgPSBmYWxzZTtcblx0ICAgIFx0XHR2bS52YWxpZGF0aW9ucy5lbWFpbC5lcnJvck1lc3NhZ2UgPSAnTm90IGEgdmFsaWQgZW1haWwnO1xuXHQgICAgXHR9XG5cblx0ICAgIFx0dmFsaWRhdGVJbnZpdGF0aW9uKCk7XG5cdCAgICB9XG5cblx0ICAgIHZtLnNob3dOYW1lRXJyb3IgPSBmdW5jdGlvbigpIHtcblx0ICAgIFx0aWYoIXZtLnZhbGlkYXRpb25zLm5hbWUudmFsaWQgJiYgdm0udmFsaWRhdGlvbnMubmFtZS5hZGRyZXNzZWQpIHJldHVybiB0cnVlO1xuXHQgICAgXHRlbHNlIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblxuXHQgICAgdm0uc2hvd0VtYWlsRXJyb3IgPSBmdW5jdGlvbigpIHtcblx0ICAgIFx0aWYoIXZtLnZhbGlkYXRpb25zLmVtYWlsLnZhbGlkICYmIHZtLnZhbGlkYXRpb25zLmVtYWlsLmFkZHJlc3NlZCkgcmV0dXJuIHRydWU7XG5cdCAgICBcdGVsc2UgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXG5cdCAgICB2bS5zaG93SW52aXRhdGlvbkVycm9yID0gZnVuY3Rpb24oKSB7XG5cdCAgICBcdGlmKCB2bS52YWxpZGF0aW9ucy5pbnZpdGF0aW9uLmlzVGhlSG9zdCB8fFxuXHQgICAgXHRcdHZtLnZhbGlkYXRpb25zLmludml0YXRpb24uYWxyZWFkeUludml0ZWQgKSBcblx0ICAgIFx0XHRcdHJldHVybiB0cnVlO1xuXHQgICAgXHRlbHNlIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblxuXHQgICAgdm0uc3VibWl0R3Vlc3RJbnZpdGF0aW9uID0gZnVuY3Rpb24oKSB7XG5cdCAgICBcdCRsb2cuaW5mbygnc3VibWl0dGluZyB0aGUgaW52aXRhdGlvbicpO1xuXHQgICAgXHQvL2lmIHRoZSByZXF1aXJubWVudHMgYXJlIGZ1bGZpbGxlZC4uLlxuXHQgICAgXHRpZih2bS5pbnZpdGF0aW9uVmFsaWRGb3JTdWJtaXNzaW9uKSB7XG5cdCAgICBcdFx0Ly9tYWtlIHN1cmUgdGhlIGludml0YXRpb24gaXMgbm90IHRvIHRoZSBjdXJyZW50IHVzZXJcblx0ICAgIFx0XHRpZihpbnZpdGF0aW9uTWFuYWdlci50aGlzSXNUaGVIb3N0RW1haWwodm0udGVtcEd1ZXN0LmVtYWlsLCAkcm91dGVQYXJhbXMudWlkLCAkcm91dGVQYXJhbXMuZXZlbnRJZCkpIHtcblx0XHRcdFx0XHR2bS52YWxpZGF0aW9ucy5pbnZpdGF0aW9uLmlzVGhlSG9zdCA9IHRydWU7XG5cdFx0XHRcdFx0dm0udmFsaWRhdGlvbnMuaW52aXRhdGlvbi5lcnJvck1lc3NhZ2UgPSAnTm8gbmVlZCB0byBpbnZpdGUgdGhlIGhvc3QnO1xuXHRcdFx0XHRcdHJldHVybiAwO1xuXHQgICAgXHRcdH0gZWxzZSB7XG5cdCAgICBcdFx0XHR2bS52YWxpZGF0aW9ucy5pbnZpdGF0aW9uLmlzVGhlSG9zdCA9IGZhbHNlO1xuXHQgICAgXHRcdH1cblx0ICAgIFx0XHRcblx0XHQgICAgXHQvL21ha2Ugc3VyZSB0aGlzIHBlcnNvbiBoYXMgbm90IGFscmVhZHkgYmVlbiBpbnZpdGVkXG5cdFx0ICAgIFx0Ly9hZGQgdGhpcyBwZXJzb24gdG8gdGhlIGhvc3QncyBndWVzdCBsaXN0XG5cdFx0ICAgIFx0Ly9pcyB0aGUgZ3Vlc3QgYSByZWdpc3RlcmVkIHVzZXI/IElmIHNvIGFkZCB0byB0aGVpciBwZW5kaW5nIGludml0YXRpb25zXG5cdFx0ICAgIFx0Ly9pZiBub3QgYSByZWdpc3RlcmVkIHVzZXIgYWRkIHRoaXMgdG8gdGhlIHVucmVnaXN0ZXJlZCB1c2VycyBsaXN0IHVuZGVyIHRoZWlyIGVtYWlsIGFkZHJlc3Ncblx0ICAgIFx0fVxuXHQgICAgXHRcblx0ICAgIH1cblxuXHRcdC8vYWN0aW9uc1xuXHRcdGluaXQoKTtcblxuXHR9XG5cblx0cmV0dXJuICBkaXJlY3RpdmU7XG5cdFx0XG59O1xuLyogSG9zdGVkRXZlbnRzTGlzdC5kaXJlY3RpdmUuanMgKi9cblxuLyoqXG4qIEBkZXNjIGRpc3BsYXlzIGEgbGlzdCBvZiBhbGwgdGhlIGV2ZW50cyB0aGUgY3VycmVudCB1c2VyIGlzIGhvc3RpbmcuXG4qIEBleGFtcGxlIDxob3N0ZWQtZXZlbnRzLWxpc3Q+PC9ob3N0ZWQtZXZlbnRzLWxpc3Q+XG4qL1xuXG5hbmd1bGFyXG5cdC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcblx0LmRpcmVjdGl2ZSgnaG9zdGVkRXZlbnRzTGlzdCcsIGhvc3RlZEV2ZW50c0xpc3QpO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGhvc3RlZEV2ZW50c0xpc3QoKSB7XG4gICAgbGlua0Z1bmMuJGluamVjdCA9IFtcInNjb3BlXCIsIFwiZWxcIiwgXCJhdHRyXCIsIFwiY3RybFwiXTtcblx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRyZXN0cmljdDogJ0FFQ00nLFxuXHRcdHRlbXBsYXRlVXJsOiAnLi4vdmlld3MvZGlyZWN0aXZlcy9ob3N0ZWRFdmVudHNMaXN0LmRpcmVjdGl2ZS5odG0nLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0c2NvcGU6IHtcblx0XHRcdGhvc3RlZEV2ZW50czogJz0nLFxuXHRcdFx0dXNlcklkOiAnPSdcblx0XHR9LFxuXHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdGNvbnRyb2xsZXI6IGhvc3RlZEV2ZW50c0xpc3RDb250cm9sbGVyLFxuXHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdH1cblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7XG4gICAgfVxuXG4gICAgaG9zdGVkRXZlbnRzTGlzdENvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICd0cmFmZmljVmFsZXQnXTtcbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBob3N0ZWRFdmVudHNMaXN0Q29udHJvbGxlcigkbG9nLCB0cmFmZmljVmFsZXQpIHtcblx0ICAgIHZhciB2bSA9IHRoaXM7XG5cblx0ICAgIC8vbG9jYWwgdmFyaWFibGVzXG5cdCAgICB2YXIgaG9zdGVkRXZlbnRzU2hlcnBhID0gdHJhZmZpY1ZhbGV0O1xuXG5cdCAgICAvL3ZpZXcgbW9kZWwgdmFyaWFibGVzXG5cdCAgICB2bS5ndWVzdHNBcmVJbnZpdGVkID0gZmFsc2U7XG5cblx0ICAgIC8vbG9jYWwgbWV0aG9kc1xuXHQgICAgZnVuY3Rpb24gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKSB7XG5cdFx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gY291bnRHdWVzdHMobGlzdCkge1xuXHRcdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlXG5cdFx0XHR2YXIgY291bnRlciA9IDA7XG5cblx0XHRcdC8vaWYgd2UncmUgY291bnRpbmcsIHRoZW4gdGhlcmUncyBhIGxpc3QsIHNvIHRocm93IHRoZSBmbGFnXG5cdFx0XHR2bS5ndWVzdHNBcmVJbnZpdGVkID0gdHJ1ZTtcblxuXHRcdFx0T2JqZWN0LmtleXNbbGlzdF0uZm9yRWFjaChmdW5jdGlvbihndWVzdCkge1xuXHRcdFx0XHRjb3VudGVyKys7XG5cdFx0XHR9KVxuXG5cdFx0XHRyZXR1cm4gY291bnRlcjtcblx0XHR9XG5cblx0XHQvL3ZpZXcgbW9kZWwgbWV0aG9kc1xuXHRcdHZtLmZvcm1hdERhdGUgPSBmdW5jdGlvbih1bml4VGltZSkge1xuXHRcdFx0Ly9yZWZvcm1hdCB0aGUgdGltZVxuXHRcdFx0JGxvZy5pbmZvKCdnb3QgdGhpc3QgdGltZTogJyArIHVuaXhUaW1lKTtcblx0XHRcdHJldHVybiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpO1xuXHRcdH1cblxuXHRcdHZtLmd1ZXN0c0F0dGVuZGluZyA9IGZ1bmN0aW9uKGd1ZXN0TGlzdCkge1xuXHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoZ3Vlc3RMaXN0KSkge1xuXHRcdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChndWVzdExpc3RbJ2F0dGVuZGluZyddKSkgcmV0dXJuIGNvdW50R3Vlc3RzKGd1ZXN0TGlzdFsnYXR0ZW5kaW5nJ10pO1xuXHRcdFx0XHRlbHNlIHJldHVybiAwO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSByZXR1cm4gMDtcblx0XHR9XG5cblx0XHR2bS5ndWVzdHNJbnZpdGVkID0gZnVuY3Rpb24oZ3Vlc3RMaXN0KSB7XG5cdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChndWVzdExpc3QpKSB7XG5cdFx0XHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRcdFx0dmFyIGd1ZXN0Q291bnQgPSB7IGF0dGVuZGluZzogMCwgcGVuZGluZzogMCwgZGVjbGluZWQ6IDAgfTtcblxuXHRcdFx0XHQvL2xvY2FsIG1ldGhvZHNcblx0XHRcdFx0ZnVuY3Rpb24gdG90YWxHdWVzdENvdW50KCkge1xuXHRcdFx0XHRcdHJldHVybiBndWVzdENvdW50LmF0dGVuZGluZyArIGd1ZXN0Q291bnQucGVuZGluZyArIGd1ZXN0Q291bnQuZGVjbGluZWQ7XG5cdFx0XHRcdH0gXG5cblx0XHRcdFx0Ly9jaGVjayB2YWx1ZXNcblx0XHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoZ3Vlc3RMaXN0WydhdHRlbmRpbmcnXSkpIGd1ZXN0Q291bnQuYXR0ZW5kaW5nID0gY291bnRHdWVzdHMoZ3Vlc3RMaXN0WydhdHRlbmRpbmcnXSk7XG5cdFx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGd1ZXN0TGlzdFsncGVuZGluZyddKSkgZ3Vlc3RDb3VudC5wZW5kaW5nID0gY291bnRHdWVzdHMoZ3Vlc3RMaXN0WydwZW5kaW5nJ10pO1xuXHRcdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChndWVzdExpc3RbJ2RlY2xpbmVkJ10pKSBndWVzdENvdW50LmRlY2xpbmVkID0gY291bnRHdWVzdHMoZ3Vlc3RMaXN0WydkZWNsaW5lZCddKTtcblxuXHRcdFx0XHRyZXR1cm4gdG90YWxHdWVzdENvdW50KCk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHJldHVybiAwO1xuXHRcdH1cblxuXHRcdHZtLnBlcmNlbnRhZ2VBdHRlbmRpbmcgPSBmdW5jdGlvbihndWVzdExpc3QpIHtcblx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGd1ZXN0TGlzdCkpIHtcblx0XHRcdFx0cmV0dXJuIChndWVzdHNBdHRlbmRpbmcoZ3Vlc3RsaXN0KSAvIGd1ZXN0c0ludml0ZWQoZ3Vlc3RMaXN0KSk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHJldHVybiAwO1xuXHRcdH1cblxuXHRcdHZtLmV2ZW50Q2xpY2tlZCA9IGZ1bmN0aW9uKGV2ZW50SUQpIHtcblx0XHRcdC8vcmVkaXJlY3QgdG8gdGhlIGV2ZW50IHBhZ2Vcblx0XHRcdCRsb2cuaW5mbygncmVkaXJlY3RpbmcgdG86IC9ldmVudC8nICsgZXZlbnRJRCArICcvJyArIHZtLmhvc3RlZEV2ZW50c1tldmVudElEXS5ob3N0LnVpZCArICcvJyArIHZtLnVzZXJJZCk7XG5cdFx0XHRob3N0ZWRFdmVudHNTaGVycGEucmVkaXJlY3RUbygnL2V2ZW50JywgZXZlbnRJRCwgdm0uaG9zdGVkRXZlbnRzW2V2ZW50SURdLmhvc3QudWlkLCB2bS51c2VySWQpO1xuXHRcdH1cblxuXHRcdC8vYWN0aW9uc1xuXG5cdH1cblxuXHRyZXR1cm4gIGRpcmVjdGl2ZTtcblx0XHRcbn07XG4vKiBIb3N0ZWRFdmVudHNQcm9ncmVzc0Jhci5kaXJlY3RpdmUuanMgKi9cblxuLyoqXG4qIEBkZXNjIGRpc3BsYXlzIGEgdXNlcnMgcHJvZ3Jlc3MgdGhyb3VnaCB0aGUgZXZlbnRzIHBhZ2UuXG4qIEBleGFtcGxlIDxob3N0ZWQtZXZlbnRzLXByb2dyZXNzLWJhcj48L2hvc3RlZC1ldmVudHMtcHJvZ3Jlc3MtYmFyPlxuKi9cblxuYW5ndWxhclxuXHQubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG5cdC5kaXJlY3RpdmUoJ3Byb2dyZXNzQmFyJywgcHJvZ3Jlc3NCYXIpO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHByb2dyZXNzQmFyKCkge1xucmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICBzY29wZToge1xuICAgICAgICBjdXJWYWw6ICdAJyxcbiAgICAgICAgbWF4VmFsOiAnQCdcbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZTogXCI8ZGl2IGNsYXNzPSdwcm9ncmVzcy1iYXInPlwiK1xuICAgICAgICAgICAgICAgICAgXCI8ZGl2IGNsYXNzPSdwcm9ncmVzcy1iYXItYmFyJz50ZXN0aW5nPC9kaXY+XCIrXG4gICAgICAgICAgICAgICAgXCI8L2Rpdj5cIiwgICAgXG5cbiAgICAgIGxpbms6IGZ1bmN0aW9uICgkc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVQcm9ncmVzcygpIHtcbiAgICAgICAgICB2YXIgcHJvZ3Jlc3MgPSAwO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmICgkc2NvcGUubWF4VmFsKSB7XG4gICAgICAgICAgICBwcm9ncmVzcyA9IE1hdGgubWluKCRzY29wZS5jdXJWYWwsICRzY29wZS5tYXhWYWwpIC8gJHNjb3BlLm1heFZhbCAqIGVsZW1lbnQuZmluZCgnLnByb2dyZXNzLWJhcicpLndpZHRoKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGVsZW1lbnQuZmluZCgnLnByb2dyZXNzLWJhci1iYXInKS5jc3MoJ3dpZHRoJywgcHJvZ3Jlc3MpOyAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgJHNjb3BlLiR3YXRjaCgnY3VyVmFsJywgdXBkYXRlUHJvZ3Jlc3MpO1xuICAgICAgICAkc2NvcGUuJHdhdGNoKCdtYXhWYWwnLCB1cGRhdGVQcm9ncmVzcyk7ICAgICAgICBcbiAgICAgIH1cbiAgICB9OyAgXG4gfTtcbi8qIEhvc3RlZEd1ZXN0TGlzdC5kaXJlY3RpdmUuanMgKi9cblxuLyoqXG4qIEBkZXNjIGRpc3BsYXlzIGEgbGlzdCBvZiBhbGwgZ3Vlc3RzIGludml0ZWQgdG8gYW4gZXZlbnQgdGhpcyB1c2VyIGlzIGhvc3RpbmcuXG4qIEBleGFtcGxlIDxob3N0ZWQtZ3Vlc3QtbGlzdD48L2hvc3RlZC1ndWVzdC1saXN0PlxuKi9cblxuYW5ndWxhclxuXHQubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG5cdC5kaXJlY3RpdmUoJ2hvc3RlZEd1ZXN0TGlzdCcsIGhvc3RlZEd1ZXN0TGlzdCk7XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gaG9zdGVkR3Vlc3RMaXN0KCkge1xuICAgIGxpbmtGdW5jLiRpbmplY3QgPSBbXCJzY29wZVwiLCBcImVsXCIsIFwiYXR0clwiLCBcImN0cmxcIl07XG5cdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0cmVzdHJpY3Q6ICdBRUNNJyxcblx0XHR0ZW1wbGF0ZVVybDogJy4uL3ZpZXdzL2RpcmVjdGl2ZXMvaG9zdGVkR3Vlc3RMaXN0LmRpcmVjdGl2ZS5odG0nLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0c2NvcGU6IHtcblx0XHRcdGd1ZXN0TGlzdDogJz0nLFxuXHRcdH0sXG5cdFx0bGluazogbGlua0Z1bmMsXG5cdFx0Y29udHJvbGxlcjogaG9zdGVkR3Vlc3RMaXN0Q29udHJvbGxlcixcblx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHR9XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCwgYXR0ciwgY3RybCkge1xuICAgIH1cblxuICAgIGhvc3RlZEd1ZXN0TGlzdENvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZyddO1xuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIGhvc3RlZEd1ZXN0TGlzdENvbnRyb2xsZXIoJGxvZykge1xuXHQgICAgdmFyIHZtID0gdGhpcztcblxuXHQgICAgLy9sb2NhbCB2YXJpYWJsZXNcblx0ICAgIHZtLmlzQUd1ZXN0TGlzdCA9IGZhbHNlO1xuXG5cdCAgICAvL2xvY2FsIG1ldGhvZHNcblx0ICAgIGZ1bmN0aW9uIHRoZXJlSXNBR3Vlc3RMaXN0KCkge1xuXHQgICAgXHQvL2NoZWNrIGZvciBhIGd1ZXN0TGlzdCBvYmplY3Rcblx0ICAgIFx0aWYoYW5ndWxhci5pc0RlZmluZWQodm0uZ3Vlc3RMaXN0KSkge1xuXHQgICAgXHRcdHZtLmlzQUd1ZXN0TGlzdCA9IHRydWU7XG5cdCAgICBcdFx0cmV0dXJuIHRydWU7XG5cdCAgICBcdH0gZWxzZSB7XG5cdCAgICBcdFx0dm0uaXNBR3Vlc3RMaXN0ID0gZmFsc2U7XG5cdCAgICBcdFx0cmV0dXJuIGZhbHNlO1xuXHQgICAgXHR9XG5cdCAgICB9XG5cblx0ICAgIGZ1bmN0aW9uIGluaXQoKSB7XG5cdCAgICBcdC8vaWYgdGhlcmUgaXNuJ3QgYSBndWVzdCBsaXN0LCBjcmVhdGUgYSB0ZW1wXG5cdFx0XHRpZih0aGVyZUlzQUd1ZXN0TGlzdCgpKSB7XG5cdFx0XHRcdHZtLmd1ZXN0TGlzdCA9IHt9XG5cdFx0XHR9XG5cdCAgICB9XG5cdCAgICAvL3ZtIG1ldGhvZHNcblxuXHRcdC8vYWN0aW9uc1xuXHRcdGluaXQoKTtcblxuXHR9XG5cblx0cmV0dXJuICBkaXJlY3RpdmU7XG5cdFx0XG59O1xuLyogVG9vbEJhci5kaXJlY3RpdmUuanMgKi9cblxuLyoqXG4qIEBkZXNjIHRvb2xiYXIgZGlyZWN0aXZlIHRoYXQgaXMgdXNlZCBvbiB0aGUgbWFpbiBwYWdlIGFjcm9zcyB0aGUgZW50aXJlIGFwcC5cbiogQGV4YW1wbGUgPGRpdiB0b29sLWJhcj48L2Rpdj5cbiovXG5cbmFuZ3VsYXJcblx0Lm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuXHQuZGlyZWN0aXZlKCd0b29sQmFyJywgdG9vbEJhcik7XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gdG9vbEJhcigpIHtcbiAgICBsaW5rRnVuYy4kaW5qZWN0ID0gW1wic2NvcGVcIiwgXCJlbFwiLCBcImF0dHJcIiwgXCJjdHJsXCJdO1xuXHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdHJlc3RyaWN0OiAnQUVDTScsXG5cdFx0dGVtcGxhdGVVcmw6ICcuLi92aWV3cy9kaXJlY3RpdmVzL3Rvb2xCYXIuZGlyZWN0aXZlLmh0bScsXG5cdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRzY29wZToge30sXG5cdFx0bGluazogbGlua0Z1bmMsXG5cdFx0Y29udHJvbGxlcjogVG9vbEJhckNvbnRyb2xsZXIsXG5cdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0fVxuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHtcbiAgICB9XG5cbiAgICBUb29sQmFyQ29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJywgJ2JhY2tlbmRTZXJ2aWNlcyddO1xuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIFRvb2xCYXJDb250cm9sbGVyKCRsb2csIGJhY2tlbmRTZXJ2aWNlcykge1xuXHQgICAgdmFyIHZtID0gdGhpcztcblxuXHQgICAgLy9sb2NhbCBjb250cm9sZXIgdmFyaWFibGVzXG5cdCAgICB2YXIgZmJDb25uZWN0ID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdCAgICAvL2xvY2FsIHZpZXcgdmFyaWFibGVzXG5cdFx0ZmJDb25uZWN0LmNoZWNrTG9naW5TdGF0dXMoKVxuXHRcdC50aGVuKGZ1bmN0aW9uKHN0YXR1cykge1xuXHRcdFx0dm0ubG9nZ2VkSW4gPSBzdGF0dXM7XG5cdFx0fSlcblx0XHQuY2F0Y2goKVxuXG5cdFx0dm0uY2xpY2tlZCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0JGxvZy5pbmZvKCdidXR0b24gY2xpY2tlZCcpO1xuXHRcdH1cblxuXHRcdC8vYWN0aW9uc1xuXHRcdFxuXHR9XG5cblx0cmV0dXJuICBkaXJlY3RpdmU7XG5cdFx0XG59OyIsIi8qIEFkZEFHdWVzdC5kaXJlY3RpdmUuanMgKi9cblxuLyoqXG4qIEBkZXNjIGRpc3BsYXlzIGEgbGlzdCBvZiBhbGwgZ3Vlc3RzIGludml0ZWQgdG8gYW4gZXZlbnQgdGhpcyB1c2VyIGlzIGhvc3RpbmcuXG4qIEBleGFtcGxlIDxhZGQtYS1ndWVzdD48L2FkZC1hLWd1ZXN0PlxuKi9cblxuYW5ndWxhclxuXHQubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG5cdC5kaXJlY3RpdmUoJ2FkZEFHdWVzdCcsIGFkZEFHdWVzdCk7XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gYWRkQUd1ZXN0KCkge1xuXHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdHJlc3RyaWN0OiAnQUVDTScsXG5cdFx0dGVtcGxhdGVVcmw6ICcuLi92aWV3cy9kaXJlY3RpdmVzL2FkZEFHdWVzdC5kaXJlY3RpdmUuaHRtJyxcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdHNjb3BlOiB7XG5cdFx0fSxcblx0XHRsaW5rOiBsaW5rRnVuYyxcblx0XHRjb250cm9sbGVyOiBhZGRBR3Vlc3RDb250cm9sbGVyLFxuXHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdH1cblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7XG4gICAgfVxuXG4gICAgYWRkQUd1ZXN0Q29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJywgJyRyb3V0ZVBhcmFtcycsICd2YWxpZGF0aW9uJywgJ3VzZXJEYXRhJ107XG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gYWRkQUd1ZXN0Q29udHJvbGxlcigkbG9nLCAkcm91dGVQYXJhbXMsIHZhbGlkYXRpb24sIHVzZXJEYXRhKSB7XG5cdCAgICB2YXIgdm0gPSB0aGlzO1xuXHQgICAgdmFyIGVtYWlsQ2hlY2tlciA9IHZhbGlkYXRpb247XG5cdCAgICB2YXIgaW52aXRhdGlvbk1hbmFnZXIgPSB1c2VyRGF0YTtcblxuXHQgICAgLy9sb2NhbCB2YXJpYWJsZXNcblx0ICAgIHZhciBldmVudERldGFpbHMgPSB7fTtcblxuXHQgICAgLy92bSB2YXJpYWJsZXNcblx0ICAgIHZtLnRlbXBHdWVzdCA9IHtcblx0ICAgIFx0bmFtZTogJycsXG5cdCAgICBcdGVtYWlsOiAnJ1xuXHQgICAgfVxuXHQgICAgdm0udmFsaWRhdGlvbnMgPSB7XG5cdCAgICBcdG5hbWU6IHtcblx0ICAgIFx0XHRhZGRyZXNzZWQ6IGZhbHNlLFxuXHQgICAgXHRcdHZhbGlkOiBmYWxzZSxcblx0ICAgIFx0XHRlcnJvck1lc3NhZ2U6ICcnXG5cdCAgICBcdH0sXG5cdCAgICBcdGVtYWlsOiB7XG5cdCAgICBcdFx0YWRkcmVzc2VkOiBmYWxzZSxcblx0ICAgIFx0XHR2YWxpZDogZmFsc2UsXG5cdCAgICBcdFx0ZXJyb3JNZXNzYWdlOiAnJ1xuXHQgICAgXHR9LFxuXHQgICAgXHRpbnZpdGF0aW9uOiB7XG5cdCAgICBcdFx0aXNUaGVIb3N0OiBmYWxzZSxcblx0ICAgIFx0XHRhbHJlYWR5SW52aXRlZDogZmFsc2UsXG5cdCAgICBcdFx0ZXJyb3JNZXNzYWdlOiAnJ1xuXHQgICAgXHR9XG5cdCAgICB9XG5cdCAgICB2bS5pbnZpdGF0aW9uVmFsaWRGb3JTdWJtaXNzaW9uID0gZmFsc2U7XG5cdCAgICB2bS5zdWJtaXNzaW9uQnV0dG9uID0ge1xuXHQgICAgXHRzdHlsZToge1xuXHQgICAgXHRcdGNvbG9yOidyZWQnXG5cdCAgICBcdH0sXG5cdCAgICBcdGNsYXNzOiB7XG5cdCAgICBcdFx0J2NvbC14cy0xMic6IHRydWUsXG5cdCAgICBcdFx0J2NvbC1zbS0xMic6IHRydWUsXG5cdCAgICBcdFx0J2J0bic6IHRydWUsXG5cdCAgICBcdFx0J2J0bi13YXJuaW5nJzogdHJ1ZSxcblx0ICAgIFx0XHQnYnRuLXN1Y2Nlc3MnOiBmYWxzZVxuXHQgICAgXHR9LFxuXHQgICAgXHRtZXNzYWdlOiAnQWRkcmVzcyBJbnZpdGF0aW9uLi4uJ1xuXHQgICAgfVxuXHQgICAgLy9sb2NhbCBtZXRob2RzXG5cdCAgICBmdW5jdGlvbiB2YWxpZGF0ZUludml0YXRpb24oKSB7XG5cdCAgICBcdC8vY2hlY2sgaWYgYm90aCBpbnB1dHMgYXJlIHZhbGlkXG5cdCAgICBcdGlmKHZtLnZhbGlkYXRpb25zLm5hbWUudmFsaWQgJiYgdm0udmFsaWRhdGlvbnMuZW1haWwudmFsaWQpIHtcblx0ICAgIFx0XHQkbG9nLmluZm8oJ3JlYWR5IHRvIHN1Ym1pdCcpO1xuXHQgICAgXHRcdC8vc2V0IHRoZSB2YWxpZGl0eSBmbGFnXG5cdCAgICBcdFx0dm0uaW52aXRhdGlvblZhbGlkRm9yU3VibWlzc2lvbiA9IHRydWU7XG5cdCAgICBcdFx0Ly91cGRhdGUgdGhlIHN1Ym1pc3Npb24gYnV0dG9uXG5cdCAgICBcdFx0dm0uc3VibWlzc2lvbkJ1dHRvbi5jbGFzc1snYnRuLXdhcm5pbmcnXSA9IGZhbHNlO1xuXHQgICAgXHRcdHZtLnN1Ym1pc3Npb25CdXR0b24uY2xhc3NbJ2J0bi1zdWNjZXNzJ10gPSB0cnVlO1xuXHQgICAgXHRcdHZtLnN1Ym1pc3Npb25CdXR0b24ubWVzc2FnZT0nSW52aXRlIEd1ZXN0Jztcblx0ICAgIFx0fSBlbHNlIHtcblx0ICAgIFx0XHQkbG9nLmluZm8oJ25vdCByZWFkeSB0byBzdWJtaXQnKTtcblx0ICAgIFx0XHQvL3NldCB0aGUgdmFsaWRpdHkgZmxhZ1xuXHQgICAgXHRcdHZtLmludml0YXRpb25WYWxpZEZvclN1Ym1pc3Npb24gPSBmYWxzZTtcblx0ICAgIFx0XHQvL3VwZGF0ZSB0aGUgc3VibWlzc2lvbiBidXR0b25cblx0ICAgIFx0XHR2bS5zdWJtaXNzaW9uQnV0dG9uLmNsYXNzWydidG4td2FybmluZyddID0gdHJ1ZTtcblx0ICAgIFx0XHR2bS5zdWJtaXNzaW9uQnV0dG9uLmNsYXNzWydidG4tc3VjY2VzcyddID0gZmFsc2U7XG5cdCAgICBcdFx0dm0uc3VibWlzc2lvbkJ1dHRvbi5tZXNzYWdlPSdBZGRyZXNzIEludml0YXRpb24uLi4nO1xuXHQgICAgXHR9XG5cdCAgICB9XG5cblx0ICAgIGZ1bmN0aW9uIGluaXQoKSB7XG5cdCAgICBcdC8vbG9hZCB0aGUgZXZlbnQgZm9yIHJlZmVyZW5jZVxuXHQgICAgXHRpZihhbmd1bGFyLmlzVW5kZWZpbmVkKGludml0YXRpb25NYW5hZ2VyLmdldE9uZVVzZXJFdmVudExvY2FsbHkoJ2hvc3RpbmcnLCAkcm91dGVQYXJhbXMuZXZlbnRJZCkpKSB7XG5cdCAgICBcdFx0Ly9pZiB0aGlzIHBhZ2Ugd2FzIGxvYWRlZCBiZWZvcmUgdGhlIG1vZGVsIGdldCB0aGUgZXZlbnRcblx0ICAgIFx0XHRpbnZpdGF0aW9uTWFuYWdlci5nZXRSZW1vdGVFdmVudHNGb3JMb2NhbCgpXG5cdFx0ICAgIFx0LnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0ICAgIFx0XHQvL3doZW4gdGhlIGV2ZW50IGhhcyBiZWVuIGxvYWRlZFxuXHRcdCAgICBcdFx0ZXZlbnREZXRhaWxzID0gaW52aXRhdGlvbk1hbmFnZXIuZ2V0T25lVXNlckV2ZW50TG9jYWxseSgnaG9zdGluZycsICRyb3V0ZVBhcmFtcy5ldmVudElkKTtcblxuXHRcdCAgICBcdH0pXG5cdCAgICBcdH0gZWxzZSB7XG5cdCAgICBcdFx0Ly9qdXN0IGdldCB0aGUgbW9kZWwgbG9jYWxseVxuXHQgICAgXHRcdGV2ZW50RGV0YWlscyA9IGludml0YXRpb25NYW5hZ2VyLmdldE9uZVVzZXJFdmVudExvY2FsbHkoJ2hvc3RpbmcnLCAkcm91dGVQYXJhbXMuZXZlbnRJZCk7XG5cdCAgICBcdH1cblx0ICAgIFx0ICBcdFxuXHQgICAgfVxuXG5cdCAgICAvL3ZtIG1ldGhvZHNcblx0ICAgIHZtLnZhbGlkYXRlTmFtZSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgXHQvL3RoaXMgZmllbGQgaXMgYmVpbmcgZWRpdGVkLCB0aHJvdyBmbGFnXG5cdCAgICBcdHZtLnZhbGlkYXRpb25zLm5hbWUuYWRkcmVzc2VkID0gdHJ1ZTtcblxuXHQgICAgXHQvL2NoZWNrIGZvciB2YWx1ZVxuXHQgICAgXHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2bS50ZW1wR3Vlc3QubmFtZSkgJiYgdm0udGVtcEd1ZXN0Lm5hbWUgIT0gJycpIHtcblx0ICAgIFx0XHR2bS52YWxpZGF0aW9ucy5uYW1lLnZhbGlkID0gdHJ1ZTtcblx0ICAgIFx0XHR2bS52YWxpZGF0aW9ucy5uYW1lLmVycm9yTWVzc2FnZSA9ICcnO1xuXHQgICAgXHR9IGVsc2Uge1xuXHQgICAgXHRcdHZtLnZhbGlkYXRpb25zLm5hbWUudmFsaWQgPSBmYWxzZTtcblx0ICAgIFx0XHR2bS52YWxpZGF0aW9ucy5uYW1lLmVycm9yTWVzc2FnZSA9ICdUaGlzIGd1ZXN0IG5lZWRzIGEgbmFtZSc7XG5cdCAgICBcdH1cblxuXHQgICAgXHR2YWxpZGF0ZUludml0YXRpb24oKTtcblx0ICAgIH1cblx0ICAgIHZtLnZhbGlkYXRlRW1haWwgPSBmdW5jdGlvbigpIHtcblx0ICAgIFx0Ly90aGlzIGZpZWxkIGlzIGJlaW5nIGVkaXRlZCwgdGhyb3cgZmxhZ1xuXHQgICAgXHR2bS52YWxpZGF0aW9ucy5lbWFpbC5hZGRyZXNzZWQgPSB0cnVlO1xuXG5cdCAgICBcdC8vaXMgdGhlcmUgYW4gZW1haWwgdmFsdWU/XG5cdCAgICBcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZtLnRlbXBHdWVzdC5lbWFpbCkgJiYgdm0udGVtcEd1ZXN0LmVtYWlsICE9ICcnKSB7XG5cdCAgICBcdFx0XG5cdCAgICBcdFx0Ly9pZiBhbiBlbWFpbCBleGlzdHMgY2hlY2sgaXQncyB2YWxpZGl0eVxuXHQgICAgXHRcdGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQoZW1haWxDaGVja2VyLmVtYWlsKHZtLnRlbXBHdWVzdC5lbWFpbCkpKSB7XG5cdCAgICBcdFx0XHQvL2VtYWlsIGlzIHZhbGlkXG5cdCAgICBcdFx0XHR2bS52YWxpZGF0aW9ucy5lbWFpbC52YWxpZCA9IHRydWU7XG5cdCAgICBcdFx0XHR2bS52YWxpZGF0aW9ucy5lbWFpbC5lcnJvck1lc3NhZ2UgPSAnJztcblx0ICAgIFx0XHR9IGVsc2Uge1xuXHQgICAgXHRcdFx0Ly9nZXQgdGhlIGVycm9yXG5cdCAgICBcdFx0XHR2bS52YWxpZGF0aW9ucy5lbWFpbC52YWxpZCA9IGZhbHNlO1xuXHQgICAgXHRcdFx0dm0udmFsaWRhdGlvbnMuZW1haWwuZXJyb3JNZXNzYWdlID0gZW1haWxDaGVja2VyLmVtYWlsKHZtLnRlbXBHdWVzdC5lbWFpbCk7XG5cdCAgICBcdFx0XHQkbG9nLmluZm8odm0udmFsaWRhdGlvbnMuZW1haWwuZXJyb3JNZXNzYWdlKTtcblx0ICAgIFx0XHR9XG5cblx0ICAgIFx0fSBlbHNlIHtcblx0ICAgIFx0XHQvL3RoZXJlIGlzbid0IGFuIGVtYWlsIHlldFxuXHQgICAgXHRcdHZtLnZhbGlkYXRpb25zLmVtYWlsLnZhbGlkID0gZmFsc2U7XG5cdCAgICBcdFx0dm0udmFsaWRhdGlvbnMuZW1haWwuZXJyb3JNZXNzYWdlID0gJ05vdCBhIHZhbGlkIGVtYWlsJztcblx0ICAgIFx0fVxuXG5cdCAgICBcdHZhbGlkYXRlSW52aXRhdGlvbigpO1xuXHQgICAgfVxuXG5cdCAgICB2bS5zaG93TmFtZUVycm9yID0gZnVuY3Rpb24oKSB7XG5cdCAgICBcdGlmKCF2bS52YWxpZGF0aW9ucy5uYW1lLnZhbGlkICYmIHZtLnZhbGlkYXRpb25zLm5hbWUuYWRkcmVzc2VkKSByZXR1cm4gdHJ1ZTtcblx0ICAgIFx0ZWxzZSByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cblx0ICAgIHZtLnNob3dFbWFpbEVycm9yID0gZnVuY3Rpb24oKSB7XG5cdCAgICBcdGlmKCF2bS52YWxpZGF0aW9ucy5lbWFpbC52YWxpZCAmJiB2bS52YWxpZGF0aW9ucy5lbWFpbC5hZGRyZXNzZWQpIHJldHVybiB0cnVlO1xuXHQgICAgXHRlbHNlIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblxuXHQgICAgdm0uc2hvd0ludml0YXRpb25FcnJvciA9IGZ1bmN0aW9uKCkge1xuXHQgICAgXHRpZiggdm0udmFsaWRhdGlvbnMuaW52aXRhdGlvbi5pc1RoZUhvc3QgfHxcblx0ICAgIFx0XHR2bS52YWxpZGF0aW9ucy5pbnZpdGF0aW9uLmFscmVhZHlJbnZpdGVkICkgXG5cdCAgICBcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0ICAgIFx0ZWxzZSByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cblx0ICAgIHZtLnN1Ym1pdEd1ZXN0SW52aXRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuXHQgICAgXHQkbG9nLmluZm8oJ3N1Ym1pdHRpbmcgdGhlIGludml0YXRpb24nKTtcblx0ICAgIFx0Ly9pZiB0aGUgcmVxdWlybm1lbnRzIGFyZSBmdWxmaWxsZWQuLi5cblx0ICAgIFx0aWYodm0uaW52aXRhdGlvblZhbGlkRm9yU3VibWlzc2lvbikge1xuXHQgICAgXHRcdC8vbWFrZSBzdXJlIHRoZSBpbnZpdGF0aW9uIGlzIG5vdCB0byB0aGUgY3VycmVudCB1c2VyXG5cdCAgICBcdFx0aWYoaW52aXRhdGlvbk1hbmFnZXIudGhpc0lzVGhlSG9zdEVtYWlsKHZtLnRlbXBHdWVzdC5lbWFpbCwgJHJvdXRlUGFyYW1zLnVpZCwgJHJvdXRlUGFyYW1zLmV2ZW50SWQpKSB7XG5cdFx0XHRcdFx0dm0udmFsaWRhdGlvbnMuaW52aXRhdGlvbi5pc1RoZUhvc3QgPSB0cnVlO1xuXHRcdFx0XHRcdHZtLnZhbGlkYXRpb25zLmludml0YXRpb24uZXJyb3JNZXNzYWdlID0gJ05vIG5lZWQgdG8gaW52aXRlIHRoZSBob3N0Jztcblx0XHRcdFx0XHRyZXR1cm4gMDtcblx0ICAgIFx0XHR9IGVsc2Uge1xuXHQgICAgXHRcdFx0dm0udmFsaWRhdGlvbnMuaW52aXRhdGlvbi5pc1RoZUhvc3QgPSBmYWxzZTtcblx0ICAgIFx0XHR9XG5cdCAgICBcdFx0XG5cdFx0ICAgIFx0Ly9tYWtlIHN1cmUgdGhpcyBwZXJzb24gaGFzIG5vdCBhbHJlYWR5IGJlZW4gaW52aXRlZFxuXHRcdCAgICBcdC8vYWRkIHRoaXMgcGVyc29uIHRvIHRoZSBob3N0J3MgZ3Vlc3QgbGlzdFxuXHRcdCAgICBcdC8vaXMgdGhlIGd1ZXN0IGEgcmVnaXN0ZXJlZCB1c2VyPyBJZiBzbyBhZGQgdG8gdGhlaXIgcGVuZGluZyBpbnZpdGF0aW9uc1xuXHRcdCAgICBcdC8vaWYgbm90IGEgcmVnaXN0ZXJlZCB1c2VyIGFkZCB0aGlzIHRvIHRoZSB1bnJlZ2lzdGVyZWQgdXNlcnMgbGlzdCB1bmRlciB0aGVpciBlbWFpbCBhZGRyZXNzXG5cdCAgICBcdH1cblx0ICAgIFx0XG5cdCAgICB9XG5cblx0XHQvL2FjdGlvbnNcblx0XHRpbml0KCk7XG5cblx0fVxuXG5cdHJldHVybiAgZGlyZWN0aXZlO1xuXHRcdFxufTsiLCIvKiBIb3N0ZWRFdmVudHNMaXN0LmRpcmVjdGl2ZS5qcyAqL1xuXG4vKipcbiogQGRlc2MgZGlzcGxheXMgYSBsaXN0IG9mIGFsbCB0aGUgZXZlbnRzIHRoZSBjdXJyZW50IHVzZXIgaXMgaG9zdGluZy5cbiogQGV4YW1wbGUgPGhvc3RlZC1ldmVudHMtbGlzdD48L2hvc3RlZC1ldmVudHMtbGlzdD5cbiovXG5cbmFuZ3VsYXJcblx0Lm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuXHQuZGlyZWN0aXZlKCdob3N0ZWRFdmVudHNMaXN0JywgaG9zdGVkRXZlbnRzTGlzdCk7XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gaG9zdGVkRXZlbnRzTGlzdCgpIHtcblx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRyZXN0cmljdDogJ0FFQ00nLFxuXHRcdHRlbXBsYXRlVXJsOiAnLi4vdmlld3MvZGlyZWN0aXZlcy9ob3N0ZWRFdmVudHNMaXN0LmRpcmVjdGl2ZS5odG0nLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0c2NvcGU6IHtcblx0XHRcdGhvc3RlZEV2ZW50czogJz0nLFxuXHRcdFx0dXNlcklkOiAnPSdcblx0XHR9LFxuXHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdGNvbnRyb2xsZXI6IGhvc3RlZEV2ZW50c0xpc3RDb250cm9sbGVyLFxuXHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdH1cblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7XG4gICAgfVxuXG4gICAgaG9zdGVkRXZlbnRzTGlzdENvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICd0cmFmZmljVmFsZXQnXTtcbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBob3N0ZWRFdmVudHNMaXN0Q29udHJvbGxlcigkbG9nLCB0cmFmZmljVmFsZXQpIHtcblx0ICAgIHZhciB2bSA9IHRoaXM7XG5cblx0ICAgIC8vbG9jYWwgdmFyaWFibGVzXG5cdCAgICB2YXIgaG9zdGVkRXZlbnRzU2hlcnBhID0gdHJhZmZpY1ZhbGV0O1xuXG5cdCAgICAvL3ZpZXcgbW9kZWwgdmFyaWFibGVzXG5cdCAgICB2bS5ndWVzdHNBcmVJbnZpdGVkID0gZmFsc2U7XG5cblx0ICAgIC8vbG9jYWwgbWV0aG9kc1xuXHQgICAgZnVuY3Rpb24gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKSB7XG5cdFx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gY291bnRHdWVzdHMobGlzdCkge1xuXHRcdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlXG5cdFx0XHR2YXIgY291bnRlciA9IDA7XG5cblx0XHRcdC8vaWYgd2UncmUgY291bnRpbmcsIHRoZW4gdGhlcmUncyBhIGxpc3QsIHNvIHRocm93IHRoZSBmbGFnXG5cdFx0XHR2bS5ndWVzdHNBcmVJbnZpdGVkID0gdHJ1ZTtcblxuXHRcdFx0T2JqZWN0LmtleXNbbGlzdF0uZm9yRWFjaChmdW5jdGlvbihndWVzdCkge1xuXHRcdFx0XHRjb3VudGVyKys7XG5cdFx0XHR9KVxuXG5cdFx0XHRyZXR1cm4gY291bnRlcjtcblx0XHR9XG5cblx0XHQvL3ZpZXcgbW9kZWwgbWV0aG9kc1xuXHRcdHZtLmZvcm1hdERhdGUgPSBmdW5jdGlvbih1bml4VGltZSkge1xuXHRcdFx0Ly9yZWZvcm1hdCB0aGUgdGltZVxuXHRcdFx0JGxvZy5pbmZvKCdnb3QgdGhpc3QgdGltZTogJyArIHVuaXhUaW1lKTtcblx0XHRcdHJldHVybiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpO1xuXHRcdH1cblxuXHRcdHZtLmd1ZXN0c0F0dGVuZGluZyA9IGZ1bmN0aW9uKGd1ZXN0TGlzdCkge1xuXHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoZ3Vlc3RMaXN0KSkge1xuXHRcdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChndWVzdExpc3RbJ2F0dGVuZGluZyddKSkgcmV0dXJuIGNvdW50R3Vlc3RzKGd1ZXN0TGlzdFsnYXR0ZW5kaW5nJ10pO1xuXHRcdFx0XHRlbHNlIHJldHVybiAwO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSByZXR1cm4gMDtcblx0XHR9XG5cblx0XHR2bS5ndWVzdHNJbnZpdGVkID0gZnVuY3Rpb24oZ3Vlc3RMaXN0KSB7XG5cdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChndWVzdExpc3QpKSB7XG5cdFx0XHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRcdFx0dmFyIGd1ZXN0Q291bnQgPSB7IGF0dGVuZGluZzogMCwgcGVuZGluZzogMCwgZGVjbGluZWQ6IDAgfTtcblxuXHRcdFx0XHQvL2xvY2FsIG1ldGhvZHNcblx0XHRcdFx0ZnVuY3Rpb24gdG90YWxHdWVzdENvdW50KCkge1xuXHRcdFx0XHRcdHJldHVybiBndWVzdENvdW50LmF0dGVuZGluZyArIGd1ZXN0Q291bnQucGVuZGluZyArIGd1ZXN0Q291bnQuZGVjbGluZWQ7XG5cdFx0XHRcdH0gXG5cblx0XHRcdFx0Ly9jaGVjayB2YWx1ZXNcblx0XHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoZ3Vlc3RMaXN0WydhdHRlbmRpbmcnXSkpIGd1ZXN0Q291bnQuYXR0ZW5kaW5nID0gY291bnRHdWVzdHMoZ3Vlc3RMaXN0WydhdHRlbmRpbmcnXSk7XG5cdFx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGd1ZXN0TGlzdFsncGVuZGluZyddKSkgZ3Vlc3RDb3VudC5wZW5kaW5nID0gY291bnRHdWVzdHMoZ3Vlc3RMaXN0WydwZW5kaW5nJ10pO1xuXHRcdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChndWVzdExpc3RbJ2RlY2xpbmVkJ10pKSBndWVzdENvdW50LmRlY2xpbmVkID0gY291bnRHdWVzdHMoZ3Vlc3RMaXN0WydkZWNsaW5lZCddKTtcblxuXHRcdFx0XHRyZXR1cm4gdG90YWxHdWVzdENvdW50KCk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHJldHVybiAwO1xuXHRcdH1cblxuXHRcdHZtLnBlcmNlbnRhZ2VBdHRlbmRpbmcgPSBmdW5jdGlvbihndWVzdExpc3QpIHtcblx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGd1ZXN0TGlzdCkpIHtcblx0XHRcdFx0cmV0dXJuIChndWVzdHNBdHRlbmRpbmcoZ3Vlc3RsaXN0KSAvIGd1ZXN0c0ludml0ZWQoZ3Vlc3RMaXN0KSk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHJldHVybiAwO1xuXHRcdH1cblxuXHRcdHZtLmV2ZW50Q2xpY2tlZCA9IGZ1bmN0aW9uKGV2ZW50SUQpIHtcblx0XHRcdC8vcmVkaXJlY3QgdG8gdGhlIGV2ZW50IHBhZ2Vcblx0XHRcdCRsb2cuaW5mbygncmVkaXJlY3RpbmcgdG86IC9ldmVudC8nICsgZXZlbnRJRCArICcvJyArIHZtLmhvc3RlZEV2ZW50c1tldmVudElEXS5ob3N0LnVpZCArICcvJyArIHZtLnVzZXJJZCk7XG5cdFx0XHRob3N0ZWRFdmVudHNTaGVycGEucmVkaXJlY3RUbygnL2V2ZW50JywgZXZlbnRJRCwgdm0uaG9zdGVkRXZlbnRzW2V2ZW50SURdLmhvc3QudWlkLCB2bS51c2VySWQpO1xuXHRcdH1cblxuXHRcdC8vYWN0aW9uc1xuXG5cdH1cblxuXHRyZXR1cm4gIGRpcmVjdGl2ZTtcblx0XHRcbn07IiwiLyogSG9zdGVkRXZlbnRzUHJvZ3Jlc3NCYXIuZGlyZWN0aXZlLmpzICovXG5cbi8qKlxuKiBAZGVzYyBkaXNwbGF5cyBhIHVzZXJzIHByb2dyZXNzIHRocm91Z2ggdGhlIGV2ZW50cyBwYWdlLlxuKiBAZXhhbXBsZSA8aG9zdGVkLWV2ZW50cy1wcm9ncmVzcy1iYXI+PC9ob3N0ZWQtZXZlbnRzLXByb2dyZXNzLWJhcj5cbiovXG5cbmFuZ3VsYXJcblx0Lm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuXHQuZGlyZWN0aXZlKCdwcm9ncmVzc0JhcicsIHByb2dyZXNzQmFyKTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBwcm9ncmVzc0JhcigpIHtcbnJldHVybiB7XG4gICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgY3VyVmFsOiAnQCcsXG4gICAgICAgIG1heFZhbDogJ0AnXG4gICAgICB9LFxuICAgICAgdGVtcGxhdGU6IFwiPGRpdiBjbGFzcz0ncHJvZ3Jlc3MtYmFyJz5cIitcbiAgICAgICAgICAgICAgICAgIFwiPGRpdiBjbGFzcz0ncHJvZ3Jlc3MtYmFyLWJhcic+dGVzdGluZzwvZGl2PlwiK1xuICAgICAgICAgICAgICAgIFwiPC9kaXY+XCIsICAgIFxuXG4gICAgICBsaW5rOiBmdW5jdGlvbiAoJHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlUHJvZ3Jlc3MoKSB7XG4gICAgICAgICAgdmFyIHByb2dyZXNzID0gMDtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoJHNjb3BlLm1heFZhbCkge1xuICAgICAgICAgICAgcHJvZ3Jlc3MgPSBNYXRoLm1pbigkc2NvcGUuY3VyVmFsLCAkc2NvcGUubWF4VmFsKSAvICRzY29wZS5tYXhWYWwgKiBlbGVtZW50LmZpbmQoJy5wcm9ncmVzcy1iYXInKS53aWR0aCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBlbGVtZW50LmZpbmQoJy5wcm9ncmVzcy1iYXItYmFyJykuY3NzKCd3aWR0aCcsIHByb2dyZXNzKTsgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgICRzY29wZS4kd2F0Y2goJ2N1clZhbCcsIHVwZGF0ZVByb2dyZXNzKTtcbiAgICAgICAgJHNjb3BlLiR3YXRjaCgnbWF4VmFsJywgdXBkYXRlUHJvZ3Jlc3MpOyAgICAgICAgXG4gICAgICB9XG4gICAgfTsgIFxuIH07IiwiLyogSG9zdGVkR3Vlc3RMaXN0LmRpcmVjdGl2ZS5qcyAqL1xuXG4vKipcbiogQGRlc2MgZGlzcGxheXMgYSBsaXN0IG9mIGFsbCBndWVzdHMgaW52aXRlZCB0byBhbiBldmVudCB0aGlzIHVzZXIgaXMgaG9zdGluZy5cbiogQGV4YW1wbGUgPGhvc3RlZC1ndWVzdC1saXN0PjwvaG9zdGVkLWd1ZXN0LWxpc3Q+XG4qL1xuXG5hbmd1bGFyXG5cdC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcblx0LmRpcmVjdGl2ZSgnaG9zdGVkR3Vlc3RMaXN0JywgaG9zdGVkR3Vlc3RMaXN0KTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBob3N0ZWRHdWVzdExpc3QoKSB7XG5cdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0cmVzdHJpY3Q6ICdBRUNNJyxcblx0XHR0ZW1wbGF0ZVVybDogJy4uL3ZpZXdzL2RpcmVjdGl2ZXMvaG9zdGVkR3Vlc3RMaXN0LmRpcmVjdGl2ZS5odG0nLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0c2NvcGU6IHtcblx0XHRcdGd1ZXN0TGlzdDogJz0nLFxuXHRcdH0sXG5cdFx0bGluazogbGlua0Z1bmMsXG5cdFx0Y29udHJvbGxlcjogaG9zdGVkR3Vlc3RMaXN0Q29udHJvbGxlcixcblx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHR9XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCwgYXR0ciwgY3RybCkge1xuICAgIH1cblxuICAgIGhvc3RlZEd1ZXN0TGlzdENvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZyddO1xuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIGhvc3RlZEd1ZXN0TGlzdENvbnRyb2xsZXIoJGxvZykge1xuXHQgICAgdmFyIHZtID0gdGhpcztcblxuXHQgICAgLy9sb2NhbCB2YXJpYWJsZXNcblx0ICAgIHZtLmlzQUd1ZXN0TGlzdCA9IGZhbHNlO1xuXG5cdCAgICAvL2xvY2FsIG1ldGhvZHNcblx0ICAgIGZ1bmN0aW9uIHRoZXJlSXNBR3Vlc3RMaXN0KCkge1xuXHQgICAgXHQvL2NoZWNrIGZvciBhIGd1ZXN0TGlzdCBvYmplY3Rcblx0ICAgIFx0aWYoYW5ndWxhci5pc0RlZmluZWQodm0uZ3Vlc3RMaXN0KSkge1xuXHQgICAgXHRcdHZtLmlzQUd1ZXN0TGlzdCA9IHRydWU7XG5cdCAgICBcdFx0cmV0dXJuIHRydWU7XG5cdCAgICBcdH0gZWxzZSB7XG5cdCAgICBcdFx0dm0uaXNBR3Vlc3RMaXN0ID0gZmFsc2U7XG5cdCAgICBcdFx0cmV0dXJuIGZhbHNlO1xuXHQgICAgXHR9XG5cdCAgICB9XG5cblx0ICAgIGZ1bmN0aW9uIGluaXQoKSB7XG5cdCAgICBcdC8vaWYgdGhlcmUgaXNuJ3QgYSBndWVzdCBsaXN0LCBjcmVhdGUgYSB0ZW1wXG5cdFx0XHRpZih0aGVyZUlzQUd1ZXN0TGlzdCgpKSB7XG5cdFx0XHRcdHZtLmd1ZXN0TGlzdCA9IHt9XG5cdFx0XHR9XG5cdCAgICB9XG5cdCAgICAvL3ZtIG1ldGhvZHNcblxuXHRcdC8vYWN0aW9uc1xuXHRcdGluaXQoKTtcblxuXHR9XG5cblx0cmV0dXJuICBkaXJlY3RpdmU7XG5cdFx0XG59OyIsIi8qIFRvb2xCYXIuZGlyZWN0aXZlLmpzICovXG5cbi8qKlxuKiBAZGVzYyB0b29sYmFyIGRpcmVjdGl2ZSB0aGF0IGlzIHVzZWQgb24gdGhlIG1haW4gcGFnZSBhY3Jvc3MgdGhlIGVudGlyZSBhcHAuXG4qIEBleGFtcGxlIDxkaXYgdG9vbC1iYXI+PC9kaXY+XG4qL1xuXG5hbmd1bGFyXG5cdC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcblx0LmRpcmVjdGl2ZSgndG9vbEJhcicsIHRvb2xCYXIpO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHRvb2xCYXIoKSB7XG5cdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0cmVzdHJpY3Q6ICdBRUNNJyxcblx0XHR0ZW1wbGF0ZVVybDogJy4uL3ZpZXdzL2RpcmVjdGl2ZXMvdG9vbEJhci5kaXJlY3RpdmUuaHRtJyxcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdHNjb3BlOiB7fSxcblx0XHRsaW5rOiBsaW5rRnVuYyxcblx0XHRjb250cm9sbGVyOiBUb29sQmFyQ29udHJvbGxlcixcblx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHR9XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCwgYXR0ciwgY3RybCkge1xuICAgIH1cblxuICAgIFRvb2xCYXJDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnYmFja2VuZFNlcnZpY2VzJ107XG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gVG9vbEJhckNvbnRyb2xsZXIoJGxvZywgYmFja2VuZFNlcnZpY2VzKSB7XG5cdCAgICB2YXIgdm0gPSB0aGlzO1xuXG5cdCAgICAvL2xvY2FsIGNvbnRyb2xlciB2YXJpYWJsZXNcblx0ICAgIHZhciBmYkNvbm5lY3QgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0ICAgIC8vbG9jYWwgdmlldyB2YXJpYWJsZXNcblx0XHRmYkNvbm5lY3QuY2hlY2tMb2dpblN0YXR1cygpXG5cdFx0LnRoZW4oZnVuY3Rpb24oc3RhdHVzKSB7XG5cdFx0XHR2bS5sb2dnZWRJbiA9IHN0YXR1cztcblx0XHR9KVxuXHRcdC5jYXRjaCgpXG5cblx0XHR2bS5jbGlja2VkID0gZnVuY3Rpb24oKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2J1dHRvbiBjbGlja2VkJyk7XG5cdFx0fVxuXG5cdFx0Ly9hY3Rpb25zXG5cdFx0XG5cdH1cblxuXHRyZXR1cm4gIGRpcmVjdGl2ZTtcblx0XHRcbn07IiwiYW5ndWxhclxuXHQubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcsIFtcblx0XHQnbmdSb3V0ZScsXG5cdFx0J25nVG91Y2gnLFxuXHRcdCdmaXJlYmFzZSdcblx0XSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
