function AnEventController(e,t){function n(){v.tempDateTime={start:"",end:""},v.newGuest={name:"",email:{address:"",valid:!1,style:{color:""}}},v.showIfHost=!1,v.hideIfAttending=!0,v.manageSections={1:{active:!0,complete:!1,style:{color:"black","background-color":"yellow"}},2:{active:!1,complete:!1,style:{color:"white","background-color":"gray"}},3:{active:!1,complete:!1,style:{color:"white","background-color":"gray"}}},u(),d(),v.showIfHost||f()}function o(e){return btoa(e)}function s(e){return atob(e)}function r(e){return Date.parse(e)}function a(){v.newGuest={name:"",email:{address:"",valid:!1,style:{color:""}}}}function l(n){e.info("adding them to the registered users list "+n),ref.child("Users").child(n).child("events").child("pending").child(t.uid).child(t.eventId).set({id:t.eventId,eventTimes:{start:v.event.eventTimes.start,end:v.event.eventTimes.end},name:v.event.name,host:t.uid},function(t){t&&e.info("there was an error"+t)}),ref.child("Users").child(n).child("events").child("pending").once("value",function(t){var i=t.val();e.info(t.val()),i.updated?(e.info("deleting updated"),ref.child("Users").child(n).child("events").child("pending").child("updated").remove(function(t){t&&e.info("Deleting failed: "+t.code)})):e.info("nothing to do")},function(t){t&&e.info("The read failed: "+t.code)})}function c(n){e.info("adding them to the UNREGISTERED users list "+n),ref.child("UnregisteredUsers").child(n).child("pending").child(t.uid).child(t.eventId).set({id:t.eventId,host:t.uid,eventTimes:{start:v.event.eventTimes.start,end:v.event.eventTimes.end},name:v.event.name},function(t){t&&e.info("there was an error"+t)})}function u(){var n=ref.getAuth();n.uid==t.hostId?(e.info("is the host"),v.showIfHost=!0):(e.info("not the host"),v.showIfHost=!1)}function d(){v.showIfHost||(e.info("check guest attendance"),userEvents.child("guestList").on("value",function(e){var n=e.val();v.hideIfAttending=!n[t.uid].attending}))}function f(){v.manageSections[1].active=!0,v.manageSections[2].active=!0,v.manageSections[3].active=!0}var v=this;v.tempTime={start:"",end:""},v.userIsHost=!1,v.setTempTime=function(e){"start"==e&&(v.tempDateTime.start=new Date),"end"==e&&(v.tempDateTime.end=new Date)},v.unixTimeToDateTime=function(e){return new Date(parseInt(e))},v.dateTimeToUnixTime=function(e){return Date.parse(e)},v.submit=function(){e.info("submitting the form now!")},v.backToUserEvents=function(){$location.path("/userEvents/"+t.uid+"/"+t.token)},v.eventRedirect=function(n,i){var o=n+"/"+t.uid+"/"+t.token;e.info("redirecting to: "+o),$location.path(o)},v.changeSection=function(t){for(e.info("are we here"),i=1;i<=3;i++)i==t?(v.manageSections[i].active=!0,v.manageSections[i].style["background-color"]="yellow",v.manageSections[i].style.color="black"):(v.manageSections[i].active=!1,v.manageSections[i].style["background-color"]="gray",v.manageSections[i].style.color="white")},v.saveEventTime=function(e,t){v.event.eventTimes||(v.event.eventTimes={start:"",end:""},v.event.eventTimes.start=v.dateTimeToUnixTime(v.tempDateTime.start),v.event.eventTimes.end=v.dateTimeToUnixTime(v.tempDateTime.end)),v.tempDateTime.end<v.tempDateTime.start&&"start"==t&&(v.tempDateTime.end=v.tempDateTime.start),"start"==t&&(v.event.eventTimes.start=v.dateTimeToUnixTime(e)),"end"==t&&(v.event.eventTimes.end=v.dateTimeToUnixTime(e))},v.guestsAreInvited=function(){return!!v.event.guestList},v.validateGuestEmail=function(){if(v.newGuest.email.address){var e=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","");e.test(v.newGuest.email.address)?(v.newGuest.email.valid=!0,v.newGuest.email.style={color:"green"}):(v.newGuest.email.valid=!1,v.newGuest.email.style={color:""})}},v.isSectionComplete=function(){for(i=0;i<8;i++)e.info(v.requiredInputs[i])},v.saveAndAdvance=function(){v.event.$save().then(function(){e.info("event saved")})["catch"](function(t){e.info("error! "+t)}),v.isSectionComplete(),1==v.manageSections[1].complete&&1==v.manageSections[2].complete&&1==v.manageSections[3].complete?v.eventRedirect("/userEvents",t.uid):v.manageSections[1].active?v.changeSection(2):v.manageSections[2].active?v.changeSection(3):v.manageSections[3].active&&v.changeSection(1)},v.addGuestToHostsList=function(){var n=o(v.newGuest.email.address);if(v.newGuest.name&&v.newGuest.email.valid){if(v.event.guestList)for(var i=0;v.event.guestList[i];){if(v.event.guestList[i].email==s(n))return e.info("This guest is already on the list"),void a();i++}else v.event.guestList={};if(registeredUsers[n]){if(registeredUsers[n]==t.uid)return e.info("tried to register the host"),void a();l(registeredUsers[n]),v.event.guestList[registeredUsers[n]]={attending:!1,status:"pending",name:v.newGuest.name,email:v.newGuest.email.address}}else c(n),v.event.guestList[n]={attending:!1,status:"pending",name:v.newGuest.name,email:v.newGuest.email.address};v.saveEvent(),a()}else e.info("you didn't enter a name and or email")},v.guestWillAttend=function(n){var i=ref.child("Users").child(t.uid).child("events"),o=0,s=!1;if(v.event.guestList[t.uid].attending=n,v.event.guestList[t.uid].status="attending",i.child("pending").on("value",function(s){var r=s.val();e.info(r),e.info(r[t.hostId]),e.info(r[t.hostId][t.eventId]);var a=r[t.hostId][t.eventId];e.info(a);for(invitation in r)o++;e.info("total attending: "+o),n&&i.child("attending").child(t.hostId).child(t.eventId).set(a,function(t){t&&e.info(t)})}),i.child("attending").on("value",function(t){var n=t.val();e.info("this is the attending list"),e.info(n),n.updated&&(s=!0)},function(t){t&&e.info(t)}),2>o){var a=new Date;i.child("pending").update({updated:r(a)},function(t){t&&e.info(t)})}i.child("pending").child(t.hostId).remove(),s&&e.info("removing the updated placeholder"),v.event.$save()},v.updateUpdatedParam=function(){var n=ref.child("Users").child(t.uid).child("events");e.info("updating the param"),n.child("attending").on("value",function(t){e.info(t.val())}),n.child("attending").child("updated").remove()},v.addInvitationToAttending=function(n){var i=ref.child("Users").child(t.uid).child("events"),o=0;i.child("pending").on("value",function(s){var r=s.val(),a=r[t.hostId][t.eventId];e.info(r),e.info(r[t.hostId]),e.info(r[t.hostId][t.eventId]);for(invitation in r)o++;e.info("total pending invitations: "+o),e.info(n),n&&i.child("attending").child(t.hostId).child(t.eventId).set(a,function(t){t&&e.info(t)})})},n()}function GuestEventController(e){e.info("into the GuestEventController")}function HostEventController(e,t,n,i,o,s){function r(e){return new Date(parseInt(e))}function a(e){return Date.parse(e)}function l(e,t){return(a(t)-a(e))/6e4}function c(e){"open"==e?(m.actionBtn.btn["class"]["btn-success"]=!0,m.actionBtn.btn["class"]["btn-warning"]=!1,m.actionBtn.btn.message="Save Event"):"close"==e&&(m.actionBtn.btn["class"]["btn-success"]=!1,m.actionBtn.btn["class"]["btn-warning"]=!0,m.actionBtn.btn.message="Add Info")}function u(e){w+=e,m.progressBar.complete=w,m.progressBar.style.width=w+"%",m.progressBar.message=w+"%",w>99&&c("open"),99>w&&c("close")}function d(){var e=new Date;e.setHours(e.getHours()+Math.round(e.getMinutes()/60)),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),m.tempTime.start=e,m.tempTime.end=e,m.tempTime.duration=l(m.tempTime.start,m.tempTime.end)}function f(){angular.isDefined(m.tempEvent.eventTimes.start)&&(m.tempTime.start=r(m.tempEvent.eventTimes.start),m.tempTime.end=r(m.tempEvent.eventTimes.end))}function v(){if(p.thereIsAnActiveEvent()){var e=p.getActiveEvent();m.progressBar=e.progressBar,w=e.percentComplete,m.tempEvent=e.event,m.requiredFieldComplete=e.requiredFields}else p.loadAnEventProgressively(n.uid,n.eventId).then(function(e){m.tempEvent=e,f()})["catch"](function(e){t("the error is: "+e)});m.activeSection=parseInt(n.section),d()}var m=this,g=o,p=i,h=s,w=0;m.activeSection=1,m.tempTime={start:"",end:"",duration:""},m.progressBar={complete:m.percentComplete,style:{width:m.percentComplete+"%"},message:m.percentComplete+"%"},m.actionBtn={div:{"class":{"col-xs-6":!0,"col-sm-6":!0}},btn:{"class":{btn:!0,"btn-success":!1,"btn-warning":!0,"pull-right":!0},message:"Add Info"}},m.tempEvent={},m.requiredFieldComplete=h.generateEventRequirnments(),m.formatDuration=function(){m.tempTime.duration=l(m.tempTime.start,m.tempTime.end);var e=Math.floor(m.tempTime.duration/60),t=m.tempTime.duration%60,n=Math.round(t/15)/4;return e+n+" h"},m.validateTime=function(e){m.tempTime.duration>24&&m.settingTempStart();var t={eventStart:m.tempTime.start,eventEnd:m.tempTime.end};angular.isDefined(t[e])&&""!=t[e]&&m.tempTime.duration>0?(0==m.requiredFieldComplete[e].completed&&u(10),m.tempEvent.eventTimes.start=a(m.tempTime.start),m.tempEvent.eventTimes.end=a(m.tempTime.end),m.requiredFieldComplete[e].completed=!0,m.requiredFieldComplete[e].row["class"]["has-success"]=!0,m.requiredFieldComplete[e].row["class"]["has-feedback"]=!0,m.requiredFieldComplete[e].row["class"]["has-error"]=!1):(1==m.requiredFieldComplete[e].completed&&u(-10),m.requiredFieldComplete[e].completed=!1,m.requiredFieldComplete[e].row["class"]["has-success"]=!1,m.requiredFieldComplete[e].row["class"]["has-feedback"]=!1,m.requiredFieldComplete[e].row["class"]["has-error"]=!0)},m.settingTempStart=function(){(a(m.tempTime.end)<=a(m.tempTime.start)||a(m.tempTime.end)-a(m.tempTime.start)>864e5)&&(oldStart=a(m.tempTime.start),oldEnd=a(m.tempTime.end),newEnd=oldStart+36e5,m.tempTime.end=r(newEnd))},m.settingTempEnd=function(){m.tempTime.start>m.tempTime.end&&(m.tempTime.start=m.tempTime.end),m.validateTime("eventEnd"),m.tempTime.duration=l(m.tempTime.start,m.tempTime.end)},m.backToUserEvents=function(){w>99&&(p.saveNewHostingEvent("hosting",m.tempEvent),p.setRemoteEventsFromLocal("hosting",m.tempEvent).then(function(e){t.info(e)})["catch"](function(e){t.info(e)})),g.redirectTo("/userEvents",n.uid)},m.sectionBack=function(){var e={event:m.tempEvent,progressBar:m.progressBar,percentComplete:w,requiredFields:m.requiredFieldComplete};t.info(e),p.setActiveEvent(e),targetSection=m.activeSection-1,g.redirectTo("/event/host",n.eventId,n.uid,targetSection)},m.sectionForward=function(){var e={event:m.tempEvent,progressBar:m.progressBar,percentComplete:w,requiredFields:m.requiredFieldComplete};t.info(e),p.setActiveEvent(e),targetSection=m.activeSection+1,g.redirectTo("/event/host",n.eventId,n.uid,targetSection)},m.verifyRequired=function(e,t){angular.isDefined(t)&&""!=t?(0==m.requiredFieldComplete[e].completed&&u(10),m.requiredFieldComplete[e].completed=!0,m.requiredFieldComplete[e].row["class"]["has-success"]=!0,m.requiredFieldComplete[e].row["class"]["has-feedback"]=!0,m.requiredFieldComplete[e].row["class"]["has-error"]=!1):(1==m.requiredFieldComplete[e].completed&&u(-10),m.requiredFieldComplete[e].completed=!1,m.requiredFieldComplete[e].row["class"]["has-success"]=!1,m.requiredFieldComplete[e].row["class"]["has-feedback"]=!1,m.requiredFieldComplete[e].row["class"]["has-error"]=!0)},m.saveEventToDB=function(){t.info(m.tempEvent),w>99&&(p.saveNewHostingEvent("hosting",m.tempEvent),p.setRemoteEventsFromLocal(n.uid,m.tempEvent).then(function(e){t.info(e),p.cleanDBEventsCategory("hosting").then(function(e){t.info(e)})["catch"](function(e){t.info(e)})})["catch"](function(e){t.info(e)}),g.redirectTo("/userEvents",n.uid))},e.$watch("vm.tempEvent.guestList",function(e,t){angular.isObject(m.tempEvent.guestList)&&u(10)}),v()}function LandingPageController(e){var t=this,n=e;t.createAnAccount=function(){n.redirectTo("/signup")},t.loginUser=function(){n.redirectTo("/login")}}function MainController(e,t,n,i){function o(){angular.element(n);n.css("hight",i.outerHeight)}var s=this,r="https://meetupplanner.firebaseio.com/",a=new Firebase(r);s.logout=function(){alert("logging you out!"),a.unauth(),t.path("/")},angular.element(n).ready(function(){o()})}function NewUserSignUpController(e,t,n,o,s,r){function a(){""!=l.errors.name||""!=l.errors.email||l.errors.password?l.errors.passesAllTests=!1:l.errors.passesAllTests=!0,angular.isDefined(l.inputs.newName)&&""!==l.inputs.newName&&angular.isDefined(l.inputs.newEmail)&&""!==l.inputs.newEmail&&angular.isDefined(l.inputs.newPassword)&&""!==l.inputs.newPassword?l.inputs.requiredFieldsDefined=!0:l.inputs.requiredFieldsDefined=!1}var l=this;l.inputs={newName:"",newEmail:"",newPassword:"",requiredFieldsDefined:!1},l.errors={name:"",email:"",password:!1,passesAllTests:!1},l.passReqs={0:{id:"",req:"Is at least 16 characters long",fulfilled:!1,style:{color:"red"}},1:{id:"",req:"Is no longer than 100 characters",fulfilled:!1,style:{color:"red"}},2:{id:"",req:"Contains at least one lowercase letter",fulfilled:!1,style:{color:"red"}},3:{id:"",req:"Contains at least one uppercase letter",fulfilled:!1,style:{color:"red"}},4:{id:"",req:"Contains at least one number",fulfilled:!1,style:{color:"red"}},5:{id:"",req:"Contains at least one required symbol (!@#$%^&*)",fulfilled:!1,style:{color:"red"}},6:{id:"",req:"Doesn't have any illegal characters",fulfilled:!0,style:{color:"red"}}},l.showReqsBox=!1;var c=n;l.checkNewName=function(){var e=[],t=c.required(l.inputs.newName),n=c.minNameLength(l.inputs.newName);angular.isDefined(t)&&e.push(t),angular.isDefined(n)&&e.push(n),e.length>0?l.errors.name=e.join(", "):l.errors.name="",a()},l.checkNewEmail=function(){var e=[],t=c.required(l.inputs.newEmail),n=c.email(l.inputs.newEmail);angular.isDefined(t)&&e.push(t),angular.isDefined(n)&&e.push(n),e.length>0?l.errors.email=e.join(", "):l.errors.email="",a()},l.checkNewPassword=function(){l.showReqsBox=!0;var e=[],t=c.required(l.inputs.newPassword),n=[c.minPassLength(l.inputs.newPassword),c.maxPassLength(l.inputs.newPassword),c.atLeastOneLowercase(l.inputs.newPassword),c.atLeastOneUppercase(l.inputs.newPassword),c.atLeastOneNumber(l.inputs.newPassword),c.atLeastOneSymbol(l.inputs.newPassword),c.illegalCharacter(l.inputs.newPassword)];angular.isDefined(t)&&e.push(t),e.length>0?l.errors.password=e.join(", "):l.errors.email="";var o=!1;for(i=0;i<7;i++)n[i]?(l.passReqs[i].fulfilled=!0,l.passReqs[i].style={color:"green"}):(l.passReqs[i].fulfilled=!1,l.passReqs[i].style={color:"red"},o=!0);l.errors.password=o,a()},l.exitPassword=function(){l.checkNewPassword(),l.showReqsBox=!1},l.createNewUser=function(){var e=s;if(l.errors.passesAllTests&&l.inputs.requiredFieldsDefined){var n=o,i=r;n.createNewUser(l.inputs.newEmail,l.inputs.newPassword).then(function(o){i.setPrimariesLocally(l.inputs.newEmail,l.inputs.newName,o.uid),n.addNewUserToDatabase(o.uid,l.inputs.newName,l.inputs.newEmail).then(function(i){t.info(i),n.addNewUserToRegUsersList(o.uid,l.inputs.newEmail).then(function(n){e.redirectTo("/userInformation",o.uid),t.info(n)})["catch"](function(e){t.info(e)})})["catch"](function(e){t.info(e)})})["catch"](function(e){t.info(e)})}}}function RegUserLoginController(e,t,n,i,o){function s(){angular.isDefined(r.inputs.email)&&""!==r.inputs.email&&angular.isDefined(r.inputs.password)&&""!==r.inputs.password?(r.inputs.requiredFieldsDefined=!0,r.unclockUserLoginBtn["class"]["btn-success"]=!0,r.unclockUserLoginBtn["class"]["btn-warning"]=!1,r.unclockUserLoginBtn.message="Login",r.unclockUserLoginBtn.usable=!0):(r.inputs.requiredFieldsDefined=!1,r.unclockUserLoginBtn["class"]["btn-success"]=!1,r.unclockUserLoginBtn["class"]["btn-warning"]=!0,r.unclockUserLoginBtn.message="Need Email & Pass",r.unclockUserLoginBtn.usable=!1)}var r=this;r.inputs={email:"",password:"",requiredFieldsDefined:!1},r.errors={message:"",passesAllTests:!0},r.unclockUserLoginBtn={usable:!1,"class":{btn:!0,"btn-warning":!0,"btn-success":!1,"col-xs-12":!0,"col-sm-12":!0},message:"Need Email & Pass"},r.update=function(){r.inputs.email=t.find("#userEmail")[0].value,r.inputs.password=t.find("#userPassword")[0].value,s()},r.loginRegisteredUser=function(){var t=i,s=n,a=o;s.LoginRegisteredUser(r.inputs.email,r.inputs.password).then(function(e){r.errors.passesAllTests=!0,a.setPrimariesLocally(r.inputs.email,r.inputs.name,e.uid)}).then(function(){e.info("uid is "+a.getUIDLocally()),s.getUserBio(a.getUIDLocally()).then(function(t){a.updateBioLocally(t),s.getUserEvents(a.getUIDLocally()).then(function(e){a.updateAllUserEventsLocally(e)})["catch"](function(t){e.info(t)})})["catch"](function(t){e.info(t)}),t.redirectTo("/userInformation",a.getUIDLocally())})["catch"](function(e){r.errors.message=e,r.errors.passesAllTests=!1})},r.clicked=function(){var e=n;e.logUserOut()}}function topMenuController(e,t,n,i,o){function s(e){e?(t.info("User "+e.uid+" is logged in with "+e.provider),a.loggedIn=!0):(t.info("User is logged out"),a.loggedIn=!1)}function r(e,i){var o=e+"/"+i.uid+"/"+i.token;t.info("redirecting to: "+o),n.path(o)}var a=this,l="https://meetupplanner.firebaseio.com/",c=new Firebase(l);a.loggedIn=!1,"addEventListener"in i&&i.addEventListener("DOMContentLoaded",function(){t.info("adding FastClick"),FastClick.attach(i.body)},!1),angular.element(o).bind("resize",function(){a.onResizeFunction(),e.$apply()}),angular.element(i).ready(function(){o.outerWidth<600&&(a.onResizeFunction(),e.$apply())}),a.logout=function(){t.info("logging out!"),a.loggedIn=!1,c.unauth(),r("/",{uid:"",token:""})},a.navBarLoginRegisteredUser=function(){t.info("launching login");var n=new Firebase(l);n.authWithPassword({email:a.navbarUserEmail,password:a.navbarUserPass},function(n,i){n?t.info("Error Logging In: "+n):(t.info("Logged In successfully: "+i.uid),t.info(i),r("/userInformation",i),e.$apply(),angular.element(".navbar-toggle").click())})},a.onResizeFunction=function(){var e=angular.element(".navbarInputs");e.css("width",o.outerWidth-26+"px")},c.onAuth(s)}function UserEventsController(e,t,n,i){function o(e){return Date.parse(e)}function s(){var e=0;for(event in c.events.hosting)e++;return e}function r(){var e=new Date,t=10*o(e)+s();return t}function a(){Object.keys(c.events).forEach(function(e){Object.keys(c.events[e]).forEach(function(t){var n=0;angular.isObject(c.events[e][t])&&n++,n>0?c.sectionAvailable[e]=!0:c.sectionAvailable[e]=!1})})}function l(){u.setUIDLocally(t.uid),u.loadBio(t.uid).then(function(e){c.userBio=e})["catch"](),c.events=u.getAllUserEventsLocally(),u.getRemoteEventsForLocal().then(function(t){e.info(t),c.events=u.getAllUserEventsLocally()}).then(function(){a()})}var c=this,u=n;c.showDecline=!1,c.userBio={},c.events={},c.sectionAvailable={pending:!1,attending:!1,hosting:!1,completed:!1},c.errors={},c.createNewEvent=function(){var e=r(),t=i;u.createNewEvent(e),t.redirectTo("/event",e,u.getUIDLocally(),u.getUIDLocally())},l()}function UserInformationController(e,t,n,i,o){function s(e){return new Date(parseInt(e))}function r(e){return Date.parse(e)}function a(){var e=new Date;e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),c.tempBirthday=e}function l(){a(),u.loadBio(n.uid).then(function(e){c.user=e,angular.isDefined(e.dob)&&""!==e.dob&&(c.tempBirthday=s(e.dob))})}var c=this,u=i;c.user={},c.tempBirthday,c.view={dataToSave:!1,isData:!1,btnMssg:"Move On...",proceedBtn:"btn btn-primary"},c.checkValues=function(){c.view.isData=!0,!angular.isUndefined(c.user.company)&&""!==c.user.company||!angular.isUndefined(c.user.title)&&""!==c.user.title||!angular.isUndefined(c.user.dob)&&""!==c.user.dob?(c.view.dataToSave=!0,c.view.proceedBtn="btn btn-success",c.view.btnMssg="Save & Continue"):(c.view.dataToSave=!1,c.view.proceedBtn="btn btn-primary",c.view.btnMssg="Move On...")},c.updateDOB=function(){c.user.dob=r(c.tempBirthday),c.checkValues()},c.saveAndMoveOn=function(){var t=o,i=u.getUIDLocally();0!==c.tempBirthday&&c.updateDOB(),(""==i||angular.isUndefined(i))&&u.setUIDLocally(n.uid),c.view.isData&&(e.info("saving the new data"),u.updateBioLocally(c.user)),t.redirectTo("/userEvents",c.user.uid)},l()}function authService(e,t){function n(){var e=t;e.checkLoginStatus().then(function(e){return e})["catch"](function(e){return e})}var i={isLoggedIn:n};return i}function backendServices(e,t,n){function i(e){return btoa(e)}function o(e){return atob(e)}function s(e){return new Date(parseInt(e))}function r(e){return Date.parse(e)}function a(e,n){var i=new Firebase(I);return t(function(t,o){i.createUser({email:e,password:n},function(e,n){e?o("Error creating user: "+e):t(n)})})}function l(e,n,i){var o=new Firebase(I),s=o.child("Users").child(e),a=new Date;return t(function(t,o){s.set({bio:{uid:e,name:n,email:i},events:{pending:{updated:r(a)},hosting:{updated:r(a)},attending:{updated:r(a)},completed:{updated:r(a)}}},function(e){e?o("Data could not be saved: "+e):t("Data saved successfully.")})})}function c(e,n){var o=new Firebase(I),s=i(n),r=o.child("Uids").child(s);return t(function(t,n){r.set(e,function(e){e?n("Data could not be saved. "+e):t("uid created sucessfully.")})})}function u(e,n){var i=new Firebase(I);return t(function(t,o){i.authWithPassword({email:e,password:n},function(e,n){e?o("Error Logging In: "+e):t(n)})})}function d(){var e=new Firebase(I);return t(function(t,n){e.onAuth(function(e){t(e?!0:!1)})})}function f(){var t=new Firebase(I);e.info("logging user out"),t.unauth()}function v(e){var n=new Firebase(I),i=e.uid,o=n.child("Users").child(i);return t(function(t,n){o.update(e,function(e){e?n("There was a problem updating that record: "+e):t("all user data uploaded successfully")})})}function m(e){var n=new Firebase(I),i=e.uid.toString(),o=n.child("Users").child(i).child("bio");return t(function(t,n){o.update(e,function(e){e?n("There was a problem updating that record: "+e):t("all user bio data uploaded successfully")})})}function g(){}function p(e){var n=new Firebase(I),i=n.child("Users").child(e).child("bio");return t(function(e,t){i.once("value",function(t){e(t.val())},function(e){e&&t(e)})})}function h(e,n){var i=new Firebase(I),o=n.id,s=i.child("Users").child(e).child("events").child("hosting").child(o);return t(function(e,t){s.set(n,function(n){n?t("There was an error: "+n):e("New event saved to DB successfully")})})}function w(e,n,i,o){var s=new Firebase(I),r=s.child("Users").child(o).child("events").child("hosting").child(i).child("guestList").child(n);return t(function(t,n){r.set({rsvpd:!1,status:"pending",name:e},function(e){e?n("There was an error: "+e):t("New event saved to DB successfully")})})}function b(e){var n=new Firebase(I),i=n.child("Users").child(e).child("events");return t(function(e,t){i.orderByKey().once("value",function(t){var n=t.val(),i={hosting:n.hosting,attending:n.attending,pending:n.pending,completed:n.completed};e(i)},function(e){e&&t(e)})})}function E(e,n){var i=new Firebase(I),o=i.child("Users").child(e).child("events").child("hosting").child(n);return t(function(e,t){o.once("value",function(t){var n=t.val();e(n)},function(e){e&&t(e)})})}function U(e){var n=new Firebase(I),i=n.child("Uids");return t(function(t,n){i.once("value",function(i){var o=i.val();Object.keys(o).forEach(function(i){i==e?t(o[i]):n("No user by that email")})})})}function L(e,n){var i=new Firebase(I),o=i.child("Users").child(e).child("events").child("hosting").child(n).child("guestList");return t(function(e,t){o.once("value",function(t){var n=t.val();e(n)},function(e){e&&t("There was an error getting the guest list: "+e)})})}function T(e,t,n){}function y(e,n){var i=new Firebase(I),o=i.child("Users").child(n).child("events").child(e).child("updated");return t(function(e,t){o.set(null,function(n){n?t("There was an error deleting update field: "+n):e("Deleted update successfully")})})}function D(e,n){var i=new Firebase(I),o=i.child("Users").child(e).child("events").child("hosting").child(n);return t(function(e,t){var n=function(n){n?t("Synchronization failed"):e("Synchronization succeeded")};o.remove(n)})}function A(e,n){var i=new Firebase(I),o=i.child("Users").child(n).child("events").child(e);return t(function(e,t){o.once("value",function(n){var i=n.val();angular.isDefined(i.updated)?e(!0):t(!1)},function(e){e&&t(e)})})}var I="https://meetupplanner.firebaseio.com/",C={utf8_to_b64:i,b64_to_utf8:o,unixTimeToDateTime:s,dateTimeToUnixTime:r,LoginRegisteredUser:u,checkLoginStatus:d,logUserOut:f,downloadUserData:g,getUserBio:p,getUserEvents:b,getAHostedEvent:E,getAnInvitedEvent:T,findGuestUID:U,getGuestListForEvent:L,createNewUser:a,addNewUserToDatabase:l,addNewUserToRegUsersList:c,uploadUserData:v,uploadUserBio:m,createHostedEvent:h,addGuestToHostGuestListonDB:w,deleteUpdateField:y,removeIncompleteEvent:D,thereWasAnUpdateField:A};return C}function trafficValet(e,t){function n(e,n,i,o){angular.isDefined(n)?(e=e+"/"+n,angular.isDefined(i)&&(e=e+"/"+i,angular.isDefined(o)&&(e=e+"/"+o,t.path(e)),t.path(e)),t.path(e)):t.path(e)}function i(e,n,i,o){if(angular.isUndefined(o)&&(o=1),n===i){var s="/event/host/"+e+"/"+i+"/"+o;t.path(s)}else{var s="/event/guest/"+e+"/"+i+"/"+n;t.path(s)}}var o={redirectTo:n,eventRoute:i};return o}function userData(e,t,n){function i(e){return btoa(e)}function o(e){return Date.parse(e)}function s(){return""!==ee.bio.uid&&""!==ee.bio.name&&""!==ee.bio.email}function r(e,t){return!!angular.isDefined(ee.events[e][t])}function a(e,t){return angular.isDefined(ee.bio.email)&&""!=ee.bio.email?e==ee.bio.email:ee.events.hosting[t].host.email==e}function l(t,n){return angular.isDefined(ee.events.hosting[n].guestList)?(refEmail=i(t),void Object.keys(ee.events.hosting[n].guestList).forEach(function(t){return refEmail==t?(e.info("an email match was found, this guest has been invited already"),!0):(e.info("no email match found, ok to invite guest"),!1)})):(e.info("no guestlist"),!1)}function c(){return!!angular.isDefined(te.event)}function u(e){Object.keys(ee.events[e]).forEach(function(t){angular.isObject(ee.events[e][t])||delete ee.events[e][t]})}function d(){return ee.bio.uid}function f(){return ee.bio.name}function v(){return ee.bio.email}function m(){return ee.bio.company}function g(){return ee.bio.title}function p(){return ee.bio.dob}function h(){return{uid:ee.bio.uid,name:ee.bio.name,email:ee.bio.email,company:ee.bio.company,title:ee.bio.title,dob:ee.bio.dob}}function w(e,t){return ee.events[e][t]}function b(e){return ee.events[e]}function E(){return ee.events}function U(){return te}function L(e){ee.bio.uid=e}function T(e){ee.bio.name=e}function y(e){ee.bio.email=e}function D(e){ee.bio.company=e}function A(e){ee.bio.title=e}function I(e){ee.bio.dob=e}function C(e,t,n){angular.isDefined(e)&&y(e),angular.isDefined(t)&&T(t),angular.isDefined(n)&&L(n)}function S(e,t){var n=t.id;u(e),ee.events[e][n]=t}function $(e){ee.events=e}function B(e){T(e.name),y(e.email),D(e.company),A(e.title),I(e.dob),M()}function F(e,o,s,r,a){var l=n;return t(function(t,n){angular.isDefined(o)&&(s=i(o)),l.addGuestToHostGuestListonDB(e,s,r,a).then(function(e){t(e)})["catch"](function(e){n(e)})})}function G(e){te=e}function k(e){var t=e.uid;angular.isObject(te.event.guestList)||(te.event.guestList={}),te.event.guestList[t]=e.guest}function q(e){var o=n;return t(function(t,n){guestEmail=i(e),o.findGuestUID(guestEmail).then(function(e){t(e)})["catch"](function(e){n(e)})})}function R(e,t){delete ee.events[e][t.id]}function N(){var e=n;e.downloadUserData().then(function(e){ee=e})}function P(e){var i=n;return t(function(t,n){i.getUserBio(e).then(function(e){t(e)})["catch"](function(e){n("There was an error reading the user bio: "+e)})})}function j(){var e=n;return t(function(t,n){e.getUserEvents(d()).then(function(e){Object.keys(e).forEach(function(t){Object.keys(e[t]).forEach(function(n){S(t,e[t][n])})}),t(e)})["catch"](function(e){n("There was an error reading the user events: "+e)})})}function x(e){var i=n;return t(function(t,n){i.getAHostedEvent(d(),e).then(function(e){t(e)})["catch"](function(e){n("There was an error reading the user event: "+e)})})}function O(){var e=n;e.uploadUserData(ee)}function M(){var e=n;e.uploadUserBio(ee.bio)}function H(){}function V(i,o){var s=n;return e.info("sending this to the server"),e.info(o),t(function(e,t){s.createHostedEvent(i,o).then(function(t){e(t)})["catch"](function(e){t(e)})})}function z(i){var o=n;return t(function(t,n){o.thereWasAnUpdateField(i,d()).then(function(t){o.deleteUpdateField(i,d()).then(function(t){e.info(t)})["catch"](function(t){e.info(t)})})["catch"](function(t){e.info(t)})})}function _(e,i){var o=n;return t(function(t,n){o.getGuestListForEvent(e,i).then(function(e){t(e)})["catch"](function(e){n(e)})})}function W(e){var i=n;return t(function(t,n){i.removeIncompleteEvent(ee.getUIDLocally,e).then(function(e){t(e)})["catch"](function(e){n(e)})})}function Z(e){return t(function(t,n){s()?t(h()):P(e).then(function(e){C(e.email,e.name,e.uid),t(e)})["catch"](function(e){n(e)})})}function K(e,n){return L(e),t(function(e,t){x(n).then(function(t){e(t)})["catch"](),r("hosting",n)&&e(w("hosting",n))})}function J(e){var n={};return t(function(e,t){j().then(function(t){e(t)}),n=b(type),e(n)})}function Q(e){var t={},n=new Date;n.setMinutes(0,0,0);var i=o(n);t={id:e,name:"",type:"",host:{name:ee.bio.name,uid:ee.bio.uid,email:ee.bio.email},message:"",eventTimes:{start:i,end:i+36e5},address:{street01:"",street02:"",street03:"",city:"",state:"",zip:0}},S("hosting",t),G(t)}function X(e){return t(function(e,t){})}function Y(t,n){e.info("saving this event locally"),e.info(n),S(t,n)}var ee={bio:{uid:"",name:"",email:"",company:"",title:"",dob:0},events:{hosting:{},pending:{},attending:{},completed:{}}},te={},ne={bioPrimariesAreCompleteLocally:s,eventExistsLocally:r,thisIsTheHostEmail:a,guestInvitedAlready:l,thereIsAnActiveEvent:c,cleanEvents:u,getUIDLocally:d,getNameLocally:f,getEmailLocally:v,getCompanyLocally:m,getTitleLocally:g,getDOBLocally:p,getFullBioLocally:h,getOneUserEventLocally:w,getUserEventsLocally:b,getAllUserEventsLocally:E,getActiveEvent:U,setUIDLocally:L,setNameLocally:T,setEmailLocally:y,setCompanyLocally:D,setTitleLocally:A,setDOBLocally:I,setPrimariesLocally:C,updateUserEventsLocally:S,updateAllUserEventsLocally:$,updateBioLocally:B,addGuestToHostGuestList:F,setActiveEvent:G,addGuestToActiveEvent:k,saveNewHostingEvent:Y,removeUserEventsLocally:R,getFullRemoteDBforLocal:N,getRemoteBioForLocal:P,getRemoteEventsForLocal:j,getOneRemoteEventForLocal:x,setFullRemoteDBfromLocal:O,setRemoteBioFromLocal:M,setARemoteEventFromLocal:H,setRemoteEventsFromLocal:V,cleanDBEventsCategory:z,getUserIdForGuest:q,getEventGuestList:_,removeIncompleteEventFromDB:W,loadBio:Z,loadEventsProgressively:J,loadAnEventProgressively:K,createNewEvent:Q,updatePendingEventsListForGuest:X};return ne}function validation(e){function t(e){return angular.isUndefined(e)?"This is a required field":void 0}function n(e){return angular.isDefined(e)&&e.length<p?"Name should be at least "+p+" characters":void 0}function i(e){return angular.isDefined(e)&&!(e.length<h)}function o(e){return angular.isDefined(e)&&!(e.length>w)}function s(e){if(angular.isDefined(e)){var t=new RegExp("[!@#$%^&*]");return!!t.test(e)}return!1}function r(e){if(angular.isDefined(e)){var t=new RegExp("[0-9]","");return!!t.test(e)}return!1}function a(e){if(angular.isDefined(e)){var t=new RegExp("[a-z]","");return!!t.test(e)}return!1}function l(e){if(angular.isDefined(e)){var t=new RegExp("[A-Z]","");return!!t.test(e)}return!1}function c(e){if(angular.isDefined(e)){var t=new RegExp("[^A-z0-9!@#$%^&*]","");return!t.test(e)}return!1}function u(e){var t=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","");return angular.isDefined(e)&&!t.test(e)?"Not a valid email":void 0}function d(e){}function f(){var e={eventName:{completed:!1,addressed:!1,row:{"class":{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{"class":{"control-label":!0}},input:{"class":{"form-control":!0}}},eventHost:{completed:!1,addressed:!1,row:{"class":{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{"class":{"control-label":!0}},input:{"class":{"form-control":!0}}},eventType:{completed:!1,addressed:!1,row:{"class":{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{"class":{"control-label":!0}},input:{"class":{"form-control":!0
}}},eventStart:{completed:!1,addressed:!1,row:{"class":{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{"class":{"control-label":!0}},input:{"class":{"form-control":!0}}},eventEnd:{completed:!1,addressed:!1,row:{"class":{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{"class":{"control-label":!0}},input:{"class":{"form-control":!0}}},eventStreet01:{completed:!1,addressed:!1,row:{"class":{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{"class":{"control-label":!0}},input:{"class":{"form-control":!0}}},eventCity:{completed:!1,addressed:!1,row:{"class":{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{"class":{"control-label":!0}},input:{"class":{"form-control":!0}}},eventState:{completed:!1,addressed:!1,row:{"class":{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{"class":{"control-label":!0}},input:{"class":{"form-control":!0}}},eventZip:{completed:!1,addressed:!1,row:{"class":{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{"class":{"control-label":!0}},input:{"class":{"form-control":!0}}},eventGuest:{completed:!1,addressed:!1,row:{"class":{"col-xs-12":!0,"col-sm-12":!0,"form-group":!0,"has-success":!1,"has-error":!1}},label:{"class":{"control-label":!0}},input:{"class":{"form-control":!0}}}};return e}function v(){}function m(){}function g(){}var p=3,h=16,w=100,b={required:t,minNameLength:n,minPassLength:i,maxPassLength:o,atLeastOneSymbol:s,atLeastOneNumber:r,atLeastOneLowercase:a,atLeastOneUppercase:l,illegalCharacter:c,email:u,dateOfBirth:d,generateEventRequirnments:f,updateEventReqStatus:v,updateEventReqAddressed:m,updateEventReqClass:g};return b}function config(e){e.when("/",{templateUrl:"views/landingPage.htm",controller:"LandingPageController",controllerAs:"vm"}).when("/signup",{templateUrl:"views/newUserSignup.htm",controller:"NewUserSignUpController",controllerAs:"vm"}).when("/login",{templateUrl:"views/registeredUserLogin.htm",controller:"RegUserLoginController",controllerAs:"vm"}).when("/userInformation/:uid?",{templateUrl:"views/userInformation.htm",controller:"UserInformationController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).when("/userEvents/:uid?",{templateUrl:"views/userEvents.htm",controller:"UserEventsController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).when("/event/host/:eventId/:uid/:section",{templateUrl:"views/hostEvent.htm",controller:"HostEventController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).when("/event/guest/:eventId/:uid/:hostId",{templateUrl:"views/guestEvent.htm",controller:"GuestEventController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).when("/event/:eventId?/:hostId?/:uid?/:section?",{templateUrl:"views/anEvent.htm",controller:"AnEventController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService,eventViewChanger:eventViewChanger}}).otherwise({redirectTo:"/"})}function userAuthenticationService(e){e.isLoggedIn()}function eventViewChanger(e,t){e.eventRoute(t.current.params.eventId,t.current.params.hostId,t.current.params.uid,t.current.params.section)}function addAGuest(){function e(e,t,n,i){}function t(e,t,n,i){function o(e){return btoa(e)}function s(){a.validations.name.valid&&a.validations.email.valid?(a.invitationValidForSubmission=!0,a.submissionButton["class"]["btn-warning"]=!1,a.submissionButton["class"]["btn-success"]=!0,a.submissionButton.message="Invite Guest"):(a.invitationValidForSubmission=!1,a.submissionButton["class"]["btn-warning"]=!0,a.submissionButton["class"]["btn-success"]=!1,a.submissionButton.message="Address Invitation...")}function r(){angular.isUndefined(c.getOneUserEventLocally("hosting",t.eventId))?c.getRemoteEventsForLocal().then(function(){u=c.getOneUserEventLocally("hosting",t.eventId)}):u=c.getOneUserEventLocally("hosting",t.eventId)}var a=this,l=n,c=i,u={};a.tempGuest={name:"",email:"",status:"pending"},a.validations={name:{addressed:!1,valid:!1,errorMessage:""},email:{addressed:!1,valid:!1,errorMessage:""},invitation:{isTheHost:!1,alreadyInvited:!1,errorMessage:""}},a.invitationValidForSubmission=!1,a.submissionButton={style:{color:"red"},"class":{"col-xs-12":!0,"col-sm-12":!0,btn:!0,"btn-warning":!0,"btn-success":!1},message:"Address Invitation..."},a.validateName=function(){a.validations.name.addressed=!0,angular.isDefined(a.tempGuest.name)&&""!=a.tempGuest.name?(a.validations.name.valid=!0,a.validations.name.errorMessage=""):(a.validations.name.valid=!1,a.validations.name.errorMessage="This guest needs a name"),s()},a.validateEmail=function(){a.validations.email.addressed=!0,angular.isDefined(a.tempGuest.email)&&""!=a.tempGuest.email?angular.isUndefined(l.email(a.tempGuest.email))?(a.validations.email.valid=!0,a.validations.email.errorMessage=""):(a.validations.email.valid=!1,a.validations.email.errorMessage=l.email(a.tempGuest.email),e.info(a.validations.email.errorMessage)):(a.validations.email.valid=!1,a.validations.email.errorMessage="Not a valid email"),s()},a.showNameError=function(){return!(a.validations.name.valid||!a.validations.name.addressed)},a.showEmailError=function(){return!(a.validations.email.valid||!a.validations.email.addressed)},a.showInvitationError=function(){return!(!a.validations.invitation.isTheHost&&!a.validations.invitation.alreadyInvited)},a.submitGuestInvitation=function(){if(a.invitationValidForSubmission){if(c.thisIsTheHostEmail(a.tempGuest.email,t.eventId))return a.validations.invitation.isTheHost=!0,a.validations.invitation.errorMessage="No need to invite the host",0;a.validations.invitation.isTheHost=!1,c.getUserIdForGuest(a.tempGuest.email).then(function(e){return e}).then(function(e){angular.isObject(a.guestList)||(a.guestList={});var t=a.tempGuest;a.guestList[e]=t,a.tempGuest={name:"",email:"",status:"pending"}}).then(function(){}).then(function(){})["catch"](function(t){e.info(t),idByEmail=o(a.tempGuest.email),angular.isObject(a.guestList)||(a.guestList={});var n=a.tempGuest;a.guestList[idByEmail]=n,a.tempGuest={name:"",email:"",status:"pending"}})}},r()}e.$inject=["scope","el","attr","ctrl"];var n={restrict:"AECM",templateUrl:"views/directives/addAGuest.directive.htm",replace:!0,scope:{guestList:"="},link:e,controller:t,controllerAs:"vm",bindToController:!0};return t.$inject=["$log","$routeParams","validation","userData"],n}function hostedEventsList(){function e(e,t,n,i){e.$watch("hostedEvents",function(e,t){})}function t(e,t){function n(e){return new Date(parseInt(e))}function i(e){var t=0;return o.guestsAreInvited=!0,Object.keys[e].forEach(function(e){t++}),t}var o=this,s=t;o.guestsAreInvited=!1,o.formatDate=function(e){return n(e)},o.guestsAttending=function(e){return angular.isDefined(e)&&angular.isDefined(e.attending)?i(e.attending):0},o.guestsInvited=function(e){function t(){return n.attending+n.pending+n.declined}if(angular.isDefined(e)){var n={attending:0,pending:0,declined:0};return angular.isDefined(e.attending)&&(n.attending=i(e.attending)),angular.isDefined(e.pending)&&(n.pending=i(e.pending)),angular.isDefined(e.declined)&&(n.declined=i(e.declined)),t()}return 0},o.percentageAttending=function(e){return angular.isDefined(e)?guestsAttending(guestlist)/guestsInvited(e):0},o.eventClicked=function(t){e.info("redirecting to: /event/"+t+"/"+o.hostedEvents[t].host.uid+"/"+o.userId),s.redirectTo("/event",t,o.hostedEvents[t].host.uid,o.userId)},o.inviteGuests=function(e){s.redirectTo("/event/host",e,o.hostedEvents[e].host.uid,"3")}}e.$inject=["scope","el","attr","ctrl"];var n={restrict:"AECM",templateUrl:"views/directives/hostedEventsList.directive.htm",replace:!0,scope:{hostedEvents:"=",userId:"="},link:e,controller:t,controllerAs:"vm",bindToController:!0};return t.$inject=["$log","trafficValet"],n}function progressBar(){return{restrict:"E",scope:{curVal:"@",maxVal:"@"},template:"<div class='progress-bar'><div class='progress-bar-bar'>testing</div></div>",link:function(e,t,n){function i(){var n=0;e.maxVal&&(n=Math.min(e.curVal,e.maxVal)/e.maxVal*t.find(".progress-bar").width()),t.find(".progress-bar-bar").css("width",n)}e.$watch("curVal",i),e.$watch("maxVal",i)}}}function hostedGuestList(){function e(e,t,n,i){e.$watch("guestList",function(){e.$apply})}function t(e,t,n){function i(){return angular.isDefined(s.guestList)&&""!=s.guestList?(s.isAGuestList=!0,!0):(s.isAGuestList=!1,!1)}function o(){var o=n;i()||(e.info("going after the list"),o.getEventGuestList(t.uid,t.eventId).then(function(t){e.info("got the list"),e.info(t),s.guestList=t,angular.isObject(t)&&(s.isAGuestList=!0)})["catch"](function(t){e.info("There was an error: "+t)}))}var s=this;s.isAGuestList=!1,o()}e.$inject=["scope","el","attr","ctrl"];var n={restrict:"AECM",templateUrl:"views/directives/hostedGuestList.directive.htm",replace:!0,scope:{guestList:"="},link:e,controller:t,controllerAs:"vm",bindToController:!0};return t.$inject=["$log","$routeParams","userData"],n}function toolBar(){function e(e,t,n,i){}function t(e,t,n,i){function o(){r.checkLoginStatus().then(function(e){s.loggedIn=e})["catch"]()}var s=this,r=n,a=i;s.login=function(){},s.logout=function(){t.info("logging out"),r.logUserOut(),a.redirectTo("/login")},s.loginRegisteredUser=function(){var e=i,o=n,r=userData;o.LoginRegisteredUser(s.email,s.password).then(function(e){return e.uid}).then(function(n){o.getUserBio(n).then(function(e){r.updateBioLocally(e),o.getUserEvents(n).then(function(e){r.updateAllUserEventsLocally(e)})["catch"](function(e){t.info(e)})})["catch"](function(e){t.info(e)}),e.redirectTo("/userInformation",n)})["catch"](function(e){})},o(),e.$on("$routeChangeStart",function(e,t){o()})}e.$inject=["scope","el","attr","ctrl"];var n={restrict:"AECM",templateUrl:"views/directives/toolBar.directive.htm",replace:!0,scope:{},link:e,controller:t,controllerAs:"vm",bindToController:!0};return t.$inject=["$scope","$log","backendServices","trafficValet"],n}config.$inject=["$routeProvider"],userAuthenticationService.$inject=["authService"],eventViewChanger.$inject=["trafficValet","$route"],angular.module("meetUpEventApp",["ngRoute","ngTouch","firebase"]),angular.module("meetUpEventApp").controller("AnEventController",AnEventController),AnEventController.$inject=["$log","$routeParams"],angular.module("meetUpEventApp").controller("GuestEventController",GuestEventController),GuestEventController.$inject=["$log"],angular.module("meetUpEventApp").controller("HostEventController",HostEventController),HostEventController.$inject=["$scope","$log","$routeParams","userData","trafficValet","validation"],angular.module("meetUpEventApp").controller("LandingPageController",LandingPageController),LandingPageController.$inject=["trafficValet"],angular.module("meetUpEventApp").controller("MainController",MainController),MainController.$inject=["$log","$location","$document","$window"],angular.module("meetUpEventApp").controller("NewUserSignUpController",NewUserSignUpController),NewUserSignUpController.$inject=["$scope","$log","validation","backendServices","trafficValet","userData"],angular.module("meetUpEventApp").controller("RegUserLoginController",RegUserLoginController),RegUserLoginController.$inject=["$log","$document","backendServices","trafficValet","userData"],angular.module("meetUpEventApp").controller("topMenuController",topMenuController),topMenuController.$inject=["$scope","$log","$location","$document","$window"],angular.module("meetUpEventApp").controller("UserEventsController",UserEventsController),UserEventsController.$inject=["$log","$routeParams","userData","trafficValet"],angular.module("meetUpEventApp").controller("UserInformationController",UserInformationController),UserInformationController.$inject=["$log","$document","$routeParams","userData","trafficValet"],angular.module("meetUpEventApp").factory("authService",authService),authService.$inject=["$log","backendServices"],angular.module("meetUpEventApp").factory("backendServices",backendServices),backendServices.$inject=["$log","$q","$window"],angular.module("meetUpEventApp").factory("trafficValet",trafficValet),trafficValet.$inject=["$log","$location"],angular.module("meetUpEventApp").factory("userData",userData),userData.$inject=["$log","$q","backendServices"],angular.module("meetUpEventApp").factory("validation",validation),validation.$inject=["$log"],angular.module("meetUpEventApp").config(config),angular.module("meetUpEventApp").directive("addAGuest",addAGuest),angular.module("meetUpEventApp").directive("hostedEventsList",hostedEventsList),angular.module("meetUpEventApp").directive("progressBar",progressBar),angular.module("meetUpEventApp").directive("hostedGuestList",hostedGuestList),angular.module("meetUpEventApp").directive("toolBar",toolBar);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFuRXZlbnQuY29udHJvbGxlci5qcyIsIkd1ZXN0RXZlbnQuY29udHJvbGxlci5qcyIsIkhvc3RFdmVudC5jb250cm9sbGVyLmpzIiwiTGFuZGluZ1BhZ2UuY29udHJvbGxlci5qcyIsIk1haW4uY29udHJvbGxlci5qcyIsIk5ld1VzZXJTaWduVXAuY29udHJvbGxlci5qcyIsIlJlZ1VzZXJMb2dpbi5jb250cm9sbGVyLmpzIiwiVG9wTWVudS5jb250cm9sbGVyLmpzIiwiVXNlckV2ZW50cy5jb250cm9sbGVyLmpzIiwiVXNlckluZm9ybWF0aW9uLmNvbnRyb2xsZXIuanMiLCJBdXRoU2VydmljZS5mYWN0b3J5LmpzIiwiQmFja2VuZFNlcnZpY2VzLmZhY3RvcnkuanMiLCJUcmFmZmljVmFsZXQuZmFjdG9yeS5qcyIsIlVzZXJEYXRhLmZhY3RvcnkuanMiLCJWYWxpZGF0aW9uLmZhY3RvcnkuanMiLCJyb3V0ZS1jb25maWcuanMiLCJhcHAuanMiLCJBZGRBR3Vlc3QuZGlyZWN0aXZlLmpzIiwiSG9zdGVkRXZlbnRzTGlzdC5kaXJlY3RpdmUuanMiLCJIb3N0ZWRFdmVudHNQcm9ncmVzc0Jhci5kaXJlY3RpdmUuanMiLCJIb3N0ZWRHdWVzdExpc3QuZGlyZWN0aXZlLmpzIiwiVG9vbEJhci5kaXJlY3RpdmUuanMiLCJhcHAubW9kdWxlLmpzIl0sIm5hbWVzIjpbIkFuRXZlbnRDb250cm9sbGVyIiwiJGxvZyIsIiRyb3V0ZVBhcmFtcyIsImluaXQiLCJ2bSIsInRlbXBEYXRlVGltZSIsInN0YXJ0IiwiZW5kIiwibmV3R3Vlc3QiLCJuYW1lIiwiZW1haWwiLCJhZGRyZXNzIiwidmFsaWQiLCJzdHlsZSIsImNvbG9yIiwic2hvd0lmSG9zdCIsImhpZGVJZkF0dGVuZGluZyIsIm1hbmFnZVNlY3Rpb25zIiwxLCJhY3RpdmUiLCJjb21wbGV0ZSIsImJhY2tncm91bmQtY29sb3IiLDIsMywiY2hlY2tGb3JIb3N0IiwiY2hlY2tJZkd1ZXN0SXNBdHRlbmRpbmciLCJvcGVuQWxsU2VjdGlvbnMiLCJ1dGY4X3RvX2I2NCIsInN0ciIsImJ0b2EiLCJiNjRfdG9fdXRmOCIsImF0b2IiLCJkYXRlVGltZVRvVW5peFRpbWUiLCJkYXRlVGltZSIsIkRhdGUiLCJwYXJzZSIsImNsZWFuTmV3R3Vlc3RWYXJpYWJsZSIsImludml0ZUFSZWdpc3RlcmVkVXNlciIsInVpZCIsImluZm8iLCJyZWYiLCJjaGlsZCIsImV2ZW50SWQiLCJzZXQiLCJpZCIsImV2ZW50VGltZXMiLCJldmVudCIsImhvc3QiLCJlcnJvciIsIm9uY2UiLCJzbmFwc2hvdCIsImNoZWNrRm9yUGxhY2Vob2xkZXIiLCJ2YWwiLCJ1cGRhdGVkIiwicmVtb3ZlIiwiZXJyb3JPYmplY3QiLCJjb2RlIiwiaW52aXRlQW5VbnJlZ2lzdGVyZWRVc2VyIiwidXNlcktleSIsImF1dGhEYXRhIiwiZ2V0QXV0aCIsImhvc3RJZCIsInVzZXJFdmVudHMiLCJvbiIsImFsbEd1ZXN0cyIsImF0dGVuZGluZyIsInRoaXMiLCJ0ZW1wVGltZSIsInVzZXJJc0hvc3QiLCJzZXRUZW1wVGltZSIsImVuZHBvaW50IiwidW5peFRpbWVUb0RhdGVUaW1lIiwidW5peFRpbWUiLCJwYXJzZUludCIsInN1Ym1pdCIsImJhY2tUb1VzZXJFdmVudHMiLCIkbG9jYXRpb24iLCJwYXRoIiwidG9rZW4iLCJldmVudFJlZGlyZWN0IiwiZXZlbnRJRCIsImZ1bGxQYXRoIiwiY2hhbmdlU2VjdGlvbiIsInRhcmdldFNlY3Rpb24iLCJpIiwic2F2ZUV2ZW50VGltZSIsInRhcmdldCIsImd1ZXN0c0FyZUludml0ZWQiLCJndWVzdExpc3QiLCJ2YWxpZGF0ZUd1ZXN0RW1haWwiLCJjb25zdHJhaW50IiwiUmVnRXhwIiwidGVzdCIsImlzU2VjdGlvbkNvbXBsZXRlIiwicmVxdWlyZWRJbnB1dHMiLCJzYXZlQW5kQWR2YW5jZSIsIiRzYXZlIiwidGhlbiIsImFkZEd1ZXN0VG9Ib3N0c0xpc3QiLCJyZWdpc3RlcmVkVXNlcnMiLCJzdGF0dXMiLCJzYXZlRXZlbnQiLCJndWVzdFdpbGxBdHRlbmQiLCJyZXNwb25zZSIsImN1cnJlbnRVc2VyIiwidG90YWxQZW5kaW5nSW52aXRhdGlvbnMiLCJyZW1vdmVBdHRlbmRpbmdVcGRhdGVkIiwiaW52aXRhdGlvbnMiLCJ0aGlzSW52aXRhdGlvbiIsImludml0YXRpb24iLCJhdHRlbmRpbmdMaXN0IiwiY3VycmVudERhdGUiLCJ1cGRhdGUiLCJ1cGRhdGVVcGRhdGVkUGFyYW0iLCJhZGRJbnZpdGF0aW9uVG9BdHRlbmRpbmciLCJHdWVzdEV2ZW50Q29udHJvbGxlciIsIkhvc3RFdmVudENvbnRyb2xsZXIiLCIkc2NvcGUiLCJ1c2VyRGF0YSIsInRyYWZmaWNWYWxldCIsInZhbGlkYXRpb24iLCJjYWxjdWxhdGVEdXJhdGlvbiIsImNoYW5nZVNhdmVCdG4iLCJkaXJlY3Rpb24iLCJhY3Rpb25CdG4iLCJidG4iLCJtZXNzYWdlIiwidXBkYXRlUHJvZ3Jlc3NCYXIiLCJ1bml0cyIsInBlcmNlbnRDb21wbGV0ZSIsInByb2dyZXNzQmFyIiwid2lkdGgiLCJpbml0RXZlbnRUaW1lcyIsIm5vdyIsInNldEhvdXJzIiwiZ2V0SG91cnMiLCJNYXRoIiwicm91bmQiLCJnZXRNaW51dGVzIiwic2V0TWludXRlcyIsInNldFNlY29uZHMiLCJzZXRNaWxsaXNlY29uZHMiLCJkdXJhdGlvbiIsInVwZGF0ZVRlbXBUaW1lRnJvbU1vZGVsIiwiYW5ndWxhciIsImlzRGVmaW5lZCIsInRlbXBFdmVudCIsInRoaXNFdmVudE1hbmFnZXIiLCJ0aGVyZUlzQW5BY3RpdmVFdmVudCIsImFjdGl2ZVBhY2thZ2UiLCJnZXRBY3RpdmVFdmVudCIsInJlcXVpcmVkRmllbGRDb21wbGV0ZSIsInJlcXVpcmVkRmllbGRzIiwibG9hZEFuRXZlbnRQcm9ncmVzc2l2ZWx5IiwidGhlRXZlbnQiLCJhY3RpdmVTZWN0aW9uIiwic2VjdGlvbiIsImhvc3RlZEV2ZW50U2hlcnBhIiwicmVxdWlybm1lbnRzRmFjdG9yeSIsImRpdiIsImNsYXNzIiwiY29sLXhzLTYiLCJjb2wtc20tNiIsImJ0bi1zdWNjZXNzIiwiYnRuLXdhcm5pbmciLCJwdWxsLXJpZ2h0IiwiZ2VuZXJhdGVFdmVudFJlcXVpcm5tZW50cyIsImZvcm1hdER1cmF0aW9uIiwiaG91cnMiLCJmbG9vciIsIm1pbiIsImZyYWN0aW9uIiwidmFsaWRhdGVUaW1lIiwic3RhcnRPckVuZCIsInNldHRpbmdUZW1wU3RhcnQiLCJ0aW1lcyIsImV2ZW50U3RhcnQiLCJldmVudEVuZCIsImNvbXBsZXRlZCIsInJvdyIsIm9sZFN0YXJ0Iiwib2xkRW5kIiwibmV3RW5kIiwic2V0dGluZ1RlbXBFbmQiLCJzYXZlTmV3SG9zdGluZ0V2ZW50Iiwic2V0UmVtb3RlRXZlbnRzRnJvbUxvY2FsIiwic3VjY2VzTWVzc2FnZSIsImVycm9NZXNzYWdlIiwicmVkaXJlY3RUbyIsInNlY3Rpb25CYWNrIiwiZXZlbnRQYWNrYWdlIiwic2V0QWN0aXZlRXZlbnQiLCJzZWN0aW9uRm9yd2FyZCIsInZlcmlmeVJlcXVpcmVkIiwiZmllbGQiLCJ2YWx1ZSIsInNhdmVFdmVudFRvREIiLCJjbGVhbkRCRXZlbnRzQ2F0ZWdvcnkiLCIkd2F0Y2giLCJjdXJyZW50Iiwib3JpZ2luYWwiLCJpc09iamVjdCIsIkxhbmRpbmdQYWdlQ29udHJvbGxlciIsImxhbmRpbmdTaGVycGEiLCJjcmVhdGVBbkFjY291bnQiLCJsb2dpblVzZXIiLCJNYWluQ29udHJvbGxlciIsIiRkb2N1bWVudCIsIiR3aW5kb3ciLCJyZXNpemVCR0ltYWdlIiwiZWxlbWVudCIsImNzcyIsIm91dGVySGVpZ2h0IiwiZmJVUkwiLCJGaXJlYmFzZSIsImxvZ291dCIsImFsZXJ0IiwidW5hdXRoIiwicmVhZHkiLCJOZXdVc2VyU2lnblVwQ29udHJvbGxlciIsImJhY2tlbmRTZXJ2aWNlcyIsInZlcmlmeVJlcXVpcm5tZW50cyIsImVycm9ycyIsInBhc3N3b3JkIiwicGFzc2VzQWxsVGVzdHMiLCJpbnB1dHMiLCJuZXdOYW1lIiwibmV3RW1haWwiLCJuZXdQYXNzd29yZCIsInJlcXVpcmVkRmllbGRzRGVmaW5lZCIsInBhc3NSZXFzIiwwLCJyZXEiLCJmdWxmaWxsZWQiLDQsNSw2LCJzaG93UmVxc0JveCIsInNpZ251cFZhbGlkYXRpb24iLCJjaGVja05ld05hbWUiLCJoYXNOYW1lIiwicmVxdWlyZWQiLCJsb25nRW5vdWdoIiwibWluTmFtZUxlbmd0aCIsInB1c2giLCJsZW5ndGgiLCJqb2luIiwiY2hlY2tOZXdFbWFpbCIsImhhc0VtYWlsIiwiaXNBbkVtYWlsIiwiY2hlY2tOZXdQYXNzd29yZCIsImhhc1Bhc3N3b3JkIiwic3BlY2lmaWNSZXFzIiwibWluUGFzc0xlbmd0aCIsIm1heFBhc3NMZW5ndGgiLCJhdExlYXN0T25lTG93ZXJjYXNlIiwiYXRMZWFzdE9uZVVwcGVyY2FzZSIsImF0TGVhc3RPbmVOdW1iZXIiLCJhdExlYXN0T25lU3ltYm9sIiwiaWxsZWdhbENoYXJhY3RlciIsImFueUVycm9ycyIsImV4aXRQYXNzd29yZCIsImNyZWF0ZU5ld1VzZXIiLCJuZXdVc2VyU2hlcnBhIiwibmV3VXNlckRhdGEiLCJkYlVzZXJEYXRhIiwic2V0UHJpbWFyaWVzTG9jYWxseSIsImFkZE5ld1VzZXJUb0RhdGFiYXNlIiwiYWRkTmV3VXNlclRvUmVnVXNlcnNMaXN0IiwiUmVnVXNlckxvZ2luQ29udHJvbGxlciIsIm9wZW5Vc2VyTG9naW5CdG4iLCJ1bmNsb2NrVXNlckxvZ2luQnRuIiwidXNhYmxlIiwiY29sLXhzLTEyIiwiY29sLXNtLTEyIiwiZmluZCIsImxvZ2luUmVnaXN0ZXJlZFVzZXIiLCJyZWdpc3RlcmVkVXNlclNoZXJwYSIsImRhdGFiYXNlIiwicmVnaXN0ZXJlZFVzZXJEYXRhIiwiTG9naW5SZWdpc3RlcmVkVXNlciIsInVzZXJDcmVkZW50aWFscyIsImdldFVJRExvY2FsbHkiLCJnZXRVc2VyQmlvIiwidXNlckJpbyIsInVwZGF0ZUJpb0xvY2FsbHkiLCJnZXRVc2VyRXZlbnRzIiwiYWxsRXZlbnRzRm9yVGhpc1VzZXIiLCJ1cGRhdGVBbGxVc2VyRXZlbnRzTG9jYWxseSIsImNsaWNrZWQiLCJ1c2VyQXV0aGVudGljYXRpb24iLCJsb2dVc2VyT3V0IiwidG9wTWVudUNvbnRyb2xsZXIiLCJhdXRoRGF0YUNhbGxiYWNrIiwicHJvdmlkZXIiLCJsb2dnZWRJbiIsInJlZGlyZWN0IiwiYWRkRXZlbnRMaXN0ZW5lciIsIkZhc3RDbGljayIsImF0dGFjaCIsImJvZHkiLCJiaW5kIiwib25SZXNpemVGdW5jdGlvbiIsIiRhcHBseSIsIm91dGVyV2lkdGgiLCJuYXZCYXJMb2dpblJlZ2lzdGVyZWRVc2VyIiwiYXV0aFdpdGhQYXNzd29yZCIsIm5hdmJhclVzZXJFbWFpbCIsIm5hdmJhclVzZXJQYXNzIiwiY2xpY2siLCJuYXZiYXJJbnB1dHMiLCJvbkF1dGgiLCJVc2VyRXZlbnRzQ29udHJvbGxlciIsIm5vT2ZIb3N0ZUV2ZW50cyIsImNvdW50ZXIiLCJldmVudHMiLCJob3N0aW5nIiwiZ2VuZXJhdGVFdmVudElEIiwiZGF0ZSIsImNoZWNrRm9yRXZlbnRzIiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJjYXRlZ29yeSIsInNlY3Rpb25BdmFpbGFibGUiLCJpbml0aWFsaXplIiwic2V0VUlETG9jYWxseSIsImxvYWRCaW8iLCJyZXRyaWV2ZWRCaW8iLCJnZXRBbGxVc2VyRXZlbnRzTG9jYWxseSIsImdldFJlbW90ZUV2ZW50c0ZvckxvY2FsIiwib2J0YWluZWRVc2VyRXZlbnRzIiwic2hvd0RlY2xpbmUiLCJwZW5kaW5nIiwiY3JlYXRlTmV3RXZlbnQiLCJuZXdFdmVudFNoZXJwYSIsIlVzZXJJbmZvcm1hdGlvbkNvbnRyb2xsZXIiLCJidWlsZFRlbXBCaXJ0aGRheSIsIm5ld0JpcnRoZGF5IiwidGVtcEJpcnRoZGF5Iiwib2J0YWluZWRVc2VyRGF0YSIsInVzZXIiLCJkb2IiLCJ2aWV3IiwiZGF0YVRvU2F2ZSIsImlzRGF0YSIsImJ0bk1zc2ciLCJwcm9jZWVkQnRuIiwiY2hlY2tWYWx1ZXMiLCJpc1VuZGVmaW5lZCIsImNvbXBhbnkiLCJ0aXRsZSIsInVwZGF0ZURPQiIsInNhdmVBbmRNb3ZlT24iLCJ1c2VySW5mb1NoZXJwYSIsImN1cnJlbnRVaWQiLCJhdXRoU2VydmljZSIsImlzTG9nZ2VkSW4iLCJkYkF1dGhlbnRpY2F0aW9uIiwiY2hlY2tMb2dpblN0YXR1cyIsImFsbEF1dGhTZXJ2aWNlcyIsIiRxIiwiZmlyZUJhc2VBY2NvdW50cyIsInJlc29sdmUiLCJyZWplY3QiLCJjcmVhdGVVc2VyIiwiYXBwIiwiYXBwVXNlcnMiLCJiaW8iLCJiNjRFbWFpbCIsIlJlZ2lzdGVyZWRVc2Vyc0xpc3QiLCJ1cGxvYWRVc2VyRGF0YSIsImFsbFVzZXJEYXRhIiwicmVtb3RlVXNlciIsInVwbG9hZFVzZXJCaW8iLCJjdXJyZW50VXNlckJpbyIsInRvU3RyaW5nIiwicmVtb3RlVXNlckJpbyIsImRvd25sb2FkVXNlckRhdGEiLCJjcmVhdGVIb3N0ZWRFdmVudCIsIm5ld0V2ZW50IiwibmV3SG9zdGVkRXZlbnQiLCJhZGRHdWVzdFRvSG9zdEd1ZXN0TGlzdG9uREIiLCJndWllc3RJZCIsInJzdnBkIiwib3JkZXJCeUtleSIsInVzZXJQcm9maWxlIiwiZXZlbnRzUGFja2FnZSIsImdldEFIb3N0ZWRFdmVudCIsImhvc3RlZEV2ZW50Iiwic2VsZWN0RXZlbnQiLCJmaW5kR3Vlc3RVSUQiLCJndWVzdGI2NEVtYWlsIiwidWlkcyIsImFsbFVzZXJzIiwia2V5IiwiZ2V0R3Vlc3RMaXN0Rm9yRXZlbnQiLCJ0aGVMaXN0IiwiZ2V0QW5JbnZpdGVkRXZlbnQiLCJkZWxldGVVcGRhdGVGaWVsZCIsImNhdFJlbW92aW5nRnJvbSIsInJlbW92ZUluY29tcGxldGVFdmVudCIsImV2ZW50VG9SZW1vdmUiLCJvbkNvbXBsZXRlIiwidGhlcmVXYXNBblVwZGF0ZUZpZWxkIiwiY2F0VG9DaGVjayIsImN1cnJlbnRDYXRNb2RlbCIsImFsbEJhY2tlbmRTZXJ2aWNlcyIsInBhcmFtMSIsInBhcmFtMiIsInBhcmFtMyIsImV2ZW50Um91dGUiLCJ1c2VySWQiLCJhbGxUcmFmZmljQ29udHJvbHMiLCJiaW9QcmltYXJpZXNBcmVDb21wbGV0ZUxvY2FsbHkiLCJldmVudEV4aXN0c0xvY2FsbHkiLCJ0eXBlIiwidGhpc0lzVGhlSG9zdEVtYWlsIiwiZ3Vlc3RJbnZpdGVkQWxyZWFkeSIsInJlZkVtYWlsIiwiYWN0aXZlRXZlbnQiLCJjbGVhbkV2ZW50cyIsImdldE5hbWVMb2NhbGx5IiwiZ2V0RW1haWxMb2NhbGx5IiwiZ2V0Q29tcGFueUxvY2FsbHkiLCJnZXRUaXRsZUxvY2FsbHkiLCJnZXRET0JMb2NhbGx5IiwiZ2V0RnVsbEJpb0xvY2FsbHkiLCJnZXRPbmVVc2VyRXZlbnRMb2NhbGx5IiwiZ2V0VXNlckV2ZW50c0xvY2FsbHkiLCJzZXROYW1lTG9jYWxseSIsInNldEVtYWlsTG9jYWxseSIsInNldENvbXBhbnlMb2NhbGx5Iiwic2V0VGl0bGVMb2NhbGx5Iiwic2V0RE9CTG9jYWxseSIsInVwZGF0ZVVzZXJFdmVudHNMb2NhbGx5IiwiYWxsVXNlckV2ZW50cyIsInNldFJlbW90ZUJpb0Zyb21Mb2NhbCIsImFkZEd1ZXN0VG9Ib3N0R3Vlc3RMaXN0IiwiZ3Vlc3RJZCIsImRiIiwicG9zaXRpdmVSZXN1bHQiLCJuZWdhdGl2ZVJlc3VsdCIsImFkZEd1ZXN0VG9BY3RpdmVFdmVudCIsImd1ZXN0IiwiZ2V0VXNlcklkRm9yR3Vlc3QiLCJndWVzdEVtYWlsIiwiZXJyb3JSZXNwb25zZSIsInJlbW92ZVVzZXJFdmVudHNMb2NhbGx5IiwiZ2V0RnVsbFJlbW90ZURCZm9yTG9jYWwiLCJyZW1vdGVVc2VyRGF0YSIsImdldFJlbW90ZUJpb0ZvckxvY2FsIiwiZXZlbnRUeXBlIiwiZ2V0T25lUmVtb3RlRXZlbnRGb3JMb2NhbCIsIm9idGFpbmVkRXZlbnQiLCJzZXRGdWxsUmVtb3RlREJmcm9tTG9jYWwiLCJzZXRBUmVtb3RlRXZlbnRGcm9tTG9jYWwiLCJzdWNjZXNzTWVzc2FnZSIsImVycm9yTWVzc2FnZSIsImFmZmlybWF0aXZlUmVzcG9uc2UiLCJnZXRFdmVudEd1ZXN0TGlzdCIsIm9idGFpbmVkTGlzdCIsInJlbW92ZUluY29tcGxldGVFdmVudEZyb21EQiIsImJpb0Zyb21SZW1vdGVEQiIsIm9idGFpbmVkVXNlckV2ZW50IiwibG9hZEV2ZW50c1Byb2dyZXNzaXZlbHkiLCJhbGxFdmVudHMiLCJzdHJlZXQwMSIsInN0cmVldDAyIiwic3RyZWV0MDMiLCJjaXR5Iiwic3RhdGUiLCJ6aXAiLCJ1cGRhdGVQZW5kaW5nRXZlbnRzTGlzdEZvckd1ZXN0IiwibWluaW11bU5hbWVMZW5ndGgiLCJtaW5pbXVtUGFzc0xlbmd0aCIsIm1heGltdW1QYXNzTGVuZ3RoIiwiZGF0ZU9mQmlydGgiLCJldmVudFZhbGlkYXRpb25zIiwiZXZlbnROYW1lIiwiYWRkcmVzc2VkIiwiZm9ybS1ncm91cCIsImhhcy1zdWNjZXNzIiwiaGFzLWVycm9yIiwibGFiZWwiLCJjb250cm9sLWxhYmVsIiwiaW5wdXQiLCJmb3JtLWNvbnRyb2wiLCJldmVudEhvc3QiLCJldmVudFN0cmVldDAxIiwiZXZlbnRDaXR5IiwiZXZlbnRTdGF0ZSIsImV2ZW50WmlwIiwiZXZlbnRHdWVzdCIsInVwZGF0ZUV2ZW50UmVxU3RhdHVzIiwidXBkYXRlRXZlbnRSZXFBZGRyZXNzZWQiLCJ1cGRhdGVFdmVudFJlcUNsYXNzIiwiYWxsVmFsaWRhdGlvbnMiLCJjb25maWciLCIkcm91dGVQcm92aWRlciIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJjb250cm9sbGVyQXMiLCJ1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlIiwiZXZlbnRWaWV3Q2hhbmdlciIsIm90aGVyd2lzZSIsIiRyb3V0ZSIsInBhcmFtcyIsImFkZEFHdWVzdCIsImxpbmtGdW5jIiwic2NvcGUiLCJlbCIsImF0dHIiLCJjdHJsIiwiYWRkQUd1ZXN0Q29udHJvbGxlciIsInZhbGlkYXRlSW52aXRhdGlvbiIsInZhbGlkYXRpb25zIiwiaW52aXRhdGlvblZhbGlkRm9yU3VibWlzc2lvbiIsInN1Ym1pc3Npb25CdXR0b24iLCJpbnZpdGF0aW9uTWFuYWdlciIsImV2ZW50RGV0YWlscyIsImVtYWlsQ2hlY2tlciIsInRlbXBHdWVzdCIsImlzVGhlSG9zdCIsImFscmVhZHlJbnZpdGVkIiwidmFsaWRhdGVOYW1lIiwidmFsaWRhdGVFbWFpbCIsInNob3dOYW1lRXJyb3IiLCJzaG93RW1haWxFcnJvciIsInNob3dJbnZpdGF0aW9uRXJyb3IiLCJzdWJtaXRHdWVzdEludml0YXRpb24iLCJndWVzdEJlaW5nQWRkZWQiLCJpZEJ5RW1haWwiLCIkaW5qZWN0IiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJyZXBsYWNlIiwibGluayIsImJpbmRUb0NvbnRyb2xsZXIiLCJob3N0ZWRFdmVudHNMaXN0IiwibmV4dCIsImhvc3RlZEV2ZW50c0xpc3RDb250cm9sbGVyIiwiY291bnRHdWVzdHMiLCJsaXN0IiwiaG9zdGVkRXZlbnRzU2hlcnBhIiwiZm9ybWF0RGF0ZSIsImd1ZXN0c0F0dGVuZGluZyIsImd1ZXN0c0ludml0ZWQiLCJ0b3RhbEd1ZXN0Q291bnQiLCJndWVzdENvdW50IiwiZGVjbGluZWQiLCJwZXJjZW50YWdlQXR0ZW5kaW5nIiwiZ3Vlc3RsaXN0IiwiZXZlbnRDbGlja2VkIiwiaG9zdGVkRXZlbnRzIiwiaW52aXRlR3Vlc3RzIiwiY3VyVmFsIiwibWF4VmFsIiwidGVtcGxhdGUiLCJhdHRycyIsInVwZGF0ZVByb2dyZXNzIiwicHJvZ3Jlc3MiLCJob3N0ZWRHdWVzdExpc3QiLCJob3N0ZWRHdWVzdExpc3RDb250cm9sbGVyIiwidGhlcmVJc0FHdWVzdExpc3QiLCJpc0FHdWVzdExpc3QiLCJsaXN0Q29sbGVjdG9yIiwicmV0dXJuZWRMaXN0IiwidG9vbEJhciIsIlRvb2xCYXJDb250cm9sbGVyIiwiZmJDb25uZWN0IiwidG9vbGJhclNoZXJwYSIsImxvZ2luIiwiJG9uIiwibW9kdWxlIiwiZmFjdG9yeSJdLCJtYXBwaW5ncyI6IkFBT0EsUUFBQUEsbUJBQUFDLEVBQUFDLEdBU0EsUUFBQUMsS0FFQUMsRUFBQUMsY0FBQUMsTUFBQSxHQUFBQyxJQUFBLElBQ0FILEVBQUFJLFVBQUFDLEtBQUEsR0FBQUMsT0FBQUMsUUFBQSxHQUFBQyxPQUFBLEVBQUFDLE9BQUFDLE1BQUEsTUFDQVYsRUFBQVcsWUFBQSxFQUNBWCxFQUFBWSxpQkFBQSxFQUVBWixFQUFBYSxnQkFDQUMsR0FBQUMsUUFBQSxFQUFBQyxVQUFBLEVBQUFQLE9BQUFDLE1BQUEsUUFBQU8sbUJBQUEsV0FDQUMsR0FBQUgsUUFBQSxFQUFBQyxVQUFBLEVBQUFQLE9BQUFDLE1BQUEsUUFBQU8sbUJBQUEsU0FDQUUsR0FBQUosUUFBQSxFQUFBQyxVQUFBLEVBQUFQLE9BQUFDLE1BQUEsUUFBQU8sbUJBQUEsVUFJQUcsSUFDQUMsSUFHQXJCLEVBQUFXLFlBQUFXLElBR0EsUUFBQUMsR0FBQUMsR0FDQSxNQUFBQyxNQUFBRCxHQUdBLFFBQUFFLEdBQUFGLEdBQ0EsTUFBQUcsTUFBQUgsR0FHQSxRQUFBSSxHQUFBQyxHQUNBLE1BQUFDLE1BQUFDLE1BQUFGLEdBR0EsUUFBQUcsS0FDQWhDLEVBQUFJLFVBQUFDLEtBQUEsR0FBQUMsT0FBQUMsUUFBQSxHQUFBQyxPQUFBLEVBQUFDLE9BQUFDLE1BQUEsTUFHQSxRQUFBdUIsR0FBQUMsR0FDQXJDLEVBQUFzQyxLQUFBLDRDQUFBRCxHQUVBRSxJQUFBQyxNQUFBLFNBQUFBLE1BQUFILEdBQUFHLE1BQUEsVUFBQUEsTUFBQSxXQUFBQSxNQUFBdkMsRUFBQW9DLEtBQUFHLE1BQUF2QyxFQUFBd0MsU0FBQUMsS0FDQUMsR0FBQTFDLEVBQUF3QyxRQUNBRyxZQUNBdkMsTUFBQUYsRUFBQTBDLE1BQUFELFdBQUF2QyxNQUNBQyxJQUFBSCxFQUFBMEMsTUFBQUQsV0FBQXRDLEtBRUFFLEtBQUFMLEVBQUEwQyxNQUFBckMsS0FDQXNDLEtBQUE3QyxFQUFBb0MsS0FDQSxTQUFBVSxHQUNBQSxHQUFBL0MsRUFBQXNDLEtBQUEscUJBQUFTLEtBR0FSLElBQUFDLE1BQUEsU0FBQUEsTUFBQUgsR0FBQUcsTUFBQSxVQUFBQSxNQUFBLFdBQUFRLEtBQUEsUUFBQSxTQUFBQyxHQUNBLEdBQUFDLEdBQUFELEVBQUFFLEtBQ0FuRCxHQUFBc0MsS0FBQVcsRUFBQUUsT0FFQUQsRUFBQUUsU0FDQXBELEVBQUFzQyxLQUFBLG9CQUNBQyxJQUFBQyxNQUFBLFNBQUFBLE1BQUFILEdBQUFHLE1BQUEsVUFBQUEsTUFBQSxXQUFBQSxNQUFBLFdBQUFhLE9BQUEsU0FBQUMsR0FDQUEsR0FBQXRELEVBQUFzQyxLQUFBLG9CQUFBZ0IsRUFBQUMsU0FFQXZELEVBQUFzQyxLQUFBLGtCQUVBLFNBQUFnQixHQUNBQSxHQUFBdEQsRUFBQXNDLEtBQUEsb0JBQUFnQixFQUFBQyxRQUlBLFFBQUFDLEdBQUFDLEdBQ0F6RCxFQUFBc0MsS0FBQSw4Q0FBQW1CLEdBQ0FsQixJQUFBQyxNQUFBLHFCQUFBQSxNQUFBaUIsR0FBQWpCLE1BQUEsV0FBQUEsTUFBQXZDLEVBQUFvQyxLQUFBRyxNQUFBdkMsRUFBQXdDLFNBQUFDLEtBQ0FDLEdBQUExQyxFQUFBd0MsUUFDQUssS0FBQTdDLEVBQUFvQyxJQUNBTyxZQUNBdkMsTUFBQUYsRUFBQTBDLE1BQUFELFdBQUF2QyxNQUNBQyxJQUFBSCxFQUFBMEMsTUFBQUQsV0FBQXRDLEtBRUFFLEtBQUFMLEVBQUEwQyxNQUFBckMsTUFDQSxTQUFBdUMsR0FDQUEsR0FBQS9DLEVBQUFzQyxLQUFBLHFCQUFBUyxLQUlBLFFBQUF4QixLQUVBLEdBQUFtQyxHQUFBbkIsSUFBQW9CLFNBRUFELEdBQUFyQixLQUFBcEMsRUFBQTJELFFBQ0E1RCxFQUFBc0MsS0FBQSxlQUNBbkMsRUFBQVcsWUFBQSxJQUVBZCxFQUFBc0MsS0FBQSxnQkFDQW5DLEVBQUFXLFlBQUEsR0FJQSxRQUFBVSxLQUNBckIsRUFBQVcsYUFDQWQsRUFBQXNDLEtBQUEsMEJBQ0F1QixXQUFBckIsTUFBQSxhQUFBc0IsR0FBQSxRQUFBLFNBQUFiLEdBQ0EsR0FBQWMsR0FBQWQsRUFBQUUsS0FDQWhELEdBQUFZLGlCQUFBZ0QsRUFBQTlELEVBQUFvQyxLQUFBMkIsYUFNQSxRQUFBdkMsS0FDQXRCLEVBQUFhLGVBQUEsR0FBQUUsUUFBQSxFQUNBZixFQUFBYSxlQUFBLEdBQUFFLFFBQUEsRUFDQWYsRUFBQWEsZUFBQSxHQUFBRSxRQUFBLEVBdEhBLEdBQUFmLEdBQUE4RCxJQUdBOUQsR0FBQStELFVBQUE3RCxNQUFBLEdBQUFDLElBQUEsSUFDQUgsRUFBQWdFLFlBQUEsRUE4SEFoRSxFQUFBaUUsWUFBQSxTQUFBQyxHQUNBLFNBQUFBLElBQUFsRSxFQUFBQyxhQUFBQyxNQUFBLEdBQUE0QixPQUNBLE9BQUFvQyxJQUFBbEUsRUFBQUMsYUFBQUUsSUFBQSxHQUFBMkIsUUFHQTlCLEVBQUFtRSxtQkFBQSxTQUFBQyxHQUNBLE1BQUEsSUFBQXRDLE1BQUF1QyxTQUFBRCxLQUdBcEUsRUFBQTRCLG1CQUFBLFNBQUFDLEdBQ0EsTUFBQUMsTUFBQUMsTUFBQUYsSUFHQTdCLEVBQUFzRSxPQUFBLFdBQ0F6RSxFQUFBc0MsS0FBQSw2QkFHQW5DLEVBQUF1RSxpQkFBQSxXQUNBQyxVQUFBQyxLQUFBLGVBQUEzRSxFQUFBb0MsSUFBQSxJQUFBcEMsRUFBQTRFLFFBR0ExRSxFQUFBMkUsY0FBQSxTQUFBRixFQUFBRyxHQUNBLEdBQUFDLEdBQUFKLEVBQUEsSUFBQTNFLEVBQUFvQyxJQUFBLElBQUFwQyxFQUFBNEUsS0FFQTdFLEdBQUFzQyxLQUFBLG1CQUFBMEMsR0FDQUwsVUFBQUMsS0FBQUksSUFHQTdFLEVBQUE4RSxjQUFBLFNBQUFDLEdBRUEsSUFEQWxGLEVBQUFzQyxLQUFBLGVBQ0E2QyxFQUFBLEVBQUFBLEdBQUEsRUFBQUEsSUFDQUEsR0FBQUQsR0FDQS9FLEVBQUFhLGVBQUFtRSxHQUFBakUsUUFBQSxFQUNBZixFQUFBYSxlQUFBbUUsR0FBQXZFLE1BQUEsb0JBQUEsU0FDQVQsRUFBQWEsZUFBQW1FLEdBQUF2RSxNQUFBLE1BQUEsVUFFQVQsRUFBQWEsZUFBQW1FLEdBQUFqRSxRQUFBLEVBQ0FmLEVBQUFhLGVBQUFtRSxHQUFBdkUsTUFBQSxvQkFBQSxPQUNBVCxFQUFBYSxlQUFBbUUsR0FBQXZFLE1BQUEsTUFBQSxVQUtBVCxFQUFBaUYsY0FBQSxTQUFBcEQsRUFBQXFELEdBRUFsRixFQUFBMEMsTUFBQUQsYUFDQXpDLEVBQUEwQyxNQUFBRCxZQUFBdkMsTUFBQSxHQUFBQyxJQUFBLElBQ0FILEVBQUEwQyxNQUFBRCxXQUFBdkMsTUFBQUYsRUFBQTRCLG1CQUFBNUIsRUFBQUMsYUFBQUMsT0FDQUYsRUFBQTBDLE1BQUFELFdBQUF0QyxJQUFBSCxFQUFBNEIsbUJBQUE1QixFQUFBQyxhQUFBRSxNQUdBSCxFQUFBQyxhQUFBRSxJQUFBSCxFQUFBQyxhQUFBQyxPQUFBLFNBQUFnRixJQUFBbEYsRUFBQUMsYUFBQUUsSUFBQUgsRUFBQUMsYUFBQUMsT0FDQSxTQUFBZ0YsSUFBQWxGLEVBQUEwQyxNQUFBRCxXQUFBdkMsTUFBQUYsRUFBQTRCLG1CQUFBQyxJQUNBLE9BQUFxRCxJQUFBbEYsRUFBQTBDLE1BQUFELFdBQUF0QyxJQUFBSCxFQUFBNEIsbUJBQUFDLEtBR0E3QixFQUFBbUYsaUJBQUEsV0FDQSxRQUFBbkYsRUFBQTBDLE1BQUEwQyxXQUlBcEYsRUFBQXFGLG1CQUFBLFdBRUEsR0FBQXJGLEVBQUFJLFNBQUFFLE1BQUFDLFFBQUEsQ0FFQSxHQUFBK0UsR0FBQSxHQUFBQyxRQUFBLHNJQUFBLEdBRUFELEdBQUFFLEtBQUF4RixFQUFBSSxTQUFBRSxNQUFBQyxVQUNBUCxFQUFBSSxTQUFBRSxNQUFBRSxPQUFBLEVBQ0FSLEVBQUFJLFNBQUFFLE1BQUFHLE9BQUFDLE1BQUEsV0FFQVYsRUFBQUksU0FBQUUsTUFBQUUsT0FBQSxFQUNBUixFQUFBSSxTQUFBRSxNQUFBRyxPQUFBQyxNQUFBLE9BS0FWLEVBQUF5RixrQkFBQSxXQUNBLElBQUFULEVBQUEsRUFBQUEsRUFBQSxFQUFBQSxJQUNBbkYsRUFBQXNDLEtBQUFuQyxFQUFBMEYsZUFBQVYsS0FJQWhGLEVBQUEyRixlQUFBLFdBQ0EzRixFQUFBMEMsTUFBQWtELFFBQUFDLEtBQUEsV0FDQWhHLEVBQUFzQyxLQUFBLGlCQURBbkMsU0FFQSxTQUFBNEMsR0FDQS9DLEVBQUFzQyxLQUFBLFVBQUFTLEtBSUE1QyxFQUFBeUYsb0JBRUEsR0FBQXpGLEVBQUFhLGVBQUEsR0FBQUcsVUFBQSxHQUFBaEIsRUFBQWEsZUFBQSxHQUFBRyxVQUFBLEdBQUFoQixFQUFBYSxlQUFBLEdBQUFHLFNBQ0FoQixFQUFBMkUsY0FBQSxjQUFBN0UsRUFBQW9DLEtBQ0FsQyxFQUFBYSxlQUFBLEdBQUFFLE9BQUFmLEVBQUE4RSxjQUFBLEdBQ0E5RSxFQUFBYSxlQUFBLEdBQUFFLE9BQUFmLEVBQUE4RSxjQUFBLEdBQ0E5RSxFQUFBYSxlQUFBLEdBQUFFLFFBQUFmLEVBQUE4RSxjQUFBLElBR0E5RSxFQUFBOEYsb0JBQUEsV0FFQSxHQUFBeEMsR0FBQS9CLEVBQUF2QixFQUFBSSxTQUFBRSxNQUFBQyxRQUdBLElBQUFQLEVBQUFJLFNBQUFDLE1BQUFMLEVBQUFJLFNBQUFFLE1BQUFFLE1BQUEsQ0FFQSxHQUFBUixFQUFBMEMsTUFBQTBDLFVBS0EsSUFEQSxHQUFBSixHQUFBLEVBQ0FoRixFQUFBMEMsTUFBQTBDLFVBQUFKLElBQUEsQ0FDQSxHQUFBaEYsRUFBQTBDLE1BQUEwQyxVQUFBSixHQUFBMUUsT0FBQW9CLEVBQUE0QixHQUdBLE1BRkF6RCxHQUFBc0MsS0FBQSx5Q0FDQUgsSUFHQWdELFNBVkFoRixHQUFBMEMsTUFBQTBDLFlBZUEsSUFBQVcsZ0JBQUF6QyxHQUFBLENBRUEsR0FBQXlDLGdCQUFBekMsSUFBQXhELEVBQUFvQyxJQUdBLE1BRkFyQyxHQUFBc0MsS0FBQSxrQ0FDQUgsSUFLQUMsR0FBQThELGdCQUFBekMsSUFHQXRELEVBQUEwQyxNQUFBMEMsVUFBQVcsZ0JBQUF6QyxLQUNBTyxXQUFBLEVBQ0FtQyxPQUFBLFVBQ0EzRixLQUFBTCxFQUFBSSxTQUFBQyxLQUNBQyxNQUFBTixFQUFBSSxTQUFBRSxNQUFBQyxhQUtBOEMsR0FBQUMsR0FHQXRELEVBQUEwQyxNQUFBMEMsVUFBQTlCLElBQ0FPLFdBQUEsRUFDQW1DLE9BQUEsVUFDQTNGLEtBQUFMLEVBQUFJLFNBQUFDLEtBQ0FDLE1BQUFOLEVBQUFJLFNBQUFFLE1BQUFDLFFBTUFQLEdBQUFpRyxZQUVBakUsUUFFQW5DLEdBQUFzQyxLQUFBLHlDQUlBbkMsRUFBQWtHLGdCQUFBLFNBQUFDLEdBQ0EsR0FBQUMsR0FBQWhFLElBQUFDLE1BQUEsU0FBQUEsTUFBQXZDLEVBQUFvQyxLQUFBRyxNQUFBLFVBQ0FnRSxFQUFBLEVBQ0FDLEdBQUEsQ0FxREEsSUFsREF0RyxFQUFBMEMsTUFBQTBDLFVBQUF0RixFQUFBb0MsS0FBQTJCLFVBQUFzQyxFQUVBbkcsRUFBQTBDLE1BQUEwQyxVQUFBdEYsRUFBQW9DLEtBQUE4RCxPQUFBLFlBR0FJLEVBQUEvRCxNQUFBLFdBQUFzQixHQUFBLFFBQUEsU0FBQWIsR0FFQSxHQUFBeUQsR0FBQXpELEVBQUFFLEtBRUFuRCxHQUFBc0MsS0FBQW9FLEdBQ0ExRyxFQUFBc0MsS0FBQW9FLEVBQUF6RyxFQUFBMkQsU0FDQTVELEVBQUFzQyxLQUFBb0UsRUFBQXpHLEVBQUEyRCxRQUFBM0QsRUFBQXdDLFNBRUEsSUFBQWtFLEdBQUFELEVBQUF6RyxFQUFBMkQsUUFBQTNELEVBQUF3QyxRQUVBekMsR0FBQXNDLEtBQUFxRSxFQUdBLEtBQUFDLGFBQUFGLEdBQ0FGLEdBSUF4RyxHQUFBc0MsS0FBQSxvQkFBQWtFLEdBR0FGLEdBQUFDLEVBQUEvRCxNQUFBLGFBQUFBLE1BQUF2QyxFQUFBMkQsUUFBQXBCLE1BQUF2QyxFQUFBd0MsU0FBQUMsSUFBQWlFLEVBQUEsU0FBQTVELEdBQ0FBLEdBQUEvQyxFQUFBc0MsS0FBQVMsT0FNQXdELEVBQUEvRCxNQUFBLGFBQUFzQixHQUFBLFFBQUEsU0FBQWIsR0FFQSxHQUFBNEQsR0FBQTVELEVBQUFFLEtBR0FuRCxHQUFBc0MsS0FBQSw4QkFDQXRDLEVBQUFzQyxLQUFBdUUsR0FHQUEsRUFBQXpELFVBQUFxRCxHQUFBLElBRUEsU0FBQTFELEdBRUFBLEdBQUEvQyxFQUFBc0MsS0FBQVMsS0FJQSxFQUFBeUQsRUFBQSxDQUVBLEdBQUFNLEdBQUEsR0FBQTdFLEtBR0FzRSxHQUFBL0QsTUFBQSxXQUFBdUUsUUFDQTNELFFBQUFyQixFQUFBK0UsSUFDQSxTQUFBL0QsR0FDQUEsR0FBQS9DLEVBQUFzQyxLQUFBUyxLQUtBd0QsRUFBQS9ELE1BQUEsV0FBQUEsTUFBQXZDLEVBQUEyRCxRQUFBUCxTQUdBb0QsR0FDQXpHLEVBQUFzQyxLQUFBLG9DQUtBbkMsRUFBQTBDLE1BQUFrRCxTQUdBNUYsRUFBQTZHLG1CQUFBLFdBQ0EsR0FBQVQsR0FBQWhFLElBQUFDLE1BQUEsU0FBQUEsTUFBQXZDLEVBQUFvQyxLQUFBRyxNQUFBLFNBRUF4QyxHQUFBc0MsS0FBQSxzQkFDQWlFLEVBQUEvRCxNQUFBLGFBQUFzQixHQUFBLFFBQUEsU0FBQWIsR0FDQWpELEVBQUFzQyxLQUFBVyxFQUFBRSxTQUVBb0QsRUFBQS9ELE1BQUEsYUFBQUEsTUFBQSxXQUFBYSxVQUdBbEQsRUFBQThHLHlCQUFBLFNBQUFYLEdBQ0EsR0FBQUMsR0FBQWhFLElBQUFDLE1BQUEsU0FBQUEsTUFBQXZDLEVBQUFvQyxLQUFBRyxNQUFBLFVBQ0FnRSxFQUFBLENBR0FELEdBQUEvRCxNQUFBLFdBQUFzQixHQUFBLFFBQUEsU0FBQWIsR0FFQSxHQUFBeUQsR0FBQXpELEVBQUFFLE1BQ0F3RCxFQUFBRCxFQUFBekcsRUFBQTJELFFBQUEzRCxFQUFBd0MsUUFHQXpDLEdBQUFzQyxLQUFBb0UsR0FDQTFHLEVBQUFzQyxLQUFBb0UsRUFBQXpHLEVBQUEyRCxTQUNBNUQsRUFBQXNDLEtBQUFvRSxFQUFBekcsRUFBQTJELFFBQUEzRCxFQUFBd0MsU0FHQSxLQUFBbUUsYUFBQUYsR0FDQUYsR0FJQXhHLEdBQUFzQyxLQUFBLDhCQUFBa0UsR0FFQXhHLEVBQUFzQyxLQUFBZ0UsR0FFQUEsR0FBQUMsRUFBQS9ELE1BQUEsYUFBQUEsTUFBQXZDLEVBQUEyRCxRQUFBcEIsTUFBQXZDLEVBQUF3QyxTQUFBQyxJQUFBaUUsRUFBQSxTQUFBNUQsR0FDQUEsR0FBQS9DLEVBQUFzQyxLQUFBUyxRQVNBN0MsSUN0YUEsUUFBQWdILHNCQUFBbEgsR0FDQUEsRUFBQXNDLEtBQUEsaUNDREEsUUFBQTZFLHFCQUFBQyxFQUFBcEgsRUFBQUMsRUFBQW9ILEVBQUFDLEVBQUFDLEdBMENBLFFBQUFqRCxHQUFBQyxHQUNBLE1BQUEsSUFBQXRDLE1BQUF1QyxTQUFBRCxJQUdBLFFBQUF4QyxHQUFBQyxHQUNBLE1BQUFDLE1BQUFDLE1BQUFGLEdBR0EsUUFBQXdGLEdBQUFuSCxFQUFBQyxHQUNBLE9BQUF5QixFQUFBekIsR0FBQXlCLEVBQUExQixJQUFBLElBR0EsUUFBQW9ILEdBQUFDLEdBQ0EsUUFBQUEsR0FDQXZILEVBQUF3SCxVQUFBQyxJQUFBekgsU0FBQSxnQkFBQSxFQUNBQSxFQUFBd0gsVUFBQUMsSUFBQXpILFNBQUEsZ0JBQUEsRUFDQUEsRUFBQXdILFVBQUFDLElBQUFDLFFBQUEsY0FDQSxTQUFBSCxJQUNBdkgsRUFBQXdILFVBQUFDLElBQUF6SCxTQUFBLGdCQUFBLEVBQ0FBLEVBQUF3SCxVQUFBQyxJQUFBekgsU0FBQSxnQkFBQSxFQUNBQSxFQUFBd0gsVUFBQUMsSUFBQUMsUUFBQSxZQUlBLFFBQUFDLEdBQUFDLEdBQ0FDLEdBQUFELEVBQ0E1SCxFQUFBOEgsWUFBQTlHLFNBQUE2RyxFQUNBN0gsRUFBQThILFlBQUFySCxNQUFBc0gsTUFBQUYsRUFBQSxJQUNBN0gsRUFBQThILFlBQUFKLFFBQUFHLEVBQUEsSUFDQUEsRUFBQSxJQUFBUCxFQUFBLFFBQ0EsR0FBQU8sR0FBQVAsRUFBQSxTQUdBLFFBQUFVLEtBRUEsR0FBQUMsR0FBQSxHQUFBbkcsS0FHQW1HLEdBQUFDLFNBQUFELEVBQUFFLFdBQUFDLEtBQUFDLE1BQUFKLEVBQUFLLGFBQUEsS0FDQUwsRUFBQU0sV0FBQSxHQUNBTixFQUFBTyxXQUFBLEdBQ0FQLEVBQUFRLGdCQUFBLEdBRUF6SSxFQUFBK0QsU0FBQTdELE1BQUErSCxFQUNBakksRUFBQStELFNBQUE1RCxJQUFBOEgsRUFFQWpJLEVBQUErRCxTQUFBMkUsU0FBQXJCLEVBQUFySCxFQUFBK0QsU0FBQTdELE1BQUFGLEVBQUErRCxTQUFBNUQsS0FJQSxRQUFBd0ksS0FFQUMsUUFBQUMsVUFBQTdJLEVBQUE4SSxVQUFBckcsV0FBQXZDLFNBRUFGLEVBQUErRCxTQUFBN0QsTUFBQWlFLEVBQUFuRSxFQUFBOEksVUFBQXJHLFdBQUF2QyxPQUNBRixFQUFBK0QsU0FBQTVELElBQUFnRSxFQUFBbkUsRUFBQThJLFVBQUFyRyxXQUFBdEMsTUFLQSxRQUFBSixLQUVBLEdBQUFnSixFQUFBQyx1QkFBQSxDQUVBLEdBQUFDLEdBQUFGLEVBQUFHLGdCQUVBbEosR0FBQThILFlBQUFtQixFQUFBbkIsWUFDQUQsRUFBQW9CLEVBQUFwQixnQkFDQTdILEVBQUE4SSxVQUFBRyxFQUFBdkcsTUFDQTFDLEVBQUFtSixzQkFBQUYsRUFBQUcsbUJBSUFMLEdBQUFNLHlCQUFBdkosRUFBQW9DLElBQUFwQyxFQUFBd0MsU0FDQXVELEtBQUEsU0FBQXlELEdBRUF0SixFQUFBOEksVUFBQVEsRUFHQVgsTUFOQUksU0FRQSxTQUFBbkcsR0FDQS9DLEVBQUEsaUJBQUErQyxJQUtBNUMsR0FBQXVKLGNBQUFsRixTQUFBdkUsRUFBQTBKLFNBRUF4QixJQWxJQSxHQUFBaEksR0FBQThELEtBR0EyRixFQUFBdEMsRUFDQTRCLEVBQUE3QixFQUNBd0MsRUFBQXRDLEVBR0FTLEVBQUEsQ0FHQTdILEdBQUF1SixjQUFBLEVBQ0F2SixFQUFBK0QsVUFBQTdELE1BQUEsR0FBQUMsSUFBQSxHQUFBdUksU0FBQSxJQUNBMUksRUFBQThILGFBQ0E5RyxTQUFBaEIsRUFBQTZILGdCQUNBcEgsT0FDQXNILE1BQUEvSCxFQUFBNkgsZ0JBQUEsS0FFQUgsUUFBQTFILEVBQUE2SCxnQkFBQSxLQUVBN0gsRUFBQXdILFdBQ0FtQyxLQUNBQyxTQUNBQyxZQUFBLEVBQ0FDLFlBQUEsSUFHQXJDLEtBQ0FtQyxTQUNBbkMsS0FBQSxFQUNBc0MsZUFBQSxFQUNBQyxlQUFBLEVBQ0FDLGNBQUEsR0FFQXZDLFFBQUEsYUFHQTFILEVBQUE4SSxhQUNBOUksRUFBQW1KLHNCQUFBTyxFQUFBUSw0QkFnR0FsSyxFQUFBbUssZUFBQSxXQUVBbkssRUFBQStELFNBQUEyRSxTQUFBckIsRUFBQXJILEVBQUErRCxTQUFBN0QsTUFBQUYsRUFBQStELFNBQUE1RCxJQUdBLElBQUFpSyxHQUFBaEMsS0FBQWlDLE1BQUFySyxFQUFBK0QsU0FBQTJFLFNBQUEsSUFDQTRCLEVBQUF0SyxFQUFBK0QsU0FBQTJFLFNBQUEsR0FDQTZCLEVBQUFuQyxLQUFBQyxNQUFBaUMsRUFBQSxJQUFBLENBRUEsT0FBQUYsR0FBQUcsRUFBQSxNQUdBdkssRUFBQXdLLGFBQUEsU0FBQUMsR0FFQXpLLEVBQUErRCxTQUFBMkUsU0FBQSxJQUFBMUksRUFBQTBLLGtCQUdBLElBQUFDLElBQ0FDLFdBQUE1SyxFQUFBK0QsU0FBQTdELE1BQ0EySyxTQUFBN0ssRUFBQStELFNBQUE1RCxJQUdBeUksU0FBQUMsVUFBQThCLEVBQUFGLEtBQUEsSUFBQUUsRUFBQUYsSUFBQXpLLEVBQUErRCxTQUFBMkUsU0FBQSxHQUNBLEdBQUExSSxFQUFBbUosc0JBQUFzQixHQUFBSyxXQUFBbkQsRUFBQSxJQUNBM0gsRUFBQThJLFVBQUFyRyxXQUFBdkMsTUFBQTBCLEVBQUE1QixFQUFBK0QsU0FBQTdELE9BQ0FGLEVBQUE4SSxVQUFBckcsV0FBQXRDLElBQUF5QixFQUFBNUIsRUFBQStELFNBQUE1RCxLQUNBSCxFQUFBbUosc0JBQUFzQixHQUFBSyxXQUFBLEVBQ0E5SyxFQUFBbUosc0JBQUFzQixHQUFBTSxJQUFBL0ssU0FBQSxnQkFBQSxFQUNBQSxFQUFBbUosc0JBQUFzQixHQUFBTSxJQUFBL0ssU0FBQSxpQkFBQSxFQUNBQSxFQUFBbUosc0JBQUFzQixHQUFBTSxJQUFBL0ssU0FBQSxjQUFBLElBRUEsR0FBQUEsRUFBQW1KLHNCQUFBc0IsR0FBQUssV0FBQW5ELEVBQUEsS0FDQTNILEVBQUFtSixzQkFBQXNCLEdBQUFLLFdBQUEsRUFDQTlLLEVBQUFtSixzQkFBQXNCLEdBQUFNLElBQUEvSyxTQUFBLGdCQUFBLEVBQ0FBLEVBQUFtSixzQkFBQXNCLEdBQUFNLElBQUEvSyxTQUFBLGlCQUFBLEVBQ0FBLEVBQUFtSixzQkFBQXNCLEdBQUFNLElBQUEvSyxTQUFBLGNBQUEsSUFJQUEsRUFBQTBLLGlCQUFBLFlBRUE5SSxFQUFBNUIsRUFBQStELFNBQUE1RCxNQUFBeUIsRUFBQTVCLEVBQUErRCxTQUFBN0QsUUFDQTBCLEVBQUE1QixFQUFBK0QsU0FBQTVELEtBQUF5QixFQUFBNUIsRUFBQStELFNBQUE3RCxPQUFBLFNBQ0E4SyxTQUFBcEosRUFBQTVCLEVBQUErRCxTQUFBN0QsT0FDQStLLE9BQUFySixFQUFBNUIsRUFBQStELFNBQUE1RCxLQUVBK0ssT0FBQUYsU0FBQSxLQUVBaEwsRUFBQStELFNBQUE1RCxJQUFBZ0UsRUFBQStHLFVBS0FsTCxFQUFBbUwsZUFBQSxXQUVBbkwsRUFBQStELFNBQUE3RCxNQUFBRixFQUFBK0QsU0FBQTVELE1BQUFILEVBQUErRCxTQUFBN0QsTUFBQUYsRUFBQStELFNBQUE1RCxLQUdBSCxFQUFBd0ssYUFBQSxZQUdBeEssRUFBQStELFNBQUEyRSxTQUFBckIsRUFBQXJILEVBQUErRCxTQUFBN0QsTUFBQUYsRUFBQStELFNBQUE1RCxNQUtBSCxFQUFBdUUsaUJBQUEsV0FHQXNELEVBQUEsS0FFQWtCLEVBQUFxQyxvQkFBQSxVQUFBcEwsRUFBQThJLFdBRUFDLEVBQUFzQyx5QkFBQSxVQUFBckwsRUFBQThJLFdBQ0FqRCxLQUFBLFNBQUF5RixHQUNBekwsRUFBQXNDLEtBQUFtSixLQUZBdkMsU0FJQSxTQUFBd0MsR0FDQTFMLEVBQUFzQyxLQUFBb0osTUFRQTlCLEVBQUErQixXQUFBLGNBQUExTCxFQUFBb0MsTUFHQWxDLEVBQUF5TCxZQUFBLFdBRUEsR0FBQUMsSUFDQWhKLE1BQUExQyxFQUFBOEksVUFDQWhCLFlBQUE5SCxFQUFBOEgsWUFDQUQsZ0JBQUFBLEVBQ0F1QixlQUFBcEosRUFBQW1KLHNCQUdBdEosR0FBQXNDLEtBQUF1SixHQUVBM0MsRUFBQTRDLGVBQUFELEdBR0EzRyxjQUFBL0UsRUFBQXVKLGNBQUEsRUFDQUUsRUFBQStCLFdBQUEsY0FBQTFMLEVBQUF3QyxRQUFBeEMsRUFBQW9DLElBQUE2QyxnQkFHQS9FLEVBQUE0TCxlQUFBLFdBR0EsR0FBQUYsSUFDQWhKLE1BQUExQyxFQUFBOEksVUFDQWhCLFlBQUE5SCxFQUFBOEgsWUFDQUQsZ0JBQUFBLEVBQ0F1QixlQUFBcEosRUFBQW1KLHNCQUdBdEosR0FBQXNDLEtBQUF1SixHQUVBM0MsRUFBQTRDLGVBQUFELEdBR0EzRyxjQUFBL0UsRUFBQXVKLGNBQUEsRUFDQUUsRUFBQStCLFdBQUEsY0FBQTFMLEVBQUF3QyxRQUFBeEMsRUFBQW9DLElBQUE2QyxnQkFHQS9FLEVBQUE2TCxlQUFBLFNBQUFDLEVBQUFDLEdBR0FuRCxRQUFBQyxVQUFBa0QsSUFBQSxJQUFBQSxHQUNBLEdBQUEvTCxFQUFBbUosc0JBQUEyQyxHQUFBaEIsV0FDQW5ELEVBQUEsSUFFQTNILEVBQUFtSixzQkFBQTJDLEdBQUFoQixXQUFBLEVBQ0E5SyxFQUFBbUosc0JBQUEyQyxHQUFBZixJQUFBL0ssU0FBQSxnQkFBQSxFQUNBQSxFQUFBbUosc0JBQUEyQyxHQUFBZixJQUFBL0ssU0FBQSxpQkFBQSxFQUNBQSxFQUFBbUosc0JBQUEyQyxHQUFBZixJQUFBL0ssU0FBQSxjQUFBLElBRUEsR0FBQUEsRUFBQW1KLHNCQUFBMkMsR0FBQWhCLFdBQ0FuRCxFQUFBLEtBRUEzSCxFQUFBbUosc0JBQUEyQyxHQUFBaEIsV0FBQSxFQUNBOUssRUFBQW1KLHNCQUFBMkMsR0FBQWYsSUFBQS9LLFNBQUEsZ0JBQUEsRUFDQUEsRUFBQW1KLHNCQUFBMkMsR0FBQWYsSUFBQS9LLFNBQUEsaUJBQUEsRUFDQUEsRUFBQW1KLHNCQUFBMkMsR0FBQWYsSUFBQS9LLFNBQUEsY0FBQSxJQU1BQSxFQUFBZ00sY0FBQSxXQUNBbk0sRUFBQXNDLEtBQUFuQyxFQUFBOEksV0FFQWpCLEVBQUEsS0FFQWtCLEVBQUFxQyxvQkFBQSxVQUFBcEwsRUFBQThJLFdBRUFDLEVBQUFzQyx5QkFBQXZMLEVBQUFvQyxJQUFBbEMsRUFBQThJLFdBQ0FqRCxLQUFBLFNBQUF5RixHQUNBekwsRUFBQXNDLEtBQUFtSixHQUdBdkMsRUFBQWtELHNCQUFBLFdBQ0FwRyxLQUFBLFNBQUF5RixHQUNBekwsRUFBQXNDLEtBQUFtSixLQUZBdkMsU0FJQSxTQUFBd0MsR0FDQTFMLEVBQUFzQyxLQUFBb0osT0FWQXhDLFNBYUEsU0FBQXdDLEdBQ0ExTCxFQUFBc0MsS0FBQW9KLEtBSUE5QixFQUFBK0IsV0FBQSxjQUFBMUwsRUFBQW9DLE9BTUErRSxFQUFBaUYsT0FBQSx5QkFBQSxTQUFBQyxFQUFBQyxHQUVBeEQsUUFBQXlELFNBQUFyTSxFQUFBOEksVUFBQTFELFlBQ0F1QyxFQUFBLE1BS0E1SCxJQ3BVQSxRQUFBdU0sdUJBQUFuRixHQUNBLEdBQUFuSCxHQUFBOEQsS0FDQXlJLEVBQUFwRixDQUlBbkgsR0FBQXdNLGdCQUFBLFdBQ0FELEVBQUFmLFdBQUEsWUFHQXhMLEVBQUF5TSxVQUFBLFdBQ0FGLEVBQUFmLFdBQUEsV0NYQSxRQUFBa0IsZ0JBQUE3TSxFQUFBMkUsRUFBQW1JLEVBQUFDLEdBS0EsUUFBQUMsS0FDQWpFLFFBQUFrRSxRQUFBSCxFQUNBQSxHQUFBSSxJQUFBLFFBQUFILEVBQUFJLGFBTkEsR0FBQWhOLEdBQUE4RCxLQUNBbUosRUFBQSx3Q0FDQTdLLEVBQUEsR0FBQThLLFVBQUFELEVBT0FqTixHQUFBbU4sT0FBQSxXQUNBQyxNQUFBLG9CQUNBaEwsRUFBQWlMLFNBQ0E3SSxFQUFBQyxLQUFBLE1BR0FtRSxRQUFBa0UsUUFBQUgsR0FBQVcsTUFBQSxXQUVBVCxNQ2xCQSxRQUFBVSx5QkFBQXRHLEVBQUFwSCxFQUFBdUgsRUFBQW9HLEVBQUFyRyxFQUFBRCxHQStCQSxRQUFBdUcsS0FDQSxJQUFBek4sRUFBQTBOLE9BQUFyTixNQUFBLElBQUFMLEVBQUEwTixPQUFBcE4sT0FBQU4sRUFBQTBOLE9BQUFDLFNBQ0EzTixFQUFBME4sT0FBQUUsZ0JBQUEsRUFEQTVOLEVBQUEwTixPQUFBRSxnQkFBQSxFQUdBaEYsUUFBQUMsVUFBQTdJLEVBQUE2TixPQUFBQyxVQUFBLEtBQUE5TixFQUFBNk4sT0FBQUMsU0FDQWxGLFFBQUFDLFVBQUE3SSxFQUFBNk4sT0FBQUUsV0FBQSxLQUFBL04sRUFBQTZOLE9BQUFFLFVBQ0FuRixRQUFBQyxVQUFBN0ksRUFBQTZOLE9BQUFHLGNBQUEsS0FBQWhPLEVBQUE2TixPQUFBRyxZQUNBaE8sRUFBQTZOLE9BQUFJLHVCQUFBLEVBQ0FqTyxFQUFBNk4sT0FBQUksdUJBQUEsRUF0Q0EsR0FBQWpPLEdBQUE4RCxJQUdBOUQsR0FBQTZOLFFBQ0FDLFFBQUEsR0FDQUMsU0FBQSxHQUNBQyxZQUFBLEdBQ0FDLHVCQUFBLEdBRUFqTyxFQUFBME4sUUFDQXJOLEtBQUEsR0FDQUMsTUFBQSxHQUNBcU4sVUFBQSxFQUNBQyxnQkFBQSxHQUVBNU4sRUFBQWtPLFVBQ0FDLEdBQUEzTCxHQUFBLEdBQUE0TCxJQUFBLGlDQUFBQyxXQUFBLEVBQUE1TixPQUFBQyxNQUFBLFFBQ0FJLEdBQUEwQixHQUFBLEdBQUE0TCxJQUFBLG1DQUFBQyxXQUFBLEVBQUE1TixPQUFBQyxNQUFBLFFBQ0FRLEdBQUFzQixHQUFBLEdBQUE0TCxJQUFBLHlDQUFBQyxXQUFBLEVBQUE1TixPQUFBQyxNQUFBLFFBQ0FTLEdBQUFxQixHQUFBLEdBQUE0TCxJQUFBLHlDQUFBQyxXQUFBLEVBQUE1TixPQUFBQyxNQUFBLFFBQ0E0TixHQUFBOUwsR0FBQSxHQUFBNEwsSUFBQSwrQkFBQUMsV0FBQSxFQUFBNU4sT0FBQUMsTUFBQSxRQUNBNk4sR0FBQS9MLEdBQUEsR0FBQTRMLElBQUEsbURBQUFDLFdBQUEsRUFBQTVOLE9BQUFDLE1BQUEsUUFDQThOLEdBQUFoTSxHQUFBLEdBQUE0TCxJQUFBLHNDQUFBQyxXQUFBLEVBQUE1TixPQUFBQyxNQUFBLFNBRUFWLEVBQUF5TyxhQUFBLENBR0EsSUFBQUMsR0FBQXRILENBZUFwSCxHQUFBMk8sYUFBQSxXQUVBLEdBQUFqQixNQUNBa0IsRUFBQUYsRUFBQUcsU0FBQTdPLEVBQUE2TixPQUFBQyxTQUNBZ0IsRUFBQUosRUFBQUssY0FBQS9PLEVBQUE2TixPQUFBQyxRQUdBbEYsU0FBQUMsVUFBQStGLElBQUFsQixFQUFBc0IsS0FBQUosR0FDQWhHLFFBQUFDLFVBQUFpRyxJQUFBcEIsRUFBQXNCLEtBQUFGLEdBR0FwQixFQUFBdUIsT0FBQSxFQUFBalAsRUFBQTBOLE9BQUFyTixLQUFBcU4sRUFBQXdCLEtBQUEsTUFDQWxQLEVBQUEwTixPQUFBck4sS0FBQSxHQUVBb04sS0FHQXpOLEVBQUFtUCxjQUFBLFdBRUEsR0FBQXpCLE1BQ0EwQixFQUFBVixFQUFBRyxTQUFBN08sRUFBQTZOLE9BQUFFLFVBQ0FzQixFQUFBWCxFQUFBcE8sTUFBQU4sRUFBQTZOLE9BQUFFLFNBR0FuRixTQUFBQyxVQUFBdUcsSUFBQTFCLEVBQUFzQixLQUFBSSxHQUNBeEcsUUFBQUMsVUFBQXdHLElBQUEzQixFQUFBc0IsS0FBQUssR0FHQTNCLEVBQUF1QixPQUFBLEVBQUFqUCxFQUFBME4sT0FBQXBOLE1BQUFvTixFQUFBd0IsS0FBQSxNQUNBbFAsRUFBQTBOLE9BQUFwTixNQUFBLEdBRUFtTixLQUdBek4sRUFBQXNQLGlCQUFBLFdBRUF0UCxFQUFBeU8sYUFBQSxDQUdBLElBQUFmLE1BQ0E2QixFQUFBYixFQUFBRyxTQUFBN08sRUFBQTZOLE9BQUFHLGFBQ0F3QixHQUNBZCxFQUFBZSxjQUFBelAsRUFBQTZOLE9BQUFHLGFBQ0FVLEVBQUFnQixjQUFBMVAsRUFBQTZOLE9BQUFHLGFBQ0FVLEVBQUFpQixvQkFBQTNQLEVBQUE2TixPQUFBRyxhQUNBVSxFQUFBa0Isb0JBQUE1UCxFQUFBNk4sT0FBQUcsYUFDQVUsRUFBQW1CLGlCQUFBN1AsRUFBQTZOLE9BQUFHLGFBQ0FVLEVBQUFvQixpQkFBQTlQLEVBQUE2TixPQUFBRyxhQUNBVSxFQUFBcUIsaUJBQUEvUCxFQUFBNk4sT0FBQUcsYUFJQXBGLFNBQUFDLFVBQUEwRyxJQUFBN0IsRUFBQXNCLEtBQUFPLEdBR0E3QixFQUFBdUIsT0FBQSxFQUFBalAsRUFBQTBOLE9BQUFDLFNBQUFELEVBQUF3QixLQUFBLE1BQ0FsUCxFQUFBME4sT0FBQXBOLE1BQUEsRUFHQSxJQUFBMFAsSUFBQSxDQUNBLEtBQUFoTCxFQUFBLEVBQUFBLEVBQUEsRUFBQUEsSUFDQXdLLEVBQUF4SyxJQUNBaEYsRUFBQWtPLFNBQUFsSixHQUFBcUosV0FBQSxFQUNBck8sRUFBQWtPLFNBQUFsSixHQUFBdkUsT0FBQUMsTUFBQSxXQUVBVixFQUFBa08sU0FBQWxKLEdBQUFxSixXQUFBLEVBQ0FyTyxFQUFBa08sU0FBQWxKLEdBQUF2RSxPQUFBQyxNQUFBLE9BQ0FzUCxHQUFBLEVBSUFoUSxHQUFBME4sT0FBQUMsU0FBQXFDLEVBQ0F2QyxLQUdBek4sRUFBQWlRLGFBQUEsV0FDQWpRLEVBQUFzUCxtQkFDQXRQLEVBQUF5TyxhQUFBLEdBR0F6TyxFQUFBa1EsY0FBQSxXQUVBLEdBQUFDLEdBQUFoSixDQUdBLElBQUFuSCxFQUFBME4sT0FBQUUsZ0JBQUE1TixFQUFBNk4sT0FBQUksc0JBQUEsQ0FHQSxHQUFBaUMsR0FBQTFDLEVBQ0E0QyxFQUFBbEosQ0FJQWdKLEdBQUFBLGNBQUFsUSxFQUFBNk4sT0FBQUUsU0FBQS9OLEVBQUE2TixPQUFBRyxhQUNBbkksS0FBQSxTQUFBd0ssR0FHQUQsRUFBQUUsb0JBQUF0USxFQUFBNk4sT0FBQUUsU0FBQS9OLEVBQUE2TixPQUFBQyxRQUFBdUMsRUFBQW5PLEtBR0FnTyxFQUFBSyxxQkFBQUYsRUFBQW5PLElBQUFsQyxFQUFBNk4sT0FBQUMsUUFBQTlOLEVBQUE2TixPQUFBRSxVQUNBbEksS0FBQSxTQUFBNkIsR0FFQTdILEVBQUFzQyxLQUFBdUYsR0FHQXdJLEVBQUFNLHlCQUFBSCxFQUFBbk8sSUFBQWxDLEVBQUE2TixPQUFBRSxVQUNBbEksS0FBQSxTQUFBNkIsR0FLQXlJLEVBQUEzRSxXQUFBLG1CQUFBNkUsRUFBQW5PLEtBRUFyQyxFQUFBc0MsS0FBQXVGLEtBUkF3SSxTQVVBLFNBQUF4SSxHQUFBN0gsRUFBQXNDLEtBQUF1RixPQWhCQXdJLFNBa0JBLFNBQUF4SSxHQUFBN0gsRUFBQXNDLEtBQUF1RixPQXpCQXdJLFNBMkJBLFNBQUF4SSxHQUFBN0gsRUFBQXNDLEtBQUF1RixPQ25LQSxRQUFBK0ksd0JBQUE1USxFQUFBOE0sRUFBQWEsRUFBQXJHLEVBQUFELEdBMEJBLFFBQUF3SixLQUVBOUgsUUFBQUMsVUFBQTdJLEVBQUE2TixPQUFBdk4sUUFBQSxLQUFBTixFQUFBNk4sT0FBQXZOLE9BQ0FzSSxRQUFBQyxVQUFBN0ksRUFBQTZOLE9BQUFGLFdBQUEsS0FBQTNOLEVBQUE2TixPQUFBRixVQUVBM04sRUFBQTZOLE9BQUFJLHVCQUFBLEVBQ0FqTyxFQUFBMlEsb0JBQUEzUSxTQUFBLGdCQUFBLEVBQ0FBLEVBQUEyUSxvQkFBQTNRLFNBQUEsZ0JBQUEsRUFDQUEsRUFBQTJRLG9CQUFBakosUUFBQSxRQUNBMUgsRUFBQTJRLG9CQUFBQyxRQUFBLElBRUE1USxFQUFBNk4sT0FBQUksdUJBQUEsRUFDQWpPLEVBQUEyUSxvQkFBQTNRLFNBQUEsZ0JBQUEsRUFDQUEsRUFBQTJRLG9CQUFBM1EsU0FBQSxnQkFBQSxFQUNBQSxFQUFBMlEsb0JBQUFqSixRQUFBLG9CQUNBMUgsRUFBQTJRLG9CQUFBQyxRQUFBLEdBeENBLEdBQUE1USxHQUFBOEQsSUFHQTlELEdBQUE2TixRQUNBdk4sTUFBQSxHQUNBcU4sU0FBQSxHQUNBTSx1QkFBQSxHQUVBak8sRUFBQTBOLFFBQ0FoRyxRQUFBLEdBQ0FrRyxnQkFBQSxHQUVBNU4sRUFBQTJRLHFCQUNBQyxRQUFBLEVBQ0FoSCxTQUNBbkMsS0FBQSxFQUNBdUMsZUFBQSxFQUNBRCxlQUFBLEVBQ0E4RyxhQUFBLEVBQ0FDLGFBQUEsR0FFQXBKLFFBQUEscUJBeUJBMUgsRUFBQTRHLE9BQUEsV0FFQTVHLEVBQUE2TixPQUFBdk4sTUFBQXFNLEVBQUFvRSxLQUFBLGNBQUEsR0FBQWhGLE1BQ0EvTCxFQUFBNk4sT0FBQUYsU0FBQWhCLEVBQUFvRSxLQUFBLGlCQUFBLEdBQUFoRixNQUVBMkUsS0FHQTFRLEVBQUFnUixvQkFBQSxXQUVBLEdBQUFDLEdBQUE5SixFQUtBK0osRUFBQTFELEVBQ0EyRCxFQUFBakssQ0FHQWdLLEdBQUFFLG9CQUFBcFIsRUFBQTZOLE9BQUF2TixNQUFBTixFQUFBNk4sT0FBQUYsVUFDQTlILEtBQUEsU0FBQXdMLEdBRUFyUixFQUFBME4sT0FBQUUsZ0JBQUEsRUFHQXVELEVBQUFiLG9CQUFBdFEsRUFBQTZOLE9BQUF2TixNQUFBTixFQUFBNk4sT0FBQXhOLEtBQUFnUixFQUFBblAsT0FHQTJELEtBQUEsV0FDQWhHLEVBQUFzQyxLQUFBLFVBQUFnUCxFQUFBRyxpQkFFQUosRUFBQUssV0FBQUosRUFBQUcsaUJBQ0F6TCxLQUFBLFNBQUEyTCxHQUVBTCxFQUFBTSxpQkFBQUQsR0FHQU4sRUFBQVEsY0FBQVAsRUFBQUcsaUJBQ0F6TCxLQUFBLFNBQUE4TCxHQUVBUixFQUFBUywyQkFBQUQsS0FIQVQsU0FLQSxTQUFBeEosR0FBQTdILEVBQUFzQyxLQUFBdUYsT0FYQXdKLFNBY0EsU0FBQXhKLEdBQUE3SCxFQUFBc0MsS0FBQXVGLEtBR0F1SixFQUFBekYsV0FBQSxtQkFBQTJGLEVBQUFHLG1CQTdCQUosU0FnQ0EsU0FBQXhKLEdBRUExSCxFQUFBME4sT0FBQWhHLFFBQUFBLEVBQ0ExSCxFQUFBME4sT0FBQUUsZ0JBQUEsS0FTQTVOLEVBQUE2UixRQUFBLFdBQ0EsR0FBQUMsR0FBQXRFLENBRUFzRSxHQUFBQyxjQ2pIQSxRQUFBQyxtQkFBQS9LLEVBQUFwSCxFQUFBMkUsRUFBQW1JLEVBQUFDLEdBc0NBLFFBQUFxRixHQUFBMU8sR0FDQUEsR0FDQTFELEVBQUFzQyxLQUFBLFFBQUFvQixFQUFBckIsSUFBQSxzQkFBQXFCLEVBQUEyTyxVQUNBbFMsRUFBQW1TLFVBQUEsSUFFQXRTLEVBQUFzQyxLQUFBLHNCQUNBbkMsRUFBQW1TLFVBQUEsR0FJQSxRQUFBQyxHQUFBM04sRUFBQXlDLEdBQ0EsR0FBQXJDLEdBQUFKLEVBQUEsSUFBQXlDLEVBQUFoRixJQUFBLElBQUFnRixFQUFBeEMsS0FFQTdFLEdBQUFzQyxLQUFBLG1CQUFBMEMsR0FDQUwsRUFBQUMsS0FBQUksR0FuREEsR0FBQTdFLEdBQUE4RCxLQUNBbUosRUFBQSx3Q0FDQTdLLEVBQUEsR0FBQThLLFVBQUFELEVBR0FqTixHQUFBbVMsVUFBQSxFQUtBLG9CQUFBeEYsSUFDQUEsRUFBQTBGLGlCQUFBLG1CQUFBLFdBQ0F4UyxFQUFBc0MsS0FBQSxvQkFDQW1RLFVBQUFDLE9BQUE1RixFQUFBNkYsUUFDQSxHQUdBNUosUUFBQWtFLFFBQUFGLEdBQUE2RixLQUFBLFNBQUEsV0FDQXpTLEVBQUEwUyxtQkFDQXpMLEVBQUEwTCxXQUdBL0osUUFBQWtFLFFBQUFILEdBQUFXLE1BQUEsV0FDQVYsRUFBQWdHLFdBQUEsTUFDQTVTLEVBQUEwUyxtQkFDQXpMLEVBQUEwTCxZQStCQTNTLEVBQUFtTixPQUFBLFdBQ0F0TixFQUFBc0MsS0FBQSxnQkFDQW5DLEVBQUFtUyxVQUFBLEVBQ0EvUCxFQUFBaUwsU0FDQStFLEVBQUEsS0FBQWxRLElBQUEsR0FBQXdDLE1BQUEsTUFHQTFFLEVBQUE2UywwQkFBQSxXQUNBaFQsRUFBQXNDLEtBQUEsa0JBSUEsSUFBQUMsR0FBQSxHQUFBOEssVUFBQUQsRUFHQTdLLEdBQUEwUSxrQkFDQXhTLE1BQUFOLEVBQUErUyxnQkFDQXBGLFNBQUEzTixFQUFBZ1QsZ0JBQ0EsU0FBQXBRLEVBQUFXLEdBQ0FYLEVBQ0EvQyxFQUFBc0MsS0FBQSxxQkFBQVMsSUFFQS9DLEVBQUFzQyxLQUFBLDJCQUFBb0IsRUFBQXJCLEtBQ0FyQyxFQUFBc0MsS0FBQW9CLEdBT0E2TyxFQUFBLG1CQUFBN08sR0FDQTBELEVBQUEwTCxTQUdBL0osUUFBQWtFLFFBQUEsa0JBQUFtRyxZQVVBalQsRUFBQTBTLGlCQUFBLFdBQ0EsR0FBQVEsR0FBQXRLLFFBQUFrRSxRQUFBLGdCQUNBb0csR0FBQW5HLElBQUEsUUFBQUgsRUFBQWdHLFdBQUEsR0FBQSxPQUlBeFEsRUFBQStRLE9BQUFsQixHQzNHQSxRQUFBbUIsc0JBQUF2VCxFQUFBQyxFQUFBb0gsRUFBQUMsR0FxQkEsUUFBQXZGLEdBQUFDLEdBQ0EsTUFBQUMsTUFBQUMsTUFBQUYsR0FHQSxRQUFBd1IsS0FFQSxHQUFBQyxHQUFBLENBRUEsS0FBQTVRLFFBQUExQyxHQUFBdVQsT0FBQUMsUUFBQUYsR0FFQSxPQUFBQSxHQUdBLFFBQUFHLEtBRUEsR0FBQUMsR0FBQSxHQUFBNVIsTUFDQThDLEVBQUEsR0FBQWhELEVBQUE4UixHQUFBTCxHQUVBLE9BQUF6TyxHQUdBLFFBQUErTyxLQUdBQyxPQUFBQyxLQUFBN1QsRUFBQXVULFFBQUFPLFFBQUEsU0FBQUMsR0FHQUgsT0FBQUMsS0FBQTdULEVBQUF1VCxPQUFBUSxJQUFBRCxRQUFBLFNBQUFsUCxHQUVBLEdBQUEwTyxHQUFBLENBRUExSyxTQUFBeUQsU0FBQXJNLEVBQUF1VCxPQUFBUSxHQUFBblAsS0FBQTBPLElBR0FBLEVBQUEsRUFBQXRULEVBQUFnVSxpQkFBQUQsSUFBQSxFQUNBL1QsRUFBQWdVLGlCQUFBRCxJQUFBLE1BT0EsUUFBQUUsS0FFQTdOLEVBQUE4TixjQUFBcFUsRUFBQW9DLEtBR0FrRSxFQUFBK04sUUFBQXJVLEVBQUFvQyxLQUNBMkQsS0FBQSxTQUFBdU8sR0FDQXBVLEVBQUF3UixRQUFBNEMsSUFGQWhPLFdBUUFwRyxFQUFBdVQsT0FBQW5OLEVBQUFpTywwQkFHQWpPLEVBQUFrTywwQkFDQXpPLEtBQUEsU0FBQTBPLEdBQ0ExVSxFQUFBc0MsS0FBQW9TLEdBRUF2VSxFQUFBdVQsT0FBQW5OLEVBQUFpTyw0QkFFQXhPLEtBQUEsV0FFQThOLE1BdEZBLEdBQUEzVCxHQUFBOEQsS0FDQXNDLEVBQUFjLENBR0FsSCxHQUFBd1UsYUFBQSxFQUNBeFUsRUFBQXdSLFdBQ0F4UixFQUFBdVQsVUFDQXZULEVBQUFnVSxrQkFDQVMsU0FBQSxFQUNBNVEsV0FBQSxFQUNBMlAsU0FBQSxFQUNBMUksV0FBQSxHQUVBOUssRUFBQTBOLFVBK0VBMU4sRUFBQTBVLGVBQUEsV0FFQSxHQUFBOVAsR0FBQTZPLElBQ0FrQixFQUFBeE4sQ0FHQWYsR0FBQXNPLGVBQUE5UCxHQWlCQStQLEVBQUFuSixXQUFBLFNBQUE1RyxFQUFBd0IsRUFBQWtMLGdCQUFBbEwsRUFBQWtMLGtCQUlBMkMsSUN4SEEsUUFBQVcsMkJBQUEvVSxFQUFBOE0sRUFBQTdNLEVBQUFvSCxFQUFBQyxHQWlCQSxRQUFBaEQsR0FBQUMsR0FDQSxNQUFBLElBQUF0QyxNQUFBdUMsU0FBQUQsSUFHQSxRQUFBeEMsR0FBQUMsR0FDQSxNQUFBQyxNQUFBQyxNQUFBRixHQUdBLFFBQUFnVCxLQUNBLEdBQUFDLEdBQUEsR0FBQWhULEtBR0FnVCxHQUFBNU0sU0FBQSxHQUNBNE0sRUFBQXZNLFdBQUEsR0FDQXVNLEVBQUF0TSxXQUFBLEdBQ0FzTSxFQUFBck0sZ0JBQUEsR0FFQXpJLEVBQUErVSxhQUFBRCxFQW1EQSxRQUFBYixLQUdBWSxJQUdBek8sRUFBQStOLFFBQUFyVSxFQUFBb0MsS0FDQTJELEtBQUEsU0FBQW1QLEdBRUFoVixFQUFBaVYsS0FBQUQsRUFHQXBNLFFBQUFDLFVBQUFtTSxFQUFBRSxNQUFBLEtBQUFGLEVBQUFFLE1BQ0FsVixFQUFBK1UsYUFBQTVRLEVBQUE2USxFQUFBRSxRQWpHQSxHQUFBbFYsR0FBQThELEtBR0FzQyxFQUFBYyxDQUdBbEgsR0FBQWlWLFFBQ0FqVixFQUFBK1UsYUFDQS9VLEVBQUFtVixNQUNBQyxZQUFBLEVBQ0FDLFFBQUEsRUFDQUMsUUFBQSxhQUNBQyxXQUFBLG1CQXlCQXZWLEVBQUF3VixZQUFBLFdBRUF4VixFQUFBbVYsS0FBQUUsUUFBQSxHQUVBek0sUUFBQTZNLFlBQUF6VixFQUFBaVYsS0FBQVMsVUFBQSxLQUFBMVYsRUFBQWlWLEtBQUFTLFVBQ0E5TSxRQUFBNk0sWUFBQXpWLEVBQUFpVixLQUFBVSxRQUFBLEtBQUEzVixFQUFBaVYsS0FBQVUsUUFDQS9NLFFBQUE2TSxZQUFBelYsRUFBQWlWLEtBQUFDLE1BQUEsS0FBQWxWLEVBQUFpVixLQUFBQyxLQUVBbFYsRUFBQW1WLEtBQUFDLFlBQUEsRUFDQXBWLEVBQUFtVixLQUFBSSxXQUFBLGtCQUNBdlYsRUFBQW1WLEtBQUFHLFFBQUEsb0JBRUF0VixFQUFBbVYsS0FBQUMsWUFBQSxFQUNBcFYsRUFBQW1WLEtBQUFJLFdBQUEsa0JBQ0F2VixFQUFBbVYsS0FBQUcsUUFBQSxlQUtBdFYsRUFBQTRWLFVBQUEsV0FDQTVWLEVBQUFpVixLQUFBQyxJQUFBdFQsRUFBQTVCLEVBQUErVSxjQUNBL1UsRUFBQXdWLGVBR0F4VixFQUFBNlYsY0FBQSxXQUVBLEdBQUFDLEdBQUEzTyxFQUNBNE8sRUFBQTNQLEVBQUFrTCxlQUdBLEtBQUF0UixFQUFBK1UsY0FBQS9VLEVBQUE0VixhQUdBLElBQUFHLEdBQUFuTixRQUFBNk0sWUFBQU0sS0FDQTNQLEVBQUE4TixjQUFBcFUsRUFBQW9DLEtBSUFsQyxFQUFBbVYsS0FBQUUsU0FDQXhWLEVBQUFzQyxLQUFBLHVCQUNBaUUsRUFBQXFMLGlCQUFBelIsRUFBQWlWLE9BSUFhLEVBQUF0SyxXQUFBLGNBQUF4TCxFQUFBaVYsS0FBQS9TLE1Bd0JBK1IsSUMxR0EsUUFBQStCLGFBQUFuVyxFQUFBMk4sR0FNQSxRQUFBeUksS0FFQSxHQUFBQyxHQUFBMUksQ0FFQTBJLEdBQUFDLG1CQUNBdFEsS0FBQSxTQUFBRyxHQUNBLE1BQUFBLEtBRkFrUSxTQUlBLFNBQUFsUSxHQUNBLE1BQUFBLEtBYkEsR0FBQW9RLElBQ0FILFdBQUFBLEVBZ0JBLE9BQUFHLEdDbkJBLFFBQUE1SSxpQkFBQTNOLEVBQUF3VyxFQUFBekosR0FxQ0EsUUFBQXJMLEdBQUFDLEdBQ0EsTUFBQUMsTUFBQUQsR0FHQSxRQUFBRSxHQUFBRixHQUNBLE1BQUFHLE1BQUFILEdBR0EsUUFBQTJDLEdBQUFDLEdBQ0EsTUFBQSxJQUFBdEMsTUFBQXVDLFNBQUFELElBR0EsUUFBQXhDLEdBQUFDLEdBQ0EsTUFBQUMsTUFBQUMsTUFBQUYsR0FHQSxRQUFBcU8sR0FBQTVQLEVBQUFxTixHQUVBLEdBQUEySSxHQUFBLEdBQUFwSixVQUFBRCxFQUdBLE9BQUFvSixHQUFBLFNBQUFFLEVBQUFDLEdBRUFGLEVBQUFHLFlBRUFuVyxNQUFBQSxFQUNBcU4sU0FBQUEsR0FFQSxTQUFBL0ssRUFBQXNFLEdBRUF0RSxFQUFBNFQsRUFBQSx3QkFBQTVULEdBRUEyVCxFQUFBclAsT0FNQSxRQUFBcUosR0FBQXJPLEVBQUE3QixFQUFBQyxHQUVBLEdBQUFvVyxHQUFBLEdBQUF4SixVQUFBRCxHQUNBMEosRUFBQUQsRUFBQXJVLE1BQUEsU0FBQUEsTUFBQUgsR0FDQXlFLEVBQUEsR0FBQTdFLEtBR0EsT0FBQXVVLEdBQUEsU0FBQUUsRUFBQUMsR0FFQUcsRUFBQXBVLEtBQ0FxVSxLQUNBMVUsSUFBQUEsRUFDQTdCLEtBQUFBLEVBQ0FDLE1BQUFBLEdBRUFpVCxRQUNBa0IsU0FDQXhSLFFBQUFyQixFQUFBK0UsSUFFQTZNLFNBQ0F2USxRQUFBckIsRUFBQStFLElBRUE5QyxXQUNBWixRQUFBckIsRUFBQStFLElBRUFtRSxXQUNBN0gsUUFBQXJCLEVBQUErRSxNQUtBLFNBQUEvRCxHQUVBQSxFQUFBNFQsRUFBQSw0QkFBQTVULEdBRUEyVCxFQUFBLGdDQVFBLFFBQUEvRixHQUFBdE8sRUFBQTVCLEdBRUEsR0FBQW9XLEdBQUEsR0FBQXhKLFVBQUFELEdBQ0E0SixFQUFBdFYsRUFBQWpCLEdBQ0F3VyxFQUFBSixFQUFBclUsTUFBQSxRQUFBQSxNQUFBd1UsRUFHQSxPQUFBUixHQUFBLFNBQUFFLEVBQUFDLEdBRUFNLEVBQUF2VSxJQUFBTCxFQUFBLFNBQUFVLEdBQ0FBLEVBQUE0VCxFQUFBLDRCQUFBNVQsR0FDQTJULEVBQUEsZ0NBT0EsUUFBQW5GLEdBQUE5USxFQUFBcU4sR0FFQSxHQUFBK0ksR0FBQSxHQUFBeEosVUFBQUQsRUFFQSxPQUFBb0osR0FBQSxTQUFBRSxFQUFBQyxHQUdBRSxFQUFBNUQsa0JBRUF4UyxNQUFBQSxFQUNBcU4sU0FBQUEsR0FFQSxTQUFBL0ssRUFBQVcsR0FFQVgsRUFDQTRULEVBQUEscUJBQUE1VCxHQUdBMlQsRUFBQWhULE9BU0EsUUFBQTRTLEtBRUEsR0FBQU8sR0FBQSxHQUFBeEosVUFBQUQsRUFFQSxPQUFBb0osR0FBQSxTQUFBRSxFQUFBQyxHQUVBRSxFQUFBdkQsT0FBQSxTQUFBNVAsR0FHQWdULEVBRkFoVCxHQUVBLEdBR0EsT0FPQSxRQUFBd08sS0FFQSxHQUFBMkUsR0FBQSxHQUFBeEosVUFBQUQsRUFFQXBOLEdBQUFzQyxLQUFBLG9CQUNBdVUsRUFBQXJKLFNBR0EsUUFBQTBKLEdBQUFDLEdBRUEsR0FBQU4sR0FBQSxHQUFBeEosVUFBQUQsR0FDQS9LLEVBQUE4VSxFQUFBOVUsSUFDQStVLEVBQUFQLEVBQUFyVSxNQUFBLFNBQUFBLE1BQUFILEVBR0EsT0FBQW1VLEdBQUEsU0FBQUUsRUFBQUMsR0FFQVMsRUFBQXJRLE9BQUFvUSxFQUFBLFNBQUFwVSxHQUNBQSxFQUFBNFQsRUFBQSw2Q0FBQTVULEdBQ0EyVCxFQUFBLDJDQU9BLFFBQUFXLEdBQUFDLEdBRUEsR0FBQVQsR0FBQSxHQUFBeEosVUFBQUQsR0FDQS9LLEVBQUFpVixFQUFBLElBQUFDLFdBQ0FDLEVBQUFYLEVBQUFyVSxNQUFBLFNBQUFBLE1BQUFILEdBQUFHLE1BQUEsTUFHQSxPQUFBZ1UsR0FBQSxTQUFBRSxFQUFBQyxHQUdBYSxFQUFBelEsT0FBQXVRLEVBQUEsU0FBQXZVLEdBQ0FBLEVBQUE0VCxFQUFBLDZDQUFBNVQsR0FDQTJULEVBQUEsK0NBTUEsUUFBQWUsTUFJQSxRQUFBL0YsR0FBQXJQLEdBRUEsR0FBQXdVLEdBQUEsR0FBQXhKLFVBQUFELEdBQ0F1RSxFQUFBa0YsRUFBQXJVLE1BQUEsU0FBQUEsTUFBQUgsR0FBQUcsTUFBQSxNQUdBLE9BQUFnVSxHQUFBLFNBQUFFLEVBQUFDLEdBRUFoRixFQUFBM08sS0FBQSxRQUFBLFNBQUFDLEdBRUF5VCxFQUFBelQsRUFBQUUsUUFDQSxTQUFBSixHQUNBQSxHQUNBNFQsRUFBQTVULE9BT0EsUUFBQTJVLEdBQUFyVixFQUFBc1YsR0FHQSxHQUFBZCxHQUFBLEdBQUF4SixVQUFBRCxHQUNBckksRUFBQTRTLEVBQUFoVixHQUNBaVYsRUFBQWYsRUFBQXJVLE1BQUEsU0FBQUEsTUFBQUgsR0FBQUcsTUFBQSxVQUFBQSxNQUFBLFdBQUFBLE1BQUF1QyxFQUdBLE9BQUF5UixHQUFBLFNBQUFFLEVBQUFDLEdBR0FpQixFQUFBbFYsSUFBQWlWLEVBQUEsU0FBQTVVLEdBQ0FBLEVBQUE0VCxFQUFBLHVCQUFBNVQsR0FDQTJULEVBQUEsMENBTUEsUUFBQW1CLEdBQUFyWCxFQUFBc1gsRUFBQXJWLEVBQUFKLEdBRUEsR0FBQXdVLEdBQUEsR0FBQXhKLFVBQUFELEdBQ0E3SCxFQUFBc1IsRUFBQXJVLE1BQUEsU0FBQUEsTUFBQUgsR0FBQUcsTUFBQSxVQUFBQSxNQUFBLFdBQUFBLE1BQUFDLEdBQUFELE1BQUEsYUFBQUEsTUFBQXNWLEVBR0EsT0FBQXRCLEdBQUEsU0FBQUUsRUFBQUMsR0FHQXBSLEVBQUE3QyxLQUNBcVYsT0FBQSxFQUNBNVIsT0FBQSxVQUNBM0YsS0FBQUEsR0FDQSxTQUFBdUMsR0FDQUEsRUFBQTRULEVBQUEsdUJBQUE1VCxHQUNBMlQsRUFBQSwwQ0FNQSxRQUFBN0UsR0FBQXhQLEdBRUEsR0FBQXdVLEdBQUEsR0FBQXhKLFVBQUFELEdBQ0F2SixFQUFBZ1QsRUFBQXJVLE1BQUEsU0FBQUEsTUFBQUgsR0FBQUcsTUFBQSxTQUdBLE9BQUFnVSxHQUFBLFNBQUFFLEVBQUFDLEdBRUE5UyxFQUFBbVUsYUFBQWhWLEtBQUEsUUFBQSxTQUFBQyxHQUNBLEdBQUFnVixHQUFBaFYsRUFBQUUsTUFHQStVLEdBQ0F2RSxRQUFBc0UsRUFBQXRFLFFBQ0EzUCxVQUFBaVUsRUFBQWpVLFVBQ0E0USxRQUFBcUQsRUFBQXJELFFBQ0EzSixVQUFBZ04sRUFBQWhOLFVBR0F5TCxHQUFBd0IsSUFDQSxTQUFBblYsR0FDQUEsR0FDQTRULEVBQUE1VCxPQU9BLFFBQUFvVixHQUFBOVYsRUFBQUksR0FHQSxHQUFBb1UsR0FBQSxHQUFBeEosVUFBQUQsR0FDQWdMLEVBQUF2QixFQUFBclUsTUFBQSxTQUFBQSxNQUFBSCxHQUFBRyxNQUFBLFVBQUFBLE1BQUEsV0FBQUEsTUFBQUMsRUFHQSxPQUFBK1QsR0FBQSxTQUFBRSxFQUFBQyxHQUVBeUIsRUFBQXBWLEtBQUEsUUFBQSxTQUFBQyxHQUNBLEdBQUFvVixHQUFBcFYsRUFBQUUsS0FFQXVULEdBQUEyQixJQUNBLFNBQUF0VixHQUNBQSxHQUFBNFQsRUFBQTVULE9BS0EsUUFBQXVWLEdBQUFDLEdBRUEsR0FBQTFCLEdBQUEsR0FBQXhKLFVBQUFELEdBQ0FvTCxFQUFBM0IsRUFBQXJVLE1BQUEsT0FHQSxPQUFBZ1UsR0FBQSxTQUFBRSxFQUFBQyxHQUVBNkIsRUFBQXhWLEtBQUEsUUFBQSxTQUFBQyxHQUVBLEdBQUF3VixHQUFBeFYsRUFBQUUsS0FFQTRRLFFBQUFDLEtBQUF5RSxHQUFBeEUsUUFBQSxTQUFBeUUsR0FFQUEsR0FBQUgsRUFDQTdCLEVBQUErQixFQUFBQyxJQUVBL0IsRUFBQSwrQkFXQSxRQUFBZ0MsR0FBQS9VLEVBQUFuQixHQUVBLEdBQUFvVSxHQUFBLEdBQUF4SixVQUFBRCxHQUNBN0gsRUFBQXNSLEVBQUFyVSxNQUFBLFNBQUFBLE1BQUFvQixHQUFBcEIsTUFBQSxVQUFBQSxNQUFBLFdBQUFBLE1BQUFDLEdBQUFELE1BQUEsWUFFQSxPQUFBZ1UsR0FBQSxTQUFBRSxFQUFBQyxHQUdBcFIsRUFBQXZDLEtBQUEsUUFBQSxTQUFBQyxHQUVBLEdBQUEyVixHQUFBM1YsRUFBQUUsS0FFQXVULEdBQUFrQyxJQUNBLFNBQUE3VixHQUNBQSxHQUFBNFQsRUFBQSw4Q0FBQTVULE9BS0EsUUFBQThWLEdBQUFqVixFQUFBdkIsRUFBQUksSUFtREEsUUFBQXFXLEdBQUE1RSxFQUFBN1IsR0FFQSxHQUFBd1UsR0FBQSxHQUFBeEosVUFBQUQsR0FDQTJMLEVBQUFsQyxFQUFBclUsTUFBQSxTQUFBQSxNQUFBSCxHQUFBRyxNQUFBLFVBQUFBLE1BQUEwUixHQUFBMVIsTUFBQSxVQUdBLE9BQUFnVSxHQUFBLFNBQUFFLEVBQUFDLEdBQ0FvQyxFQUFBclcsSUFBQSxLQUFBLFNBQUFLLEdBQ0FBLEVBQUE0VCxFQUFBLDZDQUFBNVQsR0FDQTJULEVBQUEsbUNBTUEsUUFBQXNDLEdBQUEzVyxFQUFBSSxHQUVBLEdBQUFvVSxHQUFBLEdBQUF4SixVQUFBRCxHQUNBNkwsRUFBQXBDLEVBQUFyVSxNQUFBLFNBQUFBLE1BQUFILEdBQUFHLE1BQUEsVUFBQUEsTUFBQSxXQUFBQSxNQUFBQyxFQUVBLE9BQUErVCxHQUFBLFNBQUFFLEVBQUFDLEdBQ0EsR0FBQXVDLEdBQUEsU0FBQW5XLEdBQ0FBLEVBQ0E0VCxFQUFBLDBCQUVBRCxFQUFBLDZCQUtBdUMsR0FBQTVWLE9BQUE2VixLQUtBLFFBQUFDLEdBQUFqRixFQUFBN1IsR0FFQSxHQUFBd1UsR0FBQSxHQUFBeEosVUFBQUQsR0FDQWdNLEVBQUF2QyxFQUFBclUsTUFBQSxTQUFBQSxNQUFBSCxHQUFBRyxNQUFBLFVBQUFBLE1BQUEwUixFQUdBLE9BQUFzQyxHQUFBLFNBQUFFLEVBQUFDLEdBRUF5QyxFQUFBcFcsS0FBQSxRQUFBLFNBQUFDLEdBRUEsR0FBQW9XLEdBQUFwVyxFQUFBRSxLQUdBNEYsU0FBQUMsVUFBQXFRLEVBQUEsU0FBQTNDLEdBQUEsR0FDQUMsR0FBQSxJQUVBLFNBQUE1VCxHQUNBQSxHQUFBNFQsRUFBQTVULE9BdGVBLEdBQUFxSyxHQUFBLHdDQUNBa00sR0FDQTVYLFlBQUFBLEVBQ0FHLFlBQUFBLEVBQ0F5QyxtQkFBQUEsRUFDQXZDLG1CQUFBQSxFQUVBd1Asb0JBQUFBLEVBQ0ErRSxpQkFBQUEsRUFDQXBFLFdBQUFBLEVBRUF1RixpQkFBQUEsRUFDQS9GLFdBQUFBLEVBQ0FHLGNBQUFBLEVBQ0FzRyxnQkFBQUEsRUFDQVUsa0JBQUFBLEVBQ0FQLGFBQUFBLEVBQ0FLLHFCQUFBQSxFQUVBdEksY0FBQUEsRUFDQUsscUJBQUFBLEVBQ0FDLHlCQUFBQSxFQUNBdUcsZUFBQUEsRUFDQUcsY0FBQUEsRUFDQUssa0JBQUFBLEVBQ0FHLDRCQUFBQSxFQUlBaUIsa0JBQUFBLEVBQ0FFLHNCQUFBQSxFQUVBRyxzQkFBQUEsRUE0Y0EsT0FBQUcsR0M5ZUEsUUFBQWhTLGNBQUF0SCxFQUFBMkUsR0FPQSxRQUFBZ0gsR0FBQS9HLEVBQUEyVSxFQUFBQyxFQUFBQyxHQUNBMVEsUUFBQUMsVUFBQXVRLElBQ0EzVSxFQUFBQSxFQUFBLElBQUEyVSxFQUVBeFEsUUFBQUMsVUFBQXdRLEtBRUE1VSxFQUFBQSxFQUFBLElBQUE0VSxFQUVBelEsUUFBQUMsVUFBQXlRLEtBQ0E3VSxFQUFBQSxFQUFBLElBQUE2VSxFQUVBOVUsRUFBQUMsS0FBQUEsSUFHQUQsRUFBQUMsS0FBQUEsSUFHQUQsRUFBQUMsS0FBQUEsSUFHQUQsRUFBQUMsS0FBQUEsR0FLQSxRQUFBOFUsR0FBQWpYLEVBQUFtQixFQUFBK1YsRUFBQWhRLEdBTUEsR0FIQVosUUFBQTZNLFlBQUFqTSxLQUFBQSxFQUFBLEdBR0EvRixJQUFBK1YsRUFBQSxDQUNBLEdBQUEvVSxHQUFBLGVBQUFuQyxFQUFBLElBQUFrWCxFQUFBLElBQUFoUSxDQUVBaEYsR0FBQUMsS0FBQUEsT0FHQSxDQUNBLEdBQUFBLEdBQUEsZ0JBQUFuQyxFQUFBLElBQUFrWCxFQUFBLElBQUEvVixDQUVBZSxHQUFBQyxLQUFBQSxJQTdDQSxHQUFBZ1YsSUFDQWpPLFdBQUFBLEVBQ0ErTixXQUFBQSxFQStDQSxPQUFBRSxHQ25EQSxRQUFBdlMsVUFBQXJILEVBQUF3VyxFQUFBN0ksR0FzQkEsUUFBQWpNLEdBQUFDLEdBQ0EsTUFBQUMsTUFBQUQsR0FXQSxRQUFBSSxHQUFBQyxHQUNBLE1BQUFDLE1BQUFDLE1BQUFGLEdBOERBLFFBQUE2WCxLQUNBLE1BQUEsS0FBQXRULEdBQUF3USxJQUFBMVUsS0FDQSxLQUFBa0UsR0FBQXdRLElBQUF2VyxNQUNBLEtBQUErRixHQUFBd1EsSUFBQXRXLE1BTUEsUUFBQXFaLEdBQUFDLEVBQUF0WCxHQUNBLFFBQUFzRyxRQUFBQyxVQUFBekMsR0FBQW1OLE9BQUFxRyxHQUFBdFgsSUFJQSxRQUFBdVgsR0FBQXZaLEVBQUFnQyxHQUdBLE1BQUFzRyxTQUFBQyxVQUFBekMsR0FBQXdRLElBQUF0VyxRQUVBLElBQUE4RixHQUFBd1EsSUFBQXRXLE1BRUFBLEdBQUE4RixHQUFBd1EsSUFBQXRXLE1BY0E4RixHQUFBbU4sT0FBQUMsUUFBQWxSLEdBQUFLLEtBQUFyQyxPQUFBQSxFQVVBLFFBQUF3WixHQUFBeFosRUFBQWdDLEdBRUEsTUFBQXNHLFNBQUFDLFVBQUF6QyxHQUFBbU4sT0FBQUMsUUFBQWxSLEdBQUE4QyxZQUlBMlUsU0FBQXhZLEVBQUFqQixPQUdBc1QsUUFBQUMsS0FBQXpOLEdBQUFtTixPQUFBQyxRQUFBbFIsR0FBQThDLFdBQUEwTyxRQUFBLFNBQUErQyxHQUNBLE1BQUFrRCxXQUFBbEQsR0FDQWhYLEVBQUFzQyxLQUFBLGtFQUNBLElBRUF0QyxFQUFBc0MsS0FBQSw2Q0FDQSxPQU1BdEMsRUFBQXNDLEtBQUEsaUJBQ0EsR0FLQSxRQUFBNkcsS0FDQSxRQUFBSixRQUFBQyxVQUFBbVIsR0FBQXRYLE9BT0EsUUFBQXVYLEdBQUFMLEdBRUFoRyxPQUFBQyxLQUFBek4sR0FBQW1OLE9BQUFxRyxJQUFBOUYsUUFBQSxTQUFBeUUsR0FFQTNQLFFBQUF5RCxTQUFBakcsR0FBQW1OLE9BQUFxRyxHQUFBckIsV0FDQW5TLElBQUFtTixPQUFBcUcsR0FBQXJCLEtBTUEsUUFBQWpILEtBQ0EsTUFBQWxMLElBQUF3USxJQUFBMVUsSUFHQSxRQUFBZ1ksS0FDQSxNQUFBOVQsSUFBQXdRLElBQUF2VyxLQUdBLFFBQUE4WixLQUNBLE1BQUEvVCxJQUFBd1EsSUFBQXRXLE1BR0EsUUFBQThaLEtBQ0EsTUFBQWhVLElBQUF3USxJQUFBbEIsUUFHQSxRQUFBMkUsS0FDQSxNQUFBalUsSUFBQXdRLElBQUFqQixNQUdBLFFBQUEyRSxLQUNBLE1BQUFsVSxJQUFBd1EsSUFBQTFCLElBR0EsUUFBQXFGLEtBQ0EsT0FDQXJZLElBQUFrRSxHQUFBd1EsSUFBQTFVLElBQ0E3QixLQUFBK0YsR0FBQXdRLElBQUF2VyxLQUNBQyxNQUFBOEYsR0FBQXdRLElBQUF0VyxNQUNBb1YsUUFBQXRQLEdBQUF3USxJQUFBbEIsUUFDQUMsTUFBQXZQLEdBQUF3USxJQUFBakIsTUFDQVQsSUFBQTlPLEdBQUF3USxJQUFBMUIsS0FJQSxRQUFBc0YsR0FBQVosRUFBQXRYLEdBQ0EsTUFBQThELElBQUFtTixPQUFBcUcsR0FBQXRYLEdBR0EsUUFBQW1ZLEdBQUFiLEdBQ0EsTUFBQXhULElBQUFtTixPQUFBcUcsR0FHQSxRQUFBdkYsS0FDQSxNQUFBak8sSUFBQW1OLE9BR0EsUUFBQXJLLEtBQ0EsTUFBQThRLElBSUEsUUFBQTlGLEdBQUFoUyxHQUNBa0UsR0FBQXdRLElBQUExVSxJQUFBQSxFQUdBLFFBQUF3WSxHQUFBcmEsR0FDQStGLEdBQUF3USxJQUFBdlcsS0FBQUEsRUFHQSxRQUFBc2EsR0FBQXJhLEdBQ0E4RixHQUFBd1EsSUFBQXRXLE1BQUFBLEVBR0EsUUFBQXNhLEdBQUFsRixHQUNBdFAsR0FBQXdRLElBQUFsQixRQUFBQSxFQUdBLFFBQUFtRixHQUFBbEYsR0FDQXZQLEdBQUF3USxJQUFBakIsTUFBQUEsRUFHQSxRQUFBbUYsR0FBQTVGLEdBQ0E5TyxHQUFBd1EsSUFBQTFCLElBQUFBLEVBR0EsUUFBQTVFLEdBQUFoUSxFQUFBRCxFQUFBNkIsR0FDQTBHLFFBQUFDLFVBQUF2SSxJQUFBcWEsRUFBQXJhLEdBQ0FzSSxRQUFBQyxVQUFBeEksSUFBQXFhLEVBQUFyYSxHQUNBdUksUUFBQUMsVUFBQTNHLElBQUFnUyxFQUFBaFMsR0FHQSxRQUFBNlksR0FBQW5CLEVBQUFsWCxHQUVBLEdBQUFrQyxHQUFBbEMsRUFBQUYsRUFHQXlYLEdBQUFMLEdBRUF4VCxHQUFBbU4sT0FBQXFHLEdBQUFoVixHQUFBbEMsRUFHQSxRQUFBa1AsR0FBQW9KLEdBQ0E1VSxHQUFBbU4sT0FBQXlILEVBR0EsUUFBQXZKLEdBQUFELEdBRUFrSixFQUFBbEosRUFBQW5SLE1BQ0FzYSxFQUFBbkosRUFBQWxSLE9BQ0FzYSxFQUFBcEosRUFBQWtFLFNBQ0FtRixFQUFBckosRUFBQW1FLE9BQ0FtRixFQUFBdEosRUFBQTBELEtBRUErRixJQUdBLFFBQUFDLEdBQUE3YSxFQUFBQyxFQUFBNmEsRUFBQTdZLEVBQUFKLEdBRUEsR0FBQWtaLEdBQUE1TixDQUVBLE9BQUE2SSxHQUFBLFNBQUFFLEVBQUFDLEdBRUE1TixRQUFBQyxVQUFBdkksS0FDQTZhLEVBQUE1WixFQUFBakIsSUFHQThhLEVBQUExRCw0QkFBQXJYLEVBQUE4YSxFQUFBN1ksRUFBQUosR0FDQTJELEtBQUEsU0FBQXdWLEdBQ0E5RSxFQUFBOEUsS0FGQUQsU0FJQSxTQUFBRSxHQUNBOUUsRUFBQThFLE9BTUEsUUFBQTNQLEdBQUFqSixHQUVBc1gsR0FBQXRYLEVBR0EsUUFBQTZZLEdBQUFuYixHQUVBLEdBQUE4QixHQUFBOUIsRUFBQThCLEdBR0EwRyxTQUFBeUQsU0FBQTJOLEdBQUF0WCxNQUFBMEMsYUFDQTRVLEdBQUF0WCxNQUFBMEMsY0FJQTRVLEdBQUF0WCxNQUFBMEMsVUFBQWxELEdBQUE5QixFQUFBb2IsTUFJQSxRQUFBQyxHQUFBbmIsR0FFQSxHQUFBOGEsR0FBQTVOLENBRUEsT0FBQTZJLEdBQUEsU0FBQUUsRUFBQUMsR0FFQWtGLFdBQUFuYSxFQUFBakIsR0FFQThhLEVBQUFqRCxhQUFBdUQsWUFDQTdWLEtBQUEsU0FBQTNELEdBQ0FxVSxFQUFBclUsS0FGQWtaLFNBSUEsU0FBQU8sR0FDQW5GLEVBQUFtRixPQU9BLFFBQUFDLEdBQUFoQyxFQUFBbFgsU0FFQTBELElBQUFtTixPQUFBcUcsR0FBQWxYLEVBQUFGLElBSUEsUUFBQXFaLEtBRUEsR0FBQVQsR0FBQTVOLENBRUE0TixHQUFBOUQsbUJBQ0F6UixLQUFBLFNBQUFpVyxHQUNBMVYsR0FBQTBWLElBSUEsUUFBQUMsR0FBQTdaLEdBRUEsR0FBQWtaLEdBQUE1TixDQUVBLE9BQUE2SSxHQUFBLFNBQUFFLEVBQUFDLEdBRUE0RSxFQUFBN0osV0FBQXJQLEdBQ0EyRCxLQUFBLFNBQUEyTCxHQUVBK0UsRUFBQS9FLEtBSEE0SixTQUtBLFNBQUF4WSxHQUNBNFQsRUFBQSw0Q0FBQTVULE9BTUEsUUFBQTBSLEtBRUEsR0FBQThHLEdBQUE1TixDQUVBLE9BQUE2SSxHQUFBLFNBQUFFLEVBQUFDLEdBR0E0RSxFQUFBMUosY0FBQUosS0FDQXpMLEtBQUEsU0FBQTBPLEdBR0FYLE9BQUFDLEtBQUFVLEdBQUFULFFBQUEsU0FBQWtJLEdBRUFwSSxPQUFBQyxLQUFBVSxFQUFBeUgsSUFBQWxJLFFBQUEsU0FBQXBSLEdBR0FxWSxFQUFBaUIsRUFBQXpILEVBQUF5SCxHQUFBdFosUUFLQTZULEVBQUFoQyxLQWRBNkcsU0FnQkEsU0FBQXhZLEdBQ0E0VCxFQUFBLCtDQUFBNVQsT0FLQSxRQUFBcVosR0FBQTNaLEdBRUEsR0FBQThZLEdBQUE1TixDQUVBLE9BQUE2SSxHQUFBLFNBQUFFLEVBQUFDLEdBR0E0RSxFQUFBcEQsZ0JBQUExRyxJQUFBaFAsR0FDQXVELEtBQUEsU0FBQXFXLEdBS0EzRixFQUFBMkYsS0FOQWQsU0FRQSxTQUFBeFksR0FDQTRULEVBQUEsOENBQUE1VCxPQUtBLFFBQUF1WixLQUVBLEdBQUFmLEdBQUE1TixDQUVBNE4sR0FBQXJFLGVBQUEzUSxJQUdBLFFBQUE2VSxLQUVBLEdBQUFHLEdBQUE1TixDQUVBNE4sR0FBQWxFLGNBQUE5USxHQUFBd1EsS0FHQSxRQUFBd0YsTUFJQSxRQUFBL1EsR0FBQW5KLEVBQUFRLEdBRUEsR0FBQTBZLEdBQUE1TixDQUtBLE9BSEEzTixHQUFBc0MsS0FBQSw4QkFDQXRDLEVBQUFzQyxLQUFBTyxHQUVBMlQsRUFBQSxTQUFBRSxFQUFBQyxHQUVBNEUsRUFBQTdELGtCQUFBclYsRUFBQVEsR0FDQW1ELEtBQUEsU0FBQXdXLEdBQ0E5RixFQUFBOEYsS0FGQWpCLFNBSUEsU0FBQWtCLEdBQ0E5RixFQUFBOEYsT0FNQSxRQUFBclEsR0FBQThILEdBRUEsR0FBQXFILEdBQUE1TixDQUlBLE9BQUE2SSxHQUFBLFNBQUFFLEVBQUFDLEdBRUE0RSxFQUFBcEMsc0JBQUFqRixFQUFBekMsS0FDQXpMLEtBQUEsU0FBQTBXLEdBRUFuQixFQUFBekMsa0JBQUE1RSxFQUFBekMsS0FDQXpMLEtBQUEsU0FBQTBXLEdBQUExYyxFQUFBc0MsS0FBQW9hLEtBREFuQixTQUVBLFNBQUFPLEdBQUE5YixFQUFBc0MsS0FBQXdaLE9BTEFQLFNBT0EsU0FBQU8sR0FDQTliLEVBQUFzQyxLQUFBd1osT0FPQSxRQUFBYSxHQUFBL1ksRUFBQW5CLEdBRUEsR0FBQThZLEdBQUE1TixDQUVBLE9BQUE2SSxHQUFBLFNBQUFFLEVBQUFDLEdBRUE0RSxFQUFBNUMscUJBQUEvVSxFQUFBbkIsR0FDQXVELEtBQUEsU0FBQTRXLEdBQ0FsRyxFQUFBa0csS0FGQXJCLFNBSUEsU0FBQU8sR0FDQW5GLEVBQUFtRixPQUtBLFFBQUFlLEdBQUFwYSxHQUVBLEdBQUE4WSxHQUFBNU4sQ0FFQSxPQUFBNkksR0FBQSxTQUFBRSxFQUFBQyxHQUNBNEUsRUFBQXZDLHNCQUFBelMsR0FBQWtMLGNBQUFoUCxHQUNBdUQsS0FBQSxTQUFBd1csR0FDQTlGLEVBQUE4RixLQUZBakIsU0FJQSxTQUFBa0IsR0FDQTlGLEVBQUE4RixPQUtBLFFBQUFuSSxHQUFBalMsR0FHQSxNQUFBbVUsR0FBQSxTQUFBRSxFQUFBQyxHQUdBa0QsSUFHQW5ELEVBQUFnRSxLQUdBd0IsRUFBQTdaLEdBQ0EyRCxLQUFBLFNBQUE4VyxHQUdBck0sRUFBQXFNLEVBQUFyYyxNQUFBcWMsRUFBQXRjLEtBQUFzYyxFQUFBemEsS0FHQXFVLEVBQUFvRyxLQVBBWixTQVNBLFNBQUFuWixHQUNBNFQsRUFBQTVULE9BUUEsUUFBQXlHLEdBQUFuSCxFQUFBSSxHQUtBLE1BSEE0UixHQUFBaFMsR0FHQW1VLEVBQUEsU0FBQUUsRUFBQUMsR0FHQXlGLEVBQUEzWixHQUNBdUQsS0FBQSxTQUFBK1csR0FFQXJHLEVBQUFxRyxLQUhBWCxXQVNBdEMsRUFBQSxVQUFBclgsSUFBQWlVLEVBQUFpRSxFQUFBLFVBQUFsWSxNQUtBLFFBQUF1YSxHQUFBM2EsR0FDQSxHQUNBNGEsS0FHQSxPQUFBekcsR0FBQSxTQUFBRSxFQUFBQyxHQUVBbEMsSUFDQXpPLEtBQUEsU0FBQTBPLEdBRUFnQyxFQUFBaEMsS0FJQXVJLEVBQUFyQyxFQUFBYixNQUdBckQsRUFBQXVHLEtBS0EsUUFBQXBJLEdBQUE5UCxHQUVBLEdBQ0E0UyxNQUNBM1YsRUFBQSxHQUFBQyxLQUNBRCxHQUFBMEcsV0FBQSxFQUFBLEVBQUEsRUFDQSxJQUFBeEUsR0FBQW5DLEVBQUFDLEVBR0EyVixJQUNBaFYsR0FBQW9DLEVBQ0F2RSxLQUFBLEdBQ0F1WixLQUFBLEdBQ0FqWCxNQUNBdEMsS0FBQStGLEdBQUF3USxJQUFBdlcsS0FDQTZCLElBQUFrRSxHQUFBd1EsSUFBQTFVLElBQ0E1QixNQUFBOEYsR0FBQXdRLElBQUF0VyxPQUVBb0gsUUFBQSxHQUNBakYsWUFDQXZDLE1BQUE2RCxFQUNBNUQsSUFBQTRELEVBQUEsTUFFQXhELFNBQ0F3YyxTQUFBLEdBQ0FDLFNBQUEsR0FDQUMsU0FBQSxHQUNBQyxLQUFBLEdBQ0FDLE1BQUEsR0FDQUMsSUFBQSxJQUtBckMsRUFBQSxVQUFBdkQsR0FHQTdMLEVBQUE2TCxHQXFCQSxRQUFBNkYsR0FBQS9hLEdBSUEsTUFBQStULEdBQUEsU0FBQUUsRUFBQUMsTUFRQSxRQUFBcEwsR0FBQTJJLEVBQUFyUixHQUNBN0MsRUFBQXNDLEtBQUEsNkJBQ0F0QyxFQUFBc0MsS0FBQU8sR0FDQXFZLEVBQUFoSCxFQUFBclIsR0FwcUJBLEdBQUEwRCxLQUNBd1EsS0FDQTFVLElBQUEsR0FDQTdCLEtBQUEsR0FDQUMsTUFBQSxHQUNBb1YsUUFBQSxHQUNBQyxNQUFBLEdBQ0FULElBQUEsR0FFQTNCLFFBQ0FDLFdBQ0FpQixXQUNBNVEsYUFDQWlILGVBSUFrUCxNQW1CQWhELElBQ0EwQywrQkFBQUEsRUFDQUMsbUJBQUFBLEVBQ0FFLG1CQUFBQSxFQUNBQyxvQkFBQUEsRUFDQTlRLHFCQUFBQSxFQUVBaVIsWUFBQUEsRUFFQTNJLGNBQUFBLEVBQ0E0SSxlQUFBQSxFQUNBQyxnQkFBQUEsRUFDQUMsa0JBQUFBLEVBQ0FDLGdCQUFBQSxFQUNBQyxjQUFBQSxFQUNBQyxrQkFBQUEsRUFDQUMsdUJBQUFBLEVBQ0FDLHFCQUFBQSxFQUNBcEcsd0JBQUFBLEVBQ0FuTCxlQUFBQSxFQUVBZ0wsY0FBQUEsRUFDQXdHLGVBQUFBLEVBQ0FDLGdCQUFBQSxFQUNBQyxrQkFBQUEsRUFDQUMsZ0JBQUFBLEVBQ0FDLGNBQUFBLEVBQ0F4SyxvQkFBQUEsRUFDQXlLLHdCQUFBQSxFQUNBbkosMkJBQUFBLEVBQ0FILGlCQUFBQSxFQUNBeUosd0JBQUFBLEVBQ0F2UCxlQUFBQSxFQUNBNFAsc0JBQUFBLEVBQ0FuUSxvQkFBQUEsRUFFQXdRLHdCQUFBQSxFQUVBQyx3QkFBQUEsRUFDQUUscUJBQUFBLEVBQ0F6SCx3QkFBQUEsRUFDQTJILDBCQUFBQSxFQUNBRSx5QkFBQUEsRUFDQWxCLHNCQUFBQSxFQUNBbUIseUJBQUFBLEVBQ0EvUSx5QkFBQUEsRUFDQVksc0JBQUFBLEVBQ0F3UCxrQkFBQUEsRUFDQWUsa0JBQUFBLEVBQ0FFLDRCQUFBQSxFQUVBdkksUUFBQUEsRUFDQTBJLHdCQUFBQSxFQUNBeFQseUJBQUFBLEVBQ0FxTCxlQUFBQSxFQUNBMkksZ0NBQUFBLEVBNGtCQSxPQUFBckcsSUN6cUJBLFFBQUE1UCxZQUFBdkgsR0F5QkEsUUFBQWdQLEdBQUE5QyxHQUNBLE1BQUFuRCxTQUFBNk0sWUFBQTFKLEdBQ0EsMkJBREEsT0FLQSxRQUFBZ0QsR0FBQWhELEdBQ0EsTUFBQW5ELFNBQUFDLFVBQUFrRCxJQUNBQSxFQUFBa0QsT0FBQXFPLEVBQUEsMkJBQUFBLEVBQUEsY0FEQSxPQUtBLFFBQUE3TixHQUFBMUQsR0FDQSxNQUFBbkQsU0FBQUMsVUFBQWtELE1BQ0FBLEVBQUFrRCxPQUFBc08sR0FLQSxRQUFBN04sR0FBQTNELEdBQ0EsTUFBQW5ELFNBQUFDLFVBQUFrRCxNQUNBQSxFQUFBa0QsT0FBQXVPLEdBS0EsUUFBQTFOLEdBQUEvRCxHQUNBLEdBQUFuRCxRQUFBQyxVQUFBa0QsR0FBQSxDQUVBLEdBQUF6RyxHQUFBLEdBQUFDLFFBQUEsYUFHQSxTQUFBRCxFQUFBRSxLQUFBdUcsR0FTQSxPQUFBLEVBR0EsUUFBQThELEdBQUE5RCxHQUNBLEdBQUFuRCxRQUFBQyxVQUFBa0QsR0FBQSxDQUVBLEdBQUF6RyxHQUFBLEdBQUFDLFFBQUEsUUFBQSxHQUdBLFNBQUFELEVBQUFFLEtBQUF1RyxHQVNBLE9BQUEsRUFHQSxRQUFBNEQsR0FBQTVELEdBQ0EsR0FBQW5ELFFBQUFDLFVBQUFrRCxHQUFBLENBRUEsR0FBQXpHLEdBQUEsR0FBQUMsUUFBQSxRQUFBLEdBR0EsU0FBQUQsRUFBQUUsS0FBQXVHLEdBU0EsT0FBQSxFQUdBLFFBQUE2RCxHQUFBN0QsR0FDQSxHQUFBbkQsUUFBQUMsVUFBQWtELEdBQUEsQ0FFQSxHQUFBekcsR0FBQSxHQUFBQyxRQUFBLFFBQUEsR0FHQSxTQUFBRCxFQUFBRSxLQUFBdUcsR0FTQSxPQUFBLEVBR0EsUUFBQWdFLEdBQUFoRSxHQUNBLEdBQUFuRCxRQUFBQyxVQUFBa0QsR0FBQSxDQUVBLEdBQUF6RyxHQUFBLEdBQUFDLFFBQUEsb0JBQUEsR0FHQSxRQUFBRCxFQUFBRSxLQUFBdUcsR0FTQSxPQUFBLEVBR0EsUUFBQXpMLEdBQUF5TCxHQUVBLEdBQUF6RyxHQUFBLEdBQUFDLFFBQUEsc0lBQUEsR0FFQSxPQUFBcUQsU0FBQUMsVUFBQWtELEtBQUF6RyxFQUFBRSxLQUFBdUcsR0FDQSxvQkFEQSxPQU9BLFFBQUEwUixHQUFBMVIsSUFFQSxRQUFBN0IsS0FFQSxHQUFBd1QsSUFDQUMsV0FDQTdTLFdBQUEsRUFDQThTLFdBQUEsRUFDQTdTLEtBQ0FuQixTQUNBaUgsYUFBQSxFQUNBQyxhQUFBLEVBQ0ErTSxjQUFBLEVBQ0FDLGVBQUEsRUFDQUMsYUFBQSxJQUdBQyxPQUNBcFUsU0FDQXFVLGlCQUFBLElBR0FDLE9BQ0F0VSxTQUNBdVUsZ0JBQUEsS0FJQUMsV0FBQXRULFdBQUEsRUFBQThTLFdBQUEsRUFBQTdTLEtBQUFuQixTQUFBaUgsYUFBQSxFQUFBQyxhQUFBLEVBQUErTSxjQUFBLEVBQUFDLGVBQUEsRUFBQUMsYUFBQSxJQUFBQyxPQUFBcFUsU0FBQXFVLGlCQUFBLElBQUFDLE9BQUF0VSxTQUFBdVUsZ0JBQUEsS0FDQW5DLFdBQUFsUixXQUFBLEVBQUE4UyxXQUFBLEVBQUE3UyxLQUFBbkIsU0FBQWlILGFBQUEsRUFBQUMsYUFBQSxFQUFBK00sY0FBQSxFQUFBQyxlQUFBLEVBQUFDLGFBQUEsSUFBQUMsT0FBQXBVLFNBQUFxVSxpQkFBQSxJQUFBQyxPQUFBdFUsU0FBQXVVLGdCQUFBO0lBQ0F2VCxZQUFBRSxXQUFBLEVBQUE4UyxXQUFBLEVBQUE3UyxLQUFBbkIsU0FBQWlILGFBQUEsRUFBQUMsYUFBQSxFQUFBK00sY0FBQSxFQUFBQyxlQUFBLEVBQUFDLGFBQUEsSUFBQUMsT0FBQXBVLFNBQUFxVSxpQkFBQSxJQUFBQyxPQUFBdFUsU0FBQXVVLGdCQUFBLEtBQ0F0VCxVQUFBQyxXQUFBLEVBQUE4UyxXQUFBLEVBQUE3UyxLQUFBbkIsU0FBQWlILGFBQUEsRUFBQUMsYUFBQSxFQUFBK00sY0FBQSxFQUFBQyxlQUFBLEVBQUFDLGFBQUEsSUFBQUMsT0FBQXBVLFNBQUFxVSxpQkFBQSxJQUFBQyxPQUFBdFUsU0FBQXVVLGdCQUFBLEtBQ0FFLGVBQUF2VCxXQUFBLEVBQUE4UyxXQUFBLEVBQUE3UyxLQUFBbkIsU0FBQWlILGFBQUEsRUFBQUMsYUFBQSxFQUFBK00sY0FBQSxFQUFBQyxlQUFBLEVBQUFDLGFBQUEsSUFBQUMsT0FBQXBVLFNBQUFxVSxpQkFBQSxJQUFBQyxPQUFBdFUsU0FBQXVVLGdCQUFBLEtBQ0FHLFdBQUF4VCxXQUFBLEVBQUE4UyxXQUFBLEVBQUE3UyxLQUFBbkIsU0FBQWlILGFBQUEsRUFBQUMsYUFBQSxFQUFBK00sY0FBQSxFQUFBQyxlQUFBLEVBQUFDLGFBQUEsSUFBQUMsT0FBQXBVLFNBQUFxVSxpQkFBQSxJQUFBQyxPQUFBdFUsU0FBQXVVLGdCQUFBLEtBQ0FJLFlBQUF6VCxXQUFBLEVBQUE4UyxXQUFBLEVBQUE3UyxLQUFBbkIsU0FBQWlILGFBQUEsRUFBQUMsYUFBQSxFQUFBK00sY0FBQSxFQUFBQyxlQUFBLEVBQUFDLGFBQUEsSUFBQUMsT0FBQXBVLFNBQUFxVSxpQkFBQSxJQUFBQyxPQUFBdFUsU0FBQXVVLGdCQUFBLEtBQ0FLLFVBQUExVCxXQUFBLEVBQUE4UyxXQUFBLEVBQUE3UyxLQUFBbkIsU0FBQWlILGFBQUEsRUFB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LCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdBbkV2ZW50Q29udHJvbGxlcicsIEFuRXZlbnRDb250cm9sbGVyKTtcblxuQW5FdmVudENvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICckcm91dGVQYXJhbXMnLCBdO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIEFuRXZlbnRDb250cm9sbGVyKCRsb2csICRyb3V0ZVBhcmFtcykge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHRcblx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0dm0udGVtcFRpbWUgPSB7c3RhcnQ6ICcnLCBlbmQ6ICcnfTtcblx0dm0udXNlcklzSG9zdCA9IGZhbHNlO1xuXG5cblx0Ly9Mb2NhbCBNZXRob2RzXG5cdGZ1bmN0aW9uIGluaXQoKSB7XG5cdFx0Ly9kZWNsYXJlIGFuZCBpbml0aWFsaXplIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZtLnRlbXBEYXRlVGltZSA9IHtzdGFydDogJycsIGVuZDogJyd9O1xuXHRcdHZtLm5ld0d1ZXN0ID0ge25hbWU6ICcnLCBlbWFpbDp7YWRkcmVzczonJywgdmFsaWQ6ZmFsc2UsIHN0eWxlOntjb2xvcjonJ319fTtcblx0XHR2bS5zaG93SWZIb3N0ID0gZmFsc2U7XG5cdFx0dm0uaGlkZUlmQXR0ZW5kaW5nID0gdHJ1ZTtcblx0XHQvL3NlY3Rpb25zXG5cdFx0dm0ubWFuYWdlU2VjdGlvbnMgPSB7XG5cdFx0XHQxOiB7YWN0aXZlOiB0cnVlLCBjb21wbGV0ZTogZmFsc2UsIHN0eWxlOntjb2xvcjonYmxhY2snLCAnYmFja2dyb3VuZC1jb2xvcic6J3llbGxvdyd9fSxcblx0XHRcdDI6IHthY3RpdmU6IGZhbHNlLCBjb21wbGV0ZTogZmFsc2UsIHN0eWxlOntjb2xvcjond2hpdGUnLCAnYmFja2dyb3VuZC1jb2xvcic6J2dyYXknfX0sXG5cdFx0XHQzOiB7YWN0aXZlOiBmYWxzZSwgY29tcGxldGU6IGZhbHNlLCBzdHlsZTp7Y29sb3I6J3doaXRlJywgJ2JhY2tncm91bmQtY29sb3InOidncmF5J319XG5cdFx0fTtcblxuXHRcdC8vY2hlY2sgdXNlciB0byBkZXRlcm1pbmUgc3RhdGVcblx0XHRjaGVja0Zvckhvc3QoKTtcblx0XHRjaGVja0lmR3Vlc3RJc0F0dGVuZGluZygpO1xuXG5cdFx0Ly9vcGVuIHVwIHNlY3Rpb25zXG5cdFx0aWYoIXZtLnNob3dJZkhvc3QpIG9wZW5BbGxTZWN0aW9ucygpO1xuXHR9XG5cblx0ZnVuY3Rpb24gdXRmOF90b19iNjQoc3RyKSB7XG5cdFx0cmV0dXJuIGJ0b2Eoc3RyKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGI2NF90b191dGY4KHN0cikge1xuICAgIFx0cmV0dXJuIGF0b2Ioc3RyKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNsZWFuTmV3R3Vlc3RWYXJpYWJsZSgpIHtcblx0XHR2bS5uZXdHdWVzdCA9IHtuYW1lOiAnJywgZW1haWw6e2FkZHJlc3M6JycsIHZhbGlkOmZhbHNlLCBzdHlsZTp7Y29sb3I6Jyd9fX07XG5cdH1cblxuXHRmdW5jdGlvbiBpbnZpdGVBUmVnaXN0ZXJlZFVzZXIodWlkKSB7XG5cdFx0JGxvZy5pbmZvKCdhZGRpbmcgdGhlbSB0byB0aGUgcmVnaXN0ZXJlZCB1c2VycyBsaXN0ICcgKyB1aWQpO1xuXHRcdC8vc2V0IHRoZSBuZXcgZXZlbnRcblx0XHRyZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ3BlbmRpbmcnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS5jaGlsZCgkcm91dGVQYXJhbXMuZXZlbnRJZCkuc2V0KHtcblx0XHRcdGlkOiAkcm91dGVQYXJhbXMuZXZlbnRJZCxcblx0XHRcdGV2ZW50VGltZXM6IHtcblx0XHRcdFx0c3RhcnQ6IHZtLmV2ZW50LmV2ZW50VGltZXMuc3RhcnQsXG5cdFx0XHRcdGVuZDogdm0uZXZlbnQuZXZlbnRUaW1lcy5lbmRcblx0XHRcdH0sXG5cdFx0XHRuYW1lOiB2bS5ldmVudC5uYW1lLFxuXHRcdFx0aG9zdDogJHJvdXRlUGFyYW1zLnVpZFxuXHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKCd0aGVyZSB3YXMgYW4gZXJyb3InICsgZXJyb3IpO1xuXHRcdH0pO1xuXHRcdC8vaWYgdGhlcmUgd2FzIGFuIHVwZGF0ZWQgcGxhY2UgaG9sZGVyLCByZW1vdmUgaXRcblx0XHRyZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ3BlbmRpbmcnKS5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHR2YXIgY2hlY2tGb3JQbGFjZWhvbGRlciA9IHNuYXBzaG90LnZhbCgpXG5cdFx0XHQkbG9nLmluZm8oc25hcHNob3QudmFsKCkpO1xuXG5cdFx0XHRpZihjaGVja0ZvclBsYWNlaG9sZGVyLnVwZGF0ZWQpIHtcblx0XHRcdFx0JGxvZy5pbmZvKCdkZWxldGluZyB1cGRhdGVkJyk7XG5cdFx0XHRcdHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgncGVuZGluZycpLmNoaWxkKCd1cGRhdGVkJykucmVtb3ZlKGZ1bmN0aW9uKGVycm9yT2JqZWN0KSB7XG5cdFx0XHRcdFx0aWYoZXJyb3JPYmplY3QpICRsb2cuaW5mbyhcIkRlbGV0aW5nIGZhaWxlZDogXCIgKyBlcnJvck9iamVjdC5jb2RlKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2UgJGxvZy5pbmZvKCdub3RoaW5nIHRvIGRvJyk7XG5cblx0XHR9LCBmdW5jdGlvbihlcnJvck9iamVjdCkge1xuXHRcdFx0aWYoZXJyb3JPYmplY3QpICRsb2cuaW5mbyhcIlRoZSByZWFkIGZhaWxlZDogXCIgKyBlcnJvck9iamVjdC5jb2RlKTtcblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGludml0ZUFuVW5yZWdpc3RlcmVkVXNlcih1c2VyS2V5KSB7XG5cdFx0JGxvZy5pbmZvKCdhZGRpbmcgdGhlbSB0byB0aGUgVU5SRUdJU1RFUkVEIHVzZXJzIGxpc3QgJyArIHVzZXJLZXkpO1xuXHRcdHJlZi5jaGlsZCgnVW5yZWdpc3RlcmVkVXNlcnMnKS5jaGlsZCh1c2VyS2V5KS5jaGlsZCgncGVuZGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ldmVudElkKS5zZXQoe1xuXHRcdFx0aWQ6ICRyb3V0ZVBhcmFtcy5ldmVudElkLFxuXHRcdFx0aG9zdDogJHJvdXRlUGFyYW1zLnVpZCxcblx0XHRcdGV2ZW50VGltZXM6IHtcblx0XHRcdFx0c3RhcnQ6IHZtLmV2ZW50LmV2ZW50VGltZXMuc3RhcnQsXG5cdFx0XHRcdGVuZDogdm0uZXZlbnQuZXZlbnRUaW1lcy5lbmRcblx0XHRcdH0sXG5cdFx0XHRuYW1lOiB2bS5ldmVudC5uYW1lXG5cdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oJ3RoZXJlIHdhcyBhbiBlcnJvcicgKyBlcnJvcik7XG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBjaGVja0Zvckhvc3QoKSB7XG5cdFx0Ly9jaGVjayBldmVudCBob3N0XG5cdFx0dmFyIGF1dGhEYXRhID0gcmVmLmdldEF1dGgoKTtcblxuXHRcdGlmKGF1dGhEYXRhLnVpZCA9PSAkcm91dGVQYXJhbXMuaG9zdElkKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2lzIHRoZSBob3N0Jyk7XG5cdFx0XHR2bS5zaG93SWZIb3N0ID0gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JGxvZy5pbmZvKCdub3QgdGhlIGhvc3QnKTtcblx0XHRcdHZtLnNob3dJZkhvc3QgPSBmYWxzZTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBjaGVja0lmR3Vlc3RJc0F0dGVuZGluZygpIHtcblx0XHRpZighdm0uc2hvd0lmSG9zdCkge1xuXHRcdFx0JGxvZy5pbmZvKCdjaGVjayBndWVzdCBhdHRlbmRhbmNlJyk7XG5cdFx0XHR1c2VyRXZlbnRzLmNoaWxkKCdndWVzdExpc3QnKS5vbigndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0XHR2YXIgYWxsR3Vlc3RzID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHRcdHZtLmhpZGVJZkF0dGVuZGluZyA9ICFhbGxHdWVzdHNbJHJvdXRlUGFyYW1zLnVpZF0uYXR0ZW5kaW5nO1xuXHRcdFx0XHRcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIG9wZW5BbGxTZWN0aW9ucygpIHtcblx0XHR2bS5tYW5hZ2VTZWN0aW9uc1sxXS5hY3RpdmUgPSB0cnVlO1xuXHRcdHZtLm1hbmFnZVNlY3Rpb25zWzJdLmFjdGl2ZSA9IHRydWU7XG5cdFx0dm0ubWFuYWdlU2VjdGlvbnNbM10uYWN0aXZlID0gdHJ1ZTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNhdmVFdmVudCgpIHtcblx0XHR2bS5ldmVudC4kc2F2ZSgpLnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2V2ZW50IHNhdmVkJyk7XG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdCRsb2cuaW5mbygnZXJyb3IhICcgKyBlcnJvcik7XG5cdFx0fSk7XG5cdH1cblxuXHQvL3ZpZXcgTWV0aG9kXG5cdHZtLnNldFRlbXBUaW1lID0gZnVuY3Rpb24oZW5kcG9pbnQpIHtcblx0XHRpZihlbmRwb2ludCA9PSAnc3RhcnQnKSB2bS50ZW1wRGF0ZVRpbWUuc3RhcnQgPSBuZXcgRGF0ZSgpO1xuXHRcdGlmKGVuZHBvaW50ID09ICdlbmQnKSB2bS50ZW1wRGF0ZVRpbWUuZW5kID0gbmV3IERhdGUoKTtcblx0fVxuXG5cdHZtLnVuaXhUaW1lVG9EYXRlVGltZSA9IGZ1bmN0aW9uICh1bml4VGltZSkge1xuXHRcdHJldHVybiBuZXcgRGF0ZShwYXJzZUludCh1bml4VGltZSkpO1xuXHR9O1xuXG5cdHZtLmRhdGVUaW1lVG9Vbml4VGltZSA9IGZ1bmN0aW9uIChkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fTtcblxuXHR2bS5zdWJtaXQgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9nLmluZm8oJ3N1Ym1pdHRpbmcgdGhlIGZvcm0gbm93IScpO1xuXHR9XG5cblx0dm0uYmFja1RvVXNlckV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2NhdGlvbi5wYXRoKCcvdXNlckV2ZW50cy8nICsgJHJvdXRlUGFyYW1zLnVpZCArICcvJyArICRyb3V0ZVBhcmFtcy50b2tlbik7XG5cdH1cblxuXHR2bS5ldmVudFJlZGlyZWN0ID0gZnVuY3Rpb24ocGF0aCwgZXZlbnRJRCkge1xuXHRcdHZhciBmdWxsUGF0aCA9IHBhdGggKyAnLycgKyAkcm91dGVQYXJhbXMudWlkICsgJy8nICsgJHJvdXRlUGFyYW1zLnRva2VuO1xuXHRcdC8vcmVkaXJlY3Rcblx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIHRvOiAnICsgZnVsbFBhdGgpO1xuXHRcdCRsb2NhdGlvbi5wYXRoKGZ1bGxQYXRoKTtcblx0fVxuXG5cdHZtLmNoYW5nZVNlY3Rpb24gPSBmdW5jdGlvbih0YXJnZXRTZWN0aW9uKSB7XG5cdFx0JGxvZy5pbmZvKCdhcmUgd2UgaGVyZScpO1xuXHRcdGZvcihpID0gMTsgaSA8PTM7IGkrKykge1xuXHRcdFx0aWYoaT09dGFyZ2V0U2VjdGlvbikge1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5hY3RpdmUgPSB0cnVlO1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5zdHlsZVsnYmFja2dyb3VuZC1jb2xvciddID0neWVsbG93Jztcblx0XHRcdFx0dm0ubWFuYWdlU2VjdGlvbnNbaV0uc3R5bGVbJ2NvbG9yJ10gPSdibGFjayc7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5hY3RpdmUgPSBmYWxzZTtcblx0XHRcdFx0dm0ubWFuYWdlU2VjdGlvbnNbaV0uc3R5bGVbJ2JhY2tncm91bmQtY29sb3InXSA9J2dyYXknO1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5zdHlsZVsnY29sb3InXSA9J3doaXRlJztcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHR2bS5zYXZlRXZlbnRUaW1lID0gZnVuY3Rpb24oZGF0ZVRpbWUsIHRhcmdldCkge1xuXHRcdC8vaWYgdGhpcyBldmVudCBkaWRuJ3QgaGF2ZSBhIHN0YXJ0IHRpbWUsIGNyZWF0ZSBpdFxuXHRcdGlmKCF2bS5ldmVudC5ldmVudFRpbWVzKSB7IFxuXHRcdFx0dm0uZXZlbnQuZXZlbnRUaW1lcyA9IHtzdGFydDogJycsIGVuZDogJyd9O1xuXHRcdFx0dm0uZXZlbnQuZXZlbnRUaW1lcy5zdGFydCA9IHZtLmRhdGVUaW1lVG9Vbml4VGltZSh2bS50ZW1wRGF0ZVRpbWUuc3RhcnQpOyBcblx0XHRcdHZtLmV2ZW50LmV2ZW50VGltZXMuZW5kID0gdm0uZGF0ZVRpbWVUb1VuaXhUaW1lKHZtLnRlbXBEYXRlVGltZS5lbmQpO1xuXHRcdH1cblxuXHRcdGlmKCh2bS50ZW1wRGF0ZVRpbWUuZW5kIDwgdm0udGVtcERhdGVUaW1lLnN0YXJ0KSAmJiB0YXJnZXQgPT0gJ3N0YXJ0Jykgdm0udGVtcERhdGVUaW1lLmVuZCA9IHZtLnRlbXBEYXRlVGltZS5zdGFydDtcblx0XHRpZih0YXJnZXQgPT0gJ3N0YXJ0Jykgdm0uZXZlbnQuZXZlbnRUaW1lcy5zdGFydCA9IHZtLmRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSk7XG5cdFx0aWYodGFyZ2V0ID09ICdlbmQnKSB2bS5ldmVudC5ldmVudFRpbWVzLmVuZCA9IHZtLmRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSk7XG5cdH1cblxuXHR2bS5ndWVzdHNBcmVJbnZpdGVkID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodm0uZXZlbnQuZ3Vlc3RMaXN0KSByZXR1cm4gdHJ1ZTtcblx0XHRlbHNlIHJldHVybiBmYWxzZTtcblx0fVxuXG5cdHZtLnZhbGlkYXRlR3Vlc3RFbWFpbCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vaWYgdGhlcmUgaXMgYW4gZW1haWwgYWRkcmVzc1xuXHRcdGlmKHZtLm5ld0d1ZXN0LmVtYWlsLmFkZHJlc3MpIHtcblx0XHRcdC8vY2hlY2sgdmFsaWRpdHlcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSsoPzpcXC5bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKSpAKD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1xcLikrW2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1wiLCBcIlwiKTtcblxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZtLm5ld0d1ZXN0LmVtYWlsLmFkZHJlc3MpKSB7XG5cdFx0XHRcdHZtLm5ld0d1ZXN0LmVtYWlsLnZhbGlkID0gdHJ1ZTtcblx0XHRcdFx0dm0ubmV3R3Vlc3QuZW1haWwuc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS5uZXdHdWVzdC5lbWFpbC52YWxpZCA9IGZhbHNlO1xuXHRcdFx0XHR2bS5uZXdHdWVzdC5lbWFpbC5zdHlsZSA9IHtjb2xvcjonJ307XG5cdFx0XHR9XHRcdFx0XG5cdFx0fVxuXHR9XG5cblx0dm0uaXNTZWN0aW9uQ29tcGxldGUgPSBmdW5jdGlvbigpIHtcblx0XHRmb3IoaT0wO2k8ODtpKyspIHtcblx0XHRcdCRsb2cuaW5mbyh2bS5yZXF1aXJlZElucHV0c1tpXSk7XG5cdFx0fVxuXHR9XG5cblx0dm0uc2F2ZUFuZEFkdmFuY2UgPSBmdW5jdGlvbigpIHtcblx0XHR2bS5ldmVudC4kc2F2ZSgpLnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2V2ZW50IHNhdmVkJyk7XG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdCRsb2cuaW5mbygnZXJyb3IhICcgKyBlcnJvcik7XG5cdFx0fSk7XG5cblx0XHQvL2NoZWNrIGZvciBjb21wbGV0ZW5lc1xuXHRcdHZtLmlzU2VjdGlvbkNvbXBsZXRlKCk7XG5cblx0XHRpZih2bS5tYW5hZ2VTZWN0aW9uc1sxXS5jb21wbGV0ZSA9PSB0cnVlICYmIHZtLm1hbmFnZVNlY3Rpb25zWzJdLmNvbXBsZXRlID09IHRydWUgJiYgdm0ubWFuYWdlU2VjdGlvbnNbM10uY29tcGxldGUgPT0gdHJ1ZSkge1xuXHRcdFx0dm0uZXZlbnRSZWRpcmVjdCgnL3VzZXJFdmVudHMnLCAkcm91dGVQYXJhbXMudWlkKTtcblx0XHR9IGVsc2UgaWYgKHZtLm1hbmFnZVNlY3Rpb25zWzFdLmFjdGl2ZSkgdm0uY2hhbmdlU2VjdGlvbigyKTtcblx0XHRlbHNlIGlmICh2bS5tYW5hZ2VTZWN0aW9uc1syXS5hY3RpdmUpIHZtLmNoYW5nZVNlY3Rpb24oMyk7XG5cdFx0ZWxzZSBpZiAodm0ubWFuYWdlU2VjdGlvbnNbM10uYWN0aXZlKSB2bS5jaGFuZ2VTZWN0aW9uKDEpO1xuXHR9XG5cblx0dm0uYWRkR3Vlc3RUb0hvc3RzTGlzdCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vZGVjbGFyZSBhbmQgaW5pdGlhbGl6ZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgdXNlcktleSA9IHV0ZjhfdG9fYjY0KHZtLm5ld0d1ZXN0LmVtYWlsLmFkZHJlc3MpO1xuXG5cdFx0Ly9pZiBlbWFpbCBpcyB2YWxpZCBhbmQgbmFtZSBleGlzdHNcblx0XHRpZiAodm0ubmV3R3Vlc3QubmFtZSAmJiB2bS5uZXdHdWVzdC5lbWFpbC52YWxpZCkge1xuXHRcdFx0Ly9pcyB0aGVyZSBhIGd1ZXN0IGxpc3QgYWxyZWFkeT8gSWYgbm90IGNyZWF0ZSBvbmVcblx0XHRcdGlmKCF2bS5ldmVudC5ndWVzdExpc3QpIHtcblx0XHRcdFx0dm0uZXZlbnQuZ3Vlc3RMaXN0ID0ge307XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2lmIHNvIGlzIHRoaXMgcGVyc29uIGFscmVhZHkgb24gdGhlIGxpc3Q/XG5cdFx0XHRcdHZhciBpID0wO1xuXHRcdFx0XHR3aGlsZSh2bS5ldmVudC5ndWVzdExpc3RbaV0pIHtcblx0XHRcdFx0XHRpZih2bS5ldmVudC5ndWVzdExpc3RbaV0uZW1haWwgPT0gYjY0X3RvX3V0ZjgodXNlcktleSkpIHtcblx0XHRcdFx0XHRcdCRsb2cuaW5mbygnVGhpcyBndWVzdCBpcyBhbHJlYWR5IG9uIHRoZSBsaXN0Jyk7XG5cdFx0XHRcdFx0XHRjbGVhbk5ld0d1ZXN0VmFyaWFibGUoKTtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aSsrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vaXMgdGhpcyBndWVzdCBhIHJlZ2lzdGVyZWQgdXNlcj9cblx0XHRcdGlmKHJlZ2lzdGVyZWRVc2Vyc1t1c2VyS2V5XSkge1xuXHRcdFx0XHQvL2lzIHRoZSByZWdpc3RlcmVkIHVzZXIgdGhlIGhvc3Q/XG5cdFx0XHRcdGlmKHJlZ2lzdGVyZWRVc2Vyc1t1c2VyS2V5XSA9PSAkcm91dGVQYXJhbXMudWlkKSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCd0cmllZCB0byByZWdpc3RlciB0aGUgaG9zdCcpO1xuXHRcdFx0XHRcdGNsZWFuTmV3R3Vlc3RWYXJpYWJsZSgpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHQvL2FkZCB0aGVtIHRvIHRoZSBhcHByb3ByaWF0ZSByZWdpc3RlcmVkIHVzZXJzJyBsaXN0IG9mIGV2ZW50IGludml0ZXNcblx0XHRcdFx0XHRpbnZpdGVBUmVnaXN0ZXJlZFVzZXIocmVnaXN0ZXJlZFVzZXJzW3VzZXJLZXldKTtcblxuXHRcdFx0XHRcdC8vYWRkIHRoZSBndWVzdCB0byB0aGUgbGlzdFxuXHRcdFx0XHRcdHZtLmV2ZW50Lmd1ZXN0TGlzdFtyZWdpc3RlcmVkVXNlcnNbdXNlcktleV1dID0ge1xuXHRcdFx0XHRcdFx0YXR0ZW5kaW5nOiBmYWxzZSwgXG5cdFx0XHRcdFx0XHRzdGF0dXM6J3BlbmRpbmcnLCBcblx0XHRcdFx0XHRcdG5hbWU6IHZtLm5ld0d1ZXN0Lm5hbWUsIFxuXHRcdFx0XHRcdFx0ZW1haWw6dm0ubmV3R3Vlc3QuZW1haWwuYWRkcmVzcyxcblx0XHRcdFx0XHR9O1x0XHRcdFx0XHRcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9hZGQgdGhlIGludml0ZSB0byB0aGUgbm9uLXJlZ2lzdGVyZWQgdXNlcnMgbGlzdCBvZiBldmVudCBpbnZpdGVzXG5cdFx0XHRcdGludml0ZUFuVW5yZWdpc3RlcmVkVXNlcih1c2VyS2V5KTtcblxuXHRcdFx0XHQvL2FkZCB0aGUgZ3Vlc3QgdG8gdGhlIGxpc3Rcblx0XHRcdFx0dm0uZXZlbnQuZ3Vlc3RMaXN0W3VzZXJLZXldID0ge1xuXHRcdFx0XHRcdFx0YXR0ZW5kaW5nOiBmYWxzZSwgXG5cdFx0XHRcdFx0XHRzdGF0dXM6J3BlbmRpbmcnLCBcblx0XHRcdFx0XHRcdG5hbWU6IHZtLm5ld0d1ZXN0Lm5hbWUsIFxuXHRcdFx0XHRcdFx0ZW1haWw6dm0ubmV3R3Vlc3QuZW1haWwuYWRkcmVzcyxcblx0XHRcdFx0fTtcblx0XHRcdH1cblxuXG5cdFx0XHQvL3NhdmUgdGhlIGV2ZW50XG5cdFx0XHR2bS5zYXZlRXZlbnQoKTtcblx0XHRcdC8vY2xlYXIgdGhlIHRlbXAgdmFsdWVzXG5cdFx0XHRjbGVhbk5ld0d1ZXN0VmFyaWFibGUoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JGxvZy5pbmZvKCd5b3UgZGlkblxcJ3QgZW50ZXIgYSBuYW1lIGFuZCBvciBlbWFpbCcpO1xuXHRcdH1cblx0fVxuXG5cdHZtLmd1ZXN0V2lsbEF0dGVuZCA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdFx0dmFyIGN1cnJlbnRVc2VyID0gcmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCdldmVudHMnKTtcblx0XHR2YXIgdG90YWxQZW5kaW5nSW52aXRhdGlvbnMgPSAwO1xuXHRcdHZhciByZW1vdmVBdHRlbmRpbmdVcGRhdGVkID0gZmFsc2U7XG5cdFx0XG5cdFx0Ly9jaGFuZ2UgYXR0ZW5kaW5nIHRvIHRydWUgaW4gaG9zdCdzIGd1ZXN0TGlzdFxuXHRcdHZtLmV2ZW50Lmd1ZXN0TGlzdFskcm91dGVQYXJhbXMudWlkXS5hdHRlbmRpbmcgPSByZXNwb25zZTtcblx0XHQvL2NoYW5nZSBzdGF0dXMgdG8gJ2F0dGVuZGluZycgaW4gaG9zdCdzIGd1ZXN0TGlzdFxuXHRcdHZtLmV2ZW50Lmd1ZXN0TGlzdFskcm91dGVQYXJhbXMudWlkXS5zdGF0dXMgPSAnYXR0ZW5kaW5nJztcblx0XHRcblx0XHQvL2dldCB0aGUgaW52aXRhdGlvbiBkZXRhaWxzXG5cdFx0Y3VycmVudFVzZXIuY2hpbGQoJ3BlbmRpbmcnKS5vbigndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFsYmVcblx0XHRcdHZhciBpbnZpdGF0aW9ucyA9IHNuYXBzaG90LnZhbCgpO1xuXHRcdFx0Ly9sb2cgc3RhcnRpbmcgdmFsdWVzXG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnMpO1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdKTtcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9uc1skcm91dGVQYXJhbXMuaG9zdElkXVskcm91dGVQYXJhbXMuZXZlbnRJZF0pO1xuXG5cdFx0XHR2YXIgdGhpc0ludml0YXRpb24gPSBpbnZpdGF0aW9uc1skcm91dGVQYXJhbXMuaG9zdElkXVskcm91dGVQYXJhbXMuZXZlbnRJZF07XG5cdFx0XHRcblx0XHRcdCRsb2cuaW5mbyh0aGlzSW52aXRhdGlvbik7XG5cdFx0XHRcblx0XHRcdC8vY2hlY2sgIyBvZiBpbml2aWF0aW9uc1xuXHRcdFx0Zm9yKGludml0YXRpb24gaW4gaW52aXRhdGlvbnMpIHtcblx0XHRcdFx0dG90YWxQZW5kaW5nSW52aXRhdGlvbnMrKztcblx0XHRcdH1cblxuXHRcdFx0Ly9yZXBvcnQgIyBvZiBpbnZpdGF0aW9uc1xuXHRcdFx0JGxvZy5pbmZvKFwidG90YWwgYXR0ZW5kaW5nOiBcIiArIHRvdGFsUGVuZGluZ0ludml0YXRpb25zKTtcblx0XHRcdFxuXHRcdFx0Ly9hZGQgdGhlIGV2ZW50IHRvIHRoZSBndWVzdCdzIGF0dGVuZGluZyBsaXN0XG5cdFx0XHRpZihyZXNwb25zZSkgY3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ob3N0SWQpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ldmVudElkKS5zZXQodGhpc0ludml0YXRpb24sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oZXJyb3IpO1xuXHRcdFx0fSk7XG5cblx0XHR9KTtcblxuXHRcdC8vaWYgdGhlIHVwZGF0ZWQgcGxhY2Vob2xkZXIgd2FzIG9uIHRoZSBhdHRlbmRpbmcgbGlzdCByZW1vdmUgaXRcblx0XHRjdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykub24oJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgYXR0ZW5kaW5nTGlzdCA9IHNuYXBzaG90LnZhbCgpO1xuXHRcdFx0XG5cdFx0XHQvL3JlcG9ydCBhY3Rpb25zXG5cdFx0XHQkbG9nLmluZm8oJ3RoaXMgaXMgdGhlIGF0dGVuZGluZyBsaXN0Jyk7XG5cdFx0XHQkbG9nLmluZm8oYXR0ZW5kaW5nTGlzdCk7XG5cdFx0XHRcblx0XHRcdC8vdGhyb3cgZmxhZyBmb3IgbGF0ZXJcblx0XHRcdGlmKGF0dGVuZGluZ0xpc3QudXBkYXRlZCkgcmVtb3ZlQXR0ZW5kaW5nVXBkYXRlZCA9IHRydWU7XG5cblx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0Ly9pZiB0aGVyIHdhcyBhbiBlcnJvciByZXBvcnQgaXRcblx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oZXJyb3IpO1xuXHRcdH0pO1xuXG5cdFx0Ly9pZiB0aGlzIGlzIHRoZSBsYXN0IHBlbmRpbmcgZXZlbnQgb24gdGhlIGd1ZXN0J3MgcGVuZGluZyBsaXN0LCBhZGQgdGhlIHVwZGF0ZWQgcGxhY2Vob2xkZXJcblx0XHRpZih0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucyA8IDIpIHtcblx0XHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xuXG5cdFx0XHQvL3JlcGxhY2Ugd2l0aCB1cGRhdGVkIGZpZWxkXG5cdFx0XHRjdXJyZW50VXNlci5jaGlsZCgncGVuZGluZycpLnVwZGF0ZSh7XG5cdFx0XHRcdHVwZGF0ZWQ6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oZXJyb3IpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0Ly9yZW1vdmUgdGhlIGV2ZW50IGZyb20gdGhlIGd1ZXN0J3MgcGVuZGluZyBsaXN0XG5cdFx0Y3VycmVudFVzZXIuY2hpbGQoJ3BlbmRpbmcnKS5jaGlsZCgkcm91dGVQYXJhbXMuaG9zdElkKS5yZW1vdmUoKTtcblxuXHRcdC8vaWYgdGhlcmUgd2FzIGFuIHVwZGF0ZWQgZmllbGQgaW4gYXR0ZW5kaW5nLCByZW1vdmUgaXRcblx0XHRpZihyZW1vdmVBdHRlbmRpbmdVcGRhdGVkKSB7XG5cdFx0XHQkbG9nLmluZm8oJ3JlbW92aW5nIHRoZSB1cGRhdGVkIHBsYWNlaG9sZGVyJyk7XG5cdFx0XHQvL2N1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5jaGlsZCgndXBkYXRlZCcpLnJlbW92ZSgpO1xuXHRcdH1cblxuXHRcdC8vc2F2ZSBjaGFuZ2VzXG5cdFx0dm0uZXZlbnQuJHNhdmUoKTtcblx0fVxuXG5cdHZtLnVwZGF0ZVVwZGF0ZWRQYXJhbSA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBjdXJyZW50VXNlciA9IHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS5jaGlsZCgnZXZlbnRzJyk7XG5cdFx0XG5cdFx0JGxvZy5pbmZvKCd1cGRhdGluZyB0aGUgcGFyYW0nKTtcblx0XHRjdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykub24oJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdCRsb2cuaW5mbyhzbmFwc2hvdC52YWwoKSk7XG5cdFx0fSk7XG5cdFx0Y3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLmNoaWxkKCd1cGRhdGVkJykucmVtb3ZlKCk7XG5cdH1cblxuXHR2bS5hZGRJbnZpdGF0aW9uVG9BdHRlbmRpbmcgPSBmdW5jdGlvbihyZXNwb25zZSkge1xuXHRcdHZhciBjdXJyZW50VXNlciA9IHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS5jaGlsZCgnZXZlbnRzJyk7XG5cdFx0dmFyIHRvdGFsUGVuZGluZ0ludml0YXRpb25zID0gMDtcblxuXHRcdC8vZ2V0IHRoZSBpbnZpdGF0aW9uIGRldGFpbHNcblx0XHRjdXJyZW50VXNlci5jaGlsZCgncGVuZGluZycpLm9uKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWxiZVxuXHRcdFx0dmFyIGludml0YXRpb25zID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHR2YXIgdGhpc0ludml0YXRpb24gPSBpbnZpdGF0aW9uc1skcm91dGVQYXJhbXMuaG9zdElkXVskcm91dGVQYXJhbXMuZXZlbnRJZF07XG5cdFx0XHRcblx0XHRcdC8vbG9nIHN0YXJ0aW5nIHZhbHVlc1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zKTtcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9uc1skcm91dGVQYXJhbXMuaG9zdElkXSk7XG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnNbJHJvdXRlUGFyYW1zLmhvc3RJZF1bJHJvdXRlUGFyYW1zLmV2ZW50SWRdKTtcblx0XHRcdFxuXHRcdFx0Ly9jaGVjayAjIG9mIGluaXZpYXRpb25zXG5cdFx0XHRmb3IoaW52aXRhdGlvbiBpbiBpbnZpdGF0aW9ucykge1xuXHRcdFx0XHR0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucysrO1xuXHRcdFx0fVxuXG5cdFx0XHQvL3JlcG9ydCAjIG9mIGludml0YXRpb25zXG5cdFx0XHQkbG9nLmluZm8oXCJ0b3RhbCBwZW5kaW5nIGludml0YXRpb25zOiBcIiArIHRvdGFsUGVuZGluZ0ludml0YXRpb25zKTtcblx0XHRcdFxuXHRcdFx0JGxvZy5pbmZvKHJlc3BvbnNlKTtcblx0XHRcdC8vYWRkIHRoZSBldmVudCB0byB0aGUgZ3Vlc3QncyBhdHRlbmRpbmcgbGlzdFxuXHRcdFx0aWYocmVzcG9uc2UpIGN1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5jaGlsZCgkcm91dGVQYXJhbXMuaG9zdElkKS5jaGlsZCgkcm91dGVQYXJhbXMuZXZlbnRJZCkuc2V0KHRoaXNJbnZpdGF0aW9uLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKGVycm9yKTtcblx0XHRcdH0pO1xuXG5cblxuXHRcdH0pO1xuXHR9XG5cblx0Ly9zdGFydCBydW5cblx0aW5pdCgpO1xufVxuIiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignR3Vlc3RFdmVudENvbnRyb2xsZXInLCBHdWVzdEV2ZW50Q29udHJvbGxlcik7XG5cbkd1ZXN0RXZlbnRDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBHdWVzdEV2ZW50Q29udHJvbGxlcigkbG9nKSB7XG5cdCRsb2cuaW5mbygnaW50byB0aGUgR3Vlc3RFdmVudENvbnRyb2xsZXInKTtcbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdIb3N0RXZlbnRDb250cm9sbGVyJywgSG9zdEV2ZW50Q29udHJvbGxlcik7XG5cbkhvc3RFdmVudENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnLCAnJHJvdXRlUGFyYW1zJywgJ3VzZXJEYXRhJywgJ3RyYWZmaWNWYWxldCcsICd2YWxpZGF0aW9uJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gSG9zdEV2ZW50Q29udHJvbGxlcigkc2NvcGUsICRsb2csICRyb3V0ZVBhcmFtcywgdXNlckRhdGEsIHRyYWZmaWNWYWxldCwgdmFsaWRhdGlvbikge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHRcblx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0dmFyIGhvc3RlZEV2ZW50U2hlcnBhID0gdHJhZmZpY1ZhbGV0O1xuXHR2YXIgdGhpc0V2ZW50TWFuYWdlciA9IHVzZXJEYXRhO1xuXHR2YXIgcmVxdWlybm1lbnRzRmFjdG9yeSA9IHZhbGlkYXRpb247XG5cblx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0dmFyIHBlcmNlbnRDb21wbGV0ZSA9IDA7XG5cblx0Ly92aWV3IG1vZGVsIHZhcmlhYmxlc1xuXHR2bS5hY3RpdmVTZWN0aW9uID0gMTtcblx0dm0udGVtcFRpbWUgPSB7c3RhcnQ6ICcnLCBlbmQ6ICcnLCBkdXJhdGlvbjonJ307XG5cdHZtLnByb2dyZXNzQmFyID0ge1xuXHRcdGNvbXBsZXRlOiB2bS5wZXJjZW50Q29tcGxldGUsXG5cdFx0c3R5bGU6IHtcblx0XHRcdHdpZHRoOiAodm0ucGVyY2VudENvbXBsZXRlICsgJyUnKVxuXHRcdH0sXG5cdFx0bWVzc2FnZTogKHZtLnBlcmNlbnRDb21wbGV0ZSArICclJylcblx0fVxuXHR2bS5hY3Rpb25CdG4gPSB7XG5cdFx0ZGl2OiB7XG5cdFx0XHRjbGFzczoge1xuXHRcdFx0XHQnY29sLXhzLTYnOiB0cnVlLFxuXHRcdFx0XHQnY29sLXNtLTYnOiB0cnVlLFxuXHRcdFx0fVxuXHRcdH0sXG5cdFx0YnRuOiB7XG5cdFx0XHRjbGFzczoge1xuXHRcdFx0XHQnYnRuJzogdHJ1ZSxcblx0XHRcdFx0J2J0bi1zdWNjZXNzJzogZmFsc2UsXG5cdFx0XHRcdCdidG4td2FybmluZyc6IHRydWUsXG5cdFx0XHRcdCdwdWxsLXJpZ2h0JzogdHJ1ZSxcblx0XHRcdH0sXG5cdFx0XHRtZXNzYWdlOiAnQWRkIEluZm8nXG5cdFx0fVxuXHR9XG5cdHZtLnRlbXBFdmVudCA9IHt9O1xuXHR2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGUgPSByZXF1aXJubWVudHNGYWN0b3J5LmdlbmVyYXRlRXZlbnRSZXF1aXJubWVudHMoKTtcblxuXHQvL2xvY2FsIG1ldGhvZHNcblx0ZnVuY3Rpb24gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKSB7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KHVuaXhUaW1lKSk7XG5cdH07XG5cblx0ZnVuY3Rpb24gZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKSB7XG5cdFx0cmV0dXJuIERhdGUucGFyc2UoZGF0ZVRpbWUpO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIGNhbGN1bGF0ZUR1cmF0aW9uKHN0YXJ0LCBlbmQpIHtcblx0XHRyZXR1cm4gKGRhdGVUaW1lVG9Vbml4VGltZShlbmQpIC0gZGF0ZVRpbWVUb1VuaXhUaW1lKHN0YXJ0KSkgLyAoNjAqMTAwMCk7XG5cdH1cblxuXHRmdW5jdGlvbiBjaGFuZ2VTYXZlQnRuKGRpcmVjdGlvbikge1xuXHRcdGlmKGRpcmVjdGlvbiA9PSAnb3BlbicpIHtcblx0XHRcdHZtLmFjdGlvbkJ0bi5idG4uY2xhc3NbJ2J0bi1zdWNjZXNzJ10gPSB0cnVlO1xuXHRcdFx0dm0uYWN0aW9uQnRuLmJ0bi5jbGFzc1snYnRuLXdhcm5pbmcnXSA9IGZhbHNlO1xuXHRcdFx0dm0uYWN0aW9uQnRuLmJ0bi5tZXNzYWdlID0gJ1NhdmUgRXZlbnQnO1xuXHRcdH0gZWxzZSBpZihkaXJlY3Rpb24gPT0gJ2Nsb3NlJykge1xuXHRcdFx0dm0uYWN0aW9uQnRuLmJ0bi5jbGFzc1snYnRuLXN1Y2Nlc3MnXSA9IGZhbHNlO1xuXHRcdFx0dm0uYWN0aW9uQnRuLmJ0bi5jbGFzc1snYnRuLXdhcm5pbmcnXSA9IHRydWU7XG5cdFx0XHR2bS5hY3Rpb25CdG4uYnRuLm1lc3NhZ2UgPSAnQWRkIEluZm8nO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIHVwZGF0ZVByb2dyZXNzQmFyKHVuaXRzKSB7XG5cdFx0cGVyY2VudENvbXBsZXRlICs9IHVuaXRzO1xuXHRcdHZtLnByb2dyZXNzQmFyLmNvbXBsZXRlID0gcGVyY2VudENvbXBsZXRlO1xuXHRcdHZtLnByb2dyZXNzQmFyLnN0eWxlLndpZHRoID0gKHBlcmNlbnRDb21wbGV0ZSArICclJyk7XG5cdFx0dm0ucHJvZ3Jlc3NCYXIubWVzc2FnZSA9IChwZXJjZW50Q29tcGxldGUgKyAnJScpO1xuXHRcdGlmKHBlcmNlbnRDb21wbGV0ZSA+IDk5KSBjaGFuZ2VTYXZlQnRuKCdvcGVuJyk7XHRcblx0XHRpZihwZXJjZW50Q29tcGxldGUgPCA5OSkgY2hhbmdlU2F2ZUJ0bignY2xvc2UnKTtcdFx0XG5cdH1cblxuXHRmdW5jdGlvbiBpbml0RXZlbnRUaW1lcygpIHtcblx0XHQvL2J1aWxkIG5ldyB0ZW1wIHRpbWVzXG5cdFx0dmFyIG5vdyA9IG5ldyBEYXRlKCk7XG5cblx0XHQvL3JvdW5kIHRvIHRoZSBuZWFyZXN0IGhvdXIsIGN1dCBvZmYgYW55dGhpbmcgc21hbGxlclxuXHRcdG5vdy5zZXRIb3Vycyhub3cuZ2V0SG91cnMoKSArIE1hdGgucm91bmQobm93LmdldE1pbnV0ZXMoKS82MCkpO1xuXHRcdG5vdy5zZXRNaW51dGVzKDApO1xuXHRcdG5vdy5zZXRTZWNvbmRzKDApO1xuXHRcdG5vdy5zZXRNaWxsaXNlY29uZHMoMCk7XG5cblx0XHR2bS50ZW1wVGltZS5zdGFydCA9IG5vdztcblx0XHR2bS50ZW1wVGltZS5lbmQgPSBub3c7XG5cblx0XHR2bS50ZW1wVGltZS5kdXJhdGlvbiA9IGNhbGN1bGF0ZUR1cmF0aW9uKHZtLnRlbXBUaW1lLnN0YXJ0LCB2bS50ZW1wVGltZS5lbmQpO1xuXHRcdFxuXHR9XG5cblx0ZnVuY3Rpb24gdXBkYXRlVGVtcFRpbWVGcm9tTW9kZWwoKSB7XG5cdFx0Ly9pZiBzdGFydCB0aW1lcyBhcmUgYXZhaWxhYmxlXG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodm0udGVtcEV2ZW50LmV2ZW50VGltZXMuc3RhcnQpKSB7XG5cdFx0XHQvL3NldCB0aGUgdGVtcFRpbWUgbW9kZWxcblx0XHRcdHZtLnRlbXBUaW1lLnN0YXJ0ID0gdW5peFRpbWVUb0RhdGVUaW1lKHZtLnRlbXBFdmVudC5ldmVudFRpbWVzLnN0YXJ0KTtcblx0XHRcdHZtLnRlbXBUaW1lLmVuZCA9IHVuaXhUaW1lVG9EYXRlVGltZSh2bS50ZW1wRXZlbnQuZXZlbnRUaW1lcy5lbmQpO1xuXHRcdH1cblxuXHR9XG5cblx0ZnVuY3Rpb24gaW5pdCgpIHtcblx0XHQvL2lmIHRoZXJlIGlzIGFuIGFjdGl2ZSBldmVudCwgbG9hZCBpdFxuXHRcdGlmKHRoaXNFdmVudE1hbmFnZXIudGhlcmVJc0FuQWN0aXZlRXZlbnQoKSkge1xuXHRcdFx0XG5cdFx0XHR2YXIgYWN0aXZlUGFja2FnZSA9IHRoaXNFdmVudE1hbmFnZXIuZ2V0QWN0aXZlRXZlbnQoKTtcblxuXHRcdFx0dm0ucHJvZ3Jlc3NCYXIgPSBhY3RpdmVQYWNrYWdlLnByb2dyZXNzQmFyO1xuXHRcdFx0cGVyY2VudENvbXBsZXRlID0gYWN0aXZlUGFja2FnZS5wZXJjZW50Q29tcGxldGVcblx0XHRcdHZtLnRlbXBFdmVudCA9IGFjdGl2ZVBhY2thZ2UuZXZlbnQ7XG5cdFx0XHR2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGUgPSBhY3RpdmVQYWNrYWdlLnJlcXVpcmVkRmllbGRzO1xuXG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vbG9hZCBldmVudCBkZXRhaWxzXG5cdFx0XHR0aGlzRXZlbnRNYW5hZ2VyLmxvYWRBbkV2ZW50UHJvZ3Jlc3NpdmVseSgkcm91dGVQYXJhbXMudWlkLCAkcm91dGVQYXJhbXMuZXZlbnRJZClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKHRoZUV2ZW50KSB7XG5cdFx0XHRcdC8vYWRkIHRoaXMgZXZlbnQgbW9kZWwgdG8gdGhlIHZpZXcgbW9kZWwgZXZlbnRcblx0XHRcdFx0dm0udGVtcEV2ZW50ID0gdGhlRXZlbnQ7XG5cblx0XHRcdFx0Ly91cGRhdGUgdGVtcFRpbWVcblx0XHRcdFx0dXBkYXRlVGVtcFRpbWVGcm9tTW9kZWwoKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0JGxvZygndGhlIGVycm9yIGlzOiAnICsgZXJyb3IpO1xuXHRcdFx0fSlcblx0XHR9XG5cblx0XHQvL2xvYWQgc3BlY2lmaWVkIHNlY3Rpb25cblx0XHR2bS5hY3RpdmVTZWN0aW9uID0gcGFyc2VJbnQoJHJvdXRlUGFyYW1zLnNlY3Rpb24pO1xuXHRcdC8vc2V0IHRlbXBUaW1lc1xuXHRcdGluaXRFdmVudFRpbWVzKCk7XG5cdH1cblxuXHQvL3ZpZXcgbW9kZWwgbWV0aG9kc1xuXHR2bS5mb3JtYXREdXJhdGlvbiA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vY2FsYyBkdXJhdGlvblxuXHRcdHZtLnRlbXBUaW1lLmR1cmF0aW9uID0gY2FsY3VsYXRlRHVyYXRpb24odm0udGVtcFRpbWUuc3RhcnQsIHZtLnRlbXBUaW1lLmVuZCk7XG5cdFx0XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgaG91cnMgPSBNYXRoLmZsb29yKHZtLnRlbXBUaW1lLmR1cmF0aW9uLyg2MCkpO1xuXHRcdHZhciBtaW4gPSB2bS50ZW1wVGltZS5kdXJhdGlvbiAlIDYwO1xuXHRcdHZhciBmcmFjdGlvbiA9IChNYXRoLnJvdW5kKG1pbi8xNSkvNCk7XG5cblx0XHRyZXR1cm4gKGhvdXJzK2ZyYWN0aW9uKSArICcgaCc7XG5cdH1cblxuXHR2bS52YWxpZGF0ZVRpbWUgPSBmdW5jdGlvbihzdGFydE9yRW5kKSB7XHRcblxuXHRcdGlmKHZtLnRlbXBUaW1lLmR1cmF0aW9uID4gMjQpIHZtLnNldHRpbmdUZW1wU3RhcnQoKTtcblxuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIHRpbWVzID0ge1xuXHRcdFx0J2V2ZW50U3RhcnQnOiB2bS50ZW1wVGltZS5zdGFydCxcblx0XHRcdCdldmVudEVuZCc6IHZtLnRlbXBUaW1lLmVuZFxuXHRcdH07XG5cblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh0aW1lc1tzdGFydE9yRW5kXSkgJiYgdGltZXNbc3RhcnRPckVuZF0gIT0gJycgJiYgdm0udGVtcFRpbWUuZHVyYXRpb24gPiAwKSB7XG5cdFx0XHRpZih2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbc3RhcnRPckVuZF0uY29tcGxldGVkID09IGZhbHNlKSB1cGRhdGVQcm9ncmVzc0JhcigxMCk7XG5cdFx0XHR2bS50ZW1wRXZlbnQuZXZlbnRUaW1lcy5zdGFydCA9IGRhdGVUaW1lVG9Vbml4VGltZSh2bS50ZW1wVGltZS5zdGFydCk7XG5cdFx0XHR2bS50ZW1wRXZlbnQuZXZlbnRUaW1lcy5lbmQgPSBkYXRlVGltZVRvVW5peFRpbWUodm0udGVtcFRpbWUuZW5kKTtcblx0XHRcdHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtzdGFydE9yRW5kXS5jb21wbGV0ZWQgPSB0cnVlO1xuXHRcdFx0dm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlW3N0YXJ0T3JFbmRdLnJvdy5jbGFzc1snaGFzLXN1Y2Nlc3MnXSA9IHRydWU7XG5cdFx0XHR2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbc3RhcnRPckVuZF0ucm93LmNsYXNzWydoYXMtZmVlZGJhY2snXSA9IHRydWU7XG5cdFx0XHR2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbc3RhcnRPckVuZF0ucm93LmNsYXNzWydoYXMtZXJyb3InXSA9IGZhbHNlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpZih2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbc3RhcnRPckVuZF0uY29tcGxldGVkID09IHRydWUpIHVwZGF0ZVByb2dyZXNzQmFyKC0xMCk7XG5cdFx0XHR2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbc3RhcnRPckVuZF0uY29tcGxldGVkID0gZmFsc2U7XG5cdFx0XHR2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbc3RhcnRPckVuZF0ucm93LmNsYXNzWydoYXMtc3VjY2VzcyddID0gZmFsc2U7XG5cdFx0XHR2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbc3RhcnRPckVuZF0ucm93LmNsYXNzWydoYXMtZmVlZGJhY2snXSA9IGZhbHNlO1xuXHRcdFx0dm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlW3N0YXJ0T3JFbmRdLnJvdy5jbGFzc1snaGFzLWVycm9yJ10gPSB0cnVlO1xuXHRcdH1cblx0fVxuXG5cdHZtLnNldHRpbmdUZW1wU3RhcnQgPSBmdW5jdGlvbigpIHtcblxuXHRcdGlmKChkYXRlVGltZVRvVW5peFRpbWUodm0udGVtcFRpbWUuZW5kKSA8PSBkYXRlVGltZVRvVW5peFRpbWUodm0udGVtcFRpbWUuc3RhcnQpKSB8fCBcblx0XHRcdChkYXRlVGltZVRvVW5peFRpbWUodm0udGVtcFRpbWUuZW5kKSAtIGRhdGVUaW1lVG9Vbml4VGltZSh2bS50ZW1wVGltZS5zdGFydCkgPiAoMTAwMCo2MCo2MCoyNCkpKSB7XG5cdFx0XHRvbGRTdGFydCA9IGRhdGVUaW1lVG9Vbml4VGltZSh2bS50ZW1wVGltZS5zdGFydCk7XG5cdFx0XHRvbGRFbmQgPSBkYXRlVGltZVRvVW5peFRpbWUodm0udGVtcFRpbWUuZW5kKTtcblxuXHRcdFx0bmV3RW5kID0gb2xkU3RhcnQgKyAoNjAqNjAqMTAwMCk7XG5cblx0XHRcdHZtLnRlbXBUaW1lLmVuZCA9IHVuaXhUaW1lVG9EYXRlVGltZShuZXdFbmQpO1xuXHRcdH1cblx0XHRcbiBcdH1cblxuXHR2bS5zZXR0aW5nVGVtcEVuZCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vc2V0IHZhbGlkIGVuZCB3aXRoIHN0YXJ0XG5cdFx0aWYodm0udGVtcFRpbWUuc3RhcnQgPiB2bS50ZW1wVGltZS5lbmQpIHZtLnRlbXBUaW1lLnN0YXJ0ID0gdm0udGVtcFRpbWUuZW5kO1xuXG5cdFx0Ly92YWxpZGF0ZVxuXHRcdHZtLnZhbGlkYXRlVGltZSgnZXZlbnRFbmQnKTtcblxuXHRcdC8vY2FsYyBkdXJhdGlvblxuXHRcdHZtLnRlbXBUaW1lLmR1cmF0aW9uID0gY2FsY3VsYXRlRHVyYXRpb24odm0udGVtcFRpbWUuc3RhcnQsIHZtLnRlbXBUaW1lLmVuZCk7XG5cblx0XHRcblx0fVxuXG5cdHZtLmJhY2tUb1VzZXJFdmVudHMgPSBmdW5jdGlvbigpIHtcblx0XHQvL2lmIHRoZSBldmVudCBpcyBjb21wbGV0ZWQsIHNhdmUgdG8gdGhlIGRiXG5cdFx0Ly9jaGVjayB0aGF0IHRoZSBldmVudCBpcyBjb21wbGV0ZVxuXHRcdGlmKHBlcmNlbnRDb21wbGV0ZSA+IDk5KSB7XG5cdFx0XHQvL2lmIHNvIHNhdmUgdGhlIGV2ZW50IGxvY2FsbHlcblx0XHRcdHRoaXNFdmVudE1hbmFnZXIuc2F2ZU5ld0hvc3RpbmdFdmVudCgnaG9zdGluZycsIHZtLnRlbXBFdmVudCk7XG5cdFx0XHQvL3RoZW4gc3luYyB0aGUgbG9jYWwgd2l0aCB0aGUgZGJcblx0XHRcdHRoaXNFdmVudE1hbmFnZXIuc2V0UmVtb3RlRXZlbnRzRnJvbUxvY2FsKCdob3N0aW5nJywgdm0udGVtcEV2ZW50KVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24oc3VjY2VzTWVzc2FnZSkge1xuXHRcdFx0XHQkbG9nLmluZm8oc3VjY2VzTWVzc2FnZSk7XG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9NZXNzYWdlKSB7XG5cdFx0XHRcdCRsb2cuaW5mbyhlcnJvTWVzc2FnZSk7XG5cdFx0XHR9KVxuXHRcdH1cblxuXHRcdC8vaWYgbm90IGNvbXBsZXRlZCwgZGVsZXRlIHRoZSBldmVudCBlbnRpcmVseVxuXHRcdC8vdGhpc0V2ZW50TWFuYWdlci5yZW1vdmVJbmNvbXBsZXRlRXZlbnRGcm9tREIodm0udGVtcEV2ZW50LmlkKTtcblxuXHRcdC8vc2VuZCB0aGUgdXNlciBiYWNrIHRvIHRoZSBwYWdlIHRoZXkgY2FtZSBmcm9tXG5cdFx0aG9zdGVkRXZlbnRTaGVycGEucmVkaXJlY3RUbygnL3VzZXJFdmVudHMnLCAkcm91dGVQYXJhbXMudWlkKTtcblx0fVxuXG5cdHZtLnNlY3Rpb25CYWNrID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9zYXZlIHRlbXAgZXZlbnQgcGFja2FnZVxuXHRcdHZhciBldmVudFBhY2thZ2UgPSB7XG5cdFx0XHRldmVudDogdm0udGVtcEV2ZW50LFxuXHRcdFx0cHJvZ3Jlc3NCYXI6IHZtLnByb2dyZXNzQmFyLFxuXHRcdFx0cGVyY2VudENvbXBsZXRlOiBwZXJjZW50Q29tcGxldGUsXG5cdFx0XHRyZXF1aXJlZEZpZWxkczogdm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlXG5cdFx0fTtcblxuXHRcdCRsb2cuaW5mbyhldmVudFBhY2thZ2UpO1xuXG5cdFx0dGhpc0V2ZW50TWFuYWdlci5zZXRBY3RpdmVFdmVudChldmVudFBhY2thZ2UpXG5cblx0XHQvL21vdmUgYmFja1xuXHRcdHRhcmdldFNlY3Rpb24gPSB2bS5hY3RpdmVTZWN0aW9uIC0gMTtcblx0XHRob3N0ZWRFdmVudFNoZXJwYS5yZWRpcmVjdFRvKCcvZXZlbnQvaG9zdCcsICRyb3V0ZVBhcmFtcy5ldmVudElkLCAkcm91dGVQYXJhbXMudWlkLCB0YXJnZXRTZWN0aW9uKTtcblx0fVx0XG5cblx0dm0uc2VjdGlvbkZvcndhcmQgPSBmdW5jdGlvbigpIHtcblx0XHQvL2lmIGFsbCByZXF1aXJlZCBmaWVsZHMgaGF2ZSBiZWVuIGVudGVyZWRcblx0XHQvL3NhdmUgdGVtcCBldmVudCBwYWNrYWdlXG5cdFx0dmFyIGV2ZW50UGFja2FnZSA9IHtcblx0XHRcdGV2ZW50OiB2bS50ZW1wRXZlbnQsXG5cdFx0XHRwcm9ncmVzc0Jhcjogdm0ucHJvZ3Jlc3NCYXIsXG5cdFx0XHRwZXJjZW50Q29tcGxldGU6IHBlcmNlbnRDb21wbGV0ZSxcblx0XHRcdHJlcXVpcmVkRmllbGRzOiB2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVcblx0XHR9O1xuXG5cdFx0JGxvZy5pbmZvKGV2ZW50UGFja2FnZSk7XG5cblx0XHR0aGlzRXZlbnRNYW5hZ2VyLnNldEFjdGl2ZUV2ZW50KGV2ZW50UGFja2FnZSlcblxuXHRcdC8vbW92ZSBmb3J3YXJkXG5cdFx0dGFyZ2V0U2VjdGlvbiA9IHZtLmFjdGl2ZVNlY3Rpb24gKyAxO1xuXHRcdGhvc3RlZEV2ZW50U2hlcnBhLnJlZGlyZWN0VG8oJy9ldmVudC9ob3N0JywgJHJvdXRlUGFyYW1zLmV2ZW50SWQsICRyb3V0ZVBhcmFtcy51aWQsIHRhcmdldFNlY3Rpb24pO1xuXHR9XG5cblx0dm0udmVyaWZ5UmVxdWlyZWQgPSBmdW5jdGlvbihmaWVsZCwgdmFsdWUpIHtcblx0XG5cdFx0Ly9jaGVjayB2YWxpZGl0eVxuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSAmJiB2YWx1ZSAhPSAnJykge1xuXHRcdFx0aWYodm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlW2ZpZWxkXS5jb21wbGV0ZWQgPT0gZmFsc2UpIHtcblx0XHRcdFx0dXBkYXRlUHJvZ3Jlc3NCYXIoMTApO1xuXHRcdFx0fVxuXHRcdFx0dm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlW2ZpZWxkXS5jb21wbGV0ZWQgPSB0cnVlO1xuXHRcdFx0dm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlW2ZpZWxkXS5yb3cuY2xhc3NbJ2hhcy1zdWNjZXNzJ10gPSB0cnVlO1xuXHRcdFx0dm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlW2ZpZWxkXS5yb3cuY2xhc3NbJ2hhcy1mZWVkYmFjayddID0gdHJ1ZTtcblx0XHRcdHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtmaWVsZF0ucm93LmNsYXNzWydoYXMtZXJyb3InXSA9IGZhbHNlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpZih2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbZmllbGRdLmNvbXBsZXRlZCA9PSB0cnVlKSB7XG5cdFx0XHRcdHVwZGF0ZVByb2dyZXNzQmFyKC0xMCk7XG5cdFx0XHR9XG5cdFx0XHR2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbZmllbGRdLmNvbXBsZXRlZCA9IGZhbHNlO1xuXHRcdFx0dm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlW2ZpZWxkXS5yb3cuY2xhc3NbJ2hhcy1zdWNjZXNzJ10gPSBmYWxzZTtcblx0XHRcdHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtmaWVsZF0ucm93LmNsYXNzWydoYXMtZmVlZGJhY2snXSA9IGZhbHNlO1xuXHRcdFx0dm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlW2ZpZWxkXS5yb3cuY2xhc3NbJ2hhcy1lcnJvciddID0gdHJ1ZTtcblx0XHR9XG5cdFx0Ly9maWVsZCB1cGRhdGVkXG5cdFx0XG5cdH1cblxuXHR2bS5zYXZlRXZlbnRUb0RCID0gZnVuY3Rpb24oKSB7XG5cdFx0JGxvZy5pbmZvKHZtLnRlbXBFdmVudCk7XG5cdFx0Ly9jaGVjayB0aGF0IHRoZSBldmVudCBpcyBjb21wbGV0ZVxuXHRcdGlmKHBlcmNlbnRDb21wbGV0ZSA+IDk5KSB7XG5cdFx0XHQvL2lmIHNvIHNhdmUgdGhlIGV2ZW50IGxvY2FsbHlcblx0XHRcdHRoaXNFdmVudE1hbmFnZXIuc2F2ZU5ld0hvc3RpbmdFdmVudCgnaG9zdGluZycsIHZtLnRlbXBFdmVudCk7XG5cdFx0XHQvL3RoZW4gc3luYyB0aGUgbG9jYWwgd2l0aCB0aGUgZGJcblx0XHRcdHRoaXNFdmVudE1hbmFnZXIuc2V0UmVtb3RlRXZlbnRzRnJvbUxvY2FsKCRyb3V0ZVBhcmFtcy51aWQsIHZtLnRlbXBFdmVudClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKHN1Y2Nlc01lc3NhZ2UpIHtcblx0XHRcdFx0JGxvZy5pbmZvKHN1Y2Nlc01lc3NhZ2UpO1xuXG5cdFx0XHRcdC8vaW4gc3VjY2VzIG1ha2Ugc3VyZSB0byByZW1vdmUgdGhlIHVwZGF0ZWQgZmllbGRcblx0XHRcdFx0dGhpc0V2ZW50TWFuYWdlci5jbGVhbkRCRXZlbnRzQ2F0ZWdvcnkoJ2hvc3RpbmcnKVxuXHRcdFx0XHQudGhlbihmdW5jdGlvbihzdWNjZXNNZXNzYWdlKSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKHN1Y2Nlc01lc3NhZ2UpO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb01lc3NhZ2UpIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oZXJyb01lc3NhZ2UpO1xuXHRcdFx0XHR9KVxuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvTWVzc2FnZSkge1xuXHRcdFx0XHQkbG9nLmluZm8oZXJyb01lc3NhZ2UpO1xuXHRcdFx0fSlcblxuXHRcdFx0Ly9yZWRpcmVjdCBiYWNrIHRvIGV2ZW50c1xuXHRcdFx0aG9zdGVkRXZlbnRTaGVycGEucmVkaXJlY3RUbygnL3VzZXJFdmVudHMnLCAkcm91dGVQYXJhbXMudWlkKTtcblx0XHR9XG5cdFx0XG5cdH1cblxuXHQvL3dhdGNoZXJzXG5cdCRzY29wZS4kd2F0Y2goJ3ZtLnRlbXBFdmVudC5ndWVzdExpc3QnLCBmdW5jdGlvbihjdXJyZW50LCBvcmlnaW5hbCkge1xuXHRcdC8vaWYgYSBndWVzdCBpcyBhZGRlZCB0byB0aGUgbGlzdCB1cGRhdGUgdGhlIHByb2dyZXNzIGJhclxuICAgICAgICBpZihhbmd1bGFyLmlzT2JqZWN0KHZtLnRlbXBFdmVudC5ndWVzdExpc3QpKSB7XG4gICAgICAgIFx0dXBkYXRlUHJvZ3Jlc3NCYXIoMTApO1xuICAgICAgICB9XG5cdH0pO1xuXG5cdC8vdGFrZSBhY3Rpb25cblx0aW5pdCgpO1xuXG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignTGFuZGluZ1BhZ2VDb250cm9sbGVyJywgTGFuZGluZ1BhZ2VDb250cm9sbGVyKTtcblxuTGFuZGluZ1BhZ2VDb250cm9sbGVyLiRpbmplY3QgPSBbJ3RyYWZmaWNWYWxldCddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIExhbmRpbmdQYWdlQ29udHJvbGxlcih0cmFmZmljVmFsZXQpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGxhbmRpbmdTaGVycGEgPSB0cmFmZmljVmFsZXQ7XG5cblx0Ly9sb2NhbCBtZXRob2RzXG5cdC8vdm0gbWV0aG9kc1xuXHR2bS5jcmVhdGVBbkFjY291bnQgPSBmdW5jdGlvbigpIHtcblx0XHRsYW5kaW5nU2hlcnBhLnJlZGlyZWN0VG8oJy9zaWdudXAnKTtcblx0fVxuXG5cdHZtLmxvZ2luVXNlciA9IGZ1bmN0aW9uKCkge1xuXHRcdGxhbmRpbmdTaGVycGEucmVkaXJlY3RUbygnL2xvZ2luJyk7XG5cdH1cblxuXHQvL3dhdGNoZXJzXG5cdC8vYWN0aW9uXG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignTWFpbkNvbnRyb2xsZXInLCBNYWluQ29udHJvbGxlcik7XG5cbk1haW5Db250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJGxvY2F0aW9uJywgJyRkb2N1bWVudCcsICckd2luZG93J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gTWFpbkNvbnRyb2xsZXIoJGxvZywgJGxvY2F0aW9uLCAkZG9jdW1lbnQsICR3aW5kb3cpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTsgXG5cblx0ZnVuY3Rpb24gcmVzaXplQkdJbWFnZSgpIHtcblx0XHR2YXIgYm9keSA9IGFuZ3VsYXIuZWxlbWVudCgkZG9jdW1lbnQpO1xuXHRcdCRkb2N1bWVudC5jc3MoJ2hpZ2h0JywgJHdpbmRvdy5vdXRlckhlaWdodClcblx0fVxuXG5cdHZtLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xuXHRcdGFsZXJ0KCdsb2dnaW5nIHlvdSBvdXQhJyk7XG5cdFx0cmVmLnVuYXV0aCgpO1xuXHRcdCRsb2NhdGlvbi5wYXRoKCcvJyk7XG5cdH07XG5cblx0YW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cdFx0Ly9GYXN0Q2xpY2suYXR0YWNoKCRkb2N1bWVudC5ib2R5KTtcblx0XHRyZXNpemVCR0ltYWdlKCk7XG5cdH0pXG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignTmV3VXNlclNpZ25VcENvbnRyb2xsZXInLCBOZXdVc2VyU2lnblVwQ29udHJvbGxlcik7XG5cbk5ld1VzZXJTaWduVXBDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJywgJ3ZhbGlkYXRpb24nLCAnYmFja2VuZFNlcnZpY2VzJywgJ3RyYWZmaWNWYWxldCcsICd1c2VyRGF0YSddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIE5ld1VzZXJTaWduVXBDb250cm9sbGVyKCRzY29wZSwgJGxvZywgdmFsaWRhdGlvbiwgYmFja2VuZFNlcnZpY2VzLCB0cmFmZmljVmFsZXQsIHVzZXJEYXRhKSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cblx0Ly9kZWZpbmUgdm0gaW5wdXQgdmFyaWFibGVzXG5cdHZtLmlucHV0cyA9IHtcblx0XHRuZXdOYW1lOiAnJyxcblx0XHRuZXdFbWFpbDogJycsXG5cdFx0bmV3UGFzc3dvcmQ6ICcnLFxuXHRcdHJlcXVpcmVkRmllbGRzRGVmaW5lZDogZmFsc2Vcblx0fVxuXHR2bS5lcnJvcnMgPSB7XG5cdFx0bmFtZTogJycsXG5cdFx0ZW1haWw6ICcnLFxuXHRcdHBhc3N3b3JkOiBmYWxzZSxcblx0XHRwYXNzZXNBbGxUZXN0czogZmFsc2Vcblx0fVxuXHR2bS5wYXNzUmVxcyA9IHtcblx0XHQwOiB7IGlkOicnLCByZXE6J0lzIGF0IGxlYXN0IDE2IGNoYXJhY3RlcnMgbG9uZycsIGZ1bGZpbGxlZDpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9fSxcblx0XHQxOiB7IGlkOicnLCByZXE6J0lzIG5vIGxvbmdlciB0aGFuIDEwMCBjaGFyYWN0ZXJzJywgZnVsZmlsbGVkOmZhbHNlLCAnc3R5bGUnOntjb2xvcjoncmVkJ30gfSxcblx0XHQyOiB7IGlkOicnLCByZXE6J0NvbnRhaW5zIGF0IGxlYXN0IG9uZSBsb3dlcmNhc2UgbGV0dGVyJywgZnVsZmlsbGVkOmZhbHNlLCAnc3R5bGUnOntjb2xvcjoncmVkJ30gfSxcblx0XHQzOiB7IGlkOicnLCByZXE6J0NvbnRhaW5zIGF0IGxlYXN0IG9uZSB1cHBlcmNhc2UgbGV0dGVyJywgZnVsZmlsbGVkOmZhbHNlLCAnc3R5bGUnOntjb2xvcjoncmVkJ30gfSxcblx0XHQ0OiB7IGlkOicnLCByZXE6J0NvbnRhaW5zIGF0IGxlYXN0IG9uZSBudW1iZXInLCBmdWxmaWxsZWQ6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOidyZWQnfSB9LFxuXHRcdDU6IHsgaWQ6JycsIHJlcTonQ29udGFpbnMgYXQgbGVhc3Qgb25lIHJlcXVpcmVkIHN5bWJvbCAoXFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqKScsIGZ1bGZpbGxlZDpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9IH0sXG5cdFx0NjogeyBpZDonJywgcmVxOlwiRG9lc24ndCBoYXZlIGFueSBpbGxlZ2FsIGNoYXJhY3RlcnNcIiwgZnVsZmlsbGVkOnRydWUsICdzdHlsZSc6e2NvbG9yOidyZWQnfSB9XG5cdH1cblx0dm0uc2hvd1JlcXNCb3ggPSBmYWxzZTtcblxuXHQvL2RlZmluZSByZXF1aXJlZCBmaWVsZCBjb25zdHJhaW50c1xuXHR2YXIgc2lnbnVwVmFsaWRhdGlvbiA9IHZhbGlkYXRpb247XG5cblx0Ly9kZWZpbmUgY29udHJvbGxlciBtZXRob2RzXG5cdGZ1bmN0aW9uIHZlcmlmeVJlcXVpcm5tZW50cygpIHtcblx0XHRpZih2bS5lcnJvcnMubmFtZSA9PSAnJyAmJiB2bS5lcnJvcnMuZW1haWwgPT0gJycgJiYgIXZtLmVycm9ycy5wYXNzd29yZCkgdm0uZXJyb3JzLnBhc3Nlc0FsbFRlc3RzID0gdHJ1ZTtcblx0XHRlbHNlIHZtLmVycm9ycy5wYXNzZXNBbGxUZXN0cyA9IGZhbHNlO1xuXG5cdFx0aWYoIGFuZ3VsYXIuaXNEZWZpbmVkKHZtLmlucHV0cy5uZXdOYW1lKSAmJiB2bS5pbnB1dHMubmV3TmFtZSAhPT0gJycgJiZcblx0XHRcdGFuZ3VsYXIuaXNEZWZpbmVkKHZtLmlucHV0cy5uZXdFbWFpbCkgJiYgdm0uaW5wdXRzLm5ld0VtYWlsICE9PSAnJyAmJlxuXHRcdFx0YW5ndWxhci5pc0RlZmluZWQodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKSAmJiB2bS5pbnB1dHMubmV3UGFzc3dvcmQgIT09ICcnKSBcblx0XHRcdFx0dm0uaW5wdXRzLnJlcXVpcmVkRmllbGRzRGVmaW5lZCA9IHRydWU7XG5cdFx0ZWxzZSB2bS5pbnB1dHMucmVxdWlyZWRGaWVsZHNEZWZpbmVkID0gZmFsc2U7XG5cdH1cblxuXHQvL2RlZmluZSB2bSBhY2Nlc3NpYmxlIG1ldGhvZHNcblx0dm0uY2hlY2tOZXdOYW1lID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZVxuXHRcdHZhciBlcnJvcnMgPSBbXTtcblx0XHR2YXIgaGFzTmFtZSA9IHNpZ251cFZhbGlkYXRpb24ucmVxdWlyZWQodm0uaW5wdXRzLm5ld05hbWUpO1xuXHRcdHZhciBsb25nRW5vdWdoID0gc2lnbnVwVmFsaWRhdGlvbi5taW5OYW1lTGVuZ3RoKHZtLmlucHV0cy5uZXdOYW1lKVxuXHRcdFxuXHRcdC8vbG9nIGVycm9yc1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGhhc05hbWUpKSBlcnJvcnMucHVzaChoYXNOYW1lKTtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChsb25nRW5vdWdoKSkgZXJyb3JzLnB1c2gobG9uZ0Vub3VnaCk7XG5cblx0XHQvL3VwZGF0ZSB0aGUgZXJyb3JzIG1vZGVsXG5cdFx0aWYoZXJyb3JzLmxlbmd0aCA+IDApIHZtLmVycm9ycy5uYW1lID0gZXJyb3JzLmpvaW4oJywgJyk7XG5cdFx0ZWxzZSB2bS5lcnJvcnMubmFtZSA9ICcnO1xuXG5cdFx0dmVyaWZ5UmVxdWlybm1lbnRzKCk7XG5cdH1cblxuXHR2bS5jaGVja05ld0VtYWlsID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZVxuXHRcdHZhciBlcnJvcnMgPSBbXTtcblx0XHR2YXIgaGFzRW1haWwgPSBzaWdudXBWYWxpZGF0aW9uLnJlcXVpcmVkKHZtLmlucHV0cy5uZXdFbWFpbCk7XG5cdFx0dmFyIGlzQW5FbWFpbCA9IHNpZ251cFZhbGlkYXRpb24uZW1haWwodm0uaW5wdXRzLm5ld0VtYWlsKTtcblx0XHRcblx0XHQvL2xvZyBlcnJvcnNcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChoYXNFbWFpbCkpIGVycm9ycy5wdXNoKGhhc0VtYWlsKTtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChpc0FuRW1haWwpKSBlcnJvcnMucHVzaChpc0FuRW1haWwpO1xuXG5cdFx0Ly91cGRhdGUgdGhlIGVycm9ycyBtb2RlbFxuXHRcdGlmKGVycm9ycy5sZW5ndGggPiAwKSB2bS5lcnJvcnMuZW1haWwgPSBlcnJvcnMuam9pbignLCAnKTtcblx0XHRlbHNlIHZtLmVycm9ycy5lbWFpbCA9ICcnO1xuXG5cdFx0dmVyaWZ5UmVxdWlybm1lbnRzKCk7XG5cdH1cblxuXHR2bS5jaGVja05ld1Bhc3N3b3JkID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9mbGlwIG9uIHJlcXMgYm94XG5cdFx0dm0uc2hvd1JlcXNCb3ggPSB0cnVlO1xuXG5cdFx0Ly9sb2NhbCB2YXJpYWJsZVxuXHRcdHZhciBlcnJvcnMgPSBbXTtcblx0XHR2YXIgaGFzUGFzc3dvcmQgPSBzaWdudXBWYWxpZGF0aW9uLnJlcXVpcmVkKHZtLmlucHV0cy5uZXdQYXNzd29yZCk7XG5cdFx0dmFyIHNwZWNpZmljUmVxcyA9IFtcblx0XHRcdHNpZ251cFZhbGlkYXRpb24ubWluUGFzc0xlbmd0aCh2bS5pbnB1dHMubmV3UGFzc3dvcmQpLFxuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5tYXhQYXNzTGVuZ3RoKHZtLmlucHV0cy5uZXdQYXNzd29yZCksXG5cdFx0XHRzaWdudXBWYWxpZGF0aW9uLmF0TGVhc3RPbmVMb3dlcmNhc2Uodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKSxcblx0XHRcdHNpZ251cFZhbGlkYXRpb24uYXRMZWFzdE9uZVVwcGVyY2FzZSh2bS5pbnB1dHMubmV3UGFzc3dvcmQpLFxuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5hdExlYXN0T25lTnVtYmVyKHZtLmlucHV0cy5uZXdQYXNzd29yZCksXG5cdFx0XHRzaWdudXBWYWxpZGF0aW9uLmF0TGVhc3RPbmVTeW1ib2wodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKSxcblx0XHRcdHNpZ251cFZhbGlkYXRpb24uaWxsZWdhbENoYXJhY3Rlcih2bS5pbnB1dHMubmV3UGFzc3dvcmQpXG5cdFx0XTtcblxuXHRcdC8vbG9nIGVycm9yc1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGhhc1Bhc3N3b3JkKSkgZXJyb3JzLnB1c2goaGFzUGFzc3dvcmQpO1xuXG5cdFx0Ly91cGRhdGUgdGhlIGVycm9ycyBtb2RlbFxuXHRcdGlmKGVycm9ycy5sZW5ndGggPiAwKSB2bS5lcnJvcnMucGFzc3dvcmQgPSBlcnJvcnMuam9pbignLCAnKTtcblx0XHRlbHNlIHZtLmVycm9ycy5lbWFpbCA9ICcnO1xuXG5cdFx0Ly91cGRhdGUgcmVxcyBtb2RlbFxuXHRcdHZhciBhbnlFcnJvcnMgPSBmYWxzZTtcblx0XHRmb3IoaT0wOyBpPDc7IGkrKykge1xuXHRcdFx0aWYoc3BlY2lmaWNSZXFzW2ldKSB7XG5cdFx0XHRcdHZtLnBhc3NSZXFzW2ldLmZ1bGZpbGxlZCA9IHRydWU7XG5cdFx0XHRcdHZtLnBhc3NSZXFzW2ldLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0ucGFzc1JlcXNbaV0uZnVsZmlsbGVkID0gZmFsc2U7XG5cdFx0XHRcdHZtLnBhc3NSZXFzW2ldLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0XHRcdFx0YW55RXJyb3JzID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR2bS5lcnJvcnMucGFzc3dvcmQgPSBhbnlFcnJvcnM7XG5cdFx0dmVyaWZ5UmVxdWlybm1lbnRzKCk7XG5cdH1cblxuXHR2bS5leGl0UGFzc3dvcmQgPSBmdW5jdGlvbigpIHtcblx0XHR2bS5jaGVja05ld1Bhc3N3b3JkKCk7XG5cdFx0dm0uc2hvd1JlcXNCb3ggPSBmYWxzZTtcblx0fVxuXG5cdHZtLmNyZWF0ZU5ld1VzZXIgPSBmdW5jdGlvbiAoKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBuZXdVc2VyU2hlcnBhID0gdHJhZmZpY1ZhbGV0O1xuXG5cdFx0Ly9jb25maXJtIGFsbCBmaWVsZHMgYXJlIHZhbGlkXG5cdFx0aWYodm0uZXJyb3JzLnBhc3Nlc0FsbFRlc3RzICYmIHZtLmlucHV0cy5yZXF1aXJlZEZpZWxkc0RlZmluZWQpIHtcblx0XHRcdFxuXHRcdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdFx0dmFyIGNyZWF0ZU5ld1VzZXIgPSBiYWNrZW5kU2VydmljZXM7XG5cdFx0XHR2YXIgbmV3VXNlckRhdGEgPSB1c2VyRGF0YTtcblx0XHRcdHZhciB0aGlzVUlEO1xuXG5cdFx0XHQvL2NyZWF0ZSB0aGUgbmV3IHVzZXIgaW4gdGhlIGRhdGFiYXNlXG5cdFx0XHRjcmVhdGVOZXdVc2VyLmNyZWF0ZU5ld1VzZXIodm0uaW5wdXRzLm5ld0VtYWlsLCB2bS5pbnB1dHMubmV3UGFzc3dvcmQpXG5cdFx0XHQudGhlbihmdW5jdGlvbihkYlVzZXJEYXRhKSB7XG5cdFx0XHRcdFxuXHRcdFx0XHQvL21haW50YWluIGxvY2FsIHZhbHVlcyB0byBzcGVlZCB1cCB1c2VyIGV4cGVyaWVuY2Vcblx0XHRcdFx0bmV3VXNlckRhdGEuc2V0UHJpbWFyaWVzTG9jYWxseSh2bS5pbnB1dHMubmV3RW1haWwsIHZtLmlucHV0cy5uZXdOYW1lLCBkYlVzZXJEYXRhLnVpZCk7XG5cblx0XHRcdFx0Ly9jcmVhdGUgYSB1c2VyIHByb2ZpbGUgaW4gdGhlIGRhdGFiYXNlXG5cdFx0XHRcdGNyZWF0ZU5ld1VzZXIuYWRkTmV3VXNlclRvRGF0YWJhc2UoZGJVc2VyRGF0YS51aWQsIHZtLmlucHV0cy5uZXdOYW1lLCB2bS5pbnB1dHMubmV3RW1haWwpXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKG1lc3NhZ2UpIHtcblxuXHRcdFx0XHRcdCRsb2cuaW5mbyhtZXNzYWdlKTtcblxuXHRcdFx0XHRcdC8vYWRkIHRoaXMgdXNlciB0byB0aGUgbGlzdCBvZiByZWdpc3RlcmVkIHVzZXJzXG5cdFx0XHRcdFx0Y3JlYXRlTmV3VXNlci5hZGROZXdVc2VyVG9SZWdVc2Vyc0xpc3QoZGJVc2VyRGF0YS51aWQsIHZtLmlucHV0cy5uZXdFbWFpbClcblx0XHRcdFx0XHQudGhlbihmdW5jdGlvbihtZXNzYWdlKSB7XG5cblx0XHRcdFx0XHRcdC8vcmVkaXJlY3QgdXNpbmcgdGhlIHVpZFxuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHQvL3JlZGlyZWN0IHRvIHRoZSBuZXh0IHBhZ2UgXG5cdFx0XHRcdFx0XHRuZXdVc2VyU2hlcnBhLnJlZGlyZWN0VG8oJy91c2VySW5mb3JtYXRpb24nLCBkYlVzZXJEYXRhLnVpZCk7XG5cdFx0XHRcdFx0XHQgXG5cdFx0XHRcdFx0XHQkbG9nLmluZm8obWVzc2FnZSk7IFxuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKG1lc3NhZ2UpIHsgJGxvZy5pbmZvKG1lc3NhZ2UpOyB9KVxuXHRcdFx0XHR9KVxuXHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyAkbG9nLmluZm8obWVzc2FnZSk7IH0pXG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKG1lc3NhZ2UpIHsgJGxvZy5pbmZvKG1lc3NhZ2UpOyB9KVxuXHRcdFx0XG5cdFx0fVxuXG5cdH1cblx0XG5cdC8vcnVuIHRpbWUgYWN0aW9uc1xuXG59XG4iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdSZWdVc2VyTG9naW5Db250cm9sbGVyJywgUmVnVXNlckxvZ2luQ29udHJvbGxlcik7XG5cblJlZ1VzZXJMb2dpbkNvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICckZG9jdW1lbnQnLCAnYmFja2VuZFNlcnZpY2VzJywgJ3RyYWZmaWNWYWxldCcsICd1c2VyRGF0YSddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIFJlZ1VzZXJMb2dpbkNvbnRyb2xsZXIoJGxvZywgJGRvY3VtZW50LCBiYWNrZW5kU2VydmljZXMsIHRyYWZmaWNWYWxldCwgdXNlckRhdGEpIHtcblx0dmFyIHZtID0gdGhpcztcblxuXHQvL2RlZmluZSB2bSBpbnB1dCB2YXJpYWJsZXNcblx0dm0uaW5wdXRzID0ge1xuXHRcdGVtYWlsOiAnJyxcblx0XHRwYXNzd29yZDogJycsXG5cdFx0cmVxdWlyZWRGaWVsZHNEZWZpbmVkOiBmYWxzZVxuXHR9XG5cdHZtLmVycm9ycyA9IHtcblx0XHRtZXNzYWdlOiAnJyxcblx0XHRwYXNzZXNBbGxUZXN0czogdHJ1ZVxuXHR9XG5cdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4gPSB7XG5cdFx0J3VzYWJsZSc6ZmFsc2UsIFxuXHRcdCdjbGFzcyc6IHtcblx0XHRcdCdidG4nOiB0cnVlLFxuXHRcdFx0J2J0bi13YXJuaW5nJzogdHJ1ZSxcblx0XHRcdCdidG4tc3VjY2Vzcyc6IGZhbHNlLFxuXHRcdFx0J2NvbC14cy0xMic6IHRydWUsXG5cdFx0XHQnY29sLXNtLTEyJzogdHJ1ZSxcblx0XHR9LFxuXHRcdG1lc3NhZ2U6ICdOZWVkIEVtYWlsICYgUGFzcydcblx0fVxuXG5cdC8vbWV0aG9kc1xuXHRmdW5jdGlvbiBvcGVuVXNlckxvZ2luQnRuKCkge1xuXHRcdC8vY2hlY2sgdGhhdCB0aGVyZSBpcyBhbiBlbWFpbCBhbmQgdGhlcmUgaXMgYSBwYXNzd29yZFxuXHRcdGlmKFx0YW5ndWxhci5pc0RlZmluZWQodm0uaW5wdXRzLmVtYWlsKSAmJiB2bS5pbnB1dHMuZW1haWwgIT09ICcnICYmXG5cdFx0XHRhbmd1bGFyLmlzRGVmaW5lZCh2bS5pbnB1dHMucGFzc3dvcmQpICYmIHZtLmlucHV0cy5wYXNzd29yZCAhPT0gJycpIFxuXHRcdHtcblx0XHRcdHZtLmlucHV0cy5yZXF1aXJlZEZpZWxkc0RlZmluZWQgPSB0cnVlO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi5jbGFzc1snYnRuLXN1Y2Nlc3MnXSA9IHRydWU7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLmNsYXNzWydidG4td2FybmluZyddID0gZmFsc2U7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLm1lc3NhZ2UgPSAnTG9naW4nO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi51c2FibGUgPSB0cnVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2bS5pbnB1dHMucmVxdWlyZWRGaWVsZHNEZWZpbmVkID0gZmFsc2U7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLmNsYXNzWydidG4tc3VjY2VzcyddID0gZmFsc2U7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLmNsYXNzWydidG4td2FybmluZyddID0gdHJ1ZTtcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4ubWVzc2FnZSA9ICdOZWVkIEVtYWlsICYgUGFzcyc7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLnVzYWJsZSA9IGZhbHNlO1xuXHRcdH1cblxuXHR9XG5cblx0Ly92aWV3IG1vZGVsIG1ldGhvZHNcblx0dm0udXBkYXRlID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9zZXQgdmFsdWVzXG5cdFx0dm0uaW5wdXRzLmVtYWlsID0gJGRvY3VtZW50LmZpbmQoJyN1c2VyRW1haWwnKVswXS52YWx1ZTtcblx0XHR2bS5pbnB1dHMucGFzc3dvcmQgPSAkZG9jdW1lbnQuZmluZCgnI3VzZXJQYXNzd29yZCcpWzBdLnZhbHVlO1xuXHRcdFxuXHRcdG9wZW5Vc2VyTG9naW5CdG4oKTtcblx0fVxuXG5cdHZtLmxvZ2luUmVnaXN0ZXJlZFVzZXIgPSBmdW5jdGlvbigpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIHJlZ2lzdGVyZWRVc2VyU2hlcnBhID0gdHJhZmZpY1ZhbGV0O1xuXG5cdFx0Ly9jb25maXJtIGFsbCBmaWVsZHMgYXJlIHZhbGlkXG5cdFx0aWYodHJ1ZSkge1xuXHRcdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdFx0dmFyIGRhdGFiYXNlID0gYmFja2VuZFNlcnZpY2VzO1xuXHRcdFx0dmFyIHJlZ2lzdGVyZWRVc2VyRGF0YSA9IHVzZXJEYXRhO1xuXG5cdFx0XHQvL3ZlcmlmeSB1c2VycyBjcmVkZW50aWFsc1xuXHRcdFx0ZGF0YWJhc2UuTG9naW5SZWdpc3RlcmVkVXNlcih2bS5pbnB1dHMuZW1haWwsIHZtLmlucHV0cy5wYXNzd29yZClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKHVzZXJDcmVkZW50aWFscykge1xuXHRcdFx0XHQvL2lmIG5vIHRyb3VibGUgbG9nZ2luZyBpbiB1cGRhdGUgZXJyb3Igb2JqZWN0XG5cdFx0XHRcdHZtLmVycm9ycy5wYXNzZXNBbGxUZXN0cyA9IHRydWU7XG5cblx0XHRcdFx0Ly9hZGQgcHJpbWFyeSBpbmZvcm1hdGlvbiB0byBsb2NhbCBtb2RlbFxuXHRcdFx0XHRyZWdpc3RlcmVkVXNlckRhdGEuc2V0UHJpbWFyaWVzTG9jYWxseSh2bS5pbnB1dHMuZW1haWwsIHZtLmlucHV0cy5uYW1lLCB1c2VyQ3JlZGVudGlhbHMudWlkKTtcblxuXHRcdFx0fSlcblx0XHRcdC50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQkbG9nLmluZm8oXCJ1aWQgaXMgXCIgKyByZWdpc3RlcmVkVXNlckRhdGEuZ2V0VUlETG9jYWxseSgpKTtcblxuXHRcdFx0XHRkYXRhYmFzZS5nZXRVc2VyQmlvKHJlZ2lzdGVyZWRVc2VyRGF0YS5nZXRVSURMb2NhbGx5KCkpXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKHVzZXJCaW8pIHtcblx0XHRcdFx0XHQvL3VwZGF0ZSB1c2VyRGF0YSBtb2RlbCB3aXRoIHVzZXJCaW9cblx0XHRcdFx0XHRyZWdpc3RlcmVkVXNlckRhdGEudXBkYXRlQmlvTG9jYWxseSh1c2VyQmlvKTtcblxuXHRcdFx0XHRcdC8vbG9hZCB1c2VyIGV2ZW50c1xuXHRcdFx0XHRcdGRhdGFiYXNlLmdldFVzZXJFdmVudHMocmVnaXN0ZXJlZFVzZXJEYXRhLmdldFVJRExvY2FsbHkoKSlcblx0XHRcdFx0XHQudGhlbihmdW5jdGlvbihhbGxFdmVudHNGb3JUaGlzVXNlcikge1xuXHRcdFx0XHRcdFx0Ly91cGRhdGUgdXNlckRhdGEgbW9kZWwgd2l0aCB1c2VyRXZlbnRzXG5cdFx0XHRcdFx0XHRyZWdpc3RlcmVkVXNlckRhdGEudXBkYXRlQWxsVXNlckV2ZW50c0xvY2FsbHkoYWxsRXZlbnRzRm9yVGhpc1VzZXIpO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKG1lc3NhZ2UpIHsgJGxvZy5pbmZvKG1lc3NhZ2UpOyB9KVxuXG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5jYXRjaChmdW5jdGlvbihtZXNzYWdlKSB7ICRsb2cuaW5mbyhtZXNzYWdlKTsgfSlcblxuXHRcdFx0XHQvL3JlZGlyZWN0IHRvIHRoZSBuZXh0IHBhZ2UgXG5cdFx0XHRcdHJlZ2lzdGVyZWRVc2VyU2hlcnBhLnJlZGlyZWN0VG8oJy91c2VySW5mb3JtYXRpb24nLCByZWdpc3RlcmVkVXNlckRhdGEuZ2V0VUlETG9jYWxseSgpKTtcblxuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihtZXNzYWdlKSB7IFxuXHRcdFx0XHQvL2lmIHRoZXJlIHdhcyBhbiBlcnJvciBsb2dnaW5nIGluLCBsZXQgdGhlIHVzZXIga25vd1xuXHRcdFx0XHR2bS5lcnJvcnMubWVzc2FnZSA9IG1lc3NhZ2U7XG5cdFx0XHRcdHZtLmVycm9ycy5wYXNzZXNBbGxUZXN0cyA9IGZhbHNlO1xuXHRcdFx0fSlcblxuXHRcdFx0Ly91c2UgdWlkIHRvIGNvbGxlY3QgdXNlciBiaW9cblx0XHRcdFxuXHRcdH1cblxuXHR9XG5cblx0dm0uY2xpY2tlZCA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciB1c2VyQXV0aGVudGljYXRpb24gPSBiYWNrZW5kU2VydmljZXM7XG5cblx0XHR1c2VyQXV0aGVudGljYXRpb24ubG9nVXNlck91dCgpO1xuXHR9XG5cblx0Ly9ydW4gY29tbWFuZHNcbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCd0b3BNZW51Q29udHJvbGxlcicsIHRvcE1lbnVDb250cm9sbGVyKTtcblxudG9wTWVudUNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnLCAnJGxvY2F0aW9uJywgJyRkb2N1bWVudCcsICckd2luZG93J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gdG9wTWVudUNvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCAkbG9jYXRpb24sICRkb2N1bWVudCwgJHdpbmRvdykge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHR2YXIgZmJVUkwgPSAnaHR0cHM6Ly9tZWV0dXBwbGFubmVyLmZpcmViYXNlaW8uY29tLyc7XG5cdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXG5cdC8vbG9jYWwgdmFyaWFibGVzXG5cdHZtLmxvZ2dlZEluID0gZmFsc2VcblxuXHQvL3N0eWxlcyB2YXJpYWJsZXNcblx0XG5cdC8vZXZlbnQgbGlzdGVuZXJzXG5cdGlmICgnYWRkRXZlbnRMaXN0ZW5lcicgaW4gJGRvY3VtZW50KSB7XG5cdCAgICAkZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkge1xuXHQgICAgXHQkbG9nLmluZm8oJ2FkZGluZyBGYXN0Q2xpY2snKTtcblx0ICAgICAgICBGYXN0Q2xpY2suYXR0YWNoKCRkb2N1bWVudC5ib2R5KTtcblx0ICAgIH0sIGZhbHNlKTtcblx0fVxuXG5cdGFuZ3VsYXIuZWxlbWVudCgkd2luZG93KS5iaW5kKCdyZXNpemUnLCBmdW5jdGlvbigpIHtcblx0XHR2bS5vblJlc2l6ZUZ1bmN0aW9uKCk7XG5cdFx0JHNjb3BlLiRhcHBseSgpO1xuXHR9KTtcblxuXHRhbmd1bGFyLmVsZW1lbnQoJGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcblx0XHRpZigkd2luZG93Lm91dGVyV2lkdGggPCA2MDApIHtcblx0XHRcdHZtLm9uUmVzaXplRnVuY3Rpb24oKTtcblx0XHRcdCRzY29wZS4kYXBwbHkoKTtcblx0XHR9XG5cdH0pXG5cdC8vZHluYW1pY2FsbHkgc2V0IGlucHV0IHdpZHRoXG5cblxuXHQvLyBDcmVhdGUgYSBjYWxsYmFjayB3aGljaCBsb2dzIHRoZSBjdXJyZW50IGF1dGggc3RhdGVcblx0ZnVuY3Rpb24gaW5pdCgpIHtcblx0XHR2bS5vblJlc2l6ZUZ1bmN0aW9uKCk7XG5cdFx0JHNjb3BlLiRhcHBseSgpO1xuXHR9XG5cblx0ZnVuY3Rpb24gYXV0aERhdGFDYWxsYmFjayhhdXRoRGF0YSkge1xuXHQgIGlmIChhdXRoRGF0YSkge1xuXHQgICAgJGxvZy5pbmZvKFwiVXNlciBcIiArIGF1dGhEYXRhLnVpZCArIFwiIGlzIGxvZ2dlZCBpbiB3aXRoIFwiICsgYXV0aERhdGEucHJvdmlkZXIpO1xuXHQgICAgdm0ubG9nZ2VkSW4gPSB0cnVlO1xuXHQgIH0gZWxzZSB7XG5cdCAgICAkbG9nLmluZm8oXCJVc2VyIGlzIGxvZ2dlZCBvdXRcIik7XG5cdCAgICB2bS5sb2dnZWRJbiA9IGZhbHNlO1xuXHQgIH1cblx0fVxuXG5cdGZ1bmN0aW9uIHJlZGlyZWN0KHBhdGgsIHVzZXJEYXRhKSB7XG5cdFx0dmFyIGZ1bGxQYXRoID0gcGF0aCArICcvJyArIHVzZXJEYXRhLnVpZCArICcvJyArIHVzZXJEYXRhLnRva2VuO1xuXHRcdC8vcmVkaXJlY3Rcblx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIHRvOiAnICsgZnVsbFBhdGgpO1xuXHRcdCRsb2NhdGlvbi5wYXRoKGZ1bGxQYXRoKTtcblx0XHQvLyRzY29wZS4kYXBwbHkoKTtcblx0fVxuXG5cdC8vdm0gYWNjZXNzaWJsZSBtZXRob2RzXG5cdHZtLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2cuaW5mbygnbG9nZ2luZyBvdXQhJyk7XG5cdFx0dm0ubG9nZ2VkSW4gPSBmYWxzZTtcblx0XHRyZWYudW5hdXRoKCk7XG5cdFx0cmVkaXJlY3QoJy8nLCB7dWlkOicnLCB0b2tlbjonJ30pO1xuXHR9XG5cblx0dm0ubmF2QmFyTG9naW5SZWdpc3RlcmVkVXNlciA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2cuaW5mbygnbGF1bmNoaW5nIGxvZ2luJyk7XG5cdFx0aWYodHJ1ZSkge1xuXHRcdC8vaWYodm0udW5jbG9ja1VzZXJMb2dpbkJ0bi51c2FibGUpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlXG5cdFx0XHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHRcdFx0Ly9hdXRoZW50aWNhdGUgdGhlIHVzZXJcblx0XHRcdHJlZi5hdXRoV2l0aFBhc3N3b3JkKHtcblx0XHRcdFx0ZW1haWw6IHZtLm5hdmJhclVzZXJFbWFpbCxcblx0XHRcdFx0cGFzc3dvcmQ6IHZtLm5hdmJhclVzZXJQYXNzXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvciwgYXV0aERhdGEpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ0Vycm9yIExvZ2dpbmcgSW46ICcgKyBlcnJvcik7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdMb2dnZWQgSW4gc3VjY2Vzc2Z1bGx5OiAnICsgYXV0aERhdGEudWlkKTtcblx0XHRcdFx0XHQkbG9nLmluZm8oYXV0aERhdGEpO1xuXHRcdFx0XHRcdC8vc2F2ZSBhbGwgdGhlIGRhdGFcblxuXHRcdFx0XHRcdC8vbG9hZCB1c2VyIGJpb1xuXHRcdFx0XHRcdC8vbG9hZCB1c2VyIGV2ZW50c1xuXG5cdFx0XHRcdFx0Ly9yZWRpcmVjdFxuXHRcdFx0XHRcdHJlZGlyZWN0KCcvdXNlckluZm9ybWF0aW9uJywgYXV0aERhdGEpO1xuXHRcdFx0XHRcdCRzY29wZS4kYXBwbHkoKTtcblxuXHRcdFx0XHRcdC8vY2xpY2sgY2xvc2VkIHRoZSBuYXZiYXJcblx0XHRcdFx0XHRhbmd1bGFyLmVsZW1lbnQoJy5uYXZiYXItdG9nZ2xlJykuY2xpY2soKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblxuXG5cdFx0fVxuXG5cdH1cblxuXHR2bS5vblJlc2l6ZUZ1bmN0aW9uID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG5hdmJhcklucHV0cyA9IGFuZ3VsYXIuZWxlbWVudCgnLm5hdmJhcklucHV0cycpO1xuXHRcdG5hdmJhcklucHV0cy5jc3MoJ3dpZHRoJywgKCR3aW5kb3cub3V0ZXJXaWR0aCAtIDI2KSArICdweCcpO1xuXHR9XG5cblx0Ly8gUmVnaXN0ZXIgdGhlIGNhbGxiYWNrIHRvIGJlIGZpcmVkIGV2ZXJ5IHRpbWUgYXV0aCBzdGF0ZSBjaGFuZ2VzXG5cdHJlZi5vbkF1dGgoYXV0aERhdGFDYWxsYmFjayk7XG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignVXNlckV2ZW50c0NvbnRyb2xsZXInLCBVc2VyRXZlbnRzQ29udHJvbGxlcik7XG5cblVzZXJFdmVudHNDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJHJvdXRlUGFyYW1zJywgJ3VzZXJEYXRhJywgJ3RyYWZmaWNWYWxldCddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIFVzZXJFdmVudHNDb250cm9sbGVyKCRsb2csICRyb3V0ZVBhcmFtcywgdXNlckRhdGEsIHRyYWZmaWNWYWxldCkge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHR2YXIgY3VycmVudFVzZXIgPSB1c2VyRGF0YTtcblxuXHQvL2xvY2FsIHZpZXcgdmFyaWFibGVzXG5cdHZtLnNob3dEZWNsaW5lID0gZmFsc2U7XHQvL3doYXQgaXMgdGhpcyBiZWluZyB1c2VkIGZvcj9cblx0dm0udXNlckJpbyA9IHt9XG5cdHZtLmV2ZW50cyA9IHt9O1xuXHR2bS5zZWN0aW9uQXZhaWxhYmxlID0ge1xuXHRcdHBlbmRpbmc6IGZhbHNlLFxuXHRcdGF0dGVuZGluZzogZmFsc2UsXG5cdFx0aG9zdGluZzogZmFsc2UsXG5cdFx0Y29tcGxldGVkOiBmYWxzZVxuXHR9O1xuXHR2bS5lcnJvcnMgPSB7fTtcblxuXHQvL2RlY2xhcmUgbG9jYWwgbWV0aG9kc1xuXHRmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fTtcblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH07XG5cblx0ZnVuY3Rpb24gbm9PZkhvc3RlRXZlbnRzKCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZVxuXHRcdHZhciBjb3VudGVyID0gMDtcblxuXHRcdGZvcihldmVudCBpbiB2bS5ldmVudHMuaG9zdGluZykgY291bnRlcisrO1xuXG5cdFx0cmV0dXJuIGNvdW50ZXI7XG5cdH1cblxuXHRmdW5jdGlvbiBnZW5lcmF0ZUV2ZW50SUQoKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYXRlID0gbmV3IERhdGUoKTtcblx0XHR2YXIgZXZlbnRJRCA9IChkYXRlVGltZVRvVW5peFRpbWUoZGF0ZSkgKiAxMCkgKyAobm9PZkhvc3RlRXZlbnRzKCkpO1xuXG5cdFx0cmV0dXJuIGV2ZW50SUQ7XG5cdH1cblxuXHRmdW5jdGlvbiBjaGVja0ZvckV2ZW50cygpIHtcblx0XHRcblx0XHQvL2xvb3AgdGhyb3VnaCBhbGwgdGhlIGV2ZW50IGNhdGVnb3JpZXNcblx0XHRPYmplY3Qua2V5cyh2bS5ldmVudHMpLmZvckVhY2goZnVuY3Rpb24oY2F0ZWdvcnkpIHtcblx0XHRcdFxuXHRcdFx0Ly9pbnNpZGUgZWFjaCBjYXRlZ29yeSBjb3VudCB0aGUgbnVtYmVyIG9mIGV2ZW50IG9iamVjdHMuLi5OT1QgdXBkYXRlZCBwbGFjZWhvbGRlciB0aG91Z2hcblx0XHRcdE9iamVjdC5rZXlzKHZtLmV2ZW50c1tjYXRlZ29yeV0pLmZvckVhY2goZnVuY3Rpb24oZXZlbnRJRCkge1xuXHRcdFx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVcblx0XHRcdFx0dmFyIGNvdW50ZXIgPSAwO1xuXHRcdFx0XHQvL2NvdW50IGV2ZW50cyB3aXRoIGlkJ3MgLyBOT1QgJ3VwZGF0ZWQnIHBsYWNlaG9sZGVyc1xuXHRcdFx0XHRpZihhbmd1bGFyLmlzT2JqZWN0KHZtLmV2ZW50c1tjYXRlZ29yeV1bZXZlbnRJRF0pKSBjb3VudGVyKys7XG5cdFx0XHRcdFxuXHRcdFx0XHQvL2lmIGF0IGxlYXN0IG9uZSBldmVudCBpZCAob2JqZWN0KSB3YXMgY291bnRlZCwgdGhlbiBzaG93IHRoZSBzZWN0aW9uXG5cdFx0XHRcdGlmKGNvdW50ZXIgPiAwKSB2bS5zZWN0aW9uQXZhaWxhYmxlW2NhdGVnb3J5XSA9IHRydWU7XG5cdFx0XHRcdGVsc2Ugdm0uc2VjdGlvbkF2YWlsYWJsZVtjYXRlZ29yeV0gPSBmYWxzZTtcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGluaXRpYWxpemUoKSB7XG5cdFx0Ly9tYWtlIHN1cmUgdGhlIHVpZCBpcyBzZXRcblx0XHRjdXJyZW50VXNlci5zZXRVSURMb2NhbGx5KCRyb3V0ZVBhcmFtcy51aWQpO1xuXG5cdFx0Ly9sb2FkIHRoZSB1c2VyIGJpb1xuXHRcdGN1cnJlbnRVc2VyLmxvYWRCaW8oJHJvdXRlUGFyYW1zLnVpZClcblx0XHQudGhlbihmdW5jdGlvbihyZXRyaWV2ZWRCaW8pIHtcblx0XHRcdHZtLnVzZXJCaW8gPSByZXRyaWV2ZWRCaW87XG5cdFx0fSlcblx0XHQuY2F0Y2goKVxuXG5cdFx0Ly9sb2FkIHVzZXIgZXZlbnRzIHByb2dyZXNzaXZsZXlcblx0XHQvL2Zpc3Qgd2hhdGV2ZXIgaXMgaW4gdGhlIG1vZGVsIGFscmVhZHlcblx0XHR2bS5ldmVudHMgPSBjdXJyZW50VXNlci5nZXRBbGxVc2VyRXZlbnRzTG9jYWxseSgpO1xuXG5cdFx0Ly90aGVuIGNhbGwgdG8gdGhlIGRiIGFuZCBnZXQgdGhlIG1vc3QgdXAgdG8gZGF0ZSBpbmZvXG5cdFx0Y3VycmVudFVzZXIuZ2V0UmVtb3RlRXZlbnRzRm9yTG9jYWwoKVxuXHRcdC50aGVuKGZ1bmN0aW9uKG9idGFpbmVkVXNlckV2ZW50cykge1xuXHRcdFx0JGxvZy5pbmZvKG9idGFpbmVkVXNlckV2ZW50cyk7XG5cdFx0XHQvL3VwZGF0ZSB0aGUgdmlldyBtb2RlbCB3aXRoIHRoZSB1cGRhdGVkIERCIHJlc3VsdHNcblx0XHRcdHZtLmV2ZW50cyA9IGN1cnJlbnRVc2VyLmdldEFsbFVzZXJFdmVudHNMb2NhbGx5KCk7XG5cdFx0fSlcblx0XHQudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdC8vbm93IHRoYXQgZXZlbnRzIGFyZSBsb2FkZWQsIHJlZmxlY3QgaXQgaW4gdGhlIHZpZXcgbW9kZWxcblx0XHRcdGNoZWNrRm9yRXZlbnRzKCk7XG5cdFx0fSlcblxuXHR9XG5cblx0Ly9kZWNsYXJlIHZpZXcgbWV0aG9kc1xuXHR2bS5jcmVhdGVOZXdFdmVudCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBldmVudElEID0gZ2VuZXJhdGVFdmVudElEKCk7XG5cdFx0dmFyIG5ld0V2ZW50U2hlcnBhID0gdHJhZmZpY1ZhbGV0O1xuXG5cdFx0Ly9hZGQgdGhlIGV2ZW50IHRvIHRoZSBtb2RhbCAobG9jYWxseSBPTkxZKVxuXHRcdGN1cnJlbnRVc2VyLmNyZWF0ZU5ld0V2ZW50KGV2ZW50SUQpXG5cdFx0LyoudGhlbihmdW5jdGlvbihhZmZpcm1hdGl2ZVJlc3BvbnNlKSB7XG5cdFx0XHQvL3JlcG9ydCB0aGUgc3VjY2Vzc1xuXHRcdFx0JGxvZy5pbmZvKGFmZmlybWF0aXZlUmVzcG9uc2UpO1xuXHRcdH0pXG5cdFx0LnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHQvL2lmIHRoZXJlIHdhcyBhbiB1cGRhdGVkIGZpZWxkLCByZW1vdmUgaXQgbm93XG5cdFx0XHRjdXJyZW50VXNlci5jbGVhbkRCRXZlbnRzQ2F0ZWdvcnkoJ2hvc3RpbmcnKTtcblxuXHRcdH0pXG5cdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yUmVzcG9uc2UpIHtcblx0XHRcdC8vcmVwb3J0IHRoZSBlcnJvclxuXHRcdFx0JGxvZy5pbmZvKGVycm9yUmVzcG9uc2UpO1xuXHRcdH0pKi9cblx0XHRcblxuXHRcdC8vcmVkaXJlY3QgdG8gdGhlIG5ldyBldmVudCBwYWdlXHRcdFxuXHRcdG5ld0V2ZW50U2hlcnBhLnJlZGlyZWN0VG8oJy9ldmVudCcsIGV2ZW50SUQsIGN1cnJlbnRVc2VyLmdldFVJRExvY2FsbHkoKSwgY3VycmVudFVzZXIuZ2V0VUlETG9jYWxseSgpKTtcblx0fVxuXG5cdC8vZXhlY3V0ZSBzY3JpcHRzXG5cdGluaXRpYWxpemUoKTtcblxufVxuIiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignVXNlckluZm9ybWF0aW9uQ29udHJvbGxlcicsIFVzZXJJbmZvcm1hdGlvbkNvbnRyb2xsZXIpO1xuXG5Vc2VySW5mb3JtYXRpb25Db250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJGRvY3VtZW50JywgJyRyb3V0ZVBhcmFtcycsJ3VzZXJEYXRhJywgJ3RyYWZmaWNWYWxldCddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIFVzZXJJbmZvcm1hdGlvbkNvbnRyb2xsZXIoJGxvZywgJGRvY3VtZW50LCAkcm91dGVQYXJhbXMsIHVzZXJEYXRhLCB0cmFmZmljVmFsZXQpIHtcblx0dmFyIHZtID0gdGhpcztcblx0XG5cdC8vbG9jYWwgdmFyaWFibGVzXG5cdHZhciBjdXJyZW50VXNlciA9IHVzZXJEYXRhO1xuXG5cdC8vdmlldyBtb2RlbCB2YXJpYWJsZXNcblx0dm0udXNlciA9IHt9O1xuXHR2bS50ZW1wQmlydGhkYXk7XG5cdHZtLnZpZXcgPSB7XG5cdFx0ZGF0YVRvU2F2ZTogZmFsc2UsXG5cdFx0aXNEYXRhOiBmYWxzZSxcblx0XHRidG5Nc3NnOiAnTW92ZSBPbi4uLicsXG5cdFx0cHJvY2VlZEJ0bjogJ2J0biBidG4tcHJpbWFyeSdcblx0fTtcblxuXHQvL2xvY2FsIG1ldGhvZHNcblx0ZnVuY3Rpb24gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKSB7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KHVuaXhUaW1lKSk7XG5cdH07XG5cblx0ZnVuY3Rpb24gZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKSB7XG5cdFx0cmV0dXJuIERhdGUucGFyc2UoZGF0ZVRpbWUpO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIGJ1aWxkVGVtcEJpcnRoZGF5KCl7XG5cdFx0dmFyIG5ld0JpcnRoZGF5ID0gbmV3IERhdGUoKTtcblxuXHRcdC8vcm91bmQgdG8gdGhlIG5lYXJlc3QgaG91ciwgY3V0IG9mZiBhbnl0aGluZyBzbWFsbGVyXG5cdFx0bmV3QmlydGhkYXkuc2V0SG91cnMoMCk7XG5cdFx0bmV3QmlydGhkYXkuc2V0TWludXRlcygwKTtcblx0XHRuZXdCaXJ0aGRheS5zZXRTZWNvbmRzKDApO1xuXHRcdG5ld0JpcnRoZGF5LnNldE1pbGxpc2Vjb25kcygwKTtcblxuXHRcdHZtLnRlbXBCaXJ0aGRheSA9IG5ld0JpcnRoZGF5O1xuXHR9XG5cblx0Ly92aWV3IGFjY2Vzc2libGUgbWV0aG9kc1xuXHR2bS5jaGVja1ZhbHVlcyA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vdGhyb3cgdGhlIGlzRGF0YSBmbGFnIGlmIHNvbWV0aGluZyBpcyB1cGRhdGVkXG5cdFx0dm0udmlldy5pc0RhdGEgPSB0cnVlO1xuXG5cdFx0aWYoICEoYW5ndWxhci5pc1VuZGVmaW5lZCh2bS51c2VyLmNvbXBhbnkpIHx8IHZtLnVzZXIuY29tcGFueSA9PT0gJycpIHx8IFxuXHRcdFx0IShhbmd1bGFyLmlzVW5kZWZpbmVkKHZtLnVzZXIudGl0bGUpIHx8IHZtLnVzZXIudGl0bGUgPT09ICcnKSB8fCBcblx0XHRcdCEoYW5ndWxhci5pc1VuZGVmaW5lZCh2bS51c2VyLmRvYikgfHwgdm0udXNlci5kb2IgPT09ICcnKSkgXG5cdFx0e1xuXHRcdFx0dm0udmlldy5kYXRhVG9TYXZlID0gdHJ1ZTtcblx0XHRcdHZtLnZpZXcucHJvY2VlZEJ0biA9ICdidG4gYnRuLXN1Y2Nlc3MnO1xuXHRcdFx0dm0udmlldy5idG5Nc3NnID0gJ1NhdmUgJiBDb250aW51ZSc7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZtLnZpZXcuZGF0YVRvU2F2ZSA9IGZhbHNlO1xuXHRcdFx0dm0udmlldy5wcm9jZWVkQnRuID0gJ2J0biBidG4tcHJpbWFyeSc7XG5cdFx0XHR2bS52aWV3LmJ0bk1zc2cgPSAnTW92ZSBPbi4uLic7XHRcblx0XHR9XG5cblx0fVxuXG5cdHZtLnVwZGF0ZURPQiA9IGZ1bmN0aW9uKCkge1xuXHRcdHZtLnVzZXIuZG9iID0gZGF0ZVRpbWVUb1VuaXhUaW1lKHZtLnRlbXBCaXJ0aGRheSk7XG5cdFx0dm0uY2hlY2tWYWx1ZXMoKTtcblx0fVxuXG5cdHZtLnNhdmVBbmRNb3ZlT24gPSBmdW5jdGlvbigpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciB1c2VySW5mb1NoZXJwYSA9IHRyYWZmaWNWYWxldDtcblx0XHR2YXIgY3VycmVudFVpZCA9IGN1cnJlbnRVc2VyLmdldFVJRExvY2FsbHkoKTtcblxuXHRcdC8vY29udmVydCBET0IgdG8gdW5peFRpbWUgYW5kIHNhdmVcblx0XHRpZih2bS50ZW1wQmlydGhkYXkgIT09IDApIHZtLnVwZGF0ZURPQigpO1xuXHRcdFxuXHRcdC8vaWYgdGhlcmUgaXNuJ3QgY3VycmVudGx5IGEgZG9iLCBncmFiIGZyb20gdGhlIHJvdXRlIHBhcmFtc1xuXHRcdGlmKGN1cnJlbnRVaWQgPT0gJycgfHwgYW5ndWxhci5pc1VuZGVmaW5lZChjdXJyZW50VWlkKSkge1xuXHRcdFx0Y3VycmVudFVzZXIuc2V0VUlETG9jYWxseSgkcm91dGVQYXJhbXMudWlkKTtcblx0XHR9XG5cblx0XHQvL2lmIHRoZXJlIGlzIG5ldyBkYXRhLCBzYXZlIGl0XG5cdFx0aWYodm0udmlldy5pc0RhdGEpIHtcblx0XHRcdCRsb2cuaW5mbygnc2F2aW5nIHRoZSBuZXcgZGF0YScpO1xuXHRcdFx0Y3VycmVudFVzZXIudXBkYXRlQmlvTG9jYWxseSh2bS51c2VyKTtcblx0XHR9XG5cdFx0XG5cdFx0Ly9tb3ZlIG9uXG5cdFx0dXNlckluZm9TaGVycGEucmVkaXJlY3RUbygnL3VzZXJFdmVudHMnLCB2bS51c2VyLnVpZClcblx0fVxuXG5cdGZ1bmN0aW9uIGluaXRpYWxpemUoKSB7XG5cdFx0Ly9sb2FkIEZhc3RDbGlja1xuXHRcdC8vRmFzdENsaWNrLmF0dGFjaCgkZG9jdW1lbnQuYm9keSk7XG5cdFx0YnVpbGRUZW1wQmlydGhkYXkoKTtcblxuXHRcdC8vbG9hZCB1c2VyRGF0YSBsb2NhbGx5IG9yIGZyb20gZGJcblx0XHRjdXJyZW50VXNlci5sb2FkQmlvKCRyb3V0ZVBhcmFtcy51aWQpXG5cdFx0LnRoZW4oZnVuY3Rpb24ob2J0YWluZWRVc2VyRGF0YSkge1xuXHRcdFx0Ly9hc3NpZ24gdXNlciB2YWx1ZXNcblx0XHRcdHZtLnVzZXIgPSBvYnRhaW5lZFVzZXJEYXRhO1xuXG5cdFx0XHQvL2J1aWxkIHRlbXBCaXJ0aGRheVxuXHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQob2J0YWluZWRVc2VyRGF0YS5kb2IpICYmIG9idGFpbmVkVXNlckRhdGEuZG9iICE9PSAnJykge1xuXHRcdFx0XHR2bS50ZW1wQmlydGhkYXkgPSB1bml4VGltZVRvRGF0ZVRpbWUob2J0YWluZWRVc2VyRGF0YS5kb2IpXG5cdFx0XHR9XG5cblx0XHR9KTtcblx0XG5cdH1cblxuXHQvL3J1biBwcm9jZXNzZXNcblx0aW5pdGlhbGl6ZSgpOyAvL3dpdGggaW50ZXJuZXQgdXNlIHRoZSBldmVudCBsaXN0ZW5lciBpbnN0ZWFkXG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuZmFjdG9yeSgnYXV0aFNlcnZpY2UnLCBhdXRoU2VydmljZSk7XG5cbmF1dGhTZXJ2aWNlLiRpbmplY3QgPSBbJyRsb2cnLCAnYmFja2VuZFNlcnZpY2VzJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gYXV0aFNlcnZpY2UoJGxvZywgYmFja2VuZFNlcnZpY2VzKSB7XG5cblx0dmFyIGFsbEF1dGhTZXJ2aWNlcyA9IHtcblx0XHRpc0xvZ2dlZEluOiBpc0xvZ2dlZEluXG5cdH07XG5cblx0ZnVuY3Rpb24gaXNMb2dnZWRJbigpIHtcblx0XHQvL2NoZWNrIHRoZSB1c2VyIGF1dGhlbnRpY2Fpb24gc3RhdGVcblx0XHR2YXIgZGJBdXRoZW50aWNhdGlvbiA9IGJhY2tlbmRTZXJ2aWNlcztcblx0XHRcblx0XHRkYkF1dGhlbnRpY2F0aW9uLmNoZWNrTG9naW5TdGF0dXMoKVxuXHRcdC50aGVuKGZ1bmN0aW9uKHN0YXR1cykge1xuXHRcdFx0cmV0dXJuIHN0YXR1cztcblx0XHR9KVxuXHRcdC5jYXRjaChmdW5jdGlvbihzdGF0dXMpIHtcblx0XHRcdHJldHVybiBzdGF0dXM7XG5cdFx0fSlcblx0fVxuXHRcblx0cmV0dXJuIGFsbEF1dGhTZXJ2aWNlcztcblxufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmZhY3RvcnkoJ2JhY2tlbmRTZXJ2aWNlcycsIGJhY2tlbmRTZXJ2aWNlcyk7XG5cbmJhY2tlbmRTZXJ2aWNlcy4kaW5qZWN0ID0gWyckbG9nJywgJyRxJywgJyR3aW5kb3cnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBiYWNrZW5kU2VydmljZXMoJGxvZywgJHEsICR3aW5kb3cpIHtcblx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHR2YXIgZmJVUkwgPSAnaHR0cHM6Ly9tZWV0dXBwbGFubmVyLmZpcmViYXNlaW8uY29tLyc7XG5cdHZhciBhbGxCYWNrZW5kU2VydmljZXMgPSB7XG5cdFx0dXRmOF90b19iNjQ6IHV0ZjhfdG9fYjY0LCBcdFx0XHRcdFx0XHQvL2xvY2FsIGZ1bmN0aW9ucyB0byBjb252ZXJ0IGRhdGVzXG5cdFx0YjY0X3RvX3V0Zjg6IGI2NF90b191dGY4LFxuXHRcdHVuaXhUaW1lVG9EYXRlVGltZTogdW5peFRpbWVUb0RhdGVUaW1lLFxuXHRcdGRhdGVUaW1lVG9Vbml4VGltZTogZGF0ZVRpbWVUb1VuaXhUaW1lLFxuXG5cdFx0TG9naW5SZWdpc3RlcmVkVXNlcjogTG9naW5SZWdpc3RlcmVkVXNlcixcdFx0Ly9hdXRoZW50aWNhaW9uXG5cdFx0Y2hlY2tMb2dpblN0YXR1czogY2hlY2tMb2dpblN0YXR1cyxcblx0XHRsb2dVc2VyT3V0OiBsb2dVc2VyT3V0LFxuXG5cdFx0ZG93bmxvYWRVc2VyRGF0YTogZG93bmxvYWRVc2VyRGF0YSxcdFx0XHRcdC8vZ2V0dGVyIG1ldGhvZHNcblx0XHRnZXRVc2VyQmlvOiBnZXRVc2VyQmlvLFxuXHRcdGdldFVzZXJFdmVudHM6IGdldFVzZXJFdmVudHMsXG5cdFx0Z2V0QUhvc3RlZEV2ZW50OiBnZXRBSG9zdGVkRXZlbnQsXG5cdFx0Z2V0QW5JbnZpdGVkRXZlbnQ6IGdldEFuSW52aXRlZEV2ZW50LFxuXHRcdGZpbmRHdWVzdFVJRDogZmluZEd1ZXN0VUlELFxuXHRcdGdldEd1ZXN0TGlzdEZvckV2ZW50OiBnZXRHdWVzdExpc3RGb3JFdmVudCxcblxuXHRcdGNyZWF0ZU5ld1VzZXI6IGNyZWF0ZU5ld1VzZXIsXHRcdFx0XHRcdC8vc2V0dGVyIE1ldGhvZHNcblx0XHRhZGROZXdVc2VyVG9EYXRhYmFzZTogYWRkTmV3VXNlclRvRGF0YWJhc2UsXG5cdFx0YWRkTmV3VXNlclRvUmVnVXNlcnNMaXN0OiBhZGROZXdVc2VyVG9SZWdVc2Vyc0xpc3QsXG5cdFx0dXBsb2FkVXNlckRhdGE6IHVwbG9hZFVzZXJEYXRhLFxuXHRcdHVwbG9hZFVzZXJCaW86IHVwbG9hZFVzZXJCaW8sXG5cdFx0Y3JlYXRlSG9zdGVkRXZlbnQ6IGNyZWF0ZUhvc3RlZEV2ZW50LFxuXHRcdGFkZEd1ZXN0VG9Ib3N0R3Vlc3RMaXN0b25EQjogYWRkR3Vlc3RUb0hvc3RHdWVzdExpc3RvbkRCLFxuXHRcdC8vYWRkUGVuZGluZ0V2ZW50Rm9yVXNlcjogYWRkUGVuZGluZ0V2ZW50Rm9yVXNlcixcblx0XHQvL2FkZFBlbmRpbmdFdmVudEZvckd1ZXN0OiBhZGRQZW5kaW5nRXZlbnRGb3JHdWVzdCxcblxuXHRcdGRlbGV0ZVVwZGF0ZUZpZWxkOiBkZWxldGVVcGRhdGVGaWVsZCxcdFx0XHQvL2RlbGV0ZSBtZXRob2RzXG5cdFx0cmVtb3ZlSW5jb21wbGV0ZUV2ZW50OiByZW1vdmVJbmNvbXBsZXRlRXZlbnQsXG5cblx0XHR0aGVyZVdhc0FuVXBkYXRlRmllbGQ6IHRoZXJlV2FzQW5VcGRhdGVGaWVsZFx0Ly9tb2RlbCBtYWludGFpbmFuY2Vcblx0fTtcblxuXHRmdW5jdGlvbiB1dGY4X3RvX2I2NChzdHIpIHtcblx0XHRyZXR1cm4gYnRvYShzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gYjY0X3RvX3V0Zjgoc3RyKSB7XG4gICAgXHRyZXR1cm4gYXRvYihzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKSB7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KHVuaXhUaW1lKSk7XG5cdH1cblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH1cblxuXHRmdW5jdGlvbiBjcmVhdGVOZXdVc2VyKGVtYWlsLCBwYXNzd29yZCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZmlyZUJhc2VBY2NvdW50cyA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0XG5cdFx0Ly9yZXR1cm4gYSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XG5cdFx0XHRmaXJlQmFzZUFjY291bnRzLmNyZWF0ZVVzZXIoe1xuXHRcdFx0XHRcblx0XHRcdFx0ZW1haWw6IGVtYWlsLFxuXHRcdFx0XHRwYXNzd29yZDogcGFzc3dvcmRcblx0XHRcdFxuXHRcdFx0fSxmdW5jdGlvbihlcnJvciwgdXNlckRhdGEpIHtcblx0XHRcdFx0XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoJ0Vycm9yIGNyZWF0aW5nIHVzZXI6ICcgKyBlcnJvcik7XG5cblx0XHRcdFx0ZWxzZSByZXNvbHZlKHVzZXJEYXRhKTtcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBhZGROZXdVc2VyVG9EYXRhYmFzZSh1aWQsIG5hbWUsIGVtYWlsKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciBhcHBVc2VycyA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpO1xuXHRcdHZhciBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XG5cblx0XHQvL3JldHVybiBhIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcblx0XHRcdGFwcFVzZXJzLnNldCh7IFxuXHRcdFx0XHQnYmlvJzoge1xuXHRcdFx0XHRcdCd1aWQnOiB1aWQsXG5cdFx0XHRcdFx0J25hbWUnOiBuYW1lLFxuXHRcdFx0XHRcdCdlbWFpbCc6IGVtYWlsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdCdldmVudHMnOiB7XG5cdFx0XHRcdFx0J3BlbmRpbmcnOiB7XG5cdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdCdob3N0aW5nJzoge1xuXHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQnYXR0ZW5kaW5nJzoge1xuXHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQnY29tcGxldGVkJzoge1xuXHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblxuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KCdEYXRhIGNvdWxkIG5vdCBiZSBzYXZlZDogJyArIGVycm9yKTtcblx0XHRcdFx0XG5cdFx0XHRcdGVsc2UgcmVzb2x2ZSgnRGF0YSBzYXZlZCBzdWNjZXNzZnVsbHkuJyk7XG5cblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGFkZE5ld1VzZXJUb1JlZ1VzZXJzTGlzdCh1aWQsIGVtYWlsKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciBiNjRFbWFpbCA9IHV0ZjhfdG9fYjY0KGVtYWlsKTtcblx0XHR2YXIgUmVnaXN0ZXJlZFVzZXJzTGlzdCA9IGFwcC5jaGlsZCgnVWlkcycpLmNoaWxkKGI2NEVtYWlsKTtcblxuXHRcdC8vcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFxuXHRcdFx0UmVnaXN0ZXJlZFVzZXJzTGlzdC5zZXQodWlkLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KFwiRGF0YSBjb3VsZCBub3QgYmUgc2F2ZWQuIFwiICsgZXJyb3IpO1xuXHRcdFx0XHRlbHNlIHJlc29sdmUoXCJ1aWQgY3JlYXRlZCBzdWNlc3NmdWxseS5cIik7XG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBMb2dpblJlZ2lzdGVyZWRVc2VyKGVtYWlsLCBwYXNzd29yZCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHRcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHRcdC8vYXV0aGVudGljYXRlIHRoZSB1c2VyXG5cdFx0XHRhcHAuYXV0aFdpdGhQYXNzd29yZCh7XG5cblx0XHRcdFx0ZW1haWw6IGVtYWlsLFxuXHRcdFx0XHRwYXNzd29yZDogcGFzc3dvcmRcblxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IsIGF1dGhEYXRhKSB7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdHJlamVjdCgnRXJyb3IgTG9nZ2luZyBJbjogJyArIGVycm9yKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyRsb2cuaW5mbygnTG9nZ2VkIEluIHN1Y2Nlc3NmdWxseTogJyArIGF1dGhEYXRhLnVpZCk7XG5cdFx0XHRcdFx0cmVzb2x2ZShhdXRoRGF0YSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0fSk7XG5cblx0XHR9KTtcblx0XHRcblx0fVxuXG5cdGZ1bmN0aW9uIGNoZWNrTG9naW5TdGF0dXMoKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XG5cdFx0XHRhcHAub25BdXRoKGZ1bmN0aW9uKGF1dGhEYXRhKSB7XG5cdFx0XHRcdGlmIChhdXRoRGF0YSkge1xuXHRcdFx0XHQgICAgLy8kbG9nLmluZm8oXCJVc2VyIFwiICsgYXV0aERhdGEudWlkICsgXCIgaXMgbG9nZ2VkIGluIHdpdGggXCIgKyBhdXRoRGF0YS5wcm92aWRlcik7XG5cdFx0XHRcdCAgICByZXNvbHZlKHRydWUpO1xuXHRcdFx0XHQgIH0gZWxzZSB7XG5cdFx0XHRcdCAgICAvLyRsb2cuaW5mbyhcIlVzZXIgaXMgbG9nZ2VkIG91dFwiKTtcblx0XHRcdFx0ICAgIHJlc29sdmUoZmFsc2UpO1xuXHRcdFx0XHQgIH1cblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBsb2dVc2VyT3V0KCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHRcdCRsb2cuaW5mbygnbG9nZ2luZyB1c2VyIG91dCcpO1xuXHRcdGFwcC51bmF1dGgoKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHVwbG9hZFVzZXJEYXRhKGFsbFVzZXJEYXRhKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciB1aWQgPSBhbGxVc2VyRGF0YS51aWQ7XG5cdFx0dmFyIHJlbW90ZVVzZXIgPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKTtcblxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly90aGUgYWN0dWFsIGNhbGxcblx0XHRcdHJlbW90ZVVzZXIudXBkYXRlKGFsbFVzZXJEYXRhLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KCdUaGVyZSB3YXMgYSBwcm9ibGVtIHVwZGF0aW5nIHRoYXQgcmVjb3JkOiAnICsgZXJyb3IpO1xuXHRcdFx0XHRlbHNlIHJlc29sdmUoJ2FsbCB1c2VyIGRhdGEgdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5Jyk7XG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXHRcdFxuXHR9XG5cblx0ZnVuY3Rpb24gdXBsb2FkVXNlckJpbyhjdXJyZW50VXNlckJpbykge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgdWlkID0gKGN1cnJlbnRVc2VyQmlvLnVpZCkudG9TdHJpbmcoKTtcblx0XHR2YXIgcmVtb3RlVXNlckJpbyA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdiaW8nKTtcblxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHQvL2NhbGwgdG8gdGhlIGRiXG5cdFx0XHRyZW1vdGVVc2VyQmlvLnVwZGF0ZShjdXJyZW50VXNlckJpbywgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdCgnVGhlcmUgd2FzIGEgcHJvYmxlbSB1cGRhdGluZyB0aGF0IHJlY29yZDogJyArIGVycm9yKTtcblx0XHRcdFx0ZWxzZSByZXNvbHZlKCdhbGwgdXNlciBiaW8gZGF0YSB1cGxvYWRlZCBzdWNjZXNzZnVsbHknKTtcblx0XHRcdH0pXG5cblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGRvd25sb2FkVXNlckRhdGEoKSB7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGdldFVzZXJCaW8odWlkKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciB1c2VyQmlvID0gYXBwLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2JpbycpO1xuXG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL3RoZSBhY3R1YWwgY2FsbFxuXHRcdFx0dXNlckJpby5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHRcdC8vd2hlbiB0aGUgY2FsbCBpcyBzdWNjZXNzZnVsIHJldHVybiB0aGUgZGF0YVxuXHRcdFx0XHRyZXNvbHZlKHNuYXBzaG90LnZhbCgpKTtcblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSB7XG5cdFx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHRcdFx0fSBcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBjcmVhdGVIb3N0ZWRFdmVudCh1aWQsIG5ld0V2ZW50KSB7XG5cblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIGV2ZW50SUQgPSBuZXdFdmVudC5pZDtcblx0XHR2YXIgbmV3SG9zdGVkRXZlbnQgPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ2hvc3RpbmcnKS5jaGlsZChldmVudElEKTtcblxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XG5cdFx0XHQvL2NhbGwgdG8gZmlyZWJhc2Vcblx0XHRcdG5ld0hvc3RlZEV2ZW50LnNldChuZXdFdmVudCwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdCgnVGhlcmUgd2FzIGFuIGVycm9yOiAnICsgZXJyb3IpO1xuXHRcdFx0XHRlbHNlIHJlc29sdmUoJ05ldyBldmVudCBzYXZlZCB0byBEQiBzdWNjZXNzZnVsbHknKTtcblx0XHRcdH0pXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGFkZEd1ZXN0VG9Ib3N0R3Vlc3RMaXN0b25EQihuYW1lLCBndWllc3RJZCwgZXZlbnRJZCwgdWlkKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciBndWVzdExpc3QgPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ2hvc3RpbmcnKS5jaGlsZChldmVudElkKS5jaGlsZCgnZ3Vlc3RMaXN0JykuY2hpbGQoZ3VpZXN0SWQpO1xuXG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHRcdC8vY2FsbCB0byB0aGUgZGJcblx0XHRcdGd1ZXN0TGlzdC5zZXQoe1xuXHRcdFx0XHRyc3ZwZDogZmFsc2UsXG5cdFx0XHRcdHN0YXR1czogJ3BlbmRpbmcnLFxuXHRcdFx0XHRuYW1lOiBuYW1lXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3I6ICcgKyBlcnJvcik7XG5cdFx0XHRcdGVsc2UgcmVzb2x2ZSgnTmV3IGV2ZW50IHNhdmVkIHRvIERCIHN1Y2Nlc3NmdWxseScpO1xuXHRcdFx0fSlcblxuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0VXNlckV2ZW50cyh1aWQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIHVzZXJFdmVudHMgPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJyk7XG5cdFx0XG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL3RoZSBhY3R1YWwgY2FsbFxuXHRcdFx0dXNlckV2ZW50cy5vcmRlckJ5S2V5KCkub25jZSgndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0XHR2YXIgdXNlclByb2ZpbGUgPSBzbmFwc2hvdC52YWwoKTtcblxuXHRcdFx0XHQvL3doZW4gdGhlIGNhbGwgaXMgc3VjY2Vzc2Z1bCByZXR1cm4gdGhlIGRhdGFcblx0XHRcdFx0dmFyIGV2ZW50c1BhY2thZ2UgPSB7XG5cdFx0XHRcdFx0aG9zdGluZzogdXNlclByb2ZpbGUuaG9zdGluZyxcblx0XHRcdFx0XHRhdHRlbmRpbmc6IHVzZXJQcm9maWxlLmF0dGVuZGluZyxcblx0XHRcdFx0XHRwZW5kaW5nOiB1c2VyUHJvZmlsZS5wZW5kaW5nLFxuXHRcdFx0XHRcdGNvbXBsZXRlZDogdXNlclByb2ZpbGUuY29tcGxldGVkXG5cdFx0XHRcdH07XG5cblx0XHRcdFx0cmVzb2x2ZShldmVudHNQYWNrYWdlKTtcblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSB7XG5cdFx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHRcdFx0fSBcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRBSG9zdGVkRXZlbnQodWlkLCBldmVudElkKSB7XG5cblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIGhvc3RlZEV2ZW50ID0gYXBwLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdob3N0aW5nJykuY2hpbGQoZXZlbnRJZCk7XG5cblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vdGhlIGFjdHVhbCBjYWxsXG5cdFx0XHRob3N0ZWRFdmVudC5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHRcdHZhciBzZWxlY3RFdmVudCA9IHNuYXBzaG90LnZhbCgpO1xuXG5cdFx0XHRcdHJlc29sdmUoc2VsZWN0RXZlbnQpO1xuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdChlcnJvcik7XG5cdFx0XHR9KVxuXHRcdH0pXG5cdH1cblxuXHRmdW5jdGlvbiBmaW5kR3Vlc3RVSUQoZ3Vlc3RiNjRFbWFpbCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgdWlkcyA9IGFwcC5jaGlsZCgnVWlkcycpO1xuXG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL2NhbGwgdG8gZGJcblx0XHRcdHVpZHMub25jZSgndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0XHQvL2Rpc3RpbGwgcmVzdWx0c1xuXHRcdFx0XHR2YXIgYWxsVXNlcnMgPSBzbmFwc2hvdC52YWwoKTtcblxuXHRcdFx0XHRPYmplY3Qua2V5cyhhbGxVc2VycykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcblx0XHRcdFx0XHQvL2NoZWNrIGVhY2ggdXNlclxuXHRcdFx0XHRcdGlmKGtleSA9PSBndWVzdGI2NEVtYWlsKSB7XG5cdFx0XHRcdFx0XHRyZXNvbHZlKGFsbFVzZXJzW2tleV0pO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRyZWplY3QoJ05vIHVzZXIgYnkgdGhhdCBlbWFpbCcpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9KTtcblxuXHRcdFx0fSk7XG5cblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0R3Vlc3RMaXN0Rm9yRXZlbnQoaG9zdElkLCBldmVudElkKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciBndWVzdExpc3QgPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQoaG9zdElkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ2hvc3RpbmcnKS5jaGlsZChldmVudElkKS5jaGlsZCgnZ3Vlc3RMaXN0Jyk7XG5cblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHRcdC8vY2FsbCB0aGUgZGJcblx0XHRcdGd1ZXN0TGlzdC5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHRcdC8vbG9jYWwgdmFyaWFibGVcblx0XHRcdFx0dmFyIHRoZUxpc3QgPSBzbmFwc2hvdC52YWwoKTtcblxuXHRcdFx0XHRyZXNvbHZlKHRoZUxpc3QpO1xuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdCgnVGhlcmUgd2FzIGFuIGVycm9yIGdldHRpbmcgdGhlIGd1ZXN0IGxpc3Q6ICcgKyAgZXJyb3IpO1xuXHRcdFx0fSlcblx0XHR9KVxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0QW5JbnZpdGVkRXZlbnQoaG9zdElkLCB1aWQsIGV2ZW50SWQpIHt9XG5cblx0Lypcblx0ZnVuY3Rpb24gYWRkUGVuZGluZ0V2ZW50Rm9yVXNlcih1aWQsIGhvc3RJZCwgZXZlbnRJZCwgZXZlbnQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIHVzZXJQZW5kaW5nTGlzdCA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgncGVuZGluZycpO1xuXG5cdFx0Ly9tYW5nZSB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9jYWxsIHRoZSBkYlxuXHRcdFx0dXNlclBlbmRpbmdMaXN0LnNldCh7XG5cdFx0XHRcdGhvc3RJZDoge1xuXHRcdFx0XHRcdGV2ZW50SWQ6IHtcblx0XHRcdFx0XHRcdGV2ZW50XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KFwiRXJyb3IgYWRkaW5nIHRvIHVzZXIgcGVuZGluZyBsaXN0OiBcIiArIGVycm9yKTtcblx0XHRcdFx0ZWxzZSByZXR1cm4gcmVzb2x2ZSgnQWRkZWQgdG8gdXNlciBwZW5kaW5nIGxpc3Qgc3VjY2Vzc2Z1bGx5Jyk7XG5cdFx0XHR9KVxuXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGFkZFBlbmRpbmdFdmVudEZvckd1ZXN0KHVpZCwgaG9zdElkLCBldmVudElkLCBldmVudCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgZ3Vlc3RzUGVuZGluZ0xpc3QgPSBhcHAuY2hpbGQoJ1VucmVnaXN0ZXJlZCcpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdwZW5kaW5nJyk7XG5cblx0XHQvL21hbmdlIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHQvL2NhbGwgdGhlIGRiXG5cdFx0XHR1c2VyUGVuZGluZ0xpc3Quc2V0KHtcblx0XHRcdFx0aG9zdElkOiB7XG5cdFx0XHRcdFx0ZXZlbnRJZDoge1xuXHRcdFx0XHRcdFx0ZXZlbnRcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoXCJFcnJvciBhZGRpbmcgdG8gdXNlciBwZW5kaW5nIGxpc3Q6IFwiICsgZXJyb3IpO1xuXHRcdFx0XHRlbHNlIHJldHVybiByZXNvbHZlKCdBZGRlZCB0byB1c2VyIHBlbmRpbmcgbGlzdCBzdWNjZXNzZnVsbHknKTtcblx0XHRcdH0pXG5cblx0XHR9KTtcblxuXHR9Ki9cblxuXHRmdW5jdGlvbiBkZWxldGVVcGRhdGVGaWVsZChjYXRlZ29yeSwgdWlkKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciBjYXRSZW1vdmluZ0Zyb20gPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoY2F0ZWdvcnkpLmNoaWxkKCd1cGRhdGVkJyk7XG5cblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdGNhdFJlbW92aW5nRnJvbS5zZXQobnVsbCwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdCgnVGhlcmUgd2FzIGFuIGVycm9yIGRlbGV0aW5nIHVwZGF0ZSBmaWVsZDogJyArIGVycm9yKTtcblx0XHRcdFx0ZWxzZSByZXNvbHZlKCdEZWxldGVkIHVwZGF0ZSBzdWNjZXNzZnVsbHknKTtcblx0XHRcdH0pXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIHJlbW92ZUluY29tcGxldGVFdmVudCh1aWQsIGV2ZW50SWQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIGV2ZW50VG9SZW1vdmUgPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ2hvc3RpbmcnKS5jaGlsZChldmVudElkKTtcblxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdHZhciBvbkNvbXBsZXRlID0gZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHRyZWplY3QoJ1N5bmNocm9uaXphdGlvbiBmYWlsZWQnKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRyZXNvbHZlKCdTeW5jaHJvbml6YXRpb24gc3VjY2VlZGVkJyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly9jYWxsIGRvIGRiXG5cdFx0XHRldmVudFRvUmVtb3ZlLnJlbW92ZShvbkNvbXBsZXRlKTtcblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gdGhlcmVXYXNBblVwZGF0ZUZpZWxkKGNhdGVnb3J5LCB1aWQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIGNhdFRvQ2hlY2sgPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoY2F0ZWdvcnkpO1xuXG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL2NhbGwgdGhlIGRiXG5cdFx0XHRjYXRUb0NoZWNrLm9uY2UoJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdFx0Ly9zYXZlIHRoZSByZXNwb25zZVxuXHRcdFx0XHR2YXIgY3VycmVudENhdE1vZGVsID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHRcdC8vc2hvdyB3aGF0IHdhcyBmb3VuZFxuXHRcdFx0XHQvL2xvb2sgZm9yIHRoZSB1cGRhdGUgZmllbGRcblx0XHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoY3VycmVudENhdE1vZGVsWyd1cGRhdGVkJ10pKSByZXNvbHZlKHRydWUpO1xuXHRcdFx0XHRlbHNlIHJlamVjdChmYWxzZSk7XG5cblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoZXJyb3IpO1xuXHRcdFx0fSlcblx0XHR9KTtcblx0fVxuXG5cdC8vcmV0dXJuIHRoZSBvYmplY3Rcblx0cmV0dXJuIGFsbEJhY2tlbmRTZXJ2aWNlcztcbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5mYWN0b3J5KCd0cmFmZmljVmFsZXQnLCB0cmFmZmljVmFsZXQpO1xuXG50cmFmZmljVmFsZXQuJGluamVjdCA9IFsnJGxvZycsICckbG9jYXRpb24nXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiB0cmFmZmljVmFsZXQoJGxvZywgJGxvY2F0aW9uKSB7XG5cdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0dmFyIGFsbFRyYWZmaWNDb250cm9scyA9IHtcblx0XHRyZWRpcmVjdFRvOiByZWRpcmVjdFRvLFxuXHRcdGV2ZW50Um91dGU6IGV2ZW50Um91dGVcblx0fTtcblxuXHRmdW5jdGlvbiByZWRpcmVjdFRvKHBhdGgsIHBhcmFtMSwgcGFyYW0yLCBwYXJhbTMpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChwYXJhbTEpKSB7XG5cdFx0XHRwYXRoID0gcGF0aCArICcvJyArIHBhcmFtMTtcblxuXHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQocGFyYW0yKSkge1xuXHRcdFx0XHQvL2dvIHRvIHBhdGggd2l0aCAyIHBhcmFtc1xuXHRcdFx0XHRwYXRoID0gcGF0aCArICcvJyArIHBhcmFtMjtcblxuXHRcdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChwYXJhbTMpKSB7XG5cdFx0XHRcdFx0cGF0aCA9IHBhdGggKyAnLycgKyBwYXJhbTM7XG5cblx0XHRcdFx0XHQkbG9jYXRpb24ucGF0aChwYXRoKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdCRsb2NhdGlvbi5wYXRoKHBhdGgpO1xuXHRcdFx0fVxuXHRcdFx0Ly9nbyB3aXRoIDEgcGFyYW1cblx0XHRcdCRsb2NhdGlvbi5wYXRoKHBhdGgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvL2p1c3QgZ28gdG8gcGF0aFxuXHRcdFx0JGxvY2F0aW9uLnBhdGgocGF0aCk7XG5cdFx0fVxuXG5cdH1cblxuXHRmdW5jdGlvbiBldmVudFJvdXRlKGV2ZW50SWQsIGhvc3RJZCwgdXNlcklkLCBzZWN0aW9uKSB7XG5cblx0XHQvL2lmIHRoZXJlIGlzbid0IGEgc2VjdGlvbiBzZXQgdG8gZGVmYXVsdFxuXHRcdGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQoc2VjdGlvbikpIHNlY3Rpb24gPSAxO1xuXG5cdFx0Ly9pZiB0aGUgaG9zdElkIGFuZCB1c2VySWQgbWF0Y2gsIGxhdW5jaCBob3N0IHZpZXdcblx0XHRpZihob3N0SWQgPT09IHVzZXJJZCkgeyBcblx0XHRcdHZhciBwYXRoID0gJy9ldmVudC9ob3N0LycgKyBldmVudElkICsgJy8nICsgdXNlcklkICsgJy8nKyBzZWN0aW9uO1xuXHRcdFx0Ly9yZWRpcmVjdFxuXHRcdFx0JGxvY2F0aW9uLnBhdGgocGF0aCk7XG5cdFx0fVxuXHRcdC8vaWYgdGhlIGhvc3RJZCBhbmQgdXNlcklkIERPTidUIG1hdGNoLCBsYXVuY2ggZ3Vlc3Qgdmlld1xuXHRcdGVsc2Uge1xuXHRcdFx0dmFyIHBhdGggPSAnL2V2ZW50L2d1ZXN0LycgKyBldmVudElkICsgJy8nICsgdXNlcklkICsgJy8nICsgaG9zdElkO1xuXHRcdFx0Ly9yZWRpcmVjdFxuXHRcdFx0JGxvY2F0aW9uLnBhdGgocGF0aCk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGFsbFRyYWZmaWNDb250cm9scztcbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5mYWN0b3J5KCd1c2VyRGF0YScsIHVzZXJEYXRhKTtcblxudXNlckRhdGEuJGluamVjdCA9IFsnJGxvZycsICckcScsICdiYWNrZW5kU2VydmljZXMnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiB1c2VyRGF0YSgkbG9nLCAkcSwgYmFja2VuZFNlcnZpY2VzKSB7XG5cdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0dmFyIGN1cnJlbnRVc2VyID0ge1xuXHRcdGJpbzogeyBcblx0XHRcdHVpZDogJycsXG5cdFx0XHRuYW1lOiAnJyxcblx0XHRcdGVtYWlsOiAnJyxcblx0XHRcdGNvbXBhbnk6ICcnLFxuXHRcdFx0dGl0bGU6ICcnLFxuXHRcdFx0ZG9iOiAwXG5cdFx0fSxcblx0XHRldmVudHM6IHtcblx0XHRcdGhvc3Rpbmc6IHt9LFxuXHRcdFx0cGVuZGluZzoge30sXG5cdFx0XHRhdHRlbmRpbmc6IHt9LFxuXHRcdFx0Y29tcGxldGVkOiB7fVxuXHRcdH1cblx0fTtcblxuXHR2YXIgYWN0aXZlRXZlbnQgPSB7fTtcblxuXHQvL2xvY2FsIGZ1bmN0aW9uc1xuXHRmdW5jdGlvbiB1dGY4X3RvX2I2NChzdHIpIHtcblx0XHRyZXR1cm4gYnRvYShzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gYjY0X3RvX3V0Zjgoc3RyKSB7XG4gICAgXHRyZXR1cm4gYXRvYihzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKSB7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KHVuaXhUaW1lKSk7XG5cdH07XG5cblx0ZnVuY3Rpb24gZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKSB7XG5cdFx0cmV0dXJuIERhdGUucGFyc2UoZGF0ZVRpbWUpO1xuXHR9O1xuXG5cdHZhciBhbGxVc2VyRGF0YSA9IHtcblx0XHRiaW9QcmltYXJpZXNBcmVDb21wbGV0ZUxvY2FsbHk6IGJpb1ByaW1hcmllc0FyZUNvbXBsZXRlTG9jYWxseSxcdFx0Ly9tb2RhbCBhbmFseXNpc1xuXHRcdGV2ZW50RXhpc3RzTG9jYWxseTogZXZlbnRFeGlzdHNMb2NhbGx5LFxuXHRcdHRoaXNJc1RoZUhvc3RFbWFpbDogdGhpc0lzVGhlSG9zdEVtYWlsLFxuXHRcdGd1ZXN0SW52aXRlZEFscmVhZHk6IGd1ZXN0SW52aXRlZEFscmVhZHksXG5cdFx0dGhlcmVJc0FuQWN0aXZlRXZlbnQ6IHRoZXJlSXNBbkFjdGl2ZUV2ZW50LFxuXG5cdFx0Y2xlYW5FdmVudHM6IGNsZWFuRXZlbnRzLFx0XHRcdFx0XHRcdFx0Ly9tb2RlbCBtYWludGFpbmFuY2VcblxuXHRcdGdldFVJRExvY2FsbHk6IGdldFVJRExvY2FsbHksXHRcdFx0XHRcdFx0Ly9nZXR0ZXIgTWV0aG9kc1xuXHRcdGdldE5hbWVMb2NhbGx5OiBnZXROYW1lTG9jYWxseSxcblx0XHRnZXRFbWFpbExvY2FsbHk6IGdldEVtYWlsTG9jYWxseSxcblx0XHRnZXRDb21wYW55TG9jYWxseTogZ2V0Q29tcGFueUxvY2FsbHksXG5cdFx0Z2V0VGl0bGVMb2NhbGx5OiBnZXRUaXRsZUxvY2FsbHksXG5cdFx0Z2V0RE9CTG9jYWxseTogZ2V0RE9CTG9jYWxseSxcblx0XHRnZXRGdWxsQmlvTG9jYWxseTogZ2V0RnVsbEJpb0xvY2FsbHksXG5cdFx0Z2V0T25lVXNlckV2ZW50TG9jYWxseTogZ2V0T25lVXNlckV2ZW50TG9jYWxseSxcblx0XHRnZXRVc2VyRXZlbnRzTG9jYWxseTogZ2V0VXNlckV2ZW50c0xvY2FsbHksXG5cdFx0Z2V0QWxsVXNlckV2ZW50c0xvY2FsbHk6IGdldEFsbFVzZXJFdmVudHNMb2NhbGx5LFxuXHRcdGdldEFjdGl2ZUV2ZW50OiBnZXRBY3RpdmVFdmVudCxcblxuXHRcdHNldFVJRExvY2FsbHk6IHNldFVJRExvY2FsbHksXHRcdFx0XHRcdFx0Ly9zZXR0ZXIgTWV0aG9kc1xuXHRcdHNldE5hbWVMb2NhbGx5OiBzZXROYW1lTG9jYWxseSxcblx0XHRzZXRFbWFpbExvY2FsbHk6IHNldEVtYWlsTG9jYWxseSxcblx0XHRzZXRDb21wYW55TG9jYWxseTogc2V0Q29tcGFueUxvY2FsbHksXG5cdFx0c2V0VGl0bGVMb2NhbGx5OiBzZXRUaXRsZUxvY2FsbHksXG5cdFx0c2V0RE9CTG9jYWxseTogc2V0RE9CTG9jYWxseSxcblx0XHRzZXRQcmltYXJpZXNMb2NhbGx5OiBzZXRQcmltYXJpZXNMb2NhbGx5LFxuXHRcdHVwZGF0ZVVzZXJFdmVudHNMb2NhbGx5OiB1cGRhdGVVc2VyRXZlbnRzTG9jYWxseSxcblx0XHR1cGRhdGVBbGxVc2VyRXZlbnRzTG9jYWxseTogdXBkYXRlQWxsVXNlckV2ZW50c0xvY2FsbHksXG5cdFx0dXBkYXRlQmlvTG9jYWxseTogdXBkYXRlQmlvTG9jYWxseSxcblx0XHRhZGRHdWVzdFRvSG9zdEd1ZXN0TGlzdDogYWRkR3Vlc3RUb0hvc3RHdWVzdExpc3QsXG5cdFx0c2V0QWN0aXZlRXZlbnQ6IHNldEFjdGl2ZUV2ZW50LFxuXHRcdGFkZEd1ZXN0VG9BY3RpdmVFdmVudDogYWRkR3Vlc3RUb0FjdGl2ZUV2ZW50LFxuXHRcdHNhdmVOZXdIb3N0aW5nRXZlbnQ6IHNhdmVOZXdIb3N0aW5nRXZlbnQsXG5cblx0XHRyZW1vdmVVc2VyRXZlbnRzTG9jYWxseTogcmVtb3ZlVXNlckV2ZW50c0xvY2FsbHksIFx0Ly9yZW1vdmUgZGF0YVxuXHRcdFxuXHRcdGdldEZ1bGxSZW1vdGVEQmZvckxvY2FsOiBnZXRGdWxsUmVtb3RlREJmb3JMb2NhbCxcdC8vbG9jYWwtcmVtb3RlIGludGVyYWNpb25zXG5cdFx0Z2V0UmVtb3RlQmlvRm9yTG9jYWw6IGdldFJlbW90ZUJpb0ZvckxvY2FsLFx0XHRcdFxuXHRcdGdldFJlbW90ZUV2ZW50c0ZvckxvY2FsOiBnZXRSZW1vdGVFdmVudHNGb3JMb2NhbCxcblx0XHRnZXRPbmVSZW1vdGVFdmVudEZvckxvY2FsOiBnZXRPbmVSZW1vdGVFdmVudEZvckxvY2FsLFxuXHRcdHNldEZ1bGxSZW1vdGVEQmZyb21Mb2NhbDogc2V0RnVsbFJlbW90ZURCZnJvbUxvY2FsLFxuXHRcdHNldFJlbW90ZUJpb0Zyb21Mb2NhbDogc2V0UmVtb3RlQmlvRnJvbUxvY2FsLFxuXHRcdHNldEFSZW1vdGVFdmVudEZyb21Mb2NhbDogc2V0QVJlbW90ZUV2ZW50RnJvbUxvY2FsLFxuXHRcdHNldFJlbW90ZUV2ZW50c0Zyb21Mb2NhbDogc2V0UmVtb3RlRXZlbnRzRnJvbUxvY2FsLFxuXHRcdGNsZWFuREJFdmVudHNDYXRlZ29yeTogY2xlYW5EQkV2ZW50c0NhdGVnb3J5LFxuXHRcdGdldFVzZXJJZEZvckd1ZXN0OiBnZXRVc2VySWRGb3JHdWVzdCxcblx0XHRnZXRFdmVudEd1ZXN0TGlzdDogZ2V0RXZlbnRHdWVzdExpc3QsXG5cdFx0cmVtb3ZlSW5jb21wbGV0ZUV2ZW50RnJvbURCOiByZW1vdmVJbmNvbXBsZXRlRXZlbnRGcm9tREIsXG5cblx0XHRsb2FkQmlvOiBsb2FkQmlvLFx0XHRcdFx0XHRcdFx0XHRcdC8vZXh0ZXJuYWwgbWV0aG9kc1xuXHRcdGxvYWRFdmVudHNQcm9ncmVzc2l2ZWx5OiBsb2FkRXZlbnRzUHJvZ3Jlc3NpdmVseSxcblx0XHRsb2FkQW5FdmVudFByb2dyZXNzaXZlbHk6IGxvYWRBbkV2ZW50UHJvZ3Jlc3NpdmVseSxcblx0XHRjcmVhdGVOZXdFdmVudDogY3JlYXRlTmV3RXZlbnQsXG5cdFx0dXBkYXRlUGVuZGluZ0V2ZW50c0xpc3RGb3JHdWVzdDogdXBkYXRlUGVuZGluZ0V2ZW50c0xpc3RGb3JHdWVzdFxuXHR9XG5cblx0Ly9hbmFseXNpcyBtZXRob2RzXG5cdGZ1bmN0aW9uIGJpb1ByaW1hcmllc0FyZUNvbXBsZXRlTG9jYWxseSgpIHtcblx0XHRpZiggY3VycmVudFVzZXIuYmlvLnVpZCAhPT0gJycgJiZcblx0XHRcdGN1cnJlbnRVc2VyLmJpby5uYW1lICE9PSAnJyAmJlxuXHRcdFx0Y3VycmVudFVzZXIuYmlvLmVtYWlsICE9PSAnJ1xuXHRcdFx0KVxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0ZWxzZSByZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRmdW5jdGlvbiBldmVudEV4aXN0c0xvY2FsbHkodHlwZSwgZXZlbnRJZCkge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXVtldmVudElkXSkpIHJldHVybiB0cnVlO1xuXHRcdGVsc2UgcmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0ZnVuY3Rpb24gdGhpc0lzVGhlSG9zdEVtYWlsKGVtYWlsLCBldmVudElkKSB7XG5cdFx0XG5cdFx0Ly9jaGVjayBpZiBhIGJpbyBpcyBsb2FkZWRcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChjdXJyZW50VXNlci5iaW8uZW1haWwpKSB7XG5cdFx0XHRcblx0XHRcdGlmKGN1cnJlbnRVc2VyLmJpby5lbWFpbCAhPSAnJykge1xuXHRcdFx0XHQvL2NoZWNrIGZvciBhIG1hdGNoXG5cdFx0XHRcdGlmKGVtYWlsID09IGN1cnJlbnRVc2VyLmJpby5lbWFpbCkge1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXG5cdFx0XHR9IFxuXHRcdFx0XG5cdFx0fSBcblx0XHRcblx0XHQvL2lmIHRoYXQgZGlkbid0IHdvcmsgY2hlY2sgdGhlIGN1cnJlbnQgZXZlbnRcblx0XHRcblx0XHRpZihjdXJyZW50VXNlci5ldmVudHMuaG9zdGluZ1tldmVudElkXS5ob3N0LmVtYWlsID09IGVtYWlsKSB7XG5cdFx0XHRcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFx0XG5cdH1cblxuXHRmdW5jdGlvbiBndWVzdEludml0ZWRBbHJlYWR5KGVtYWlsLCBldmVudElkKSB7XG5cdFx0Ly9maXJzdCBjaGVjayBpZiB0aGVyZSBpcyBhIGd1ZXN0IGxpc3Rcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChjdXJyZW50VXNlci5ldmVudHMuaG9zdGluZ1tldmVudElkXS5ndWVzdExpc3QpKSB7XG5cdFx0XHQvL2lmIHRoZXJlIGlzIGEgbGlzdCwgY2hlY2sgZm9yIHRoZSBlbWFpbFxuXG5cdFx0XHQvL2NvbnZlcnQgZW1haWwgZm9yIGV2YWx1YXRpb25cblx0XHRcdHJlZkVtYWlsID0gdXRmOF90b19iNjQoZW1haWwpO1xuXG5cdFx0XHQvL3J1biB0aHJvdWdoIGVhY2ggZ3Vlc3QgYW5kIGNvbXBhcmVcblx0XHRcdE9iamVjdC5rZXlzKGN1cnJlbnRVc2VyLmV2ZW50cy5ob3N0aW5nW2V2ZW50SWRdLmd1ZXN0TGlzdCkuZm9yRWFjaChmdW5jdGlvbihiNjRFbWFpbCkge1xuXHRcdFx0XHRpZihyZWZFbWFpbCA9PSBiNjRFbWFpbCkge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnYW4gZW1haWwgbWF0Y2ggd2FzIGZvdW5kLCB0aGlzIGd1ZXN0IGhhcyBiZWVuIGludml0ZWQgYWxyZWFkeScpO1xuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnbm8gZW1haWwgbWF0Y2ggZm91bmQsIG9rIHRvIGludml0ZSBndWVzdCcpO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSlcblxuXHRcdH0gZWxzZSB7XG5cdFx0XHQvL2lmIG5vIGd1ZXN0IGxpc3QgdGhhbiBjYW4ndCBhbHJlYWR5IGJlIG9uIGl0XG5cdFx0XHQkbG9nLmluZm8oJ25vIGd1ZXN0bGlzdCcpO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHR9XG5cblx0ZnVuY3Rpb24gdGhlcmVJc0FuQWN0aXZlRXZlbnQoKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoYWN0aXZlRXZlbnQuZXZlbnQpKSB7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0ZWxzZSByZXR1cm4gZmFsc2U7XG5cdH1cblxuXHQvL21vZGVsIG1haW50YWluYW5jZVxuXHRmdW5jdGlvbiBjbGVhbkV2ZW50cyh0eXBlKSB7XG5cdFx0Ly9pdGVyYXRlIHRocm91Z2ggb2JqZWN0cyBpbiBvYmplY3Rcblx0XHRPYmplY3Qua2V5cyhjdXJyZW50VXNlci5ldmVudHNbdHlwZV0pLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG5cdFx0XHQvL2lmIGFueSBhcmUgbm9uLW9iamVjdHMsIGRlbGV0ZSB0aGVtXG5cdFx0XHRpZighYW5ndWxhci5pc09iamVjdChjdXJyZW50VXNlci5ldmVudHNbdHlwZV1ba2V5XSkpIHtcblx0XHRcdFx0ZGVsZXRlIGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXVtrZXldO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0Ly9nZXR0ZXIgbWV0aG9kc1xuXHRmdW5jdGlvbiBnZXRVSURMb2NhbGx5KCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5iaW8udWlkO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0TmFtZUxvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmJpby5uYW1lO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0RW1haWxMb2NhbGx5KCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5iaW8uZW1haWw7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRDb21wYW55TG9jYWxseSgpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuYmlvLmNvbXBhbnk7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRUaXRsZUxvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmJpby50aXRsZTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0RE9CTG9jYWxseSgpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuYmlvLmRvYjtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldEZ1bGxCaW9Mb2NhbGx5KCkge1xuXHRcdHJldHVybiB7XG5cdFx0XHR1aWQ6IGN1cnJlbnRVc2VyLmJpby51aWQsXG5cdFx0XHRuYW1lOiBjdXJyZW50VXNlci5iaW8ubmFtZSxcblx0XHRcdGVtYWlsOiBjdXJyZW50VXNlci5iaW8uZW1haWwsXG5cdFx0XHRjb21wYW55OiBjdXJyZW50VXNlci5iaW8uY29tcGFueSxcblx0XHRcdHRpdGxlOiBjdXJyZW50VXNlci5iaW8udGl0bGUsXG5cdFx0XHRkb2I6IGN1cnJlbnRVc2VyLmJpby5kb2Jcblx0XHR9O1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0T25lVXNlckV2ZW50TG9jYWxseSh0eXBlLCBldmVudElkKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXVtldmVudElkXTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldFVzZXJFdmVudHNMb2NhbGx5KHR5cGUpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuZXZlbnRzW3R5cGVdO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0QWxsVXNlckV2ZW50c0xvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmV2ZW50cztcblx0fVxuXG5cdGZ1bmN0aW9uIGdldEFjdGl2ZUV2ZW50KCkge1xuXHRcdHJldHVybiBhY3RpdmVFdmVudDtcblx0fVxuXG5cdC8vc2V0dGVyIG1ldGhvZHNcblx0ZnVuY3Rpb24gc2V0VUlETG9jYWxseSh1aWQpIHtcblx0XHRjdXJyZW50VXNlci5iaW8udWlkID0gdWlkO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0TmFtZUxvY2FsbHkobmFtZSkge1xuXHRcdGN1cnJlbnRVc2VyLmJpby5uYW1lID0gbmFtZTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldEVtYWlsTG9jYWxseShlbWFpbCkge1xuXHRcdGN1cnJlbnRVc2VyLmJpby5lbWFpbCA9IGVtYWlsO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0Q29tcGFueUxvY2FsbHkoY29tcGFueSkge1xuXHRcdGN1cnJlbnRVc2VyLmJpby5jb21wYW55ID0gY29tcGFueTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2V0VGl0bGVMb2NhbGx5KHRpdGxlKSB7XG5cdFx0Y3VycmVudFVzZXIuYmlvLnRpdGxlID0gdGl0bGU7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXRET0JMb2NhbGx5KGRvYikge1xuXHRcdGN1cnJlbnRVc2VyLmJpby5kb2IgPSBkb2I7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXRQcmltYXJpZXNMb2NhbGx5KGVtYWlsLCBuYW1lLCB1aWQpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChlbWFpbCkpIHNldEVtYWlsTG9jYWxseShlbWFpbCk7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQobmFtZSkpIHNldE5hbWVMb2NhbGx5KG5hbWUpO1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHVpZCkpIHNldFVJRExvY2FsbHkodWlkKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHVwZGF0ZVVzZXJFdmVudHNMb2NhbGx5KHR5cGUsIGV2ZW50KSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBldmVudElEID0gZXZlbnQuaWQ7XG5cblx0XHQvL2NoZWNrIGlmIHRoZSBtb2RlbCBuZWVkcyB0byBiZSBjbGVhbmVkXG5cdFx0Y2xlYW5FdmVudHModHlwZSk7XG5cdFx0Ly90aGVuIGxvYWQgdGhlIG5ldyBldmVudFxuXHRcdGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXVtldmVudElEXSA9IGV2ZW50O1xuXHR9XG5cblx0ZnVuY3Rpb24gdXBkYXRlQWxsVXNlckV2ZW50c0xvY2FsbHkoYWxsVXNlckV2ZW50cykge1xuXHRcdGN1cnJlbnRVc2VyLmV2ZW50cyA9IGFsbFVzZXJFdmVudHM7XG5cdH1cblxuXHRmdW5jdGlvbiB1cGRhdGVCaW9Mb2NhbGx5KHVzZXJCaW8pIHtcblx0XHQvL3VwZGF0ZSBsb2NhbCB2YWx1ZXNcblx0XHRzZXROYW1lTG9jYWxseSh1c2VyQmlvLm5hbWUpO1xuXHRcdHNldEVtYWlsTG9jYWxseSh1c2VyQmlvLmVtYWlsKTtcblx0XHRzZXRDb21wYW55TG9jYWxseSh1c2VyQmlvLmNvbXBhbnkpO1xuXHRcdHNldFRpdGxlTG9jYWxseSh1c2VyQmlvLnRpdGxlKTtcblx0XHRzZXRET0JMb2NhbGx5KHVzZXJCaW8uZG9iKTtcblx0XHQvL3NhdmUgdG8gZGJcblx0XHRzZXRSZW1vdGVCaW9Gcm9tTG9jYWwoKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGFkZEd1ZXN0VG9Ib3N0R3Vlc3RMaXN0KG5hbWUsIGVtYWlsLCBndWVzdElkLCBldmVudElkLCB1aWQpIHtcblx0XHQvL2NhbGwgdG8gdGhlIGRiIHNvIHJldHVybiBhIHByb21pc2Vcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL2NvbnZlcnQgdGhlIGVtYWlsIGlmIG9uZSB3YXMgcGFzc2VkXG5cdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChlbWFpbCkpIHtcblx0XHRcdFx0Z3Vlc3RJZCA9IHV0ZjhfdG9fYjY0KGVtYWlsKTtcblx0XHRcdH1cblxuXHRcdFx0ZGIuYWRkR3Vlc3RUb0hvc3RHdWVzdExpc3RvbkRCKG5hbWUsIGd1ZXN0SWQsIGV2ZW50SWQsIHVpZClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKHBvc2l0aXZlUmVzdWx0KSB7XG5cdFx0XHRcdHJlc29sdmUocG9zaXRpdmVSZXN1bHQpO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihuZWdhdGl2ZVJlc3VsdCkge1xuXHRcdFx0XHRyZWplY3QobmVnYXRpdmVSZXN1bHQpO1xuXHRcdFx0fSlcblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gc2V0QWN0aXZlRXZlbnQoZXZlbnQpIHtcblx0XHQvL1xuXHRcdGFjdGl2ZUV2ZW50ID0gZXZlbnQ7XG5cdH1cblxuXHRmdW5jdGlvbiBhZGRHdWVzdFRvQWN0aXZlRXZlbnQobmV3R3Vlc3QpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciB1aWQgPSBuZXdHdWVzdC51aWQ7XG5cblx0XHQvL2lmIHRoaXMgaXMgdGhlIGZpcnN0IGd1ZXN0LCBjcmVhdGUgdGhlIGxpc3Qgb2JqZWN0XG5cdFx0aWYoIWFuZ3VsYXIuaXNPYmplY3QoYWN0aXZlRXZlbnQuZXZlbnQuZ3Vlc3RMaXN0KSkge1xuXHRcdFx0YWN0aXZlRXZlbnQuZXZlbnQuZ3Vlc3RMaXN0ID0ge307XG5cdFx0fVxuXG5cdFx0Ly9hZGQgdGhlIGd1ZXN0IHRvIHRoZSBsaXN0XG5cdFx0YWN0aXZlRXZlbnQuZXZlbnQuZ3Vlc3RMaXN0W3VpZF0gPSBuZXdHdWVzdC5ndWVzdDtcblxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0VXNlcklkRm9yR3Vlc3QoZW1haWwpIHtcblx0XHQvL2NhbGwgdG8gdGhlIGRiIHNvIHJldHVybiBhIHByb21pc2Vcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL2NvbnZlcnQgdGhlIGVtYWlsXG5cdFx0XHRndWVzdEVtYWlsID0gdXRmOF90b19iNjQoZW1haWwpO1xuXG5cdFx0XHRkYi5maW5kR3Vlc3RVSUQoZ3Vlc3RFbWFpbClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKHVpZCkge1xuXHRcdFx0XHRyZXNvbHZlKHVpZCk7XG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yUmVzcG9uc2UpIHtcblx0XHRcdFx0cmVqZWN0KGVycm9yUmVzcG9uc2UpO1xuXHRcdFx0fSlcblxuXHRcdH0pO1xuXHR9XG5cblx0Ly9kZWxldGUgTWV0aG9kc1xuXHRmdW5jdGlvbiByZW1vdmVVc2VyRXZlbnRzTG9jYWxseSh0eXBlLCBldmVudCkge1xuXHRcdC8vZG9lcyB0aGlzIHdvcms/XG5cdFx0ZGVsZXRlIGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXVtldmVudC5pZF07XG5cdH1cblxuXHQvL3JlbW90ZS1sb2NhbCBpbnRlcmFjdGlvbiBNZXRob2RzXG5cdGZ1bmN0aW9uIGdldEZ1bGxSZW1vdGVEQmZvckxvY2FsKCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0ZGIuZG93bmxvYWRVc2VyRGF0YSgpXG5cdFx0LnRoZW4oZnVuY3Rpb24ocmVtb3RlVXNlckRhdGEpIHtcblx0XHRcdGN1cnJlbnRVc2VyID0gcmVtb3RlVXNlckRhdGE7XG5cdFx0fSlcblx0fVxuXG5cdGZ1bmN0aW9uIGdldFJlbW90ZUJpb0ZvckxvY2FsKHVpZCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXHRcdFx0XHRcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL2dvIG91dCB0byB0aGUgZGIgYmVmb3JlIHJlc29sdmluZ1xuXHRcdFx0ZGIuZ2V0VXNlckJpbyh1aWQpXG5cdFx0XHQudGhlbihmdW5jdGlvbih1c2VyQmlvKSB7XG5cblx0XHRcdFx0cmVzb2x2ZSh1c2VyQmlvKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0cmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3IgcmVhZGluZyB0aGUgdXNlciBiaW86ICcgKyBlcnJvcik7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXHRcdFxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0UmVtb3RlRXZlbnRzRm9yTG9jYWwoKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cdFx0XHRcdFxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9nbyBvdXQgdG8gdGhlIGRiIGJlZm9yZSByZXNvbHZpbmdcblx0XHRcdGRiLmdldFVzZXJFdmVudHMoZ2V0VUlETG9jYWxseSgpKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24ob2J0YWluZWRVc2VyRXZlbnRzKSB7XG5cblx0XHRcdFx0Ly9zYXZlIHRoZSByZXN1bHRzIHRvIHRoZSBsb2NhbCBkYXRhYnNlXG5cdFx0XHRcdE9iamVjdC5rZXlzKG9idGFpbmVkVXNlckV2ZW50cykuZm9yRWFjaChmdW5jdGlvbihldmVudFR5cGUpIHtcblx0XHRcdFx0XHQvL3dpdGhpbiBlYWNoIGV2ZW50IHR5cGUgaXRlcmF0ZSB0aHJvdWdoIHRoZSBhY3R1YWwgZXZlbnRzXG5cdFx0XHRcdFx0T2JqZWN0LmtleXMob2J0YWluZWRVc2VyRXZlbnRzW2V2ZW50VHlwZV0pLmZvckVhY2goZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRcdFx0XHRcdC8vb25jZSB3ZSBzZWUgdGhlIGV2ZW50cywgc2F2ZSB0aGVtIHRvIHRoZSBsb2NhbCBtb2RlbFxuXG5cdFx0XHRcdFx0XHR1cGRhdGVVc2VyRXZlbnRzTG9jYWxseShldmVudFR5cGUsIG9idGFpbmVkVXNlckV2ZW50c1tldmVudFR5cGVdW2V2ZW50XSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly9yZXR1cm4gdGhlIHJlc3VsdHMgdG8gdGhlIHJlcXVlc3Rpbmcgb2JqZWN0XG5cdFx0XHRcdHJlc29sdmUob2J0YWluZWRVc2VyRXZlbnRzKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0cmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3IgcmVhZGluZyB0aGUgdXNlciBldmVudHM6ICcgKyBlcnJvcik7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0T25lUmVtb3RlRXZlbnRGb3JMb2NhbChldmVudElkKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcblx0XHRcdC8vZ29pbmcgdG8gYmFja2VuZCBzZXJ2aWNlc1xuXHRcdFx0ZGIuZ2V0QUhvc3RlZEV2ZW50KGdldFVJRExvY2FsbHkoKSwgZXZlbnRJZClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKG9idGFpbmVkRXZlbnQpIHtcblxuXHRcdFx0XHQvL3NhdmUgdGhlIHJlc3VsdCB0byB0aGUgbG9jYWwgbW9kZWxcblx0XHRcdFx0XG5cdFx0XHRcdC8vcmV0dXJuIHRoZSByZXN1bHQgdG8gdGhlIHJlcXVlc3Rpbmcgb2JqZWN0XG5cdFx0XHRcdHJlc29sdmUob2J0YWluZWRFdmVudCk7XG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdHJlamVjdCgnVGhlcmUgd2FzIGFuIGVycm9yIHJlYWRpbmcgdGhlIHVzZXIgZXZlbnQ6ICcgKyBlcnJvcik7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0RnVsbFJlbW90ZURCZnJvbUxvY2FsKCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0ZGIudXBsb2FkVXNlckRhdGEoY3VycmVudFVzZXIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0UmVtb3RlQmlvRnJvbUxvY2FsKCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0ZGIudXBsb2FkVXNlckJpbyhjdXJyZW50VXNlci5iaW8pO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0QVJlbW90ZUV2ZW50RnJvbUxvY2FsKCkge1xuXG5cdH1cblxuXHRmdW5jdGlvbiBzZXRSZW1vdGVFdmVudHNGcm9tTG9jYWwodWlkLCBldmVudCkge1xuXHRcdC8vZGVjbGFyIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdCRsb2cuaW5mbygnc2VuZGluZyB0aGlzIHRvIHRoZSBzZXJ2ZXInKTtcblx0XHQkbG9nLmluZm8oZXZlbnQpO1xuXHRcdFxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vc2VuZCB0aGUgZXZlbnQgdG8gdGhlIGRiXG5cdFx0XHRkYi5jcmVhdGVIb3N0ZWRFdmVudCh1aWQsIGV2ZW50KVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24oc3VjY2Vzc01lc3NhZ2UpIHtcblx0XHRcdFx0cmVzb2x2ZShzdWNjZXNzTWVzc2FnZSk7XG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yTWVzc2FnZSkge1xuXHRcdFx0XHRyZWplY3QoZXJyb3JNZXNzYWdlKTtcblx0XHRcdH0pXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGNsZWFuREJFdmVudHNDYXRlZ29yeShjYXRlZ29yeSkge1xuXHRcdC8vZGVjbGFyIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdC8vcmVtb3ZlICd1cGRhdGVkJyBvYmplY3QgaWYgbmVlZCBiZVxuXHRcdC8vZGIgY2FsbCBzbyByZXR1cm4gYSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly9jaGVjayBmb3Igb2JqZWN0XG5cdFx0XHRkYi50aGVyZVdhc0FuVXBkYXRlRmllbGQoY2F0ZWdvcnksIGdldFVJRExvY2FsbHkoKSlcblx0XHRcdC50aGVuKGZ1bmN0aW9uKGFmZmlybWF0aXZlUmVzcG9uc2UpIHtcblx0XHRcdFx0Ly9pZiB0aGVyZSB3YXMgYW4gdXBkYXRlIGZpZWxkLCBkZWxldGUgaXRcblx0XHRcdFx0ZGIuZGVsZXRlVXBkYXRlRmllbGQoY2F0ZWdvcnksIGdldFVJRExvY2FsbHkoKSlcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24oYWZmaXJtYXRpdmVSZXNwb25zZSkgeyAkbG9nLmluZm8oYWZmaXJtYXRpdmVSZXNwb25zZSk7IH0gKVxuXHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3JSZXNwb25zZSkgeyAkbG9nLmluZm8oZXJyb3JSZXNwb25zZSk7IH0gKVxuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvclJlc3BvbnNlKSB7XG5cdFx0XHRcdCRsb2cuaW5mbyhlcnJvclJlc3BvbnNlKVxuXHRcdFx0fSlcblxuXHRcdH0pO1xuXHRcdC8vaWYgaXQgaXMgdGhlcmUsIHJlbW92ZSBpdFxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0RXZlbnRHdWVzdExpc3QoaG9zdElkLCBldmVudElkKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vZ2V0IHRoZSBvYmplY3Rcblx0XHRcdGRiLmdldEd1ZXN0TGlzdEZvckV2ZW50KGhvc3RJZCwgZXZlbnRJZClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKG9idGFpbmVkTGlzdCkge1xuXHRcdFx0XHRyZXNvbHZlKG9idGFpbmVkTGlzdCk7XG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yUmVzcG9uc2UpIHtcblx0XHRcdFx0cmVqZWN0KGVycm9yUmVzcG9uc2UpO1xuXHRcdFx0fSlcblx0XHR9KVxuXHR9XG5cblx0ZnVuY3Rpb24gcmVtb3ZlSW5jb21wbGV0ZUV2ZW50RnJvbURCKGV2ZW50SWQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0ZGIucmVtb3ZlSW5jb21wbGV0ZUV2ZW50KGN1cnJlbnRVc2VyLmdldFVJRExvY2FsbHksIGV2ZW50SWQpXG5cdFx0XHQudGhlbihmdW5jdGlvbihzdWNjZXNzTWVzc2FnZSl7XG5cdFx0XHRcdHJlc29sdmUoc3VjY2Vzc01lc3NhZ2UpO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvck1lc3NhZ2UpIHtcblx0XHRcdFx0cmVqZWN0KGVycm9yTWVzc2FnZSk7XG5cdFx0XHR9KVxuXHRcdH0pXG5cdH1cblxuXHRmdW5jdGlvbiBsb2FkQmlvKHVpZCkge1xuXG5cdFx0Ly9taWdodCBuZWVkIHRvIGdvIG91dCB0byB0aGUgZGIgc28gcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9jaGVjayBmb3IgYmlvIGxvY2FsbHkgZmlyc3Rcblx0XHRcdGlmKGJpb1ByaW1hcmllc0FyZUNvbXBsZXRlTG9jYWxseSgpKSB7XG5cblx0XHRcdFx0Ly9wYXNzIGl0IGJhY2sgYXMgc3VjY2Vzc1xuXHRcdFx0XHRyZXNvbHZlKGdldEZ1bGxCaW9Mb2NhbGx5KCkpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9pZiB0aGV5J3JlIG5vdCBjb21wbGV0ZSBsb2NhbGx5LCBjaGVjayB0aGUgc2VydmVyXG5cdFx0XHRcdGdldFJlbW90ZUJpb0ZvckxvY2FsKHVpZClcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24oYmlvRnJvbVJlbW90ZURCKSB7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly9zYXZlIHRoZW0gbG9jYWxseSBmaXJzdFxuXHRcdFx0XHRcdHNldFByaW1hcmllc0xvY2FsbHkoYmlvRnJvbVJlbW90ZURCLmVtYWlsLCBiaW9Gcm9tUmVtb3RlREIubmFtZSwgYmlvRnJvbVJlbW90ZURCLnVpZCk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly9yZXR1cm4gdGhlIGZpbmRpbmdzXG5cdFx0XHRcdFx0cmVzb2x2ZShiaW9Gcm9tUmVtb3RlREIpO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0XHR9KVxuXHRcdFx0fVxuXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGxvYWRBbkV2ZW50UHJvZ3Jlc3NpdmVseSh1aWQsIGV2ZW50SWQpIHtcblx0XHQvL3VwZGF0ZSB1aWQgaWYgbmVlZCBiZVxuXHRcdHNldFVJRExvY2FsbHkodWlkKTtcblxuXHRcdC8vZ29pbmcgb3V0IHRoZSB0aGUgZGIgc28gcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9yZWFjaCBvdXQgdG8gZGJcblx0XHRcdGdldE9uZVJlbW90ZUV2ZW50Rm9yTG9jYWwoZXZlbnRJZClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKG9idGFpbmVkVXNlckV2ZW50KSB7XG5cdFx0XHRcdC8vd2hlbiB0aGUgZGIgcmVzdWx0cyBjb21lIGJhY2ssIHJldHVybiBpdFxuXHRcdFx0XHRyZXNvbHZlKG9idGFpbmVkVXNlckV2ZW50KVxuXHRcdFx0fSlcblx0XHRcdC5jYXRjaCgpXG5cblx0XHRcdC8vZmlyc3QgcmV0dXJuIHdoYXRldmVyIGV2ZW50IGluZm8gaXMgc3RvcmVkIGxvY2FsbHlcblx0XHRcdC8vY2hlY2sgaWYgdGhlIGV2ZW50IGlzIGF2YWlsYWJsZSBsb2NhbGx5XG5cdFx0XHRpZihldmVudEV4aXN0c0xvY2FsbHkoJ2hvc3RpbmcnLCBldmVudElkKSkgcmVzb2x2ZShnZXRPbmVVc2VyRXZlbnRMb2NhbGx5KCdob3N0aW5nJywgZXZlbnRJZCkpO1xuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBsb2FkRXZlbnRzUHJvZ3Jlc3NpdmVseSh1aWQpIHtcblx0XHR2YXIgZXZlbnRUeXBlcyA9IFsnYXR0ZW5kaW5nJywgJ3BlbmRpbmcnLCAnaG9zdGluZycsICdjb21wbGV0ZWQnXTtcblx0XHR2YXIgYWxsRXZlbnRzID0ge307XG5cblx0XHQvL3dpbGwgZ28gb3V0IHRvIHRoZSBkYiBzbyByZXR1cm4gYSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHRnZXRSZW1vdGVFdmVudHNGb3JMb2NhbCgpXG5cdFx0XHQudGhlbihmdW5jdGlvbihvYnRhaW5lZFVzZXJFdmVudHMpIHtcblx0XHRcdFx0Ly93aGVuIHRoZSBkYiByZXN1bHRzIGNvbWUgYmFjaywgcmV0dXJuIHRob3NlXG5cdFx0XHRcdHJlc29sdmUob2J0YWluZWRVc2VyRXZlbnRzKTtcblx0XHRcdH0pXG5cblx0XHRcdC8vYnVpbGQgdGhlIGxvY2FsIG1vZGVsXG5cdFx0XHRhbGxFdmVudHMgPSBnZXRVc2VyRXZlbnRzTG9jYWxseSh0eXBlKTtcblxuXHRcdFx0Ly9maXJzdCByZXR1cm4gd2hhdGV2ZXIgZXZlbnQgaW5mbyBpcyBzdG9yZWQgbG9jYWxseVxuXHRcdFx0cmVzb2x2ZShhbGxFdmVudHMpO1xuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBjcmVhdGVOZXdFdmVudChldmVudElEKSB7XG5cdFx0Ly9kZWNsYXIgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXHRcdHZhciBuZXdFdmVudCA9IHt9O1xuXHRcdHZhciBkYXRlVGltZSA9IG5ldyBEYXRlKCk7XG5cdFx0ZGF0ZVRpbWUuc2V0TWludXRlcygwLCAwLCAwKTtcblx0XHR2YXIgdGVtcFRpbWUgPSBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpO1xuXG5cdFx0Ly9maXJzdCBjcmVhdGUgdGhlIG9iamVjdFxuXHRcdG5ld0V2ZW50ID0ge1xuXHRcdFx0aWQ6IGV2ZW50SUQsXG5cdFx0XHRuYW1lOiAnJyxcblx0XHRcdHR5cGU6ICcnLFxuXHRcdFx0aG9zdDoge1xuXHRcdFx0XHRuYW1lOiBjdXJyZW50VXNlci5iaW8ubmFtZSxcblx0XHRcdFx0dWlkOiBjdXJyZW50VXNlci5iaW8udWlkLFxuXHRcdFx0XHRlbWFpbDogY3VycmVudFVzZXIuYmlvLmVtYWlsXG5cdFx0XHR9LFxuXHRcdFx0bWVzc2FnZTogJycsXG5cdFx0XHRldmVudFRpbWVzOiB7XG5cdFx0XHRcdHN0YXJ0OiB0ZW1wVGltZSxcblx0XHRcdFx0ZW5kOiAodGVtcFRpbWUgKyAoNjAqNjAqMTAwMCkpXG5cdFx0XHR9LFxuXHRcdFx0YWRkcmVzczoge1xuXHRcdFx0XHRzdHJlZXQwMTogJycsXG5cdFx0XHRcdHN0cmVldDAyOiAnJyxcblx0XHRcdFx0c3RyZWV0MDM6ICcnLFxuXHRcdFx0XHRjaXR5OiAnJyxcblx0XHRcdFx0c3RhdGU6ICcnLFxuXHRcdFx0XHR6aXA6IDBcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Ly9zYXZlIGl0IGxvY2FsbHlcblx0XHR1cGRhdGVVc2VyRXZlbnRzTG9jYWxseSgnaG9zdGluZycsIG5ld0V2ZW50KTtcblxuXHRcdC8vc2F2ZSBpdCBhcyB0aGUgYWN0aXZlIGV2ZW50XG5cdFx0c2V0QWN0aXZlRXZlbnQobmV3RXZlbnQpO1xuXG5cdFx0Ly90aGVuIGNyZWF0ZSBpdCBvbiB0aGUgc2VydmVyXG5cdFx0Ly93aWxsIGdvIG91dCB0byB0aGUgZGIgc28gcmV0dXJuIGEgcHJvbWlzZVxuXHRcdFxuXHRcdC8qcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XG5cdFx0XHQkbG9nLmluZm8oJ3NhdmVkIGxvY2FsbHksIG5vdCBvbiB0aGUgZGInKTtcblx0XHRcdC8vbWFuYWdlIHRoZSBwcm9taXNlIHJlc3BvbnNlc1xuXHRcdFx0LypkYi5jcmVhdGVIb3N0ZWRFdmVudChnZXRVSURMb2NhbGx5KCksIG5ld0V2ZW50KVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24obWVzc2FnZSkge1xuXHRcdFx0XHRyZXNvbHZlKG1lc3NhZ2UpO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0fSlcblxuXHRcdH0pOyovXG5cblx0fVxuXG5cdGZ1bmN0aW9uIHVwZGF0ZVBlbmRpbmdFdmVudHNMaXN0Rm9yR3Vlc3QoZXZlbnRJZCkge1xuXHRcdC8vZGVjbGFyIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9tYW5hZ2UgdGhlIGRiIHByb21pc2Vcblx0XHRcdC8vZGIuYWRkUGVuZGluZ0V2ZW50Rm9yR3Vlc3QoY3VycmVudFVzZXIuZ2V0VUlETG9jYWxseSgpLCBob3N0SWQsIGV2ZW50SWQsIGN1cnJlbnRVc2VyLmdldFVzZXJFdmVudHNMb2NhbGx5KCcnLCBldmVudElkKSlcblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gc2F2ZU5ld0hvc3RpbmdFdmVudChjYXRlZ29yeSwgZXZlbnQpIHtcblx0XHQkbG9nLmluZm8oJ3NhdmluZyB0aGlzIGV2ZW50IGxvY2FsbHknKTtcblx0XHQkbG9nLmluZm8oZXZlbnQpO1xuXHRcdHVwZGF0ZVVzZXJFdmVudHNMb2NhbGx5KGNhdGVnb3J5LCBldmVudCk7XG5cdH1cblx0XG5cdHJldHVybiBhbGxVc2VyRGF0YTtcbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5mYWN0b3J5KCd2YWxpZGF0aW9uJywgdmFsaWRhdGlvbik7XG5cbnZhbGlkYXRpb24uJGluamVjdCA9IFsnJGxvZyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHZhbGlkYXRpb24oJGxvZykge1xuXHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdHZhciBtaW5pbXVtTmFtZUxlbmd0aCA9IDM7XG5cdHZhciBtaW5pbXVtUGFzc0xlbmd0aCA9IDE2O1xuXHR2YXIgbWF4aW11bVBhc3NMZW5ndGggPSAxMDA7XG5cblx0dmFyIGFsbFZhbGlkYXRpb25zID0ge1xuXHRcdHJlcXVpcmVkOiByZXF1aXJlZCxcdFx0XHRcdFx0XHQvL25ldyBVc2VyIHZhbGlkYXRpb25zXG5cdFx0bWluTmFtZUxlbmd0aDogbWluTmFtZUxlbmd0aCxcblx0XHRtaW5QYXNzTGVuZ3RoOiBtaW5QYXNzTGVuZ3RoLFxuXHRcdG1heFBhc3NMZW5ndGg6IG1heFBhc3NMZW5ndGgsXG5cdFx0YXRMZWFzdE9uZVN5bWJvbDogYXRMZWFzdE9uZVN5bWJvbCxcblx0XHRhdExlYXN0T25lTnVtYmVyOiBhdExlYXN0T25lTnVtYmVyLFxuXHRcdGF0TGVhc3RPbmVMb3dlcmNhc2U6IGF0TGVhc3RPbmVMb3dlcmNhc2UsXG5cdFx0YXRMZWFzdE9uZVVwcGVyY2FzZTogYXRMZWFzdE9uZVVwcGVyY2FzZSxcblx0XHRpbGxlZ2FsQ2hhcmFjdGVyOiBpbGxlZ2FsQ2hhcmFjdGVyLFxuXHRcdGVtYWlsOiBlbWFpbCxcblx0XHRkYXRlT2ZCaXJ0aDogZGF0ZU9mQmlydGgsXG5cblx0XHRnZW5lcmF0ZUV2ZW50UmVxdWlybm1lbnRzOiBnZW5lcmF0ZUV2ZW50UmVxdWlybm1lbnRzLFx0XHQvL2V2ZW50IHJlcXVpcm5tZW50cyBcblx0XHR1cGRhdGVFdmVudFJlcVN0YXR1czogdXBkYXRlRXZlbnRSZXFTdGF0dXMsXG5cdFx0dXBkYXRlRXZlbnRSZXFBZGRyZXNzZWQ6IHVwZGF0ZUV2ZW50UmVxQWRkcmVzc2VkLFxuXHRcdHVwZGF0ZUV2ZW50UmVxQ2xhc3M6IHVwZGF0ZUV2ZW50UmVxQ2xhc3Ncblx0fTtcblxuXHRmdW5jdGlvbiByZXF1aXJlZCh2YWx1ZSkge1xuXHRcdGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQodmFsdWUpKSB7XG5cdFx0XHRyZXR1cm4gJ1RoaXMgaXMgYSByZXF1aXJlZCBmaWVsZCc7XG5cdFx0fSBcblx0fVxuXG5cdGZ1bmN0aW9uIG1pbk5hbWVMZW5ndGgodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdGlmKHZhbHVlLmxlbmd0aCA8IG1pbmltdW1OYW1lTGVuZ3RoKSByZXR1cm4gKCdOYW1lIHNob3VsZCBiZSBhdCBsZWFzdCAnICsgbWluaW11bU5hbWVMZW5ndGggKyAnIGNoYXJhY3RlcnMnKTtcblx0XHR9IFxuXHR9XG5cblx0ZnVuY3Rpb24gbWluUGFzc0xlbmd0aCh2YWx1ZSkge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0aWYoISh2YWx1ZS5sZW5ndGggPCBtaW5pbXVtUGFzc0xlbmd0aCkpIHJldHVybiB0cnVlO1xuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRmdW5jdGlvbiBtYXhQYXNzTGVuZ3RoKHZhbHVlKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHRpZighKHZhbHVlLmxlbmd0aCA+IG1heGltdW1QYXNzTGVuZ3RoKSkgcmV0dXJuIHRydWU7XG5cdFx0fSBcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRmdW5jdGlvbiBhdExlYXN0T25lU3ltYm9sKHZhbHVlKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHQvLyBidWlsZCByZWdleFxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW1xcIVxcQFxcI1xcJFxcJVxcXlxcJlxcKl1cIik7XG5cblx0XHRcdC8vY2hlY2sgY29uc3RyYXRpbnRcblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2YWx1ZSkpIHtcblx0XHRcdFx0Ly9zdWNjZXNzOiBhdCBsZWFzdCBvbmUgc3BlY2lhbCBjaGFyYWN0ZXIgZm91bmRcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2ZhaWx1cmU6IGRpZG4ndCBmaW5kIGFueSBzcGNpYWwgY2hhcmFjdGVyc1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0ZnVuY3Rpb24gYXRMZWFzdE9uZU51bWJlcih2YWx1ZSkge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0Ly8gYnVpbGQgcmVnZXhcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIlswLTldXCIsIFwiXCIpO1xuXG5cdFx0XHQvL2NoZWNrIGNvbnN0cmF0aW50XG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3QodmFsdWUpKSB7XG5cdFx0XHRcdC8vc3VjY2VzczogYXQgbGVhc3Qgb25lIHNwZWNpYWwgY2hhcmFjdGVyIGZvdW5kXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9mYWlsdXJlOiBkaWRuJ3QgZmluZCBhbnkgc3BjaWFsIGNoYXJhY3RlcnNcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG4gICAgZnVuY3Rpb24gYXRMZWFzdE9uZUxvd2VyY2FzZSh2YWx1ZSkge1xuICAgIFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHQvLyBidWlsZCByZWdleFxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW2Etel1cIiwgXCJcIik7XG5cblx0XHRcdC8vY2hlY2sgY29uc3RyYXRpbnRcblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2YWx1ZSkpIHtcblx0XHRcdFx0Ly9zdWNjZXNzOiBhdCBsZWFzdCBvbmUgc3BlY2lhbCBjaGFyYWN0ZXIgZm91bmRcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2ZhaWx1cmU6IGRpZG4ndCBmaW5kIGFueSBzcGNpYWwgY2hhcmFjdGVyc1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGF0TGVhc3RPbmVVcHBlcmNhc2UodmFsdWUpIHtcbiAgICBcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0Ly8gYnVpbGQgcmVnZXhcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIltBLVpdXCIsIFwiXCIpO1xuXG5cdFx0XHQvL2NoZWNrIGNvbnN0cmF0aW50XG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3QodmFsdWUpKSB7XG5cdFx0XHRcdC8vc3VjY2VzczogYXQgbGVhc3Qgb25lIHNwZWNpYWwgY2hhcmFjdGVyIGZvdW5kXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9mYWlsdXJlOiBkaWRuJ3QgZmluZCBhbnkgc3BjaWFsIGNoYXJhY3RlcnNcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbGxlZ2FsQ2hhcmFjdGVyKHZhbHVlKSB7XG4gICAgXHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdC8vIGJ1aWxkIHJlZ2V4XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbXkEtejAtOVxcIVxcQFxcI1xcJFxcJVxcXlxcJlxcKl1cIiwgXCJcIik7XG5cblx0XHRcdC8vY2hlY2sgY29uc3RyYXRpbnRcblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2YWx1ZSkpIHtcblx0XHRcdFx0Ly9zdWNjZXNzOiBhdCBsZWFzdCBvbmUgc3BlY2lhbCBjaGFyYWN0ZXIgZm91bmRcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9mYWlsdXJlOiBkaWRuJ3QgZmluZCBhbnkgc3BjaWFsIGNoYXJhY3RlcnNcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiBlbWFpbCh2YWx1ZSkge1xuICAgIFx0Ly9kZWZpbmUgY29uc3RyYWludHNcbiAgICBcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSsoPzpcXC5bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKSpAKD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1xcLikrW2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1wiLCBcIlwiKTtcbiAgICBcdFxuICAgIFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpICYmICFjb25zdHJhaW50LnRlc3QodmFsdWUpKSB7XG4gICAgXHRcdHJldHVybiAnTm90IGEgdmFsaWQgZW1haWwnO1xuICAgIFx0fVxuICAgIFx0Ly9pZighY29uc3RyYWludC50ZXN0KHZhbHVlKSkgcmV0dXJuICdOb3QgYSB2YWxpZCBlLW1haWwgYWRkcmVzcydcbiAgICBcdFxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRhdGVPZkJpcnRoKHZhbHVlKSB7fVxuXG4gICAgZnVuY3Rpb24gZ2VuZXJhdGVFdmVudFJlcXVpcm5tZW50cygpIHtcbiAgICBcdC8vYnVpbGQgdGhlIG9iamVjdCBhbmQgcmV0dXJuIGl0XG4gICAgXHR2YXIgZXZlbnRWYWxpZGF0aW9ucyA9IHtcbiAgICBcdFx0ZXZlbnROYW1lOiB7IFxuICAgIFx0XHRcdGNvbXBsZXRlZCA6ZmFsc2UsIFxuICAgIFx0XHRcdGFkZHJlc3NlZDpmYWxzZSwgXG4gICAgXHRcdFx0cm93OiB7XG4gICAgXHRcdFx0XHRjbGFzczoge1xuICAgIFx0XHRcdFx0XHQnY29sLXhzLTEyJzogdHJ1ZSxcbiAgICBcdFx0XHRcdFx0J2NvbC1zbS0xMic6IHRydWUsXG4gICAgXHRcdFx0XHRcdCdmb3JtLWdyb3VwJzogdHJ1ZSxcbiAgICBcdFx0XHRcdFx0J2hhcy1zdWNjZXNzJzogZmFsc2UsXG4gICAgXHRcdFx0XHRcdCdoYXMtZXJyb3InOiBmYWxzZVxuICAgIFx0XHRcdFx0fVxuICAgIFx0XHRcdH0sXG4gICAgXHRcdFx0bGFiZWw6IHtcbiAgICBcdFx0XHRcdGNsYXNzOiB7XG4gICAgXHRcdFx0XHRcdCdjb250cm9sLWxhYmVsJzogdHJ1ZVxuICAgIFx0XHRcdFx0fVxuICAgIFx0XHRcdH0sXG4gICAgXHRcdFx0aW5wdXQ6IHtcbiAgICBcdFx0XHRcdGNsYXNzOiB7XG4gICAgXHRcdFx0XHRcdCdmb3JtLWNvbnRyb2wnOiB0cnVlXG4gICAgXHRcdFx0XHR9XG4gICAgXHRcdFx0fVxuICAgIFx0XHR9LFxuXHRcdFx0ZXZlbnRIb3N0OiB7IGNvbXBsZXRlZCA6ZmFsc2UsIGFkZHJlc3NlZDpmYWxzZSwgcm93OiB7IGNsYXNzOiB7J2NvbC14cy0xMic6IHRydWUsICdjb2wtc20tMTInOiB0cnVlLCAnZm9ybS1ncm91cCc6IHRydWUsICdoYXMtc3VjY2Vzcyc6IGZhbHNlLCAnaGFzLWVycm9yJzogZmFsc2UgfSB9LCBsYWJlbDogeyBjbGFzczogeyAnY29udHJvbC1sYWJlbCc6IHRydWUgfSB9LCBpbnB1dDogeyBjbGFzczogeyAnZm9ybS1jb250cm9sJzogdHJ1ZSB9IH0gfSxcblx0XHRcdGV2ZW50VHlwZTogeyBjb21wbGV0ZWQgOmZhbHNlLCBhZGRyZXNzZWQ6ZmFsc2UsIHJvdzogeyBjbGFzczogeydjb2wteHMtMTInOiB0cnVlLCAnY29sLXNtLTEyJzogdHJ1ZSwgJ2Zvcm0tZ3JvdXAnOiB0cnVlLCAnaGFzLXN1Y2Nlc3MnOiBmYWxzZSwgJ2hhcy1lcnJvcic6IGZhbHNlIH0gfSwgbGFiZWw6IHsgY2xhc3M6IHsgJ2NvbnRyb2wtbGFiZWwnOiB0cnVlIH0gfSwgaW5wdXQ6IHsgY2xhc3M6IHsgJ2Zvcm0tY29udHJvbCc6IHRydWUgfSB9IH0sXG5cdFx0XHRldmVudFN0YXJ0OiB7IGNvbXBsZXRlZCA6ZmFsc2UsIGFkZHJlc3NlZDpmYWxzZSwgcm93OiB7IGNsYXNzOiB7J2NvbC14cy0xMic6IHRydWUsICdjb2wtc20tMTInOiB0cnVlLCAnZm9ybS1ncm91cCc6IHRydWUsICdoYXMtc3VjY2Vzcyc6IGZhbHNlLCAnaGFzLWVycm9yJzogZmFsc2UgfSB9LCBsYWJlbDogeyBjbGFzczogeyAnY29udHJvbC1sYWJlbCc6IHRydWUgfSB9LCBpbnB1dDogeyBjbGFzczogeyAnZm9ybS1jb250cm9sJzogdHJ1ZSB9IH0gfSxcblx0XHRcdGV2ZW50RW5kOiB7IGNvbXBsZXRlZCA6ZmFsc2UsIGFkZHJlc3NlZDpmYWxzZSwgcm93OiB7IGNsYXNzOiB7J2NvbC14cy0xMic6IHRydWUsICdjb2wtc20tMTInOiB0cnVlLCAnZm9ybS1ncm91cCc6IHRydWUsICdoYXMtc3VjY2Vzcyc6IGZhbHNlLCAnaGFzLWVycm9yJzogZmFsc2UgfSB9LCBsYWJlbDogeyBjbGFzczogeyAnY29udHJvbC1sYWJlbCc6IHRydWUgfSB9LCBpbnB1dDogeyBjbGFzczogeyAnZm9ybS1jb250cm9sJzogdHJ1ZSB9IH0gfSxcblx0XHRcdGV2ZW50U3RyZWV0MDE6IHsgY29tcGxldGVkIDpmYWxzZSwgYWRkcmVzc2VkOmZhbHNlLCByb3c6IHsgY2xhc3M6IHsnY29sLXhzLTEyJzogdHJ1ZSwgJ2NvbC1zbS0xMic6IHRydWUsICdmb3JtLWdyb3VwJzogdHJ1ZSwgJ2hhcy1zdWNjZXNzJzogZmFsc2UsICdoYXMtZXJyb3InOiBmYWxzZSB9IH0sIGxhYmVsOiB7IGNsYXNzOiB7ICdjb250cm9sLWxhYmVsJzogdHJ1ZSB9IH0sIGlucHV0OiB7IGNsYXNzOiB7ICdmb3JtLWNvbnRyb2wnOiB0cnVlIH0gfSB9LFxuXHRcdFx0ZXZlbnRDaXR5OiB7IGNvbXBsZXRlZCA6ZmFsc2UsIGFkZHJlc3NlZDpmYWxzZSwgcm93OiB7IGNsYXNzOiB7J2NvbC14cy0xMic6IHRydWUsICdjb2wtc20tMTInOiB0cnVlLCAnZm9ybS1ncm91cCc6IHRydWUsICdoYXMtc3VjY2Vzcyc6IGZhbHNlLCAnaGFzLWVycm9yJzogZmFsc2UgfSB9LCBsYWJlbDogeyBjbGFzczogeyAnY29udHJvbC1sYWJlbCc6IHRydWUgfSB9LCBpbnB1dDogeyBjbGFzczogeyAnZm9ybS1jb250cm9sJzogdHJ1ZSB9IH0gfSxcblx0XHRcdGV2ZW50U3RhdGU6IHsgY29tcGxldGVkIDpmYWxzZSwgYWRkcmVzc2VkOmZhbHNlLCByb3c6IHsgY2xhc3M6IHsnY29sLXhzLTEyJzogdHJ1ZSwgJ2NvbC1zbS0xMic6IHRydWUsICdmb3JtLWdyb3VwJzogdHJ1ZSwgJ2hhcy1zdWNjZXNzJzogZmFsc2UsICdoYXMtZXJyb3InOiBmYWxzZSB9IH0sIGxhYmVsOiB7IGNsYXNzOiB7ICdjb250cm9sLWxhYmVsJzogdHJ1ZSB9IH0sIGlucHV0OiB7IGNsYXNzOiB7ICdmb3JtLWNvbnRyb2wnOiB0cnVlIH0gfSB9LFxuXHRcdFx0ZXZlbnRaaXA6IHsgY29tcGxldGVkIDpmYWxzZSwgYWRkcmVzc2VkOmZhbHNlLCByb3c6IHsgY2xhc3M6IHsnY29sLXhzLTEyJzogdHJ1ZSwgJ2NvbC1zbS0xMic6IHRydWUsICdmb3JtLWdyb3VwJzogdHJ1ZSwgJ2hhcy1zdWNjZXNzJzogZmFsc2UsICdoYXMtZXJyb3InOiBmYWxzZSB9IH0sIGxhYmVsOiB7IGNsYXNzOiB7ICdjb250cm9sLWxhYmVsJzogdHJ1ZSB9IH0sIGlucHV0OiB7IGNsYXNzOiB7ICdmb3JtLWNvbnRyb2wnOiB0cnVlIH0gfSB9LFxuXHRcdFx0ZXZlbnRHdWVzdDogeyBjb21wbGV0ZWQgOmZhbHNlLCBhZGRyZXNzZWQ6ZmFsc2UsIHJvdzogeyBjbGFzczogeydjb2wteHMtMTInOiB0cnVlLCAnY29sLXNtLTEyJzogdHJ1ZSwgJ2Zvcm0tZ3JvdXAnOiB0cnVlLCAnaGFzLXN1Y2Nlc3MnOiBmYWxzZSwgJ2hhcy1lcnJvcic6IGZhbHNlIH0gfSwgbGFiZWw6IHsgY2xhc3M6IHsgJ2NvbnRyb2wtbGFiZWwnOiB0cnVlIH0gfSwgaW5wdXQ6IHsgY2xhc3M6IHsgJ2Zvcm0tY29udHJvbCc6IHRydWUgfSB9IH1cbiAgICBcdH1cblxuICAgIFx0cmV0dXJuIGV2ZW50VmFsaWRhdGlvbnM7XG4gICAgfVxuXG5cdGZ1bmN0aW9uIHVwZGF0ZUV2ZW50UmVxU3RhdHVzKCkge31cblx0ZnVuY3Rpb24gdXBkYXRlRXZlbnRSZXFBZGRyZXNzZWQoKSB7fSBcblx0ZnVuY3Rpb24gdXBkYXRlRXZlbnRSZXFDbGFzcygpIHt9XG5cblx0cmV0dXJuIGFsbFZhbGlkYXRpb25zO1xufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbmZpZyhjb25maWcpO1xuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBjb25maWcoJHJvdXRlUHJvdmlkZXIpIHsgICBcbiAgICAkcm91dGVQcm92aWRlclxuICAgIC53aGVuKCcvJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2xhbmRpbmdQYWdlLmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdMYW5kaW5nUGFnZUNvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICB9KVxuICAgIC53aGVuKCcvc2lnbnVwJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL25ld1VzZXJTaWdudXAuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ05ld1VzZXJTaWduVXBDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgfSlcbiAgICAud2hlbignL2xvZ2luJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3JlZ2lzdGVyZWRVc2VyTG9naW4uaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1JlZ1VzZXJMb2dpbkNvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICB9KVxuICAgIC53aGVuKCcvdXNlckluZm9ybWF0aW9uLzp1aWQ/Jywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3VzZXJJbmZvcm1hdGlvbi5odG0nLFxuICAgICAgICBjb250cm9sbGVyOiAnVXNlckluZm9ybWF0aW9uQ29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgcmVzb2x2ZTogeyAvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgICAgIHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2U6IHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2VcbiAgICAgICAgfVxuICAgIH0pXG4gICAgLndoZW4oJy91c2VyRXZlbnRzLzp1aWQ/Jywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3VzZXJFdmVudHMuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1VzZXJFdmVudHNDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICByZXNvbHZlOiB7IC8qIEBuZ0luamVjdCAqL1xuICAgICAgICAgICAgdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZTogdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZVxuICAgICAgICB9XG4gICAgfSlcbiAgICAud2hlbignL2V2ZW50L2hvc3QvOmV2ZW50SWQvOnVpZC86c2VjdGlvbicsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9ob3N0RXZlbnQuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ0hvc3RFdmVudENvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgIHJlc29sdmU6IHsgLyogQG5nSW5qZWN0ICovXG4gICAgICAgICAgICB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlOiB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlLFxuICAgICAgICB9XG4gICAgfSlcbiAgICAud2hlbignL2V2ZW50L2d1ZXN0LzpldmVudElkLzp1aWQvOmhvc3RJZCcsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9ndWVzdEV2ZW50Lmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdHdWVzdEV2ZW50Q29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgcmVzb2x2ZTogeyAvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgICAgIHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2U6IHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2UsXG4gICAgICAgIH1cbiAgICB9KVxuICAgIC53aGVuKCcvZXZlbnQvOmV2ZW50SWQ/Lzpob3N0SWQ/Lzp1aWQ/LzpzZWN0aW9uPycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9hbkV2ZW50Lmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdBbkV2ZW50Q29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgcmVzb2x2ZTogeyAvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgICAgIHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2U6IHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2UsXG4gICAgICAgICAgICBldmVudFZpZXdDaGFuZ2VyOiBldmVudFZpZXdDaGFuZ2VyXG4gICAgICAgIH1cbiAgICB9KVxuICAgIC5vdGhlcndpc2Uoe1xuICAgICAgICByZWRpcmVjdFRvOiAnLydcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZShhdXRoU2VydmljZSkge1xuICAgIGF1dGhTZXJ2aWNlLmlzTG9nZ2VkSW4oKTtcbn07XG5cbmZ1bmN0aW9uIGV2ZW50Vmlld0NoYW5nZXIodHJhZmZpY1ZhbGV0LCAkcm91dGUpIHtcbiAgICB0cmFmZmljVmFsZXQuZXZlbnRSb3V0ZSgkcm91dGUuY3VycmVudC5wYXJhbXMuZXZlbnRJZCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvdXRlLmN1cnJlbnQucGFyYW1zLmhvc3RJZCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvdXRlLmN1cnJlbnQucGFyYW1zLnVpZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcm91dGUuY3VycmVudC5wYXJhbXMuc2VjdGlvbik7XG59OyIsIlxuY29uZmlnLiRpbmplY3QgPSBbXCIkcm91dGVQcm92aWRlclwiXTtcbnVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2UuJGluamVjdCA9IFtcImF1dGhTZXJ2aWNlXCJdO1xuZXZlbnRWaWV3Q2hhbmdlci4kaW5qZWN0ID0gW1widHJhZmZpY1ZhbGV0XCIsIFwiJHJvdXRlXCJdO2FuZ3VsYXJcblx0Lm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnLCBbXG5cdFx0J25nUm91dGUnLFxuXHRcdCduZ1RvdWNoJyxcblx0XHQnZmlyZWJhc2UnXG5cdF0pO1xuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignQW5FdmVudENvbnRyb2xsZXInLCBBbkV2ZW50Q29udHJvbGxlcik7XG5cbkFuRXZlbnRDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJHJvdXRlUGFyYW1zJywgXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBBbkV2ZW50Q29udHJvbGxlcigkbG9nLCAkcm91dGVQYXJhbXMpIHtcblx0dmFyIHZtID0gdGhpcztcblx0XG5cdC8vbG9jYWwgdmFyaWFibGVzXG5cdHZtLnRlbXBUaW1lID0ge3N0YXJ0OiAnJywgZW5kOiAnJ307XG5cdHZtLnVzZXJJc0hvc3QgPSBmYWxzZTtcblxuXG5cdC8vTG9jYWwgTWV0aG9kc1xuXHRmdW5jdGlvbiBpbml0KCkge1xuXHRcdC8vZGVjbGFyZSBhbmQgaW5pdGlhbGl6ZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2bS50ZW1wRGF0ZVRpbWUgPSB7c3RhcnQ6ICcnLCBlbmQ6ICcnfTtcblx0XHR2bS5uZXdHdWVzdCA9IHtuYW1lOiAnJywgZW1haWw6e2FkZHJlc3M6JycsIHZhbGlkOmZhbHNlLCBzdHlsZTp7Y29sb3I6Jyd9fX07XG5cdFx0dm0uc2hvd0lmSG9zdCA9IGZhbHNlO1xuXHRcdHZtLmhpZGVJZkF0dGVuZGluZyA9IHRydWU7XG5cdFx0Ly9zZWN0aW9uc1xuXHRcdHZtLm1hbmFnZVNlY3Rpb25zID0ge1xuXHRcdFx0MToge2FjdGl2ZTogdHJ1ZSwgY29tcGxldGU6IGZhbHNlLCBzdHlsZTp7Y29sb3I6J2JsYWNrJywgJ2JhY2tncm91bmQtY29sb3InOid5ZWxsb3cnfX0sXG5cdFx0XHQyOiB7YWN0aXZlOiBmYWxzZSwgY29tcGxldGU6IGZhbHNlLCBzdHlsZTp7Y29sb3I6J3doaXRlJywgJ2JhY2tncm91bmQtY29sb3InOidncmF5J319LFxuXHRcdFx0Mzoge2FjdGl2ZTogZmFsc2UsIGNvbXBsZXRlOiBmYWxzZSwgc3R5bGU6e2NvbG9yOid3aGl0ZScsICdiYWNrZ3JvdW5kLWNvbG9yJzonZ3JheSd9fVxuXHRcdH07XG5cblx0XHQvL2NoZWNrIHVzZXIgdG8gZGV0ZXJtaW5lIHN0YXRlXG5cdFx0Y2hlY2tGb3JIb3N0KCk7XG5cdFx0Y2hlY2tJZkd1ZXN0SXNBdHRlbmRpbmcoKTtcblxuXHRcdC8vb3BlbiB1cCBzZWN0aW9uc1xuXHRcdGlmKCF2bS5zaG93SWZIb3N0KSBvcGVuQWxsU2VjdGlvbnMoKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHV0ZjhfdG9fYjY0KHN0cikge1xuXHRcdHJldHVybiBidG9hKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiBiNjRfdG9fdXRmOChzdHIpIHtcbiAgICBcdHJldHVybiBhdG9iKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH1cblxuXHRmdW5jdGlvbiBjbGVhbk5ld0d1ZXN0VmFyaWFibGUoKSB7XG5cdFx0dm0ubmV3R3Vlc3QgPSB7bmFtZTogJycsIGVtYWlsOnthZGRyZXNzOicnLCB2YWxpZDpmYWxzZSwgc3R5bGU6e2NvbG9yOicnfX19O1xuXHR9XG5cblx0ZnVuY3Rpb24gaW52aXRlQVJlZ2lzdGVyZWRVc2VyKHVpZCkge1xuXHRcdCRsb2cuaW5mbygnYWRkaW5nIHRoZW0gdG8gdGhlIHJlZ2lzdGVyZWQgdXNlcnMgbGlzdCAnICsgdWlkKTtcblx0XHQvL3NldCB0aGUgbmV3IGV2ZW50XG5cdFx0cmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdwZW5kaW5nJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJHJvdXRlUGFyYW1zLmV2ZW50SWQpLnNldCh7XG5cdFx0XHRpZDogJHJvdXRlUGFyYW1zLmV2ZW50SWQsXG5cdFx0XHRldmVudFRpbWVzOiB7XG5cdFx0XHRcdHN0YXJ0OiB2bS5ldmVudC5ldmVudFRpbWVzLnN0YXJ0LFxuXHRcdFx0XHRlbmQ6IHZtLmV2ZW50LmV2ZW50VGltZXMuZW5kXG5cdFx0XHR9LFxuXHRcdFx0bmFtZTogdm0uZXZlbnQubmFtZSxcblx0XHRcdGhvc3Q6ICRyb3V0ZVBhcmFtcy51aWRcblx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbygndGhlcmUgd2FzIGFuIGVycm9yJyArIGVycm9yKTtcblx0XHR9KTtcblx0XHQvL2lmIHRoZXJlIHdhcyBhbiB1cGRhdGVkIHBsYWNlIGhvbGRlciwgcmVtb3ZlIGl0XG5cdFx0cmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdwZW5kaW5nJykub25jZSgndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0dmFyIGNoZWNrRm9yUGxhY2Vob2xkZXIgPSBzbmFwc2hvdC52YWwoKVxuXHRcdFx0JGxvZy5pbmZvKHNuYXBzaG90LnZhbCgpKTtcblxuXHRcdFx0aWYoY2hlY2tGb3JQbGFjZWhvbGRlci51cGRhdGVkKSB7XG5cdFx0XHRcdCRsb2cuaW5mbygnZGVsZXRpbmcgdXBkYXRlZCcpO1xuXHRcdFx0XHRyZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ3BlbmRpbmcnKS5jaGlsZCgndXBkYXRlZCcpLnJlbW92ZShmdW5jdGlvbihlcnJvck9iamVjdCkge1xuXHRcdFx0XHRcdGlmKGVycm9yT2JqZWN0KSAkbG9nLmluZm8oXCJEZWxldGluZyBmYWlsZWQ6IFwiICsgZXJyb3JPYmplY3QuY29kZSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlICRsb2cuaW5mbygnbm90aGluZyB0byBkbycpO1xuXG5cdFx0fSwgZnVuY3Rpb24oZXJyb3JPYmplY3QpIHtcblx0XHRcdGlmKGVycm9yT2JqZWN0KSAkbG9nLmluZm8oXCJUaGUgcmVhZCBmYWlsZWQ6IFwiICsgZXJyb3JPYmplY3QuY29kZSk7XG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBpbnZpdGVBblVucmVnaXN0ZXJlZFVzZXIodXNlcktleSkge1xuXHRcdCRsb2cuaW5mbygnYWRkaW5nIHRoZW0gdG8gdGhlIFVOUkVHSVNURVJFRCB1c2VycyBsaXN0ICcgKyB1c2VyS2V5KTtcblx0XHRyZWYuY2hpbGQoJ1VucmVnaXN0ZXJlZFVzZXJzJykuY2hpbGQodXNlcktleSkuY2hpbGQoJ3BlbmRpbmcnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS5jaGlsZCgkcm91dGVQYXJhbXMuZXZlbnRJZCkuc2V0KHtcblx0XHRcdGlkOiAkcm91dGVQYXJhbXMuZXZlbnRJZCxcblx0XHRcdGhvc3Q6ICRyb3V0ZVBhcmFtcy51aWQsXG5cdFx0XHRldmVudFRpbWVzOiB7XG5cdFx0XHRcdHN0YXJ0OiB2bS5ldmVudC5ldmVudFRpbWVzLnN0YXJ0LFxuXHRcdFx0XHRlbmQ6IHZtLmV2ZW50LmV2ZW50VGltZXMuZW5kXG5cdFx0XHR9LFxuXHRcdFx0bmFtZTogdm0uZXZlbnQubmFtZVxuXHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKCd0aGVyZSB3YXMgYW4gZXJyb3InICsgZXJyb3IpO1xuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gY2hlY2tGb3JIb3N0KCkge1xuXHRcdC8vY2hlY2sgZXZlbnQgaG9zdFxuXHRcdHZhciBhdXRoRGF0YSA9IHJlZi5nZXRBdXRoKCk7XG5cblx0XHRpZihhdXRoRGF0YS51aWQgPT0gJHJvdXRlUGFyYW1zLmhvc3RJZCkge1xuXHRcdFx0JGxvZy5pbmZvKCdpcyB0aGUgaG9zdCcpO1xuXHRcdFx0dm0uc2hvd0lmSG9zdCA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCRsb2cuaW5mbygnbm90IHRoZSBob3N0Jyk7XG5cdFx0XHR2bS5zaG93SWZIb3N0ID0gZmFsc2U7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gY2hlY2tJZkd1ZXN0SXNBdHRlbmRpbmcoKSB7XG5cdFx0aWYoIXZtLnNob3dJZkhvc3QpIHtcblx0XHRcdCRsb2cuaW5mbygnY2hlY2sgZ3Vlc3QgYXR0ZW5kYW5jZScpO1xuXHRcdFx0dXNlckV2ZW50cy5jaGlsZCgnZ3Vlc3RMaXN0Jykub24oJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdFx0dmFyIGFsbEd1ZXN0cyA9IHNuYXBzaG90LnZhbCgpO1xuXHRcdFx0XHR2bS5oaWRlSWZBdHRlbmRpbmcgPSAhYWxsR3Vlc3RzWyRyb3V0ZVBhcmFtcy51aWRdLmF0dGVuZGluZztcblx0XHRcdFx0XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBvcGVuQWxsU2VjdGlvbnMoKSB7XG5cdFx0dm0ubWFuYWdlU2VjdGlvbnNbMV0uYWN0aXZlID0gdHJ1ZTtcblx0XHR2bS5tYW5hZ2VTZWN0aW9uc1syXS5hY3RpdmUgPSB0cnVlO1xuXHRcdHZtLm1hbmFnZVNlY3Rpb25zWzNdLmFjdGl2ZSA9IHRydWU7XG5cdH1cblxuXHRmdW5jdGlvbiBzYXZlRXZlbnQoKSB7XG5cdFx0dm0uZXZlbnQuJHNhdmUoKS50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdFx0JGxvZy5pbmZvKCdldmVudCBzYXZlZCcpO1xuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2Vycm9yISAnICsgZXJyb3IpO1xuXHRcdH0pO1xuXHR9XG5cblx0Ly92aWV3IE1ldGhvZFxuXHR2bS5zZXRUZW1wVGltZSA9IGZ1bmN0aW9uKGVuZHBvaW50KSB7XG5cdFx0aWYoZW5kcG9pbnQgPT0gJ3N0YXJ0Jykgdm0udGVtcERhdGVUaW1lLnN0YXJ0ID0gbmV3IERhdGUoKTtcblx0XHRpZihlbmRwb2ludCA9PSAnZW5kJykgdm0udGVtcERhdGVUaW1lLmVuZCA9IG5ldyBEYXRlKCk7XG5cdH1cblxuXHR2bS51bml4VGltZVRvRGF0ZVRpbWUgPSBmdW5jdGlvbiAodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fTtcblxuXHR2bS5kYXRlVGltZVRvVW5peFRpbWUgPSBmdW5jdGlvbiAoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH07XG5cblx0dm0uc3VibWl0ID0gZnVuY3Rpb24oKSB7XG5cdFx0JGxvZy5pbmZvKCdzdWJtaXR0aW5nIHRoZSBmb3JtIG5vdyEnKTtcblx0fVxuXG5cdHZtLmJhY2tUb1VzZXJFdmVudHMgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9jYXRpb24ucGF0aCgnL3VzZXJFdmVudHMvJyArICRyb3V0ZVBhcmFtcy51aWQgKyAnLycgKyAkcm91dGVQYXJhbXMudG9rZW4pO1xuXHR9XG5cblx0dm0uZXZlbnRSZWRpcmVjdCA9IGZ1bmN0aW9uKHBhdGgsIGV2ZW50SUQpIHtcblx0XHR2YXIgZnVsbFBhdGggPSBwYXRoICsgJy8nICsgJHJvdXRlUGFyYW1zLnVpZCArICcvJyArICRyb3V0ZVBhcmFtcy50b2tlbjtcblx0XHQvL3JlZGlyZWN0XG5cdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyB0bzogJyArIGZ1bGxQYXRoKTtcblx0XHQkbG9jYXRpb24ucGF0aChmdWxsUGF0aCk7XG5cdH1cblxuXHR2bS5jaGFuZ2VTZWN0aW9uID0gZnVuY3Rpb24odGFyZ2V0U2VjdGlvbikge1xuXHRcdCRsb2cuaW5mbygnYXJlIHdlIGhlcmUnKTtcblx0XHRmb3IoaSA9IDE7IGkgPD0zOyBpKyspIHtcblx0XHRcdGlmKGk9PXRhcmdldFNlY3Rpb24pIHtcblx0XHRcdFx0dm0ubWFuYWdlU2VjdGlvbnNbaV0uYWN0aXZlID0gdHJ1ZTtcblx0XHRcdFx0dm0ubWFuYWdlU2VjdGlvbnNbaV0uc3R5bGVbJ2JhY2tncm91bmQtY29sb3InXSA9J3llbGxvdyc7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLnN0eWxlWydjb2xvciddID0nYmxhY2snO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0ubWFuYWdlU2VjdGlvbnNbaV0uYWN0aXZlID0gZmFsc2U7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLnN0eWxlWydiYWNrZ3JvdW5kLWNvbG9yJ10gPSdncmF5Jztcblx0XHRcdFx0dm0ubWFuYWdlU2VjdGlvbnNbaV0uc3R5bGVbJ2NvbG9yJ10gPSd3aGl0ZSc7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0dm0uc2F2ZUV2ZW50VGltZSA9IGZ1bmN0aW9uKGRhdGVUaW1lLCB0YXJnZXQpIHtcblx0XHQvL2lmIHRoaXMgZXZlbnQgZGlkbid0IGhhdmUgYSBzdGFydCB0aW1lLCBjcmVhdGUgaXRcblx0XHRpZighdm0uZXZlbnQuZXZlbnRUaW1lcykgeyBcblx0XHRcdHZtLmV2ZW50LmV2ZW50VGltZXMgPSB7c3RhcnQ6ICcnLCBlbmQ6ICcnfTtcblx0XHRcdHZtLmV2ZW50LmV2ZW50VGltZXMuc3RhcnQgPSB2bS5kYXRlVGltZVRvVW5peFRpbWUodm0udGVtcERhdGVUaW1lLnN0YXJ0KTsgXG5cdFx0XHR2bS5ldmVudC5ldmVudFRpbWVzLmVuZCA9IHZtLmRhdGVUaW1lVG9Vbml4VGltZSh2bS50ZW1wRGF0ZVRpbWUuZW5kKTtcblx0XHR9XG5cblx0XHRpZigodm0udGVtcERhdGVUaW1lLmVuZCA8IHZtLnRlbXBEYXRlVGltZS5zdGFydCkgJiYgdGFyZ2V0ID09ICdzdGFydCcpIHZtLnRlbXBEYXRlVGltZS5lbmQgPSB2bS50ZW1wRGF0ZVRpbWUuc3RhcnQ7XG5cdFx0aWYodGFyZ2V0ID09ICdzdGFydCcpIHZtLmV2ZW50LmV2ZW50VGltZXMuc3RhcnQgPSB2bS5kYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpO1xuXHRcdGlmKHRhcmdldCA9PSAnZW5kJykgdm0uZXZlbnQuZXZlbnRUaW1lcy5lbmQgPSB2bS5kYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpO1xuXHR9XG5cblx0dm0uZ3Vlc3RzQXJlSW52aXRlZCA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHZtLmV2ZW50Lmd1ZXN0TGlzdCkgcmV0dXJuIHRydWU7XG5cdFx0ZWxzZSByZXR1cm4gZmFsc2U7XG5cdH1cblxuXHR2bS52YWxpZGF0ZUd1ZXN0RW1haWwgPSBmdW5jdGlvbigpIHtcblx0XHQvL2lmIHRoZXJlIGlzIGFuIGVtYWlsIGFkZHJlc3Ncblx0XHRpZih2bS5uZXdHdWVzdC5lbWFpbC5hZGRyZXNzKSB7XG5cdFx0XHQvL2NoZWNrIHZhbGlkaXR5XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKD86XFwuW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKykqQCg/OlthLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cXC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cIiwgXCJcIik7XG5cblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2bS5uZXdHdWVzdC5lbWFpbC5hZGRyZXNzKSkge1xuXHRcdFx0XHR2bS5uZXdHdWVzdC5lbWFpbC52YWxpZCA9IHRydWU7XG5cdFx0XHRcdHZtLm5ld0d1ZXN0LmVtYWlsLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0ubmV3R3Vlc3QuZW1haWwudmFsaWQgPSBmYWxzZTtcblx0XHRcdFx0dm0ubmV3R3Vlc3QuZW1haWwuc3R5bGUgPSB7Y29sb3I6Jyd9O1xuXHRcdFx0fVx0XHRcdFxuXHRcdH1cblx0fVxuXG5cdHZtLmlzU2VjdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24oKSB7XG5cdFx0Zm9yKGk9MDtpPDg7aSsrKSB7XG5cdFx0XHQkbG9nLmluZm8odm0ucmVxdWlyZWRJbnB1dHNbaV0pO1xuXHRcdH1cblx0fVxuXG5cdHZtLnNhdmVBbmRBZHZhbmNlID0gZnVuY3Rpb24oKSB7XG5cdFx0dm0uZXZlbnQuJHNhdmUoKS50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdFx0JGxvZy5pbmZvKCdldmVudCBzYXZlZCcpO1xuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2Vycm9yISAnICsgZXJyb3IpO1xuXHRcdH0pO1xuXG5cdFx0Ly9jaGVjayBmb3IgY29tcGxldGVuZXNcblx0XHR2bS5pc1NlY3Rpb25Db21wbGV0ZSgpO1xuXG5cdFx0aWYodm0ubWFuYWdlU2VjdGlvbnNbMV0uY29tcGxldGUgPT0gdHJ1ZSAmJiB2bS5tYW5hZ2VTZWN0aW9uc1syXS5jb21wbGV0ZSA9PSB0cnVlICYmIHZtLm1hbmFnZVNlY3Rpb25zWzNdLmNvbXBsZXRlID09IHRydWUpIHtcblx0XHRcdHZtLmV2ZW50UmVkaXJlY3QoJy91c2VyRXZlbnRzJywgJHJvdXRlUGFyYW1zLnVpZCk7XG5cdFx0fSBlbHNlIGlmICh2bS5tYW5hZ2VTZWN0aW9uc1sxXS5hY3RpdmUpIHZtLmNoYW5nZVNlY3Rpb24oMik7XG5cdFx0ZWxzZSBpZiAodm0ubWFuYWdlU2VjdGlvbnNbMl0uYWN0aXZlKSB2bS5jaGFuZ2VTZWN0aW9uKDMpO1xuXHRcdGVsc2UgaWYgKHZtLm1hbmFnZVNlY3Rpb25zWzNdLmFjdGl2ZSkgdm0uY2hhbmdlU2VjdGlvbigxKTtcblx0fVxuXG5cdHZtLmFkZEd1ZXN0VG9Ib3N0c0xpc3QgPSBmdW5jdGlvbigpIHtcblx0XHQvL2RlY2xhcmUgYW5kIGluaXRpYWxpemUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIHVzZXJLZXkgPSB1dGY4X3RvX2I2NCh2bS5uZXdHdWVzdC5lbWFpbC5hZGRyZXNzKTtcblxuXHRcdC8vaWYgZW1haWwgaXMgdmFsaWQgYW5kIG5hbWUgZXhpc3RzXG5cdFx0aWYgKHZtLm5ld0d1ZXN0Lm5hbWUgJiYgdm0ubmV3R3Vlc3QuZW1haWwudmFsaWQpIHtcblx0XHRcdC8vaXMgdGhlcmUgYSBndWVzdCBsaXN0IGFscmVhZHk/IElmIG5vdCBjcmVhdGUgb25lXG5cdFx0XHRpZighdm0uZXZlbnQuZ3Vlc3RMaXN0KSB7XG5cdFx0XHRcdHZtLmV2ZW50Lmd1ZXN0TGlzdCA9IHt9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9pZiBzbyBpcyB0aGlzIHBlcnNvbiBhbHJlYWR5IG9uIHRoZSBsaXN0P1xuXHRcdFx0XHR2YXIgaSA9MDtcblx0XHRcdFx0d2hpbGUodm0uZXZlbnQuZ3Vlc3RMaXN0W2ldKSB7XG5cdFx0XHRcdFx0aWYodm0uZXZlbnQuZ3Vlc3RMaXN0W2ldLmVtYWlsID09IGI2NF90b191dGY4KHVzZXJLZXkpKSB7XG5cdFx0XHRcdFx0XHQkbG9nLmluZm8oJ1RoaXMgZ3Vlc3QgaXMgYWxyZWFkeSBvbiB0aGUgbGlzdCcpO1xuXHRcdFx0XHRcdFx0Y2xlYW5OZXdHdWVzdFZhcmlhYmxlKCk7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGkrKztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvL2lzIHRoaXMgZ3Vlc3QgYSByZWdpc3RlcmVkIHVzZXI/XG5cdFx0XHRpZihyZWdpc3RlcmVkVXNlcnNbdXNlcktleV0pIHtcblx0XHRcdFx0Ly9pcyB0aGUgcmVnaXN0ZXJlZCB1c2VyIHRoZSBob3N0P1xuXHRcdFx0XHRpZihyZWdpc3RlcmVkVXNlcnNbdXNlcktleV0gPT0gJHJvdXRlUGFyYW1zLnVpZCkge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygndHJpZWQgdG8gcmVnaXN0ZXIgdGhlIGhvc3QnKTtcblx0XHRcdFx0XHRjbGVhbk5ld0d1ZXN0VmFyaWFibGUoKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0Ly9hZGQgdGhlbSB0byB0aGUgYXBwcm9wcmlhdGUgcmVnaXN0ZXJlZCB1c2VycycgbGlzdCBvZiBldmVudCBpbnZpdGVzXG5cdFx0XHRcdFx0aW52aXRlQVJlZ2lzdGVyZWRVc2VyKHJlZ2lzdGVyZWRVc2Vyc1t1c2VyS2V5XSk7XG5cblx0XHRcdFx0XHQvL2FkZCB0aGUgZ3Vlc3QgdG8gdGhlIGxpc3Rcblx0XHRcdFx0XHR2bS5ldmVudC5ndWVzdExpc3RbcmVnaXN0ZXJlZFVzZXJzW3VzZXJLZXldXSA9IHtcblx0XHRcdFx0XHRcdGF0dGVuZGluZzogZmFsc2UsIFxuXHRcdFx0XHRcdFx0c3RhdHVzOidwZW5kaW5nJywgXG5cdFx0XHRcdFx0XHRuYW1lOiB2bS5uZXdHdWVzdC5uYW1lLCBcblx0XHRcdFx0XHRcdGVtYWlsOnZtLm5ld0d1ZXN0LmVtYWlsLmFkZHJlc3MsXG5cdFx0XHRcdFx0fTtcdFx0XHRcdFx0XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vYWRkIHRoZSBpbnZpdGUgdG8gdGhlIG5vbi1yZWdpc3RlcmVkIHVzZXJzIGxpc3Qgb2YgZXZlbnQgaW52aXRlc1xuXHRcdFx0XHRpbnZpdGVBblVucmVnaXN0ZXJlZFVzZXIodXNlcktleSk7XG5cblx0XHRcdFx0Ly9hZGQgdGhlIGd1ZXN0IHRvIHRoZSBsaXN0XG5cdFx0XHRcdHZtLmV2ZW50Lmd1ZXN0TGlzdFt1c2VyS2V5XSA9IHtcblx0XHRcdFx0XHRcdGF0dGVuZGluZzogZmFsc2UsIFxuXHRcdFx0XHRcdFx0c3RhdHVzOidwZW5kaW5nJywgXG5cdFx0XHRcdFx0XHRuYW1lOiB2bS5uZXdHdWVzdC5uYW1lLCBcblx0XHRcdFx0XHRcdGVtYWlsOnZtLm5ld0d1ZXN0LmVtYWlsLmFkZHJlc3MsXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cblxuXHRcdFx0Ly9zYXZlIHRoZSBldmVudFxuXHRcdFx0dm0uc2F2ZUV2ZW50KCk7XG5cdFx0XHQvL2NsZWFyIHRoZSB0ZW1wIHZhbHVlc1xuXHRcdFx0Y2xlYW5OZXdHdWVzdFZhcmlhYmxlKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCRsb2cuaW5mbygneW91IGRpZG5cXCd0IGVudGVyIGEgbmFtZSBhbmQgb3IgZW1haWwnKTtcblx0XHR9XG5cdH1cblxuXHR2bS5ndWVzdFdpbGxBdHRlbmQgPSBmdW5jdGlvbihyZXNwb25zZSkge1xuXHRcdHZhciBjdXJyZW50VXNlciA9IHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS5jaGlsZCgnZXZlbnRzJyk7XG5cdFx0dmFyIHRvdGFsUGVuZGluZ0ludml0YXRpb25zID0gMDtcblx0XHR2YXIgcmVtb3ZlQXR0ZW5kaW5nVXBkYXRlZCA9IGZhbHNlO1xuXHRcdFxuXHRcdC8vY2hhbmdlIGF0dGVuZGluZyB0byB0cnVlIGluIGhvc3QncyBndWVzdExpc3Rcblx0XHR2bS5ldmVudC5ndWVzdExpc3RbJHJvdXRlUGFyYW1zLnVpZF0uYXR0ZW5kaW5nID0gcmVzcG9uc2U7XG5cdFx0Ly9jaGFuZ2Ugc3RhdHVzIHRvICdhdHRlbmRpbmcnIGluIGhvc3QncyBndWVzdExpc3Rcblx0XHR2bS5ldmVudC5ndWVzdExpc3RbJHJvdXRlUGFyYW1zLnVpZF0uc3RhdHVzID0gJ2F0dGVuZGluZyc7XG5cdFx0XG5cdFx0Ly9nZXQgdGhlIGludml0YXRpb24gZGV0YWlsc1xuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdwZW5kaW5nJykub24oJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhbGJlXG5cdFx0XHR2YXIgaW52aXRhdGlvbnMgPSBzbmFwc2hvdC52YWwoKTtcblx0XHRcdC8vbG9nIHN0YXJ0aW5nIHZhbHVlc1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zKTtcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9uc1skcm91dGVQYXJhbXMuaG9zdElkXSk7XG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnNbJHJvdXRlUGFyYW1zLmhvc3RJZF1bJHJvdXRlUGFyYW1zLmV2ZW50SWRdKTtcblxuXHRcdFx0dmFyIHRoaXNJbnZpdGF0aW9uID0gaW52aXRhdGlvbnNbJHJvdXRlUGFyYW1zLmhvc3RJZF1bJHJvdXRlUGFyYW1zLmV2ZW50SWRdO1xuXHRcdFx0XG5cdFx0XHQkbG9nLmluZm8odGhpc0ludml0YXRpb24pO1xuXHRcdFx0XG5cdFx0XHQvL2NoZWNrICMgb2YgaW5pdmlhdGlvbnNcblx0XHRcdGZvcihpbnZpdGF0aW9uIGluIGludml0YXRpb25zKSB7XG5cdFx0XHRcdHRvdGFsUGVuZGluZ0ludml0YXRpb25zKys7XG5cdFx0XHR9XG5cblx0XHRcdC8vcmVwb3J0ICMgb2YgaW52aXRhdGlvbnNcblx0XHRcdCRsb2cuaW5mbyhcInRvdGFsIGF0dGVuZGluZzogXCIgKyB0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucyk7XG5cdFx0XHRcblx0XHRcdC8vYWRkIHRoZSBldmVudCB0byB0aGUgZ3Vlc3QncyBhdHRlbmRpbmcgbGlzdFxuXHRcdFx0aWYocmVzcG9uc2UpIGN1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5jaGlsZCgkcm91dGVQYXJhbXMuaG9zdElkKS5jaGlsZCgkcm91dGVQYXJhbXMuZXZlbnRJZCkuc2V0KHRoaXNJbnZpdGF0aW9uLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKGVycm9yKTtcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cblx0XHQvL2lmIHRoZSB1cGRhdGVkIHBsYWNlaG9sZGVyIHdhcyBvbiB0aGUgYXR0ZW5kaW5nIGxpc3QgcmVtb3ZlIGl0XG5cdFx0Y3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLm9uKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdFx0dmFyIGF0dGVuZGluZ0xpc3QgPSBzbmFwc2hvdC52YWwoKTtcblx0XHRcdFxuXHRcdFx0Ly9yZXBvcnQgYWN0aW9uc1xuXHRcdFx0JGxvZy5pbmZvKCd0aGlzIGlzIHRoZSBhdHRlbmRpbmcgbGlzdCcpO1xuXHRcdFx0JGxvZy5pbmZvKGF0dGVuZGluZ0xpc3QpO1xuXHRcdFx0XG5cdFx0XHQvL3Rocm93IGZsYWcgZm9yIGxhdGVyXG5cdFx0XHRpZihhdHRlbmRpbmdMaXN0LnVwZGF0ZWQpIHJlbW92ZUF0dGVuZGluZ1VwZGF0ZWQgPSB0cnVlO1xuXG5cdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdC8vaWYgdGhlciB3YXMgYW4gZXJyb3IgcmVwb3J0IGl0XG5cdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKGVycm9yKTtcblx0XHR9KTtcblxuXHRcdC8vaWYgdGhpcyBpcyB0aGUgbGFzdCBwZW5kaW5nIGV2ZW50IG9uIHRoZSBndWVzdCdzIHBlbmRpbmcgbGlzdCwgYWRkIHRoZSB1cGRhdGVkIHBsYWNlaG9sZGVyXG5cdFx0aWYodG90YWxQZW5kaW5nSW52aXRhdGlvbnMgPCAyKSB7XG5cdFx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdFx0dmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcblxuXHRcdFx0Ly9yZXBsYWNlIHdpdGggdXBkYXRlZCBmaWVsZFxuXHRcdFx0Y3VycmVudFVzZXIuY2hpbGQoJ3BlbmRpbmcnKS51cGRhdGUoe1xuXHRcdFx0XHR1cGRhdGVkOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKGVycm9yKTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdC8vcmVtb3ZlIHRoZSBldmVudCBmcm9tIHRoZSBndWVzdCdzIHBlbmRpbmcgbGlzdFxuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdwZW5kaW5nJykuY2hpbGQoJHJvdXRlUGFyYW1zLmhvc3RJZCkucmVtb3ZlKCk7XG5cblx0XHQvL2lmIHRoZXJlIHdhcyBhbiB1cGRhdGVkIGZpZWxkIGluIGF0dGVuZGluZywgcmVtb3ZlIGl0XG5cdFx0aWYocmVtb3ZlQXR0ZW5kaW5nVXBkYXRlZCkge1xuXHRcdFx0JGxvZy5pbmZvKCdyZW1vdmluZyB0aGUgdXBkYXRlZCBwbGFjZWhvbGRlcicpO1xuXHRcdFx0Ly9jdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykuY2hpbGQoJ3VwZGF0ZWQnKS5yZW1vdmUoKTtcblx0XHR9XG5cblx0XHQvL3NhdmUgY2hhbmdlc1xuXHRcdHZtLmV2ZW50LiRzYXZlKCk7XG5cdH1cblxuXHR2bS51cGRhdGVVcGRhdGVkUGFyYW0gPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgY3VycmVudFVzZXIgPSByZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJ2V2ZW50cycpO1xuXHRcdFxuXHRcdCRsb2cuaW5mbygndXBkYXRpbmcgdGhlIHBhcmFtJyk7XG5cdFx0Y3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLm9uKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHQkbG9nLmluZm8oc25hcHNob3QudmFsKCkpO1xuXHRcdH0pO1xuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5jaGlsZCgndXBkYXRlZCcpLnJlbW92ZSgpO1xuXHR9XG5cblx0dm0uYWRkSW52aXRhdGlvblRvQXR0ZW5kaW5nID0gZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHR2YXIgY3VycmVudFVzZXIgPSByZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJ2V2ZW50cycpO1xuXHRcdHZhciB0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucyA9IDA7XG5cblx0XHQvL2dldCB0aGUgaW52aXRhdGlvbiBkZXRhaWxzXG5cdFx0Y3VycmVudFVzZXIuY2hpbGQoJ3BlbmRpbmcnKS5vbigndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFsYmVcblx0XHRcdHZhciBpbnZpdGF0aW9ucyA9IHNuYXBzaG90LnZhbCgpO1xuXHRcdFx0dmFyIHRoaXNJbnZpdGF0aW9uID0gaW52aXRhdGlvbnNbJHJvdXRlUGFyYW1zLmhvc3RJZF1bJHJvdXRlUGFyYW1zLmV2ZW50SWRdO1xuXHRcdFx0XG5cdFx0XHQvL2xvZyBzdGFydGluZyB2YWx1ZXNcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9ucyk7XG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnNbJHJvdXRlUGFyYW1zLmhvc3RJZF0pO1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdWyRyb3V0ZVBhcmFtcy5ldmVudElkXSk7XG5cdFx0XHRcblx0XHRcdC8vY2hlY2sgIyBvZiBpbml2aWF0aW9uc1xuXHRcdFx0Zm9yKGludml0YXRpb24gaW4gaW52aXRhdGlvbnMpIHtcblx0XHRcdFx0dG90YWxQZW5kaW5nSW52aXRhdGlvbnMrKztcblx0XHRcdH1cblxuXHRcdFx0Ly9yZXBvcnQgIyBvZiBpbnZpdGF0aW9uc1xuXHRcdFx0JGxvZy5pbmZvKFwidG90YWwgcGVuZGluZyBpbnZpdGF0aW9uczogXCIgKyB0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucyk7XG5cdFx0XHRcblx0XHRcdCRsb2cuaW5mbyhyZXNwb25zZSk7XG5cdFx0XHQvL2FkZCB0aGUgZXZlbnQgdG8gdGhlIGd1ZXN0J3MgYXR0ZW5kaW5nIGxpc3Rcblx0XHRcdGlmKHJlc3BvbnNlKSBjdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykuY2hpbGQoJHJvdXRlUGFyYW1zLmhvc3RJZCkuY2hpbGQoJHJvdXRlUGFyYW1zLmV2ZW50SWQpLnNldCh0aGlzSW52aXRhdGlvbiwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbyhlcnJvcik7XG5cdFx0XHR9KTtcblxuXG5cblx0XHR9KTtcblx0fVxuXG5cdC8vc3RhcnQgcnVuXG5cdGluaXQoKTtcbn1cblxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignR3Vlc3RFdmVudENvbnRyb2xsZXInLCBHdWVzdEV2ZW50Q29udHJvbGxlcik7XG5cbkd1ZXN0RXZlbnRDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBHdWVzdEV2ZW50Q29udHJvbGxlcigkbG9nKSB7XG5cdCRsb2cuaW5mbygnaW50byB0aGUgR3Vlc3RFdmVudENvbnRyb2xsZXInKTtcbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ0hvc3RFdmVudENvbnRyb2xsZXInLCBIb3N0RXZlbnRDb250cm9sbGVyKTtcblxuSG9zdEV2ZW50Q29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZycsICckcm91dGVQYXJhbXMnLCAndXNlckRhdGEnLCAndHJhZmZpY1ZhbGV0JywgJ3ZhbGlkYXRpb24nXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBIb3N0RXZlbnRDb250cm9sbGVyKCRzY29wZSwgJGxvZywgJHJvdXRlUGFyYW1zLCB1c2VyRGF0YSwgdHJhZmZpY1ZhbGV0LCB2YWxpZGF0aW9uKSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdFxuXHQvL2xvY2FsIHZhcmlhYmxlc1xuXHR2YXIgaG9zdGVkRXZlbnRTaGVycGEgPSB0cmFmZmljVmFsZXQ7XG5cdHZhciB0aGlzRXZlbnRNYW5hZ2VyID0gdXNlckRhdGE7XG5cdHZhciByZXF1aXJubWVudHNGYWN0b3J5ID0gdmFsaWRhdGlvbjtcblxuXHQvL2xvY2FsIHZhcmlhYmxlc1xuXHR2YXIgcGVyY2VudENvbXBsZXRlID0gMDtcblxuXHQvL3ZpZXcgbW9kZWwgdmFyaWFibGVzXG5cdHZtLmFjdGl2ZVNlY3Rpb24gPSAxO1xuXHR2bS50ZW1wVGltZSA9IHtzdGFydDogJycsIGVuZDogJycsIGR1cmF0aW9uOicnfTtcblx0dm0ucHJvZ3Jlc3NCYXIgPSB7XG5cdFx0Y29tcGxldGU6IHZtLnBlcmNlbnRDb21wbGV0ZSxcblx0XHRzdHlsZToge1xuXHRcdFx0d2lkdGg6ICh2bS5wZXJjZW50Q29tcGxldGUgKyAnJScpXG5cdFx0fSxcblx0XHRtZXNzYWdlOiAodm0ucGVyY2VudENvbXBsZXRlICsgJyUnKVxuXHR9XG5cdHZtLmFjdGlvbkJ0biA9IHtcblx0XHRkaXY6IHtcblx0XHRcdGNsYXNzOiB7XG5cdFx0XHRcdCdjb2wteHMtNic6IHRydWUsXG5cdFx0XHRcdCdjb2wtc20tNic6IHRydWUsXG5cdFx0XHR9XG5cdFx0fSxcblx0XHRidG46IHtcblx0XHRcdGNsYXNzOiB7XG5cdFx0XHRcdCdidG4nOiB0cnVlLFxuXHRcdFx0XHQnYnRuLXN1Y2Nlc3MnOiBmYWxzZSxcblx0XHRcdFx0J2J0bi13YXJuaW5nJzogdHJ1ZSxcblx0XHRcdFx0J3B1bGwtcmlnaHQnOiB0cnVlLFxuXHRcdFx0fSxcblx0XHRcdG1lc3NhZ2U6ICdBZGQgSW5mbydcblx0XHR9XG5cdH1cblx0dm0udGVtcEV2ZW50ID0ge307XG5cdHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZSA9IHJlcXVpcm5tZW50c0ZhY3RvcnkuZ2VuZXJhdGVFdmVudFJlcXVpcm5tZW50cygpO1xuXG5cdC8vbG9jYWwgbWV0aG9kc1xuXHRmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fTtcblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH07XG5cblx0ZnVuY3Rpb24gY2FsY3VsYXRlRHVyYXRpb24oc3RhcnQsIGVuZCkge1xuXHRcdHJldHVybiAoZGF0ZVRpbWVUb1VuaXhUaW1lKGVuZCkgLSBkYXRlVGltZVRvVW5peFRpbWUoc3RhcnQpKSAvICg2MCoxMDAwKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNoYW5nZVNhdmVCdG4oZGlyZWN0aW9uKSB7XG5cdFx0aWYoZGlyZWN0aW9uID09ICdvcGVuJykge1xuXHRcdFx0dm0uYWN0aW9uQnRuLmJ0bi5jbGFzc1snYnRuLXN1Y2Nlc3MnXSA9IHRydWU7XG5cdFx0XHR2bS5hY3Rpb25CdG4uYnRuLmNsYXNzWydidG4td2FybmluZyddID0gZmFsc2U7XG5cdFx0XHR2bS5hY3Rpb25CdG4uYnRuLm1lc3NhZ2UgPSAnU2F2ZSBFdmVudCc7XG5cdFx0fSBlbHNlIGlmKGRpcmVjdGlvbiA9PSAnY2xvc2UnKSB7XG5cdFx0XHR2bS5hY3Rpb25CdG4uYnRuLmNsYXNzWydidG4tc3VjY2VzcyddID0gZmFsc2U7XG5cdFx0XHR2bS5hY3Rpb25CdG4uYnRuLmNsYXNzWydidG4td2FybmluZyddID0gdHJ1ZTtcblx0XHRcdHZtLmFjdGlvbkJ0bi5idG4ubWVzc2FnZSA9ICdBZGQgSW5mbyc7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gdXBkYXRlUHJvZ3Jlc3NCYXIodW5pdHMpIHtcblx0XHRwZXJjZW50Q29tcGxldGUgKz0gdW5pdHM7XG5cdFx0dm0ucHJvZ3Jlc3NCYXIuY29tcGxldGUgPSBwZXJjZW50Q29tcGxldGU7XG5cdFx0dm0ucHJvZ3Jlc3NCYXIuc3R5bGUud2lkdGggPSAocGVyY2VudENvbXBsZXRlICsgJyUnKTtcblx0XHR2bS5wcm9ncmVzc0Jhci5tZXNzYWdlID0gKHBlcmNlbnRDb21wbGV0ZSArICclJyk7XG5cdFx0aWYocGVyY2VudENvbXBsZXRlID4gOTkpIGNoYW5nZVNhdmVCdG4oJ29wZW4nKTtcdFxuXHRcdGlmKHBlcmNlbnRDb21wbGV0ZSA8IDk5KSBjaGFuZ2VTYXZlQnRuKCdjbG9zZScpO1x0XHRcblx0fVxuXG5cdGZ1bmN0aW9uIGluaXRFdmVudFRpbWVzKCkge1xuXHRcdC8vYnVpbGQgbmV3IHRlbXAgdGltZXNcblx0XHR2YXIgbm93ID0gbmV3IERhdGUoKTtcblxuXHRcdC8vcm91bmQgdG8gdGhlIG5lYXJlc3QgaG91ciwgY3V0IG9mZiBhbnl0aGluZyBzbWFsbGVyXG5cdFx0bm93LnNldEhvdXJzKG5vdy5nZXRIb3VycygpICsgTWF0aC5yb3VuZChub3cuZ2V0TWludXRlcygpLzYwKSk7XG5cdFx0bm93LnNldE1pbnV0ZXMoMCk7XG5cdFx0bm93LnNldFNlY29uZHMoMCk7XG5cdFx0bm93LnNldE1pbGxpc2Vjb25kcygwKTtcblxuXHRcdHZtLnRlbXBUaW1lLnN0YXJ0ID0gbm93O1xuXHRcdHZtLnRlbXBUaW1lLmVuZCA9IG5vdztcblxuXHRcdHZtLnRlbXBUaW1lLmR1cmF0aW9uID0gY2FsY3VsYXRlRHVyYXRpb24odm0udGVtcFRpbWUuc3RhcnQsIHZtLnRlbXBUaW1lLmVuZCk7XG5cdFx0XG5cdH1cblxuXHRmdW5jdGlvbiB1cGRhdGVUZW1wVGltZUZyb21Nb2RlbCgpIHtcblx0XHQvL2lmIHN0YXJ0IHRpbWVzIGFyZSBhdmFpbGFibGVcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2bS50ZW1wRXZlbnQuZXZlbnRUaW1lcy5zdGFydCkpIHtcblx0XHRcdC8vc2V0IHRoZSB0ZW1wVGltZSBtb2RlbFxuXHRcdFx0dm0udGVtcFRpbWUuc3RhcnQgPSB1bml4VGltZVRvRGF0ZVRpbWUodm0udGVtcEV2ZW50LmV2ZW50VGltZXMuc3RhcnQpO1xuXHRcdFx0dm0udGVtcFRpbWUuZW5kID0gdW5peFRpbWVUb0RhdGVUaW1lKHZtLnRlbXBFdmVudC5ldmVudFRpbWVzLmVuZCk7XG5cdFx0fVxuXG5cdH1cblxuXHRmdW5jdGlvbiBpbml0KCkge1xuXHRcdC8vaWYgdGhlcmUgaXMgYW4gYWN0aXZlIGV2ZW50LCBsb2FkIGl0XG5cdFx0aWYodGhpc0V2ZW50TWFuYWdlci50aGVyZUlzQW5BY3RpdmVFdmVudCgpKSB7XG5cdFx0XHRcblx0XHRcdHZhciBhY3RpdmVQYWNrYWdlID0gdGhpc0V2ZW50TWFuYWdlci5nZXRBY3RpdmVFdmVudCgpO1xuXG5cdFx0XHR2bS5wcm9ncmVzc0JhciA9IGFjdGl2ZVBhY2thZ2UucHJvZ3Jlc3NCYXI7XG5cdFx0XHRwZXJjZW50Q29tcGxldGUgPSBhY3RpdmVQYWNrYWdlLnBlcmNlbnRDb21wbGV0ZVxuXHRcdFx0dm0udGVtcEV2ZW50ID0gYWN0aXZlUGFja2FnZS5ldmVudDtcblx0XHRcdHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZSA9IGFjdGl2ZVBhY2thZ2UucmVxdWlyZWRGaWVsZHM7XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly9sb2FkIGV2ZW50IGRldGFpbHNcblx0XHRcdHRoaXNFdmVudE1hbmFnZXIubG9hZEFuRXZlbnRQcm9ncmVzc2l2ZWx5KCRyb3V0ZVBhcmFtcy51aWQsICRyb3V0ZVBhcmFtcy5ldmVudElkKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24odGhlRXZlbnQpIHtcblx0XHRcdFx0Ly9hZGQgdGhpcyBldmVudCBtb2RlbCB0byB0aGUgdmlldyBtb2RlbCBldmVudFxuXHRcdFx0XHR2bS50ZW1wRXZlbnQgPSB0aGVFdmVudDtcblxuXHRcdFx0XHQvL3VwZGF0ZSB0ZW1wVGltZVxuXHRcdFx0XHR1cGRhdGVUZW1wVGltZUZyb21Nb2RlbCgpO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHQkbG9nKCd0aGUgZXJyb3IgaXM6ICcgKyBlcnJvcik7XG5cdFx0XHR9KVxuXHRcdH1cblxuXHRcdC8vbG9hZCBzcGVjaWZpZWQgc2VjdGlvblxuXHRcdHZtLmFjdGl2ZVNlY3Rpb24gPSBwYXJzZUludCgkcm91dGVQYXJhbXMuc2VjdGlvbik7XG5cdFx0Ly9zZXQgdGVtcFRpbWVzXG5cdFx0aW5pdEV2ZW50VGltZXMoKTtcblx0fVxuXG5cdC8vdmlldyBtb2RlbCBtZXRob2RzXG5cdHZtLmZvcm1hdER1cmF0aW9uID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9jYWxjIGR1cmF0aW9uXG5cdFx0dm0udGVtcFRpbWUuZHVyYXRpb24gPSBjYWxjdWxhdGVEdXJhdGlvbih2bS50ZW1wVGltZS5zdGFydCwgdm0udGVtcFRpbWUuZW5kKTtcblx0XHRcblx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBob3VycyA9IE1hdGguZmxvb3Iodm0udGVtcFRpbWUuZHVyYXRpb24vKDYwKSk7XG5cdFx0dmFyIG1pbiA9IHZtLnRlbXBUaW1lLmR1cmF0aW9uICUgNjA7XG5cdFx0dmFyIGZyYWN0aW9uID0gKE1hdGgucm91bmQobWluLzE1KS80KTtcblxuXHRcdHJldHVybiAoaG91cnMrZnJhY3Rpb24pICsgJyBoJztcblx0fVxuXG5cdHZtLnZhbGlkYXRlVGltZSA9IGZ1bmN0aW9uKHN0YXJ0T3JFbmQpIHtcdFxuXG5cdFx0aWYodm0udGVtcFRpbWUuZHVyYXRpb24gPiAyNCkgdm0uc2V0dGluZ1RlbXBTdGFydCgpO1xuXG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgdGltZXMgPSB7XG5cdFx0XHQnZXZlbnRTdGFydCc6IHZtLnRlbXBUaW1lLnN0YXJ0LFxuXHRcdFx0J2V2ZW50RW5kJzogdm0udGVtcFRpbWUuZW5kXG5cdFx0fTtcblxuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHRpbWVzW3N0YXJ0T3JFbmRdKSAmJiB0aW1lc1tzdGFydE9yRW5kXSAhPSAnJyAmJiB2bS50ZW1wVGltZS5kdXJhdGlvbiA+IDApIHtcblx0XHRcdGlmKHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtzdGFydE9yRW5kXS5jb21wbGV0ZWQgPT0gZmFsc2UpIHVwZGF0ZVByb2dyZXNzQmFyKDEwKTtcblx0XHRcdHZtLnRlbXBFdmVudC5ldmVudFRpbWVzLnN0YXJ0ID0gZGF0ZVRpbWVUb1VuaXhUaW1lKHZtLnRlbXBUaW1lLnN0YXJ0KTtcblx0XHRcdHZtLnRlbXBFdmVudC5ldmVudFRpbWVzLmVuZCA9IGRhdGVUaW1lVG9Vbml4VGltZSh2bS50ZW1wVGltZS5lbmQpO1xuXHRcdFx0dm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlW3N0YXJ0T3JFbmRdLmNvbXBsZXRlZCA9IHRydWU7XG5cdFx0XHR2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbc3RhcnRPckVuZF0ucm93LmNsYXNzWydoYXMtc3VjY2VzcyddID0gdHJ1ZTtcblx0XHRcdHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtzdGFydE9yRW5kXS5yb3cuY2xhc3NbJ2hhcy1mZWVkYmFjayddID0gdHJ1ZTtcblx0XHRcdHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtzdGFydE9yRW5kXS5yb3cuY2xhc3NbJ2hhcy1lcnJvciddID0gZmFsc2U7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmKHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtzdGFydE9yRW5kXS5jb21wbGV0ZWQgPT0gdHJ1ZSkgdXBkYXRlUHJvZ3Jlc3NCYXIoLTEwKTtcblx0XHRcdHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtzdGFydE9yRW5kXS5jb21wbGV0ZWQgPSBmYWxzZTtcblx0XHRcdHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtzdGFydE9yRW5kXS5yb3cuY2xhc3NbJ2hhcy1zdWNjZXNzJ10gPSBmYWxzZTtcblx0XHRcdHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtzdGFydE9yRW5kXS5yb3cuY2xhc3NbJ2hhcy1mZWVkYmFjayddID0gZmFsc2U7XG5cdFx0XHR2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbc3RhcnRPckVuZF0ucm93LmNsYXNzWydoYXMtZXJyb3InXSA9IHRydWU7XG5cdFx0fVxuXHR9XG5cblx0dm0uc2V0dGluZ1RlbXBTdGFydCA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0aWYoKGRhdGVUaW1lVG9Vbml4VGltZSh2bS50ZW1wVGltZS5lbmQpIDw9IGRhdGVUaW1lVG9Vbml4VGltZSh2bS50ZW1wVGltZS5zdGFydCkpIHx8IFxuXHRcdFx0KGRhdGVUaW1lVG9Vbml4VGltZSh2bS50ZW1wVGltZS5lbmQpIC0gZGF0ZVRpbWVUb1VuaXhUaW1lKHZtLnRlbXBUaW1lLnN0YXJ0KSA+ICgxMDAwKjYwKjYwKjI0KSkpIHtcblx0XHRcdG9sZFN0YXJ0ID0gZGF0ZVRpbWVUb1VuaXhUaW1lKHZtLnRlbXBUaW1lLnN0YXJ0KTtcblx0XHRcdG9sZEVuZCA9IGRhdGVUaW1lVG9Vbml4VGltZSh2bS50ZW1wVGltZS5lbmQpO1xuXG5cdFx0XHRuZXdFbmQgPSBvbGRTdGFydCArICg2MCo2MCoxMDAwKTtcblxuXHRcdFx0dm0udGVtcFRpbWUuZW5kID0gdW5peFRpbWVUb0RhdGVUaW1lKG5ld0VuZCk7XG5cdFx0fVxuXHRcdFxuIFx0fVxuXG5cdHZtLnNldHRpbmdUZW1wRW5kID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9zZXQgdmFsaWQgZW5kIHdpdGggc3RhcnRcblx0XHRpZih2bS50ZW1wVGltZS5zdGFydCA+IHZtLnRlbXBUaW1lLmVuZCkgdm0udGVtcFRpbWUuc3RhcnQgPSB2bS50ZW1wVGltZS5lbmQ7XG5cblx0XHQvL3ZhbGlkYXRlXG5cdFx0dm0udmFsaWRhdGVUaW1lKCdldmVudEVuZCcpO1xuXG5cdFx0Ly9jYWxjIGR1cmF0aW9uXG5cdFx0dm0udGVtcFRpbWUuZHVyYXRpb24gPSBjYWxjdWxhdGVEdXJhdGlvbih2bS50ZW1wVGltZS5zdGFydCwgdm0udGVtcFRpbWUuZW5kKTtcblxuXHRcdFxuXHR9XG5cblx0dm0uYmFja1RvVXNlckV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vaWYgdGhlIGV2ZW50IGlzIGNvbXBsZXRlZCwgc2F2ZSB0byB0aGUgZGJcblx0XHQvL2NoZWNrIHRoYXQgdGhlIGV2ZW50IGlzIGNvbXBsZXRlXG5cdFx0aWYocGVyY2VudENvbXBsZXRlID4gOTkpIHtcblx0XHRcdC8vaWYgc28gc2F2ZSB0aGUgZXZlbnQgbG9jYWxseVxuXHRcdFx0dGhpc0V2ZW50TWFuYWdlci5zYXZlTmV3SG9zdGluZ0V2ZW50KCdob3N0aW5nJywgdm0udGVtcEV2ZW50KTtcblx0XHRcdC8vdGhlbiBzeW5jIHRoZSBsb2NhbCB3aXRoIHRoZSBkYlxuXHRcdFx0dGhpc0V2ZW50TWFuYWdlci5zZXRSZW1vdGVFdmVudHNGcm9tTG9jYWwoJ2hvc3RpbmcnLCB2bS50ZW1wRXZlbnQpXG5cdFx0XHQudGhlbihmdW5jdGlvbihzdWNjZXNNZXNzYWdlKSB7XG5cdFx0XHRcdCRsb2cuaW5mbyhzdWNjZXNNZXNzYWdlKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb01lc3NhZ2UpIHtcblx0XHRcdFx0JGxvZy5pbmZvKGVycm9NZXNzYWdlKTtcblx0XHRcdH0pXG5cdFx0fVxuXG5cdFx0Ly9pZiBub3QgY29tcGxldGVkLCBkZWxldGUgdGhlIGV2ZW50IGVudGlyZWx5XG5cdFx0Ly90aGlzRXZlbnRNYW5hZ2VyLnJlbW92ZUluY29tcGxldGVFdmVudEZyb21EQih2bS50ZW1wRXZlbnQuaWQpO1xuXG5cdFx0Ly9zZW5kIHRoZSB1c2VyIGJhY2sgdG8gdGhlIHBhZ2UgdGhleSBjYW1lIGZyb21cblx0XHRob3N0ZWRFdmVudFNoZXJwYS5yZWRpcmVjdFRvKCcvdXNlckV2ZW50cycsICRyb3V0ZVBhcmFtcy51aWQpO1xuXHR9XG5cblx0dm0uc2VjdGlvbkJhY2sgPSBmdW5jdGlvbigpIHtcblx0XHQvL3NhdmUgdGVtcCBldmVudCBwYWNrYWdlXG5cdFx0dmFyIGV2ZW50UGFja2FnZSA9IHtcblx0XHRcdGV2ZW50OiB2bS50ZW1wRXZlbnQsXG5cdFx0XHRwcm9ncmVzc0Jhcjogdm0ucHJvZ3Jlc3NCYXIsXG5cdFx0XHRwZXJjZW50Q29tcGxldGU6IHBlcmNlbnRDb21wbGV0ZSxcblx0XHRcdHJlcXVpcmVkRmllbGRzOiB2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVcblx0XHR9O1xuXG5cdFx0JGxvZy5pbmZvKGV2ZW50UGFja2FnZSk7XG5cblx0XHR0aGlzRXZlbnRNYW5hZ2VyLnNldEFjdGl2ZUV2ZW50KGV2ZW50UGFja2FnZSlcblxuXHRcdC8vbW92ZSBiYWNrXG5cdFx0dGFyZ2V0U2VjdGlvbiA9IHZtLmFjdGl2ZVNlY3Rpb24gLSAxO1xuXHRcdGhvc3RlZEV2ZW50U2hlcnBhLnJlZGlyZWN0VG8oJy9ldmVudC9ob3N0JywgJHJvdXRlUGFyYW1zLmV2ZW50SWQsICRyb3V0ZVBhcmFtcy51aWQsIHRhcmdldFNlY3Rpb24pO1xuXHR9XHRcblxuXHR2bS5zZWN0aW9uRm9yd2FyZCA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vaWYgYWxsIHJlcXVpcmVkIGZpZWxkcyBoYXZlIGJlZW4gZW50ZXJlZFxuXHRcdC8vc2F2ZSB0ZW1wIGV2ZW50IHBhY2thZ2Vcblx0XHR2YXIgZXZlbnRQYWNrYWdlID0ge1xuXHRcdFx0ZXZlbnQ6IHZtLnRlbXBFdmVudCxcblx0XHRcdHByb2dyZXNzQmFyOiB2bS5wcm9ncmVzc0Jhcixcblx0XHRcdHBlcmNlbnRDb21wbGV0ZTogcGVyY2VudENvbXBsZXRlLFxuXHRcdFx0cmVxdWlyZWRGaWVsZHM6IHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVxuXHRcdH07XG5cblx0XHQkbG9nLmluZm8oZXZlbnRQYWNrYWdlKTtcblxuXHRcdHRoaXNFdmVudE1hbmFnZXIuc2V0QWN0aXZlRXZlbnQoZXZlbnRQYWNrYWdlKVxuXG5cdFx0Ly9tb3ZlIGZvcndhcmRcblx0XHR0YXJnZXRTZWN0aW9uID0gdm0uYWN0aXZlU2VjdGlvbiArIDE7XG5cdFx0aG9zdGVkRXZlbnRTaGVycGEucmVkaXJlY3RUbygnL2V2ZW50L2hvc3QnLCAkcm91dGVQYXJhbXMuZXZlbnRJZCwgJHJvdXRlUGFyYW1zLnVpZCwgdGFyZ2V0U2VjdGlvbik7XG5cdH1cblxuXHR2bS52ZXJpZnlSZXF1aXJlZCA9IGZ1bmN0aW9uKGZpZWxkLCB2YWx1ZSkge1xuXHRcblx0XHQvL2NoZWNrIHZhbGlkaXR5XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpICYmIHZhbHVlICE9ICcnKSB7XG5cdFx0XHRpZih2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbZmllbGRdLmNvbXBsZXRlZCA9PSBmYWxzZSkge1xuXHRcdFx0XHR1cGRhdGVQcm9ncmVzc0JhcigxMCk7XG5cdFx0XHR9XG5cdFx0XHR2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbZmllbGRdLmNvbXBsZXRlZCA9IHRydWU7XG5cdFx0XHR2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbZmllbGRdLnJvdy5jbGFzc1snaGFzLXN1Y2Nlc3MnXSA9IHRydWU7XG5cdFx0XHR2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbZmllbGRdLnJvdy5jbGFzc1snaGFzLWZlZWRiYWNrJ10gPSB0cnVlO1xuXHRcdFx0dm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlW2ZpZWxkXS5yb3cuY2xhc3NbJ2hhcy1lcnJvciddID0gZmFsc2U7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmKHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtmaWVsZF0uY29tcGxldGVkID09IHRydWUpIHtcblx0XHRcdFx0dXBkYXRlUHJvZ3Jlc3NCYXIoLTEwKTtcblx0XHRcdH1cblx0XHRcdHZtLnJlcXVpcmVkRmllbGRDb21wbGV0ZVtmaWVsZF0uY29tcGxldGVkID0gZmFsc2U7XG5cdFx0XHR2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbZmllbGRdLnJvdy5jbGFzc1snaGFzLXN1Y2Nlc3MnXSA9IGZhbHNlO1xuXHRcdFx0dm0ucmVxdWlyZWRGaWVsZENvbXBsZXRlW2ZpZWxkXS5yb3cuY2xhc3NbJ2hhcy1mZWVkYmFjayddID0gZmFsc2U7XG5cdFx0XHR2bS5yZXF1aXJlZEZpZWxkQ29tcGxldGVbZmllbGRdLnJvdy5jbGFzc1snaGFzLWVycm9yJ10gPSB0cnVlO1xuXHRcdH1cblx0XHQvL2ZpZWxkIHVwZGF0ZWRcblx0XHRcblx0fVxuXG5cdHZtLnNhdmVFdmVudFRvREIgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9nLmluZm8odm0udGVtcEV2ZW50KTtcblx0XHQvL2NoZWNrIHRoYXQgdGhlIGV2ZW50IGlzIGNvbXBsZXRlXG5cdFx0aWYocGVyY2VudENvbXBsZXRlID4gOTkpIHtcblx0XHRcdC8vaWYgc28gc2F2ZSB0aGUgZXZlbnQgbG9jYWxseVxuXHRcdFx0dGhpc0V2ZW50TWFuYWdlci5zYXZlTmV3SG9zdGluZ0V2ZW50KCdob3N0aW5nJywgdm0udGVtcEV2ZW50KTtcblx0XHRcdC8vdGhlbiBzeW5jIHRoZSBsb2NhbCB3aXRoIHRoZSBkYlxuXHRcdFx0dGhpc0V2ZW50TWFuYWdlci5zZXRSZW1vdGVFdmVudHNGcm9tTG9jYWwoJHJvdXRlUGFyYW1zLnVpZCwgdm0udGVtcEV2ZW50KVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24oc3VjY2VzTWVzc2FnZSkge1xuXHRcdFx0XHQkbG9nLmluZm8oc3VjY2VzTWVzc2FnZSk7XG5cblx0XHRcdFx0Ly9pbiBzdWNjZXMgbWFrZSBzdXJlIHRvIHJlbW92ZSB0aGUgdXBkYXRlZCBmaWVsZFxuXHRcdFx0XHR0aGlzRXZlbnRNYW5hZ2VyLmNsZWFuREJFdmVudHNDYXRlZ29yeSgnaG9zdGluZycpXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKHN1Y2Nlc01lc3NhZ2UpIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oc3VjY2VzTWVzc2FnZSk7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvTWVzc2FnZSkge1xuXHRcdFx0XHRcdCRsb2cuaW5mbyhlcnJvTWVzc2FnZSk7XG5cdFx0XHRcdH0pXG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9NZXNzYWdlKSB7XG5cdFx0XHRcdCRsb2cuaW5mbyhlcnJvTWVzc2FnZSk7XG5cdFx0XHR9KVxuXG5cdFx0XHQvL3JlZGlyZWN0IGJhY2sgdG8gZXZlbnRzXG5cdFx0XHRob3N0ZWRFdmVudFNoZXJwYS5yZWRpcmVjdFRvKCcvdXNlckV2ZW50cycsICRyb3V0ZVBhcmFtcy51aWQpO1xuXHRcdH1cblx0XHRcblx0fVxuXG5cdC8vd2F0Y2hlcnNcblx0JHNjb3BlLiR3YXRjaCgndm0udGVtcEV2ZW50Lmd1ZXN0TGlzdCcsIGZ1bmN0aW9uKGN1cnJlbnQsIG9yaWdpbmFsKSB7XG5cdFx0Ly9pZiBhIGd1ZXN0IGlzIGFkZGVkIHRvIHRoZSBsaXN0IHVwZGF0ZSB0aGUgcHJvZ3Jlc3MgYmFyXG4gICAgICAgIGlmKGFuZ3VsYXIuaXNPYmplY3Qodm0udGVtcEV2ZW50Lmd1ZXN0TGlzdCkpIHtcbiAgICAgICAgXHR1cGRhdGVQcm9ncmVzc0JhcigxMCk7XG4gICAgICAgIH1cblx0fSk7XG5cblx0Ly90YWtlIGFjdGlvblxuXHRpbml0KCk7XG5cbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ0xhbmRpbmdQYWdlQ29udHJvbGxlcicsIExhbmRpbmdQYWdlQ29udHJvbGxlcik7XG5cbkxhbmRpbmdQYWdlQ29udHJvbGxlci4kaW5qZWN0ID0gWyd0cmFmZmljVmFsZXQnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBMYW5kaW5nUGFnZUNvbnRyb2xsZXIodHJhZmZpY1ZhbGV0KSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdHZhciBsYW5kaW5nU2hlcnBhID0gdHJhZmZpY1ZhbGV0O1xuXG5cdC8vbG9jYWwgbWV0aG9kc1xuXHQvL3ZtIG1ldGhvZHNcblx0dm0uY3JlYXRlQW5BY2NvdW50ID0gZnVuY3Rpb24oKSB7XG5cdFx0bGFuZGluZ1NoZXJwYS5yZWRpcmVjdFRvKCcvc2lnbnVwJyk7XG5cdH1cblxuXHR2bS5sb2dpblVzZXIgPSBmdW5jdGlvbigpIHtcblx0XHRsYW5kaW5nU2hlcnBhLnJlZGlyZWN0VG8oJy9sb2dpbicpO1xuXHR9XG5cblx0Ly93YXRjaGVyc1xuXHQvL2FjdGlvblxufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignTWFpbkNvbnRyb2xsZXInLCBNYWluQ29udHJvbGxlcik7XG5cbk1haW5Db250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJGxvY2F0aW9uJywgJyRkb2N1bWVudCcsICckd2luZG93J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gTWFpbkNvbnRyb2xsZXIoJGxvZywgJGxvY2F0aW9uLCAkZG9jdW1lbnQsICR3aW5kb3cpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTsgXG5cblx0ZnVuY3Rpb24gcmVzaXplQkdJbWFnZSgpIHtcblx0XHR2YXIgYm9keSA9IGFuZ3VsYXIuZWxlbWVudCgkZG9jdW1lbnQpO1xuXHRcdCRkb2N1bWVudC5jc3MoJ2hpZ2h0JywgJHdpbmRvdy5vdXRlckhlaWdodClcblx0fVxuXG5cdHZtLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xuXHRcdGFsZXJ0KCdsb2dnaW5nIHlvdSBvdXQhJyk7XG5cdFx0cmVmLnVuYXV0aCgpO1xuXHRcdCRsb2NhdGlvbi5wYXRoKCcvJyk7XG5cdH07XG5cblx0YW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cdFx0Ly9GYXN0Q2xpY2suYXR0YWNoKCRkb2N1bWVudC5ib2R5KTtcblx0XHRyZXNpemVCR0ltYWdlKCk7XG5cdH0pXG59XG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdOZXdVc2VyU2lnblVwQ29udHJvbGxlcicsIE5ld1VzZXJTaWduVXBDb250cm9sbGVyKTtcblxuTmV3VXNlclNpZ25VcENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnLCAndmFsaWRhdGlvbicsICdiYWNrZW5kU2VydmljZXMnLCAndHJhZmZpY1ZhbGV0JywgJ3VzZXJEYXRhJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gTmV3VXNlclNpZ25VcENvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCB2YWxpZGF0aW9uLCBiYWNrZW5kU2VydmljZXMsIHRyYWZmaWNWYWxldCwgdXNlckRhdGEpIHtcblx0dmFyIHZtID0gdGhpcztcblxuXHQvL2RlZmluZSB2bSBpbnB1dCB2YXJpYWJsZXNcblx0dm0uaW5wdXRzID0ge1xuXHRcdG5ld05hbWU6ICcnLFxuXHRcdG5ld0VtYWlsOiAnJyxcblx0XHRuZXdQYXNzd29yZDogJycsXG5cdFx0cmVxdWlyZWRGaWVsZHNEZWZpbmVkOiBmYWxzZVxuXHR9XG5cdHZtLmVycm9ycyA9IHtcblx0XHRuYW1lOiAnJyxcblx0XHRlbWFpbDogJycsXG5cdFx0cGFzc3dvcmQ6IGZhbHNlLFxuXHRcdHBhc3Nlc0FsbFRlc3RzOiBmYWxzZVxuXHR9XG5cdHZtLnBhc3NSZXFzID0ge1xuXHRcdDA6IHsgaWQ6JycsIHJlcTonSXMgYXQgbGVhc3QgMTYgY2hhcmFjdGVycyBsb25nJywgZnVsZmlsbGVkOmZhbHNlLCAnc3R5bGUnOntjb2xvcjoncmVkJ319LFxuXHRcdDE6IHsgaWQ6JycsIHJlcTonSXMgbm8gbG9uZ2VyIHRoYW4gMTAwIGNoYXJhY3RlcnMnLCBmdWxmaWxsZWQ6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOidyZWQnfSB9LFxuXHRcdDI6IHsgaWQ6JycsIHJlcTonQ29udGFpbnMgYXQgbGVhc3Qgb25lIGxvd2VyY2FzZSBsZXR0ZXInLCBmdWxmaWxsZWQ6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOidyZWQnfSB9LFxuXHRcdDM6IHsgaWQ6JycsIHJlcTonQ29udGFpbnMgYXQgbGVhc3Qgb25lIHVwcGVyY2FzZSBsZXR0ZXInLCBmdWxmaWxsZWQ6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOidyZWQnfSB9LFxuXHRcdDQ6IHsgaWQ6JycsIHJlcTonQ29udGFpbnMgYXQgbGVhc3Qgb25lIG51bWJlcicsIGZ1bGZpbGxlZDpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9IH0sXG5cdFx0NTogeyBpZDonJywgcmVxOidDb250YWlucyBhdCBsZWFzdCBvbmUgcmVxdWlyZWQgc3ltYm9sIChcXCFcXEBcXCNcXCRcXCVcXF5cXCZcXCopJywgZnVsZmlsbGVkOmZhbHNlLCAnc3R5bGUnOntjb2xvcjoncmVkJ30gfSxcblx0XHQ2OiB7IGlkOicnLCByZXE6XCJEb2Vzbid0IGhhdmUgYW55IGlsbGVnYWwgY2hhcmFjdGVyc1wiLCBmdWxmaWxsZWQ6dHJ1ZSwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9IH1cblx0fVxuXHR2bS5zaG93UmVxc0JveCA9IGZhbHNlO1xuXG5cdC8vZGVmaW5lIHJlcXVpcmVkIGZpZWxkIGNvbnN0cmFpbnRzXG5cdHZhciBzaWdudXBWYWxpZGF0aW9uID0gdmFsaWRhdGlvbjtcblxuXHQvL2RlZmluZSBjb250cm9sbGVyIG1ldGhvZHNcblx0ZnVuY3Rpb24gdmVyaWZ5UmVxdWlybm1lbnRzKCkge1xuXHRcdGlmKHZtLmVycm9ycy5uYW1lID09ICcnICYmIHZtLmVycm9ycy5lbWFpbCA9PSAnJyAmJiAhdm0uZXJyb3JzLnBhc3N3b3JkKSB2bS5lcnJvcnMucGFzc2VzQWxsVGVzdHMgPSB0cnVlO1xuXHRcdGVsc2Ugdm0uZXJyb3JzLnBhc3Nlc0FsbFRlc3RzID0gZmFsc2U7XG5cblx0XHRpZiggYW5ndWxhci5pc0RlZmluZWQodm0uaW5wdXRzLm5ld05hbWUpICYmIHZtLmlucHV0cy5uZXdOYW1lICE9PSAnJyAmJlxuXHRcdFx0YW5ndWxhci5pc0RlZmluZWQodm0uaW5wdXRzLm5ld0VtYWlsKSAmJiB2bS5pbnB1dHMubmV3RW1haWwgIT09ICcnICYmXG5cdFx0XHRhbmd1bGFyLmlzRGVmaW5lZCh2bS5pbnB1dHMubmV3UGFzc3dvcmQpICYmIHZtLmlucHV0cy5uZXdQYXNzd29yZCAhPT0gJycpIFxuXHRcdFx0XHR2bS5pbnB1dHMucmVxdWlyZWRGaWVsZHNEZWZpbmVkID0gdHJ1ZTtcblx0XHRlbHNlIHZtLmlucHV0cy5yZXF1aXJlZEZpZWxkc0RlZmluZWQgPSBmYWxzZTtcblx0fVxuXG5cdC8vZGVmaW5lIHZtIGFjY2Vzc2libGUgbWV0aG9kc1xuXHR2bS5jaGVja05ld05hbWUgPSBmdW5jdGlvbigpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlXG5cdFx0dmFyIGVycm9ycyA9IFtdO1xuXHRcdHZhciBoYXNOYW1lID0gc2lnbnVwVmFsaWRhdGlvbi5yZXF1aXJlZCh2bS5pbnB1dHMubmV3TmFtZSk7XG5cdFx0dmFyIGxvbmdFbm91Z2ggPSBzaWdudXBWYWxpZGF0aW9uLm1pbk5hbWVMZW5ndGgodm0uaW5wdXRzLm5ld05hbWUpXG5cdFx0XG5cdFx0Ly9sb2cgZXJyb3JzXG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoaGFzTmFtZSkpIGVycm9ycy5wdXNoKGhhc05hbWUpO1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGxvbmdFbm91Z2gpKSBlcnJvcnMucHVzaChsb25nRW5vdWdoKTtcblxuXHRcdC8vdXBkYXRlIHRoZSBlcnJvcnMgbW9kZWxcblx0XHRpZihlcnJvcnMubGVuZ3RoID4gMCkgdm0uZXJyb3JzLm5hbWUgPSBlcnJvcnMuam9pbignLCAnKTtcblx0XHRlbHNlIHZtLmVycm9ycy5uYW1lID0gJyc7XG5cblx0XHR2ZXJpZnlSZXF1aXJubWVudHMoKTtcblx0fVxuXG5cdHZtLmNoZWNrTmV3RW1haWwgPSBmdW5jdGlvbigpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlXG5cdFx0dmFyIGVycm9ycyA9IFtdO1xuXHRcdHZhciBoYXNFbWFpbCA9IHNpZ251cFZhbGlkYXRpb24ucmVxdWlyZWQodm0uaW5wdXRzLm5ld0VtYWlsKTtcblx0XHR2YXIgaXNBbkVtYWlsID0gc2lnbnVwVmFsaWRhdGlvbi5lbWFpbCh2bS5pbnB1dHMubmV3RW1haWwpO1xuXHRcdFxuXHRcdC8vbG9nIGVycm9yc1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGhhc0VtYWlsKSkgZXJyb3JzLnB1c2goaGFzRW1haWwpO1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGlzQW5FbWFpbCkpIGVycm9ycy5wdXNoKGlzQW5FbWFpbCk7XG5cblx0XHQvL3VwZGF0ZSB0aGUgZXJyb3JzIG1vZGVsXG5cdFx0aWYoZXJyb3JzLmxlbmd0aCA+IDApIHZtLmVycm9ycy5lbWFpbCA9IGVycm9ycy5qb2luKCcsICcpO1xuXHRcdGVsc2Ugdm0uZXJyb3JzLmVtYWlsID0gJyc7XG5cblx0XHR2ZXJpZnlSZXF1aXJubWVudHMoKTtcblx0fVxuXG5cdHZtLmNoZWNrTmV3UGFzc3dvcmQgPSBmdW5jdGlvbigpIHtcblx0XHQvL2ZsaXAgb24gcmVxcyBib3hcblx0XHR2bS5zaG93UmVxc0JveCA9IHRydWU7XG5cblx0XHQvL2xvY2FsIHZhcmlhYmxlXG5cdFx0dmFyIGVycm9ycyA9IFtdO1xuXHRcdHZhciBoYXNQYXNzd29yZCA9IHNpZ251cFZhbGlkYXRpb24ucmVxdWlyZWQodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKTtcblx0XHR2YXIgc3BlY2lmaWNSZXFzID0gW1xuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5taW5QYXNzTGVuZ3RoKHZtLmlucHV0cy5uZXdQYXNzd29yZCksXG5cdFx0XHRzaWdudXBWYWxpZGF0aW9uLm1heFBhc3NMZW5ndGgodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKSxcblx0XHRcdHNpZ251cFZhbGlkYXRpb24uYXRMZWFzdE9uZUxvd2VyY2FzZSh2bS5pbnB1dHMubmV3UGFzc3dvcmQpLFxuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5hdExlYXN0T25lVXBwZXJjYXNlKHZtLmlucHV0cy5uZXdQYXNzd29yZCksXG5cdFx0XHRzaWdudXBWYWxpZGF0aW9uLmF0TGVhc3RPbmVOdW1iZXIodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKSxcblx0XHRcdHNpZ251cFZhbGlkYXRpb24uYXRMZWFzdE9uZVN5bWJvbCh2bS5pbnB1dHMubmV3UGFzc3dvcmQpLFxuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5pbGxlZ2FsQ2hhcmFjdGVyKHZtLmlucHV0cy5uZXdQYXNzd29yZClcblx0XHRdO1xuXG5cdFx0Ly9sb2cgZXJyb3JzXG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoaGFzUGFzc3dvcmQpKSBlcnJvcnMucHVzaChoYXNQYXNzd29yZCk7XG5cblx0XHQvL3VwZGF0ZSB0aGUgZXJyb3JzIG1vZGVsXG5cdFx0aWYoZXJyb3JzLmxlbmd0aCA+IDApIHZtLmVycm9ycy5wYXNzd29yZCA9IGVycm9ycy5qb2luKCcsICcpO1xuXHRcdGVsc2Ugdm0uZXJyb3JzLmVtYWlsID0gJyc7XG5cblx0XHQvL3VwZGF0ZSByZXFzIG1vZGVsXG5cdFx0dmFyIGFueUVycm9ycyA9IGZhbHNlO1xuXHRcdGZvcihpPTA7IGk8NzsgaSsrKSB7XG5cdFx0XHRpZihzcGVjaWZpY1JlcXNbaV0pIHtcblx0XHRcdFx0dm0ucGFzc1JlcXNbaV0uZnVsZmlsbGVkID0gdHJ1ZTtcblx0XHRcdFx0dm0ucGFzc1JlcXNbaV0uc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS5wYXNzUmVxc1tpXS5mdWxmaWxsZWQgPSBmYWxzZTtcblx0XHRcdFx0dm0ucGFzc1JlcXNbaV0uc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHRcdFx0XHRhbnlFcnJvcnMgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHZtLmVycm9ycy5wYXNzd29yZCA9IGFueUVycm9ycztcblx0XHR2ZXJpZnlSZXF1aXJubWVudHMoKTtcblx0fVxuXG5cdHZtLmV4aXRQYXNzd29yZCA9IGZ1bmN0aW9uKCkge1xuXHRcdHZtLmNoZWNrTmV3UGFzc3dvcmQoKTtcblx0XHR2bS5zaG93UmVxc0JveCA9IGZhbHNlO1xuXHR9XG5cblx0dm0uY3JlYXRlTmV3VXNlciA9IGZ1bmN0aW9uICgpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIG5ld1VzZXJTaGVycGEgPSB0cmFmZmljVmFsZXQ7XG5cblx0XHQvL2NvbmZpcm0gYWxsIGZpZWxkcyBhcmUgdmFsaWRcblx0XHRpZih2bS5lcnJvcnMucGFzc2VzQWxsVGVzdHMgJiYgdm0uaW5wdXRzLnJlcXVpcmVkRmllbGRzRGVmaW5lZCkge1xuXHRcdFx0XG5cdFx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XHR2YXIgY3JlYXRlTmV3VXNlciA9IGJhY2tlbmRTZXJ2aWNlcztcblx0XHRcdHZhciBuZXdVc2VyRGF0YSA9IHVzZXJEYXRhO1xuXHRcdFx0dmFyIHRoaXNVSUQ7XG5cblx0XHRcdC8vY3JlYXRlIHRoZSBuZXcgdXNlciBpbiB0aGUgZGF0YWJhc2Vcblx0XHRcdGNyZWF0ZU5ld1VzZXIuY3JlYXRlTmV3VXNlcih2bS5pbnB1dHMubmV3RW1haWwsIHZtLmlucHV0cy5uZXdQYXNzd29yZClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKGRiVXNlckRhdGEpIHtcblx0XHRcdFx0XG5cdFx0XHRcdC8vbWFpbnRhaW4gbG9jYWwgdmFsdWVzIHRvIHNwZWVkIHVwIHVzZXIgZXhwZXJpZW5jZVxuXHRcdFx0XHRuZXdVc2VyRGF0YS5zZXRQcmltYXJpZXNMb2NhbGx5KHZtLmlucHV0cy5uZXdFbWFpbCwgdm0uaW5wdXRzLm5ld05hbWUsIGRiVXNlckRhdGEudWlkKTtcblxuXHRcdFx0XHQvL2NyZWF0ZSBhIHVzZXIgcHJvZmlsZSBpbiB0aGUgZGF0YWJhc2Vcblx0XHRcdFx0Y3JlYXRlTmV3VXNlci5hZGROZXdVc2VyVG9EYXRhYmFzZShkYlVzZXJEYXRhLnVpZCwgdm0uaW5wdXRzLm5ld05hbWUsIHZtLmlucHV0cy5uZXdFbWFpbClcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24obWVzc2FnZSkge1xuXG5cdFx0XHRcdFx0JGxvZy5pbmZvKG1lc3NhZ2UpO1xuXG5cdFx0XHRcdFx0Ly9hZGQgdGhpcyB1c2VyIHRvIHRoZSBsaXN0IG9mIHJlZ2lzdGVyZWQgdXNlcnNcblx0XHRcdFx0XHRjcmVhdGVOZXdVc2VyLmFkZE5ld1VzZXJUb1JlZ1VzZXJzTGlzdChkYlVzZXJEYXRhLnVpZCwgdm0uaW5wdXRzLm5ld0VtYWlsKVxuXHRcdFx0XHRcdC50aGVuKGZ1bmN0aW9uKG1lc3NhZ2UpIHtcblxuXHRcdFx0XHRcdFx0Ly9yZWRpcmVjdCB1c2luZyB0aGUgdWlkXG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdC8vcmVkaXJlY3QgdG8gdGhlIG5leHQgcGFnZSBcblx0XHRcdFx0XHRcdG5ld1VzZXJTaGVycGEucmVkaXJlY3RUbygnL3VzZXJJbmZvcm1hdGlvbicsIGRiVXNlckRhdGEudWlkKTtcblx0XHRcdFx0XHRcdCBcblx0XHRcdFx0XHRcdCRsb2cuaW5mbyhtZXNzYWdlKTsgXG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyAkbG9nLmluZm8obWVzc2FnZSk7IH0pXG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5jYXRjaChmdW5jdGlvbihtZXNzYWdlKSB7ICRsb2cuaW5mbyhtZXNzYWdlKTsgfSlcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyAkbG9nLmluZm8obWVzc2FnZSk7IH0pXG5cdFx0XHRcblx0XHR9XG5cblx0fVxuXHRcblx0Ly9ydW4gdGltZSBhY3Rpb25zXG5cbn1cblxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignUmVnVXNlckxvZ2luQ29udHJvbGxlcicsIFJlZ1VzZXJMb2dpbkNvbnRyb2xsZXIpO1xuXG5SZWdVc2VyTG9naW5Db250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJGRvY3VtZW50JywgJ2JhY2tlbmRTZXJ2aWNlcycsICd0cmFmZmljVmFsZXQnLCAndXNlckRhdGEnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBSZWdVc2VyTG9naW5Db250cm9sbGVyKCRsb2csICRkb2N1bWVudCwgYmFja2VuZFNlcnZpY2VzLCB0cmFmZmljVmFsZXQsIHVzZXJEYXRhKSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cblx0Ly9kZWZpbmUgdm0gaW5wdXQgdmFyaWFibGVzXG5cdHZtLmlucHV0cyA9IHtcblx0XHRlbWFpbDogJycsXG5cdFx0cGFzc3dvcmQ6ICcnLFxuXHRcdHJlcXVpcmVkRmllbGRzRGVmaW5lZDogZmFsc2Vcblx0fVxuXHR2bS5lcnJvcnMgPSB7XG5cdFx0bWVzc2FnZTogJycsXG5cdFx0cGFzc2VzQWxsVGVzdHM6IHRydWVcblx0fVxuXHR2bS51bmNsb2NrVXNlckxvZ2luQnRuID0ge1xuXHRcdCd1c2FibGUnOmZhbHNlLCBcblx0XHQnY2xhc3MnOiB7XG5cdFx0XHQnYnRuJzogdHJ1ZSxcblx0XHRcdCdidG4td2FybmluZyc6IHRydWUsXG5cdFx0XHQnYnRuLXN1Y2Nlc3MnOiBmYWxzZSxcblx0XHRcdCdjb2wteHMtMTInOiB0cnVlLFxuXHRcdFx0J2NvbC1zbS0xMic6IHRydWUsXG5cdFx0fSxcblx0XHRtZXNzYWdlOiAnTmVlZCBFbWFpbCAmIFBhc3MnXG5cdH1cblxuXHQvL21ldGhvZHNcblx0ZnVuY3Rpb24gb3BlblVzZXJMb2dpbkJ0bigpIHtcblx0XHQvL2NoZWNrIHRoYXQgdGhlcmUgaXMgYW4gZW1haWwgYW5kIHRoZXJlIGlzIGEgcGFzc3dvcmRcblx0XHRpZihcdGFuZ3VsYXIuaXNEZWZpbmVkKHZtLmlucHV0cy5lbWFpbCkgJiYgdm0uaW5wdXRzLmVtYWlsICE9PSAnJyAmJlxuXHRcdFx0YW5ndWxhci5pc0RlZmluZWQodm0uaW5wdXRzLnBhc3N3b3JkKSAmJiB2bS5pbnB1dHMucGFzc3dvcmQgIT09ICcnKSBcblx0XHR7XG5cdFx0XHR2bS5pbnB1dHMucmVxdWlyZWRGaWVsZHNEZWZpbmVkID0gdHJ1ZTtcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4uY2xhc3NbJ2J0bi1zdWNjZXNzJ10gPSB0cnVlO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi5jbGFzc1snYnRuLXdhcm5pbmcnXSA9IGZhbHNlO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi5tZXNzYWdlID0gJ0xvZ2luJztcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlID0gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dm0uaW5wdXRzLnJlcXVpcmVkRmllbGRzRGVmaW5lZCA9IGZhbHNlO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi5jbGFzc1snYnRuLXN1Y2Nlc3MnXSA9IGZhbHNlO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi5jbGFzc1snYnRuLXdhcm5pbmcnXSA9IHRydWU7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLm1lc3NhZ2UgPSAnTmVlZCBFbWFpbCAmIFBhc3MnO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi51c2FibGUgPSBmYWxzZTtcblx0XHR9XG5cblx0fVxuXG5cdC8vdmlldyBtb2RlbCBtZXRob2RzXG5cdHZtLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vc2V0IHZhbHVlc1xuXHRcdHZtLmlucHV0cy5lbWFpbCA9ICRkb2N1bWVudC5maW5kKCcjdXNlckVtYWlsJylbMF0udmFsdWU7XG5cdFx0dm0uaW5wdXRzLnBhc3N3b3JkID0gJGRvY3VtZW50LmZpbmQoJyN1c2VyUGFzc3dvcmQnKVswXS52YWx1ZTtcblx0XHRcblx0XHRvcGVuVXNlckxvZ2luQnRuKCk7XG5cdH1cblxuXHR2bS5sb2dpblJlZ2lzdGVyZWRVc2VyID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciByZWdpc3RlcmVkVXNlclNoZXJwYSA9IHRyYWZmaWNWYWxldDtcblxuXHRcdC8vY29uZmlybSBhbGwgZmllbGRzIGFyZSB2YWxpZFxuXHRcdGlmKHRydWUpIHtcblx0XHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRcdHZhciBkYXRhYmFzZSA9IGJhY2tlbmRTZXJ2aWNlcztcblx0XHRcdHZhciByZWdpc3RlcmVkVXNlckRhdGEgPSB1c2VyRGF0YTtcblxuXHRcdFx0Ly92ZXJpZnkgdXNlcnMgY3JlZGVudGlhbHNcblx0XHRcdGRhdGFiYXNlLkxvZ2luUmVnaXN0ZXJlZFVzZXIodm0uaW5wdXRzLmVtYWlsLCB2bS5pbnB1dHMucGFzc3dvcmQpXG5cdFx0XHQudGhlbihmdW5jdGlvbih1c2VyQ3JlZGVudGlhbHMpIHtcblx0XHRcdFx0Ly9pZiBubyB0cm91YmxlIGxvZ2dpbmcgaW4gdXBkYXRlIGVycm9yIG9iamVjdFxuXHRcdFx0XHR2bS5lcnJvcnMucGFzc2VzQWxsVGVzdHMgPSB0cnVlO1xuXG5cdFx0XHRcdC8vYWRkIHByaW1hcnkgaW5mb3JtYXRpb24gdG8gbG9jYWwgbW9kZWxcblx0XHRcdFx0cmVnaXN0ZXJlZFVzZXJEYXRhLnNldFByaW1hcmllc0xvY2FsbHkodm0uaW5wdXRzLmVtYWlsLCB2bS5pbnB1dHMubmFtZSwgdXNlckNyZWRlbnRpYWxzLnVpZCk7XG5cblx0XHRcdH0pXG5cdFx0XHQudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdFx0JGxvZy5pbmZvKFwidWlkIGlzIFwiICsgcmVnaXN0ZXJlZFVzZXJEYXRhLmdldFVJRExvY2FsbHkoKSk7XG5cblx0XHRcdFx0ZGF0YWJhc2UuZ2V0VXNlckJpbyhyZWdpc3RlcmVkVXNlckRhdGEuZ2V0VUlETG9jYWxseSgpKVxuXHRcdFx0XHQudGhlbihmdW5jdGlvbih1c2VyQmlvKSB7XG5cdFx0XHRcdFx0Ly91cGRhdGUgdXNlckRhdGEgbW9kZWwgd2l0aCB1c2VyQmlvXG5cdFx0XHRcdFx0cmVnaXN0ZXJlZFVzZXJEYXRhLnVwZGF0ZUJpb0xvY2FsbHkodXNlckJpbyk7XG5cblx0XHRcdFx0XHQvL2xvYWQgdXNlciBldmVudHNcblx0XHRcdFx0XHRkYXRhYmFzZS5nZXRVc2VyRXZlbnRzKHJlZ2lzdGVyZWRVc2VyRGF0YS5nZXRVSURMb2NhbGx5KCkpXG5cdFx0XHRcdFx0LnRoZW4oZnVuY3Rpb24oYWxsRXZlbnRzRm9yVGhpc1VzZXIpIHtcblx0XHRcdFx0XHRcdC8vdXBkYXRlIHVzZXJEYXRhIG1vZGVsIHdpdGggdXNlckV2ZW50c1xuXHRcdFx0XHRcdFx0cmVnaXN0ZXJlZFVzZXJEYXRhLnVwZGF0ZUFsbFVzZXJFdmVudHNMb2NhbGx5KGFsbEV2ZW50c0ZvclRoaXNVc2VyKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdC5jYXRjaChmdW5jdGlvbihtZXNzYWdlKSB7ICRsb2cuaW5mbyhtZXNzYWdlKTsgfSlcblxuXHRcdFx0XHR9KVxuXHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyAkbG9nLmluZm8obWVzc2FnZSk7IH0pXG5cblx0XHRcdFx0Ly9yZWRpcmVjdCB0byB0aGUgbmV4dCBwYWdlIFxuXHRcdFx0XHRyZWdpc3RlcmVkVXNlclNoZXJwYS5yZWRpcmVjdFRvKCcvdXNlckluZm9ybWF0aW9uJywgcmVnaXN0ZXJlZFVzZXJEYXRhLmdldFVJRExvY2FsbHkoKSk7XG5cblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyBcblx0XHRcdFx0Ly9pZiB0aGVyZSB3YXMgYW4gZXJyb3IgbG9nZ2luZyBpbiwgbGV0IHRoZSB1c2VyIGtub3dcblx0XHRcdFx0dm0uZXJyb3JzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuXHRcdFx0XHR2bS5lcnJvcnMucGFzc2VzQWxsVGVzdHMgPSBmYWxzZTtcblx0XHRcdH0pXG5cblx0XHRcdC8vdXNlIHVpZCB0byBjb2xsZWN0IHVzZXIgYmlvXG5cdFx0XHRcblx0XHR9XG5cblx0fVxuXG5cdHZtLmNsaWNrZWQgPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgdXNlckF1dGhlbnRpY2F0aW9uID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0dXNlckF1dGhlbnRpY2F0aW9uLmxvZ1VzZXJPdXQoKTtcblx0fVxuXG5cdC8vcnVuIGNvbW1hbmRzXG59XG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCd0b3BNZW51Q29udHJvbGxlcicsIHRvcE1lbnVDb250cm9sbGVyKTtcblxudG9wTWVudUNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnLCAnJGxvY2F0aW9uJywgJyRkb2N1bWVudCcsICckd2luZG93J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gdG9wTWVudUNvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCAkbG9jYXRpb24sICRkb2N1bWVudCwgJHdpbmRvdykge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHR2YXIgZmJVUkwgPSAnaHR0cHM6Ly9tZWV0dXBwbGFubmVyLmZpcmViYXNlaW8uY29tLyc7XG5cdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXG5cdC8vbG9jYWwgdmFyaWFibGVzXG5cdHZtLmxvZ2dlZEluID0gZmFsc2VcblxuXHQvL3N0eWxlcyB2YXJpYWJsZXNcblx0XG5cdC8vZXZlbnQgbGlzdGVuZXJzXG5cdGlmICgnYWRkRXZlbnRMaXN0ZW5lcicgaW4gJGRvY3VtZW50KSB7XG5cdCAgICAkZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkge1xuXHQgICAgXHQkbG9nLmluZm8oJ2FkZGluZyBGYXN0Q2xpY2snKTtcblx0ICAgICAgICBGYXN0Q2xpY2suYXR0YWNoKCRkb2N1bWVudC5ib2R5KTtcblx0ICAgIH0sIGZhbHNlKTtcblx0fVxuXG5cdGFuZ3VsYXIuZWxlbWVudCgkd2luZG93KS5iaW5kKCdyZXNpemUnLCBmdW5jdGlvbigpIHtcblx0XHR2bS5vblJlc2l6ZUZ1bmN0aW9uKCk7XG5cdFx0JHNjb3BlLiRhcHBseSgpO1xuXHR9KTtcblxuXHRhbmd1bGFyLmVsZW1lbnQoJGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcblx0XHRpZigkd2luZG93Lm91dGVyV2lkdGggPCA2MDApIHtcblx0XHRcdHZtLm9uUmVzaXplRnVuY3Rpb24oKTtcblx0XHRcdCRzY29wZS4kYXBwbHkoKTtcblx0XHR9XG5cdH0pXG5cdC8vZHluYW1pY2FsbHkgc2V0IGlucHV0IHdpZHRoXG5cblxuXHQvLyBDcmVhdGUgYSBjYWxsYmFjayB3aGljaCBsb2dzIHRoZSBjdXJyZW50IGF1dGggc3RhdGVcblx0ZnVuY3Rpb24gaW5pdCgpIHtcblx0XHR2bS5vblJlc2l6ZUZ1bmN0aW9uKCk7XG5cdFx0JHNjb3BlLiRhcHBseSgpO1xuXHR9XG5cblx0ZnVuY3Rpb24gYXV0aERhdGFDYWxsYmFjayhhdXRoRGF0YSkge1xuXHQgIGlmIChhdXRoRGF0YSkge1xuXHQgICAgJGxvZy5pbmZvKFwiVXNlciBcIiArIGF1dGhEYXRhLnVpZCArIFwiIGlzIGxvZ2dlZCBpbiB3aXRoIFwiICsgYXV0aERhdGEucHJvdmlkZXIpO1xuXHQgICAgdm0ubG9nZ2VkSW4gPSB0cnVlO1xuXHQgIH0gZWxzZSB7XG5cdCAgICAkbG9nLmluZm8oXCJVc2VyIGlzIGxvZ2dlZCBvdXRcIik7XG5cdCAgICB2bS5sb2dnZWRJbiA9IGZhbHNlO1xuXHQgIH1cblx0fVxuXG5cdGZ1bmN0aW9uIHJlZGlyZWN0KHBhdGgsIHVzZXJEYXRhKSB7XG5cdFx0dmFyIGZ1bGxQYXRoID0gcGF0aCArICcvJyArIHVzZXJEYXRhLnVpZCArICcvJyArIHVzZXJEYXRhLnRva2VuO1xuXHRcdC8vcmVkaXJlY3Rcblx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIHRvOiAnICsgZnVsbFBhdGgpO1xuXHRcdCRsb2NhdGlvbi5wYXRoKGZ1bGxQYXRoKTtcblx0XHQvLyRzY29wZS4kYXBwbHkoKTtcblx0fVxuXG5cdC8vdm0gYWNjZXNzaWJsZSBtZXRob2RzXG5cdHZtLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2cuaW5mbygnbG9nZ2luZyBvdXQhJyk7XG5cdFx0dm0ubG9nZ2VkSW4gPSBmYWxzZTtcblx0XHRyZWYudW5hdXRoKCk7XG5cdFx0cmVkaXJlY3QoJy8nLCB7dWlkOicnLCB0b2tlbjonJ30pO1xuXHR9XG5cblx0dm0ubmF2QmFyTG9naW5SZWdpc3RlcmVkVXNlciA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2cuaW5mbygnbGF1bmNoaW5nIGxvZ2luJyk7XG5cdFx0aWYodHJ1ZSkge1xuXHRcdC8vaWYodm0udW5jbG9ja1VzZXJMb2dpbkJ0bi51c2FibGUpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlXG5cdFx0XHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHRcdFx0Ly9hdXRoZW50aWNhdGUgdGhlIHVzZXJcblx0XHRcdHJlZi5hdXRoV2l0aFBhc3N3b3JkKHtcblx0XHRcdFx0ZW1haWw6IHZtLm5hdmJhclVzZXJFbWFpbCxcblx0XHRcdFx0cGFzc3dvcmQ6IHZtLm5hdmJhclVzZXJQYXNzXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvciwgYXV0aERhdGEpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ0Vycm9yIExvZ2dpbmcgSW46ICcgKyBlcnJvcik7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdMb2dnZWQgSW4gc3VjY2Vzc2Z1bGx5OiAnICsgYXV0aERhdGEudWlkKTtcblx0XHRcdFx0XHQkbG9nLmluZm8oYXV0aERhdGEpO1xuXHRcdFx0XHRcdC8vc2F2ZSBhbGwgdGhlIGRhdGFcblxuXHRcdFx0XHRcdC8vbG9hZCB1c2VyIGJpb1xuXHRcdFx0XHRcdC8vbG9hZCB1c2VyIGV2ZW50c1xuXG5cdFx0XHRcdFx0Ly9yZWRpcmVjdFxuXHRcdFx0XHRcdHJlZGlyZWN0KCcvdXNlckluZm9ybWF0aW9uJywgYXV0aERhdGEpO1xuXHRcdFx0XHRcdCRzY29wZS4kYXBwbHkoKTtcblxuXHRcdFx0XHRcdC8vY2xpY2sgY2xvc2VkIHRoZSBuYXZiYXJcblx0XHRcdFx0XHRhbmd1bGFyLmVsZW1lbnQoJy5uYXZiYXItdG9nZ2xlJykuY2xpY2soKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblxuXG5cdFx0fVxuXG5cdH1cblxuXHR2bS5vblJlc2l6ZUZ1bmN0aW9uID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG5hdmJhcklucHV0cyA9IGFuZ3VsYXIuZWxlbWVudCgnLm5hdmJhcklucHV0cycpO1xuXHRcdG5hdmJhcklucHV0cy5jc3MoJ3dpZHRoJywgKCR3aW5kb3cub3V0ZXJXaWR0aCAtIDI2KSArICdweCcpO1xuXHR9XG5cblx0Ly8gUmVnaXN0ZXIgdGhlIGNhbGxiYWNrIHRvIGJlIGZpcmVkIGV2ZXJ5IHRpbWUgYXV0aCBzdGF0ZSBjaGFuZ2VzXG5cdHJlZi5vbkF1dGgoYXV0aERhdGFDYWxsYmFjayk7XG59XG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdVc2VyRXZlbnRzQ29udHJvbGxlcicsIFVzZXJFdmVudHNDb250cm9sbGVyKTtcblxuVXNlckV2ZW50c0NvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICckcm91dGVQYXJhbXMnLCAndXNlckRhdGEnLCAndHJhZmZpY1ZhbGV0J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gVXNlckV2ZW50c0NvbnRyb2xsZXIoJGxvZywgJHJvdXRlUGFyYW1zLCB1c2VyRGF0YSwgdHJhZmZpY1ZhbGV0KSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdHZhciBjdXJyZW50VXNlciA9IHVzZXJEYXRhO1xuXG5cdC8vbG9jYWwgdmlldyB2YXJpYWJsZXNcblx0dm0uc2hvd0RlY2xpbmUgPSBmYWxzZTtcdC8vd2hhdCBpcyB0aGlzIGJlaW5nIHVzZWQgZm9yP1xuXHR2bS51c2VyQmlvID0ge31cblx0dm0uZXZlbnRzID0ge307XG5cdHZtLnNlY3Rpb25BdmFpbGFibGUgPSB7XG5cdFx0cGVuZGluZzogZmFsc2UsXG5cdFx0YXR0ZW5kaW5nOiBmYWxzZSxcblx0XHRob3N0aW5nOiBmYWxzZSxcblx0XHRjb21wbGV0ZWQ6IGZhbHNlXG5cdH07XG5cdHZtLmVycm9ycyA9IHt9O1xuXG5cdC8vZGVjbGFyZSBsb2NhbCBtZXRob2RzXG5cdGZ1bmN0aW9uIHVuaXhUaW1lVG9EYXRlVGltZSh1bml4VGltZSkge1xuXHRcdHJldHVybiBuZXcgRGF0ZShwYXJzZUludCh1bml4VGltZSkpO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIGRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fTtcblxuXHRmdW5jdGlvbiBub09mSG9zdGVFdmVudHMoKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlXG5cdFx0dmFyIGNvdW50ZXIgPSAwO1xuXG5cdFx0Zm9yKGV2ZW50IGluIHZtLmV2ZW50cy5ob3N0aW5nKSBjb3VudGVyKys7XG5cblx0XHRyZXR1cm4gY291bnRlcjtcblx0fVxuXG5cdGZ1bmN0aW9uIGdlbmVyYXRlRXZlbnRJRCgpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xuXHRcdHZhciBldmVudElEID0gKGRhdGVUaW1lVG9Vbml4VGltZShkYXRlKSAqIDEwKSArIChub09mSG9zdGVFdmVudHMoKSk7XG5cblx0XHRyZXR1cm4gZXZlbnRJRDtcblx0fVxuXG5cdGZ1bmN0aW9uIGNoZWNrRm9yRXZlbnRzKCkge1xuXHRcdFxuXHRcdC8vbG9vcCB0aHJvdWdoIGFsbCB0aGUgZXZlbnQgY2F0ZWdvcmllc1xuXHRcdE9iamVjdC5rZXlzKHZtLmV2ZW50cykuZm9yRWFjaChmdW5jdGlvbihjYXRlZ29yeSkge1xuXHRcdFx0XG5cdFx0XHQvL2luc2lkZSBlYWNoIGNhdGVnb3J5IGNvdW50IHRoZSBudW1iZXIgb2YgZXZlbnQgb2JqZWN0cy4uLk5PVCB1cGRhdGVkIHBsYWNlaG9sZGVyIHRob3VnaFxuXHRcdFx0T2JqZWN0LmtleXModm0uZXZlbnRzW2NhdGVnb3J5XSkuZm9yRWFjaChmdW5jdGlvbihldmVudElEKSB7XG5cdFx0XHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZVxuXHRcdFx0XHR2YXIgY291bnRlciA9IDA7XG5cdFx0XHRcdC8vY291bnQgZXZlbnRzIHdpdGggaWQncyAvIE5PVCAndXBkYXRlZCcgcGxhY2Vob2xkZXJzXG5cdFx0XHRcdGlmKGFuZ3VsYXIuaXNPYmplY3Qodm0uZXZlbnRzW2NhdGVnb3J5XVtldmVudElEXSkpIGNvdW50ZXIrKztcblx0XHRcdFx0XG5cdFx0XHRcdC8vaWYgYXQgbGVhc3Qgb25lIGV2ZW50IGlkIChvYmplY3QpIHdhcyBjb3VudGVkLCB0aGVuIHNob3cgdGhlIHNlY3Rpb25cblx0XHRcdFx0aWYoY291bnRlciA+IDApIHZtLnNlY3Rpb25BdmFpbGFibGVbY2F0ZWdvcnldID0gdHJ1ZTtcblx0XHRcdFx0ZWxzZSB2bS5zZWN0aW9uQXZhaWxhYmxlW2NhdGVnb3J5XSA9IGZhbHNlO1xuXHRcdFx0fSk7XG5cblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHtcblx0XHQvL21ha2Ugc3VyZSB0aGUgdWlkIGlzIHNldFxuXHRcdGN1cnJlbnRVc2VyLnNldFVJRExvY2FsbHkoJHJvdXRlUGFyYW1zLnVpZCk7XG5cblx0XHQvL2xvYWQgdGhlIHVzZXIgYmlvXG5cdFx0Y3VycmVudFVzZXIubG9hZEJpbygkcm91dGVQYXJhbXMudWlkKVxuXHRcdC50aGVuKGZ1bmN0aW9uKHJldHJpZXZlZEJpbykge1xuXHRcdFx0dm0udXNlckJpbyA9IHJldHJpZXZlZEJpbztcblx0XHR9KVxuXHRcdC5jYXRjaCgpXG5cblx0XHQvL2xvYWQgdXNlciBldmVudHMgcHJvZ3Jlc3NpdmxleVxuXHRcdC8vZmlzdCB3aGF0ZXZlciBpcyBpbiB0aGUgbW9kZWwgYWxyZWFkeVxuXHRcdHZtLmV2ZW50cyA9IGN1cnJlbnRVc2VyLmdldEFsbFVzZXJFdmVudHNMb2NhbGx5KCk7XG5cblx0XHQvL3RoZW4gY2FsbCB0byB0aGUgZGIgYW5kIGdldCB0aGUgbW9zdCB1cCB0byBkYXRlIGluZm9cblx0XHRjdXJyZW50VXNlci5nZXRSZW1vdGVFdmVudHNGb3JMb2NhbCgpXG5cdFx0LnRoZW4oZnVuY3Rpb24ob2J0YWluZWRVc2VyRXZlbnRzKSB7XG5cdFx0XHQkbG9nLmluZm8ob2J0YWluZWRVc2VyRXZlbnRzKTtcblx0XHRcdC8vdXBkYXRlIHRoZSB2aWV3IG1vZGVsIHdpdGggdGhlIHVwZGF0ZWQgREIgcmVzdWx0c1xuXHRcdFx0dm0uZXZlbnRzID0gY3VycmVudFVzZXIuZ2V0QWxsVXNlckV2ZW50c0xvY2FsbHkoKTtcblx0XHR9KVxuXHRcdC50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdFx0Ly9ub3cgdGhhdCBldmVudHMgYXJlIGxvYWRlZCwgcmVmbGVjdCBpdCBpbiB0aGUgdmlldyBtb2RlbFxuXHRcdFx0Y2hlY2tGb3JFdmVudHMoKTtcblx0XHR9KVxuXG5cdH1cblxuXHQvL2RlY2xhcmUgdmlldyBtZXRob2RzXG5cdHZtLmNyZWF0ZU5ld0V2ZW50ID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGV2ZW50SUQgPSBnZW5lcmF0ZUV2ZW50SUQoKTtcblx0XHR2YXIgbmV3RXZlbnRTaGVycGEgPSB0cmFmZmljVmFsZXQ7XG5cblx0XHQvL2FkZCB0aGUgZXZlbnQgdG8gdGhlIG1vZGFsIChsb2NhbGx5IE9OTFkpXG5cdFx0Y3VycmVudFVzZXIuY3JlYXRlTmV3RXZlbnQoZXZlbnRJRClcblx0XHQvKi50aGVuKGZ1bmN0aW9uKGFmZmlybWF0aXZlUmVzcG9uc2UpIHtcblx0XHRcdC8vcmVwb3J0IHRoZSBzdWNjZXNzXG5cdFx0XHQkbG9nLmluZm8oYWZmaXJtYXRpdmVSZXNwb25zZSk7XG5cdFx0fSlcblx0XHQudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdC8vaWYgdGhlcmUgd2FzIGFuIHVwZGF0ZWQgZmllbGQsIHJlbW92ZSBpdCBub3dcblx0XHRcdGN1cnJlbnRVc2VyLmNsZWFuREJFdmVudHNDYXRlZ29yeSgnaG9zdGluZycpO1xuXG5cdFx0fSlcblx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3JSZXNwb25zZSkge1xuXHRcdFx0Ly9yZXBvcnQgdGhlIGVycm9yXG5cdFx0XHQkbG9nLmluZm8oZXJyb3JSZXNwb25zZSk7XG5cdFx0fSkqL1xuXHRcdFxuXG5cdFx0Ly9yZWRpcmVjdCB0byB0aGUgbmV3IGV2ZW50IHBhZ2VcdFx0XG5cdFx0bmV3RXZlbnRTaGVycGEucmVkaXJlY3RUbygnL2V2ZW50JywgZXZlbnRJRCwgY3VycmVudFVzZXIuZ2V0VUlETG9jYWxseSgpLCBjdXJyZW50VXNlci5nZXRVSURMb2NhbGx5KCkpO1xuXHR9XG5cblx0Ly9leGVjdXRlIHNjcmlwdHNcblx0aW5pdGlhbGl6ZSgpO1xuXG59XG5cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ1VzZXJJbmZvcm1hdGlvbkNvbnRyb2xsZXInLCBVc2VySW5mb3JtYXRpb25Db250cm9sbGVyKTtcblxuVXNlckluZm9ybWF0aW9uQ29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJywgJyRkb2N1bWVudCcsICckcm91dGVQYXJhbXMnLCd1c2VyRGF0YScsICd0cmFmZmljVmFsZXQnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBVc2VySW5mb3JtYXRpb25Db250cm9sbGVyKCRsb2csICRkb2N1bWVudCwgJHJvdXRlUGFyYW1zLCB1c2VyRGF0YSwgdHJhZmZpY1ZhbGV0KSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdFxuXHQvL2xvY2FsIHZhcmlhYmxlc1xuXHR2YXIgY3VycmVudFVzZXIgPSB1c2VyRGF0YTtcblxuXHQvL3ZpZXcgbW9kZWwgdmFyaWFibGVzXG5cdHZtLnVzZXIgPSB7fTtcblx0dm0udGVtcEJpcnRoZGF5O1xuXHR2bS52aWV3ID0ge1xuXHRcdGRhdGFUb1NhdmU6IGZhbHNlLFxuXHRcdGlzRGF0YTogZmFsc2UsXG5cdFx0YnRuTXNzZzogJ01vdmUgT24uLi4nLFxuXHRcdHByb2NlZWRCdG46ICdidG4gYnRuLXByaW1hcnknXG5cdH07XG5cblx0Ly9sb2NhbCBtZXRob2RzXG5cdGZ1bmN0aW9uIHVuaXhUaW1lVG9EYXRlVGltZSh1bml4VGltZSkge1xuXHRcdHJldHVybiBuZXcgRGF0ZShwYXJzZUludCh1bml4VGltZSkpO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIGRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fTtcblxuXHRmdW5jdGlvbiBidWlsZFRlbXBCaXJ0aGRheSgpe1xuXHRcdHZhciBuZXdCaXJ0aGRheSA9IG5ldyBEYXRlKCk7XG5cblx0XHQvL3JvdW5kIHRvIHRoZSBuZWFyZXN0IGhvdXIsIGN1dCBvZmYgYW55dGhpbmcgc21hbGxlclxuXHRcdG5ld0JpcnRoZGF5LnNldEhvdXJzKDApO1xuXHRcdG5ld0JpcnRoZGF5LnNldE1pbnV0ZXMoMCk7XG5cdFx0bmV3QmlydGhkYXkuc2V0U2Vjb25kcygwKTtcblx0XHRuZXdCaXJ0aGRheS5zZXRNaWxsaXNlY29uZHMoMCk7XG5cblx0XHR2bS50ZW1wQmlydGhkYXkgPSBuZXdCaXJ0aGRheTtcblx0fVxuXG5cdC8vdmlldyBhY2Nlc3NpYmxlIG1ldGhvZHNcblx0dm0uY2hlY2tWYWx1ZXMgPSBmdW5jdGlvbigpIHtcblx0XHQvL3Rocm93IHRoZSBpc0RhdGEgZmxhZyBpZiBzb21ldGhpbmcgaXMgdXBkYXRlZFxuXHRcdHZtLnZpZXcuaXNEYXRhID0gdHJ1ZTtcblxuXHRcdGlmKCAhKGFuZ3VsYXIuaXNVbmRlZmluZWQodm0udXNlci5jb21wYW55KSB8fCB2bS51c2VyLmNvbXBhbnkgPT09ICcnKSB8fCBcblx0XHRcdCEoYW5ndWxhci5pc1VuZGVmaW5lZCh2bS51c2VyLnRpdGxlKSB8fCB2bS51c2VyLnRpdGxlID09PSAnJykgfHwgXG5cdFx0XHQhKGFuZ3VsYXIuaXNVbmRlZmluZWQodm0udXNlci5kb2IpIHx8IHZtLnVzZXIuZG9iID09PSAnJykpIFxuXHRcdHtcblx0XHRcdHZtLnZpZXcuZGF0YVRvU2F2ZSA9IHRydWU7XG5cdFx0XHR2bS52aWV3LnByb2NlZWRCdG4gPSAnYnRuIGJ0bi1zdWNjZXNzJztcblx0XHRcdHZtLnZpZXcuYnRuTXNzZyA9ICdTYXZlICYgQ29udGludWUnO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2bS52aWV3LmRhdGFUb1NhdmUgPSBmYWxzZTtcblx0XHRcdHZtLnZpZXcucHJvY2VlZEJ0biA9ICdidG4gYnRuLXByaW1hcnknO1xuXHRcdFx0dm0udmlldy5idG5Nc3NnID0gJ01vdmUgT24uLi4nO1x0XG5cdFx0fVxuXG5cdH1cblxuXHR2bS51cGRhdGVET0IgPSBmdW5jdGlvbigpIHtcblx0XHR2bS51c2VyLmRvYiA9IGRhdGVUaW1lVG9Vbml4VGltZSh2bS50ZW1wQmlydGhkYXkpO1xuXHRcdHZtLmNoZWNrVmFsdWVzKCk7XG5cdH1cblxuXHR2bS5zYXZlQW5kTW92ZU9uID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgdXNlckluZm9TaGVycGEgPSB0cmFmZmljVmFsZXQ7XG5cdFx0dmFyIGN1cnJlbnRVaWQgPSBjdXJyZW50VXNlci5nZXRVSURMb2NhbGx5KCk7XG5cblx0XHQvL2NvbnZlcnQgRE9CIHRvIHVuaXhUaW1lIGFuZCBzYXZlXG5cdFx0aWYodm0udGVtcEJpcnRoZGF5ICE9PSAwKSB2bS51cGRhdGVET0IoKTtcblx0XHRcblx0XHQvL2lmIHRoZXJlIGlzbid0IGN1cnJlbnRseSBhIGRvYiwgZ3JhYiBmcm9tIHRoZSByb3V0ZSBwYXJhbXNcblx0XHRpZihjdXJyZW50VWlkID09ICcnIHx8IGFuZ3VsYXIuaXNVbmRlZmluZWQoY3VycmVudFVpZCkpIHtcblx0XHRcdGN1cnJlbnRVc2VyLnNldFVJRExvY2FsbHkoJHJvdXRlUGFyYW1zLnVpZCk7XG5cdFx0fVxuXG5cdFx0Ly9pZiB0aGVyZSBpcyBuZXcgZGF0YSwgc2F2ZSBpdFxuXHRcdGlmKHZtLnZpZXcuaXNEYXRhKSB7XG5cdFx0XHQkbG9nLmluZm8oJ3NhdmluZyB0aGUgbmV3IGRhdGEnKTtcblx0XHRcdGN1cnJlbnRVc2VyLnVwZGF0ZUJpb0xvY2FsbHkodm0udXNlcik7XG5cdFx0fVxuXHRcdFxuXHRcdC8vbW92ZSBvblxuXHRcdHVzZXJJbmZvU2hlcnBhLnJlZGlyZWN0VG8oJy91c2VyRXZlbnRzJywgdm0udXNlci51aWQpXG5cdH1cblxuXHRmdW5jdGlvbiBpbml0aWFsaXplKCkge1xuXHRcdC8vbG9hZCBGYXN0Q2xpY2tcblx0XHQvL0Zhc3RDbGljay5hdHRhY2goJGRvY3VtZW50LmJvZHkpO1xuXHRcdGJ1aWxkVGVtcEJpcnRoZGF5KCk7XG5cblx0XHQvL2xvYWQgdXNlckRhdGEgbG9jYWxseSBvciBmcm9tIGRiXG5cdFx0Y3VycmVudFVzZXIubG9hZEJpbygkcm91dGVQYXJhbXMudWlkKVxuXHRcdC50aGVuKGZ1bmN0aW9uKG9idGFpbmVkVXNlckRhdGEpIHtcblx0XHRcdC8vYXNzaWduIHVzZXIgdmFsdWVzXG5cdFx0XHR2bS51c2VyID0gb2J0YWluZWRVc2VyRGF0YTtcblxuXHRcdFx0Ly9idWlsZCB0ZW1wQmlydGhkYXlcblx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKG9idGFpbmVkVXNlckRhdGEuZG9iKSAmJiBvYnRhaW5lZFVzZXJEYXRhLmRvYiAhPT0gJycpIHtcblx0XHRcdFx0dm0udGVtcEJpcnRoZGF5ID0gdW5peFRpbWVUb0RhdGVUaW1lKG9idGFpbmVkVXNlckRhdGEuZG9iKVxuXHRcdFx0fVxuXG5cdFx0fSk7XG5cdFxuXHR9XG5cblx0Ly9ydW4gcHJvY2Vzc2VzXG5cdGluaXRpYWxpemUoKTsgLy93aXRoIGludGVybmV0IHVzZSB0aGUgZXZlbnQgbGlzdGVuZXIgaW5zdGVhZFxufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuZmFjdG9yeSgnYXV0aFNlcnZpY2UnLCBhdXRoU2VydmljZSk7XG5cbmF1dGhTZXJ2aWNlLiRpbmplY3QgPSBbJyRsb2cnLCAnYmFja2VuZFNlcnZpY2VzJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gYXV0aFNlcnZpY2UoJGxvZywgYmFja2VuZFNlcnZpY2VzKSB7XG5cblx0dmFyIGFsbEF1dGhTZXJ2aWNlcyA9IHtcblx0XHRpc0xvZ2dlZEluOiBpc0xvZ2dlZEluXG5cdH07XG5cblx0ZnVuY3Rpb24gaXNMb2dnZWRJbigpIHtcblx0XHQvL2NoZWNrIHRoZSB1c2VyIGF1dGhlbnRpY2Fpb24gc3RhdGVcblx0XHR2YXIgZGJBdXRoZW50aWNhdGlvbiA9IGJhY2tlbmRTZXJ2aWNlcztcblx0XHRcblx0XHRkYkF1dGhlbnRpY2F0aW9uLmNoZWNrTG9naW5TdGF0dXMoKVxuXHRcdC50aGVuKGZ1bmN0aW9uKHN0YXR1cykge1xuXHRcdFx0cmV0dXJuIHN0YXR1cztcblx0XHR9KVxuXHRcdC5jYXRjaChmdW5jdGlvbihzdGF0dXMpIHtcblx0XHRcdHJldHVybiBzdGF0dXM7XG5cdFx0fSlcblx0fVxuXHRcblx0cmV0dXJuIGFsbEF1dGhTZXJ2aWNlcztcblxufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuZmFjdG9yeSgnYmFja2VuZFNlcnZpY2VzJywgYmFja2VuZFNlcnZpY2VzKTtcblxuYmFja2VuZFNlcnZpY2VzLiRpbmplY3QgPSBbJyRsb2cnLCAnJHEnLCAnJHdpbmRvdyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGJhY2tlbmRTZXJ2aWNlcygkbG9nLCAkcSwgJHdpbmRvdykge1xuXHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdHZhciBmYlVSTCA9ICdodHRwczovL21lZXR1cHBsYW5uZXIuZmlyZWJhc2Vpby5jb20vJztcblx0dmFyIGFsbEJhY2tlbmRTZXJ2aWNlcyA9IHtcblx0XHR1dGY4X3RvX2I2NDogdXRmOF90b19iNjQsIFx0XHRcdFx0XHRcdC8vbG9jYWwgZnVuY3Rpb25zIHRvIGNvbnZlcnQgZGF0ZXNcblx0XHRiNjRfdG9fdXRmODogYjY0X3RvX3V0ZjgsXG5cdFx0dW5peFRpbWVUb0RhdGVUaW1lOiB1bml4VGltZVRvRGF0ZVRpbWUsXG5cdFx0ZGF0ZVRpbWVUb1VuaXhUaW1lOiBkYXRlVGltZVRvVW5peFRpbWUsXG5cblx0XHRMb2dpblJlZ2lzdGVyZWRVc2VyOiBMb2dpblJlZ2lzdGVyZWRVc2VyLFx0XHQvL2F1dGhlbnRpY2Fpb25cblx0XHRjaGVja0xvZ2luU3RhdHVzOiBjaGVja0xvZ2luU3RhdHVzLFxuXHRcdGxvZ1VzZXJPdXQ6IGxvZ1VzZXJPdXQsXG5cblx0XHRkb3dubG9hZFVzZXJEYXRhOiBkb3dubG9hZFVzZXJEYXRhLFx0XHRcdFx0Ly9nZXR0ZXIgbWV0aG9kc1xuXHRcdGdldFVzZXJCaW86IGdldFVzZXJCaW8sXG5cdFx0Z2V0VXNlckV2ZW50czogZ2V0VXNlckV2ZW50cyxcblx0XHRnZXRBSG9zdGVkRXZlbnQ6IGdldEFIb3N0ZWRFdmVudCxcblx0XHRnZXRBbkludml0ZWRFdmVudDogZ2V0QW5JbnZpdGVkRXZlbnQsXG5cdFx0ZmluZEd1ZXN0VUlEOiBmaW5kR3Vlc3RVSUQsXG5cdFx0Z2V0R3Vlc3RMaXN0Rm9yRXZlbnQ6IGdldEd1ZXN0TGlzdEZvckV2ZW50LFxuXG5cdFx0Y3JlYXRlTmV3VXNlcjogY3JlYXRlTmV3VXNlcixcdFx0XHRcdFx0Ly9zZXR0ZXIgTWV0aG9kc1xuXHRcdGFkZE5ld1VzZXJUb0RhdGFiYXNlOiBhZGROZXdVc2VyVG9EYXRhYmFzZSxcblx0XHRhZGROZXdVc2VyVG9SZWdVc2Vyc0xpc3Q6IGFkZE5ld1VzZXJUb1JlZ1VzZXJzTGlzdCxcblx0XHR1cGxvYWRVc2VyRGF0YTogdXBsb2FkVXNlckRhdGEsXG5cdFx0dXBsb2FkVXNlckJpbzogdXBsb2FkVXNlckJpbyxcblx0XHRjcmVhdGVIb3N0ZWRFdmVudDogY3JlYXRlSG9zdGVkRXZlbnQsXG5cdFx0YWRkR3Vlc3RUb0hvc3RHdWVzdExpc3RvbkRCOiBhZGRHdWVzdFRvSG9zdEd1ZXN0TGlzdG9uREIsXG5cdFx0Ly9hZGRQZW5kaW5nRXZlbnRGb3JVc2VyOiBhZGRQZW5kaW5nRXZlbnRGb3JVc2VyLFxuXHRcdC8vYWRkUGVuZGluZ0V2ZW50Rm9yR3Vlc3Q6IGFkZFBlbmRpbmdFdmVudEZvckd1ZXN0LFxuXG5cdFx0ZGVsZXRlVXBkYXRlRmllbGQ6IGRlbGV0ZVVwZGF0ZUZpZWxkLFx0XHRcdC8vZGVsZXRlIG1ldGhvZHNcblx0XHRyZW1vdmVJbmNvbXBsZXRlRXZlbnQ6IHJlbW92ZUluY29tcGxldGVFdmVudCxcblxuXHRcdHRoZXJlV2FzQW5VcGRhdGVGaWVsZDogdGhlcmVXYXNBblVwZGF0ZUZpZWxkXHQvL21vZGVsIG1haW50YWluYW5jZVxuXHR9O1xuXG5cdGZ1bmN0aW9uIHV0ZjhfdG9fYjY0KHN0cikge1xuXHRcdHJldHVybiBidG9hKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiBiNjRfdG9fdXRmOChzdHIpIHtcbiAgICBcdHJldHVybiBhdG9iKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNyZWF0ZU5ld1VzZXIoZW1haWwsIHBhc3N3b3JkKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBmaXJlQmFzZUFjY291bnRzID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHRcblx0XHQvL3JldHVybiBhIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcblx0XHRcdGZpcmVCYXNlQWNjb3VudHMuY3JlYXRlVXNlcih7XG5cdFx0XHRcdFxuXHRcdFx0XHRlbWFpbDogZW1haWwsXG5cdFx0XHRcdHBhc3N3b3JkOiBwYXNzd29yZFxuXHRcdFx0XG5cdFx0XHR9LGZ1bmN0aW9uKGVycm9yLCB1c2VyRGF0YSkge1xuXHRcdFx0XHRcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdCgnRXJyb3IgY3JlYXRpbmcgdXNlcjogJyArIGVycm9yKTtcblxuXHRcdFx0XHRlbHNlIHJlc29sdmUodXNlckRhdGEpO1xuXHRcdFx0fSk7XG5cblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGFkZE5ld1VzZXJUb0RhdGFiYXNlKHVpZCwgbmFtZSwgZW1haWwpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIGFwcFVzZXJzID0gYXBwLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCk7XG5cdFx0dmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcblxuXHRcdC8vcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFxuXHRcdFx0YXBwVXNlcnMuc2V0KHsgXG5cdFx0XHRcdCdiaW8nOiB7XG5cdFx0XHRcdFx0J3VpZCc6IHVpZCxcblx0XHRcdFx0XHQnbmFtZSc6IG5hbWUsXG5cdFx0XHRcdFx0J2VtYWlsJzogZW1haWxcblx0XHRcdFx0fSxcblx0XHRcdFx0J2V2ZW50cyc6IHtcblx0XHRcdFx0XHQncGVuZGluZyc6IHtcblx0XHRcdFx0XHRcdCd1cGRhdGVkJzogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0J2hvc3RpbmcnOiB7XG5cdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdCdhdHRlbmRpbmcnOiB7XG5cdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdCdjb21wbGV0ZWQnOiB7XG5cdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoJ0RhdGEgY291bGQgbm90IGJlIHNhdmVkOiAnICsgZXJyb3IpO1xuXHRcdFx0XHRcblx0XHRcdFx0ZWxzZSByZXNvbHZlKCdEYXRhIHNhdmVkIHN1Y2Nlc3NmdWxseS4nKTtcblxuXHRcdFx0fSk7XG5cblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gYWRkTmV3VXNlclRvUmVnVXNlcnNMaXN0KHVpZCwgZW1haWwpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIGI2NEVtYWlsID0gdXRmOF90b19iNjQoZW1haWwpO1xuXHRcdHZhciBSZWdpc3RlcmVkVXNlcnNMaXN0ID0gYXBwLmNoaWxkKCdVaWRzJykuY2hpbGQoYjY0RW1haWwpO1xuXG5cdFx0Ly9yZXR1cm4gYSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XG5cdFx0XHRSZWdpc3RlcmVkVXNlcnNMaXN0LnNldCh1aWQsIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoXCJEYXRhIGNvdWxkIG5vdCBiZSBzYXZlZC4gXCIgKyBlcnJvcik7XG5cdFx0XHRcdGVsc2UgcmVzb2x2ZShcInVpZCBjcmVhdGVkIHN1Y2Vzc2Z1bGx5LlwiKTtcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIExvZ2luUmVnaXN0ZXJlZFVzZXIoZW1haWwsIHBhc3N3b3JkKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdFxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9hdXRoZW50aWNhdGUgdGhlIHVzZXJcblx0XHRcdGFwcC5hdXRoV2l0aFBhc3N3b3JkKHtcblxuXHRcdFx0XHRlbWFpbDogZW1haWwsXG5cdFx0XHRcdHBhc3N3b3JkOiBwYXNzd29yZFxuXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvciwgYXV0aERhdGEpIHtcblx0XHRcdFx0XG5cdFx0XHRcdGlmKGVycm9yKSB7XG5cdFx0XHRcdFx0cmVqZWN0KCdFcnJvciBMb2dnaW5nIEluOiAnICsgZXJyb3IpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vJGxvZy5pbmZvKCdMb2dnZWQgSW4gc3VjY2Vzc2Z1bGx5OiAnICsgYXV0aERhdGEudWlkKTtcblx0XHRcdFx0XHRyZXNvbHZlKGF1dGhEYXRhKTtcblx0XHRcdFx0fVxuXG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXHRcdFxuXHR9XG5cblx0ZnVuY3Rpb24gY2hlY2tMb2dpblN0YXR1cygpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcblx0XHRcdGFwcC5vbkF1dGgoZnVuY3Rpb24oYXV0aERhdGEpIHtcblx0XHRcdFx0aWYgKGF1dGhEYXRhKSB7XG5cdFx0XHRcdCAgICAvLyRsb2cuaW5mbyhcIlVzZXIgXCIgKyBhdXRoRGF0YS51aWQgKyBcIiBpcyBsb2dnZWQgaW4gd2l0aCBcIiArIGF1dGhEYXRhLnByb3ZpZGVyKTtcblx0XHRcdFx0ICAgIHJlc29sdmUodHJ1ZSk7XG5cdFx0XHRcdCAgfSBlbHNlIHtcblx0XHRcdFx0ICAgIC8vJGxvZy5pbmZvKFwiVXNlciBpcyBsb2dnZWQgb3V0XCIpO1xuXHRcdFx0XHQgICAgcmVzb2x2ZShmYWxzZSk7XG5cdFx0XHRcdCAgfVxuXHRcdFx0fSk7XG5cblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGxvZ1VzZXJPdXQoKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXG5cdFx0JGxvZy5pbmZvKCdsb2dnaW5nIHVzZXIgb3V0Jyk7XG5cdFx0YXBwLnVuYXV0aCgpO1xuXHR9XG5cblx0ZnVuY3Rpb24gdXBsb2FkVXNlckRhdGEoYWxsVXNlckRhdGEpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIHVpZCA9IGFsbFVzZXJEYXRhLnVpZDtcblx0XHR2YXIgcmVtb3RlVXNlciA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpO1xuXG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL3RoZSBhY3R1YWwgY2FsbFxuXHRcdFx0cmVtb3RlVXNlci51cGRhdGUoYWxsVXNlckRhdGEsIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoJ1RoZXJlIHdhcyBhIHByb2JsZW0gdXBkYXRpbmcgdGhhdCByZWNvcmQ6ICcgKyBlcnJvcik7XG5cdFx0XHRcdGVsc2UgcmVzb2x2ZSgnYWxsIHVzZXIgZGF0YSB1cGxvYWRlZCBzdWNjZXNzZnVsbHknKTtcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cdFx0XG5cdH1cblxuXHRmdW5jdGlvbiB1cGxvYWRVc2VyQmlvKGN1cnJlbnRVc2VyQmlvKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciB1aWQgPSAoY3VycmVudFVzZXJCaW8udWlkKS50b1N0cmluZygpO1xuXHRcdHZhciByZW1vdGVVc2VyQmlvID0gYXBwLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2JpbycpO1xuXG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHRcdC8vY2FsbCB0byB0aGUgZGJcblx0XHRcdHJlbW90ZVVzZXJCaW8udXBkYXRlKGN1cnJlbnRVc2VyQmlvLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KCdUaGVyZSB3YXMgYSBwcm9ibGVtIHVwZGF0aW5nIHRoYXQgcmVjb3JkOiAnICsgZXJyb3IpO1xuXHRcdFx0XHRlbHNlIHJlc29sdmUoJ2FsbCB1c2VyIGJpbyBkYXRhIHVwbG9hZGVkIHN1Y2Nlc3NmdWxseScpO1xuXHRcdFx0fSlcblxuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gZG93bmxvYWRVc2VyRGF0YSgpIHtcblxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0VXNlckJpbyh1aWQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIHVzZXJCaW8gPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnYmlvJyk7XG5cblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vdGhlIGFjdHVhbCBjYWxsXG5cdFx0XHR1c2VyQmlvLm9uY2UoJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdFx0Ly93aGVuIHRoZSBjYWxsIGlzIHN1Y2Nlc3NmdWwgcmV0dXJuIHRoZSBkYXRhXG5cdFx0XHRcdHJlc29sdmUoc25hcHNob3QudmFsKCkpO1xuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0XHR9IFxuXHRcdFx0fSk7XG5cblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNyZWF0ZUhvc3RlZEV2ZW50KHVpZCwgbmV3RXZlbnQpIHtcblxuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgZXZlbnRJRCA9IG5ld0V2ZW50LmlkO1xuXHRcdHZhciBuZXdIb3N0ZWRFdmVudCA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgnaG9zdGluZycpLmNoaWxkKGV2ZW50SUQpO1xuXG5cdFx0Ly9yZXR1cm4gdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcblx0XHRcdC8vY2FsbCB0byBmaXJlYmFzZVxuXHRcdFx0bmV3SG9zdGVkRXZlbnQuc2V0KG5ld0V2ZW50LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3I6ICcgKyBlcnJvcik7XG5cdFx0XHRcdGVsc2UgcmVzb2x2ZSgnTmV3IGV2ZW50IHNhdmVkIHRvIERCIHN1Y2Nlc3NmdWxseScpO1xuXHRcdFx0fSlcblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gYWRkR3Vlc3RUb0hvc3RHdWVzdExpc3RvbkRCKG5hbWUsIGd1aWVzdElkLCBldmVudElkLCB1aWQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIGd1ZXN0TGlzdCA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgnaG9zdGluZycpLmNoaWxkKGV2ZW50SWQpLmNoaWxkKCdndWVzdExpc3QnKS5jaGlsZChndWllc3RJZCk7XG5cblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9jYWxsIHRvIHRoZSBkYlxuXHRcdFx0Z3Vlc3RMaXN0LnNldCh7XG5cdFx0XHRcdHJzdnBkOiBmYWxzZSxcblx0XHRcdFx0c3RhdHVzOiAncGVuZGluZycsXG5cdFx0XHRcdG5hbWU6IG5hbWVcblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoJ1RoZXJlIHdhcyBhbiBlcnJvcjogJyArIGVycm9yKTtcblx0XHRcdFx0ZWxzZSByZXNvbHZlKCdOZXcgZXZlbnQgc2F2ZWQgdG8gREIgc3VjY2Vzc2Z1bGx5Jyk7XG5cdFx0XHR9KVxuXG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRVc2VyRXZlbnRzKHVpZCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgdXNlckV2ZW50cyA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKTtcblx0XHRcblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vdGhlIGFjdHVhbCBjYWxsXG5cdFx0XHR1c2VyRXZlbnRzLm9yZGVyQnlLZXkoKS5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHRcdHZhciB1c2VyUHJvZmlsZSA9IHNuYXBzaG90LnZhbCgpO1xuXG5cdFx0XHRcdC8vd2hlbiB0aGUgY2FsbCBpcyBzdWNjZXNzZnVsIHJldHVybiB0aGUgZGF0YVxuXHRcdFx0XHR2YXIgZXZlbnRzUGFja2FnZSA9IHtcblx0XHRcdFx0XHRob3N0aW5nOiB1c2VyUHJvZmlsZS5ob3N0aW5nLFxuXHRcdFx0XHRcdGF0dGVuZGluZzogdXNlclByb2ZpbGUuYXR0ZW5kaW5nLFxuXHRcdFx0XHRcdHBlbmRpbmc6IHVzZXJQcm9maWxlLnBlbmRpbmcsXG5cdFx0XHRcdFx0Y29tcGxldGVkOiB1c2VyUHJvZmlsZS5jb21wbGV0ZWRcblx0XHRcdFx0fTtcblxuXHRcdFx0XHRyZXNvbHZlKGV2ZW50c1BhY2thZ2UpO1xuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0XHR9IFxuXHRcdFx0fSk7XG5cblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldEFIb3N0ZWRFdmVudCh1aWQsIGV2ZW50SWQpIHtcblxuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgaG9zdGVkRXZlbnQgPSBhcHAuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ2hvc3RpbmcnKS5jaGlsZChldmVudElkKTtcblxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly90aGUgYWN0dWFsIGNhbGxcblx0XHRcdGhvc3RlZEV2ZW50Lm9uY2UoJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdFx0dmFyIHNlbGVjdEV2ZW50ID0gc25hcHNob3QudmFsKCk7XG5cblx0XHRcdFx0cmVzb2x2ZShzZWxlY3RFdmVudCk7XG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KGVycm9yKTtcblx0XHRcdH0pXG5cdFx0fSlcblx0fVxuXG5cdGZ1bmN0aW9uIGZpbmRHdWVzdFVJRChndWVzdGI2NEVtYWlsKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciB1aWRzID0gYXBwLmNoaWxkKCdVaWRzJyk7XG5cblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vY2FsbCB0byBkYlxuXHRcdFx0dWlkcy5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHRcdC8vZGlzdGlsbCByZXN1bHRzXG5cdFx0XHRcdHZhciBhbGxVc2VycyA9IHNuYXBzaG90LnZhbCgpO1xuXG5cdFx0XHRcdE9iamVjdC5rZXlzKGFsbFVzZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuXHRcdFx0XHRcdC8vY2hlY2sgZWFjaCB1c2VyXG5cdFx0XHRcdFx0aWYoa2V5ID09IGd1ZXN0YjY0RW1haWwpIHtcblx0XHRcdFx0XHRcdHJlc29sdmUoYWxsVXNlcnNba2V5XSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJlamVjdCgnTm8gdXNlciBieSB0aGF0IGVtYWlsJyk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH0pO1xuXG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBnZXRHdWVzdExpc3RGb3JFdmVudChob3N0SWQsIGV2ZW50SWQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIGd1ZXN0TGlzdCA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZChob3N0SWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgnaG9zdGluZycpLmNoaWxkKGV2ZW50SWQpLmNoaWxkKCdndWVzdExpc3QnKTtcblxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9jYWxsIHRoZSBkYlxuXHRcdFx0Z3Vlc3RMaXN0Lm9uY2UoJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdFx0Ly9sb2NhbCB2YXJpYWJsZVxuXHRcdFx0XHR2YXIgdGhlTGlzdCA9IHNuYXBzaG90LnZhbCgpO1xuXG5cdFx0XHRcdHJlc29sdmUodGhlTGlzdCk7XG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3IgZ2V0dGluZyB0aGUgZ3Vlc3QgbGlzdDogJyArICBlcnJvcik7XG5cdFx0XHR9KVxuXHRcdH0pXG5cdH1cblxuXHRmdW5jdGlvbiBnZXRBbkludml0ZWRFdmVudChob3N0SWQsIHVpZCwgZXZlbnRJZCkge31cblxuXHQvKlxuXHRmdW5jdGlvbiBhZGRQZW5kaW5nRXZlbnRGb3JVc2VyKHVpZCwgaG9zdElkLCBldmVudElkLCBldmVudCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgdXNlclBlbmRpbmdMaXN0ID0gYXBwLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdwZW5kaW5nJyk7XG5cblx0XHQvL21hbmdlIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHQvL2NhbGwgdGhlIGRiXG5cdFx0XHR1c2VyUGVuZGluZ0xpc3Quc2V0KHtcblx0XHRcdFx0aG9zdElkOiB7XG5cdFx0XHRcdFx0ZXZlbnRJZDoge1xuXHRcdFx0XHRcdFx0ZXZlbnRcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSByZWplY3QoXCJFcnJvciBhZGRpbmcgdG8gdXNlciBwZW5kaW5nIGxpc3Q6IFwiICsgZXJyb3IpO1xuXHRcdFx0XHRlbHNlIHJldHVybiByZXNvbHZlKCdBZGRlZCB0byB1c2VyIHBlbmRpbmcgbGlzdCBzdWNjZXNzZnVsbHknKTtcblx0XHRcdH0pXG5cblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gYWRkUGVuZGluZ0V2ZW50Rm9yR3Vlc3QodWlkLCBob3N0SWQsIGV2ZW50SWQsIGV2ZW50KSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBhcHAgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHRcdHZhciBndWVzdHNQZW5kaW5nTGlzdCA9IGFwcC5jaGlsZCgnVW5yZWdpc3RlcmVkJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ3BlbmRpbmcnKTtcblxuXHRcdC8vbWFuZ2UgdGhlIHByb21pc2Vcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHRcdC8vY2FsbCB0aGUgZGJcblx0XHRcdHVzZXJQZW5kaW5nTGlzdC5zZXQoe1xuXHRcdFx0XHRob3N0SWQ6IHtcblx0XHRcdFx0XHRldmVudElkOiB7XG5cdFx0XHRcdFx0XHRldmVudFxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdChcIkVycm9yIGFkZGluZyB0byB1c2VyIHBlbmRpbmcgbGlzdDogXCIgKyBlcnJvcik7XG5cdFx0XHRcdGVsc2UgcmV0dXJuIHJlc29sdmUoJ0FkZGVkIHRvIHVzZXIgcGVuZGluZyBsaXN0IHN1Y2Nlc3NmdWxseScpO1xuXHRcdFx0fSlcblxuXHRcdH0pO1xuXG5cdH0qL1xuXG5cdGZ1bmN0aW9uIGRlbGV0ZVVwZGF0ZUZpZWxkKGNhdGVnb3J5LCB1aWQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGFwcCA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdFx0dmFyIGNhdFJlbW92aW5nRnJvbSA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZChjYXRlZ29yeSkuY2hpbGQoJ3VwZGF0ZWQnKTtcblxuXHRcdC8vcmV0dXJuIHRoZSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Y2F0UmVtb3ZpbmdGcm9tLnNldChudWxsLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikgcmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3IgZGVsZXRpbmcgdXBkYXRlIGZpZWxkOiAnICsgZXJyb3IpO1xuXHRcdFx0XHRlbHNlIHJlc29sdmUoJ0RlbGV0ZWQgdXBkYXRlIHN1Y2Nlc3NmdWxseScpO1xuXHRcdFx0fSlcblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gcmVtb3ZlSW5jb21wbGV0ZUV2ZW50KHVpZCwgZXZlbnRJZCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgZXZlbnRUb1JlbW92ZSA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgnaG9zdGluZycpLmNoaWxkKGV2ZW50SWQpO1xuXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0dmFyIG9uQ29tcGxldGUgPSBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdHJlamVjdCgnU3luY2hyb25pemF0aW9uIGZhaWxlZCcpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJlc29sdmUoJ1N5bmNocm9uaXphdGlvbiBzdWNjZWVkZWQnKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvL2NhbGwgZG8gZGJcblx0XHRcdGV2ZW50VG9SZW1vdmUucmVtb3ZlKG9uQ29tcGxldGUpO1xuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiB0aGVyZVdhc0FuVXBkYXRlRmllbGQoY2F0ZWdvcnksIHVpZCkge1xuXHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgYXBwID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0XHR2YXIgY2F0VG9DaGVjayA9IGFwcC5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZChjYXRlZ29yeSk7XG5cblx0XHQvL3JldHVybiB0aGUgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vY2FsbCB0aGUgZGJcblx0XHRcdGNhdFRvQ2hlY2sub25jZSgndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0XHQvL3NhdmUgdGhlIHJlc3BvbnNlXG5cdFx0XHRcdHZhciBjdXJyZW50Q2F0TW9kZWwgPSBzbmFwc2hvdC52YWwoKTtcblx0XHRcdFx0Ly9zaG93IHdoYXQgd2FzIGZvdW5kXG5cdFx0XHRcdC8vbG9vayBmb3IgdGhlIHVwZGF0ZSBmaWVsZFxuXHRcdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChjdXJyZW50Q2F0TW9kZWxbJ3VwZGF0ZWQnXSkpIHJlc29sdmUodHJ1ZSk7XG5cdFx0XHRcdGVsc2UgcmVqZWN0KGZhbHNlKTtcblxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHJlamVjdChlcnJvcik7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXHR9XG5cblx0Ly9yZXR1cm4gdGhlIG9iamVjdFxuXHRyZXR1cm4gYWxsQmFja2VuZFNlcnZpY2VzO1xufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuZmFjdG9yeSgndHJhZmZpY1ZhbGV0JywgdHJhZmZpY1ZhbGV0KTtcblxudHJhZmZpY1ZhbGV0LiRpbmplY3QgPSBbJyRsb2cnLCAnJGxvY2F0aW9uJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gdHJhZmZpY1ZhbGV0KCRsb2csICRsb2NhdGlvbikge1xuXHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdHZhciBhbGxUcmFmZmljQ29udHJvbHMgPSB7XG5cdFx0cmVkaXJlY3RUbzogcmVkaXJlY3RUbyxcblx0XHRldmVudFJvdXRlOiBldmVudFJvdXRlXG5cdH07XG5cblx0ZnVuY3Rpb24gcmVkaXJlY3RUbyhwYXRoLCBwYXJhbTEsIHBhcmFtMiwgcGFyYW0zKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQocGFyYW0xKSkge1xuXHRcdFx0cGF0aCA9IHBhdGggKyAnLycgKyBwYXJhbTE7XG5cblx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHBhcmFtMikpIHtcblx0XHRcdFx0Ly9nbyB0byBwYXRoIHdpdGggMiBwYXJhbXNcblx0XHRcdFx0cGF0aCA9IHBhdGggKyAnLycgKyBwYXJhbTI7XG5cblx0XHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQocGFyYW0zKSkge1xuXHRcdFx0XHRcdHBhdGggPSBwYXRoICsgJy8nICsgcGFyYW0zO1xuXG5cdFx0XHRcdFx0JGxvY2F0aW9uLnBhdGgocGF0aCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQkbG9jYXRpb24ucGF0aChwYXRoKTtcblx0XHRcdH1cblx0XHRcdC8vZ28gd2l0aCAxIHBhcmFtXG5cdFx0XHQkbG9jYXRpb24ucGF0aChwYXRoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly9qdXN0IGdvIHRvIHBhdGhcblx0XHRcdCRsb2NhdGlvbi5wYXRoKHBhdGgpO1xuXHRcdH1cblxuXHR9XG5cblx0ZnVuY3Rpb24gZXZlbnRSb3V0ZShldmVudElkLCBob3N0SWQsIHVzZXJJZCwgc2VjdGlvbikge1xuXG5cdFx0Ly9pZiB0aGVyZSBpc24ndCBhIHNlY3Rpb24gc2V0IHRvIGRlZmF1bHRcblx0XHRpZihhbmd1bGFyLmlzVW5kZWZpbmVkKHNlY3Rpb24pKSBzZWN0aW9uID0gMTtcblxuXHRcdC8vaWYgdGhlIGhvc3RJZCBhbmQgdXNlcklkIG1hdGNoLCBsYXVuY2ggaG9zdCB2aWV3XG5cdFx0aWYoaG9zdElkID09PSB1c2VySWQpIHsgXG5cdFx0XHR2YXIgcGF0aCA9ICcvZXZlbnQvaG9zdC8nICsgZXZlbnRJZCArICcvJyArIHVzZXJJZCArICcvJysgc2VjdGlvbjtcblx0XHRcdC8vcmVkaXJlY3Rcblx0XHRcdCRsb2NhdGlvbi5wYXRoKHBhdGgpO1xuXHRcdH1cblx0XHQvL2lmIHRoZSBob3N0SWQgYW5kIHVzZXJJZCBET04nVCBtYXRjaCwgbGF1bmNoIGd1ZXN0IHZpZXdcblx0XHRlbHNlIHtcblx0XHRcdHZhciBwYXRoID0gJy9ldmVudC9ndWVzdC8nICsgZXZlbnRJZCArICcvJyArIHVzZXJJZCArICcvJyArIGhvc3RJZDtcblx0XHRcdC8vcmVkaXJlY3Rcblx0XHRcdCRsb2NhdGlvbi5wYXRoKHBhdGgpO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBhbGxUcmFmZmljQ29udHJvbHM7XG59XG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5mYWN0b3J5KCd1c2VyRGF0YScsIHVzZXJEYXRhKTtcblxudXNlckRhdGEuJGluamVjdCA9IFsnJGxvZycsICckcScsICdiYWNrZW5kU2VydmljZXMnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiB1c2VyRGF0YSgkbG9nLCAkcSwgYmFja2VuZFNlcnZpY2VzKSB7XG5cdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0dmFyIGN1cnJlbnRVc2VyID0ge1xuXHRcdGJpbzogeyBcblx0XHRcdHVpZDogJycsXG5cdFx0XHRuYW1lOiAnJyxcblx0XHRcdGVtYWlsOiAnJyxcblx0XHRcdGNvbXBhbnk6ICcnLFxuXHRcdFx0dGl0bGU6ICcnLFxuXHRcdFx0ZG9iOiAwXG5cdFx0fSxcblx0XHRldmVudHM6IHtcblx0XHRcdGhvc3Rpbmc6IHt9LFxuXHRcdFx0cGVuZGluZzoge30sXG5cdFx0XHRhdHRlbmRpbmc6IHt9LFxuXHRcdFx0Y29tcGxldGVkOiB7fVxuXHRcdH1cblx0fTtcblxuXHR2YXIgYWN0aXZlRXZlbnQgPSB7fTtcblxuXHQvL2xvY2FsIGZ1bmN0aW9uc1xuXHRmdW5jdGlvbiB1dGY4X3RvX2I2NChzdHIpIHtcblx0XHRyZXR1cm4gYnRvYShzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gYjY0X3RvX3V0Zjgoc3RyKSB7XG4gICAgXHRyZXR1cm4gYXRvYihzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKSB7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KHVuaXhUaW1lKSk7XG5cdH07XG5cblx0ZnVuY3Rpb24gZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKSB7XG5cdFx0cmV0dXJuIERhdGUucGFyc2UoZGF0ZVRpbWUpO1xuXHR9O1xuXG5cdHZhciBhbGxVc2VyRGF0YSA9IHtcblx0XHRiaW9QcmltYXJpZXNBcmVDb21wbGV0ZUxvY2FsbHk6IGJpb1ByaW1hcmllc0FyZUNvbXBsZXRlTG9jYWxseSxcdFx0Ly9tb2RhbCBhbmFseXNpc1xuXHRcdGV2ZW50RXhpc3RzTG9jYWxseTogZXZlbnRFeGlzdHNMb2NhbGx5LFxuXHRcdHRoaXNJc1RoZUhvc3RFbWFpbDogdGhpc0lzVGhlSG9zdEVtYWlsLFxuXHRcdGd1ZXN0SW52aXRlZEFscmVhZHk6IGd1ZXN0SW52aXRlZEFscmVhZHksXG5cdFx0dGhlcmVJc0FuQWN0aXZlRXZlbnQ6IHRoZXJlSXNBbkFjdGl2ZUV2ZW50LFxuXG5cdFx0Y2xlYW5FdmVudHM6IGNsZWFuRXZlbnRzLFx0XHRcdFx0XHRcdFx0Ly9tb2RlbCBtYWludGFpbmFuY2VcblxuXHRcdGdldFVJRExvY2FsbHk6IGdldFVJRExvY2FsbHksXHRcdFx0XHRcdFx0Ly9nZXR0ZXIgTWV0aG9kc1xuXHRcdGdldE5hbWVMb2NhbGx5OiBnZXROYW1lTG9jYWxseSxcblx0XHRnZXRFbWFpbExvY2FsbHk6IGdldEVtYWlsTG9jYWxseSxcblx0XHRnZXRDb21wYW55TG9jYWxseTogZ2V0Q29tcGFueUxvY2FsbHksXG5cdFx0Z2V0VGl0bGVMb2NhbGx5OiBnZXRUaXRsZUxvY2FsbHksXG5cdFx0Z2V0RE9CTG9jYWxseTogZ2V0RE9CTG9jYWxseSxcblx0XHRnZXRGdWxsQmlvTG9jYWxseTogZ2V0RnVsbEJpb0xvY2FsbHksXG5cdFx0Z2V0T25lVXNlckV2ZW50TG9jYWxseTogZ2V0T25lVXNlckV2ZW50TG9jYWxseSxcblx0XHRnZXRVc2VyRXZlbnRzTG9jYWxseTogZ2V0VXNlckV2ZW50c0xvY2FsbHksXG5cdFx0Z2V0QWxsVXNlckV2ZW50c0xvY2FsbHk6IGdldEFsbFVzZXJFdmVudHNMb2NhbGx5LFxuXHRcdGdldEFjdGl2ZUV2ZW50OiBnZXRBY3RpdmVFdmVudCxcblxuXHRcdHNldFVJRExvY2FsbHk6IHNldFVJRExvY2FsbHksXHRcdFx0XHRcdFx0Ly9zZXR0ZXIgTWV0aG9kc1xuXHRcdHNldE5hbWVMb2NhbGx5OiBzZXROYW1lTG9jYWxseSxcblx0XHRzZXRFbWFpbExvY2FsbHk6IHNldEVtYWlsTG9jYWxseSxcblx0XHRzZXRDb21wYW55TG9jYWxseTogc2V0Q29tcGFueUxvY2FsbHksXG5cdFx0c2V0VGl0bGVMb2NhbGx5OiBzZXRUaXRsZUxvY2FsbHksXG5cdFx0c2V0RE9CTG9jYWxseTogc2V0RE9CTG9jYWxseSxcblx0XHRzZXRQcmltYXJpZXNMb2NhbGx5OiBzZXRQcmltYXJpZXNMb2NhbGx5LFxuXHRcdHVwZGF0ZVVzZXJFdmVudHNMb2NhbGx5OiB1cGRhdGVVc2VyRXZlbnRzTG9jYWxseSxcblx0XHR1cGRhdGVBbGxVc2VyRXZlbnRzTG9jYWxseTogdXBkYXRlQWxsVXNlckV2ZW50c0xvY2FsbHksXG5cdFx0dXBkYXRlQmlvTG9jYWxseTogdXBkYXRlQmlvTG9jYWxseSxcblx0XHRhZGRHdWVzdFRvSG9zdEd1ZXN0TGlzdDogYWRkR3Vlc3RUb0hvc3RHdWVzdExpc3QsXG5cdFx0c2V0QWN0aXZlRXZlbnQ6IHNldEFjdGl2ZUV2ZW50LFxuXHRcdGFkZEd1ZXN0VG9BY3RpdmVFdmVudDogYWRkR3Vlc3RUb0FjdGl2ZUV2ZW50LFxuXHRcdHNhdmVOZXdIb3N0aW5nRXZlbnQ6IHNhdmVOZXdIb3N0aW5nRXZlbnQsXG5cblx0XHRyZW1vdmVVc2VyRXZlbnRzTG9jYWxseTogcmVtb3ZlVXNlckV2ZW50c0xvY2FsbHksIFx0Ly9yZW1vdmUgZGF0YVxuXHRcdFxuXHRcdGdldEZ1bGxSZW1vdGVEQmZvckxvY2FsOiBnZXRGdWxsUmVtb3RlREJmb3JMb2NhbCxcdC8vbG9jYWwtcmVtb3RlIGludGVyYWNpb25zXG5cdFx0Z2V0UmVtb3RlQmlvRm9yTG9jYWw6IGdldFJlbW90ZUJpb0ZvckxvY2FsLFx0XHRcdFxuXHRcdGdldFJlbW90ZUV2ZW50c0ZvckxvY2FsOiBnZXRSZW1vdGVFdmVudHNGb3JMb2NhbCxcblx0XHRnZXRPbmVSZW1vdGVFdmVudEZvckxvY2FsOiBnZXRPbmVSZW1vdGVFdmVudEZvckxvY2FsLFxuXHRcdHNldEZ1bGxSZW1vdGVEQmZyb21Mb2NhbDogc2V0RnVsbFJlbW90ZURCZnJvbUxvY2FsLFxuXHRcdHNldFJlbW90ZUJpb0Zyb21Mb2NhbDogc2V0UmVtb3RlQmlvRnJvbUxvY2FsLFxuXHRcdHNldEFSZW1vdGVFdmVudEZyb21Mb2NhbDogc2V0QVJlbW90ZUV2ZW50RnJvbUxvY2FsLFxuXHRcdHNldFJlbW90ZUV2ZW50c0Zyb21Mb2NhbDogc2V0UmVtb3RlRXZlbnRzRnJvbUxvY2FsLFxuXHRcdGNsZWFuREJFdmVudHNDYXRlZ29yeTogY2xlYW5EQkV2ZW50c0NhdGVnb3J5LFxuXHRcdGdldFVzZXJJZEZvckd1ZXN0OiBnZXRVc2VySWRGb3JHdWVzdCxcblx0XHRnZXRFdmVudEd1ZXN0TGlzdDogZ2V0RXZlbnRHdWVzdExpc3QsXG5cdFx0cmVtb3ZlSW5jb21wbGV0ZUV2ZW50RnJvbURCOiByZW1vdmVJbmNvbXBsZXRlRXZlbnRGcm9tREIsXG5cblx0XHRsb2FkQmlvOiBsb2FkQmlvLFx0XHRcdFx0XHRcdFx0XHRcdC8vZXh0ZXJuYWwgbWV0aG9kc1xuXHRcdGxvYWRFdmVudHNQcm9ncmVzc2l2ZWx5OiBsb2FkRXZlbnRzUHJvZ3Jlc3NpdmVseSxcblx0XHRsb2FkQW5FdmVudFByb2dyZXNzaXZlbHk6IGxvYWRBbkV2ZW50UHJvZ3Jlc3NpdmVseSxcblx0XHRjcmVhdGVOZXdFdmVudDogY3JlYXRlTmV3RXZlbnQsXG5cdFx0dXBkYXRlUGVuZGluZ0V2ZW50c0xpc3RGb3JHdWVzdDogdXBkYXRlUGVuZGluZ0V2ZW50c0xpc3RGb3JHdWVzdFxuXHR9XG5cblx0Ly9hbmFseXNpcyBtZXRob2RzXG5cdGZ1bmN0aW9uIGJpb1ByaW1hcmllc0FyZUNvbXBsZXRlTG9jYWxseSgpIHtcblx0XHRpZiggY3VycmVudFVzZXIuYmlvLnVpZCAhPT0gJycgJiZcblx0XHRcdGN1cnJlbnRVc2VyLmJpby5uYW1lICE9PSAnJyAmJlxuXHRcdFx0Y3VycmVudFVzZXIuYmlvLmVtYWlsICE9PSAnJ1xuXHRcdFx0KVxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0ZWxzZSByZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRmdW5jdGlvbiBldmVudEV4aXN0c0xvY2FsbHkodHlwZSwgZXZlbnRJZCkge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXVtldmVudElkXSkpIHJldHVybiB0cnVlO1xuXHRcdGVsc2UgcmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0ZnVuY3Rpb24gdGhpc0lzVGhlSG9zdEVtYWlsKGVtYWlsLCBldmVudElkKSB7XG5cdFx0XG5cdFx0Ly9jaGVjayBpZiBhIGJpbyBpcyBsb2FkZWRcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChjdXJyZW50VXNlci5iaW8uZW1haWwpKSB7XG5cdFx0XHRcblx0XHRcdGlmKGN1cnJlbnRVc2VyLmJpby5lbWFpbCAhPSAnJykge1xuXHRcdFx0XHQvL2NoZWNrIGZvciBhIG1hdGNoXG5cdFx0XHRcdGlmKGVtYWlsID09IGN1cnJlbnRVc2VyLmJpby5lbWFpbCkge1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXG5cdFx0XHR9IFxuXHRcdFx0XG5cdFx0fSBcblx0XHRcblx0XHQvL2lmIHRoYXQgZGlkbid0IHdvcmsgY2hlY2sgdGhlIGN1cnJlbnQgZXZlbnRcblx0XHRcblx0XHRpZihjdXJyZW50VXNlci5ldmVudHMuaG9zdGluZ1tldmVudElkXS5ob3N0LmVtYWlsID09IGVtYWlsKSB7XG5cdFx0XHRcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFx0XG5cdH1cblxuXHRmdW5jdGlvbiBndWVzdEludml0ZWRBbHJlYWR5KGVtYWlsLCBldmVudElkKSB7XG5cdFx0Ly9maXJzdCBjaGVjayBpZiB0aGVyZSBpcyBhIGd1ZXN0IGxpc3Rcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChjdXJyZW50VXNlci5ldmVudHMuaG9zdGluZ1tldmVudElkXS5ndWVzdExpc3QpKSB7XG5cdFx0XHQvL2lmIHRoZXJlIGlzIGEgbGlzdCwgY2hlY2sgZm9yIHRoZSBlbWFpbFxuXG5cdFx0XHQvL2NvbnZlcnQgZW1haWwgZm9yIGV2YWx1YXRpb25cblx0XHRcdHJlZkVtYWlsID0gdXRmOF90b19iNjQoZW1haWwpO1xuXG5cdFx0XHQvL3J1biB0aHJvdWdoIGVhY2ggZ3Vlc3QgYW5kIGNvbXBhcmVcblx0XHRcdE9iamVjdC5rZXlzKGN1cnJlbnRVc2VyLmV2ZW50cy5ob3N0aW5nW2V2ZW50SWRdLmd1ZXN0TGlzdCkuZm9yRWFjaChmdW5jdGlvbihiNjRFbWFpbCkge1xuXHRcdFx0XHRpZihyZWZFbWFpbCA9PSBiNjRFbWFpbCkge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnYW4gZW1haWwgbWF0Y2ggd2FzIGZvdW5kLCB0aGlzIGd1ZXN0IGhhcyBiZWVuIGludml0ZWQgYWxyZWFkeScpO1xuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnbm8gZW1haWwgbWF0Y2ggZm91bmQsIG9rIHRvIGludml0ZSBndWVzdCcpO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSlcblxuXHRcdH0gZWxzZSB7XG5cdFx0XHQvL2lmIG5vIGd1ZXN0IGxpc3QgdGhhbiBjYW4ndCBhbHJlYWR5IGJlIG9uIGl0XG5cdFx0XHQkbG9nLmluZm8oJ25vIGd1ZXN0bGlzdCcpO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHR9XG5cblx0ZnVuY3Rpb24gdGhlcmVJc0FuQWN0aXZlRXZlbnQoKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoYWN0aXZlRXZlbnQuZXZlbnQpKSB7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0ZWxzZSByZXR1cm4gZmFsc2U7XG5cdH1cblxuXHQvL21vZGVsIG1haW50YWluYW5jZVxuXHRmdW5jdGlvbiBjbGVhbkV2ZW50cyh0eXBlKSB7XG5cdFx0Ly9pdGVyYXRlIHRocm91Z2ggb2JqZWN0cyBpbiBvYmplY3Rcblx0XHRPYmplY3Qua2V5cyhjdXJyZW50VXNlci5ldmVudHNbdHlwZV0pLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG5cdFx0XHQvL2lmIGFueSBhcmUgbm9uLW9iamVjdHMsIGRlbGV0ZSB0aGVtXG5cdFx0XHRpZighYW5ndWxhci5pc09iamVjdChjdXJyZW50VXNlci5ldmVudHNbdHlwZV1ba2V5XSkpIHtcblx0XHRcdFx0ZGVsZXRlIGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXVtrZXldO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0Ly9nZXR0ZXIgbWV0aG9kc1xuXHRmdW5jdGlvbiBnZXRVSURMb2NhbGx5KCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5iaW8udWlkO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0TmFtZUxvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmJpby5uYW1lO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0RW1haWxMb2NhbGx5KCkge1xuXHRcdHJldHVybiBjdXJyZW50VXNlci5iaW8uZW1haWw7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRDb21wYW55TG9jYWxseSgpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuYmlvLmNvbXBhbnk7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRUaXRsZUxvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmJpby50aXRsZTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0RE9CTG9jYWxseSgpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuYmlvLmRvYjtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldEZ1bGxCaW9Mb2NhbGx5KCkge1xuXHRcdHJldHVybiB7XG5cdFx0XHR1aWQ6IGN1cnJlbnRVc2VyLmJpby51aWQsXG5cdFx0XHRuYW1lOiBjdXJyZW50VXNlci5iaW8ubmFtZSxcblx0XHRcdGVtYWlsOiBjdXJyZW50VXNlci5iaW8uZW1haWwsXG5cdFx0XHRjb21wYW55OiBjdXJyZW50VXNlci5iaW8uY29tcGFueSxcblx0XHRcdHRpdGxlOiBjdXJyZW50VXNlci5iaW8udGl0bGUsXG5cdFx0XHRkb2I6IGN1cnJlbnRVc2VyLmJpby5kb2Jcblx0XHR9O1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0T25lVXNlckV2ZW50TG9jYWxseSh0eXBlLCBldmVudElkKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXVtldmVudElkXTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldFVzZXJFdmVudHNMb2NhbGx5KHR5cGUpIHtcblx0XHRyZXR1cm4gY3VycmVudFVzZXIuZXZlbnRzW3R5cGVdO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0QWxsVXNlckV2ZW50c0xvY2FsbHkoKSB7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyLmV2ZW50cztcblx0fVxuXG5cdGZ1bmN0aW9uIGdldEFjdGl2ZUV2ZW50KCkge1xuXHRcdHJldHVybiBhY3RpdmVFdmVudDtcblx0fVxuXG5cdC8vc2V0dGVyIG1ldGhvZHNcblx0ZnVuY3Rpb24gc2V0VUlETG9jYWxseSh1aWQpIHtcblx0XHRjdXJyZW50VXNlci5iaW8udWlkID0gdWlkO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0TmFtZUxvY2FsbHkobmFtZSkge1xuXHRcdGN1cnJlbnRVc2VyLmJpby5uYW1lID0gbmFtZTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNldEVtYWlsTG9jYWxseShlbWFpbCkge1xuXHRcdGN1cnJlbnRVc2VyLmJpby5lbWFpbCA9IGVtYWlsO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0Q29tcGFueUxvY2FsbHkoY29tcGFueSkge1xuXHRcdGN1cnJlbnRVc2VyLmJpby5jb21wYW55ID0gY29tcGFueTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2V0VGl0bGVMb2NhbGx5KHRpdGxlKSB7XG5cdFx0Y3VycmVudFVzZXIuYmlvLnRpdGxlID0gdGl0bGU7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXRET0JMb2NhbGx5KGRvYikge1xuXHRcdGN1cnJlbnRVc2VyLmJpby5kb2IgPSBkb2I7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXRQcmltYXJpZXNMb2NhbGx5KGVtYWlsLCBuYW1lLCB1aWQpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChlbWFpbCkpIHNldEVtYWlsTG9jYWxseShlbWFpbCk7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQobmFtZSkpIHNldE5hbWVMb2NhbGx5KG5hbWUpO1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHVpZCkpIHNldFVJRExvY2FsbHkodWlkKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHVwZGF0ZVVzZXJFdmVudHNMb2NhbGx5KHR5cGUsIGV2ZW50KSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBldmVudElEID0gZXZlbnQuaWQ7XG5cblx0XHQvL2NoZWNrIGlmIHRoZSBtb2RlbCBuZWVkcyB0byBiZSBjbGVhbmVkXG5cdFx0Y2xlYW5FdmVudHModHlwZSk7XG5cdFx0Ly90aGVuIGxvYWQgdGhlIG5ldyBldmVudFxuXHRcdGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXVtldmVudElEXSA9IGV2ZW50O1xuXHR9XG5cblx0ZnVuY3Rpb24gdXBkYXRlQWxsVXNlckV2ZW50c0xvY2FsbHkoYWxsVXNlckV2ZW50cykge1xuXHRcdGN1cnJlbnRVc2VyLmV2ZW50cyA9IGFsbFVzZXJFdmVudHM7XG5cdH1cblxuXHRmdW5jdGlvbiB1cGRhdGVCaW9Mb2NhbGx5KHVzZXJCaW8pIHtcblx0XHQvL3VwZGF0ZSBsb2NhbCB2YWx1ZXNcblx0XHRzZXROYW1lTG9jYWxseSh1c2VyQmlvLm5hbWUpO1xuXHRcdHNldEVtYWlsTG9jYWxseSh1c2VyQmlvLmVtYWlsKTtcblx0XHRzZXRDb21wYW55TG9jYWxseSh1c2VyQmlvLmNvbXBhbnkpO1xuXHRcdHNldFRpdGxlTG9jYWxseSh1c2VyQmlvLnRpdGxlKTtcblx0XHRzZXRET0JMb2NhbGx5KHVzZXJCaW8uZG9iKTtcblx0XHQvL3NhdmUgdG8gZGJcblx0XHRzZXRSZW1vdGVCaW9Gcm9tTG9jYWwoKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGFkZEd1ZXN0VG9Ib3N0R3Vlc3RMaXN0KG5hbWUsIGVtYWlsLCBndWVzdElkLCBldmVudElkLCB1aWQpIHtcblx0XHQvL2NhbGwgdG8gdGhlIGRiIHNvIHJldHVybiBhIHByb21pc2Vcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL2NvbnZlcnQgdGhlIGVtYWlsIGlmIG9uZSB3YXMgcGFzc2VkXG5cdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChlbWFpbCkpIHtcblx0XHRcdFx0Z3Vlc3RJZCA9IHV0ZjhfdG9fYjY0KGVtYWlsKTtcblx0XHRcdH1cblxuXHRcdFx0ZGIuYWRkR3Vlc3RUb0hvc3RHdWVzdExpc3RvbkRCKG5hbWUsIGd1ZXN0SWQsIGV2ZW50SWQsIHVpZClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKHBvc2l0aXZlUmVzdWx0KSB7XG5cdFx0XHRcdHJlc29sdmUocG9zaXRpdmVSZXN1bHQpO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihuZWdhdGl2ZVJlc3VsdCkge1xuXHRcdFx0XHRyZWplY3QobmVnYXRpdmVSZXN1bHQpO1xuXHRcdFx0fSlcblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gc2V0QWN0aXZlRXZlbnQoZXZlbnQpIHtcblx0XHQvL1xuXHRcdGFjdGl2ZUV2ZW50ID0gZXZlbnQ7XG5cdH1cblxuXHRmdW5jdGlvbiBhZGRHdWVzdFRvQWN0aXZlRXZlbnQobmV3R3Vlc3QpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciB1aWQgPSBuZXdHdWVzdC51aWQ7XG5cblx0XHQvL2lmIHRoaXMgaXMgdGhlIGZpcnN0IGd1ZXN0LCBjcmVhdGUgdGhlIGxpc3Qgb2JqZWN0XG5cdFx0aWYoIWFuZ3VsYXIuaXNPYmplY3QoYWN0aXZlRXZlbnQuZXZlbnQuZ3Vlc3RMaXN0KSkge1xuXHRcdFx0YWN0aXZlRXZlbnQuZXZlbnQuZ3Vlc3RMaXN0ID0ge307XG5cdFx0fVxuXG5cdFx0Ly9hZGQgdGhlIGd1ZXN0IHRvIHRoZSBsaXN0XG5cdFx0YWN0aXZlRXZlbnQuZXZlbnQuZ3Vlc3RMaXN0W3VpZF0gPSBuZXdHdWVzdC5ndWVzdDtcblxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0VXNlcklkRm9yR3Vlc3QoZW1haWwpIHtcblx0XHQvL2NhbGwgdG8gdGhlIGRiIHNvIHJldHVybiBhIHByb21pc2Vcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL2NvbnZlcnQgdGhlIGVtYWlsXG5cdFx0XHRndWVzdEVtYWlsID0gdXRmOF90b19iNjQoZW1haWwpO1xuXG5cdFx0XHRkYi5maW5kR3Vlc3RVSUQoZ3Vlc3RFbWFpbClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKHVpZCkge1xuXHRcdFx0XHRyZXNvbHZlKHVpZCk7XG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yUmVzcG9uc2UpIHtcblx0XHRcdFx0cmVqZWN0KGVycm9yUmVzcG9uc2UpO1xuXHRcdFx0fSlcblxuXHRcdH0pO1xuXHR9XG5cblx0Ly9kZWxldGUgTWV0aG9kc1xuXHRmdW5jdGlvbiByZW1vdmVVc2VyRXZlbnRzTG9jYWxseSh0eXBlLCBldmVudCkge1xuXHRcdC8vZG9lcyB0aGlzIHdvcms/XG5cdFx0ZGVsZXRlIGN1cnJlbnRVc2VyLmV2ZW50c1t0eXBlXVtldmVudC5pZF07XG5cdH1cblxuXHQvL3JlbW90ZS1sb2NhbCBpbnRlcmFjdGlvbiBNZXRob2RzXG5cdGZ1bmN0aW9uIGdldEZ1bGxSZW1vdGVEQmZvckxvY2FsKCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0ZGIuZG93bmxvYWRVc2VyRGF0YSgpXG5cdFx0LnRoZW4oZnVuY3Rpb24ocmVtb3RlVXNlckRhdGEpIHtcblx0XHRcdGN1cnJlbnRVc2VyID0gcmVtb3RlVXNlckRhdGE7XG5cdFx0fSlcblx0fVxuXG5cdGZ1bmN0aW9uIGdldFJlbW90ZUJpb0ZvckxvY2FsKHVpZCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXHRcdFx0XHRcblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL2dvIG91dCB0byB0aGUgZGIgYmVmb3JlIHJlc29sdmluZ1xuXHRcdFx0ZGIuZ2V0VXNlckJpbyh1aWQpXG5cdFx0XHQudGhlbihmdW5jdGlvbih1c2VyQmlvKSB7XG5cblx0XHRcdFx0cmVzb2x2ZSh1c2VyQmlvKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0cmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3IgcmVhZGluZyB0aGUgdXNlciBiaW86ICcgKyBlcnJvcik7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXHRcdFxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0UmVtb3RlRXZlbnRzRm9yTG9jYWwoKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cdFx0XHRcdFxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9nbyBvdXQgdG8gdGhlIGRiIGJlZm9yZSByZXNvbHZpbmdcblx0XHRcdGRiLmdldFVzZXJFdmVudHMoZ2V0VUlETG9jYWxseSgpKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24ob2J0YWluZWRVc2VyRXZlbnRzKSB7XG5cblx0XHRcdFx0Ly9zYXZlIHRoZSByZXN1bHRzIHRvIHRoZSBsb2NhbCBkYXRhYnNlXG5cdFx0XHRcdE9iamVjdC5rZXlzKG9idGFpbmVkVXNlckV2ZW50cykuZm9yRWFjaChmdW5jdGlvbihldmVudFR5cGUpIHtcblx0XHRcdFx0XHQvL3dpdGhpbiBlYWNoIGV2ZW50IHR5cGUgaXRlcmF0ZSB0aHJvdWdoIHRoZSBhY3R1YWwgZXZlbnRzXG5cdFx0XHRcdFx0T2JqZWN0LmtleXMob2J0YWluZWRVc2VyRXZlbnRzW2V2ZW50VHlwZV0pLmZvckVhY2goZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRcdFx0XHRcdC8vb25jZSB3ZSBzZWUgdGhlIGV2ZW50cywgc2F2ZSB0aGVtIHRvIHRoZSBsb2NhbCBtb2RlbFxuXG5cdFx0XHRcdFx0XHR1cGRhdGVVc2VyRXZlbnRzTG9jYWxseShldmVudFR5cGUsIG9idGFpbmVkVXNlckV2ZW50c1tldmVudFR5cGVdW2V2ZW50XSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly9yZXR1cm4gdGhlIHJlc3VsdHMgdG8gdGhlIHJlcXVlc3Rpbmcgb2JqZWN0XG5cdFx0XHRcdHJlc29sdmUob2J0YWluZWRVc2VyRXZlbnRzKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0cmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3IgcmVhZGluZyB0aGUgdXNlciBldmVudHM6ICcgKyBlcnJvcik7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0T25lUmVtb3RlRXZlbnRGb3JMb2NhbChldmVudElkKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGIgPSBiYWNrZW5kU2VydmljZXM7XG5cblx0XHRyZXR1cm4gJHEoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcblx0XHRcdC8vZ29pbmcgdG8gYmFja2VuZCBzZXJ2aWNlc1xuXHRcdFx0ZGIuZ2V0QUhvc3RlZEV2ZW50KGdldFVJRExvY2FsbHkoKSwgZXZlbnRJZClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKG9idGFpbmVkRXZlbnQpIHtcblxuXHRcdFx0XHQvL3NhdmUgdGhlIHJlc3VsdCB0byB0aGUgbG9jYWwgbW9kZWxcblx0XHRcdFx0XG5cdFx0XHRcdC8vcmV0dXJuIHRoZSByZXN1bHQgdG8gdGhlIHJlcXVlc3Rpbmcgb2JqZWN0XG5cdFx0XHRcdHJlc29sdmUob2J0YWluZWRFdmVudCk7XG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdHJlamVjdCgnVGhlcmUgd2FzIGFuIGVycm9yIHJlYWRpbmcgdGhlIHVzZXIgZXZlbnQ6ICcgKyBlcnJvcik7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0RnVsbFJlbW90ZURCZnJvbUxvY2FsKCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0ZGIudXBsb2FkVXNlckRhdGEoY3VycmVudFVzZXIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0UmVtb3RlQmlvRnJvbUxvY2FsKCkge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0ZGIudXBsb2FkVXNlckJpbyhjdXJyZW50VXNlci5iaW8pO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0QVJlbW90ZUV2ZW50RnJvbUxvY2FsKCkge1xuXG5cdH1cblxuXHRmdW5jdGlvbiBzZXRSZW1vdGVFdmVudHNGcm9tTG9jYWwodWlkLCBldmVudCkge1xuXHRcdC8vZGVjbGFyIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdCRsb2cuaW5mbygnc2VuZGluZyB0aGlzIHRvIHRoZSBzZXJ2ZXInKTtcblx0XHQkbG9nLmluZm8oZXZlbnQpO1xuXHRcdFxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vc2VuZCB0aGUgZXZlbnQgdG8gdGhlIGRiXG5cdFx0XHRkYi5jcmVhdGVIb3N0ZWRFdmVudCh1aWQsIGV2ZW50KVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24oc3VjY2Vzc01lc3NhZ2UpIHtcblx0XHRcdFx0cmVzb2x2ZShzdWNjZXNzTWVzc2FnZSk7XG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yTWVzc2FnZSkge1xuXHRcdFx0XHRyZWplY3QoZXJyb3JNZXNzYWdlKTtcblx0XHRcdH0pXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGNsZWFuREJFdmVudHNDYXRlZ29yeShjYXRlZ29yeSkge1xuXHRcdC8vZGVjbGFyIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdC8vcmVtb3ZlICd1cGRhdGVkJyBvYmplY3QgaWYgbmVlZCBiZVxuXHRcdC8vZGIgY2FsbCBzbyByZXR1cm4gYSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly9jaGVjayBmb3Igb2JqZWN0XG5cdFx0XHRkYi50aGVyZVdhc0FuVXBkYXRlRmllbGQoY2F0ZWdvcnksIGdldFVJRExvY2FsbHkoKSlcblx0XHRcdC50aGVuKGZ1bmN0aW9uKGFmZmlybWF0aXZlUmVzcG9uc2UpIHtcblx0XHRcdFx0Ly9pZiB0aGVyZSB3YXMgYW4gdXBkYXRlIGZpZWxkLCBkZWxldGUgaXRcblx0XHRcdFx0ZGIuZGVsZXRlVXBkYXRlRmllbGQoY2F0ZWdvcnksIGdldFVJRExvY2FsbHkoKSlcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24oYWZmaXJtYXRpdmVSZXNwb25zZSkgeyAkbG9nLmluZm8oYWZmaXJtYXRpdmVSZXNwb25zZSk7IH0gKVxuXHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3JSZXNwb25zZSkgeyAkbG9nLmluZm8oZXJyb3JSZXNwb25zZSk7IH0gKVxuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvclJlc3BvbnNlKSB7XG5cdFx0XHRcdCRsb2cuaW5mbyhlcnJvclJlc3BvbnNlKVxuXHRcdFx0fSlcblxuXHRcdH0pO1xuXHRcdC8vaWYgaXQgaXMgdGhlcmUsIHJlbW92ZSBpdFxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0RXZlbnRHdWVzdExpc3QoaG9zdElkLCBldmVudElkKSB7XG5cdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vZ2V0IHRoZSBvYmplY3Rcblx0XHRcdGRiLmdldEd1ZXN0TGlzdEZvckV2ZW50KGhvc3RJZCwgZXZlbnRJZClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKG9idGFpbmVkTGlzdCkge1xuXHRcdFx0XHRyZXNvbHZlKG9idGFpbmVkTGlzdCk7XG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yUmVzcG9uc2UpIHtcblx0XHRcdFx0cmVqZWN0KGVycm9yUmVzcG9uc2UpO1xuXHRcdFx0fSlcblx0XHR9KVxuXHR9XG5cblx0ZnVuY3Rpb24gcmVtb3ZlSW5jb21wbGV0ZUV2ZW50RnJvbURCKGV2ZW50SWQpIHtcblx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0ZGIucmVtb3ZlSW5jb21wbGV0ZUV2ZW50KGN1cnJlbnRVc2VyLmdldFVJRExvY2FsbHksIGV2ZW50SWQpXG5cdFx0XHQudGhlbihmdW5jdGlvbihzdWNjZXNzTWVzc2FnZSl7XG5cdFx0XHRcdHJlc29sdmUoc3VjY2Vzc01lc3NhZ2UpO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvck1lc3NhZ2UpIHtcblx0XHRcdFx0cmVqZWN0KGVycm9yTWVzc2FnZSk7XG5cdFx0XHR9KVxuXHRcdH0pXG5cdH1cblxuXHRmdW5jdGlvbiBsb2FkQmlvKHVpZCkge1xuXG5cdFx0Ly9taWdodCBuZWVkIHRvIGdvIG91dCB0byB0aGUgZGIgc28gcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9jaGVjayBmb3IgYmlvIGxvY2FsbHkgZmlyc3Rcblx0XHRcdGlmKGJpb1ByaW1hcmllc0FyZUNvbXBsZXRlTG9jYWxseSgpKSB7XG5cblx0XHRcdFx0Ly9wYXNzIGl0IGJhY2sgYXMgc3VjY2Vzc1xuXHRcdFx0XHRyZXNvbHZlKGdldEZ1bGxCaW9Mb2NhbGx5KCkpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9pZiB0aGV5J3JlIG5vdCBjb21wbGV0ZSBsb2NhbGx5LCBjaGVjayB0aGUgc2VydmVyXG5cdFx0XHRcdGdldFJlbW90ZUJpb0ZvckxvY2FsKHVpZClcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24oYmlvRnJvbVJlbW90ZURCKSB7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly9zYXZlIHRoZW0gbG9jYWxseSBmaXJzdFxuXHRcdFx0XHRcdHNldFByaW1hcmllc0xvY2FsbHkoYmlvRnJvbVJlbW90ZURCLmVtYWlsLCBiaW9Gcm9tUmVtb3RlREIubmFtZSwgYmlvRnJvbVJlbW90ZURCLnVpZCk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly9yZXR1cm4gdGhlIGZpbmRpbmdzXG5cdFx0XHRcdFx0cmVzb2x2ZShiaW9Gcm9tUmVtb3RlREIpO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0XHR9KVxuXHRcdFx0fVxuXG5cdFx0fSk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGxvYWRBbkV2ZW50UHJvZ3Jlc3NpdmVseSh1aWQsIGV2ZW50SWQpIHtcblx0XHQvL3VwZGF0ZSB1aWQgaWYgbmVlZCBiZVxuXHRcdHNldFVJRExvY2FsbHkodWlkKTtcblxuXHRcdC8vZ29pbmcgb3V0IHRoZSB0aGUgZGIgc28gcmV0dXJuIGEgcHJvbWlzZVxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9yZWFjaCBvdXQgdG8gZGJcblx0XHRcdGdldE9uZVJlbW90ZUV2ZW50Rm9yTG9jYWwoZXZlbnRJZClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKG9idGFpbmVkVXNlckV2ZW50KSB7XG5cdFx0XHRcdC8vd2hlbiB0aGUgZGIgcmVzdWx0cyBjb21lIGJhY2ssIHJldHVybiBpdFxuXHRcdFx0XHRyZXNvbHZlKG9idGFpbmVkVXNlckV2ZW50KVxuXHRcdFx0fSlcblx0XHRcdC5jYXRjaCgpXG5cblx0XHRcdC8vZmlyc3QgcmV0dXJuIHdoYXRldmVyIGV2ZW50IGluZm8gaXMgc3RvcmVkIGxvY2FsbHlcblx0XHRcdC8vY2hlY2sgaWYgdGhlIGV2ZW50IGlzIGF2YWlsYWJsZSBsb2NhbGx5XG5cdFx0XHRpZihldmVudEV4aXN0c0xvY2FsbHkoJ2hvc3RpbmcnLCBldmVudElkKSkgcmVzb2x2ZShnZXRPbmVVc2VyRXZlbnRMb2NhbGx5KCdob3N0aW5nJywgZXZlbnRJZCkpO1xuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBsb2FkRXZlbnRzUHJvZ3Jlc3NpdmVseSh1aWQpIHtcblx0XHR2YXIgZXZlbnRUeXBlcyA9IFsnYXR0ZW5kaW5nJywgJ3BlbmRpbmcnLCAnaG9zdGluZycsICdjb21wbGV0ZWQnXTtcblx0XHR2YXIgYWxsRXZlbnRzID0ge307XG5cblx0XHQvL3dpbGwgZ28gb3V0IHRvIHRoZSBkYiBzbyByZXR1cm4gYSBwcm9taXNlXG5cdFx0cmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHRnZXRSZW1vdGVFdmVudHNGb3JMb2NhbCgpXG5cdFx0XHQudGhlbihmdW5jdGlvbihvYnRhaW5lZFVzZXJFdmVudHMpIHtcblx0XHRcdFx0Ly93aGVuIHRoZSBkYiByZXN1bHRzIGNvbWUgYmFjaywgcmV0dXJuIHRob3NlXG5cdFx0XHRcdHJlc29sdmUob2J0YWluZWRVc2VyRXZlbnRzKTtcblx0XHRcdH0pXG5cblx0XHRcdC8vYnVpbGQgdGhlIGxvY2FsIG1vZGVsXG5cdFx0XHRhbGxFdmVudHMgPSBnZXRVc2VyRXZlbnRzTG9jYWxseSh0eXBlKTtcblxuXHRcdFx0Ly9maXJzdCByZXR1cm4gd2hhdGV2ZXIgZXZlbnQgaW5mbyBpcyBzdG9yZWQgbG9jYWxseVxuXHRcdFx0cmVzb2x2ZShhbGxFdmVudHMpO1xuXHRcdH0pO1xuXG5cdH1cblxuXHRmdW5jdGlvbiBjcmVhdGVOZXdFdmVudChldmVudElEKSB7XG5cdFx0Ly9kZWNsYXIgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGRiID0gYmFja2VuZFNlcnZpY2VzO1xuXHRcdHZhciBuZXdFdmVudCA9IHt9O1xuXHRcdHZhciBkYXRlVGltZSA9IG5ldyBEYXRlKCk7XG5cdFx0ZGF0ZVRpbWUuc2V0TWludXRlcygwLCAwLCAwKTtcblx0XHR2YXIgdGVtcFRpbWUgPSBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpO1xuXG5cdFx0Ly9maXJzdCBjcmVhdGUgdGhlIG9iamVjdFxuXHRcdG5ld0V2ZW50ID0ge1xuXHRcdFx0aWQ6IGV2ZW50SUQsXG5cdFx0XHRuYW1lOiAnJyxcblx0XHRcdHR5cGU6ICcnLFxuXHRcdFx0aG9zdDoge1xuXHRcdFx0XHRuYW1lOiBjdXJyZW50VXNlci5iaW8ubmFtZSxcblx0XHRcdFx0dWlkOiBjdXJyZW50VXNlci5iaW8udWlkLFxuXHRcdFx0XHRlbWFpbDogY3VycmVudFVzZXIuYmlvLmVtYWlsXG5cdFx0XHR9LFxuXHRcdFx0bWVzc2FnZTogJycsXG5cdFx0XHRldmVudFRpbWVzOiB7XG5cdFx0XHRcdHN0YXJ0OiB0ZW1wVGltZSxcblx0XHRcdFx0ZW5kOiAodGVtcFRpbWUgKyAoNjAqNjAqMTAwMCkpXG5cdFx0XHR9LFxuXHRcdFx0YWRkcmVzczoge1xuXHRcdFx0XHRzdHJlZXQwMTogJycsXG5cdFx0XHRcdHN0cmVldDAyOiAnJyxcblx0XHRcdFx0c3RyZWV0MDM6ICcnLFxuXHRcdFx0XHRjaXR5OiAnJyxcblx0XHRcdFx0c3RhdGU6ICcnLFxuXHRcdFx0XHR6aXA6IDBcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Ly9zYXZlIGl0IGxvY2FsbHlcblx0XHR1cGRhdGVVc2VyRXZlbnRzTG9jYWxseSgnaG9zdGluZycsIG5ld0V2ZW50KTtcblxuXHRcdC8vc2F2ZSBpdCBhcyB0aGUgYWN0aXZlIGV2ZW50XG5cdFx0c2V0QWN0aXZlRXZlbnQobmV3RXZlbnQpO1xuXG5cdFx0Ly90aGVuIGNyZWF0ZSBpdCBvbiB0aGUgc2VydmVyXG5cdFx0Ly93aWxsIGdvIG91dCB0byB0aGUgZGIgc28gcmV0dXJuIGEgcHJvbWlzZVxuXHRcdFxuXHRcdC8qcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XG5cdFx0XHQkbG9nLmluZm8oJ3NhdmVkIGxvY2FsbHksIG5vdCBvbiB0aGUgZGInKTtcblx0XHRcdC8vbWFuYWdlIHRoZSBwcm9taXNlIHJlc3BvbnNlc1xuXHRcdFx0LypkYi5jcmVhdGVIb3N0ZWRFdmVudChnZXRVSURMb2NhbGx5KCksIG5ld0V2ZW50KVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24obWVzc2FnZSkge1xuXHRcdFx0XHRyZXNvbHZlKG1lc3NhZ2UpO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0fSlcblxuXHRcdH0pOyovXG5cblx0fVxuXG5cdGZ1bmN0aW9uIHVwZGF0ZVBlbmRpbmdFdmVudHNMaXN0Rm9yR3Vlc3QoZXZlbnRJZCkge1xuXHRcdC8vZGVjbGFyIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBkYiA9IGJhY2tlbmRTZXJ2aWNlcztcblxuXHRcdHJldHVybiAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0Ly9tYW5hZ2UgdGhlIGRiIHByb21pc2Vcblx0XHRcdC8vZGIuYWRkUGVuZGluZ0V2ZW50Rm9yR3Vlc3QoY3VycmVudFVzZXIuZ2V0VUlETG9jYWxseSgpLCBob3N0SWQsIGV2ZW50SWQsIGN1cnJlbnRVc2VyLmdldFVzZXJFdmVudHNMb2NhbGx5KCcnLCBldmVudElkKSlcblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gc2F2ZU5ld0hvc3RpbmdFdmVudChjYXRlZ29yeSwgZXZlbnQpIHtcblx0XHQkbG9nLmluZm8oJ3NhdmluZyB0aGlzIGV2ZW50IGxvY2FsbHknKTtcblx0XHQkbG9nLmluZm8oZXZlbnQpO1xuXHRcdHVwZGF0ZVVzZXJFdmVudHNMb2NhbGx5KGNhdGVnb3J5LCBldmVudCk7XG5cdH1cblx0XG5cdHJldHVybiBhbGxVc2VyRGF0YTtcbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmZhY3RvcnkoJ3ZhbGlkYXRpb24nLCB2YWxpZGF0aW9uKTtcblxudmFsaWRhdGlvbi4kaW5qZWN0ID0gWyckbG9nJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gdmFsaWRhdGlvbigkbG9nKSB7XG5cdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0dmFyIG1pbmltdW1OYW1lTGVuZ3RoID0gMztcblx0dmFyIG1pbmltdW1QYXNzTGVuZ3RoID0gMTY7XG5cdHZhciBtYXhpbXVtUGFzc0xlbmd0aCA9IDEwMDtcblxuXHR2YXIgYWxsVmFsaWRhdGlvbnMgPSB7XG5cdFx0cmVxdWlyZWQ6IHJlcXVpcmVkLFx0XHRcdFx0XHRcdC8vbmV3IFVzZXIgdmFsaWRhdGlvbnNcblx0XHRtaW5OYW1lTGVuZ3RoOiBtaW5OYW1lTGVuZ3RoLFxuXHRcdG1pblBhc3NMZW5ndGg6IG1pblBhc3NMZW5ndGgsXG5cdFx0bWF4UGFzc0xlbmd0aDogbWF4UGFzc0xlbmd0aCxcblx0XHRhdExlYXN0T25lU3ltYm9sOiBhdExlYXN0T25lU3ltYm9sLFxuXHRcdGF0TGVhc3RPbmVOdW1iZXI6IGF0TGVhc3RPbmVOdW1iZXIsXG5cdFx0YXRMZWFzdE9uZUxvd2VyY2FzZTogYXRMZWFzdE9uZUxvd2VyY2FzZSxcblx0XHRhdExlYXN0T25lVXBwZXJjYXNlOiBhdExlYXN0T25lVXBwZXJjYXNlLFxuXHRcdGlsbGVnYWxDaGFyYWN0ZXI6IGlsbGVnYWxDaGFyYWN0ZXIsXG5cdFx0ZW1haWw6IGVtYWlsLFxuXHRcdGRhdGVPZkJpcnRoOiBkYXRlT2ZCaXJ0aCxcblxuXHRcdGdlbmVyYXRlRXZlbnRSZXF1aXJubWVudHM6IGdlbmVyYXRlRXZlbnRSZXF1aXJubWVudHMsXHRcdC8vZXZlbnQgcmVxdWlybm1lbnRzIFxuXHRcdHVwZGF0ZUV2ZW50UmVxU3RhdHVzOiB1cGRhdGVFdmVudFJlcVN0YXR1cyxcblx0XHR1cGRhdGVFdmVudFJlcUFkZHJlc3NlZDogdXBkYXRlRXZlbnRSZXFBZGRyZXNzZWQsXG5cdFx0dXBkYXRlRXZlbnRSZXFDbGFzczogdXBkYXRlRXZlbnRSZXFDbGFzc1xuXHR9O1xuXG5cdGZ1bmN0aW9uIHJlcXVpcmVkKHZhbHVlKSB7XG5cdFx0aWYoYW5ndWxhci5pc1VuZGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdHJldHVybiAnVGhpcyBpcyBhIHJlcXVpcmVkIGZpZWxkJztcblx0XHR9IFxuXHR9XG5cblx0ZnVuY3Rpb24gbWluTmFtZUxlbmd0aCh2YWx1ZSkge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0aWYodmFsdWUubGVuZ3RoIDwgbWluaW11bU5hbWVMZW5ndGgpIHJldHVybiAoJ05hbWUgc2hvdWxkIGJlIGF0IGxlYXN0ICcgKyBtaW5pbXVtTmFtZUxlbmd0aCArICcgY2hhcmFjdGVycycpO1xuXHRcdH0gXG5cdH1cblxuXHRmdW5jdGlvbiBtaW5QYXNzTGVuZ3RoKHZhbHVlKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHRpZighKHZhbHVlLmxlbmd0aCA8IG1pbmltdW1QYXNzTGVuZ3RoKSkgcmV0dXJuIHRydWU7XG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGZ1bmN0aW9uIG1heFBhc3NMZW5ndGgodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdGlmKCEodmFsdWUubGVuZ3RoID4gbWF4aW11bVBhc3NMZW5ndGgpKSByZXR1cm4gdHJ1ZTtcblx0XHR9IFxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGZ1bmN0aW9uIGF0TGVhc3RPbmVTeW1ib2wodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdC8vIGJ1aWxkIHJlZ2V4XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbXFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqXVwiKTtcblxuXHRcdFx0Ly9jaGVjayBjb25zdHJhdGludFxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZhbHVlKSkge1xuXHRcdFx0XHQvL3N1Y2Nlc3M6IGF0IGxlYXN0IG9uZSBzcGVjaWFsIGNoYXJhY3RlciBmb3VuZFxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vZmFpbHVyZTogZGlkbid0IGZpbmQgYW55IHNwY2lhbCBjaGFyYWN0ZXJzXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRmdW5jdGlvbiBhdExlYXN0T25lTnVtYmVyKHZhbHVlKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHQvLyBidWlsZCByZWdleFxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiWzAtOV1cIiwgXCJcIik7XG5cblx0XHRcdC8vY2hlY2sgY29uc3RyYXRpbnRcblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2YWx1ZSkpIHtcblx0XHRcdFx0Ly9zdWNjZXNzOiBhdCBsZWFzdCBvbmUgc3BlY2lhbCBjaGFyYWN0ZXIgZm91bmRcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2ZhaWx1cmU6IGRpZG4ndCBmaW5kIGFueSBzcGNpYWwgY2hhcmFjdGVyc1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cbiAgICBmdW5jdGlvbiBhdExlYXN0T25lTG93ZXJjYXNlKHZhbHVlKSB7XG4gICAgXHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdC8vIGJ1aWxkIHJlZ2V4XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbYS16XVwiLCBcIlwiKTtcblxuXHRcdFx0Ly9jaGVjayBjb25zdHJhdGludFxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZhbHVlKSkge1xuXHRcdFx0XHQvL3N1Y2Nlc3M6IGF0IGxlYXN0IG9uZSBzcGVjaWFsIGNoYXJhY3RlciBmb3VuZFxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vZmFpbHVyZTogZGlkbid0IGZpbmQgYW55IHNwY2lhbCBjaGFyYWN0ZXJzXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYXRMZWFzdE9uZVVwcGVyY2FzZSh2YWx1ZSkge1xuICAgIFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHQvLyBidWlsZCByZWdleFxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW0EtWl1cIiwgXCJcIik7XG5cblx0XHRcdC8vY2hlY2sgY29uc3RyYXRpbnRcblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2YWx1ZSkpIHtcblx0XHRcdFx0Ly9zdWNjZXNzOiBhdCBsZWFzdCBvbmUgc3BlY2lhbCBjaGFyYWN0ZXIgZm91bmRcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2ZhaWx1cmU6IGRpZG4ndCBmaW5kIGFueSBzcGNpYWwgY2hhcmFjdGVyc1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlsbGVnYWxDaGFyYWN0ZXIodmFsdWUpIHtcbiAgICBcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0Ly8gYnVpbGQgcmVnZXhcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIlteQS16MC05XFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqXVwiLCBcIlwiKTtcblxuXHRcdFx0Ly9jaGVjayBjb25zdHJhdGludFxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZhbHVlKSkge1xuXHRcdFx0XHQvL3N1Y2Nlc3M6IGF0IGxlYXN0IG9uZSBzcGVjaWFsIGNoYXJhY3RlciBmb3VuZFxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2ZhaWx1cmU6IGRpZG4ndCBmaW5kIGFueSBzcGNpYWwgY2hhcmFjdGVyc1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIGVtYWlsKHZhbHVlKSB7XG4gICAgXHQvL2RlZmluZSBjb25zdHJhaW50c1xuICAgIFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XCIsIFwiXCIpO1xuICAgIFx0XG4gICAgXHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkgJiYgIWNvbnN0cmFpbnQudGVzdCh2YWx1ZSkpIHtcbiAgICBcdFx0cmV0dXJuICdOb3QgYSB2YWxpZCBlbWFpbCc7XG4gICAgXHR9XG4gICAgXHQvL2lmKCFjb25zdHJhaW50LnRlc3QodmFsdWUpKSByZXR1cm4gJ05vdCBhIHZhbGlkIGUtbWFpbCBhZGRyZXNzJ1xuICAgIFx0XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGF0ZU9mQmlydGgodmFsdWUpIHt9XG5cbiAgICBmdW5jdGlvbiBnZW5lcmF0ZUV2ZW50UmVxdWlybm1lbnRzKCkge1xuICAgIFx0Ly9idWlsZCB0aGUgb2JqZWN0IGFuZCByZXR1cm4gaXRcbiAgICBcdHZhciBldmVudFZhbGlkYXRpb25zID0ge1xuICAgIFx0XHRldmVudE5hbWU6IHsgXG4gICAgXHRcdFx0Y29tcGxldGVkIDpmYWxzZSwgXG4gICAgXHRcdFx0YWRkcmVzc2VkOmZhbHNlLCBcbiAgICBcdFx0XHRyb3c6IHtcbiAgICBcdFx0XHRcdGNsYXNzOiB7XG4gICAgXHRcdFx0XHRcdCdjb2wteHMtMTInOiB0cnVlLFxuICAgIFx0XHRcdFx0XHQnY29sLXNtLTEyJzogdHJ1ZSxcbiAgICBcdFx0XHRcdFx0J2Zvcm0tZ3JvdXAnOiB0cnVlLFxuICAgIFx0XHRcdFx0XHQnaGFzLXN1Y2Nlc3MnOiBmYWxzZSxcbiAgICBcdFx0XHRcdFx0J2hhcy1lcnJvcic6IGZhbHNlXG4gICAgXHRcdFx0XHR9XG4gICAgXHRcdFx0fSxcbiAgICBcdFx0XHRsYWJlbDoge1xuICAgIFx0XHRcdFx0Y2xhc3M6IHtcbiAgICBcdFx0XHRcdFx0J2NvbnRyb2wtbGFiZWwnOiB0cnVlXG4gICAgXHRcdFx0XHR9XG4gICAgXHRcdFx0fSxcbiAgICBcdFx0XHRpbnB1dDoge1xuICAgIFx0XHRcdFx0Y2xhc3M6IHtcbiAgICBcdFx0XHRcdFx0J2Zvcm0tY29udHJvbCc6IHRydWVcbiAgICBcdFx0XHRcdH1cbiAgICBcdFx0XHR9XG4gICAgXHRcdH0sXG5cdFx0XHRldmVudEhvc3Q6IHsgY29tcGxldGVkIDpmYWxzZSwgYWRkcmVzc2VkOmZhbHNlLCByb3c6IHsgY2xhc3M6IHsnY29sLXhzLTEyJzogdHJ1ZSwgJ2NvbC1zbS0xMic6IHRydWUsICdmb3JtLWdyb3VwJzogdHJ1ZSwgJ2hhcy1zdWNjZXNzJzogZmFsc2UsICdoYXMtZXJyb3InOiBmYWxzZSB9IH0sIGxhYmVsOiB7IGNsYXNzOiB7ICdjb250cm9sLWxhYmVsJzogdHJ1ZSB9IH0sIGlucHV0OiB7IGNsYXNzOiB7ICdmb3JtLWNvbnRyb2wnOiB0cnVlIH0gfSB9LFxuXHRcdFx0ZXZlbnRUeXBlOiB7IGNvbXBsZXRlZCA6ZmFsc2UsIGFkZHJlc3NlZDpmYWxzZSwgcm93OiB7IGNsYXNzOiB7J2NvbC14cy0xMic6IHRydWUsICdjb2wtc20tMTInOiB0cnVlLCAnZm9ybS1ncm91cCc6IHRydWUsICdoYXMtc3VjY2Vzcyc6IGZhbHNlLCAnaGFzLWVycm9yJzogZmFsc2UgfSB9LCBsYWJlbDogeyBjbGFzczogeyAnY29udHJvbC1sYWJlbCc6IHRydWUgfSB9LCBpbnB1dDogeyBjbGFzczogeyAnZm9ybS1jb250cm9sJzogdHJ1ZSB9IH0gfSxcblx0XHRcdGV2ZW50U3RhcnQ6IHsgY29tcGxldGVkIDpmYWxzZSwgYWRkcmVzc2VkOmZhbHNlLCByb3c6IHsgY2xhc3M6IHsnY29sLXhzLTEyJzogdHJ1ZSwgJ2NvbC1zbS0xMic6IHRydWUsICdmb3JtLWdyb3VwJzogdHJ1ZSwgJ2hhcy1zdWNjZXNzJzogZmFsc2UsICdoYXMtZXJyb3InOiBmYWxzZSB9IH0sIGxhYmVsOiB7IGNsYXNzOiB7ICdjb250cm9sLWxhYmVsJzogdHJ1ZSB9IH0sIGlucHV0OiB7IGNsYXNzOiB7ICdmb3JtLWNvbnRyb2wnOiB0cnVlIH0gfSB9LFxuXHRcdFx0ZXZlbnRFbmQ6IHsgY29tcGxldGVkIDpmYWxzZSwgYWRkcmVzc2VkOmZhbHNlLCByb3c6IHsgY2xhc3M6IHsnY29sLXhzLTEyJzogdHJ1ZSwgJ2NvbC1zbS0xMic6IHRydWUsICdmb3JtLWdyb3VwJzogdHJ1ZSwgJ2hhcy1zdWNjZXNzJzogZmFsc2UsICdoYXMtZXJyb3InOiBmYWxzZSB9IH0sIGxhYmVsOiB7IGNsYXNzOiB7ICdjb250cm9sLWxhYmVsJzogdHJ1ZSB9IH0sIGlucHV0OiB7IGNsYXNzOiB7ICdmb3JtLWNvbnRyb2wnOiB0cnVlIH0gfSB9LFxuXHRcdFx0ZXZlbnRTdHJlZXQwMTogeyBjb21wbGV0ZWQgOmZhbHNlLCBhZGRyZXNzZWQ6ZmFsc2UsIHJvdzogeyBjbGFzczogeydjb2wteHMtMTInOiB0cnVlLCAnY29sLXNtLTEyJzogdHJ1ZSwgJ2Zvcm0tZ3JvdXAnOiB0cnVlLCAnaGFzLXN1Y2Nlc3MnOiBmYWxzZSwgJ2hhcy1lcnJvcic6IGZhbHNlIH0gfSwgbGFiZWw6IHsgY2xhc3M6IHsgJ2NvbnRyb2wtbGFiZWwnOiB0cnVlIH0gfSwgaW5wdXQ6IHsgY2xhc3M6IHsgJ2Zvcm0tY29udHJvbCc6IHRydWUgfSB9IH0sXG5cdFx0XHRldmVudENpdHk6IHsgY29tcGxldGVkIDpmYWxzZSwgYWRkcmVzc2VkOmZhbHNlLCByb3c6IHsgY2xhc3M6IHsnY29sLXhzLTEyJzogdHJ1ZSwgJ2NvbC1zbS0xMic6IHRydWUsICdmb3JtLWdyb3VwJzogdHJ1ZSwgJ2hhcy1zdWNjZXNzJzogZmFsc2UsICdoYXMtZXJyb3InOiBmYWxzZSB9IH0sIGxhYmVsOiB7IGNsYXNzOiB7ICdjb250cm9sLWxhYmVsJzogdHJ1ZSB9IH0sIGlucHV0OiB7IGNsYXNzOiB7ICdmb3JtLWNvbnRyb2wnOiB0cnVlIH0gfSB9LFxuXHRcdFx0ZXZlbnRTdGF0ZTogeyBjb21wbGV0ZWQgOmZhbHNlLCBhZGRyZXNzZWQ6ZmFsc2UsIHJvdzogeyBjbGFzczogeydjb2wteHMtMTInOiB0cnVlLCAnY29sLXNtLTEyJzogdHJ1ZSwgJ2Zvcm0tZ3JvdXAnOiB0cnVlLCAnaGFzLXN1Y2Nlc3MnOiBmYWxzZSwgJ2hhcy1lcnJvcic6IGZhbHNlIH0gfSwgbGFiZWw6IHsgY2xhc3M6IHsgJ2NvbnRyb2wtbGFiZWwnOiB0cnVlIH0gfSwgaW5wdXQ6IHsgY2xhc3M6IHsgJ2Zvcm0tY29udHJvbCc6IHRydWUgfSB9IH0sXG5cdFx0XHRldmVudFppcDogeyBjb21wbGV0ZWQgOmZhbHNlLCBhZGRyZXNzZWQ6ZmFsc2UsIHJvdzogeyBjbGFzczogeydjb2wteHMtMTInOiB0cnVlLCAnY29sLXNtLTEyJzogdHJ1ZSwgJ2Zvcm0tZ3JvdXAnOiB0cnVlLCAnaGFzLXN1Y2Nlc3MnOiBmYWxzZSwgJ2hhcy1lcnJvcic6IGZhbHNlIH0gfSwgbGFiZWw6IHsgY2xhc3M6IHsgJ2NvbnRyb2wtbGFiZWwnOiB0cnVlIH0gfSwgaW5wdXQ6IHsgY2xhc3M6IHsgJ2Zvcm0tY29udHJvbCc6IHRydWUgfSB9IH0sXG5cdFx0XHRldmVudEd1ZXN0OiB7IGNvbXBsZXRlZCA6ZmFsc2UsIGFkZHJlc3NlZDpmYWxzZSwgcm93OiB7IGNsYXNzOiB7J2NvbC14cy0xMic6IHRydWUsICdjb2wtc20tMTInOiB0cnVlLCAnZm9ybS1ncm91cCc6IHRydWUsICdoYXMtc3VjY2Vzcyc6IGZhbHNlLCAnaGFzLWVycm9yJzogZmFsc2UgfSB9LCBsYWJlbDogeyBjbGFzczogeyAnY29udHJvbC1sYWJlbCc6IHRydWUgfSB9LCBpbnB1dDogeyBjbGFzczogeyAnZm9ybS1jb250cm9sJzogdHJ1ZSB9IH0gfVxuICAgIFx0fVxuXG4gICAgXHRyZXR1cm4gZXZlbnRWYWxpZGF0aW9ucztcbiAgICB9XG5cblx0ZnVuY3Rpb24gdXBkYXRlRXZlbnRSZXFTdGF0dXMoKSB7fVxuXHRmdW5jdGlvbiB1cGRhdGVFdmVudFJlcUFkZHJlc3NlZCgpIHt9IFxuXHRmdW5jdGlvbiB1cGRhdGVFdmVudFJlcUNsYXNzKCkge31cblxuXHRyZXR1cm4gYWxsVmFsaWRhdGlvbnM7XG59XG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb25maWcoY29uZmlnKTtcbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gY29uZmlnKCRyb3V0ZVByb3ZpZGVyKSB7ICAgXG4gICAgJHJvdXRlUHJvdmlkZXJcbiAgICAud2hlbignLycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9sYW5kaW5nUGFnZS5odG0nLFxuICAgICAgICBjb250cm9sbGVyOiAnTGFuZGluZ1BhZ2VDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgfSlcbiAgICAud2hlbignL3NpZ251cCcsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9uZXdVc2VyU2lnbnVwLmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdOZXdVc2VyU2lnblVwQ29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xuICAgIH0pXG4gICAgLndoZW4oJy9sb2dpbicsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9yZWdpc3RlcmVkVXNlckxvZ2luLmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdSZWdVc2VyTG9naW5Db250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgfSlcbiAgICAud2hlbignL3VzZXJJbmZvcm1hdGlvbi86dWlkPycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy91c2VySW5mb3JtYXRpb24uaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1VzZXJJbmZvcm1hdGlvbkNvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgIHJlc29sdmU6IHsgLyogQG5nSW5qZWN0ICovXG4gICAgICAgICAgICB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlOiB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlXG4gICAgICAgIH1cbiAgICB9KVxuICAgIC53aGVuKCcvdXNlckV2ZW50cy86dWlkPycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy91c2VyRXZlbnRzLmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdVc2VyRXZlbnRzQ29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgcmVzb2x2ZTogeyAvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgICAgIHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2U6IHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2VcbiAgICAgICAgfVxuICAgIH0pXG4gICAgLndoZW4oJy9ldmVudC9ob3N0LzpldmVudElkLzp1aWQvOnNlY3Rpb24nLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvaG9zdEV2ZW50Lmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdIb3N0RXZlbnRDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICByZXNvbHZlOiB7IC8qIEBuZ0luamVjdCAqL1xuICAgICAgICAgICAgdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZTogdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZSxcbiAgICAgICAgfVxuICAgIH0pXG4gICAgLndoZW4oJy9ldmVudC9ndWVzdC86ZXZlbnRJZC86dWlkLzpob3N0SWQnLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvZ3Vlc3RFdmVudC5odG0nLFxuICAgICAgICBjb250cm9sbGVyOiAnR3Vlc3RFdmVudENvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgIHJlc29sdmU6IHsgLyogQG5nSW5qZWN0ICovXG4gICAgICAgICAgICB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlOiB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlLFxuICAgICAgICB9XG4gICAgfSlcbiAgICAud2hlbignL2V2ZW50LzpldmVudElkPy86aG9zdElkPy86dWlkPy86c2VjdGlvbj8nLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvYW5FdmVudC5odG0nLFxuICAgICAgICBjb250cm9sbGVyOiAnQW5FdmVudENvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgIHJlc29sdmU6IHsgLyogQG5nSW5qZWN0ICovXG4gICAgICAgICAgICB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlOiB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlLFxuICAgICAgICAgICAgZXZlbnRWaWV3Q2hhbmdlcjogZXZlbnRWaWV3Q2hhbmdlclxuICAgICAgICB9XG4gICAgfSlcbiAgICAub3RoZXJ3aXNlKHtcbiAgICAgICAgcmVkaXJlY3RUbzogJy8nXG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2UoYXV0aFNlcnZpY2UpIHtcbiAgICBhdXRoU2VydmljZS5pc0xvZ2dlZEluKCk7XG59O1xuXG5mdW5jdGlvbiBldmVudFZpZXdDaGFuZ2VyKHRyYWZmaWNWYWxldCwgJHJvdXRlKSB7XG4gICAgdHJhZmZpY1ZhbGV0LmV2ZW50Um91dGUoJHJvdXRlLmN1cnJlbnQucGFyYW1zLmV2ZW50SWQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyb3V0ZS5jdXJyZW50LnBhcmFtcy5ob3N0SWQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyb3V0ZS5jdXJyZW50LnBhcmFtcy51aWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvdXRlLmN1cnJlbnQucGFyYW1zLnNlY3Rpb24pO1xufTtcbi8qIEFkZEFHdWVzdC5kaXJlY3RpdmUuanMgKi9cblxuLyoqXG4qIEBkZXNjIGRpc3BsYXlzIGEgbGlzdCBvZiBhbGwgZ3Vlc3RzIGludml0ZWQgdG8gYW4gZXZlbnQgdGhpcyB1c2VyIGlzIGhvc3RpbmcuXG4qIEBleGFtcGxlIDxhZGQtYS1ndWVzdD48L2FkZC1hLWd1ZXN0PlxuKi9cblxuYW5ndWxhclxuXHQubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG5cdC5kaXJlY3RpdmUoJ2FkZEFHdWVzdCcsIGFkZEFHdWVzdCk7XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gYWRkQUd1ZXN0KCkge1xuICAgIGxpbmtGdW5jLiRpbmplY3QgPSBbXCJzY29wZVwiLCBcImVsXCIsIFwiYXR0clwiLCBcImN0cmxcIl07XG5cdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0cmVzdHJpY3Q6ICdBRUNNJyxcblx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2RpcmVjdGl2ZXMvYWRkQUd1ZXN0LmRpcmVjdGl2ZS5odG0nLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0c2NvcGU6IHtcblx0XHRcdGd1ZXN0TGlzdDogJz0nXG5cdFx0fSxcblx0XHRsaW5rOiBsaW5rRnVuYyxcblx0XHRjb250cm9sbGVyOiBhZGRBR3Vlc3RDb250cm9sbGVyLFxuXHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdH1cblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7XG4gICAgfVxuXG4gICAgYWRkQUd1ZXN0Q29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJywgJyRyb3V0ZVBhcmFtcycsICd2YWxpZGF0aW9uJywgJ3VzZXJEYXRhJ107XG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gYWRkQUd1ZXN0Q29udHJvbGxlcigkbG9nLCAkcm91dGVQYXJhbXMsIHZhbGlkYXRpb24sIHVzZXJEYXRhKSB7XG5cdCAgICB2YXIgdm0gPSB0aGlzO1xuXHQgICAgdmFyIGVtYWlsQ2hlY2tlciA9IHZhbGlkYXRpb247XG5cdCAgICB2YXIgaW52aXRhdGlvbk1hbmFnZXIgPSB1c2VyRGF0YTtcblxuXHQgICAgLy9sb2NhbCB2YXJpYWJsZXNcblx0ICAgIHZhciBldmVudERldGFpbHMgPSB7fTtcblxuXHQgICAgLy92bSB2YXJpYWJsZXNcblx0ICAgIHZtLnRlbXBHdWVzdCA9IHtcblx0ICAgIFx0bmFtZTogJycsXG5cdCAgICBcdGVtYWlsOiAnJyxcblx0ICAgIFx0c3RhdHVzOiAncGVuZGluZydcblx0ICAgIH1cblx0ICAgIHZtLnZhbGlkYXRpb25zID0ge1xuXHQgICAgXHRuYW1lOiB7XG5cdCAgICBcdFx0YWRkcmVzc2VkOiBmYWxzZSxcblx0ICAgIFx0XHR2YWxpZDogZmFsc2UsXG5cdCAgICBcdFx0ZXJyb3JNZXNzYWdlOiAnJ1xuXHQgICAgXHR9LFxuXHQgICAgXHRlbWFpbDoge1xuXHQgICAgXHRcdGFkZHJlc3NlZDogZmFsc2UsXG5cdCAgICBcdFx0dmFsaWQ6IGZhbHNlLFxuXHQgICAgXHRcdGVycm9yTWVzc2FnZTogJydcblx0ICAgIFx0fSxcblx0ICAgIFx0aW52aXRhdGlvbjoge1xuXHQgICAgXHRcdGlzVGhlSG9zdDogZmFsc2UsXG5cdCAgICBcdFx0YWxyZWFkeUludml0ZWQ6IGZhbHNlLFxuXHQgICAgXHRcdGVycm9yTWVzc2FnZTogJydcblx0ICAgIFx0fVxuXHQgICAgfVxuXHQgICAgdm0uaW52aXRhdGlvblZhbGlkRm9yU3VibWlzc2lvbiA9IGZhbHNlO1xuXHQgICAgdm0uc3VibWlzc2lvbkJ1dHRvbiA9IHtcblx0ICAgIFx0c3R5bGU6IHtcblx0ICAgIFx0XHRjb2xvcjoncmVkJ1xuXHQgICAgXHR9LFxuXHQgICAgXHRjbGFzczoge1xuXHQgICAgXHRcdCdjb2wteHMtMTInOiB0cnVlLFxuXHQgICAgXHRcdCdjb2wtc20tMTInOiB0cnVlLFxuXHQgICAgXHRcdCdidG4nOiB0cnVlLFxuXHQgICAgXHRcdCdidG4td2FybmluZyc6IHRydWUsXG5cdCAgICBcdFx0J2J0bi1zdWNjZXNzJzogZmFsc2Vcblx0ICAgIFx0fSxcblx0ICAgIFx0bWVzc2FnZTogJ0FkZHJlc3MgSW52aXRhdGlvbi4uLidcblx0ICAgIH1cblx0ICAgIC8vbG9jYWwgbWV0aG9kc1xuXHQgICAgZnVuY3Rpb24gdXRmOF90b19iNjQoc3RyKSB7XG5cdFx0XHRyZXR1cm4gYnRvYShzdHIpO1xuXHRcdH1cblxuXHQgICAgZnVuY3Rpb24gdmFsaWRhdGVJbnZpdGF0aW9uKCkge1xuXHQgICAgXHQvL2NoZWNrIGlmIGJvdGggaW5wdXRzIGFyZSB2YWxpZFxuXHQgICAgXHRpZih2bS52YWxpZGF0aW9ucy5uYW1lLnZhbGlkICYmIHZtLnZhbGlkYXRpb25zLmVtYWlsLnZhbGlkKSB7XG5cdCAgICBcdFx0XG5cdCAgICBcdFx0Ly9zZXQgdGhlIHZhbGlkaXR5IGZsYWdcblx0ICAgIFx0XHR2bS5pbnZpdGF0aW9uVmFsaWRGb3JTdWJtaXNzaW9uID0gdHJ1ZTtcblx0ICAgIFx0XHQvL3VwZGF0ZSB0aGUgc3VibWlzc2lvbiBidXR0b25cblx0ICAgIFx0XHR2bS5zdWJtaXNzaW9uQnV0dG9uLmNsYXNzWydidG4td2FybmluZyddID0gZmFsc2U7XG5cdCAgICBcdFx0dm0uc3VibWlzc2lvbkJ1dHRvbi5jbGFzc1snYnRuLXN1Y2Nlc3MnXSA9IHRydWU7XG5cdCAgICBcdFx0dm0uc3VibWlzc2lvbkJ1dHRvbi5tZXNzYWdlPSdJbnZpdGUgR3Vlc3QnO1xuXHQgICAgXHR9IGVsc2Uge1xuXHQgICAgXHRcdFxuXHQgICAgXHRcdC8vc2V0IHRoZSB2YWxpZGl0eSBmbGFnXG5cdCAgICBcdFx0dm0uaW52aXRhdGlvblZhbGlkRm9yU3VibWlzc2lvbiA9IGZhbHNlO1xuXHQgICAgXHRcdC8vdXBkYXRlIHRoZSBzdWJtaXNzaW9uIGJ1dHRvblxuXHQgICAgXHRcdHZtLnN1Ym1pc3Npb25CdXR0b24uY2xhc3NbJ2J0bi13YXJuaW5nJ10gPSB0cnVlO1xuXHQgICAgXHRcdHZtLnN1Ym1pc3Npb25CdXR0b24uY2xhc3NbJ2J0bi1zdWNjZXNzJ10gPSBmYWxzZTtcblx0ICAgIFx0XHR2bS5zdWJtaXNzaW9uQnV0dG9uLm1lc3NhZ2U9J0FkZHJlc3MgSW52aXRhdGlvbi4uLic7XG5cdCAgICBcdH1cblx0ICAgIH1cblxuXHQgICAgZnVuY3Rpb24gaW5pdCgpIHtcblx0ICAgIFx0Ly9sb2FkIHRoZSBldmVudCBmb3IgcmVmZXJlbmNlXG5cdCAgICBcdGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQoaW52aXRhdGlvbk1hbmFnZXIuZ2V0T25lVXNlckV2ZW50TG9jYWxseSgnaG9zdGluZycsICRyb3V0ZVBhcmFtcy5ldmVudElkKSkpIHtcblx0ICAgIFx0XHQvL2lmIHRoaXMgcGFnZSB3YXMgbG9hZGVkIGJlZm9yZSB0aGUgbW9kZWwgZ2V0IHRoZSBldmVudFxuXHQgICAgXHRcdGludml0YXRpb25NYW5hZ2VyLmdldFJlbW90ZUV2ZW50c0ZvckxvY2FsKClcblx0XHQgICAgXHQudGhlbihmdW5jdGlvbigpIHtcblx0XHQgICAgXHRcdC8vd2hlbiB0aGUgZXZlbnQgaGFzIGJlZW4gbG9hZGVkXG5cdFx0ICAgIFx0XHRldmVudERldGFpbHMgPSBpbnZpdGF0aW9uTWFuYWdlci5nZXRPbmVVc2VyRXZlbnRMb2NhbGx5KCdob3N0aW5nJywgJHJvdXRlUGFyYW1zLmV2ZW50SWQpO1xuXG5cdFx0ICAgIFx0fSlcblx0ICAgIFx0fSBlbHNlIHtcblx0ICAgIFx0XHQvL2p1c3QgZ2V0IHRoZSBtb2RlbCBsb2NhbGx5XG5cdCAgICBcdFx0ZXZlbnREZXRhaWxzID0gaW52aXRhdGlvbk1hbmFnZXIuZ2V0T25lVXNlckV2ZW50TG9jYWxseSgnaG9zdGluZycsICRyb3V0ZVBhcmFtcy5ldmVudElkKTtcblx0ICAgIFx0fVxuXHQgICAgXHQgIFx0XG5cdCAgICB9XG5cblx0ICAgIC8vdm0gbWV0aG9kc1xuXHQgICAgdm0udmFsaWRhdGVOYW1lID0gZnVuY3Rpb24oKSB7XG5cdCAgICBcdC8vdGhpcyBmaWVsZCBpcyBiZWluZyBlZGl0ZWQsIHRocm93IGZsYWdcblx0ICAgIFx0dm0udmFsaWRhdGlvbnMubmFtZS5hZGRyZXNzZWQgPSB0cnVlO1xuXG5cdCAgICBcdC8vY2hlY2sgZm9yIHZhbHVlXG5cdCAgICBcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZtLnRlbXBHdWVzdC5uYW1lKSAmJiB2bS50ZW1wR3Vlc3QubmFtZSAhPSAnJykge1xuXHQgICAgXHRcdHZtLnZhbGlkYXRpb25zLm5hbWUudmFsaWQgPSB0cnVlO1xuXHQgICAgXHRcdHZtLnZhbGlkYXRpb25zLm5hbWUuZXJyb3JNZXNzYWdlID0gJyc7XG5cdCAgICBcdH0gZWxzZSB7XG5cdCAgICBcdFx0dm0udmFsaWRhdGlvbnMubmFtZS52YWxpZCA9IGZhbHNlO1xuXHQgICAgXHRcdHZtLnZhbGlkYXRpb25zLm5hbWUuZXJyb3JNZXNzYWdlID0gJ1RoaXMgZ3Vlc3QgbmVlZHMgYSBuYW1lJztcblx0ICAgIFx0fVxuXG5cdCAgICBcdHZhbGlkYXRlSW52aXRhdGlvbigpO1xuXHQgICAgfVxuXHQgICAgdm0udmFsaWRhdGVFbWFpbCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgXHQvL3RoaXMgZmllbGQgaXMgYmVpbmcgZWRpdGVkLCB0aHJvdyBmbGFnXG5cdCAgICBcdHZtLnZhbGlkYXRpb25zLmVtYWlsLmFkZHJlc3NlZCA9IHRydWU7XG5cblx0ICAgIFx0Ly9pcyB0aGVyZSBhbiBlbWFpbCB2YWx1ZT9cblx0ICAgIFx0aWYoYW5ndWxhci5pc0RlZmluZWQodm0udGVtcEd1ZXN0LmVtYWlsKSAmJiB2bS50ZW1wR3Vlc3QuZW1haWwgIT0gJycpIHtcblx0ICAgIFx0XHRcblx0ICAgIFx0XHQvL2lmIGFuIGVtYWlsIGV4aXN0cyBjaGVjayBpdCdzIHZhbGlkaXR5XG5cdCAgICBcdFx0aWYoYW5ndWxhci5pc1VuZGVmaW5lZChlbWFpbENoZWNrZXIuZW1haWwodm0udGVtcEd1ZXN0LmVtYWlsKSkpIHtcblx0ICAgIFx0XHRcdC8vZW1haWwgaXMgdmFsaWRcblx0ICAgIFx0XHRcdHZtLnZhbGlkYXRpb25zLmVtYWlsLnZhbGlkID0gdHJ1ZTtcblx0ICAgIFx0XHRcdHZtLnZhbGlkYXRpb25zLmVtYWlsLmVycm9yTWVzc2FnZSA9ICcnO1xuXHQgICAgXHRcdH0gZWxzZSB7XG5cdCAgICBcdFx0XHQvL2dldCB0aGUgZXJyb3Jcblx0ICAgIFx0XHRcdHZtLnZhbGlkYXRpb25zLmVtYWlsLnZhbGlkID0gZmFsc2U7XG5cdCAgICBcdFx0XHR2bS52YWxpZGF0aW9ucy5lbWFpbC5lcnJvck1lc3NhZ2UgPSBlbWFpbENoZWNrZXIuZW1haWwodm0udGVtcEd1ZXN0LmVtYWlsKTtcblx0ICAgIFx0XHRcdCRsb2cuaW5mbyh2bS52YWxpZGF0aW9ucy5lbWFpbC5lcnJvck1lc3NhZ2UpO1xuXHQgICAgXHRcdH1cblxuXHQgICAgXHR9IGVsc2Uge1xuXHQgICAgXHRcdC8vdGhlcmUgaXNuJ3QgYW4gZW1haWwgeWV0XG5cdCAgICBcdFx0dm0udmFsaWRhdGlvbnMuZW1haWwudmFsaWQgPSBmYWxzZTtcblx0ICAgIFx0XHR2bS52YWxpZGF0aW9ucy5lbWFpbC5lcnJvck1lc3NhZ2UgPSAnTm90IGEgdmFsaWQgZW1haWwnO1xuXHQgICAgXHR9XG5cblx0ICAgIFx0dmFsaWRhdGVJbnZpdGF0aW9uKCk7XG5cdCAgICB9XG5cblx0ICAgIHZtLnNob3dOYW1lRXJyb3IgPSBmdW5jdGlvbigpIHtcblx0ICAgIFx0aWYoIXZtLnZhbGlkYXRpb25zLm5hbWUudmFsaWQgJiYgdm0udmFsaWRhdGlvbnMubmFtZS5hZGRyZXNzZWQpIHJldHVybiB0cnVlO1xuXHQgICAgXHRlbHNlIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblxuXHQgICAgdm0uc2hvd0VtYWlsRXJyb3IgPSBmdW5jdGlvbigpIHtcblx0ICAgIFx0aWYoIXZtLnZhbGlkYXRpb25zLmVtYWlsLnZhbGlkICYmIHZtLnZhbGlkYXRpb25zLmVtYWlsLmFkZHJlc3NlZCkgcmV0dXJuIHRydWU7XG5cdCAgICBcdGVsc2UgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXG5cdCAgICB2bS5zaG93SW52aXRhdGlvbkVycm9yID0gZnVuY3Rpb24oKSB7XG5cdCAgICBcdGlmKCB2bS52YWxpZGF0aW9ucy5pbnZpdGF0aW9uLmlzVGhlSG9zdCB8fFxuXHQgICAgXHRcdHZtLnZhbGlkYXRpb25zLmludml0YXRpb24uYWxyZWFkeUludml0ZWQgKSBcblx0ICAgIFx0XHRcdHJldHVybiB0cnVlO1xuXHQgICAgXHRlbHNlIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblxuXHQgICAgdm0uc3VibWl0R3Vlc3RJbnZpdGF0aW9uID0gZnVuY3Rpb24oKSB7XG5cdCAgICBcdFxuXHQgICAgXHQvL2lmIHRoZSByZXF1aXJubWVudHMgYXJlIGZ1bGZpbGxlZC4uLlxuXHQgICAgXHRpZih2bS5pbnZpdGF0aW9uVmFsaWRGb3JTdWJtaXNzaW9uKSB7XG5cdCAgICBcdFx0Ly9tYWtlIHN1cmUgdGhlIGludml0YXRpb24gaXMgbm90IHRvIHRoZSBjdXJyZW50IHVzZXJcblx0ICAgIFx0XHRpZihpbnZpdGF0aW9uTWFuYWdlci50aGlzSXNUaGVIb3N0RW1haWwodm0udGVtcEd1ZXN0LmVtYWlsLCAkcm91dGVQYXJhbXMuZXZlbnRJZCkpIHtcblx0XHRcdFx0XHR2bS52YWxpZGF0aW9ucy5pbnZpdGF0aW9uLmlzVGhlSG9zdCA9IHRydWU7XG5cdFx0XHRcdFx0dm0udmFsaWRhdGlvbnMuaW52aXRhdGlvbi5lcnJvck1lc3NhZ2UgPSAnTm8gbmVlZCB0byBpbnZpdGUgdGhlIGhvc3QnO1xuXHRcdFx0XHRcdHJldHVybiAwO1xuXHQgICAgXHRcdH0gZWxzZSB7XG5cdCAgICBcdFx0XHR2bS52YWxpZGF0aW9ucy5pbnZpdGF0aW9uLmlzVGhlSG9zdCA9IGZhbHNlO1xuXHQgICAgXHRcdH1cblx0ICAgIFx0XHRcblx0XHQgICAgXHQvL21ha2Ugc3VyZSB0aGlzIHBlcnNvbiBoYXMgbm90IGFscmVhZHkgYmVlbiBpbnZpdGVkXG5cdFx0ICAgIFx0Lypcblx0XHQgICAgXHRpZihpbnZpdGF0aW9uTWFuYWdlci5ndWVzdEludml0ZWRBbHJlYWR5KHZtLnRlbXBHdWVzdC5lbWFpbCwgJHJvdXRlUGFyYW1zLmV2ZW50SWQpKSB7XG5cdFx0ICAgIFx0XHR2bS52YWxpZGF0aW9ucy5pbnZpdGF0aW9uLmFscmVhZHlJbnZpdGVkID0gdHJ1ZTtcblx0XHRcdFx0XHR2bS52YWxpZGF0aW9ucy5pbnZpdGF0aW9uLmVycm9yTWVzc2FnZSA9ICdUaGlzIGd1ZXN0IGhhcyBhbHJlYWR5IGJlZW4gaW52aXRlZCc7XG5cdFx0XHRcdFx0cmV0dXJuIDA7XG5cdCAgICBcdFx0fSBlbHNlIHtcblx0ICAgIFx0XHRcdHZtLnZhbGlkYXRpb25zLmludml0YXRpb24uYWxyZWFkeUludml0ZWQgPSBmYWxzZTtcblx0ICAgIFx0XHR9Ki9cblxuXHQgICAgXHRcdC8vaWYgdGhpcyBwZXJzb24gaXMgYSByZWdpc3RlcmVkIHVzZXIgZ2V0IHRoZWlyIHVzZXIgaWRcblx0ICAgIFx0XHRpbnZpdGF0aW9uTWFuYWdlci5nZXRVc2VySWRGb3JHdWVzdCh2bS50ZW1wR3Vlc3QuZW1haWwpXG5cdCAgICBcdFx0LnRoZW4oZnVuY3Rpb24odWlkKSB7XG5cdCAgICBcdFx0XHRcblx0ICAgIFx0XHRcdHJldHVybiB1aWQ7XG5cdCAgICBcdFx0fSlcblx0ICAgIFx0XHQudGhlbihmdW5jdGlvbih1aWQpIHtcblx0ICAgIFx0XHRcdC8vdXNlIHRoYXQgdWlkIHRvIHJlZ2lzdGVyIHRoZSB1c2VyXG5cdCAgICBcdFx0XHQvL2FkZCB0aGUgcGVyc29uIHRvIHRoZSBob3N0J3MgTE9DQUwgZ3Vlc3QgbGlzdFxuXHQgICAgXHRcdFx0XG5cblx0ICAgIFx0XHRcdGlmKCFhbmd1bGFyLmlzT2JqZWN0KHZtLmd1ZXN0TGlzdCkpIHtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0dm0uZ3Vlc3RMaXN0ID0ge307XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vY3JlYXRlIHRoZSBndWVzdCB0byBzYXZlXG5cdFx0XHRcdFx0dmFyIGd1ZXN0QmVpbmdBZGRlZCA9IHZtLnRlbXBHdWVzdDtcblxuXHQgICAgXHRcdFx0dm0uZ3Vlc3RMaXN0W3VpZF0gPSBndWVzdEJlaW5nQWRkZWQ7XG5cblx0ICAgIFx0XHRcdHZtLnRlbXBHdWVzdCA9IHtcblx0XHRcdFx0ICAgIFx0bmFtZTogJycsXG5cdFx0XHRcdCAgICBcdGVtYWlsOiAnJyxcblx0XHRcdFx0ICAgIFx0c3RhdHVzOiAncGVuZGluZydcblx0XHRcdFx0ICAgIH07XG5cblx0ICAgIFx0XHR9KVxuXHQgICAgXHRcdC50aGVuKGZ1bmN0aW9uKCkge1xuXHQgICAgXHRcdFx0Ly9hZGQgdGhpcyBldmVudCB0byB0aGUgdXNlcnMnIHBlbmRpbmcgbGlzdFxuXHQgICAgXHRcdFx0LyppbnZpdGF0aW9uTWFuYWdlci51cGRhdGVQZW5kaW5nRXZlbnRzTGlzdEZvclVzZXIoKSovXG5cdCAgICBcdFx0fSlcblx0ICAgIFx0XHQudGhlbihmdW5jdGlvbigpIHtcblx0ICAgIFx0XHRcdC8vcmVtb3ZlIHRoZSAndXBkYXRlZCcgZmllbGQgaWYgbmVlZCBiZVxuXHQgICAgXHRcdH0pXG5cdCAgICBcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yTWVzc2FnZSkge1xuXHQgICAgXHRcdFx0Ly9hc3N1bWluZyBubyB1aWQgd2FzIGZvdW5kIGp1c3QgdXNlIHRoZSBlbWFpbFxuXHQgICAgXHRcdFx0JGxvZy5pbmZvKGVycm9yTWVzc2FnZSk7XG5cdCAgICBcdFx0XHRcblx0ICAgIFx0XHRcdC8vY3JlYXRlIHRoZSBlbWFpbElkXG5cdCAgICBcdFx0XHRpZEJ5RW1haWwgPSB1dGY4X3RvX2I2NCh2bS50ZW1wR3Vlc3QuZW1haWwpO1xuXHQgICAgXHRcdFx0Ly9hZGQgdGhpcyBwZXJzb24gdG8gdGhlIGhvc3QncyBndWVzdCBsaXN0XG5cdCAgICBcdFx0XHRpZighYW5ndWxhci5pc09iamVjdCh2bS5ndWVzdExpc3QpKSB7XG5cdCAgICBcdFx0XHRcdFxuXHRcdFx0XHRcdFx0dm0uZ3Vlc3RMaXN0ID0ge307XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vY3JlYXRlIHRoZSBndWVzdCB0byBzYXZlXG5cdFx0XHRcdFx0dmFyIGd1ZXN0QmVpbmdBZGRlZCA9IHZtLnRlbXBHdWVzdDtcblxuXHQgICAgXHRcdFx0dm0uZ3Vlc3RMaXN0W2lkQnlFbWFpbF0gPSBndWVzdEJlaW5nQWRkZWQ7XG5cblx0XHRcdCAgICBcdC8qaW52aXRhdGlvbk1hbmFnZXIuYWRkR3Vlc3RUb0hvc3RHdWVzdExpc3Qodm0udGVtcEd1ZXN0Lm5hbWUsIHZtLnRlbXBHdWVzdC5lbWFpbCwgdW5kZWZpbmVkLCAkcm91dGVQYXJhbXMuZXZlbnRJZCwgJHJvdXRlUGFyYW1zLnVpZClcblx0XHRcdCAgICBcdC50aGVuKGZ1bmN0aW9uKHBvc2l0aXZlUmVzdWx0KSB7XG5cdFx0XHQgICAgXHRcdCRsb2cuaW5mbygnZ290IHRoaXMgcmVzdWx0OiAnICsgcG9zaXRpdmVSZXN1bHQpO1xuXHRcdFx0ICAgIFx0fSlcblx0XHRcdCAgICBcdC50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdFx0ICAgIFx0XHQvL2FkZCB0aGlzIGV2ZW50IHRvIHRoZSBndWVzdCdzIHBlbmRpbmcgbGlzdFxuXHRcdFx0ICAgIFx0XHRpbnZpdGF0aW9uTWFuYWdlci51cGRhdGVQZW5kaW5nRXZlbnRzTGlzdEZvckd1ZXN0KCRyb3V0ZVBhcmFtcy5ldmVudElkKVxuXHRcdFx0ICAgIFx0fSlcblx0XHRcdCAgICBcdC50aGVuKGZ1bmN0aW9uKCkge1xuXHQgICAgXHRcdFx0Ly9yZW1vdmUgdGhlICd1cGRhdGVkJyBmaWVsZCBpZiBuZWVkIGJlXG5cdCAgICBcdFx0XHR9KVxuXHRcdFx0ICAgIFx0LmNhdGNoKGZ1bmN0aW9uKG5lZ2F0aXZlUmVzdWx0KSB7XG5cdFx0XHQgICAgXHRcdCRsb2cuaW5mbygnZ290IHRoaXMgcmVzdWx0OiAnICsgcG9zaXRpdmVSZXN1bHQpO1xuXHRcdFx0ICAgIFx0fSkqL1xuXG5cdFx0XHQgICAgXHR2bS50ZW1wR3Vlc3QgPSB7XG5cdFx0XHRcdCAgICBcdG5hbWU6ICcnLFxuXHRcdFx0XHQgICAgXHRlbWFpbDogJycsXG5cdFx0XHRcdCAgICBcdHN0YXR1czogJ3BlbmRpbmcnXG5cdFx0XHRcdCAgICB9IFxuXG5cdCAgICBcdFx0fSlcblx0ICAgIFx0XHRcblx0ICAgIFx0fVxuXHQgICAgXHRcblx0ICAgIH1cblxuXHRcdC8vYWN0aW9uc1xuXHRcdGluaXQoKTtcblxuXHR9XG5cblx0cmV0dXJuICBkaXJlY3RpdmU7XG5cdFx0XG59O1xuLyogSG9zdGVkRXZlbnRzTGlzdC5kaXJlY3RpdmUuanMgKi9cblxuLyoqXG4qIEBkZXNjIGRpc3BsYXlzIGEgbGlzdCBvZiBhbGwgdGhlIGV2ZW50cyB0aGUgY3VycmVudCB1c2VyIGlzIGhvc3RpbmcuXG4qIEBleGFtcGxlIDxob3N0ZWQtZXZlbnRzLWxpc3Q+PC9ob3N0ZWQtZXZlbnRzLWxpc3Q+XG4qL1xuXG5hbmd1bGFyXG5cdC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcblx0LmRpcmVjdGl2ZSgnaG9zdGVkRXZlbnRzTGlzdCcsIGhvc3RlZEV2ZW50c0xpc3QpO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGhvc3RlZEV2ZW50c0xpc3QoKSB7XG4gICAgbGlua0Z1bmMuJGluamVjdCA9IFtcInNjb3BlXCIsIFwiZWxcIiwgXCJhdHRyXCIsIFwiY3RybFwiXTtcblx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRyZXN0cmljdDogJ0FFQ00nLFxuXHRcdHRlbXBsYXRlVXJsOiAndmlld3MvZGlyZWN0aXZlcy9ob3N0ZWRFdmVudHNMaXN0LmRpcmVjdGl2ZS5odG0nLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0c2NvcGU6IHtcblx0XHRcdGhvc3RlZEV2ZW50czogJz0nLFxuXHRcdFx0dXNlcklkOiAnPSdcblx0XHR9LFxuXHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdGNvbnRyb2xsZXI6IGhvc3RlZEV2ZW50c0xpc3RDb250cm9sbGVyLFxuXHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdH1cblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7XG5cdFx0c2NvcGUuJHdhdGNoKCdob3N0ZWRFdmVudHMnLCBmdW5jdGlvbihuZXh0LCBjdXJyZW50KSB7XG5cdFx0XHQvL3NvbWV0aGluZ1xuXHRcdH0pO1xuICAgIH1cblxuICAgIGhvc3RlZEV2ZW50c0xpc3RDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAndHJhZmZpY1ZhbGV0J107XG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gaG9zdGVkRXZlbnRzTGlzdENvbnRyb2xsZXIoJGxvZywgdHJhZmZpY1ZhbGV0KSB7XG5cdCAgICB2YXIgdm0gPSB0aGlzO1xuXG5cdCAgICAvL2xvY2FsIHZhcmlhYmxlc1xuXHQgICAgdmFyIGhvc3RlZEV2ZW50c1NoZXJwYSA9IHRyYWZmaWNWYWxldDtcblxuXHQgICAgLy92aWV3IG1vZGVsIHZhcmlhYmxlc1xuXHQgICAgdm0uZ3Vlc3RzQXJlSW52aXRlZCA9IGZhbHNlO1xuXG5cdCAgICAvL2xvY2FsIG1ldGhvZHNcblx0ICAgIGZ1bmN0aW9uIHVuaXhUaW1lVG9EYXRlVGltZSh1bml4VGltZSkge1xuXHRcdFx0cmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KHVuaXhUaW1lKSk7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIGNvdW50R3Vlc3RzKGxpc3QpIHtcblx0XHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZVxuXHRcdFx0dmFyIGNvdW50ZXIgPSAwO1xuXG5cdFx0XHQvL2lmIHdlJ3JlIGNvdW50aW5nLCB0aGVuIHRoZXJlJ3MgYSBsaXN0LCBzbyB0aHJvdyB0aGUgZmxhZ1xuXHRcdFx0dm0uZ3Vlc3RzQXJlSW52aXRlZCA9IHRydWU7XG5cblx0XHRcdE9iamVjdC5rZXlzW2xpc3RdLmZvckVhY2goZnVuY3Rpb24oZ3Vlc3QpIHtcblx0XHRcdFx0Y291bnRlcisrO1xuXHRcdFx0fSlcblxuXHRcdFx0cmV0dXJuIGNvdW50ZXI7XG5cdFx0fVxuXG5cdFx0Ly92aWV3IG1vZGVsIG1ldGhvZHNcblx0XHR2bS5mb3JtYXREYXRlID0gZnVuY3Rpb24odW5peFRpbWUpIHtcblx0XHRcdC8vcmVmb3JtYXQgdGhlIHRpbWVcblx0XHRcdFxuXHRcdFx0cmV0dXJuIHVuaXhUaW1lVG9EYXRlVGltZSh1bml4VGltZSk7XG5cdFx0fVxuXG5cdFx0dm0uZ3Vlc3RzQXR0ZW5kaW5nID0gZnVuY3Rpb24oZ3Vlc3RMaXN0KSB7XG5cdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChndWVzdExpc3QpKSB7XG5cdFx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGd1ZXN0TGlzdFsnYXR0ZW5kaW5nJ10pKSByZXR1cm4gY291bnRHdWVzdHMoZ3Vlc3RMaXN0WydhdHRlbmRpbmcnXSk7XG5cdFx0XHRcdGVsc2UgcmV0dXJuIDA7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHJldHVybiAwO1xuXHRcdH1cblxuXHRcdHZtLmd1ZXN0c0ludml0ZWQgPSBmdW5jdGlvbihndWVzdExpc3QpIHtcblx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGd1ZXN0TGlzdCkpIHtcblx0XHRcdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdFx0XHR2YXIgZ3Vlc3RDb3VudCA9IHsgYXR0ZW5kaW5nOiAwLCBwZW5kaW5nOiAwLCBkZWNsaW5lZDogMCB9O1xuXG5cdFx0XHRcdC8vbG9jYWwgbWV0aG9kc1xuXHRcdFx0XHRmdW5jdGlvbiB0b3RhbEd1ZXN0Q291bnQoKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGd1ZXN0Q291bnQuYXR0ZW5kaW5nICsgZ3Vlc3RDb3VudC5wZW5kaW5nICsgZ3Vlc3RDb3VudC5kZWNsaW5lZDtcblx0XHRcdFx0fSBcblxuXHRcdFx0XHQvL2NoZWNrIHZhbHVlc1xuXHRcdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChndWVzdExpc3RbJ2F0dGVuZGluZyddKSkgZ3Vlc3RDb3VudC5hdHRlbmRpbmcgPSBjb3VudEd1ZXN0cyhndWVzdExpc3RbJ2F0dGVuZGluZyddKTtcblx0XHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoZ3Vlc3RMaXN0WydwZW5kaW5nJ10pKSBndWVzdENvdW50LnBlbmRpbmcgPSBjb3VudEd1ZXN0cyhndWVzdExpc3RbJ3BlbmRpbmcnXSk7XG5cdFx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGd1ZXN0TGlzdFsnZGVjbGluZWQnXSkpIGd1ZXN0Q291bnQuZGVjbGluZWQgPSBjb3VudEd1ZXN0cyhndWVzdExpc3RbJ2RlY2xpbmVkJ10pO1xuXG5cdFx0XHRcdHJldHVybiB0b3RhbEd1ZXN0Q291bnQoKTtcblx0XHRcdH1cblx0XHRcdGVsc2UgcmV0dXJuIDA7XG5cdFx0fVxuXG5cdFx0dm0ucGVyY2VudGFnZUF0dGVuZGluZyA9IGZ1bmN0aW9uKGd1ZXN0TGlzdCkge1xuXHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoZ3Vlc3RMaXN0KSkge1xuXHRcdFx0XHRyZXR1cm4gKGd1ZXN0c0F0dGVuZGluZyhndWVzdGxpc3QpIC8gZ3Vlc3RzSW52aXRlZChndWVzdExpc3QpKTtcblx0XHRcdH1cblx0XHRcdGVsc2UgcmV0dXJuIDA7XG5cdFx0fVxuXG5cdFx0dm0uZXZlbnRDbGlja2VkID0gZnVuY3Rpb24oZXZlbnRJRCkge1xuXHRcdFx0Ly9yZWRpcmVjdCB0byB0aGUgZXZlbnQgcGFnZVxuXHRcdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyB0bzogL2V2ZW50LycgKyBldmVudElEICsgJy8nICsgdm0uaG9zdGVkRXZlbnRzW2V2ZW50SURdLmhvc3QudWlkICsgJy8nICsgdm0udXNlcklkKTtcblx0XHRcdGhvc3RlZEV2ZW50c1NoZXJwYS5yZWRpcmVjdFRvKCcvZXZlbnQnLCBldmVudElELCB2bS5ob3N0ZWRFdmVudHNbZXZlbnRJRF0uaG9zdC51aWQsIHZtLnVzZXJJZCk7XG5cdFx0fVxuXG5cdFx0dm0uaW52aXRlR3Vlc3RzID0gZnVuY3Rpb24oZXZlbnRJZCkge1xuXHRcdFx0aG9zdGVkRXZlbnRzU2hlcnBhLnJlZGlyZWN0VG8oJy9ldmVudC9ob3N0JywgZXZlbnRJZCwgdm0uaG9zdGVkRXZlbnRzW2V2ZW50SWRdLmhvc3QudWlkLCAnMycpO1xuXHRcdH1cblxuXHRcdC8vYWN0aW9uc1xuXHR9XG5cblx0cmV0dXJuICBkaXJlY3RpdmU7XG5cdFx0XG59O1xuLyogSG9zdGVkRXZlbnRzUHJvZ3Jlc3NCYXIuZGlyZWN0aXZlLmpzICovXG5cbi8qKlxuKiBAZGVzYyBkaXNwbGF5cyBhIHVzZXJzIHByb2dyZXNzIHRocm91Z2ggdGhlIGV2ZW50cyBwYWdlLlxuKiBAZXhhbXBsZSA8aG9zdGVkLWV2ZW50cy1wcm9ncmVzcy1iYXI+PC9ob3N0ZWQtZXZlbnRzLXByb2dyZXNzLWJhcj5cbiovXG5cbmFuZ3VsYXJcblx0Lm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuXHQuZGlyZWN0aXZlKCdwcm9ncmVzc0JhcicsIHByb2dyZXNzQmFyKTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBwcm9ncmVzc0JhcigpIHtcbnJldHVybiB7XG4gICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgY3VyVmFsOiAnQCcsXG4gICAgICAgIG1heFZhbDogJ0AnXG4gICAgICB9LFxuICAgICAgdGVtcGxhdGU6IFwiPGRpdiBjbGFzcz0ncHJvZ3Jlc3MtYmFyJz5cIitcbiAgICAgICAgICAgICAgICAgIFwiPGRpdiBjbGFzcz0ncHJvZ3Jlc3MtYmFyLWJhcic+dGVzdGluZzwvZGl2PlwiK1xuICAgICAgICAgICAgICAgIFwiPC9kaXY+XCIsICAgIFxuXG4gICAgICBsaW5rOiBmdW5jdGlvbiAoJHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlUHJvZ3Jlc3MoKSB7XG4gICAgICAgICAgdmFyIHByb2dyZXNzID0gMDtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoJHNjb3BlLm1heFZhbCkge1xuICAgICAgICAgICAgcHJvZ3Jlc3MgPSBNYXRoLm1pbigkc2NvcGUuY3VyVmFsLCAkc2NvcGUubWF4VmFsKSAvICRzY29wZS5tYXhWYWwgKiBlbGVtZW50LmZpbmQoJy5wcm9ncmVzcy1iYXInKS53aWR0aCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBlbGVtZW50LmZpbmQoJy5wcm9ncmVzcy1iYXItYmFyJykuY3NzKCd3aWR0aCcsIHByb2dyZXNzKTsgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgICRzY29wZS4kd2F0Y2goJ2N1clZhbCcsIHVwZGF0ZVByb2dyZXNzKTtcbiAgICAgICAgJHNjb3BlLiR3YXRjaCgnbWF4VmFsJywgdXBkYXRlUHJvZ3Jlc3MpOyAgICAgICAgXG4gICAgICB9XG4gICAgfTsgIFxuIH07XG4vKiBIb3N0ZWRHdWVzdExpc3QuZGlyZWN0aXZlLmpzICovXG5cbi8qKlxuKiBAZGVzYyBkaXNwbGF5cyBhIGxpc3Qgb2YgYWxsIGd1ZXN0cyBpbnZpdGVkIHRvIGFuIGV2ZW50IHRoaXMgdXNlciBpcyBob3N0aW5nLlxuKiBAZXhhbXBsZSA8aG9zdGVkLWd1ZXN0LWxpc3Q+PC9ob3N0ZWQtZ3Vlc3QtbGlzdD5cbiovXG5cbmFuZ3VsYXJcblx0Lm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuXHQuZGlyZWN0aXZlKCdob3N0ZWRHdWVzdExpc3QnLCBob3N0ZWRHdWVzdExpc3QpO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGhvc3RlZEd1ZXN0TGlzdCgpIHtcbiAgICBsaW5rRnVuYy4kaW5qZWN0ID0gW1wic2NvcGVcIiwgXCJlbFwiLCBcImF0dHJcIiwgXCJjdHJsXCJdO1xuXHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdHJlc3RyaWN0OiAnQUVDTScsXG5cdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9kaXJlY3RpdmVzL2hvc3RlZEd1ZXN0TGlzdC5kaXJlY3RpdmUuaHRtJyxcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdHNjb3BlOiB7XG5cdFx0XHRndWVzdExpc3Q6ICc9Jyxcblx0XHR9LFxuXHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdGNvbnRyb2xsZXI6IGhvc3RlZEd1ZXN0TGlzdENvbnRyb2xsZXIsXG5cdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0fVxuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHtcblx0XHRzY29wZS4kd2F0Y2goJ2d1ZXN0TGlzdCcsIGZ1bmN0aW9uKCkge1xuXHRcdFx0c2NvcGUuJGFwcGx5O1xuXHRcdH0pO1xuICAgIH1cblxuICAgIGhvc3RlZEd1ZXN0TGlzdENvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICckcm91dGVQYXJhbXMnLCAndXNlckRhdGEnXTtcbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBob3N0ZWRHdWVzdExpc3RDb250cm9sbGVyKCRsb2csICRyb3V0ZVBhcmFtcywgdXNlckRhdGEpIHtcblx0ICAgIHZhciB2bSA9IHRoaXM7XG5cblx0ICAgIC8vbG9jYWwgdmFyaWFibGVzXG5cdCAgICB2bS5pc0FHdWVzdExpc3QgPSBmYWxzZTtcblxuXHQgICAgLy9sb2NhbCBtZXRob2RzXG5cdCAgICBmdW5jdGlvbiB0aGVyZUlzQUd1ZXN0TGlzdCgpIHtcblx0ICAgIFx0Ly9jaGVjayBmb3IgYSBndWVzdExpc3Qgb2JqZWN0XG5cdCAgICBcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZtLmd1ZXN0TGlzdCkgJiYgdm0uZ3Vlc3RMaXN0ICE9ICcnKSB7XG5cdCAgICBcdFx0dm0uaXNBR3Vlc3RMaXN0ID0gdHJ1ZTtcblx0ICAgIFx0XHRyZXR1cm4gdHJ1ZTtcblx0ICAgIFx0fSBlbHNlIHtcblx0ICAgIFx0XHR2bS5pc0FHdWVzdExpc3QgPSBmYWxzZTtcblx0ICAgIFx0XHRyZXR1cm4gZmFsc2U7XG5cdCAgICBcdH1cblx0ICAgIH1cblxuXHQgICAgZnVuY3Rpb24gaW5pdCgpIHtcblx0ICAgIFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0ICAgIFx0dmFyIGxpc3RDb2xsZWN0b3IgPSB1c2VyRGF0YTtcblxuXHQgICAgXHQvL2lmIHRoZXJlIGlzbid0IGEgZ3Vlc3QgbGlzdCwgZ28gb3V0IHRvIHRoZSBkYiB0byBnZXQgaXRcblxuXHRcdFx0aWYoIXRoZXJlSXNBR3Vlc3RMaXN0KCkpIHtcblx0XHRcdFx0JGxvZy5pbmZvKCdnb2luZyBhZnRlciB0aGUgbGlzdCcpO1xuXHRcdFx0XHRsaXN0Q29sbGVjdG9yLmdldEV2ZW50R3Vlc3RMaXN0KCRyb3V0ZVBhcmFtcy51aWQsICRyb3V0ZVBhcmFtcy5ldmVudElkKVxuXHRcdFx0XHQudGhlbihmdW5jdGlvbihyZXR1cm5lZExpc3QpIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ2dvdCB0aGUgbGlzdCcpO1xuXHRcdFx0XHRcdCRsb2cuaW5mbyhyZXR1cm5lZExpc3QpO1xuXHRcdFx0XHRcdHZtLmd1ZXN0TGlzdCA9IHJldHVybmVkTGlzdDtcblx0XHRcdFx0XHRpZihhbmd1bGFyLmlzT2JqZWN0KHJldHVybmVkTGlzdCkpIHZtLmlzQUd1ZXN0TGlzdCA9IHRydWU7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5jYXRjaChmdW5jdGlvbihlcnJvcikgeyBcblx0XHRcdFx0XHQkbG9nLmluZm8oJ1RoZXJlIHdhcyBhbiBlcnJvcjogJysgZXJyb3IpO1xuXHRcdFx0XHR9KVxuXHRcdFx0fVxuXHQgICAgfVxuXHQgICAgLy92bSBtZXRob2RzXG5cblx0XHQvL2FjdGlvbnNcblx0XHRpbml0KCk7XG5cblx0fVxuXG5cdHJldHVybiAgZGlyZWN0aXZlO1xuXHRcdFxufTtcbi8qIFRvb2xCYXIuZGlyZWN0aXZlLmpzICovXG5cbi8qKlxuKiBAZGVzYyB0b29sYmFyIGRpcmVjdGl2ZSB0aGF0IGlzIHVzZWQgb24gdGhlIG1haW4gcGFnZSBhY3Jvc3MgdGhlIGVudGlyZSBhcHAuXG4qIEBleGFtcGxlIDxkaXYgdG9vbC1iYXI+PC9kaXY+XG4qL1xuXG5hbmd1bGFyXG5cdC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcblx0LmRpcmVjdGl2ZSgndG9vbEJhcicsIHRvb2xCYXIpO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHRvb2xCYXIoKSB7XG4gICAgbGlua0Z1bmMuJGluamVjdCA9IFtcInNjb3BlXCIsIFwiZWxcIiwgXCJhdHRyXCIsIFwiY3RybFwiXTtcblx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRyZXN0cmljdDogJ0FFQ00nLFxuXHRcdHRlbXBsYXRlVXJsOiAndmlld3MvZGlyZWN0aXZlcy90b29sQmFyLmRpcmVjdGl2ZS5odG0nLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0c2NvcGU6IHt9LFxuXHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdGNvbnRyb2xsZXI6IFRvb2xCYXJDb250cm9sbGVyLFxuXHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdH1cblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7XG4gICAgfVxuXG4gICAgVG9vbEJhckNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnLCAnYmFja2VuZFNlcnZpY2VzJywgJ3RyYWZmaWNWYWxldCddO1xuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIFRvb2xCYXJDb250cm9sbGVyKCRzY29wZSwgJGxvZywgYmFja2VuZFNlcnZpY2VzLCB0cmFmZmljVmFsZXQpIHtcblx0ICAgIHZhciB2bSA9IHRoaXM7XG5cblx0ICAgIC8vbG9jYWwgY29udHJvbGVyIHZhcmlhYmxlc1xuXHQgICAgdmFyIGZiQ29ubmVjdCA9IGJhY2tlbmRTZXJ2aWNlcztcblx0ICAgIHZhciB0b29sYmFyU2hlcnBhID0gdHJhZmZpY1ZhbGV0O1xuXG5cdCAgICAvL2xvY2FsIHZpZXcgdmFyaWFibGVzXG5cdFx0ZnVuY3Rpb24gY2hlY2tMb2dpblN0YXR1cygpIHtcblxuXHRcdFx0ZmJDb25uZWN0LmNoZWNrTG9naW5TdGF0dXMoKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24oc3RhdHVzKSB7XG5cdFx0XHRcdFxuXHRcdFx0XHR2bS5sb2dnZWRJbiA9IHN0YXR1cztcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goKVxuXHRcdH1cblxuXHRcdC8vdm0gbWV0aG9kc1xuXHRcdHZtLmxvZ2luID0gZnVuY3Rpb24oKSB7XG5cblx0XHR9XG5cblx0XHR2bS5sb2dvdXQgPSBmdW5jdGlvbigpIHtcblx0XHRcdCRsb2cuaW5mbygnbG9nZ2luZyBvdXQnKTtcblx0XHRcdFxuXHRcdFx0Ly9sb2dvdXRcblx0XHRcdGZiQ29ubmVjdC5sb2dVc2VyT3V0KCk7XG5cdFx0XHRcblx0XHRcdC8vcmVkaXJlY3Rcblx0XHRcdHRvb2xiYXJTaGVycGEucmVkaXJlY3RUbygnL2xvZ2luJyk7XG5cdFx0fVxuXG5cdFx0dm0ubG9naW5SZWdpc3RlcmVkVXNlciA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdFx0dmFyIHJlZ2lzdGVyZWRVc2VyU2hlcnBhID0gdHJhZmZpY1ZhbGV0O1xuXG5cdFx0XHQvL2NvbmZpcm0gYWxsIGZpZWxkcyBhcmUgdmFsaWRcblx0XHRcdGlmKHRydWUpIHtcblx0XHRcdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlc1xuXHRcdFx0XHR2YXIgZGF0YWJhc2UgPSBiYWNrZW5kU2VydmljZXM7XG5cdFx0XHRcdHZhciByZWdpc3RlcmVkVXNlckRhdGEgPSB1c2VyRGF0YTtcblxuXHRcdFx0XHQvL3ZlcmlmeSB1c2VycyBjcmVkZW50aWFsc1xuXHRcdFx0XHRkYXRhYmFzZS5Mb2dpblJlZ2lzdGVyZWRVc2VyKHZtLmVtYWlsLCB2bS5wYXNzd29yZClcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24odXNlckNyZWRlbnRpYWxzKSB7XG5cdFx0XHRcdFx0Ly9pZiBubyB0cm91YmxlIGxvZ2dpbmcgaW4gdXBkYXRlIGVycm9yIG9iamVjdFxuXHRcdFx0XHRcdC8vdm0uZXJyb3JzLnBhc3Nlc0FsbFRlc3RzID0gdHJ1ZTtcblx0XHRcdFxuXHRcdFx0XHRcdC8vYWRkIHByaW1hcnkgaW5mb3JtYXRpb24gdG8gbG9jYWwgbW9kZWxcblx0XHRcdFx0XHQvL3JlZ2lzdGVyZWRVc2VyRGF0YS5zZXRQcmltYXJpZXNMb2NhbGx5KHVzZXJDcmVkZW50aWFscy5lbWFpbCwgdXNlckNyZWRlbnRpYWxzLm5hbWUsIHVzZXJDcmVkZW50aWFscy51aWQpO1xuXHRcdFx0XHRcdHJldHVybiB1c2VyQ3JlZGVudGlhbHMudWlkXG5cdFx0XHRcdH0pXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKHVpZCkge1xuXG5cdFx0XHRcdFx0ZGF0YWJhc2UuZ2V0VXNlckJpbyh1aWQpXG5cdFx0XHRcdFx0LnRoZW4oZnVuY3Rpb24odXNlckJpbykge1xuXHRcdFx0XHRcdFx0Ly91cGRhdGUgdXNlckRhdGEgbW9kZWwgd2l0aCB1c2VyQmlvXG5cdFx0XHRcdFx0XHRyZWdpc3RlcmVkVXNlckRhdGEudXBkYXRlQmlvTG9jYWxseSh1c2VyQmlvKTtcblxuXHRcdFx0XHRcdFx0Ly9sb2FkIHVzZXIgZXZlbnRzXG5cdFx0XHRcdFx0XHRkYXRhYmFzZS5nZXRVc2VyRXZlbnRzKHVpZClcblx0XHRcdFx0XHRcdC50aGVuKGZ1bmN0aW9uKGFsbEV2ZW50c0ZvclRoaXNVc2VyKSB7XG5cdFx0XHRcdFx0XHRcdC8vdXBkYXRlIHVzZXJEYXRhIG1vZGVsIHdpdGggdXNlckV2ZW50c1xuXHRcdFx0XHRcdFx0XHRyZWdpc3RlcmVkVXNlckRhdGEudXBkYXRlQWxsVXNlckV2ZW50c0xvY2FsbHkoYWxsRXZlbnRzRm9yVGhpc1VzZXIpO1xuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdC5jYXRjaChmdW5jdGlvbihtZXNzYWdlKSB7ICRsb2cuaW5mbyhtZXNzYWdlKTsgfSlcblxuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKG1lc3NhZ2UpIHsgJGxvZy5pbmZvKG1lc3NhZ2UpOyB9KVxuXG5cdFx0XHRcdFx0Ly9yZWRpcmVjdCB0byB0aGUgbmV4dCBwYWdlIFxuXHRcdFx0XHRcdHJlZ2lzdGVyZWRVc2VyU2hlcnBhLnJlZGlyZWN0VG8oJy91c2VySW5mb3JtYXRpb24nLCB1aWQpO1xuXG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5jYXRjaChmdW5jdGlvbihtZXNzYWdlKSB7IFxuXHRcdFx0XHRcdC8vaWYgdGhlcmUgd2FzIGFuIGVycm9yIGxvZ2dpbmcgaW4sIGxldCB0aGUgdXNlciBrbm93XG5cdFx0XHRcdFx0Ly92bS5lcnJvcnMubWVzc2FnZSA9IG1lc3NhZ2U7XG5cdFx0XHRcdFx0Ly92bS5lcnJvcnMucGFzc2VzQWxsVGVzdHMgPSBmYWxzZTtcblx0XHRcdFx0fSlcblxuXHRcdFx0XHQvL3VzZSB1aWQgdG8gY29sbGVjdCB1c2VyIGJpb1xuXHRcdFx0XHRcblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdC8vYWN0aW9uc1xuXHRcdGNoZWNrTG9naW5TdGF0dXMoKTtcblxuXHRcdC8vd2F0Y2hlcnNcblx0XHQkc2NvcGUuJG9uKCckcm91dGVDaGFuZ2VTdGFydCcsIGZ1bmN0aW9uKG5leHQsIGN1cnJlbnQpIHtcblx0XHRcdFxuXHRcdFx0Y2hlY2tMb2dpblN0YXR1cygpO1xuXHRcdH0pXG5cdH1cblxuXHRyZXR1cm4gIGRpcmVjdGl2ZTtcblx0XHRcbn07IiwiLyogQWRkQUd1ZXN0LmRpcmVjdGl2ZS5qcyAqL1xuXG4vKipcbiogQGRlc2MgZGlzcGxheXMgYSBsaXN0IG9mIGFsbCBndWVzdHMgaW52aXRlZCB0byBhbiBldmVudCB0aGlzIHVzZXIgaXMgaG9zdGluZy5cbiogQGV4YW1wbGUgPGFkZC1hLWd1ZXN0PjwvYWRkLWEtZ3Vlc3Q+XG4qL1xuXG5hbmd1bGFyXG5cdC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcblx0LmRpcmVjdGl2ZSgnYWRkQUd1ZXN0JywgYWRkQUd1ZXN0KTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBhZGRBR3Vlc3QoKSB7XG5cdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0cmVzdHJpY3Q6ICdBRUNNJyxcblx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2RpcmVjdGl2ZXMvYWRkQUd1ZXN0LmRpcmVjdGl2ZS5odG0nLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0c2NvcGU6IHtcblx0XHRcdGd1ZXN0TGlzdDogJz0nXG5cdFx0fSxcblx0XHRsaW5rOiBsaW5rRnVuYyxcblx0XHRjb250cm9sbGVyOiBhZGRBR3Vlc3RDb250cm9sbGVyLFxuXHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdH1cblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7XG4gICAgfVxuXG4gICAgYWRkQUd1ZXN0Q29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJywgJyRyb3V0ZVBhcmFtcycsICd2YWxpZGF0aW9uJywgJ3VzZXJEYXRhJ107XG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gYWRkQUd1ZXN0Q29udHJvbGxlcigkbG9nLCAkcm91dGVQYXJhbXMsIHZhbGlkYXRpb24sIHVzZXJEYXRhKSB7XG5cdCAgICB2YXIgdm0gPSB0aGlzO1xuXHQgICAgdmFyIGVtYWlsQ2hlY2tlciA9IHZhbGlkYXRpb247XG5cdCAgICB2YXIgaW52aXRhdGlvbk1hbmFnZXIgPSB1c2VyRGF0YTtcblxuXHQgICAgLy9sb2NhbCB2YXJpYWJsZXNcblx0ICAgIHZhciBldmVudERldGFpbHMgPSB7fTtcblxuXHQgICAgLy92bSB2YXJpYWJsZXNcblx0ICAgIHZtLnRlbXBHdWVzdCA9IHtcblx0ICAgIFx0bmFtZTogJycsXG5cdCAgICBcdGVtYWlsOiAnJyxcblx0ICAgIFx0c3RhdHVzOiAncGVuZGluZydcblx0ICAgIH1cblx0ICAgIHZtLnZhbGlkYXRpb25zID0ge1xuXHQgICAgXHRuYW1lOiB7XG5cdCAgICBcdFx0YWRkcmVzc2VkOiBmYWxzZSxcblx0ICAgIFx0XHR2YWxpZDogZmFsc2UsXG5cdCAgICBcdFx0ZXJyb3JNZXNzYWdlOiAnJ1xuXHQgICAgXHR9LFxuXHQgICAgXHRlbWFpbDoge1xuXHQgICAgXHRcdGFkZHJlc3NlZDogZmFsc2UsXG5cdCAgICBcdFx0dmFsaWQ6IGZhbHNlLFxuXHQgICAgXHRcdGVycm9yTWVzc2FnZTogJydcblx0ICAgIFx0fSxcblx0ICAgIFx0aW52aXRhdGlvbjoge1xuXHQgICAgXHRcdGlzVGhlSG9zdDogZmFsc2UsXG5cdCAgICBcdFx0YWxyZWFkeUludml0ZWQ6IGZhbHNlLFxuXHQgICAgXHRcdGVycm9yTWVzc2FnZTogJydcblx0ICAgIFx0fVxuXHQgICAgfVxuXHQgICAgdm0uaW52aXRhdGlvblZhbGlkRm9yU3VibWlzc2lvbiA9IGZhbHNlO1xuXHQgICAgdm0uc3VibWlzc2lvbkJ1dHRvbiA9IHtcblx0ICAgIFx0c3R5bGU6IHtcblx0ICAgIFx0XHRjb2xvcjoncmVkJ1xuXHQgICAgXHR9LFxuXHQgICAgXHRjbGFzczoge1xuXHQgICAgXHRcdCdjb2wteHMtMTInOiB0cnVlLFxuXHQgICAgXHRcdCdjb2wtc20tMTInOiB0cnVlLFxuXHQgICAgXHRcdCdidG4nOiB0cnVlLFxuXHQgICAgXHRcdCdidG4td2FybmluZyc6IHRydWUsXG5cdCAgICBcdFx0J2J0bi1zdWNjZXNzJzogZmFsc2Vcblx0ICAgIFx0fSxcblx0ICAgIFx0bWVzc2FnZTogJ0FkZHJlc3MgSW52aXRhdGlvbi4uLidcblx0ICAgIH1cblx0ICAgIC8vbG9jYWwgbWV0aG9kc1xuXHQgICAgZnVuY3Rpb24gdXRmOF90b19iNjQoc3RyKSB7XG5cdFx0XHRyZXR1cm4gYnRvYShzdHIpO1xuXHRcdH1cblxuXHQgICAgZnVuY3Rpb24gdmFsaWRhdGVJbnZpdGF0aW9uKCkge1xuXHQgICAgXHQvL2NoZWNrIGlmIGJvdGggaW5wdXRzIGFyZSB2YWxpZFxuXHQgICAgXHRpZih2bS52YWxpZGF0aW9ucy5uYW1lLnZhbGlkICYmIHZtLnZhbGlkYXRpb25zLmVtYWlsLnZhbGlkKSB7XG5cdCAgICBcdFx0XG5cdCAgICBcdFx0Ly9zZXQgdGhlIHZhbGlkaXR5IGZsYWdcblx0ICAgIFx0XHR2bS5pbnZpdGF0aW9uVmFsaWRGb3JTdWJtaXNzaW9uID0gdHJ1ZTtcblx0ICAgIFx0XHQvL3VwZGF0ZSB0aGUgc3VibWlzc2lvbiBidXR0b25cblx0ICAgIFx0XHR2bS5zdWJtaXNzaW9uQnV0dG9uLmNsYXNzWydidG4td2FybmluZyddID0gZmFsc2U7XG5cdCAgICBcdFx0dm0uc3VibWlzc2lvbkJ1dHRvbi5jbGFzc1snYnRuLXN1Y2Nlc3MnXSA9IHRydWU7XG5cdCAgICBcdFx0dm0uc3VibWlzc2lvbkJ1dHRvbi5tZXNzYWdlPSdJbnZpdGUgR3Vlc3QnO1xuXHQgICAgXHR9IGVsc2Uge1xuXHQgICAgXHRcdFxuXHQgICAgXHRcdC8vc2V0IHRoZSB2YWxpZGl0eSBmbGFnXG5cdCAgICBcdFx0dm0uaW52aXRhdGlvblZhbGlkRm9yU3VibWlzc2lvbiA9IGZhbHNlO1xuXHQgICAgXHRcdC8vdXBkYXRlIHRoZSBzdWJtaXNzaW9uIGJ1dHRvblxuXHQgICAgXHRcdHZtLnN1Ym1pc3Npb25CdXR0b24uY2xhc3NbJ2J0bi13YXJuaW5nJ10gPSB0cnVlO1xuXHQgICAgXHRcdHZtLnN1Ym1pc3Npb25CdXR0b24uY2xhc3NbJ2J0bi1zdWNjZXNzJ10gPSBmYWxzZTtcblx0ICAgIFx0XHR2bS5zdWJtaXNzaW9uQnV0dG9uLm1lc3NhZ2U9J0FkZHJlc3MgSW52aXRhdGlvbi4uLic7XG5cdCAgICBcdH1cblx0ICAgIH1cblxuXHQgICAgZnVuY3Rpb24gaW5pdCgpIHtcblx0ICAgIFx0Ly9sb2FkIHRoZSBldmVudCBmb3IgcmVmZXJlbmNlXG5cdCAgICBcdGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQoaW52aXRhdGlvbk1hbmFnZXIuZ2V0T25lVXNlckV2ZW50TG9jYWxseSgnaG9zdGluZycsICRyb3V0ZVBhcmFtcy5ldmVudElkKSkpIHtcblx0ICAgIFx0XHQvL2lmIHRoaXMgcGFnZSB3YXMgbG9hZGVkIGJlZm9yZSB0aGUgbW9kZWwgZ2V0IHRoZSBldmVudFxuXHQgICAgXHRcdGludml0YXRpb25NYW5hZ2VyLmdldFJlbW90ZUV2ZW50c0ZvckxvY2FsKClcblx0XHQgICAgXHQudGhlbihmdW5jdGlvbigpIHtcblx0XHQgICAgXHRcdC8vd2hlbiB0aGUgZXZlbnQgaGFzIGJlZW4gbG9hZGVkXG5cdFx0ICAgIFx0XHRldmVudERldGFpbHMgPSBpbnZpdGF0aW9uTWFuYWdlci5nZXRPbmVVc2VyRXZlbnRMb2NhbGx5KCdob3N0aW5nJywgJHJvdXRlUGFyYW1zLmV2ZW50SWQpO1xuXG5cdFx0ICAgIFx0fSlcblx0ICAgIFx0fSBlbHNlIHtcblx0ICAgIFx0XHQvL2p1c3QgZ2V0IHRoZSBtb2RlbCBsb2NhbGx5XG5cdCAgICBcdFx0ZXZlbnREZXRhaWxzID0gaW52aXRhdGlvbk1hbmFnZXIuZ2V0T25lVXNlckV2ZW50TG9jYWxseSgnaG9zdGluZycsICRyb3V0ZVBhcmFtcy5ldmVudElkKTtcblx0ICAgIFx0fVxuXHQgICAgXHQgIFx0XG5cdCAgICB9XG5cblx0ICAgIC8vdm0gbWV0aG9kc1xuXHQgICAgdm0udmFsaWRhdGVOYW1lID0gZnVuY3Rpb24oKSB7XG5cdCAgICBcdC8vdGhpcyBmaWVsZCBpcyBiZWluZyBlZGl0ZWQsIHRocm93IGZsYWdcblx0ICAgIFx0dm0udmFsaWRhdGlvbnMubmFtZS5hZGRyZXNzZWQgPSB0cnVlO1xuXG5cdCAgICBcdC8vY2hlY2sgZm9yIHZhbHVlXG5cdCAgICBcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZtLnRlbXBHdWVzdC5uYW1lKSAmJiB2bS50ZW1wR3Vlc3QubmFtZSAhPSAnJykge1xuXHQgICAgXHRcdHZtLnZhbGlkYXRpb25zLm5hbWUudmFsaWQgPSB0cnVlO1xuXHQgICAgXHRcdHZtLnZhbGlkYXRpb25zLm5hbWUuZXJyb3JNZXNzYWdlID0gJyc7XG5cdCAgICBcdH0gZWxzZSB7XG5cdCAgICBcdFx0dm0udmFsaWRhdGlvbnMubmFtZS52YWxpZCA9IGZhbHNlO1xuXHQgICAgXHRcdHZtLnZhbGlkYXRpb25zLm5hbWUuZXJyb3JNZXNzYWdlID0gJ1RoaXMgZ3Vlc3QgbmVlZHMgYSBuYW1lJztcblx0ICAgIFx0fVxuXG5cdCAgICBcdHZhbGlkYXRlSW52aXRhdGlvbigpO1xuXHQgICAgfVxuXHQgICAgdm0udmFsaWRhdGVFbWFpbCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgXHQvL3RoaXMgZmllbGQgaXMgYmVpbmcgZWRpdGVkLCB0aHJvdyBmbGFnXG5cdCAgICBcdHZtLnZhbGlkYXRpb25zLmVtYWlsLmFkZHJlc3NlZCA9IHRydWU7XG5cblx0ICAgIFx0Ly9pcyB0aGVyZSBhbiBlbWFpbCB2YWx1ZT9cblx0ICAgIFx0aWYoYW5ndWxhci5pc0RlZmluZWQodm0udGVtcEd1ZXN0LmVtYWlsKSAmJiB2bS50ZW1wR3Vlc3QuZW1haWwgIT0gJycpIHtcblx0ICAgIFx0XHRcblx0ICAgIFx0XHQvL2lmIGFuIGVtYWlsIGV4aXN0cyBjaGVjayBpdCdzIHZhbGlkaXR5XG5cdCAgICBcdFx0aWYoYW5ndWxhci5pc1VuZGVmaW5lZChlbWFpbENoZWNrZXIuZW1haWwodm0udGVtcEd1ZXN0LmVtYWlsKSkpIHtcblx0ICAgIFx0XHRcdC8vZW1haWwgaXMgdmFsaWRcblx0ICAgIFx0XHRcdHZtLnZhbGlkYXRpb25zLmVtYWlsLnZhbGlkID0gdHJ1ZTtcblx0ICAgIFx0XHRcdHZtLnZhbGlkYXRpb25zLmVtYWlsLmVycm9yTWVzc2FnZSA9ICcnO1xuXHQgICAgXHRcdH0gZWxzZSB7XG5cdCAgICBcdFx0XHQvL2dldCB0aGUgZXJyb3Jcblx0ICAgIFx0XHRcdHZtLnZhbGlkYXRpb25zLmVtYWlsLnZhbGlkID0gZmFsc2U7XG5cdCAgICBcdFx0XHR2bS52YWxpZGF0aW9ucy5lbWFpbC5lcnJvck1lc3NhZ2UgPSBlbWFpbENoZWNrZXIuZW1haWwodm0udGVtcEd1ZXN0LmVtYWlsKTtcblx0ICAgIFx0XHRcdCRsb2cuaW5mbyh2bS52YWxpZGF0aW9ucy5lbWFpbC5lcnJvck1lc3NhZ2UpO1xuXHQgICAgXHRcdH1cblxuXHQgICAgXHR9IGVsc2Uge1xuXHQgICAgXHRcdC8vdGhlcmUgaXNuJ3QgYW4gZW1haWwgeWV0XG5cdCAgICBcdFx0dm0udmFsaWRhdGlvbnMuZW1haWwudmFsaWQgPSBmYWxzZTtcblx0ICAgIFx0XHR2bS52YWxpZGF0aW9ucy5lbWFpbC5lcnJvck1lc3NhZ2UgPSAnTm90IGEgdmFsaWQgZW1haWwnO1xuXHQgICAgXHR9XG5cblx0ICAgIFx0dmFsaWRhdGVJbnZpdGF0aW9uKCk7XG5cdCAgICB9XG5cblx0ICAgIHZtLnNob3dOYW1lRXJyb3IgPSBmdW5jdGlvbigpIHtcblx0ICAgIFx0aWYoIXZtLnZhbGlkYXRpb25zLm5hbWUudmFsaWQgJiYgdm0udmFsaWRhdGlvbnMubmFtZS5hZGRyZXNzZWQpIHJldHVybiB0cnVlO1xuXHQgICAgXHRlbHNlIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblxuXHQgICAgdm0uc2hvd0VtYWlsRXJyb3IgPSBmdW5jdGlvbigpIHtcblx0ICAgIFx0aWYoIXZtLnZhbGlkYXRpb25zLmVtYWlsLnZhbGlkICYmIHZtLnZhbGlkYXRpb25zLmVtYWlsLmFkZHJlc3NlZCkgcmV0dXJuIHRydWU7XG5cdCAgICBcdGVsc2UgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXG5cdCAgICB2bS5zaG93SW52aXRhdGlvbkVycm9yID0gZnVuY3Rpb24oKSB7XG5cdCAgICBcdGlmKCB2bS52YWxpZGF0aW9ucy5pbnZpdGF0aW9uLmlzVGhlSG9zdCB8fFxuXHQgICAgXHRcdHZtLnZhbGlkYXRpb25zLmludml0YXRpb24uYWxyZWFkeUludml0ZWQgKSBcblx0ICAgIFx0XHRcdHJldHVybiB0cnVlO1xuXHQgICAgXHRlbHNlIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblxuXHQgICAgdm0uc3VibWl0R3Vlc3RJbnZpdGF0aW9uID0gZnVuY3Rpb24oKSB7XG5cdCAgICBcdFxuXHQgICAgXHQvL2lmIHRoZSByZXF1aXJubWVudHMgYXJlIGZ1bGZpbGxlZC4uLlxuXHQgICAgXHRpZih2bS5pbnZpdGF0aW9uVmFsaWRGb3JTdWJtaXNzaW9uKSB7XG5cdCAgICBcdFx0Ly9tYWtlIHN1cmUgdGhlIGludml0YXRpb24gaXMgbm90IHRvIHRoZSBjdXJyZW50IHVzZXJcblx0ICAgIFx0XHRpZihpbnZpdGF0aW9uTWFuYWdlci50aGlzSXNUaGVIb3N0RW1haWwodm0udGVtcEd1ZXN0LmVtYWlsLCAkcm91dGVQYXJhbXMuZXZlbnRJZCkpIHtcblx0XHRcdFx0XHR2bS52YWxpZGF0aW9ucy5pbnZpdGF0aW9uLmlzVGhlSG9zdCA9IHRydWU7XG5cdFx0XHRcdFx0dm0udmFsaWRhdGlvbnMuaW52aXRhdGlvbi5lcnJvck1lc3NhZ2UgPSAnTm8gbmVlZCB0byBpbnZpdGUgdGhlIGhvc3QnO1xuXHRcdFx0XHRcdHJldHVybiAwO1xuXHQgICAgXHRcdH0gZWxzZSB7XG5cdCAgICBcdFx0XHR2bS52YWxpZGF0aW9ucy5pbnZpdGF0aW9uLmlzVGhlSG9zdCA9IGZhbHNlO1xuXHQgICAgXHRcdH1cblx0ICAgIFx0XHRcblx0XHQgICAgXHQvL21ha2Ugc3VyZSB0aGlzIHBlcnNvbiBoYXMgbm90IGFscmVhZHkgYmVlbiBpbnZpdGVkXG5cdFx0ICAgIFx0Lypcblx0XHQgICAgXHRpZihpbnZpdGF0aW9uTWFuYWdlci5ndWVzdEludml0ZWRBbHJlYWR5KHZtLnRlbXBHdWVzdC5lbWFpbCwgJHJvdXRlUGFyYW1zLmV2ZW50SWQpKSB7XG5cdFx0ICAgIFx0XHR2bS52YWxpZGF0aW9ucy5pbnZpdGF0aW9uLmFscmVhZHlJbnZpdGVkID0gdHJ1ZTtcblx0XHRcdFx0XHR2bS52YWxpZGF0aW9ucy5pbnZpdGF0aW9uLmVycm9yTWVzc2FnZSA9ICdUaGlzIGd1ZXN0IGhhcyBhbHJlYWR5IGJlZW4gaW52aXRlZCc7XG5cdFx0XHRcdFx0cmV0dXJuIDA7XG5cdCAgICBcdFx0fSBlbHNlIHtcblx0ICAgIFx0XHRcdHZtLnZhbGlkYXRpb25zLmludml0YXRpb24uYWxyZWFkeUludml0ZWQgPSBmYWxzZTtcblx0ICAgIFx0XHR9Ki9cblxuXHQgICAgXHRcdC8vaWYgdGhpcyBwZXJzb24gaXMgYSByZWdpc3RlcmVkIHVzZXIgZ2V0IHRoZWlyIHVzZXIgaWRcblx0ICAgIFx0XHRpbnZpdGF0aW9uTWFuYWdlci5nZXRVc2VySWRGb3JHdWVzdCh2bS50ZW1wR3Vlc3QuZW1haWwpXG5cdCAgICBcdFx0LnRoZW4oZnVuY3Rpb24odWlkKSB7XG5cdCAgICBcdFx0XHRcblx0ICAgIFx0XHRcdHJldHVybiB1aWQ7XG5cdCAgICBcdFx0fSlcblx0ICAgIFx0XHQudGhlbihmdW5jdGlvbih1aWQpIHtcblx0ICAgIFx0XHRcdC8vdXNlIHRoYXQgdWlkIHRvIHJlZ2lzdGVyIHRoZSB1c2VyXG5cdCAgICBcdFx0XHQvL2FkZCB0aGUgcGVyc29uIHRvIHRoZSBob3N0J3MgTE9DQUwgZ3Vlc3QgbGlzdFxuXHQgICAgXHRcdFx0XG5cblx0ICAgIFx0XHRcdGlmKCFhbmd1bGFyLmlzT2JqZWN0KHZtLmd1ZXN0TGlzdCkpIHtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0dm0uZ3Vlc3RMaXN0ID0ge307XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vY3JlYXRlIHRoZSBndWVzdCB0byBzYXZlXG5cdFx0XHRcdFx0dmFyIGd1ZXN0QmVpbmdBZGRlZCA9IHZtLnRlbXBHdWVzdDtcblxuXHQgICAgXHRcdFx0dm0uZ3Vlc3RMaXN0W3VpZF0gPSBndWVzdEJlaW5nQWRkZWQ7XG5cblx0ICAgIFx0XHRcdHZtLnRlbXBHdWVzdCA9IHtcblx0XHRcdFx0ICAgIFx0bmFtZTogJycsXG5cdFx0XHRcdCAgICBcdGVtYWlsOiAnJyxcblx0XHRcdFx0ICAgIFx0c3RhdHVzOiAncGVuZGluZydcblx0XHRcdFx0ICAgIH07XG5cblx0ICAgIFx0XHR9KVxuXHQgICAgXHRcdC50aGVuKGZ1bmN0aW9uKCkge1xuXHQgICAgXHRcdFx0Ly9hZGQgdGhpcyBldmVudCB0byB0aGUgdXNlcnMnIHBlbmRpbmcgbGlzdFxuXHQgICAgXHRcdFx0LyppbnZpdGF0aW9uTWFuYWdlci51cGRhdGVQZW5kaW5nRXZlbnRzTGlzdEZvclVzZXIoKSovXG5cdCAgICBcdFx0fSlcblx0ICAgIFx0XHQudGhlbihmdW5jdGlvbigpIHtcblx0ICAgIFx0XHRcdC8vcmVtb3ZlIHRoZSAndXBkYXRlZCcgZmllbGQgaWYgbmVlZCBiZVxuXHQgICAgXHRcdH0pXG5cdCAgICBcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yTWVzc2FnZSkge1xuXHQgICAgXHRcdFx0Ly9hc3N1bWluZyBubyB1aWQgd2FzIGZvdW5kIGp1c3QgdXNlIHRoZSBlbWFpbFxuXHQgICAgXHRcdFx0JGxvZy5pbmZvKGVycm9yTWVzc2FnZSk7XG5cdCAgICBcdFx0XHRcblx0ICAgIFx0XHRcdC8vY3JlYXRlIHRoZSBlbWFpbElkXG5cdCAgICBcdFx0XHRpZEJ5RW1haWwgPSB1dGY4X3RvX2I2NCh2bS50ZW1wR3Vlc3QuZW1haWwpO1xuXHQgICAgXHRcdFx0Ly9hZGQgdGhpcyBwZXJzb24gdG8gdGhlIGhvc3QncyBndWVzdCBsaXN0XG5cdCAgICBcdFx0XHRpZighYW5ndWxhci5pc09iamVjdCh2bS5ndWVzdExpc3QpKSB7XG5cdCAgICBcdFx0XHRcdFxuXHRcdFx0XHRcdFx0dm0uZ3Vlc3RMaXN0ID0ge307XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vY3JlYXRlIHRoZSBndWVzdCB0byBzYXZlXG5cdFx0XHRcdFx0dmFyIGd1ZXN0QmVpbmdBZGRlZCA9IHZtLnRlbXBHdWVzdDtcblxuXHQgICAgXHRcdFx0dm0uZ3Vlc3RMaXN0W2lkQnlFbWFpbF0gPSBndWVzdEJlaW5nQWRkZWQ7XG5cblx0XHRcdCAgICBcdC8qaW52aXRhdGlvbk1hbmFnZXIuYWRkR3Vlc3RUb0hvc3RHdWVzdExpc3Qodm0udGVtcEd1ZXN0Lm5hbWUsIHZtLnRlbXBHdWVzdC5lbWFpbCwgdW5kZWZpbmVkLCAkcm91dGVQYXJhbXMuZXZlbnRJZCwgJHJvdXRlUGFyYW1zLnVpZClcblx0XHRcdCAgICBcdC50aGVuKGZ1bmN0aW9uKHBvc2l0aXZlUmVzdWx0KSB7XG5cdFx0XHQgICAgXHRcdCRsb2cuaW5mbygnZ290IHRoaXMgcmVzdWx0OiAnICsgcG9zaXRpdmVSZXN1bHQpO1xuXHRcdFx0ICAgIFx0fSlcblx0XHRcdCAgICBcdC50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdFx0ICAgIFx0XHQvL2FkZCB0aGlzIGV2ZW50IHRvIHRoZSBndWVzdCdzIHBlbmRpbmcgbGlzdFxuXHRcdFx0ICAgIFx0XHRpbnZpdGF0aW9uTWFuYWdlci51cGRhdGVQZW5kaW5nRXZlbnRzTGlzdEZvckd1ZXN0KCRyb3V0ZVBhcmFtcy5ldmVudElkKVxuXHRcdFx0ICAgIFx0fSlcblx0XHRcdCAgICBcdC50aGVuKGZ1bmN0aW9uKCkge1xuXHQgICAgXHRcdFx0Ly9yZW1vdmUgdGhlICd1cGRhdGVkJyBmaWVsZCBpZiBuZWVkIGJlXG5cdCAgICBcdFx0XHR9KVxuXHRcdFx0ICAgIFx0LmNhdGNoKGZ1bmN0aW9uKG5lZ2F0aXZlUmVzdWx0KSB7XG5cdFx0XHQgICAgXHRcdCRsb2cuaW5mbygnZ290IHRoaXMgcmVzdWx0OiAnICsgcG9zaXRpdmVSZXN1bHQpO1xuXHRcdFx0ICAgIFx0fSkqL1xuXG5cdFx0XHQgICAgXHR2bS50ZW1wR3Vlc3QgPSB7XG5cdFx0XHRcdCAgICBcdG5hbWU6ICcnLFxuXHRcdFx0XHQgICAgXHRlbWFpbDogJycsXG5cdFx0XHRcdCAgICBcdHN0YXR1czogJ3BlbmRpbmcnXG5cdFx0XHRcdCAgICB9IFxuXG5cdCAgICBcdFx0fSlcblx0ICAgIFx0XHRcblx0ICAgIFx0fVxuXHQgICAgXHRcblx0ICAgIH1cblxuXHRcdC8vYWN0aW9uc1xuXHRcdGluaXQoKTtcblxuXHR9XG5cblx0cmV0dXJuICBkaXJlY3RpdmU7XG5cdFx0XG59OyIsIi8qIEhvc3RlZEV2ZW50c0xpc3QuZGlyZWN0aXZlLmpzICovXG5cbi8qKlxuKiBAZGVzYyBkaXNwbGF5cyBhIGxpc3Qgb2YgYWxsIHRoZSBldmVudHMgdGhlIGN1cnJlbnQgdXNlciBpcyBob3N0aW5nLlxuKiBAZXhhbXBsZSA8aG9zdGVkLWV2ZW50cy1saXN0PjwvaG9zdGVkLWV2ZW50cy1saXN0PlxuKi9cblxuYW5ndWxhclxuXHQubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG5cdC5kaXJlY3RpdmUoJ2hvc3RlZEV2ZW50c0xpc3QnLCBob3N0ZWRFdmVudHNMaXN0KTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBob3N0ZWRFdmVudHNMaXN0KCkge1xuXHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdHJlc3RyaWN0OiAnQUVDTScsXG5cdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9kaXJlY3RpdmVzL2hvc3RlZEV2ZW50c0xpc3QuZGlyZWN0aXZlLmh0bScsXG5cdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRzY29wZToge1xuXHRcdFx0aG9zdGVkRXZlbnRzOiAnPScsXG5cdFx0XHR1c2VySWQ6ICc9J1xuXHRcdH0sXG5cdFx0bGluazogbGlua0Z1bmMsXG5cdFx0Y29udHJvbGxlcjogaG9zdGVkRXZlbnRzTGlzdENvbnRyb2xsZXIsXG5cdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0fVxuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHtcblx0XHRzY29wZS4kd2F0Y2goJ2hvc3RlZEV2ZW50cycsIGZ1bmN0aW9uKG5leHQsIGN1cnJlbnQpIHtcblx0XHRcdC8vc29tZXRoaW5nXG5cdFx0fSk7XG4gICAgfVxuXG4gICAgaG9zdGVkRXZlbnRzTGlzdENvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICd0cmFmZmljVmFsZXQnXTtcbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBob3N0ZWRFdmVudHNMaXN0Q29udHJvbGxlcigkbG9nLCB0cmFmZmljVmFsZXQpIHtcblx0ICAgIHZhciB2bSA9IHRoaXM7XG5cblx0ICAgIC8vbG9jYWwgdmFyaWFibGVzXG5cdCAgICB2YXIgaG9zdGVkRXZlbnRzU2hlcnBhID0gdHJhZmZpY1ZhbGV0O1xuXG5cdCAgICAvL3ZpZXcgbW9kZWwgdmFyaWFibGVzXG5cdCAgICB2bS5ndWVzdHNBcmVJbnZpdGVkID0gZmFsc2U7XG5cblx0ICAgIC8vbG9jYWwgbWV0aG9kc1xuXHQgICAgZnVuY3Rpb24gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKSB7XG5cdFx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gY291bnRHdWVzdHMobGlzdCkge1xuXHRcdFx0Ly9kZWNsYXJlIGxvY2FsIHZhcmlhYmxlXG5cdFx0XHR2YXIgY291bnRlciA9IDA7XG5cblx0XHRcdC8vaWYgd2UncmUgY291bnRpbmcsIHRoZW4gdGhlcmUncyBhIGxpc3QsIHNvIHRocm93IHRoZSBmbGFnXG5cdFx0XHR2bS5ndWVzdHNBcmVJbnZpdGVkID0gdHJ1ZTtcblxuXHRcdFx0T2JqZWN0LmtleXNbbGlzdF0uZm9yRWFjaChmdW5jdGlvbihndWVzdCkge1xuXHRcdFx0XHRjb3VudGVyKys7XG5cdFx0XHR9KVxuXG5cdFx0XHRyZXR1cm4gY291bnRlcjtcblx0XHR9XG5cblx0XHQvL3ZpZXcgbW9kZWwgbWV0aG9kc1xuXHRcdHZtLmZvcm1hdERhdGUgPSBmdW5jdGlvbih1bml4VGltZSkge1xuXHRcdFx0Ly9yZWZvcm1hdCB0aGUgdGltZVxuXHRcdFx0XG5cdFx0XHRyZXR1cm4gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKTtcblx0XHR9XG5cblx0XHR2bS5ndWVzdHNBdHRlbmRpbmcgPSBmdW5jdGlvbihndWVzdExpc3QpIHtcblx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGd1ZXN0TGlzdCkpIHtcblx0XHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoZ3Vlc3RMaXN0WydhdHRlbmRpbmcnXSkpIHJldHVybiBjb3VudEd1ZXN0cyhndWVzdExpc3RbJ2F0dGVuZGluZyddKTtcblx0XHRcdFx0ZWxzZSByZXR1cm4gMDtcblx0XHRcdH1cblx0XHRcdGVsc2UgcmV0dXJuIDA7XG5cdFx0fVxuXG5cdFx0dm0uZ3Vlc3RzSW52aXRlZCA9IGZ1bmN0aW9uKGd1ZXN0TGlzdCkge1xuXHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoZ3Vlc3RMaXN0KSkge1xuXHRcdFx0XHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0XHRcdHZhciBndWVzdENvdW50ID0geyBhdHRlbmRpbmc6IDAsIHBlbmRpbmc6IDAsIGRlY2xpbmVkOiAwIH07XG5cblx0XHRcdFx0Ly9sb2NhbCBtZXRob2RzXG5cdFx0XHRcdGZ1bmN0aW9uIHRvdGFsR3Vlc3RDb3VudCgpIHtcblx0XHRcdFx0XHRyZXR1cm4gZ3Vlc3RDb3VudC5hdHRlbmRpbmcgKyBndWVzdENvdW50LnBlbmRpbmcgKyBndWVzdENvdW50LmRlY2xpbmVkO1xuXHRcdFx0XHR9IFxuXG5cdFx0XHRcdC8vY2hlY2sgdmFsdWVzXG5cdFx0XHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGd1ZXN0TGlzdFsnYXR0ZW5kaW5nJ10pKSBndWVzdENvdW50LmF0dGVuZGluZyA9IGNvdW50R3Vlc3RzKGd1ZXN0TGlzdFsnYXR0ZW5kaW5nJ10pO1xuXHRcdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChndWVzdExpc3RbJ3BlbmRpbmcnXSkpIGd1ZXN0Q291bnQucGVuZGluZyA9IGNvdW50R3Vlc3RzKGd1ZXN0TGlzdFsncGVuZGluZyddKTtcblx0XHRcdFx0aWYoYW5ndWxhci5pc0RlZmluZWQoZ3Vlc3RMaXN0WydkZWNsaW5lZCddKSkgZ3Vlc3RDb3VudC5kZWNsaW5lZCA9IGNvdW50R3Vlc3RzKGd1ZXN0TGlzdFsnZGVjbGluZWQnXSk7XG5cblx0XHRcdFx0cmV0dXJuIHRvdGFsR3Vlc3RDb3VudCgpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSByZXR1cm4gMDtcblx0XHR9XG5cblx0XHR2bS5wZXJjZW50YWdlQXR0ZW5kaW5nID0gZnVuY3Rpb24oZ3Vlc3RMaXN0KSB7XG5cdFx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChndWVzdExpc3QpKSB7XG5cdFx0XHRcdHJldHVybiAoZ3Vlc3RzQXR0ZW5kaW5nKGd1ZXN0bGlzdCkgLyBndWVzdHNJbnZpdGVkKGd1ZXN0TGlzdCkpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSByZXR1cm4gMDtcblx0XHR9XG5cblx0XHR2bS5ldmVudENsaWNrZWQgPSBmdW5jdGlvbihldmVudElEKSB7XG5cdFx0XHQvL3JlZGlyZWN0IHRvIHRoZSBldmVudCBwYWdlXG5cdFx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIHRvOiAvZXZlbnQvJyArIGV2ZW50SUQgKyAnLycgKyB2bS5ob3N0ZWRFdmVudHNbZXZlbnRJRF0uaG9zdC51aWQgKyAnLycgKyB2bS51c2VySWQpO1xuXHRcdFx0aG9zdGVkRXZlbnRzU2hlcnBhLnJlZGlyZWN0VG8oJy9ldmVudCcsIGV2ZW50SUQsIHZtLmhvc3RlZEV2ZW50c1tldmVudElEXS5ob3N0LnVpZCwgdm0udXNlcklkKTtcblx0XHR9XG5cblx0XHR2bS5pbnZpdGVHdWVzdHMgPSBmdW5jdGlvbihldmVudElkKSB7XG5cdFx0XHRob3N0ZWRFdmVudHNTaGVycGEucmVkaXJlY3RUbygnL2V2ZW50L2hvc3QnLCBldmVudElkLCB2bS5ob3N0ZWRFdmVudHNbZXZlbnRJZF0uaG9zdC51aWQsICczJyk7XG5cdFx0fVxuXG5cdFx0Ly9hY3Rpb25zXG5cdH1cblxuXHRyZXR1cm4gIGRpcmVjdGl2ZTtcblx0XHRcbn07IiwiLyogSG9zdGVkRXZlbnRzUHJvZ3Jlc3NCYXIuZGlyZWN0aXZlLmpzICovXG5cbi8qKlxuKiBAZGVzYyBkaXNwbGF5cyBhIHVzZXJzIHByb2dyZXNzIHRocm91Z2ggdGhlIGV2ZW50cyBwYWdlLlxuKiBAZXhhbXBsZSA8aG9zdGVkLWV2ZW50cy1wcm9ncmVzcy1iYXI+PC9ob3N0ZWQtZXZlbnRzLXByb2dyZXNzLWJhcj5cbiovXG5cbmFuZ3VsYXJcblx0Lm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuXHQuZGlyZWN0aXZlKCdwcm9ncmVzc0JhcicsIHByb2dyZXNzQmFyKTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBwcm9ncmVzc0JhcigpIHtcbnJldHVybiB7XG4gICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgY3VyVmFsOiAnQCcsXG4gICAgICAgIG1heFZhbDogJ0AnXG4gICAgICB9LFxuICAgICAgdGVtcGxhdGU6IFwiPGRpdiBjbGFzcz0ncHJvZ3Jlc3MtYmFyJz5cIitcbiAgICAgICAgICAgICAgICAgIFwiPGRpdiBjbGFzcz0ncHJvZ3Jlc3MtYmFyLWJhcic+dGVzdGluZzwvZGl2PlwiK1xuICAgICAgICAgICAgICAgIFwiPC9kaXY+XCIsICAgIFxuXG4gICAgICBsaW5rOiBmdW5jdGlvbiAoJHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlUHJvZ3Jlc3MoKSB7XG4gICAgICAgICAgdmFyIHByb2dyZXNzID0gMDtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoJHNjb3BlLm1heFZhbCkge1xuICAgICAgICAgICAgcHJvZ3Jlc3MgPSBNYXRoLm1pbigkc2NvcGUuY3VyVmFsLCAkc2NvcGUubWF4VmFsKSAvICRzY29wZS5tYXhWYWwgKiBlbGVtZW50LmZpbmQoJy5wcm9ncmVzcy1iYXInKS53aWR0aCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBlbGVtZW50LmZpbmQoJy5wcm9ncmVzcy1iYXItYmFyJykuY3NzKCd3aWR0aCcsIHByb2dyZXNzKTsgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgICRzY29wZS4kd2F0Y2goJ2N1clZhbCcsIHVwZGF0ZVByb2dyZXNzKTtcbiAgICAgICAgJHNjb3BlLiR3YXRjaCgnbWF4VmFsJywgdXBkYXRlUHJvZ3Jlc3MpOyAgICAgICAgXG4gICAgICB9XG4gICAgfTsgIFxuIH07IiwiLyogSG9zdGVkR3Vlc3RMaXN0LmRpcmVjdGl2ZS5qcyAqL1xuXG4vKipcbiogQGRlc2MgZGlzcGxheXMgYSBsaXN0IG9mIGFsbCBndWVzdHMgaW52aXRlZCB0byBhbiBldmVudCB0aGlzIHVzZXIgaXMgaG9zdGluZy5cbiogQGV4YW1wbGUgPGhvc3RlZC1ndWVzdC1saXN0PjwvaG9zdGVkLWd1ZXN0LWxpc3Q+XG4qL1xuXG5hbmd1bGFyXG5cdC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcblx0LmRpcmVjdGl2ZSgnaG9zdGVkR3Vlc3RMaXN0JywgaG9zdGVkR3Vlc3RMaXN0KTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBob3N0ZWRHdWVzdExpc3QoKSB7XG5cdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0cmVzdHJpY3Q6ICdBRUNNJyxcblx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2RpcmVjdGl2ZXMvaG9zdGVkR3Vlc3RMaXN0LmRpcmVjdGl2ZS5odG0nLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0c2NvcGU6IHtcblx0XHRcdGd1ZXN0TGlzdDogJz0nLFxuXHRcdH0sXG5cdFx0bGluazogbGlua0Z1bmMsXG5cdFx0Y29udHJvbGxlcjogaG9zdGVkR3Vlc3RMaXN0Q29udHJvbGxlcixcblx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHR9XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCwgYXR0ciwgY3RybCkge1xuXHRcdHNjb3BlLiR3YXRjaCgnZ3Vlc3RMaXN0JywgZnVuY3Rpb24oKSB7XG5cdFx0XHRzY29wZS4kYXBwbHk7XG5cdFx0fSk7XG4gICAgfVxuXG4gICAgaG9zdGVkR3Vlc3RMaXN0Q29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJywgJyRyb3V0ZVBhcmFtcycsICd1c2VyRGF0YSddO1xuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIGhvc3RlZEd1ZXN0TGlzdENvbnRyb2xsZXIoJGxvZywgJHJvdXRlUGFyYW1zLCB1c2VyRGF0YSkge1xuXHQgICAgdmFyIHZtID0gdGhpcztcblxuXHQgICAgLy9sb2NhbCB2YXJpYWJsZXNcblx0ICAgIHZtLmlzQUd1ZXN0TGlzdCA9IGZhbHNlO1xuXG5cdCAgICAvL2xvY2FsIG1ldGhvZHNcblx0ICAgIGZ1bmN0aW9uIHRoZXJlSXNBR3Vlc3RMaXN0KCkge1xuXHQgICAgXHQvL2NoZWNrIGZvciBhIGd1ZXN0TGlzdCBvYmplY3Rcblx0ICAgIFx0aWYoYW5ndWxhci5pc0RlZmluZWQodm0uZ3Vlc3RMaXN0KSAmJiB2bS5ndWVzdExpc3QgIT0gJycpIHtcblx0ICAgIFx0XHR2bS5pc0FHdWVzdExpc3QgPSB0cnVlO1xuXHQgICAgXHRcdHJldHVybiB0cnVlO1xuXHQgICAgXHR9IGVsc2Uge1xuXHQgICAgXHRcdHZtLmlzQUd1ZXN0TGlzdCA9IGZhbHNlO1xuXHQgICAgXHRcdHJldHVybiBmYWxzZTtcblx0ICAgIFx0fVxuXHQgICAgfVxuXG5cdCAgICBmdW5jdGlvbiBpbml0KCkge1xuXHQgICAgXHQvL2xvY2FsIHZhcmlhYmxlc1xuXHQgICAgXHR2YXIgbGlzdENvbGxlY3RvciA9IHVzZXJEYXRhO1xuXG5cdCAgICBcdC8vaWYgdGhlcmUgaXNuJ3QgYSBndWVzdCBsaXN0LCBnbyBvdXQgdG8gdGhlIGRiIHRvIGdldCBpdFxuXG5cdFx0XHRpZighdGhlcmVJc0FHdWVzdExpc3QoKSkge1xuXHRcdFx0XHQkbG9nLmluZm8oJ2dvaW5nIGFmdGVyIHRoZSBsaXN0Jyk7XG5cdFx0XHRcdGxpc3RDb2xsZWN0b3IuZ2V0RXZlbnRHdWVzdExpc3QoJHJvdXRlUGFyYW1zLnVpZCwgJHJvdXRlUGFyYW1zLmV2ZW50SWQpXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKHJldHVybmVkTGlzdCkge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnZ290IHRoZSBsaXN0Jyk7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKHJldHVybmVkTGlzdCk7XG5cdFx0XHRcdFx0dm0uZ3Vlc3RMaXN0ID0gcmV0dXJuZWRMaXN0O1xuXHRcdFx0XHRcdGlmKGFuZ3VsYXIuaXNPYmplY3QocmV0dXJuZWRMaXN0KSkgdm0uaXNBR3Vlc3RMaXN0ID0gdHJ1ZTtcblx0XHRcdFx0fSlcblx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7IFxuXHRcdFx0XHRcdCRsb2cuaW5mbygnVGhlcmUgd2FzIGFuIGVycm9yOiAnKyBlcnJvcik7XG5cdFx0XHRcdH0pXG5cdFx0XHR9XG5cdCAgICB9XG5cdCAgICAvL3ZtIG1ldGhvZHNcblxuXHRcdC8vYWN0aW9uc1xuXHRcdGluaXQoKTtcblxuXHR9XG5cblx0cmV0dXJuICBkaXJlY3RpdmU7XG5cdFx0XG59OyIsIi8qIFRvb2xCYXIuZGlyZWN0aXZlLmpzICovXG5cbi8qKlxuKiBAZGVzYyB0b29sYmFyIGRpcmVjdGl2ZSB0aGF0IGlzIHVzZWQgb24gdGhlIG1haW4gcGFnZSBhY3Jvc3MgdGhlIGVudGlyZSBhcHAuXG4qIEBleGFtcGxlIDxkaXYgdG9vbC1iYXI+PC9kaXY+XG4qL1xuXG5hbmd1bGFyXG5cdC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcblx0LmRpcmVjdGl2ZSgndG9vbEJhcicsIHRvb2xCYXIpO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHRvb2xCYXIoKSB7XG5cdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0cmVzdHJpY3Q6ICdBRUNNJyxcblx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2RpcmVjdGl2ZXMvdG9vbEJhci5kaXJlY3RpdmUuaHRtJyxcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdHNjb3BlOiB7fSxcblx0XHRsaW5rOiBsaW5rRnVuYyxcblx0XHRjb250cm9sbGVyOiBUb29sQmFyQ29udHJvbGxlcixcblx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHR9XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCwgYXR0ciwgY3RybCkge1xuICAgIH1cblxuICAgIFRvb2xCYXJDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJywgJ2JhY2tlbmRTZXJ2aWNlcycsICd0cmFmZmljVmFsZXQnXTtcbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBUb29sQmFyQ29udHJvbGxlcigkc2NvcGUsICRsb2csIGJhY2tlbmRTZXJ2aWNlcywgdHJhZmZpY1ZhbGV0KSB7XG5cdCAgICB2YXIgdm0gPSB0aGlzO1xuXG5cdCAgICAvL2xvY2FsIGNvbnRyb2xlciB2YXJpYWJsZXNcblx0ICAgIHZhciBmYkNvbm5lY3QgPSBiYWNrZW5kU2VydmljZXM7XG5cdCAgICB2YXIgdG9vbGJhclNoZXJwYSA9IHRyYWZmaWNWYWxldDtcblxuXHQgICAgLy9sb2NhbCB2aWV3IHZhcmlhYmxlc1xuXHRcdGZ1bmN0aW9uIGNoZWNrTG9naW5TdGF0dXMoKSB7XG5cblx0XHRcdGZiQ29ubmVjdC5jaGVja0xvZ2luU3RhdHVzKClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKHN0YXR1cykge1xuXHRcdFx0XHRcblx0XHRcdFx0dm0ubG9nZ2VkSW4gPSBzdGF0dXM7XG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKClcblx0XHR9XG5cblx0XHQvL3ZtIG1ldGhvZHNcblx0XHR2bS5sb2dpbiA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0fVxuXG5cdFx0dm0ubG9nb3V0ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2xvZ2dpbmcgb3V0Jyk7XG5cdFx0XHRcblx0XHRcdC8vbG9nb3V0XG5cdFx0XHRmYkNvbm5lY3QubG9nVXNlck91dCgpO1xuXHRcdFx0XG5cdFx0XHQvL3JlZGlyZWN0XG5cdFx0XHR0b29sYmFyU2hlcnBhLnJlZGlyZWN0VG8oJy9sb2dpbicpO1xuXHRcdH1cblxuXHRcdHZtLmxvZ2luUmVnaXN0ZXJlZFVzZXIgPSBmdW5jdGlvbigpIHtcblx0XHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRcdHZhciByZWdpc3RlcmVkVXNlclNoZXJwYSA9IHRyYWZmaWNWYWxldDtcblxuXHRcdFx0Ly9jb25maXJtIGFsbCBmaWVsZHMgYXJlIHZhbGlkXG5cdFx0XHRpZih0cnVlKSB7XG5cdFx0XHRcdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRcdFx0dmFyIGRhdGFiYXNlID0gYmFja2VuZFNlcnZpY2VzO1xuXHRcdFx0XHR2YXIgcmVnaXN0ZXJlZFVzZXJEYXRhID0gdXNlckRhdGE7XG5cblx0XHRcdFx0Ly92ZXJpZnkgdXNlcnMgY3JlZGVudGlhbHNcblx0XHRcdFx0ZGF0YWJhc2UuTG9naW5SZWdpc3RlcmVkVXNlcih2bS5lbWFpbCwgdm0ucGFzc3dvcmQpXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKHVzZXJDcmVkZW50aWFscykge1xuXHRcdFx0XHRcdC8vaWYgbm8gdHJvdWJsZSBsb2dnaW5nIGluIHVwZGF0ZSBlcnJvciBvYmplY3Rcblx0XHRcdFx0XHQvL3ZtLmVycm9ycy5wYXNzZXNBbGxUZXN0cyA9IHRydWU7XG5cdFx0XHRcblx0XHRcdFx0XHQvL2FkZCBwcmltYXJ5IGluZm9ybWF0aW9uIHRvIGxvY2FsIG1vZGVsXG5cdFx0XHRcdFx0Ly9yZWdpc3RlcmVkVXNlckRhdGEuc2V0UHJpbWFyaWVzTG9jYWxseSh1c2VyQ3JlZGVudGlhbHMuZW1haWwsIHVzZXJDcmVkZW50aWFscy5uYW1lLCB1c2VyQ3JlZGVudGlhbHMudWlkKTtcblx0XHRcdFx0XHRyZXR1cm4gdXNlckNyZWRlbnRpYWxzLnVpZFxuXHRcdFx0XHR9KVxuXHRcdFx0XHQudGhlbihmdW5jdGlvbih1aWQpIHtcblxuXHRcdFx0XHRcdGRhdGFiYXNlLmdldFVzZXJCaW8odWlkKVxuXHRcdFx0XHRcdC50aGVuKGZ1bmN0aW9uKHVzZXJCaW8pIHtcblx0XHRcdFx0XHRcdC8vdXBkYXRlIHVzZXJEYXRhIG1vZGVsIHdpdGggdXNlckJpb1xuXHRcdFx0XHRcdFx0cmVnaXN0ZXJlZFVzZXJEYXRhLnVwZGF0ZUJpb0xvY2FsbHkodXNlckJpbyk7XG5cblx0XHRcdFx0XHRcdC8vbG9hZCB1c2VyIGV2ZW50c1xuXHRcdFx0XHRcdFx0ZGF0YWJhc2UuZ2V0VXNlckV2ZW50cyh1aWQpXG5cdFx0XHRcdFx0XHQudGhlbihmdW5jdGlvbihhbGxFdmVudHNGb3JUaGlzVXNlcikge1xuXHRcdFx0XHRcdFx0XHQvL3VwZGF0ZSB1c2VyRGF0YSBtb2RlbCB3aXRoIHVzZXJFdmVudHNcblx0XHRcdFx0XHRcdFx0cmVnaXN0ZXJlZFVzZXJEYXRhLnVwZGF0ZUFsbFVzZXJFdmVudHNMb2NhbGx5KGFsbEV2ZW50c0ZvclRoaXNVc2VyKTtcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyAkbG9nLmluZm8obWVzc2FnZSk7IH0pXG5cblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdC5jYXRjaChmdW5jdGlvbihtZXNzYWdlKSB7ICRsb2cuaW5mbyhtZXNzYWdlKTsgfSlcblxuXHRcdFx0XHRcdC8vcmVkaXJlY3QgdG8gdGhlIG5leHQgcGFnZSBcblx0XHRcdFx0XHRyZWdpc3RlcmVkVXNlclNoZXJwYS5yZWRpcmVjdFRvKCcvdXNlckluZm9ybWF0aW9uJywgdWlkKTtcblxuXHRcdFx0XHR9KVxuXHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24obWVzc2FnZSkgeyBcblx0XHRcdFx0XHQvL2lmIHRoZXJlIHdhcyBhbiBlcnJvciBsb2dnaW5nIGluLCBsZXQgdGhlIHVzZXIga25vd1xuXHRcdFx0XHRcdC8vdm0uZXJyb3JzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuXHRcdFx0XHRcdC8vdm0uZXJyb3JzLnBhc3Nlc0FsbFRlc3RzID0gZmFsc2U7XG5cdFx0XHRcdH0pXG5cblx0XHRcdFx0Ly91c2UgdWlkIHRvIGNvbGxlY3QgdXNlciBiaW9cblx0XHRcdFx0XG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHQvL2FjdGlvbnNcblx0XHRjaGVja0xvZ2luU3RhdHVzKCk7XG5cblx0XHQvL3dhdGNoZXJzXG5cdFx0JHNjb3BlLiRvbignJHJvdXRlQ2hhbmdlU3RhcnQnLCBmdW5jdGlvbihuZXh0LCBjdXJyZW50KSB7XG5cdFx0XHRcblx0XHRcdGNoZWNrTG9naW5TdGF0dXMoKTtcblx0XHR9KVxuXHR9XG5cblx0cmV0dXJuICBkaXJlY3RpdmU7XG5cdFx0XG59OyIsImFuZ3VsYXJcblx0Lm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnLCBbXG5cdFx0J25nUm91dGUnLFxuXHRcdCduZ1RvdWNoJyxcblx0XHQnZmlyZWJhc2UnXG5cdF0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
