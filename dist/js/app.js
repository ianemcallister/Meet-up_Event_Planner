function AnEventController(e,n,t,r,o){function a(){p.tempDateTime={start:"",end:""},p.newGuest={name:"",email:{address:"",valid:!1,style:{color:""}}},p.showIfHost=!1,p.hideIfAttending=!0,p.manageSections={1:{active:!0,complete:!1,style:{color:"black","background-color":"yellow"}},2:{active:!1,complete:!1,style:{color:"white","background-color":"gray"}},3:{active:!1,complete:!1,style:{color:"white","background-color":"gray"}}},v(),f(),p.showIfHost||g()}function s(e){return btoa(e)}function l(e){return atob(e)}function d(e){return Date.parse(e)}function u(){p.newGuest={name:"",email:{address:"",valid:!1,style:{color:""}}}}function c(e){n.info("adding them to the registered users list "+e),w.child("Users").child(e).child("events").child("pending").child(r.uid).child(r.eventId).set({id:r.eventId,eventTimes:{start:p.event.eventTimes.start,end:p.event.eventTimes.end},name:p.event.name,host:r.uid},function(e){e&&n.info("there was an error"+e)}),w.child("Users").child(e).child("events").child("pending").once("value",function(t){var i=t.val();n.info(t.val()),i.updated?(n.info("deleting updated"),w.child("Users").child(e).child("events").child("pending").child("updated").remove(function(e){e&&n.info("Deleting failed: "+e.code)})):n.info("nothing to do")},function(e){e&&n.info("The read failed: "+e.code)})}function m(e){n.info("adding them to the UNREGISTERED users list "+e),w.child("UnregisteredUsers").child(e).child("pending").child(r.uid).child(r.eventId).set({id:r.eventId,host:r.uid,eventTimes:{start:p.event.eventTimes.start,end:p.event.eventTimes.end},name:p.event.name},function(e){e&&n.info("there was an error"+e)})}function v(){var e=w.getAuth();e.uid==r.hostId?(n.info("is the host"),p.showIfHost=!0):(n.info("not the host"),p.showIfHost=!1)}function f(){p.showIfHost||(n.info("check guest attendance"),U.child("guestList").on("value",function(e){var n=e.val();p.hideIfAttending=!n[r.uid].attending}))}function g(){p.manageSections[1].active=!0,p.manageSections[2].active=!0,p.manageSections[3].active=!0}var p=this,h="https://meetupplanner.firebaseio.com/",w=new Firebase(h),U=w.child("Users").child(r.hostId).child("events").child("hosting").child(r.eventId);p.event=o(U);var y=o(w.child("Uids"));p.requiredInputs=["","","","","","","","",""],p.setTempTime=function(e){"start"==e&&(p.tempDateTime.start=new Date),"end"==e&&(p.tempDateTime.end=new Date)},p.unixTimeToDateTime=function(e){return new Date(parseInt(e))},p.dateTimeToUnixTime=function(e){return Date.parse(e)},p.submit=function(){n.info("submitting the form now!")},p.backToUserEvents=function(){t.path("/userEvents/"+r.uid+"/"+r.token)},p.eventRedirect=function(e,i){var o=e+"/"+r.uid+"/"+r.token;n.info("redirecting to: "+o),t.path(o)},p.changeSection=function(e){for(n.info("are we here"),i=1;i<=3;i++)i==e?(p.manageSections[i].active=!0,p.manageSections[i].style["background-color"]="yellow",p.manageSections[i].style.color="black"):(p.manageSections[i].active=!1,p.manageSections[i].style["background-color"]="gray",p.manageSections[i].style.color="white")},p.saveEventTime=function(e,n){p.event.eventTimes||(p.event.eventTimes={start:"",end:""},p.event.eventTimes.start=p.dateTimeToUnixTime(p.tempDateTime.start),p.event.eventTimes.end=p.dateTimeToUnixTime(p.tempDateTime.end)),p.tempDateTime.end<p.tempDateTime.start&&"start"==n&&(p.tempDateTime.end=p.tempDateTime.start),"start"==n&&(p.event.eventTimes.start=p.dateTimeToUnixTime(e)),"end"==n&&(p.event.eventTimes.end=p.dateTimeToUnixTime(e))},p.guestsAreInvited=function(){return!!p.event.guestList},p.validateGuestEmail=function(){if(p.newGuest.email.address){var e=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","");e.test(p.newGuest.email.address)?(p.newGuest.email.valid=!0,p.newGuest.email.style={color:"green"}):(p.newGuest.email.valid=!1,p.newGuest.email.style={color:""})}},p.isSectionComplete=function(){for(i=0;i<8;i++)n.info(p.requiredInputs[i])},p.saveAndAdvance=function(){p.event.$save().then(function(){n.info("event saved")})["catch"](function(e){n.info("error! "+e)}),p.isSectionComplete(),1==p.manageSections[1].complete&&1==p.manageSections[2].complete&&1==p.manageSections[3].complete?p.eventRedirect("/userEvents",r.uid):p.manageSections[1].active?p.changeSection(2):p.manageSections[2].active?p.changeSection(3):p.manageSections[3].active&&p.changeSection(1)},p.addGuestToHostsList=function(){var e=s(p.newGuest.email.address);if(p.newGuest.name&&p.newGuest.email.valid){if(p.event.guestList)for(var t=0;p.event.guestList[t];){if(p.event.guestList[t].email==l(e))return n.info("This guest is already on the list"),void u();t++}else p.event.guestList={};if(y[e]){if(y[e]==r.uid)return n.info("tried to register the host"),void u();c(y[e]),p.event.guestList[y[e]]={attending:!1,status:"pending",name:p.newGuest.name,email:p.newGuest.email.address}}else m(e),p.event.guestList[e]={attending:!1,status:"pending",name:p.newGuest.name,email:p.newGuest.email.address};p.saveEvent(),u()}else n.info("you didn't enter a name and or email")},p.guestWillAttend=function(e){var t=w.child("Users").child(r.uid).child("events"),i=0,o=!1;if(p.event.guestList[r.uid].attending=e,p.event.guestList[r.uid].status="attending",t.child("pending").on("value",function(o){var a=o.val();n.info(a),n.info(a[r.hostId]),n.info(a[r.hostId][r.eventId]);var s=a[r.hostId][r.eventId];n.info(s);for(invitation in a)i++;n.info("total attending: "+i),e&&t.child("attending").child(r.hostId).child(r.eventId).set(s,function(e){e&&n.info(e)})}),t.child("attending").on("value",function(e){var t=e.val();n.info("this is the attending list"),n.info(t),t.updated&&(o=!0)},function(e){e&&n.info(e)}),2>i){var a=new Date;t.child("pending").update({updated:d(a)},function(e){e&&n.info(e)})}t.child("pending").child(r.hostId).remove(),o&&n.info("removing the updated placeholder"),p.event.$save()},p.updateUpdatedParam=function(){var e=w.child("Users").child(r.uid).child("events");n.info("updating the param"),e.child("attending").on("value",function(e){n.info(e.val())}),e.child("attending").child("updated").remove()},p.addInvitationToAttending=function(e){var t=w.child("Users").child(r.uid).child("events"),i=0;t.child("pending").on("value",function(o){var a=o.val(),s=a[r.hostId][r.eventId];n.info(a),n.info(a[r.hostId]),n.info(a[r.hostId][r.eventId]);for(invitation in a)i++;n.info("total pending invitations: "+i),n.info(e),e&&t.child("attending").child(r.hostId).child(r.eventId).set(s,function(e){e&&n.info(e)})})},a()}function LandingPageController(e,n,t,r,o){function a(e){return btoa(e)}function s(e){return Date.parse(e)}function l(i,r){var o=i+"/"+c.uid+"/"+c.token;n.info("redirecting to: "+o),t.path(o),e.$apply()}var d=this,u="https://meetupplanner.firebaseio.com/",c={};d.showRequirnments=!1,d.validNewName={valid:!1,style:{color:""}},d.validNewEmail={valid:!1,style:{color:""}},d.securePassword={secure:!1,style:{color:""}},d.unlockCreateUserBtn={usable:!1,"class":"btn btn-warning"},d.message="testing",d.validUserEmail={valid:!1,style:{color:""}},d.validUserPassword={valid:!1,style:{color:""}},d.unclockUserLoginBtn={usable:!1,"class":"btn btn-warning"},d.passwordRequirnments={0:{constraint:"Is at least 16 characters long",style:{color:"red"},met:!1},1:{constraint:"Is no longer than 100 characters",style:{color:"red"},met:!1},2:{constraint:"Contains at least one required symbol (!@#$%^&*)",style:{color:"red"},met:!1},3:{constraint:"Contains at least one number",style:{color:"red"},met:!1},4:{constraint:"Contains at least one lowercase letter",style:{color:"red"},met:!1},5:{constraint:"Contains at least one uppercase letter",style:{color:"red"},met:!1},6:{constraint:"Doesn't have any illegal characters",style:{color:"red"},met:!1}},d.displayPassReqs=function(){d.newName&&d.newEmail?d.showRequirnments=!0:d.showRequirnments=!1},d.checkNewName=function(){d.newName&&(d.newName.length>0?(d.validNewName.valid=!0,d.validNewName.style={color:"green"}):(d.validNewName.valid=!1,d.validNewName.style={color:"red"})),d.openCreateUserButton()},d.checkNewEmail=function(){if(d.newEmail){var e=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","");e.test(d.newEmail)?(d.validNewEmail.valid=!0,d.validNewEmail.style={color:"green"}):(d.validNewEmail.valid=!1,d.validNewEmail.style={color:"red"})}d.openCreateUserButton()},d.checkUserEmail=function(){if(d.userEmail){var e=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","");e.test(d.userEmail)?(d.validUserEmail.valid=!0,d.validUserEmail.style={color:"green"}):(d.validUserEmail.valid=!1,d.validUserEmail.style={color:"red"})}d.openUserLoginBtn()},d.checkNewPasswords=function(){var e={0:[""," your password needs to be 16 characters or longer"],1:[""," your password needs to be less than 100 characters"],2:["[!@#$%^&*]"," no required symbols found"],3:["[0-9]"," no numbers found"],4:["[a-z]"," no lowercase letters found"],5:["[A-Z]"," no uppercase letters found"],6:["[^A-z0-9!@#$%^&*]"," illegal characters found"]};if(d.newPassword){for(d.newPassword.length>15?(d.passwordRequirnments[0].style={color:"green"},d.passwordRequirnments[0].met=!0):(d.passwordRequirnments[0].style={color:"red"},d.passwordRequirnments[0].met=!1),d.newPassword.length<=100?(d.passwordRequirnments[1].style={color:"green"},d.passwordRequirnments[1].met=!0):(d.passwordRequirnments[1].style={color:"red"},d.passwordRequirnments[1].met=!1),i=2;i<6;i++){var n=new RegExp(e[i][0],"");n.test(d.newPassword)?(d.passwordRequirnments[i].style={color:"green"},d.passwordRequirnments[i].met=!0):(d.passwordRequirnments[i].style={color:"red"},d.passwordRequirnments[i].met=!1)}var n=new RegExp(e[6][0],"");n.test(d.newPassword)?(d.passwordRequirnments[6].style={color:"green"},d.passwordRequirnments[6].met=!0):(d.passwordRequirnments[6].style={color:"red"},d.passwordRequirnments[6].met=!1),d.passwordRequirnments[0].met&&d.passwordRequirnments[1].met&&d.passwordRequirnments[2].met&&d.passwordRequirnments[3].met&&d.passwordRequirnments[4].met&&d.passwordRequirnments[5].met&&d.passwordRequirnments[6].met?d.securePassword.secure=!0:d.securePassword.secure=!1,d.securePassword.secure?d.securePassword.style={color:"green"}:d.securePassword.style={color:"red"}}d.openCreateUserButton()},d.checkUserPasswords=function(){d.userPassword&&(d.userPassword.length>15?(d.validUserPassword.style={color:"green"},d.validUserPassword.valid=!0):(d.validUserPassword.style={color:"red"},d.validUserPassword.valid=!1)),d.openUserLoginBtn()},d.openCreateUserButton=function(){d.validNewName.valid&&d.validNewEmail.valid&&d.securePassword.secure?(d.unlockCreateUserBtn["class"]="btn btn-success",d.unlockCreateUserBtn.usable=!0):(d.unlockCreateUserBtn["class"]="btn btn-warning",d.unlockCreateUserBtn.usable=!1)},d.openUserLoginBtn=function(){d.validUserEmail.valid&&d.validUserPassword.valid?(d.unclockUserLoginBtn["class"]="btn btn-success",d.unclockUserLoginBtn.usable=!0):(d.unclockUserLoginBtn["class"]="btn btn-warning",d.unclockUserLoginBtn.usable=!1)},d.update=function(){d.newName=r.find("#newName")[0].value,d.newEmail=r.find("#newEmail")[0].value,d.userEmail=r.find("#userEmail")[0].value,d.checkNewName(),d.checkNewEmail(),d.checkUserEmail()},d.createNewUser=function(){if(n.info("Creating a new user account now!"),d.unlockCreateUserBtn.usable){var e=new Firebase(u);e.createUser({email:d.newEmail,password:d.newPassword},function(t,i){if(t)n.info("Error creating user: "+t);else{n.info(i),c=i;var r=e.child("Users/"+i.uid),o=new Date;r.set({bio:{name:d.newName,email:d.newEmail},events:{pending:{updated:s(o)},hosting:{updated:s(o)},attending:{updated:s(o)},completed:{updated:s(o)}}},function(e){e?n.info("Data could not be saved: "+e):n.info("Data saved successfully.")}),e.child("Uids").child(a(d.newEmail)).set(c.uid,function(e){e?n.info("Data could not be saved. "+e):n.info("uid created sucessfully.")}),l("/userInformation",c)}})}},d.loginRegisteredUser=function(){if(d.unclockUserLoginBtn.usable){var t=new Firebase(u);t.authWithPassword({email:d.userEmail,password:d.userPassword},function(t,i){t?n.info("Error Logging In: "+t):(n.info("Logged In successfully: "+i.uid),n.info(i),c=i,l("/userInformation",c),e.$apply())})}},d.alertMe=function(){alert("this is working! an alert!")},d.onResizeFunction=function(){var e=angular.element(".inputText");o.outerWidth>o.outerHeight?(e.css("font-size","2em"),n.info("making bigger")):e.css("font-size","1.2em")},"addEventListener"in r&&r.addEventListener("DOMContentLoaded",function(){n.info("adding FastClick"),FastClick.attach(r.body)},!1),angular.element(o).bind("resize",function(){d.onResizeFunction()}),angular.element(r).ready(function(){o.outerWidth<600&&d.onResizeFunction()}),d.master={},d.update=function(e){d.master=angular.copy(e)},d.reset=function(e){e&&(e.$setPristine(),e.$setUntouched()),d.user=angular.copy(d.master)},d.reset()}function MainController(e,n,t){var i=this,r="https://meetupplanner.firebaseio.com/",o=new Firebase(r);i.logout=function(){alert("logging you out!"),o.unauth(),n.path("/")},"addEventListener"in t&&t.addEventListener("DOMContentLoaded",function(){e.info("adding FastClick"),FastClick.attach(t.body)},!1)}function NewUserSignUpController(e,n,t){function r(){""!=o.errors.name||""!=o.errors.email||o.errors.password?o.errors.passesAllTests=!1:o.errors.passesAllTests=!0,angular.isDefined(o.inputs.newName)&&""!==o.inputs.newName&&angular.isDefined(o.inputs.newEmail)&&""!==o.inputs.newEmail&&angular.isDefined(o.inputs.newPassword)&&""!==o.inputs.newPassword?o.inputs.allFieldsDefined=!0:o.inputs.allFieldsDefined=!1}var o=this;o.inputs={newName:"",newEmail:"",newPassword:"",allFieldsDefined:!1},o.errors={name:"",email:"",password:!1,passesAllTests:!1},o.passReqs={0:{id:"",req:"Is at least 16 characters long",fulfilled:!1,style:{color:"red"}},1:{id:"",req:"Is no longer than 100 characters",fulfilled:!1,style:{color:"red"}},2:{id:"",req:"Contains at least one lowercase letter",fulfilled:!1,style:{color:"red"}},3:{id:"",req:"Contains at least one uppercase letter",fulfilled:!1,style:{color:"red"}},4:{id:"",req:"Contains at least one number",fulfilled:!1,style:{color:"red"}},5:{id:"",req:"Contains at least one required symbol (!@#$%^&*)",fulfilled:!1,style:{color:"red"}},6:{id:"",req:"Doesn't have any illegal characters",fulfilled:!0,style:{color:"red"}}},o.showReqsBox=!1;var a=t;o.checkNewName=function(){var e=[],n=a.required(o.inputs.newName),t=a.minNameLength(o.inputs.newName);angular.isDefined(n)&&e.push(n),angular.isDefined(t)&&e.push(t),e.length>0?o.errors.name=e.join(", "):o.errors.name="",r()},o.checkNewEmail=function(){var e=[],n=a.required(o.inputs.newEmail),t=a.email(o.inputs.newEmail);angular.isDefined(n)&&e.push(n),angular.isDefined(t)&&e.push(t),e.length>0?o.errors.email=e.join(", "):o.errors.email="",r()},o.checkNewPassword=function(){o.showReqsBox=!0;var e=[],n=a.required(o.inputs.newPassword),t=[a.minPassLength(o.inputs.newPassword),a.maxPassLength(o.inputs.newPassword),a.atLeastOneLowercase(o.inputs.newPassword),a.atLeastOneUppercase(o.inputs.newPassword),a.atLeastOneNumber(o.inputs.newPassword),a.atLeastOneSymbol(o.inputs.newPassword),a.illegalCharacter(o.inputs.newPassword)];angular.isDefined(n)&&e.push(n),e.length>0?o.errors.password=e.join(", "):o.errors.email="";var s=!1;for(i=0;i<7;i++)t[i]?(o.passReqs[i].fulfilled=!0,o.passReqs[i].style={color:"green"}):(o.passReqs[i].fulfilled=!1,o.passReqs[i].style={color:"red"},s=!0);o.errors.password=s,r()},o.exitPassword=function(){o.checkNewPassword(),o.showReqsBox=!1},o.createNewUser=function(){n.info("creating a new user")}}function topMenuController(e,n,t,i,r){function o(e){e?(n.info("User "+e.uid+" is logged in with "+e.provider),s.loggedIn=!0):(n.info("User is logged out"),s.loggedIn=!1)}function a(e,i){var r=e+"/"+i.uid+"/"+i.token;n.info("redirecting to: "+r),t.path(r)}var s=this,l="https://meetupplanner.firebaseio.com/",d=new Firebase(l);s.loggedIn=!1,"addEventListener"in i&&i.addEventListener("DOMContentLoaded",function(){n.info("adding FastClick"),FastClick.attach(i.body)},!1),angular.element(r).bind("resize",function(){s.onResizeFunction(),e.$apply()}),angular.element(i).ready(function(){r.outerWidth<600&&(s.onResizeFunction(),e.$apply())}),s.logout=function(){n.info("logging out!"),s.loggedIn=!1,d.unauth(),a("/",{uid:"",token:""})},s.navBarLoginRegisteredUser=function(){n.info("launching login");var t=new Firebase(l);t.authWithPassword({email:s.navbarUserEmail,password:s.navbarUserPass},function(t,i){t?n.info("Error Logging In: "+t):(n.info("Logged In successfully: "+i.uid),n.info(i),a("/userInformation",i),e.$apply(),angular.element(".navbar-toggle").click())})},s.onResizeFunction=function(){var e=angular.element(".navbarInputs");e.css("width",r.outerWidth-26+"px")},d.onAuth(o)}function UserEventsController(e,n,t,i,r){function o(e){return Date.parse(e)}function a(e,n){return 10*e+n}function s(e,r,o){var a=e+"/"+r+"/"+o+"/"+i.uid+"/"+i.token;n.info("redirecting to: "+a),t.path(a)}var l=this,d="https://meetupplanner.firebaseio.com/",u=new Firebase(d),c=u.child("Users").child(i.uid).child("events"),m=u.child("Users").child(i.uid).child("bio");l.events=r(c),l.showDecline=!1,m.child("name").on("value",function(t){l.currentUserName=t.val(),n.info("got the user name"),e.$apply()},function(e){n.info("The read failed: "+e.code)}),l.eventsAreBeingHosted=function(){var e=!1;for(element in l.events.hosting)"updated"!=element&&(e=!0);return e},l.eventInvitationsPending=function(){var e=!1;for(element in l.events.pending)"updated"!=element&&(e=!0);return e},l.attendingEvents=function(e){var n=!1;for(element in l.events.attending)"updated"!=element&&(n=!0);return n},l.percentRSVPed=function(e){return e?l.totalAttending(e)/l.totalInvited(e)*100:0},l.totalAttending=function(e){if(e){var n=0;return angular.forEach(e,function(e,t){1==e.attending&&n++}),n}return 0},l.totalInvited=function(e){if(e){var n=0;return angular.forEach(e,function(e,t){n++}),n}return 0},l.acceptEventInvitation=function(e){},l.redirectToHostedEvent=function(e){n.info("you're accessing event "+e),s("/event",e,i.uid)},l.redirectTo3rdPartyEvent=function(e,t){n.info(e),"pending"==t?(n.info("accessing from a pending invitation"),n.info(e),s("/event",e.id,e.host)):"attending"==t&&(n.info("accessing from an rsvped invitation"),s("/event",e.id,e.host))},l.createNewEvent=function(){n.info("you're creating a new event!");var e=new Date;l.events.hosting?noOfEventsAlready=Object.keys(l.events.hosting).length:noOfEventsAlready=0;var t=a(o(e),noOfEventsAlready);l.events.hosting[t]={id:t,eventTimes:{start:o(e),end:o(e)},host:{id:i.uid,name:l.currentUserName}},(""==l.events.hosting.updated||l.events.hosting.updated)&&(n.info("deleting the updated field"),delete l.events.hosting.updated),s("/event",t,i.uid)},n.info("into the user Events controller"),n.info(l.events)}function UserInformationController(e,n,t,i){function r(){}function o(e){return new Date(parseInt(e))}function a(e){return Date.parse(e)}function s(i){var r=i+"/"+t.uid+"/"+t.token;e.info("redirecting to: "+r),n.path(r)}var l=this,d="https://meetupplanner.firebaseio.com/",u=new Firebase(d),c=u.child("Users").child(t.uid).child("bio");l.user=i(c),r(),l.proceedBtn="btn btn-primary",l.btnMssg="Move On...",l.dataToSave=!1,l.isData=!1,l.user.$loaded().then(function(){l.user.birthday?l.tempBirthday=o(l.user.birthday):l.tempBirthday=new Date}),l.checkValues=function(){!angular.isUndefined(l.user.employer)&&""!==l.user.employer||!angular.isUndefined(l.user.jobTitle)&&""!==l.user.jobTitle||!angular.isUndefined(l.user.birthday)&&""!==l.user.birthday?(l.dataToSave=!0,l.proceedBtn="btn btn-success",l.btnMssg="Save & Continue"):(l.dataToSave=!1,l.proceedBtn="btn btn-primary",l.btnMssg="Move On...")},l.saveAndMoveOn=function(){l.user.birthday=a(l.tempBirthday),l.user.$save(),s("/userEvents")}}function authService(e,n,t){function i(n){n?e.info("User "+n.uid+" is logged in with "+n.provider):(e.info("User is logged out...dumping them back to landing page"),t.path("/"))}function r(){e.info("logging from the isLoggedIn Method"),a.onAuth(i)}var o="https://meetupplanner.firebaseio.com/",a=new Firebase(o),s={isLoggedIn:r};return s}function validation(e){function n(e){return angular.isUndefined(e)?"This is a required field":void 0}function t(e){return angular.isDefined(e)&&e.length<m?"Name should be at least "+m+" characters":void 0}function i(e){return angular.isDefined(e)&&!(e.length<v)}function r(e){return angular.isDefined(e)&&!(e.length>f)}function o(e){if(angular.isDefined(e)){var n=new RegExp("[!@#$%^&*]");return!!n.test(e)}return!1}function a(e){if(angular.isDefined(e)){var n=new RegExp("[0-9]","");return!!n.test(e)}return!1}function s(e){if(angular.isDefined(e)){var n=new RegExp("[a-z]","");return!!n.test(e)}return!1}function l(e){if(angular.isDefined(e)){var n=new RegExp("[A-Z]","");return!!n.test(e)}return!1}function d(e){if(angular.isDefined(e)){var n=new RegExp("[^A-z0-9!@#$%^&*]","");return!n.test(e)}return!1}function u(e){var n=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","");return n.test(e)?void 0:"Not a valid e-mail address"}function c(e){}var m=3,v=16,f=100,g={required:n,minNameLength:t,minPassLength:i,maxPassLength:r,atLeastOneSymbol:o,atLeastOneNumber:a,atLeastOneLowercase:s,atLeastOneUppercase:l,illegalCharacter:d,email:u,dateOfBirth:c};return g}function config(e){e.when("/",{templateUrl:"views/landingPage.htm",controller:"LandingPageController",controllerAs:"vm"}).when("/signup",{templateUrl:"views/newUserSignup.htm",controller:"NewUserSignUpController",controllerAs:"vm"}).when("/login",{templateUrl:"views/registeredUserLogin",controller:"RegUserLoginController",controllerAs:"vm"}).when("/userInformation/:uid?/:token?",{templateUrl:"views/userInformation.htm",controller:"UserInformationController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).when("/userEvents/:uid?/:token?",{templateUrl:"views/userEvents.htm",controller:"UserEventsController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).when("/event/:eventId?/:hostId?/:uid?/:token?",{templateUrl:"views/anEvent.htm",controller:"AnEventController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).otherwise({redirectTo:"/"})}function userAuthenticationService(e){e.isLoggedIn()}function toolBar(){function e(e,n,t,i){}function n(e){e.info("directive loading")}e.$inject=["scope","el","attr","ctrl"];var t={restrict:"AECM",templateUrl:"../views/directives/toolBar.directive.htm",replace:!0,scope:{},link:e,controller:n,controllerAs:"vm",bindToController:!0};return n.$inject=["$log"],t}config.$inject=["$routeProvider"],userAuthenticationService.$inject=["authService"],angular.module("meetUpEventApp",["ngRoute","ngTouch","firebase"]),angular.module("meetUpEventApp").controller("AnEventController",AnEventController),AnEventController.$inject=["$scope","$log","$location","$routeParams","$firebaseObject"],angular.module("meetUpEventApp").controller("LandingPageController",LandingPageController),LandingPageController.$inject=["$scope","$log","$location","$document","$window"],angular.module("meetUpEventApp").controller("MainController",MainController),MainController.$inject=["$log","$location","$document"],angular.module("meetUpEventApp").controller("NewUserSignUpController",NewUserSignUpController),NewUserSignUpController.$inject=["$scope","$log","validation"],angular.module("meetUpEventApp").controller("topMenuController",topMenuController),topMenuController.$inject=["$scope","$log","$location","$document","$window"],angular.module("meetUpEventApp").controller("UserEventsController",UserEventsController),UserEventsController.$inject=["$scope","$log","$location","$routeParams","$firebaseObject"],angular.module("meetUpEventApp").controller("UserInformationController",UserInformationController),UserInformationController.$inject=["$log","$location","$routeParams","$firebaseObject"],angular.module("meetUpEventApp").factory("authService",authService),authService.$inject=["$log","$q","$location"],angular.module("meetUpEventApp").factory("validation",validation),validation.$inject=["$log"],angular.module("meetUpEventApp").config(config),angular.module("meetUpEventApp").directive("toolBar",toolBar);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFuRXZlbnQuY29udHJvbGxlci5qcyIsIkxhbmRpbmdQYWdlLmNvbnRyb2xsZXIuanMiLCJNYWluLmNvbnRyb2xsZXIuanMiLCJOZXdVc2VyU2lnblVwLmNvbnRyb2xsZXIuanMiLCJUb3BNZW51LmNvbnRyb2xsZXIuanMiLCJVc2VyRXZlbnRzLmNvbnRyb2xsZXIuanMiLCJVc2VySW5mb3JtYXRpb24uY29udHJvbGxlci5qcyIsIkF1dGhTZXJ2aWNlLmZhY3RvcnkuanMiLCJWYWxpZGF0aW9uLmZhY3RvcnkuanMiLCJyb3V0ZS1jb25maWcuanMiLCJhcHAuanMiLCJUb29sQmFyLmRpcmVjdGl2ZS5qcyIsImFwcC5tb2R1bGUuanMiXSwibmFtZXMiOlsiQW5FdmVudENvbnRyb2xsZXIiLCIkc2NvcGUiLCIkbG9nIiwiJGxvY2F0aW9uIiwiJHJvdXRlUGFyYW1zIiwiJGZpcmViYXNlT2JqZWN0IiwiaW5pdCIsInZtIiwidGVtcERhdGVUaW1lIiwic3RhcnQiLCJlbmQiLCJuZXdHdWVzdCIsIm5hbWUiLCJlbWFpbCIsImFkZHJlc3MiLCJ2YWxpZCIsInN0eWxlIiwiY29sb3IiLCJzaG93SWZIb3N0IiwiaGlkZUlmQXR0ZW5kaW5nIiwibWFuYWdlU2VjdGlvbnMiLDEsImFjdGl2ZSIsImNvbXBsZXRlIiwiYmFja2dyb3VuZC1jb2xvciIsMiwzLCJjaGVja0Zvckhvc3QiLCJjaGVja0lmR3Vlc3RJc0F0dGVuZGluZyIsIm9wZW5BbGxTZWN0aW9ucyIsInV0ZjhfdG9fYjY0Iiwic3RyIiwiYnRvYSIsImI2NF90b191dGY4IiwiYXRvYiIsImRhdGVUaW1lVG9Vbml4VGltZSIsImRhdGVUaW1lIiwiRGF0ZSIsInBhcnNlIiwiY2xlYW5OZXdHdWVzdFZhcmlhYmxlIiwiaW52aXRlQVJlZ2lzdGVyZWRVc2VyIiwidWlkIiwiaW5mbyIsInJlZiIsImNoaWxkIiwiZXZlbnRJZCIsInNldCIsImlkIiwiZXZlbnRUaW1lcyIsImV2ZW50IiwiaG9zdCIsImVycm9yIiwib25jZSIsInNuYXBzaG90IiwiY2hlY2tGb3JQbGFjZWhvbGRlciIsInZhbCIsInVwZGF0ZWQiLCJyZW1vdmUiLCJlcnJvck9iamVjdCIsImNvZGUiLCJpbnZpdGVBblVucmVnaXN0ZXJlZFVzZXIiLCJ1c2VyS2V5IiwiYXV0aERhdGEiLCJnZXRBdXRoIiwiaG9zdElkIiwidXNlckV2ZW50cyIsIm9uIiwiYWxsR3Vlc3RzIiwiYXR0ZW5kaW5nIiwidGhpcyIsImZiVVJMIiwiRmlyZWJhc2UiLCJyZWdpc3RlcmVkVXNlcnMiLCJyZXF1aXJlZElucHV0cyIsInNldFRlbXBUaW1lIiwiZW5kcG9pbnQiLCJ1bml4VGltZVRvRGF0ZVRpbWUiLCJ1bml4VGltZSIsInBhcnNlSW50Iiwic3VibWl0IiwiYmFja1RvVXNlckV2ZW50cyIsInBhdGgiLCJ0b2tlbiIsImV2ZW50UmVkaXJlY3QiLCJldmVudElEIiwiZnVsbFBhdGgiLCJjaGFuZ2VTZWN0aW9uIiwidGFyZ2V0U2VjdGlvbiIsImkiLCJzYXZlRXZlbnRUaW1lIiwidGFyZ2V0IiwiZ3Vlc3RzQXJlSW52aXRlZCIsImd1ZXN0TGlzdCIsInZhbGlkYXRlR3Vlc3RFbWFpbCIsImNvbnN0cmFpbnQiLCJSZWdFeHAiLCJ0ZXN0IiwiaXNTZWN0aW9uQ29tcGxldGUiLCJzYXZlQW5kQWR2YW5jZSIsIiRzYXZlIiwidGhlbiIsImFkZEd1ZXN0VG9Ib3N0c0xpc3QiLCJzdGF0dXMiLCJzYXZlRXZlbnQiLCJndWVzdFdpbGxBdHRlbmQiLCJyZXNwb25zZSIsImN1cnJlbnRVc2VyIiwidG90YWxQZW5kaW5nSW52aXRhdGlvbnMiLCJyZW1vdmVBdHRlbmRpbmdVcGRhdGVkIiwiaW52aXRhdGlvbnMiLCJ0aGlzSW52aXRhdGlvbiIsImludml0YXRpb24iLCJhdHRlbmRpbmdMaXN0IiwiY3VycmVudERhdGUiLCJ1cGRhdGUiLCJ1cGRhdGVVcGRhdGVkUGFyYW0iLCJhZGRJbnZpdGF0aW9uVG9BdHRlbmRpbmciLCJMYW5kaW5nUGFnZUNvbnRyb2xsZXIiLCIkZG9jdW1lbnQiLCIkd2luZG93IiwicmVkaXJlY3QiLCJ1c2VyRGF0YSIsImN1cnJlbnRVc2VyRGF0YSIsIiRhcHBseSIsInNob3dSZXF1aXJubWVudHMiLCJ2YWxpZE5ld05hbWUiLCJ2YWxpZE5ld0VtYWlsIiwic2VjdXJlUGFzc3dvcmQiLCJzZWN1cmUiLCJ1bmxvY2tDcmVhdGVVc2VyQnRuIiwidXNhYmxlIiwiY2xhc3MiLCJtZXNzYWdlIiwidmFsaWRVc2VyRW1haWwiLCJ2YWxpZFVzZXJQYXNzd29yZCIsInVuY2xvY2tVc2VyTG9naW5CdG4iLCJwYXNzd29yZFJlcXVpcm5tZW50cyIsMCwibWV0Iiw0LDUsNiwiZGlzcGxheVBhc3NSZXFzIiwibmV3TmFtZSIsIm5ld0VtYWlsIiwiY2hlY2tOZXdOYW1lIiwibGVuZ3RoIiwib3BlbkNyZWF0ZVVzZXJCdXR0b24iLCJjaGVja05ld0VtYWlsIiwiY2hlY2tVc2VyRW1haWwiLCJ1c2VyRW1haWwiLCJvcGVuVXNlckxvZ2luQnRuIiwiY2hlY2tOZXdQYXNzd29yZHMiLCJjb25zdHJhaW50cyIsIm5ld1Bhc3N3b3JkIiwiY2hlY2tVc2VyUGFzc3dvcmRzIiwidXNlclBhc3N3b3JkIiwiZmluZCIsInZhbHVlIiwiY3JlYXRlTmV3VXNlciIsImNyZWF0ZVVzZXIiLCJwYXNzd29yZCIsInVzZXJzUmVmIiwiYmlvIiwiZXZlbnRzIiwicGVuZGluZyIsImhvc3RpbmciLCJjb21wbGV0ZWQiLCJsb2dpblJlZ2lzdGVyZWRVc2VyIiwiYXV0aFdpdGhQYXNzd29yZCIsImFsZXJ0TWUiLCJhbGVydCIsIm9uUmVzaXplRnVuY3Rpb24iLCJpbnB1dFRleHQiLCJhbmd1bGFyIiwiZWxlbWVudCIsIm91dGVyV2lkdGgiLCJvdXRlckhlaWdodCIsImNzcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJGYXN0Q2xpY2siLCJhdHRhY2giLCJib2R5IiwiYmluZCIsInJlYWR5IiwibWFzdGVyIiwidXNlciIsImNvcHkiLCJyZXNldCIsImZvcm0iLCIkc2V0UHJpc3RpbmUiLCIkc2V0VW50b3VjaGVkIiwiTWFpbkNvbnRyb2xsZXIiLCJsb2dvdXQiLCJ1bmF1dGgiLCJOZXdVc2VyU2lnblVwQ29udHJvbGxlciIsInZhbGlkYXRpb24iLCJ2ZXJpZnlSZXF1aXJubWVudHMiLCJlcnJvcnMiLCJwYXNzZXNBbGxUZXN0cyIsImlzRGVmaW5lZCIsImlucHV0cyIsImFsbEZpZWxkc0RlZmluZWQiLCJwYXNzUmVxcyIsInJlcSIsImZ1bGZpbGxlZCIsInNob3dSZXFzQm94Iiwic2lnbnVwVmFsaWRhdGlvbiIsImhhc05hbWUiLCJyZXF1aXJlZCIsImxvbmdFbm91Z2giLCJtaW5OYW1lTGVuZ3RoIiwicHVzaCIsImpvaW4iLCJoYXNFbWFpbCIsImlzQW5FbWFpbCIsImNoZWNrTmV3UGFzc3dvcmQiLCJoYXNQYXNzd29yZCIsInNwZWNpZmljUmVxcyIsIm1pblBhc3NMZW5ndGgiLCJtYXhQYXNzTGVuZ3RoIiwiYXRMZWFzdE9uZUxvd2VyY2FzZSIsImF0TGVhc3RPbmVVcHBlcmNhc2UiLCJhdExlYXN0T25lTnVtYmVyIiwiYXRMZWFzdE9uZVN5bWJvbCIsImlsbGVnYWxDaGFyYWN0ZXIiLCJhbnlFcnJvcnMiLCJleGl0UGFzc3dvcmQiLCJ0b3BNZW51Q29udHJvbGxlciIsImF1dGhEYXRhQ2FsbGJhY2siLCJwcm92aWRlciIsImxvZ2dlZEluIiwibmF2QmFyTG9naW5SZWdpc3RlcmVkVXNlciIsIm5hdmJhclVzZXJFbWFpbCIsIm5hdmJhclVzZXJQYXNzIiwiY2xpY2siLCJuYXZiYXJJbnB1dHMiLCJvbkF1dGgiLCJVc2VyRXZlbnRzQ29udHJvbGxlciIsImdlbmVyYXRlRXZlbnRJRCIsImRhdGUiLCJub09mRXZlbnRzQWxyZWFkeSIsImN1cnJlbnRVc2VyQmlvIiwic2hvd0RlY2xpbmUiLCJjdXJyZW50VXNlck5hbWUiLCJldmVudHNBcmVCZWluZ0hvc3RlZCIsImV2ZW50Rm91bmQiLCJldmVudEludml0YXRpb25zUGVuZGluZyIsImF0dGVuZGluZ0V2ZW50cyIsInBlcmNlbnRSU1ZQZWQiLCJ0b3RhbEF0dGVuZGluZyIsInRvdGFsSW52aXRlZCIsImZvckVhY2giLCJndWVzdCIsImludml0ZWQiLCJhY2NlcHRFdmVudEludml0YXRpb24iLCJyZWRpcmVjdFRvSG9zdGVkRXZlbnQiLCJyZWRpcmVjdFRvM3JkUGFydHlFdmVudCIsImludml0ZVN0YXR1cyIsImNyZWF0ZU5ld0V2ZW50IiwiT2JqZWN0Iiwia2V5cyIsIlVzZXJJbmZvcm1hdGlvbkNvbnRyb2xsZXIiLCJhY3RpdmF0ZSIsInVzZXJCaW8iLCJwcm9jZWVkQnRuIiwiYnRuTXNzZyIsImRhdGFUb1NhdmUiLCJpc0RhdGEiLCIkbG9hZGVkIiwiYmlydGhkYXkiLCJ0ZW1wQmlydGhkYXkiLCJjaGVja1ZhbHVlcyIsImlzVW5kZWZpbmVkIiwiZW1wbG95ZXIiLCJqb2JUaXRsZSIsInNhdmVBbmRNb3ZlT24iLCJhdXRoU2VydmljZSIsIiRxIiwiaXNMb2dnZWRJbiIsImFsbEF1dGhTZXJ2aWNlcyIsIm1pbmltdW1OYW1lTGVuZ3RoIiwibWluaW11bVBhc3NMZW5ndGgiLCJtYXhpbXVtUGFzc0xlbmd0aCIsImRhdGVPZkJpcnRoIiwiYWxsVmFsaWRhdGlvbnMiLCJjb25maWciLCIkcm91dGVQcm92aWRlciIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJjb250cm9sbGVyQXMiLCJyZXNvbHZlIiwidXNlckF1dGhlbnRpY2F0aW9uU2VydmljZSIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCJ0b29sQmFyIiwibGlua0Z1bmMiLCJzY29wZSIsImVsIiwiYXR0ciIsImN0cmwiLCJUb29sQmFyQ29udHJvbGxlciIsIiRpbmplY3QiLCJkaXJlY3RpdmUiLCJyZXN0cmljdCIsInJlcGxhY2UiLCJsaW5rIiwiYmluZFRvQ29udHJvbGxlciIsIm1vZHVsZSIsImZhY3RvcnkiXSwibWFwcGluZ3MiOiJBQU9BLFFBQUFBLG1CQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQWNBLFFBQUFDLEtBRUFDLEVBQUFDLGNBQUFDLE1BQUEsR0FBQUMsSUFBQSxJ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SSxRQUNBdUksT0FBQSxrQkFDQXZCLE9BQUFBLFFFS0FoSCxRQUNBdUksT0FBQSxrQkFDQUwsVUFBQSxVQUFBUiIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdBbkV2ZW50Q29udHJvbGxlcicsIEFuRXZlbnRDb250cm9sbGVyKTtcblxuQW5FdmVudENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnLCAnJGxvY2F0aW9uJywgJyRyb3V0ZVBhcmFtcycsICckZmlyZWJhc2VPYmplY3QnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBBbkV2ZW50Q29udHJvbGxlcigkc2NvcGUsICRsb2csICRsb2NhdGlvbiwgJHJvdXRlUGFyYW1zLCAkZmlyZWJhc2VPYmplY3QpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0dmFyIHVzZXJFdmVudHMgPSByZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQoJHJvdXRlUGFyYW1zLmhvc3RJZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdob3N0aW5nJykuY2hpbGQoJHJvdXRlUGFyYW1zLmV2ZW50SWQpXG5cblx0Ly9iaW5kaW5nIHRvIHRoZSBldmVudFxuXHR2bS5ldmVudCA9ICRmaXJlYmFzZU9iamVjdCh1c2VyRXZlbnRzKVxuXHR2YXIgcmVnaXN0ZXJlZFVzZXJzID0gJGZpcmViYXNlT2JqZWN0KHJlZi5jaGlsZCgnVWlkcycpKTtcblxuXHQvL3JlcXVpcmVkIGZpZWxkc1xuXHR2bS5yZXF1aXJlZElucHV0cyA9IFsnJywgJycsICcnLCAnJywgJycsICcnLCAnJywgJycsICcnXTtcblxuXHQvL0xvY2FsIE1ldGhvZHNcblx0ZnVuY3Rpb24gaW5pdCgpIHtcblx0XHQvL2RlY2xhcmUgYW5kIGluaXRpYWxpemUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dm0udGVtcERhdGVUaW1lID0ge3N0YXJ0OiAnJywgZW5kOiAnJ307XG5cdFx0dm0ubmV3R3Vlc3QgPSB7bmFtZTogJycsIGVtYWlsOnthZGRyZXNzOicnLCB2YWxpZDpmYWxzZSwgc3R5bGU6e2NvbG9yOicnfX19O1xuXHRcdHZtLnNob3dJZkhvc3QgPSBmYWxzZTtcblx0XHR2bS5oaWRlSWZBdHRlbmRpbmcgPSB0cnVlO1xuXHRcdC8vc2VjdGlvbnNcblx0XHR2bS5tYW5hZ2VTZWN0aW9ucyA9IHtcblx0XHRcdDE6IHthY3RpdmU6IHRydWUsIGNvbXBsZXRlOiBmYWxzZSwgc3R5bGU6e2NvbG9yOidibGFjaycsICdiYWNrZ3JvdW5kLWNvbG9yJzoneWVsbG93J319LFxuXHRcdFx0Mjoge2FjdGl2ZTogZmFsc2UsIGNvbXBsZXRlOiBmYWxzZSwgc3R5bGU6e2NvbG9yOid3aGl0ZScsICdiYWNrZ3JvdW5kLWNvbG9yJzonZ3JheSd9fSxcblx0XHRcdDM6IHthY3RpdmU6IGZhbHNlLCBjb21wbGV0ZTogZmFsc2UsIHN0eWxlOntjb2xvcjond2hpdGUnLCAnYmFja2dyb3VuZC1jb2xvcic6J2dyYXknfX1cblx0XHR9O1xuXG5cdFx0Ly9jaGVjayB1c2VyIHRvIGRldGVybWluZSBzdGF0ZVxuXHRcdGNoZWNrRm9ySG9zdCgpO1xuXHRcdGNoZWNrSWZHdWVzdElzQXR0ZW5kaW5nKCk7XG5cblx0XHQvL29wZW4gdXAgc2VjdGlvbnNcblx0XHRpZighdm0uc2hvd0lmSG9zdCkgb3BlbkFsbFNlY3Rpb25zKCk7XG5cdH1cblxuXHRmdW5jdGlvbiB1dGY4X3RvX2I2NChzdHIpIHtcblx0XHRyZXR1cm4gYnRvYShzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gYjY0X3RvX3V0Zjgoc3RyKSB7XG4gICAgXHRyZXR1cm4gYXRvYihzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKSB7XG5cdFx0cmV0dXJuIERhdGUucGFyc2UoZGF0ZVRpbWUpO1xuXHR9XG5cblx0ZnVuY3Rpb24gY2xlYW5OZXdHdWVzdFZhcmlhYmxlKCkge1xuXHRcdHZtLm5ld0d1ZXN0ID0ge25hbWU6ICcnLCBlbWFpbDp7YWRkcmVzczonJywgdmFsaWQ6ZmFsc2UsIHN0eWxlOntjb2xvcjonJ319fTtcblx0fVxuXG5cdGZ1bmN0aW9uIGludml0ZUFSZWdpc3RlcmVkVXNlcih1aWQpIHtcblx0XHQkbG9nLmluZm8oJ2FkZGluZyB0aGVtIHRvIHRoZSByZWdpc3RlcmVkIHVzZXJzIGxpc3QgJyArIHVpZCk7XG5cdFx0Ly9zZXQgdGhlIG5ldyBldmVudFxuXHRcdHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgncGVuZGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ldmVudElkKS5zZXQoe1xuXHRcdFx0aWQ6ICRyb3V0ZVBhcmFtcy5ldmVudElkLFxuXHRcdFx0ZXZlbnRUaW1lczoge1xuXHRcdFx0XHRzdGFydDogdm0uZXZlbnQuZXZlbnRUaW1lcy5zdGFydCxcblx0XHRcdFx0ZW5kOiB2bS5ldmVudC5ldmVudFRpbWVzLmVuZFxuXHRcdFx0fSxcblx0XHRcdG5hbWU6IHZtLmV2ZW50Lm5hbWUsXG5cdFx0XHRob3N0OiAkcm91dGVQYXJhbXMudWlkXG5cdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oJ3RoZXJlIHdhcyBhbiBlcnJvcicgKyBlcnJvcik7XG5cdFx0fSk7XG5cdFx0Ly9pZiB0aGVyZSB3YXMgYW4gdXBkYXRlZCBwbGFjZSBob2xkZXIsIHJlbW92ZSBpdFxuXHRcdHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgncGVuZGluZycpLm9uY2UoJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdHZhciBjaGVja0ZvclBsYWNlaG9sZGVyID0gc25hcHNob3QudmFsKClcblx0XHRcdCRsb2cuaW5mbyhzbmFwc2hvdC52YWwoKSk7XG5cblx0XHRcdGlmKGNoZWNrRm9yUGxhY2Vob2xkZXIudXBkYXRlZCkge1xuXHRcdFx0XHQkbG9nLmluZm8oJ2RlbGV0aW5nIHVwZGF0ZWQnKTtcblx0XHRcdFx0cmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdwZW5kaW5nJykuY2hpbGQoJ3VwZGF0ZWQnKS5yZW1vdmUoZnVuY3Rpb24oZXJyb3JPYmplY3QpIHtcblx0XHRcdFx0XHRpZihlcnJvck9iamVjdCkgJGxvZy5pbmZvKFwiRGVsZXRpbmcgZmFpbGVkOiBcIiArIGVycm9yT2JqZWN0LmNvZGUpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSAkbG9nLmluZm8oJ25vdGhpbmcgdG8gZG8nKTtcblxuXHRcdH0sIGZ1bmN0aW9uKGVycm9yT2JqZWN0KSB7XG5cdFx0XHRpZihlcnJvck9iamVjdCkgJGxvZy5pbmZvKFwiVGhlIHJlYWQgZmFpbGVkOiBcIiArIGVycm9yT2JqZWN0LmNvZGUpO1xuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gaW52aXRlQW5VbnJlZ2lzdGVyZWRVc2VyKHVzZXJLZXkpIHtcblx0XHQkbG9nLmluZm8oJ2FkZGluZyB0aGVtIHRvIHRoZSBVTlJFR0lTVEVSRUQgdXNlcnMgbGlzdCAnICsgdXNlcktleSk7XG5cdFx0cmVmLmNoaWxkKCdVbnJlZ2lzdGVyZWRVc2VycycpLmNoaWxkKHVzZXJLZXkpLmNoaWxkKCdwZW5kaW5nJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJHJvdXRlUGFyYW1zLmV2ZW50SWQpLnNldCh7XG5cdFx0XHRpZDogJHJvdXRlUGFyYW1zLmV2ZW50SWQsXG5cdFx0XHRob3N0OiAkcm91dGVQYXJhbXMudWlkLFxuXHRcdFx0ZXZlbnRUaW1lczoge1xuXHRcdFx0XHRzdGFydDogdm0uZXZlbnQuZXZlbnRUaW1lcy5zdGFydCxcblx0XHRcdFx0ZW5kOiB2bS5ldmVudC5ldmVudFRpbWVzLmVuZFxuXHRcdFx0fSxcblx0XHRcdG5hbWU6IHZtLmV2ZW50Lm5hbWVcblx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbygndGhlcmUgd2FzIGFuIGVycm9yJyArIGVycm9yKTtcblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNoZWNrRm9ySG9zdCgpIHtcblx0XHQvL2NoZWNrIGV2ZW50IGhvc3Rcblx0XHR2YXIgYXV0aERhdGEgPSByZWYuZ2V0QXV0aCgpO1xuXG5cdFx0aWYoYXV0aERhdGEudWlkID09ICRyb3V0ZVBhcmFtcy5ob3N0SWQpIHtcblx0XHRcdCRsb2cuaW5mbygnaXMgdGhlIGhvc3QnKTtcblx0XHRcdHZtLnNob3dJZkhvc3QgPSB0cnVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkbG9nLmluZm8oJ25vdCB0aGUgaG9zdCcpO1xuXHRcdFx0dm0uc2hvd0lmSG9zdCA9IGZhbHNlO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIGNoZWNrSWZHdWVzdElzQXR0ZW5kaW5nKCkge1xuXHRcdGlmKCF2bS5zaG93SWZIb3N0KSB7XG5cdFx0XHQkbG9nLmluZm8oJ2NoZWNrIGd1ZXN0IGF0dGVuZGFuY2UnKTtcblx0XHRcdHVzZXJFdmVudHMuY2hpbGQoJ2d1ZXN0TGlzdCcpLm9uKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHRcdHZhciBhbGxHdWVzdHMgPSBzbmFwc2hvdC52YWwoKTtcblx0XHRcdFx0dm0uaGlkZUlmQXR0ZW5kaW5nID0gIWFsbEd1ZXN0c1skcm91dGVQYXJhbXMudWlkXS5hdHRlbmRpbmc7XG5cdFx0XHRcdFxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gb3BlbkFsbFNlY3Rpb25zKCkge1xuXHRcdHZtLm1hbmFnZVNlY3Rpb25zWzFdLmFjdGl2ZSA9IHRydWU7XG5cdFx0dm0ubWFuYWdlU2VjdGlvbnNbMl0uYWN0aXZlID0gdHJ1ZTtcblx0XHR2bS5tYW5hZ2VTZWN0aW9uc1szXS5hY3RpdmUgPSB0cnVlO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2F2ZUV2ZW50KCkge1xuXHRcdHZtLmV2ZW50LiRzYXZlKCkudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdCRsb2cuaW5mbygnZXZlbnQgc2F2ZWQnKTtcblx0XHR9KS5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0JGxvZy5pbmZvKCdlcnJvciEgJyArIGVycm9yKTtcblx0XHR9KTtcblx0fVxuXG5cdC8vdmlldyBNZXRob2Rcblx0dm0uc2V0VGVtcFRpbWUgPSBmdW5jdGlvbihlbmRwb2ludCkge1xuXHRcdGlmKGVuZHBvaW50ID09ICdzdGFydCcpIHZtLnRlbXBEYXRlVGltZS5zdGFydCA9IG5ldyBEYXRlKCk7XG5cdFx0aWYoZW5kcG9pbnQgPT0gJ2VuZCcpIHZtLnRlbXBEYXRlVGltZS5lbmQgPSBuZXcgRGF0ZSgpO1xuXHR9XG5cblx0dm0udW5peFRpbWVUb0RhdGVUaW1lID0gZnVuY3Rpb24gKHVuaXhUaW1lKSB7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KHVuaXhUaW1lKSk7XG5cdH07XG5cblx0dm0uZGF0ZVRpbWVUb1VuaXhUaW1lID0gZnVuY3Rpb24gKGRhdGVUaW1lKSB7XG5cdFx0cmV0dXJuIERhdGUucGFyc2UoZGF0ZVRpbWUpO1xuXHR9O1xuXG5cdHZtLnN1Ym1pdCA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2cuaW5mbygnc3VibWl0dGluZyB0aGUgZm9ybSBub3chJyk7XG5cdH1cblxuXHR2bS5iYWNrVG9Vc2VyRXZlbnRzID0gZnVuY3Rpb24oKSB7XG5cdFx0JGxvY2F0aW9uLnBhdGgoJy91c2VyRXZlbnRzLycgKyAkcm91dGVQYXJhbXMudWlkICsgJy8nICsgJHJvdXRlUGFyYW1zLnRva2VuKTtcblx0fVxuXG5cdHZtLmV2ZW50UmVkaXJlY3QgPSBmdW5jdGlvbihwYXRoLCBldmVudElEKSB7XG5cdFx0dmFyIGZ1bGxQYXRoID0gcGF0aCArICcvJyArICRyb3V0ZVBhcmFtcy51aWQgKyAnLycgKyAkcm91dGVQYXJhbXMudG9rZW47XG5cdFx0Ly9yZWRpcmVjdFxuXHRcdCRsb2cuaW5mbygncmVkaXJlY3RpbmcgdG86ICcgKyBmdWxsUGF0aCk7XG5cdFx0JGxvY2F0aW9uLnBhdGgoZnVsbFBhdGgpO1xuXHR9XG5cblx0dm0uY2hhbmdlU2VjdGlvbiA9IGZ1bmN0aW9uKHRhcmdldFNlY3Rpb24pIHtcblx0XHQkbG9nLmluZm8oJ2FyZSB3ZSBoZXJlJyk7XG5cdFx0Zm9yKGkgPSAxOyBpIDw9MzsgaSsrKSB7XG5cdFx0XHRpZihpPT10YXJnZXRTZWN0aW9uKSB7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLmFjdGl2ZSA9IHRydWU7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLnN0eWxlWydiYWNrZ3JvdW5kLWNvbG9yJ10gPSd5ZWxsb3cnO1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5zdHlsZVsnY29sb3InXSA9J2JsYWNrJztcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLmFjdGl2ZSA9IGZhbHNlO1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5zdHlsZVsnYmFja2dyb3VuZC1jb2xvciddID0nZ3JheSc7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLnN0eWxlWydjb2xvciddID0nd2hpdGUnO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHZtLnNhdmVFdmVudFRpbWUgPSBmdW5jdGlvbihkYXRlVGltZSwgdGFyZ2V0KSB7XG5cdFx0Ly9pZiB0aGlzIGV2ZW50IGRpZG4ndCBoYXZlIGEgc3RhcnQgdGltZSwgY3JlYXRlIGl0XG5cdFx0aWYoIXZtLmV2ZW50LmV2ZW50VGltZXMpIHsgXG5cdFx0XHR2bS5ldmVudC5ldmVudFRpbWVzID0ge3N0YXJ0OiAnJywgZW5kOiAnJ307XG5cdFx0XHR2bS5ldmVudC5ldmVudFRpbWVzLnN0YXJ0ID0gdm0uZGF0ZVRpbWVUb1VuaXhUaW1lKHZtLnRlbXBEYXRlVGltZS5zdGFydCk7IFxuXHRcdFx0dm0uZXZlbnQuZXZlbnRUaW1lcy5lbmQgPSB2bS5kYXRlVGltZVRvVW5peFRpbWUodm0udGVtcERhdGVUaW1lLmVuZCk7XG5cdFx0fVxuXG5cdFx0aWYoKHZtLnRlbXBEYXRlVGltZS5lbmQgPCB2bS50ZW1wRGF0ZVRpbWUuc3RhcnQpICYmIHRhcmdldCA9PSAnc3RhcnQnKSB2bS50ZW1wRGF0ZVRpbWUuZW5kID0gdm0udGVtcERhdGVUaW1lLnN0YXJ0O1xuXHRcdGlmKHRhcmdldCA9PSAnc3RhcnQnKSB2bS5ldmVudC5ldmVudFRpbWVzLnN0YXJ0ID0gdm0uZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKTtcblx0XHRpZih0YXJnZXQgPT0gJ2VuZCcpIHZtLmV2ZW50LmV2ZW50VGltZXMuZW5kID0gdm0uZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKTtcblx0fVxuXG5cdHZtLmd1ZXN0c0FyZUludml0ZWQgPSBmdW5jdGlvbigpIHtcblx0XHRpZih2bS5ldmVudC5ndWVzdExpc3QpIHJldHVybiB0cnVlO1xuXHRcdGVsc2UgcmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0dm0udmFsaWRhdGVHdWVzdEVtYWlsID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9pZiB0aGVyZSBpcyBhbiBlbWFpbCBhZGRyZXNzXG5cdFx0aWYodm0ubmV3R3Vlc3QuZW1haWwuYWRkcmVzcykge1xuXHRcdFx0Ly9jaGVjayB2YWxpZGl0eVxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XCIsIFwiXCIpO1xuXG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3Qodm0ubmV3R3Vlc3QuZW1haWwuYWRkcmVzcykpIHtcblx0XHRcdFx0dm0ubmV3R3Vlc3QuZW1haWwudmFsaWQgPSB0cnVlO1xuXHRcdFx0XHR2bS5uZXdHdWVzdC5lbWFpbC5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLm5ld0d1ZXN0LmVtYWlsLnZhbGlkID0gZmFsc2U7XG5cdFx0XHRcdHZtLm5ld0d1ZXN0LmVtYWlsLnN0eWxlID0ge2NvbG9yOicnfTtcblx0XHRcdH1cdFx0XHRcblx0XHR9XG5cdH1cblxuXHR2bS5pc1NlY3Rpb25Db21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdGZvcihpPTA7aTw4O2krKykge1xuXHRcdFx0JGxvZy5pbmZvKHZtLnJlcXVpcmVkSW5wdXRzW2ldKTtcblx0XHR9XG5cdH1cblxuXHR2bS5zYXZlQW5kQWR2YW5jZSA9IGZ1bmN0aW9uKCkge1xuXHRcdHZtLmV2ZW50LiRzYXZlKCkudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdCRsb2cuaW5mbygnZXZlbnQgc2F2ZWQnKTtcblx0XHR9KS5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0JGxvZy5pbmZvKCdlcnJvciEgJyArIGVycm9yKTtcblx0XHR9KTtcblxuXHRcdC8vY2hlY2sgZm9yIGNvbXBsZXRlbmVzXG5cdFx0dm0uaXNTZWN0aW9uQ29tcGxldGUoKTtcblxuXHRcdGlmKHZtLm1hbmFnZVNlY3Rpb25zWzFdLmNvbXBsZXRlID09IHRydWUgJiYgdm0ubWFuYWdlU2VjdGlvbnNbMl0uY29tcGxldGUgPT0gdHJ1ZSAmJiB2bS5tYW5hZ2VTZWN0aW9uc1szXS5jb21wbGV0ZSA9PSB0cnVlKSB7XG5cdFx0XHR2bS5ldmVudFJlZGlyZWN0KCcvdXNlckV2ZW50cycsICRyb3V0ZVBhcmFtcy51aWQpO1xuXHRcdH0gZWxzZSBpZiAodm0ubWFuYWdlU2VjdGlvbnNbMV0uYWN0aXZlKSB2bS5jaGFuZ2VTZWN0aW9uKDIpO1xuXHRcdGVsc2UgaWYgKHZtLm1hbmFnZVNlY3Rpb25zWzJdLmFjdGl2ZSkgdm0uY2hhbmdlU2VjdGlvbigzKTtcblx0XHRlbHNlIGlmICh2bS5tYW5hZ2VTZWN0aW9uc1szXS5hY3RpdmUpIHZtLmNoYW5nZVNlY3Rpb24oMSk7XG5cdH1cblxuXHR2bS5hZGRHdWVzdFRvSG9zdHNMaXN0ID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9kZWNsYXJlIGFuZCBpbml0aWFsaXplIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciB1c2VyS2V5ID0gdXRmOF90b19iNjQodm0ubmV3R3Vlc3QuZW1haWwuYWRkcmVzcyk7XG5cblx0XHQvL2lmIGVtYWlsIGlzIHZhbGlkIGFuZCBuYW1lIGV4aXN0c1xuXHRcdGlmICh2bS5uZXdHdWVzdC5uYW1lICYmIHZtLm5ld0d1ZXN0LmVtYWlsLnZhbGlkKSB7XG5cdFx0XHQvL2lzIHRoZXJlIGEgZ3Vlc3QgbGlzdCBhbHJlYWR5PyBJZiBub3QgY3JlYXRlIG9uZVxuXHRcdFx0aWYoIXZtLmV2ZW50Lmd1ZXN0TGlzdCkge1xuXHRcdFx0XHR2bS5ldmVudC5ndWVzdExpc3QgPSB7fTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vaWYgc28gaXMgdGhpcyBwZXJzb24gYWxyZWFkeSBvbiB0aGUgbGlzdD9cblx0XHRcdFx0dmFyIGkgPTA7XG5cdFx0XHRcdHdoaWxlKHZtLmV2ZW50Lmd1ZXN0TGlzdFtpXSkge1xuXHRcdFx0XHRcdGlmKHZtLmV2ZW50Lmd1ZXN0TGlzdFtpXS5lbWFpbCA9PSBiNjRfdG9fdXRmOCh1c2VyS2V5KSkge1xuXHRcdFx0XHRcdFx0JGxvZy5pbmZvKCdUaGlzIGd1ZXN0IGlzIGFscmVhZHkgb24gdGhlIGxpc3QnKTtcblx0XHRcdFx0XHRcdGNsZWFuTmV3R3Vlc3RWYXJpYWJsZSgpO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpKys7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly9pcyB0aGlzIGd1ZXN0IGEgcmVnaXN0ZXJlZCB1c2VyP1xuXHRcdFx0aWYocmVnaXN0ZXJlZFVzZXJzW3VzZXJLZXldKSB7XG5cdFx0XHRcdC8vaXMgdGhlIHJlZ2lzdGVyZWQgdXNlciB0aGUgaG9zdD9cblx0XHRcdFx0aWYocmVnaXN0ZXJlZFVzZXJzW3VzZXJLZXldID09ICRyb3V0ZVBhcmFtcy51aWQpIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ3RyaWVkIHRvIHJlZ2lzdGVyIHRoZSBob3N0Jyk7XG5cdFx0XHRcdFx0Y2xlYW5OZXdHdWVzdFZhcmlhYmxlKCk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdC8vYWRkIHRoZW0gdG8gdGhlIGFwcHJvcHJpYXRlIHJlZ2lzdGVyZWQgdXNlcnMnIGxpc3Qgb2YgZXZlbnQgaW52aXRlc1xuXHRcdFx0XHRcdGludml0ZUFSZWdpc3RlcmVkVXNlcihyZWdpc3RlcmVkVXNlcnNbdXNlcktleV0pO1xuXG5cdFx0XHRcdFx0Ly9hZGQgdGhlIGd1ZXN0IHRvIHRoZSBsaXN0XG5cdFx0XHRcdFx0dm0uZXZlbnQuZ3Vlc3RMaXN0W3JlZ2lzdGVyZWRVc2Vyc1t1c2VyS2V5XV0gPSB7XG5cdFx0XHRcdFx0XHRhdHRlbmRpbmc6IGZhbHNlLCBcblx0XHRcdFx0XHRcdHN0YXR1czoncGVuZGluZycsIFxuXHRcdFx0XHRcdFx0bmFtZTogdm0ubmV3R3Vlc3QubmFtZSwgXG5cdFx0XHRcdFx0XHRlbWFpbDp2bS5uZXdHdWVzdC5lbWFpbC5hZGRyZXNzLFxuXHRcdFx0XHRcdH07XHRcdFx0XHRcdFxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2FkZCB0aGUgaW52aXRlIHRvIHRoZSBub24tcmVnaXN0ZXJlZCB1c2VycyBsaXN0IG9mIGV2ZW50IGludml0ZXNcblx0XHRcdFx0aW52aXRlQW5VbnJlZ2lzdGVyZWRVc2VyKHVzZXJLZXkpO1xuXG5cdFx0XHRcdC8vYWRkIHRoZSBndWVzdCB0byB0aGUgbGlzdFxuXHRcdFx0XHR2bS5ldmVudC5ndWVzdExpc3RbdXNlcktleV0gPSB7XG5cdFx0XHRcdFx0XHRhdHRlbmRpbmc6IGZhbHNlLCBcblx0XHRcdFx0XHRcdHN0YXR1czoncGVuZGluZycsIFxuXHRcdFx0XHRcdFx0bmFtZTogdm0ubmV3R3Vlc3QubmFtZSwgXG5cdFx0XHRcdFx0XHRlbWFpbDp2bS5uZXdHdWVzdC5lbWFpbC5hZGRyZXNzLFxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXG5cblx0XHRcdC8vc2F2ZSB0aGUgZXZlbnRcblx0XHRcdHZtLnNhdmVFdmVudCgpO1xuXHRcdFx0Ly9jbGVhciB0aGUgdGVtcCB2YWx1ZXNcblx0XHRcdGNsZWFuTmV3R3Vlc3RWYXJpYWJsZSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkbG9nLmluZm8oJ3lvdSBkaWRuXFwndCBlbnRlciBhIG5hbWUgYW5kIG9yIGVtYWlsJyk7XG5cdFx0fVxuXHR9XG5cblx0dm0uZ3Vlc3RXaWxsQXR0ZW5kID0gZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHR2YXIgY3VycmVudFVzZXIgPSByZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJ2V2ZW50cycpO1xuXHRcdHZhciB0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucyA9IDA7XG5cdFx0dmFyIHJlbW92ZUF0dGVuZGluZ1VwZGF0ZWQgPSBmYWxzZTtcblx0XHRcblx0XHQvL2NoYW5nZSBhdHRlbmRpbmcgdG8gdHJ1ZSBpbiBob3N0J3MgZ3Vlc3RMaXN0XG5cdFx0dm0uZXZlbnQuZ3Vlc3RMaXN0WyRyb3V0ZVBhcmFtcy51aWRdLmF0dGVuZGluZyA9IHJlc3BvbnNlO1xuXHRcdC8vY2hhbmdlIHN0YXR1cyB0byAnYXR0ZW5kaW5nJyBpbiBob3N0J3MgZ3Vlc3RMaXN0XG5cdFx0dm0uZXZlbnQuZ3Vlc3RMaXN0WyRyb3V0ZVBhcmFtcy51aWRdLnN0YXR1cyA9ICdhdHRlbmRpbmcnO1xuXHRcdFxuXHRcdC8vZ2V0IHRoZSBpbnZpdGF0aW9uIGRldGFpbHNcblx0XHRjdXJyZW50VXNlci5jaGlsZCgncGVuZGluZycpLm9uKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWxiZVxuXHRcdFx0dmFyIGludml0YXRpb25zID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHQvL2xvZyBzdGFydGluZyB2YWx1ZXNcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9ucyk7XG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnNbJHJvdXRlUGFyYW1zLmhvc3RJZF0pO1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdWyRyb3V0ZVBhcmFtcy5ldmVudElkXSk7XG5cblx0XHRcdHZhciB0aGlzSW52aXRhdGlvbiA9IGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdWyRyb3V0ZVBhcmFtcy5ldmVudElkXTtcblx0XHRcdFxuXHRcdFx0JGxvZy5pbmZvKHRoaXNJbnZpdGF0aW9uKTtcblx0XHRcdFxuXHRcdFx0Ly9jaGVjayAjIG9mIGluaXZpYXRpb25zXG5cdFx0XHRmb3IoaW52aXRhdGlvbiBpbiBpbnZpdGF0aW9ucykge1xuXHRcdFx0XHR0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucysrO1xuXHRcdFx0fVxuXG5cdFx0XHQvL3JlcG9ydCAjIG9mIGludml0YXRpb25zXG5cdFx0XHQkbG9nLmluZm8oXCJ0b3RhbCBhdHRlbmRpbmc6IFwiICsgdG90YWxQZW5kaW5nSW52aXRhdGlvbnMpO1xuXHRcdFx0XG5cdFx0XHQvL2FkZCB0aGUgZXZlbnQgdG8gdGhlIGd1ZXN0J3MgYXR0ZW5kaW5nIGxpc3Rcblx0XHRcdGlmKHJlc3BvbnNlKSBjdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykuY2hpbGQoJHJvdXRlUGFyYW1zLmhvc3RJZCkuY2hpbGQoJHJvdXRlUGFyYW1zLmV2ZW50SWQpLnNldCh0aGlzSW52aXRhdGlvbiwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbyhlcnJvcik7XG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXG5cdFx0Ly9pZiB0aGUgdXBkYXRlZCBwbGFjZWhvbGRlciB3YXMgb24gdGhlIGF0dGVuZGluZyBsaXN0IHJlbW92ZSBpdFxuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5vbigndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHRcdHZhciBhdHRlbmRpbmdMaXN0ID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHRcblx0XHRcdC8vcmVwb3J0IGFjdGlvbnNcblx0XHRcdCRsb2cuaW5mbygndGhpcyBpcyB0aGUgYXR0ZW5kaW5nIGxpc3QnKTtcblx0XHRcdCRsb2cuaW5mbyhhdHRlbmRpbmdMaXN0KTtcblx0XHRcdFxuXHRcdFx0Ly90aHJvdyBmbGFnIGZvciBsYXRlclxuXHRcdFx0aWYoYXR0ZW5kaW5nTGlzdC51cGRhdGVkKSByZW1vdmVBdHRlbmRpbmdVcGRhdGVkID0gdHJ1ZTtcblxuXHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHQvL2lmIHRoZXIgd2FzIGFuIGVycm9yIHJlcG9ydCBpdFxuXHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbyhlcnJvcik7XG5cdFx0fSk7XG5cblx0XHQvL2lmIHRoaXMgaXMgdGhlIGxhc3QgcGVuZGluZyBldmVudCBvbiB0aGUgZ3Vlc3QncyBwZW5kaW5nIGxpc3QsIGFkZCB0aGUgdXBkYXRlZCBwbGFjZWhvbGRlclxuXHRcdGlmKHRvdGFsUGVuZGluZ0ludml0YXRpb25zIDwgMikge1xuXHRcdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHRcdHZhciBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XG5cblx0XHRcdC8vcmVwbGFjZSB3aXRoIHVwZGF0ZWQgZmllbGRcblx0XHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdwZW5kaW5nJykudXBkYXRlKHtcblx0XHRcdFx0dXBkYXRlZDogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbyhlcnJvcik7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHQvL3JlbW92ZSB0aGUgZXZlbnQgZnJvbSB0aGUgZ3Vlc3QncyBwZW5kaW5nIGxpc3Rcblx0XHRjdXJyZW50VXNlci5jaGlsZCgncGVuZGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ob3N0SWQpLnJlbW92ZSgpO1xuXG5cdFx0Ly9pZiB0aGVyZSB3YXMgYW4gdXBkYXRlZCBmaWVsZCBpbiBhdHRlbmRpbmcsIHJlbW92ZSBpdFxuXHRcdGlmKHJlbW92ZUF0dGVuZGluZ1VwZGF0ZWQpIHtcblx0XHRcdCRsb2cuaW5mbygncmVtb3ZpbmcgdGhlIHVwZGF0ZWQgcGxhY2Vob2xkZXInKTtcblx0XHRcdC8vY3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLmNoaWxkKCd1cGRhdGVkJykucmVtb3ZlKCk7XG5cdFx0fVxuXG5cdFx0Ly9zYXZlIGNoYW5nZXNcblx0XHR2bS5ldmVudC4kc2F2ZSgpO1xuXHR9XG5cblx0dm0udXBkYXRlVXBkYXRlZFBhcmFtID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGN1cnJlbnRVc2VyID0gcmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCdldmVudHMnKTtcblx0XHRcblx0XHQkbG9nLmluZm8oJ3VwZGF0aW5nIHRoZSBwYXJhbScpO1xuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5vbigndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0JGxvZy5pbmZvKHNuYXBzaG90LnZhbCgpKTtcblx0XHR9KTtcblx0XHRjdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykuY2hpbGQoJ3VwZGF0ZWQnKS5yZW1vdmUoKTtcblx0fVxuXG5cdHZtLmFkZEludml0YXRpb25Ub0F0dGVuZGluZyA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdFx0dmFyIGN1cnJlbnRVc2VyID0gcmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCdldmVudHMnKTtcblx0XHR2YXIgdG90YWxQZW5kaW5nSW52aXRhdGlvbnMgPSAwO1xuXG5cdFx0Ly9nZXQgdGhlIGludml0YXRpb24gZGV0YWlsc1xuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdwZW5kaW5nJykub24oJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhbGJlXG5cdFx0XHR2YXIgaW52aXRhdGlvbnMgPSBzbmFwc2hvdC52YWwoKTtcblx0XHRcdHZhciB0aGlzSW52aXRhdGlvbiA9IGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdWyRyb3V0ZVBhcmFtcy5ldmVudElkXTtcblx0XHRcdFxuXHRcdFx0Ly9sb2cgc3RhcnRpbmcgdmFsdWVzXG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnMpO1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdKTtcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9uc1skcm91dGVQYXJhbXMuaG9zdElkXVskcm91dGVQYXJhbXMuZXZlbnRJZF0pO1xuXHRcdFx0XG5cdFx0XHQvL2NoZWNrICMgb2YgaW5pdmlhdGlvbnNcblx0XHRcdGZvcihpbnZpdGF0aW9uIGluIGludml0YXRpb25zKSB7XG5cdFx0XHRcdHRvdGFsUGVuZGluZ0ludml0YXRpb25zKys7XG5cdFx0XHR9XG5cblx0XHRcdC8vcmVwb3J0ICMgb2YgaW52aXRhdGlvbnNcblx0XHRcdCRsb2cuaW5mbyhcInRvdGFsIHBlbmRpbmcgaW52aXRhdGlvbnM6IFwiICsgdG90YWxQZW5kaW5nSW52aXRhdGlvbnMpO1xuXHRcdFx0XG5cdFx0XHQkbG9nLmluZm8ocmVzcG9uc2UpO1xuXHRcdFx0Ly9hZGQgdGhlIGV2ZW50IHRvIHRoZSBndWVzdCdzIGF0dGVuZGluZyBsaXN0XG5cdFx0XHRpZihyZXNwb25zZSkgY3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ob3N0SWQpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ldmVudElkKS5zZXQodGhpc0ludml0YXRpb24sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oZXJyb3IpO1xuXHRcdFx0fSk7XG5cblxuXG5cdFx0fSk7XG5cdH1cblxuXHQvL3N0YXJ0IHJ1blxuXHRpbml0KCk7XG59XG4iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdMYW5kaW5nUGFnZUNvbnRyb2xsZXInLCBMYW5kaW5nUGFnZUNvbnRyb2xsZXIpO1xuXG5MYW5kaW5nUGFnZUNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnLCAnJGxvY2F0aW9uJywgJyRkb2N1bWVudCcsICckd2luZG93J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gTGFuZGluZ1BhZ2VDb250cm9sbGVyKCRzY29wZSwgJGxvZywgJGxvY2F0aW9uLCAkZG9jdW1lbnQsICR3aW5kb3cpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgYXV0aERhdGEgPSB7fTtcblx0dmFyIGN1cnJlbnRVc2VyRGF0YSA9IHt9O1xuXG5cdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHR2bS5zaG93UmVxdWlybm1lbnRzID0gZmFsc2U7XG5cdHZtLnZhbGlkTmV3TmFtZSA9IHsndmFsaWQnOmZhbHNlLCAnc3R5bGUnOntjb2xvcjonJ319O1xuXHR2bS52YWxpZE5ld0VtYWlsID0geyd2YWxpZCc6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOicnfX07XG5cdHZtLnNlY3VyZVBhc3N3b3JkID0geydzZWN1cmUnOmZhbHNlLCAnc3R5bGUnOntjb2xvcjonJ319O1xuXHR2bS51bmxvY2tDcmVhdGVVc2VyQnRuID0geyd1c2FibGUnOmZhbHNlLCAnY2xhc3MnOididG4gYnRuLXdhcm5pbmcnfTtcblx0dm0ubWVzc2FnZSA9ICd0ZXN0aW5nJztcblxuXHRcblx0dm0udmFsaWRVc2VyRW1haWwgPSB7J3ZhbGlkJzpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6Jyd9fTtcblx0dm0udmFsaWRVc2VyUGFzc3dvcmQgPSB7J3ZhbGlkJzpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6Jyd9fTtcblx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0biA9IHsndXNhYmxlJzpmYWxzZSwgJ2NsYXNzJzonYnRuIGJ0bi13YXJuaW5nJ307XG5cdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzID0ge1xuXHRcdDA6eydjb25zdHJhaW50JzonSXMgYXQgbGVhc3QgMTYgY2hhcmFjdGVycyBsb25nJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX0sXG5cdFx0MTp7J2NvbnN0cmFpbnQnOidJcyBubyBsb25nZXIgdGhhbiAxMDAgY2hhcmFjdGVycycsICdzdHlsZSc6e2NvbG9yOidyZWQnfSwgJ21ldCc6ZmFsc2V9LFxuXHRcdDI6eydjb25zdHJhaW50JzonQ29udGFpbnMgYXQgbGVhc3Qgb25lIHJlcXVpcmVkIHN5bWJvbCAoXFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqKScsICdzdHlsZSc6e2NvbG9yOidyZWQnfSwgJ21ldCc6ZmFsc2V9LFxuXHRcdDM6eydjb25zdHJhaW50JzonQ29udGFpbnMgYXQgbGVhc3Qgb25lIG51bWJlcicsICdzdHlsZSc6e2NvbG9yOidyZWQnfSwgJ21ldCc6ZmFsc2V9LFxuXHRcdDQ6eydjb25zdHJhaW50JzonQ29udGFpbnMgYXQgbGVhc3Qgb25lIGxvd2VyY2FzZSBsZXR0ZXInLCAnc3R5bGUnOntjb2xvcjoncmVkJ30sICdtZXQnOmZhbHNlfSxcblx0XHQ1OnsnY29uc3RyYWludCc6J0NvbnRhaW5zIGF0IGxlYXN0IG9uZSB1cHBlcmNhc2UgbGV0dGVyJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX0sXG5cdFx0Njp7J2NvbnN0cmFpbnQnOlwiRG9lc24ndCBoYXZlIGFueSBpbGxlZ2FsIGNoYXJhY3RlcnNcIiwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX1cblx0fTtcblxuXHQvL3ZhciB0aGVUZXN0Qm94ID0gYW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCkuZmluZCgnI3Rlc3RCb3gnKTtcblxuXHQvL3RoZVRlc3RCb3guY2hlY2tWYWxpZGl0eSgpO1xuXHQvL3NldEN1c3RvbVZhbGlkaXR5KCd5b3UgbmVlZCBzb21ldGhpbmcgZWxzZScpO1xuXG5cdC8vbG9jYWwgbWV0aG9kc1xuXHRmdW5jdGlvbiB1dGY4X3RvX2I2NChzdHIpIHtcblx0XHRyZXR1cm4gYnRvYShzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gYjY0X3RvX3V0Zjgoc3RyKSB7XG4gICAgXHRyZXR1cm4gYXRvYihzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKSB7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KHVuaXhUaW1lKSk7XG5cdH1cblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH1cblxuXHQvL2RlZmluZSBjb250cm9sbGVyIG1ldGhvZHNcblx0dm0uZGlzcGxheVBhc3NSZXFzID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodm0ubmV3TmFtZSAmJiB2bS5uZXdFbWFpbCkge1xuXHRcdFx0dm0uc2hvd1JlcXVpcm5tZW50cyA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZtLnNob3dSZXF1aXJubWVudHMgPSBmYWxzZTtcblx0XHR9XG5cdH1cblxuXHR2bS5jaGVja05ld05hbWUgPSBmdW5jdGlvbigpIHtcblx0XHRcblx0XHRpZih2bS5uZXdOYW1lKSB7XG5cdFx0XHRpZih2bS5uZXdOYW1lLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0dm0udmFsaWROZXdOYW1lLnZhbGlkID0gdHJ1ZTtcblx0XHRcdFx0dm0udmFsaWROZXdOYW1lLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0udmFsaWROZXdOYW1lLnZhbGlkID0gZmFsc2U7XG5cdFx0XHRcdHZtLnZhbGlkTmV3TmFtZS5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dm0ub3BlbkNyZWF0ZVVzZXJCdXR0b24oKTtcblx0fVxuXG5cdHZtLmNoZWNrTmV3RW1haWwgPSBmdW5jdGlvbiAoKSB7XG5cdFx0aWYodm0ubmV3RW1haWwpIHtcblx0XHRcdC8vY2hlY2sgdmFsaWRpdHlcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSsoPzpcXC5bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKSpAKD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1xcLikrW2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1wiLCBcIlwiKTtcblxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZtLm5ld0VtYWlsKSkge1xuXHRcdFx0XHR2bS52YWxpZE5ld0VtYWlsLnZhbGlkID0gdHJ1ZTtcblx0XHRcdFx0dm0udmFsaWROZXdFbWFpbC5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLnZhbGlkTmV3RW1haWwudmFsaWQgPSBmYWxzZTtcblx0XHRcdFx0dm0udmFsaWROZXdFbWFpbC5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdFx0XHR9XHRcdFx0XG5cdFx0fVxuXHRcdFxuXHRcdHZtLm9wZW5DcmVhdGVVc2VyQnV0dG9uKCk7XG5cdH1cblxuXHR2bS5jaGVja1VzZXJFbWFpbCA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHZtLnVzZXJFbWFpbCkge1xuXHRcdFx0Ly9jaGVjayB2YWxpZGl0eVxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XCIsIFwiXCIpO1xuXG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3Qodm0udXNlckVtYWlsKSkge1xuXHRcdFx0XHR2bS52YWxpZFVzZXJFbWFpbC52YWxpZCA9IHRydWU7XG5cdFx0XHRcdHZtLnZhbGlkVXNlckVtYWlsLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0udmFsaWRVc2VyRW1haWwudmFsaWQgPSBmYWxzZTtcblx0XHRcdFx0dm0udmFsaWRVc2VyRW1haWwuc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHZtLm9wZW5Vc2VyTG9naW5CdG4oKTtcblx0fVxuXG5cdHZtLmNoZWNrTmV3UGFzc3dvcmRzID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9mb3IgZWFjaCBwYXNzd29yZCBkZWZpbmUgdGhlIHBhdHRlcm4gdGhhdCB0aGUgcGFzc3dvcmQgbXVzdCBtYXRjaFxuXHRcdHZhciBjb25zdHJhaW50cyA9IHtcblx0IFx0XHQwOiBbJycsICcgeW91ciBwYXNzd29yZCBuZWVkcyB0byBiZSAxNiBjaGFyYWN0ZXJzIG9yIGxvbmdlciddLFxuXHQgXHRcdDE6IFsnJywgJyB5b3VyIHBhc3N3b3JkIG5lZWRzIHRvIGJlIGxlc3MgdGhhbiAxMDAgY2hhcmFjdGVycyddLFxuXHQgXHRcdDI6IFsnW1xcIVxcQFxcI1xcJFxcJVxcXlxcJlxcKl0nLCBcIiBubyByZXF1aXJlZCBzeW1ib2xzIGZvdW5kXCJdLFxuXHQgXHRcdDM6IFsnWzAtOV0nLCBcIiBubyBudW1iZXJzIGZvdW5kXCJdLFxuXHQgXHRcdDQ6IFsnW2Etel0nLCBcIiBubyBsb3dlcmNhc2UgbGV0dGVycyBmb3VuZFwiXSxcblx0IFx0XHQ1OiBbJ1tBLVpdJywgXCIgbm8gdXBwZXJjYXNlIGxldHRlcnMgZm91bmRcIl0sXG5cdCBcdFx0NjogWydbXkEtejAtOVxcIVxcQFxcI1xcJFxcJVxcXlxcJlxcKl0nLCBcIiBpbGxlZ2FsIGNoYXJhY3RlcnMgZm91bmRcIl0sXG4gXHRcdH07XG4gXHRcdFxuIFx0XHQvL2NoZWNrIGZvciBsZW5ndGhcbiBcdFx0aWYodm0ubmV3UGFzc3dvcmQpIHtcbiBcdFx0XHRpZih2bS5uZXdQYXNzd29yZC5sZW5ndGggPiAxNSkgeyBcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzBdLnN0eWxlID0ge2NvbG9yOidncmVlbid9OyBcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzBdLm1ldCA9IHRydWU7IFxuIFx0XHRcdH0gZWxzZSB7XG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1swXS5zdHlsZSA9IHtjb2xvcjoncmVkJ307IFxuIFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMF0ubWV0ID0gZmFsc2U7XG4gXHRcdFx0fVxuIFx0XHRcdGlmKHZtLm5ld1Bhc3N3b3JkLmxlbmd0aCA8PSAxMDApIHsgXG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1sxXS5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTsgXG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1sxXS5tZXQgPSB0cnVlO1xuIFx0XHRcdH0gZWxzZSB7XG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1sxXS5zdHlsZSA9IHtjb2xvcjoncmVkJ307IFxuIFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMV0ubWV0ID0gZmFsc2U7XG4gXHRcdFx0fVxuXG4gXHRcdFx0Ly9jaGVjayBjb25zdHJhaW50cyAyLTVcbiBcdFx0XHRmb3IoaSA9IDI7IGkgPCA2OyBpKyspIHtcblx0IFx0XHRcdC8vY2hlY2sgZm9yIHJlcXVpcmVkIHN5bWJvbHMsIHVwcGVyY2FzZSwgbG9zZXJjYXNlLCBhbmQgY2hhcmFjdGVyc1xuXHQgXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKGNvbnN0cmFpbnRzW2ldWzBdLCBcIlwiKTtcdFxuXG5cdCBcdFx0XHQvL3Rlc3QgZWFjaCBjb25zdHJhdGludFxuXHQgXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZtLm5ld1Bhc3N3b3JkKSkge1xuXHQgXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1tpXS5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0IFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbaV0ubWV0ID0gdHJ1ZTtcblx0IFx0XHRcdH0gZWxzZSB7XG5cdCBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzW2ldLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0IFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbaV0ubWV0ID0gZmFsc2U7XG5cdCBcdFx0XHR9XG5cdCBcdFx0fVxuXG5cdCBcdFx0Ly9jaGVjayBpbGxlZ2FsIGNoYXJhY3RlcnNcblx0IFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoY29uc3RyYWludHNbNl1bMF0sIFwiXCIpO1xuXG5cdCBcdFx0Ly9ydW4gdGhlIGNoZWNrXG5cdCBcdFx0aWYoIWNvbnN0cmFpbnQudGVzdCh2bS5uZXdQYXNzd29yZCkpIHtcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzZdLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzZdLm1ldCA9IGZhbHNlO1xuXHQgXHRcdH0gZWxzZSB7XG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1s2XS5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzZdLm1ldCA9IHRydWU7XG5cdCBcdFx0fVxuXG5cdCBcdFx0Ly9pZiBhbGwgY29uc3RyYWlucyBtZXQsIHRocm93IHZhbGlkIHBhc3MgZmxhZ1xuXHQgXHRcdGlmKCB2bS5wYXNzd29yZFJlcXVpcm5tZW50c1swXS5tZXQgJiZcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzFdLm1ldCAmJlxuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMl0ubWV0ICYmXG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1szXS5tZXQgJiZcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzRdLm1ldCAmJlxuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNV0ubWV0ICYmXG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1s2XS5tZXQpIHtcblx0IFx0XHRcdHZtLnNlY3VyZVBhc3N3b3JkLnNlY3VyZSA9IHRydWVcblx0IFx0XHR9IGVsc2Uge1xuXHQgXHRcdFx0dm0uc2VjdXJlUGFzc3dvcmQuc2VjdXJlID0gZmFsc2U7XG5cdCBcdFx0fVxuXG5cdCBcdFx0aWYodm0uc2VjdXJlUGFzc3dvcmQuc2VjdXJlKSB7XG5cdCBcdFx0XHR2bS5zZWN1cmVQYXNzd29yZC5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0IFx0XHR9IGVsc2Uge1xuXHQgXHRcdFx0dm0uc2VjdXJlUGFzc3dvcmQuc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHQgXHRcdH1cbiBcdFx0fVxuIFx0XHRcbiBcdFx0dm0ub3BlbkNyZWF0ZVVzZXJCdXR0b24oKTtcblx0fVxuXG5cdHZtLmNoZWNrVXNlclBhc3N3b3JkcyA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHZtLnVzZXJQYXNzd29yZCkge1xuXHRcdFx0aWYodm0udXNlclBhc3N3b3JkLmxlbmd0aCA+IDE1KSB7XG5cdFx0XHRcdHZtLnZhbGlkVXNlclBhc3N3b3JkLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHRcdFx0XHR2bS52YWxpZFVzZXJQYXNzd29yZC52YWxpZCA9IHRydWU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS52YWxpZFVzZXJQYXNzd29yZC5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdFx0XHRcdHZtLnZhbGlkVXNlclBhc3N3b3JkLnZhbGlkID0gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHR9XG5cdFx0XG5cdFx0dm0ub3BlblVzZXJMb2dpbkJ0bigpO1xuXHR9XG5cblx0dm0ub3BlbkNyZWF0ZVVzZXJCdXR0b24gPSBmdW5jdGlvbigpIHtcblx0XHRpZih2bS52YWxpZE5ld05hbWUudmFsaWQgJiYgdm0udmFsaWROZXdFbWFpbC52YWxpZCAmJiB2bS5zZWN1cmVQYXNzd29yZC5zZWN1cmUpIHtcblx0XHRcdHZtLnVubG9ja0NyZWF0ZVVzZXJCdG4uY2xhc3MgPSAnYnRuIGJ0bi1zdWNjZXNzJztcblx0XHRcdHZtLnVubG9ja0NyZWF0ZVVzZXJCdG4udXNhYmxlID0gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dm0udW5sb2NrQ3JlYXRlVXNlckJ0bi5jbGFzcyA9ICdidG4gYnRuLXdhcm5pbmcnO1xuXHRcdFx0dm0udW5sb2NrQ3JlYXRlVXNlckJ0bi51c2FibGUgPSBmYWxzZTtcdFxuXHRcdH1cblxuXHR9XG5cblx0dm0ub3BlblVzZXJMb2dpbkJ0biA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHZtLnZhbGlkVXNlckVtYWlsLnZhbGlkICYmIHZtLnZhbGlkVXNlclBhc3N3b3JkLnZhbGlkKSB7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLmNsYXNzID0gJ2J0biBidG4tc3VjY2Vzcyc7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLnVzYWJsZSA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4uY2xhc3MgPSAnYnRuIGJ0bi13YXJuaW5nJztcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlID0gZmFsc2U7XHRcblx0XHR9XG5cdH1cblxuXHR2bS51cGRhdGUgPSBmdW5jdGlvbigpIHtcblx0XHQvL3NldCB2YWx1ZXNcblx0XHR2bS5uZXdOYW1lID0gJGRvY3VtZW50LmZpbmQoJyNuZXdOYW1lJylbMF0udmFsdWU7XG5cdFx0dm0ubmV3RW1haWwgPSAkZG9jdW1lbnQuZmluZCgnI25ld0VtYWlsJylbMF0udmFsdWU7XG5cdFx0dm0udXNlckVtYWlsID0gJGRvY3VtZW50LmZpbmQoJyN1c2VyRW1haWwnKVswXS52YWx1ZTtcblx0XHRcblx0XHR2bS5jaGVja05ld05hbWUoKTtcblx0XHR2bS5jaGVja05ld0VtYWlsKCk7XG5cdFx0dm0uY2hlY2tVc2VyRW1haWwoKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHJlZGlyZWN0KHBhdGgsIHVzZXJEYXRhKSB7XG5cdFx0dmFyIGZ1bGxQYXRoID0gcGF0aCArICcvJyArIGN1cnJlbnRVc2VyRGF0YS51aWQgKyAnLycgKyBjdXJyZW50VXNlckRhdGEudG9rZW47XG5cdFx0Ly9yZWRpcmVjdFxuXHRcdCRsb2cuaW5mbygncmVkaXJlY3RpbmcgdG86ICcgKyBmdWxsUGF0aCk7XG5cdFx0JGxvY2F0aW9uLnBhdGgoZnVsbFBhdGgpO1xuXHRcdCRzY29wZS4kYXBwbHkoKTtcblx0fVxuXG5cdHZtLmNyZWF0ZU5ld1VzZXIgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9nLmluZm8oJ0NyZWF0aW5nIGEgbmV3IHVzZXIgYWNjb3VudCBub3chJyk7XG5cblx0XHRpZih2bS51bmxvY2tDcmVhdGVVc2VyQnRuLnVzYWJsZSkge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVcblx0XHRcdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXG5cdFx0XHRyZWYuY3JlYXRlVXNlcih7XG5cdFx0XHRcdGVtYWlsOnZtLm5ld0VtYWlsLFxuXHRcdFx0XHRwYXNzd29yZDp2bS5uZXdQYXNzd29yZFxuXHRcdFx0fSxmdW5jdGlvbihlcnJvciwgdXNlckRhdGEpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ0Vycm9yIGNyZWF0aW5nIHVzZXI6ICcgKyBlcnJvcik7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly9sb2cgcmVzdWx0c1xuXHRcdFx0XHRcdCRsb2cuaW5mbyh1c2VyRGF0YSk7XG5cblx0XHRcdFx0XHQvL3NhdmUgYWxsIHRoZSBkYXRhXG5cdFx0XHRcdFx0Y3VycmVudFVzZXJEYXRhID0gdXNlckRhdGE7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly9nZW5lcmF0ZSB0aGUgdXNlciByZWNvcmRcblx0XHRcdFx0XHR2YXIgdXNlcnNSZWYgPSByZWYuY2hpbGQoJ1VzZXJzLycgKyB1c2VyRGF0YS51aWQpO1xuXHRcdFx0XHRcdHZhciBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XG5cblx0XHRcdFx0XHQvL3dyaXRlIG5ldyB1c2VyIHRvIHRoZSBkYXRhYmFzZSB3aXRoIGJpbyBpbmZvXG5cdFx0XHRcdFx0dXNlcnNSZWYuc2V0KHsgXG5cdFx0XHRcdFx0XHQnYmlvJzoge1xuXHRcdFx0XHRcdFx0XHQnbmFtZSc6IHZtLm5ld05hbWUsXG5cdFx0XHRcdFx0XHRcdCdlbWFpbCc6IHZtLm5ld0VtYWlsXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0J2V2ZW50cyc6IHtcblx0XHRcdFx0XHRcdFx0J3BlbmRpbmcnOiB7XG5cdFx0XHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdCdob3N0aW5nJzoge1xuXHRcdFx0XHRcdFx0XHRcdCd1cGRhdGVkJzogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHQnYXR0ZW5kaW5nJzoge1xuXHRcdFx0XHRcdFx0XHRcdCd1cGRhdGVkJzogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHQnY29tcGxldGVkJzoge1xuXHRcdFx0XHRcdFx0XHRcdCd1cGRhdGVkJzogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0XHRcdGlmKGVycm9yKSB7XG5cdFx0XHRcdFx0XHRcdCRsb2cuaW5mbygnRGF0YSBjb3VsZCBub3QgYmUgc2F2ZWQ6ICcgKyBlcnJvcik7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQkbG9nLmluZm8oJ0RhdGEgc2F2ZWQgc3VjY2Vzc2Z1bGx5LicpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdC8vYWRkIHRoaXMgdXNlciB0byB0aGUgbGlzdCBvZiByZWdpc3RlcmVkIHVzZXJzXG5cdFx0XHRcdFx0cmVmLmNoaWxkKCdVaWRzJykuY2hpbGQodXRmOF90b19iNjQodm0ubmV3RW1haWwpKS5zZXQoY3VycmVudFVzZXJEYXRhLnVpZCwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oXCJEYXRhIGNvdWxkIG5vdCBiZSBzYXZlZC4gXCIgKyBlcnJvcik7XG5cdFx0XHRcdFx0XHRlbHNlICRsb2cuaW5mbyhcInVpZCBjcmVhdGVkIHN1Y2Vzc2Z1bGx5LlwiKTtcblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdC8vcmVkaXJlY3QgdG8gVXNlckluZm9ybWF0aW9uXG5cdFx0XHRcdFx0cmVkaXJlY3QoJy91c2VySW5mb3JtYXRpb24nLCBjdXJyZW50VXNlckRhdGEpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdH1cblx0fVxuXG5cdHZtLmxvZ2luUmVnaXN0ZXJlZFVzZXIgPSBmdW5jdGlvbigpIHtcblxuXHRcdGlmKHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlKSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZVxuXHRcdFx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cblx0XHRcdC8vYXV0aGVudGljYXRlIHRoZSB1c2VyXG5cdFx0XHRyZWYuYXV0aFdpdGhQYXNzd29yZCh7XG5cdFx0XHRcdGVtYWlsOiB2bS51c2VyRW1haWwsXG5cdFx0XHRcdHBhc3N3b3JkOiB2bS51c2VyUGFzc3dvcmRcblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yLCBhdXRoRGF0YSkge1xuXHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnRXJyb3IgTG9nZ2luZyBJbjogJyArIGVycm9yKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ0xvZ2dlZCBJbiBzdWNjZXNzZnVsbHk6ICcgKyBhdXRoRGF0YS51aWQpO1xuXHRcdFx0XHRcdCRsb2cuaW5mbyhhdXRoRGF0YSk7XG5cdFx0XHRcdFx0Ly9zYXZlIGFsbCB0aGUgZGF0YVxuXHRcdFx0XHRcdGN1cnJlbnRVc2VyRGF0YSA9IGF1dGhEYXRhO1xuXG5cdFx0XHRcdFx0Ly9sb2FkIHVzZXIgYmlvXG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly9sb2FkIHVzZXIgZXZlbnRzXG5cblx0XHRcdFx0XHQvL3JlZGlyZWN0XG5cdFx0XHRcdFx0cmVkaXJlY3QoJy91c2VySW5mb3JtYXRpb24nLCBjdXJyZW50VXNlckRhdGEpO1xuXHRcdFx0XHRcdCRzY29wZS4kYXBwbHkoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHR9XG5cblx0fVxuXG5cdHZtLmFsZXJ0TWUgPSBmdW5jdGlvbigpIHtcblx0XHRhbGVydCgndGhpcyBpcyB3b3JraW5nISBhbiBhbGVydCEnKTtcblx0fVxuXG5cdHZtLm9uUmVzaXplRnVuY3Rpb24gPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgaW5wdXRUZXh0ID0gYW5ndWxhci5lbGVtZW50KCcuaW5wdXRUZXh0Jyk7XG5cdFx0aWYoJHdpbmRvdy5vdXRlcldpZHRoID4gJHdpbmRvdy5vdXRlckhlaWdodCkge1xuXHRcdFx0aW5wdXRUZXh0LmNzcygnZm9udC1zaXplJywgJzJlbScpO1xuXHRcdFx0JGxvZy5pbmZvKCdtYWtpbmcgYmlnZ2VyJyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlucHV0VGV4dC5jc3MoJ2ZvbnQtc2l6ZScsICcxLjJlbScpO1xuXHRcdH1cblx0fVxuXG5cdC8vZXZlbnQgbGlzdGVuZXJzXG5cdGlmICgnYWRkRXZlbnRMaXN0ZW5lcicgaW4gJGRvY3VtZW50KSB7XG5cdCAgICAkZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkge1xuXHQgICAgXHQkbG9nLmluZm8oJ2FkZGluZyBGYXN0Q2xpY2snKTtcblx0ICAgICAgICBGYXN0Q2xpY2suYXR0YWNoKCRkb2N1bWVudC5ib2R5KTtcblx0ICAgIH0sIGZhbHNlKTtcblx0fVxuXG5cdGFuZ3VsYXIuZWxlbWVudCgkd2luZG93KS5iaW5kKCdyZXNpemUnLCBmdW5jdGlvbigpIHtcblx0XHR2bS5vblJlc2l6ZUZ1bmN0aW9uKCk7XG5cdFx0Ly8kc2NvcGUuJGFwcGx5KCk7XG5cdH0pO1xuXG5cdGFuZ3VsYXIuZWxlbWVudCgkZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXHRcdGlmKCR3aW5kb3cub3V0ZXJXaWR0aCA8IDYwMCkge1xuXHRcdFx0dm0ub25SZXNpemVGdW5jdGlvbigpO1xuXHRcdFx0Ly8kc2NvcGUuJGFwcGx5KCk7XG5cdFx0fVxuXHR9KVxuXG5cblx0IHZtLm1hc3RlciA9IHt9O1xuXG5cdCAgdm0udXBkYXRlID0gZnVuY3Rpb24odXNlcikge1xuXHQgICAgdm0ubWFzdGVyID0gYW5ndWxhci5jb3B5KHVzZXIpO1xuXHQgIH07XG5cblx0ICB2bS5yZXNldCA9IGZ1bmN0aW9uKGZvcm0pIHtcblx0ICAgIGlmIChmb3JtKSB7XG5cdCAgICAgIGZvcm0uJHNldFByaXN0aW5lKCk7XG5cdCAgICAgIGZvcm0uJHNldFVudG91Y2hlZCgpO1xuXHQgICAgfVxuXHQgICAgdm0udXNlciA9IGFuZ3VsYXIuY29weSh2bS5tYXN0ZXIpO1xuXHQgIH07XG5cblx0ICB2bS5yZXNldCgpO1xufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ01haW5Db250cm9sbGVyJywgTWFpbkNvbnRyb2xsZXIpO1xuXG5NYWluQ29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJywgJyRsb2NhdGlvbicsICckZG9jdW1lbnQnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBNYWluQ29udHJvbGxlcigkbG9nLCAkbG9jYXRpb24sICRkb2N1bWVudCkge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHR2YXIgZmJVUkwgPSAnaHR0cHM6Ly9tZWV0dXBwbGFubmVyLmZpcmViYXNlaW8uY29tLyc7XG5cdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoZmJVUkwpOyBcblxuXHR2bS5sb2dvdXQgPSBmdW5jdGlvbigpIHtcblx0XHRhbGVydCgnbG9nZ2luZyB5b3Ugb3V0IScpO1xuXHRcdHJlZi51bmF1dGgoKTtcblx0XHQkbG9jYXRpb24ucGF0aCgnLycpO1xuXHR9O1xuXG5cdGlmICgnYWRkRXZlbnRMaXN0ZW5lcicgaW4gJGRvY3VtZW50KSB7XG4gICAgJGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHtcbiAgICBcdCRsb2cuaW5mbygnYWRkaW5nIEZhc3RDbGljaycpO1xuICAgICAgICBGYXN0Q2xpY2suYXR0YWNoKCRkb2N1bWVudC5ib2R5KTtcbiAgICB9LCBmYWxzZSk7XG59XG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignTmV3VXNlclNpZ25VcENvbnRyb2xsZXInLCBOZXdVc2VyU2lnblVwQ29udHJvbGxlcik7XG5cbk5ld1VzZXJTaWduVXBDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJywgJ3ZhbGlkYXRpb24nXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBOZXdVc2VyU2lnblVwQ29udHJvbGxlcigkc2NvcGUsICRsb2csIHZhbGlkYXRpb24pIHtcblx0dmFyIHZtID0gdGhpcztcblxuXHQvL2RlZmluZSB2bSBpbnB1dCB2YXJpYWJsZXNcblx0dm0uaW5wdXRzID0ge1xuXHRcdG5ld05hbWU6ICcnLFxuXHRcdG5ld0VtYWlsOiAnJyxcblx0XHRuZXdQYXNzd29yZDogJycsXG5cdFx0YWxsRmllbGRzRGVmaW5lZDogZmFsc2Vcblx0fVxuXHR2bS5lcnJvcnMgPSB7XG5cdFx0bmFtZTogJycsXG5cdFx0ZW1haWw6ICcnLFxuXHRcdHBhc3N3b3JkOiBmYWxzZSxcblx0XHRwYXNzZXNBbGxUZXN0czogZmFsc2Vcblx0fVxuXHR2bS5wYXNzUmVxcyA9IHtcblx0XHQwOiB7IGlkOicnLCByZXE6J0lzIGF0IGxlYXN0IDE2IGNoYXJhY3RlcnMgbG9uZycsIGZ1bGZpbGxlZDpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9fSxcblx0XHQxOiB7IGlkOicnLCByZXE6J0lzIG5vIGxvbmdlciB0aGFuIDEwMCBjaGFyYWN0ZXJzJywgZnVsZmlsbGVkOmZhbHNlLCAnc3R5bGUnOntjb2xvcjoncmVkJ30gfSxcblx0XHQyOiB7IGlkOicnLCByZXE6J0NvbnRhaW5zIGF0IGxlYXN0IG9uZSBsb3dlcmNhc2UgbGV0dGVyJywgZnVsZmlsbGVkOmZhbHNlLCAnc3R5bGUnOntjb2xvcjoncmVkJ30gfSxcblx0XHQzOiB7IGlkOicnLCByZXE6J0NvbnRhaW5zIGF0IGxlYXN0IG9uZSB1cHBlcmNhc2UgbGV0dGVyJywgZnVsZmlsbGVkOmZhbHNlLCAnc3R5bGUnOntjb2xvcjoncmVkJ30gfSxcblx0XHQ0OiB7IGlkOicnLCByZXE6J0NvbnRhaW5zIGF0IGxlYXN0IG9uZSBudW1iZXInLCBmdWxmaWxsZWQ6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOidyZWQnfSB9LFxuXHRcdDU6IHsgaWQ6JycsIHJlcTonQ29udGFpbnMgYXQgbGVhc3Qgb25lIHJlcXVpcmVkIHN5bWJvbCAoXFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqKScsIGZ1bGZpbGxlZDpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9IH0sXG5cdFx0NjogeyBpZDonJywgcmVxOlwiRG9lc24ndCBoYXZlIGFueSBpbGxlZ2FsIGNoYXJhY3RlcnNcIiwgZnVsZmlsbGVkOnRydWUsICdzdHlsZSc6e2NvbG9yOidyZWQnfSB9XG5cdH1cblx0dm0uc2hvd1JlcXNCb3ggPSBmYWxzZTtcblxuXHQvL2RlZmluZSByZXF1aXJlZCBmaWVsZCBjb25zdHJhaW50c1xuXHR2YXIgc2lnbnVwVmFsaWRhdGlvbiA9IHZhbGlkYXRpb247XG5cblx0Ly9kZWZpbmUgY29udHJvbGxlciBtZXRob2RzXG5cdGZ1bmN0aW9uIHZlcmlmeVJlcXVpcm5tZW50cygpIHtcblx0XHRpZih2bS5lcnJvcnMubmFtZSA9PSAnJyAmJiB2bS5lcnJvcnMuZW1haWwgPT0gJycgJiYgIXZtLmVycm9ycy5wYXNzd29yZCkgdm0uZXJyb3JzLnBhc3Nlc0FsbFRlc3RzID0gdHJ1ZTtcblx0XHRlbHNlIHZtLmVycm9ycy5wYXNzZXNBbGxUZXN0cyA9IGZhbHNlO1xuXG5cdFx0aWYoIGFuZ3VsYXIuaXNEZWZpbmVkKHZtLmlucHV0cy5uZXdOYW1lKSAmJiB2bS5pbnB1dHMubmV3TmFtZSAhPT0gJycgJiZcblx0XHRcdGFuZ3VsYXIuaXNEZWZpbmVkKHZtLmlucHV0cy5uZXdFbWFpbCkgJiYgdm0uaW5wdXRzLm5ld0VtYWlsICE9PSAnJyAmJlxuXHRcdFx0YW5ndWxhci5pc0RlZmluZWQodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKSAmJiB2bS5pbnB1dHMubmV3UGFzc3dvcmQgIT09ICcnKSBcblx0XHRcdFx0dm0uaW5wdXRzLmFsbEZpZWxkc0RlZmluZWQgPSB0cnVlO1xuXHRcdGVsc2Ugdm0uaW5wdXRzLmFsbEZpZWxkc0RlZmluZWQgPSBmYWxzZTtcblx0fVxuXG5cblxuXHQvL2RlZmluZSB2bSBhY2Nlc3NpYmxlIG1ldGhvZHNcblx0dm0uY2hlY2tOZXdOYW1lID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZVxuXHRcdHZhciBlcnJvcnMgPSBbXTtcblx0XHR2YXIgaGFzTmFtZSA9IHNpZ251cFZhbGlkYXRpb24ucmVxdWlyZWQodm0uaW5wdXRzLm5ld05hbWUpO1xuXHRcdHZhciBsb25nRW5vdWdoID0gc2lnbnVwVmFsaWRhdGlvbi5taW5OYW1lTGVuZ3RoKHZtLmlucHV0cy5uZXdOYW1lKVxuXHRcdFxuXHRcdC8vbG9nIGVycm9yc1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGhhc05hbWUpKSBlcnJvcnMucHVzaChoYXNOYW1lKTtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChsb25nRW5vdWdoKSkgZXJyb3JzLnB1c2gobG9uZ0Vub3VnaCk7XG5cblx0XHQvL3VwZGF0ZSB0aGUgZXJyb3JzIG1vZGVsXG5cdFx0aWYoZXJyb3JzLmxlbmd0aCA+IDApIHZtLmVycm9ycy5uYW1lID0gZXJyb3JzLmpvaW4oJywgJyk7XG5cdFx0ZWxzZSB2bS5lcnJvcnMubmFtZSA9ICcnO1xuXG5cdFx0dmVyaWZ5UmVxdWlybm1lbnRzKCk7XG5cdH1cblxuXHR2bS5jaGVja05ld0VtYWlsID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZVxuXHRcdHZhciBlcnJvcnMgPSBbXTtcblx0XHR2YXIgaGFzRW1haWwgPSBzaWdudXBWYWxpZGF0aW9uLnJlcXVpcmVkKHZtLmlucHV0cy5uZXdFbWFpbCk7XG5cdFx0dmFyIGlzQW5FbWFpbCA9IHNpZ251cFZhbGlkYXRpb24uZW1haWwodm0uaW5wdXRzLm5ld0VtYWlsKTtcblx0XHRcblx0XHQvL2xvZyBlcnJvcnNcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChoYXNFbWFpbCkpIGVycm9ycy5wdXNoKGhhc0VtYWlsKTtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChpc0FuRW1haWwpKSBlcnJvcnMucHVzaChpc0FuRW1haWwpO1xuXG5cdFx0Ly91cGRhdGUgdGhlIGVycm9ycyBtb2RlbFxuXHRcdGlmKGVycm9ycy5sZW5ndGggPiAwKSB2bS5lcnJvcnMuZW1haWwgPSBlcnJvcnMuam9pbignLCAnKTtcblx0XHRlbHNlIHZtLmVycm9ycy5lbWFpbCA9ICcnO1xuXG5cdFx0dmVyaWZ5UmVxdWlybm1lbnRzKCk7XG5cdH1cblxuXHR2bS5jaGVja05ld1Bhc3N3b3JkID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9mbGlwIG9uIHJlcXMgYm94XG5cdFx0dm0uc2hvd1JlcXNCb3ggPSB0cnVlO1xuXG5cdFx0Ly9sb2NhbCB2YXJpYWJsZVxuXHRcdHZhciBlcnJvcnMgPSBbXTtcblx0XHR2YXIgaGFzUGFzc3dvcmQgPSBzaWdudXBWYWxpZGF0aW9uLnJlcXVpcmVkKHZtLmlucHV0cy5uZXdQYXNzd29yZCk7XG5cdFx0dmFyIHNwZWNpZmljUmVxcyA9IFtcblx0XHRcdHNpZ251cFZhbGlkYXRpb24ubWluUGFzc0xlbmd0aCh2bS5pbnB1dHMubmV3UGFzc3dvcmQpLFxuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5tYXhQYXNzTGVuZ3RoKHZtLmlucHV0cy5uZXdQYXNzd29yZCksXG5cdFx0XHRzaWdudXBWYWxpZGF0aW9uLmF0TGVhc3RPbmVMb3dlcmNhc2Uodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKSxcblx0XHRcdHNpZ251cFZhbGlkYXRpb24uYXRMZWFzdE9uZVVwcGVyY2FzZSh2bS5pbnB1dHMubmV3UGFzc3dvcmQpLFxuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5hdExlYXN0T25lTnVtYmVyKHZtLmlucHV0cy5uZXdQYXNzd29yZCksXG5cdFx0XHRzaWdudXBWYWxpZGF0aW9uLmF0TGVhc3RPbmVTeW1ib2wodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKSxcblx0XHRcdHNpZ251cFZhbGlkYXRpb24uaWxsZWdhbENoYXJhY3Rlcih2bS5pbnB1dHMubmV3UGFzc3dvcmQpXG5cdFx0XTtcblxuXHRcdC8vbG9nIGVycm9yc1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGhhc1Bhc3N3b3JkKSkgZXJyb3JzLnB1c2goaGFzUGFzc3dvcmQpO1xuXG5cdFx0Ly91cGRhdGUgdGhlIGVycm9ycyBtb2RlbFxuXHRcdGlmKGVycm9ycy5sZW5ndGggPiAwKSB2bS5lcnJvcnMucGFzc3dvcmQgPSBlcnJvcnMuam9pbignLCAnKTtcblx0XHRlbHNlIHZtLmVycm9ycy5lbWFpbCA9ICcnO1xuXG5cdFx0Ly91cGRhdGUgcmVxcyBtb2RlbFxuXHRcdHZhciBhbnlFcnJvcnMgPSBmYWxzZTtcblx0XHRmb3IoaT0wOyBpPDc7IGkrKykge1xuXHRcdFx0aWYoc3BlY2lmaWNSZXFzW2ldKSB7XG5cdFx0XHRcdHZtLnBhc3NSZXFzW2ldLmZ1bGZpbGxlZCA9IHRydWU7XG5cdFx0XHRcdHZtLnBhc3NSZXFzW2ldLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0ucGFzc1JlcXNbaV0uZnVsZmlsbGVkID0gZmFsc2U7XG5cdFx0XHRcdHZtLnBhc3NSZXFzW2ldLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0XHRcdFx0YW55RXJyb3JzID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR2bS5lcnJvcnMucGFzc3dvcmQgPSBhbnlFcnJvcnM7XG5cdFx0dmVyaWZ5UmVxdWlybm1lbnRzKCk7XG5cdH1cblxuXHR2bS5leGl0UGFzc3dvcmQgPSBmdW5jdGlvbigpIHtcblx0XHR2bS5jaGVja05ld1Bhc3N3b3JkKCk7XG5cdFx0dm0uc2hvd1JlcXNCb3ggPSBmYWxzZTtcblx0fVxuXG5cdHZtLmNyZWF0ZU5ld1VzZXIgPSBmdW5jdGlvbiAoKSB7XG5cdFx0JGxvZy5pbmZvKCdjcmVhdGluZyBhIG5ldyB1c2VyJyk7XG5cdH1cblx0XG5cdC8vcnVuIHRpbWUgYWN0aW9uc1xuXG59XG4iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCd0b3BNZW51Q29udHJvbGxlcicsIHRvcE1lbnVDb250cm9sbGVyKTtcblxudG9wTWVudUNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnLCAnJGxvY2F0aW9uJywgJyRkb2N1bWVudCcsICckd2luZG93J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gdG9wTWVudUNvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCAkbG9jYXRpb24sICRkb2N1bWVudCwgJHdpbmRvdykge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHR2YXIgZmJVUkwgPSAnaHR0cHM6Ly9tZWV0dXBwbGFubmVyLmZpcmViYXNlaW8uY29tLyc7XG5cdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXG5cdC8vbG9jYWwgdmFyaWFibGVzXG5cdHZtLmxvZ2dlZEluID0gZmFsc2VcblxuXHQvL3N0eWxlcyB2YXJpYWJsZXNcblx0XG5cdC8vZXZlbnQgbGlzdGVuZXJzXG5cdGlmICgnYWRkRXZlbnRMaXN0ZW5lcicgaW4gJGRvY3VtZW50KSB7XG5cdCAgICAkZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkge1xuXHQgICAgXHQkbG9nLmluZm8oJ2FkZGluZyBGYXN0Q2xpY2snKTtcblx0ICAgICAgICBGYXN0Q2xpY2suYXR0YWNoKCRkb2N1bWVudC5ib2R5KTtcblx0ICAgIH0sIGZhbHNlKTtcblx0fVxuXG5cdGFuZ3VsYXIuZWxlbWVudCgkd2luZG93KS5iaW5kKCdyZXNpemUnLCBmdW5jdGlvbigpIHtcblx0XHR2bS5vblJlc2l6ZUZ1bmN0aW9uKCk7XG5cdFx0JHNjb3BlLiRhcHBseSgpO1xuXHR9KTtcblxuXHRhbmd1bGFyLmVsZW1lbnQoJGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcblx0XHRpZigkd2luZG93Lm91dGVyV2lkdGggPCA2MDApIHtcblx0XHRcdHZtLm9uUmVzaXplRnVuY3Rpb24oKTtcblx0XHRcdCRzY29wZS4kYXBwbHkoKTtcblx0XHR9XG5cdH0pXG5cdC8vZHluYW1pY2FsbHkgc2V0IGlucHV0IHdpZHRoXG5cblxuXHQvLyBDcmVhdGUgYSBjYWxsYmFjayB3aGljaCBsb2dzIHRoZSBjdXJyZW50IGF1dGggc3RhdGVcblx0ZnVuY3Rpb24gaW5pdCgpIHtcblx0XHR2bS5vblJlc2l6ZUZ1bmN0aW9uKCk7XG5cdFx0JHNjb3BlLiRhcHBseSgpO1xuXHR9XG5cblx0ZnVuY3Rpb24gYXV0aERhdGFDYWxsYmFjayhhdXRoRGF0YSkge1xuXHQgIGlmIChhdXRoRGF0YSkge1xuXHQgICAgJGxvZy5pbmZvKFwiVXNlciBcIiArIGF1dGhEYXRhLnVpZCArIFwiIGlzIGxvZ2dlZCBpbiB3aXRoIFwiICsgYXV0aERhdGEucHJvdmlkZXIpO1xuXHQgICAgdm0ubG9nZ2VkSW4gPSB0cnVlO1xuXHQgIH0gZWxzZSB7XG5cdCAgICAkbG9nLmluZm8oXCJVc2VyIGlzIGxvZ2dlZCBvdXRcIik7XG5cdCAgICB2bS5sb2dnZWRJbiA9IGZhbHNlO1xuXHQgIH1cblx0fVxuXG5cdGZ1bmN0aW9uIHJlZGlyZWN0KHBhdGgsIHVzZXJEYXRhKSB7XG5cdFx0dmFyIGZ1bGxQYXRoID0gcGF0aCArICcvJyArIHVzZXJEYXRhLnVpZCArICcvJyArIHVzZXJEYXRhLnRva2VuO1xuXHRcdC8vcmVkaXJlY3Rcblx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIHRvOiAnICsgZnVsbFBhdGgpO1xuXHRcdCRsb2NhdGlvbi5wYXRoKGZ1bGxQYXRoKTtcblx0XHQvLyRzY29wZS4kYXBwbHkoKTtcblx0fVxuXG5cdC8vdm0gYWNjZXNzaWJsZSBtZXRob2RzXG5cdHZtLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2cuaW5mbygnbG9nZ2luZyBvdXQhJyk7XG5cdFx0dm0ubG9nZ2VkSW4gPSBmYWxzZTtcblx0XHRyZWYudW5hdXRoKCk7XG5cdFx0cmVkaXJlY3QoJy8nLCB7dWlkOicnLCB0b2tlbjonJ30pO1xuXHR9XG5cblx0dm0ubmF2QmFyTG9naW5SZWdpc3RlcmVkVXNlciA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2cuaW5mbygnbGF1bmNoaW5nIGxvZ2luJyk7XG5cdFx0aWYodHJ1ZSkge1xuXHRcdC8vaWYodm0udW5jbG9ja1VzZXJMb2dpbkJ0bi51c2FibGUpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlXG5cdFx0XHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHRcdFx0Ly9hdXRoZW50aWNhdGUgdGhlIHVzZXJcblx0XHRcdHJlZi5hdXRoV2l0aFBhc3N3b3JkKHtcblx0XHRcdFx0ZW1haWw6IHZtLm5hdmJhclVzZXJFbWFpbCxcblx0XHRcdFx0cGFzc3dvcmQ6IHZtLm5hdmJhclVzZXJQYXNzXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvciwgYXV0aERhdGEpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ0Vycm9yIExvZ2dpbmcgSW46ICcgKyBlcnJvcik7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdMb2dnZWQgSW4gc3VjY2Vzc2Z1bGx5OiAnICsgYXV0aERhdGEudWlkKTtcblx0XHRcdFx0XHQkbG9nLmluZm8oYXV0aERhdGEpO1xuXHRcdFx0XHRcdC8vc2F2ZSBhbGwgdGhlIGRhdGFcblxuXHRcdFx0XHRcdC8vbG9hZCB1c2VyIGJpb1xuXHRcdFx0XHRcdC8vbG9hZCB1c2VyIGV2ZW50c1xuXG5cdFx0XHRcdFx0Ly9yZWRpcmVjdFxuXHRcdFx0XHRcdHJlZGlyZWN0KCcvdXNlckluZm9ybWF0aW9uJywgYXV0aERhdGEpO1xuXHRcdFx0XHRcdCRzY29wZS4kYXBwbHkoKTtcblxuXHRcdFx0XHRcdC8vY2xpY2sgY2xvc2VkIHRoZSBuYXZiYXJcblx0XHRcdFx0XHRhbmd1bGFyLmVsZW1lbnQoJy5uYXZiYXItdG9nZ2xlJykuY2xpY2soKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblxuXG5cdFx0fVxuXG5cdH1cblxuXHR2bS5vblJlc2l6ZUZ1bmN0aW9uID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG5hdmJhcklucHV0cyA9IGFuZ3VsYXIuZWxlbWVudCgnLm5hdmJhcklucHV0cycpO1xuXHRcdG5hdmJhcklucHV0cy5jc3MoJ3dpZHRoJywgKCR3aW5kb3cub3V0ZXJXaWR0aCAtIDI2KSArICdweCcpO1xuXHR9XG5cblx0Ly8gUmVnaXN0ZXIgdGhlIGNhbGxiYWNrIHRvIGJlIGZpcmVkIGV2ZXJ5IHRpbWUgYXV0aCBzdGF0ZSBjaGFuZ2VzXG5cdHJlZi5vbkF1dGgoYXV0aERhdGFDYWxsYmFjayk7XG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignVXNlckV2ZW50c0NvbnRyb2xsZXInLCBVc2VyRXZlbnRzQ29udHJvbGxlcik7XG5cblVzZXJFdmVudHNDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJywgJyRsb2NhdGlvbicsICckcm91dGVQYXJhbXMnLCAnJGZpcmViYXNlT2JqZWN0J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gVXNlckV2ZW50c0NvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCAkbG9jYXRpb24sICRyb3V0ZVBhcmFtcywgJGZpcmViYXNlT2JqZWN0KSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdHZhciBmYlVSTCA9ICdodHRwczovL21lZXR1cHBsYW5uZXIuZmlyZWJhc2Vpby5jb20vJztcblx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdHZhciB1c2VyRXZlbnRzID0gcmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCdldmVudHMnKTtcblx0dmFyIGN1cnJlbnRVc2VyQmlvID0gcmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCdiaW8nKTtcblx0dmFyIHVzZXJFdmVudHNTbmFwc2hvdDtcblxuXHQvL2JpbmRpbmcgaW1wb3J0YW50IHZhcmlhYmxlc1xuXHR2bS5ldmVudHMgPSAkZmlyZWJhc2VPYmplY3QodXNlckV2ZW50cyk7XG5cblx0dm0uc2hvd0RlY2xpbmUgPSBmYWxzZTtcblx0XG5cdGN1cnJlbnRVc2VyQmlvLmNoaWxkKCduYW1lJykub24oJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHR2bS5jdXJyZW50VXNlck5hbWUgPSBzbmFwc2hvdC52YWwoKTtcblx0XHQkbG9nLmluZm8oJ2dvdCB0aGUgdXNlciBuYW1lJyk7XG5cdFx0JHNjb3BlLiRhcHBseSgpO1xuXHR9LCBmdW5jdGlvbihlcnJvck9iamVjdCkge1xuXHRcdCRsb2cuaW5mbyhcIlRoZSByZWFkIGZhaWxlZDogXCIgKyBlcnJvck9iamVjdC5jb2RlKTtcblx0fSk7XG5cblx0Ly9kZWNsYXJlIGxvY2FsIG1ldGhvZHNcblx0ZnVuY3Rpb24gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKSB7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KHVuaXhUaW1lKSk7XG5cdH07XG5cblx0ZnVuY3Rpb24gZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKSB7XG5cdFx0cmV0dXJuIERhdGUucGFyc2UoZGF0ZVRpbWUpO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIGdlbmVyYXRlRXZlbnRJRChkYXRlLCBub09mRXZlbnRzQWxyZWFkeSkge1xuXHRcdHJldHVybiAoZGF0ZSAqIDEwKSArIG5vT2ZFdmVudHNBbHJlYWR5O1xuXHR9XG5cblx0Ly9kZWNsYXJlIHZpZXcgbWV0aG9kc1xuXHRmdW5jdGlvbiBldmVudFJlZGlyZWN0KHBhdGgsIGV2ZW50SUQsIGhvc3RJZCkge1xuXHRcdHZhciBmdWxsUGF0aCA9IHBhdGggKyAnLycgKyBldmVudElEICsgJy8nICsgaG9zdElkICsgJy8nKyAkcm91dGVQYXJhbXMudWlkICsgJy8nICsgJHJvdXRlUGFyYW1zLnRva2VuO1xuXHRcdC8vcmVkaXJlY3Rcblx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIHRvOiAnICsgZnVsbFBhdGgpO1xuXHRcdCRsb2NhdGlvbi5wYXRoKGZ1bGxQYXRoKTtcblx0fVxuXG5cdHZtLmV2ZW50c0FyZUJlaW5nSG9zdGVkID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGV2ZW50Rm91bmQgPSBmYWxzZTtcblx0XHRmb3IoZWxlbWVudCBpbiB2bS5ldmVudHMuaG9zdGluZykge1xuXHRcdFx0aWYoZWxlbWVudCAhPSAndXBkYXRlZCcpe1xuXHRcdFx0XHRldmVudEZvdW5kID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGV2ZW50Rm91bmQ7XG5cdH1cblxuXHR2bS5ldmVudEludml0YXRpb25zUGVuZGluZyA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBldmVudEZvdW5kID0gZmFsc2U7XG5cdFx0Zm9yKGVsZW1lbnQgaW4gdm0uZXZlbnRzLnBlbmRpbmcpIHtcblx0XHRcdGlmKGVsZW1lbnQgIT0gJ3VwZGF0ZWQnKXtcblx0XHRcdFx0ZXZlbnRGb3VuZCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBldmVudEZvdW5kO1xuXHR9XG5cblx0dm0uYXR0ZW5kaW5nRXZlbnRzID0gZnVuY3Rpb24oZ3Vlc3RMaXN0KSB7XG5cdFx0dmFyIGV2ZW50Rm91bmQgPSBmYWxzZTtcblx0XHRmb3IoZWxlbWVudCBpbiB2bS5ldmVudHMuYXR0ZW5kaW5nKSB7XG5cdFx0XHRpZihlbGVtZW50ICE9ICd1cGRhdGVkJyl7XG5cdFx0XHRcdGV2ZW50Rm91bmQgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gZXZlbnRGb3VuZDtcblx0fVxuXG5cdHZtLnBlcmNlbnRSU1ZQZWQgPSBmdW5jdGlvbihndWVzdExpc3QpIHtcdFx0XG5cdFx0aWYoZ3Vlc3RMaXN0KSB7XG5cdFx0XHRyZXR1cm4gKHZtLnRvdGFsQXR0ZW5kaW5nKGd1ZXN0TGlzdCkgLyB2bS50b3RhbEludml0ZWQoZ3Vlc3RMaXN0KSkgKiAxMDA7XG5cdFx0fVxuXHRcdGVsc2UgcmV0dXJuIDA7XG5cdH1cblxuXHR2bS50b3RhbEF0dGVuZGluZyA9IGZ1bmN0aW9uKGd1ZXN0TGlzdCkge1xuXHRcdGlmKGd1ZXN0TGlzdCkge1xuXHRcdFx0dmFyIGF0dGVuZGluZyA9IDA7XG5cdFx0XHRhbmd1bGFyLmZvckVhY2goZ3Vlc3RMaXN0LCBmdW5jdGlvbihndWVzdCwgaWQpIHtcblx0XHRcdFx0aWYoZ3Vlc3QuYXR0ZW5kaW5nID09IHRydWUpIGF0dGVuZGluZysrO1xuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gYXR0ZW5kaW5nO1xuXHRcdH1cblx0XHRlbHNlIHJldHVybiAwO1xuXHR9XG5cblx0dm0udG90YWxJbnZpdGVkID0gZnVuY3Rpb24oZ3Vlc3RMaXN0KSB7XG5cdFx0aWYoZ3Vlc3RMaXN0KSB7XG5cdFx0XHR2YXIgaW52aXRlZCA9IDA7XG5cdFx0XHRhbmd1bGFyLmZvckVhY2goZ3Vlc3RMaXN0LCBmdW5jdGlvbihndWVzdCwgaWQpIHtcblx0XHRcdFx0aW52aXRlZCsrO1xuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gaW52aXRlZDtcblx0XHR9XG5cdFx0ZWxzZSByZXR1cm4gMDtcblx0fVxuXG5cdHZtLmFjY2VwdEV2ZW50SW52aXRhdGlvbiA9IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0Lypcblx0XHQkbG9nLmluZm8oZXZlbnQuaG9zdCk7XG5cdFx0JGxvZy5pbmZvKGV2ZW50LmlkKTtcblx0XHQvL3VwZGF0ZSBob3N0cycgbGlzdHNcblx0XHRyZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQoZXZlbnQuaG9zdCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdob3N0aW5nJykuY2hpbGQoZXZlbnQuaWQpLmNoaWxkKCdndWVzdExpc3QnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS51cGRhdGUoe1xuXHRcdFx0YXR0ZW5kaW5nOiB0cnVlLFxuXHRcdFx0c3RhdHVzOiAnYXR0bmRuZydcblx0XHR9KTtcblxuXHRcdC8vdXBkYXRlIGd1ZXN0J3MgbGlzdHNcblx0XHQvL2FkZCB0byB0aGUgYXR0ZW5kaW5nIGxpc3QgLSBvbiB0aGUgc2VydmVyXG5cdFx0dXNlckV2ZW50cy5jaGlsZCgnYXR0ZW5kaW5nJykuY2hpbGQoZXZlbnQuaG9zdCkuY2hpbGQoZXZlbnQuaWQpLnNldCh7XG5cdFx0XHRpZDogZXZlbnQuaWQsXG5cdFx0XHRob3N0OiBldmVudC5ob3N0LFxuXHRcdFx0ZXZlbnRUaW1lczoge1xuXHRcdFx0XHRzdGFydDogdm0uZXZlbnRzLnBlbmRpbmdbZXZlbnQuaG9zdF1bZXZlbnQuaWRdLmV2ZW50VGltZXMuc3RhcnQsXG5cdFx0XHRcdGVuZDogdm0uZXZlbnRzLnBlbmRpbmdbZXZlbnQuaG9zdF1bZXZlbnQuaWRdLmV2ZW50VGltZXMuZW5kXG5cdFx0XHR9LFxuXHRcdFx0bmFtZTogdm0uZXZlbnRzLnBlbmRpbmdbZXZlbnQuaG9zdF1bZXZlbnQuaWRdLm5hbWVcblx0XHR9KTtcblx0XHQvL2FkZCB0byB0aGUgYXR0ZW5kaW5nIGxpc3QgLSBpbiB0aGUgYnJvd3NlclxuXHRcdHZtLmV2ZW50cy5hdHRlbmRpbmdbZXZlbnQuaG9zdF1bZXZlbnQuaWRdID0ge1xuXHRcdFx0aWQ6IGV2ZW50LmlkLFxuXHRcdFx0aG9zdDogZXZlbnQuaG9zdCxcblx0XHRcdGV2ZW50VGltZXM6IHtcblx0XHRcdFx0c3RhcnQ6IHZtLmV2ZW50cy5wZW5kaW5nW2V2ZW50Lmhvc3RdW2V2ZW50LmlkXS5ldmVudFRpbWVzLnN0YXJ0LFxuXHRcdFx0XHRlbmQ6IHZtLmV2ZW50cy5wZW5kaW5nW2V2ZW50Lmhvc3RdW2V2ZW50LmlkXS5ldmVudFRpbWVzLmVuZFxuXHRcdFx0fSxcblx0XHRcdG5hbWU6IHZtLmV2ZW50cy5wZW5kaW5nW2V2ZW50Lmhvc3RdW2V2ZW50LmlkXS5uYW1lXG5cdFx0fTtcblxuXHRcdC8vcmVtb3ZlIGZyb20gdGhlIHBlbmRpbmcgbGlzdCAtIG9uIHRoZSBzZXJ2ZXJcblx0XHR1c2VyRXZlbnRzLmNoaWxkKCdwZW5kaW5nJykuY2hpbGQoZXZlbnQuaG9zdCkuY2hpbGQoZXZlbnQuaWQpLnJlbW92ZSgpO1xuXHRcdC8vcmVtb3ZlIGZyb20gdGhlIHBlbmRpbmcgbGlzdCAtIGluIHRoZSBicm93c2VyXG5cdFx0dm0uZXZlbnRzLnBlbmRpbmdbZXZlbnQuaG9zdF1bZXZlbnQuaWRdID0ge307XG5cdFx0Ki9cblx0fVxuXG5cdHZtLnJlZGlyZWN0VG9Ib3N0ZWRFdmVudCA9IGZ1bmN0aW9uKGV2ZW50SUQpIHtcblx0XHQkbG9nLmluZm8oJ3lvdVxcJ3JlIGFjY2Vzc2luZyBldmVudCAnICsgZXZlbnRJRCk7XG5cblx0XHQvL3JlZGlyZWN0IHRvIHRoZSBldmVudFxuXHRcdGV2ZW50UmVkaXJlY3QoJy9ldmVudCcsIGV2ZW50SUQsICRyb3V0ZVBhcmFtcy51aWQpO1xuXHR9XG5cblx0dm0ucmVkaXJlY3RUbzNyZFBhcnR5RXZlbnQgPSBmdW5jdGlvbihldmVudCwgaW52aXRlU3RhdHVzKSB7XG5cdFx0JGxvZy5pbmZvKGV2ZW50KTtcblxuXHRcdC8vZ2V0dGluZyB0aGUgaG9zdCdzIElkXG5cdFx0aWYoaW52aXRlU3RhdHVzID09ICdwZW5kaW5nJykge1xuXHRcdFx0JGxvZy5pbmZvKCdhY2Nlc3NpbmcgZnJvbSBhIHBlbmRpbmcgaW52aXRhdGlvbicpO1xuXHRcdFx0JGxvZy5pbmZvKGV2ZW50KTtcblx0XHRcdGV2ZW50UmVkaXJlY3QoJy9ldmVudCcsIGV2ZW50LmlkLCBldmVudC5ob3N0KTtcblxuXHRcdH0gZWxzZSBpZihpbnZpdGVTdGF0dXMgPT0gJ2F0dGVuZGluZycpIHtcblx0XHRcdCRsb2cuaW5mbygnYWNjZXNzaW5nIGZyb20gYW4gcnN2cGVkIGludml0YXRpb24nKTtcblx0XHRcdGV2ZW50UmVkaXJlY3QoJy9ldmVudCcsIGV2ZW50LmlkLCBldmVudC5ob3N0KTtcblx0XHR9XG5cblx0XHQvL3JlZGlyZWN0aW5nIHRvIHRoZSBldmVudFxuXG5cdH1cblxuXHR2bS5jcmVhdGVOZXdFdmVudCA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2cuaW5mbygneW91XFwncmUgY3JlYXRpbmcgYSBuZXcgZXZlbnQhJyk7XG5cblx0XHQvL2RlZmluZSB0aGUgZXZlbnRJRFxuXHRcdHZhciBkYXRlID0gbmV3IERhdGUoKTsgXG5cdFx0XHRpZih2bS5ldmVudHMuaG9zdGluZykgbm9PZkV2ZW50c0FscmVhZHkgPSBPYmplY3Qua2V5cyh2bS5ldmVudHMuaG9zdGluZykubGVuZ3RoO1xuXHRcdFx0ZWxzZSBub09mRXZlbnRzQWxyZWFkeSA9IDA7XG5cdFx0dmFyIGV2ZW50SUQgPSBnZW5lcmF0ZUV2ZW50SUQoZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGUpLCBub09mRXZlbnRzQWxyZWFkeSk7XG5cblx0XHQvL2NyZWF0ZSBldmVudCBtb2RlbCB0byBzdGFydCB3aXRoXG5cdFx0Ly8kbG9nLmluZm8odm0uZXZlbnRzWydob3N0aW5nJ10pO1xuXHRcdHZtLmV2ZW50cy5ob3N0aW5nW2V2ZW50SURdID0ge1xuXHRcdFx0aWQ6IGV2ZW50SUQsXG5cdFx0XHRldmVudFRpbWVzOiB7XG5cdFx0XHRcdHN0YXJ0OiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZSksXG5cdFx0XHRcdGVuZDogZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGUpXG5cdFx0XHR9LFxuXHRcdFx0aG9zdDogeyBcblx0XHRcdFx0aWQ6ICRyb3V0ZVBhcmFtcy51aWQsXG5cdFx0XHRcdG5hbWU6IHZtLmN1cnJlbnRVc2VyTmFtZVxuXHRcdFx0fVxuXHRcdH07XG5cblx0XHQvL2RlbGV0ZSB0aGUgJ3VwZGF0ZWQnIGZpZWxkXG5cdFx0aWYodm0uZXZlbnRzLmhvc3RpbmcudXBkYXRlZCA9PSAnJyB8fCB2bS5ldmVudHMuaG9zdGluZy51cGRhdGVkKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2RlbGV0aW5nIHRoZSB1cGRhdGVkIGZpZWxkJyk7XG5cdFx0XHRkZWxldGUgdm0uZXZlbnRzLmhvc3RpbmcudXBkYXRlZDtcblx0XHR9XG5cdFx0Ly9zYXZlIHRoZSBuZXcgZXZlbnRcblx0XHQvKlxuXHRcdHZtLmV2ZW50cy4kc2F2ZSgpLnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHQkbG9nLmluZm8oJ1Byb2ZpbGUgc2F2ZWQhJyk7XG5cdFx0XHQkbG9nLmluZm8odm0uZXZlbnRzLmhvc3RpbmdbZXZlbnRJRF0pO1xuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHQkbG9nLmluZm8oJ0Vycm9yIScpO1xuXHRcdH0pOyovXG5cblx0XHQvL3JlZGlyZWN0IHRvIHRoZSBuZXcgRXZlbnQgUGFnZVxuXHRcdGV2ZW50UmVkaXJlY3QoJy9ldmVudCcsIGV2ZW50SUQsICRyb3V0ZVBhcmFtcy51aWQpO1xuXHR9XG5cblx0Ly9leGVjdXRlIHNjcmlwdHNcblx0JGxvZy5pbmZvKCdpbnRvIHRoZSB1c2VyIEV2ZW50cyBjb250cm9sbGVyJyk7XG5cdCRsb2cuaW5mbyh2bS5ldmVudHMpO1xuXG59XG4iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdVc2VySW5mb3JtYXRpb25Db250cm9sbGVyJywgVXNlckluZm9ybWF0aW9uQ29udHJvbGxlcik7XG5cblVzZXJJbmZvcm1hdGlvbkNvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICckbG9jYXRpb24nLCAnJHJvdXRlUGFyYW1zJywgJyRmaXJlYmFzZU9iamVjdCddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIFVzZXJJbmZvcm1hdGlvbkNvbnRyb2xsZXIoJGxvZywgJGxvY2F0aW9uLCAkcm91dGVQYXJhbXMsICRmaXJlYmFzZU9iamVjdCkge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHR2YXIgZmJVUkwgPSAnaHR0cHM6Ly9tZWV0dXBwbGFubmVyLmZpcmViYXNlaW8uY29tLyc7XG5cdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoZmJVUkwpOyBcblx0dmFyIHVzZXJCaW8gPSByZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJ2JpbycpO1xuXHRcblx0dm0udXNlciA9ICRmaXJlYmFzZU9iamVjdCh1c2VyQmlvKTtcblxuXHRhY3RpdmF0ZSgpO1xuXG5cdC8vbG9jYWwgdmFyaWFibGVzXG5cdHZtLnByb2NlZWRCdG4gPSAnYnRuIGJ0bi1wcmltYXJ5Jztcblx0dm0uYnRuTXNzZyA9ICdNb3ZlIE9uLi4uJztcblx0dm0uZGF0YVRvU2F2ZSA9IGZhbHNlO1xuXHR2bS5pc0RhdGEgPSBmYWxzZTtcblx0Ly9pbml0aWFsaXplIHRlbXAgYmlydGhkYXlcblx0dm0udXNlci4kbG9hZGVkKCkudGhlbihmdW5jdGlvbigpIHtcblx0XHRpZih2bS51c2VyLmJpcnRoZGF5KSB7XG5cdFx0XHR2bS50ZW1wQmlydGhkYXkgPSB1bml4VGltZVRvRGF0ZVRpbWUodm0udXNlci5iaXJ0aGRheSk7XG5cdFx0fSBlbHNlIHZtLnRlbXBCaXJ0aGRheSA9IG5ldyBEYXRlKCk7XG5cdH0pO1xuXG5cdC8vbG9jYWwgbWV0aG9kc1xuXHRmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcblx0XHQvL3doYXQgaGFwcGVucyB3aGVuIHRoZSBjb250cm9sbGVyIGxhdW5jaGVzXG5cdH1cblxuXHRmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fTtcblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH07XG5cblx0ZnVuY3Rpb24gcmVkaXJlY3QocGF0aCkge1xuXHRcdHZhciBmdWxsUGF0aCA9IHBhdGggKyAnLycgKyAkcm91dGVQYXJhbXMudWlkICsgJy8nICsgJHJvdXRlUGFyYW1zLnRva2VuO1xuXHRcdC8vcmVkaXJlY3Rcblx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIHRvOiAnICsgZnVsbFBhdGgpO1xuXHRcdCRsb2NhdGlvbi5wYXRoKGZ1bGxQYXRoKTtcblx0fTtcblxuXHQvL3ZpZXcgYWNjZXNzaWJsZSBtZXRob2RzXG5cdHZtLmNoZWNrVmFsdWVzID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYoICEoYW5ndWxhci5pc1VuZGVmaW5lZCh2bS51c2VyLmVtcGxveWVyKSB8fCB2bS51c2VyLmVtcGxveWVyID09PSAnJykgfHwgXG5cdFx0XHQhKGFuZ3VsYXIuaXNVbmRlZmluZWQodm0udXNlci5qb2JUaXRsZSkgfHwgdm0udXNlci5qb2JUaXRsZSA9PT0gJycpIHx8IFxuXHRcdFx0IShhbmd1bGFyLmlzVW5kZWZpbmVkKHZtLnVzZXIuYmlydGhkYXkpIHx8IHZtLnVzZXIuYmlydGhkYXkgPT09ICcnKSkgXG5cdFx0e1xuXHRcdFx0dm0uZGF0YVRvU2F2ZSA9IHRydWU7XG5cdFx0XHR2bS5wcm9jZWVkQnRuID0gJ2J0biBidG4tc3VjY2Vzcyc7XG5cdFx0XHR2bS5idG5Nc3NnID0gJ1NhdmUgJiBDb250aW51ZSc7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZtLmRhdGFUb1NhdmUgPSBmYWxzZTtcblx0XHRcdHZtLnByb2NlZWRCdG4gPSAnYnRuIGJ0bi1wcmltYXJ5Jztcblx0XHRcdHZtLmJ0bk1zc2cgPSAnTW92ZSBPbi4uLic7XHRcblx0XHR9XG5cblx0fVxuXG5cdHZtLnNhdmVBbmRNb3ZlT24gPSBmdW5jdGlvbigpIHtcblx0XHQvL2NvbnZlcnQgdGVtcCBiaXJ0aGRheSB0byBzYXZhYmxlIGZvcm1hdFxuXHRcdHZtLnVzZXIuYmlydGhkYXkgPSBkYXRlVGltZVRvVW5peFRpbWUodm0udGVtcEJpcnRoZGF5KTtcblx0XHQvL3NhdmUgcGFnZSBkYXRhXG5cdFx0dm0udXNlci4kc2F2ZSgpO1xuXHRcdC8vcmVkaXJlY3Rcblx0XHRyZWRpcmVjdCgnL3VzZXJFdmVudHMnKTtcblx0fVxuXG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuZmFjdG9yeSgnYXV0aFNlcnZpY2UnLCBhdXRoU2VydmljZSk7XG5cbmF1dGhTZXJ2aWNlLiRpbmplY3QgPSBbJyRsb2cnLCAnJHEnLCAnJGxvY2F0aW9uJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gYXV0aFNlcnZpY2UoJGxvZywgJHEsICRsb2NhdGlvbikge1xuXHR2YXIgZmJVUkwgPSAnaHR0cHM6Ly9tZWV0dXBwbGFubmVyLmZpcmViYXNlaW8uY29tLyc7XG5cdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXG5cdHZhciBhbGxBdXRoU2VydmljZXMgPSB7XG5cdFx0aXNMb2dnZWRJbjogaXNMb2dnZWRJblxuXHR9O1xuXG5cdGZ1bmN0aW9uIGF1dGhEYXRhQ2FsbGJhY2soYXV0aERhdGEpIHtcblx0ICBcblx0ICBpZiAoYXV0aERhdGEpIHtcblx0ICAgICRsb2cuaW5mbyhcIlVzZXIgXCIgKyBhdXRoRGF0YS51aWQgKyBcIiBpcyBsb2dnZWQgaW4gd2l0aCBcIiArIGF1dGhEYXRhLnByb3ZpZGVyKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgJGxvZy5pbmZvKFwiVXNlciBpcyBsb2dnZWQgb3V0Li4uZHVtcGluZyB0aGVtIGJhY2sgdG8gbGFuZGluZyBwYWdlXCIpO1xuXHQgICAgLy9kdW1wIHRoZSB1c2VyIGJhY2sgb3V0XG5cdCAgICAkbG9jYXRpb24ucGF0aCgnLycpO1xuXHQgIH1cblx0fVxuXG5cdGZ1bmN0aW9uIGlzTG9nZ2VkSW4oKSB7XG5cdFx0Ly9jaGVjayB0aGUgdXNlciBhdXRoZW50aWNhaW9uIHN0YXRlXG5cdFx0JGxvZy5pbmZvKCdsb2dnaW5nIGZyb20gdGhlIGlzTG9nZ2VkSW4gTWV0aG9kJyk7XG5cdFx0cmVmLm9uQXV0aChhdXRoRGF0YUNhbGxiYWNrKTtcblx0fVxuXHRcblx0cmV0dXJuIGFsbEF1dGhTZXJ2aWNlcztcblxufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmZhY3RvcnkoJ3ZhbGlkYXRpb24nLCB2YWxpZGF0aW9uKTtcblxudmFsaWRhdGlvbi4kaW5qZWN0ID0gWyckbG9nJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gdmFsaWRhdGlvbigkbG9nKSB7XG5cdC8vZGVjbGFyZSBsb2NhbCB2YXJpYWJsZXNcblx0dmFyIG1pbmltdW1OYW1lTGVuZ3RoID0gMztcblx0dmFyIG1pbmltdW1QYXNzTGVuZ3RoID0gMTY7XG5cdHZhciBtYXhpbXVtUGFzc0xlbmd0aCA9IDEwMDtcblxuXHR2YXIgYWxsVmFsaWRhdGlvbnMgPSB7XG5cdFx0cmVxdWlyZWQ6IHJlcXVpcmVkLFxuXHRcdG1pbk5hbWVMZW5ndGg6IG1pbk5hbWVMZW5ndGgsXG5cdFx0bWluUGFzc0xlbmd0aDogbWluUGFzc0xlbmd0aCxcblx0XHRtYXhQYXNzTGVuZ3RoOiBtYXhQYXNzTGVuZ3RoLFxuXHRcdGF0TGVhc3RPbmVTeW1ib2w6IGF0TGVhc3RPbmVTeW1ib2wsXG5cdFx0YXRMZWFzdE9uZU51bWJlcjogYXRMZWFzdE9uZU51bWJlcixcblx0XHRhdExlYXN0T25lTG93ZXJjYXNlOiBhdExlYXN0T25lTG93ZXJjYXNlLFxuXHRcdGF0TGVhc3RPbmVVcHBlcmNhc2U6IGF0TGVhc3RPbmVVcHBlcmNhc2UsXG5cdFx0aWxsZWdhbENoYXJhY3RlcjogaWxsZWdhbENoYXJhY3Rlcixcblx0XHRlbWFpbDogZW1haWwsXG5cdFx0ZGF0ZU9mQmlydGg6IGRhdGVPZkJpcnRoXG5cdH07XG5cblx0ZnVuY3Rpb24gcmVxdWlyZWQodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzVW5kZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0cmV0dXJuICdUaGlzIGlzIGEgcmVxdWlyZWQgZmllbGQnO1xuXHRcdH0gXG5cdH1cblxuXHRmdW5jdGlvbiBtaW5OYW1lTGVuZ3RoKHZhbHVlKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHRpZih2YWx1ZS5sZW5ndGggPCBtaW5pbXVtTmFtZUxlbmd0aCkgcmV0dXJuICgnTmFtZSBzaG91bGQgYmUgYXQgbGVhc3QgJyArIG1pbmltdW1OYW1lTGVuZ3RoICsgJyBjaGFyYWN0ZXJzJyk7XG5cdFx0fSBcblx0fVxuXG5cdGZ1bmN0aW9uIG1pblBhc3NMZW5ndGgodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdGlmKCEodmFsdWUubGVuZ3RoIDwgbWluaW11bVBhc3NMZW5ndGgpKSByZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0ZnVuY3Rpb24gbWF4UGFzc0xlbmd0aCh2YWx1ZSkge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0aWYoISh2YWx1ZS5sZW5ndGggPiBtYXhpbXVtUGFzc0xlbmd0aCkpIHJldHVybiB0cnVlO1xuXHRcdH0gXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0ZnVuY3Rpb24gYXRMZWFzdE9uZVN5bWJvbCh2YWx1ZSkge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0Ly8gYnVpbGQgcmVnZXhcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIltcXCFcXEBcXCNcXCRcXCVcXF5cXCZcXCpdXCIpO1xuXG5cdFx0XHQvL2NoZWNrIGNvbnN0cmF0aW50XG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3QodmFsdWUpKSB7XG5cdFx0XHRcdC8vc3VjY2VzczogYXQgbGVhc3Qgb25lIHNwZWNpYWwgY2hhcmFjdGVyIGZvdW5kXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9mYWlsdXJlOiBkaWRuJ3QgZmluZCBhbnkgc3BjaWFsIGNoYXJhY3RlcnNcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGZ1bmN0aW9uIGF0TGVhc3RPbmVOdW1iZXIodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdC8vIGJ1aWxkIHJlZ2V4XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbMC05XVwiLCBcIlwiKTtcblxuXHRcdFx0Ly9jaGVjayBjb25zdHJhdGludFxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZhbHVlKSkge1xuXHRcdFx0XHQvL3N1Y2Nlc3M6IGF0IGxlYXN0IG9uZSBzcGVjaWFsIGNoYXJhY3RlciBmb3VuZFxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vZmFpbHVyZTogZGlkbid0IGZpbmQgYW55IHNwY2lhbCBjaGFyYWN0ZXJzXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuICAgIGZ1bmN0aW9uIGF0TGVhc3RPbmVMb3dlcmNhc2UodmFsdWUpIHtcbiAgICBcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0Ly8gYnVpbGQgcmVnZXhcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIlthLXpdXCIsIFwiXCIpO1xuXG5cdFx0XHQvL2NoZWNrIGNvbnN0cmF0aW50XG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3QodmFsdWUpKSB7XG5cdFx0XHRcdC8vc3VjY2VzczogYXQgbGVhc3Qgb25lIHNwZWNpYWwgY2hhcmFjdGVyIGZvdW5kXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly9mYWlsdXJlOiBkaWRuJ3QgZmluZCBhbnkgc3BjaWFsIGNoYXJhY3RlcnNcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhdExlYXN0T25lVXBwZXJjYXNlKHZhbHVlKSB7XG4gICAgXHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdC8vIGJ1aWxkIHJlZ2V4XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbQS1aXVwiLCBcIlwiKTtcblxuXHRcdFx0Ly9jaGVjayBjb25zdHJhdGludFxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZhbHVlKSkge1xuXHRcdFx0XHQvL3N1Y2Nlc3M6IGF0IGxlYXN0IG9uZSBzcGVjaWFsIGNoYXJhY3RlciBmb3VuZFxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vZmFpbHVyZTogZGlkbid0IGZpbmQgYW55IHNwY2lhbCBjaGFyYWN0ZXJzXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaWxsZWdhbENoYXJhY3Rlcih2YWx1ZSkge1xuICAgIFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHQvLyBidWlsZCByZWdleFxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW15BLXowLTlcXCFcXEBcXCNcXCRcXCVcXF5cXCZcXCpdXCIsIFwiXCIpO1xuXG5cdFx0XHQvL2NoZWNrIGNvbnN0cmF0aW50XG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3QodmFsdWUpKSB7XG5cdFx0XHRcdC8vc3VjY2VzczogYXQgbGVhc3Qgb25lIHNwZWNpYWwgY2hhcmFjdGVyIGZvdW5kXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vZmFpbHVyZTogZGlkbid0IGZpbmQgYW55IHNwY2lhbCBjaGFyYWN0ZXJzXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gZW1haWwodmFsdWUpIHtcbiAgICBcdC8vZGVmaW5lIGNvbnN0cmFpbnRzXG4gICAgXHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKD86XFwuW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKykqQCg/OlthLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cXC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cIiwgXCJcIik7XG5cbiAgICBcdGlmKCFjb25zdHJhaW50LnRlc3QodmFsdWUpKSByZXR1cm4gJ05vdCBhIHZhbGlkIGUtbWFpbCBhZGRyZXNzJ1xuICAgIFx0XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGF0ZU9mQmlydGgodmFsdWUpIHt9XG5cblx0cmV0dXJuIGFsbFZhbGlkYXRpb25zO1xufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbmZpZyhjb25maWcpO1xuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBjb25maWcoJHJvdXRlUHJvdmlkZXIpIHsgICBcbiAgICAkcm91dGVQcm92aWRlclxuICAgIC53aGVuKCcvJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2xhbmRpbmdQYWdlLmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdMYW5kaW5nUGFnZUNvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICB9KVxuICAgIC53aGVuKCcvc2lnbnVwJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL25ld1VzZXJTaWdudXAuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ05ld1VzZXJTaWduVXBDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgfSlcbiAgICAud2hlbignL2xvZ2luJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3JlZ2lzdGVyZWRVc2VyTG9naW4nLFxuICAgICAgICBjb250cm9sbGVyOiAnUmVnVXNlckxvZ2luQ29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xuICAgIH0pXG4gICAgLndoZW4oJy91c2VySW5mb3JtYXRpb24vOnVpZD8vOnRva2VuPycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy91c2VySW5mb3JtYXRpb24uaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1VzZXJJbmZvcm1hdGlvbkNvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgIHJlc29sdmU6IHsgLyogQG5nSW5qZWN0ICovXG4gICAgICAgICAgICB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlOiB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlXG4gICAgICAgIH1cbiAgICB9KVxuICAgIC53aGVuKCcvdXNlckV2ZW50cy86dWlkPy86dG9rZW4/Jywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3VzZXJFdmVudHMuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1VzZXJFdmVudHNDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICByZXNvbHZlOiB7IC8qIEBuZ0luamVjdCAqL1xuICAgICAgICAgICAgdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZTogdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZVxuICAgICAgICB9XG4gICAgfSlcbiAgICAud2hlbignL2V2ZW50LzpldmVudElkPy86aG9zdElkPy86dWlkPy86dG9rZW4/Jywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2FuRXZlbnQuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ0FuRXZlbnRDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICByZXNvbHZlOiB7IC8qIEBuZ0luamVjdCAqL1xuICAgICAgICAgICAgdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZTogdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZVxuICAgICAgICB9XG4gICAgfSlcbiAgICAub3RoZXJ3aXNlKHtcbiAgICAgICAgcmVkaXJlY3RUbzogJy8nXG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2UoYXV0aFNlcnZpY2UpIHtcbiAgICBhdXRoU2VydmljZS5pc0xvZ2dlZEluKCk7XG59IiwiXG5jb25maWcuJGluamVjdCA9IFtcIiRyb3V0ZVByb3ZpZGVyXCJdO1xudXNlckF1dGhlbnRpY2F0aW9uU2VydmljZS4kaW5qZWN0ID0gW1wiYXV0aFNlcnZpY2VcIl07YW5ndWxhclxuXHQubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcsIFtcblx0XHQnbmdSb3V0ZScsXG5cdFx0J25nVG91Y2gnLFxuXHRcdCdmaXJlYmFzZSdcblx0XSk7XG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdBbkV2ZW50Q29udHJvbGxlcicsIEFuRXZlbnRDb250cm9sbGVyKTtcblxuQW5FdmVudENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnLCAnJGxvY2F0aW9uJywgJyRyb3V0ZVBhcmFtcycsICckZmlyZWJhc2VPYmplY3QnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBBbkV2ZW50Q29udHJvbGxlcigkc2NvcGUsICRsb2csICRsb2NhdGlvbiwgJHJvdXRlUGFyYW1zLCAkZmlyZWJhc2VPYmplY3QpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0dmFyIHVzZXJFdmVudHMgPSByZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQoJHJvdXRlUGFyYW1zLmhvc3RJZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdob3N0aW5nJykuY2hpbGQoJHJvdXRlUGFyYW1zLmV2ZW50SWQpXG5cblx0Ly9iaW5kaW5nIHRvIHRoZSBldmVudFxuXHR2bS5ldmVudCA9ICRmaXJlYmFzZU9iamVjdCh1c2VyRXZlbnRzKVxuXHR2YXIgcmVnaXN0ZXJlZFVzZXJzID0gJGZpcmViYXNlT2JqZWN0KHJlZi5jaGlsZCgnVWlkcycpKTtcblxuXHQvL3JlcXVpcmVkIGZpZWxkc1xuXHR2bS5yZXF1aXJlZElucHV0cyA9IFsnJywgJycsICcnLCAnJywgJycsICcnLCAnJywgJycsICcnXTtcblxuXHQvL0xvY2FsIE1ldGhvZHNcblx0ZnVuY3Rpb24gaW5pdCgpIHtcblx0XHQvL2RlY2xhcmUgYW5kIGluaXRpYWxpemUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dm0udGVtcERhdGVUaW1lID0ge3N0YXJ0OiAnJywgZW5kOiAnJ307XG5cdFx0dm0ubmV3R3Vlc3QgPSB7bmFtZTogJycsIGVtYWlsOnthZGRyZXNzOicnLCB2YWxpZDpmYWxzZSwgc3R5bGU6e2NvbG9yOicnfX19O1xuXHRcdHZtLnNob3dJZkhvc3QgPSBmYWxzZTtcblx0XHR2bS5oaWRlSWZBdHRlbmRpbmcgPSB0cnVlO1xuXHRcdC8vc2VjdGlvbnNcblx0XHR2bS5tYW5hZ2VTZWN0aW9ucyA9IHtcblx0XHRcdDE6IHthY3RpdmU6IHRydWUsIGNvbXBsZXRlOiBmYWxzZSwgc3R5bGU6e2NvbG9yOidibGFjaycsICdiYWNrZ3JvdW5kLWNvbG9yJzoneWVsbG93J319LFxuXHRcdFx0Mjoge2FjdGl2ZTogZmFsc2UsIGNvbXBsZXRlOiBmYWxzZSwgc3R5bGU6e2NvbG9yOid3aGl0ZScsICdiYWNrZ3JvdW5kLWNvbG9yJzonZ3JheSd9fSxcblx0XHRcdDM6IHthY3RpdmU6IGZhbHNlLCBjb21wbGV0ZTogZmFsc2UsIHN0eWxlOntjb2xvcjond2hpdGUnLCAnYmFja2dyb3VuZC1jb2xvcic6J2dyYXknfX1cblx0XHR9O1xuXG5cdFx0Ly9jaGVjayB1c2VyIHRvIGRldGVybWluZSBzdGF0ZVxuXHRcdGNoZWNrRm9ySG9zdCgpO1xuXHRcdGNoZWNrSWZHdWVzdElzQXR0ZW5kaW5nKCk7XG5cblx0XHQvL29wZW4gdXAgc2VjdGlvbnNcblx0XHRpZighdm0uc2hvd0lmSG9zdCkgb3BlbkFsbFNlY3Rpb25zKCk7XG5cdH1cblxuXHRmdW5jdGlvbiB1dGY4X3RvX2I2NChzdHIpIHtcblx0XHRyZXR1cm4gYnRvYShzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gYjY0X3RvX3V0Zjgoc3RyKSB7XG4gICAgXHRyZXR1cm4gYXRvYihzdHIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKSB7XG5cdFx0cmV0dXJuIERhdGUucGFyc2UoZGF0ZVRpbWUpO1xuXHR9XG5cblx0ZnVuY3Rpb24gY2xlYW5OZXdHdWVzdFZhcmlhYmxlKCkge1xuXHRcdHZtLm5ld0d1ZXN0ID0ge25hbWU6ICcnLCBlbWFpbDp7YWRkcmVzczonJywgdmFsaWQ6ZmFsc2UsIHN0eWxlOntjb2xvcjonJ319fTtcblx0fVxuXG5cdGZ1bmN0aW9uIGludml0ZUFSZWdpc3RlcmVkVXNlcih1aWQpIHtcblx0XHQkbG9nLmluZm8oJ2FkZGluZyB0aGVtIHRvIHRoZSByZWdpc3RlcmVkIHVzZXJzIGxpc3QgJyArIHVpZCk7XG5cdFx0Ly9zZXQgdGhlIG5ldyBldmVudFxuXHRcdHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgncGVuZGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ldmVudElkKS5zZXQoe1xuXHRcdFx0aWQ6ICRyb3V0ZVBhcmFtcy5ldmVudElkLFxuXHRcdFx0ZXZlbnRUaW1lczoge1xuXHRcdFx0XHRzdGFydDogdm0uZXZlbnQuZXZlbnRUaW1lcy5zdGFydCxcblx0XHRcdFx0ZW5kOiB2bS5ldmVudC5ldmVudFRpbWVzLmVuZFxuXHRcdFx0fSxcblx0XHRcdG5hbWU6IHZtLmV2ZW50Lm5hbWUsXG5cdFx0XHRob3N0OiAkcm91dGVQYXJhbXMudWlkXG5cdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oJ3RoZXJlIHdhcyBhbiBlcnJvcicgKyBlcnJvcik7XG5cdFx0fSk7XG5cdFx0Ly9pZiB0aGVyZSB3YXMgYW4gdXBkYXRlZCBwbGFjZSBob2xkZXIsIHJlbW92ZSBpdFxuXHRcdHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCh1aWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgncGVuZGluZycpLm9uY2UoJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdHZhciBjaGVja0ZvclBsYWNlaG9sZGVyID0gc25hcHNob3QudmFsKClcblx0XHRcdCRsb2cuaW5mbyhzbmFwc2hvdC52YWwoKSk7XG5cblx0XHRcdGlmKGNoZWNrRm9yUGxhY2Vob2xkZXIudXBkYXRlZCkge1xuXHRcdFx0XHQkbG9nLmluZm8oJ2RlbGV0aW5nIHVwZGF0ZWQnKTtcblx0XHRcdFx0cmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdwZW5kaW5nJykuY2hpbGQoJ3VwZGF0ZWQnKS5yZW1vdmUoZnVuY3Rpb24oZXJyb3JPYmplY3QpIHtcblx0XHRcdFx0XHRpZihlcnJvck9iamVjdCkgJGxvZy5pbmZvKFwiRGVsZXRpbmcgZmFpbGVkOiBcIiArIGVycm9yT2JqZWN0LmNvZGUpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSAkbG9nLmluZm8oJ25vdGhpbmcgdG8gZG8nKTtcblxuXHRcdH0sIGZ1bmN0aW9uKGVycm9yT2JqZWN0KSB7XG5cdFx0XHRpZihlcnJvck9iamVjdCkgJGxvZy5pbmZvKFwiVGhlIHJlYWQgZmFpbGVkOiBcIiArIGVycm9yT2JqZWN0LmNvZGUpO1xuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gaW52aXRlQW5VbnJlZ2lzdGVyZWRVc2VyKHVzZXJLZXkpIHtcblx0XHQkbG9nLmluZm8oJ2FkZGluZyB0aGVtIHRvIHRoZSBVTlJFR0lTVEVSRUQgdXNlcnMgbGlzdCAnICsgdXNlcktleSk7XG5cdFx0cmVmLmNoaWxkKCdVbnJlZ2lzdGVyZWRVc2VycycpLmNoaWxkKHVzZXJLZXkpLmNoaWxkKCdwZW5kaW5nJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJHJvdXRlUGFyYW1zLmV2ZW50SWQpLnNldCh7XG5cdFx0XHRpZDogJHJvdXRlUGFyYW1zLmV2ZW50SWQsXG5cdFx0XHRob3N0OiAkcm91dGVQYXJhbXMudWlkLFxuXHRcdFx0ZXZlbnRUaW1lczoge1xuXHRcdFx0XHRzdGFydDogdm0uZXZlbnQuZXZlbnRUaW1lcy5zdGFydCxcblx0XHRcdFx0ZW5kOiB2bS5ldmVudC5ldmVudFRpbWVzLmVuZFxuXHRcdFx0fSxcblx0XHRcdG5hbWU6IHZtLmV2ZW50Lm5hbWVcblx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbygndGhlcmUgd2FzIGFuIGVycm9yJyArIGVycm9yKTtcblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNoZWNrRm9ySG9zdCgpIHtcblx0XHQvL2NoZWNrIGV2ZW50IGhvc3Rcblx0XHR2YXIgYXV0aERhdGEgPSByZWYuZ2V0QXV0aCgpO1xuXG5cdFx0aWYoYXV0aERhdGEudWlkID09ICRyb3V0ZVBhcmFtcy5ob3N0SWQpIHtcblx0XHRcdCRsb2cuaW5mbygnaXMgdGhlIGhvc3QnKTtcblx0XHRcdHZtLnNob3dJZkhvc3QgPSB0cnVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkbG9nLmluZm8oJ25vdCB0aGUgaG9zdCcpO1xuXHRcdFx0dm0uc2hvd0lmSG9zdCA9IGZhbHNlO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIGNoZWNrSWZHdWVzdElzQXR0ZW5kaW5nKCkge1xuXHRcdGlmKCF2bS5zaG93SWZIb3N0KSB7XG5cdFx0XHQkbG9nLmluZm8oJ2NoZWNrIGd1ZXN0IGF0dGVuZGFuY2UnKTtcblx0XHRcdHVzZXJFdmVudHMuY2hpbGQoJ2d1ZXN0TGlzdCcpLm9uKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHRcdHZhciBhbGxHdWVzdHMgPSBzbmFwc2hvdC52YWwoKTtcblx0XHRcdFx0dm0uaGlkZUlmQXR0ZW5kaW5nID0gIWFsbEd1ZXN0c1skcm91dGVQYXJhbXMudWlkXS5hdHRlbmRpbmc7XG5cdFx0XHRcdFxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gb3BlbkFsbFNlY3Rpb25zKCkge1xuXHRcdHZtLm1hbmFnZVNlY3Rpb25zWzFdLmFjdGl2ZSA9IHRydWU7XG5cdFx0dm0ubWFuYWdlU2VjdGlvbnNbMl0uYWN0aXZlID0gdHJ1ZTtcblx0XHR2bS5tYW5hZ2VTZWN0aW9uc1szXS5hY3RpdmUgPSB0cnVlO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2F2ZUV2ZW50KCkge1xuXHRcdHZtLmV2ZW50LiRzYXZlKCkudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdCRsb2cuaW5mbygnZXZlbnQgc2F2ZWQnKTtcblx0XHR9KS5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0JGxvZy5pbmZvKCdlcnJvciEgJyArIGVycm9yKTtcblx0XHR9KTtcblx0fVxuXG5cdC8vdmlldyBNZXRob2Rcblx0dm0uc2V0VGVtcFRpbWUgPSBmdW5jdGlvbihlbmRwb2ludCkge1xuXHRcdGlmKGVuZHBvaW50ID09ICdzdGFydCcpIHZtLnRlbXBEYXRlVGltZS5zdGFydCA9IG5ldyBEYXRlKCk7XG5cdFx0aWYoZW5kcG9pbnQgPT0gJ2VuZCcpIHZtLnRlbXBEYXRlVGltZS5lbmQgPSBuZXcgRGF0ZSgpO1xuXHR9XG5cblx0dm0udW5peFRpbWVUb0RhdGVUaW1lID0gZnVuY3Rpb24gKHVuaXhUaW1lKSB7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KHVuaXhUaW1lKSk7XG5cdH07XG5cblx0dm0uZGF0ZVRpbWVUb1VuaXhUaW1lID0gZnVuY3Rpb24gKGRhdGVUaW1lKSB7XG5cdFx0cmV0dXJuIERhdGUucGFyc2UoZGF0ZVRpbWUpO1xuXHR9O1xuXG5cdHZtLnN1Ym1pdCA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2cuaW5mbygnc3VibWl0dGluZyB0aGUgZm9ybSBub3chJyk7XG5cdH1cblxuXHR2bS5iYWNrVG9Vc2VyRXZlbnRzID0gZnVuY3Rpb24oKSB7XG5cdFx0JGxvY2F0aW9uLnBhdGgoJy91c2VyRXZlbnRzLycgKyAkcm91dGVQYXJhbXMudWlkICsgJy8nICsgJHJvdXRlUGFyYW1zLnRva2VuKTtcblx0fVxuXG5cdHZtLmV2ZW50UmVkaXJlY3QgPSBmdW5jdGlvbihwYXRoLCBldmVudElEKSB7XG5cdFx0dmFyIGZ1bGxQYXRoID0gcGF0aCArICcvJyArICRyb3V0ZVBhcmFtcy51aWQgKyAnLycgKyAkcm91dGVQYXJhbXMudG9rZW47XG5cdFx0Ly9yZWRpcmVjdFxuXHRcdCRsb2cuaW5mbygncmVkaXJlY3RpbmcgdG86ICcgKyBmdWxsUGF0aCk7XG5cdFx0JGxvY2F0aW9uLnBhdGgoZnVsbFBhdGgpO1xuXHR9XG5cblx0dm0uY2hhbmdlU2VjdGlvbiA9IGZ1bmN0aW9uKHRhcmdldFNlY3Rpb24pIHtcblx0XHQkbG9nLmluZm8oJ2FyZSB3ZSBoZXJlJyk7XG5cdFx0Zm9yKGkgPSAxOyBpIDw9MzsgaSsrKSB7XG5cdFx0XHRpZihpPT10YXJnZXRTZWN0aW9uKSB7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLmFjdGl2ZSA9IHRydWU7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLnN0eWxlWydiYWNrZ3JvdW5kLWNvbG9yJ10gPSd5ZWxsb3cnO1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5zdHlsZVsnY29sb3InXSA9J2JsYWNrJztcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLmFjdGl2ZSA9IGZhbHNlO1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5zdHlsZVsnYmFja2dyb3VuZC1jb2xvciddID0nZ3JheSc7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLnN0eWxlWydjb2xvciddID0nd2hpdGUnO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHZtLnNhdmVFdmVudFRpbWUgPSBmdW5jdGlvbihkYXRlVGltZSwgdGFyZ2V0KSB7XG5cdFx0Ly9pZiB0aGlzIGV2ZW50IGRpZG4ndCBoYXZlIGEgc3RhcnQgdGltZSwgY3JlYXRlIGl0XG5cdFx0aWYoIXZtLmV2ZW50LmV2ZW50VGltZXMpIHsgXG5cdFx0XHR2bS5ldmVudC5ldmVudFRpbWVzID0ge3N0YXJ0OiAnJywgZW5kOiAnJ307XG5cdFx0XHR2bS5ldmVudC5ldmVudFRpbWVzLnN0YXJ0ID0gdm0uZGF0ZVRpbWVUb1VuaXhUaW1lKHZtLnRlbXBEYXRlVGltZS5zdGFydCk7IFxuXHRcdFx0dm0uZXZlbnQuZXZlbnRUaW1lcy5lbmQgPSB2bS5kYXRlVGltZVRvVW5peFRpbWUodm0udGVtcERhdGVUaW1lLmVuZCk7XG5cdFx0fVxuXG5cdFx0aWYoKHZtLnRlbXBEYXRlVGltZS5lbmQgPCB2bS50ZW1wRGF0ZVRpbWUuc3RhcnQpICYmIHRhcmdldCA9PSAnc3RhcnQnKSB2bS50ZW1wRGF0ZVRpbWUuZW5kID0gdm0udGVtcERhdGVUaW1lLnN0YXJ0O1xuXHRcdGlmKHRhcmdldCA9PSAnc3RhcnQnKSB2bS5ldmVudC5ldmVudFRpbWVzLnN0YXJ0ID0gdm0uZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKTtcblx0XHRpZih0YXJnZXQgPT0gJ2VuZCcpIHZtLmV2ZW50LmV2ZW50VGltZXMuZW5kID0gdm0uZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKTtcblx0fVxuXG5cdHZtLmd1ZXN0c0FyZUludml0ZWQgPSBmdW5jdGlvbigpIHtcblx0XHRpZih2bS5ldmVudC5ndWVzdExpc3QpIHJldHVybiB0cnVlO1xuXHRcdGVsc2UgcmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0dm0udmFsaWRhdGVHdWVzdEVtYWlsID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9pZiB0aGVyZSBpcyBhbiBlbWFpbCBhZGRyZXNzXG5cdFx0aWYodm0ubmV3R3Vlc3QuZW1haWwuYWRkcmVzcykge1xuXHRcdFx0Ly9jaGVjayB2YWxpZGl0eVxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XCIsIFwiXCIpO1xuXG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3Qodm0ubmV3R3Vlc3QuZW1haWwuYWRkcmVzcykpIHtcblx0XHRcdFx0dm0ubmV3R3Vlc3QuZW1haWwudmFsaWQgPSB0cnVlO1xuXHRcdFx0XHR2bS5uZXdHdWVzdC5lbWFpbC5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLm5ld0d1ZXN0LmVtYWlsLnZhbGlkID0gZmFsc2U7XG5cdFx0XHRcdHZtLm5ld0d1ZXN0LmVtYWlsLnN0eWxlID0ge2NvbG9yOicnfTtcblx0XHRcdH1cdFx0XHRcblx0XHR9XG5cdH1cblxuXHR2bS5pc1NlY3Rpb25Db21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdGZvcihpPTA7aTw4O2krKykge1xuXHRcdFx0JGxvZy5pbmZvKHZtLnJlcXVpcmVkSW5wdXRzW2ldKTtcblx0XHR9XG5cdH1cblxuXHR2bS5zYXZlQW5kQWR2YW5jZSA9IGZ1bmN0aW9uKCkge1xuXHRcdHZtLmV2ZW50LiRzYXZlKCkudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdCRsb2cuaW5mbygnZXZlbnQgc2F2ZWQnKTtcblx0XHR9KS5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0JGxvZy5pbmZvKCdlcnJvciEgJyArIGVycm9yKTtcblx0XHR9KTtcblxuXHRcdC8vY2hlY2sgZm9yIGNvbXBsZXRlbmVzXG5cdFx0dm0uaXNTZWN0aW9uQ29tcGxldGUoKTtcblxuXHRcdGlmKHZtLm1hbmFnZVNlY3Rpb25zWzFdLmNvbXBsZXRlID09IHRydWUgJiYgdm0ubWFuYWdlU2VjdGlvbnNbMl0uY29tcGxldGUgPT0gdHJ1ZSAmJiB2bS5tYW5hZ2VTZWN0aW9uc1szXS5jb21wbGV0ZSA9PSB0cnVlKSB7XG5cdFx0XHR2bS5ldmVudFJlZGlyZWN0KCcvdXNlckV2ZW50cycsICRyb3V0ZVBhcmFtcy51aWQpO1xuXHRcdH0gZWxzZSBpZiAodm0ubWFuYWdlU2VjdGlvbnNbMV0uYWN0aXZlKSB2bS5jaGFuZ2VTZWN0aW9uKDIpO1xuXHRcdGVsc2UgaWYgKHZtLm1hbmFnZVNlY3Rpb25zWzJdLmFjdGl2ZSkgdm0uY2hhbmdlU2VjdGlvbigzKTtcblx0XHRlbHNlIGlmICh2bS5tYW5hZ2VTZWN0aW9uc1szXS5hY3RpdmUpIHZtLmNoYW5nZVNlY3Rpb24oMSk7XG5cdH1cblxuXHR2bS5hZGRHdWVzdFRvSG9zdHNMaXN0ID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9kZWNsYXJlIGFuZCBpbml0aWFsaXplIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciB1c2VyS2V5ID0gdXRmOF90b19iNjQodm0ubmV3R3Vlc3QuZW1haWwuYWRkcmVzcyk7XG5cblx0XHQvL2lmIGVtYWlsIGlzIHZhbGlkIGFuZCBuYW1lIGV4aXN0c1xuXHRcdGlmICh2bS5uZXdHdWVzdC5uYW1lICYmIHZtLm5ld0d1ZXN0LmVtYWlsLnZhbGlkKSB7XG5cdFx0XHQvL2lzIHRoZXJlIGEgZ3Vlc3QgbGlzdCBhbHJlYWR5PyBJZiBub3QgY3JlYXRlIG9uZVxuXHRcdFx0aWYoIXZtLmV2ZW50Lmd1ZXN0TGlzdCkge1xuXHRcdFx0XHR2bS5ldmVudC5ndWVzdExpc3QgPSB7fTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vaWYgc28gaXMgdGhpcyBwZXJzb24gYWxyZWFkeSBvbiB0aGUgbGlzdD9cblx0XHRcdFx0dmFyIGkgPTA7XG5cdFx0XHRcdHdoaWxlKHZtLmV2ZW50Lmd1ZXN0TGlzdFtpXSkge1xuXHRcdFx0XHRcdGlmKHZtLmV2ZW50Lmd1ZXN0TGlzdFtpXS5lbWFpbCA9PSBiNjRfdG9fdXRmOCh1c2VyS2V5KSkge1xuXHRcdFx0XHRcdFx0JGxvZy5pbmZvKCdUaGlzIGd1ZXN0IGlzIGFscmVhZHkgb24gdGhlIGxpc3QnKTtcblx0XHRcdFx0XHRcdGNsZWFuTmV3R3Vlc3RWYXJpYWJsZSgpO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpKys7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly9pcyB0aGlzIGd1ZXN0IGEgcmVnaXN0ZXJlZCB1c2VyP1xuXHRcdFx0aWYocmVnaXN0ZXJlZFVzZXJzW3VzZXJLZXldKSB7XG5cdFx0XHRcdC8vaXMgdGhlIHJlZ2lzdGVyZWQgdXNlciB0aGUgaG9zdD9cblx0XHRcdFx0aWYocmVnaXN0ZXJlZFVzZXJzW3VzZXJLZXldID09ICRyb3V0ZVBhcmFtcy51aWQpIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ3RyaWVkIHRvIHJlZ2lzdGVyIHRoZSBob3N0Jyk7XG5cdFx0XHRcdFx0Y2xlYW5OZXdHdWVzdFZhcmlhYmxlKCk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdC8vYWRkIHRoZW0gdG8gdGhlIGFwcHJvcHJpYXRlIHJlZ2lzdGVyZWQgdXNlcnMnIGxpc3Qgb2YgZXZlbnQgaW52aXRlc1xuXHRcdFx0XHRcdGludml0ZUFSZWdpc3RlcmVkVXNlcihyZWdpc3RlcmVkVXNlcnNbdXNlcktleV0pO1xuXG5cdFx0XHRcdFx0Ly9hZGQgdGhlIGd1ZXN0IHRvIHRoZSBsaXN0XG5cdFx0XHRcdFx0dm0uZXZlbnQuZ3Vlc3RMaXN0W3JlZ2lzdGVyZWRVc2Vyc1t1c2VyS2V5XV0gPSB7XG5cdFx0XHRcdFx0XHRhdHRlbmRpbmc6IGZhbHNlLCBcblx0XHRcdFx0XHRcdHN0YXR1czoncGVuZGluZycsIFxuXHRcdFx0XHRcdFx0bmFtZTogdm0ubmV3R3Vlc3QubmFtZSwgXG5cdFx0XHRcdFx0XHRlbWFpbDp2bS5uZXdHdWVzdC5lbWFpbC5hZGRyZXNzLFxuXHRcdFx0XHRcdH07XHRcdFx0XHRcdFxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2FkZCB0aGUgaW52aXRlIHRvIHRoZSBub24tcmVnaXN0ZXJlZCB1c2VycyBsaXN0IG9mIGV2ZW50IGludml0ZXNcblx0XHRcdFx0aW52aXRlQW5VbnJlZ2lzdGVyZWRVc2VyKHVzZXJLZXkpO1xuXG5cdFx0XHRcdC8vYWRkIHRoZSBndWVzdCB0byB0aGUgbGlzdFxuXHRcdFx0XHR2bS5ldmVudC5ndWVzdExpc3RbdXNlcktleV0gPSB7XG5cdFx0XHRcdFx0XHRhdHRlbmRpbmc6IGZhbHNlLCBcblx0XHRcdFx0XHRcdHN0YXR1czoncGVuZGluZycsIFxuXHRcdFx0XHRcdFx0bmFtZTogdm0ubmV3R3Vlc3QubmFtZSwgXG5cdFx0XHRcdFx0XHRlbWFpbDp2bS5uZXdHdWVzdC5lbWFpbC5hZGRyZXNzLFxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXG5cblx0XHRcdC8vc2F2ZSB0aGUgZXZlbnRcblx0XHRcdHZtLnNhdmVFdmVudCgpO1xuXHRcdFx0Ly9jbGVhciB0aGUgdGVtcCB2YWx1ZXNcblx0XHRcdGNsZWFuTmV3R3Vlc3RWYXJpYWJsZSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkbG9nLmluZm8oJ3lvdSBkaWRuXFwndCBlbnRlciBhIG5hbWUgYW5kIG9yIGVtYWlsJyk7XG5cdFx0fVxuXHR9XG5cblx0dm0uZ3Vlc3RXaWxsQXR0ZW5kID0gZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHR2YXIgY3VycmVudFVzZXIgPSByZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJ2V2ZW50cycpO1xuXHRcdHZhciB0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucyA9IDA7XG5cdFx0dmFyIHJlbW92ZUF0dGVuZGluZ1VwZGF0ZWQgPSBmYWxzZTtcblx0XHRcblx0XHQvL2NoYW5nZSBhdHRlbmRpbmcgdG8gdHJ1ZSBpbiBob3N0J3MgZ3Vlc3RMaXN0XG5cdFx0dm0uZXZlbnQuZ3Vlc3RMaXN0WyRyb3V0ZVBhcmFtcy51aWRdLmF0dGVuZGluZyA9IHJlc3BvbnNlO1xuXHRcdC8vY2hhbmdlIHN0YXR1cyB0byAnYXR0ZW5kaW5nJyBpbiBob3N0J3MgZ3Vlc3RMaXN0XG5cdFx0dm0uZXZlbnQuZ3Vlc3RMaXN0WyRyb3V0ZVBhcmFtcy51aWRdLnN0YXR1cyA9ICdhdHRlbmRpbmcnO1xuXHRcdFxuXHRcdC8vZ2V0IHRoZSBpbnZpdGF0aW9uIGRldGFpbHNcblx0XHRjdXJyZW50VXNlci5jaGlsZCgncGVuZGluZycpLm9uKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWxiZVxuXHRcdFx0dmFyIGludml0YXRpb25zID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHQvL2xvZyBzdGFydGluZyB2YWx1ZXNcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9ucyk7XG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnNbJHJvdXRlUGFyYW1zLmhvc3RJZF0pO1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdWyRyb3V0ZVBhcmFtcy5ldmVudElkXSk7XG5cblx0XHRcdHZhciB0aGlzSW52aXRhdGlvbiA9IGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdWyRyb3V0ZVBhcmFtcy5ldmVudElkXTtcblx0XHRcdFxuXHRcdFx0JGxvZy5pbmZvKHRoaXNJbnZpdGF0aW9uKTtcblx0XHRcdFxuXHRcdFx0Ly9jaGVjayAjIG9mIGluaXZpYXRpb25zXG5cdFx0XHRmb3IoaW52aXRhdGlvbiBpbiBpbnZpdGF0aW9ucykge1xuXHRcdFx0XHR0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucysrO1xuXHRcdFx0fVxuXG5cdFx0XHQvL3JlcG9ydCAjIG9mIGludml0YXRpb25zXG5cdFx0XHQkbG9nLmluZm8oXCJ0b3RhbCBhdHRlbmRpbmc6IFwiICsgdG90YWxQZW5kaW5nSW52aXRhdGlvbnMpO1xuXHRcdFx0XG5cdFx0XHQvL2FkZCB0aGUgZXZlbnQgdG8gdGhlIGd1ZXN0J3MgYXR0ZW5kaW5nIGxpc3Rcblx0XHRcdGlmKHJlc3BvbnNlKSBjdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykuY2hpbGQoJHJvdXRlUGFyYW1zLmhvc3RJZCkuY2hpbGQoJHJvdXRlUGFyYW1zLmV2ZW50SWQpLnNldCh0aGlzSW52aXRhdGlvbiwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbyhlcnJvcik7XG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXG5cdFx0Ly9pZiB0aGUgdXBkYXRlZCBwbGFjZWhvbGRlciB3YXMgb24gdGhlIGF0dGVuZGluZyBsaXN0IHJlbW92ZSBpdFxuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5vbigndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHRcdHZhciBhdHRlbmRpbmdMaXN0ID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHRcblx0XHRcdC8vcmVwb3J0IGFjdGlvbnNcblx0XHRcdCRsb2cuaW5mbygndGhpcyBpcyB0aGUgYXR0ZW5kaW5nIGxpc3QnKTtcblx0XHRcdCRsb2cuaW5mbyhhdHRlbmRpbmdMaXN0KTtcblx0XHRcdFxuXHRcdFx0Ly90aHJvdyBmbGFnIGZvciBsYXRlclxuXHRcdFx0aWYoYXR0ZW5kaW5nTGlzdC51cGRhdGVkKSByZW1vdmVBdHRlbmRpbmdVcGRhdGVkID0gdHJ1ZTtcblxuXHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHQvL2lmIHRoZXIgd2FzIGFuIGVycm9yIHJlcG9ydCBpdFxuXHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbyhlcnJvcik7XG5cdFx0fSk7XG5cblx0XHQvL2lmIHRoaXMgaXMgdGhlIGxhc3QgcGVuZGluZyBldmVudCBvbiB0aGUgZ3Vlc3QncyBwZW5kaW5nIGxpc3QsIGFkZCB0aGUgdXBkYXRlZCBwbGFjZWhvbGRlclxuXHRcdGlmKHRvdGFsUGVuZGluZ0ludml0YXRpb25zIDwgMikge1xuXHRcdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHRcdHZhciBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XG5cblx0XHRcdC8vcmVwbGFjZSB3aXRoIHVwZGF0ZWQgZmllbGRcblx0XHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdwZW5kaW5nJykudXBkYXRlKHtcblx0XHRcdFx0dXBkYXRlZDogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbyhlcnJvcik7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHQvL3JlbW92ZSB0aGUgZXZlbnQgZnJvbSB0aGUgZ3Vlc3QncyBwZW5kaW5nIGxpc3Rcblx0XHRjdXJyZW50VXNlci5jaGlsZCgncGVuZGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ob3N0SWQpLnJlbW92ZSgpO1xuXG5cdFx0Ly9pZiB0aGVyZSB3YXMgYW4gdXBkYXRlZCBmaWVsZCBpbiBhdHRlbmRpbmcsIHJlbW92ZSBpdFxuXHRcdGlmKHJlbW92ZUF0dGVuZGluZ1VwZGF0ZWQpIHtcblx0XHRcdCRsb2cuaW5mbygncmVtb3ZpbmcgdGhlIHVwZGF0ZWQgcGxhY2Vob2xkZXInKTtcblx0XHRcdC8vY3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLmNoaWxkKCd1cGRhdGVkJykucmVtb3ZlKCk7XG5cdFx0fVxuXG5cdFx0Ly9zYXZlIGNoYW5nZXNcblx0XHR2bS5ldmVudC4kc2F2ZSgpO1xuXHR9XG5cblx0dm0udXBkYXRlVXBkYXRlZFBhcmFtID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGN1cnJlbnRVc2VyID0gcmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCdldmVudHMnKTtcblx0XHRcblx0XHQkbG9nLmluZm8oJ3VwZGF0aW5nIHRoZSBwYXJhbScpO1xuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5vbigndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0JGxvZy5pbmZvKHNuYXBzaG90LnZhbCgpKTtcblx0XHR9KTtcblx0XHRjdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykuY2hpbGQoJ3VwZGF0ZWQnKS5yZW1vdmUoKTtcblx0fVxuXG5cdHZtLmFkZEludml0YXRpb25Ub0F0dGVuZGluZyA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdFx0dmFyIGN1cnJlbnRVc2VyID0gcmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCdldmVudHMnKTtcblx0XHR2YXIgdG90YWxQZW5kaW5nSW52aXRhdGlvbnMgPSAwO1xuXG5cdFx0Ly9nZXQgdGhlIGludml0YXRpb24gZGV0YWlsc1xuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdwZW5kaW5nJykub24oJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhbGJlXG5cdFx0XHR2YXIgaW52aXRhdGlvbnMgPSBzbmFwc2hvdC52YWwoKTtcblx0XHRcdHZhciB0aGlzSW52aXRhdGlvbiA9IGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdWyRyb3V0ZVBhcmFtcy5ldmVudElkXTtcblx0XHRcdFxuXHRcdFx0Ly9sb2cgc3RhcnRpbmcgdmFsdWVzXG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnMpO1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdKTtcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9uc1skcm91dGVQYXJhbXMuaG9zdElkXVskcm91dGVQYXJhbXMuZXZlbnRJZF0pO1xuXHRcdFx0XG5cdFx0XHQvL2NoZWNrICMgb2YgaW5pdmlhdGlvbnNcblx0XHRcdGZvcihpbnZpdGF0aW9uIGluIGludml0YXRpb25zKSB7XG5cdFx0XHRcdHRvdGFsUGVuZGluZ0ludml0YXRpb25zKys7XG5cdFx0XHR9XG5cblx0XHRcdC8vcmVwb3J0ICMgb2YgaW52aXRhdGlvbnNcblx0XHRcdCRsb2cuaW5mbyhcInRvdGFsIHBlbmRpbmcgaW52aXRhdGlvbnM6IFwiICsgdG90YWxQZW5kaW5nSW52aXRhdGlvbnMpO1xuXHRcdFx0XG5cdFx0XHQkbG9nLmluZm8ocmVzcG9uc2UpO1xuXHRcdFx0Ly9hZGQgdGhlIGV2ZW50IHRvIHRoZSBndWVzdCdzIGF0dGVuZGluZyBsaXN0XG5cdFx0XHRpZihyZXNwb25zZSkgY3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ob3N0SWQpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ldmVudElkKS5zZXQodGhpc0ludml0YXRpb24sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oZXJyb3IpO1xuXHRcdFx0fSk7XG5cblxuXG5cdFx0fSk7XG5cdH1cblxuXHQvL3N0YXJ0IHJ1blxuXHRpbml0KCk7XG59XG5cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ0xhbmRpbmdQYWdlQ29udHJvbGxlcicsIExhbmRpbmdQYWdlQ29udHJvbGxlcik7XG5cbkxhbmRpbmdQYWdlQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZycsICckbG9jYXRpb24nLCAnJGRvY3VtZW50JywgJyR3aW5kb3cnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBMYW5kaW5nUGFnZUNvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCAkbG9jYXRpb24sICRkb2N1bWVudCwgJHdpbmRvdykge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHR2YXIgZmJVUkwgPSAnaHR0cHM6Ly9tZWV0dXBwbGFubmVyLmZpcmViYXNlaW8uY29tLyc7XG5cdHZhciBhdXRoRGF0YSA9IHt9O1xuXHR2YXIgY3VycmVudFVzZXJEYXRhID0ge307XG5cblx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdHZtLnNob3dSZXF1aXJubWVudHMgPSBmYWxzZTtcblx0dm0udmFsaWROZXdOYW1lID0geyd2YWxpZCc6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOicnfX07XG5cdHZtLnZhbGlkTmV3RW1haWwgPSB7J3ZhbGlkJzpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6Jyd9fTtcblx0dm0uc2VjdXJlUGFzc3dvcmQgPSB7J3NlY3VyZSc6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOicnfX07XG5cdHZtLnVubG9ja0NyZWF0ZVVzZXJCdG4gPSB7J3VzYWJsZSc6ZmFsc2UsICdjbGFzcyc6J2J0biBidG4td2FybmluZyd9O1xuXHR2bS5tZXNzYWdlID0gJ3Rlc3RpbmcnO1xuXG5cdFxuXHR2bS52YWxpZFVzZXJFbWFpbCA9IHsndmFsaWQnOmZhbHNlLCAnc3R5bGUnOntjb2xvcjonJ319O1xuXHR2bS52YWxpZFVzZXJQYXNzd29yZCA9IHsndmFsaWQnOmZhbHNlLCAnc3R5bGUnOntjb2xvcjonJ319O1xuXHR2bS51bmNsb2NrVXNlckxvZ2luQnRuID0geyd1c2FibGUnOmZhbHNlLCAnY2xhc3MnOididG4gYnRuLXdhcm5pbmcnfTtcblx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHMgPSB7XG5cdFx0MDp7J2NvbnN0cmFpbnQnOidJcyBhdCBsZWFzdCAxNiBjaGFyYWN0ZXJzIGxvbmcnLCAnc3R5bGUnOntjb2xvcjoncmVkJ30sICdtZXQnOmZhbHNlfSxcblx0XHQxOnsnY29uc3RyYWludCc6J0lzIG5vIGxvbmdlciB0aGFuIDEwMCBjaGFyYWN0ZXJzJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX0sXG5cdFx0Mjp7J2NvbnN0cmFpbnQnOidDb250YWlucyBhdCBsZWFzdCBvbmUgcmVxdWlyZWQgc3ltYm9sIChcXCFcXEBcXCNcXCRcXCVcXF5cXCZcXCopJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX0sXG5cdFx0Mzp7J2NvbnN0cmFpbnQnOidDb250YWlucyBhdCBsZWFzdCBvbmUgbnVtYmVyJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX0sXG5cdFx0NDp7J2NvbnN0cmFpbnQnOidDb250YWlucyBhdCBsZWFzdCBvbmUgbG93ZXJjYXNlIGxldHRlcicsICdzdHlsZSc6e2NvbG9yOidyZWQnfSwgJ21ldCc6ZmFsc2V9LFxuXHRcdDU6eydjb25zdHJhaW50JzonQ29udGFpbnMgYXQgbGVhc3Qgb25lIHVwcGVyY2FzZSBsZXR0ZXInLCAnc3R5bGUnOntjb2xvcjoncmVkJ30sICdtZXQnOmZhbHNlfSxcblx0XHQ2OnsnY29uc3RyYWludCc6XCJEb2Vzbid0IGhhdmUgYW55IGlsbGVnYWwgY2hhcmFjdGVyc1wiLCAnc3R5bGUnOntjb2xvcjoncmVkJ30sICdtZXQnOmZhbHNlfVxuXHR9O1xuXG5cdC8vdmFyIHRoZVRlc3RCb3ggPSBhbmd1bGFyLmVsZW1lbnQoJGRvY3VtZW50KS5maW5kKCcjdGVzdEJveCcpO1xuXG5cdC8vdGhlVGVzdEJveC5jaGVja1ZhbGlkaXR5KCk7XG5cdC8vc2V0Q3VzdG9tVmFsaWRpdHkoJ3lvdSBuZWVkIHNvbWV0aGluZyBlbHNlJyk7XG5cblx0Ly9sb2NhbCBtZXRob2RzXG5cdGZ1bmN0aW9uIHV0ZjhfdG9fYjY0KHN0cikge1xuXHRcdHJldHVybiBidG9hKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiBiNjRfdG9fdXRmOChzdHIpIHtcbiAgICBcdHJldHVybiBhdG9iKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fVxuXG5cdC8vZGVmaW5lIGNvbnRyb2xsZXIgbWV0aG9kc1xuXHR2bS5kaXNwbGF5UGFzc1JlcXMgPSBmdW5jdGlvbigpIHtcblx0XHRpZih2bS5uZXdOYW1lICYmIHZtLm5ld0VtYWlsKSB7XG5cdFx0XHR2bS5zaG93UmVxdWlybm1lbnRzID0gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dm0uc2hvd1JlcXVpcm5tZW50cyA9IGZhbHNlO1xuXHRcdH1cblx0fVxuXG5cdHZtLmNoZWNrTmV3TmFtZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFxuXHRcdGlmKHZtLm5ld05hbWUpIHtcblx0XHRcdGlmKHZtLm5ld05hbWUubGVuZ3RoID4gMCkge1xuXHRcdFx0XHR2bS52YWxpZE5ld05hbWUudmFsaWQgPSB0cnVlO1xuXHRcdFx0XHR2bS52YWxpZE5ld05hbWUuc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS52YWxpZE5ld05hbWUudmFsaWQgPSBmYWxzZTtcblx0XHRcdFx0dm0udmFsaWROZXdOYW1lLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR2bS5vcGVuQ3JlYXRlVXNlckJ1dHRvbigpO1xuXHR9XG5cblx0dm0uY2hlY2tOZXdFbWFpbCA9IGZ1bmN0aW9uICgpIHtcblx0XHRpZih2bS5uZXdFbWFpbCkge1xuXHRcdFx0Ly9jaGVjayB2YWxpZGl0eVxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XCIsIFwiXCIpO1xuXG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3Qodm0ubmV3RW1haWwpKSB7XG5cdFx0XHRcdHZtLnZhbGlkTmV3RW1haWwudmFsaWQgPSB0cnVlO1xuXHRcdFx0XHR2bS52YWxpZE5ld0VtYWlsLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0udmFsaWROZXdFbWFpbC52YWxpZCA9IGZhbHNlO1xuXHRcdFx0XHR2bS52YWxpZE5ld0VtYWlsLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0XHRcdH1cdFx0XHRcblx0XHR9XG5cdFx0XG5cdFx0dm0ub3BlbkNyZWF0ZVVzZXJCdXR0b24oKTtcblx0fVxuXG5cdHZtLmNoZWNrVXNlckVtYWlsID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodm0udXNlckVtYWlsKSB7XG5cdFx0XHQvL2NoZWNrIHZhbGlkaXR5XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKD86XFwuW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKykqQCg/OlthLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cXC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cIiwgXCJcIik7XG5cblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2bS51c2VyRW1haWwpKSB7XG5cdFx0XHRcdHZtLnZhbGlkVXNlckVtYWlsLnZhbGlkID0gdHJ1ZTtcblx0XHRcdFx0dm0udmFsaWRVc2VyRW1haWwuc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS52YWxpZFVzZXJFbWFpbC52YWxpZCA9IGZhbHNlO1xuXHRcdFx0XHR2bS52YWxpZFVzZXJFbWFpbC5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dm0ub3BlblVzZXJMb2dpbkJ0bigpO1xuXHR9XG5cblx0dm0uY2hlY2tOZXdQYXNzd29yZHMgPSBmdW5jdGlvbigpIHtcblx0XHQvL2ZvciBlYWNoIHBhc3N3b3JkIGRlZmluZSB0aGUgcGF0dGVybiB0aGF0IHRoZSBwYXNzd29yZCBtdXN0IG1hdGNoXG5cdFx0dmFyIGNvbnN0cmFpbnRzID0ge1xuXHQgXHRcdDA6IFsnJywgJyB5b3VyIHBhc3N3b3JkIG5lZWRzIHRvIGJlIDE2IGNoYXJhY3RlcnMgb3IgbG9uZ2VyJ10sXG5cdCBcdFx0MTogWycnLCAnIHlvdXIgcGFzc3dvcmQgbmVlZHMgdG8gYmUgbGVzcyB0aGFuIDEwMCBjaGFyYWN0ZXJzJ10sXG5cdCBcdFx0MjogWydbXFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqXScsIFwiIG5vIHJlcXVpcmVkIHN5bWJvbHMgZm91bmRcIl0sXG5cdCBcdFx0MzogWydbMC05XScsIFwiIG5vIG51bWJlcnMgZm91bmRcIl0sXG5cdCBcdFx0NDogWydbYS16XScsIFwiIG5vIGxvd2VyY2FzZSBsZXR0ZXJzIGZvdW5kXCJdLFxuXHQgXHRcdDU6IFsnW0EtWl0nLCBcIiBubyB1cHBlcmNhc2UgbGV0dGVycyBmb3VuZFwiXSxcblx0IFx0XHQ2OiBbJ1teQS16MC05XFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqXScsIFwiIGlsbGVnYWwgY2hhcmFjdGVycyBmb3VuZFwiXSxcbiBcdFx0fTtcbiBcdFx0XG4gXHRcdC8vY2hlY2sgZm9yIGxlbmd0aFxuIFx0XHRpZih2bS5uZXdQYXNzd29yZCkge1xuIFx0XHRcdGlmKHZtLm5ld1Bhc3N3b3JkLmxlbmd0aCA+IDE1KSB7IFxuIFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMF0uc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307IFxuIFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMF0ubWV0ID0gdHJ1ZTsgXG4gXHRcdFx0fSBlbHNlIHtcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzBdLnN0eWxlID0ge2NvbG9yOidyZWQnfTsgXG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1swXS5tZXQgPSBmYWxzZTtcbiBcdFx0XHR9XG4gXHRcdFx0aWYodm0ubmV3UGFzc3dvcmQubGVuZ3RoIDw9IDEwMCkgeyBcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzFdLnN0eWxlID0ge2NvbG9yOidncmVlbid9OyBcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzFdLm1ldCA9IHRydWU7XG4gXHRcdFx0fSBlbHNlIHtcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzFdLnN0eWxlID0ge2NvbG9yOidyZWQnfTsgXG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1sxXS5tZXQgPSBmYWxzZTtcbiBcdFx0XHR9XG5cbiBcdFx0XHQvL2NoZWNrIGNvbnN0cmFpbnRzIDItNVxuIFx0XHRcdGZvcihpID0gMjsgaSA8IDY7IGkrKykge1xuXHQgXHRcdFx0Ly9jaGVjayBmb3IgcmVxdWlyZWQgc3ltYm9scywgdXBwZXJjYXNlLCBsb3NlcmNhc2UsIGFuZCBjaGFyYWN0ZXJzXG5cdCBcdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoY29uc3RyYWludHNbaV1bMF0sIFwiXCIpO1x0XG5cblx0IFx0XHRcdC8vdGVzdCBlYWNoIGNvbnN0cmF0aW50XG5cdCBcdFx0XHRpZihjb25zdHJhaW50LnRlc3Qodm0ubmV3UGFzc3dvcmQpKSB7XG5cdCBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzW2ldLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHQgXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1tpXS5tZXQgPSB0cnVlO1xuXHQgXHRcdFx0fSBlbHNlIHtcblx0IFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbaV0uc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHQgXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1tpXS5tZXQgPSBmYWxzZTtcblx0IFx0XHRcdH1cblx0IFx0XHR9XG5cblx0IFx0XHQvL2NoZWNrIGlsbGVnYWwgY2hhcmFjdGVyc1xuXHQgXHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChjb25zdHJhaW50c1s2XVswXSwgXCJcIik7XG5cblx0IFx0XHQvL3J1biB0aGUgY2hlY2tcblx0IFx0XHRpZighY29uc3RyYWludC50ZXN0KHZtLm5ld1Bhc3N3b3JkKSkge1xuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNl0uc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNl0ubWV0ID0gZmFsc2U7XG5cdCBcdFx0fSBlbHNlIHtcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzZdLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNl0ubWV0ID0gdHJ1ZTtcblx0IFx0XHR9XG5cblx0IFx0XHQvL2lmIGFsbCBjb25zdHJhaW5zIG1ldCwgdGhyb3cgdmFsaWQgcGFzcyBmbGFnXG5cdCBcdFx0aWYoIHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzBdLm1ldCAmJlxuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMV0ubWV0ICYmXG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1syXS5tZXQgJiZcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzNdLm1ldCAmJlxuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNF0ubWV0ICYmXG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1s1XS5tZXQgJiZcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzZdLm1ldCkge1xuXHQgXHRcdFx0dm0uc2VjdXJlUGFzc3dvcmQuc2VjdXJlID0gdHJ1ZVxuXHQgXHRcdH0gZWxzZSB7XG5cdCBcdFx0XHR2bS5zZWN1cmVQYXNzd29yZC5zZWN1cmUgPSBmYWxzZTtcblx0IFx0XHR9XG5cblx0IFx0XHRpZih2bS5zZWN1cmVQYXNzd29yZC5zZWN1cmUpIHtcblx0IFx0XHRcdHZtLnNlY3VyZVBhc3N3b3JkLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHQgXHRcdH0gZWxzZSB7XG5cdCBcdFx0XHR2bS5zZWN1cmVQYXNzd29yZC5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdCBcdFx0fVxuIFx0XHR9XG4gXHRcdFxuIFx0XHR2bS5vcGVuQ3JlYXRlVXNlckJ1dHRvbigpO1xuXHR9XG5cblx0dm0uY2hlY2tVc2VyUGFzc3dvcmRzID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodm0udXNlclBhc3N3b3JkKSB7XG5cdFx0XHRpZih2bS51c2VyUGFzc3dvcmQubGVuZ3RoID4gMTUpIHtcblx0XHRcdFx0dm0udmFsaWRVc2VyUGFzc3dvcmQuc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdFx0XHRcdHZtLnZhbGlkVXNlclBhc3N3b3JkLnZhbGlkID0gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLnZhbGlkVXNlclBhc3N3b3JkLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0XHRcdFx0dm0udmFsaWRVc2VyUGFzc3dvcmQudmFsaWQgPSBmYWxzZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRcblx0XHR2bS5vcGVuVXNlckxvZ2luQnRuKCk7XG5cdH1cblxuXHR2bS5vcGVuQ3JlYXRlVXNlckJ1dHRvbiA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHZtLnZhbGlkTmV3TmFtZS52YWxpZCAmJiB2bS52YWxpZE5ld0VtYWlsLnZhbGlkICYmIHZtLnNlY3VyZVBhc3N3b3JkLnNlY3VyZSkge1xuXHRcdFx0dm0udW5sb2NrQ3JlYXRlVXNlckJ0bi5jbGFzcyA9ICdidG4gYnRuLXN1Y2Nlc3MnO1xuXHRcdFx0dm0udW5sb2NrQ3JlYXRlVXNlckJ0bi51c2FibGUgPSB0cnVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2bS51bmxvY2tDcmVhdGVVc2VyQnRuLmNsYXNzID0gJ2J0biBidG4td2FybmluZyc7XG5cdFx0XHR2bS51bmxvY2tDcmVhdGVVc2VyQnRuLnVzYWJsZSA9IGZhbHNlO1x0XG5cdFx0fVxuXG5cdH1cblxuXHR2bS5vcGVuVXNlckxvZ2luQnRuID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodm0udmFsaWRVc2VyRW1haWwudmFsaWQgJiYgdm0udmFsaWRVc2VyUGFzc3dvcmQudmFsaWQpIHtcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4uY2xhc3MgPSAnYnRuIGJ0bi1zdWNjZXNzJztcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlID0gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi5jbGFzcyA9ICdidG4gYnRuLXdhcm5pbmcnO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi51c2FibGUgPSBmYWxzZTtcdFxuXHRcdH1cblx0fVxuXG5cdHZtLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vc2V0IHZhbHVlc1xuXHRcdHZtLm5ld05hbWUgPSAkZG9jdW1lbnQuZmluZCgnI25ld05hbWUnKVswXS52YWx1ZTtcblx0XHR2bS5uZXdFbWFpbCA9ICRkb2N1bWVudC5maW5kKCcjbmV3RW1haWwnKVswXS52YWx1ZTtcblx0XHR2bS51c2VyRW1haWwgPSAkZG9jdW1lbnQuZmluZCgnI3VzZXJFbWFpbCcpWzBdLnZhbHVlO1xuXHRcdFxuXHRcdHZtLmNoZWNrTmV3TmFtZSgpO1xuXHRcdHZtLmNoZWNrTmV3RW1haWwoKTtcblx0XHR2bS5jaGVja1VzZXJFbWFpbCgpO1xuXHR9XG5cblx0ZnVuY3Rpb24gcmVkaXJlY3QocGF0aCwgdXNlckRhdGEpIHtcblx0XHR2YXIgZnVsbFBhdGggPSBwYXRoICsgJy8nICsgY3VycmVudFVzZXJEYXRhLnVpZCArICcvJyArIGN1cnJlbnRVc2VyRGF0YS50b2tlbjtcblx0XHQvL3JlZGlyZWN0XG5cdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyB0bzogJyArIGZ1bGxQYXRoKTtcblx0XHQkbG9jYXRpb24ucGF0aChmdWxsUGF0aCk7XG5cdFx0JHNjb3BlLiRhcHBseSgpO1xuXHR9XG5cblx0dm0uY3JlYXRlTmV3VXNlciA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2cuaW5mbygnQ3JlYXRpbmcgYSBuZXcgdXNlciBhY2NvdW50IG5vdyEnKTtcblxuXHRcdGlmKHZtLnVubG9ja0NyZWF0ZVVzZXJCdG4udXNhYmxlKSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZVxuXHRcdFx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cblx0XHRcdHJlZi5jcmVhdGVVc2VyKHtcblx0XHRcdFx0ZW1haWw6dm0ubmV3RW1haWwsXG5cdFx0XHRcdHBhc3N3b3JkOnZtLm5ld1Bhc3N3b3JkXG5cdFx0XHR9LGZ1bmN0aW9uKGVycm9yLCB1c2VyRGF0YSkge1xuXHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnRXJyb3IgY3JlYXRpbmcgdXNlcjogJyArIGVycm9yKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvL2xvZyByZXN1bHRzXG5cdFx0XHRcdFx0JGxvZy5pbmZvKHVzZXJEYXRhKTtcblxuXHRcdFx0XHRcdC8vc2F2ZSBhbGwgdGhlIGRhdGFcblx0XHRcdFx0XHRjdXJyZW50VXNlckRhdGEgPSB1c2VyRGF0YTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvL2dlbmVyYXRlIHRoZSB1c2VyIHJlY29yZFxuXHRcdFx0XHRcdHZhciB1c2Vyc1JlZiA9IHJlZi5jaGlsZCgnVXNlcnMvJyArIHVzZXJEYXRhLnVpZCk7XG5cdFx0XHRcdFx0dmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcblxuXHRcdFx0XHRcdC8vd3JpdGUgbmV3IHVzZXIgdG8gdGhlIGRhdGFiYXNlIHdpdGggYmlvIGluZm9cblx0XHRcdFx0XHR1c2Vyc1JlZi5zZXQoeyBcblx0XHRcdFx0XHRcdCdiaW8nOiB7XG5cdFx0XHRcdFx0XHRcdCduYW1lJzogdm0ubmV3TmFtZSxcblx0XHRcdFx0XHRcdFx0J2VtYWlsJzogdm0ubmV3RW1haWxcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHQnZXZlbnRzJzoge1xuXHRcdFx0XHRcdFx0XHQncGVuZGluZyc6IHtcblx0XHRcdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0J2hvc3RpbmcnOiB7XG5cdFx0XHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdCdhdHRlbmRpbmcnOiB7XG5cdFx0XHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdCdjb21wbGV0ZWQnOiB7XG5cdFx0XHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHRcdFx0JGxvZy5pbmZvKCdEYXRhIGNvdWxkIG5vdCBiZSBzYXZlZDogJyArIGVycm9yKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdCRsb2cuaW5mbygnRGF0YSBzYXZlZCBzdWNjZXNzZnVsbHkuJyk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Ly9hZGQgdGhpcyB1c2VyIHRvIHRoZSBsaXN0IG9mIHJlZ2lzdGVyZWQgdXNlcnNcblx0XHRcdFx0XHRyZWYuY2hpbGQoJ1VpZHMnKS5jaGlsZCh1dGY4X3RvX2I2NCh2bS5uZXdFbWFpbCkpLnNldChjdXJyZW50VXNlckRhdGEudWlkLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbyhcIkRhdGEgY291bGQgbm90IGJlIHNhdmVkLiBcIiArIGVycm9yKTtcblx0XHRcdFx0XHRcdGVsc2UgJGxvZy5pbmZvKFwidWlkIGNyZWF0ZWQgc3VjZXNzZnVsbHkuXCIpO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0Ly9yZWRpcmVjdCB0byBVc2VySW5mb3JtYXRpb25cblx0XHRcdFx0XHRyZWRpcmVjdCgnL3VzZXJJbmZvcm1hdGlvbicsIGN1cnJlbnRVc2VyRGF0YSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0fVxuXHR9XG5cblx0dm0ubG9naW5SZWdpc3RlcmVkVXNlciA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0aWYodm0udW5jbG9ja1VzZXJMb2dpbkJ0bi51c2FibGUpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlXG5cdFx0XHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHRcdFx0Ly9hdXRoZW50aWNhdGUgdGhlIHVzZXJcblx0XHRcdHJlZi5hdXRoV2l0aFBhc3N3b3JkKHtcblx0XHRcdFx0ZW1haWw6IHZtLnVzZXJFbWFpbCxcblx0XHRcdFx0cGFzc3dvcmQ6IHZtLnVzZXJQYXNzd29yZFxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IsIGF1dGhEYXRhKSB7XG5cdFx0XHRcdGlmKGVycm9yKSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdFcnJvciBMb2dnaW5nIEluOiAnICsgZXJyb3IpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnTG9nZ2VkIEluIHN1Y2Nlc3NmdWxseTogJyArIGF1dGhEYXRhLnVpZCk7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKGF1dGhEYXRhKTtcblx0XHRcdFx0XHQvL3NhdmUgYWxsIHRoZSBkYXRhXG5cdFx0XHRcdFx0Y3VycmVudFVzZXJEYXRhID0gYXV0aERhdGE7XG5cblx0XHRcdFx0XHQvL2xvYWQgdXNlciBiaW9cblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvL2xvYWQgdXNlciBldmVudHNcblxuXHRcdFx0XHRcdC8vcmVkaXJlY3Rcblx0XHRcdFx0XHRyZWRpcmVjdCgnL3VzZXJJbmZvcm1hdGlvbicsIGN1cnJlbnRVc2VyRGF0YSk7XG5cdFx0XHRcdFx0JHNjb3BlLiRhcHBseSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdH1cblxuXHR9XG5cblx0dm0uYWxlcnRNZSA9IGZ1bmN0aW9uKCkge1xuXHRcdGFsZXJ0KCd0aGlzIGlzIHdvcmtpbmchIGFuIGFsZXJ0IScpO1xuXHR9XG5cblx0dm0ub25SZXNpemVGdW5jdGlvbiA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBpbnB1dFRleHQgPSBhbmd1bGFyLmVsZW1lbnQoJy5pbnB1dFRleHQnKTtcblx0XHRpZigkd2luZG93Lm91dGVyV2lkdGggPiAkd2luZG93Lm91dGVySGVpZ2h0KSB7XG5cdFx0XHRpbnB1dFRleHQuY3NzKCdmb250LXNpemUnLCAnMmVtJyk7XG5cdFx0XHQkbG9nLmluZm8oJ21ha2luZyBiaWdnZXInKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aW5wdXRUZXh0LmNzcygnZm9udC1zaXplJywgJzEuMmVtJyk7XG5cdFx0fVxuXHR9XG5cblx0Ly9ldmVudCBsaXN0ZW5lcnNcblx0aWYgKCdhZGRFdmVudExpc3RlbmVyJyBpbiAkZG9jdW1lbnQpIHtcblx0ICAgICRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XG5cdCAgICBcdCRsb2cuaW5mbygnYWRkaW5nIEZhc3RDbGljaycpO1xuXHQgICAgICAgIEZhc3RDbGljay5hdHRhY2goJGRvY3VtZW50LmJvZHkpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHR9XG5cblx0YW5ndWxhci5lbGVtZW50KCR3aW5kb3cpLmJpbmQoJ3Jlc2l6ZScsIGZ1bmN0aW9uKCkge1xuXHRcdHZtLm9uUmVzaXplRnVuY3Rpb24oKTtcblx0XHQvLyRzY29wZS4kYXBwbHkoKTtcblx0fSk7XG5cblx0YW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cdFx0aWYoJHdpbmRvdy5vdXRlcldpZHRoIDwgNjAwKSB7XG5cdFx0XHR2bS5vblJlc2l6ZUZ1bmN0aW9uKCk7XG5cdFx0XHQvLyRzY29wZS4kYXBwbHkoKTtcblx0XHR9XG5cdH0pXG5cblxuXHQgdm0ubWFzdGVyID0ge307XG5cblx0ICB2bS51cGRhdGUgPSBmdW5jdGlvbih1c2VyKSB7XG5cdCAgICB2bS5tYXN0ZXIgPSBhbmd1bGFyLmNvcHkodXNlcik7XG5cdCAgfTtcblxuXHQgIHZtLnJlc2V0ID0gZnVuY3Rpb24oZm9ybSkge1xuXHQgICAgaWYgKGZvcm0pIHtcblx0ICAgICAgZm9ybS4kc2V0UHJpc3RpbmUoKTtcblx0ICAgICAgZm9ybS4kc2V0VW50b3VjaGVkKCk7XG5cdCAgICB9XG5cdCAgICB2bS51c2VyID0gYW5ndWxhci5jb3B5KHZtLm1hc3Rlcik7XG5cdCAgfTtcblxuXHQgIHZtLnJlc2V0KCk7XG59XG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdNYWluQ29udHJvbGxlcicsIE1haW5Db250cm9sbGVyKTtcblxuTWFpbkNvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICckbG9jYXRpb24nLCAnJGRvY3VtZW50J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gTWFpbkNvbnRyb2xsZXIoJGxvZywgJGxvY2F0aW9uLCAkZG9jdW1lbnQpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTsgXG5cblx0dm0ubG9nb3V0ID0gZnVuY3Rpb24oKSB7XG5cdFx0YWxlcnQoJ2xvZ2dpbmcgeW91IG91dCEnKTtcblx0XHRyZWYudW5hdXRoKCk7XG5cdFx0JGxvY2F0aW9uLnBhdGgoJy8nKTtcblx0fTtcblxuXHRpZiAoJ2FkZEV2ZW50TGlzdGVuZXInIGluICRkb2N1bWVudCkge1xuICAgICRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XG4gICAgXHQkbG9nLmluZm8oJ2FkZGluZyBGYXN0Q2xpY2snKTtcbiAgICAgICAgRmFzdENsaWNrLmF0dGFjaCgkZG9jdW1lbnQuYm9keSk7XG4gICAgfSwgZmFsc2UpO1xufVxufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignTmV3VXNlclNpZ25VcENvbnRyb2xsZXInLCBOZXdVc2VyU2lnblVwQ29udHJvbGxlcik7XG5cbk5ld1VzZXJTaWduVXBDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJywgJ3ZhbGlkYXRpb24nXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBOZXdVc2VyU2lnblVwQ29udHJvbGxlcigkc2NvcGUsICRsb2csIHZhbGlkYXRpb24pIHtcblx0dmFyIHZtID0gdGhpcztcblxuXHQvL2RlZmluZSB2bSBpbnB1dCB2YXJpYWJsZXNcblx0dm0uaW5wdXRzID0ge1xuXHRcdG5ld05hbWU6ICcnLFxuXHRcdG5ld0VtYWlsOiAnJyxcblx0XHRuZXdQYXNzd29yZDogJycsXG5cdFx0YWxsRmllbGRzRGVmaW5lZDogZmFsc2Vcblx0fVxuXHR2bS5lcnJvcnMgPSB7XG5cdFx0bmFtZTogJycsXG5cdFx0ZW1haWw6ICcnLFxuXHRcdHBhc3N3b3JkOiBmYWxzZSxcblx0XHRwYXNzZXNBbGxUZXN0czogZmFsc2Vcblx0fVxuXHR2bS5wYXNzUmVxcyA9IHtcblx0XHQwOiB7IGlkOicnLCByZXE6J0lzIGF0IGxlYXN0IDE2IGNoYXJhY3RlcnMgbG9uZycsIGZ1bGZpbGxlZDpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9fSxcblx0XHQxOiB7IGlkOicnLCByZXE6J0lzIG5vIGxvbmdlciB0aGFuIDEwMCBjaGFyYWN0ZXJzJywgZnVsZmlsbGVkOmZhbHNlLCAnc3R5bGUnOntjb2xvcjoncmVkJ30gfSxcblx0XHQyOiB7IGlkOicnLCByZXE6J0NvbnRhaW5zIGF0IGxlYXN0IG9uZSBsb3dlcmNhc2UgbGV0dGVyJywgZnVsZmlsbGVkOmZhbHNlLCAnc3R5bGUnOntjb2xvcjoncmVkJ30gfSxcblx0XHQzOiB7IGlkOicnLCByZXE6J0NvbnRhaW5zIGF0IGxlYXN0IG9uZSB1cHBlcmNhc2UgbGV0dGVyJywgZnVsZmlsbGVkOmZhbHNlLCAnc3R5bGUnOntjb2xvcjoncmVkJ30gfSxcblx0XHQ0OiB7IGlkOicnLCByZXE6J0NvbnRhaW5zIGF0IGxlYXN0IG9uZSBudW1iZXInLCBmdWxmaWxsZWQ6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOidyZWQnfSB9LFxuXHRcdDU6IHsgaWQ6JycsIHJlcTonQ29udGFpbnMgYXQgbGVhc3Qgb25lIHJlcXVpcmVkIHN5bWJvbCAoXFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqKScsIGZ1bGZpbGxlZDpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9IH0sXG5cdFx0NjogeyBpZDonJywgcmVxOlwiRG9lc24ndCBoYXZlIGFueSBpbGxlZ2FsIGNoYXJhY3RlcnNcIiwgZnVsZmlsbGVkOnRydWUsICdzdHlsZSc6e2NvbG9yOidyZWQnfSB9XG5cdH1cblx0dm0uc2hvd1JlcXNCb3ggPSBmYWxzZTtcblxuXHQvL2RlZmluZSByZXF1aXJlZCBmaWVsZCBjb25zdHJhaW50c1xuXHR2YXIgc2lnbnVwVmFsaWRhdGlvbiA9IHZhbGlkYXRpb247XG5cblx0Ly9kZWZpbmUgY29udHJvbGxlciBtZXRob2RzXG5cdGZ1bmN0aW9uIHZlcmlmeVJlcXVpcm5tZW50cygpIHtcblx0XHRpZih2bS5lcnJvcnMubmFtZSA9PSAnJyAmJiB2bS5lcnJvcnMuZW1haWwgPT0gJycgJiYgIXZtLmVycm9ycy5wYXNzd29yZCkgdm0uZXJyb3JzLnBhc3Nlc0FsbFRlc3RzID0gdHJ1ZTtcblx0XHRlbHNlIHZtLmVycm9ycy5wYXNzZXNBbGxUZXN0cyA9IGZhbHNlO1xuXG5cdFx0aWYoIGFuZ3VsYXIuaXNEZWZpbmVkKHZtLmlucHV0cy5uZXdOYW1lKSAmJiB2bS5pbnB1dHMubmV3TmFtZSAhPT0gJycgJiZcblx0XHRcdGFuZ3VsYXIuaXNEZWZpbmVkKHZtLmlucHV0cy5uZXdFbWFpbCkgJiYgdm0uaW5wdXRzLm5ld0VtYWlsICE9PSAnJyAmJlxuXHRcdFx0YW5ndWxhci5pc0RlZmluZWQodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKSAmJiB2bS5pbnB1dHMubmV3UGFzc3dvcmQgIT09ICcnKSBcblx0XHRcdFx0dm0uaW5wdXRzLmFsbEZpZWxkc0RlZmluZWQgPSB0cnVlO1xuXHRcdGVsc2Ugdm0uaW5wdXRzLmFsbEZpZWxkc0RlZmluZWQgPSBmYWxzZTtcblx0fVxuXG5cblxuXHQvL2RlZmluZSB2bSBhY2Nlc3NpYmxlIG1ldGhvZHNcblx0dm0uY2hlY2tOZXdOYW1lID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZVxuXHRcdHZhciBlcnJvcnMgPSBbXTtcblx0XHR2YXIgaGFzTmFtZSA9IHNpZ251cFZhbGlkYXRpb24ucmVxdWlyZWQodm0uaW5wdXRzLm5ld05hbWUpO1xuXHRcdHZhciBsb25nRW5vdWdoID0gc2lnbnVwVmFsaWRhdGlvbi5taW5OYW1lTGVuZ3RoKHZtLmlucHV0cy5uZXdOYW1lKVxuXHRcdFxuXHRcdC8vbG9nIGVycm9yc1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGhhc05hbWUpKSBlcnJvcnMucHVzaChoYXNOYW1lKTtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChsb25nRW5vdWdoKSkgZXJyb3JzLnB1c2gobG9uZ0Vub3VnaCk7XG5cblx0XHQvL3VwZGF0ZSB0aGUgZXJyb3JzIG1vZGVsXG5cdFx0aWYoZXJyb3JzLmxlbmd0aCA+IDApIHZtLmVycm9ycy5uYW1lID0gZXJyb3JzLmpvaW4oJywgJyk7XG5cdFx0ZWxzZSB2bS5lcnJvcnMubmFtZSA9ICcnO1xuXG5cdFx0dmVyaWZ5UmVxdWlybm1lbnRzKCk7XG5cdH1cblxuXHR2bS5jaGVja05ld0VtYWlsID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZVxuXHRcdHZhciBlcnJvcnMgPSBbXTtcblx0XHR2YXIgaGFzRW1haWwgPSBzaWdudXBWYWxpZGF0aW9uLnJlcXVpcmVkKHZtLmlucHV0cy5uZXdFbWFpbCk7XG5cdFx0dmFyIGlzQW5FbWFpbCA9IHNpZ251cFZhbGlkYXRpb24uZW1haWwodm0uaW5wdXRzLm5ld0VtYWlsKTtcblx0XHRcblx0XHQvL2xvZyBlcnJvcnNcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChoYXNFbWFpbCkpIGVycm9ycy5wdXNoKGhhc0VtYWlsKTtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZChpc0FuRW1haWwpKSBlcnJvcnMucHVzaChpc0FuRW1haWwpO1xuXG5cdFx0Ly91cGRhdGUgdGhlIGVycm9ycyBtb2RlbFxuXHRcdGlmKGVycm9ycy5sZW5ndGggPiAwKSB2bS5lcnJvcnMuZW1haWwgPSBlcnJvcnMuam9pbignLCAnKTtcblx0XHRlbHNlIHZtLmVycm9ycy5lbWFpbCA9ICcnO1xuXG5cdFx0dmVyaWZ5UmVxdWlybm1lbnRzKCk7XG5cdH1cblxuXHR2bS5jaGVja05ld1Bhc3N3b3JkID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9mbGlwIG9uIHJlcXMgYm94XG5cdFx0dm0uc2hvd1JlcXNCb3ggPSB0cnVlO1xuXG5cdFx0Ly9sb2NhbCB2YXJpYWJsZVxuXHRcdHZhciBlcnJvcnMgPSBbXTtcblx0XHR2YXIgaGFzUGFzc3dvcmQgPSBzaWdudXBWYWxpZGF0aW9uLnJlcXVpcmVkKHZtLmlucHV0cy5uZXdQYXNzd29yZCk7XG5cdFx0dmFyIHNwZWNpZmljUmVxcyA9IFtcblx0XHRcdHNpZ251cFZhbGlkYXRpb24ubWluUGFzc0xlbmd0aCh2bS5pbnB1dHMubmV3UGFzc3dvcmQpLFxuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5tYXhQYXNzTGVuZ3RoKHZtLmlucHV0cy5uZXdQYXNzd29yZCksXG5cdFx0XHRzaWdudXBWYWxpZGF0aW9uLmF0TGVhc3RPbmVMb3dlcmNhc2Uodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKSxcblx0XHRcdHNpZ251cFZhbGlkYXRpb24uYXRMZWFzdE9uZVVwcGVyY2FzZSh2bS5pbnB1dHMubmV3UGFzc3dvcmQpLFxuXHRcdFx0c2lnbnVwVmFsaWRhdGlvbi5hdExlYXN0T25lTnVtYmVyKHZtLmlucHV0cy5uZXdQYXNzd29yZCksXG5cdFx0XHRzaWdudXBWYWxpZGF0aW9uLmF0TGVhc3RPbmVTeW1ib2wodm0uaW5wdXRzLm5ld1Bhc3N3b3JkKSxcblx0XHRcdHNpZ251cFZhbGlkYXRpb24uaWxsZWdhbENoYXJhY3Rlcih2bS5pbnB1dHMubmV3UGFzc3dvcmQpXG5cdFx0XTtcblxuXHRcdC8vbG9nIGVycm9yc1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGhhc1Bhc3N3b3JkKSkgZXJyb3JzLnB1c2goaGFzUGFzc3dvcmQpO1xuXG5cdFx0Ly91cGRhdGUgdGhlIGVycm9ycyBtb2RlbFxuXHRcdGlmKGVycm9ycy5sZW5ndGggPiAwKSB2bS5lcnJvcnMucGFzc3dvcmQgPSBlcnJvcnMuam9pbignLCAnKTtcblx0XHRlbHNlIHZtLmVycm9ycy5lbWFpbCA9ICcnO1xuXG5cdFx0Ly91cGRhdGUgcmVxcyBtb2RlbFxuXHRcdHZhciBhbnlFcnJvcnMgPSBmYWxzZTtcblx0XHRmb3IoaT0wOyBpPDc7IGkrKykge1xuXHRcdFx0aWYoc3BlY2lmaWNSZXFzW2ldKSB7XG5cdFx0XHRcdHZtLnBhc3NSZXFzW2ldLmZ1bGZpbGxlZCA9IHRydWU7XG5cdFx0XHRcdHZtLnBhc3NSZXFzW2ldLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0ucGFzc1JlcXNbaV0uZnVsZmlsbGVkID0gZmFsc2U7XG5cdFx0XHRcdHZtLnBhc3NSZXFzW2ldLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0XHRcdFx0YW55RXJyb3JzID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR2bS5lcnJvcnMucGFzc3dvcmQgPSBhbnlFcnJvcnM7XG5cdFx0dmVyaWZ5UmVxdWlybm1lbnRzKCk7XG5cdH1cblxuXHR2bS5leGl0UGFzc3dvcmQgPSBmdW5jdGlvbigpIHtcblx0XHR2bS5jaGVja05ld1Bhc3N3b3JkKCk7XG5cdFx0dm0uc2hvd1JlcXNCb3ggPSBmYWxzZTtcblx0fVxuXG5cdHZtLmNyZWF0ZU5ld1VzZXIgPSBmdW5jdGlvbiAoKSB7XG5cdFx0JGxvZy5pbmZvKCdjcmVhdGluZyBhIG5ldyB1c2VyJyk7XG5cdH1cblx0XG5cdC8vcnVuIHRpbWUgYWN0aW9uc1xuXG59XG5cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ3RvcE1lbnVDb250cm9sbGVyJywgdG9wTWVudUNvbnRyb2xsZXIpO1xuXG50b3BNZW51Q29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZycsICckbG9jYXRpb24nLCAnJGRvY3VtZW50JywgJyR3aW5kb3cnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiB0b3BNZW51Q29udHJvbGxlcigkc2NvcGUsICRsb2csICRsb2NhdGlvbiwgJGRvY3VtZW50LCAkd2luZG93KSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdHZhciBmYlVSTCA9ICdodHRwczovL21lZXR1cHBsYW5uZXIuZmlyZWJhc2Vpby5jb20vJztcblx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cblx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0dm0ubG9nZ2VkSW4gPSBmYWxzZVxuXG5cdC8vc3R5bGVzIHZhcmlhYmxlc1xuXHRcblx0Ly9ldmVudCBsaXN0ZW5lcnNcblx0aWYgKCdhZGRFdmVudExpc3RlbmVyJyBpbiAkZG9jdW1lbnQpIHtcblx0ICAgICRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XG5cdCAgICBcdCRsb2cuaW5mbygnYWRkaW5nIEZhc3RDbGljaycpO1xuXHQgICAgICAgIEZhc3RDbGljay5hdHRhY2goJGRvY3VtZW50LmJvZHkpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHR9XG5cblx0YW5ndWxhci5lbGVtZW50KCR3aW5kb3cpLmJpbmQoJ3Jlc2l6ZScsIGZ1bmN0aW9uKCkge1xuXHRcdHZtLm9uUmVzaXplRnVuY3Rpb24oKTtcblx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cdH0pO1xuXG5cdGFuZ3VsYXIuZWxlbWVudCgkZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXHRcdGlmKCR3aW5kb3cub3V0ZXJXaWR0aCA8IDYwMCkge1xuXHRcdFx0dm0ub25SZXNpemVGdW5jdGlvbigpO1xuXHRcdFx0JHNjb3BlLiRhcHBseSgpO1xuXHRcdH1cblx0fSlcblx0Ly9keW5hbWljYWxseSBzZXQgaW5wdXQgd2lkdGhcblxuXG5cdC8vIENyZWF0ZSBhIGNhbGxiYWNrIHdoaWNoIGxvZ3MgdGhlIGN1cnJlbnQgYXV0aCBzdGF0ZVxuXHRmdW5jdGlvbiBpbml0KCkge1xuXHRcdHZtLm9uUmVzaXplRnVuY3Rpb24oKTtcblx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cdH1cblxuXHRmdW5jdGlvbiBhdXRoRGF0YUNhbGxiYWNrKGF1dGhEYXRhKSB7XG5cdCAgaWYgKGF1dGhEYXRhKSB7XG5cdCAgICAkbG9nLmluZm8oXCJVc2VyIFwiICsgYXV0aERhdGEudWlkICsgXCIgaXMgbG9nZ2VkIGluIHdpdGggXCIgKyBhdXRoRGF0YS5wcm92aWRlcik7XG5cdCAgICB2bS5sb2dnZWRJbiA9IHRydWU7XG5cdCAgfSBlbHNlIHtcblx0ICAgICRsb2cuaW5mbyhcIlVzZXIgaXMgbG9nZ2VkIG91dFwiKTtcblx0ICAgIHZtLmxvZ2dlZEluID0gZmFsc2U7XG5cdCAgfVxuXHR9XG5cblx0ZnVuY3Rpb24gcmVkaXJlY3QocGF0aCwgdXNlckRhdGEpIHtcblx0XHR2YXIgZnVsbFBhdGggPSBwYXRoICsgJy8nICsgdXNlckRhdGEudWlkICsgJy8nICsgdXNlckRhdGEudG9rZW47XG5cdFx0Ly9yZWRpcmVjdFxuXHRcdCRsb2cuaW5mbygncmVkaXJlY3RpbmcgdG86ICcgKyBmdWxsUGF0aCk7XG5cdFx0JGxvY2F0aW9uLnBhdGgoZnVsbFBhdGgpO1xuXHRcdC8vJHNjb3BlLiRhcHBseSgpO1xuXHR9XG5cblx0Ly92bSBhY2Nlc3NpYmxlIG1ldGhvZHNcblx0dm0ubG9nb3V0ID0gZnVuY3Rpb24oKSB7XG5cdFx0JGxvZy5pbmZvKCdsb2dnaW5nIG91dCEnKTtcblx0XHR2bS5sb2dnZWRJbiA9IGZhbHNlO1xuXHRcdHJlZi51bmF1dGgoKTtcblx0XHRyZWRpcmVjdCgnLycsIHt1aWQ6JycsIHRva2VuOicnfSk7XG5cdH1cblxuXHR2bS5uYXZCYXJMb2dpblJlZ2lzdGVyZWRVc2VyID0gZnVuY3Rpb24oKSB7XG5cdFx0JGxvZy5pbmZvKCdsYXVuY2hpbmcgbG9naW4nKTtcblx0XHRpZih0cnVlKSB7XG5cdFx0Ly9pZih2bS51bmNsb2NrVXNlckxvZ2luQnRuLnVzYWJsZSkge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVcblx0XHRcdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXG5cdFx0XHQvL2F1dGhlbnRpY2F0ZSB0aGUgdXNlclxuXHRcdFx0cmVmLmF1dGhXaXRoUGFzc3dvcmQoe1xuXHRcdFx0XHRlbWFpbDogdm0ubmF2YmFyVXNlckVtYWlsLFxuXHRcdFx0XHRwYXNzd29yZDogdm0ubmF2YmFyVXNlclBhc3Ncblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yLCBhdXRoRGF0YSkge1xuXHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnRXJyb3IgTG9nZ2luZyBJbjogJyArIGVycm9yKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ0xvZ2dlZCBJbiBzdWNjZXNzZnVsbHk6ICcgKyBhdXRoRGF0YS51aWQpO1xuXHRcdFx0XHRcdCRsb2cuaW5mbyhhdXRoRGF0YSk7XG5cdFx0XHRcdFx0Ly9zYXZlIGFsbCB0aGUgZGF0YVxuXG5cdFx0XHRcdFx0Ly9sb2FkIHVzZXIgYmlvXG5cdFx0XHRcdFx0Ly9sb2FkIHVzZXIgZXZlbnRzXG5cblx0XHRcdFx0XHQvL3JlZGlyZWN0XG5cdFx0XHRcdFx0cmVkaXJlY3QoJy91c2VySW5mb3JtYXRpb24nLCBhdXRoRGF0YSk7XG5cdFx0XHRcdFx0JHNjb3BlLiRhcHBseSgpO1xuXG5cdFx0XHRcdFx0Ly9jbGljayBjbG9zZWQgdGhlIG5hdmJhclxuXHRcdFx0XHRcdGFuZ3VsYXIuZWxlbWVudCgnLm5hdmJhci10b2dnbGUnKS5jbGljaygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXG5cblx0XHR9XG5cblx0fVxuXG5cdHZtLm9uUmVzaXplRnVuY3Rpb24gPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgbmF2YmFySW5wdXRzID0gYW5ndWxhci5lbGVtZW50KCcubmF2YmFySW5wdXRzJyk7XG5cdFx0bmF2YmFySW5wdXRzLmNzcygnd2lkdGgnLCAoJHdpbmRvdy5vdXRlcldpZHRoIC0gMjYpICsgJ3B4Jyk7XG5cdH1cblxuXHQvLyBSZWdpc3RlciB0aGUgY2FsbGJhY2sgdG8gYmUgZmlyZWQgZXZlcnkgdGltZSBhdXRoIHN0YXRlIGNoYW5nZXNcblx0cmVmLm9uQXV0aChhdXRoRGF0YUNhbGxiYWNrKTtcbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ1VzZXJFdmVudHNDb250cm9sbGVyJywgVXNlckV2ZW50c0NvbnRyb2xsZXIpO1xuXG5Vc2VyRXZlbnRzQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZycsICckbG9jYXRpb24nLCAnJHJvdXRlUGFyYW1zJywgJyRmaXJlYmFzZU9iamVjdCddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIFVzZXJFdmVudHNDb250cm9sbGVyKCRzY29wZSwgJGxvZywgJGxvY2F0aW9uLCAkcm91dGVQYXJhbXMsICRmaXJlYmFzZU9iamVjdCkge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHR2YXIgZmJVUkwgPSAnaHR0cHM6Ly9tZWV0dXBwbGFubmVyLmZpcmViYXNlaW8uY29tLyc7XG5cdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHR2YXIgdXNlckV2ZW50cyA9IHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS5jaGlsZCgnZXZlbnRzJyk7XG5cdHZhciBjdXJyZW50VXNlckJpbyA9IHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS5jaGlsZCgnYmlvJyk7XG5cdHZhciB1c2VyRXZlbnRzU25hcHNob3Q7XG5cblx0Ly9iaW5kaW5nIGltcG9ydGFudCB2YXJpYWJsZXNcblx0dm0uZXZlbnRzID0gJGZpcmViYXNlT2JqZWN0KHVzZXJFdmVudHMpO1xuXG5cdHZtLnNob3dEZWNsaW5lID0gZmFsc2U7XG5cdFxuXHRjdXJyZW50VXNlckJpby5jaGlsZCgnbmFtZScpLm9uKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0dm0uY3VycmVudFVzZXJOYW1lID0gc25hcHNob3QudmFsKCk7XG5cdFx0JGxvZy5pbmZvKCdnb3QgdGhlIHVzZXIgbmFtZScpO1xuXHRcdCRzY29wZS4kYXBwbHkoKTtcblx0fSwgZnVuY3Rpb24oZXJyb3JPYmplY3QpIHtcblx0XHQkbG9nLmluZm8oXCJUaGUgcmVhZCBmYWlsZWQ6IFwiICsgZXJyb3JPYmplY3QuY29kZSk7XG5cdH0pO1xuXG5cdC8vZGVjbGFyZSBsb2NhbCBtZXRob2RzXG5cdGZ1bmN0aW9uIHVuaXhUaW1lVG9EYXRlVGltZSh1bml4VGltZSkge1xuXHRcdHJldHVybiBuZXcgRGF0ZShwYXJzZUludCh1bml4VGltZSkpO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIGRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fTtcblxuXHRmdW5jdGlvbiBnZW5lcmF0ZUV2ZW50SUQoZGF0ZSwgbm9PZkV2ZW50c0FscmVhZHkpIHtcblx0XHRyZXR1cm4gKGRhdGUgKiAxMCkgKyBub09mRXZlbnRzQWxyZWFkeTtcblx0fVxuXG5cdC8vZGVjbGFyZSB2aWV3IG1ldGhvZHNcblx0ZnVuY3Rpb24gZXZlbnRSZWRpcmVjdChwYXRoLCBldmVudElELCBob3N0SWQpIHtcblx0XHR2YXIgZnVsbFBhdGggPSBwYXRoICsgJy8nICsgZXZlbnRJRCArICcvJyArIGhvc3RJZCArICcvJysgJHJvdXRlUGFyYW1zLnVpZCArICcvJyArICRyb3V0ZVBhcmFtcy50b2tlbjtcblx0XHQvL3JlZGlyZWN0XG5cdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyB0bzogJyArIGZ1bGxQYXRoKTtcblx0XHQkbG9jYXRpb24ucGF0aChmdWxsUGF0aCk7XG5cdH1cblxuXHR2bS5ldmVudHNBcmVCZWluZ0hvc3RlZCA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBldmVudEZvdW5kID0gZmFsc2U7XG5cdFx0Zm9yKGVsZW1lbnQgaW4gdm0uZXZlbnRzLmhvc3RpbmcpIHtcblx0XHRcdGlmKGVsZW1lbnQgIT0gJ3VwZGF0ZWQnKXtcblx0XHRcdFx0ZXZlbnRGb3VuZCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBldmVudEZvdW5kO1xuXHR9XG5cblx0dm0uZXZlbnRJbnZpdGF0aW9uc1BlbmRpbmcgPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgZXZlbnRGb3VuZCA9IGZhbHNlO1xuXHRcdGZvcihlbGVtZW50IGluIHZtLmV2ZW50cy5wZW5kaW5nKSB7XG5cdFx0XHRpZihlbGVtZW50ICE9ICd1cGRhdGVkJyl7XG5cdFx0XHRcdGV2ZW50Rm91bmQgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gZXZlbnRGb3VuZDtcblx0fVxuXG5cdHZtLmF0dGVuZGluZ0V2ZW50cyA9IGZ1bmN0aW9uKGd1ZXN0TGlzdCkge1xuXHRcdHZhciBldmVudEZvdW5kID0gZmFsc2U7XG5cdFx0Zm9yKGVsZW1lbnQgaW4gdm0uZXZlbnRzLmF0dGVuZGluZykge1xuXHRcdFx0aWYoZWxlbWVudCAhPSAndXBkYXRlZCcpe1xuXHRcdFx0XHRldmVudEZvdW5kID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGV2ZW50Rm91bmQ7XG5cdH1cblxuXHR2bS5wZXJjZW50UlNWUGVkID0gZnVuY3Rpb24oZ3Vlc3RMaXN0KSB7XHRcdFxuXHRcdGlmKGd1ZXN0TGlzdCkge1xuXHRcdFx0cmV0dXJuICh2bS50b3RhbEF0dGVuZGluZyhndWVzdExpc3QpIC8gdm0udG90YWxJbnZpdGVkKGd1ZXN0TGlzdCkpICogMTAwO1xuXHRcdH1cblx0XHRlbHNlIHJldHVybiAwO1xuXHR9XG5cblx0dm0udG90YWxBdHRlbmRpbmcgPSBmdW5jdGlvbihndWVzdExpc3QpIHtcblx0XHRpZihndWVzdExpc3QpIHtcblx0XHRcdHZhciBhdHRlbmRpbmcgPSAwO1xuXHRcdFx0YW5ndWxhci5mb3JFYWNoKGd1ZXN0TGlzdCwgZnVuY3Rpb24oZ3Vlc3QsIGlkKSB7XG5cdFx0XHRcdGlmKGd1ZXN0LmF0dGVuZGluZyA9PSB0cnVlKSBhdHRlbmRpbmcrKztcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIGF0dGVuZGluZztcblx0XHR9XG5cdFx0ZWxzZSByZXR1cm4gMDtcblx0fVxuXG5cdHZtLnRvdGFsSW52aXRlZCA9IGZ1bmN0aW9uKGd1ZXN0TGlzdCkge1xuXHRcdGlmKGd1ZXN0TGlzdCkge1xuXHRcdFx0dmFyIGludml0ZWQgPSAwO1xuXHRcdFx0YW5ndWxhci5mb3JFYWNoKGd1ZXN0TGlzdCwgZnVuY3Rpb24oZ3Vlc3QsIGlkKSB7XG5cdFx0XHRcdGludml0ZWQrKztcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIGludml0ZWQ7XG5cdFx0fVxuXHRcdGVsc2UgcmV0dXJuIDA7XG5cdH1cblxuXHR2bS5hY2NlcHRFdmVudEludml0YXRpb24gPSBmdW5jdGlvbihldmVudCkge1xuXHRcdC8qXG5cdFx0JGxvZy5pbmZvKGV2ZW50Lmhvc3QpO1xuXHRcdCRsb2cuaW5mbyhldmVudC5pZCk7XG5cdFx0Ly91cGRhdGUgaG9zdHMnIGxpc3RzXG5cdFx0cmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKGV2ZW50Lmhvc3QpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgnaG9zdGluZycpLmNoaWxkKGV2ZW50LmlkKS5jaGlsZCgnZ3Vlc3RMaXN0JykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkudXBkYXRlKHtcblx0XHRcdGF0dGVuZGluZzogdHJ1ZSxcblx0XHRcdHN0YXR1czogJ2F0dG5kbmcnXG5cdFx0fSk7XG5cblx0XHQvL3VwZGF0ZSBndWVzdCdzIGxpc3RzXG5cdFx0Ly9hZGQgdG8gdGhlIGF0dGVuZGluZyBsaXN0IC0gb24gdGhlIHNlcnZlclxuXHRcdHVzZXJFdmVudHMuY2hpbGQoJ2F0dGVuZGluZycpLmNoaWxkKGV2ZW50Lmhvc3QpLmNoaWxkKGV2ZW50LmlkKS5zZXQoe1xuXHRcdFx0aWQ6IGV2ZW50LmlkLFxuXHRcdFx0aG9zdDogZXZlbnQuaG9zdCxcblx0XHRcdGV2ZW50VGltZXM6IHtcblx0XHRcdFx0c3RhcnQ6IHZtLmV2ZW50cy5wZW5kaW5nW2V2ZW50Lmhvc3RdW2V2ZW50LmlkXS5ldmVudFRpbWVzLnN0YXJ0LFxuXHRcdFx0XHRlbmQ6IHZtLmV2ZW50cy5wZW5kaW5nW2V2ZW50Lmhvc3RdW2V2ZW50LmlkXS5ldmVudFRpbWVzLmVuZFxuXHRcdFx0fSxcblx0XHRcdG5hbWU6IHZtLmV2ZW50cy5wZW5kaW5nW2V2ZW50Lmhvc3RdW2V2ZW50LmlkXS5uYW1lXG5cdFx0fSk7XG5cdFx0Ly9hZGQgdG8gdGhlIGF0dGVuZGluZyBsaXN0IC0gaW4gdGhlIGJyb3dzZXJcblx0XHR2bS5ldmVudHMuYXR0ZW5kaW5nW2V2ZW50Lmhvc3RdW2V2ZW50LmlkXSA9IHtcblx0XHRcdGlkOiBldmVudC5pZCxcblx0XHRcdGhvc3Q6IGV2ZW50Lmhvc3QsXG5cdFx0XHRldmVudFRpbWVzOiB7XG5cdFx0XHRcdHN0YXJ0OiB2bS5ldmVudHMucGVuZGluZ1tldmVudC5ob3N0XVtldmVudC5pZF0uZXZlbnRUaW1lcy5zdGFydCxcblx0XHRcdFx0ZW5kOiB2bS5ldmVudHMucGVuZGluZ1tldmVudC5ob3N0XVtldmVudC5pZF0uZXZlbnRUaW1lcy5lbmRcblx0XHRcdH0sXG5cdFx0XHRuYW1lOiB2bS5ldmVudHMucGVuZGluZ1tldmVudC5ob3N0XVtldmVudC5pZF0ubmFtZVxuXHRcdH07XG5cblx0XHQvL3JlbW92ZSBmcm9tIHRoZSBwZW5kaW5nIGxpc3QgLSBvbiB0aGUgc2VydmVyXG5cdFx0dXNlckV2ZW50cy5jaGlsZCgncGVuZGluZycpLmNoaWxkKGV2ZW50Lmhvc3QpLmNoaWxkKGV2ZW50LmlkKS5yZW1vdmUoKTtcblx0XHQvL3JlbW92ZSBmcm9tIHRoZSBwZW5kaW5nIGxpc3QgLSBpbiB0aGUgYnJvd3NlclxuXHRcdHZtLmV2ZW50cy5wZW5kaW5nW2V2ZW50Lmhvc3RdW2V2ZW50LmlkXSA9IHt9O1xuXHRcdCovXG5cdH1cblxuXHR2bS5yZWRpcmVjdFRvSG9zdGVkRXZlbnQgPSBmdW5jdGlvbihldmVudElEKSB7XG5cdFx0JGxvZy5pbmZvKCd5b3VcXCdyZSBhY2Nlc3NpbmcgZXZlbnQgJyArIGV2ZW50SUQpO1xuXG5cdFx0Ly9yZWRpcmVjdCB0byB0aGUgZXZlbnRcblx0XHRldmVudFJlZGlyZWN0KCcvZXZlbnQnLCBldmVudElELCAkcm91dGVQYXJhbXMudWlkKTtcblx0fVxuXG5cdHZtLnJlZGlyZWN0VG8zcmRQYXJ0eUV2ZW50ID0gZnVuY3Rpb24oZXZlbnQsIGludml0ZVN0YXR1cykge1xuXHRcdCRsb2cuaW5mbyhldmVudCk7XG5cblx0XHQvL2dldHRpbmcgdGhlIGhvc3QncyBJZFxuXHRcdGlmKGludml0ZVN0YXR1cyA9PSAncGVuZGluZycpIHtcblx0XHRcdCRsb2cuaW5mbygnYWNjZXNzaW5nIGZyb20gYSBwZW5kaW5nIGludml0YXRpb24nKTtcblx0XHRcdCRsb2cuaW5mbyhldmVudCk7XG5cdFx0XHRldmVudFJlZGlyZWN0KCcvZXZlbnQnLCBldmVudC5pZCwgZXZlbnQuaG9zdCk7XG5cblx0XHR9IGVsc2UgaWYoaW52aXRlU3RhdHVzID09ICdhdHRlbmRpbmcnKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2FjY2Vzc2luZyBmcm9tIGFuIHJzdnBlZCBpbnZpdGF0aW9uJyk7XG5cdFx0XHRldmVudFJlZGlyZWN0KCcvZXZlbnQnLCBldmVudC5pZCwgZXZlbnQuaG9zdCk7XG5cdFx0fVxuXG5cdFx0Ly9yZWRpcmVjdGluZyB0byB0aGUgZXZlbnRcblxuXHR9XG5cblx0dm0uY3JlYXRlTmV3RXZlbnQgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9nLmluZm8oJ3lvdVxcJ3JlIGNyZWF0aW5nIGEgbmV3IGV2ZW50IScpO1xuXG5cdFx0Ly9kZWZpbmUgdGhlIGV2ZW50SURcblx0XHR2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7IFxuXHRcdFx0aWYodm0uZXZlbnRzLmhvc3RpbmcpIG5vT2ZFdmVudHNBbHJlYWR5ID0gT2JqZWN0LmtleXModm0uZXZlbnRzLmhvc3RpbmcpLmxlbmd0aDtcblx0XHRcdGVsc2Ugbm9PZkV2ZW50c0FscmVhZHkgPSAwO1xuXHRcdHZhciBldmVudElEID0gZ2VuZXJhdGVFdmVudElEKGRhdGVUaW1lVG9Vbml4VGltZShkYXRlKSwgbm9PZkV2ZW50c0FscmVhZHkpO1xuXG5cdFx0Ly9jcmVhdGUgZXZlbnQgbW9kZWwgdG8gc3RhcnQgd2l0aFxuXHRcdC8vJGxvZy5pbmZvKHZtLmV2ZW50c1snaG9zdGluZyddKTtcblx0XHR2bS5ldmVudHMuaG9zdGluZ1tldmVudElEXSA9IHtcblx0XHRcdGlkOiBldmVudElELFxuXHRcdFx0ZXZlbnRUaW1lczoge1xuXHRcdFx0XHRzdGFydDogZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGUpLFxuXHRcdFx0XHRlbmQ6IGRhdGVUaW1lVG9Vbml4VGltZShkYXRlKVxuXHRcdFx0fSxcblx0XHRcdGhvc3Q6IHsgXG5cdFx0XHRcdGlkOiAkcm91dGVQYXJhbXMudWlkLFxuXHRcdFx0XHRuYW1lOiB2bS5jdXJyZW50VXNlck5hbWVcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Ly9kZWxldGUgdGhlICd1cGRhdGVkJyBmaWVsZFxuXHRcdGlmKHZtLmV2ZW50cy5ob3N0aW5nLnVwZGF0ZWQgPT0gJycgfHwgdm0uZXZlbnRzLmhvc3RpbmcudXBkYXRlZCkge1xuXHRcdFx0JGxvZy5pbmZvKCdkZWxldGluZyB0aGUgdXBkYXRlZCBmaWVsZCcpO1xuXHRcdFx0ZGVsZXRlIHZtLmV2ZW50cy5ob3N0aW5nLnVwZGF0ZWQ7XG5cdFx0fVxuXHRcdC8vc2F2ZSB0aGUgbmV3IGV2ZW50XG5cdFx0Lypcblx0XHR2bS5ldmVudHMuJHNhdmUoKS50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdFx0JGxvZy5pbmZvKCdQcm9maWxlIHNhdmVkIScpO1xuXHRcdFx0JGxvZy5pbmZvKHZtLmV2ZW50cy5ob3N0aW5nW2V2ZW50SURdKTtcblx0XHR9KS5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0JGxvZy5pbmZvKCdFcnJvciEnKTtcblx0XHR9KTsqL1xuXG5cdFx0Ly9yZWRpcmVjdCB0byB0aGUgbmV3IEV2ZW50IFBhZ2Vcblx0XHRldmVudFJlZGlyZWN0KCcvZXZlbnQnLCBldmVudElELCAkcm91dGVQYXJhbXMudWlkKTtcblx0fVxuXG5cdC8vZXhlY3V0ZSBzY3JpcHRzXG5cdCRsb2cuaW5mbygnaW50byB0aGUgdXNlciBFdmVudHMgY29udHJvbGxlcicpO1xuXHQkbG9nLmluZm8odm0uZXZlbnRzKTtcblxufVxuXG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdVc2VySW5mb3JtYXRpb25Db250cm9sbGVyJywgVXNlckluZm9ybWF0aW9uQ29udHJvbGxlcik7XG5cblVzZXJJbmZvcm1hdGlvbkNvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICckbG9jYXRpb24nLCAnJHJvdXRlUGFyYW1zJywgJyRmaXJlYmFzZU9iamVjdCddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIFVzZXJJbmZvcm1hdGlvbkNvbnRyb2xsZXIoJGxvZywgJGxvY2F0aW9uLCAkcm91dGVQYXJhbXMsICRmaXJlYmFzZU9iamVjdCkge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHR2YXIgZmJVUkwgPSAnaHR0cHM6Ly9tZWV0dXBwbGFubmVyLmZpcmViYXNlaW8uY29tLyc7XG5cdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoZmJVUkwpOyBcblx0dmFyIHVzZXJCaW8gPSByZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJ2JpbycpO1xuXHRcblx0dm0udXNlciA9ICRmaXJlYmFzZU9iamVjdCh1c2VyQmlvKTtcblxuXHRhY3RpdmF0ZSgpO1xuXG5cdC8vbG9jYWwgdmFyaWFibGVzXG5cdHZtLnByb2NlZWRCdG4gPSAnYnRuIGJ0bi1wcmltYXJ5Jztcblx0dm0uYnRuTXNzZyA9ICdNb3ZlIE9uLi4uJztcblx0dm0uZGF0YVRvU2F2ZSA9IGZhbHNlO1xuXHR2bS5pc0RhdGEgPSBmYWxzZTtcblx0Ly9pbml0aWFsaXplIHRlbXAgYmlydGhkYXlcblx0dm0udXNlci4kbG9hZGVkKCkudGhlbihmdW5jdGlvbigpIHtcblx0XHRpZih2bS51c2VyLmJpcnRoZGF5KSB7XG5cdFx0XHR2bS50ZW1wQmlydGhkYXkgPSB1bml4VGltZVRvRGF0ZVRpbWUodm0udXNlci5iaXJ0aGRheSk7XG5cdFx0fSBlbHNlIHZtLnRlbXBCaXJ0aGRheSA9IG5ldyBEYXRlKCk7XG5cdH0pO1xuXG5cdC8vbG9jYWwgbWV0aG9kc1xuXHRmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcblx0XHQvL3doYXQgaGFwcGVucyB3aGVuIHRoZSBjb250cm9sbGVyIGxhdW5jaGVzXG5cdH1cblxuXHRmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fTtcblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH07XG5cblx0ZnVuY3Rpb24gcmVkaXJlY3QocGF0aCkge1xuXHRcdHZhciBmdWxsUGF0aCA9IHBhdGggKyAnLycgKyAkcm91dGVQYXJhbXMudWlkICsgJy8nICsgJHJvdXRlUGFyYW1zLnRva2VuO1xuXHRcdC8vcmVkaXJlY3Rcblx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIHRvOiAnICsgZnVsbFBhdGgpO1xuXHRcdCRsb2NhdGlvbi5wYXRoKGZ1bGxQYXRoKTtcblx0fTtcblxuXHQvL3ZpZXcgYWNjZXNzaWJsZSBtZXRob2RzXG5cdHZtLmNoZWNrVmFsdWVzID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYoICEoYW5ndWxhci5pc1VuZGVmaW5lZCh2bS51c2VyLmVtcGxveWVyKSB8fCB2bS51c2VyLmVtcGxveWVyID09PSAnJykgfHwgXG5cdFx0XHQhKGFuZ3VsYXIuaXNVbmRlZmluZWQodm0udXNlci5qb2JUaXRsZSkgfHwgdm0udXNlci5qb2JUaXRsZSA9PT0gJycpIHx8IFxuXHRcdFx0IShhbmd1bGFyLmlzVW5kZWZpbmVkKHZtLnVzZXIuYmlydGhkYXkpIHx8IHZtLnVzZXIuYmlydGhkYXkgPT09ICcnKSkgXG5cdFx0e1xuXHRcdFx0dm0uZGF0YVRvU2F2ZSA9IHRydWU7XG5cdFx0XHR2bS5wcm9jZWVkQnRuID0gJ2J0biBidG4tc3VjY2Vzcyc7XG5cdFx0XHR2bS5idG5Nc3NnID0gJ1NhdmUgJiBDb250aW51ZSc7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZtLmRhdGFUb1NhdmUgPSBmYWxzZTtcblx0XHRcdHZtLnByb2NlZWRCdG4gPSAnYnRuIGJ0bi1wcmltYXJ5Jztcblx0XHRcdHZtLmJ0bk1zc2cgPSAnTW92ZSBPbi4uLic7XHRcblx0XHR9XG5cblx0fVxuXG5cdHZtLnNhdmVBbmRNb3ZlT24gPSBmdW5jdGlvbigpIHtcblx0XHQvL2NvbnZlcnQgdGVtcCBiaXJ0aGRheSB0byBzYXZhYmxlIGZvcm1hdFxuXHRcdHZtLnVzZXIuYmlydGhkYXkgPSBkYXRlVGltZVRvVW5peFRpbWUodm0udGVtcEJpcnRoZGF5KTtcblx0XHQvL3NhdmUgcGFnZSBkYXRhXG5cdFx0dm0udXNlci4kc2F2ZSgpO1xuXHRcdC8vcmVkaXJlY3Rcblx0XHRyZWRpcmVjdCgnL3VzZXJFdmVudHMnKTtcblx0fVxuXG59XG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5mYWN0b3J5KCdhdXRoU2VydmljZScsIGF1dGhTZXJ2aWNlKTtcblxuYXV0aFNlcnZpY2UuJGluamVjdCA9IFsnJGxvZycsICckcScsICckbG9jYXRpb24nXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBhdXRoU2VydmljZSgkbG9nLCAkcSwgJGxvY2F0aW9uKSB7XG5cdHZhciBmYlVSTCA9ICdodHRwczovL21lZXR1cHBsYW5uZXIuZmlyZWJhc2Vpby5jb20vJztcblx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cblx0dmFyIGFsbEF1dGhTZXJ2aWNlcyA9IHtcblx0XHRpc0xvZ2dlZEluOiBpc0xvZ2dlZEluXG5cdH07XG5cblx0ZnVuY3Rpb24gYXV0aERhdGFDYWxsYmFjayhhdXRoRGF0YSkge1xuXHQgIFxuXHQgIGlmIChhdXRoRGF0YSkge1xuXHQgICAgJGxvZy5pbmZvKFwiVXNlciBcIiArIGF1dGhEYXRhLnVpZCArIFwiIGlzIGxvZ2dlZCBpbiB3aXRoIFwiICsgYXV0aERhdGEucHJvdmlkZXIpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICAkbG9nLmluZm8oXCJVc2VyIGlzIGxvZ2dlZCBvdXQuLi5kdW1waW5nIHRoZW0gYmFjayB0byBsYW5kaW5nIHBhZ2VcIik7XG5cdCAgICAvL2R1bXAgdGhlIHVzZXIgYmFjayBvdXRcblx0ICAgICRsb2NhdGlvbi5wYXRoKCcvJyk7XG5cdCAgfVxuXHR9XG5cblx0ZnVuY3Rpb24gaXNMb2dnZWRJbigpIHtcblx0XHQvL2NoZWNrIHRoZSB1c2VyIGF1dGhlbnRpY2Fpb24gc3RhdGVcblx0XHQkbG9nLmluZm8oJ2xvZ2dpbmcgZnJvbSB0aGUgaXNMb2dnZWRJbiBNZXRob2QnKTtcblx0XHRyZWYub25BdXRoKGF1dGhEYXRhQ2FsbGJhY2spO1xuXHR9XG5cdFxuXHRyZXR1cm4gYWxsQXV0aFNlcnZpY2VzO1xuXG59XG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5mYWN0b3J5KCd2YWxpZGF0aW9uJywgdmFsaWRhdGlvbik7XG5cbnZhbGlkYXRpb24uJGluamVjdCA9IFsnJGxvZyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHZhbGlkYXRpb24oJGxvZykge1xuXHQvL2RlY2xhcmUgbG9jYWwgdmFyaWFibGVzXG5cdHZhciBtaW5pbXVtTmFtZUxlbmd0aCA9IDM7XG5cdHZhciBtaW5pbXVtUGFzc0xlbmd0aCA9IDE2O1xuXHR2YXIgbWF4aW11bVBhc3NMZW5ndGggPSAxMDA7XG5cblx0dmFyIGFsbFZhbGlkYXRpb25zID0ge1xuXHRcdHJlcXVpcmVkOiByZXF1aXJlZCxcblx0XHRtaW5OYW1lTGVuZ3RoOiBtaW5OYW1lTGVuZ3RoLFxuXHRcdG1pblBhc3NMZW5ndGg6IG1pblBhc3NMZW5ndGgsXG5cdFx0bWF4UGFzc0xlbmd0aDogbWF4UGFzc0xlbmd0aCxcblx0XHRhdExlYXN0T25lU3ltYm9sOiBhdExlYXN0T25lU3ltYm9sLFxuXHRcdGF0TGVhc3RPbmVOdW1iZXI6IGF0TGVhc3RPbmVOdW1iZXIsXG5cdFx0YXRMZWFzdE9uZUxvd2VyY2FzZTogYXRMZWFzdE9uZUxvd2VyY2FzZSxcblx0XHRhdExlYXN0T25lVXBwZXJjYXNlOiBhdExlYXN0T25lVXBwZXJjYXNlLFxuXHRcdGlsbGVnYWxDaGFyYWN0ZXI6IGlsbGVnYWxDaGFyYWN0ZXIsXG5cdFx0ZW1haWw6IGVtYWlsLFxuXHRcdGRhdGVPZkJpcnRoOiBkYXRlT2ZCaXJ0aFxuXHR9O1xuXG5cdGZ1bmN0aW9uIHJlcXVpcmVkKHZhbHVlKSB7XG5cdFx0aWYoYW5ndWxhci5pc1VuZGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdHJldHVybiAnVGhpcyBpcyBhIHJlcXVpcmVkIGZpZWxkJztcblx0XHR9IFxuXHR9XG5cblx0ZnVuY3Rpb24gbWluTmFtZUxlbmd0aCh2YWx1ZSkge1xuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0aWYodmFsdWUubGVuZ3RoIDwgbWluaW11bU5hbWVMZW5ndGgpIHJldHVybiAoJ05hbWUgc2hvdWxkIGJlIGF0IGxlYXN0ICcgKyBtaW5pbXVtTmFtZUxlbmd0aCArICcgY2hhcmFjdGVycycpO1xuXHRcdH0gXG5cdH1cblxuXHRmdW5jdGlvbiBtaW5QYXNzTGVuZ3RoKHZhbHVlKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHRpZighKHZhbHVlLmxlbmd0aCA8IG1pbmltdW1QYXNzTGVuZ3RoKSkgcmV0dXJuIHRydWU7XG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGZ1bmN0aW9uIG1heFBhc3NMZW5ndGgodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdGlmKCEodmFsdWUubGVuZ3RoID4gbWF4aW11bVBhc3NMZW5ndGgpKSByZXR1cm4gdHJ1ZTtcblx0XHR9IFxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGZ1bmN0aW9uIGF0TGVhc3RPbmVTeW1ib2wodmFsdWUpIHtcblx0XHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdC8vIGJ1aWxkIHJlZ2V4XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbXFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqXVwiKTtcblxuXHRcdFx0Ly9jaGVjayBjb25zdHJhdGludFxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZhbHVlKSkge1xuXHRcdFx0XHQvL3N1Y2Nlc3M6IGF0IGxlYXN0IG9uZSBzcGVjaWFsIGNoYXJhY3RlciBmb3VuZFxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vZmFpbHVyZTogZGlkbid0IGZpbmQgYW55IHNwY2lhbCBjaGFyYWN0ZXJzXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRmdW5jdGlvbiBhdExlYXN0T25lTnVtYmVyKHZhbHVlKSB7XG5cdFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHQvLyBidWlsZCByZWdleFxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiWzAtOV1cIiwgXCJcIik7XG5cblx0XHRcdC8vY2hlY2sgY29uc3RyYXRpbnRcblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2YWx1ZSkpIHtcblx0XHRcdFx0Ly9zdWNjZXNzOiBhdCBsZWFzdCBvbmUgc3BlY2lhbCBjaGFyYWN0ZXIgZm91bmRcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2ZhaWx1cmU6IGRpZG4ndCBmaW5kIGFueSBzcGNpYWwgY2hhcmFjdGVyc1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cbiAgICBmdW5jdGlvbiBhdExlYXN0T25lTG93ZXJjYXNlKHZhbHVlKSB7XG4gICAgXHRpZihhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcblx0XHRcdC8vIGJ1aWxkIHJlZ2V4XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbYS16XVwiLCBcIlwiKTtcblxuXHRcdFx0Ly9jaGVjayBjb25zdHJhdGludFxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZhbHVlKSkge1xuXHRcdFx0XHQvL3N1Y2Nlc3M6IGF0IGxlYXN0IG9uZSBzcGVjaWFsIGNoYXJhY3RlciBmb3VuZFxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vZmFpbHVyZTogZGlkbid0IGZpbmQgYW55IHNwY2lhbCBjaGFyYWN0ZXJzXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYXRMZWFzdE9uZVVwcGVyY2FzZSh2YWx1ZSkge1xuICAgIFx0aWYoYW5ndWxhci5pc0RlZmluZWQodmFsdWUpKSB7XG5cdFx0XHQvLyBidWlsZCByZWdleFxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW0EtWl1cIiwgXCJcIik7XG5cblx0XHRcdC8vY2hlY2sgY29uc3RyYXRpbnRcblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2YWx1ZSkpIHtcblx0XHRcdFx0Ly9zdWNjZXNzOiBhdCBsZWFzdCBvbmUgc3BlY2lhbCBjaGFyYWN0ZXIgZm91bmRcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2ZhaWx1cmU6IGRpZG4ndCBmaW5kIGFueSBzcGNpYWwgY2hhcmFjdGVyc1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlsbGVnYWxDaGFyYWN0ZXIodmFsdWUpIHtcbiAgICBcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKHZhbHVlKSkge1xuXHRcdFx0Ly8gYnVpbGQgcmVnZXhcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIlteQS16MC05XFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqXVwiLCBcIlwiKTtcblxuXHRcdFx0Ly9jaGVjayBjb25zdHJhdGludFxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZhbHVlKSkge1xuXHRcdFx0XHQvL3N1Y2Nlc3M6IGF0IGxlYXN0IG9uZSBzcGVjaWFsIGNoYXJhY3RlciBmb3VuZFxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2ZhaWx1cmU6IGRpZG4ndCBmaW5kIGFueSBzcGNpYWwgY2hhcmFjdGVyc1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIGVtYWlsKHZhbHVlKSB7XG4gICAgXHQvL2RlZmluZSBjb25zdHJhaW50c1xuICAgIFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XCIsIFwiXCIpO1xuXG4gICAgXHRpZighY29uc3RyYWludC50ZXN0KHZhbHVlKSkgcmV0dXJuICdOb3QgYSB2YWxpZCBlLW1haWwgYWRkcmVzcydcbiAgICBcdFxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRhdGVPZkJpcnRoKHZhbHVlKSB7fVxuXG5cdHJldHVybiBhbGxWYWxpZGF0aW9ucztcbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbmZpZyhjb25maWcpO1xuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBjb25maWcoJHJvdXRlUHJvdmlkZXIpIHsgICBcbiAgICAkcm91dGVQcm92aWRlclxuICAgIC53aGVuKCcvJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2xhbmRpbmdQYWdlLmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdMYW5kaW5nUGFnZUNvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICB9KVxuICAgIC53aGVuKCcvc2lnbnVwJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL25ld1VzZXJTaWdudXAuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ05ld1VzZXJTaWduVXBDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgfSlcbiAgICAud2hlbignL2xvZ2luJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3JlZ2lzdGVyZWRVc2VyTG9naW4nLFxuICAgICAgICBjb250cm9sbGVyOiAnUmVnVXNlckxvZ2luQ29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xuICAgIH0pXG4gICAgLndoZW4oJy91c2VySW5mb3JtYXRpb24vOnVpZD8vOnRva2VuPycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy91c2VySW5mb3JtYXRpb24uaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1VzZXJJbmZvcm1hdGlvbkNvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgIHJlc29sdmU6IHsgLyogQG5nSW5qZWN0ICovXG4gICAgICAgICAgICB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlOiB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlXG4gICAgICAgIH1cbiAgICB9KVxuICAgIC53aGVuKCcvdXNlckV2ZW50cy86dWlkPy86dG9rZW4/Jywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3VzZXJFdmVudHMuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1VzZXJFdmVudHNDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICByZXNvbHZlOiB7IC8qIEBuZ0luamVjdCAqL1xuICAgICAgICAgICAgdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZTogdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZVxuICAgICAgICB9XG4gICAgfSlcbiAgICAud2hlbignL2V2ZW50LzpldmVudElkPy86aG9zdElkPy86dWlkPy86dG9rZW4/Jywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2FuRXZlbnQuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ0FuRXZlbnRDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICByZXNvbHZlOiB7IC8qIEBuZ0luamVjdCAqL1xuICAgICAgICAgICAgdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZTogdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZVxuICAgICAgICB9XG4gICAgfSlcbiAgICAub3RoZXJ3aXNlKHtcbiAgICAgICAgcmVkaXJlY3RUbzogJy8nXG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2UoYXV0aFNlcnZpY2UpIHtcbiAgICBhdXRoU2VydmljZS5pc0xvZ2dlZEluKCk7XG59XG4vKiBUb29sQmFyLmRpcmVjdGl2ZS5qcyAqL1xuXG4vKipcbiogQGRlc2MgdG9vbGJhciBkaXJlY3RpdmUgdGhhdCBpcyB1c2VkIG9uIHRoZSBtYWluIHBhZ2UgYWNyb3NzIHRoZSBlbnRpcmUgYXBwLlxuKiBAZXhhbXBsZSA8ZGl2IHRvb2wtYmFyPjwvZGl2PlxuKi9cblxuYW5ndWxhclxuXHQubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG5cdC5kaXJlY3RpdmUoJ3Rvb2xCYXInLCB0b29sQmFyKTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiB0b29sQmFyKCkge1xuICAgIGxpbmtGdW5jLiRpbmplY3QgPSBbXCJzY29wZVwiLCBcImVsXCIsIFwiYXR0clwiLCBcImN0cmxcIl07XG5cdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0cmVzdHJpY3Q6ICdBRUNNJyxcblx0XHR0ZW1wbGF0ZVVybDogJy4uL3ZpZXdzL2RpcmVjdGl2ZXMvdG9vbEJhci5kaXJlY3RpdmUuaHRtJyxcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdHNjb3BlOiB7fSxcblx0XHRsaW5rOiBsaW5rRnVuYyxcblx0XHRjb250cm9sbGVyOiBUb29sQmFyQ29udHJvbGxlcixcblx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHR9XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCwgYXR0ciwgY3RybCkge1xuICAgIH1cblxuICAgIFRvb2xCYXJDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnXTtcbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBUb29sQmFyQ29udHJvbGxlcigkbG9nKSB7XG5cdCAgICB2YXIgdm0gPSB0aGlzO1xuXG5cdCAgICAkbG9nLmluZm8oJ2RpcmVjdGl2ZSBsb2FkaW5nJyk7XG5cdH1cblxuXHRyZXR1cm4gIGRpcmVjdGl2ZTtcblx0XHRcbn07IiwiLyogVG9vbEJhci5kaXJlY3RpdmUuanMgKi9cblxuLyoqXG4qIEBkZXNjIHRvb2xiYXIgZGlyZWN0aXZlIHRoYXQgaXMgdXNlZCBvbiB0aGUgbWFpbiBwYWdlIGFjcm9zcyB0aGUgZW50aXJlIGFwcC5cbiogQGV4YW1wbGUgPGRpdiB0b29sLWJhcj48L2Rpdj5cbiovXG5cbmFuZ3VsYXJcblx0Lm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuXHQuZGlyZWN0aXZlKCd0b29sQmFyJywgdG9vbEJhcik7XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gdG9vbEJhcigpIHtcblx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRyZXN0cmljdDogJ0FFQ00nLFxuXHRcdHRlbXBsYXRlVXJsOiAnLi4vdmlld3MvZGlyZWN0aXZlcy90b29sQmFyLmRpcmVjdGl2ZS5odG0nLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0c2NvcGU6IHt9LFxuXHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdGNvbnRyb2xsZXI6IFRvb2xCYXJDb250cm9sbGVyLFxuXHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdH1cblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7XG4gICAgfVxuXG4gICAgVG9vbEJhckNvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZyddO1xuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIFRvb2xCYXJDb250cm9sbGVyKCRsb2cpIHtcblx0ICAgIHZhciB2bSA9IHRoaXM7XG5cblx0ICAgICRsb2cuaW5mbygnZGlyZWN0aXZlIGxvYWRpbmcnKTtcblx0fVxuXG5cdHJldHVybiAgZGlyZWN0aXZlO1xuXHRcdFxufTsiLCJhbmd1bGFyXG5cdC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJywgW1xuXHRcdCduZ1JvdXRlJyxcblx0XHQnbmdUb3VjaCcsXG5cdFx0J2ZpcmViYXNlJ1xuXHRdKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
