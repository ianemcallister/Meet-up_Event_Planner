function AnEventController(e,n,t,o,a){function s(e){return btoa(e)}function r(e){return atob(e)}function l(e){return Date.parse(e)}function d(){f.newGuest={name:"",email:{address:"",valid:!1,style:{color:""}}}}function c(e){n.info("adding them to the registered users list "+e),p.child("Users").child(e).child("events").child("pending").child(o.uid).child(o.eventId).set({id:o.eventId,eventTimes:{start:f.event.eventTimes.start,end:f.event.eventTimes.end},name:f.event.name,host:o.uid},function(e){e&&n.info("there was an error"+e)}),p.child("Users").child(e).child("events").child("pending").once("value",function(t){var i=t.val();n.info(t.val()),i.updated?(n.info("deleting updated"),p.child("Users").child(e).child("events").child("pending").child("updated").remove(function(e){e&&n.info("Deleting failed: "+e.code)})):n.info("nothing to do")},function(e){e&&n.info("The read failed: "+e.code)})}function u(e){n.info("adding them to the UNREGISTERED users list "+e),p.child("UnregisteredUsers").child(e).child("pending").child(o.uid).child(o.eventId).set({id:o.eventId,host:o.uid,eventTimes:{start:f.event.eventTimes.start,end:f.event.eventTimes.end},name:f.event.name},function(e){e&&n.info("there was an error"+e)})}function v(){var e=p.getAuth();e.uid==o.hostId?(n.info("is the host"),f.showIfHost=!0):(n.info("not the host"),f.showIfHost=!1)}function m(){f.showIfHost||(n.info("check guest attendance"),w.child("guestList").on("value",function(e){var n=e.val();f.hideIfAttending=!n[o.uid].attending}))}function g(){f.manageSections[1].active=!0,f.manageSections[2].active=!0,f.manageSections[3].active=!0}var f=this,h="https://meetupplanner.firebaseio.com/",p=new Firebase(h),w=p.child("Users").child(o.hostId).child("events").child("hosting").child(o.eventId);f.tempDateTime={start:new Date,end:new Date},f.newGuest={name:"",email:{address:"",valid:!1,style:{color:""}}},f.showIfHost=!1,f.hideIfAttending=!0,f.event=a(w);var b=a(p.child("Uids"));f.manageSections={1:{active:!0,complete:!1,style:{color:"black","background-color":"yellow"}},2:{active:!1,complete:!1,style:{color:"white","background-color":"gray"}},3:{active:!1,complete:!1,style:{color:"white","background-color":"gray"}}},f.unixTimeToDateTime=function(e){return new Date(parseInt(e))},f.dateTimeToUnixTime=function(e){return Date.parse(e)},f.submit=function(){n.info("submitting the form now!")},f.backToUserEvents=function(){t.path("/userEvents/"+o.uid+"/"+o.token)},f.eventRedirect=function(e,i){var a=e+"/"+o.uid+"/"+o.token;n.info("redirecting to: "+a),t.path(a)},f.changeSection=function(e){for(i=1;i<=3;i++)i==e?(f.manageSections[i].active=!0,f.manageSections[i].style["background-color"]="yellow",f.manageSections[i].style.color="black"):(f.manageSections[i].active=!1,f.manageSections[i].style["background-color"]="gray",f.manageSections[i].style.color="white")},f.saveEventTime=function(e,n){f.event.eventTimes||(f.event.eventTimes={start:"",end:""},f.event.eventTimes.start=f.dateTimeToUnixTime(f.tempDateTime.start),f.event.eventTimes.end=f.dateTimeToUnixTime(f.tempDateTime.end)),f.tempDateTime.end<f.tempDateTime.start&&"start"==n&&(f.tempDateTime.end=f.tempDateTime.start),"start"==n&&(f.event.eventTimes.start=f.dateTimeToUnixTime(e)),"end"==n&&(f.event.eventTimes.end=f.dateTimeToUnixTime(e))},f.guestsAreInvited=function(){return!!f.event.guestList},f.validateGuestEmail=function(){if(f.newGuest.email.address){var e=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","");e.test(f.newGuest.email.address)?(f.newGuest.email.valid=!0,f.newGuest.email.style={color:"green"}):(f.newGuest.email.valid=!1,f.newGuest.email.style={color:""})}},f.isSectionComplete=function(){f.manageSections[1].active?f.event.name&&f.event.type&&f.event.eventTimes.start&&f.event.eventTimes.start?(n.info("setting section 1 to green"),f.manageSections[1].complete=!0,f.manageSections[1].style["background-color"]="green"):f.manageSections[1].complete=!1:f.manageSections[2].active?f.event.address.city&&f.event.address.state&&f.event.address.street01&&f.event.address.zip?(n.info("setting section 2 to green"),f.manageSections[2].complete=!0,f.manageSections[2].style["background-color"]="green"):f.manageSections[2].complete=!1:f.manageSections[3].active&&(n.info("setting section 2 to green"),f.manageSections[3].complete=!0,f.manageSections[3].style["background-color"]="green")},f.saveEvent=function(){f.event.$save().then(function(){n.info("event saved")})["catch"](function(e){n.info("error! "+e)})},f.saveAndAdvance=function(){f.event.$save().then(function(){n.info("event saved")})["catch"](function(e){n.info("error! "+e)}),f.isSectionComplete(),1==f.manageSections[1].complete&&1==f.manageSections[2].complete&&1==f.manageSections[3].complete?f.eventRedirect("/userEvents",o.uid):f.manageSections[1].active?f.changeSection(2):f.manageSections[2].active?f.changeSection(3):f.manageSections[3].active&&f.changeSection(1)},f.addGuestToHostsList=function(){var e=s(f.newGuest.email.address);if(f.newGuest.name&&f.newGuest.email.valid){if(f.event.guestList)for(var t=0;f.event.guestList[t];){if(f.event.guestList[t].email==r(e))return n.info("This guest is already on the list"),void d();t++}else f.event.guestList={};if(b[e]){if(b[e]==o.uid)return n.info("tried to register the host"),void d();c(b[e]),f.event.guestList[b[e]]={attending:!1,status:"pending",name:f.newGuest.name,email:f.newGuest.email.address}}else u(e),f.event.guestList[e]={attending:!1,status:"pending",name:f.newGuest.name,email:f.newGuest.email.address};f.saveEvent(),d()}else n.info("you didn't enter a name and or email")},f.guestWillAttend=function(e){var t=p.child("Users").child(o.uid).child("events"),i=0,a=!1;if(f.event.guestList[o.uid].attending=e,f.event.guestList[o.uid].status="attending",t.child("pending").on("value",function(a){var s=a.val();n.info(s),n.info(s[o.hostId]),n.info(s[o.hostId][o.eventId]);var r=s[o.hostId][o.eventId];n.info(r);for(invitation in s)i++;n.info("total attending: "+i),e&&t.child("attending").child(o.hostId).child(o.eventId).set(r,function(e){e&&n.info(e)})}),t.child("attending").on("value",function(e){var t=e.val();n.info("this is the attending list"),n.info(t),t.updated&&(a=!0)},function(e){e&&n.info(e)}),2>i){var s=new Date;t.child("pending").update({updated:l(s)},function(e){e&&n.info(e)})}t.child("pending").child(o.hostId).remove(),a&&n.info("removing the updated placeholder"),f.event.$save()},f.updateUpdatedParam=function(){var e=p.child("Users").child(o.uid).child("events");n.info("updating the param"),e.child("attending").on("value",function(e){n.info(e.val())}),e.child("attending").child("updated").remove()},f.addInvitationToAttending=function(e){var t=p.child("Users").child(o.uid).child("events"),i=0;t.child("pending").on("value",function(a){var s=a.val(),r=s[o.hostId][o.eventId];n.info(s),n.info(s[o.hostId]),n.info(s[o.hostId][o.eventId]);for(invitation in s)i++;n.info("total pending invitations: "+i),n.info(e),e&&t.child("attending").child(o.hostId).child(o.eventId).set(r,function(e){e&&n.info(e)})})},n.info(o.uid),n.info(o.eventId),v(),m(),f.showIfHost||g()}function LandingPageController(e,n,t,o,a){function s(e){return btoa(e)}function r(e){return Date.parse(e)}function l(i,o){var a=i+"/"+u.uid+"/"+u.token;n.info("redirecting to: "+a),t.path(a),e.$apply()}var d=this,c="https://meetupplanner.firebaseio.com/",u={};d.showRequirnments=!1,d.validNewName={valid:!1,style:{color:""}},d.validNewEmail={valid:!1,style:{color:""}},d.securePassword={secure:!1,style:{color:""}},d.unlockCreateUserBtn={usable:!1,"class":"btn btn-warning"},d.message="testing",d.validUserEmail={valid:!1,style:{color:""}},d.validUserPassword={valid:!1,style:{color:""}},d.unclockUserLoginBtn={usable:!1,"class":"btn btn-warning"},d.passwordRequirnments={0:{constraint:"Is at least 16 characters long",style:{color:"red"},met:!1},1:{constraint:"Is no longer than 100 characters",style:{color:"red"},met:!1},2:{constraint:"Contains at least one required symbol (!@#$%^&*)",style:{color:"red"},met:!1},3:{constraint:"Contains at least one number",style:{color:"red"},met:!1},4:{constraint:"Contains at least one lowercase letter",style:{color:"red"},met:!1},5:{constraint:"Contains at least one uppercase letter",style:{color:"red"},met:!1},6:{constraint:"Doesn't have any illegal characters",style:{color:"red"},met:!1}},d.displayPassReqs=function(){d.newName&&d.newEmail?d.showRequirnments=!0:d.showRequirnments=!1},d.checkNewName=function(){d.newName&&(d.newName.length>0?(d.validNewName.valid=!0,d.validNewName.style={color:"green"}):(d.validNewName.valid=!1,d.validNewName.style={color:"red"})),d.openCreateUserButton()},d.checkNewEmail=function(){if(d.newEmail){var e=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","");e.test(d.newEmail)?(d.validNewEmail.valid=!0,d.validNewEmail.style={color:"green"}):(d.validNewEmail.valid=!1,d.validNewEmail.style={color:"red"})}d.openCreateUserButton()},d.checkUserEmail=function(){if(d.userEmail){var e=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","");e.test(d.userEmail)?(d.validUserEmail.valid=!0,d.validUserEmail.style={color:"green"}):(d.validUserEmail.valid=!1,d.validUserEmail.style={color:"red"})}d.openUserLoginBtn()},d.checkNewPasswords=function(){var e={0:[""," your password needs to be 16 characters or longer"],1:[""," your password needs to be less than 100 characters"],2:["[!@#$%^&*]"," no required symbols found"],3:["[0-9]"," no numbers found"],4:["[a-z]"," no lowercase letters found"],5:["[A-Z]"," no uppercase letters found"],6:["[^A-z0-9!@#$%^&*]"," illegal characters found"]};if(d.newPassword){for(d.newPassword.length>15?(d.passwordRequirnments[0].style={color:"green"},d.passwordRequirnments[0].met=!0):(d.passwordRequirnments[0].style={color:"red"},d.passwordRequirnments[0].met=!1),d.newPassword.length<=100?(d.passwordRequirnments[1].style={color:"green"},d.passwordRequirnments[1].met=!0):(d.passwordRequirnments[1].style={color:"red"},d.passwordRequirnments[1].met=!1),i=2;i<6;i++){var n=new RegExp(e[i][0],"");n.test(d.newPassword)?(d.passwordRequirnments[i].style={color:"green"},d.passwordRequirnments[i].met=!0):(d.passwordRequirnments[i].style={color:"red"},d.passwordRequirnments[i].met=!1)}var n=new RegExp(e[6][0],"");n.test(d.newPassword)?(d.passwordRequirnments[6].style={color:"green"},d.passwordRequirnments[6].met=!0):(d.passwordRequirnments[6].style={color:"red"},d.passwordRequirnments[6].met=!1),d.passwordRequirnments[0].met&&d.passwordRequirnments[1].met&&d.passwordRequirnments[2].met&&d.passwordRequirnments[3].met&&d.passwordRequirnments[4].met&&d.passwordRequirnments[5].met&&d.passwordRequirnments[6].met?d.securePassword.secure=!0:d.securePassword.secure=!1,d.securePassword.secure?d.securePassword.style={color:"green"}:d.securePassword.style={color:"red"}}d.openCreateUserButton()},d.checkUserPasswords=function(){d.userPassword&&(d.userPassword.length>15?(d.validUserPassword.style={color:"green"},d.validUserPassword.valid=!0):(d.validUserPassword.style={color:"red"},d.validUserPassword.valid=!1)),d.openUserLoginBtn()},d.openCreateUserButton=function(){d.validNewName.valid&&d.validNewEmail.valid&&d.securePassword.secure?(d.unlockCreateUserBtn["class"]="btn btn-success",d.unlockCreateUserBtn.usable=!0):(d.unlockCreateUserBtn["class"]="btn btn-warning",d.unlockCreateUserBtn.usable=!1)},d.openUserLoginBtn=function(){d.validUserEmail.valid&&d.validUserPassword.valid?(d.unclockUserLoginBtn["class"]="btn btn-success",d.unclockUserLoginBtn.usable=!0):(d.unclockUserLoginBtn["class"]="btn btn-warning",d.unclockUserLoginBtn.usable=!1)},d.update=function(){d.newName=o.find("#newName")[0].value,d.newEmail=o.find("#newEmail")[0].value,d.userEmail=o.find("#userEmail")[0].value,d.checkNewName(),d.checkNewEmail(),d.checkUserEmail()},d.createNewUser=function(){if(n.info("Creating a new user account now!"),d.unlockCreateUserBtn.usable){var e=new Firebase(c);e.createUser({email:d.newEmail,password:d.newPassword},function(t,i){if(t)n.info("Error creating user: "+t);else{n.info(i),u=i;var o=e.child("Users/"+i.uid),a=new Date;o.set({bio:{name:d.newName,email:d.newEmail},events:{pending:{updated:r(a)},hosting:{updated:r(a)},attending:{updated:r(a)},completed:{updated:r(a)}}},function(e){e?n.info("Data could not be saved: "+e):n.info("Data saved successfully.")}),e.child("Uids").child(s(d.newEmail)).set(u.uid,function(e){e?n.info("Data could not be saved. "+e):n.info("uid created sucessfully.")}),l("/userInformation",u)}})}},d.loginRegisteredUser=function(){if(d.unclockUserLoginBtn.usable){var t=new Firebase(c);t.authWithPassword({email:d.userEmail,password:d.userPassword},function(t,i){t?n.info("Error Logging In: "+t):(n.info("Logged In successfully: "+i.uid),n.info(i),u=i,l("/userInformation",u),e.$apply())})}},d.alertMe=function(){alert("this is working! an alert!")},d.onResizeFunction=function(){var e=angular.element(".inputText");a.outerWidth>a.outerHeight?(e.css("font-size","2em"),n.info("making bigger")):e.css("font-size","1.2em")},"addEventListener"in o&&o.addEventListener("DOMContentLoaded",function(){n.info("adding FastClick"),FastClick.attach(o.body)},!1),angular.element(a).bind("resize",function(){d.onResizeFunction()}),angular.element(o).ready(function(){a.outerWidth<600&&d.onResizeFunction()})}function MainController(e,n,t){var i=this,o="https://meetupplanner.firebaseio.com/",a=new Firebase(o);i.logout=function(){alert("logging you out!"),a.unauth(),n.path("/")},"addEventListener"in t&&t.addEventListener("DOMContentLoaded",function(){e.info("adding FastClick"),FastClick.attach(t.body)},!1)}function topMenuController(e,n,t,i,o){function a(e){e?(n.info("User "+e.uid+" is logged in with "+e.provider),r.loggedIn=!0):(n.info("User is logged out"),r.loggedIn=!1)}function s(e,i){var o=e+"/"+i.uid+"/"+i.token;n.info("redirecting to: "+o),t.path(o)}var r=this,l="https://meetupplanner.firebaseio.com/",d=new Firebase(l);r.loggedIn=!1,"addEventListener"in i&&i.addEventListener("DOMContentLoaded",function(){n.info("adding FastClick"),FastClick.attach(i.body)},!1),angular.element(o).bind("resize",function(){r.onResizeFunction(),e.$apply()}),angular.element(i).ready(function(){o.outerWidth<600&&(r.onResizeFunction(),e.$apply())}),r.logout=function(){n.info("logging out!"),r.loggedIn=!1,d.unauth(),s("/",{uid:"",token:""})},r.navBarLoginRegisteredUser=function(){n.info("launching login");var t=new Firebase(l);t.authWithPassword({email:r.navbarUserEmail,password:r.navbarUserPass},function(t,i){t?n.info("Error Logging In: "+t):(n.info("Logged In successfully: "+i.uid),n.info(i),s("/userInformation",i),e.$apply(),angular.element(".navbar-toggle").click())})},r.onResizeFunction=function(){var e=angular.element(".navbarInputs");e.css("width",o.outerWidth-26+"px")},d.onAuth(a)}function UserEventsController(e,n,t,i,o){function a(e){return Date.parse(e)}function s(e,n){return 10*e+n}function r(e,o,a){var s=e+"/"+o+"/"+a+"/"+i.uid+"/"+i.token;n.info("redirecting to: "+s),t.path(s)}var l=this,d="https://meetupplanner.firebaseio.com/",c=new Firebase(d),u=c.child("Users").child(i.uid).child("events"),v=c.child("Users").child(i.uid).child("bio");l.events=o(u),l.showDecline=!1,v.child("name").on("value",function(t){l.currentUserName=t.val(),n.info("got the user name"),e.$apply()},function(e){n.info("The read failed: "+e.code)}),l.eventsAreBeingHosted=function(){var e=!1;for(element in l.events.hosting)"updated"!=element&&(e=!0);return e},l.eventInvitationsPending=function(){var e=!1;for(element in l.events.pending)"updated"!=element&&(e=!0);return e},l.attendingEvents=function(e){var n=!1;for(element in l.events.attending)"updated"!=element&&(n=!0);return n},l.percentRSVPed=function(e){return e?l.totalAttending(e)/l.totalInvited(e)*100:0},l.totalAttending=function(e){if(e){var n=0;return angular.forEach(e,function(e,t){1==e.attending&&n++}),n}return 0},l.totalInvited=function(e){if(e){var n=0;return angular.forEach(e,function(e,t){n++}),n}return 0},l.acceptEventInvitation=function(e){},l.redirectToHostedEvent=function(e){n.info("you're accessing event "+e),r("/event",e,i.uid)},l.redirectTo3rdPartyEvent=function(e,t){n.info(e),"pending"==t?(n.info("accessing from a pending invitation"),n.info(e),r("/event",e.id,e.host)):"attending"==t&&(n.info("accessing from an rsvped invitation"),r("/event",e.id,e.host))},l.createNewEvent=function(){n.info("you're creating a new event!");var e=new Date;l.events.hosting?noOfEventsAlready=Object.keys(l.events.hosting).length:noOfEventsAlready=0;var t=s(a(e),noOfEventsAlready);l.events.hosting[t]={id:t,eventTimes:{start:a(e),end:a(e)},host:{id:i.uid,name:l.currentUserName}},(""==l.events.hosting.updated||l.events.hosting.updated)&&(n.info("deleting the updated field"),delete l.events.hosting.updated),l.events.$save().then(function(){n.info("Profile saved!"),n.info(l.events.hosting[t])})["catch"](function(e){n.info("Error!")}),r("/event",t,i.uid)},n.info("into the user Events controller"),n.info(l.events)}function UserInformationController(e,n,t,i){function o(){}function a(e){return new Date(parseInt(e))}function s(e){return Date.parse(e)}function r(i){var o=i+"/"+t.uid+"/"+t.token;e.info("redirecting to: "+o),n.path(o)}var l=this,d="https://meetupplanner.firebaseio.com/",c=new Firebase(d),u=c.child("Users").child(t.uid).child("bio");l.user=i(u),o(),l.proceedBtn="btn btn-primary",l.btnMssg="Move On...",l.dataToSave=!1,l.isData=!1,l.user.$loaded().then(function(){l.user.birthday?l.tempBirthday=a(l.user.birthday):l.tempBirthday=new Date}),l.checkValues=function(){!angular.isUndefined(l.user.employer)&&""!==l.user.employer||!angular.isUndefined(l.user.jobTitle)&&""!==l.user.jobTitle||!angular.isUndefined(l.user.birthday)&&""!==l.user.birthday?(l.dataToSave=!0,l.proceedBtn="btn btn-success",l.btnMssg="Save & Continue"):(l.dataToSave=!1,l.proceedBtn="btn btn-primary",l.btnMssg="Move On...")},l.saveAndMoveOn=function(){l.user.birthday=s(l.tempBirthday),l.user.$save(),r("/userEvents")}}function authService(e,n,t){function i(n){n?e.info("User "+n.uid+" is logged in with "+n.provider):(e.info("User is logged out...dumping them back to landing page"),t.path("/"))}function o(){e.info("logging from the isLoggedIn Method"),s.onAuth(i)}var a="https://meetupplanner.firebaseio.com/",s=new Firebase(a),r={isLoggedIn:o};return r}function config(e){e.when("/",{templateUrl:"views/landingPage.htm",controller:"LandingPageController",controllerAs:"vm"}).when("/userInformation/:uid?/:token?",{templateUrl:"views/userInformation.htm",controller:"UserInformationController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).when("/userEvents/:uid?/:token?",{templateUrl:"views/userEvents.htm",controller:"UserEventsController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).when("/event/:eventId?/:hostId?/:uid?/:token?",{templateUrl:"views/anEvent.htm",controller:"AnEventController",controllerAs:"vm",resolve:{userAuthenticationService:userAuthenticationService}}).otherwise({redirectTo:"/"})}function userAuthenticationService(e){e.isLoggedIn()}config.$inject=["$routeProvider"],userAuthenticationService.$inject=["authService"],angular.module("meetUpEventApp",["ngRoute","ngTouch","firebase"]),angular.module("meetUpEventApp").controller("AnEventController",AnEventController),AnEventController.$inject=["$scope","$log","$location","$routeParams","$firebaseObject"],angular.module("meetUpEventApp").controller("LandingPageController",LandingPageController),LandingPageController.$inject=["$scope","$log","$location","$document","$window"],angular.module("meetUpEventApp").controller("MainController",MainController),MainController.$inject=["$log","$location","$document"],angular.module("meetUpEventApp").controller("topMenuController",topMenuController),topMenuController.$inject=["$scope","$log","$location","$document","$window"],angular.module("meetUpEventApp").controller("UserEventsController",UserEventsController),UserEventsController.$inject=["$scope","$log","$location","$routeParams","$firebaseObject"],angular.module("meetUpEventApp").controller("UserInformationController",UserInformationController),UserInformationController.$inject=["$log","$location","$routeParams","$firebaseObject"],angular.module("meetUpEventApp").factory("authService",authService),authService.$inject=["$log","$q","$location"],angular.module("meetUpEventApp").config(config);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFuRXZlbnQuY29udHJvbGxlci5qcyIsIkxhbmRpbmdQYWdlLmNvbnRyb2xsZXIuanMiLCJNYWluLmNvbnRyb2xsZXIuanMiLCJUb3BNZW51LmNvbnRyb2xsZXIuanMiLCJVc2VyRXZlbnRzLmNvbnRyb2xsZXIuanMiLCJVc2VySW5mb3JtYXRpb24uY29udHJvbGxlci5qcyIsIkF1dGhTZXJ2aWNlLmZhY3RvcnkuanMiLCJyb3V0ZS1jb25maWcuanMiLCJhbGwuanMiLCJhcHAubW9kdWxlLmpzIl0sIm5hbWVzIjpbIkFuRXZlbnRDb250cm9sbGVyIiwiJHNjb3BlIiwiJGxvZyIsIiRsb2NhdGlvbiIsIiRyb3V0ZVBhcmFtcyIsIiRmaXJlYmFzZU9iamVjdCIsInV0ZjhfdG9fYjY0Iiwic3RyIiwiYnRvYSIsImI2NF90b191dGY4IiwiYXRvYiIsImRhdGVUaW1lVG9Vbml4VGltZSIsImRhdGVUaW1lIiwiRGF0ZSIsInBhcnNlIiwiY2xlYW5OZXdHdWVzdFZhcmlhYmxlIiwidm0iLCJuZXdHdWVzdCIsIm5hbWUiLCJlbWFpbCIsImFkZHJlc3MiLCJ2YWxpZCIsInN0eWxlIiwiY29sb3IiLCJpbnZpdGVBUmVnaXN0ZXJlZFVzZXIiLCJ1aWQiLCJpbmZvIiwicmVmIiwiY2hpbGQiLCJldmVudElkIiwic2V0IiwiaWQiLCJldmVudFRpbWVzIiwic3RhcnQiLCJldmVudCIsImVuZCIsImhvc3QiLCJlcnJvciIsIm9uY2UiLCJzbmFwc2hvdCIsImNoZWNrRm9yUGxhY2Vob2xkZXIiLCJ2YWwiLCJ1cGRhdGVkIiwicmVtb3ZlIiwiZXJyb3JPYmplY3QiLCJjb2RlIiwiaW52aXRlQW5VbnJlZ2lzdGVyZWRVc2VyIiwidXNlcktleSIsImNoZWNrRm9ySG9zdCIsImF1dGhEYXRhIiwiZ2V0QXV0aCIsImhvc3RJZCIsInNob3dJZkhvc3QiLCJjaGVja0lmR3Vlc3RJc0F0dGVuZGluZyIsInVzZXJFdmVudHMiLCJvbiIsImFsbEd1ZXN0cyIsImhpZGVJZkF0dGVuZGluZyIsImF0dGVuZGluZyIsIm9wZW5BbGxTZWN0aW9ucyIsIm1hbmFnZVNlY3Rpb25zIiwiYWN0aXZlIiwidGhpcyIsImZiVVJMIiwiRmlyZWJhc2UiLCJ0ZW1wRGF0ZVRpbWUiLCJyZWdpc3RlcmVkVXNlcnMiLDEsImNvbXBsZXRlIiwiYmFja2dyb3VuZC1jb2xvciIsMiwzLCJ1bml4VGltZVRvRGF0ZVRpbWUiLCJ1bml4VGltZSIsInBhcnNlSW50Iiwic3VibWl0IiwiYmFja1RvVXNlckV2ZW50cyIsInBhdGgiLCJ0b2tlbiIsImV2ZW50UmVkaXJlY3QiLCJldmVudElEIiwiZnVsbFBhdGgiLCJjaGFuZ2VTZWN0aW9uIiwidGFyZ2V0U2VjdGlvbiIsImkiLCJzYXZlRXZlbnRUaW1lIiwidGFyZ2V0IiwiZ3Vlc3RzQXJlSW52aXRlZCIsImd1ZXN0TGlzdCIsInZhbGlkYXRlR3Vlc3RFbWFpbCIsImNvbnN0cmFpbnQiLCJSZWdFeHAiLCJ0ZXN0IiwiaXNTZWN0aW9uQ29tcGxldGUiLCJ0eXBlIiwiY2l0eSIsInN0YXRlIiwic3RyZWV0MDEiLCJ6aXAiLCJzYXZlRXZlbnQiLCIkc2F2ZSIsInRoZW4iLCJzYXZlQW5kQWR2YW5jZSIsImFkZEd1ZXN0VG9Ib3N0c0xpc3QiLCJzdGF0dXMiLCJndWVzdFdpbGxBdHRlbmQiLCJyZXNwb25zZSIsImN1cnJlbnRVc2VyIiwidG90YWxQZW5kaW5nSW52aXRhdGlvbnMiLCJyZW1vdmVBdHRlbmRpbmdVcGRhdGVkIiwiaW52aXRhdGlvbnMiLCJ0aGlzSW52aXRhdGlvbiIsImludml0YXRpb24iLCJhdHRlbmRpbmdMaXN0IiwiY3VycmVudERhdGUiLCJ1cGRhdGUiLCJ1cGRhdGVVcGRhdGVkUGFyYW0iLCJhZGRJbnZpdGF0aW9uVG9BdHRlbmRpbmciLCJMYW5kaW5nUGFnZUNvbnRyb2xsZXIiLCIkZG9jdW1lbnQiLCIkd2luZG93IiwicmVkaXJlY3QiLCJ1c2VyRGF0YSIsImN1cnJlbnRVc2VyRGF0YSIsIiRhcHBseSIsInNob3dSZXF1aXJubWVudHMiLCJ2YWxpZE5ld05hbWUiLCJ2YWxpZE5ld0VtYWlsIiwic2VjdXJlUGFzc3dvcmQiLCJzZWN1cmUiLCJ1bmxvY2tDcmVhdGVVc2VyQnRuIiwidXNhYmxlIiwiY2xhc3MiLCJtZXNzYWdlIiwidmFsaWRVc2VyRW1haWwiLCJ2YWxpZFVzZXJQYXNzd29yZCIsInVuY2xvY2tVc2VyTG9naW5CdG4iLCJwYXNzd29yZFJlcXVpcm5tZW50cyIsMCwibWV0Iiw0LDUsNiwiZGlzcGxheVBhc3NSZXFzIiwibmV3TmFtZSIsIm5ld0VtYWlsIiwiY2hlY2tOZXdOYW1lIiwibGVuZ3RoIiwib3BlbkNyZWF0ZVVzZXJCdXR0b24iLCJjaGVja05ld0VtYWlsIiwiY2hlY2tVc2VyRW1haWwiLCJ1c2VyRW1haWwiLCJvcGVuVXNlckxvZ2luQnRuIiwiY2hlY2tOZXdQYXNzd29yZHMiLCJjb25zdHJhaW50cyIsIm5ld1Bhc3N3b3JkIiwiY2hlY2tVc2VyUGFzc3dvcmRzIiwidXNlclBhc3N3b3JkIiwiZmluZCIsInZhbHVlIiwiY3JlYXRlTmV3VXNlciIsImNyZWF0ZVVzZXIiLCJwYXNzd29yZCIsInVzZXJzUmVmIiwiYmlvIiwiZXZlbnRzIiwicGVuZGluZyIsImhvc3RpbmciLCJjb21wbGV0ZWQiLCJsb2dpblJlZ2lzdGVyZWRVc2VyIiwiYXV0aFdpdGhQYXNzd29yZCIsImFsZXJ0TWUiLCJhbGVydCIsIm9uUmVzaXplRnVuY3Rpb24iLCJpbnB1dFRleHQiLCJhbmd1bGFyIiwiZWxlbWVudCIsIm91dGVyV2lkdGgiLCJvdXRlckhlaWdodCIsImNzcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJGYXN0Q2xpY2siLCJhdHRhY2giLCJib2R5IiwiYmluZCIsInJlYWR5IiwiTWFpbkNvbnRyb2xsZXIiLCJsb2dvdXQiLCJ1bmF1dGgiLCJ0b3BNZW51Q29udHJvbGxlciIsImF1dGhEYXRhQ2FsbGJhY2siLCJwcm92aWRlciIsImxvZ2dlZEluIiwibmF2QmFyTG9naW5SZWdpc3RlcmVkVXNlciIsIm5hdmJhclVzZXJFbWFpbCIsIm5hdmJhclVzZXJQYXNzIiwiY2xpY2siLCJuYXZiYXJJbnB1dHMiLCJvbkF1dGgiLCJVc2VyRXZlbnRzQ29udHJvbGxlciIsImdlbmVyYXRlRXZlbnRJRCIsImRhdGUiLCJub09mRXZlbnRzQWxyZWFkeSIsImN1cnJlbnRVc2VyQmlvIiwic2hvd0RlY2xpbmUiLCJjdXJyZW50VXNlck5hbWUiLCJldmVudHNBcmVCZWluZ0hvc3RlZCIsImV2ZW50Rm91bmQiLCJldmVudEludml0YXRpb25zUGVuZGluZyIsImF0dGVuZGluZ0V2ZW50cyIsInBlcmNlbnRSU1ZQZWQiLCJ0b3RhbEF0dGVuZGluZyIsInRvdGFsSW52aXRlZCIsImZvckVhY2giLCJndWVzdCIsImludml0ZWQiLCJhY2NlcHRFdmVudEludml0YXRpb24iLCJyZWRpcmVjdFRvSG9zdGVkRXZlbnQiLCJyZWRpcmVjdFRvM3JkUGFydHlFdmVudCIsImludml0ZVN0YXR1cyIsImNyZWF0ZU5ld0V2ZW50IiwiT2JqZWN0Iiwia2V5cyIsIlVzZXJJbmZvcm1hdGlvbkNvbnRyb2xsZXIiLCJhY3RpdmF0ZSIsInVzZXJCaW8iLCJ1c2VyIiwicHJvY2VlZEJ0biIsImJ0bk1zc2ciLCJkYXRhVG9TYXZlIiwiaXNEYXRhIiwiJGxvYWRlZCIsImJpcnRoZGF5IiwidGVtcEJpcnRoZGF5IiwiY2hlY2tWYWx1ZXMiLCJpc1VuZGVmaW5lZCIsImVtcGxveWVyIiwiam9iVGl0bGUiLCJzYXZlQW5kTW92ZU9uIiwiYXV0aFNlcnZpY2UiLCIkcSIsImlzTG9nZ2VkSW4iLCJhbGxBdXRoU2VydmljZXMiLCJjb25maWciLCIkcm91dGVQcm92aWRlciIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJjb250cm9sbGVyQXMiLCJyZXNvbHZlIiwidXNlckF1dGhlbnRpY2F0aW9uU2VydmljZSIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCIkaW5qZWN0IiwibW9kdWxlIiwiZmFjdG9yeSJdLCJtYXBwaW5ncyI6IkFBT0EsUUFBQUEsbUJBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVB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Q0pBOUUsUUFDQStFLE9BQUEsa0JBQ0FDLFFBQUEsY0FBQWhCLGFBRUFBLFlBQUFjLFNBQUEsT0FBQSxLQUFBLGFDSkE5RSxRQUNBK0UsT0FBQSxrQkFDQVgsT0FBQUEiLCJmaWxlIjoiYWxsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignQW5FdmVudENvbnRyb2xsZXInLCBBbkV2ZW50Q29udHJvbGxlcik7XG5cbkFuRXZlbnRDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJywgJyRsb2NhdGlvbicsICckcm91dGVQYXJhbXMnLCAnJGZpcmViYXNlT2JqZWN0J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gQW5FdmVudENvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCAkbG9jYXRpb24sICRyb3V0ZVBhcmFtcywgJGZpcmViYXNlT2JqZWN0KSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdHZhciBmYlVSTCA9ICdodHRwczovL21lZXR1cHBsYW5uZXIuZmlyZWJhc2Vpby5jb20vJztcblx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdHZhciB1c2VyRXZlbnRzID0gcmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ob3N0SWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgnaG9zdGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ldmVudElkKVxuXHRcblx0Ly9kZWNsYXJlIGFuZCBpbml0aWFsaXplIGxvY2FsIHZhcmlhYmxlc1xuXHR2bS50ZW1wRGF0ZVRpbWUgPSB7c3RhcnQ6IG5ldyBEYXRlKCksIGVuZDogbmV3IERhdGUoKX07XG5cdHZtLm5ld0d1ZXN0ID0ge25hbWU6ICcnLCBlbWFpbDp7YWRkcmVzczonJywgdmFsaWQ6ZmFsc2UsIHN0eWxlOntjb2xvcjonJ319fTtcblx0dm0uc2hvd0lmSG9zdCA9IGZhbHNlO1xuXHR2bS5oaWRlSWZBdHRlbmRpbmcgPSB0cnVlO1xuXG5cdC8vYmluZGluZyB0byB0aGUgZXZlbnRcblx0dm0uZXZlbnQgPSAkZmlyZWJhc2VPYmplY3QodXNlckV2ZW50cylcblx0dmFyIHJlZ2lzdGVyZWRVc2VycyA9ICRmaXJlYmFzZU9iamVjdChyZWYuY2hpbGQoJ1VpZHMnKSk7XG5cblx0dm0ubWFuYWdlU2VjdGlvbnMgPSB7XG5cdFx0MToge2FjdGl2ZTogdHJ1ZSwgY29tcGxldGU6IGZhbHNlLCBzdHlsZTp7Y29sb3I6J2JsYWNrJywgJ2JhY2tncm91bmQtY29sb3InOid5ZWxsb3cnfX0sXG5cdFx0Mjoge2FjdGl2ZTogZmFsc2UsIGNvbXBsZXRlOiBmYWxzZSwgc3R5bGU6e2NvbG9yOid3aGl0ZScsICdiYWNrZ3JvdW5kLWNvbG9yJzonZ3JheSd9fSxcblx0XHQzOiB7YWN0aXZlOiBmYWxzZSwgY29tcGxldGU6IGZhbHNlLCBzdHlsZTp7Y29sb3I6J3doaXRlJywgJ2JhY2tncm91bmQtY29sb3InOidncmF5J319XG5cdH07XG5cblx0Ly9Mb2NhbCBNZXRob2RzXG5cdGZ1bmN0aW9uIHV0ZjhfdG9fYjY0KHN0cikge1xuXHRcdHJldHVybiBidG9hKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiBiNjRfdG9fdXRmOChzdHIpIHtcbiAgICBcdHJldHVybiBhdG9iKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH1cblxuXHRmdW5jdGlvbiBjbGVhbk5ld0d1ZXN0VmFyaWFibGUoKSB7XG5cdFx0dm0ubmV3R3Vlc3QgPSB7bmFtZTogJycsIGVtYWlsOnthZGRyZXNzOicnLCB2YWxpZDpmYWxzZSwgc3R5bGU6e2NvbG9yOicnfX19O1xuXHR9XG5cblx0ZnVuY3Rpb24gaW52aXRlQVJlZ2lzdGVyZWRVc2VyKHVpZCkge1xuXHRcdCRsb2cuaW5mbygnYWRkaW5nIHRoZW0gdG8gdGhlIHJlZ2lzdGVyZWQgdXNlcnMgbGlzdCAnICsgdWlkKTtcblx0XHQvL3NldCB0aGUgbmV3IGV2ZW50XG5cdFx0cmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdwZW5kaW5nJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJHJvdXRlUGFyYW1zLmV2ZW50SWQpLnNldCh7XG5cdFx0XHRpZDogJHJvdXRlUGFyYW1zLmV2ZW50SWQsXG5cdFx0XHRldmVudFRpbWVzOiB7XG5cdFx0XHRcdHN0YXJ0OiB2bS5ldmVudC5ldmVudFRpbWVzLnN0YXJ0LFxuXHRcdFx0XHRlbmQ6IHZtLmV2ZW50LmV2ZW50VGltZXMuZW5kXG5cdFx0XHR9LFxuXHRcdFx0bmFtZTogdm0uZXZlbnQubmFtZSxcblx0XHRcdGhvc3Q6ICRyb3V0ZVBhcmFtcy51aWRcblx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbygndGhlcmUgd2FzIGFuIGVycm9yJyArIGVycm9yKTtcblx0XHR9KTtcblx0XHQvL2lmIHRoZXJlIHdhcyBhbiB1cGRhdGVkIHBsYWNlIGhvbGRlciwgcmVtb3ZlIGl0XG5cdFx0cmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdwZW5kaW5nJykub25jZSgndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0dmFyIGNoZWNrRm9yUGxhY2Vob2xkZXIgPSBzbmFwc2hvdC52YWwoKVxuXHRcdFx0JGxvZy5pbmZvKHNuYXBzaG90LnZhbCgpKTtcblxuXHRcdFx0aWYoY2hlY2tGb3JQbGFjZWhvbGRlci51cGRhdGVkKSB7XG5cdFx0XHRcdCRsb2cuaW5mbygnZGVsZXRpbmcgdXBkYXRlZCcpO1xuXHRcdFx0XHRyZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ3BlbmRpbmcnKS5jaGlsZCgndXBkYXRlZCcpLnJlbW92ZShmdW5jdGlvbihlcnJvck9iamVjdCkge1xuXHRcdFx0XHRcdGlmKGVycm9yT2JqZWN0KSAkbG9nLmluZm8oXCJEZWxldGluZyBmYWlsZWQ6IFwiICsgZXJyb3JPYmplY3QuY29kZSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlICRsb2cuaW5mbygnbm90aGluZyB0byBkbycpO1xuXG5cdFx0fSwgZnVuY3Rpb24oZXJyb3JPYmplY3QpIHtcblx0XHRcdGlmKGVycm9yT2JqZWN0KSAkbG9nLmluZm8oXCJUaGUgcmVhZCBmYWlsZWQ6IFwiICsgZXJyb3JPYmplY3QuY29kZSk7XG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBpbnZpdGVBblVucmVnaXN0ZXJlZFVzZXIodXNlcktleSkge1xuXHRcdCRsb2cuaW5mbygnYWRkaW5nIHRoZW0gdG8gdGhlIFVOUkVHSVNURVJFRCB1c2VycyBsaXN0ICcgKyB1c2VyS2V5KTtcblx0XHRyZWYuY2hpbGQoJ1VucmVnaXN0ZXJlZFVzZXJzJykuY2hpbGQodXNlcktleSkuY2hpbGQoJ3BlbmRpbmcnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS5jaGlsZCgkcm91dGVQYXJhbXMuZXZlbnRJZCkuc2V0KHtcblx0XHRcdGlkOiAkcm91dGVQYXJhbXMuZXZlbnRJZCxcblx0XHRcdGhvc3Q6ICRyb3V0ZVBhcmFtcy51aWQsXG5cdFx0XHRldmVudFRpbWVzOiB7XG5cdFx0XHRcdHN0YXJ0OiB2bS5ldmVudC5ldmVudFRpbWVzLnN0YXJ0LFxuXHRcdFx0XHRlbmQ6IHZtLmV2ZW50LmV2ZW50VGltZXMuZW5kXG5cdFx0XHR9LFxuXHRcdFx0bmFtZTogdm0uZXZlbnQubmFtZVxuXHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKCd0aGVyZSB3YXMgYW4gZXJyb3InICsgZXJyb3IpO1xuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gY2hlY2tGb3JIb3N0KCkge1xuXHRcdC8vY2hlY2sgZXZlbnQgaG9zdFxuXHRcdHZhciBhdXRoRGF0YSA9IHJlZi5nZXRBdXRoKCk7XG5cblx0XHRpZihhdXRoRGF0YS51aWQgPT0gJHJvdXRlUGFyYW1zLmhvc3RJZCkge1xuXHRcdFx0JGxvZy5pbmZvKCdpcyB0aGUgaG9zdCcpO1xuXHRcdFx0dm0uc2hvd0lmSG9zdCA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCRsb2cuaW5mbygnbm90IHRoZSBob3N0Jyk7XG5cdFx0XHR2bS5zaG93SWZIb3N0ID0gZmFsc2U7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gY2hlY2tJZkd1ZXN0SXNBdHRlbmRpbmcoKSB7XG5cdFx0aWYoIXZtLnNob3dJZkhvc3QpIHtcblx0XHRcdCRsb2cuaW5mbygnY2hlY2sgZ3Vlc3QgYXR0ZW5kYW5jZScpO1xuXHRcdFx0dXNlckV2ZW50cy5jaGlsZCgnZ3Vlc3RMaXN0Jykub24oJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdFx0dmFyIGFsbEd1ZXN0cyA9IHNuYXBzaG90LnZhbCgpO1xuXHRcdFx0XHR2bS5oaWRlSWZBdHRlbmRpbmcgPSAhYWxsR3Vlc3RzWyRyb3V0ZVBhcmFtcy51aWRdLmF0dGVuZGluZztcblx0XHRcdFx0XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBvcGVuQWxsU2VjdGlvbnMoKSB7XG5cdFx0dm0ubWFuYWdlU2VjdGlvbnNbMV0uYWN0aXZlID0gdHJ1ZTtcblx0XHR2bS5tYW5hZ2VTZWN0aW9uc1syXS5hY3RpdmUgPSB0cnVlO1xuXHRcdHZtLm1hbmFnZVNlY3Rpb25zWzNdLmFjdGl2ZSA9IHRydWU7XG5cdH1cblxuXHQvL3ZpZXcgTWV0aG9kXG5cdHZtLnVuaXhUaW1lVG9EYXRlVGltZSA9IGZ1bmN0aW9uICh1bml4VGltZSkge1xuXHRcdHJldHVybiBuZXcgRGF0ZShwYXJzZUludCh1bml4VGltZSkpO1xuXHR9O1xuXG5cdHZtLmRhdGVUaW1lVG9Vbml4VGltZSA9IGZ1bmN0aW9uIChkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fTtcblxuXHR2bS5zdWJtaXQgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9nLmluZm8oJ3N1Ym1pdHRpbmcgdGhlIGZvcm0gbm93IScpO1xuXHR9XG5cblx0dm0uYmFja1RvVXNlckV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2NhdGlvbi5wYXRoKCcvdXNlckV2ZW50cy8nICsgJHJvdXRlUGFyYW1zLnVpZCArICcvJyArICRyb3V0ZVBhcmFtcy50b2tlbik7XG5cdH1cblxuXHR2bS5ldmVudFJlZGlyZWN0ID0gZnVuY3Rpb24ocGF0aCwgZXZlbnRJRCkge1xuXHRcdHZhciBmdWxsUGF0aCA9IHBhdGggKyAnLycgKyAkcm91dGVQYXJhbXMudWlkICsgJy8nICsgJHJvdXRlUGFyYW1zLnRva2VuO1xuXHRcdC8vcmVkaXJlY3Rcblx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIHRvOiAnICsgZnVsbFBhdGgpO1xuXHRcdCRsb2NhdGlvbi5wYXRoKGZ1bGxQYXRoKTtcblx0fVxuXG5cdHZtLmNoYW5nZVNlY3Rpb24gPSBmdW5jdGlvbih0YXJnZXRTZWN0aW9uKSB7XG5cdFx0Zm9yKGkgPSAxOyBpIDw9MzsgaSsrKSB7XG5cdFx0XHRpZihpPT10YXJnZXRTZWN0aW9uKSB7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLmFjdGl2ZSA9IHRydWU7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLnN0eWxlWydiYWNrZ3JvdW5kLWNvbG9yJ10gPSd5ZWxsb3cnO1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5zdHlsZVsnY29sb3InXSA9J2JsYWNrJztcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLmFjdGl2ZSA9IGZhbHNlO1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5zdHlsZVsnYmFja2dyb3VuZC1jb2xvciddID0nZ3JheSc7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLnN0eWxlWydjb2xvciddID0nd2hpdGUnO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHZtLnNhdmVFdmVudFRpbWUgPSBmdW5jdGlvbihkYXRlVGltZSwgdGFyZ2V0KSB7XG5cdFx0Ly9pZiB0aGlzIGV2ZW50IGRpZG4ndCBoYXZlIGEgc3RhcnQgdGltZSwgY3JlYXRlIGl0XG5cdFx0aWYoIXZtLmV2ZW50LmV2ZW50VGltZXMpIHsgXG5cdFx0XHR2bS5ldmVudC5ldmVudFRpbWVzID0ge3N0YXJ0OiAnJywgZW5kOiAnJ307XG5cdFx0XHR2bS5ldmVudC5ldmVudFRpbWVzLnN0YXJ0ID0gdm0uZGF0ZVRpbWVUb1VuaXhUaW1lKHZtLnRlbXBEYXRlVGltZS5zdGFydCk7IFxuXHRcdFx0dm0uZXZlbnQuZXZlbnRUaW1lcy5lbmQgPSB2bS5kYXRlVGltZVRvVW5peFRpbWUodm0udGVtcERhdGVUaW1lLmVuZCk7XG5cdFx0fVxuXG5cdFx0aWYoKHZtLnRlbXBEYXRlVGltZS5lbmQgPCB2bS50ZW1wRGF0ZVRpbWUuc3RhcnQpICYmIHRhcmdldCA9PSAnc3RhcnQnKSB2bS50ZW1wRGF0ZVRpbWUuZW5kID0gdm0udGVtcERhdGVUaW1lLnN0YXJ0O1xuXHRcdGlmKHRhcmdldCA9PSAnc3RhcnQnKSB2bS5ldmVudC5ldmVudFRpbWVzLnN0YXJ0ID0gdm0uZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKTtcblx0XHRpZih0YXJnZXQgPT0gJ2VuZCcpIHZtLmV2ZW50LmV2ZW50VGltZXMuZW5kID0gdm0uZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKTtcblx0fVxuXG5cdHZtLmd1ZXN0c0FyZUludml0ZWQgPSBmdW5jdGlvbigpIHtcblx0XHRpZih2bS5ldmVudC5ndWVzdExpc3QpIHJldHVybiB0cnVlO1xuXHRcdGVsc2UgcmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0dm0udmFsaWRhdGVHdWVzdEVtYWlsID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9pZiB0aGVyZSBpcyBhbiBlbWFpbCBhZGRyZXNzXG5cdFx0aWYodm0ubmV3R3Vlc3QuZW1haWwuYWRkcmVzcykge1xuXHRcdFx0Ly9jaGVjayB2YWxpZGl0eVxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XCIsIFwiXCIpO1xuXG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3Qodm0ubmV3R3Vlc3QuZW1haWwuYWRkcmVzcykpIHtcblx0XHRcdFx0dm0ubmV3R3Vlc3QuZW1haWwudmFsaWQgPSB0cnVlO1xuXHRcdFx0XHR2bS5uZXdHdWVzdC5lbWFpbC5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLm5ld0d1ZXN0LmVtYWlsLnZhbGlkID0gZmFsc2U7XG5cdFx0XHRcdHZtLm5ld0d1ZXN0LmVtYWlsLnN0eWxlID0ge2NvbG9yOicnfTtcblx0XHRcdH1cdFx0XHRcblx0XHR9XG5cdH1cblxuXHR2bS5pc1NlY3Rpb25Db21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHZtLm1hbmFnZVNlY3Rpb25zWzFdLmFjdGl2ZSkge1xuXHRcdFx0aWYoIHZtLmV2ZW50Lm5hbWUgJiZcblx0XHRcdFx0dm0uZXZlbnQudHlwZSAmJlxuXHRcdFx0XHR2bS5ldmVudC5ldmVudFRpbWVzLnN0YXJ0ICYmXG5cdFx0XHRcdHZtLmV2ZW50LmV2ZW50VGltZXMuc3RhcnQpIHtcblx0XHRcdFx0JGxvZy5pbmZvKCdzZXR0aW5nIHNlY3Rpb24gMSB0byBncmVlbicpO1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1sxXS5jb21wbGV0ZSA9IHRydWU7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zWzFdLnN0eWxlWydiYWNrZ3JvdW5kLWNvbG9yJ10gPSAnZ3JlZW4nO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB2bS5tYW5hZ2VTZWN0aW9uc1sxXS5jb21wbGV0ZSA9IGZhbHNlO1xuXHRcdH0gZWxzZSBpZiAodm0ubWFuYWdlU2VjdGlvbnNbMl0uYWN0aXZlKSB7XG5cdFx0XHRpZiggdm0uZXZlbnQuYWRkcmVzcy5jaXR5ICYmIFxuXHRcdFx0XHR2bS5ldmVudC5hZGRyZXNzLnN0YXRlICYmXG5cdFx0XHRcdHZtLmV2ZW50LmFkZHJlc3Muc3RyZWV0MDEgJiZcblx0XHRcdFx0dm0uZXZlbnQuYWRkcmVzcy56aXApIHtcblx0XHRcdFx0JGxvZy5pbmZvKCdzZXR0aW5nIHNlY3Rpb24gMiB0byBncmVlbicpO1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1syXS5jb21wbGV0ZSA9IHRydWU7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zWzJdLnN0eWxlWydiYWNrZ3JvdW5kLWNvbG9yJ10gPSAnZ3JlZW4nO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB2bS5tYW5hZ2VTZWN0aW9uc1syXS5jb21wbGV0ZSA9IGZhbHNlO1xuXHRcdH0gZWxzZSBpZiAodm0ubWFuYWdlU2VjdGlvbnNbM10uYWN0aXZlKSB7XG5cdFx0XHQkbG9nLmluZm8oJ3NldHRpbmcgc2VjdGlvbiAyIHRvIGdyZWVuJyk7XG5cdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1szXS5jb21wbGV0ZSA9IHRydWU7XG5cdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1szXS5zdHlsZVsnYmFja2dyb3VuZC1jb2xvciddID0gJ2dyZWVuJztcblx0XHR9XG5cdH1cblxuXHR2bS5zYXZlRXZlbnQgPSBmdW5jdGlvbigpIHtcblx0XHR2bS5ldmVudC4kc2F2ZSgpLnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2V2ZW50IHNhdmVkJyk7XG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdCRsb2cuaW5mbygnZXJyb3IhICcgKyBlcnJvcik7XG5cdFx0fSk7XG5cdH1cblxuXHR2bS5zYXZlQW5kQWR2YW5jZSA9IGZ1bmN0aW9uKCkge1xuXHRcdHZtLmV2ZW50LiRzYXZlKCkudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdCRsb2cuaW5mbygnZXZlbnQgc2F2ZWQnKTtcblx0XHR9KS5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0JGxvZy5pbmZvKCdlcnJvciEgJyArIGVycm9yKTtcblx0XHR9KTtcblxuXHRcdC8vY2hlY2sgZm9yIGNvbXBsZXRlbmVzXG5cdFx0dm0uaXNTZWN0aW9uQ29tcGxldGUoKTtcblxuXHRcdGlmKHZtLm1hbmFnZVNlY3Rpb25zWzFdLmNvbXBsZXRlID09IHRydWUgJiYgdm0ubWFuYWdlU2VjdGlvbnNbMl0uY29tcGxldGUgPT0gdHJ1ZSAmJiB2bS5tYW5hZ2VTZWN0aW9uc1szXS5jb21wbGV0ZSA9PSB0cnVlKSB7XG5cdFx0XHR2bS5ldmVudFJlZGlyZWN0KCcvdXNlckV2ZW50cycsICRyb3V0ZVBhcmFtcy51aWQpO1xuXHRcdH0gZWxzZSBpZiAodm0ubWFuYWdlU2VjdGlvbnNbMV0uYWN0aXZlKSB2bS5jaGFuZ2VTZWN0aW9uKDIpO1xuXHRcdGVsc2UgaWYgKHZtLm1hbmFnZVNlY3Rpb25zWzJdLmFjdGl2ZSkgdm0uY2hhbmdlU2VjdGlvbigzKTtcblx0XHRlbHNlIGlmICh2bS5tYW5hZ2VTZWN0aW9uc1szXS5hY3RpdmUpIHZtLmNoYW5nZVNlY3Rpb24oMSk7XG5cdH1cblxuXHR2bS5hZGRHdWVzdFRvSG9zdHNMaXN0ID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9kZWNsYXJlIGFuZCBpbml0aWFsaXplIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciB1c2VyS2V5ID0gdXRmOF90b19iNjQodm0ubmV3R3Vlc3QuZW1haWwuYWRkcmVzcyk7XG5cblx0XHQvL2lmIGVtYWlsIGlzIHZhbGlkIGFuZCBuYW1lIGV4aXN0c1xuXHRcdGlmICh2bS5uZXdHdWVzdC5uYW1lICYmIHZtLm5ld0d1ZXN0LmVtYWlsLnZhbGlkKSB7XG5cdFx0XHQvL2lzIHRoZXJlIGEgZ3Vlc3QgbGlzdCBhbHJlYWR5PyBJZiBub3QgY3JlYXRlIG9uZVxuXHRcdFx0aWYoIXZtLmV2ZW50Lmd1ZXN0TGlzdCkge1xuXHRcdFx0XHR2bS5ldmVudC5ndWVzdExpc3QgPSB7fTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vaWYgc28gaXMgdGhpcyBwZXJzb24gYWxyZWFkeSBvbiB0aGUgbGlzdD9cblx0XHRcdFx0dmFyIGkgPTA7XG5cdFx0XHRcdHdoaWxlKHZtLmV2ZW50Lmd1ZXN0TGlzdFtpXSkge1xuXHRcdFx0XHRcdGlmKHZtLmV2ZW50Lmd1ZXN0TGlzdFtpXS5lbWFpbCA9PSBiNjRfdG9fdXRmOCh1c2VyS2V5KSkge1xuXHRcdFx0XHRcdFx0JGxvZy5pbmZvKCdUaGlzIGd1ZXN0IGlzIGFscmVhZHkgb24gdGhlIGxpc3QnKTtcblx0XHRcdFx0XHRcdGNsZWFuTmV3R3Vlc3RWYXJpYWJsZSgpO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpKys7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly9pcyB0aGlzIGd1ZXN0IGEgcmVnaXN0ZXJlZCB1c2VyP1xuXHRcdFx0aWYocmVnaXN0ZXJlZFVzZXJzW3VzZXJLZXldKSB7XG5cdFx0XHRcdC8vaXMgdGhlIHJlZ2lzdGVyZWQgdXNlciB0aGUgaG9zdD9cblx0XHRcdFx0aWYocmVnaXN0ZXJlZFVzZXJzW3VzZXJLZXldID09ICRyb3V0ZVBhcmFtcy51aWQpIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ3RyaWVkIHRvIHJlZ2lzdGVyIHRoZSBob3N0Jyk7XG5cdFx0XHRcdFx0Y2xlYW5OZXdHdWVzdFZhcmlhYmxlKCk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdC8vYWRkIHRoZW0gdG8gdGhlIGFwcHJvcHJpYXRlIHJlZ2lzdGVyZWQgdXNlcnMnIGxpc3Qgb2YgZXZlbnQgaW52aXRlc1xuXHRcdFx0XHRcdGludml0ZUFSZWdpc3RlcmVkVXNlcihyZWdpc3RlcmVkVXNlcnNbdXNlcktleV0pO1xuXG5cdFx0XHRcdFx0Ly9hZGQgdGhlIGd1ZXN0IHRvIHRoZSBsaXN0XG5cdFx0XHRcdFx0dm0uZXZlbnQuZ3Vlc3RMaXN0W3JlZ2lzdGVyZWRVc2Vyc1t1c2VyS2V5XV0gPSB7XG5cdFx0XHRcdFx0XHRhdHRlbmRpbmc6IGZhbHNlLCBcblx0XHRcdFx0XHRcdHN0YXR1czoncGVuZGluZycsIFxuXHRcdFx0XHRcdFx0bmFtZTogdm0ubmV3R3Vlc3QubmFtZSwgXG5cdFx0XHRcdFx0XHRlbWFpbDp2bS5uZXdHdWVzdC5lbWFpbC5hZGRyZXNzLFxuXHRcdFx0XHRcdH07XHRcdFx0XHRcdFxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2FkZCB0aGUgaW52aXRlIHRvIHRoZSBub24tcmVnaXN0ZXJlZCB1c2VycyBsaXN0IG9mIGV2ZW50IGludml0ZXNcblx0XHRcdFx0aW52aXRlQW5VbnJlZ2lzdGVyZWRVc2VyKHVzZXJLZXkpO1xuXG5cdFx0XHRcdC8vYWRkIHRoZSBndWVzdCB0byB0aGUgbGlzdFxuXHRcdFx0XHR2bS5ldmVudC5ndWVzdExpc3RbdXNlcktleV0gPSB7XG5cdFx0XHRcdFx0XHRhdHRlbmRpbmc6IGZhbHNlLCBcblx0XHRcdFx0XHRcdHN0YXR1czoncGVuZGluZycsIFxuXHRcdFx0XHRcdFx0bmFtZTogdm0ubmV3R3Vlc3QubmFtZSwgXG5cdFx0XHRcdFx0XHRlbWFpbDp2bS5uZXdHdWVzdC5lbWFpbC5hZGRyZXNzLFxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXG5cblx0XHRcdC8vc2F2ZSB0aGUgZXZlbnRcblx0XHRcdHZtLnNhdmVFdmVudCgpO1xuXHRcdFx0Ly9jbGVhciB0aGUgdGVtcCB2YWx1ZXNcblx0XHRcdGNsZWFuTmV3R3Vlc3RWYXJpYWJsZSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkbG9nLmluZm8oJ3lvdSBkaWRuXFwndCBlbnRlciBhIG5hbWUgYW5kIG9yIGVtYWlsJyk7XG5cdFx0fVxuXHR9XG5cblx0dm0uZ3Vlc3RXaWxsQXR0ZW5kID0gZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHR2YXIgY3VycmVudFVzZXIgPSByZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJ2V2ZW50cycpO1xuXHRcdHZhciB0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucyA9IDA7XG5cdFx0dmFyIHJlbW92ZUF0dGVuZGluZ1VwZGF0ZWQgPSBmYWxzZTtcblx0XHRcblx0XHQvL2NoYW5nZSBhdHRlbmRpbmcgdG8gdHJ1ZSBpbiBob3N0J3MgZ3Vlc3RMaXN0XG5cdFx0dm0uZXZlbnQuZ3Vlc3RMaXN0WyRyb3V0ZVBhcmFtcy51aWRdLmF0dGVuZGluZyA9IHJlc3BvbnNlO1xuXHRcdC8vY2hhbmdlIHN0YXR1cyB0byAnYXR0ZW5kaW5nJyBpbiBob3N0J3MgZ3Vlc3RMaXN0XG5cdFx0dm0uZXZlbnQuZ3Vlc3RMaXN0WyRyb3V0ZVBhcmFtcy51aWRdLnN0YXR1cyA9ICdhdHRlbmRpbmcnO1xuXHRcdFxuXHRcdC8vZ2V0IHRoZSBpbnZpdGF0aW9uIGRldGFpbHNcblx0XHRjdXJyZW50VXNlci5jaGlsZCgncGVuZGluZycpLm9uKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWxiZVxuXHRcdFx0dmFyIGludml0YXRpb25zID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHQvL2xvZyBzdGFydGluZyB2YWx1ZXNcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9ucyk7XG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnNbJHJvdXRlUGFyYW1zLmhvc3RJZF0pO1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdWyRyb3V0ZVBhcmFtcy5ldmVudElkXSk7XG5cblx0XHRcdHZhciB0aGlzSW52aXRhdGlvbiA9IGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdWyRyb3V0ZVBhcmFtcy5ldmVudElkXTtcblx0XHRcdFxuXHRcdFx0JGxvZy5pbmZvKHRoaXNJbnZpdGF0aW9uKTtcblx0XHRcdFxuXHRcdFx0Ly9jaGVjayAjIG9mIGluaXZpYXRpb25zXG5cdFx0XHRmb3IoaW52aXRhdGlvbiBpbiBpbnZpdGF0aW9ucykge1xuXHRcdFx0XHR0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucysrO1xuXHRcdFx0fVxuXG5cdFx0XHQvL3JlcG9ydCAjIG9mIGludml0YXRpb25zXG5cdFx0XHQkbG9nLmluZm8oXCJ0b3RhbCBhdHRlbmRpbmc6IFwiICsgdG90YWxQZW5kaW5nSW52aXRhdGlvbnMpO1xuXHRcdFx0XG5cdFx0XHQvL2FkZCB0aGUgZXZlbnQgdG8gdGhlIGd1ZXN0J3MgYXR0ZW5kaW5nIGxpc3Rcblx0XHRcdGlmKHJlc3BvbnNlKSBjdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykuY2hpbGQoJHJvdXRlUGFyYW1zLmhvc3RJZCkuY2hpbGQoJHJvdXRlUGFyYW1zLmV2ZW50SWQpLnNldCh0aGlzSW52aXRhdGlvbiwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbyhlcnJvcik7XG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXG5cdFx0Ly9pZiB0aGUgdXBkYXRlZCBwbGFjZWhvbGRlciB3YXMgb24gdGhlIGF0dGVuZGluZyBsaXN0IHJlbW92ZSBpdFxuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5vbigndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHRcdHZhciBhdHRlbmRpbmdMaXN0ID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHRcblx0XHRcdC8vcmVwb3J0IGFjdGlvbnNcblx0XHRcdCRsb2cuaW5mbygndGhpcyBpcyB0aGUgYXR0ZW5kaW5nIGxpc3QnKTtcblx0XHRcdCRsb2cuaW5mbyhhdHRlbmRpbmdMaXN0KTtcblx0XHRcdFxuXHRcdFx0Ly90aHJvdyBmbGFnIGZvciBsYXRlclxuXHRcdFx0aWYoYXR0ZW5kaW5nTGlzdC51cGRhdGVkKSByZW1vdmVBdHRlbmRpbmdVcGRhdGVkID0gdHJ1ZTtcblxuXHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHQvL2lmIHRoZXIgd2FzIGFuIGVycm9yIHJlcG9ydCBpdFxuXHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbyhlcnJvcik7XG5cdFx0fSk7XG5cblx0XHQvL2lmIHRoaXMgaXMgdGhlIGxhc3QgcGVuZGluZyBldmVudCBvbiB0aGUgZ3Vlc3QncyBwZW5kaW5nIGxpc3QsIGFkZCB0aGUgdXBkYXRlZCBwbGFjZWhvbGRlclxuXHRcdGlmKHRvdGFsUGVuZGluZ0ludml0YXRpb25zIDwgMikge1xuXHRcdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHRcdHZhciBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XG5cblx0XHRcdC8vcmVwbGFjZSB3aXRoIHVwZGF0ZWQgZmllbGRcblx0XHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdwZW5kaW5nJykudXBkYXRlKHtcblx0XHRcdFx0dXBkYXRlZDogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbyhlcnJvcik7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHQvL3JlbW92ZSB0aGUgZXZlbnQgZnJvbSB0aGUgZ3Vlc3QncyBwZW5kaW5nIGxpc3Rcblx0XHRjdXJyZW50VXNlci5jaGlsZCgncGVuZGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ob3N0SWQpLnJlbW92ZSgpO1xuXG5cdFx0Ly9pZiB0aGVyZSB3YXMgYW4gdXBkYXRlZCBmaWVsZCBpbiBhdHRlbmRpbmcsIHJlbW92ZSBpdFxuXHRcdGlmKHJlbW92ZUF0dGVuZGluZ1VwZGF0ZWQpIHtcblx0XHRcdCRsb2cuaW5mbygncmVtb3ZpbmcgdGhlIHVwZGF0ZWQgcGxhY2Vob2xkZXInKTtcblx0XHRcdC8vY3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLmNoaWxkKCd1cGRhdGVkJykucmVtb3ZlKCk7XG5cdFx0fVxuXG5cdFx0Ly9zYXZlIGNoYW5nZXNcblx0XHR2bS5ldmVudC4kc2F2ZSgpO1xuXHR9XG5cblx0dm0udXBkYXRlVXBkYXRlZFBhcmFtID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGN1cnJlbnRVc2VyID0gcmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCdldmVudHMnKTtcblx0XHRcblx0XHQkbG9nLmluZm8oJ3VwZGF0aW5nIHRoZSBwYXJhbScpO1xuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5vbigndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0JGxvZy5pbmZvKHNuYXBzaG90LnZhbCgpKTtcblx0XHR9KTtcblx0XHRjdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykuY2hpbGQoJ3VwZGF0ZWQnKS5yZW1vdmUoKTtcblx0fVxuXG5cdHZtLmFkZEludml0YXRpb25Ub0F0dGVuZGluZyA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdFx0dmFyIGN1cnJlbnRVc2VyID0gcmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCdldmVudHMnKTtcblx0XHR2YXIgdG90YWxQZW5kaW5nSW52aXRhdGlvbnMgPSAwO1xuXG5cdFx0Ly9nZXQgdGhlIGludml0YXRpb24gZGV0YWlsc1xuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdwZW5kaW5nJykub24oJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhbGJlXG5cdFx0XHR2YXIgaW52aXRhdGlvbnMgPSBzbmFwc2hvdC52YWwoKTtcblx0XHRcdHZhciB0aGlzSW52aXRhdGlvbiA9IGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdWyRyb3V0ZVBhcmFtcy5ldmVudElkXTtcblx0XHRcdFxuXHRcdFx0Ly9sb2cgc3RhcnRpbmcgdmFsdWVzXG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnMpO1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdKTtcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9uc1skcm91dGVQYXJhbXMuaG9zdElkXVskcm91dGVQYXJhbXMuZXZlbnRJZF0pO1xuXHRcdFx0XG5cdFx0XHQvL2NoZWNrICMgb2YgaW5pdmlhdGlvbnNcblx0XHRcdGZvcihpbnZpdGF0aW9uIGluIGludml0YXRpb25zKSB7XG5cdFx0XHRcdHRvdGFsUGVuZGluZ0ludml0YXRpb25zKys7XG5cdFx0XHR9XG5cblx0XHRcdC8vcmVwb3J0ICMgb2YgaW52aXRhdGlvbnNcblx0XHRcdCRsb2cuaW5mbyhcInRvdGFsIHBlbmRpbmcgaW52aXRhdGlvbnM6IFwiICsgdG90YWxQZW5kaW5nSW52aXRhdGlvbnMpO1xuXHRcdFx0XG5cdFx0XHQkbG9nLmluZm8ocmVzcG9uc2UpO1xuXHRcdFx0Ly9hZGQgdGhlIGV2ZW50IHRvIHRoZSBndWVzdCdzIGF0dGVuZGluZyBsaXN0XG5cdFx0XHRpZihyZXNwb25zZSkgY3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ob3N0SWQpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ldmVudElkKS5zZXQodGhpc0ludml0YXRpb24sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oZXJyb3IpO1xuXHRcdFx0fSk7XG5cblxuXG5cdFx0fSk7XG5cdH1cblxuXHQvL2V4ZWN1dGlvblxuXHQkbG9nLmluZm8oJHJvdXRlUGFyYW1zLnVpZCk7XG5cdCRsb2cuaW5mbygkcm91dGVQYXJhbXMuZXZlbnRJZCk7XG5cblx0Ly9jaGVjayB1c2VyIHRvIGRldGVybWluZSBzdGF0ZVxuXHRjaGVja0Zvckhvc3QoKTtcblx0Y2hlY2tJZkd1ZXN0SXNBdHRlbmRpbmcoKTtcblxuXHRpZighdm0uc2hvd0lmSG9zdCkgb3BlbkFsbFNlY3Rpb25zKCk7XG59XG4iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdMYW5kaW5nUGFnZUNvbnRyb2xsZXInLCBMYW5kaW5nUGFnZUNvbnRyb2xsZXIpO1xuXG5MYW5kaW5nUGFnZUNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnLCAnJGxvY2F0aW9uJywgJyRkb2N1bWVudCcsICckd2luZG93J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gTGFuZGluZ1BhZ2VDb250cm9sbGVyKCRzY29wZSwgJGxvZywgJGxvY2F0aW9uLCAkZG9jdW1lbnQsICR3aW5kb3cpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgYXV0aERhdGEgPSB7fTtcblx0dmFyIGN1cnJlbnRVc2VyRGF0YSA9IHt9O1xuXG5cdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHR2bS5zaG93UmVxdWlybm1lbnRzID0gZmFsc2U7XG5cdHZtLnZhbGlkTmV3TmFtZSA9IHsndmFsaWQnOmZhbHNlLCAnc3R5bGUnOntjb2xvcjonJ319O1xuXHR2bS52YWxpZE5ld0VtYWlsID0geyd2YWxpZCc6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOicnfX07XG5cdHZtLnNlY3VyZVBhc3N3b3JkID0geydzZWN1cmUnOmZhbHNlLCAnc3R5bGUnOntjb2xvcjonJ319O1xuXHR2bS51bmxvY2tDcmVhdGVVc2VyQnRuID0geyd1c2FibGUnOmZhbHNlLCAnY2xhc3MnOididG4gYnRuLXdhcm5pbmcnfTtcblx0dm0ubWVzc2FnZSA9ICd0ZXN0aW5nJztcblx0XG5cdHZtLnZhbGlkVXNlckVtYWlsID0geyd2YWxpZCc6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOicnfX07XG5cdHZtLnZhbGlkVXNlclBhc3N3b3JkID0geyd2YWxpZCc6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOicnfX07XG5cdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4gPSB7J3VzYWJsZSc6ZmFsc2UsICdjbGFzcyc6J2J0biBidG4td2FybmluZyd9O1xuXHR2bS5wYXNzd29yZFJlcXVpcm5tZW50cyA9IHtcblx0XHQwOnsnY29uc3RyYWludCc6J0lzIGF0IGxlYXN0IDE2IGNoYXJhY3RlcnMgbG9uZycsICdzdHlsZSc6e2NvbG9yOidyZWQnfSwgJ21ldCc6ZmFsc2V9LFxuXHRcdDE6eydjb25zdHJhaW50JzonSXMgbm8gbG9uZ2VyIHRoYW4gMTAwIGNoYXJhY3RlcnMnLCAnc3R5bGUnOntjb2xvcjoncmVkJ30sICdtZXQnOmZhbHNlfSxcblx0XHQyOnsnY29uc3RyYWludCc6J0NvbnRhaW5zIGF0IGxlYXN0IG9uZSByZXF1aXJlZCBzeW1ib2wgKFxcIVxcQFxcI1xcJFxcJVxcXlxcJlxcKiknLCAnc3R5bGUnOntjb2xvcjoncmVkJ30sICdtZXQnOmZhbHNlfSxcblx0XHQzOnsnY29uc3RyYWludCc6J0NvbnRhaW5zIGF0IGxlYXN0IG9uZSBudW1iZXInLCAnc3R5bGUnOntjb2xvcjoncmVkJ30sICdtZXQnOmZhbHNlfSxcblx0XHQ0OnsnY29uc3RyYWludCc6J0NvbnRhaW5zIGF0IGxlYXN0IG9uZSBsb3dlcmNhc2UgbGV0dGVyJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX0sXG5cdFx0NTp7J2NvbnN0cmFpbnQnOidDb250YWlucyBhdCBsZWFzdCBvbmUgdXBwZXJjYXNlIGxldHRlcicsICdzdHlsZSc6e2NvbG9yOidyZWQnfSwgJ21ldCc6ZmFsc2V9LFxuXHRcdDY6eydjb25zdHJhaW50JzpcIkRvZXNuJ3QgaGF2ZSBhbnkgaWxsZWdhbCBjaGFyYWN0ZXJzXCIsICdzdHlsZSc6e2NvbG9yOidyZWQnfSwgJ21ldCc6ZmFsc2V9XG5cdH07XG5cblx0Ly9sb2NhbCBtZXRob2RzXG5cdGZ1bmN0aW9uIHV0ZjhfdG9fYjY0KHN0cikge1xuXHRcdHJldHVybiBidG9hKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiBiNjRfdG9fdXRmOChzdHIpIHtcbiAgICBcdHJldHVybiBhdG9iKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fVxuXG5cdC8vZGVmaW5lIGNvbnRyb2xsZXIgbWV0aG9kc1xuXHR2bS5kaXNwbGF5UGFzc1JlcXMgPSBmdW5jdGlvbigpIHtcblx0XHRpZih2bS5uZXdOYW1lICYmIHZtLm5ld0VtYWlsKSB7XG5cdFx0XHR2bS5zaG93UmVxdWlybm1lbnRzID0gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dm0uc2hvd1JlcXVpcm5tZW50cyA9IGZhbHNlO1xuXHRcdH1cblx0fVxuXG5cdHZtLmNoZWNrTmV3TmFtZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFxuXHRcdGlmKHZtLm5ld05hbWUpIHtcblx0XHRcdGlmKHZtLm5ld05hbWUubGVuZ3RoID4gMCkge1xuXHRcdFx0XHR2bS52YWxpZE5ld05hbWUudmFsaWQgPSB0cnVlO1xuXHRcdFx0XHR2bS52YWxpZE5ld05hbWUuc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS52YWxpZE5ld05hbWUudmFsaWQgPSBmYWxzZTtcblx0XHRcdFx0dm0udmFsaWROZXdOYW1lLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR2bS5vcGVuQ3JlYXRlVXNlckJ1dHRvbigpO1xuXHR9XG5cblx0dm0uY2hlY2tOZXdFbWFpbCA9IGZ1bmN0aW9uICgpIHtcblx0XHRpZih2bS5uZXdFbWFpbCkge1xuXHRcdFx0Ly9jaGVjayB2YWxpZGl0eVxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XCIsIFwiXCIpO1xuXG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3Qodm0ubmV3RW1haWwpKSB7XG5cdFx0XHRcdHZtLnZhbGlkTmV3RW1haWwudmFsaWQgPSB0cnVlO1xuXHRcdFx0XHR2bS52YWxpZE5ld0VtYWlsLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0udmFsaWROZXdFbWFpbC52YWxpZCA9IGZhbHNlO1xuXHRcdFx0XHR2bS52YWxpZE5ld0VtYWlsLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0XHRcdH1cdFx0XHRcblx0XHR9XG5cdFx0XG5cdFx0dm0ub3BlbkNyZWF0ZVVzZXJCdXR0b24oKTtcblx0fVxuXG5cdHZtLmNoZWNrVXNlckVtYWlsID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodm0udXNlckVtYWlsKSB7XG5cdFx0XHQvL2NoZWNrIHZhbGlkaXR5XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKD86XFwuW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKykqQCg/OlthLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cXC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cIiwgXCJcIik7XG5cblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2bS51c2VyRW1haWwpKSB7XG5cdFx0XHRcdHZtLnZhbGlkVXNlckVtYWlsLnZhbGlkID0gdHJ1ZTtcblx0XHRcdFx0dm0udmFsaWRVc2VyRW1haWwuc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS52YWxpZFVzZXJFbWFpbC52YWxpZCA9IGZhbHNlO1xuXHRcdFx0XHR2bS52YWxpZFVzZXJFbWFpbC5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dm0ub3BlblVzZXJMb2dpbkJ0bigpO1xuXHR9XG5cblx0dm0uY2hlY2tOZXdQYXNzd29yZHMgPSBmdW5jdGlvbigpIHtcblx0XHQvL2ZvciBlYWNoIHBhc3N3b3JkIGRlZmluZSB0aGUgcGF0dGVybiB0aGF0IHRoZSBwYXNzd29yZCBtdXN0IG1hdGNoXG5cdFx0dmFyIGNvbnN0cmFpbnRzID0ge1xuXHQgXHRcdDA6IFsnJywgJyB5b3VyIHBhc3N3b3JkIG5lZWRzIHRvIGJlIDE2IGNoYXJhY3RlcnMgb3IgbG9uZ2VyJ10sXG5cdCBcdFx0MTogWycnLCAnIHlvdXIgcGFzc3dvcmQgbmVlZHMgdG8gYmUgbGVzcyB0aGFuIDEwMCBjaGFyYWN0ZXJzJ10sXG5cdCBcdFx0MjogWydbXFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqXScsIFwiIG5vIHJlcXVpcmVkIHN5bWJvbHMgZm91bmRcIl0sXG5cdCBcdFx0MzogWydbMC05XScsIFwiIG5vIG51bWJlcnMgZm91bmRcIl0sXG5cdCBcdFx0NDogWydbYS16XScsIFwiIG5vIGxvd2VyY2FzZSBsZXR0ZXJzIGZvdW5kXCJdLFxuXHQgXHRcdDU6IFsnW0EtWl0nLCBcIiBubyB1cHBlcmNhc2UgbGV0dGVycyBmb3VuZFwiXSxcblx0IFx0XHQ2OiBbJ1teQS16MC05XFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqXScsIFwiIGlsbGVnYWwgY2hhcmFjdGVycyBmb3VuZFwiXSxcbiBcdFx0fTtcbiBcdFx0XG4gXHRcdC8vY2hlY2sgZm9yIGxlbmd0aFxuIFx0XHRpZih2bS5uZXdQYXNzd29yZCkge1xuIFx0XHRcdGlmKHZtLm5ld1Bhc3N3b3JkLmxlbmd0aCA+IDE1KSB7IFxuIFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMF0uc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307IFxuIFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMF0ubWV0ID0gdHJ1ZTsgXG4gXHRcdFx0fSBlbHNlIHtcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzBdLnN0eWxlID0ge2NvbG9yOidyZWQnfTsgXG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1swXS5tZXQgPSBmYWxzZTtcbiBcdFx0XHR9XG4gXHRcdFx0aWYodm0ubmV3UGFzc3dvcmQubGVuZ3RoIDw9IDEwMCkgeyBcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzFdLnN0eWxlID0ge2NvbG9yOidncmVlbid9OyBcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzFdLm1ldCA9IHRydWU7XG4gXHRcdFx0fSBlbHNlIHtcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzFdLnN0eWxlID0ge2NvbG9yOidyZWQnfTsgXG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1sxXS5tZXQgPSBmYWxzZTtcbiBcdFx0XHR9XG5cbiBcdFx0XHQvL2NoZWNrIGNvbnN0cmFpbnRzIDItNVxuIFx0XHRcdGZvcihpID0gMjsgaSA8IDY7IGkrKykge1xuXHQgXHRcdFx0Ly9jaGVjayBmb3IgcmVxdWlyZWQgc3ltYm9scywgdXBwZXJjYXNlLCBsb3NlcmNhc2UsIGFuZCBjaGFyYWN0ZXJzXG5cdCBcdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoY29uc3RyYWludHNbaV1bMF0sIFwiXCIpO1x0XG5cblx0IFx0XHRcdC8vdGVzdCBlYWNoIGNvbnN0cmF0aW50XG5cdCBcdFx0XHRpZihjb25zdHJhaW50LnRlc3Qodm0ubmV3UGFzc3dvcmQpKSB7XG5cdCBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzW2ldLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHQgXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1tpXS5tZXQgPSB0cnVlO1xuXHQgXHRcdFx0fSBlbHNlIHtcblx0IFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbaV0uc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHQgXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1tpXS5tZXQgPSBmYWxzZTtcblx0IFx0XHRcdH1cblx0IFx0XHR9XG5cblx0IFx0XHQvL2NoZWNrIGlsbGVnYWwgY2hhcmFjdGVyc1xuXHQgXHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChjb25zdHJhaW50c1s2XVswXSwgXCJcIik7XG5cblx0IFx0XHQvL3J1biB0aGUgY2hlY2tcblx0IFx0XHRpZighY29uc3RyYWludC50ZXN0KHZtLm5ld1Bhc3N3b3JkKSkge1xuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNl0uc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNl0ubWV0ID0gZmFsc2U7XG5cdCBcdFx0fSBlbHNlIHtcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzZdLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNl0ubWV0ID0gdHJ1ZTtcblx0IFx0XHR9XG5cblx0IFx0XHQvL2lmIGFsbCBjb25zdHJhaW5zIG1ldCwgdGhyb3cgdmFsaWQgcGFzcyBmbGFnXG5cdCBcdFx0aWYoIHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzBdLm1ldCAmJlxuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMV0ubWV0ICYmXG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1syXS5tZXQgJiZcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzNdLm1ldCAmJlxuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNF0ubWV0ICYmXG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1s1XS5tZXQgJiZcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzZdLm1ldCkge1xuXHQgXHRcdFx0dm0uc2VjdXJlUGFzc3dvcmQuc2VjdXJlID0gdHJ1ZVxuXHQgXHRcdH0gZWxzZSB7XG5cdCBcdFx0XHR2bS5zZWN1cmVQYXNzd29yZC5zZWN1cmUgPSBmYWxzZTtcblx0IFx0XHR9XG5cblx0IFx0XHRpZih2bS5zZWN1cmVQYXNzd29yZC5zZWN1cmUpIHtcblx0IFx0XHRcdHZtLnNlY3VyZVBhc3N3b3JkLnN0eWxlID0ge2NvbG9yOidncmVlbid9O1xuXHQgXHRcdH0gZWxzZSB7XG5cdCBcdFx0XHR2bS5zZWN1cmVQYXNzd29yZC5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdCBcdFx0fVxuIFx0XHR9XG4gXHRcdFxuIFx0XHR2bS5vcGVuQ3JlYXRlVXNlckJ1dHRvbigpO1xuXHR9XG5cblx0dm0uY2hlY2tVc2VyUGFzc3dvcmRzID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodm0udXNlclBhc3N3b3JkKSB7XG5cdFx0XHRpZih2bS51c2VyUGFzc3dvcmQubGVuZ3RoID4gMTUpIHtcblx0XHRcdFx0dm0udmFsaWRVc2VyUGFzc3dvcmQuc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdFx0XHRcdHZtLnZhbGlkVXNlclBhc3N3b3JkLnZhbGlkID0gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLnZhbGlkVXNlclBhc3N3b3JkLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0XHRcdFx0dm0udmFsaWRVc2VyUGFzc3dvcmQudmFsaWQgPSBmYWxzZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRcblx0XHR2bS5vcGVuVXNlckxvZ2luQnRuKCk7XG5cdH1cblxuXHR2bS5vcGVuQ3JlYXRlVXNlckJ1dHRvbiA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHZtLnZhbGlkTmV3TmFtZS52YWxpZCAmJiB2bS52YWxpZE5ld0VtYWlsLnZhbGlkICYmIHZtLnNlY3VyZVBhc3N3b3JkLnNlY3VyZSkge1xuXHRcdFx0dm0udW5sb2NrQ3JlYXRlVXNlckJ0bi5jbGFzcyA9ICdidG4gYnRuLXN1Y2Nlc3MnO1xuXHRcdFx0dm0udW5sb2NrQ3JlYXRlVXNlckJ0bi51c2FibGUgPSB0cnVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2bS51bmxvY2tDcmVhdGVVc2VyQnRuLmNsYXNzID0gJ2J0biBidG4td2FybmluZyc7XG5cdFx0XHR2bS51bmxvY2tDcmVhdGVVc2VyQnRuLnVzYWJsZSA9IGZhbHNlO1x0XG5cdFx0fVxuXG5cdH1cblxuXHR2bS5vcGVuVXNlckxvZ2luQnRuID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodm0udmFsaWRVc2VyRW1haWwudmFsaWQgJiYgdm0udmFsaWRVc2VyUGFzc3dvcmQudmFsaWQpIHtcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4uY2xhc3MgPSAnYnRuIGJ0bi1zdWNjZXNzJztcblx0XHRcdHZtLnVuY2xvY2tVc2VyTG9naW5CdG4udXNhYmxlID0gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi5jbGFzcyA9ICdidG4gYnRuLXdhcm5pbmcnO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi51c2FibGUgPSBmYWxzZTtcdFxuXHRcdH1cblx0fVxuXG5cdHZtLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vc2V0IHZhbHVlc1xuXHRcdHZtLm5ld05hbWUgPSAkZG9jdW1lbnQuZmluZCgnI25ld05hbWUnKVswXS52YWx1ZTtcblx0XHR2bS5uZXdFbWFpbCA9ICRkb2N1bWVudC5maW5kKCcjbmV3RW1haWwnKVswXS52YWx1ZTtcblx0XHR2bS51c2VyRW1haWwgPSAkZG9jdW1lbnQuZmluZCgnI3VzZXJFbWFpbCcpWzBdLnZhbHVlO1xuXHRcdFxuXHRcdHZtLmNoZWNrTmV3TmFtZSgpO1xuXHRcdHZtLmNoZWNrTmV3RW1haWwoKTtcblx0XHR2bS5jaGVja1VzZXJFbWFpbCgpO1xuXHR9XG5cblx0ZnVuY3Rpb24gcmVkaXJlY3QocGF0aCwgdXNlckRhdGEpIHtcblx0XHR2YXIgZnVsbFBhdGggPSBwYXRoICsgJy8nICsgY3VycmVudFVzZXJEYXRhLnVpZCArICcvJyArIGN1cnJlbnRVc2VyRGF0YS50b2tlbjtcblx0XHQvL3JlZGlyZWN0XG5cdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyB0bzogJyArIGZ1bGxQYXRoKTtcblx0XHQkbG9jYXRpb24ucGF0aChmdWxsUGF0aCk7XG5cdFx0JHNjb3BlLiRhcHBseSgpO1xuXHR9XG5cblx0dm0uY3JlYXRlTmV3VXNlciA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2cuaW5mbygnQ3JlYXRpbmcgYSBuZXcgdXNlciBhY2NvdW50IG5vdyEnKTtcblxuXHRcdGlmKHZtLnVubG9ja0NyZWF0ZVVzZXJCdG4udXNhYmxlKSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZVxuXHRcdFx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cblx0XHRcdHJlZi5jcmVhdGVVc2VyKHtcblx0XHRcdFx0ZW1haWw6dm0ubmV3RW1haWwsXG5cdFx0XHRcdHBhc3N3b3JkOnZtLm5ld1Bhc3N3b3JkXG5cdFx0XHR9LGZ1bmN0aW9uKGVycm9yLCB1c2VyRGF0YSkge1xuXHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnRXJyb3IgY3JlYXRpbmcgdXNlcjogJyArIGVycm9yKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvL2xvZyByZXN1bHRzXG5cdFx0XHRcdFx0JGxvZy5pbmZvKHVzZXJEYXRhKTtcblxuXHRcdFx0XHRcdC8vc2F2ZSBhbGwgdGhlIGRhdGFcblx0XHRcdFx0XHRjdXJyZW50VXNlckRhdGEgPSB1c2VyRGF0YTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvL2dlbmVyYXRlIHRoZSB1c2VyIHJlY29yZFxuXHRcdFx0XHRcdHZhciB1c2Vyc1JlZiA9IHJlZi5jaGlsZCgnVXNlcnMvJyArIHVzZXJEYXRhLnVpZCk7XG5cdFx0XHRcdFx0dmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcblxuXHRcdFx0XHRcdC8vd3JpdGUgbmV3IHVzZXIgdG8gdGhlIGRhdGFiYXNlIHdpdGggYmlvIGluZm9cblx0XHRcdFx0XHR1c2Vyc1JlZi5zZXQoeyBcblx0XHRcdFx0XHRcdCdiaW8nOiB7XG5cdFx0XHRcdFx0XHRcdCduYW1lJzogdm0ubmV3TmFtZSxcblx0XHRcdFx0XHRcdFx0J2VtYWlsJzogdm0ubmV3RW1haWxcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHQnZXZlbnRzJzoge1xuXHRcdFx0XHRcdFx0XHQncGVuZGluZyc6IHtcblx0XHRcdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0J2hvc3RpbmcnOiB7XG5cdFx0XHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdCdhdHRlbmRpbmcnOiB7XG5cdFx0XHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdCdjb21wbGV0ZWQnOiB7XG5cdFx0XHRcdFx0XHRcdFx0J3VwZGF0ZWQnOiBkYXRlVGltZVRvVW5peFRpbWUoY3VycmVudERhdGUpXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHRcdFx0JGxvZy5pbmZvKCdEYXRhIGNvdWxkIG5vdCBiZSBzYXZlZDogJyArIGVycm9yKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdCRsb2cuaW5mbygnRGF0YSBzYXZlZCBzdWNjZXNzZnVsbHkuJyk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Ly9hZGQgdGhpcyB1c2VyIHRvIHRoZSBsaXN0IG9mIHJlZ2lzdGVyZWQgdXNlcnNcblx0XHRcdFx0XHRyZWYuY2hpbGQoJ1VpZHMnKS5jaGlsZCh1dGY4X3RvX2I2NCh2bS5uZXdFbWFpbCkpLnNldChjdXJyZW50VXNlckRhdGEudWlkLCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbyhcIkRhdGEgY291bGQgbm90IGJlIHNhdmVkLiBcIiArIGVycm9yKTtcblx0XHRcdFx0XHRcdGVsc2UgJGxvZy5pbmZvKFwidWlkIGNyZWF0ZWQgc3VjZXNzZnVsbHkuXCIpO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0Ly9yZWRpcmVjdCB0byBVc2VySW5mb3JtYXRpb25cblx0XHRcdFx0XHRyZWRpcmVjdCgnL3VzZXJJbmZvcm1hdGlvbicsIGN1cnJlbnRVc2VyRGF0YSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0fVxuXHR9XG5cblx0dm0ubG9naW5SZWdpc3RlcmVkVXNlciA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0aWYodm0udW5jbG9ja1VzZXJMb2dpbkJ0bi51c2FibGUpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlXG5cdFx0XHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHRcdFx0Ly9hdXRoZW50aWNhdGUgdGhlIHVzZXJcblx0XHRcdHJlZi5hdXRoV2l0aFBhc3N3b3JkKHtcblx0XHRcdFx0ZW1haWw6IHZtLnVzZXJFbWFpbCxcblx0XHRcdFx0cGFzc3dvcmQ6IHZtLnVzZXJQYXNzd29yZFxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IsIGF1dGhEYXRhKSB7XG5cdFx0XHRcdGlmKGVycm9yKSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdFcnJvciBMb2dnaW5nIEluOiAnICsgZXJyb3IpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnTG9nZ2VkIEluIHN1Y2Nlc3NmdWxseTogJyArIGF1dGhEYXRhLnVpZCk7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKGF1dGhEYXRhKTtcblx0XHRcdFx0XHQvL3NhdmUgYWxsIHRoZSBkYXRhXG5cdFx0XHRcdFx0Y3VycmVudFVzZXJEYXRhID0gYXV0aERhdGE7XG5cblx0XHRcdFx0XHQvL2xvYWQgdXNlciBiaW9cblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvL2xvYWQgdXNlciBldmVudHNcblxuXHRcdFx0XHRcdC8vcmVkaXJlY3Rcblx0XHRcdFx0XHRyZWRpcmVjdCgnL3VzZXJJbmZvcm1hdGlvbicsIGN1cnJlbnRVc2VyRGF0YSk7XG5cdFx0XHRcdFx0JHNjb3BlLiRhcHBseSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdH1cblxuXHR9XG5cblx0dm0uYWxlcnRNZSA9IGZ1bmN0aW9uKCkge1xuXHRcdGFsZXJ0KCd0aGlzIGlzIHdvcmtpbmchIGFuIGFsZXJ0IScpO1xuXHR9XG5cblx0dm0ub25SZXNpemVGdW5jdGlvbiA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBpbnB1dFRleHQgPSBhbmd1bGFyLmVsZW1lbnQoJy5pbnB1dFRleHQnKTtcblx0XHRpZigkd2luZG93Lm91dGVyV2lkdGggPiAkd2luZG93Lm91dGVySGVpZ2h0KSB7XG5cdFx0XHRpbnB1dFRleHQuY3NzKCdmb250LXNpemUnLCAnMmVtJyk7XG5cdFx0XHQkbG9nLmluZm8oJ21ha2luZyBiaWdnZXInKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aW5wdXRUZXh0LmNzcygnZm9udC1zaXplJywgJzEuMmVtJyk7XG5cdFx0fVxuXHR9XG5cblx0Ly9ldmVudCBsaXN0ZW5lcnNcblx0aWYgKCdhZGRFdmVudExpc3RlbmVyJyBpbiAkZG9jdW1lbnQpIHtcblx0ICAgICRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XG5cdCAgICBcdCRsb2cuaW5mbygnYWRkaW5nIEZhc3RDbGljaycpO1xuXHQgICAgICAgIEZhc3RDbGljay5hdHRhY2goJGRvY3VtZW50LmJvZHkpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHR9XG5cblx0YW5ndWxhci5lbGVtZW50KCR3aW5kb3cpLmJpbmQoJ3Jlc2l6ZScsIGZ1bmN0aW9uKCkge1xuXHRcdHZtLm9uUmVzaXplRnVuY3Rpb24oKTtcblx0XHQvLyRzY29wZS4kYXBwbHkoKTtcblx0fSk7XG5cblx0YW5ndWxhci5lbGVtZW50KCRkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cdFx0aWYoJHdpbmRvdy5vdXRlcldpZHRoIDwgNjAwKSB7XG5cdFx0XHR2bS5vblJlc2l6ZUZ1bmN0aW9uKCk7XG5cdFx0XHQvLyRzY29wZS4kYXBwbHkoKTtcblx0XHR9XG5cdH0pXG5cbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdNYWluQ29udHJvbGxlcicsIE1haW5Db250cm9sbGVyKTtcblxuTWFpbkNvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICckbG9jYXRpb24nLCAnJGRvY3VtZW50J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gTWFpbkNvbnRyb2xsZXIoJGxvZywgJGxvY2F0aW9uLCAkZG9jdW1lbnQpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTsgXG5cblx0dm0ubG9nb3V0ID0gZnVuY3Rpb24oKSB7XG5cdFx0YWxlcnQoJ2xvZ2dpbmcgeW91IG91dCEnKTtcblx0XHRyZWYudW5hdXRoKCk7XG5cdFx0JGxvY2F0aW9uLnBhdGgoJy8nKTtcblx0fTtcblxuXHRpZiAoJ2FkZEV2ZW50TGlzdGVuZXInIGluICRkb2N1bWVudCkge1xuICAgICRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XG4gICAgXHQkbG9nLmluZm8oJ2FkZGluZyBGYXN0Q2xpY2snKTtcbiAgICAgICAgRmFzdENsaWNrLmF0dGFjaCgkZG9jdW1lbnQuYm9keSk7XG4gICAgfSwgZmFsc2UpO1xufVxufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ3RvcE1lbnVDb250cm9sbGVyJywgdG9wTWVudUNvbnRyb2xsZXIpO1xuXG50b3BNZW51Q29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZycsICckbG9jYXRpb24nLCAnJGRvY3VtZW50JywgJyR3aW5kb3cnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiB0b3BNZW51Q29udHJvbGxlcigkc2NvcGUsICRsb2csICRsb2NhdGlvbiwgJGRvY3VtZW50LCAkd2luZG93KSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdHZhciBmYlVSTCA9ICdodHRwczovL21lZXR1cHBsYW5uZXIuZmlyZWJhc2Vpby5jb20vJztcblx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cblx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0dm0ubG9nZ2VkSW4gPSBmYWxzZVxuXG5cdC8vc3R5bGVzIHZhcmlhYmxlc1xuXHRcblx0Ly9ldmVudCBsaXN0ZW5lcnNcblx0aWYgKCdhZGRFdmVudExpc3RlbmVyJyBpbiAkZG9jdW1lbnQpIHtcblx0ICAgICRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XG5cdCAgICBcdCRsb2cuaW5mbygnYWRkaW5nIEZhc3RDbGljaycpO1xuXHQgICAgICAgIEZhc3RDbGljay5hdHRhY2goJGRvY3VtZW50LmJvZHkpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHR9XG5cblx0YW5ndWxhci5lbGVtZW50KCR3aW5kb3cpLmJpbmQoJ3Jlc2l6ZScsIGZ1bmN0aW9uKCkge1xuXHRcdHZtLm9uUmVzaXplRnVuY3Rpb24oKTtcblx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cdH0pO1xuXG5cdGFuZ3VsYXIuZWxlbWVudCgkZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXHRcdGlmKCR3aW5kb3cub3V0ZXJXaWR0aCA8IDYwMCkge1xuXHRcdFx0dm0ub25SZXNpemVGdW5jdGlvbigpO1xuXHRcdFx0JHNjb3BlLiRhcHBseSgpO1xuXHRcdH1cblx0fSlcblx0Ly9keW5hbWljYWxseSBzZXQgaW5wdXQgd2lkdGhcblxuXG5cdC8vIENyZWF0ZSBhIGNhbGxiYWNrIHdoaWNoIGxvZ3MgdGhlIGN1cnJlbnQgYXV0aCBzdGF0ZVxuXHRmdW5jdGlvbiBpbml0KCkge1xuXHRcdHZtLm9uUmVzaXplRnVuY3Rpb24oKTtcblx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cdH1cblxuXHRmdW5jdGlvbiBhdXRoRGF0YUNhbGxiYWNrKGF1dGhEYXRhKSB7XG5cdCAgaWYgKGF1dGhEYXRhKSB7XG5cdCAgICAkbG9nLmluZm8oXCJVc2VyIFwiICsgYXV0aERhdGEudWlkICsgXCIgaXMgbG9nZ2VkIGluIHdpdGggXCIgKyBhdXRoRGF0YS5wcm92aWRlcik7XG5cdCAgICB2bS5sb2dnZWRJbiA9IHRydWU7XG5cdCAgfSBlbHNlIHtcblx0ICAgICRsb2cuaW5mbyhcIlVzZXIgaXMgbG9nZ2VkIG91dFwiKTtcblx0ICAgIHZtLmxvZ2dlZEluID0gZmFsc2U7XG5cdCAgfVxuXHR9XG5cblx0ZnVuY3Rpb24gcmVkaXJlY3QocGF0aCwgdXNlckRhdGEpIHtcblx0XHR2YXIgZnVsbFBhdGggPSBwYXRoICsgJy8nICsgdXNlckRhdGEudWlkICsgJy8nICsgdXNlckRhdGEudG9rZW47XG5cdFx0Ly9yZWRpcmVjdFxuXHRcdCRsb2cuaW5mbygncmVkaXJlY3RpbmcgdG86ICcgKyBmdWxsUGF0aCk7XG5cdFx0JGxvY2F0aW9uLnBhdGgoZnVsbFBhdGgpO1xuXHRcdC8vJHNjb3BlLiRhcHBseSgpO1xuXHR9XG5cblx0Ly92bSBhY2Nlc3NpYmxlIG1ldGhvZHNcblx0dm0ubG9nb3V0ID0gZnVuY3Rpb24oKSB7XG5cdFx0JGxvZy5pbmZvKCdsb2dnaW5nIG91dCEnKTtcblx0XHR2bS5sb2dnZWRJbiA9IGZhbHNlO1xuXHRcdHJlZi51bmF1dGgoKTtcblx0XHRyZWRpcmVjdCgnLycsIHt1aWQ6JycsIHRva2VuOicnfSk7XG5cdH1cblxuXHR2bS5uYXZCYXJMb2dpblJlZ2lzdGVyZWRVc2VyID0gZnVuY3Rpb24oKSB7XG5cdFx0JGxvZy5pbmZvKCdsYXVuY2hpbmcgbG9naW4nKTtcblx0XHRpZih0cnVlKSB7XG5cdFx0Ly9pZih2bS51bmNsb2NrVXNlckxvZ2luQnRuLnVzYWJsZSkge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVcblx0XHRcdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXG5cdFx0XHQvL2F1dGhlbnRpY2F0ZSB0aGUgdXNlclxuXHRcdFx0cmVmLmF1dGhXaXRoUGFzc3dvcmQoe1xuXHRcdFx0XHRlbWFpbDogdm0ubmF2YmFyVXNlckVtYWlsLFxuXHRcdFx0XHRwYXNzd29yZDogdm0ubmF2YmFyVXNlclBhc3Ncblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yLCBhdXRoRGF0YSkge1xuXHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnRXJyb3IgTG9nZ2luZyBJbjogJyArIGVycm9yKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ0xvZ2dlZCBJbiBzdWNjZXNzZnVsbHk6ICcgKyBhdXRoRGF0YS51aWQpO1xuXHRcdFx0XHRcdCRsb2cuaW5mbyhhdXRoRGF0YSk7XG5cdFx0XHRcdFx0Ly9zYXZlIGFsbCB0aGUgZGF0YVxuXG5cdFx0XHRcdFx0Ly9sb2FkIHVzZXIgYmlvXG5cdFx0XHRcdFx0Ly9sb2FkIHVzZXIgZXZlbnRzXG5cblx0XHRcdFx0XHQvL3JlZGlyZWN0XG5cdFx0XHRcdFx0cmVkaXJlY3QoJy91c2VySW5mb3JtYXRpb24nLCBhdXRoRGF0YSk7XG5cdFx0XHRcdFx0JHNjb3BlLiRhcHBseSgpO1xuXG5cdFx0XHRcdFx0Ly9jbGljayBjbG9zZWQgdGhlIG5hdmJhclxuXHRcdFx0XHRcdGFuZ3VsYXIuZWxlbWVudCgnLm5hdmJhci10b2dnbGUnKS5jbGljaygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXG5cblx0XHR9XG5cblx0fVxuXG5cdHZtLm9uUmVzaXplRnVuY3Rpb24gPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgbmF2YmFySW5wdXRzID0gYW5ndWxhci5lbGVtZW50KCcubmF2YmFySW5wdXRzJyk7XG5cdFx0bmF2YmFySW5wdXRzLmNzcygnd2lkdGgnLCAoJHdpbmRvdy5vdXRlcldpZHRoIC0gMjYpICsgJ3B4Jyk7XG5cdH1cblxuXHQvLyBSZWdpc3RlciB0aGUgY2FsbGJhY2sgdG8gYmUgZmlyZWQgZXZlcnkgdGltZSBhdXRoIHN0YXRlIGNoYW5nZXNcblx0cmVmLm9uQXV0aChhdXRoRGF0YUNhbGxiYWNrKTtcbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnKVxuICAgIC5jb250cm9sbGVyKCdVc2VyRXZlbnRzQ29udHJvbGxlcicsIFVzZXJFdmVudHNDb250cm9sbGVyKTtcblxuVXNlckV2ZW50c0NvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnLCAnJGxvY2F0aW9uJywgJyRyb3V0ZVBhcmFtcycsICckZmlyZWJhc2VPYmplY3QnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBVc2VyRXZlbnRzQ29udHJvbGxlcigkc2NvcGUsICRsb2csICRsb2NhdGlvbiwgJHJvdXRlUGFyYW1zLCAkZmlyZWJhc2VPYmplY3QpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblx0dmFyIHVzZXJFdmVudHMgPSByZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJ2V2ZW50cycpO1xuXHR2YXIgY3VycmVudFVzZXJCaW8gPSByZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJ2JpbycpO1xuXHR2YXIgdXNlckV2ZW50c1NuYXBzaG90O1xuXG5cdC8vYmluZGluZyBpbXBvcnRhbnQgdmFyaWFibGVzXG5cdHZtLmV2ZW50cyA9ICRmaXJlYmFzZU9iamVjdCh1c2VyRXZlbnRzKTtcblxuXHR2bS5zaG93RGVjbGluZSA9IGZhbHNlO1xuXHRcblx0Y3VycmVudFVzZXJCaW8uY2hpbGQoJ25hbWUnKS5vbigndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdHZtLmN1cnJlbnRVc2VyTmFtZSA9IHNuYXBzaG90LnZhbCgpO1xuXHRcdCRsb2cuaW5mbygnZ290IHRoZSB1c2VyIG5hbWUnKTtcblx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cdH0sIGZ1bmN0aW9uKGVycm9yT2JqZWN0KSB7XG5cdFx0JGxvZy5pbmZvKFwiVGhlIHJlYWQgZmFpbGVkOiBcIiArIGVycm9yT2JqZWN0LmNvZGUpO1xuXHR9KTtcblxuXHQvL2RlY2xhcmUgbG9jYWwgbWV0aG9kc1xuXHRmdW5jdGlvbiB1bml4VGltZVRvRGF0ZVRpbWUodW5peFRpbWUpIHtcblx0XHRyZXR1cm4gbmV3IERhdGUocGFyc2VJbnQodW5peFRpbWUpKTtcblx0fTtcblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH07XG5cblx0ZnVuY3Rpb24gZ2VuZXJhdGVFdmVudElEKGRhdGUsIG5vT2ZFdmVudHNBbHJlYWR5KSB7XG5cdFx0cmV0dXJuIChkYXRlICogMTApICsgbm9PZkV2ZW50c0FscmVhZHk7XG5cdH1cblxuXHQvL2RlY2xhcmUgdmlldyBtZXRob2RzXG5cdGZ1bmN0aW9uIGV2ZW50UmVkaXJlY3QocGF0aCwgZXZlbnRJRCwgaG9zdElkKSB7XG5cdFx0dmFyIGZ1bGxQYXRoID0gcGF0aCArICcvJyArIGV2ZW50SUQgKyAnLycgKyBob3N0SWQgKyAnLycrICRyb3V0ZVBhcmFtcy51aWQgKyAnLycgKyAkcm91dGVQYXJhbXMudG9rZW47XG5cdFx0Ly9yZWRpcmVjdFxuXHRcdCRsb2cuaW5mbygncmVkaXJlY3RpbmcgdG86ICcgKyBmdWxsUGF0aCk7XG5cdFx0JGxvY2F0aW9uLnBhdGgoZnVsbFBhdGgpO1xuXHR9XG5cblx0dm0uZXZlbnRzQXJlQmVpbmdIb3N0ZWQgPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgZXZlbnRGb3VuZCA9IGZhbHNlO1xuXHRcdGZvcihlbGVtZW50IGluIHZtLmV2ZW50cy5ob3N0aW5nKSB7XG5cdFx0XHRpZihlbGVtZW50ICE9ICd1cGRhdGVkJyl7XG5cdFx0XHRcdGV2ZW50Rm91bmQgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gZXZlbnRGb3VuZDtcblx0fVxuXG5cdHZtLmV2ZW50SW52aXRhdGlvbnNQZW5kaW5nID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGV2ZW50Rm91bmQgPSBmYWxzZTtcblx0XHRmb3IoZWxlbWVudCBpbiB2bS5ldmVudHMucGVuZGluZykge1xuXHRcdFx0aWYoZWxlbWVudCAhPSAndXBkYXRlZCcpe1xuXHRcdFx0XHRldmVudEZvdW5kID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGV2ZW50Rm91bmQ7XG5cdH1cblxuXHR2bS5hdHRlbmRpbmdFdmVudHMgPSBmdW5jdGlvbihndWVzdExpc3QpIHtcblx0XHR2YXIgZXZlbnRGb3VuZCA9IGZhbHNlO1xuXHRcdGZvcihlbGVtZW50IGluIHZtLmV2ZW50cy5hdHRlbmRpbmcpIHtcblx0XHRcdGlmKGVsZW1lbnQgIT0gJ3VwZGF0ZWQnKXtcblx0XHRcdFx0ZXZlbnRGb3VuZCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBldmVudEZvdW5kO1xuXHR9XG5cblx0dm0ucGVyY2VudFJTVlBlZCA9IGZ1bmN0aW9uKGd1ZXN0TGlzdCkge1x0XHRcblx0XHRpZihndWVzdExpc3QpIHtcblx0XHRcdHJldHVybiAodm0udG90YWxBdHRlbmRpbmcoZ3Vlc3RMaXN0KSAvIHZtLnRvdGFsSW52aXRlZChndWVzdExpc3QpKSAqIDEwMDtcblx0XHR9XG5cdFx0ZWxzZSByZXR1cm4gMDtcblx0fVxuXG5cdHZtLnRvdGFsQXR0ZW5kaW5nID0gZnVuY3Rpb24oZ3Vlc3RMaXN0KSB7XG5cdFx0aWYoZ3Vlc3RMaXN0KSB7XG5cdFx0XHR2YXIgYXR0ZW5kaW5nID0gMDtcblx0XHRcdGFuZ3VsYXIuZm9yRWFjaChndWVzdExpc3QsIGZ1bmN0aW9uKGd1ZXN0LCBpZCkge1xuXHRcdFx0XHRpZihndWVzdC5hdHRlbmRpbmcgPT0gdHJ1ZSkgYXR0ZW5kaW5nKys7XG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiBhdHRlbmRpbmc7XG5cdFx0fVxuXHRcdGVsc2UgcmV0dXJuIDA7XG5cdH1cblxuXHR2bS50b3RhbEludml0ZWQgPSBmdW5jdGlvbihndWVzdExpc3QpIHtcblx0XHRpZihndWVzdExpc3QpIHtcblx0XHRcdHZhciBpbnZpdGVkID0gMDtcblx0XHRcdGFuZ3VsYXIuZm9yRWFjaChndWVzdExpc3QsIGZ1bmN0aW9uKGd1ZXN0LCBpZCkge1xuXHRcdFx0XHRpbnZpdGVkKys7XG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiBpbnZpdGVkO1xuXHRcdH1cblx0XHRlbHNlIHJldHVybiAwO1xuXHR9XG5cblx0dm0uYWNjZXB0RXZlbnRJbnZpdGF0aW9uID0gZnVuY3Rpb24oZXZlbnQpIHtcblx0XHQvKlxuXHRcdCRsb2cuaW5mbyhldmVudC5ob3N0KTtcblx0XHQkbG9nLmluZm8oZXZlbnQuaWQpO1xuXHRcdC8vdXBkYXRlIGhvc3RzJyBsaXN0c1xuXHRcdHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZChldmVudC5ob3N0KS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ2hvc3RpbmcnKS5jaGlsZChldmVudC5pZCkuY2hpbGQoJ2d1ZXN0TGlzdCcpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLnVwZGF0ZSh7XG5cdFx0XHRhdHRlbmRpbmc6IHRydWUsXG5cdFx0XHRzdGF0dXM6ICdhdHRuZG5nJ1xuXHRcdH0pO1xuXG5cdFx0Ly91cGRhdGUgZ3Vlc3QncyBsaXN0c1xuXHRcdC8vYWRkIHRvIHRoZSBhdHRlbmRpbmcgbGlzdCAtIG9uIHRoZSBzZXJ2ZXJcblx0XHR1c2VyRXZlbnRzLmNoaWxkKCdhdHRlbmRpbmcnKS5jaGlsZChldmVudC5ob3N0KS5jaGlsZChldmVudC5pZCkuc2V0KHtcblx0XHRcdGlkOiBldmVudC5pZCxcblx0XHRcdGhvc3Q6IGV2ZW50Lmhvc3QsXG5cdFx0XHRldmVudFRpbWVzOiB7XG5cdFx0XHRcdHN0YXJ0OiB2bS5ldmVudHMucGVuZGluZ1tldmVudC5ob3N0XVtldmVudC5pZF0uZXZlbnRUaW1lcy5zdGFydCxcblx0XHRcdFx0ZW5kOiB2bS5ldmVudHMucGVuZGluZ1tldmVudC5ob3N0XVtldmVudC5pZF0uZXZlbnRUaW1lcy5lbmRcblx0XHRcdH0sXG5cdFx0XHRuYW1lOiB2bS5ldmVudHMucGVuZGluZ1tldmVudC5ob3N0XVtldmVudC5pZF0ubmFtZVxuXHRcdH0pO1xuXHRcdC8vYWRkIHRvIHRoZSBhdHRlbmRpbmcgbGlzdCAtIGluIHRoZSBicm93c2VyXG5cdFx0dm0uZXZlbnRzLmF0dGVuZGluZ1tldmVudC5ob3N0XVtldmVudC5pZF0gPSB7XG5cdFx0XHRpZDogZXZlbnQuaWQsXG5cdFx0XHRob3N0OiBldmVudC5ob3N0LFxuXHRcdFx0ZXZlbnRUaW1lczoge1xuXHRcdFx0XHRzdGFydDogdm0uZXZlbnRzLnBlbmRpbmdbZXZlbnQuaG9zdF1bZXZlbnQuaWRdLmV2ZW50VGltZXMuc3RhcnQsXG5cdFx0XHRcdGVuZDogdm0uZXZlbnRzLnBlbmRpbmdbZXZlbnQuaG9zdF1bZXZlbnQuaWRdLmV2ZW50VGltZXMuZW5kXG5cdFx0XHR9LFxuXHRcdFx0bmFtZTogdm0uZXZlbnRzLnBlbmRpbmdbZXZlbnQuaG9zdF1bZXZlbnQuaWRdLm5hbWVcblx0XHR9O1xuXG5cdFx0Ly9yZW1vdmUgZnJvbSB0aGUgcGVuZGluZyBsaXN0IC0gb24gdGhlIHNlcnZlclxuXHRcdHVzZXJFdmVudHMuY2hpbGQoJ3BlbmRpbmcnKS5jaGlsZChldmVudC5ob3N0KS5jaGlsZChldmVudC5pZCkucmVtb3ZlKCk7XG5cdFx0Ly9yZW1vdmUgZnJvbSB0aGUgcGVuZGluZyBsaXN0IC0gaW4gdGhlIGJyb3dzZXJcblx0XHR2bS5ldmVudHMucGVuZGluZ1tldmVudC5ob3N0XVtldmVudC5pZF0gPSB7fTtcblx0XHQqL1xuXHR9XG5cblx0dm0ucmVkaXJlY3RUb0hvc3RlZEV2ZW50ID0gZnVuY3Rpb24oZXZlbnRJRCkge1xuXHRcdCRsb2cuaW5mbygneW91XFwncmUgYWNjZXNzaW5nIGV2ZW50ICcgKyBldmVudElEKTtcblxuXHRcdC8vcmVkaXJlY3QgdG8gdGhlIGV2ZW50XG5cdFx0ZXZlbnRSZWRpcmVjdCgnL2V2ZW50JywgZXZlbnRJRCwgJHJvdXRlUGFyYW1zLnVpZCk7XG5cdH1cblxuXHR2bS5yZWRpcmVjdFRvM3JkUGFydHlFdmVudCA9IGZ1bmN0aW9uKGV2ZW50LCBpbnZpdGVTdGF0dXMpIHtcblx0XHQkbG9nLmluZm8oZXZlbnQpO1xuXG5cdFx0Ly9nZXR0aW5nIHRoZSBob3N0J3MgSWRcblx0XHRpZihpbnZpdGVTdGF0dXMgPT0gJ3BlbmRpbmcnKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2FjY2Vzc2luZyBmcm9tIGEgcGVuZGluZyBpbnZpdGF0aW9uJyk7XG5cdFx0XHQkbG9nLmluZm8oZXZlbnQpO1xuXHRcdFx0ZXZlbnRSZWRpcmVjdCgnL2V2ZW50JywgZXZlbnQuaWQsIGV2ZW50Lmhvc3QpO1xuXG5cdFx0fSBlbHNlIGlmKGludml0ZVN0YXR1cyA9PSAnYXR0ZW5kaW5nJykge1xuXHRcdFx0JGxvZy5pbmZvKCdhY2Nlc3NpbmcgZnJvbSBhbiByc3ZwZWQgaW52aXRhdGlvbicpO1xuXHRcdFx0ZXZlbnRSZWRpcmVjdCgnL2V2ZW50JywgZXZlbnQuaWQsIGV2ZW50Lmhvc3QpO1xuXHRcdH1cblxuXHRcdC8vcmVkaXJlY3RpbmcgdG8gdGhlIGV2ZW50XG5cblx0fVxuXG5cdHZtLmNyZWF0ZU5ld0V2ZW50ID0gZnVuY3Rpb24oKSB7XG5cdFx0JGxvZy5pbmZvKCd5b3VcXCdyZSBjcmVhdGluZyBhIG5ldyBldmVudCEnKTtcblxuXHRcdC8vZGVmaW5lIHRoZSBldmVudElEXG5cdFx0dmFyIGRhdGUgPSBuZXcgRGF0ZSgpOyBcblx0XHRcdGlmKHZtLmV2ZW50cy5ob3N0aW5nKSBub09mRXZlbnRzQWxyZWFkeSA9IE9iamVjdC5rZXlzKHZtLmV2ZW50cy5ob3N0aW5nKS5sZW5ndGg7XG5cdFx0XHRlbHNlIG5vT2ZFdmVudHNBbHJlYWR5ID0gMDtcblx0XHR2YXIgZXZlbnRJRCA9IGdlbmVyYXRlRXZlbnRJRChkYXRlVGltZVRvVW5peFRpbWUoZGF0ZSksIG5vT2ZFdmVudHNBbHJlYWR5KTtcblxuXHRcdC8vY3JlYXRlIGV2ZW50IG1vZGVsIHRvIHN0YXJ0IHdpdGhcblx0XHQvLyRsb2cuaW5mbyh2bS5ldmVudHNbJ2hvc3RpbmcnXSk7XG5cdFx0dm0uZXZlbnRzLmhvc3RpbmdbZXZlbnRJRF0gPSB7XG5cdFx0XHRpZDogZXZlbnRJRCxcblx0XHRcdGV2ZW50VGltZXM6IHtcblx0XHRcdFx0c3RhcnQ6IGRhdGVUaW1lVG9Vbml4VGltZShkYXRlKSxcblx0XHRcdFx0ZW5kOiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZSlcblx0XHRcdH0sXG5cdFx0XHRob3N0OiB7IFxuXHRcdFx0XHRpZDogJHJvdXRlUGFyYW1zLnVpZCxcblx0XHRcdFx0bmFtZTogdm0uY3VycmVudFVzZXJOYW1lXG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdC8vZGVsZXRlIHRoZSAndXBkYXRlZCcgZmllbGRcblx0XHRpZih2bS5ldmVudHMuaG9zdGluZy51cGRhdGVkID09ICcnIHx8IHZtLmV2ZW50cy5ob3N0aW5nLnVwZGF0ZWQpIHtcblx0XHRcdCRsb2cuaW5mbygnZGVsZXRpbmcgdGhlIHVwZGF0ZWQgZmllbGQnKTtcblx0XHRcdGRlbGV0ZSB2bS5ldmVudHMuaG9zdGluZy51cGRhdGVkO1xuXHRcdH1cblx0XHQvL3NhdmUgdGhlIG5ldyBldmVudFxuXHRcdHZtLmV2ZW50cy4kc2F2ZSgpLnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHQkbG9nLmluZm8oJ1Byb2ZpbGUgc2F2ZWQhJyk7XG5cdFx0XHQkbG9nLmluZm8odm0uZXZlbnRzLmhvc3RpbmdbZXZlbnRJRF0pO1xuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHQkbG9nLmluZm8oJ0Vycm9yIScpO1xuXHRcdH0pO1xuXG5cdFx0Ly9yZWRpcmVjdCB0byB0aGUgbmV3IEV2ZW50IFBhZ2Vcblx0XHRldmVudFJlZGlyZWN0KCcvZXZlbnQnLCBldmVudElELCAkcm91dGVQYXJhbXMudWlkKTtcblx0fVxuXG5cdC8vZXhlY3V0ZSBzY3JpcHRzXG5cdCRsb2cuaW5mbygnaW50byB0aGUgdXNlciBFdmVudHMgY29udHJvbGxlcicpO1xuXHQkbG9nLmluZm8odm0uZXZlbnRzKTtcblxufVxuIiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignVXNlckluZm9ybWF0aW9uQ29udHJvbGxlcicsIFVzZXJJbmZvcm1hdGlvbkNvbnRyb2xsZXIpO1xuXG5Vc2VySW5mb3JtYXRpb25Db250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJGxvY2F0aW9uJywgJyRyb3V0ZVBhcmFtcycsICckZmlyZWJhc2VPYmplY3QnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBVc2VySW5mb3JtYXRpb25Db250cm9sbGVyKCRsb2csICRsb2NhdGlvbiwgJHJvdXRlUGFyYW1zLCAkZmlyZWJhc2VPYmplY3QpIHtcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTsgXG5cdHZhciB1c2VyQmlvID0gcmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCdiaW8nKTtcblx0XG5cdHZtLnVzZXIgPSAkZmlyZWJhc2VPYmplY3QodXNlckJpbyk7XG5cblx0YWN0aXZhdGUoKTtcblxuXHQvL2xvY2FsIHZhcmlhYmxlc1xuXHR2bS5wcm9jZWVkQnRuID0gJ2J0biBidG4tcHJpbWFyeSc7XG5cdHZtLmJ0bk1zc2cgPSAnTW92ZSBPbi4uLic7XG5cdHZtLmRhdGFUb1NhdmUgPSBmYWxzZTtcblx0dm0uaXNEYXRhID0gZmFsc2U7XG5cdC8vaW5pdGlhbGl6ZSB0ZW1wIGJpcnRoZGF5XG5cdHZtLnVzZXIuJGxvYWRlZCgpLnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0aWYodm0udXNlci5iaXJ0aGRheSkge1xuXHRcdFx0dm0udGVtcEJpcnRoZGF5ID0gdW5peFRpbWVUb0RhdGVUaW1lKHZtLnVzZXIuYmlydGhkYXkpO1xuXHRcdH0gZWxzZSB2bS50ZW1wQmlydGhkYXkgPSBuZXcgRGF0ZSgpO1xuXHR9KTtcblxuXHQvL2xvY2FsIG1ldGhvZHNcblx0ZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG5cdFx0Ly93aGF0IGhhcHBlbnMgd2hlbiB0aGUgY29udHJvbGxlciBsYXVuY2hlc1xuXHR9XG5cblx0ZnVuY3Rpb24gdW5peFRpbWVUb0RhdGVUaW1lKHVuaXhUaW1lKSB7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KHVuaXhUaW1lKSk7XG5cdH07XG5cblx0ZnVuY3Rpb24gZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKSB7XG5cdFx0cmV0dXJuIERhdGUucGFyc2UoZGF0ZVRpbWUpO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIHJlZGlyZWN0KHBhdGgpIHtcblx0XHR2YXIgZnVsbFBhdGggPSBwYXRoICsgJy8nICsgJHJvdXRlUGFyYW1zLnVpZCArICcvJyArICRyb3V0ZVBhcmFtcy50b2tlbjtcblx0XHQvL3JlZGlyZWN0XG5cdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyB0bzogJyArIGZ1bGxQYXRoKTtcblx0XHQkbG9jYXRpb24ucGF0aChmdWxsUGF0aCk7XG5cdH07XG5cblx0Ly92aWV3IGFjY2Vzc2libGUgbWV0aG9kc1xuXHR2bS5jaGVja1ZhbHVlcyA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKCAhKGFuZ3VsYXIuaXNVbmRlZmluZWQodm0udXNlci5lbXBsb3llcikgfHwgdm0udXNlci5lbXBsb3llciA9PT0gJycpIHx8IFxuXHRcdFx0IShhbmd1bGFyLmlzVW5kZWZpbmVkKHZtLnVzZXIuam9iVGl0bGUpIHx8IHZtLnVzZXIuam9iVGl0bGUgPT09ICcnKSB8fCBcblx0XHRcdCEoYW5ndWxhci5pc1VuZGVmaW5lZCh2bS51c2VyLmJpcnRoZGF5KSB8fCB2bS51c2VyLmJpcnRoZGF5ID09PSAnJykpIFxuXHRcdHtcblx0XHRcdHZtLmRhdGFUb1NhdmUgPSB0cnVlO1xuXHRcdFx0dm0ucHJvY2VlZEJ0biA9ICdidG4gYnRuLXN1Y2Nlc3MnO1xuXHRcdFx0dm0uYnRuTXNzZyA9ICdTYXZlICYgQ29udGludWUnO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2bS5kYXRhVG9TYXZlID0gZmFsc2U7XG5cdFx0XHR2bS5wcm9jZWVkQnRuID0gJ2J0biBidG4tcHJpbWFyeSc7XG5cdFx0XHR2bS5idG5Nc3NnID0gJ01vdmUgT24uLi4nO1x0XG5cdFx0fVxuXG5cdH1cblxuXHR2bS5zYXZlQW5kTW92ZU9uID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9jb252ZXJ0IHRlbXAgYmlydGhkYXkgdG8gc2F2YWJsZSBmb3JtYXRcblx0XHR2bS51c2VyLmJpcnRoZGF5ID0gZGF0ZVRpbWVUb1VuaXhUaW1lKHZtLnRlbXBCaXJ0aGRheSk7XG5cdFx0Ly9zYXZlIHBhZ2UgZGF0YVxuXHRcdHZtLnVzZXIuJHNhdmUoKTtcblx0XHQvL3JlZGlyZWN0XG5cdFx0cmVkaXJlY3QoJy91c2VyRXZlbnRzJyk7XG5cdH1cblxufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmZhY3RvcnkoJ2F1dGhTZXJ2aWNlJywgYXV0aFNlcnZpY2UpO1xuXG5hdXRoU2VydmljZS4kaW5qZWN0ID0gWyckbG9nJywgJyRxJywgJyRsb2NhdGlvbiddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGF1dGhTZXJ2aWNlKCRsb2csICRxLCAkbG9jYXRpb24pIHtcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHR2YXIgYWxsQXV0aFNlcnZpY2VzID0ge1xuXHRcdGlzTG9nZ2VkSW46IGlzTG9nZ2VkSW5cblx0fTtcblxuXHRyZXR1cm4gYWxsQXV0aFNlcnZpY2VzO1xuXG5cdGZ1bmN0aW9uIGF1dGhEYXRhQ2FsbGJhY2soYXV0aERhdGEpIHtcblx0ICBcblx0ICBpZiAoYXV0aERhdGEpIHtcblx0ICAgICRsb2cuaW5mbyhcIlVzZXIgXCIgKyBhdXRoRGF0YS51aWQgKyBcIiBpcyBsb2dnZWQgaW4gd2l0aCBcIiArIGF1dGhEYXRhLnByb3ZpZGVyKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgJGxvZy5pbmZvKFwiVXNlciBpcyBsb2dnZWQgb3V0Li4uZHVtcGluZyB0aGVtIGJhY2sgdG8gbGFuZGluZyBwYWdlXCIpO1xuXHQgICAgLy9kdW1wIHRoZSB1c2VyIGJhY2sgb3V0XG5cdCAgICAkbG9jYXRpb24ucGF0aCgnLycpO1xuXHQgIH1cblx0fVxuXG5cdGZ1bmN0aW9uIGlzTG9nZ2VkSW4oKSB7XG5cdFx0Ly9jaGVjayB0aGUgdXNlciBhdXRoZW50aWNhaW9uIHN0YXRlXG5cdFx0JGxvZy5pbmZvKCdsb2dnaW5nIGZyb20gdGhlIGlzTG9nZ2VkSW4gTWV0aG9kJyk7XG5cdFx0cmVmLm9uQXV0aChhdXRoRGF0YUNhbGxiYWNrKTtcblx0fVxufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbmZpZyhjb25maWcpO1xuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBjb25maWcoJHJvdXRlUHJvdmlkZXIpIHsgICBcbiAgICAkcm91dGVQcm92aWRlclxuICAgIC53aGVuKCcvJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2xhbmRpbmdQYWdlLmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdMYW5kaW5nUGFnZUNvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICB9KVxuICAgIC53aGVuKCcvdXNlckluZm9ybWF0aW9uLzp1aWQ/Lzp0b2tlbj8nLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvdXNlckluZm9ybWF0aW9uLmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdVc2VySW5mb3JtYXRpb25Db250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICByZXNvbHZlOiB7IC8qIEBuZ0luamVjdCAqL1xuICAgICAgICAgICAgdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZTogdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZVxuICAgICAgICB9XG4gICAgfSlcbiAgICAud2hlbignL3VzZXJFdmVudHMvOnVpZD8vOnRva2VuPycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy91c2VyRXZlbnRzLmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdVc2VyRXZlbnRzQ29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgcmVzb2x2ZTogeyAvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgICAgIHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2U6IHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2VcbiAgICAgICAgfVxuICAgIH0pXG4gICAgLndoZW4oJy9ldmVudC86ZXZlbnRJZD8vOmhvc3RJZD8vOnVpZD8vOnRva2VuPycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9hbkV2ZW50Lmh0bScsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdBbkV2ZW50Q29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgcmVzb2x2ZTogeyAvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgICAgIHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2U6IHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2VcbiAgICAgICAgfVxuICAgIH0pXG4gICAgLm90aGVyd2lzZSh7XG4gICAgICAgIHJlZGlyZWN0VG86ICcvJ1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlKGF1dGhTZXJ2aWNlKSB7XG4gICAgYXV0aFNlcnZpY2UuaXNMb2dnZWRJbigpO1xufSIsIlxuY29uZmlnLiRpbmplY3QgPSBbXCIkcm91dGVQcm92aWRlclwiXTtcbnVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2UuJGluamVjdCA9IFtcImF1dGhTZXJ2aWNlXCJdO2FuZ3VsYXJcblx0Lm1vZHVsZSgnbWVldFVwRXZlbnRBcHAnLCBbXG5cdFx0J25nUm91dGUnLFxuXHRcdCduZ1RvdWNoJyxcblx0XHQnZmlyZWJhc2UnXG5cdF0pO1xuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignQW5FdmVudENvbnRyb2xsZXInLCBBbkV2ZW50Q29udHJvbGxlcik7XG5cbkFuRXZlbnRDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJywgJyRsb2NhdGlvbicsICckcm91dGVQYXJhbXMnLCAnJGZpcmViYXNlT2JqZWN0J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gQW5FdmVudENvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCAkbG9jYXRpb24sICRyb3V0ZVBhcmFtcywgJGZpcmViYXNlT2JqZWN0KSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdHZhciBmYlVSTCA9ICdodHRwczovL21lZXR1cHBsYW5uZXIuZmlyZWJhc2Vpby5jb20vJztcblx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cdHZhciB1c2VyRXZlbnRzID0gcmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ob3N0SWQpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgnaG9zdGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ldmVudElkKVxuXHRcblx0Ly9kZWNsYXJlIGFuZCBpbml0aWFsaXplIGxvY2FsIHZhcmlhYmxlc1xuXHR2bS50ZW1wRGF0ZVRpbWUgPSB7c3RhcnQ6IG5ldyBEYXRlKCksIGVuZDogbmV3IERhdGUoKX07XG5cdHZtLm5ld0d1ZXN0ID0ge25hbWU6ICcnLCBlbWFpbDp7YWRkcmVzczonJywgdmFsaWQ6ZmFsc2UsIHN0eWxlOntjb2xvcjonJ319fTtcblx0dm0uc2hvd0lmSG9zdCA9IGZhbHNlO1xuXHR2bS5oaWRlSWZBdHRlbmRpbmcgPSB0cnVlO1xuXG5cdC8vYmluZGluZyB0byB0aGUgZXZlbnRcblx0dm0uZXZlbnQgPSAkZmlyZWJhc2VPYmplY3QodXNlckV2ZW50cylcblx0dmFyIHJlZ2lzdGVyZWRVc2VycyA9ICRmaXJlYmFzZU9iamVjdChyZWYuY2hpbGQoJ1VpZHMnKSk7XG5cblx0dm0ubWFuYWdlU2VjdGlvbnMgPSB7XG5cdFx0MToge2FjdGl2ZTogdHJ1ZSwgY29tcGxldGU6IGZhbHNlLCBzdHlsZTp7Y29sb3I6J2JsYWNrJywgJ2JhY2tncm91bmQtY29sb3InOid5ZWxsb3cnfX0sXG5cdFx0Mjoge2FjdGl2ZTogZmFsc2UsIGNvbXBsZXRlOiBmYWxzZSwgc3R5bGU6e2NvbG9yOid3aGl0ZScsICdiYWNrZ3JvdW5kLWNvbG9yJzonZ3JheSd9fSxcblx0XHQzOiB7YWN0aXZlOiBmYWxzZSwgY29tcGxldGU6IGZhbHNlLCBzdHlsZTp7Y29sb3I6J3doaXRlJywgJ2JhY2tncm91bmQtY29sb3InOidncmF5J319XG5cdH07XG5cblx0Ly9Mb2NhbCBNZXRob2RzXG5cdGZ1bmN0aW9uIHV0ZjhfdG9fYjY0KHN0cikge1xuXHRcdHJldHVybiBidG9hKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiBiNjRfdG9fdXRmOChzdHIpIHtcbiAgICBcdHJldHVybiBhdG9iKHN0cik7XG5cdH1cblxuXHRmdW5jdGlvbiBkYXRlVGltZVRvVW5peFRpbWUoZGF0ZVRpbWUpIHtcblx0XHRyZXR1cm4gRGF0ZS5wYXJzZShkYXRlVGltZSk7XG5cdH1cblxuXHRmdW5jdGlvbiBjbGVhbk5ld0d1ZXN0VmFyaWFibGUoKSB7XG5cdFx0dm0ubmV3R3Vlc3QgPSB7bmFtZTogJycsIGVtYWlsOnthZGRyZXNzOicnLCB2YWxpZDpmYWxzZSwgc3R5bGU6e2NvbG9yOicnfX19O1xuXHR9XG5cblx0ZnVuY3Rpb24gaW52aXRlQVJlZ2lzdGVyZWRVc2VyKHVpZCkge1xuXHRcdCRsb2cuaW5mbygnYWRkaW5nIHRoZW0gdG8gdGhlIHJlZ2lzdGVyZWQgdXNlcnMgbGlzdCAnICsgdWlkKTtcblx0XHQvL3NldCB0aGUgbmV3IGV2ZW50XG5cdFx0cmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdwZW5kaW5nJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJHJvdXRlUGFyYW1zLmV2ZW50SWQpLnNldCh7XG5cdFx0XHRpZDogJHJvdXRlUGFyYW1zLmV2ZW50SWQsXG5cdFx0XHRldmVudFRpbWVzOiB7XG5cdFx0XHRcdHN0YXJ0OiB2bS5ldmVudC5ldmVudFRpbWVzLnN0YXJ0LFxuXHRcdFx0XHRlbmQ6IHZtLmV2ZW50LmV2ZW50VGltZXMuZW5kXG5cdFx0XHR9LFxuXHRcdFx0bmFtZTogdm0uZXZlbnQubmFtZSxcblx0XHRcdGhvc3Q6ICRyb3V0ZVBhcmFtcy51aWRcblx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbygndGhlcmUgd2FzIGFuIGVycm9yJyArIGVycm9yKTtcblx0XHR9KTtcblx0XHQvL2lmIHRoZXJlIHdhcyBhbiB1cGRhdGVkIHBsYWNlIGhvbGRlciwgcmVtb3ZlIGl0XG5cdFx0cmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKHVpZCkuY2hpbGQoJ2V2ZW50cycpLmNoaWxkKCdwZW5kaW5nJykub25jZSgndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0dmFyIGNoZWNrRm9yUGxhY2Vob2xkZXIgPSBzbmFwc2hvdC52YWwoKVxuXHRcdFx0JGxvZy5pbmZvKHNuYXBzaG90LnZhbCgpKTtcblxuXHRcdFx0aWYoY2hlY2tGb3JQbGFjZWhvbGRlci51cGRhdGVkKSB7XG5cdFx0XHRcdCRsb2cuaW5mbygnZGVsZXRpbmcgdXBkYXRlZCcpO1xuXHRcdFx0XHRyZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQodWlkKS5jaGlsZCgnZXZlbnRzJykuY2hpbGQoJ3BlbmRpbmcnKS5jaGlsZCgndXBkYXRlZCcpLnJlbW92ZShmdW5jdGlvbihlcnJvck9iamVjdCkge1xuXHRcdFx0XHRcdGlmKGVycm9yT2JqZWN0KSAkbG9nLmluZm8oXCJEZWxldGluZyBmYWlsZWQ6IFwiICsgZXJyb3JPYmplY3QuY29kZSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlICRsb2cuaW5mbygnbm90aGluZyB0byBkbycpO1xuXG5cdFx0fSwgZnVuY3Rpb24oZXJyb3JPYmplY3QpIHtcblx0XHRcdGlmKGVycm9yT2JqZWN0KSAkbG9nLmluZm8oXCJUaGUgcmVhZCBmYWlsZWQ6IFwiICsgZXJyb3JPYmplY3QuY29kZSk7XG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBpbnZpdGVBblVucmVnaXN0ZXJlZFVzZXIodXNlcktleSkge1xuXHRcdCRsb2cuaW5mbygnYWRkaW5nIHRoZW0gdG8gdGhlIFVOUkVHSVNURVJFRCB1c2VycyBsaXN0ICcgKyB1c2VyS2V5KTtcblx0XHRyZWYuY2hpbGQoJ1VucmVnaXN0ZXJlZFVzZXJzJykuY2hpbGQodXNlcktleSkuY2hpbGQoJ3BlbmRpbmcnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS5jaGlsZCgkcm91dGVQYXJhbXMuZXZlbnRJZCkuc2V0KHtcblx0XHRcdGlkOiAkcm91dGVQYXJhbXMuZXZlbnRJZCxcblx0XHRcdGhvc3Q6ICRyb3V0ZVBhcmFtcy51aWQsXG5cdFx0XHRldmVudFRpbWVzOiB7XG5cdFx0XHRcdHN0YXJ0OiB2bS5ldmVudC5ldmVudFRpbWVzLnN0YXJ0LFxuXHRcdFx0XHRlbmQ6IHZtLmV2ZW50LmV2ZW50VGltZXMuZW5kXG5cdFx0XHR9LFxuXHRcdFx0bmFtZTogdm0uZXZlbnQubmFtZVxuXHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKCd0aGVyZSB3YXMgYW4gZXJyb3InICsgZXJyb3IpO1xuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gY2hlY2tGb3JIb3N0KCkge1xuXHRcdC8vY2hlY2sgZXZlbnQgaG9zdFxuXHRcdHZhciBhdXRoRGF0YSA9IHJlZi5nZXRBdXRoKCk7XG5cblx0XHRpZihhdXRoRGF0YS51aWQgPT0gJHJvdXRlUGFyYW1zLmhvc3RJZCkge1xuXHRcdFx0JGxvZy5pbmZvKCdpcyB0aGUgaG9zdCcpO1xuXHRcdFx0dm0uc2hvd0lmSG9zdCA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCRsb2cuaW5mbygnbm90IHRoZSBob3N0Jyk7XG5cdFx0XHR2bS5zaG93SWZIb3N0ID0gZmFsc2U7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gY2hlY2tJZkd1ZXN0SXNBdHRlbmRpbmcoKSB7XG5cdFx0aWYoIXZtLnNob3dJZkhvc3QpIHtcblx0XHRcdCRsb2cuaW5mbygnY2hlY2sgZ3Vlc3QgYXR0ZW5kYW5jZScpO1xuXHRcdFx0dXNlckV2ZW50cy5jaGlsZCgnZ3Vlc3RMaXN0Jykub24oJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdFx0dmFyIGFsbEd1ZXN0cyA9IHNuYXBzaG90LnZhbCgpO1xuXHRcdFx0XHR2bS5oaWRlSWZBdHRlbmRpbmcgPSAhYWxsR3Vlc3RzWyRyb3V0ZVBhcmFtcy51aWRdLmF0dGVuZGluZztcblx0XHRcdFx0XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBvcGVuQWxsU2VjdGlvbnMoKSB7XG5cdFx0dm0ubWFuYWdlU2VjdGlvbnNbMV0uYWN0aXZlID0gdHJ1ZTtcblx0XHR2bS5tYW5hZ2VTZWN0aW9uc1syXS5hY3RpdmUgPSB0cnVlO1xuXHRcdHZtLm1hbmFnZVNlY3Rpb25zWzNdLmFjdGl2ZSA9IHRydWU7XG5cdH1cblxuXHQvL3ZpZXcgTWV0aG9kXG5cdHZtLnVuaXhUaW1lVG9EYXRlVGltZSA9IGZ1bmN0aW9uICh1bml4VGltZSkge1xuXHRcdHJldHVybiBuZXcgRGF0ZShwYXJzZUludCh1bml4VGltZSkpO1xuXHR9O1xuXG5cdHZtLmRhdGVUaW1lVG9Vbml4VGltZSA9IGZ1bmN0aW9uIChkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fTtcblxuXHR2bS5zdWJtaXQgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9nLmluZm8oJ3N1Ym1pdHRpbmcgdGhlIGZvcm0gbm93IScpO1xuXHR9XG5cblx0dm0uYmFja1RvVXNlckV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2NhdGlvbi5wYXRoKCcvdXNlckV2ZW50cy8nICsgJHJvdXRlUGFyYW1zLnVpZCArICcvJyArICRyb3V0ZVBhcmFtcy50b2tlbik7XG5cdH1cblxuXHR2bS5ldmVudFJlZGlyZWN0ID0gZnVuY3Rpb24ocGF0aCwgZXZlbnRJRCkge1xuXHRcdHZhciBmdWxsUGF0aCA9IHBhdGggKyAnLycgKyAkcm91dGVQYXJhbXMudWlkICsgJy8nICsgJHJvdXRlUGFyYW1zLnRva2VuO1xuXHRcdC8vcmVkaXJlY3Rcblx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIHRvOiAnICsgZnVsbFBhdGgpO1xuXHRcdCRsb2NhdGlvbi5wYXRoKGZ1bGxQYXRoKTtcblx0fVxuXG5cdHZtLmNoYW5nZVNlY3Rpb24gPSBmdW5jdGlvbih0YXJnZXRTZWN0aW9uKSB7XG5cdFx0Zm9yKGkgPSAxOyBpIDw9MzsgaSsrKSB7XG5cdFx0XHRpZihpPT10YXJnZXRTZWN0aW9uKSB7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLmFjdGl2ZSA9IHRydWU7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLnN0eWxlWydiYWNrZ3JvdW5kLWNvbG9yJ10gPSd5ZWxsb3cnO1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5zdHlsZVsnY29sb3InXSA9J2JsYWNrJztcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLmFjdGl2ZSA9IGZhbHNlO1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1tpXS5zdHlsZVsnYmFja2dyb3VuZC1jb2xvciddID0nZ3JheSc7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zW2ldLnN0eWxlWydjb2xvciddID0nd2hpdGUnO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHZtLnNhdmVFdmVudFRpbWUgPSBmdW5jdGlvbihkYXRlVGltZSwgdGFyZ2V0KSB7XG5cdFx0Ly9pZiB0aGlzIGV2ZW50IGRpZG4ndCBoYXZlIGEgc3RhcnQgdGltZSwgY3JlYXRlIGl0XG5cdFx0aWYoIXZtLmV2ZW50LmV2ZW50VGltZXMpIHsgXG5cdFx0XHR2bS5ldmVudC5ldmVudFRpbWVzID0ge3N0YXJ0OiAnJywgZW5kOiAnJ307XG5cdFx0XHR2bS5ldmVudC5ldmVudFRpbWVzLnN0YXJ0ID0gdm0uZGF0ZVRpbWVUb1VuaXhUaW1lKHZtLnRlbXBEYXRlVGltZS5zdGFydCk7IFxuXHRcdFx0dm0uZXZlbnQuZXZlbnRUaW1lcy5lbmQgPSB2bS5kYXRlVGltZVRvVW5peFRpbWUodm0udGVtcERhdGVUaW1lLmVuZCk7XG5cdFx0fVxuXG5cdFx0aWYoKHZtLnRlbXBEYXRlVGltZS5lbmQgPCB2bS50ZW1wRGF0ZVRpbWUuc3RhcnQpICYmIHRhcmdldCA9PSAnc3RhcnQnKSB2bS50ZW1wRGF0ZVRpbWUuZW5kID0gdm0udGVtcERhdGVUaW1lLnN0YXJ0O1xuXHRcdGlmKHRhcmdldCA9PSAnc3RhcnQnKSB2bS5ldmVudC5ldmVudFRpbWVzLnN0YXJ0ID0gdm0uZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKTtcblx0XHRpZih0YXJnZXQgPT0gJ2VuZCcpIHZtLmV2ZW50LmV2ZW50VGltZXMuZW5kID0gdm0uZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKTtcblx0fVxuXG5cdHZtLmd1ZXN0c0FyZUludml0ZWQgPSBmdW5jdGlvbigpIHtcblx0XHRpZih2bS5ldmVudC5ndWVzdExpc3QpIHJldHVybiB0cnVlO1xuXHRcdGVsc2UgcmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0dm0udmFsaWRhdGVHdWVzdEVtYWlsID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9pZiB0aGVyZSBpcyBhbiBlbWFpbCBhZGRyZXNzXG5cdFx0aWYodm0ubmV3R3Vlc3QuZW1haWwuYWRkcmVzcykge1xuXHRcdFx0Ly9jaGVjayB2YWxpZGl0eVxuXHRcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKFwiW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XCIsIFwiXCIpO1xuXG5cdFx0XHRpZihjb25zdHJhaW50LnRlc3Qodm0ubmV3R3Vlc3QuZW1haWwuYWRkcmVzcykpIHtcblx0XHRcdFx0dm0ubmV3R3Vlc3QuZW1haWwudmFsaWQgPSB0cnVlO1xuXHRcdFx0XHR2bS5uZXdHdWVzdC5lbWFpbC5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLm5ld0d1ZXN0LmVtYWlsLnZhbGlkID0gZmFsc2U7XG5cdFx0XHRcdHZtLm5ld0d1ZXN0LmVtYWlsLnN0eWxlID0ge2NvbG9yOicnfTtcblx0XHRcdH1cdFx0XHRcblx0XHR9XG5cdH1cblxuXHR2bS5pc1NlY3Rpb25Db21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHZtLm1hbmFnZVNlY3Rpb25zWzFdLmFjdGl2ZSkge1xuXHRcdFx0aWYoIHZtLmV2ZW50Lm5hbWUgJiZcblx0XHRcdFx0dm0uZXZlbnQudHlwZSAmJlxuXHRcdFx0XHR2bS5ldmVudC5ldmVudFRpbWVzLnN0YXJ0ICYmXG5cdFx0XHRcdHZtLmV2ZW50LmV2ZW50VGltZXMuc3RhcnQpIHtcblx0XHRcdFx0JGxvZy5pbmZvKCdzZXR0aW5nIHNlY3Rpb24gMSB0byBncmVlbicpO1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1sxXS5jb21wbGV0ZSA9IHRydWU7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zWzFdLnN0eWxlWydiYWNrZ3JvdW5kLWNvbG9yJ10gPSAnZ3JlZW4nO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB2bS5tYW5hZ2VTZWN0aW9uc1sxXS5jb21wbGV0ZSA9IGZhbHNlO1xuXHRcdH0gZWxzZSBpZiAodm0ubWFuYWdlU2VjdGlvbnNbMl0uYWN0aXZlKSB7XG5cdFx0XHRpZiggdm0uZXZlbnQuYWRkcmVzcy5jaXR5ICYmIFxuXHRcdFx0XHR2bS5ldmVudC5hZGRyZXNzLnN0YXRlICYmXG5cdFx0XHRcdHZtLmV2ZW50LmFkZHJlc3Muc3RyZWV0MDEgJiZcblx0XHRcdFx0dm0uZXZlbnQuYWRkcmVzcy56aXApIHtcblx0XHRcdFx0JGxvZy5pbmZvKCdzZXR0aW5nIHNlY3Rpb24gMiB0byBncmVlbicpO1xuXHRcdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1syXS5jb21wbGV0ZSA9IHRydWU7XG5cdFx0XHRcdHZtLm1hbmFnZVNlY3Rpb25zWzJdLnN0eWxlWydiYWNrZ3JvdW5kLWNvbG9yJ10gPSAnZ3JlZW4nO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB2bS5tYW5hZ2VTZWN0aW9uc1syXS5jb21wbGV0ZSA9IGZhbHNlO1xuXHRcdH0gZWxzZSBpZiAodm0ubWFuYWdlU2VjdGlvbnNbM10uYWN0aXZlKSB7XG5cdFx0XHQkbG9nLmluZm8oJ3NldHRpbmcgc2VjdGlvbiAyIHRvIGdyZWVuJyk7XG5cdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1szXS5jb21wbGV0ZSA9IHRydWU7XG5cdFx0XHR2bS5tYW5hZ2VTZWN0aW9uc1szXS5zdHlsZVsnYmFja2dyb3VuZC1jb2xvciddID0gJ2dyZWVuJztcblx0XHR9XG5cdH1cblxuXHR2bS5zYXZlRXZlbnQgPSBmdW5jdGlvbigpIHtcblx0XHR2bS5ldmVudC4kc2F2ZSgpLnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2V2ZW50IHNhdmVkJyk7XG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdCRsb2cuaW5mbygnZXJyb3IhICcgKyBlcnJvcik7XG5cdFx0fSk7XG5cdH1cblxuXHR2bS5zYXZlQW5kQWR2YW5jZSA9IGZ1bmN0aW9uKCkge1xuXHRcdHZtLmV2ZW50LiRzYXZlKCkudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdCRsb2cuaW5mbygnZXZlbnQgc2F2ZWQnKTtcblx0XHR9KS5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0JGxvZy5pbmZvKCdlcnJvciEgJyArIGVycm9yKTtcblx0XHR9KTtcblxuXHRcdC8vY2hlY2sgZm9yIGNvbXBsZXRlbmVzXG5cdFx0dm0uaXNTZWN0aW9uQ29tcGxldGUoKTtcblxuXHRcdGlmKHZtLm1hbmFnZVNlY3Rpb25zWzFdLmNvbXBsZXRlID09IHRydWUgJiYgdm0ubWFuYWdlU2VjdGlvbnNbMl0uY29tcGxldGUgPT0gdHJ1ZSAmJiB2bS5tYW5hZ2VTZWN0aW9uc1szXS5jb21wbGV0ZSA9PSB0cnVlKSB7XG5cdFx0XHR2bS5ldmVudFJlZGlyZWN0KCcvdXNlckV2ZW50cycsICRyb3V0ZVBhcmFtcy51aWQpO1xuXHRcdH0gZWxzZSBpZiAodm0ubWFuYWdlU2VjdGlvbnNbMV0uYWN0aXZlKSB2bS5jaGFuZ2VTZWN0aW9uKDIpO1xuXHRcdGVsc2UgaWYgKHZtLm1hbmFnZVNlY3Rpb25zWzJdLmFjdGl2ZSkgdm0uY2hhbmdlU2VjdGlvbigzKTtcblx0XHRlbHNlIGlmICh2bS5tYW5hZ2VTZWN0aW9uc1szXS5hY3RpdmUpIHZtLmNoYW5nZVNlY3Rpb24oMSk7XG5cdH1cblxuXHR2bS5hZGRHdWVzdFRvSG9zdHNMaXN0ID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9kZWNsYXJlIGFuZCBpbml0aWFsaXplIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciB1c2VyS2V5ID0gdXRmOF90b19iNjQodm0ubmV3R3Vlc3QuZW1haWwuYWRkcmVzcyk7XG5cblx0XHQvL2lmIGVtYWlsIGlzIHZhbGlkIGFuZCBuYW1lIGV4aXN0c1xuXHRcdGlmICh2bS5uZXdHdWVzdC5uYW1lICYmIHZtLm5ld0d1ZXN0LmVtYWlsLnZhbGlkKSB7XG5cdFx0XHQvL2lzIHRoZXJlIGEgZ3Vlc3QgbGlzdCBhbHJlYWR5PyBJZiBub3QgY3JlYXRlIG9uZVxuXHRcdFx0aWYoIXZtLmV2ZW50Lmd1ZXN0TGlzdCkge1xuXHRcdFx0XHR2bS5ldmVudC5ndWVzdExpc3QgPSB7fTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vaWYgc28gaXMgdGhpcyBwZXJzb24gYWxyZWFkeSBvbiB0aGUgbGlzdD9cblx0XHRcdFx0dmFyIGkgPTA7XG5cdFx0XHRcdHdoaWxlKHZtLmV2ZW50Lmd1ZXN0TGlzdFtpXSkge1xuXHRcdFx0XHRcdGlmKHZtLmV2ZW50Lmd1ZXN0TGlzdFtpXS5lbWFpbCA9PSBiNjRfdG9fdXRmOCh1c2VyS2V5KSkge1xuXHRcdFx0XHRcdFx0JGxvZy5pbmZvKCdUaGlzIGd1ZXN0IGlzIGFscmVhZHkgb24gdGhlIGxpc3QnKTtcblx0XHRcdFx0XHRcdGNsZWFuTmV3R3Vlc3RWYXJpYWJsZSgpO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpKys7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly9pcyB0aGlzIGd1ZXN0IGEgcmVnaXN0ZXJlZCB1c2VyP1xuXHRcdFx0aWYocmVnaXN0ZXJlZFVzZXJzW3VzZXJLZXldKSB7XG5cdFx0XHRcdC8vaXMgdGhlIHJlZ2lzdGVyZWQgdXNlciB0aGUgaG9zdD9cblx0XHRcdFx0aWYocmVnaXN0ZXJlZFVzZXJzW3VzZXJLZXldID09ICRyb3V0ZVBhcmFtcy51aWQpIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ3RyaWVkIHRvIHJlZ2lzdGVyIHRoZSBob3N0Jyk7XG5cdFx0XHRcdFx0Y2xlYW5OZXdHdWVzdFZhcmlhYmxlKCk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdC8vYWRkIHRoZW0gdG8gdGhlIGFwcHJvcHJpYXRlIHJlZ2lzdGVyZWQgdXNlcnMnIGxpc3Qgb2YgZXZlbnQgaW52aXRlc1xuXHRcdFx0XHRcdGludml0ZUFSZWdpc3RlcmVkVXNlcihyZWdpc3RlcmVkVXNlcnNbdXNlcktleV0pO1xuXG5cdFx0XHRcdFx0Ly9hZGQgdGhlIGd1ZXN0IHRvIHRoZSBsaXN0XG5cdFx0XHRcdFx0dm0uZXZlbnQuZ3Vlc3RMaXN0W3JlZ2lzdGVyZWRVc2Vyc1t1c2VyS2V5XV0gPSB7XG5cdFx0XHRcdFx0XHRhdHRlbmRpbmc6IGZhbHNlLCBcblx0XHRcdFx0XHRcdHN0YXR1czoncGVuZGluZycsIFxuXHRcdFx0XHRcdFx0bmFtZTogdm0ubmV3R3Vlc3QubmFtZSwgXG5cdFx0XHRcdFx0XHRlbWFpbDp2bS5uZXdHdWVzdC5lbWFpbC5hZGRyZXNzLFxuXHRcdFx0XHRcdH07XHRcdFx0XHRcdFxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2FkZCB0aGUgaW52aXRlIHRvIHRoZSBub24tcmVnaXN0ZXJlZCB1c2VycyBsaXN0IG9mIGV2ZW50IGludml0ZXNcblx0XHRcdFx0aW52aXRlQW5VbnJlZ2lzdGVyZWRVc2VyKHVzZXJLZXkpO1xuXG5cdFx0XHRcdC8vYWRkIHRoZSBndWVzdCB0byB0aGUgbGlzdFxuXHRcdFx0XHR2bS5ldmVudC5ndWVzdExpc3RbdXNlcktleV0gPSB7XG5cdFx0XHRcdFx0XHRhdHRlbmRpbmc6IGZhbHNlLCBcblx0XHRcdFx0XHRcdHN0YXR1czoncGVuZGluZycsIFxuXHRcdFx0XHRcdFx0bmFtZTogdm0ubmV3R3Vlc3QubmFtZSwgXG5cdFx0XHRcdFx0XHRlbWFpbDp2bS5uZXdHdWVzdC5lbWFpbC5hZGRyZXNzLFxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXG5cblx0XHRcdC8vc2F2ZSB0aGUgZXZlbnRcblx0XHRcdHZtLnNhdmVFdmVudCgpO1xuXHRcdFx0Ly9jbGVhciB0aGUgdGVtcCB2YWx1ZXNcblx0XHRcdGNsZWFuTmV3R3Vlc3RWYXJpYWJsZSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkbG9nLmluZm8oJ3lvdSBkaWRuXFwndCBlbnRlciBhIG5hbWUgYW5kIG9yIGVtYWlsJyk7XG5cdFx0fVxuXHR9XG5cblx0dm0uZ3Vlc3RXaWxsQXR0ZW5kID0gZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHR2YXIgY3VycmVudFVzZXIgPSByZWYuY2hpbGQoJ1VzZXJzJykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkuY2hpbGQoJ2V2ZW50cycpO1xuXHRcdHZhciB0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucyA9IDA7XG5cdFx0dmFyIHJlbW92ZUF0dGVuZGluZ1VwZGF0ZWQgPSBmYWxzZTtcblx0XHRcblx0XHQvL2NoYW5nZSBhdHRlbmRpbmcgdG8gdHJ1ZSBpbiBob3N0J3MgZ3Vlc3RMaXN0XG5cdFx0dm0uZXZlbnQuZ3Vlc3RMaXN0WyRyb3V0ZVBhcmFtcy51aWRdLmF0dGVuZGluZyA9IHJlc3BvbnNlO1xuXHRcdC8vY2hhbmdlIHN0YXR1cyB0byAnYXR0ZW5kaW5nJyBpbiBob3N0J3MgZ3Vlc3RMaXN0XG5cdFx0dm0uZXZlbnQuZ3Vlc3RMaXN0WyRyb3V0ZVBhcmFtcy51aWRdLnN0YXR1cyA9ICdhdHRlbmRpbmcnO1xuXHRcdFxuXHRcdC8vZ2V0IHRoZSBpbnZpdGF0aW9uIGRldGFpbHNcblx0XHRjdXJyZW50VXNlci5jaGlsZCgncGVuZGluZycpLm9uKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWxiZVxuXHRcdFx0dmFyIGludml0YXRpb25zID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHQvL2xvZyBzdGFydGluZyB2YWx1ZXNcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9ucyk7XG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnNbJHJvdXRlUGFyYW1zLmhvc3RJZF0pO1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdWyRyb3V0ZVBhcmFtcy5ldmVudElkXSk7XG5cblx0XHRcdHZhciB0aGlzSW52aXRhdGlvbiA9IGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdWyRyb3V0ZVBhcmFtcy5ldmVudElkXTtcblx0XHRcdFxuXHRcdFx0JGxvZy5pbmZvKHRoaXNJbnZpdGF0aW9uKTtcblx0XHRcdFxuXHRcdFx0Ly9jaGVjayAjIG9mIGluaXZpYXRpb25zXG5cdFx0XHRmb3IoaW52aXRhdGlvbiBpbiBpbnZpdGF0aW9ucykge1xuXHRcdFx0XHR0b3RhbFBlbmRpbmdJbnZpdGF0aW9ucysrO1xuXHRcdFx0fVxuXG5cdFx0XHQvL3JlcG9ydCAjIG9mIGludml0YXRpb25zXG5cdFx0XHQkbG9nLmluZm8oXCJ0b3RhbCBhdHRlbmRpbmc6IFwiICsgdG90YWxQZW5kaW5nSW52aXRhdGlvbnMpO1xuXHRcdFx0XG5cdFx0XHQvL2FkZCB0aGUgZXZlbnQgdG8gdGhlIGd1ZXN0J3MgYXR0ZW5kaW5nIGxpc3Rcblx0XHRcdGlmKHJlc3BvbnNlKSBjdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykuY2hpbGQoJHJvdXRlUGFyYW1zLmhvc3RJZCkuY2hpbGQoJHJvdXRlUGFyYW1zLmV2ZW50SWQpLnNldCh0aGlzSW52aXRhdGlvbiwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbyhlcnJvcik7XG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXG5cdFx0Ly9pZiB0aGUgdXBkYXRlZCBwbGFjZWhvbGRlciB3YXMgb24gdGhlIGF0dGVuZGluZyBsaXN0IHJlbW92ZSBpdFxuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5vbigndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHRcdHZhciBhdHRlbmRpbmdMaXN0ID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHRcblx0XHRcdC8vcmVwb3J0IGFjdGlvbnNcblx0XHRcdCRsb2cuaW5mbygndGhpcyBpcyB0aGUgYXR0ZW5kaW5nIGxpc3QnKTtcblx0XHRcdCRsb2cuaW5mbyhhdHRlbmRpbmdMaXN0KTtcblx0XHRcdFxuXHRcdFx0Ly90aHJvdyBmbGFnIGZvciBsYXRlclxuXHRcdFx0aWYoYXR0ZW5kaW5nTGlzdC51cGRhdGVkKSByZW1vdmVBdHRlbmRpbmdVcGRhdGVkID0gdHJ1ZTtcblxuXHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHQvL2lmIHRoZXIgd2FzIGFuIGVycm9yIHJlcG9ydCBpdFxuXHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbyhlcnJvcik7XG5cdFx0fSk7XG5cblx0XHQvL2lmIHRoaXMgaXMgdGhlIGxhc3QgcGVuZGluZyBldmVudCBvbiB0aGUgZ3Vlc3QncyBwZW5kaW5nIGxpc3QsIGFkZCB0aGUgdXBkYXRlZCBwbGFjZWhvbGRlclxuXHRcdGlmKHRvdGFsUGVuZGluZ0ludml0YXRpb25zIDwgMikge1xuXHRcdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0XHRcdHZhciBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XG5cblx0XHRcdC8vcmVwbGFjZSB3aXRoIHVwZGF0ZWQgZmllbGRcblx0XHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdwZW5kaW5nJykudXBkYXRlKHtcblx0XHRcdFx0dXBkYXRlZDogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0aWYoZXJyb3IpICRsb2cuaW5mbyhlcnJvcik7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHQvL3JlbW92ZSB0aGUgZXZlbnQgZnJvbSB0aGUgZ3Vlc3QncyBwZW5kaW5nIGxpc3Rcblx0XHRjdXJyZW50VXNlci5jaGlsZCgncGVuZGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ob3N0SWQpLnJlbW92ZSgpO1xuXG5cdFx0Ly9pZiB0aGVyZSB3YXMgYW4gdXBkYXRlZCBmaWVsZCBpbiBhdHRlbmRpbmcsIHJlbW92ZSBpdFxuXHRcdGlmKHJlbW92ZUF0dGVuZGluZ1VwZGF0ZWQpIHtcblx0XHRcdCRsb2cuaW5mbygncmVtb3ZpbmcgdGhlIHVwZGF0ZWQgcGxhY2Vob2xkZXInKTtcblx0XHRcdC8vY3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLmNoaWxkKCd1cGRhdGVkJykucmVtb3ZlKCk7XG5cdFx0fVxuXG5cdFx0Ly9zYXZlIGNoYW5nZXNcblx0XHR2bS5ldmVudC4kc2F2ZSgpO1xuXHR9XG5cblx0dm0udXBkYXRlVXBkYXRlZFBhcmFtID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGN1cnJlbnRVc2VyID0gcmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCdldmVudHMnKTtcblx0XHRcblx0XHQkbG9nLmluZm8oJ3VwZGF0aW5nIHRoZSBwYXJhbScpO1xuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdhdHRlbmRpbmcnKS5vbigndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuXHRcdFx0JGxvZy5pbmZvKHNuYXBzaG90LnZhbCgpKTtcblx0XHR9KTtcblx0XHRjdXJyZW50VXNlci5jaGlsZCgnYXR0ZW5kaW5nJykuY2hpbGQoJ3VwZGF0ZWQnKS5yZW1vdmUoKTtcblx0fVxuXG5cdHZtLmFkZEludml0YXRpb25Ub0F0dGVuZGluZyA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdFx0dmFyIGN1cnJlbnRVc2VyID0gcmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKCRyb3V0ZVBhcmFtcy51aWQpLmNoaWxkKCdldmVudHMnKTtcblx0XHR2YXIgdG90YWxQZW5kaW5nSW52aXRhdGlvbnMgPSAwO1xuXG5cdFx0Ly9nZXQgdGhlIGludml0YXRpb24gZGV0YWlsc1xuXHRcdGN1cnJlbnRVc2VyLmNoaWxkKCdwZW5kaW5nJykub24oJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhbGJlXG5cdFx0XHR2YXIgaW52aXRhdGlvbnMgPSBzbmFwc2hvdC52YWwoKTtcblx0XHRcdHZhciB0aGlzSW52aXRhdGlvbiA9IGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdWyRyb3V0ZVBhcmFtcy5ldmVudElkXTtcblx0XHRcdFxuXHRcdFx0Ly9sb2cgc3RhcnRpbmcgdmFsdWVzXG5cdFx0XHQkbG9nLmluZm8oaW52aXRhdGlvbnMpO1xuXHRcdFx0JGxvZy5pbmZvKGludml0YXRpb25zWyRyb3V0ZVBhcmFtcy5ob3N0SWRdKTtcblx0XHRcdCRsb2cuaW5mbyhpbnZpdGF0aW9uc1skcm91dGVQYXJhbXMuaG9zdElkXVskcm91dGVQYXJhbXMuZXZlbnRJZF0pO1xuXHRcdFx0XG5cdFx0XHQvL2NoZWNrICMgb2YgaW5pdmlhdGlvbnNcblx0XHRcdGZvcihpbnZpdGF0aW9uIGluIGludml0YXRpb25zKSB7XG5cdFx0XHRcdHRvdGFsUGVuZGluZ0ludml0YXRpb25zKys7XG5cdFx0XHR9XG5cblx0XHRcdC8vcmVwb3J0ICMgb2YgaW52aXRhdGlvbnNcblx0XHRcdCRsb2cuaW5mbyhcInRvdGFsIHBlbmRpbmcgaW52aXRhdGlvbnM6IFwiICsgdG90YWxQZW5kaW5nSW52aXRhdGlvbnMpO1xuXHRcdFx0XG5cdFx0XHQkbG9nLmluZm8ocmVzcG9uc2UpO1xuXHRcdFx0Ly9hZGQgdGhlIGV2ZW50IHRvIHRoZSBndWVzdCdzIGF0dGVuZGluZyBsaXN0XG5cdFx0XHRpZihyZXNwb25zZSkgY3VycmVudFVzZXIuY2hpbGQoJ2F0dGVuZGluZycpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ob3N0SWQpLmNoaWxkKCRyb3V0ZVBhcmFtcy5ldmVudElkKS5zZXQodGhpc0ludml0YXRpb24sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGlmKGVycm9yKSAkbG9nLmluZm8oZXJyb3IpO1xuXHRcdFx0fSk7XG5cblxuXG5cdFx0fSk7XG5cdH1cblxuXHQvL2V4ZWN1dGlvblxuXHQkbG9nLmluZm8oJHJvdXRlUGFyYW1zLnVpZCk7XG5cdCRsb2cuaW5mbygkcm91dGVQYXJhbXMuZXZlbnRJZCk7XG5cblx0Ly9jaGVjayB1c2VyIHRvIGRldGVybWluZSBzdGF0ZVxuXHRjaGVja0Zvckhvc3QoKTtcblx0Y2hlY2tJZkd1ZXN0SXNBdHRlbmRpbmcoKTtcblxuXHRpZighdm0uc2hvd0lmSG9zdCkgb3BlbkFsbFNlY3Rpb25zKCk7XG59XG5cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ0xhbmRpbmdQYWdlQ29udHJvbGxlcicsIExhbmRpbmdQYWdlQ29udHJvbGxlcik7XG5cbkxhbmRpbmdQYWdlQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZycsICckbG9jYXRpb24nLCAnJGRvY3VtZW50JywgJyR3aW5kb3cnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBMYW5kaW5nUGFnZUNvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCAkbG9jYXRpb24sICRkb2N1bWVudCwgJHdpbmRvdykge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHR2YXIgZmJVUkwgPSAnaHR0cHM6Ly9tZWV0dXBwbGFubmVyLmZpcmViYXNlaW8uY29tLyc7XG5cdHZhciBhdXRoRGF0YSA9IHt9O1xuXHR2YXIgY3VycmVudFVzZXJEYXRhID0ge307XG5cblx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdHZtLnNob3dSZXF1aXJubWVudHMgPSBmYWxzZTtcblx0dm0udmFsaWROZXdOYW1lID0geyd2YWxpZCc6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOicnfX07XG5cdHZtLnZhbGlkTmV3RW1haWwgPSB7J3ZhbGlkJzpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6Jyd9fTtcblx0dm0uc2VjdXJlUGFzc3dvcmQgPSB7J3NlY3VyZSc6ZmFsc2UsICdzdHlsZSc6e2NvbG9yOicnfX07XG5cdHZtLnVubG9ja0NyZWF0ZVVzZXJCdG4gPSB7J3VzYWJsZSc6ZmFsc2UsICdjbGFzcyc6J2J0biBidG4td2FybmluZyd9O1xuXHR2bS5tZXNzYWdlID0gJ3Rlc3RpbmcnO1xuXHRcblx0dm0udmFsaWRVc2VyRW1haWwgPSB7J3ZhbGlkJzpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6Jyd9fTtcblx0dm0udmFsaWRVc2VyUGFzc3dvcmQgPSB7J3ZhbGlkJzpmYWxzZSwgJ3N0eWxlJzp7Y29sb3I6Jyd9fTtcblx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0biA9IHsndXNhYmxlJzpmYWxzZSwgJ2NsYXNzJzonYnRuIGJ0bi13YXJuaW5nJ307XG5cdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzID0ge1xuXHRcdDA6eydjb25zdHJhaW50JzonSXMgYXQgbGVhc3QgMTYgY2hhcmFjdGVycyBsb25nJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX0sXG5cdFx0MTp7J2NvbnN0cmFpbnQnOidJcyBubyBsb25nZXIgdGhhbiAxMDAgY2hhcmFjdGVycycsICdzdHlsZSc6e2NvbG9yOidyZWQnfSwgJ21ldCc6ZmFsc2V9LFxuXHRcdDI6eydjb25zdHJhaW50JzonQ29udGFpbnMgYXQgbGVhc3Qgb25lIHJlcXVpcmVkIHN5bWJvbCAoXFwhXFxAXFwjXFwkXFwlXFxeXFwmXFwqKScsICdzdHlsZSc6e2NvbG9yOidyZWQnfSwgJ21ldCc6ZmFsc2V9LFxuXHRcdDM6eydjb25zdHJhaW50JzonQ29udGFpbnMgYXQgbGVhc3Qgb25lIG51bWJlcicsICdzdHlsZSc6e2NvbG9yOidyZWQnfSwgJ21ldCc6ZmFsc2V9LFxuXHRcdDQ6eydjb25zdHJhaW50JzonQ29udGFpbnMgYXQgbGVhc3Qgb25lIGxvd2VyY2FzZSBsZXR0ZXInLCAnc3R5bGUnOntjb2xvcjoncmVkJ30sICdtZXQnOmZhbHNlfSxcblx0XHQ1OnsnY29uc3RyYWludCc6J0NvbnRhaW5zIGF0IGxlYXN0IG9uZSB1cHBlcmNhc2UgbGV0dGVyJywgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX0sXG5cdFx0Njp7J2NvbnN0cmFpbnQnOlwiRG9lc24ndCBoYXZlIGFueSBpbGxlZ2FsIGNoYXJhY3RlcnNcIiwgJ3N0eWxlJzp7Y29sb3I6J3JlZCd9LCAnbWV0JzpmYWxzZX1cblx0fTtcblxuXHQvL2xvY2FsIG1ldGhvZHNcblx0ZnVuY3Rpb24gdXRmOF90b19iNjQoc3RyKSB7XG5cdFx0cmV0dXJuIGJ0b2Eoc3RyKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGI2NF90b191dGY4KHN0cikge1xuICAgIFx0cmV0dXJuIGF0b2Ioc3RyKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHVuaXhUaW1lVG9EYXRlVGltZSh1bml4VGltZSkge1xuXHRcdHJldHVybiBuZXcgRGF0ZShwYXJzZUludCh1bml4VGltZSkpO1xuXHR9XG5cblx0ZnVuY3Rpb24gZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGVUaW1lKSB7XG5cdFx0cmV0dXJuIERhdGUucGFyc2UoZGF0ZVRpbWUpO1xuXHR9XG5cblx0Ly9kZWZpbmUgY29udHJvbGxlciBtZXRob2RzXG5cdHZtLmRpc3BsYXlQYXNzUmVxcyA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHZtLm5ld05hbWUgJiYgdm0ubmV3RW1haWwpIHtcblx0XHRcdHZtLnNob3dSZXF1aXJubWVudHMgPSB0cnVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2bS5zaG93UmVxdWlybm1lbnRzID0gZmFsc2U7XG5cdFx0fVxuXHR9XG5cblx0dm0uY2hlY2tOZXdOYW1lID0gZnVuY3Rpb24oKSB7XG5cdFx0XG5cdFx0aWYodm0ubmV3TmFtZSkge1xuXHRcdFx0aWYodm0ubmV3TmFtZS5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdHZtLnZhbGlkTmV3TmFtZS52YWxpZCA9IHRydWU7XG5cdFx0XHRcdHZtLnZhbGlkTmV3TmFtZS5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLnZhbGlkTmV3TmFtZS52YWxpZCA9IGZhbHNlO1xuXHRcdFx0XHR2bS52YWxpZE5ld05hbWUuc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHZtLm9wZW5DcmVhdGVVc2VyQnV0dG9uKCk7XG5cdH1cblxuXHR2bS5jaGVja05ld0VtYWlsID0gZnVuY3Rpb24gKCkge1xuXHRcdGlmKHZtLm5ld0VtYWlsKSB7XG5cdFx0XHQvL2NoZWNrIHZhbGlkaXR5XG5cdFx0XHR2YXIgY29uc3RyYWludCA9IG5ldyBSZWdFeHAoXCJbYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKD86XFwuW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKykqQCg/OlthLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cXC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cIiwgXCJcIik7XG5cblx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2bS5uZXdFbWFpbCkpIHtcblx0XHRcdFx0dm0udmFsaWROZXdFbWFpbC52YWxpZCA9IHRydWU7XG5cdFx0XHRcdHZtLnZhbGlkTmV3RW1haWwuc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS52YWxpZE5ld0VtYWlsLnZhbGlkID0gZmFsc2U7XG5cdFx0XHRcdHZtLnZhbGlkTmV3RW1haWwuc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHRcdFx0fVx0XHRcdFxuXHRcdH1cblx0XHRcblx0XHR2bS5vcGVuQ3JlYXRlVXNlckJ1dHRvbigpO1xuXHR9XG5cblx0dm0uY2hlY2tVc2VyRW1haWwgPSBmdW5jdGlvbigpIHtcblx0XHRpZih2bS51c2VyRW1haWwpIHtcblx0XHRcdC8vY2hlY2sgdmFsaWRpdHlcblx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChcIlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSsoPzpcXC5bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKSpAKD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1xcLikrW2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1wiLCBcIlwiKTtcblxuXHRcdFx0aWYoY29uc3RyYWludC50ZXN0KHZtLnVzZXJFbWFpbCkpIHtcblx0XHRcdFx0dm0udmFsaWRVc2VyRW1haWwudmFsaWQgPSB0cnVlO1xuXHRcdFx0XHR2bS52YWxpZFVzZXJFbWFpbC5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLnZhbGlkVXNlckVtYWlsLnZhbGlkID0gZmFsc2U7XG5cdFx0XHRcdHZtLnZhbGlkVXNlckVtYWlsLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR2bS5vcGVuVXNlckxvZ2luQnRuKCk7XG5cdH1cblxuXHR2bS5jaGVja05ld1Bhc3N3b3JkcyA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vZm9yIGVhY2ggcGFzc3dvcmQgZGVmaW5lIHRoZSBwYXR0ZXJuIHRoYXQgdGhlIHBhc3N3b3JkIG11c3QgbWF0Y2hcblx0XHR2YXIgY29uc3RyYWludHMgPSB7XG5cdCBcdFx0MDogWycnLCAnIHlvdXIgcGFzc3dvcmQgbmVlZHMgdG8gYmUgMTYgY2hhcmFjdGVycyBvciBsb25nZXInXSxcblx0IFx0XHQxOiBbJycsICcgeW91ciBwYXNzd29yZCBuZWVkcyB0byBiZSBsZXNzIHRoYW4gMTAwIGNoYXJhY3RlcnMnXSxcblx0IFx0XHQyOiBbJ1tcXCFcXEBcXCNcXCRcXCVcXF5cXCZcXCpdJywgXCIgbm8gcmVxdWlyZWQgc3ltYm9scyBmb3VuZFwiXSxcblx0IFx0XHQzOiBbJ1swLTldJywgXCIgbm8gbnVtYmVycyBmb3VuZFwiXSxcblx0IFx0XHQ0OiBbJ1thLXpdJywgXCIgbm8gbG93ZXJjYXNlIGxldHRlcnMgZm91bmRcIl0sXG5cdCBcdFx0NTogWydbQS1aXScsIFwiIG5vIHVwcGVyY2FzZSBsZXR0ZXJzIGZvdW5kXCJdLFxuXHQgXHRcdDY6IFsnW15BLXowLTlcXCFcXEBcXCNcXCRcXCVcXF5cXCZcXCpdJywgXCIgaWxsZWdhbCBjaGFyYWN0ZXJzIGZvdW5kXCJdLFxuIFx0XHR9O1xuIFx0XHRcbiBcdFx0Ly9jaGVjayBmb3IgbGVuZ3RoXG4gXHRcdGlmKHZtLm5ld1Bhc3N3b3JkKSB7XG4gXHRcdFx0aWYodm0ubmV3UGFzc3dvcmQubGVuZ3RoID4gMTUpIHsgXG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1swXS5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTsgXG4gXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1swXS5tZXQgPSB0cnVlOyBcbiBcdFx0XHR9IGVsc2Uge1xuIFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMF0uc3R5bGUgPSB7Y29sb3I6J3JlZCd9OyBcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzBdLm1ldCA9IGZhbHNlO1xuIFx0XHRcdH1cbiBcdFx0XHRpZih2bS5uZXdQYXNzd29yZC5sZW5ndGggPD0gMTAwKSB7IFxuIFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMV0uc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307IFxuIFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMV0ubWV0ID0gdHJ1ZTtcbiBcdFx0XHR9IGVsc2Uge1xuIFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMV0uc3R5bGUgPSB7Y29sb3I6J3JlZCd9OyBcbiBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzFdLm1ldCA9IGZhbHNlO1xuIFx0XHRcdH1cblxuIFx0XHRcdC8vY2hlY2sgY29uc3RyYWludHMgMi01XG4gXHRcdFx0Zm9yKGkgPSAyOyBpIDwgNjsgaSsrKSB7XG5cdCBcdFx0XHQvL2NoZWNrIGZvciByZXF1aXJlZCBzeW1ib2xzLCB1cHBlcmNhc2UsIGxvc2VyY2FzZSwgYW5kIGNoYXJhY3RlcnNcblx0IFx0XHRcdHZhciBjb25zdHJhaW50ID0gbmV3IFJlZ0V4cChjb25zdHJhaW50c1tpXVswXSwgXCJcIik7XHRcblxuXHQgXHRcdFx0Ly90ZXN0IGVhY2ggY29uc3RyYXRpbnRcblx0IFx0XHRcdGlmKGNvbnN0cmFpbnQudGVzdCh2bS5uZXdQYXNzd29yZCkpIHtcblx0IFx0XHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbaV0uc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdCBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzW2ldLm1ldCA9IHRydWU7XG5cdCBcdFx0XHR9IGVsc2Uge1xuXHQgXHRcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1tpXS5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdCBcdFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzW2ldLm1ldCA9IGZhbHNlO1xuXHQgXHRcdFx0fVxuXHQgXHRcdH1cblxuXHQgXHRcdC8vY2hlY2sgaWxsZWdhbCBjaGFyYWN0ZXJzXG5cdCBcdFx0dmFyIGNvbnN0cmFpbnQgPSBuZXcgUmVnRXhwKGNvbnN0cmFpbnRzWzZdWzBdLCBcIlwiKTtcblxuXHQgXHRcdC8vcnVuIHRoZSBjaGVja1xuXHQgXHRcdGlmKCFjb25zdHJhaW50LnRlc3Qodm0ubmV3UGFzc3dvcmQpKSB7XG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1s2XS5zdHlsZSA9IHtjb2xvcjoncmVkJ307XG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1s2XS5tZXQgPSBmYWxzZTtcblx0IFx0XHR9IGVsc2Uge1xuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNl0uc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1s2XS5tZXQgPSB0cnVlO1xuXHQgXHRcdH1cblxuXHQgXHRcdC8vaWYgYWxsIGNvbnN0cmFpbnMgbWV0LCB0aHJvdyB2YWxpZCBwYXNzIGZsYWdcblx0IFx0XHRpZiggdm0ucGFzc3dvcmRSZXF1aXJubWVudHNbMF0ubWV0ICYmXG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1sxXS5tZXQgJiZcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzJdLm1ldCAmJlxuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbM10ubWV0ICYmXG5cdCBcdFx0XHR2bS5wYXNzd29yZFJlcXVpcm5tZW50c1s0XS5tZXQgJiZcblx0IFx0XHRcdHZtLnBhc3N3b3JkUmVxdWlybm1lbnRzWzVdLm1ldCAmJlxuXHQgXHRcdFx0dm0ucGFzc3dvcmRSZXF1aXJubWVudHNbNl0ubWV0KSB7XG5cdCBcdFx0XHR2bS5zZWN1cmVQYXNzd29yZC5zZWN1cmUgPSB0cnVlXG5cdCBcdFx0fSBlbHNlIHtcblx0IFx0XHRcdHZtLnNlY3VyZVBhc3N3b3JkLnNlY3VyZSA9IGZhbHNlO1xuXHQgXHRcdH1cblxuXHQgXHRcdGlmKHZtLnNlY3VyZVBhc3N3b3JkLnNlY3VyZSkge1xuXHQgXHRcdFx0dm0uc2VjdXJlUGFzc3dvcmQuc3R5bGUgPSB7Y29sb3I6J2dyZWVuJ307XG5cdCBcdFx0fSBlbHNlIHtcblx0IFx0XHRcdHZtLnNlY3VyZVBhc3N3b3JkLnN0eWxlID0ge2NvbG9yOidyZWQnfTtcblx0IFx0XHR9XG4gXHRcdH1cbiBcdFx0XG4gXHRcdHZtLm9wZW5DcmVhdGVVc2VyQnV0dG9uKCk7XG5cdH1cblxuXHR2bS5jaGVja1VzZXJQYXNzd29yZHMgPSBmdW5jdGlvbigpIHtcblx0XHRpZih2bS51c2VyUGFzc3dvcmQpIHtcblx0XHRcdGlmKHZtLnVzZXJQYXNzd29yZC5sZW5ndGggPiAxNSkge1xuXHRcdFx0XHR2bS52YWxpZFVzZXJQYXNzd29yZC5zdHlsZSA9IHtjb2xvcjonZ3JlZW4nfTtcblx0XHRcdFx0dm0udmFsaWRVc2VyUGFzc3dvcmQudmFsaWQgPSB0cnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0udmFsaWRVc2VyUGFzc3dvcmQuc3R5bGUgPSB7Y29sb3I6J3JlZCd9O1xuXHRcdFx0XHR2bS52YWxpZFVzZXJQYXNzd29yZC52YWxpZCA9IGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdFxuXHRcdHZtLm9wZW5Vc2VyTG9naW5CdG4oKTtcblx0fVxuXG5cdHZtLm9wZW5DcmVhdGVVc2VyQnV0dG9uID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodm0udmFsaWROZXdOYW1lLnZhbGlkICYmIHZtLnZhbGlkTmV3RW1haWwudmFsaWQgJiYgdm0uc2VjdXJlUGFzc3dvcmQuc2VjdXJlKSB7XG5cdFx0XHR2bS51bmxvY2tDcmVhdGVVc2VyQnRuLmNsYXNzID0gJ2J0biBidG4tc3VjY2Vzcyc7XG5cdFx0XHR2bS51bmxvY2tDcmVhdGVVc2VyQnRuLnVzYWJsZSA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZtLnVubG9ja0NyZWF0ZVVzZXJCdG4uY2xhc3MgPSAnYnRuIGJ0bi13YXJuaW5nJztcblx0XHRcdHZtLnVubG9ja0NyZWF0ZVVzZXJCdG4udXNhYmxlID0gZmFsc2U7XHRcblx0XHR9XG5cblx0fVxuXG5cdHZtLm9wZW5Vc2VyTG9naW5CdG4gPSBmdW5jdGlvbigpIHtcblx0XHRpZih2bS52YWxpZFVzZXJFbWFpbC52YWxpZCAmJiB2bS52YWxpZFVzZXJQYXNzd29yZC52YWxpZCkge1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi5jbGFzcyA9ICdidG4gYnRuLXN1Y2Nlc3MnO1xuXHRcdFx0dm0udW5jbG9ja1VzZXJMb2dpbkJ0bi51c2FibGUgPSB0cnVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLmNsYXNzID0gJ2J0biBidG4td2FybmluZyc7XG5cdFx0XHR2bS51bmNsb2NrVXNlckxvZ2luQnRuLnVzYWJsZSA9IGZhbHNlO1x0XG5cdFx0fVxuXHR9XG5cblx0dm0udXBkYXRlID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9zZXQgdmFsdWVzXG5cdFx0dm0ubmV3TmFtZSA9ICRkb2N1bWVudC5maW5kKCcjbmV3TmFtZScpWzBdLnZhbHVlO1xuXHRcdHZtLm5ld0VtYWlsID0gJGRvY3VtZW50LmZpbmQoJyNuZXdFbWFpbCcpWzBdLnZhbHVlO1xuXHRcdHZtLnVzZXJFbWFpbCA9ICRkb2N1bWVudC5maW5kKCcjdXNlckVtYWlsJylbMF0udmFsdWU7XG5cdFx0XG5cdFx0dm0uY2hlY2tOZXdOYW1lKCk7XG5cdFx0dm0uY2hlY2tOZXdFbWFpbCgpO1xuXHRcdHZtLmNoZWNrVXNlckVtYWlsKCk7XG5cdH1cblxuXHRmdW5jdGlvbiByZWRpcmVjdChwYXRoLCB1c2VyRGF0YSkge1xuXHRcdHZhciBmdWxsUGF0aCA9IHBhdGggKyAnLycgKyBjdXJyZW50VXNlckRhdGEudWlkICsgJy8nICsgY3VycmVudFVzZXJEYXRhLnRva2VuO1xuXHRcdC8vcmVkaXJlY3Rcblx0XHQkbG9nLmluZm8oJ3JlZGlyZWN0aW5nIHRvOiAnICsgZnVsbFBhdGgpO1xuXHRcdCRsb2NhdGlvbi5wYXRoKGZ1bGxQYXRoKTtcblx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cdH1cblxuXHR2bS5jcmVhdGVOZXdVc2VyID0gZnVuY3Rpb24oKSB7XG5cdFx0JGxvZy5pbmZvKCdDcmVhdGluZyBhIG5ldyB1c2VyIGFjY291bnQgbm93IScpO1xuXG5cdFx0aWYodm0udW5sb2NrQ3JlYXRlVXNlckJ0bi51c2FibGUpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlXG5cdFx0XHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHRcdFx0cmVmLmNyZWF0ZVVzZXIoe1xuXHRcdFx0XHRlbWFpbDp2bS5uZXdFbWFpbCxcblx0XHRcdFx0cGFzc3dvcmQ6dm0ubmV3UGFzc3dvcmRcblx0XHRcdH0sZnVuY3Rpb24oZXJyb3IsIHVzZXJEYXRhKSB7XG5cdFx0XHRcdGlmKGVycm9yKSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdFcnJvciBjcmVhdGluZyB1c2VyOiAnICsgZXJyb3IpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vbG9nIHJlc3VsdHNcblx0XHRcdFx0XHQkbG9nLmluZm8odXNlckRhdGEpO1xuXG5cdFx0XHRcdFx0Ly9zYXZlIGFsbCB0aGUgZGF0YVxuXHRcdFx0XHRcdGN1cnJlbnRVc2VyRGF0YSA9IHVzZXJEYXRhO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vZ2VuZXJhdGUgdGhlIHVzZXIgcmVjb3JkXG5cdFx0XHRcdFx0dmFyIHVzZXJzUmVmID0gcmVmLmNoaWxkKCdVc2Vycy8nICsgdXNlckRhdGEudWlkKTtcblx0XHRcdFx0XHR2YXIgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xuXG5cdFx0XHRcdFx0Ly93cml0ZSBuZXcgdXNlciB0byB0aGUgZGF0YWJhc2Ugd2l0aCBiaW8gaW5mb1xuXHRcdFx0XHRcdHVzZXJzUmVmLnNldCh7IFxuXHRcdFx0XHRcdFx0J2Jpbyc6IHtcblx0XHRcdFx0XHRcdFx0J25hbWUnOiB2bS5uZXdOYW1lLFxuXHRcdFx0XHRcdFx0XHQnZW1haWwnOiB2bS5uZXdFbWFpbFxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdCdldmVudHMnOiB7XG5cdFx0XHRcdFx0XHRcdCdwZW5kaW5nJzoge1xuXHRcdFx0XHRcdFx0XHRcdCd1cGRhdGVkJzogZGF0ZVRpbWVUb1VuaXhUaW1lKGN1cnJlbnREYXRlKVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHQnaG9zdGluZyc6IHtcblx0XHRcdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0J2F0dGVuZGluZyc6IHtcblx0XHRcdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0J2NvbXBsZXRlZCc6IHtcblx0XHRcdFx0XHRcdFx0XHQndXBkYXRlZCc6IGRhdGVUaW1lVG9Vbml4VGltZShjdXJyZW50RGF0ZSlcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdFx0XHQkbG9nLmluZm8oJ0RhdGEgY291bGQgbm90IGJlIHNhdmVkOiAnICsgZXJyb3IpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0JGxvZy5pbmZvKCdEYXRhIHNhdmVkIHN1Y2Nlc3NmdWxseS4nKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHQvL2FkZCB0aGlzIHVzZXIgdG8gdGhlIGxpc3Qgb2YgcmVnaXN0ZXJlZCB1c2Vyc1xuXHRcdFx0XHRcdHJlZi5jaGlsZCgnVWlkcycpLmNoaWxkKHV0ZjhfdG9fYjY0KHZtLm5ld0VtYWlsKSkuc2V0KGN1cnJlbnRVc2VyRGF0YS51aWQsIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdFx0XHRpZihlcnJvcikgJGxvZy5pbmZvKFwiRGF0YSBjb3VsZCBub3QgYmUgc2F2ZWQuIFwiICsgZXJyb3IpO1xuXHRcdFx0XHRcdFx0ZWxzZSAkbG9nLmluZm8oXCJ1aWQgY3JlYXRlZCBzdWNlc3NmdWxseS5cIik7XG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHQvL3JlZGlyZWN0IHRvIFVzZXJJbmZvcm1hdGlvblxuXHRcdFx0XHRcdHJlZGlyZWN0KCcvdXNlckluZm9ybWF0aW9uJywgY3VycmVudFVzZXJEYXRhKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHR9XG5cdH1cblxuXHR2bS5sb2dpblJlZ2lzdGVyZWRVc2VyID0gZnVuY3Rpb24oKSB7XG5cblx0XHRpZih2bS51bmNsb2NrVXNlckxvZ2luQnRuLnVzYWJsZSkge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVcblx0XHRcdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXG5cdFx0XHQvL2F1dGhlbnRpY2F0ZSB0aGUgdXNlclxuXHRcdFx0cmVmLmF1dGhXaXRoUGFzc3dvcmQoe1xuXHRcdFx0XHRlbWFpbDogdm0udXNlckVtYWlsLFxuXHRcdFx0XHRwYXNzd29yZDogdm0udXNlclBhc3N3b3JkXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvciwgYXV0aERhdGEpIHtcblx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ0Vycm9yIExvZ2dpbmcgSW46ICcgKyBlcnJvcik7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0JGxvZy5pbmZvKCdMb2dnZWQgSW4gc3VjY2Vzc2Z1bGx5OiAnICsgYXV0aERhdGEudWlkKTtcblx0XHRcdFx0XHQkbG9nLmluZm8oYXV0aERhdGEpO1xuXHRcdFx0XHRcdC8vc2F2ZSBhbGwgdGhlIGRhdGFcblx0XHRcdFx0XHRjdXJyZW50VXNlckRhdGEgPSBhdXRoRGF0YTtcblxuXHRcdFx0XHRcdC8vbG9hZCB1c2VyIGJpb1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vbG9hZCB1c2VyIGV2ZW50c1xuXG5cdFx0XHRcdFx0Ly9yZWRpcmVjdFxuXHRcdFx0XHRcdHJlZGlyZWN0KCcvdXNlckluZm9ybWF0aW9uJywgY3VycmVudFVzZXJEYXRhKTtcblx0XHRcdFx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0fVxuXG5cdH1cblxuXHR2bS5hbGVydE1lID0gZnVuY3Rpb24oKSB7XG5cdFx0YWxlcnQoJ3RoaXMgaXMgd29ya2luZyEgYW4gYWxlcnQhJyk7XG5cdH1cblxuXHR2bS5vblJlc2l6ZUZ1bmN0aW9uID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGlucHV0VGV4dCA9IGFuZ3VsYXIuZWxlbWVudCgnLmlucHV0VGV4dCcpO1xuXHRcdGlmKCR3aW5kb3cub3V0ZXJXaWR0aCA+ICR3aW5kb3cub3V0ZXJIZWlnaHQpIHtcblx0XHRcdGlucHV0VGV4dC5jc3MoJ2ZvbnQtc2l6ZScsICcyZW0nKTtcblx0XHRcdCRsb2cuaW5mbygnbWFraW5nIGJpZ2dlcicpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpbnB1dFRleHQuY3NzKCdmb250LXNpemUnLCAnMS4yZW0nKTtcblx0XHR9XG5cdH1cblxuXHQvL2V2ZW50IGxpc3RlbmVyc1xuXHRpZiAoJ2FkZEV2ZW50TGlzdGVuZXInIGluICRkb2N1bWVudCkge1xuXHQgICAgJGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHtcblx0ICAgIFx0JGxvZy5pbmZvKCdhZGRpbmcgRmFzdENsaWNrJyk7XG5cdCAgICAgICAgRmFzdENsaWNrLmF0dGFjaCgkZG9jdW1lbnQuYm9keSk7XG5cdCAgICB9LCBmYWxzZSk7XG5cdH1cblxuXHRhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdykuYmluZCgncmVzaXplJywgZnVuY3Rpb24oKSB7XG5cdFx0dm0ub25SZXNpemVGdW5jdGlvbigpO1xuXHRcdC8vJHNjb3BlLiRhcHBseSgpO1xuXHR9KTtcblxuXHRhbmd1bGFyLmVsZW1lbnQoJGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcblx0XHRpZigkd2luZG93Lm91dGVyV2lkdGggPCA2MDApIHtcblx0XHRcdHZtLm9uUmVzaXplRnVuY3Rpb24oKTtcblx0XHRcdC8vJHNjb3BlLiRhcHBseSgpO1xuXHRcdH1cblx0fSlcblxufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29udHJvbGxlcignTWFpbkNvbnRyb2xsZXInLCBNYWluQ29udHJvbGxlcik7XG5cbk1haW5Db250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2cnLCAnJGxvY2F0aW9uJywgJyRkb2N1bWVudCddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIE1haW5Db250cm9sbGVyKCRsb2csICRsb2NhdGlvbiwgJGRvY3VtZW50KSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdHZhciBmYlVSTCA9ICdodHRwczovL21lZXR1cHBsYW5uZXIuZmlyZWJhc2Vpby5jb20vJztcblx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7IFxuXG5cdHZtLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xuXHRcdGFsZXJ0KCdsb2dnaW5nIHlvdSBvdXQhJyk7XG5cdFx0cmVmLnVuYXV0aCgpO1xuXHRcdCRsb2NhdGlvbi5wYXRoKCcvJyk7XG5cdH07XG5cblx0aWYgKCdhZGRFdmVudExpc3RlbmVyJyBpbiAkZG9jdW1lbnQpIHtcbiAgICAkZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkge1xuICAgIFx0JGxvZy5pbmZvKCdhZGRpbmcgRmFzdENsaWNrJyk7XG4gICAgICAgIEZhc3RDbGljay5hdHRhY2goJGRvY3VtZW50LmJvZHkpO1xuICAgIH0sIGZhbHNlKTtcbn1cbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ3RvcE1lbnVDb250cm9sbGVyJywgdG9wTWVudUNvbnRyb2xsZXIpO1xuXG50b3BNZW51Q29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZycsICckbG9jYXRpb24nLCAnJGRvY3VtZW50JywgJyR3aW5kb3cnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiB0b3BNZW51Q29udHJvbGxlcigkc2NvcGUsICRsb2csICRsb2NhdGlvbiwgJGRvY3VtZW50LCAkd2luZG93KSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdHZhciBmYlVSTCA9ICdodHRwczovL21lZXR1cHBsYW5uZXIuZmlyZWJhc2Vpby5jb20vJztcblx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7XG5cblx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0dm0ubG9nZ2VkSW4gPSBmYWxzZVxuXG5cdC8vc3R5bGVzIHZhcmlhYmxlc1xuXHRcblx0Ly9ldmVudCBsaXN0ZW5lcnNcblx0aWYgKCdhZGRFdmVudExpc3RlbmVyJyBpbiAkZG9jdW1lbnQpIHtcblx0ICAgICRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XG5cdCAgICBcdCRsb2cuaW5mbygnYWRkaW5nIEZhc3RDbGljaycpO1xuXHQgICAgICAgIEZhc3RDbGljay5hdHRhY2goJGRvY3VtZW50LmJvZHkpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHR9XG5cblx0YW5ndWxhci5lbGVtZW50KCR3aW5kb3cpLmJpbmQoJ3Jlc2l6ZScsIGZ1bmN0aW9uKCkge1xuXHRcdHZtLm9uUmVzaXplRnVuY3Rpb24oKTtcblx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cdH0pO1xuXG5cdGFuZ3VsYXIuZWxlbWVudCgkZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXHRcdGlmKCR3aW5kb3cub3V0ZXJXaWR0aCA8IDYwMCkge1xuXHRcdFx0dm0ub25SZXNpemVGdW5jdGlvbigpO1xuXHRcdFx0JHNjb3BlLiRhcHBseSgpO1xuXHRcdH1cblx0fSlcblx0Ly9keW5hbWljYWxseSBzZXQgaW5wdXQgd2lkdGhcblxuXG5cdC8vIENyZWF0ZSBhIGNhbGxiYWNrIHdoaWNoIGxvZ3MgdGhlIGN1cnJlbnQgYXV0aCBzdGF0ZVxuXHRmdW5jdGlvbiBpbml0KCkge1xuXHRcdHZtLm9uUmVzaXplRnVuY3Rpb24oKTtcblx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cdH1cblxuXHRmdW5jdGlvbiBhdXRoRGF0YUNhbGxiYWNrKGF1dGhEYXRhKSB7XG5cdCAgaWYgKGF1dGhEYXRhKSB7XG5cdCAgICAkbG9nLmluZm8oXCJVc2VyIFwiICsgYXV0aERhdGEudWlkICsgXCIgaXMgbG9nZ2VkIGluIHdpdGggXCIgKyBhdXRoRGF0YS5wcm92aWRlcik7XG5cdCAgICB2bS5sb2dnZWRJbiA9IHRydWU7XG5cdCAgfSBlbHNlIHtcblx0ICAgICRsb2cuaW5mbyhcIlVzZXIgaXMgbG9nZ2VkIG91dFwiKTtcblx0ICAgIHZtLmxvZ2dlZEluID0gZmFsc2U7XG5cdCAgfVxuXHR9XG5cblx0ZnVuY3Rpb24gcmVkaXJlY3QocGF0aCwgdXNlckRhdGEpIHtcblx0XHR2YXIgZnVsbFBhdGggPSBwYXRoICsgJy8nICsgdXNlckRhdGEudWlkICsgJy8nICsgdXNlckRhdGEudG9rZW47XG5cdFx0Ly9yZWRpcmVjdFxuXHRcdCRsb2cuaW5mbygncmVkaXJlY3RpbmcgdG86ICcgKyBmdWxsUGF0aCk7XG5cdFx0JGxvY2F0aW9uLnBhdGgoZnVsbFBhdGgpO1xuXHRcdC8vJHNjb3BlLiRhcHBseSgpO1xuXHR9XG5cblx0Ly92bSBhY2Nlc3NpYmxlIG1ldGhvZHNcblx0dm0ubG9nb3V0ID0gZnVuY3Rpb24oKSB7XG5cdFx0JGxvZy5pbmZvKCdsb2dnaW5nIG91dCEnKTtcblx0XHR2bS5sb2dnZWRJbiA9IGZhbHNlO1xuXHRcdHJlZi51bmF1dGgoKTtcblx0XHRyZWRpcmVjdCgnLycsIHt1aWQ6JycsIHRva2VuOicnfSk7XG5cdH1cblxuXHR2bS5uYXZCYXJMb2dpblJlZ2lzdGVyZWRVc2VyID0gZnVuY3Rpb24oKSB7XG5cdFx0JGxvZy5pbmZvKCdsYXVuY2hpbmcgbG9naW4nKTtcblx0XHRpZih0cnVlKSB7XG5cdFx0Ly9pZih2bS51bmNsb2NrVXNlckxvZ2luQnRuLnVzYWJsZSkge1xuXHRcdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVcblx0XHRcdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXG5cdFx0XHQvL2F1dGhlbnRpY2F0ZSB0aGUgdXNlclxuXHRcdFx0cmVmLmF1dGhXaXRoUGFzc3dvcmQoe1xuXHRcdFx0XHRlbWFpbDogdm0ubmF2YmFyVXNlckVtYWlsLFxuXHRcdFx0XHRwYXNzd29yZDogdm0ubmF2YmFyVXNlclBhc3Ncblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yLCBhdXRoRGF0YSkge1xuXHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdCRsb2cuaW5mbygnRXJyb3IgTG9nZ2luZyBJbjogJyArIGVycm9yKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkbG9nLmluZm8oJ0xvZ2dlZCBJbiBzdWNjZXNzZnVsbHk6ICcgKyBhdXRoRGF0YS51aWQpO1xuXHRcdFx0XHRcdCRsb2cuaW5mbyhhdXRoRGF0YSk7XG5cdFx0XHRcdFx0Ly9zYXZlIGFsbCB0aGUgZGF0YVxuXG5cdFx0XHRcdFx0Ly9sb2FkIHVzZXIgYmlvXG5cdFx0XHRcdFx0Ly9sb2FkIHVzZXIgZXZlbnRzXG5cblx0XHRcdFx0XHQvL3JlZGlyZWN0XG5cdFx0XHRcdFx0cmVkaXJlY3QoJy91c2VySW5mb3JtYXRpb24nLCBhdXRoRGF0YSk7XG5cdFx0XHRcdFx0JHNjb3BlLiRhcHBseSgpO1xuXG5cdFx0XHRcdFx0Ly9jbGljayBjbG9zZWQgdGhlIG5hdmJhclxuXHRcdFx0XHRcdGFuZ3VsYXIuZWxlbWVudCgnLm5hdmJhci10b2dnbGUnKS5jbGljaygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXG5cblx0XHR9XG5cblx0fVxuXG5cdHZtLm9uUmVzaXplRnVuY3Rpb24gPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgbmF2YmFySW5wdXRzID0gYW5ndWxhci5lbGVtZW50KCcubmF2YmFySW5wdXRzJyk7XG5cdFx0bmF2YmFySW5wdXRzLmNzcygnd2lkdGgnLCAoJHdpbmRvdy5vdXRlcldpZHRoIC0gMjYpICsgJ3B4Jyk7XG5cdH1cblxuXHQvLyBSZWdpc3RlciB0aGUgY2FsbGJhY2sgdG8gYmUgZmlyZWQgZXZlcnkgdGltZSBhdXRoIHN0YXRlIGNoYW5nZXNcblx0cmVmLm9uQXV0aChhdXRoRGF0YUNhbGxiYWNrKTtcbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ1VzZXJFdmVudHNDb250cm9sbGVyJywgVXNlckV2ZW50c0NvbnRyb2xsZXIpO1xuXG5Vc2VyRXZlbnRzQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZycsICckbG9jYXRpb24nLCAnJHJvdXRlUGFyYW1zJywgJyRmaXJlYmFzZU9iamVjdCddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIFVzZXJFdmVudHNDb250cm9sbGVyKCRzY29wZSwgJGxvZywgJGxvY2F0aW9uLCAkcm91dGVQYXJhbXMsICRmaXJlYmFzZU9iamVjdCkge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHR2YXIgZmJVUkwgPSAnaHR0cHM6Ly9tZWV0dXBwbGFubmVyLmZpcmViYXNlaW8uY29tLyc7XG5cdHZhciByZWYgPSBuZXcgRmlyZWJhc2UoZmJVUkwpO1xuXHR2YXIgdXNlckV2ZW50cyA9IHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS5jaGlsZCgnZXZlbnRzJyk7XG5cdHZhciBjdXJyZW50VXNlckJpbyA9IHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS5jaGlsZCgnYmlvJyk7XG5cdHZhciB1c2VyRXZlbnRzU25hcHNob3Q7XG5cblx0Ly9iaW5kaW5nIGltcG9ydGFudCB2YXJpYWJsZXNcblx0dm0uZXZlbnRzID0gJGZpcmViYXNlT2JqZWN0KHVzZXJFdmVudHMpO1xuXG5cdHZtLnNob3dEZWNsaW5lID0gZmFsc2U7XG5cdFxuXHRjdXJyZW50VXNlckJpby5jaGlsZCgnbmFtZScpLm9uKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0dm0uY3VycmVudFVzZXJOYW1lID0gc25hcHNob3QudmFsKCk7XG5cdFx0JGxvZy5pbmZvKCdnb3QgdGhlIHVzZXIgbmFtZScpO1xuXHRcdCRzY29wZS4kYXBwbHkoKTtcblx0fSwgZnVuY3Rpb24oZXJyb3JPYmplY3QpIHtcblx0XHQkbG9nLmluZm8oXCJUaGUgcmVhZCBmYWlsZWQ6IFwiICsgZXJyb3JPYmplY3QuY29kZSk7XG5cdH0pO1xuXG5cdC8vZGVjbGFyZSBsb2NhbCBtZXRob2RzXG5cdGZ1bmN0aW9uIHVuaXhUaW1lVG9EYXRlVGltZSh1bml4VGltZSkge1xuXHRcdHJldHVybiBuZXcgRGF0ZShwYXJzZUludCh1bml4VGltZSkpO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIGRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fTtcblxuXHRmdW5jdGlvbiBnZW5lcmF0ZUV2ZW50SUQoZGF0ZSwgbm9PZkV2ZW50c0FscmVhZHkpIHtcblx0XHRyZXR1cm4gKGRhdGUgKiAxMCkgKyBub09mRXZlbnRzQWxyZWFkeTtcblx0fVxuXG5cdC8vZGVjbGFyZSB2aWV3IG1ldGhvZHNcblx0ZnVuY3Rpb24gZXZlbnRSZWRpcmVjdChwYXRoLCBldmVudElELCBob3N0SWQpIHtcblx0XHR2YXIgZnVsbFBhdGggPSBwYXRoICsgJy8nICsgZXZlbnRJRCArICcvJyArIGhvc3RJZCArICcvJysgJHJvdXRlUGFyYW1zLnVpZCArICcvJyArICRyb3V0ZVBhcmFtcy50b2tlbjtcblx0XHQvL3JlZGlyZWN0XG5cdFx0JGxvZy5pbmZvKCdyZWRpcmVjdGluZyB0bzogJyArIGZ1bGxQYXRoKTtcblx0XHQkbG9jYXRpb24ucGF0aChmdWxsUGF0aCk7XG5cdH1cblxuXHR2bS5ldmVudHNBcmVCZWluZ0hvc3RlZCA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBldmVudEZvdW5kID0gZmFsc2U7XG5cdFx0Zm9yKGVsZW1lbnQgaW4gdm0uZXZlbnRzLmhvc3RpbmcpIHtcblx0XHRcdGlmKGVsZW1lbnQgIT0gJ3VwZGF0ZWQnKXtcblx0XHRcdFx0ZXZlbnRGb3VuZCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBldmVudEZvdW5kO1xuXHR9XG5cblx0dm0uZXZlbnRJbnZpdGF0aW9uc1BlbmRpbmcgPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgZXZlbnRGb3VuZCA9IGZhbHNlO1xuXHRcdGZvcihlbGVtZW50IGluIHZtLmV2ZW50cy5wZW5kaW5nKSB7XG5cdFx0XHRpZihlbGVtZW50ICE9ICd1cGRhdGVkJyl7XG5cdFx0XHRcdGV2ZW50Rm91bmQgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gZXZlbnRGb3VuZDtcblx0fVxuXG5cdHZtLmF0dGVuZGluZ0V2ZW50cyA9IGZ1bmN0aW9uKGd1ZXN0TGlzdCkge1xuXHRcdHZhciBldmVudEZvdW5kID0gZmFsc2U7XG5cdFx0Zm9yKGVsZW1lbnQgaW4gdm0uZXZlbnRzLmF0dGVuZGluZykge1xuXHRcdFx0aWYoZWxlbWVudCAhPSAndXBkYXRlZCcpe1xuXHRcdFx0XHRldmVudEZvdW5kID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGV2ZW50Rm91bmQ7XG5cdH1cblxuXHR2bS5wZXJjZW50UlNWUGVkID0gZnVuY3Rpb24oZ3Vlc3RMaXN0KSB7XHRcdFxuXHRcdGlmKGd1ZXN0TGlzdCkge1xuXHRcdFx0cmV0dXJuICh2bS50b3RhbEF0dGVuZGluZyhndWVzdExpc3QpIC8gdm0udG90YWxJbnZpdGVkKGd1ZXN0TGlzdCkpICogMTAwO1xuXHRcdH1cblx0XHRlbHNlIHJldHVybiAwO1xuXHR9XG5cblx0dm0udG90YWxBdHRlbmRpbmcgPSBmdW5jdGlvbihndWVzdExpc3QpIHtcblx0XHRpZihndWVzdExpc3QpIHtcblx0XHRcdHZhciBhdHRlbmRpbmcgPSAwO1xuXHRcdFx0YW5ndWxhci5mb3JFYWNoKGd1ZXN0TGlzdCwgZnVuY3Rpb24oZ3Vlc3QsIGlkKSB7XG5cdFx0XHRcdGlmKGd1ZXN0LmF0dGVuZGluZyA9PSB0cnVlKSBhdHRlbmRpbmcrKztcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIGF0dGVuZGluZztcblx0XHR9XG5cdFx0ZWxzZSByZXR1cm4gMDtcblx0fVxuXG5cdHZtLnRvdGFsSW52aXRlZCA9IGZ1bmN0aW9uKGd1ZXN0TGlzdCkge1xuXHRcdGlmKGd1ZXN0TGlzdCkge1xuXHRcdFx0dmFyIGludml0ZWQgPSAwO1xuXHRcdFx0YW5ndWxhci5mb3JFYWNoKGd1ZXN0TGlzdCwgZnVuY3Rpb24oZ3Vlc3QsIGlkKSB7XG5cdFx0XHRcdGludml0ZWQrKztcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIGludml0ZWQ7XG5cdFx0fVxuXHRcdGVsc2UgcmV0dXJuIDA7XG5cdH1cblxuXHR2bS5hY2NlcHRFdmVudEludml0YXRpb24gPSBmdW5jdGlvbihldmVudCkge1xuXHRcdC8qXG5cdFx0JGxvZy5pbmZvKGV2ZW50Lmhvc3QpO1xuXHRcdCRsb2cuaW5mbyhldmVudC5pZCk7XG5cdFx0Ly91cGRhdGUgaG9zdHMnIGxpc3RzXG5cdFx0cmVmLmNoaWxkKCdVc2VycycpLmNoaWxkKGV2ZW50Lmhvc3QpLmNoaWxkKCdldmVudHMnKS5jaGlsZCgnaG9zdGluZycpLmNoaWxkKGV2ZW50LmlkKS5jaGlsZCgnZ3Vlc3RMaXN0JykuY2hpbGQoJHJvdXRlUGFyYW1zLnVpZCkudXBkYXRlKHtcblx0XHRcdGF0dGVuZGluZzogdHJ1ZSxcblx0XHRcdHN0YXR1czogJ2F0dG5kbmcnXG5cdFx0fSk7XG5cblx0XHQvL3VwZGF0ZSBndWVzdCdzIGxpc3RzXG5cdFx0Ly9hZGQgdG8gdGhlIGF0dGVuZGluZyBsaXN0IC0gb24gdGhlIHNlcnZlclxuXHRcdHVzZXJFdmVudHMuY2hpbGQoJ2F0dGVuZGluZycpLmNoaWxkKGV2ZW50Lmhvc3QpLmNoaWxkKGV2ZW50LmlkKS5zZXQoe1xuXHRcdFx0aWQ6IGV2ZW50LmlkLFxuXHRcdFx0aG9zdDogZXZlbnQuaG9zdCxcblx0XHRcdGV2ZW50VGltZXM6IHtcblx0XHRcdFx0c3RhcnQ6IHZtLmV2ZW50cy5wZW5kaW5nW2V2ZW50Lmhvc3RdW2V2ZW50LmlkXS5ldmVudFRpbWVzLnN0YXJ0LFxuXHRcdFx0XHRlbmQ6IHZtLmV2ZW50cy5wZW5kaW5nW2V2ZW50Lmhvc3RdW2V2ZW50LmlkXS5ldmVudFRpbWVzLmVuZFxuXHRcdFx0fSxcblx0XHRcdG5hbWU6IHZtLmV2ZW50cy5wZW5kaW5nW2V2ZW50Lmhvc3RdW2V2ZW50LmlkXS5uYW1lXG5cdFx0fSk7XG5cdFx0Ly9hZGQgdG8gdGhlIGF0dGVuZGluZyBsaXN0IC0gaW4gdGhlIGJyb3dzZXJcblx0XHR2bS5ldmVudHMuYXR0ZW5kaW5nW2V2ZW50Lmhvc3RdW2V2ZW50LmlkXSA9IHtcblx0XHRcdGlkOiBldmVudC5pZCxcblx0XHRcdGhvc3Q6IGV2ZW50Lmhvc3QsXG5cdFx0XHRldmVudFRpbWVzOiB7XG5cdFx0XHRcdHN0YXJ0OiB2bS5ldmVudHMucGVuZGluZ1tldmVudC5ob3N0XVtldmVudC5pZF0uZXZlbnRUaW1lcy5zdGFydCxcblx0XHRcdFx0ZW5kOiB2bS5ldmVudHMucGVuZGluZ1tldmVudC5ob3N0XVtldmVudC5pZF0uZXZlbnRUaW1lcy5lbmRcblx0XHRcdH0sXG5cdFx0XHRuYW1lOiB2bS5ldmVudHMucGVuZGluZ1tldmVudC5ob3N0XVtldmVudC5pZF0ubmFtZVxuXHRcdH07XG5cblx0XHQvL3JlbW92ZSBmcm9tIHRoZSBwZW5kaW5nIGxpc3QgLSBvbiB0aGUgc2VydmVyXG5cdFx0dXNlckV2ZW50cy5jaGlsZCgncGVuZGluZycpLmNoaWxkKGV2ZW50Lmhvc3QpLmNoaWxkKGV2ZW50LmlkKS5yZW1vdmUoKTtcblx0XHQvL3JlbW92ZSBmcm9tIHRoZSBwZW5kaW5nIGxpc3QgLSBpbiB0aGUgYnJvd3NlclxuXHRcdHZtLmV2ZW50cy5wZW5kaW5nW2V2ZW50Lmhvc3RdW2V2ZW50LmlkXSA9IHt9O1xuXHRcdCovXG5cdH1cblxuXHR2bS5yZWRpcmVjdFRvSG9zdGVkRXZlbnQgPSBmdW5jdGlvbihldmVudElEKSB7XG5cdFx0JGxvZy5pbmZvKCd5b3VcXCdyZSBhY2Nlc3NpbmcgZXZlbnQgJyArIGV2ZW50SUQpO1xuXG5cdFx0Ly9yZWRpcmVjdCB0byB0aGUgZXZlbnRcblx0XHRldmVudFJlZGlyZWN0KCcvZXZlbnQnLCBldmVudElELCAkcm91dGVQYXJhbXMudWlkKTtcblx0fVxuXG5cdHZtLnJlZGlyZWN0VG8zcmRQYXJ0eUV2ZW50ID0gZnVuY3Rpb24oZXZlbnQsIGludml0ZVN0YXR1cykge1xuXHRcdCRsb2cuaW5mbyhldmVudCk7XG5cblx0XHQvL2dldHRpbmcgdGhlIGhvc3QncyBJZFxuXHRcdGlmKGludml0ZVN0YXR1cyA9PSAncGVuZGluZycpIHtcblx0XHRcdCRsb2cuaW5mbygnYWNjZXNzaW5nIGZyb20gYSBwZW5kaW5nIGludml0YXRpb24nKTtcblx0XHRcdCRsb2cuaW5mbyhldmVudCk7XG5cdFx0XHRldmVudFJlZGlyZWN0KCcvZXZlbnQnLCBldmVudC5pZCwgZXZlbnQuaG9zdCk7XG5cblx0XHR9IGVsc2UgaWYoaW52aXRlU3RhdHVzID09ICdhdHRlbmRpbmcnKSB7XG5cdFx0XHQkbG9nLmluZm8oJ2FjY2Vzc2luZyBmcm9tIGFuIHJzdnBlZCBpbnZpdGF0aW9uJyk7XG5cdFx0XHRldmVudFJlZGlyZWN0KCcvZXZlbnQnLCBldmVudC5pZCwgZXZlbnQuaG9zdCk7XG5cdFx0fVxuXG5cdFx0Ly9yZWRpcmVjdGluZyB0byB0aGUgZXZlbnRcblxuXHR9XG5cblx0dm0uY3JlYXRlTmV3RXZlbnQgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9nLmluZm8oJ3lvdVxcJ3JlIGNyZWF0aW5nIGEgbmV3IGV2ZW50IScpO1xuXG5cdFx0Ly9kZWZpbmUgdGhlIGV2ZW50SURcblx0XHR2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7IFxuXHRcdFx0aWYodm0uZXZlbnRzLmhvc3RpbmcpIG5vT2ZFdmVudHNBbHJlYWR5ID0gT2JqZWN0LmtleXModm0uZXZlbnRzLmhvc3RpbmcpLmxlbmd0aDtcblx0XHRcdGVsc2Ugbm9PZkV2ZW50c0FscmVhZHkgPSAwO1xuXHRcdHZhciBldmVudElEID0gZ2VuZXJhdGVFdmVudElEKGRhdGVUaW1lVG9Vbml4VGltZShkYXRlKSwgbm9PZkV2ZW50c0FscmVhZHkpO1xuXG5cdFx0Ly9jcmVhdGUgZXZlbnQgbW9kZWwgdG8gc3RhcnQgd2l0aFxuXHRcdC8vJGxvZy5pbmZvKHZtLmV2ZW50c1snaG9zdGluZyddKTtcblx0XHR2bS5ldmVudHMuaG9zdGluZ1tldmVudElEXSA9IHtcblx0XHRcdGlkOiBldmVudElELFxuXHRcdFx0ZXZlbnRUaW1lczoge1xuXHRcdFx0XHRzdGFydDogZGF0ZVRpbWVUb1VuaXhUaW1lKGRhdGUpLFxuXHRcdFx0XHRlbmQ6IGRhdGVUaW1lVG9Vbml4VGltZShkYXRlKVxuXHRcdFx0fSxcblx0XHRcdGhvc3Q6IHsgXG5cdFx0XHRcdGlkOiAkcm91dGVQYXJhbXMudWlkLFxuXHRcdFx0XHRuYW1lOiB2bS5jdXJyZW50VXNlck5hbWVcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Ly9kZWxldGUgdGhlICd1cGRhdGVkJyBmaWVsZFxuXHRcdGlmKHZtLmV2ZW50cy5ob3N0aW5nLnVwZGF0ZWQgPT0gJycgfHwgdm0uZXZlbnRzLmhvc3RpbmcudXBkYXRlZCkge1xuXHRcdFx0JGxvZy5pbmZvKCdkZWxldGluZyB0aGUgdXBkYXRlZCBmaWVsZCcpO1xuXHRcdFx0ZGVsZXRlIHZtLmV2ZW50cy5ob3N0aW5nLnVwZGF0ZWQ7XG5cdFx0fVxuXHRcdC8vc2F2ZSB0aGUgbmV3IGV2ZW50XG5cdFx0dm0uZXZlbnRzLiRzYXZlKCkudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdCRsb2cuaW5mbygnUHJvZmlsZSBzYXZlZCEnKTtcblx0XHRcdCRsb2cuaW5mbyh2bS5ldmVudHMuaG9zdGluZ1tldmVudElEXSk7XG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdCRsb2cuaW5mbygnRXJyb3IhJyk7XG5cdFx0fSk7XG5cblx0XHQvL3JlZGlyZWN0IHRvIHRoZSBuZXcgRXZlbnQgUGFnZVxuXHRcdGV2ZW50UmVkaXJlY3QoJy9ldmVudCcsIGV2ZW50SUQsICRyb3V0ZVBhcmFtcy51aWQpO1xuXHR9XG5cblx0Ly9leGVjdXRlIHNjcmlwdHNcblx0JGxvZy5pbmZvKCdpbnRvIHRoZSB1c2VyIEV2ZW50cyBjb250cm9sbGVyJyk7XG5cdCRsb2cuaW5mbyh2bS5ldmVudHMpO1xuXG59XG5cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ1VzZXJJbmZvcm1hdGlvbkNvbnRyb2xsZXInLCBVc2VySW5mb3JtYXRpb25Db250cm9sbGVyKTtcblxuVXNlckluZm9ybWF0aW9uQ29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJywgJyRsb2NhdGlvbicsICckcm91dGVQYXJhbXMnLCAnJGZpcmViYXNlT2JqZWN0J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gVXNlckluZm9ybWF0aW9uQ29udHJvbGxlcigkbG9nLCAkbG9jYXRpb24sICRyb3V0ZVBhcmFtcywgJGZpcmViYXNlT2JqZWN0KSB7XG5cdHZhciB2bSA9IHRoaXM7XG5cdHZhciBmYlVSTCA9ICdodHRwczovL21lZXR1cHBsYW5uZXIuZmlyZWJhc2Vpby5jb20vJztcblx0dmFyIHJlZiA9IG5ldyBGaXJlYmFzZShmYlVSTCk7IFxuXHR2YXIgdXNlckJpbyA9IHJlZi5jaGlsZCgnVXNlcnMnKS5jaGlsZCgkcm91dGVQYXJhbXMudWlkKS5jaGlsZCgnYmlvJyk7XG5cdFxuXHR2bS51c2VyID0gJGZpcmViYXNlT2JqZWN0KHVzZXJCaW8pO1xuXG5cdGFjdGl2YXRlKCk7XG5cblx0Ly9sb2NhbCB2YXJpYWJsZXNcblx0dm0ucHJvY2VlZEJ0biA9ICdidG4gYnRuLXByaW1hcnknO1xuXHR2bS5idG5Nc3NnID0gJ01vdmUgT24uLi4nO1xuXHR2bS5kYXRhVG9TYXZlID0gZmFsc2U7XG5cdHZtLmlzRGF0YSA9IGZhbHNlO1xuXHQvL2luaXRpYWxpemUgdGVtcCBiaXJ0aGRheVxuXHR2bS51c2VyLiRsb2FkZWQoKS50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdGlmKHZtLnVzZXIuYmlydGhkYXkpIHtcblx0XHRcdHZtLnRlbXBCaXJ0aGRheSA9IHVuaXhUaW1lVG9EYXRlVGltZSh2bS51c2VyLmJpcnRoZGF5KTtcblx0XHR9IGVsc2Ugdm0udGVtcEJpcnRoZGF5ID0gbmV3IERhdGUoKTtcblx0fSk7XG5cblx0Ly9sb2NhbCBtZXRob2RzXG5cdGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuXHRcdC8vd2hhdCBoYXBwZW5zIHdoZW4gdGhlIGNvbnRyb2xsZXIgbGF1bmNoZXNcblx0fVxuXG5cdGZ1bmN0aW9uIHVuaXhUaW1lVG9EYXRlVGltZSh1bml4VGltZSkge1xuXHRcdHJldHVybiBuZXcgRGF0ZShwYXJzZUludCh1bml4VGltZSkpO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIGRhdGVUaW1lVG9Vbml4VGltZShkYXRlVGltZSkge1xuXHRcdHJldHVybiBEYXRlLnBhcnNlKGRhdGVUaW1lKTtcblx0fTtcblxuXHRmdW5jdGlvbiByZWRpcmVjdChwYXRoKSB7XG5cdFx0dmFyIGZ1bGxQYXRoID0gcGF0aCArICcvJyArICRyb3V0ZVBhcmFtcy51aWQgKyAnLycgKyAkcm91dGVQYXJhbXMudG9rZW47XG5cdFx0Ly9yZWRpcmVjdFxuXHRcdCRsb2cuaW5mbygncmVkaXJlY3RpbmcgdG86ICcgKyBmdWxsUGF0aCk7XG5cdFx0JGxvY2F0aW9uLnBhdGgoZnVsbFBhdGgpO1xuXHR9O1xuXG5cdC8vdmlldyBhY2Nlc3NpYmxlIG1ldGhvZHNcblx0dm0uY2hlY2tWYWx1ZXMgPSBmdW5jdGlvbigpIHtcblx0XHRpZiggIShhbmd1bGFyLmlzVW5kZWZpbmVkKHZtLnVzZXIuZW1wbG95ZXIpIHx8IHZtLnVzZXIuZW1wbG95ZXIgPT09ICcnKSB8fCBcblx0XHRcdCEoYW5ndWxhci5pc1VuZGVmaW5lZCh2bS51c2VyLmpvYlRpdGxlKSB8fCB2bS51c2VyLmpvYlRpdGxlID09PSAnJykgfHwgXG5cdFx0XHQhKGFuZ3VsYXIuaXNVbmRlZmluZWQodm0udXNlci5iaXJ0aGRheSkgfHwgdm0udXNlci5iaXJ0aGRheSA9PT0gJycpKSBcblx0XHR7XG5cdFx0XHR2bS5kYXRhVG9TYXZlID0gdHJ1ZTtcblx0XHRcdHZtLnByb2NlZWRCdG4gPSAnYnRuIGJ0bi1zdWNjZXNzJztcblx0XHRcdHZtLmJ0bk1zc2cgPSAnU2F2ZSAmIENvbnRpbnVlJztcblx0XHR9IGVsc2Uge1xuXHRcdFx0dm0uZGF0YVRvU2F2ZSA9IGZhbHNlO1xuXHRcdFx0dm0ucHJvY2VlZEJ0biA9ICdidG4gYnRuLXByaW1hcnknO1xuXHRcdFx0dm0uYnRuTXNzZyA9ICdNb3ZlIE9uLi4uJztcdFxuXHRcdH1cblxuXHR9XG5cblx0dm0uc2F2ZUFuZE1vdmVPbiA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vY29udmVydCB0ZW1wIGJpcnRoZGF5IHRvIHNhdmFibGUgZm9ybWF0XG5cdFx0dm0udXNlci5iaXJ0aGRheSA9IGRhdGVUaW1lVG9Vbml4VGltZSh2bS50ZW1wQmlydGhkYXkpO1xuXHRcdC8vc2F2ZSBwYWdlIGRhdGFcblx0XHR2bS51c2VyLiRzYXZlKCk7XG5cdFx0Ly9yZWRpcmVjdFxuXHRcdHJlZGlyZWN0KCcvdXNlckV2ZW50cycpO1xuXHR9XG5cbn1cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcpXG4gICAgLmZhY3RvcnkoJ2F1dGhTZXJ2aWNlJywgYXV0aFNlcnZpY2UpO1xuXG5hdXRoU2VydmljZS4kaW5qZWN0ID0gWyckbG9nJywgJyRxJywgJyRsb2NhdGlvbiddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGF1dGhTZXJ2aWNlKCRsb2csICRxLCAkbG9jYXRpb24pIHtcblx0dmFyIGZiVVJMID0gJ2h0dHBzOi8vbWVldHVwcGxhbm5lci5maXJlYmFzZWlvLmNvbS8nO1xuXHR2YXIgcmVmID0gbmV3IEZpcmViYXNlKGZiVVJMKTtcblxuXHR2YXIgYWxsQXV0aFNlcnZpY2VzID0ge1xuXHRcdGlzTG9nZ2VkSW46IGlzTG9nZ2VkSW5cblx0fTtcblxuXHRyZXR1cm4gYWxsQXV0aFNlcnZpY2VzO1xuXG5cdGZ1bmN0aW9uIGF1dGhEYXRhQ2FsbGJhY2soYXV0aERhdGEpIHtcblx0ICBcblx0ICBpZiAoYXV0aERhdGEpIHtcblx0ICAgICRsb2cuaW5mbyhcIlVzZXIgXCIgKyBhdXRoRGF0YS51aWQgKyBcIiBpcyBsb2dnZWQgaW4gd2l0aCBcIiArIGF1dGhEYXRhLnByb3ZpZGVyKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgJGxvZy5pbmZvKFwiVXNlciBpcyBsb2dnZWQgb3V0Li4uZHVtcGluZyB0aGVtIGJhY2sgdG8gbGFuZGluZyBwYWdlXCIpO1xuXHQgICAgLy9kdW1wIHRoZSB1c2VyIGJhY2sgb3V0XG5cdCAgICAkbG9jYXRpb24ucGF0aCgnLycpO1xuXHQgIH1cblx0fVxuXG5cdGZ1bmN0aW9uIGlzTG9nZ2VkSW4oKSB7XG5cdFx0Ly9jaGVjayB0aGUgdXNlciBhdXRoZW50aWNhaW9uIHN0YXRlXG5cdFx0JGxvZy5pbmZvKCdsb2dnaW5nIGZyb20gdGhlIGlzTG9nZ2VkSW4gTWV0aG9kJyk7XG5cdFx0cmVmLm9uQXV0aChhdXRoRGF0YUNhbGxiYWNrKTtcblx0fVxufVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ21lZXRVcEV2ZW50QXBwJylcbiAgICAuY29uZmlnKGNvbmZpZyk7XG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGNvbmZpZygkcm91dGVQcm92aWRlcikgeyAgIFxuICAgICRyb3V0ZVByb3ZpZGVyXG4gICAgLndoZW4oJy8nLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvbGFuZGluZ1BhZ2UuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ0xhbmRpbmdQYWdlQ29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xuICAgIH0pXG4gICAgLndoZW4oJy91c2VySW5mb3JtYXRpb24vOnVpZD8vOnRva2VuPycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy91c2VySW5mb3JtYXRpb24uaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1VzZXJJbmZvcm1hdGlvbkNvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgIHJlc29sdmU6IHsgLyogQG5nSW5qZWN0ICovXG4gICAgICAgICAgICB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlOiB1c2VyQXV0aGVudGljYXRpb25TZXJ2aWNlXG4gICAgICAgIH1cbiAgICB9KVxuICAgIC53aGVuKCcvdXNlckV2ZW50cy86dWlkPy86dG9rZW4/Jywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3VzZXJFdmVudHMuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1VzZXJFdmVudHNDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICByZXNvbHZlOiB7IC8qIEBuZ0luamVjdCAqL1xuICAgICAgICAgICAgdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZTogdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZVxuICAgICAgICB9XG4gICAgfSlcbiAgICAud2hlbignL2V2ZW50LzpldmVudElkPy86aG9zdElkPy86dWlkPy86dG9rZW4/Jywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2FuRXZlbnQuaHRtJyxcbiAgICAgICAgY29udHJvbGxlcjogJ0FuRXZlbnRDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICByZXNvbHZlOiB7IC8qIEBuZ0luamVjdCAqL1xuICAgICAgICAgICAgdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZTogdXNlckF1dGhlbnRpY2F0aW9uU2VydmljZVxuICAgICAgICB9XG4gICAgfSlcbiAgICAub3RoZXJ3aXNlKHtcbiAgICAgICAgcmVkaXJlY3RUbzogJy8nXG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHVzZXJBdXRoZW50aWNhdGlvblNlcnZpY2UoYXV0aFNlcnZpY2UpIHtcbiAgICBhdXRoU2VydmljZS5pc0xvZ2dlZEluKCk7XG59IiwiYW5ndWxhclxuXHQubW9kdWxlKCdtZWV0VXBFdmVudEFwcCcsIFtcblx0XHQnbmdSb3V0ZScsXG5cdFx0J25nVG91Y2gnLFxuXHRcdCdmaXJlYmFzZSdcblx0XSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
